{"sha": "00c8da145cb013e3ead0dba457a09404665feca9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwYzhkYTE0NWNiMDEzZTNlYWQwZGJhNDU3YTA5NDA0NjY1ZmVjYTk=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-09-03T10:49:37Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-09-03T10:49:37Z"}, "message": "Update primitive docs for rust 2021.", "tree": {"sha": "fe8e1b4bb4927044999570889f85fb639ca99cab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fe8e1b4bb4927044999570889f85fb639ca99cab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00c8da145cb013e3ead0dba457a09404665feca9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00c8da145cb013e3ead0dba457a09404665feca9", "html_url": "https://github.com/rust-lang/rust/commit/00c8da145cb013e3ead0dba457a09404665feca9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00c8da145cb013e3ead0dba457a09404665feca9/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbdff7fae941bce21fd3047f87777c84b866850e", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbdff7fae941bce21fd3047f87777c84b866850e", "html_url": "https://github.com/rust-lang/rust/commit/fbdff7fae941bce21fd3047f87777c84b866850e"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "261d0e648e2ef3df066bcecb92c7c7cf9cb1aa9e", "filename": "library/std/src/primitive_docs.rs", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/00c8da145cb013e3ead0dba457a09404665feca9/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00c8da145cb013e3ead0dba457a09404665feca9/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fprimitive_docs.rs?ref=00c8da145cb013e3ead0dba457a09404665feca9", "patch": "@@ -581,6 +581,8 @@ mod prim_pointer {}\n /// might be made consistent to the behavior of later editions.\n ///\n /// ```rust,edition2018\n+/// // Rust 2015 and 2018:\n+///\n /// # #![allow(array_into_iter)] // override our `deny(warnings)`\n /// let array: [i32; 3] = [0; 3];\n ///\n@@ -604,11 +606,13 @@ mod prim_pointer {}\n /// }\n /// ```\n ///\n-/// Starting in the 2021 edition, `array.into_iter()` will use `IntoIterator` normally to iterate\n+/// Starting in the 2021 edition, `array.into_iter()` uses `IntoIterator` normally to iterate\n /// by value, and `iter()` should be used to iterate by reference like previous editions.\n ///\n-/// ```rust,edition2021,ignore\n-/// # // FIXME: ignored because 2021 testing is still unstable\n+#[cfg_attr(bootstrap, doc = \"```rust,edition2021,ignore\")]\n+#[cfg_attr(not(bootstrap), doc = \"```rust,edition2021\")]\n+/// // Rust 2021:\n+///\n /// let array: [i32; 3] = [0; 3];\n ///\n /// // This iterates by reference:\n@@ -631,12 +635,12 @@ mod prim_pointer {}\n /// avoid the `into_iter` syntax on those editions. If an edition update is not\n /// viable/desired, there are multiple alternatives:\n /// * use `iter`, equivalent to the old behavior, creating references\n-/// * use [`array::IntoIter`], equivalent to the post-2021 behavior (Rust 1.51+)\n+/// * use [`IntoIterator::into_iter`], equivalent to the post-2021 behavior (Rust 1.53+)\n /// * replace `for ... in array.into_iter() {` with `for ... in array {`,\n ///   equivalent to the post-2021 behavior (Rust 1.53+)\n ///\n /// ```rust,edition2018\n-/// use std::array::IntoIter;\n+/// // Rust 2015 and 2018:\n ///\n /// let array: [i32; 3] = [0; 3];\n ///\n@@ -647,7 +651,7 @@ mod prim_pointer {}\n /// }\n ///\n /// // This iterates by value:\n-/// for item in IntoIter::new(array) {\n+/// for item in IntoIterator::into_iter(array) {\n ///     let x: i32 = item;\n ///     println!(\"{}\", x);\n /// }\n@@ -660,7 +664,7 @@ mod prim_pointer {}\n ///\n /// // IntoIter can also start a chain.\n /// // This iterates by value:\n-/// for item in IntoIter::new(array).enumerate() {\n+/// for item in IntoIterator::into_iter(array).enumerate() {\n ///     let (i, x): (usize, i32) = item;\n ///     println!(\"array[{}] = {}\", i, x);\n /// }"}]}