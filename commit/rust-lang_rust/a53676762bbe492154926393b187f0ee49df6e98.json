{"sha": "a53676762bbe492154926393b187f0ee49df6e98", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE1MzY3Njc2MmJiZTQ5MjE1NDkyNjM5M2IxODdmMGVlNDlkZjZlOTg=", "commit": {"author": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2017-07-21T12:02:52Z"}, "committer": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2017-07-21T12:32:00Z"}, "message": "rustllvm: update to SyncScope::ID", "tree": {"sha": "caa5dae437d0fc95b35d722d9c076abde5914dd3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/caa5dae437d0fc95b35d722d9c076abde5914dd3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a53676762bbe492154926393b187f0ee49df6e98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a53676762bbe492154926393b187f0ee49df6e98", "html_url": "https://github.com/rust-lang/rust/commit/a53676762bbe492154926393b187f0ee49df6e98", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a53676762bbe492154926393b187f0ee49df6e98/comments", "author": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48424c97490b3a449c57d8540529af4971386c4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/48424c97490b3a449c57d8540529af4971386c4a", "html_url": "https://github.com/rust-lang/rust/commit/48424c97490b3a449c57d8540529af4971386c4a"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "896c82245083246a25bd6f92e926ac853ff6c76f", "filename": "src/rustllvm/RustWrapper.cpp", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/a53676762bbe492154926393b187f0ee49df6e98/src%2Frustllvm%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/a53676762bbe492154926393b187f0ee49df6e98/src%2Frustllvm%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FRustWrapper.cpp?ref=a53676762bbe492154926393b187f0ee49df6e98", "patch": "@@ -267,6 +267,18 @@ enum class LLVMRustSynchronizationScope {\n   CrossThread,\n };\n \n+#if LLVM_VERSION_GE(5, 0)\n+static SyncScope::ID fromRust(LLVMRustSynchronizationScope Scope) {\n+  switch (Scope) {\n+  case LLVMRustSynchronizationScope::SingleThread:\n+    return SyncScope::SingleThread;\n+  case LLVMRustSynchronizationScope::CrossThread:\n+    return SyncScope::System;\n+  default:\n+    llvm_unreachable(\"bad SynchronizationScope.\");\n+  }\n+}\n+#else\n static SynchronizationScope fromRust(LLVMRustSynchronizationScope Scope) {\n   switch (Scope) {\n   case LLVMRustSynchronizationScope::SingleThread:\n@@ -277,6 +289,7 @@ static SynchronizationScope fromRust(LLVMRustSynchronizationScope Scope) {\n     llvm_unreachable(\"bad SynchronizationScope.\");\n   }\n }\n+#endif\n \n extern \"C\" LLVMValueRef\n LLVMRustBuildAtomicFence(LLVMBuilderRef B, LLVMAtomicOrdering Order,"}]}