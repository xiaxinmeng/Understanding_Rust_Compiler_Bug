{"sha": "8fe7ed02d5a88839ec832d36899822d431725942", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmZTdlZDAyZDVhODg4MzllYzgzMmQzNjg5OTgyMmQ0MzE3MjU5NDI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-07-11T02:33:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-11T02:33:14Z"}, "message": "Rollup merge of #62270 - agnxy:move-async-test, r=Centril,tmandry\n\nMove async-await tests from run-pass to ui\n\nfix #62236\n\nr? @Centril", "tree": {"sha": "6be24121f080b8d55513201227afd6245ff738ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6be24121f080b8d55513201227afd6245ff738ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8fe7ed02d5a88839ec832d36899822d431725942", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdJp/qCRBK7hj4Ov3rIwAAdHIIAHdmFcCSuAvqqoGZc4H7dCV5\nbqTfN0ByeRq1ihB53FKWe1NS6DAHxWTemORBlMOILEIaSdmKfwCVyE7n/AvOse4P\nYhvw6KXHluW2EyFkwMCX5+5ko2/FqSeYjxpU6baSzxDpBDauf31As96JS4m1uPAs\nb0GJX0klaRyWQI1nL27198wZmn1Xd6O4LgIclggDZJnDa6AjurFdq96VdQE5n/02\nvHk0Z08dBvYI3SgeG4vFEQ2axA8I8zfh6ZhVOYoIKMI928mxhGDL9KPcNnTp4IL7\ns7MnrbH8WUYJgJyMASkaJ7TxzqItRgtB7BYhrMGJ+30gTiYVHnrvOaDFQ5HkonU=\n=zF/0\n-----END PGP SIGNATURE-----\n", "payload": "tree 6be24121f080b8d55513201227afd6245ff738ec\nparent 618fc02fac7128d7372f85c7fa7cebf7b79c5fe7\nparent 128143c4e505aae88b7c6cde38aa7dab19e1e47c\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1562812394 +0200\ncommitter GitHub <noreply@github.com> 1562812394 +0200\n\nRollup merge of #62270 - agnxy:move-async-test, r=Centril,tmandry\n\nMove async-await tests from run-pass to ui\n\nfix #62236\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8fe7ed02d5a88839ec832d36899822d431725942", "html_url": "https://github.com/rust-lang/rust/commit/8fe7ed02d5a88839ec832d36899822d431725942", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8fe7ed02d5a88839ec832d36899822d431725942/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "618fc02fac7128d7372f85c7fa7cebf7b79c5fe7", "url": "https://api.github.com/repos/rust-lang/rust/commits/618fc02fac7128d7372f85c7fa7cebf7b79c5fe7", "html_url": "https://github.com/rust-lang/rust/commit/618fc02fac7128d7372f85c7fa7cebf7b79c5fe7"}, {"sha": "128143c4e505aae88b7c6cde38aa7dab19e1e47c", "url": "https://api.github.com/repos/rust-lang/rust/commits/128143c4e505aae88b7c6cde38aa7dab19e1e47c", "html_url": "https://github.com/rust-lang/rust/commit/128143c4e505aae88b7c6cde38aa7dab19e1e47c"}], "stats": {"total": 76, "additions": 10, "deletions": 66}, "files": [{"sha": "c21886f26f467e2176460fc166f95d0d9ee3cc6c", "filename": "src/test/run-pass/auxiliary/arc_wake.rs", "status": "removed", "additions": 0, "deletions": 64, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/618fc02fac7128d7372f85c7fa7cebf7b79c5fe7/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/618fc02fac7128d7372f85c7fa7cebf7b79c5fe7/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fauxiliary%2Farc_wake.rs?ref=618fc02fac7128d7372f85c7fa7cebf7b79c5fe7", "patch": "@@ -1,64 +0,0 @@\n-// edition:2018\n-\n-use std::sync::Arc;\n-use std::task::{\n-    Waker, RawWaker, RawWakerVTable,\n-};\n-\n-macro_rules! waker_vtable {\n-    ($ty:ident) => {\n-        &RawWakerVTable::new(\n-            clone_arc_raw::<$ty>,\n-            wake_arc_raw::<$ty>,\n-            wake_by_ref_arc_raw::<$ty>,\n-            drop_arc_raw::<$ty>,\n-        )\n-    };\n-}\n-\n-pub trait ArcWake {\n-    fn wake(self: Arc<Self>);\n-\n-    fn wake_by_ref(arc_self: &Arc<Self>) {\n-        arc_self.clone().wake()\n-    }\n-\n-    fn into_waker(wake: Arc<Self>) -> Waker where Self: Sized\n-    {\n-        let ptr = Arc::into_raw(wake) as *const ();\n-\n-        unsafe {\n-            Waker::from_raw(RawWaker::new(ptr, waker_vtable!(Self)))\n-        }\n-    }\n-}\n-\n-unsafe fn increase_refcount<T: ArcWake>(data: *const ()) {\n-    // Retain Arc by creating a copy\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    let arc_clone = arc.clone();\n-    // Forget the Arcs again, so that the refcount isn't decrased\n-    let _ = Arc::into_raw(arc);\n-    let _ = Arc::into_raw(arc_clone);\n-}\n-\n-unsafe fn clone_arc_raw<T: ArcWake>(data: *const ()) -> RawWaker {\n-    increase_refcount::<T>(data);\n-    RawWaker::new(data, waker_vtable!(T))\n-}\n-\n-unsafe fn drop_arc_raw<T: ArcWake>(data: *const ()) {\n-    // Drop Arc\n-    let _: Arc<T> = Arc::from_raw(data as *const T);\n-}\n-\n-unsafe fn wake_arc_raw<T: ArcWake>(data: *const ()) {\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    ArcWake::wake(arc);\n-}\n-\n-unsafe fn wake_by_ref_arc_raw<T: ArcWake>(data: *const ()) {\n-    let arc: Arc<T> = Arc::from_raw(data as *const T);\n-    ArcWake::wake_by_ref(&arc);\n-    let _ = Arc::into_raw(arc);\n-}"}, {"sha": "d0d4eb032fcb1e0a1fc8f2e843a439b30c803565", "filename": "src/test/ui/async-await/async-fn-size-moved-locals.rs", "status": "renamed", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size-moved-locals.rs?ref=8fe7ed02d5a88839ec832d36899822d431725942", "patch": "@@ -7,6 +7,9 @@\n //\n // See issue #59123 for a full explanation.\n \n+// ignore-wasm32-bare (sizes don't match)\n+// run-pass\n+\n // edition:2018\n \n #![feature(async_await)]", "previous_filename": "src/test/run-pass/async-await/async-fn-size-moved-locals.rs"}, {"sha": "c6b2ed13b0a8dab5539d7a8ab4d75dda07c1339c", "filename": "src/test/ui/async-await/async-fn-size.rs", "status": "renamed", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fasync-fn-size.rs?ref=8fe7ed02d5a88839ec832d36899822d431725942", "patch": "@@ -1,9 +1,10 @@\n+// run-pass\n+// aux-build:arc_wake.rs\n // edition:2018\n \n #![feature(async_await)]\n \n-#[path = \"../auxiliary/arc_wake.rs\"]\n-mod arc_wake;\n+extern crate arc_wake;\n \n use std::pin::Pin;\n use std::future::Future;", "previous_filename": "src/test/run-pass/async-await/async-fn-size.rs"}, {"sha": "a7da058de3081f7aa48cb3e3e98a327c566d8ac2", "filename": "src/test/ui/async-await/futures-api.rs", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Ffutures-api.rs?ref=8fe7ed02d5a88839ec832d36899822d431725942", "patch": "@@ -1,3 +1,5 @@\n+// run-pass\n+\n // aux-build:arc_wake.rs\n \n extern crate arc_wake;", "previous_filename": "src/test/run-pass/futures-api.rs"}, {"sha": "ad0b49fa4a219368211e25bd8e23591674d19bb5", "filename": "src/test/ui/async-await/issue-60709.rs", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fissue-60709.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fe7ed02d5a88839ec832d36899822d431725942/src%2Ftest%2Fui%2Fasync-await%2Fissue-60709.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissue-60709.rs?ref=8fe7ed02d5a88839ec832d36899822d431725942", "patch": "@@ -2,6 +2,8 @@\n // handled incorrectly in generators.\n // compile-flags: -Copt-level=z -Cdebuginfo=2 --edition=2018\n \n+// run-pass\n+\n #![feature(async_await)]\n #![allow(unused)]\n ", "previous_filename": "src/test/run-pass/async-await/issue-60709.rs"}]}