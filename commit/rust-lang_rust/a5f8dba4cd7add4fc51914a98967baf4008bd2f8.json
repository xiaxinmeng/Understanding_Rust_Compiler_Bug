{"sha": "a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "node_id": "C_kwDOAAsO6NoAKGE1ZjhkYmE0Y2Q3YWRkNGZjNTE5MTRhOTg5NjdiYWY0MDA4YmQyZjg", "commit": {"author": {"name": "Urgau", "email": "urgau@numericable.fr", "date": "2023-04-30T13:52:44Z"}, "committer": {"name": "Urgau", "email": "urgau@numericable.fr", "date": "2023-05-05T11:06:48Z"}, "message": "Improve check-cfg diagnostics (part 1)", "tree": {"sha": "c001cbdf89b7411df47faf0a726d5ef6cbe9bb73", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c001cbdf89b7411df47faf0a726d5ef6cbe9bb73"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "html_url": "https://github.com/rust-lang/rust/commit/a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/comments", "author": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d327d5b16840346d838a29fdbac49a66be216a08", "url": "https://api.github.com/repos/rust-lang/rust/commits/d327d5b16840346d838a29fdbac49a66be216a08", "html_url": "https://github.com/rust-lang/rust/commit/d327d5b16840346d838a29fdbac49a66be216a08"}], "stats": {"total": 78, "additions": 40, "deletions": 38}, "files": [{"sha": "5d32080a9989c07f82ba45b7f154c41809f24285", "filename": "compiler/rustc_attr/src/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -591,7 +591,7 @@ pub fn cfg_matches(\n                     \"unexpected `cfg` condition value\",\n                     BuiltinLintDiagnostics::UnexpectedCfg(\n                         (cfg.name, cfg.name_span),\n-                        cfg.value_span.map(|vs| (cfg.value.unwrap(), vs)),\n+                        cfg.value.map(|v| (v, cfg.value_span.unwrap())),\n                     ),\n                 );\n             }"}, {"sha": "63c25d8f030ad805b35e375ff2bf3820b7588ec7", "filename": "compiler/rustc_lint/src/context.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -773,7 +773,7 @@ pub trait LintContext: Sized {\n \n                     // Suggest the most probable if we found one\n                     if let Some(best_match) = find_best_match_for_name(&possibilities, name, None) {\n-                        db.span_suggestion(name_span, \"did you mean\", best_match, Applicability::MaybeIncorrect);\n+                        db.span_suggestion(name_span, \"there is an config with a similar name\", best_match, Applicability::MaybeIncorrect);\n                     }\n                 },\n                 BuiltinLintDiagnostics::UnexpectedCfg((name, name_span), Some((value, value_span))) => {\n@@ -794,19 +794,19 @@ pub trait LintContext: Sized {\n                             let mut possibilities = possibilities.iter().map(Symbol::as_str).collect::<Vec<_>>();\n                             possibilities.sort();\n \n-                            let possibilities = possibilities.join(\", \");\n-                            db.note(format!(\"expected values for `{name}` are: {possibilities}\"));\n+                            let possibilities = possibilities.join(\"`, `\");\n+                            let none = if have_none_possibility { \"(none), \" } else { \"\" };\n+\n+                            db.note(format!(\"expected values for `{name}` are: {none}`{possibilities}`\"));\n                         }\n \n                         // Suggest the most probable if we found one\n                         if let Some(best_match) = find_best_match_for_name(&possibilities, value, None) {\n-                            db.span_suggestion(value_span, \"did you mean\", format!(\"\\\"{best_match}\\\"\"), Applicability::MaybeIncorrect);\n+                            db.span_suggestion(value_span, \"there is an expected value with a similar name\", format!(\"\\\"{best_match}\\\"\"), Applicability::MaybeIncorrect);\n                         }\n-                    } else {\n+                    } else if have_none_possibility {\n                         db.note(format!(\"no expected value for `{name}`\"));\n-                        if name != sym::feature {\n-                            db.span_suggestion(name_span.shrink_to_hi().to(value_span), \"remove the value\", \"\", Applicability::MaybeIncorrect);\n-                        }\n+                        db.span_suggestion(name_span.shrink_to_hi().to(value_span), \"remove the value\", \"\", Applicability::MaybeIncorrect);\n                     }\n                 },\n                 BuiltinLintDiagnostics::DeprecatedWhereclauseLocation(new_span, suggestion) => {"}, {"sha": "03fb6f96fb5f984b900469ba968bc7132bd7c225", "filename": "tests/rustdoc-ui/check-cfg/check-cfg.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Frustdoc-ui%2Fcheck-cfg%2Fcheck-cfg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Frustdoc-ui%2Fcheck-cfg%2Fcheck-cfg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-ui%2Fcheck-cfg%2Fcheck-cfg.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -2,7 +2,7 @@ warning: unexpected `cfg` condition name\n   --> $DIR/check-cfg.rs:5:7\n    |\n LL | #[cfg(uniz)]\n-   |       ^^^^ help: did you mean: `unix`\n+   |       ^^^^ help: there is a config with a similar name: `unix`\n    |\n    = note: `#[warn(unexpected_cfgs)]` on by default\n "}, {"sha": "f84543c20725470973bd3432dabd48b5fc008c6e", "filename": "tests/rustdoc-ui/doctest/check-cfg-test.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Frustdoc-ui%2Fdoctest%2Fcheck-cfg-test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Frustdoc-ui%2Fdoctest%2Fcheck-cfg-test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-ui%2Fdoctest%2Fcheck-cfg-test.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,7 +4,7 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(feature = \"invalid\")]\n    |       ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: test\n+   = note: expected values for `feature` are: `test`\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n warning: 1 warning emitted"}, {"sha": "70a967c0e5f6490d038816c97ae2527dbf0ad0aa", "filename": "tests/ui/check-cfg/compact-values.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fcompact-values.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fcompact-values.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fcompact-values.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,7 +4,7 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(target(os = \"linux\", arch = \"X\"))]\n    |                            ^^^^^^^^^^\n    |\n-   = note: expected values for `target_arch` are: aarch64, arm, avr, bpf, hexagon, loongarch64, m68k, mips, mips64, msp430, nvptx64, powerpc, powerpc64, riscv32, riscv64, s390x, sparc, sparc64, wasm32, wasm64, x86, x86_64\n+   = note: expected values for `target_arch` are: `aarch64`, `arm`, `avr`, `bpf`, `hexagon`, `loongarch64`, `m68k`, `mips`, `mips64`, `msp430`, `nvptx64`, `powerpc`, `powerpc64`, `riscv32`, `riscv64`, `s390x`, `sparc`, `sparc64`, `wasm32`, `wasm64`, `x86`, `x86_64`\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n warning: 1 warning emitted"}, {"sha": "01ee4f209f1e629270255e58e4b7f8e9e5210598", "filename": "tests/ui/check-cfg/invalid-cfg-name.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-name.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -2,7 +2,7 @@ warning: unexpected `cfg` condition name\n   --> $DIR/invalid-cfg-name.rs:7:7\n    |\n LL | #[cfg(widnows)]\n-   |       ^^^^^^^ help: did you mean: `windows`\n+   |       ^^^^^^^ help: there is an config with a similar name: `windows`\n    |\n    = note: `#[warn(unexpected_cfgs)]` on by default\n "}, {"sha": "0ef8a06dc92e25600ade4a2566b527c91046ff25", "filename": "tests/ui/check-cfg/invalid-cfg-value.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-value.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-value.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Finvalid-cfg-value.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,9 +4,9 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(feature = \"sedre\")]\n    |       ^^^^^^^^^^-------\n    |                 |\n-   |                 help: did you mean: `\"serde\"`\n+   |                 help: there is an expected value with a similar name: `\"serde\"`\n    |\n-   = note: expected values for `feature` are: full, serde\n+   = note: expected values for `feature` are: `full`, `serde`\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n warning: unexpected `cfg` condition value\n@@ -15,7 +15,7 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(feature = \"rand\")]\n    |       ^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: full, serde\n+   = note: expected values for `feature` are: `full`, `serde`\n \n warning: unexpected condition value `rand` for condition name `feature`\n    |"}, {"sha": "e3738af13ff5f14fa9575c7560c451056a61e573", "filename": "tests/ui/check-cfg/mix.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fmix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fmix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fmix.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -2,7 +2,7 @@ warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:11:7\n    |\n LL | #[cfg(widnows)]\n-   |       ^^^^^^^ help: did you mean: `windows`\n+   |       ^^^^^^^ help: there is an config with a similar name: `windows`\n    |\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n@@ -12,15 +12,15 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(feature = \"bar\")]\n    |       ^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/mix.rs:22:7\n    |\n LL | #[cfg(feature = \"zebra\")]\n    |       ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:26:12\n@@ -40,23 +40,23 @@ warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:35:10\n    |\n LL |     cfg!(widnows);\n-   |          ^^^^^^^ help: did you mean: `windows`\n+   |          ^^^^^^^ help: there is an config with a similar name: `windows`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/mix.rs:38:10\n    |\n LL |     cfg!(feature = \"bar\");\n    |          ^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/mix.rs:40:10\n    |\n LL |     cfg!(feature = \"zebra\");\n    |          ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:42:10\n@@ -82,7 +82,7 @@ warning: unexpected `cfg` condition value\n LL |     cfg!(any(feature = \"bad\", windows));\n    |              ^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:50:23\n@@ -126,7 +126,7 @@ warning: unexpected `cfg` condition value\n LL |     cfg!(any(unix, feature = \"zebra\"));\n    |                    ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:62:14\n@@ -140,7 +140,7 @@ warning: unexpected `cfg` condition value\n LL |     cfg!(any(xxx, feature = \"zebra\"));\n    |                   ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/mix.rs:65:14\n@@ -160,23 +160,23 @@ warning: unexpected `cfg` condition value\n LL |     cfg!(all(feature = \"zebra\", feature = \"zebra\", feature = \"zebra\"));\n    |              ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/mix.rs:68:33\n    |\n LL |     cfg!(all(feature = \"zebra\", feature = \"zebra\", feature = \"zebra\"));\n    |                                 ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/mix.rs:68:52\n    |\n LL |     cfg!(all(feature = \"zebra\", feature = \"zebra\", feature = \"zebra\"));\n    |                                                    ^^^^^^^^^^^^^^^^^\n    |\n-   = note: expected values for `feature` are: foo\n+   = note: expected values for `feature` are: `foo`\n \n warning: 27 warnings emitted\n "}, {"sha": "ffa87dc58f20393d42aa1801884c5754834bd798", "filename": "tests/ui/check-cfg/no-values.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fno-values.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fno-values.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fno-values.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -2,7 +2,9 @@ warning: unexpected `cfg` condition value\n   --> $DIR/no-values.rs:6:7\n    |\n LL | #[cfg(feature = \"foo\")]\n-   |       ^^^^^^^^^^^^^^^\n+   |       ^^^^^^^--------\n+   |              |\n+   |              help: remove the value\n    |\n    = note: no expected value for `feature`\n    = note: `#[warn(unexpected_cfgs)]` on by default"}, {"sha": "8500fc0880503adc030de7335d0c75958d03040a", "filename": "tests/ui/check-cfg/values-target-json.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fvalues-target-json.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fvalues-target-json.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fvalues-target-json.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,9 +4,9 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(target_os = \"linuz\")]\n    |       ^^^^^^^^^^^^-------\n    |                   |\n-   |                   help: did you mean: `\"linux\"`\n+   |                   help: there is an expected value with a similar name: `\"linux\"`\n    |\n-   = note: expected values for `target_os` are: aix, android, cuda, dragonfly, emscripten, ericos, espidf, freebsd, fuchsia, haiku, hermit, horizon, illumos, ios, l4re, linux, macos, netbsd, none, nto, openbsd, psp, redox, solaris, solid_asp3, tvos, uefi, unknown, vita, vxworks, wasi, watchos, windows, xous\n+   = note: expected values for `target_os` are: `aix`, `android`, `cuda`, `dragonfly`, `emscripten`, `ericos`, `espidf`, `freebsd`, `fuchsia`, `haiku`, `hermit`, `horizon`, `illumos`, `ios`, `l4re`, `linux`, `macos`, `netbsd`, `none`, `nto`, `openbsd`, `psp`, `redox`, `solaris`, `solid_asp3`, `tvos`, `uefi`, `unknown`, `vita`, `vxworks`, `wasi`, `watchos`, `windows`, `xous`\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n warning: 1 warning emitted"}, {"sha": "987339a222a1286fea42a01111adc12c9a12752e", "filename": "tests/ui/check-cfg/well-known-names.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fwell-known-names.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fwell-known-names.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fwell-known-names.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,7 +4,7 @@ warning: unexpected `cfg` condition name\n LL | #[cfg(target_oz = \"linux\")]\n    |       ---------^^^^^^^^^^\n    |       |\n-   |       help: did you mean: `target_os`\n+   |       help: there is an config with a similar name: `target_os`\n    |\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n@@ -14,13 +14,13 @@ warning: unexpected `cfg` condition name\n LL | #[cfg(features = \"foo\")]\n    |       --------^^^^^^^^\n    |       |\n-   |       help: did you mean: `feature`\n+   |       help: there is an config with a similar name: `feature`\n \n warning: unexpected `cfg` condition name\n   --> $DIR/well-known-names.rs:20:7\n    |\n LL | #[cfg(uniw)]\n-   |       ^^^^ help: did you mean: `unix`\n+   |       ^^^^ help: there is an config with a similar name: `unix`\n \n warning: 3 warnings emitted\n "}, {"sha": "4bd8e6ae09f2902a1be202dd0bdce8bfeec398a0", "filename": "tests/ui/check-cfg/well-known-values.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fwell-known-values.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5f8dba4cd7add4fc51914a98967baf4008bd2f8/tests%2Fui%2Fcheck-cfg%2Fwell-known-values.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcheck-cfg%2Fwell-known-values.stderr?ref=a5f8dba4cd7add4fc51914a98967baf4008bd2f8", "patch": "@@ -4,9 +4,9 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(target_os = \"linuz\")]\n    |       ^^^^^^^^^^^^-------\n    |                   |\n-   |                   help: did you mean: `\"linux\"`\n+   |                   help: there is an expected value with a similar name: `\"linux\"`\n    |\n-   = note: expected values for `target_os` are: aix, android, cuda, dragonfly, emscripten, espidf, freebsd, fuchsia, haiku, hermit, horizon, illumos, ios, l4re, linux, macos, netbsd, none, nto, openbsd, psp, redox, solaris, solid_asp3, tvos, uefi, unknown, vita, vxworks, wasi, watchos, windows, xous\n+   = note: expected values for `target_os` are: `aix`, `android`, `cuda`, `dragonfly`, `emscripten`, `espidf`, `freebsd`, `fuchsia`, `haiku`, `hermit`, `horizon`, `illumos`, `ios`, `l4re`, `linux`, `macos`, `netbsd`, `none`, `nto`, `openbsd`, `psp`, `redox`, `solaris`, `solid_asp3`, `tvos`, `uefi`, `unknown`, `vita`, `vxworks`, `wasi`, `watchos`, `windows`, `xous`\n    = note: `#[warn(unexpected_cfgs)]` on by default\n \n warning: unexpected `cfg` condition value\n@@ -15,9 +15,9 @@ warning: unexpected `cfg` condition value\n LL | #[cfg(target_has_atomic = \"0\")]\n    |       ^^^^^^^^^^^^^^^^^^^^---\n    |                           |\n-   |                           help: did you mean: `\"8\"`\n+   |                           help: there is an expected value with a similar name: `\"8\"`\n    |\n-   = note: expected values for `target_has_atomic` are: 128, 16, 32, 64, 8, ptr\n+   = note: expected values for `target_has_atomic` are: (none), `128`, `16`, `32`, `64`, `8`, `ptr`\n \n warning: unexpected `cfg` condition value\n   --> $DIR/well-known-values.rs:21:7"}]}