{"sha": "a1cb19444f27db434183daa003bad89be9491564", "node_id": "C_kwDOAAsO6NoAKGExY2IxOTQ0NGYyN2RiNDM0MTgzZGFhMDAzYmFkODliZTk0OTE1NjQ", "commit": {"author": {"name": "Will Crichton", "email": "wcrichto@cs.stanford.edu", "date": "2021-09-14T16:50:47Z"}, "committer": {"name": "Will Crichton", "email": "wcrichto@cs.stanford.edu", "date": "2021-10-07T02:44:51Z"}, "message": "Add styles for non-white themes\n\nTweak colors\n\nTabs\n\nNew link heading style", "tree": {"sha": "885f3ec4bb7fb81614ec4cf7715c891a73db04cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/885f3ec4bb7fb81614ec4cf7715c891a73db04cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1cb19444f27db434183daa003bad89be9491564", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1cb19444f27db434183daa003bad89be9491564", "html_url": "https://github.com/rust-lang/rust/commit/a1cb19444f27db434183daa003bad89be9491564", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1cb19444f27db434183daa003bad89be9491564/comments", "author": {"login": "willcrichton", "id": 663326, "node_id": "MDQ6VXNlcjY2MzMyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/663326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willcrichton", "html_url": "https://github.com/willcrichton", "followers_url": "https://api.github.com/users/willcrichton/followers", "following_url": "https://api.github.com/users/willcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/willcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/willcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willcrichton/subscriptions", "organizations_url": "https://api.github.com/users/willcrichton/orgs", "repos_url": "https://api.github.com/users/willcrichton/repos", "events_url": "https://api.github.com/users/willcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/willcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "willcrichton", "id": 663326, "node_id": "MDQ6VXNlcjY2MzMyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/663326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/willcrichton", "html_url": "https://github.com/willcrichton", "followers_url": "https://api.github.com/users/willcrichton/followers", "following_url": "https://api.github.com/users/willcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/willcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/willcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/willcrichton/subscriptions", "organizations_url": "https://api.github.com/users/willcrichton/orgs", "repos_url": "https://api.github.com/users/willcrichton/repos", "events_url": "https://api.github.com/users/willcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/willcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18edcf86d2870de7975f1142f272b9a1236cdef4", "url": "https://api.github.com/repos/rust-lang/rust/commits/18edcf86d2870de7975f1142f272b9a1236cdef4", "html_url": "https://github.com/rust-lang/rust/commit/18edcf86d2870de7975f1142f272b9a1236cdef4"}], "stats": {"total": 76, "additions": 61, "deletions": 15}, "files": [{"sha": "6b30abb8260d2a80d3fe3cf67a510e9b1fae11e5", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=a1cb19444f27db434183daa003bad89be9491564", "patch": "@@ -2482,16 +2482,6 @@ fn render_call_locations(\n         id\n     );\n \n-    // Link to the source file containing a given example\n-    let example_url = |call_data: &CallData| -> String {\n-        format!(\n-            r#\"<a href=\"{root}{url}\" target=\"_blank\">{name}</a>\"#,\n-            root = cx.root_path(),\n-            url = call_data.url,\n-            name = call_data.display_name\n-        )\n-    };\n-\n     // Generate the HTML for a single example, being the title and code block\n     let tcx = cx.tcx();\n     let write_example = |w: &mut Buffer, (path, call_data): (&PathBuf, &CallData)| -> bool {\n@@ -2534,9 +2524,13 @@ fn render_call_locations(\n         write!(\n             w,\n             r#\"<div class=\"scraped-example\" data-locs=\"{locations}\">\n-                <div class=\"scraped-example-title\">{title}</div>\n-                 <div class=\"code-wrapper\">\"#,\n-            title = example_url(call_data),\n+                <div class=\"scraped-example-title\">\n+                   {name} <a href=\"{root}{url}\" target=\"_blank\">[src]</a>\n+                </div>\n+                <div class=\"code-wrapper\">\"#,\n+            root = cx.root_path(),\n+            url = call_data.url,\n+            name = call_data.display_name,\n             // The locations are encoded as a data attribute, so they can be read\n             // later by the JS for interactions.\n             locations = serde_json::to_string(&line_ranges).unwrap(),\n@@ -2639,7 +2633,13 @@ fn render_call_locations(\n                 r#\"<div class=\"example-links\">Additional examples can be found in:<br /><ul>\"#\n             );\n             it.for_each(|(_, call_data)| {\n-                write!(w, \"<li>{}</li>\", example_url(call_data));\n+                write!(\n+                    w,\n+                    r#\"<li><a href=\"{}{}\" target=\"_blank\">{}</a></li>\"#,\n+                    root = cx.root_path(),\n+                    url = call_data.url,\n+                    name = call_data.display_name\n+                );\n             });\n             write!(w, \"</ul></div>\");\n         }"}, {"sha": "b35412bdc2a9056368e0831d9632c97a4f61704e", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=a1cb19444f27db434183daa003bad89be9491564", "patch": "@@ -1976,7 +1976,10 @@ details.undocumented[open] > summary::before {\n \n .scraped-example-title {\n \tfont-family: 'Fira Sans';\n-\tfont-weight: 500;\n+}\n+\n+.scraped-example-title a {\n+\tmargin-left: 5px;\n }\n \n .scraped-example:not(.expanded) .code-wrapper pre.line-numbers,\n@@ -2115,7 +2118,12 @@ h1 + .scraped-example {\n \tmargin-bottom: 20px;\n }\n \n+.more-scraped-examples .scraped-example:last-child {\n+\tmargin-bottom: 0;\n+}\n+\n .example-links a {\n+\tmargin-top: 20px;\n \tfont-family: 'Fira Sans';\n }\n "}, {"sha": "4ce7a372e3956a1f024a88135d380a98bb5fa69d", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=a1cb19444f27db434183daa003bad89be9491564", "patch": "@@ -613,3 +613,22 @@ div.files > .selected {\n input:checked + .slider {\n \tbackground-color: #ffb454 !important;\n }\n+\n+.scraped-example .example-wrap .rust span.highlight {\n+\tbackground: rgb(91, 59, 1);\n+}\n+.scraped-example .example-wrap .rust span.highlight.focus {\n+\tbackground: rgb(124, 75, 15);\n+}\n+.scraped-example:not(.expanded) .code-wrapper:before {\n+\tbackground: linear-gradient(to bottom, rgba(15, 20, 25, 1), rgba(15, 20, 25, 0));\n+}\n+.scraped-example:not(.expanded) .code-wrapper:after {\n+\tbackground: linear-gradient(to top, rgba(15, 20, 25, 1), rgba(15, 20, 25, 0));\n+}\n+.toggle-line-inner {\n+\tbackground: #616161;\n+}\n+.toggle-line:hover .toggle-line-inner {\n+\tbackground: ##898989;\n+}"}, {"sha": "aa6e7b2763adc8d858456a57528dbfeeafa51b00", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/a1cb19444f27db434183daa003bad89be9491564/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=a1cb19444f27db434183daa003bad89be9491564", "patch": "@@ -485,3 +485,22 @@ div.files > .selected {\n .setting-line > .title {\n \tborder-bottom-color: #ddd;\n }\n+\n+.scraped-example .example-wrap .rust span.highlight {\n+\tbackground: rgb(91, 59, 1);\n+}\n+.scraped-example .example-wrap .rust span.highlight.focus {\n+\tbackground: rgb(124, 75, 15);\n+}\n+.scraped-example:not(.expanded) .code-wrapper:before {\n+\tbackground: linear-gradient(to bottom, rgba(53, 53, 53, 1), rgba(53, 53, 53, 0));\n+}\n+.scraped-example:not(.expanded) .code-wrapper:after {\n+\tbackground: linear-gradient(to top, rgba(53, 53, 53, 1), rgba(53, 53, 53, 0));\n+}\n+.toggle-line-inner {\n+\tbackground: #616161;\n+}\n+.toggle-line:hover .toggle-line-inner {\n+\tbackground: ##898989;\n+}"}]}