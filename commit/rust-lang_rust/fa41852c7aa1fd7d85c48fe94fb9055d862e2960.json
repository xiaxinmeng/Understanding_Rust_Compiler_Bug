{"sha": "fa41852c7aa1fd7d85c48fe94fb9055d862e2960", "node_id": "C_kwDOAAsO6NoAKGZhNDE4NTJjN2FhMWZkN2Q4NWM0OGZlOTRmYjkwNTVkODYyZTI5NjA", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2022-05-01T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2022-05-01T12:58:29Z"}, "message": "Use reverse postorder in `non_ssa_locals`\n\nThe reverse postorder, unlike preorder, is now cached inside the MIR\nbody. Code generation uses reverse postorder anyway, so it might be\na small perf improvement to use it here as well.", "tree": {"sha": "9469cb8a29dda8e67ea29f879ab0d4a6b13bbc02", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9469cb8a29dda8e67ea29f879ab0d4a6b13bbc02"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa41852c7aa1fd7d85c48fe94fb9055d862e2960", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa41852c7aa1fd7d85c48fe94fb9055d862e2960", "html_url": "https://github.com/rust-lang/rust/commit/fa41852c7aa1fd7d85c48fe94fb9055d862e2960", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa41852c7aa1fd7d85c48fe94fb9055d862e2960/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f75d884046e07bb26edeaba9b8c982dc97485fd5", "url": "https://api.github.com/repos/rust-lang/rust/commits/f75d884046e07bb26edeaba9b8c982dc97485fd5", "html_url": "https://github.com/rust-lang/rust/commit/f75d884046e07bb26edeaba9b8c982dc97485fd5"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "fa39e8dd247d5071d3dda5639a18ff2e211276ad", "filename": "compiler/rustc_codegen_ssa/src/mir/analyze.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fa41852c7aa1fd7d85c48fe94fb9055d862e2960/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa41852c7aa1fd7d85c48fe94fb9055d862e2960/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fmir%2Fanalyze.rs?ref=fa41852c7aa1fd7d85c48fe94fb9055d862e2960", "patch": "@@ -40,9 +40,9 @@ pub fn non_ssa_locals<'a, 'tcx, Bx: BuilderMethods<'a, 'tcx>>(\n     }\n \n     // If there exists a local definition that dominates all uses of that local,\n-    // the definition should be visited first. Traverse blocks in preorder which\n+    // the definition should be visited first. Traverse blocks in an order that\n     // is a topological sort of dominance partial order.\n-    for (bb, data) in traversal::preorder(&mir) {\n+    for (bb, data) in traversal::reverse_postorder(&mir) {\n         analyzer.visit_basic_block_data(bb, data);\n     }\n "}]}