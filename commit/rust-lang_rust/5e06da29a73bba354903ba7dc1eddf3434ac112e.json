{"sha": "5e06da29a73bba354903ba7dc1eddf3434ac112e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlMDZkYTI5YTczYmJhMzU0OTAzYmE3ZGMxZWRkZjM0MzRhYzExMmU=", "commit": {"author": {"name": "Jakub Hlusi\u010dka", "email": "jakub.hlusicka@email.cz", "date": "2016-08-06T22:09:54Z"}, "committer": {"name": "Jakub Hlusi\u010dka", "email": "jakub.hlusicka@email.cz", "date": "2016-08-06T22:09:54Z"}, "message": "E0131 updated to new format", "tree": {"sha": "aa85ea2a97c2a59f1efd2e6998c42d8d05458578", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa85ea2a97c2a59f1efd2e6998c42d8d05458578"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e06da29a73bba354903ba7dc1eddf3434ac112e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e06da29a73bba354903ba7dc1eddf3434ac112e", "html_url": "https://github.com/rust-lang/rust/commit/5e06da29a73bba354903ba7dc1eddf3434ac112e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e06da29a73bba354903ba7dc1eddf3434ac112e/comments", "author": null, "committer": null, "parents": [{"sha": "444ff9fbfb1f2a8e6645f67684f8a9ad99b343d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/444ff9fbfb1f2a8e6645f67684f8a9ad99b343d3", "html_url": "https://github.com/rust-lang/rust/commit/444ff9fbfb1f2a8e6645f67684f8a9ad99b343d3"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "65e00705121a7e6dcc5745d3034f10d5c0550053", "filename": "src/librustc_typeck/lib.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/5e06da29a73bba354903ba7dc1eddf3434ac112e/src%2Flibrustc_typeck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e06da29a73bba354903ba7dc1eddf3434ac112e/src%2Flibrustc_typeck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Flib.rs?ref=5e06da29a73bba354903ba7dc1eddf3434ac112e", "patch": "@@ -211,11 +211,15 @@ fn check_main_fn_ty(ccx: &CrateCtxt,\n             match tcx.map.find(main_id) {\n                 Some(hir_map::NodeItem(it)) => {\n                     match it.node {\n-                        hir::ItemFn(_, _, _, _, ref ps, _)\n-                        if ps.is_parameterized() => {\n-                            span_err!(ccx.tcx.sess, main_span, E0131,\n-                                      \"main function is not allowed to have type parameters\");\n-                            return;\n+                        hir::ItemFn(_, _, _, _, ref generics, _) => {\n+                            if let Some(gen_span) = generics.span() {\n+                                struct_span_err!(ccx.tcx.sess, gen_span, E0131,\n+                                         \"main function is not allowed to have type parameters\")\n+                                    .span_label(gen_span,\n+                                                &format!(\"main cannot have type parameters\"))\n+                                    .emit();\n+                                return;\n+                            }\n                         }\n                         _ => ()\n                     }"}, {"sha": "e6e924e2d966fd9cc8a335060afe22098ed44b7a", "filename": "src/test/compile-fail/E0131.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5e06da29a73bba354903ba7dc1eddf3434ac112e/src%2Ftest%2Fcompile-fail%2FE0131.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5e06da29a73bba354903ba7dc1eddf3434ac112e/src%2Ftest%2Fcompile-fail%2FE0131.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0131.rs?ref=5e06da29a73bba354903ba7dc1eddf3434ac112e", "patch": "@@ -8,5 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-fn main<T>() { //~ ERROR E0131\n+fn main<T>() {\n+    //~^ ERROR E0131\n+    //~| NOTE main cannot have type parameters\n }"}]}