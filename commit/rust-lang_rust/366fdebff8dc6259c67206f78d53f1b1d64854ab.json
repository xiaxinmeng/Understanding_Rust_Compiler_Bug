{"sha": "366fdebff8dc6259c67206f78d53f1b1d64854ab", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2NmZkZWJmZjhkYzYyNTljNjcyMDZmNzhkNTNmMWIxZDY0ODU0YWI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-09-30T14:19:08Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-10-01T12:38:36Z"}, "message": "Add new rustdoc-ui test to ensuire that rustdoc feature isn't passed down to doctests", "tree": {"sha": "b6dda7b299ed5c82651c3bba5d526c72edd4a87a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6dda7b299ed5c82651c3bba5d526c72edd4a87a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/366fdebff8dc6259c67206f78d53f1b1d64854ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/366fdebff8dc6259c67206f78d53f1b1d64854ab", "html_url": "https://github.com/rust-lang/rust/commit/366fdebff8dc6259c67206f78d53f1b1d64854ab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/366fdebff8dc6259c67206f78d53f1b1d64854ab/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "445e7350f2a0a776b541ddca7b028a804639b40f", "url": "https://api.github.com/repos/rust-lang/rust/commits/445e7350f2a0a776b541ddca7b028a804639b40f", "html_url": "https://github.com/rust-lang/rust/commit/445e7350f2a0a776b541ddca7b028a804639b40f"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "d0ead4136575fac9dfad2f6f7965f26e418bbd01", "filename": "src/test/rustdoc-ui/doc-test-rustdoc-feature.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/366fdebff8dc6259c67206f78d53f1b1d64854ab/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.rs", "raw_url": "https://github.com/rust-lang/rust/raw/366fdebff8dc6259c67206f78d53f1b1d64854ab/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.rs?ref=366fdebff8dc6259c67206f78d53f1b1d64854ab", "patch": "@@ -0,0 +1,14 @@\n+// build-pass\n+// compile-flags:--test\n+// normalize-stdout-test: \"src/test/rustdoc-ui\" -> \"$$DIR\"\n+\n+#![feature(doc_cfg)]\n+\n+// Make sure `cfg(rustdoc)` is set when finding doctests but not inside the doctests.\n+\n+/// ```\n+/// #![feature(doc_cfg)]\n+/// assert!(!cfg!(rustdoc));\n+/// ```\n+#[cfg(rustdoc)]\n+pub struct Foo;"}, {"sha": "f2525c2dbec2138851370aaa8bba805e71f210fd", "filename": "src/test/rustdoc-ui/doc-test-rustdoc-feature.stdout", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/366fdebff8dc6259c67206f78d53f1b1d64854ab/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/366fdebff8dc6259c67206f78d53f1b1d64854ab/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-test-rustdoc-feature.stdout?ref=366fdebff8dc6259c67206f78d53f1b1d64854ab", "patch": "@@ -0,0 +1,6 @@\n+\n+running 1 test\n+test $DIR/doc-test-rustdoc-feature.rs - Foo (line 9) ... ok\n+\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n+"}]}