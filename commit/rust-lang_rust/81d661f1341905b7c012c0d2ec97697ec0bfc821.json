{"sha": "81d661f1341905b7c012c0d2ec97697ec0bfc821", "node_id": "C_kwDOAAsO6NoAKDgxZDY2MWYxMzQxOTA1YjdjMDEyYzBkMmVjOTc2OTdlYzBiZmM4MjE", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-06-01T10:28:27Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-06-01T10:28:27Z"}, "message": "bump xargo version, and tweak xargo caching", "tree": {"sha": "4f047bd869e3dc5d2d731aaa85e6d42c980e9489", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f047bd869e3dc5d2d731aaa85e6d42c980e9489"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81d661f1341905b7c012c0d2ec97697ec0bfc821", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81d661f1341905b7c012c0d2ec97697ec0bfc821", "html_url": "https://github.com/rust-lang/rust/commit/81d661f1341905b7c012c0d2ec97697ec0bfc821", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81d661f1341905b7c012c0d2ec97697ec0bfc821/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47771d6b786e3f33b307c34e0d88a6a89e5da14c", "url": "https://api.github.com/repos/rust-lang/rust/commits/47771d6b786e3f33b307c34e0d88a6a89e5da14c", "html_url": "https://github.com/rust-lang/rust/commit/47771d6b786e3f33b307c34e0d88a6a89e5da14c"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "84bf54246e1d06bbc223a97177a055b1c15b8bf7", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/81d661f1341905b7c012c0d2ec97697ec0bfc821/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/81d661f1341905b7c012c0d2ec97697ec0bfc821/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=81d661f1341905b7c012c0d2ec97697ec0bfc821", "patch": "@@ -57,14 +57,15 @@ jobs:\n             # contains package information of crates installed via `cargo install`.\n             ~/.cargo/.crates.toml\n             ~/.cargo/.crates2.json\n-          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock') }}-xargo0.3.25\n+          key: ${{ runner.os }}-cargo-${{ hashFiles('**/Cargo.lock', 'cargo-miri/version.rs') }}\n           restore-keys: ${{ runner.os }}-cargo\n \n       - name: Install rustup-toolchain-install-master and xargo\n         shell: bash\n         run: |\n           cargo install rustup-toolchain-install-master\n-          cargo install xargo\n+          # Only install xargo if we don't have it cached\n+          if ! which xargo; then cargo install xargo; fi\n \n       - name: Install \"master\" toolchain\n         shell: bash"}, {"sha": "fd4af14e7ded409d22bcd3a367728d450d735cb4", "filename": "cargo-miri/bin.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/81d661f1341905b7c012c0d2ec97697ec0bfc821/cargo-miri%2Fbin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81d661f1341905b7c012c0d2ec97697ec0bfc821/cargo-miri%2Fbin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fbin.rs?ref=81d661f1341905b7c012c0d2ec97697ec0bfc821", "patch": "@@ -1,3 +1,5 @@\n+mod version;\n+\n use std::env;\n use std::ffi::{OsStr, OsString};\n use std::fmt::Write as _;\n@@ -9,10 +11,9 @@ use std::path::{Path, PathBuf};\n use std::process::{self, Command};\n \n use serde::{Deserialize, Serialize};\n-\n use rustc_version::VersionMeta;\n \n-const XARGO_MIN_VERSION: (u32, u32, u32) = (0, 3, 23);\n+use version::*;\n \n const CARGO_MIRI_HELP: &str = r#\"Runs binary crates and tests in Miri\n "}, {"sha": "366e90df179835ed89d6dffc5932e724a7d4a136", "filename": "cargo-miri/version.rs", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/81d661f1341905b7c012c0d2ec97697ec0bfc821/cargo-miri%2Fversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81d661f1341905b7c012c0d2ec97697ec0bfc821/cargo-miri%2Fversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fversion.rs?ref=81d661f1341905b7c012c0d2ec97697ec0bfc821", "patch": "@@ -0,0 +1,2 @@\n+// We put this in a separate file so that it can be hashed for GHA caching.\n+pub const XARGO_MIN_VERSION: (u32, u32, u32) = (0, 3, 26);"}]}