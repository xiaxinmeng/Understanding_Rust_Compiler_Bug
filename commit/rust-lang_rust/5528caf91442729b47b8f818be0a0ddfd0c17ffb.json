{"sha": "5528caf91442729b47b8f818be0a0ddfd0c17ffb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1MjhjYWY5MTQ0MjcyOWI0N2I4ZjgxOGJlMGEwZGRmZDBjMTdmZmI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-22T15:38:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-22T15:38:13Z"}, "message": "Auto merge of #74566 - lzutao:guard, r=petrochenkov\n\nGate if-let guard feature\n\nEnhanced on #74315. That PR is in crater queue so I don't want to push to it.\n\nClose  #74232\ncc #51114", "tree": {"sha": "2331266a569b75c5acf838831089ea02f034858d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2331266a569b75c5acf838831089ea02f034858d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5528caf91442729b47b8f818be0a0ddfd0c17ffb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5528caf91442729b47b8f818be0a0ddfd0c17ffb", "html_url": "https://github.com/rust-lang/rust/commit/5528caf91442729b47b8f818be0a0ddfd0c17ffb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5528caf91442729b47b8f818be0a0ddfd0c17ffb/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "527a685e40d8fbe61442bdbd510c2b4e1d248019", "url": "https://api.github.com/repos/rust-lang/rust/commits/527a685e40d8fbe61442bdbd510c2b4e1d248019", "html_url": "https://github.com/rust-lang/rust/commit/527a685e40d8fbe61442bdbd510c2b4e1d248019"}, {"sha": "ef50477c786016bf1712a34155d067b407e35cc0", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef50477c786016bf1712a34155d067b407e35cc0", "html_url": "https://github.com/rust-lang/rust/commit/ef50477c786016bf1712a34155d067b407e35cc0"}], "stats": {"total": 456, "additions": 453, "deletions": 3}, "files": [{"sha": "0ee8ef55e61bff6010fe7a974e46b9c58100478e", "filename": "src/librustc_ast_passes/feature_gate.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_ast_passes%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_ast_passes%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Ffeature_gate.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -613,11 +613,14 @@ pub fn check_crate(krate: &ast::Crate, sess: &Session) {\n     let spans = sess.parse_sess.gated_spans.spans.borrow();\n     macro_rules! gate_all {\n         ($gate:ident, $msg:literal) => {\n-            for span in spans.get(&sym::$gate).unwrap_or(&vec![]) {\n-                gate_feature_post!(&visitor, $gate, *span, $msg);\n+            if let Some(spans) = spans.get(&sym::$gate) {\n+                for span in spans {\n+                    gate_feature_post!(&visitor, $gate, *span, $msg);\n+                }\n             }\n         };\n     }\n+    gate_all!(if_let_guard, \"`if let` guard is not implemented\");\n     gate_all!(let_chains, \"`let` expressions in this position are experimental\");\n     gate_all!(async_closure, \"async closures are unstable\");\n     gate_all!(generators, \"yield syntax is experimental\");"}, {"sha": "e858980738d7118da4317e3a36f72dc53ec72f93", "filename": "src/librustc_feature/active.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_feature%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_feature%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_feature%2Factive.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -582,6 +582,9 @@ declare_features! (\n     /// The smallest useful subset of `const_generics`.\n     (active, min_const_generics, \"1.47.0\", Some(74878), None),\n \n+    /// Allows `if let` guard in match arms.\n+    (active, if_let_guard, \"1.47.0\", Some(51114), None),\n+\n     // -------------------------------------------------------------------------\n     // feature-group-end: actual feature gates\n     // -------------------------------------------------------------------------\n@@ -591,6 +594,7 @@ declare_features! (\n /// unanticipated results, such as compiler crashes. We warn the user about these\n /// to alert them.\n pub const INCOMPLETE_FEATURES: &[Symbol] = &[\n+    sym::if_let_guard,\n     sym::impl_trait_in_bindings,\n     sym::generic_associated_types,\n     sym::const_generics,"}, {"sha": "f022c628fe27f7fc906b4232bff31971ceeda0e6", "filename": "src/librustc_parse/parser/expr.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_parse%2Fparser%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_parse%2Fparser%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse%2Fparser%2Fexpr.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -1858,7 +1858,19 @@ impl<'a> Parser<'a> {\n         let attrs = self.parse_outer_attributes()?;\n         let lo = self.token.span;\n         let pat = self.parse_top_pat(GateOr::No)?;\n-        let guard = if self.eat_keyword(kw::If) { Some(self.parse_expr()?) } else { None };\n+        let guard = if self.eat_keyword(kw::If) {\n+            let if_span = self.prev_token.span;\n+            let cond = self.parse_expr()?;\n+            if let ExprKind::Let(..) = cond.kind {\n+                // Remove the last feature gating of a `let` expression since it's stable.\n+                self.sess.gated_spans.ungate_last(sym::let_chains, cond.span);\n+                let span = if_span.to(cond.span);\n+                self.sess.gated_spans.gate(sym::if_let_guard, span);\n+            }\n+            Some(cond)\n+        } else {\n+            None\n+        };\n         let arrow_span = self.token.span;\n         self.expect(&token::FatArrow)?;\n         let arm_start_span = self.token.span;"}, {"sha": "4e5900d56fd86c29051d68a4597dce7a3ae5d59e", "filename": "src/librustc_span/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_span%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Flibrustc_span%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_span%2Fsymbol.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -567,6 +567,7 @@ symbols! {\n         i8,\n         ident,\n         if_let,\n+        if_let_guard,\n         if_while_or_patterns,\n         ignore,\n         impl_header_lifetime_elision,"}, {"sha": "bf0551b5c97b09bff7f6623a03cf52a40df022c5", "filename": "src/test/ui/parser/struct-literal-in-match-guard.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Fparser%2Fstruct-literal-in-match-guard.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Fparser%2Fstruct-literal-in-match-guard.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fstruct-literal-in-match-guard.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -0,0 +1,18 @@\n+// check-pass\n+\n+// Unlike `if` condition, `match` guards accept struct literals.\n+// This is detected in <https://github.com/rust-lang/rust/pull/74566#issuecomment-663613705>.\n+\n+#[derive(PartialEq)]\n+struct Foo {\n+    x: isize,\n+}\n+\n+fn foo(f: Foo) {\n+    match () {\n+        () if f == Foo { x: 42 } => {}\n+        _ => {}\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "c0a9bbc36b24b34c9bcde48b8fa194398e23fa08", "filename": "src/test/ui/rfc-2294-if-let-guard/feature-gate.rs", "status": "added", "additions": 85, "deletions": 0, "changes": 85, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.rs?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -0,0 +1,85 @@\n+// gate-test-if_let_guard\n+\n+use std::ops::Range;\n+\n+fn _if_let_guard() {\n+    match () {\n+        () if let 0 = 1 => {}\n+        //~^ ERROR `if let` guard is not implemented\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if (let 0 = 1) => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if (((let 0 = 1))) => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if true && let 0 = 1 => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if let 0 = 1 && true => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if (let 0 = 1) && true => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if true && (let 0 = 1) => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if (let 0 = 1) && (let 0 = 1) => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+        //~| ERROR `let` expressions are not supported here\n+        //~| ERROR `let` expressions are not supported here\n+        //~| ERROR `let` expressions are not supported here\n+        //~| ERROR `let` expressions are not supported here\n+\n+        () if let Range { start: _, end: _ } = (true..true) && false => {}\n+        //~^ ERROR `let` expressions in this position are experimental\n+        //~| ERROR `let` expressions are not supported here\n+        _ => {}\n+    }\n+}\n+\n+fn _macros() {\n+    macro_rules! use_expr {\n+        ($e:expr) => {\n+            match () {\n+                () if $e => {}\n+                _ => {}\n+            }\n+        }\n+    }\n+    use_expr!((let 0 = 1 && 0 == 0));\n+    //~^ ERROR `let` expressions in this position are experimental\n+    //~| ERROR `let` expressions are not supported here\n+    use_expr!((let 0 = 1));\n+    //~^ ERROR `let` expressions in this position are experimental\n+    //~| ERROR `let` expressions are not supported here\n+    match () {\n+        #[cfg(FALSE)]\n+        () if let 0 = 1 => {}\n+        //~^ ERROR `if let` guard is not implemented\n+        _ => {}\n+    }\n+    use_expr!(let 0 = 1);\n+    //~^ ERROR no rules expected the token `let`\n+}\n+\n+fn main() {}"}, {"sha": "5c7f8190dd6ece334f0dcd631b2b4994b38122cf", "filename": "src/test/ui/rfc-2294-if-let-guard/feature-gate.stderr", "status": "added", "additions": 327, "deletions": 0, "changes": 327, "blob_url": "https://github.com/rust-lang/rust/blob/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5528caf91442729b47b8f818be0a0ddfd0c17ffb/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2294-if-let-guard%2Ffeature-gate.stderr?ref=5528caf91442729b47b8f818be0a0ddfd0c17ffb", "patch": "@@ -0,0 +1,327 @@\n+error: no rules expected the token `let`\n+  --> $DIR/feature-gate.rs:81:15\n+   |\n+LL |     macro_rules! use_expr {\n+   |     --------------------- when calling this macro\n+...\n+LL |     use_expr!(let 0 = 1);\n+   |               ^^^ no rules expected this token in macro call\n+\n+error[E0658]: `if let` guard is not implemented\n+  --> $DIR/feature-gate.rs:7:12\n+   |\n+LL |         () if let 0 = 1 => {}\n+   |            ^^^^^^^^^^^^\n+   |\n+   = note: see issue #51114 <https://github.com/rust-lang/rust/issues/51114> for more information\n+   = help: add `#![feature(if_let_guard)]` to the crate attributes to enable\n+\n+error[E0658]: `if let` guard is not implemented\n+  --> $DIR/feature-gate.rs:77:12\n+   |\n+LL |         () if let 0 = 1 => {}\n+   |            ^^^^^^^^^^^^\n+   |\n+   = note: see issue #51114 <https://github.com/rust-lang/rust/issues/51114> for more information\n+   = help: add `#![feature(if_let_guard)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:11:16\n+   |\n+LL |         () if (let 0 = 1) => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:15:18\n+   |\n+LL |         () if (((let 0 = 1))) => {}\n+   |                  ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:19:23\n+   |\n+LL |         () if true && let 0 = 1 => {}\n+   |                       ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:23:15\n+   |\n+LL |         () if let 0 = 1 && true => {}\n+   |               ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:27:16\n+   |\n+LL |         () if (let 0 = 1) && true => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:31:24\n+   |\n+LL |         () if true && (let 0 = 1) => {}\n+   |                        ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:35:16\n+   |\n+LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:35:31\n+   |\n+LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n+   |                               ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:41:15\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |               ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:41:28\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                            ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:41:42\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                          ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:41:55\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                                       ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:41:68\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                                                    ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:53:15\n+   |\n+LL |         () if let Range { start: _, end: _ } = (true..true) && false => {}\n+   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:69:16\n+   |\n+LL |     use_expr!((let 0 = 1 && 0 == 0));\n+   |                ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error[E0658]: `let` expressions in this position are experimental\n+  --> $DIR/feature-gate.rs:72:16\n+   |\n+LL |     use_expr!((let 0 = 1));\n+   |                ^^^^^^^^^\n+   |\n+   = note: see issue #53667 <https://github.com/rust-lang/rust/issues/53667> for more information\n+   = help: add `#![feature(let_chains)]` to the crate attributes to enable\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:7:15\n+   |\n+LL |         () if let 0 = 1 => {}\n+   |               ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:11:16\n+   |\n+LL |         () if (let 0 = 1) => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:15:18\n+   |\n+LL |         () if (((let 0 = 1))) => {}\n+   |                  ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:19:23\n+   |\n+LL |         () if true && let 0 = 1 => {}\n+   |                       ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:23:15\n+   |\n+LL |         () if let 0 = 1 && true => {}\n+   |               ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:27:16\n+   |\n+LL |         () if (let 0 = 1) && true => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:31:24\n+   |\n+LL |         () if true && (let 0 = 1) => {}\n+   |                        ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:35:16\n+   |\n+LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n+   |                ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:35:31\n+   |\n+LL |         () if (let 0 = 1) && (let 0 = 1) => {}\n+   |                               ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:41:15\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |               ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:41:28\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                            ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:41:42\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                          ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:41:55\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                                       ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:41:68\n+   |\n+LL |         () if let 0 = 1 && let 1 = 2 && (let 2 = 3 && let 3 = 4 && let 4 = 5) => {}\n+   |                                                                    ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:53:15\n+   |\n+LL |         () if let Range { start: _, end: _ } = (true..true) && false => {}\n+   |               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:69:16\n+   |\n+LL |     use_expr!((let 0 = 1 && 0 == 0));\n+   |                ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: `let` expressions are not supported here\n+  --> $DIR/feature-gate.rs:72:16\n+   |\n+LL |     use_expr!((let 0 = 1));\n+   |                ^^^^^^^^^\n+   |\n+   = note: only supported directly in conditions of `if`- and `while`-expressions\n+   = note: as well as when nested within `&&` and parenthesis in those conditions\n+\n+error: aborting due to 36 previous errors\n+\n+For more information about this error, try `rustc --explain E0658`."}]}