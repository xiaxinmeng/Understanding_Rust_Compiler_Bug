{"sha": "233e0f3e52910aa7c1436b497d8b9215c172bcfb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzM2UwZjNlNTI5MTBhYTdjMTQzNmI0OTdkOGI5MjE1YzE3MmJjZmI=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2017-03-29T20:53:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-03-29T20:53:32Z"}, "message": "Rollup merge of #40832 - pftbest:fix_msp430, r=stjepang\n\nlibcore: fix compilation on 16bit target (MSP430).\n\nSince PR #40601 has been merged, libcore no longer compiles on MSP430.\nThe reason is this code in `break_patterns`:\n```rust\n let mut random = len;\n random ^= random << 13;\n random ^= random >> 17;\n random ^= random << 5;\n random &= modulus - 1;\n```\nIt assumes that `len` is at least a 32 bit integer.\nAs a workaround replace `break_patterns` with an empty function for 16bit targets.\n\ncc @stjepang\ncc @alexcrichton", "tree": {"sha": "170e78acdedb38958cf730f1796218db9840cfec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/170e78acdedb38958cf730f1796218db9840cfec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/233e0f3e52910aa7c1436b497d8b9215c172bcfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/233e0f3e52910aa7c1436b497d8b9215c172bcfb", "html_url": "https://github.com/rust-lang/rust/commit/233e0f3e52910aa7c1436b497d8b9215c172bcfb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/233e0f3e52910aa7c1436b497d8b9215c172bcfb/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7f1083e741de0b210bb3eda4f17cffb0b470c3d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/7f1083e741de0b210bb3eda4f17cffb0b470c3d2", "html_url": "https://github.com/rust-lang/rust/commit/7f1083e741de0b210bb3eda4f17cffb0b470c3d2"}, {"sha": "b90936449b161f4aee5ff81bbb4906bf5a27f181", "url": "https://api.github.com/repos/rust-lang/rust/commits/b90936449b161f4aee5ff81bbb4906bf5a27f181", "html_url": "https://github.com/rust-lang/rust/commit/b90936449b161f4aee5ff81bbb4906bf5a27f181"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "7065fdb79fc4040a6ca225634408141e1871a830", "filename": "src/libcore/slice/sort.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/233e0f3e52910aa7c1436b497d8b9215c172bcfb/src%2Flibcore%2Fslice%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/233e0f3e52910aa7c1436b497d8b9215c172bcfb/src%2Flibcore%2Fslice%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fsort.rs?ref=233e0f3e52910aa7c1436b497d8b9215c172bcfb", "patch": "@@ -527,7 +527,9 @@ fn break_patterns<T>(v: &mut [T]) {\n             // we first take it modulo a power of two, and then decrease by `len` until it fits\n             // into the range `[0, len - 1]`.\n             let mut other = gen_usize() & (modulus - 1);\n-            while other >= len {\n+\n+            // `other` is guaranteed to be less than `2 * len`.\n+            if other >= len {\n                 other -= len;\n             }\n "}]}