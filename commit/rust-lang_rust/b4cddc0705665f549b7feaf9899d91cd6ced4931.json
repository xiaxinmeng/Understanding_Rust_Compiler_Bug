{"sha": "b4cddc0705665f549b7feaf9899d91cd6ced4931", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0Y2RkYzA3MDU2NjVmNTQ5YjdmZWFmOTg5OWQ5MWNkNmNlZDQ5MzE=", "commit": {"author": {"name": "Aramis Razzaghipour", "email": "aramisnoah@gmail.com", "date": "2021-05-24T03:15:54Z"}, "committer": {"name": "Aramis Razzaghipour", "email": "aramisnoah@gmail.com", "date": "2021-05-24T04:54:16Z"}, "message": "Highlight foreign modules as such", "tree": {"sha": "59156578df19b5610ca1c28134445dd7587ef8c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59156578df19b5610ca1c28134445dd7587ef8c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4cddc0705665f549b7feaf9899d91cd6ced4931", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqQsXYYwP2wJc1ykb94j36ZATYAMFAmCrMXgACgkQ94j36ZAT\nYAMs1g//TSJ9BJYb5Vckq1xWGP/24fh4lZkDWK8b3JszIj4vXJ5UQ8iP4ZFC4+Y+\nbJTZ3iNz+zWPScpMXeceOT7X/e9H2TzMsI/OsEktCXvpziT52wUC9zyhitYRH9NI\ntFhahlRdzCgK/B7A5AEfXP2XDKJeatj5mMfmtqV3FS+ENyH0zkcHd51SsIoPVuXP\nqtbQbAwx4/v/DfjZaClsa0DZ3h3Z9yuB1kDXGYliKWY8QXHjIEUlSyWJkbiNOwBU\nQWqY2hPYP08FFPw+U975AogKcQcU9X6N8Xvz1qWZZhTXE3LfKp/l5FOnT9DU4m7m\nq/QNSLWeDYX5x1oyuVDBBb4Q3KqWSKUkFUem6P0B7wVv3ZjHxpHdej2LaB+rsgCJ\nagA5q5UEjivwRwZw/7XvS6JJHW7q+4TVrO5GKAceijbqPs7wkRghxocgzudGY2hj\nBDDR58pceIffIJoLzNNXeZ0EpqNehD4VSgJ7j/wOK3TeYN25Pkx+wKLQXSLxgFDb\nvSXqb654ooovsbV6qAMyDlYCo7foTTdNWe0QkNT13ZG3TK+yt5Zk6hrV74mEEEKd\nbh0Txjj2fO6KWEnf6L84xLJZHdoEJFnKwsBSp1QavzwrI5WSARhgDFxg+RtdZvxT\nDUOCvpZ2Cujc+hLib3U24NYPK1fZdzjMPru5jyQWfMgTw7Ei5DA=\n=01uk\n-----END PGP SIGNATURE-----", "payload": "tree 59156578df19b5610ca1c28134445dd7587ef8c7\nparent c32428571c3fbf12bd4a4187c797488355416a18\nauthor Aramis Razzaghipour <aramisnoah@gmail.com> 1621826154 +1000\ncommitter Aramis Razzaghipour <aramisnoah@gmail.com> 1621832056 +1000\n\nHighlight foreign modules as such\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4cddc0705665f549b7feaf9899d91cd6ced4931", "html_url": "https://github.com/rust-lang/rust/commit/b4cddc0705665f549b7feaf9899d91cd6ced4931", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4cddc0705665f549b7feaf9899d91cd6ced4931/comments", "author": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c32428571c3fbf12bd4a4187c797488355416a18", "url": "https://api.github.com/repos/rust-lang/rust/commits/c32428571c3fbf12bd4a4187c797488355416a18", "html_url": "https://github.com/rust-lang/rust/commit/c32428571c3fbf12bd4a4187c797488355416a18"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "141536dcc89da4ea97c399eb90b987a881ebf9af", "filename": "crates/ide/src/syntax_highlighting/highlight.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b4cddc0705665f549b7feaf9899d91cd6ced4931/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4cddc0705665f549b7feaf9899d91cd6ced4931/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs?ref=b4cddc0705665f549b7feaf9899d91cd6ced4931", "patch": "@@ -303,7 +303,15 @@ fn highlight_def(db: &RootDatabase, krate: Option<hir::Crate>, def: Definition)\n             return h;\n         }\n         Definition::ModuleDef(def) => match def {\n-            hir::ModuleDef::Module(_) => HlTag::Symbol(SymbolKind::Module),\n+            hir::ModuleDef::Module(module) => {\n+                let mut h = Highlight::new(HlTag::Symbol(SymbolKind::Module));\n+\n+                if Some(module.krate()) != krate {\n+                    h |= HlMod::Foreign;\n+                }\n+\n+                return h;\n+            }\n             hir::ModuleDef::Function(func) => {\n                 let mut h = Highlight::new(HlTag::Symbol(SymbolKind::Function));\n                 if let Some(item) = func.as_assoc_item(db) {"}]}