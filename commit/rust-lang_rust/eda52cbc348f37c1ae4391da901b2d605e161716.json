{"sha": "eda52cbc348f37c1ae4391da901b2d605e161716", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkYTUyY2JjMzQ4ZjM3YzFhZTQzOTFkYTkwMWIyZDYwNWUxNjE3MTY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-16T10:20:59Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-16T10:20:59Z"}, "message": "allow field attrs", "tree": {"sha": "a5ca0308241aea303a207a424464abbbf6614d40", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a5ca0308241aea303a207a424464abbbf6614d40"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eda52cbc348f37c1ae4391da901b2d605e161716", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eda52cbc348f37c1ae4391da901b2d605e161716", "html_url": "https://github.com/rust-lang/rust/commit/eda52cbc348f37c1ae4391da901b2d605e161716", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eda52cbc348f37c1ae4391da901b2d605e161716/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5515d9d6f215da4351b482d839aab5212fa0e6f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5515d9d6f215da4351b482d839aab5212fa0e6f", "html_url": "https://github.com/rust-lang/rust/commit/a5515d9d6f215da4351b482d839aab5212fa0e6f"}], "stats": {"total": 57, "additions": 54, "deletions": 3}, "files": [{"sha": "41bd2a4e0a6c0a924cf085c191b3b598a9839aca", "filename": "crates/libsyntax2/src/grammar/items/structs.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fstructs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fstructs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Fsrc%2Fgrammar%2Fitems%2Fstructs.rs?ref=eda52cbc348f37c1ae4391da901b2d605e161716", "patch": "@@ -84,15 +84,21 @@ fn named_fields(p: &mut Parser) {\n     p.expect(R_CURLY);\n \n     fn named_field(p: &mut Parser) {\n-        let field = p.start();\n+        let m = p.start();\n+        // test field_attrs\n+        // struct S {\n+        //     #[serde(with = \"url_serde\")]\n+        //     pub uri: Uri,\n+        // }\n+        attributes::outer_attributes(p);\n         visibility(p);\n         if p.at(IDENT) {\n             name(p);\n             p.expect(COLON);\n             types::type_(p);\n-            field.complete(p, NAMED_FIELD);\n+            m.complete(p, NAMED_FIELD);\n         } else {\n-            field.abandon(p);\n+            m.abandon(p);\n             p.err_and_bump(\"expected field declaration\");\n         }\n     }"}, {"sha": "4744d8ac06597ffd9908f2bf70c983037d3607e0", "filename": "crates/libsyntax2/tests/data/parser/inline/0103_field_attrs.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.rs?ref=eda52cbc348f37c1ae4391da901b2d605e161716", "patch": "@@ -0,0 +1,4 @@\n+struct S {\n+    #[serde(with = \"url_serde\")]\n+    pub uri: Uri,\n+}"}, {"sha": "f4e2d97163adc27d2ab1bb5893a51904fe7c9f08", "filename": "crates/libsyntax2/tests/data/parser/inline/0103_field_attrs.txt", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.txt", "raw_url": "https://github.com/rust-lang/rust/raw/eda52cbc348f37c1ae4391da901b2d605e161716/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibsyntax2%2Ftests%2Fdata%2Fparser%2Finline%2F0103_field_attrs.txt?ref=eda52cbc348f37c1ae4391da901b2d605e161716", "patch": "@@ -0,0 +1,41 @@\n+FILE@[0; 64)\n+  STRUCT_DEF@[0; 63)\n+    STRUCT_KW@[0; 6)\n+    WHITESPACE@[6; 7)\n+    NAME@[7; 8)\n+      IDENT@[7; 8) \"S\"\n+    WHITESPACE@[8; 9)\n+    L_CURLY@[9; 10)\n+    WHITESPACE@[10; 15)\n+    NAMED_FIELD@[15; 60)\n+      ATTR@[15; 43)\n+        POUND@[15; 16)\n+        TOKEN_TREE@[16; 43)\n+          L_BRACK@[16; 17)\n+          IDENT@[17; 22) \"serde\"\n+          TOKEN_TREE@[22; 42)\n+            L_PAREN@[22; 23)\n+            IDENT@[23; 27) \"with\"\n+            WHITESPACE@[27; 28)\n+            EQ@[28; 29)\n+            WHITESPACE@[29; 30)\n+            STRING@[30; 41)\n+            R_PAREN@[41; 42)\n+          R_BRACK@[42; 43)\n+      WHITESPACE@[43; 48)\n+      VISIBILITY@[48; 51)\n+        PUB_KW@[48; 51)\n+      WHITESPACE@[51; 52)\n+      NAME@[52; 55)\n+        IDENT@[52; 55) \"uri\"\n+      COLON@[55; 56)\n+      WHITESPACE@[56; 57)\n+      PATH_TYPE@[57; 60)\n+        PATH@[57; 60)\n+          PATH_SEGMENT@[57; 60)\n+            NAME_REF@[57; 60)\n+              IDENT@[57; 60) \"Uri\"\n+    COMMA@[60; 61)\n+    WHITESPACE@[61; 62)\n+    R_CURLY@[62; 63)\n+  WHITESPACE@[63; 64)"}]}