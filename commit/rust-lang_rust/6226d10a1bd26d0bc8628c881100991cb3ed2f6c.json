{"sha": "6226d10a1bd26d0bc8628c881100991cb3ed2f6c", "node_id": "C_kwDOAAsO6NoAKDYyMjZkMTBhMWJkMjZkMGJjODYyOGM4ODExMDA5OTFjYjNlZDJmNmM", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-05-07T03:49:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-05-07T03:49:30Z"}, "message": "Rollup merge of #96660 - jyn514:better-missing-path-error, r=Mark-Simulacrum\n\n[bootstrap] Give a better error when trying to run a path with no registered step\n\nBefore:\n```\nthread 'main' panicked at 'error: no rules matched invalid', src/bootstrap/builder.rs:287:17\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\n\nAfter:\n```\nerror: no `check` rules matched 'invalid'\nhelp: run `x.py check --help --verbose` to show a list of available paths\nnote: if you are adding a new Step to bootstrap itself, make sure you register it with `describe!`\n```", "tree": {"sha": "0e63ffca139c12cf0d89555cb816f9e548e5f4c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e63ffca139c12cf0d89555cb816f9e548e5f4c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6226d10a1bd26d0bc8628c881100991cb3ed2f6c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJidexKCRBK7hj4Ov3rIwAAVNsIAKmi8+ql0bCvwilJebUsbtaa\n3rBsmf0LTxW2163nmESgdr2eLrDsIz5crI9BJxYneGgW0IKsRJVVp40DdKdvz+VZ\nJKuJ7Ae+0Re1SPvCE1pwUt67cMtRB8sDB8An1Uf1+16yxZvOzG9CHp5BpCTkL6sh\nKLRFcNb3QktEHhUc7XRQrGKktuHHtS30gKiMMCH65hFo5RxG1h1tKatBNlmw21Um\nQC0rySLZ6buuUGkvjWmCEOZfrkQ0R762QXxhIOT6PdkChJXo02vRcyjUGAi7zkSt\ng9bTU5nDRCyOrFlxocKr/6IIcSyO8QdBzvWEgXtr15cWJNhjVEr/M5jxo/gIgdM=\n=kaS9\n-----END PGP SIGNATURE-----\n", "payload": "tree 0e63ffca139c12cf0d89555cb816f9e548e5f4c4\nparent 4799baa70d0ff1780ee6dffb743d62c79235ace9\nparent 3a800bf5c75fc9889178e401b0ab5fab87deb00d\nauthor Michael Goulet <michael@errs.io> 1651895370 -0700\ncommitter GitHub <noreply@github.com> 1651895370 -0700\n\nRollup merge of #96660 - jyn514:better-missing-path-error, r=Mark-Simulacrum\n\n[bootstrap] Give a better error when trying to run a path with no registered step\n\nBefore:\n```\nthread 'main' panicked at 'error: no rules matched invalid', src/bootstrap/builder.rs:287:17\nnote: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n```\n\nAfter:\n```\nerror: no `check` rules matched 'invalid'\nhelp: run `x.py check --help --verbose` to show a list of available paths\nnote: if you are adding a new Step to bootstrap itself, make sure you register it with `describe!`\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6226d10a1bd26d0bc8628c881100991cb3ed2f6c", "html_url": "https://github.com/rust-lang/rust/commit/6226d10a1bd26d0bc8628c881100991cb3ed2f6c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6226d10a1bd26d0bc8628c881100991cb3ed2f6c/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4799baa70d0ff1780ee6dffb743d62c79235ace9", "url": "https://api.github.com/repos/rust-lang/rust/commits/4799baa70d0ff1780ee6dffb743d62c79235ace9", "html_url": "https://github.com/rust-lang/rust/commit/4799baa70d0ff1780ee6dffb743d62c79235ace9"}, {"sha": "3a800bf5c75fc9889178e401b0ab5fab87deb00d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a800bf5c75fc9889178e401b0ab5fab87deb00d", "html_url": "https://github.com/rust-lang/rust/commit/3a800bf5c75fc9889178e401b0ab5fab87deb00d"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "d8a41912ff725f5186e34d0b612aa4c409392cd4", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/6226d10a1bd26d0bc8628c881100991cb3ed2f6c/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6226d10a1bd26d0bc8628c881100991cb3ed2f6c/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=6226d10a1bd26d0bc8628c881100991cb3ed2f6c", "patch": "@@ -284,7 +284,19 @@ impl StepDescription {\n             }\n \n             if !attempted_run {\n-                panic!(\"error: no rules matched {}\", path.display());\n+                eprintln!(\n+                    \"error: no `{}` rules matched '{}'\",\n+                    builder.kind.as_str(),\n+                    path.display()\n+                );\n+                eprintln!(\n+                    \"help: run `x.py {} --help --verbose` to show a list of available paths\",\n+                    builder.kind.as_str()\n+                );\n+                eprintln!(\n+                    \"note: if you are adding a new Step to bootstrap itself, make sure you register it with `describe!`\"\n+                );\n+                std::process::exit(1);\n             }\n         }\n     }"}]}