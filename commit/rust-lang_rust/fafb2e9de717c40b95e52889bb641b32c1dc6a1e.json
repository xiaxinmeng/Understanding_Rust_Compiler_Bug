{"sha": "fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhZmIyZTlkZTcxN2M0MGI5NWU1Mjg4OWJiNjQxYjMyYzFkYzZhMWU=", "commit": {"author": {"name": "Adam Lesinski", "email": "adamlesinski@google.com", "date": "2020-09-15T20:54:46Z"}, "committer": {"name": "Adam Lesinski", "email": "adamlesinski@google.com", "date": "2020-09-15T20:54:46Z"}, "message": "[fuchsia] Propagate the userspace UTC clock\n\nOn Fuchsia, spawning a subprocess does not automatically\nclone all of the parent process' capabilities. UTC time on\nFuchsia is managed by a top-level userspace clock capability\nthat is cloned and passed to subprocesses.\n\nThis change ensures that any Rust subprocess gets access to the\nUTC clock, if the parent had access to it. This is critical for\ntests, which on Fuchsia, use panic=abort and spawn subprocesses\nper test.", "tree": {"sha": "c3b5fb10b64f2b7170a4ccf49fea7ad27ed679ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c3b5fb10b64f2b7170a4ccf49fea7ad27ed679ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "html_url": "https://github.com/rust-lang/rust/commit/fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fafb2e9de717c40b95e52889bb641b32c1dc6a1e/comments", "author": null, "committer": null, "parents": [{"sha": "a874956d940ecb3ed524b6176a171219ac4787ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/a874956d940ecb3ed524b6176a171219ac4787ea", "html_url": "https://github.com/rust-lang/rust/commit/a874956d940ecb3ed524b6176a171219ac4787ea"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "fab27cd9f70855f04904cf16f463c3681bce14b5", "filename": "library/std/src/sys/unix/process/process_fuchsia.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fafb2e9de717c40b95e52889bb641b32c1dc6a1e/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fafb2e9de717c40b95e52889bb641b32c1dc6a1e/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs?ref=fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "patch": "@@ -118,7 +118,8 @@ impl Command {\n             FDIO_SPAWN_CLONE_JOB\n                 | FDIO_SPAWN_CLONE_LDSVC\n                 | FDIO_SPAWN_CLONE_NAMESPACE\n-                | FDIO_SPAWN_CLONE_ENVIRON, // this is ignored when envp is non-null\n+                | FDIO_SPAWN_CLONE_ENVIRON // this is ignored when envp is non-null\n+                | FDIO_SPAWN_CLONE_UTC_CLOCK,\n             self.get_program().as_ptr(),\n             self.get_argv().as_ptr(),\n             envp,"}, {"sha": "69ec275c2b318372151200ba05590f4e4c8aabcb", "filename": "library/std/src/sys/unix/process/zircon.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fafb2e9de717c40b95e52889bb641b32c1dc6a1e/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fafb2e9de717c40b95e52889bb641b32c1dc6a1e/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fzircon.rs?ref=fafb2e9de717c40b95e52889bb641b32c1dc6a1e", "patch": "@@ -138,6 +138,7 @@ pub const FDIO_SPAWN_CLONE_LDSVC: u32 = 0x0002;\n pub const FDIO_SPAWN_CLONE_NAMESPACE: u32 = 0x0004;\n pub const FDIO_SPAWN_CLONE_STDIO: u32 = 0x0008;\n pub const FDIO_SPAWN_CLONE_ENVIRON: u32 = 0x0010;\n+pub const FDIO_SPAWN_CLONE_UTC_CLOCK: u32 = 0x0020;\n pub const FDIO_SPAWN_CLONE_ALL: u32 = 0xFFFF;\n \n // fdio_spawn_etc actions"}]}