{"sha": "c6f32f3750987640d11a97e503f57b637fd968fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2ZjMyZjM3NTA5ODc2NDBkMTFhOTdlNTAzZjU3YjYzN2ZkOTY4ZmQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-13T02:45:18Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-13T02:45:18Z"}, "message": "Auto merge of #88517 - smoelius:without-patch-versions, r=flip1995\n\nUpdate Clippy dependencies without patch versions\n\nTrial run for https://github.com/rust-lang/rust-clippy/pull/7606", "tree": {"sha": "18b6bc468d8cd48687c9364bd25b04519828711f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18b6bc468d8cd48687c9364bd25b04519828711f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6f32f3750987640d11a97e503f57b637fd968fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6f32f3750987640d11a97e503f57b637fd968fd", "html_url": "https://github.com/rust-lang/rust/commit/c6f32f3750987640d11a97e503f57b637fd968fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6f32f3750987640d11a97e503f57b637fd968fd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96dee2825e9d3a587243e700c7c27ff9cf123cdf", "url": "https://api.github.com/repos/rust-lang/rust/commits/96dee2825e9d3a587243e700c7c27ff9cf123cdf", "html_url": "https://github.com/rust-lang/rust/commit/96dee2825e9d3a587243e700c7c27ff9cf123cdf"}, {"sha": "bd4b17a532314883a4173e872455424c80ba4970", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd4b17a532314883a4173e872455424c80ba4970", "html_url": "https://github.com/rust-lang/rust/commit/bd4b17a532314883a4173e872455424c80ba4970"}], "stats": {"total": 119, "additions": 44, "deletions": 75}, "files": [{"sha": "cde73166babb7ecdaddc308d373d61389a947f3d", "filename": "Cargo.lock", "status": "modified", "additions": 8, "deletions": 31, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -26,9 +26,9 @@ dependencies = [\n \n [[package]]\n name = \"aho-corasick\"\n-version = \"0.7.13\"\n+version = \"0.7.18\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"043164d8ba5c4c3035fec9bbee8647c0261d788f3474306f93bb65901cae0e86\"\n+checksum = \"1e37cfd5e7657ada45f742d6e99ca5788580b5c529dc78faf11ece6dc702656f\"\n dependencies = [\n  \"memchr\",\n ]\n@@ -559,7 +559,7 @@ dependencies = [\n  \"cargo_metadata 0.12.0\",\n  \"clippy_lints\",\n  \"clippy_utils\",\n- \"compiletest_rs 0.6.0\",\n+ \"compiletest_rs\",\n  \"derive-new\",\n  \"filetime\",\n  \"if_chain\",\n@@ -581,7 +581,7 @@ version = \"0.0.1\"\n dependencies = [\n  \"bytecount\",\n  \"clap\",\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"opener\",\n  \"regex\",\n  \"shell-escape\",\n@@ -595,7 +595,7 @@ dependencies = [\n  \"cargo_metadata 0.12.0\",\n  \"clippy_utils\",\n  \"if_chain\",\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"pulldown-cmark 0.8.0\",\n  \"quine-mc_cluskey\",\n  \"regex-syntax\",\n@@ -687,29 +687,6 @@ dependencies = [\n  \"winapi\",\n ]\n \n-[[package]]\n-name = \"compiletest_rs\"\n-version = \"0.6.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"0086d6ad78cf409c3061618cd98e2789d5c9ce598fc9651611cf62eae0a599cb\"\n-dependencies = [\n- \"diff\",\n- \"filetime\",\n- \"getopts\",\n- \"lazy_static\",\n- \"libc\",\n- \"log\",\n- \"miow\",\n- \"regex\",\n- \"rustfix 0.5.1\",\n- \"serde\",\n- \"serde_derive\",\n- \"serde_json\",\n- \"tempfile\",\n- \"tester\",\n- \"winapi\",\n-]\n-\n [[package]]\n name = \"compiletest_rs\"\n version = \"0.7.0\"\n@@ -2272,7 +2249,7 @@ name = \"miri\"\n version = \"0.1.0\"\n dependencies = [\n  \"colored\",\n- \"compiletest_rs 0.7.0\",\n+ \"compiletest_rs\",\n  \"env_logger 0.8.1\",\n  \"getrandom 0.2.0\",\n  \"hex 0.4.2\",\n@@ -3005,9 +2982,9 @@ dependencies = [\n \n [[package]]\n name = \"regex\"\n-version = \"1.4.6\"\n+version = \"1.5.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2a26af418b574bd56588335b3a3659a65725d4e636eb1016c2f9e3b38c7cc759\"\n+checksum = \"d07a8629359eb56f1e2fb1652bb04212c072a87ba68546a04065d525673ac461\"\n dependencies = [\n  \"aho-corasick\",\n  \"memchr\","}, {"sha": "40aaa5924df5b391862f379c8fd159920f5b061d", "filename": "src/tools/clippy/Cargo.toml", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -21,37 +21,35 @@ name = \"clippy-driver\"\n path = \"src/driver.rs\"\n \n [dependencies]\n-# begin automatic update\n-clippy_lints = { version = \"0.1.50\", path = \"clippy_lints\" }\n-# end automatic update\n+clippy_lints = { version = \"0.1\", path = \"clippy_lints\" }\n semver = \"0.11\"\n-rustc_tools_util = { version = \"0.2.0\", path = \"rustc_tools_util\" }\n-tempfile = { version = \"3.1.0\", optional = true }\n+rustc_tools_util = { version = \"0.2\", path = \"rustc_tools_util\" }\n+tempfile = { version = \"3.2\", optional = true }\n \n [dev-dependencies]\n cargo_metadata = \"0.12\"\n-compiletest_rs = { version = \"0.6.0\", features = [\"tmp\"] }\n+compiletest_rs = { version = \"0.7\", features = [\"tmp\"] }\n tester = \"0.9\"\n-regex = \"1.4\"\n+regex = \"1.5\"\n # This is used by the `collect-metadata` alias.\n filetime = \"0.2\"\n \n # A noop dependency that changes in the Rust repository, it's a bit of a hack.\n # See the `src/tools/rustc-workspace-hack/README.md` file in `rust-lang/rust`\n # for more information.\n-rustc-workspace-hack = \"1.0.0\"\n+rustc-workspace-hack = \"1.0\"\n \n # UI test dependencies\n clippy_utils = { path = \"clippy_utils\" }\n derive-new = \"0.5\"\n if_chain = \"1.0\"\n-itertools = \"0.10.1\"\n-quote = \"1\"\n+itertools = \"0.10\"\n+quote = \"1.0\"\n serde = { version = \"1.0\", features = [\"derive\"] }\n-syn = { version = \"1\", features = [\"full\"] }\n+syn = { version = \"1.0\", features = [\"full\"] }\n \n [build-dependencies]\n-rustc_tools_util = { version = \"0.2.0\", path = \"rustc_tools_util\" }\n+rustc_tools_util = { version = \"0.2\", path = \"rustc_tools_util\" }\n \n [features]\n deny-warnings = [\"clippy_lints/deny-warnings\"]"}, {"sha": "d7d2655026b4bc941ea2d54bf219bc173e091083", "filename": "src/tools/clippy/clippy_dev/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_dev%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_dev%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_dev%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -6,11 +6,11 @@ edition = \"2018\"\n [dependencies]\n bytecount = \"0.6\"\n clap = \"2.33\"\n-itertools = \"0.9\"\n+itertools = \"0.10\"\n opener = \"0.5\"\n-regex = \"1\"\n+regex = \"1.5\"\n shell-escape = \"0.1\"\n-walkdir = \"2\"\n+walkdir = \"2.3\"\n \n [features]\n deny-warnings = []"}, {"sha": "c206a1eb07b500a28c114936e7a27af2879cd3a0", "filename": "src/tools/clippy/clippy_dummy/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_dummy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_dummy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_dummy%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -13,4 +13,4 @@ keywords = [\"clippy\", \"lint\", \"plugin\"]\n categories = [\"development-tools\", \"development-tools::cargo-plugins\"]\n \n [build-dependencies]\n-term = \"0.6\"\n+term = \"0.7\""}, {"sha": "e59175a55e184e9eaedfaecd76c79580c4d55383", "filename": "src/tools/clippy/clippy_lints/Cargo.toml", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -11,21 +11,21 @@ edition = \"2018\"\n [dependencies]\n cargo_metadata = \"0.12\"\n clippy_utils = { path = \"../clippy_utils\" }\n-if_chain = \"1.0.0\"\n-itertools = \"0.9\"\n+if_chain = \"1.0\"\n+itertools = \"0.10\"\n pulldown-cmark = { version = \"0.8\", default-features = false }\n-quine-mc_cluskey = \"0.2.2\"\n+quine-mc_cluskey = \"0.2\"\n regex-syntax = \"0.6\"\n serde = { version = \"1.0\", features = [\"derive\"] }\n serde_json = { version = \"1.0\", optional = true }\n-toml = \"0.5.3\"\n+toml = \"0.5\"\n unicode-normalization = \"0.1\"\n-unicode-script = { version = \"0.5.3\", default-features = false }\n+unicode-script = { version = \"0.5\", default-features = false }\n semver = \"0.11\"\n-rustc-semver = \"1.1.0\"\n+rustc-semver = \"1.1\"\n # NOTE: cargo requires serde feat in its url dep\n # see <https://github.com/rust-lang/rust/pull/63587#issuecomment-522343864>\n-url = { version = \"2.1.0\", features = [\"serde\"] }\n+url = { version = \"2.2\", features = [\"serde\"] }\n \n [features]\n deny-warnings = [\"clippy_utils/deny-warnings\"]"}, {"sha": "162911b77d6153b6f02fc7b8d6e5ada56fcfe2a1", "filename": "src/tools/clippy/clippy_lints/src/cargo_common_metadata.rs", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fcargo_common_metadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fcargo_common_metadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Fcargo_common_metadata.rs?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -1,7 +1,5 @@\n //! lint on missing cargo common metadata\n \n-use std::path::PathBuf;\n-\n use clippy_utils::{diagnostics::span_lint, is_lint_allowed};\n use rustc_hir::{hir_id::CRATE_HIR_ID, Crate};\n use rustc_lint::{LateContext, LateLintPass};\n@@ -69,12 +67,8 @@ fn missing_warning(cx: &LateContext<'_>, package: &cargo_metadata::Package, fiel\n     span_lint(cx, CARGO_COMMON_METADATA, DUMMY_SP, &message);\n }\n \n-fn is_empty_str(value: &Option<String>) -> bool {\n-    value.as_ref().map_or(true, String::is_empty)\n-}\n-\n-fn is_empty_path(value: &Option<PathBuf>) -> bool {\n-    value.as_ref().and_then(|x| x.to_str()).map_or(true, str::is_empty)\n+fn is_empty_str<T: AsRef<std::ffi::OsStr>>(value: &Option<T>) -> bool {\n+    value.as_ref().map_or(true, |s| s.as_ref().is_empty())\n }\n \n fn is_empty_vec(value: &[String]) -> bool {\n@@ -98,15 +92,15 @@ impl LateLintPass<'_> for CargoCommonMetadata {\n                     missing_warning(cx, &package, \"package.description\");\n                 }\n \n-                if is_empty_str(&package.license) && is_empty_path(&package.license_file) {\n+                if is_empty_str(&package.license) && is_empty_str(&package.license_file) {\n                     missing_warning(cx, &package, \"either package.license or package.license_file\");\n                 }\n \n                 if is_empty_str(&package.repository) {\n                     missing_warning(cx, &package, \"package.repository\");\n                 }\n \n-                if is_empty_path(&package.readme) {\n+                if is_empty_str(&package.readme) {\n                     missing_warning(cx, &package, \"package.readme\");\n                 }\n "}, {"sha": "7c24e830e71dc406e2c081b77dcc09a47eb08d57", "filename": "src/tools/clippy/clippy_utils/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_utils%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Fclippy_utils%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -5,8 +5,8 @@ edition = \"2018\"\n publish = false\n \n [dependencies]\n-if_chain = \"1.0.0\"\n-rustc-semver=\"1.1.0\"\n+if_chain = \"1.0\"\n+rustc-semver = \"1.1\"\n \n [features]\n deny-warnings = []"}, {"sha": "f33f1b65eabdba1a45c3859f9ea941c18cd7bf4e", "filename": "src/tools/clippy/lintcheck/Cargo.toml", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Flintcheck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c6f32f3750987640d11a97e503f57b637fd968fd/src%2Ftools%2Fclippy%2Flintcheck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Flintcheck%2FCargo.toml?ref=c6f32f3750987640d11a97e503f57b637fd968fd", "patch": "@@ -11,15 +11,15 @@ publish = false\n \n [dependencies]\n clap = \"2.33\"\n-flate2 = {version = \"1.0.19\"}\n-fs_extra = {version = \"1.2.0\"}\n-rayon = {version = \"1.5.0\"}\n-serde = {version = \"1.0\", features = [\"derive\"]}\n-serde_json = {version = \"1.0\"}\n-tar = {version = \"0.4.30\"}\n-toml = {version = \"0.5\"}\n-ureq = {version = \"2.0.0-rc3\"}\n-walkdir = {version = \"2.3.2\"}\n+flate2 = \"1.0\"\n+fs_extra = \"1.2\"\n+rayon = \"1.5\"\n+serde = { version = \"1.0\", features = [\"derive\"] }\n+serde_json = \"1.0\"\n+tar = \"0.4\"\n+toml = \"0.5\"\n+ureq = \"2.2\"\n+walkdir = \"2.3\"\n \n [features]\n deny-warnings = []"}]}