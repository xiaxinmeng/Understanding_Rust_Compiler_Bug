{"sha": "02c1e3dfc12b9498c45ac25e39e7abc921e758f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAyYzFlM2RmYzEyYjk0OThjNDVhYzI1ZTM5ZTdhYmM5MjFlNzU4ZjQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-28T07:43:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-03-28T07:43:37Z"}, "message": "Rollup merge of #59441 - TheGoddessInari:natvis, r=alexcrichton\n\nRemove the block on natvis for lld-link.\n\nSince #56642 bumped minimum LLVM version to 6.0.0, Rust should be able to honor or ignore Windows natvis support with lld-link.\n\nIt looks like  https://github.com/llvm-mirror/lld/commit/9133ca57b was in LLVM 7.0, while https://github.com/llvm-mirror/lld/commit/27b9c4285 made it into 6.0, at least if the release branches are anything to go by.\n\nFixes #59383.", "tree": {"sha": "a70af32f2ae0e64552503387309c487e566a212b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a70af32f2ae0e64552503387309c487e566a212b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02c1e3dfc12b9498c45ac25e39e7abc921e758f4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcnHspCRBK7hj4Ov3rIwAAdHIIAJOtfSPwsFkL3HHYaZXKsGe8\nIPt2KnIUhY9qwfwqr1uPz73ntP7dYlYr3s3YupsixfGXHbDJrBxQnL+RU6NYkM61\nwU5lq0KcowukfBfaRG9/6rOagytNoxkB8zrsb0ekzlCWMJy3wKAecD9mZf6JNpOe\nPdlnvHfcrMbUNrhBxhUCv+BtfvzjyhyCAtm/EwslDFZE7GMv4qI2jzBoVCTShRNq\nVxq2qxxrqsXazcDbTa3FIT0Jbv8gjTnDiGfZm7ges+rEpUqbH5AQQimfbRRZGTfA\nPrAI/sLKy9CgWr09hE7Ip+6qBKWmKvhaxUeyPHCfUVdaUJfA35QEMeu2rOdJI+4=\n=8edo\n-----END PGP SIGNATURE-----\n", "payload": "tree a70af32f2ae0e64552503387309c487e566a212b\nparent 95ef5eb3af24bf0c00d6970dc93fd71aecff51d3\nparent 2a4281998b6cac4893dabea52d38518973bac41a\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1553759017 +0100\ncommitter GitHub <noreply@github.com> 1553759017 +0100\n\nRollup merge of #59441 - TheGoddessInari:natvis, r=alexcrichton\n\nRemove the block on natvis for lld-link.\n\nSince #56642 bumped minimum LLVM version to 6.0.0, Rust should be able to honor or ignore Windows natvis support with lld-link.\n\nIt looks like  https://github.com/llvm-mirror/lld/commit/9133ca57b was in LLVM 7.0, while https://github.com/llvm-mirror/lld/commit/27b9c4285 made it into 6.0, at least if the release branches are anything to go by.\n\nFixes #59383.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02c1e3dfc12b9498c45ac25e39e7abc921e758f4", "html_url": "https://github.com/rust-lang/rust/commit/02c1e3dfc12b9498c45ac25e39e7abc921e758f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02c1e3dfc12b9498c45ac25e39e7abc921e758f4/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95ef5eb3af24bf0c00d6970dc93fd71aecff51d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/95ef5eb3af24bf0c00d6970dc93fd71aecff51d3", "html_url": "https://github.com/rust-lang/rust/commit/95ef5eb3af24bf0c00d6970dc93fd71aecff51d3"}, {"sha": "2a4281998b6cac4893dabea52d38518973bac41a", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a4281998b6cac4893dabea52d38518973bac41a", "html_url": "https://github.com/rust-lang/rust/commit/2a4281998b6cac4893dabea52d38518973bac41a"}], "stats": {"total": 12, "additions": 0, "deletions": 12}, "files": [{"sha": "244505976b6c289804383cd3d251a5ba2bd0a92f", "filename": "src/librustc_codegen_ssa/back/linker.rs", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/02c1e3dfc12b9498c45ac25e39e7abc921e758f4/src%2Flibrustc_codegen_ssa%2Fback%2Flinker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02c1e3dfc12b9498c45ac25e39e7abc921e758f4/src%2Flibrustc_codegen_ssa%2Fback%2Flinker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fback%2Flinker.rs?ref=02c1e3dfc12b9498c45ac25e39e7abc921e758f4", "patch": "@@ -596,18 +596,6 @@ impl<'a> Linker for MsvcLinker<'a> {\n         // This will cause the Microsoft linker to embed .natvis info into the PDB file\n         let natvis_dir_path = self.sess.sysroot.join(\"lib\\\\rustlib\\\\etc\");\n         if let Ok(natvis_dir) = fs::read_dir(&natvis_dir_path) {\n-            // LLVM 5.0.0's lld-link frontend doesn't yet recognize, and chokes\n-            // on, the /NATVIS:... flags.  LLVM 6 (or earlier) should at worst ignore\n-            // them, eventually mooting this workaround, per this landed patch:\n-            // https://github.com/llvm-mirror/lld/commit/27b9c4285364d8d76bb43839daa100\n-            if let Some(ref linker_path) = self.sess.opts.cg.linker {\n-                if let Some(linker_name) = Path::new(&linker_path).file_stem() {\n-                    if linker_name.to_str().unwrap().to_lowercase() == \"lld-link\" {\n-                        self.sess.warn(\"not embedding natvis: lld-link may not support the flag\");\n-                        return;\n-                    }\n-                }\n-            }\n             for entry in natvis_dir {\n                 match entry {\n                     Ok(entry) => {"}]}