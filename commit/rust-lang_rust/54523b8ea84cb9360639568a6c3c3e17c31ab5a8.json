{"sha": "54523b8ea84cb9360639568a6c3c3e17c31ab5a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0NTIzYjhlYTg0Y2I5MzYwNjM5NTY4YTZjM2MzZTE3YzMxYWI1YTg=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-01-22T13:15:12Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-02-02T09:39:23Z"}, "message": "Fix rustc bootstrap test", "tree": {"sha": "d8399fc03b44f147a6e00c4abfc5909511b34d0a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8399fc03b44f147a6e00c4abfc5909511b34d0a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54523b8ea84cb9360639568a6c3c3e17c31ab5a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54523b8ea84cb9360639568a6c3c3e17c31ab5a8", "html_url": "https://github.com/rust-lang/rust/commit/54523b8ea84cb9360639568a6c3c3e17c31ab5a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54523b8ea84cb9360639568a6c3c3e17c31ab5a8/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4ae9ef3b0ee28b3f3602a55e02d5be857379dd3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4ae9ef3b0ee28b3f3602a55e02d5be857379dd3", "html_url": "https://github.com/rust-lang/rust/commit/e4ae9ef3b0ee28b3f3602a55e02d5be857379dd3"}], "stats": {"total": 40, "additions": 25, "deletions": 15}, "files": [{"sha": "15f97c867a1ec7def68932d04d7ca1ce4c48b61c", "filename": "scripts/test_bootstrap.sh", "status": "modified", "additions": 25, "deletions": 15, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/54523b8ea84cb9360639568a6c3c3e17c31ab5a8/scripts%2Ftest_bootstrap.sh", "raw_url": "https://github.com/rust-lang/rust/raw/54523b8ea84cb9360639568a6c3c3e17c31ab5a8/scripts%2Ftest_bootstrap.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Ftest_bootstrap.sh?ref=54523b8ea84cb9360639568a6c3c3e17c31ab5a8", "patch": "@@ -14,21 +14,18 @@ git checkout -- .\n git checkout \"$(rustc -V | cut -d' ' -f3 | tr -d '(')\"\n \n git apply - <<EOF\n-diff --git a/.gitmodules b/.gitmodules\n-index 984113151de..c1e9d960d56 100644\n---- a/.gitmodules\n-+++ b/.gitmodules\n-@@ -34,10 +34,6 @@\n- [submodule \"src/doc/edition-guide\"]\n- \tpath = src/doc/edition-guide\n- \turl = https://github.com/rust-lang/edition-guide.git\n--[submodule \"src/llvm-project\"]\n--\tpath = src/llvm-project\n--\turl = https://github.com/rust-lang/llvm-project.git\n--\tbranch = rustc/11.0-2020-10-12\n- [submodule \"src/doc/embedded-book\"]\n- \tpath = src/doc/embedded-book\n- \turl = https://github.com/rust-embedded/book.git\n+diff --git a/Cargo.toml b/Cargo.toml\n+index 5bd1147cad5..10d68a2ff14 100644\n+--- a/Cargo.toml\n++++ b/Cargo.toml\n+@@ -111,5 +111,7 @@ rustc-std-workspace-std = { path = 'library/rustc-std-workspace-std' }\n+ # source code for this crate.\n+ backtrace = { path = \"library/backtrace\" }\n+ \n++compiler_builtins = { path = \"../build_sysroot/compiler-builtins\" }\n++\n+ [patch.\"https://github.com/rust-lang/rust-clippy\"]\n+ clippy_lints = { path = \"src/tools/clippy/clippy_lints\" }\n diff --git a/compiler/rustc_data_structures/Cargo.toml b/compiler/rustc_data_structures/Cargo.toml\n index 23e689fcae7..5f077b765b6 100644\n --- a/compiler/rustc_data_structures/Cargo.toml\n@@ -41,6 +38,19 @@ index 23e689fcae7..5f077b765b6 100644\n \n  [target.'cfg(windows)'.dependencies]\n  winapi = { version = \"0.3\", features = [\"fileapi\", \"psapi\"] }\n+diff --git a/library/alloc/Cargo.toml b/library/alloc/Cargo.toml\n+index d95b5b7f17f..00b6f0e3635 100644\n+--- a/library/alloc/Cargo.toml\n++++ b/library/alloc/Cargo.toml\n+@@ -8,7 +8,7 @@ edition = \"2018\"\n+ \n+ [dependencies]\n+ core = { path = \"../core\" }\n+-compiler_builtins = { version = \"0.1.39\", features = ['rustc-dep-of-std'] }\n++compiler_builtins = { version = \"0.1.39\", features = ['rustc-dep-of-std', 'no-asm'] }\n+ \n+ [dev-dependencies]\n+ rand = \"0.7\"\n EOF\n \n cat > config.toml <<EOF"}]}