{"sha": "10ae04a157125445ff2e2d10d142d81e3cc8acad", "node_id": "C_kwDOAAsO6NoAKDEwYWUwNGExNTcxMjU0NDVmZjJlMmQxMGQxNDJkODFlM2NjOGFjYWQ", "commit": {"author": {"name": "Stefan Lankes", "email": "slankes@eonerc.rwth-aachen.de", "date": "2022-02-06T23:13:45Z"}, "committer": {"name": "Stefan Lankes", "email": "slankes@eonerc.rwth-aachen.de", "date": "2022-02-08T08:33:30Z"}, "message": "add missing description of the target aarch64-unknown-none-hermitkernel", "tree": {"sha": "ec0d2dda6d86b27f0b72b5dbeae7fabb08783460", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec0d2dda6d86b27f0b72b5dbeae7fabb08783460"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/10ae04a157125445ff2e2d10d142d81e3cc8acad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/10ae04a157125445ff2e2d10d142d81e3cc8acad", "html_url": "https://github.com/rust-lang/rust/commit/10ae04a157125445ff2e2d10d142d81e3cc8acad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/10ae04a157125445ff2e2d10d142d81e3cc8acad/comments", "author": {"login": "stlankes", "id": 5888473, "node_id": "MDQ6VXNlcjU4ODg0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/5888473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stlankes", "html_url": "https://github.com/stlankes", "followers_url": "https://api.github.com/users/stlankes/followers", "following_url": "https://api.github.com/users/stlankes/following{/other_user}", "gists_url": "https://api.github.com/users/stlankes/gists{/gist_id}", "starred_url": "https://api.github.com/users/stlankes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stlankes/subscriptions", "organizations_url": "https://api.github.com/users/stlankes/orgs", "repos_url": "https://api.github.com/users/stlankes/repos", "events_url": "https://api.github.com/users/stlankes/events{/privacy}", "received_events_url": "https://api.github.com/users/stlankes/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stlankes", "id": 5888473, "node_id": "MDQ6VXNlcjU4ODg0NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/5888473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stlankes", "html_url": "https://github.com/stlankes", "followers_url": "https://api.github.com/users/stlankes/followers", "following_url": "https://api.github.com/users/stlankes/following{/other_user}", "gists_url": "https://api.github.com/users/stlankes/gists{/gist_id}", "starred_url": "https://api.github.com/users/stlankes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stlankes/subscriptions", "organizations_url": "https://api.github.com/users/stlankes/orgs", "repos_url": "https://api.github.com/users/stlankes/repos", "events_url": "https://api.github.com/users/stlankes/events{/privacy}", "received_events_url": "https://api.github.com/users/stlankes/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b269f33f4d848b57cd2bb44ce22c1d305ae32ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b269f33f4d848b57cd2bb44ce22c1d305ae32ea", "html_url": "https://github.com/rust-lang/rust/commit/0b269f33f4d848b57cd2bb44ce22c1d305ae32ea"}], "stats": {"total": 84, "additions": 81, "deletions": 3}, "files": [{"sha": "1cdc1372c2127d44854409893bce6a4b8515de66", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/10ae04a157125445ff2e2d10d142d81e3cc8acad/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/10ae04a157125445ff2e2d10d142d81e3cc8acad/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=10ae04a157125445ff2e2d10d142d81e3cc8acad", "patch": "@@ -204,7 +204,8 @@ target | std | host | notes\n `aarch64-apple-tvos` | * |  | ARM64 tvOS\n [`aarch64-kmc-solid_asp3`](platform-support/kmc-solid.md) | \u2713 |  | ARM64 SOLID with TOPPERS/ASP3\n `aarch64-unknown-freebsd` | \u2713 | \u2713 | ARM64 FreeBSD\n-`aarch64-unknown-hermit` | ? |  |\n+`aarch64_unknown_hermit` | \u2713 |  |ARM64 HermitCore\n+[`aarch64_unknown_none_hermitkernel`](platform-support/aarch64-unknown-none-hermitkernel.md) | * |  | ARM64 HermitCore kernel\n `aarch64-unknown-uefi` | * |  | ARM64 UEFI\n `aarch64-unknown-linux-gnu_ilp32` | \u2713 | \u2713 | ARM64 Linux (ILP32 ABI)\n `aarch64-unknown-netbsd` | \u2713 | \u2713 |\n@@ -286,10 +287,10 @@ target | std | host | notes\n `x86_64-sun-solaris` | ? |  | Deprecated target for 64-bit Solaris 10/11, illumos\n `x86_64-unknown-dragonfly` | \u2713 | \u2713 | 64-bit DragonFlyBSD\n `x86_64-unknown-haiku` | \u2713 | \u2713 | 64-bit Haiku\n-`x86_64-unknown-hermit` | ? |  |\n+`x86_64-unknown-hermit` | \u2713 |  | HermitCore\n `x86_64-unknown-l4re-uclibc` | ? |  |\n [`x86_64-unknown-none`](platform-support/x86_64-unknown-none.md) | * |  | Freestanding/bare-metal x86_64, softfloat\n-`x86_64-unknown-none-hermitkernel` | ? |  | HermitCore kernel\n+`x86_64-unknown-none-hermitkernel` | * |  | HermitCore kernel\n `x86_64-unknown-none-linuxkernel` | * |  | Linux kernel modules\n [`x86_64-unknown-openbsd`](platform-support/openbsd.md) | \u2713 | \u2713 | 64-bit OpenBSD\n `x86_64-unknown-uefi` | * |  | 64-bit UEFI"}, {"sha": "b8967f631878c8d0230c0a686ef6e6cafd99b0d5", "filename": "src/doc/rustc/src/platform-support/aarch64-unknown-none-hermitkernel.md", "status": "added", "additions": 77, "deletions": 0, "changes": 77, "blob_url": "https://github.com/rust-lang/rust/blob/10ae04a157125445ff2e2d10d142d81e3cc8acad/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Faarch64-unknown-none-hermitkernel.md", "raw_url": "https://github.com/rust-lang/rust/raw/10ae04a157125445ff2e2d10d142d81e3cc8acad/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Faarch64-unknown-none-hermitkernel.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support%2Faarch64-unknown-none-hermitkernel.md?ref=10ae04a157125445ff2e2d10d142d81e3cc8acad", "patch": "@@ -0,0 +1,77 @@\n+# `aarch64-unknown-none-hermitkernel`\n+\n+**Tier: 3**\n+\n+Required to build the kernel for [HermitCore](https://github.com/hermitcore/hermit-playground)\n+or [RustyHermit](https://github.com/hermitcore/rusty-hermit).\n+The result is a bare-metal aarch64 binary in ELF format.\n+\n+## Target maintainers\n+\n+- Stefan Lankes, https://github.com/stlankes\n+\n+## Requirements\n+\n+This target is cross-compiled. There is no support for `std`, but the\n+library operating system provides a simple allocator to use `alloc`.\n+\n+By default, Rust code generated for this target does not use any vector or\n+floating-point registers. This allows the generated code to build the library\n+operaring system, which may need to avoid the use of such\n+registers or which may have special considerations about the use of such\n+registers (e.g. saving and restoring them to avoid breaking userspace code\n+using the same registers). In contrast to `aarch64-unknown-none-softfloat`,\n+the target is completly relocatable, which is a required feature of RustyHermit.\n+\n+By default, code generated with this target should run on any `aarch64`\n+hardware; enabling additional target features may raise this baseline.\n+On `aarch64-unknown-none-hermitkernel`, `extern \"C\"` uses the [standard System V calling\n+convention](https://github.com/ARM-software/abi-aa/releases/download/2021Q3/sysvabi64.pdf),\n+without red zones.\n+\n+This target generated binaries in the ELF format.\n+\n+## Building the target\n+\n+Typical you should not use the target directly. The target `aarch64-unknown-hermit`\n+builds the _user space_ of RustyHermit and supports red zones and floating-point\n+operations.\n+To build and link the kernel to the application, the crate\n+[hermit-sys](https://github.com/hermitcore/rusty-hermit/tree/master/hermit-sys)\n+should be used by adding the following lines to the `Cargo.toml` file of\n+your application.\n+\n+```toml\n+[target.'cfg(target_os = \"hermit\")'.dependencies]\n+hermit-sys = \"0.1.*\"\n+```\n+\n+The crate `hermit-sys` uses the target `aarch64-unknown-none-hermitkernel`\n+to build the kernel.\n+\n+## Building Rust programs\n+\n+Rust does not yet ship pre-compiled artifacts for this target. To compile for\n+this target, you need to build the crate `hermit-sys` (see\n+\"Building the target\" above).\n+\n+## Testing\n+\n+As `aarch64-unknown-none-hermitkernel` does not support `std`\n+and does not support running any Rust testsuite.\n+\n+## Cross-compilation toolchains and C code\n+\n+If you want to compile C code along with Rust you will need an\n+appropriate `aarch64` toolchain.\n+\n+Rust *may* be able to use an `aarch64-linux-gnu-` toolchain with appropriate\n+standalone flags to build for this toolchain (depending on the assumptions of\n+that toolchain, see below), or you may wish to use a separate\n+`aarch64-unknown-none` (or `aarch64-elf-`) toolchain.\n+\n+On some `aarch64` hosts that use ELF binaries, you *may* be able to use the host\n+C toolchain, if it does not introduce assumptions about the host environment\n+that don't match the expectations of a standalone environment. Otherwise, you\n+may need a separate toolchain for standalone/freestanding development, just as\n+when cross-compiling from a non-`aarch64` platform."}]}