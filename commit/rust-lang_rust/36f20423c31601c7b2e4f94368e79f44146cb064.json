{"sha": "36f20423c31601c7b2e4f94368e79f44146cb064", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2ZjIwNDIzYzMxNjAxYzdiMmU0Zjk0MzY4ZTc5ZjQ0MTQ2Y2IwNjQ=", "commit": {"author": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-07-13T02:29:31Z"}, "committer": {"name": "blake2-ppc", "email": "blake2-ppc", "date": "2013-07-13T04:23:38Z"}, "message": "cmp: Use default methods in trait Ord, only require Ord::lt\n\nIt will be simpler to implement only one method for Ord, while we also\nallow implementing all four Ord methods for semantics or performance\nreasons.\n\nWe only supply three default methods (and not four), because don't have\nany nice error reporting for the case where at least one method must be\nimplemented, but it's arbitrary which.", "tree": {"sha": "2f453243f6413acabc284a0b51403888a72edd29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f453243f6413acabc284a0b51403888a72edd29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36f20423c31601c7b2e4f94368e79f44146cb064", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36f20423c31601c7b2e4f94368e79f44146cb064", "html_url": "https://github.com/rust-lang/rust/commit/36f20423c31601c7b2e4f94368e79f44146cb064", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36f20423c31601c7b2e4f94368e79f44146cb064/comments", "author": null, "committer": null, "parents": [{"sha": "1ee54a86171d70f439b3cf77e566150b78251bc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ee54a86171d70f439b3cf77e566150b78251bc2", "html_url": "https://github.com/rust-lang/rust/commit/1ee54a86171d70f439b3cf77e566150b78251bc2"}], "stats": {"total": 63, "additions": 53, "deletions": 10}, "files": [{"sha": "77d4e945aae1706cf58d7b80caf23a13b32c2f5f", "filename": "src/libstd/cmp.rs", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Flibstd%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Flibstd%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcmp.rs?ref=36f20423c31601c7b2e4f94368e79f44146cb064", "patch": "@@ -157,19 +157,20 @@ pub fn lexical_ordering(o1: Ordering, o2: Ordering) -> Ordering {\n /**\n * Trait for values that can be compared for a sort-order.\n *\n-* Eventually this may be simplified to only require\n-* an `le` method, with the others generated from\n-* default implementations. However it should remain\n-* possible to implement the others separately, for\n-* compatibility with floating-point NaN semantics\n+* Ord only requires implementation of the `lt` method,\n+* with the others generated from default implementations.\n+*\n+* However it remains possible to implement the others separately,\n+* for compatibility with floating-point NaN semantics\n * (cf. IEEE 754-2008 section 5.11).\n */\n+#[allow(default_methods)] // NOTE: Remove when allowed in stage0\n #[lang=\"ord\"]\n pub trait Ord {\n     fn lt(&self, other: &Self) -> bool;\n-    fn le(&self, other: &Self) -> bool;\n-    fn ge(&self, other: &Self) -> bool;\n-    fn gt(&self, other: &Self) -> bool;\n+    fn le(&self, other: &Self) -> bool { !other.lt(self) }\n+    fn gt(&self, other: &Self) -> bool {  other.lt(self) }\n+    fn ge(&self, other: &Self) -> bool { !self.lt(other) }\n }\n \n /// The equivalence relation. Two values may be equivalent even if they are"}, {"sha": "9a3fff453f3a0cee5089ced283494485d68c233c", "filename": "src/test/compile-fail/issue-3344.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Ftest%2Fcompile-fail%2Fissue-3344.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Ftest%2Fcompile-fail%2Fissue-3344.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-3344.rs?ref=36f20423c31601c7b2e4f94368e79f44146cb064", "patch": "@@ -9,8 +9,7 @@\n // except according to those terms.\n \n struct thing(uint);\n-impl Ord for thing { //~ ERROR missing method `gt`\n-    fn lt(&self, other: &thing) -> bool { **self < **other }\n+impl Ord for thing { //~ ERROR missing method `lt`\n     fn le(&self, other: &thing) -> bool { **self < **other }\n     fn ge(&self, other: &thing) -> bool { **self < **other }\n }"}, {"sha": "0dc5e7eb6ce22956afd97e63b786eb95113f9ca5", "filename": "src/test/run-pass/cmp-default.rs", "status": "added", "additions": 43, "deletions": 0, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Ftest%2Frun-pass%2Fcmp-default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36f20423c31601c7b2e4f94368e79f44146cb064/src%2Ftest%2Frun-pass%2Fcmp-default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcmp-default.rs?ref=36f20423c31601c7b2e4f94368e79f44146cb064", "patch": "@@ -0,0 +1,43 @@\n+// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Test default methods in Ord\n+//\n+struct Int(int);\n+\n+impl Ord for Int {\n+    fn lt(&self, other: &Int) -> bool {\n+        **self < **other\n+    }\n+}\n+\n+struct RevInt(int);\n+\n+impl Ord for RevInt {\n+    fn lt(&self, other: &RevInt) -> bool {\n+        **self > **other\n+    }\n+}\n+\n+pub fn main() {\n+    assert!(Int(2) >  Int(1));\n+    assert!(Int(2) >= Int(1));\n+    assert!(Int(1) >= Int(1));\n+    assert!(Int(1) <  Int(2));\n+    assert!(Int(1) <= Int(2));\n+    assert!(Int(1) <= Int(1));\n+\n+    assert!(RevInt(2) <  RevInt(1));\n+    assert!(RevInt(2) <= RevInt(1));\n+    assert!(RevInt(1) <= RevInt(1));\n+    assert!(RevInt(1) >  RevInt(2));\n+    assert!(RevInt(1) >= RevInt(2));\n+    assert!(RevInt(1) >= RevInt(1));\n+}"}]}