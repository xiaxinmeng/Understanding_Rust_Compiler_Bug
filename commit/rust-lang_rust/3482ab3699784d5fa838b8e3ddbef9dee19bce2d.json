{"sha": "3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0ODJhYjM2OTk3ODRkNWZhODM4YjhlM2RkYmVmOWRlZTE5YmNlMmQ=", "commit": {"author": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2014-05-27T12:52:00Z"}, "committer": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2014-05-28T12:02:14Z"}, "message": "rustdoc: cross-crate source links are one level lower.\n\nPreviously this was adding one-too-many `..`s to the path for the\n`gotosrc=...` links for local crates. Also, the `root_path` already ends\nin `/`s so a trailing / shouldn't be added after the root (some servers\ntreat `...//...` different to `.../...` including the one running\ndoc.rust-lang.org).", "tree": {"sha": "ecb71341ab717357af7929992a8f912533d1bb16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ecb71341ab717357af7929992a8f912533d1bb16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "html_url": "https://github.com/rust-lang/rust/commit/3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3482ab3699784d5fa838b8e3ddbef9dee19bce2d/comments", "author": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a092a815861cbbf3585c7edfb12f4234cfbaeb9", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a092a815861cbbf3585c7edfb12f4234cfbaeb9", "html_url": "https://github.com/rust-lang/rust/commit/0a092a815861cbbf3585c7edfb12f4234cfbaeb9"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "d0974c25e95319e2ce2a4b6e9a4d46f67b77741e", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3482ab3699784d5fa838b8e3ddbef9dee19bce2d/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3482ab3699784d5fa838b8e3ddbef9dee19bce2d/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "patch": "@@ -1094,10 +1094,10 @@ impl<'a> Item<'a> {\n             let path = cache.external_paths.get(&self.item.def_id);\n             let root = match *cache.extern_locations.get(&self.item.def_id.krate) {\n                 Remote(ref s) => s.to_string(),\n-                Local => format!(\"{}/..\", self.cx.root_path),\n+                Local => self.cx.root_path.clone(),\n                 Unknown => return None,\n             };\n-            Some(format!(\"{root}/{path}/{file}?gotosrc={goto}\",\n+            Some(format!(\"{root}{path}/{file}?gotosrc={goto}\",\n                          root = root,\n                          path = path.slice_to(path.len() - 1).connect(\"/\"),\n                          file = item_path(self.item),"}]}