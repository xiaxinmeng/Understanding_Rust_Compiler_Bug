{"sha": "2f65aac667302849407fe677cc34078300b57eee", "node_id": "C_kwDOAAsO6NoAKDJmNjVhYWM2NjczMDI4NDk0MDdmZTY3N2NjMzQwNzgzMDBiNTdlZWU", "commit": {"author": {"name": "mu001999", "email": "mu001999@outlook.com", "date": "2023-05-29T04:26:27Z"}, "committer": {"name": "mu001999", "email": "mu001999@outlook.com", "date": "2023-05-29T04:26:27Z"}, "message": "Determine `self_ty` with expected `ty`", "tree": {"sha": "e6945804d38b2385b5befbf7d1e590846d323c2e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e6945804d38b2385b5befbf7d1e590846d323c2e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f65aac667302849407fe677cc34078300b57eee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f65aac667302849407fe677cc34078300b57eee", "html_url": "https://github.com/rust-lang/rust/commit/2f65aac667302849407fe677cc34078300b57eee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f65aac667302849407fe677cc34078300b57eee/comments", "author": {"login": "MU001999", "id": 21022101, "node_id": "MDQ6VXNlcjIxMDIyMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/21022101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MU001999", "html_url": "https://github.com/MU001999", "followers_url": "https://api.github.com/users/MU001999/followers", "following_url": "https://api.github.com/users/MU001999/following{/other_user}", "gists_url": "https://api.github.com/users/MU001999/gists{/gist_id}", "starred_url": "https://api.github.com/users/MU001999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MU001999/subscriptions", "organizations_url": "https://api.github.com/users/MU001999/orgs", "repos_url": "https://api.github.com/users/MU001999/repos", "events_url": "https://api.github.com/users/MU001999/events{/privacy}", "received_events_url": "https://api.github.com/users/MU001999/received_events", "type": "User", "site_admin": false}, "committer": {"login": "MU001999", "id": 21022101, "node_id": "MDQ6VXNlcjIxMDIyMTAx", "avatar_url": "https://avatars.githubusercontent.com/u/21022101?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MU001999", "html_url": "https://github.com/MU001999", "followers_url": "https://api.github.com/users/MU001999/followers", "following_url": "https://api.github.com/users/MU001999/following{/other_user}", "gists_url": "https://api.github.com/users/MU001999/gists{/gist_id}", "starred_url": "https://api.github.com/users/MU001999/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MU001999/subscriptions", "organizations_url": "https://api.github.com/users/MU001999/orgs", "repos_url": "https://api.github.com/users/MU001999/repos", "events_url": "https://api.github.com/users/MU001999/events{/privacy}", "received_events_url": "https://api.github.com/users/MU001999/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "089677eb32af83318467325edbef9b64053df532", "url": "https://api.github.com/repos/rust-lang/rust/commits/089677eb32af83318467325edbef9b64053df532", "html_url": "https://github.com/rust-lang/rust/commit/089677eb32af83318467325edbef9b64053df532"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "7df811ccdb5c1804afccdb7a60fa224661ac18e5", "filename": "compiler/rustc_hir_analysis/src/check/compare_impl_item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f65aac667302849407fe677cc34078300b57eee/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f65aac667302849407fe677cc34078300b57eee/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs?ref=2f65aac667302849407fe677cc34078300b57eee", "patch": "@@ -901,7 +901,7 @@ fn report_trait_method_mismatch<'tcx>(\n             if trait_m.fn_has_self_parameter =>\n         {\n             let ty = trait_sig.inputs()[0];\n-            let sugg = match ExplicitSelf::determine(ty, |_| ty == impl_trait_ref.self_ty()) {\n+            let sugg = match ExplicitSelf::determine(ty, |ty| ty == impl_trait_ref.self_ty()) {\n                 ExplicitSelf::ByValue => \"self\".to_owned(),\n                 ExplicitSelf::ByReference(_, hir::Mutability::Not) => \"&self\".to_owned(),\n                 ExplicitSelf::ByReference(_, hir::Mutability::Mut) => \"&mut self\".to_owned(),"}, {"sha": "d0bd5b46cf59f9f6851e2c048caf39528fc1e489", "filename": "tests/ui/mismatched_types/E0053.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2FE0053.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2FE0053.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_types%2FE0053.stderr?ref=2f65aac667302849407fe677cc34078300b57eee", "patch": "@@ -22,7 +22,7 @@ LL |     fn bar(&mut self) { }\n    |            ^^^^^^^^^\n    |            |\n    |            types differ in mutability\n-   |            help: change the self-receiver type to match the trait: `self: &Bar`\n+   |            help: change the self-receiver type to match the trait: `&self`\n    |\n note: type in trait\n   --> $DIR/E0053.rs:3:12"}, {"sha": "e63471e974771d5b5e05f57e9d961ac5d46ec45e", "filename": "tests/ui/mismatched_types/issue-112036.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2Fissue-112036.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2Fissue-112036.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_types%2Fissue-112036.rs?ref=2f65aac667302849407fe677cc34078300b57eee", "patch": "@@ -0,0 +1,7 @@\n+struct Foo;\n+\n+impl Drop for Foo {\n+    fn drop(self) {} //~ ERROR method `drop` has an incompatible type for trait\n+}\n+\n+fn main() {}"}, {"sha": "a883aba35bfba170f0080e868a57d415cb18b0d6", "filename": "tests/ui/mismatched_types/issue-112036.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2Fissue-112036.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2f65aac667302849407fe677cc34078300b57eee/tests%2Fui%2Fmismatched_types%2Fissue-112036.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_types%2Fissue-112036.stderr?ref=2f65aac667302849407fe677cc34078300b57eee", "patch": "@@ -0,0 +1,15 @@\n+error[E0053]: method `drop` has an incompatible type for trait\n+  --> $DIR/issue-112036.rs:4:13\n+   |\n+LL |     fn drop(self) {}\n+   |             ^^^^\n+   |             |\n+   |             expected `&mut Foo`, found `Foo`\n+   |             help: change the self-receiver type to match the trait: `&mut self`\n+   |\n+   = note: expected signature `fn(&mut Foo)`\n+              found signature `fn(Foo)`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0053`."}]}