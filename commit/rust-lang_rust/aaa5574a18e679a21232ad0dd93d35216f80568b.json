{"sha": "aaa5574a18e679a21232ad0dd93d35216f80568b", "node_id": "C_kwDOAAsO6NoAKGFhYTU1NzRhMThlNjc5YTIxMjMyYWQwZGQ5M2QzNTIxNmY4MDU2OGI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-08-20T17:45:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-08-20T17:45:14Z"}, "message": "Rollup merge of #100718 - GuillaumeGomez:fix-item-info, r=jsha\n\n[rustdoc] Fix item info display\n\nFixes  #100369.\n\nThe solution I came up with was simply to wrap the \"text part\" of the `item-info` into another span so that `flex` wouldn't mess with it.\n\nLive demo is [here](https://rustdoc.crud.net/imperio/fix-item-info/foo/struct.ItemInfo.html).\n\nr? ``@jsha``", "tree": {"sha": "b4aa8399cab75efa93aa35b9ea14d3c0c40daa1a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4aa8399cab75efa93aa35b9ea14d3c0c40daa1a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aaa5574a18e679a21232ad0dd93d35216f80568b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjAR2qCRBK7hj4Ov3rIwAA4R8IAJR2NIfF6wsvPUN6QyQu/tzf\n5lTvAYiJSjJBG9q+Sa9NODpGIVmWz8WsnlLcyiNIxvJ6CFl3uctPfHEX2ct2jf2a\nfIQAgSVgRRSWHY268CvQi/b6Nq9Pfgc+v8tw7Qk4mKWHI11XC7vUqeSaTXdycqVV\nLeLc/R0O1qIV1Mh8EzAiM0I3cGryoGCdw+H/XlBlvpJk84xmiyOqj8wtHyi8xBPT\nP5GcQpxkTkHebD2Itk0XmaJKzuzV5GBINl7K9QfT1X10C5wzpZB0roFKfiOlQ4kF\npbYsXXsqJgXTCFUJ/ykcrvB+HuJu+VGeEK6tm+8SNxjNrRlc2gswONK5WMNsSmY=\n=XIZ8\n-----END PGP SIGNATURE-----\n", "payload": "tree b4aa8399cab75efa93aa35b9ea14d3c0c40daa1a\nparent e81b994868502bfcfc9e497c8c930d5b68d2398e\nparent 0df1c690231c108fcfaa3ba3e22be37fa4fb8fc4\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1661017514 +0200\ncommitter GitHub <noreply@github.com> 1661017514 +0200\n\nRollup merge of #100718 - GuillaumeGomez:fix-item-info, r=jsha\n\n[rustdoc] Fix item info display\n\nFixes  #100369.\n\nThe solution I came up with was simply to wrap the \"text part\" of the `item-info` into another span so that `flex` wouldn't mess with it.\n\nLive demo is [here](https://rustdoc.crud.net/imperio/fix-item-info/foo/struct.ItemInfo.html).\n\nr? ``@jsha``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aaa5574a18e679a21232ad0dd93d35216f80568b", "html_url": "https://github.com/rust-lang/rust/commit/aaa5574a18e679a21232ad0dd93d35216f80568b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aaa5574a18e679a21232ad0dd93d35216f80568b/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e81b994868502bfcfc9e497c8c930d5b68d2398e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e81b994868502bfcfc9e497c8c930d5b68d2398e", "html_url": "https://github.com/rust-lang/rust/commit/e81b994868502bfcfc9e497c8c930d5b68d2398e"}, {"sha": "0df1c690231c108fcfaa3ba3e22be37fa4fb8fc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/0df1c690231c108fcfaa3ba3e22be37fa4fb8fc4", "html_url": "https://github.com/rust-lang/rust/commit/0df1c690231c108fcfaa3ba3e22be37fa4fb8fc4"}], "stats": {"total": 27, "additions": 18, "deletions": 9}, "files": [{"sha": "2b66ab22475d4595c51712d9afa5573f8f20e29d", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=aaa5574a18e679a21232ad0dd93d35216f80568b", "patch": "@@ -569,7 +569,10 @@ fn short_item_info(\n             message.push_str(&format!(\": {}\", html.into_string()));\n         }\n         extra_info.push(format!(\n-            \"<div class=\\\"stab deprecated\\\"><span class=\\\"emoji\\\">\ud83d\udc4e</span> {}</div>\",\n+            \"<div class=\\\"stab deprecated\\\">\\\n+                 <span class=\\\"emoji\\\">\ud83d\udc4e</span>\\\n+                 <span>{}</span>\\\n+             </div>\",\n             message,\n         ));\n     }\n@@ -582,8 +585,9 @@ fn short_item_info(\n         .filter(|stab| stab.feature != sym::rustc_private)\n         .map(|stab| (stab.level, stab.feature))\n     {\n-        let mut message =\n-            \"<span class=\\\"emoji\\\">\ud83d\udd2c</span> This is a nightly-only experimental API.\".to_owned();\n+        let mut message = \"<span class=\\\"emoji\\\">\ud83d\udd2c</span>\\\n+             <span>This is a nightly-only experimental API.\"\n+            .to_owned();\n \n         let mut feature = format!(\"<code>{}</code>\", Escape(feature.as_str()));\n         if let (Some(url), Some(issue)) = (&cx.shared.issue_tracker_base_url, issue) {\n@@ -594,7 +598,7 @@ fn short_item_info(\n             ));\n         }\n \n-        message.push_str(&format!(\" ({})\", feature));\n+        message.push_str(&format!(\" ({})</span>\", feature));\n \n         extra_info.push(format!(\"<div class=\\\"stab unstable\\\">{}</div>\", message));\n     }"}, {"sha": "b1fa5e7d86de692f821f45762e1d9ab62b91a383", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=aaa5574a18e679a21232ad0dd93d35216f80568b", "patch": "@@ -1164,6 +1164,7 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \n .stab .emoji {\n \tfont-size: 1.25rem;\n+\tmargin-right: 0.3rem;\n }\n \n /* Black one-pixel outline around emoji shapes */"}, {"sha": "8d2c27cf3d77dc4f40cc75fc9f98cde9c0562cf7", "filename": "src/test/rustdoc/issue-32374.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Ftest%2Frustdoc%2Fissue-32374.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aaa5574a18e679a21232ad0dd93d35216f80568b/src%2Ftest%2Frustdoc%2Fissue-32374.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-32374.rs?ref=aaa5574a18e679a21232ad0dd93d35216f80568b", "patch": "@@ -8,20 +8,24 @@\n //      'Experimental'\n // @matches issue_32374/index.html '//*[@class=\"item-right docblock-short\"]/text()' 'Docs'\n \n-// @has issue_32374/struct.T.html '//*[@class=\"stab deprecated\"]' \\\n-//      '\ud83d\udc4e Deprecated since 1.0.0: text'\n+// @has issue_32374/struct.T.html '//*[@class=\"stab deprecated\"]/span' '\ud83d\udc4e'\n+// @has issue_32374/struct.T.html '//*[@class=\"stab deprecated\"]/span' \\\n+//      'Deprecated since 1.0.0: text'\n // @hasraw - '<code>test</code>&nbsp;<a href=\"https://issue_url/32374\">#32374</a>'\n+// @matches issue_32374/struct.T.html '//*[@class=\"stab unstable\"]' '\ud83d\udd2c'\n // @matches issue_32374/struct.T.html '//*[@class=\"stab unstable\"]' \\\n-//      '\ud83d\udd2c This is a nightly-only experimental API. \\(test\\s#32374\\)$'\n+//     'This is a nightly-only experimental API. \\(test\\s#32374\\)$'\n /// Docs\n #[deprecated(since = \"1.0.0\", note = \"text\")]\n #[unstable(feature = \"test\", issue = \"32374\")]\n pub struct T;\n \n+// @has issue_32374/struct.U.html '//*[@class=\"stab deprecated\"]' '\ud83d\udc4e'\n // @has issue_32374/struct.U.html '//*[@class=\"stab deprecated\"]' \\\n-//      '\ud83d\udc4e Deprecated since 1.0.0: deprecated'\n+//     'Deprecated since 1.0.0: deprecated'\n+// @has issue_32374/struct.U.html '//*[@class=\"stab unstable\"]' '\ud83d\udd2c'\n // @has issue_32374/struct.U.html '//*[@class=\"stab unstable\"]' \\\n-//      '\ud83d\udd2c This is a nightly-only experimental API. (test #32374)'\n+//     'This is a nightly-only experimental API. (test #32374)'\n #[deprecated(since = \"1.0.0\", note = \"deprecated\")]\n #[unstable(feature = \"test\", issue = \"32374\", reason = \"unstable\")]\n pub struct U;"}]}