{"sha": "2a63e44f120e5ef7d0d47758618dd520c3001078", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhNjNlNDRmMTIwZTVlZjdkMGQ0Nzc1ODYxOGRkNTIwYzMwMDEwNzg=", "commit": {"author": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2014-05-28T06:32:07Z"}, "committer": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2014-05-28T06:36:36Z"}, "message": "configure: Move clang's libcpp out into flag", "tree": {"sha": "1e7e255313087ed7a1df6d4c46d31ad85d25a3e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e7e255313087ed7a1df6d4c46d31ad85d25a3e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2a63e44f120e5ef7d0d47758618dd520c3001078", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2a63e44f120e5ef7d0d47758618dd520c3001078", "html_url": "https://github.com/rust-lang/rust/commit/2a63e44f120e5ef7d0d47758618dd520c3001078", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2a63e44f120e5ef7d0d47758618dd520c3001078/comments", "author": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73dac7e4e61aa88cfc98433b61ba131b38af978d", "url": "https://api.github.com/repos/rust-lang/rust/commits/73dac7e4e61aa88cfc98433b61ba131b38af978d", "html_url": "https://github.com/rust-lang/rust/commit/73dac7e4e61aa88cfc98433b61ba131b38af978d"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "908daec5ab7dc1a2474b5d5dcf24aca26bef3a14", "filename": "configure", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2a63e44f120e5ef7d0d47758618dd520c3001078/configure", "raw_url": "https://github.com/rust-lang/rust/raw/2a63e44f120e5ef7d0d47758618dd520c3001078/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=2a63e44f120e5ef7d0d47758618dd520c3001078", "patch": "@@ -401,6 +401,7 @@ opt optimize 1 \"build optimized rust code\"\n opt optimize-cxx 1 \"build optimized C++ code\"\n opt optimize-llvm 1 \"build optimized LLVM\"\n opt optimize-tests 1 \"build tests with optimizations\"\n+opt libcpp 1 \"build with clang's libcpp\"\n opt llvm-assertions 1 \"build LLVM with assertions\"\n opt debug 1 \"build with extra debug fun\"\n opt ratchet-bench 0 \"ratchet benchmarks\"\n@@ -1047,15 +1048,13 @@ do\n \n             LLVM_CXX_64=\"ccache clang++ -Qunused-arguments\"\n             LLVM_CC_64=\"ccache clang -Qunused-arguments\"\n-            LLVM_OPTS=\"$LLVM_OPTS --enable-libcpp\"\n             ;;\n             (\"clang\")\n             LLVM_CXX_32=\"clang++ -m32 -Qunused-arguments\"\n             LLVM_CC_32=\"clang -m32 -Qunused-arguments\"\n \n             LLVM_CXX_64=\"clang++ -Qunused-arguments\"\n             LLVM_CC_64=\"clang -Qunused-arguments\"\n-            LLVM_OPTS=\"$LLVM_OPTS --enable-libcpp\"\n             ;;\n             (\"ccache gcc\")\n             LLVM_CXX_32=\"ccache g++ -m32\"\n@@ -1111,6 +1110,10 @@ do\n         CXXFLAGS=$LLVM_CXXFLAGS\n         LDFLAGS=$LLVM_LDFLAGS\n \n+        if [ \"$CFG_DISABLE_LIBCPP\" != 1 ]; then\n+            LLVM_OPTS=\"$LLVM_OPTS --enable-libcpp\"\n+        fi\n+\n         LLVM_FLAGS=\"$LLVM_TARGETS $LLVM_OPTS $LLVM_BUILD \\\n                         $LLVM_HOST $LLVM_TARGET --with-python=$CFG_PYTHON\"\n "}]}