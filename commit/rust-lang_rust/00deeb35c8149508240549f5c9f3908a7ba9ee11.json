{"sha": "00deeb35c8149508240549f5c9f3908a7ba9ee11", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwZGVlYjM1YzgxNDk1MDgyNDA1NDlmNWM5ZjM5MDhhN2JhOWVlMTE=", "commit": {"author": {"name": "Mikhail Zabaluev", "email": "mikhail.zabaluev@gmail.com", "date": "2020-11-07T23:46:05Z"}, "committer": {"name": "Mikhail Zabaluev", "email": "mikhail.zabaluev@gmail.com", "date": "2020-11-22T15:05:14Z"}, "message": "Fix is_write_vectored in LineWriterShim\n\nNow that BufWriter always claims to support vectored writes,\nlook through it at the wrapped writer to decide whether to\nuse vectored writes for LineWriter.", "tree": {"sha": "80e7e78be602ebe9694613590b8d5a61a4f838e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/80e7e78be602ebe9694613590b8d5a61a4f838e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00deeb35c8149508240549f5c9f3908a7ba9ee11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00deeb35c8149508240549f5c9f3908a7ba9ee11", "html_url": "https://github.com/rust-lang/rust/commit/00deeb35c8149508240549f5c9f3908a7ba9ee11", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00deeb35c8149508240549f5c9f3908a7ba9ee11/comments", "author": {"login": "mzabaluev", "id": 1198919, "node_id": "MDQ6VXNlcjExOTg5MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzabaluev", "html_url": "https://github.com/mzabaluev", "followers_url": "https://api.github.com/users/mzabaluev/followers", "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}", "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions", "organizations_url": "https://api.github.com/users/mzabaluev/orgs", "repos_url": "https://api.github.com/users/mzabaluev/repos", "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}", "received_events_url": "https://api.github.com/users/mzabaluev/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mzabaluev", "id": 1198919, "node_id": "MDQ6VXNlcjExOTg5MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1198919?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mzabaluev", "html_url": "https://github.com/mzabaluev", "followers_url": "https://api.github.com/users/mzabaluev/followers", "following_url": "https://api.github.com/users/mzabaluev/following{/other_user}", "gists_url": "https://api.github.com/users/mzabaluev/gists{/gist_id}", "starred_url": "https://api.github.com/users/mzabaluev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mzabaluev/subscriptions", "organizations_url": "https://api.github.com/users/mzabaluev/orgs", "repos_url": "https://api.github.com/users/mzabaluev/repos", "events_url": "https://api.github.com/users/mzabaluev/events{/privacy}", "received_events_url": "https://api.github.com/users/mzabaluev/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9fc44239ec7e9f682797bd9e38368d0ec4457077", "url": "https://api.github.com/repos/rust-lang/rust/commits/9fc44239ec7e9f682797bd9e38368d0ec4457077", "html_url": "https://github.com/rust-lang/rust/commit/9fc44239ec7e9f682797bd9e38368d0ec4457077"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "d0c859d2e0c87de4ae69bdc293a9c33f574b97b7", "filename": "library/std/src/io/buffered/linewritershim.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/00deeb35c8149508240549f5c9f3908a7ba9ee11/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Flinewritershim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00deeb35c8149508240549f5c9f3908a7ba9ee11/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Flinewritershim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Flinewritershim.rs?ref=00deeb35c8149508240549f5c9f3908a7ba9ee11", "patch": "@@ -20,6 +20,12 @@ impl<'a, W: Write> LineWriterShim<'a, W> {\n         Self { buffer }\n     }\n \n+    /// Get a reference to the inner writer (that is, the writer\n+    /// wrapped by the BufWriter).\n+    fn inner(&self) -> &W {\n+        self.buffer.get_ref()\n+    }\n+\n     /// Get a mutable reference to the inner writer (that is, the writer\n     /// wrapped by the BufWriter). Be careful with this writer, as writes to\n     /// it will bypass the buffer.\n@@ -227,7 +233,7 @@ impl<'a, W: Write> Write for LineWriterShim<'a, W> {\n     }\n \n     fn is_write_vectored(&self) -> bool {\n-        self.buffer.is_write_vectored()\n+        self.inner().is_write_vectored()\n     }\n \n     /// Write some data into this BufReader with line buffering. This means"}]}