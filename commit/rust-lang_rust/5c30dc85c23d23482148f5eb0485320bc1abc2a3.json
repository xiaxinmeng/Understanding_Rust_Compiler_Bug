{"sha": "5c30dc85c23d23482148f5eb0485320bc1abc2a3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVjMzBkYzg1YzIzZDIzNDgyMTQ4ZjVlYjA0ODUzMjBiYzFhYmMyYTM=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-05-09T15:17:58Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-05-29T21:02:40Z"}, "message": "rust-lang/rust#41962 has a new error with my new code. Incorporate that into my code.\n\nIn particular, I am adding an implicit injected borrow on the pattern\nmatches, and when we go around the loop, the compiler is reporting\nthat this injected borrow is conflicting with the move of the original\nvalue when the match succeeds.", "tree": {"sha": "dc9b830bba07df0fa69eb6d4bec2c44f840e6833", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dc9b830bba07df0fa69eb6d4bec2c44f840e6833"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5c30dc85c23d23482148f5eb0485320bc1abc2a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5c30dc85c23d23482148f5eb0485320bc1abc2a3", "html_url": "https://github.com/rust-lang/rust/commit/5c30dc85c23d23482148f5eb0485320bc1abc2a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5c30dc85c23d23482148f5eb0485320bc1abc2a3/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "173315e353a9c3c3b8ba2301eaac14fada41f84f", "url": "https://api.github.com/repos/rust-lang/rust/commits/173315e353a9c3c3b8ba2301eaac14fada41f84f", "html_url": "https://github.com/rust-lang/rust/commit/173315e353a9c3c3b8ba2301eaac14fada41f84f"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "29481dbe522110c2b724e896cce35065673fed52", "filename": "src/test/ui/borrowck/issue-41962.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5c30dc85c23d23482148f5eb0485320bc1abc2a3/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5c30dc85c23d23482148f5eb0485320bc1abc2a3/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.rs?ref=5c30dc85c23d23482148f5eb0485320bc1abc2a3", "patch": "@@ -15,11 +15,12 @@ pub fn main(){\n \n     loop {\n         if let Some(thing) = maybe {\n-        //~^ ERROR use of partially moved value: `maybe` (Ast) [E0382]\n+        }\n+        //~^^ ERROR use of partially moved value: `maybe` (Ast) [E0382]\n         //~| ERROR use of moved value: `(maybe as std::prelude::v1::Some).0` (Ast) [E0382]\n         //~| ERROR use of moved value: `maybe` (Mir) [E0382]\n         //~| ERROR use of moved value: `maybe` (Mir) [E0382]\n         //~| ERROR use of moved value: `maybe.0` (Mir) [E0382]\n-        }\n+        //~| ERROR borrow of moved value: `maybe` (Mir) [E0382]\n     }\n }"}, {"sha": "e6eb3739d8c6fd3a624343944bbb24ea900b1a91", "filename": "src/test/ui/borrowck/issue-41962.stderr", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5c30dc85c23d23482148f5eb0485320bc1abc2a3/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5c30dc85c23d23482148f5eb0485320bc1abc2a3/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-41962.stderr?ref=5c30dc85c23d23482148f5eb0485320bc1abc2a3", "patch": "@@ -23,16 +23,23 @@ LL |           if let Some(thing) = maybe {\n    |           ^           ----- value moved here\n    |  _________|\n    | |\n-LL | |         //~^ ERROR use of partially moved value: `maybe` (Ast) [E0382]\n-LL | |         //~| ERROR use of moved value: `(maybe as std::prelude::v1::Some).0` (Ast) [E0382]\n-LL | |         //~| ERROR use of moved value: `maybe` (Mir) [E0382]\n-LL | |         //~| ERROR use of moved value: `maybe` (Mir) [E0382]\n-LL | |         //~| ERROR use of moved value: `maybe.0` (Mir) [E0382]\n LL | |         }\n    | |_________^ value used here after move\n    |\n    = note: move occurs because `maybe` has type `std::option::Option<std::vec::Vec<bool>>`, which does not implement the `Copy` trait\n \n+error[E0382]: borrow of moved value: `maybe` (Mir)\n+  --> $DIR/issue-41962.rs:17:9\n+   |\n+LL |           if let Some(thing) = maybe {\n+   |           ^           ----- value moved here\n+   |  _________|\n+   | |\n+LL | |         }\n+   | |_________^ value borrowed here after move\n+   |\n+   = note: move occurs because `maybe` has type `std::option::Option<std::vec::Vec<bool>>`, which does not implement the `Copy` trait\n+\n error[E0382]: use of moved value: `maybe` (Mir)\n   --> $DIR/issue-41962.rs:17:16\n    |\n@@ -52,6 +59,6 @@ LL |         if let Some(thing) = maybe {\n    |\n    = note: move occurs because `maybe.0` has type `std::vec::Vec<bool>`, which does not implement the `Copy` trait\n \n-error: aborting due to 5 previous errors\n+error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0382`."}]}