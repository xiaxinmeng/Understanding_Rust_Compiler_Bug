{"sha": "c0aadfd76c33ccc26f5e1672243add2e2f73e923", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwYWFkZmQ3NmMzM2NjYzI2ZjVlMTY3MjI0M2FkZDJlMmY3M2U5MjM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-27T02:55:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-27T02:55:57Z"}, "message": "auto merge of #8747 : pnkfelix/rust/fsk-issue6887-fix-emacs-compilation-regexp, r=graydon\n\nFix #6887", "tree": {"sha": "fb52668835fb0ff19bc4d367a01443483b20abe0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb52668835fb0ff19bc4d367a01443483b20abe0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0aadfd76c33ccc26f5e1672243add2e2f73e923", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0aadfd76c33ccc26f5e1672243add2e2f73e923", "html_url": "https://github.com/rust-lang/rust/commit/c0aadfd76c33ccc26f5e1672243add2e2f73e923", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0aadfd76c33ccc26f5e1672243add2e2f73e923/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af99b8d91e9667b78ac5f7c1eb5ba74764b71fdd", "url": "https://api.github.com/repos/rust-lang/rust/commits/af99b8d91e9667b78ac5f7c1eb5ba74764b71fdd", "html_url": "https://github.com/rust-lang/rust/commit/af99b8d91e9667b78ac5f7c1eb5ba74764b71fdd"}, {"sha": "9d8897ba603b044a82a4cbcf97e5aadcb77ef661", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d8897ba603b044a82a4cbcf97e5aadcb77ef661", "html_url": "https://github.com/rust-lang/rust/commit/9d8897ba603b044a82a4cbcf97e5aadcb77ef661"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "4c257e92e5d35c77bc2c6069d2cb94b93ca2dcfc", "filename": "src/etc/emacs/rust-mode.el", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c0aadfd76c33ccc26f5e1672243add2e2f73e923/src%2Fetc%2Femacs%2Frust-mode.el", "raw_url": "https://github.com/rust-lang/rust/raw/c0aadfd76c33ccc26f5e1672243add2e2f73e923/src%2Fetc%2Femacs%2Frust-mode.el", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Femacs%2Frust-mode.el?ref=c0aadfd76c33ccc26f5e1672243add2e2f73e923", "patch": "@@ -225,4 +225,27 @@ The initializer is `DEFAULT-TAB-WIDTH'.\")\n \n (provide 'rust-mode)\n \n+;; Issue #6887: Rather than inheriting the 'gnu compilation error\n+;; regexp (which is broken on a few edge cases), add our own 'rust\n+;; compilation error regexp and use it instead.\n+(defvar rustc-compilation-regexps\n+  (let ((file \"^\\\\([^\\n]+\\\\)\")\n+        (start-line \"\\\\([0-9]+\\\\)\")\n+        (start-col  \"\\\\([0-9]+\\\\)\")\n+        (end-line   \"\\\\([0-9]+\\\\)\")\n+        (end-col    \"\\\\([0-9]+\\\\)\")\n+        (error-or-warning \"\\\\(?:[Ee]rror\\\\|\\\\([Ww]arning\\\\)\\\\)\"))\n+    (let ((re (concat \"^\" file \":\" start-line \":\" start-col\n+                      \": \" end-line \":\" end-col\n+                      \" \\\\(?:[Ee]rror\\\\|\\\\([Ww]arning\\\\)\\\\):\")))\n+      (cons re '(1 (2 . 4) (3 . 5) (6)))))\n+  \"Specifications for matching errors in rustc invocations.\n+See `compilation-error-regexp-alist for help on their format.\")\n+\n+(eval-after-load 'compile\n+  '(progn\n+     (add-to-list 'compilation-error-regexp-alist-alist\n+                  (cons 'rustc rustc-compilation-regexps))\n+     (add-to-list 'compilation-error-regexp-alist 'rustc)))\n+\n ;;; rust-mode.el ends here"}]}