{"sha": "f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzMmRjNzEzNTE3NWMxZThhOWVhODFkN2MxOGMyMWIyNzIyZjI4YzU=", "commit": {"author": {"name": "Jeremy A. Kolb", "email": "jkolb@ara.com", "date": "2018-11-29T20:30:49Z"}, "committer": {"name": "Jeremy A. Kolb", "email": "jkolb@ara.com", "date": "2018-11-29T20:30:49Z"}, "message": "Clippy lints", "tree": {"sha": "7f63a507106e33d4c4b1282e901fbcecc4c30143", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f63a507106e33d4c4b1282e901fbcecc4c30143"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "html_url": "https://github.com/rust-lang/rust/commit/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70a7cb34ec18d30a680a73727e1d87a0a786dc44", "url": "https://api.github.com/repos/rust-lang/rust/commits/70a7cb34ec18d30a680a73727e1d87a0a786dc44", "html_url": "https://github.com/rust-lang/rust/commit/70a7cb34ec18d30a680a73727e1d87a0a786dc44"}], "stats": {"total": 31, "additions": 14, "deletions": 17}, "files": [{"sha": "e1b27c808ec21166e16d7d1110403f1331082d1b", "filename": "crates/gen_lsp_server/src/msg.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fgen_lsp_server%2Fsrc%2Fmsg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fgen_lsp_server%2Fsrc%2Fmsg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fgen_lsp_server%2Fsrc%2Fmsg.rs?ref=f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "patch": "@@ -94,7 +94,7 @@ impl RawRequest {\n         R::Params: Serialize,\n     {\n         RawRequest {\n-            id: id,\n+            id,\n             method: R::METHOD.to_string(),\n             params: to_value(params).unwrap(),\n         }"}, {"sha": "28368787c2012f7b6a994d612ac8dc2434900470", "filename": "crates/ra_lsp_server/src/conv.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs?ref=f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "patch": "@@ -63,10 +63,7 @@ impl ConvWith for TextUnit {\n \n     fn conv_with(self, line_index: &LineIndex) -> Position {\n         let line_col = line_index.line_col(self);\n-        Position::new(\n-            u64::from(line_col.line),\n-            u64::from(u32::from(line_col.col_utf16)),\n-        )\n+        Position::new(u64::from(line_col.line), u64::from(line_col.col_utf16))\n     }\n }\n \n@@ -204,10 +201,8 @@ impl TryConvWith for SourceChange {\n                     .map(|it| it.edits.as_slice())\n                     .unwrap_or(&[]);\n                 let line_col = translate_offset_with_edit(&*line_index, pos.offset, edits);\n-                let position = Position::new(\n-                    u64::from(line_col.line),\n-                    u64::from(u32::from(line_col.col_utf16)),\n-                );\n+                let position =\n+                    Position::new(u64::from(line_col.line), u64::from(line_col.col_utf16));\n                 Some(TextDocumentPositionParams {\n                     text_document: TextDocumentIdentifier::new(pos.file_id.try_conv_with(world)?),\n                     position,"}, {"sha": "1734185209c24aa4b4076040856926747e2ed5f9", "filename": "crates/ra_lsp_server/src/main.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain.rs?ref=f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "patch": "@@ -2,7 +2,6 @@\n extern crate log;\n #[macro_use]\n extern crate failure;\n-#[macro_use]\n extern crate serde_derive;\n extern crate serde;\n extern crate flexi_logger;"}, {"sha": "6d5622b15602c370d60a5681bc06e278f8ac523b", "filename": "crates/ra_lsp_server/src/main_loop/handlers.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs?ref=f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "patch": "@@ -384,7 +384,7 @@ pub fn handle_completion(\n     let completion_triggered_after_single_colon = {\n         let mut res = false;\n         if let Some(ctx) = params.context {\n-            if ctx.trigger_character.unwrap_or(String::new()) == \":\" {\n+            if ctx.trigger_character.unwrap_or_default() == \":\" {\n                 let source_file = world.analysis().file_syntax(position.file_id);\n                 let syntax = source_file.syntax();\n                 let text = syntax.text();\n@@ -567,10 +567,13 @@ pub fn handle_rename(world: ServerWorld, params: RenameParams) -> Result<Option<\n     let mut changes = HashMap::new();\n     for r in refs {\n         if let Ok(loc) = to_location(r.0, r.1, &world, &line_index) {\n-            changes.entry(loc.uri).or_insert(Vec::new()).push(TextEdit {\n-                range: loc.range,\n-                new_text: params.new_name.clone(),\n-            });\n+            changes\n+                .entry(loc.uri)\n+                .or_insert_with(Vec::new)\n+                .push(TextEdit {\n+                    range: loc.range,\n+                    new_text: params.new_name.clone(),\n+                });\n         }\n     }\n "}, {"sha": "33babda4b4b3cf63591119d116d41b736b595cfd", "filename": "crates/ra_lsp_server/src/path_map.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f32dc7135175c1e8a9ea81d7c18c21b2722f28c5/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs?ref=f32dc7135175c1e8a9ea81d7c18c21b2722f28c5", "patch": "@@ -33,7 +33,7 @@ impl PathMap {\n         let file_id = self\n             .path2id\n             .get(path.as_path())\n-            .map(|&id| id)\n+            .cloned()\n             .unwrap_or_else(|| {\n                 inserted = true;\n                 let id = self.new_file_id();\n@@ -43,7 +43,7 @@ impl PathMap {\n         (inserted, file_id)\n     }\n     pub fn get_id(&self, path: &Path) -> Option<FileId> {\n-        self.path2id.get(path).map(|&id| id)\n+        self.path2id.get(path).cloned()\n     }\n     pub fn get_path(&self, file_id: FileId) -> &Path {\n         self.id2path.get(&file_id).unwrap().as_path()"}]}