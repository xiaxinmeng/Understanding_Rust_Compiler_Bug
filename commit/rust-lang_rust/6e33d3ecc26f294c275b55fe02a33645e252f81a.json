{"sha": "6e33d3ecc26f294c275b55fe02a33645e252f81a", "node_id": "C_kwDOAAsO6NoAKDZlMzNkM2VjYzI2ZjI5NGMyNzViNTVmZTAyYTMzNjQ1ZTI1MmY4MWE", "commit": {"author": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2021-12-12T21:54:09Z"}, "committer": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2021-12-12T22:48:11Z"}, "message": "Use modular arithmetic", "tree": {"sha": "865352f2b3a622f8d7fe4599cdac72e33b10a5ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/865352f2b3a622f8d7fe4599cdac72e33b10a5ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e33d3ecc26f294c275b55fe02a33645e252f81a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEg8FrwI85f934CWFa28VT5UDC9hkFAmG2fCsACgkQ28VT5UDC\n9hmUFQv/Y+NQCIPHbFoj1aVnO2r3fR53AJYlDcxr0VzojYmi5Cs9HgTczQyGtVSa\naKZrpnowfDTCj0hz6EmLxFSszYmdegm6tn1g4JARbyNw+dGl3I4pPA4TlGnj8Cew\nN9cwQ4RKd/cvH1u6Y5fLwyMKQ1xXVPy6PpY9YhA6ZBRdwWk/lAI9/6nKC50Q5zvr\nHvaIzrS5LL8QZwUFpl25ZAFCpPPcsS1l2wDQeJHbLLkIg8+vfKbzer91nhiIzQee\nfHcn43gLWTqxi5EYZ6JLnwSMxjkkiI5Bzgit9GaJ68quDPMFETJscdzzcW8f9IZK\n0iOwzYTR8nunxh8z8Gb3uymYGr3BZpe32xm67IxAuN0iD3Jo+pjdy6q+OiYixvZg\n9JcoBc3yHAFw6vgHZ7v8sYdSqZr4hWTwt1BIG1ieAUbrlev/6aVl5PM/iKo6Bq0g\nsi0w2nhTpAfQo4+lDwCKw9kT62IHQq46obFVp/J1JEuwylCC8kOsNhzh1EZ0ZavM\n4w9cWftW\n=oIte\n-----END PGP SIGNATURE-----", "payload": "tree 865352f2b3a622f8d7fe4599cdac72e33b10a5ab\nparent a5f5f6b6892ffe5364e25345c6f5a0113ae33a98\nauthor Jakub Ber\u00e1nek <berykubik@gmail.com> 1639346049 +0100\ncommitter Jakub Ber\u00e1nek <berykubik@gmail.com> 1639349291 +0100\n\nUse modular arithmetic\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e33d3ecc26f294c275b55fe02a33645e252f81a", "html_url": "https://github.com/rust-lang/rust/commit/6e33d3ecc26f294c275b55fe02a33645e252f81a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e33d3ecc26f294c275b55fe02a33645e252f81a/comments", "author": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5f5f6b6892ffe5364e25345c6f5a0113ae33a98", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5f5f6b6892ffe5364e25345c6f5a0113ae33a98", "html_url": "https://github.com/rust-lang/rust/commit/a5f5f6b6892ffe5364e25345c6f5a0113ae33a98"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "150c835c236fb479646e13958c0d1269c682b3e8", "filename": "compiler/rustc_data_structures/src/stable_hasher.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6e33d3ecc26f294c275b55fe02a33645e252f81a/compiler%2Frustc_data_structures%2Fsrc%2Fstable_hasher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e33d3ecc26f294c275b55fe02a33645e252f81a/compiler%2Frustc_data_structures%2Fsrc%2Fstable_hasher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fstable_hasher.rs?ref=6e33d3ecc26f294c275b55fe02a33645e252f81a", "patch": "@@ -503,7 +503,7 @@ impl_stable_hash_via_hash!(::std::path::PathBuf);\n \n impl<K, V, R, HCX> HashStable<HCX> for ::std::collections::HashMap<K, V, R>\n where\n-    K: ToStableHashKey<HCX> + Eq,\n+    K: HashStable<HCX> + ToStableHashKey<HCX> + Eq,\n     V: HashStable<HCX>,\n     R: BuildHasher,\n {\n@@ -555,7 +555,7 @@ pub fn hash_stable_hashmap<HCX, K, V, R, SK, F>(\n     map: &::std::collections::HashMap<K, V, R>,\n     to_stable_hash_key: F,\n ) where\n-    K: Eq,\n+    K: Eq + HashStable<HCX>,\n     V: HashStable<HCX>,\n     R: BuildHasher,\n     SK: HashStable<HCX> + Ord,\n@@ -570,7 +570,7 @@ pub fn hash_stable_hashmap<HCX, K, V, R, SK, F>(\n             value.hash_stable(hcx, &mut hasher);\n             hasher.finish::<u128>()\n         })\n-        .reduce(|accum, value| accum.wrapping_mul(value));\n+        .reduce(|accum, value| accum.wrapping_add(value));\n     map.len().hash_stable(hcx, hasher);\n     hash.hash_stable(hcx, hasher);\n }"}]}