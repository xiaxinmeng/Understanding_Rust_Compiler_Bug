{"sha": "a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3YTVhNWQ5YjAwZTZlY2MwZTUxOGIxZTgwNmMxZjNlMmQyMTY1MDI=", "commit": {"author": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2021-09-07T03:50:04Z"}, "committer": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2021-09-07T03:50:04Z"}, "message": "Add `TAU` to `approx_constant`", "tree": {"sha": "2096fa3abcf3530c9decc1323d66f369814b2296", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2096fa3abcf3530c9decc1323d66f369814b2296"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "html_url": "https://github.com/rust-lang/rust/commit/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/comments", "author": null, "committer": null, "parents": [{"sha": "7a0d7d8283e646b50eb6b74b8ec35bbca620c861", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a0d7d8283e646b50eb6b74b8ec35bbca620c861", "html_url": "https://github.com/rust-lang/rust/commit/7a0d7d8283e646b50eb6b74b8ec35bbca620c861"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "fb54ac1ec511981595402d73dfd3bba329b3e903", "filename": "clippy_lints/src/approx_const.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/clippy_lints%2Fsrc%2Fapprox_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/clippy_lints%2Fsrc%2Fapprox_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fapprox_const.rs?ref=a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "patch": "@@ -39,7 +39,7 @@ declare_clippy_lint! {\n }\n \n // Tuples are of the form (constant, name, min_digits, msrv)\n-const KNOWN_CONSTS: [(f64, &str, usize, Option<RustcVersion>); 18] = [\n+const KNOWN_CONSTS: [(f64, &str, usize, Option<RustcVersion>); 19] = [\n     (f64::E, \"E\", 4, None),\n     (f64::FRAC_1_PI, \"FRAC_1_PI\", 4, None),\n     (f64::FRAC_1_SQRT_2, \"FRAC_1_SQRT_2\", 5, None),\n@@ -58,6 +58,7 @@ const KNOWN_CONSTS: [(f64, &str, usize, Option<RustcVersion>); 18] = [\n     (f64::LOG10_E, \"LOG10_E\", 5, None),\n     (f64::PI, \"PI\", 3, None),\n     (f64::SQRT_2, \"SQRT_2\", 5, None),\n+    (f64::TAU, \"TAU\", 3, Some(msrvs::TAU)),\n ];\n \n pub struct ApproxConstant {"}, {"sha": "fa57dfbb57edccdc4d384af5ac4a0e226ab9ea2f", "filename": "clippy_utils/src/msrvs.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/clippy_utils%2Fsrc%2Fmsrvs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/clippy_utils%2Fsrc%2Fmsrvs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fmsrvs.rs?ref=a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "patch": "@@ -15,6 +15,7 @@ msrv_aliases! {\n     1,53,0 { OR_PATTERNS }\n     1,52,0 { STR_SPLIT_ONCE }\n     1,50,0 { BOOL_THEN }\n+    1,47,0 { TAU }\n     1,46,0 { CONST_IF_MATCH }\n     1,45,0 { STR_STRIP_PREFIX }\n     1,43,0 { LOG2_10, LOG10_2 }"}, {"sha": "2ae4d613507edce8b3c5c3145b6354c85fe64ba6", "filename": "tests/ui/approx_const.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/tests%2Fui%2Fapprox_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/tests%2Fui%2Fapprox_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fapprox_const.rs?ref=a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "patch": "@@ -57,4 +57,8 @@ fn main() {\n \n     let my_sq2 = 1.4142;\n     let no_sq2 = 1.414;\n+\n+    let my_tau = 6.2832;\n+    let almost_tau = 6.28;\n+    let no_tau = 6.3;\n }"}, {"sha": "4da1b8215ae0440bb6c90794c8c095364f66f130", "filename": "tests/ui/approx_const.stderr", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/tests%2Fui%2Fapprox_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502/tests%2Fui%2Fapprox_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fapprox_const.stderr?ref=a7a5a5d9b00e6ecc0e518b1e806c1f3e2d216502", "patch": "@@ -167,5 +167,21 @@ LL |     let my_sq2 = 1.4142;\n    |\n    = help: consider using the constant directly\n \n-error: aborting due to 21 previous errors\n+error: approximate value of `f{32, 64}::consts::TAU` found\n+  --> $DIR/approx_const.rs:61:18\n+   |\n+LL |     let my_tau = 6.2832;\n+   |                  ^^^^^^\n+   |\n+   = help: consider using the constant directly\n+\n+error: approximate value of `f{32, 64}::consts::TAU` found\n+  --> $DIR/approx_const.rs:62:22\n+   |\n+LL |     let almost_tau = 6.28;\n+   |                      ^^^^\n+   |\n+   = help: consider using the constant directly\n+\n+error: aborting due to 23 previous errors\n "}]}