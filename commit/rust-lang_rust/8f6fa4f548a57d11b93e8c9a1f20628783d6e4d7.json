{"sha": "8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "node_id": "C_kwDOAAsO6NoAKDhmNmZhNGY1NDhhNTdkMTFiOTNlOGM5YTFmMjA2Mjg3ODNkNmU0ZDc", "commit": {"author": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-11-16T18:52:38Z"}, "committer": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-11-16T18:52:38Z"}, "message": "Add a regression test for #87573", "tree": {"sha": "1c42299526c0c03f8340a7e304793ed425f42c5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c42299526c0c03f8340a7e304793ed425f42c5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEx6scKn6IIf/+FpBu2rpbBylhwYoFAmGT/fYACgkQ2rpbBylh\nwYqeNg/+NbPZlCUPWn34RSdGLxuHcCNTZhrCKjkZirFkseIfmKgI/MrtEX7j4ax/\nyVeHVfEpl3mQhisSC6SIwYtKy6R6vjtnHVosR2gDwqnf+6vt8zR8t8anJiMxowqd\nyzW0XOPC5RynQRkpc04siIHYa9ATBHKCnCbZ0gb6FTRUvEKa30H2YfzzJ/0Xyg9G\nvMFpbAgqgrelrsApkmUiYyaQIVMvqT+uSey1+IGzEzgfAgaiiRSzMp/A5V9oMess\nB1BEP3tusGLpYgcVsVKH5iPUo69Z0X/+wrbeVhVb/AQ+P/EQrS22zK0vO6RYenUw\nhBNHgjsi0zEJ49ZtpcGWwBnb6M5MWIs9hx+KISGoHeQyxe6yNa3HgG1VRgCcDC62\nFOhUE4I1u6kSunXmwmj+Z3amvztI0YbxzJ/21k/wpzc73GDk5J6E/bz3jgo/am8M\n85UhMzM22fIQMfNG1nhpz0n/JmutnIfn53TPxhatpU4qn/NzydLkN62vK7XjKNLA\npYgUrbwckNOAjpDeDFwcLCOt9HzZl++fWFXksn7b+neG/hyED14+HbKi+FLUwIxE\nkJvlo3nAllAO0+vitTouJAQioINbR5clw5HjSrLmXxTm7xI387g3woLcygUaGZfh\nzMhejWQYpqj/Rv77pRUjdXvlYme7BSI47zWUc5EALIewvfnerlA=\n=nAX3\n-----END PGP SIGNATURE-----", "payload": "tree 1c42299526c0c03f8340a7e304793ed425f42c5c\nparent d914f17ca71a33a89b2dc3436fca51b1a091559e\nauthor Yuki Okushi <yuki.okushi@huawei.com> 1637088758 +0900\ncommitter Yuki Okushi <yuki.okushi@huawei.com> 1637088758 +0900\n\nAdd a regression test for #87573\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "html_url": "https://github.com/rust-lang/rust/commit/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d914f17ca71a33a89b2dc3436fca51b1a091559e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d914f17ca71a33a89b2dc3436fca51b1a091559e", "html_url": "https://github.com/rust-lang/rust/commit/d914f17ca71a33a89b2dc3436fca51b1a091559e"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "aeb0c245a72ecee184bd1d34fb2ea5d0aca90290", "filename": "src/test/ui/lang-items/issue-87573.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.rs?ref=8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "patch": "@@ -0,0 +1,28 @@\n+// Regression test for #87573, ensures that duplicate lang items or invalid generics\n+// for lang items doesn't cause ICE.\n+\n+#![feature(no_core, lang_items)]\n+#![no_core]\n+#![crate_type = \"lib\"]\n+\n+pub static STATIC_BOOL: bool = true;\n+\n+#[lang = \"sized\"]\n+trait Sized {}\n+\n+#[lang = \"copy\"]\n+trait Copy {}\n+\n+#[lang = \"sync\"]\n+trait Sync {}\n+impl Sync for bool {}\n+\n+#[lang = \"drop_in_place\"]\n+//~^ ERROR: `drop_in_place` language item must be applied to a function with at least 1 generic argument\n+fn drop_fn() {\n+    while false {}\n+}\n+\n+#[lang = \"start\"]\n+//~^ ERROR: `start` language item must be applied to a function with 1 generic argument\n+fn start(){}"}, {"sha": "25560cfa0e6c72ce04c833b41bb50508a71a6068", "filename": "src/test/ui/lang-items/issue-87573.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flang-items%2Fissue-87573.stderr?ref=8f6fa4f548a57d11b93e8c9a1f20628783d6e4d7", "patch": "@@ -0,0 +1,21 @@\n+error[E0718]: `drop_in_place` language item must be applied to a function with at least 1 generic argument\n+  --> $DIR/issue-87573.rs:20:1\n+   |\n+LL | #[lang = \"drop_in_place\"]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL | fn drop_fn() {\n+   |           - this function has 0 generic arguments\n+\n+error[E0718]: `start` language item must be applied to a function with 1 generic argument\n+  --> $DIR/issue-87573.rs:26:1\n+   |\n+LL | #[lang = \"start\"]\n+   | ^^^^^^^^^^^^^^^^^\n+LL |\n+LL | fn start(){}\n+   |         - this function has 0 generic arguments\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0718`."}]}