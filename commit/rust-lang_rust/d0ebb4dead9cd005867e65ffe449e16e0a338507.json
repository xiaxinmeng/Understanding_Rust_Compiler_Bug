{"sha": "d0ebb4dead9cd005867e65ffe449e16e0a338507", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwZWJiNGRlYWQ5Y2QwMDU4NjdlNjVmZmU0NDllMTZlMGEzMzg1MDc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-12-03T10:33:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-12-03T10:33:15Z"}, "message": "Auto merge of #46433 - GuillaumeGomez:dedup-items, r=QuietMisdreavus\n\nFix deduplication of items\n\nFixes #45968.\n\nr? @QuietMisdreavus", "tree": {"sha": "8670882d5a5c9168d915a2eb2f25dbdf695319ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8670882d5a5c9168d915a2eb2f25dbdf695319ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0ebb4dead9cd005867e65ffe449e16e0a338507", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0ebb4dead9cd005867e65ffe449e16e0a338507", "html_url": "https://github.com/rust-lang/rust/commit/d0ebb4dead9cd005867e65ffe449e16e0a338507", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0ebb4dead9cd005867e65ffe449e16e0a338507/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0bae745cd84879bf97cf81d9eca28fbfa2360722", "url": "https://api.github.com/repos/rust-lang/rust/commits/0bae745cd84879bf97cf81d9eca28fbfa2360722", "html_url": "https://github.com/rust-lang/rust/commit/0bae745cd84879bf97cf81d9eca28fbfa2360722"}, {"sha": "30734c4e6887f7167c01e2fef33d96f82d25b1b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/30734c4e6887f7167c01e2fef33d96f82d25b1b9", "html_url": "https://github.com/rust-lang/rust/commit/30734c4e6887f7167c01e2fef33d96f82d25b1b9"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "cea510de692743565b6a83f6f3f336bf97ec3dff", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d0ebb4dead9cd005867e65ffe449e16e0a338507/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/d0ebb4dead9cd005867e65ffe449e16e0a338507/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=d0ebb4dead9cd005867e65ffe449e16e0a338507", "patch": "@@ -720,6 +720,13 @@\n                 return false;\n             }\n \n+            function generateId(ty) {\n+                if (ty.parent && ty.parent.name) {\n+                    return itemTypes[ty.ty] + ty.path + ty.parent.name + ty.name;\n+                }\n+                return itemTypes[ty.ty] + ty.path + ty.name;\n+            }\n+\n             // quoted values mean literal search\n             var nSearchWords = searchWords.length;\n             if ((val.charAt(0) === \"\\\"\" || val.charAt(0) === \"'\") &&\n@@ -730,7 +737,7 @@\n                     var in_args = findArg(searchIndex[i], val, true);\n                     var returned = checkReturned(searchIndex[i], val, true);\n                     var ty = searchIndex[i];\n-                    var fullId = itemTypes[ty.ty] + ty.path + ty.name;\n+                    var fullId = generateId(ty);\n \n                     if (searchWords[i] === val.name) {\n                         // filter type: ... queries\n@@ -786,7 +793,7 @@\n                     if (!type) {\n                         continue;\n                     }\n-                    var fullId = itemTypes[ty.ty] + ty.path + ty.name;\n+                    var fullId = generateId(ty);\n \n                     // allow searching for void (no output) functions as well\n                     var typeOutput = type.output ? type.output.name : \"\";\n@@ -872,7 +879,7 @@\n                     var index = -1;\n                     // we want lev results to go lower than others\n                     var lev = MAX_LEV_DISTANCE + 1;\n-                    var fullId = itemTypes[ty.ty] + ty.path + ty.name;\n+                    var fullId = generateId(ty);\n \n                     if (searchWords[j].indexOf(split[i]) > -1 ||\n                         searchWords[j].indexOf(val) > -1 ||"}]}