{"sha": "41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxYjM5ZmNlOThmYzE0MWZlZjA2N2NjMjJjMWU5ZTlkYzdiODhiMjk=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-09-04T02:10:12Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-09-05T16:35:18Z"}, "message": "Remove rustc_diagnostic_macros feature", "tree": {"sha": "e965146778fe3bdecd030ab157e266b9f3b38554", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e965146778fe3bdecd030ab157e266b9f3b38554"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "html_url": "https://github.com/rust-lang/rust/commit/41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4de4f303e5cee3e40b8e91a381517a457af7b4cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/4de4f303e5cee3e40b8e91a381517a457af7b4cc", "html_url": "https://github.com/rust-lang/rust/commit/4de4f303e5cee3e40b8e91a381517a457af7b4cc"}], "stats": {"total": 82, "additions": 7, "deletions": 75}, "files": [{"sha": "d25b954bbe306b68de7faf1586b9ffa4ff8b0c4c", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -45,7 +45,6 @@\n #![feature(non_exhaustive)]\n #![feature(optin_builtin_traits)]\n #![feature(range_is_empty)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(slice_patterns)]\n #![feature(specialization)]\n #![feature(unboxed_closures)]"}, {"sha": "9f2c303145dc8e28eba27d63b60ad603d2fc6cf1", "filename": "src/librustc_codegen_llvm/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -14,7 +14,6 @@\n #![feature(in_band_lifetimes)]\n #![feature(libc)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(optin_builtin_traits)]\n #![feature(concat_idents)]\n #![feature(link_args)]"}, {"sha": "90bf964ceaa1302e3494894f0cf3373227fd033d", "filename": "src/librustc_codegen_ssa/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_ssa%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_ssa%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -4,7 +4,6 @@\n #![feature(box_syntax)]\n #![feature(core_intrinsics)]\n #![feature(libc)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(stmt_expr_attributes)]\n #![feature(try_blocks)]\n #![feature(in_band_lifetimes)]"}, {"sha": "1201446afb53128dddbd1b0a52134801ae72d6ff", "filename": "src/librustc_codegen_utils/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_utils%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_codegen_utils%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_utils%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -10,7 +10,6 @@\n #![feature(core_intrinsics)]\n #![feature(never_type)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(in_band_lifetimes)]\n \n #![recursion_limit=\"256\"]"}, {"sha": "a912ea3c358215cae6f9f49788b6bf535579a71b", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -9,7 +9,6 @@\n #![feature(box_syntax)]\n #![cfg_attr(unix, feature(libc))]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(set_stdio)]\n #![feature(no_debug)]\n #![feature(integer_atomics)]"}, {"sha": "af769a537a675089b2041420d644b489f85669b1", "filename": "src/librustc_interface/passes.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_interface%2Fpasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_interface%2Fpasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fpasses.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -291,10 +291,6 @@ pub fn register_plugins<'a>(\n     let mut registry = Registry::new(sess, krate.span);\n \n     time(sess, \"plugin registration\", || {\n-        if sess.features_untracked().rustc_diagnostic_macros {\n-            // FIXME: remove feature gate\n-        }\n-\n         for registrar in registrars {\n             registry.args_hidden = Some(registrar.args);\n             (registrar.fun)(&mut registry);"}, {"sha": "4ee6551f787818c3dba16abe60de8f368b3b9dbe", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -15,7 +15,6 @@\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "e6104e629e9fbfefbec87db6c2dc3a602e2137e9", "filename": "src/librustc_metadata/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_metadata%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_metadata%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -8,7 +8,6 @@\n #![feature(nll)]\n #![feature(proc_macro_internals)]\n #![feature(proc_macro_quote)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(rustc_private)]\n #![feature(slice_patterns)]\n #![feature(specialization)]"}, {"sha": "f27db351b74dbbf124eba38a733e2ec85f00e9b8", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -14,7 +14,6 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![feature(const_fn)]\n #![feature(decl_macro)]\n #![feature(exhaustive_patterns)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(never_type)]\n #![feature(specialization)]\n #![feature(try_trait)]"}, {"sha": "cf2da4ffa2af08989dced816605512e411a951f6", "filename": "src/librustc_passes/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_passes%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_passes%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -9,7 +9,6 @@\n #![feature(in_band_lifetimes)]\n #![feature(nll)]\n #![feature(bind_by_move_pattern_guards)]\n-#![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "4e1a47c503e59fd3675e8f576714dbbf74b8a3e2", "filename": "src/librustc_plugin/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_plugin%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_plugin%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -54,7 +54,6 @@\n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n \n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "1e61f78c357dfa5d3260c4c5cbf7f31cb750608c", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -2,7 +2,6 @@\n \n #![feature(in_band_lifetimes)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "7e93e126013762016c7f0a6ba0b8dd06607569ef", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -13,7 +13,6 @@\n #![feature(label_break_value)]\n #![feature(mem_take)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n \n #![recursion_limit=\"256\"]\n "}, {"sha": "959483e4439ff1a68f36a640f4f7889e6302e139", "filename": "src/librustc_typeck/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_typeck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibrustc_typeck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -65,7 +65,6 @@ This API is completely unstable and subject to change.\n #![feature(exhaustive_patterns)]\n #![feature(in_band_lifetimes)]\n #![feature(nll)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(slice_patterns)]\n #![feature(never_type)]\n #![feature(inner_deref)]"}, {"sha": "86979bdb1fb52777965d42c8a694186d88b12417", "filename": "src/libsyntax/feature_gate/active.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax%2Ffeature_gate%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax%2Ffeature_gate%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate%2Factive.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -120,12 +120,6 @@ declare_features! (\n     /// macros disappear).\n     (active, allow_internal_unsafe, \"1.0.0\", None, None),\n \n-    /// Allows using the macros:\n-    /// + `__diagnostic_used`\n-    /// + `__register_diagnostic`\n-    /// +`__build_diagnostic_array`\n-    (active, rustc_diagnostic_macros, \"1.0.0\", None, None),\n-\n     /// Allows using `#[rustc_const_unstable(feature = \"foo\", ..)]` which\n     /// lets a function to be `const` when opted into with `#![feature(foo)]`.\n     (active, rustc_const_unstable, \"1.0.0\", None, None),"}, {"sha": "49efbce482fa36e29850d035b32d19fea0f6aef8", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -18,7 +18,6 @@\n #![feature(proc_macro_diagnostic)]\n #![feature(proc_macro_internals)]\n #![feature(proc_macro_span)]\n-#![feature(rustc_diagnostic_macros)]\n #![feature(try_trait)]\n #![feature(unicode_internals)]\n "}, {"sha": "5bc6345d8118ee20a5d9c27dc429d393d19e2fd8", "filename": "src/libsyntax_ext/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax_ext%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Flibsyntax_ext%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Flib.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -9,7 +9,6 @@\n #![feature(nll)]\n #![feature(proc_macro_internals)]\n #![feature(proc_macro_quote)]\n-#![feature(rustc_diagnostic_macros)]\n \n extern crate proc_macro;\n "}, {"sha": "641e4b852e79f8441372d920b5c67088e325474a", "filename": "src/test/ui/feature-gate/allow-features-empty.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -1,8 +1,6 @@\n // compile-flags: -Z allow_features=\n // Note: This test uses rustc internal flags because they will never stabilize.\n \n-#![feature(rustc_diagnostic_macros)] //~ ERROR\n-\n #![feature(rustc_const_unstable)] //~ ERROR\n \n #![feature(lang_items)] //~ ERROR"}, {"sha": "a87d105850327c911357c074af0e8b78fe908bbb", "filename": "src/test/ui/feature-gate/allow-features-empty.stderr", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features-empty.stderr?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -1,27 +1,21 @@\n-error[E0725]: the feature `rustc_diagnostic_macros` is not in the list of allowed features\n-  --> $DIR/allow-features-empty.rs:4:12\n-   |\n-LL | #![feature(rustc_diagnostic_macros)]\n-   |            ^^^^^^^^^^^^^^^^^^^^^^^\n-\n error[E0725]: the feature `rustc_const_unstable` is not in the list of allowed features\n-  --> $DIR/allow-features-empty.rs:6:12\n+  --> $DIR/allow-features-empty.rs:4:12\n    |\n LL | #![feature(rustc_const_unstable)]\n    |            ^^^^^^^^^^^^^^^^^^^^\n \n error[E0725]: the feature `lang_items` is not in the list of allowed features\n-  --> $DIR/allow-features-empty.rs:8:12\n+  --> $DIR/allow-features-empty.rs:6:12\n    |\n LL | #![feature(lang_items)]\n    |            ^^^^^^^^^^\n \n error[E0725]: the feature `unknown_stdlib_feature` is not in the list of allowed features\n-  --> $DIR/allow-features-empty.rs:10:12\n+  --> $DIR/allow-features-empty.rs:8:12\n    |\n LL | #![feature(unknown_stdlib_feature)]\n    |            ^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 4 previous errors\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0725`."}, {"sha": "de69e48a65fdfab5a04259db7d97f1de194c5ed1", "filename": "src/test/ui/feature-gate/allow-features.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.rs?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -1,8 +1,6 @@\n-// compile-flags: -Z allow_features=rustc_diagnostic_macros,lang_items\n+// compile-flags: -Z allow_features=lang_items\n // Note: This test uses rustc internal flags because they will never stabilize.\n \n-#![feature(rustc_diagnostic_macros)]\n-\n #![feature(rustc_const_unstable)] //~ ERROR\n \n #![feature(lang_items)]"}, {"sha": "157dddf06ad1d6dbf28ebc214b1b16c0f4cbd9ee", "filename": "src/test/ui/feature-gate/allow-features.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/41b39fce98fc141fef067cc22c1e9e9dc7b88b29/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fallow-features.stderr?ref=41b39fce98fc141fef067cc22c1e9e9dc7b88b29", "patch": "@@ -1,11 +1,11 @@\n error[E0725]: the feature `rustc_const_unstable` is not in the list of allowed features\n-  --> $DIR/allow-features.rs:6:12\n+  --> $DIR/allow-features.rs:4:12\n    |\n LL | #![feature(rustc_const_unstable)]\n    |            ^^^^^^^^^^^^^^^^^^^^\n \n error[E0725]: the feature `unknown_stdlib_feature` is not in the list of allowed features\n-  --> $DIR/allow-features.rs:10:12\n+  --> $DIR/allow-features.rs:8:12\n    |\n LL | #![feature(unknown_stdlib_feature)]\n    |            ^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "63c2c31fd30e625cc2368cc9074a2995cc4aeafb", "filename": "src/test/ui/feature-gates/feature-gate-rustc-diagnostic-macros.rs", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4de4f303e5cee3e40b8e91a381517a457af7b4cc/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4de4f303e5cee3e40b8e91a381517a457af7b4cc/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.rs?ref=4de4f303e5cee3e40b8e91a381517a457af7b4cc", "patch": "@@ -1,13 +0,0 @@\n-// Test that diagnostic macros are gated by `rustc_diagnostic_macros` feature\n-// gate\n-\n-__register_diagnostic!(E0001);\n-//~^ ERROR cannot find macro `__register_diagnostic!` in this scope\n-\n-fn main() {\n-    __diagnostic_used!(E0001);\n-    //~^ ERROR cannot find macro `__diagnostic_used!` in this scope\n-}\n-\n-__build_diagnostic_array!(DIAGNOSTICS);\n-//~^ ERROR cannot find macro `__build_diagnostic_array!` in this scope"}, {"sha": "676b8b9f056c1288c79909c5340a26eedffa3711", "filename": "src/test/ui/feature-gates/feature-gate-rustc-diagnostic-macros.stderr", "status": "removed", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4de4f303e5cee3e40b8e91a381517a457af7b4cc/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4de4f303e5cee3e40b8e91a381517a457af7b4cc/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-rustc-diagnostic-macros.stderr?ref=4de4f303e5cee3e40b8e91a381517a457af7b4cc", "patch": "@@ -1,20 +0,0 @@\n-error: cannot find macro `__build_diagnostic_array!` in this scope\n-  --> $DIR/feature-gate-rustc-diagnostic-macros.rs:12:1\n-   |\n-LL | __build_diagnostic_array!(DIAGNOSTICS);\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-error: cannot find macro `__diagnostic_used!` in this scope\n-  --> $DIR/feature-gate-rustc-diagnostic-macros.rs:8:5\n-   |\n-LL |     __diagnostic_used!(E0001);\n-   |     ^^^^^^^^^^^^^^^^^\n-\n-error: cannot find macro `__register_diagnostic!` in this scope\n-  --> $DIR/feature-gate-rustc-diagnostic-macros.rs:4:1\n-   |\n-LL | __register_diagnostic!(E0001);\n-   | ^^^^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 3 previous errors\n-"}]}