{"sha": "6b4e7dd547b556400863501603bad8373f4ad761", "node_id": "C_kwDOAAsO6NoAKDZiNGU3ZGQ1NDdiNTU2NDAwODYzNTAxNjAzYmFkODM3M2Y0YWQ3NjE", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-03T14:49:43Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-03T14:49:43Z"}, "message": "Auto merge of #9761 - xFrednet:changelog-1-65, r=giraffate,xFrednet\n\nChangelog for Rust 1.65\n\nRoses are red,\nviolets are blue,\nanother 6 weeks,\nanother changelog, yahoo!\n\nThis did not rhyme,\nluckily, not a crime.\nI want to say something smart,\nbut I am out of time.\n\n---\n\nNote for the reviewer. This PR is written, as if Rust was already released on 2022-11-03. Please review the changes and approve if you agree, but only merge it after the release. :)\n\n---\n\nchangelog: none", "tree": {"sha": "27820fafde02bbad52cf977f29fc5b5dd97d9c31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27820fafde02bbad52cf977f29fc5b5dd97d9c31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b4e7dd547b556400863501603bad8373f4ad761", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b4e7dd547b556400863501603bad8373f4ad761", "html_url": "https://github.com/rust-lang/rust/commit/6b4e7dd547b556400863501603bad8373f4ad761", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b4e7dd547b556400863501603bad8373f4ad761/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d7f63881672d2ae787592eb1c11fe3b303cb0d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d7f63881672d2ae787592eb1c11fe3b303cb0d8", "html_url": "https://github.com/rust-lang/rust/commit/8d7f63881672d2ae787592eb1c11fe3b303cb0d8"}, {"sha": "30e662d686057da69d7083de85dcc14b66ba726c", "url": "https://api.github.com/repos/rust-lang/rust/commits/30e662d686057da69d7083de85dcc14b66ba726c", "html_url": "https://github.com/rust-lang/rust/commit/30e662d686057da69d7083de85dcc14b66ba726c"}], "stats": {"total": 166, "additions": 155, "deletions": 11}, "files": [{"sha": "adde7af917160f2c159591ad8af4b68d51d32ef3", "filename": "CHANGELOG.md", "status": "modified", "additions": 147, "deletions": 3, "changes": 150, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -4,13 +4,157 @@ All notable changes to this project will be documented in this file.\n See [Changelog Update](book/src/development/infrastructure/changelog_update.md) if you want to update this\n document.\n \n-## Unreleased / In Rust Nightly\n+## Unreleased / Beta / In Rust Nightly\n \n-[3c7e7dbc...master](https://github.com/rust-lang/rust-clippy/compare/3c7e7dbc...master)\n+[b52fb523...master](https://github.com/rust-lang/rust-clippy/compare/b52fb523...master)\n+\n+## Rust 1.65\n+\n+Current stable, released 2022-11-03\n+\n+[3c7e7dbc...b52fb523](https://github.com/rust-lang/rust-clippy/compare/3c7e7dbc...b52fb523)\n+\n+### Important Changes\n+\n+* Clippy now has an `--explain <LINT>` command to show the lint description in the console\n+  [#8952](https://github.com/rust-lang/rust-clippy/pull/8952)\n+\n+### New Lints\n+\n+* [`unused_peekable`]\n+  [#9258](https://github.com/rust-lang/rust-clippy/pull/9258)\n+* [`collapsible_str_replace`]\n+  [#9269](https://github.com/rust-lang/rust-clippy/pull/9269)\n+* [`manual_string_new`]\n+  [#9295](https://github.com/rust-lang/rust-clippy/pull/9295)\n+* [`iter_on_empty_collections`]\n+  [#9187](https://github.com/rust-lang/rust-clippy/pull/9187)\n+* [`iter_on_single_items`]\n+  [#9187](https://github.com/rust-lang/rust-clippy/pull/9187)\n+* [`bool_to_int_with_if`]\n+  [#9412](https://github.com/rust-lang/rust-clippy/pull/9412)\n+* [`multi_assignments`]\n+  [#9379](https://github.com/rust-lang/rust-clippy/pull/9379)\n+* [`result_large_err`]\n+  [#9373](https://github.com/rust-lang/rust-clippy/pull/9373)\n+* [`partialeq_to_none`]\n+  [#9288](https://github.com/rust-lang/rust-clippy/pull/9288)\n+* [`suspicious_to_owned`]\n+  [#8984](https://github.com/rust-lang/rust-clippy/pull/8984)\n+* [`cast_slice_from_raw_parts`]\n+  [#9247](https://github.com/rust-lang/rust-clippy/pull/9247)\n+* [`manual_instant_elapsed`]\n+  [#9264](https://github.com/rust-lang/rust-clippy/pull/9264)\n+\n+### Moves and Deprecations\n+\n+* Moved [`significant_drop_in_scrutinee`] to `nursery` (now allow-by-default)\n+  [#9302](https://github.com/rust-lang/rust-clippy/pull/9302)\n+* Rename `logic_bug` to [`overly_complex_bool_expr`]\n+  [#9306](https://github.com/rust-lang/rust-clippy/pull/9306)\n+* Rename `arithmetic` to [`arithmetic_side_effects`]\n+  [#9443](https://github.com/rust-lang/rust-clippy/pull/9443)\n+* Moved [`only_used_in_recursion`] to complexity (now warn-by-default)\n+  [#8804](https://github.com/rust-lang/rust-clippy/pull/8804)\n+* Moved [`assertions_on_result_states`] to restriction (now allow-by-default)\n+  [#9273](https://github.com/rust-lang/rust-clippy/pull/9273)\n+* Renamed `blacklisted_name` to [`disallowed_names`]\n+  [#8974](https://github.com/rust-lang/rust-clippy/pull/8974)\n+\n+### Enhancements\n+\n+* [`option_if_let_else`]: Now also checks for match expressions\n+  [#8696](https://github.com/rust-lang/rust-clippy/pull/8696)\n+* [`explicit_auto_deref`]: Now lints on implicit returns in closures\n+  [#9126](https://github.com/rust-lang/rust-clippy/pull/9126)\n+* [`needless_borrow`]: Now considers trait implementations\n+  [#9136](https://github.com/rust-lang/rust-clippy/pull/9136)\n+* [`suboptimal_flops`], [`imprecise_flops`]: Now lint on constant expressions\n+  [#9404](https://github.com/rust-lang/rust-clippy/pull/9404)\n+* [`if_let_mutex`]: Now detects mutex behind references and warns about deadlocks\n+  [#9318](https://github.com/rust-lang/rust-clippy/pull/9318)\n+\n+### False Positive Fixes\n+\n+* [`unit_arg`] [`default_trait_access`] [`missing_docs_in_private_items`]: No longer\n+  trigger in code generated from proc-macros\n+  [#8694](https://github.com/rust-lang/rust-clippy/pull/8694)\n+* [`unwrap_used`]: Now lints uses of `unwrap_err`\n+  [#9338](https://github.com/rust-lang/rust-clippy/pull/9338)\n+* [`expect_used`]: Now lints uses of `expect_err`\n+  [#9338](https://github.com/rust-lang/rust-clippy/pull/9338)\n+* [`transmute_undefined_repr`]: Now longer lints if the first field is compatible\n+  with the other type\n+  [#9287](https://github.com/rust-lang/rust-clippy/pull/9287)\n+* [`unnecessary_to_owned`]: No longer lints, if type change cased errors in\n+  the caller function\n+  [#9424](https://github.com/rust-lang/rust-clippy/pull/9424)\n+* [`match_like_matches_macro`]: No longer lints, if there are comments inside the\n+  match expression\n+  [#9276](https://github.com/rust-lang/rust-clippy/pull/9276)\n+* [`partialeq_to_none`]: No longer trigger in code generated from macros\n+  [#9389](https://github.com/rust-lang/rust-clippy/pull/9389)\n+* [`arithmetic_side_effects`]: No longer lints expressions that only use literals\n+  [#9365](https://github.com/rust-lang/rust-clippy/pull/9365)\n+* [`explicit_auto_deref`]: Now ignores references on block expressions when the type\n+  is `Sized`, on `dyn Trait` returns and when the suggestion is non-trivial\n+  [#9126](https://github.com/rust-lang/rust-clippy/pull/9126)\n+* [`trait_duplication_in_bounds`]: Now better tracks bounds to avoid false positives\n+  [#9167](https://github.com/rust-lang/rust-clippy/pull/9167)\n+* [`format_in_format_args`]: Now suggests cases where the result is formatted again\n+  [#9349](https://github.com/rust-lang/rust-clippy/pull/9349)\n+* [`only_used_in_recursion`]: No longer lints on function without recursions and\n+  takes external functions into account\n+  [#8804](https://github.com/rust-lang/rust-clippy/pull/8804)\n+* [`missing_const_for_fn`]: No longer lints in proc-macros\n+  [#9308](https://github.com/rust-lang/rust-clippy/pull/9308)\n+* [`non_ascii_literal`]: Allow non-ascii comments in tests and make sure `#[allow]`\n+  attributes work in tests\n+  [#9327](https://github.com/rust-lang/rust-clippy/pull/9327)\n+* [`question_mark`]: No longer lint `if let`s with subpatterns\n+  [#9348](https://github.com/rust-lang/rust-clippy/pull/9348)\n+* [`needless_collect`]: No longer lints in loops\n+  [#8992](https://github.com/rust-lang/rust-clippy/pull/8992)\n+* [`mut_mutex_lock`]: No longer lints if the mutex is behind an immutable reference\n+  [#9418](https://github.com/rust-lang/rust-clippy/pull/9418)\n+* [`needless_return`]: Now ignores returns with arguments\n+  [#9381](https://github.com/rust-lang/rust-clippy/pull/9381)\n+* [`range_plus_one`], [`range_minus_one`]: Now ignores code with macros\n+  [#9446](https://github.com/rust-lang/rust-clippy/pull/9446)\n+* [`assertions_on_result_states`]: No longer lints on the unit type\n+  [#9273](https://github.com/rust-lang/rust-clippy/pull/9273)\n+\n+### Suggestion Fixes/Improvements\n+\n+* [`unwrap_or_else_default`]: Now suggests `unwrap_or_default()` for empty strings\n+  [#9421](https://github.com/rust-lang/rust-clippy/pull/9421)\n+* [`if_then_some_else_none`]: Now also suggests `bool::then_some`\n+  [#9289](https://github.com/rust-lang/rust-clippy/pull/9289)\n+* [`redundant_closure_call`]: The suggestion now works for async closures\n+  [#9053](https://github.com/rust-lang/rust-clippy/pull/9053)\n+* [`suboptimal_flops`]: Now suggests parenthesis when they are required\n+  [#9394](https://github.com/rust-lang/rust-clippy/pull/9394)\n+* [`case_sensitive_file_extension_comparisons`]: Now suggests `map_or(..)` instead of `map(..).unwrap_or`\n+  [#9341](https://github.com/rust-lang/rust-clippy/pull/9341)\n+* Deprecated configuration values can now be updated automatically\n+  [#9252](https://github.com/rust-lang/rust-clippy/pull/9252)\n+* [`or_fun_call`]: Now suggest `Entry::or_default` for `Entry::or_insert(Default::default())`\n+  [#9342](https://github.com/rust-lang/rust-clippy/pull/9342)\n+* [`unwrap_used`]: Only suggests `expect` if [`expect_used`] is allowed\n+  [#9223](https://github.com/rust-lang/rust-clippy/pull/9223)\n+\n+### ICE Fixes\n+\n+* Fix ICE in [`useless_format`] for literals\n+  [#9406](https://github.com/rust-lang/rust-clippy/pull/9406)\n+* Fix infinite loop in [`vec_init_then_push`]\n+  [#9441](https://github.com/rust-lang/rust-clippy/pull/9441)\n+* Fix ICE when reading literals with weird proc-macro spans\n+  [#9303](https://github.com/rust-lang/rust-clippy/pull/9303)\n \n ## Rust 1.64\n \n-Current stable, released 2022-09-22\n+Released 2022-09-22\n \n [d7b5cbf0...3c7e7dbc](https://github.com/rust-lang/rust-clippy/compare/d7b5cbf0...3c7e7dbc)\n "}, {"sha": "7148b5e6ebf45e09c2da8693aaf6184410ec6bbc", "filename": "clippy_lints/src/casts/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fcasts%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fcasts%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcasts%2Fmod.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -593,7 +593,7 @@ declare_clippy_lint! {\n     /// let _: *mut [u8] = std::ptr::slice_from_raw_parts_mut(ptr, len);\n     /// ```\n     /// [safety requirements]: https://doc.rust-lang.org/std/slice/fn.from_raw_parts.html#safety\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub CAST_SLICE_FROM_RAW_PARTS,\n     suspicious,\n     \"casting a slice created from a pointer and length to a slice pointer\""}, {"sha": "ae0e08334463803dbfce17b707bdbbab3fda0773", "filename": "clippy_lints/src/functions/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Ffunctions%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Ffunctions%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions%2Fmod.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -254,7 +254,7 @@ declare_clippy_lint! {\n     ///     Ok(())\n     /// }\n     /// ```\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub RESULT_LARGE_ERR,\n     perf,\n     \"function returning `Result` with large `Err` type\""}, {"sha": "1e60aa02d3cad9e69c56b26c2f3f160b169a6a87", "filename": "clippy_lints/src/manual_instant_elapsed.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fmanual_instant_elapsed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fmanual_instant_elapsed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmanual_instant_elapsed.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -27,7 +27,7 @@ declare_clippy_lint! {\n     /// let prev_instant = Instant::now();\n     /// let duration = prev_instant.elapsed();\n     /// ```\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub MANUAL_INSTANT_ELAPSED,\n     pedantic,\n     \"subtraction between `Instant::now()` and previous `Instant`\""}, {"sha": "43a52f156809f920051fac036b7016a201f5ebab", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -160,7 +160,7 @@ declare_clippy_lint! {\n     /// ```rust\n     /// let hello = \"hesuo worpd\".replace(&['s', 'u', 'p'], \"l\");\n     /// ```\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub COLLAPSIBLE_STR_REPLACE,\n     perf,\n     \"collapse consecutive calls to str::replace (2 or more) into a single call\"\n@@ -2428,7 +2428,7 @@ declare_clippy_lint! {\n     /// ### Known problems\n     ///\n     /// The type of the resulting iterator might become incompatible with its usage\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub ITER_ON_SINGLE_ITEMS,\n     nursery,\n     \"Iterator for array of length 1\"\n@@ -2460,7 +2460,7 @@ declare_clippy_lint! {\n     /// ### Known problems\n     ///\n     /// The type of the resulting iterator might become incompatible with its usage\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub ITER_ON_EMPTY_COLLECTIONS,\n     nursery,\n     \"Iterator for empty array\""}, {"sha": "456ded3fc02680de1c7e03a2433399f5e965b857", "filename": "clippy_lints/src/partialeq_to_none.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fpartialeq_to_none.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Fpartialeq_to_none.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpartialeq_to_none.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -33,7 +33,7 @@ declare_clippy_lint! {\n     ///     if f.is_some() { \"yay\" } else { \"nay\" }\n     /// }\n     /// ```\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub PARTIALEQ_TO_NONE,\n     style,\n     \"Binary comparison to `Option<T>::None` relies on `T: PartialEq`, which is unneeded\""}, {"sha": "d086c963c3275e8c121acfc8a05c61fa8371d58d", "filename": "clippy_lints/src/unused_peekable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Funused_peekable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4e7dd547b556400863501603bad8373f4ad761/clippy_lints%2Fsrc%2Funused_peekable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funused_peekable.rs?ref=6b4e7dd547b556400863501603bad8373f4ad761", "patch": "@@ -37,7 +37,7 @@ declare_clippy_lint! {\n     ///     // ...\n     /// }\n     /// ```\n-    #[clippy::version = \"1.64.0\"]\n+    #[clippy::version = \"1.65.0\"]\n     pub UNUSED_PEEKABLE,\n     nursery,\n     \"creating a peekable iterator without using any of its methods\""}]}