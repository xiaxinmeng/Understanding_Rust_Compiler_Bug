{"sha": "946e670bce9f1e123dffce485fc979a96edbb0b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk0NmU2NzBiY2U5ZjFlMTIzZGZmY2U0ODVmYzk3OWE5NmVkYmIwYjg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-03T05:56:57Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-03T05:56:57Z"}, "message": "Rollup merge of #58865 - dlrobertson:fix-varargs, r=alexreg\n\nFix C-variadic function printing\n\nThere is no longer a need to append the string `\", ...\"` to a functions\nargs as `...` is parsed as an argument and will appear in the functions\narguments.\n\nFixes: #58853", "tree": {"sha": "ec62a39d585d23dc5f6b7aa794c4f11e89b0af28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec62a39d585d23dc5f6b7aa794c4f11e89b0af28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/946e670bce9f1e123dffce485fc979a96edbb0b8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlx7bKoACgkQ/vbIBR0O\nATzDoQ//SZeazo40cvfWe5PTOhIT6SQrvDfOUfBE+/V4FqlhtQ3WFNZHptWZhz/s\n3zAl5ESDtKgkRgs+zVR3FOxGUwf8ygWz6QzKDb3z2qFjOUVX34zXtMniE+QB0s4Q\nguNobxDL7io+nypwqQS8K+qEyUdzbinUiwgi5Jr7+34XzVKZ01oMb8tOaIdswmBG\nf71G9YG6CYsbPpjPFHM1x8l5R/AWGe00wREJp8tWuiymO8TCsZxM/7m6lddokN6U\nQBwP7whSpAHU50IFP6uljOUR7ztEbozgME6SEZXpVeI5Pw6Eore5qCS6YCSn0FUE\nZutud4YmDdqHHLy8+I7etn4u9KQFFWc2+OIYl03t5XY2My0miR+pCPH6kuXXsb2Z\n40INKiiknhmHb4+dYRoeSd2a5LArxzUST/Hqhjigd6ix26q3s6tn+HjBpxAe31AG\nas42kROXHVZRgRO/5Qo+yVifGpx716L+9ibPzOsfHUeyFXKIKHkc3ftTZVtqC5pY\n8AV5KEo+dApjHvHWPFewTJm/JrrtYxcsjA3jTLoniOF9P29Oj5YjaGsz6q4bZa7u\nhpq8RiCg56GU63tzdlQDNF7zAIbaXxgn7IhKjoy8jwNo43XYMKx91mZZ8IxhY4gd\nhDv8G+i/MdzgOe+tNje6phX12ABosG9v13s8tP+viGI20c2Fzn0=\n=OMmw\n-----END PGP SIGNATURE-----", "payload": "tree ec62a39d585d23dc5f6b7aa794c4f11e89b0af28\nparent c835a0a94db7e68a57b6449497f74cf2f74c0256\nparent 379cd29d1c9ce06aa48fdd49208cfd7ffd3e5c07\nauthor kennytm <kennytm@gmail.com> 1551592617 +0800\ncommitter kennytm <kennytm@gmail.com> 1551592617 +0800\n\nRollup merge of #58865 - dlrobertson:fix-varargs, r=alexreg\n\nFix C-variadic function printing\n\nThere is no longer a need to append the string `\", ...\"` to a functions\nargs as `...` is parsed as an argument and will appear in the functions\narguments.\n\nFixes: #58853\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/946e670bce9f1e123dffce485fc979a96edbb0b8", "html_url": "https://github.com/rust-lang/rust/commit/946e670bce9f1e123dffce485fc979a96edbb0b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/946e670bce9f1e123dffce485fc979a96edbb0b8/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c835a0a94db7e68a57b6449497f74cf2f74c0256", "url": "https://api.github.com/repos/rust-lang/rust/commits/c835a0a94db7e68a57b6449497f74cf2f74c0256", "html_url": "https://github.com/rust-lang/rust/commit/c835a0a94db7e68a57b6449497f74cf2f74c0256"}, {"sha": "379cd29d1c9ce06aa48fdd49208cfd7ffd3e5c07", "url": "https://api.github.com/repos/rust-lang/rust/commits/379cd29d1c9ce06aa48fdd49208cfd7ffd3e5c07", "html_url": "https://github.com/rust-lang/rust/commit/379cd29d1c9ce06aa48fdd49208cfd7ffd3e5c07"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "49e3fad4af0ffdc76671655f3379319ec69a1551", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/946e670bce9f1e123dffce485fc979a96edbb0b8/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/946e670bce9f1e123dffce485fc979a96edbb0b8/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=946e670bce9f1e123dffce485fc979a96edbb0b8", "patch": "@@ -2814,9 +2814,6 @@ impl<'a> State<'a> {\n         -> io::Result<()> {\n         self.popen()?;\n         self.commasep(Inconsistent, &decl.inputs, |s, arg| s.print_arg(arg, false))?;\n-        if decl.c_variadic {\n-            self.s.word(\", ...\")?;\n-        }\n         self.pclose()?;\n \n         self.print_fn_output(decl)"}, {"sha": "d499be424603badfa5f9fd4c4a70dd6ae7432661", "filename": "src/test/pretty/fn-variadic.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/946e670bce9f1e123dffce485fc979a96edbb0b8/src%2Ftest%2Fpretty%2Ffn-variadic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/946e670bce9f1e123dffce485fc979a96edbb0b8/src%2Ftest%2Fpretty%2Ffn-variadic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Ffn-variadic.rs?ref=946e670bce9f1e123dffce485fc979a96edbb0b8", "patch": "@@ -0,0 +1,15 @@\n+// Check that `fn foo(x: i32, ...)` does not print as `fn foo(x: i32, ..., ...)`.\n+// See issue #58853.\n+\n+// pp-exact\n+#![feature(c_variadic)]\n+\n+extern \"C\" {\n+    pub fn foo(x: i32, ...);\n+}\n+\n+pub unsafe extern \"C\" fn bar(_: i32, mut ap: ...) -> usize {\n+    ap.arg::<usize>()\n+}\n+\n+fn main() { }"}]}