{"sha": "684003028335580eae0d12abbe6307db9cd0ee7b", "node_id": "C_kwDOAAsO6NoAKDY4NDAwMzAyODMzNTU4MGVhZTBkMTJhYmJlNjMwN2RiOWNkMGVlN2I", "commit": {"author": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2021-12-09T17:20:55Z"}, "committer": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2021-12-09T17:30:38Z"}, "message": "Default to `doc-stage = 2` for the tools profile\n\nThis already enables `download-rustc`, so it's quick to build rustdoc,\nand this makes it less confusing when changes to rustdoc aren't reflected in the docs.\n\nNote that this uses 2 and not 1 because `download-rustc` only affects stage 2 runs.", "tree": {"sha": "34862acdabe41e220899c4cdee61a3facce58e6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34862acdabe41e220899c4cdee61a3facce58e6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/684003028335580eae0d12abbe6307db9cd0ee7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/684003028335580eae0d12abbe6307db9cd0ee7b", "html_url": "https://github.com/rust-lang/rust/commit/684003028335580eae0d12abbe6307db9cd0ee7b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/684003028335580eae0d12abbe6307db9cd0ee7b/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dfcaac53ce9062adfa0c8e316714509a855ba997", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfcaac53ce9062adfa0c8e316714509a855ba997", "html_url": "https://github.com/rust-lang/rust/commit/dfcaac53ce9062adfa0c8e316714509a855ba997"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "88359fff191e3978076da84f206a7a49a9de529a", "filename": "src/bootstrap/defaults/config.tools.toml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/684003028335580eae0d12abbe6307db9cd0ee7b/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml", "raw_url": "https://github.com/rust-lang/rust/raw/684003028335580eae0d12abbe6307db9cd0ee7b/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdefaults%2Fconfig.tools.toml?ref=684003028335580eae0d12abbe6307db9cd0ee7b", "patch": "@@ -11,6 +11,10 @@ incremental = true\n # This cuts compile times by almost 60x, but means you can't modify the compiler.\n download-rustc = \"if-unchanged\"\n \n+[build]\n+# Document with the in-tree rustdoc by default, since `download-rustc` makes it quick to compile.\n+doc-stage = 2\n+\n [llvm]\n # Will download LLVM from CI if available on your platform.\n download-ci-llvm = \"if-available\""}]}