{"sha": "a4740a192221b24e2cfbb5fcb17689568b16bb85", "node_id": "C_kwDOAAsO6NoAKGE0NzQwYTE5MjIyMWIyNGUyY2ZiYjVmY2IxNzY4OTU2OGIxNmJiODU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-25T10:31:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-25T10:31:34Z"}, "message": "Rollup merge of #108433 - compiler-errors:missing-provider-nit, r=Nilstrieb\n\nWrap missing provider message correctly\n\nFixes #108429\n\n```\nerror: internal compiler error: compiler/rustc_middle/src/ty/query.rs:441:1: `tcx.trigger_delay_span_bug(DefId(0:3 ~ test[78c5]::main))` is not supported for local crate;\n                                hint: Queries can be either made to the local crate, or the external crate. This error means you tried to use it for one that's not supported.\n                                If that's not the case, trigger_delay_span_bug was likely never assigned to a provider function.\n\nthread 'rustc' panicked at 'Box<dyn Any>', /home/ec2-user/rust3/compiler/rustc_errors/src/lib.rs:1651:9\nstack backtrace:\n   0:     0x7f51870926d7 - std::backtrace_rs::backtrace::libunwind::trace::hb0876bb39e7adf0d\n                               at /home/ec2-user/rust3/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\n   1:     0x7f51870926d7 - std::backtrace_rs::backtrace::trace_unsynchronized::h1bcab1313827007b\n                               at /home/ec2-user/rust3/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   2:     0x7f5187077e07 - std::sys_common::backtrace::_print_fmt::h262d2a62279fa102\n                               at /home/ec2-user/rust3/library/std/src/sys_common/backtrace.rs:65:5\n```", "tree": {"sha": "c559a911809812b98f27f03930470dc574e63dad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c559a911809812b98f27f03930470dc574e63dad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4740a192221b24e2cfbb5fcb17689568b16bb85", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj+eOGCRBK7hj4Ov3rIwAAqJEIADIrSfSx8MpgRQfor3u7fnxw\n0i/JU6DyCjp+yys5AMCqlan/rXnhm14UXQfDfTHrLAOyDicn66S1x7O4mRYkBGQQ\nrQt/sx8FIG0TssxTrQ9B+83SCTM6se9YgVqThTPaG8uz7DOnA+w7iQp4n0ED2wT0\n8cj3/RM7RPAjTaoOZ5wam+3gwCPq0ym69+DQXiXUPMox2uNCupuOtho67zr6cppq\nIiKJCVKvyws7d+Y4o7jGrSKU+sIQub6VXof19buqa53WVyeRIwncB7Mti6pS22FV\nBbilG4dI0QVFZWi6tPRFRmEK5qFw1Jk1TY+dFui3dkw4b1ZLvNI60uwjqmVFEU8=\n=gE+L\n-----END PGP SIGNATURE-----\n", "payload": "tree c559a911809812b98f27f03930470dc574e63dad\nparent 47c7d53fe647082e10d1391568bfda9d87d040a7\nparent a861b192da5426d20cfecf35f898aa642f87f9e6\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1677321094 +0100\ncommitter GitHub <noreply@github.com> 1677321094 +0100\n\nRollup merge of #108433 - compiler-errors:missing-provider-nit, r=Nilstrieb\n\nWrap missing provider message correctly\n\nFixes #108429\n\n```\nerror: internal compiler error: compiler/rustc_middle/src/ty/query.rs:441:1: `tcx.trigger_delay_span_bug(DefId(0:3 ~ test[78c5]::main))` is not supported for local crate;\n                                hint: Queries can be either made to the local crate, or the external crate. This error means you tried to use it for one that's not supported.\n                                If that's not the case, trigger_delay_span_bug was likely never assigned to a provider function.\n\nthread 'rustc' panicked at 'Box<dyn Any>', /home/ec2-user/rust3/compiler/rustc_errors/src/lib.rs:1651:9\nstack backtrace:\n   0:     0x7f51870926d7 - std::backtrace_rs::backtrace::libunwind::trace::hb0876bb39e7adf0d\n                               at /home/ec2-user/rust3/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5\n   1:     0x7f51870926d7 - std::backtrace_rs::backtrace::trace_unsynchronized::h1bcab1313827007b\n                               at /home/ec2-user/rust3/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5\n   2:     0x7f5187077e07 - std::sys_common::backtrace::_print_fmt::h262d2a62279fa102\n                               at /home/ec2-user/rust3/library/std/src/sys_common/backtrace.rs:65:5\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4740a192221b24e2cfbb5fcb17689568b16bb85", "html_url": "https://github.com/rust-lang/rust/commit/a4740a192221b24e2cfbb5fcb17689568b16bb85", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4740a192221b24e2cfbb5fcb17689568b16bb85/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47c7d53fe647082e10d1391568bfda9d87d040a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/47c7d53fe647082e10d1391568bfda9d87d040a7", "html_url": "https://github.com/rust-lang/rust/commit/47c7d53fe647082e10d1391568bfda9d87d040a7"}, {"sha": "a861b192da5426d20cfecf35f898aa642f87f9e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/a861b192da5426d20cfecf35f898aa642f87f9e6", "html_url": "https://github.com/rust-lang/rust/commit/a861b192da5426d20cfecf35f898aa642f87f9e6"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "3d9a5075d4ade2e7a2ba2bcb80c8ac685718874e", "filename": "compiler/rustc_middle/src/ty/query.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a4740a192221b24e2cfbb5fcb17689568b16bb85/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4740a192221b24e2cfbb5fcb17689568b16bb85/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery.rs?ref=a4740a192221b24e2cfbb5fcb17689568b16bb85", "patch": "@@ -328,8 +328,9 @@ macro_rules! define_callbacks {\n \n                 Providers {\n                     $($name: |_, key| bug!(\n-                        \"`tcx.{}({:?})` is not supported for {} crate;\\n\n-                        hint: Queries can be either made to the local crate, or the external crate. This error means you tried to use it for one that's not supported.\\n\n+                        \"`tcx.{}({:?})` is not supported for {} crate;\\n\\\n+                        hint: Queries can be either made to the local crate, or the external crate. \\\n+                        This error means you tried to use it for one that's not supported.\\n\\\n                         If that's not the case, {} was likely never assigned to a provider function.\\n\",\n                         stringify!($name),\n                         key,"}]}