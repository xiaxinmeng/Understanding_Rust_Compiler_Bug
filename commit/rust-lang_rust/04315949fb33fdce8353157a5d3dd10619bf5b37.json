{"sha": "04315949fb33fdce8353157a5d3dd10619bf5b37", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0MzE1OTQ5ZmIzM2ZkY2U4MzUzMTU3YTVkM2RkMTA2MTliZjViMzc=", "commit": {"author": {"name": "Ulrik Sverdrup", "email": "root@localhost", "date": "2015-06-16T11:10:27Z"}, "committer": {"name": "Ulrik Sverdrup", "email": "root@localhost", "date": "2015-06-16T11:10:27Z"}, "message": "test: Fix a bug in bench result formatting\n\nIt would skip the middle part if it was 0, displaying a number a 1000\ntimes too small. The MB/s number next to it gave it away.\n\nFixed it looks like this:\n\n```\ntest h ... bench:   1,000,129 ns/iter (+/- 4,730)\n```", "tree": {"sha": "d5cf846c3a7c17865040a2894d2ec94627abe24f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5cf846c3a7c17865040a2894d2ec94627abe24f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04315949fb33fdce8353157a5d3dd10619bf5b37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04315949fb33fdce8353157a5d3dd10619bf5b37", "html_url": "https://github.com/rust-lang/rust/commit/04315949fb33fdce8353157a5d3dd10619bf5b37", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04315949fb33fdce8353157a5d3dd10619bf5b37/comments", "author": {"login": "invalid-email-address", "id": 148100, "node_id": "MDQ6VXNlcjE0ODEwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/148100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invalid-email-address", "html_url": "https://github.com/invalid-email-address", "followers_url": "https://api.github.com/users/invalid-email-address/followers", "following_url": "https://api.github.com/users/invalid-email-address/following{/other_user}", "gists_url": "https://api.github.com/users/invalid-email-address/gists{/gist_id}", "starred_url": "https://api.github.com/users/invalid-email-address/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invalid-email-address/subscriptions", "organizations_url": "https://api.github.com/users/invalid-email-address/orgs", "repos_url": "https://api.github.com/users/invalid-email-address/repos", "events_url": "https://api.github.com/users/invalid-email-address/events{/privacy}", "received_events_url": "https://api.github.com/users/invalid-email-address/received_events", "type": "User", "site_admin": false}, "committer": {"login": "invalid-email-address", "id": 148100, "node_id": "MDQ6VXNlcjE0ODEwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/148100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invalid-email-address", "html_url": "https://github.com/invalid-email-address", "followers_url": "https://api.github.com/users/invalid-email-address/followers", "following_url": "https://api.github.com/users/invalid-email-address/following{/other_user}", "gists_url": "https://api.github.com/users/invalid-email-address/gists{/gist_id}", "starred_url": "https://api.github.com/users/invalid-email-address/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invalid-email-address/subscriptions", "organizations_url": "https://api.github.com/users/invalid-email-address/orgs", "repos_url": "https://api.github.com/users/invalid-email-address/repos", "events_url": "https://api.github.com/users/invalid-email-address/events{/privacy}", "received_events_url": "https://api.github.com/users/invalid-email-address/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f6341a878e46084b3afca1f331ed470fb2bd092e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f6341a878e46084b3afca1f331ed470fb2bd092e", "html_url": "https://github.com/rust-lang/rust/commit/f6341a878e46084b3afca1f331ed470fb2bd092e"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "a2cd7c90bf0ee073f44bcbb41b02189a0b7e0a82", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/04315949fb33fdce8353157a5d3dd10619bf5b37/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04315949fb33fdce8353157a5d3dd10619bf5b37/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=04315949fb33fdce8353157a5d3dd10619bf5b37", "patch": "@@ -629,19 +629,19 @@ impl<T: Write> ConsoleTestState<T> {\n fn fmt_thousands_sep(mut n: usize, sep: char) -> String {\n     use std::fmt::Write;\n     let mut output = String::new();\n-    let mut first = true;\n+    let mut trailing = false;\n     for &pow in &[9, 6, 3, 0] {\n         let base = 10_usize.pow(pow);\n-        if pow == 0 || n / base != 0 {\n-            if first {\n+        if pow == 0 || trailing || n / base != 0 {\n+            if !trailing {\n                 output.write_fmt(format_args!(\"{}\", n / base)).unwrap();\n             } else {\n                 output.write_fmt(format_args!(\"{:03}\", n / base)).unwrap();\n             }\n             if pow != 0 {\n                 output.push(sep);\n             }\n-            first = false;\n+            trailing = true;\n         }\n         n %= base;\n     }"}]}