{"sha": "6b64826469e7c8f31979389d97d565ec981a5c65", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiNjQ4MjY0NjllN2M4ZjMxOTc5Mzg5ZDk3ZDU2NWVjOTgxYTVjNjU=", "commit": {"author": {"name": "Andreas Tolfsen", "email": "ato@mozilla.com", "date": "2015-07-08T13:52:58Z"}, "committer": {"name": "Andreas Tolfsen", "email": "ato@mozilla.com", "date": "2015-07-20T10:36:47Z"}, "message": "librustdoc: blur page when help dialogue is present\n\nBlurs the document's background when the help dialogue is present,\nmaking the contents of the dialogue stand out more.", "tree": {"sha": "8e00c1ecfdca1647a05c0fa2d6b6a2612ba45a83", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e00c1ecfdca1647a05c0fa2d6b6a2612ba45a83"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b64826469e7c8f31979389d97d565ec981a5c65", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b64826469e7c8f31979389d97d565ec981a5c65", "html_url": "https://github.com/rust-lang/rust/commit/6b64826469e7c8f31979389d97d565ec981a5c65", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b64826469e7c8f31979389d97d565ec981a5c65/comments", "author": {"login": "andreastt", "id": 399120, "node_id": "MDQ6VXNlcjM5OTEyMA==", "avatar_url": "https://avatars.githubusercontent.com/u/399120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreastt", "html_url": "https://github.com/andreastt", "followers_url": "https://api.github.com/users/andreastt/followers", "following_url": "https://api.github.com/users/andreastt/following{/other_user}", "gists_url": "https://api.github.com/users/andreastt/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreastt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreastt/subscriptions", "organizations_url": "https://api.github.com/users/andreastt/orgs", "repos_url": "https://api.github.com/users/andreastt/repos", "events_url": "https://api.github.com/users/andreastt/events{/privacy}", "received_events_url": "https://api.github.com/users/andreastt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "andreastt", "id": 399120, "node_id": "MDQ6VXNlcjM5OTEyMA==", "avatar_url": "https://avatars.githubusercontent.com/u/399120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreastt", "html_url": "https://github.com/andreastt", "followers_url": "https://api.github.com/users/andreastt/followers", "following_url": "https://api.github.com/users/andreastt/following{/other_user}", "gists_url": "https://api.github.com/users/andreastt/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreastt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreastt/subscriptions", "organizations_url": "https://api.github.com/users/andreastt/orgs", "repos_url": "https://api.github.com/users/andreastt/repos", "events_url": "https://api.github.com/users/andreastt/events{/privacy}", "received_events_url": "https://api.github.com/users/andreastt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c88aeda5809b570da7f92a82113fa8bd6184c4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c88aeda5809b570da7f92a82113fa8bd6184c4b", "html_url": "https://github.com/rust-lang/rust/commit/6c88aeda5809b570da7f92a82113fa8bd6184c4b"}], "stats": {"total": 103, "additions": 62, "deletions": 41}, "files": [{"sha": "18f8ce3385f243471e86d1d40bcbad2e7ff35bcb", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 38, "deletions": 31, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=6b64826469e7c8f31979389d97d565ec981a5c65", "patch": "@@ -84,37 +84,44 @@ r##\"<!DOCTYPE html>\n     <section class=\"footer\"></section>\n \n     <div id=\"help\" class=\"hidden\">\n-        <div class=\"shortcuts\">\n-            <h1>Keyboard Shortcuts</h1>\n-            <dl>\n-                <dt>?</dt>\n-                <dd>Show this help dialog</dd>\n-                <dt>S</dt>\n-                <dd>Focus the search field</dd>\n-                <dt>&larrb;</dt>\n-                <dd>Move up in search results</dd>\n-                <dt>&rarrb;</dt>\n-                <dd>Move down in search results</dd>\n-                <dt>&#9166;</dt>\n-                <dd>Go to active search result</dd>\n-            </dl>\n-        </div>\n-        <div class=\"infos\">\n-            <h1>Search Tricks</h1>\n-            <p>\n-                Prefix searches with a type followed by a colon (e.g.\n-                <code>fn:</code>) to restrict the search to a given type.\n-            </p>\n-            <p>\n-                Accepted types are: <code>fn</code>, <code>mod</code>,\n-                <code>struct</code>, <code>enum</code>,\n-                <code>trait</code>, <code>typedef</code> (or\n-                <code>tdef</code>).\n-            </p>\n-            <p>\n-                Search functions by type signature (e.g.\n-                <code>vec -> usize</code>)\n-            </p>\n+        <div>\n+            <div class=\"shortcuts\">\n+                <h1>Keyboard Shortcuts</h1>\n+\n+                <dl>\n+                    <dt>?</dt>\n+                    <dd>Show this help dialog</dd>\n+                    <dt>S</dt>\n+                    <dd>Focus the search field</dd>\n+                    <dt>&larrb;</dt>\n+                    <dd>Move up in search results</dd>\n+                    <dt>&rarrb;</dt>\n+                    <dd>Move down in search results</dd>\n+                    <dt>&#9166;</dt>\n+                    <dd>Go to active search result</dd>\n+                </dl>\n+            </div>\n+\n+            <div class=\"infos\">\n+                <h1>Search Tricks</h1>\n+\n+                <p>\n+                    Prefix searches with a type followed by a colon (e.g.\n+                    <code>fn:</code>) to restrict the search to a given type.\n+                </p>\n+\n+                <p>\n+                    Accepted types are: <code>fn</code>, <code>mod</code>,\n+                    <code>struct</code>, <code>enum</code>,\n+                    <code>trait</code>, <code>typedef</code> (or\n+                    <code>tdef</code>).\n+                </p>\n+\n+                <p>\n+                    Search functions by type signature (e.g.\n+                    <code>vec -> usize</code>)\n+                </p>\n+            </div>\n         </div>\n     </div>\n "}, {"sha": "774d413fffa1545cb73b7869ba8d59fdd750114b", "filename": "src/librustdoc/html/static/main.css", "status": "modified", "additions": 19, "deletions": 8, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "raw_url": "https://github.com/rust-lang/rust/raw/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css?ref=6b64826469e7c8f31979389d97d565ec981a5c65", "patch": "@@ -165,7 +165,7 @@ nav.sub {\n \n /* Everything else */\n \n-.js-only, .hidden { display: none; }\n+.js-only, .hidden { display: none !important; }\n \n .sidebar {\n     padding: 10px;\n@@ -448,19 +448,30 @@ a {\n \n tr.result span.primitive::after { content: ' (primitive type)'; font-style: italic; }\n \n+body.blur > :not(#help) {\n+    filter: blur(8px);\n+    -webkit-filter: blur(8px);\n+    opacity: .7;\n+}\n+\n #help {\n+    width: 100%;\n+    height: 100vh;\n+    position: fixed;\n+    top: 0;\n+    left: 0;\n+    display: flex;\n+    justify-content: center;\n+    align-items: center;\n+}\n+#help > div {\n+    flex: 0 0 auto;\n     background: #e9e9e9;\n     box-shadow: 0 0 6px rgba(0,0,0,.2);\n-    position: absolute;\n-    top: 300px;\n-    left: 50%;\n-    margin-top: -125px;\n-    margin-left: -275px;\n     width: 550px;\n     height: 300px;\n     border: 1px solid #bfbfbf;\n }\n-\n #help dt {\n     float: left;\n     border-radius: 4px;\n@@ -475,7 +486,7 @@ tr.result span.primitive::after { content: ' (primitive type)'; font-style: ital\n #help dd { margin: 5px 33px; }\n #help .infos { padding-left: 0; }\n #help h1 { margin-top: 0; }\n-#help div {\n+#help > div div {\n     width: 50%;\n     float: left;\n     padding: 20px;"}, {"sha": "1d2cc38b4fc33d9fc0a841c14c7bdee2030d4746", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/6b64826469e7c8f31979389d97d565ec981a5c65/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=6b64826469e7c8f31979389d97d565ec981a5c65", "patch": "@@ -105,6 +105,7 @@\n             if (!$(\"#help\").hasClass(\"hidden\")) {\n                 ev.preventDefault();\n                 $(\"#help\").addClass(\"hidden\");\n+                $(\"body\").removeClass(\"blur\");\n             } else if (!$(\"#search\").hasClass(\"hidden\")) {\n                 ev.preventDefault();\n                 $(\"#search\").addClass(\"hidden\");\n@@ -115,13 +116,14 @@\n         case \"s\":\n         case \"S\":\n             ev.preventDefault();\n-            focusSearchBar()\n+            focusSearchBar();\n             break;\n \n         case \"?\":\n             if (ev.shiftKey && $(\"#help\").hasClass(\"hidden\")) {\n                 ev.preventDefault();\n                 $(\"#help\").removeClass(\"hidden\");\n+                $(\"body\").addClass(\"blur\");\n             }\n             break;\n         }\n@@ -130,8 +132,9 @@\n     $(document).on(\"keypress\", handleShortcut);\n     $(document).on(\"keydown\", handleShortcut);\n     $(document).on(\"click\", function(ev) {\n-        if (!$(ev.target).closest(\"#help\").length) {\n+        if (!$(e.target).closest(\"#help > div\").length) {\n             $(\"#help\").addClass(\"hidden\");\n+            $(\"body\").removeClass(\"blur\");\n         }\n     });\n "}]}