{"sha": "83bea3ddecd9222fe1e453712ece5e20834077b9", "node_id": "C_kwDOAAsO6NoAKDgzYmVhM2RkZWNkOTIyMmZlMWU0NTM3MTJlY2U1ZTIwODM0MDc3Yjk", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-09-22T12:55:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-22T12:55:55Z"}, "message": "Rollup merge of #102107 - Urgau:rustdoc-missing-space-before-where-clause, r=GuillaumeGomez\n\nAdd missing space between notable trait tooltip and where clause\n\nThis PR add a missing space between the notable trait tooltip and the where clause.\n\nThe issue can be seeing on the [BufRead](https://doc.rust-lang.org/nightly/std/io/trait.BufRead.html) page.\n\nAdded a simple snapshot regression test in `src/test/rustdoc/where.rs`.\n\nBefore:\n![image](https://user-images.githubusercontent.com/3616612/191566999-2f80e138-29c9-4f66-8bed-07781cbd9783.png)\n\nAfter:\n![image](https://user-images.githubusercontent.com/3616612/191567025-0ed3f7d4-7cec-4788-901f-5980fc241daa.png)\n\nr? `@GuillaumeGomez`", "tree": {"sha": "a86b2b915f96e7216a80755dae44116deae37f25", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a86b2b915f96e7216a80755dae44116deae37f25"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83bea3ddecd9222fe1e453712ece5e20834077b9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjLFtbCRBK7hj4Ov3rIwAAyecIAKJaAK8zRhyf+hw/bpKuPjg+\n67YgPPqbCWWPkyvtkrDPGS4OovnGa2qBYAcevRVjf6wlT4jJj4amcWBWLRkQC1Om\nCSmBhKpAn2b2pO3s6nmuqQYUg/kIZhJOroVihVqbezszDhLP+ZnxDy+F6GyqXcbL\nQX5Gw9gm0CKJCPy/1bP6uc21A7li2SS89b1cvgwMtUNBJkcUHW086oL629sY+YJM\n4ujD377hpyza9q6zLdoO0hUN/sC8t/zk5uxvzXbPaeBFOQYlRz+36INfV8ON/e2J\nhzA2BJQn4pBnau3Nw3pZuk2hG7SXfbrIUfnCsJM2l009fQ+jKpEM7PrVg2xj2gI=\n=Piqy\n-----END PGP SIGNATURE-----\n", "payload": "tree a86b2b915f96e7216a80755dae44116deae37f25\nparent 7cac18e1be19a3f47dedec0d1115e0df511414e0\nparent e214385a4d1933ddb6a4c6ffeed50c7228674656\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1663851355 +0530\ncommitter GitHub <noreply@github.com> 1663851355 +0530\n\nRollup merge of #102107 - Urgau:rustdoc-missing-space-before-where-clause, r=GuillaumeGomez\n\nAdd missing space between notable trait tooltip and where clause\n\nThis PR add a missing space between the notable trait tooltip and the where clause.\n\nThe issue can be seeing on the [BufRead](https://doc.rust-lang.org/nightly/std/io/trait.BufRead.html) page.\n\nAdded a simple snapshot regression test in `src/test/rustdoc/where.rs`.\n\nBefore:\n![image](https://user-images.githubusercontent.com/3616612/191566999-2f80e138-29c9-4f66-8bed-07781cbd9783.png)\n\nAfter:\n![image](https://user-images.githubusercontent.com/3616612/191567025-0ed3f7d4-7cec-4788-901f-5980fc241daa.png)\n\nr? `@GuillaumeGomez`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83bea3ddecd9222fe1e453712ece5e20834077b9", "html_url": "https://github.com/rust-lang/rust/commit/83bea3ddecd9222fe1e453712ece5e20834077b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83bea3ddecd9222fe1e453712ece5e20834077b9/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7cac18e1be19a3f47dedec0d1115e0df511414e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/7cac18e1be19a3f47dedec0d1115e0df511414e0", "html_url": "https://github.com/rust-lang/rust/commit/7cac18e1be19a3f47dedec0d1115e0df511414e0"}, {"sha": "e214385a4d1933ddb6a4c6ffeed50c7228674656", "url": "https://api.github.com/repos/rust-lang/rust/commits/e214385a4d1933ddb6a4c6ffeed50c7228674656", "html_url": "https://github.com/rust-lang/rust/commit/e214385a4d1933ddb6a4c6ffeed50c7228674656"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "b499e186cc046ddea624484a290b2b3802642a82", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=83bea3ddecd9222fe1e453712ece5e20834077b9", "patch": "@@ -371,7 +371,7 @@ pub(crate) fn print_where_clause<'a, 'tcx: 'a>(\n                     format!(\"<br><span class=\\\"where\\\">where{where_preds}</span>\")\n                 } else {\n                     let mut clause = br_with_padding;\n-                    clause.truncate(clause.len() - 5 * \"&nbsp;\".len());\n+                    clause.truncate(clause.len() - 4 * \"&nbsp;\".len());\n                     write!(clause, \"<span class=\\\"where\\\">where{where_preds}</span>\")?;\n                     clause\n                 }"}, {"sha": "24ab77703d107514a41ef2122b75b7565a3a62bf", "filename": "src/test/rustdoc/where.SWhere_TraitWhere_item-decl.html", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html", "raw_url": "https://github.com/rust-lang/rust/raw/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html?ref=83bea3ddecd9222fe1e453712ece5e20834077b9", "patch": "@@ -1,3 +1,8 @@\n <div class=\"item-decl\"><pre class=\"rust trait\"><code>pub trait TraitWhere {\n-    type <a href=\"#associatedtype.Item\" class=\"associatedtype\">Item</a>&lt;'a&gt;<br />&#160;&#160;&#160;<span class=\"where\">where<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Self: 'a</span>;\n+    type <a href=\"#associatedtype.Item\" class=\"associatedtype\">Item</a>&lt;'a&gt;<br />&#160;&#160;&#160;&#160;<span class=\"where\">where<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Self: 'a</span>;\n+\n+    fn <a href=\"#method.func\" class=\"fnname\">func</a>(self)<br />&#160;&#160;&#160;&#160;<span class=\"where\">where<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Self: <a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a></span>,\n+    { ... }\n+<span class=\"item-spacer\" />    fn <a href=\"#method.lines\" class=\"fnname\">lines</a>(self) -&gt; <a class=\"struct\" href=\"{{channel}}/std/io/struct.Lines.html\" title=\"struct std::io::Lines\">Lines</a>&lt;Self&gt;<br />&#160;&#160;&#160;&#160;<span class=\"where\">where<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Self: <a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a></span>,\n+    { ... }\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "68a146bfa55b8e7401945869c01b4a221f79e02d", "filename": "src/test/rustdoc/where.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Ftest%2Frustdoc%2Fwhere.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83bea3ddecd9222fe1e453712ece5e20834077b9/src%2Ftest%2Frustdoc%2Fwhere.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhere.rs?ref=83bea3ddecd9222fe1e453712ece5e20834077b9", "patch": "@@ -1,5 +1,7 @@\n #![crate_name = \"foo\"]\n \n+use std::io::Lines;\n+\n pub trait MyTrait { fn dummy(&self) { } }\n \n // @has foo/struct.Alpha.html '//pre' \"pub struct Alpha<A>(_)where A: MyTrait\"\n@@ -29,6 +31,16 @@ where\n // @snapshot SWhere_TraitWhere_item-decl - '//div[@class=\"item-decl\"]'\n pub trait TraitWhere {\n     type Item<'a> where Self: 'a;\n+\n+    fn func(self)\n+    where\n+        Self: Sized\n+    {}\n+\n+    fn lines(self) -> Lines<Self>\n+    where\n+        Self: Sized,\n+    { todo!() }\n }\n \n // @has foo/struct.Echo.html '//*[@class=\"impl has-srclink\"]//h3[@class=\"code-header in-band\"]' \\"}]}