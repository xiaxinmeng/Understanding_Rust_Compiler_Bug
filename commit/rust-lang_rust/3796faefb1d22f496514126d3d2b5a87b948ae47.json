{"sha": "3796faefb1d22f496514126d3d2b5a87b948ae47", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM3OTZmYWVmYjFkMjJmNDk2NTE0MTI2ZDNkMmI1YTg3Yjk0OGFlNDc=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-03-08T21:21:37Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-03-18T14:08:25Z"}, "message": "{rustc_parse::parser -> rustc_expand}::module", "tree": {"sha": "9f4c2459a6da30034cfeeeaa6080b7db0d8063db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f4c2459a6da30034cfeeeaa6080b7db0d8063db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3796faefb1d22f496514126d3d2b5a87b948ae47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3796faefb1d22f496514126d3d2b5a87b948ae47", "html_url": "https://github.com/rust-lang/rust/commit/3796faefb1d22f496514126d3d2b5a87b948ae47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3796faefb1d22f496514126d3d2b5a87b948ae47/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ddcc8ec89de7c2637a012eb14b1b07c8b9426d1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/ddcc8ec89de7c2637a012eb14b1b07c8b9426d1e", "html_url": "https://github.com/rust-lang/rust/commit/ddcc8ec89de7c2637a012eb14b1b07c8b9426d1e"}], "stats": {"total": 17, "additions": 7, "deletions": 10}, "files": [{"sha": "1e9d59ca4bf84414b12f731c6bb3c3ed16bd5c85", "filename": "src/librustc_expand/base.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fbase.rs?ref=3796faefb1d22f496514126d3d2b5a87b948ae47", "patch": "@@ -1,4 +1,5 @@\n use crate::expand::{self, AstFragment, Invocation};\n+use crate::module::DirectoryOwnership;\n \n use rustc_ast::ast::{self, Attribute, Name, NodeId, PatKind};\n use rustc_ast::mut_visit::{self, MutVisitor};\n@@ -10,7 +11,6 @@ use rustc_attr::{self as attr, Deprecation, HasAttrs, Stability};\n use rustc_data_structures::fx::FxHashMap;\n use rustc_data_structures::sync::{self, Lrc};\n use rustc_errors::{DiagnosticBuilder, DiagnosticId};\n-use rustc_parse::parser::module::DirectoryOwnership;\n use rustc_parse::{self, parser, MACRO_ARGUMENTS};\n use rustc_session::parse::ParseSess;\n use rustc_span::edition::Edition;"}, {"sha": "8e83e13fa8af37ba185fa27fc71c14cb6170edd9", "filename": "src/librustc_expand/expand.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fexpand.rs?ref=3796faefb1d22f496514126d3d2b5a87b948ae47", "patch": "@@ -2,6 +2,7 @@ use crate::base::*;\n use crate::config::StripUnconfigured;\n use crate::hygiene::{ExpnData, ExpnId, ExpnKind, SyntaxContext};\n use crate::mbe::macro_rules::annotate_err_with_kind;\n+use crate::module::{parse_external_mod, push_directory, Directory, DirectoryOwnership};\n use crate::placeholders::{placeholder, PlaceholderExpander};\n use crate::proc_macro::collect_derives;\n \n@@ -18,9 +19,6 @@ use rustc_attr::{self as attr, is_builtin_attr, HasAttrs};\n use rustc_errors::{Applicability, FatalError, PResult};\n use rustc_feature::Features;\n use rustc_parse::configure;\n-use rustc_parse::parser::module::{\n-    parse_external_mod, push_directory, Directory, DirectoryOwnership,\n-};\n use rustc_parse::parser::Parser;\n use rustc_parse::validate_attr;\n use rustc_session::lint::builtin::UNUSED_DOC_COMMENTS;"}, {"sha": "98d644eb77af4109447d7f2c506fbe3624c6e032", "filename": "src/librustc_expand/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Flib.rs?ref=3796faefb1d22f496514126d3d2b5a87b948ae47", "patch": "@@ -4,6 +4,7 @@\n #![feature(proc_macro_diagnostic)]\n #![feature(proc_macro_internals)]\n #![feature(proc_macro_span)]\n+#![feature(try_blocks)]\n \n extern crate proc_macro as pm;\n \n@@ -34,6 +35,7 @@ crate use rustc_span::hygiene;\n pub mod base;\n pub mod build;\n pub mod expand;\n+pub mod module;\n pub use rustc_parse::config;\n pub mod proc_macro;\n "}, {"sha": "1d4c767b84fa36fa57158b889daec033ece1fa5f", "filename": "src/librustc_expand/module.rs", "status": "renamed", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fmodule.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_expand%2Fmodule.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fmodule.rs?ref=3796faefb1d22f496514126d3d2b5a87b948ae47", "patch": "@@ -1,8 +1,7 @@\n-use crate::new_sub_parser_from_file;\n-\n use rustc_ast::ast::{self, Attribute, Ident, Mod};\n use rustc_ast::{attr, token};\n use rustc_errors::{struct_span_err, PResult};\n+use rustc_parse::new_sub_parser_from_file;\n use rustc_session::parse::ParseSess;\n use rustc_span::source_map::{FileName, Span};\n use rustc_span::symbol::sym;\n@@ -39,7 +38,7 @@ pub struct ModulePathSuccess {\n     pub ownership: DirectoryOwnership,\n }\n \n-pub fn parse_external_mod(\n+crate fn parse_external_mod(\n     sess: &ParseSess,\n     id: ast::Ident,\n     Directory { mut ownership, path }: Directory,\n@@ -98,7 +97,7 @@ fn error_on_circular_module<'a>(\n     Ok(())\n }\n \n-pub fn push_directory(\n+crate fn push_directory(\n     id: Ident,\n     attrs: &[Attribute],\n     Directory { mut ownership, mut path }: Directory,", "previous_filename": "src/librustc_parse/parser/module.rs"}, {"sha": "bb6793d08aa270dc24200d69cf5cc16e7fd0f4ea", "filename": "src/librustc_parse/parser/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_parse%2Fparser%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3796faefb1d22f496514126d3d2b5a87b948ae47/src%2Flibrustc_parse%2Fparser%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse%2Fparser%2Fmod.rs?ref=3796faefb1d22f496514126d3d2b5a87b948ae47", "patch": "@@ -1,8 +1,6 @@\n pub mod attr;\n mod expr;\n mod item;\n-pub mod module;\n-pub use module::{ModulePath, ModulePathSuccess};\n mod pat;\n mod path;\n mod ty;"}]}