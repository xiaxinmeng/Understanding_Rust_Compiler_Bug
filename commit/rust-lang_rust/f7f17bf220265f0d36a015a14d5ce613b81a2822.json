{"sha": "f7f17bf220265f0d36a015a14d5ce613b81a2822", "node_id": "C_kwDOAAsO6NoAKGY3ZjE3YmYyMjAyNjVmMGQzNmEwMTVhMTRkNWNlNjEzYjgxYTI4MjI", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2022-09-04T09:24:26Z"}, "committer": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2022-10-23T11:43:07Z"}, "message": "Add missing export for the oom strategy symbol", "tree": {"sha": "a13f66e6f967660e3475a875fdc0756c1be78978", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a13f66e6f967660e3475a875fdc0756c1be78978"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7f17bf220265f0d36a015a14d5ce613b81a2822", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGyBAABCgAdFiEEzFQynJm4WzBnfhz8kJzQ0mSDUWsFAmNVKMsACgkQkJzQ0mSD\nUWtz9wv4l4uFjci2a0+ivmtt4rjxZPMEqvxDPewb9Hlc980RA9+1BMZCUDHfkjbl\nbO4zrdY57EthTbL15jERrYROfAQO4Mz5LWk0hWY2jXa4j3EIkjM6CHdEtHWQ8rbk\njVxwl3NHag2gZx2tWqbPJbjmTFaws/5nVifkp1+g5YLsRSBzmzaJm6qNbXHdrvOh\nPiqYKeRuOYAd5s5XtjVJyMMvmEdTc3detOE5WwWPSPV+HL3Mq2tf0xmozbE53KXQ\nLtDyfYJ09nkQZcyIO89iARY5xQQtQTTl5ZMOpS3FkBrhylXJ1vhBhLJM16qGSHQU\nhuB6c1AbPZ5TiX/zvE/m5qSVKqi28Jy1DmPsvJF7F1GLHhY9qznIJVdfJg3pyuMJ\nsMn3ybRgC9iQdjLrIHpp/jPN6LV2aYROyJFtOfXzse7nwPJovJGJnln0Xp9HZxah\nAGggRtj60fiq0Bt/MAu85LEmlPTP/ja6XjQVJpSM8KI9dSltAiJNu0YkLntdQCMW\nurI+8Kc=\n=ERlQ\n-----END PGP SIGNATURE-----", "payload": "tree a13f66e6f967660e3475a875fdc0756c1be78978\nparent e64f1110c062f61746f222059439529a43ccf6dc\nauthor bjorn3 <17426603+bjorn3@users.noreply.github.com> 1662283466 +0000\ncommitter Jakub Ber\u00e1nek <berykubik@gmail.com> 1666525387 +0200\n\nAdd missing export for the oom strategy symbol\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7f17bf220265f0d36a015a14d5ce613b81a2822", "html_url": "https://github.com/rust-lang/rust/commit/f7f17bf220265f0d36a015a14d5ce613b81a2822", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7f17bf220265f0d36a015a14d5ce613b81a2822/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e64f1110c062f61746f222059439529a43ccf6dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/e64f1110c062f61746f222059439529a43ccf6dc", "html_url": "https://github.com/rust-lang/rust/commit/e64f1110c062f61746f222059439529a43ccf6dc"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "c2ecc41601c8c92bdddacb5b6fa592881d7946f3", "filename": "compiler/rustc_codegen_ssa/src/back/symbol_export.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f7f17bf220265f0d36a015a14d5ce613b81a2822/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Fsymbol_export.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7f17bf220265f0d36a015a14d5ce613b81a2822/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Fsymbol_export.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Fsymbol_export.rs?ref=f7f17bf220265f0d36a015a14d5ce613b81a2822", "patch": "@@ -13,7 +13,7 @@ use rustc_middle::ty::query::{ExternProviders, Providers};\n use rustc_middle::ty::subst::{GenericArgKind, SubstsRef};\n use rustc_middle::ty::Instance;\n use rustc_middle::ty::{self, SymbolName, TyCtxt};\n-use rustc_session::config::CrateType;\n+use rustc_session::config::{CrateType, OomStrategy};\n use rustc_target::spec::SanitizerSet;\n \n pub fn threshold(tcx: TyCtxt<'_>) -> SymbolExportLevel {\n@@ -206,6 +206,15 @@ fn exported_symbols_provider_local<'tcx>(\n                 },\n             ));\n         }\n+\n+        symbols.push((\n+            ExportedSymbol::NoDefId(SymbolName::new(tcx, OomStrategy::SYMBOL)),\n+            SymbolExportInfo {\n+                level: SymbolExportLevel::Rust,\n+                kind: SymbolExportKind::Text,\n+                used: false,\n+            },\n+        ));\n     }\n \n     if tcx.sess.instrument_coverage() || tcx.sess.opts.cg.profile_generate.enabled() {"}]}