{"sha": "4401f88688eec9052f292ce3b3b8cb96da2853f2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0MDFmODg2ODhlZWM5MDUyZjI5MmNlM2IzYjhjYjk2ZGEyODUzZjI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-21T23:06:32Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-21T23:06:32Z"}, "message": "auto merge of #13631 : alexcrichton/rust/fix-mk-cross, r=brson\n\nInstead of passing through CC which may have things like ccache and other\r\narguments (when using clang) this commit filters out the necessary arguments\r\nfrom CC to pass the right linker to rustc.\r\n\r\nCloses #13562", "tree": {"sha": "f66b58541ac82dccde60f2bfbec9fbdd9d126971", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f66b58541ac82dccde60f2bfbec9fbdd9d126971"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4401f88688eec9052f292ce3b3b8cb96da2853f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4401f88688eec9052f292ce3b3b8cb96da2853f2", "html_url": "https://github.com/rust-lang/rust/commit/4401f88688eec9052f292ce3b3b8cb96da2853f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4401f88688eec9052f292ce3b3b8cb96da2853f2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "829c00cb09ac093307a6edc5bbca92c4ad9dbda2", "url": "https://api.github.com/repos/rust-lang/rust/commits/829c00cb09ac093307a6edc5bbca92c4ad9dbda2", "html_url": "https://github.com/rust-lang/rust/commit/829c00cb09ac093307a6edc5bbca92c4ad9dbda2"}, {"sha": "80bd17643234239ea556e25a8ff56c2164eb6313", "url": "https://api.github.com/repos/rust-lang/rust/commits/80bd17643234239ea556e25a8ff56c2164eb6313", "html_url": "https://github.com/rust-lang/rust/commit/80bd17643234239ea556e25a8ff56c2164eb6313"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "56864f585f2fe6ad58e338b8a5718302dd49d454", "filename": "mk/platform.mk", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4401f88688eec9052f292ce3b3b8cb96da2853f2/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4401f88688eec9052f292ce3b3b8cb96da2853f2/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=4401f88688eec9052f292ce3b3b8cb96da2853f2", "patch": "@@ -542,14 +542,17 @@ ifdef CFG_CCACHE_BASEDIR\n   export CCACHE_BASEDIR\n endif\n \n+FIND_COMPILER = $(word 1,$(1:ccache=))\n+\n define CFG_MAKE_TOOLCHAIN\n   # Prepend the tools with their prefix if cross compiling\n   ifneq ($(CFG_BUILD),$(1))\n \tCC_$(1)=$(CROSS_PREFIX_$(1))$(CC_$(1))\n \tCXX_$(1)=$(CROSS_PREFIX_$(1))$(CXX_$(1))\n \tCPP_$(1)=$(CROSS_PREFIX_$(1))$(CPP_$(1))\n \tAR_$(1)=$(CROSS_PREFIX_$(1))$(AR_$(1))\n-\tRUSTC_CROSS_FLAGS_$(1)=-C linker=$$(CXX_$(1)) -C ar=$$(AR_$(1)) $(RUSTC_CROSS_FLAGS_$(1))\n+\tRUSTC_CROSS_FLAGS_$(1)=-C linker=$$(call FIND_COMPILER,$$(CXX_$(1))) \\\n+\t    -C ar=$$(call FIND_COMPILER,$$(AR_$(1))) $(RUSTC_CROSS_FLAGS_$(1))\n \n \tRUSTC_FLAGS_$(1)=$$(RUSTC_CROSS_FLAGS_$(1)) $(RUSTC_FLAGS_$(1))\n   endif"}]}