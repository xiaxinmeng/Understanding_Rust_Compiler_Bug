{"sha": "17f7bc86ae4bf5d160ae13552387afb922f75cdc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3ZjdiYzg2YWU0YmY1ZDE2MGFlMTM1NTIzODdhZmI5MjJmNzVjZGM=", "commit": {"author": {"name": "Vytautas Astrauskas", "email": "astrauv@amazon.com", "date": "2020-04-19T22:23:30Z"}, "committer": {"name": "Vytautas Astrauskas", "email": "astrauv@amazon.com", "date": "2020-04-27T21:26:36Z"}, "message": "Fix how a pthread_create function argument is constructed.", "tree": {"sha": "14b56d04d2e3f2fcb94d1003957a9c72d8c1b629", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14b56d04d2e3f2fcb94d1003957a9c72d8c1b629"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/17f7bc86ae4bf5d160ae13552387afb922f75cdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/17f7bc86ae4bf5d160ae13552387afb922f75cdc", "html_url": "https://github.com/rust-lang/rust/commit/17f7bc86ae4bf5d160ae13552387afb922f75cdc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/17f7bc86ae4bf5d160ae13552387afb922f75cdc/comments", "author": null, "committer": null, "parents": [{"sha": "80459bbf774f6238936837ace61fa6c1c95051ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/80459bbf774f6238936837ace61fa6c1c95051ec", "html_url": "https://github.com/rust-lang/rust/commit/80459bbf774f6238936837ace61fa6c1c95051ec"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "ee4369cb412e723dc431e909790b8ff31f089b6a", "filename": "src/shims/thread.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/17f7bc86ae4bf5d160ae13552387afb922f75cdc/src%2Fshims%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/17f7bc86ae4bf5d160ae13552387afb922f75cdc/src%2Fshims%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fthread.rs?ref=17f7bc86ae4bf5d160ae13552387afb922f75cdc", "patch": "@@ -37,11 +37,8 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         let fn_ptr = this.read_scalar(start_routine)?.not_undef()?;\n         let instance = this.memory.get_fn(fn_ptr)?.as_instance()?;\n \n-        let func_arg = match *arg {\n-            rustc_mir::interpret::Operand::Immediate(immediate) => immediate,\n-            _ => unreachable!(),\n-        };\n-        let func_args = [func_arg];\n+        let func_arg = this.read_immediate(arg)?;\n+        let func_args = [*func_arg];\n \n         let ret_place =\n             this.allocate(this.layout_of(this.tcx.types.usize)?, MiriMemoryKind::Machine.into());"}]}