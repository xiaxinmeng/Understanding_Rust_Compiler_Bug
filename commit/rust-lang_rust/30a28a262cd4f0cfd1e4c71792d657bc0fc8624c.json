{"sha": "30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwYTI4YTI2MmNkNGYwY2ZkMWU0YzcxNzkyZDY1N2JjMGZjODYyNGM=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-02-02T02:16:29Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-02-02T02:16:29Z"}, "message": "Make `is_mod_decl` more accommodating\n\nFixes #2403 (I think)", "tree": {"sha": "a42970da998c97e4432b3cb72dc79ab788a7a82a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a42970da998c97e4432b3cb72dc79ab788a7a82a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "html_url": "https://github.com/rust-lang/rust/commit/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c3a422742d75f611275dff8e910898741cb5067", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c3a422742d75f611275dff8e910898741cb5067", "html_url": "https://github.com/rust-lang/rust/commit/7c3a422742d75f611275dff8e910898741cb5067"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "05c0391023175aaad3626b3ab80e8de1e2457909", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "patch": "@@ -294,7 +294,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"rustfmt-nightly\"\n-version = \"0.3.7\"\n+version = \"0.3.8\"\n dependencies = [\n  \"cargo_metadata 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"derive-new 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "a54e1fe482da2e45784c0f4ab0d6a5527bc1e185", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "patch": "@@ -1,7 +1,7 @@\n [package]\n \n name = \"rustfmt-nightly\"\n-version = \"0.3.7\"\n+version = \"0.3.8\"\n authors = [\"Nicholas Cameron <ncameron@mozilla.com>\", \"The Rustfmt developers\"]\n description = \"Tool to find and fix Rust formatting issues\"\n repository = \"https://github.com/rust-lang-nursery/rustfmt\""}, {"sha": "d74d24439d9c433b59b874359764f730ec697793", "filename": "src/codemap.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/src%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/src%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcodemap.rs?ref=30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "patch": "@@ -48,8 +48,8 @@ pub trait LineRangeUtils {\n \n impl SpanUtils for CodeMap {\n     fn span_after(&self, original: Span, needle: &str) -> BytePos {\n-        let snippet = self.span_to_snippet(original).unwrap();\n-        let offset = snippet.find_uncommented(needle).unwrap() + needle.len();\n+        let snippet = self.span_to_snippet(original).expect(\"Bad snippet\");\n+        let offset = snippet.find_uncommented(needle).expect(\"Bad offset\") + needle.len();\n \n         original.lo() + BytePos(offset as u32)\n     }"}, {"sha": "3157597697db6ec8e5810dccbc712bcd975ee897", "filename": "src/visitor.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30a28a262cd4f0cfd1e4c71792d657bc0fc8624c/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=30a28a262cd4f0cfd1e4c71792d657bc0fc8624c", "patch": "@@ -44,10 +44,7 @@ pub fn filter_inline_attrs(attrs: &[ast::Attribute], outer_span: Span) -> Vec<as\n /// Returns true for `mod foo;`, false for `mod foo { .. }`.\n fn is_mod_decl(item: &ast::Item) -> bool {\n     match item.node {\n-        ast::ItemKind::Mod(ref m) => {\n-            !(m.inner.lo() == BytePos(0) && m.inner.hi() == BytePos(0))\n-                && m.inner.hi() != item.span.hi()\n-        }\n+        ast::ItemKind::Mod(ref m) => m.inner.hi() != item.span.hi(),\n         _ => false,\n     }\n }"}]}