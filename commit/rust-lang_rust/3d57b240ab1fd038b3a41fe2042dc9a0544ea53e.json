{"sha": "3d57b240ab1fd038b3a41fe2042dc9a0544ea53e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNkNTdiMjQwYWIxZmQwMzhiM2E0MWZlMjA0MmRjOWEwNTQ0ZWE1M2U=", "commit": {"author": {"name": "Adrien T\u00e9tar", "email": "adri-from-59@hotmail.fr", "date": "2013-11-11T21:17:54Z"}, "committer": {"name": "Adrien T\u00e9tar", "email": "adri-from-59@hotmail.fr", "date": "2013-11-13T08:40:45Z"}, "message": "doc: tidy up makefile rules", "tree": {"sha": "9137abbdd329763f78008499a3f7ab225e44b66d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9137abbdd329763f78008499a3f7ab225e44b66d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e", "html_url": "https://github.com/rust-lang/rust/commit/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e/comments", "author": {"login": "adrientetar", "id": 1250894, "node_id": "MDQ6VXNlcjEyNTA4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1250894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrientetar", "html_url": "https://github.com/adrientetar", "followers_url": "https://api.github.com/users/adrientetar/followers", "following_url": "https://api.github.com/users/adrientetar/following{/other_user}", "gists_url": "https://api.github.com/users/adrientetar/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrientetar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrientetar/subscriptions", "organizations_url": "https://api.github.com/users/adrientetar/orgs", "repos_url": "https://api.github.com/users/adrientetar/repos", "events_url": "https://api.github.com/users/adrientetar/events{/privacy}", "received_events_url": "https://api.github.com/users/adrientetar/received_events", "type": "User", "site_admin": false}, "committer": {"login": "adrientetar", "id": 1250894, "node_id": "MDQ6VXNlcjEyNTA4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1250894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrientetar", "html_url": "https://github.com/adrientetar", "followers_url": "https://api.github.com/users/adrientetar/followers", "following_url": "https://api.github.com/users/adrientetar/following{/other_user}", "gists_url": "https://api.github.com/users/adrientetar/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrientetar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrientetar/subscriptions", "organizations_url": "https://api.github.com/users/adrientetar/orgs", "repos_url": "https://api.github.com/users/adrientetar/repos", "events_url": "https://api.github.com/users/adrientetar/events{/privacy}", "received_events_url": "https://api.github.com/users/adrientetar/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58aa18c8bac34c8679514496a1388547b0dddeb1", "url": "https://api.github.com/repos/rust-lang/rust/commits/58aa18c8bac34c8679514496a1388547b0dddeb1", "html_url": "https://github.com/rust-lang/rust/commit/58aa18c8bac34c8679514496a1388547b0dddeb1"}], "stats": {"total": 112, "additions": 20, "deletions": 92}, "files": [{"sha": "a7ffe928940f53f31dfca348a492d3fa8127f20a", "filename": "mk/docs.mk", "status": "modified", "additions": 20, "deletions": 92, "changes": 112, "blob_url": "https://github.com/rust-lang/rust/blob/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e/mk%2Fdocs.mk", "raw_url": "https://github.com/rust-lang/rust/raw/3d57b240ab1fd038b3a41fe2042dc9a0544ea53e/mk%2Fdocs.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdocs.mk?ref=3d57b240ab1fd038b3a41fe2042dc9a0544ea53e", "patch": "@@ -15,6 +15,10 @@\n DOCS :=\n DOCS_L10N :=\n \n+BASE_DOC_OPTS := --from=markdown --standalone --toc --number-sections --include-before-body=doc/version_info.html\n+HTML_OPTS = $(BASE_DOC_OPTS) --to=html5  --section-divs --css=rust.css --include-in-header=doc/favicon.inc\n+TEX_OPTS = $(BASE_DOC_OPTS) --to=latex\n+EPUB_OPTS = $(BASE_DOC_OPTS) --to=epub\n \n ######################################################################\n # Docs, from pandoc, rustdoc (which runs pandoc), and node\n@@ -49,86 +53,45 @@ doc/rust.html: rust.md doc/version_info.html doc/rust.css doc/manual.inc \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-\t\"$(CFG_PANDOC)\" \\\n-         --standalone --toc \\\n-         --section-divs \\\n-         --number-sections \\\n-         --from=markdown --to=html5 \\\n-         --css=rust.css --include-in-header=doc/manual.inc \\\n-         --include-in-header=doc/favicon.inc \\\n-         --include-before-body=doc/version_info.html \\\n-         --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --include-in-header=doc/manual.inc --output=$@\n \n DOCS += doc/rust.tex\n doc/rust.tex: rust.md doc/version.md\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js $< | \\\n-\t\"$(CFG_PANDOC)\" \\\n-         --standalone --toc \\\n-         --number-sections \\\n-         --include-before-body=doc/version.md \\\n-         --from=markdown --to=latex \\\n-         --output=$@\n+\t$(CFG_PANDOC) $(TEX_OPTS) --output=$@\n \n DOCS += doc/rust.epub\n-doc/rust.epub: rust.md doc/version_info.html doc/rust.css doc/manual.inc\n+doc/rust.epub: rust.md doc/version_info.html doc/rust.css\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-\t\"$(CFG_PANDOC)\" \\\n-         --standalone --toc \\\n-         --section-divs \\\n-         --number-sections \\\n-         --from=markdown --to=epub \\\n-         --include-before-body=doc/version_info.html \\\n-         --output=$@\n+\t$(CFG_PANDOC) $(EPUB_OPTS) --output=$@\n \n DOCS += doc/rustpkg.html\n-doc/rustpkg.html: rustpkg.md doc/version_info.html doc/rust.css doc/manual.inc \\\n+doc/rustpkg.html: rustpkg.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-\t\"$(CFG_PANDOC)\" \\\n-         --standalone --toc \\\n-         --section-divs \\\n-         --number-sections \\\n-         --from=markdown --to=html5 \\\n-         --css=rust.css --include-in-header=doc/manual.inc \\\n-         --include-in-header=doc/favicon.inc \\\n-         --include-before-body=doc/version_info.html \\\n-         --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial.html\n doc/tutorial.html: tutorial.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial.tex\n doc/tutorial.tex: tutorial.md doc/version.md\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js $< | \\\n-\t\"$(CFG_PANDOC)\" \\\n-         --standalone --toc \\\n-         --number-sections \\\n-         --include-before-body=doc/version.md \\\n-         --from=markdown --to=latex \\\n-         --output=$@\n+\t$(CFG_PANDOC) $(TEX_OPTS) --output=$@\n \n DOCS += doc/tutorial.epub\n doc/tutorial.epub: tutorial.md doc/version_info.html doc/rust.css\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=epub \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(EPUB_OPTS) --output=$@\n \n \n DOCS_L10N += doc/l10n/ja/tutorial.html\n@@ -146,84 +109,49 @@ doc/tutorial-macros.html: tutorial-macros.md doc/version_info.html doc/rust.css\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-container.html\n doc/tutorial-container.html: tutorial-container.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-ffi.html\n doc/tutorial-ffi.html: tutorial-ffi.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-borrowed-ptr.html\n doc/tutorial-borrowed-ptr.html: tutorial-borrowed-ptr.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-tasks.html\n doc/tutorial-tasks.html: tutorial-tasks.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-conditions.html\n doc/tutorial-conditions.html: tutorial-conditions.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n DOCS += doc/tutorial-rustpkg.html\n doc/tutorial-rustpkg.html: tutorial-rustpkg.md doc/version_info.html doc/rust.css \\\n \t\t\t\tdoc/favicon.inc\n \t@$(call E, pandoc: $@)\n \t$(Q)$(CFG_NODE) $(S)doc/prep.js --highlight $< | \\\n-          $(CFG_PANDOC) --standalone --toc \\\n-           --section-divs --number-sections \\\n-           --from=markdown --to=html5 --css=rust.css \\\n-           --include-in-header=doc/favicon.inc \\\n-           --include-before-body=doc/version_info.html \\\n-           --output=$@\n+\t$(CFG_PANDOC) $(HTML_OPTS) --output=$@\n \n   ifeq ($(CFG_PDFLATEX),)\n     $(info cfg: no pdflatex found, omitting doc/rust.pdf)"}]}