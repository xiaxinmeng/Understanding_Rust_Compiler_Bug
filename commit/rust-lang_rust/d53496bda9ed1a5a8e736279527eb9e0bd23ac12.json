{"sha": "d53496bda9ed1a5a8e736279527eb9e0bd23ac12", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1MzQ5NmJkYTllZDFhNWE4ZTczNjI3OTUyN2ViOWUwYmQyM2FjMTI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-06T02:41:20Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-06T02:41:20Z"}, "message": "Auto merge of #29653 - alexcrichton:fix-distcheck-again-zomg, r=brson\n\nThe recent change of libdir on windows was accidentally not propagated to\n`make dist` and related commands. This commit touches that up!\n\nCloses #29640", "tree": {"sha": "6adf7ad84e007cff0e13a980e7604d2d4874a0cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6adf7ad84e007cff0e13a980e7604d2d4874a0cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d53496bda9ed1a5a8e736279527eb9e0bd23ac12", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d53496bda9ed1a5a8e736279527eb9e0bd23ac12", "html_url": "https://github.com/rust-lang/rust/commit/d53496bda9ed1a5a8e736279527eb9e0bd23ac12", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d53496bda9ed1a5a8e736279527eb9e0bd23ac12/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41308a05203c342ae0899d80b1bc3657de7fec8b", "url": "https://api.github.com/repos/rust-lang/rust/commits/41308a05203c342ae0899d80b1bc3657de7fec8b", "html_url": "https://github.com/rust-lang/rust/commit/41308a05203c342ae0899d80b1bc3657de7fec8b"}, {"sha": "3d619d77b0bf96496c25ee6ba87625d8abdaa597", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d619d77b0bf96496c25ee6ba87625d8abdaa597", "html_url": "https://github.com/rust-lang/rust/commit/3d619d77b0bf96496c25ee6ba87625d8abdaa597"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "8320eea8cf9451dddc268660096792c8bf2b5b3f", "filename": "mk/prepare.mk", "status": "modified", "additions": 14, "deletions": 9, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/d53496bda9ed1a5a8e736279527eb9e0bd23ac12/mk%2Fprepare.mk", "raw_url": "https://github.com/rust-lang/rust/raw/d53496bda9ed1a5a8e736279527eb9e0bd23ac12/mk%2Fprepare.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fprepare.mk?ref=d53496bda9ed1a5a8e736279527eb9e0bd23ac12", "patch": "@@ -90,6 +90,8 @@ PREPARE_TOOLS = $(filter-out compiletest rustbook error-index-generator, $(TOOLS\n # $(3) is host\n # $(4) tag\n define DEF_PREPARE_HOST_TOOL\n+prepare-host-tool-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_SOURCE_BIN_DIR=$$(HBIN$(2)_H_$(3))\n prepare-host-tool-$(1)-$(2)-$(3)-$(4): prepare-maybe-clean-$(4) \\\n                                   $$(foreach dep,$$(TOOL_DEPS_$(1)),prepare-host-lib-$$(dep)-$(2)-$(3)-$(4)) \\\n                                   $$(HBIN$(2)_H_$(3))/$(1)$$(X_$(3)) \\\n@@ -110,8 +112,10 @@ endef\n # $(3) is host\n # $(4) tag\n define DEF_PREPARE_HOST_LIB\n-prepare-host-lib-$(1)-$(2)-$(3)-$(4): PREPARE_WORKING_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_LIB_DIR)\n-prepare-host-lib-$(1)-$(2)-$(3)-$(4): PREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)\n+prepare-host-lib-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_WORKING_SOURCE_LIB_DIR=$$(HLIB$(2)_H_$(3))\n+prepare-host-lib-$(1)-$(2)-$(3)-$(4): \\\n+\tPREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_DIR)/$$(notdir $$(HLIB$(2)_H_$(3)))\n prepare-host-lib-$(1)-$(2)-$(3)-$(4): prepare-maybe-clean-$(4) \\\n                                  $$(foreach dep,$$(RUST_DEPS_$(1)),prepare-host-lib-$$(dep)-$(2)-$(3)-$(4)) \\\n                                  $$(HLIB$(2)_H_$(3))/stamp.$(1) \\\n@@ -129,10 +133,14 @@ endef\n # $(4) tag\n define DEF_PREPARE_TARGET_N\n # Rebind PREPARE_*_LIB_DIR to point to rustlib, then install the libs for the targets\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_WORKING_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_LIB_DIR)/rustlib/$(2)/lib\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(2)/lib\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_SOURCE_BIN_DIR=$$(PREPARE_SOURCE_LIB_DIR)/rustlib/$(3)/bin\n-prepare-target-$(2)-host-$(3)-$(1)-$(4): PREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(3)/bin\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_WORKING_SOURCE_LIB_DIR=$$(TLIB$(1)_T_$(2)_H_$(3))\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_WORKING_DEST_LIB_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(2)/lib\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_SOURCE_BIN_DIR=$$(TBIN$(1)_T_$(2)_H_$(3))\n+prepare-target-$(2)-host-$(3)-$(1)-$(4): \\\n+\tPREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_LIB_DIR)/rustlib/$(3)/bin\n prepare-target-$(2)-host-$(3)-$(1)-$(4): prepare-maybe-clean-$(4) \\\n         $$(foreach crate,$$(TARGET_CRATES), \\\n           $$(TLIB$(1)_T_$(2)_H_$(3))/stamp.$$(crate)) \\\n@@ -185,9 +193,6 @@ INSTALL_DEBUGGER_SCRIPT_COMMANDS=$(if $(findstring windows,$(1)),\\\n \n define DEF_PREPARE\n \n-prepare-base-$(1)-%: PREPARE_SOURCE_DIR=$$(PREPARE_HOST)/stage$$(PREPARE_STAGE)\n-prepare-base-$(1)-%: PREPARE_SOURCE_BIN_DIR=$$(PREPARE_SOURCE_DIR)/bin\n-prepare-base-$(1)-%: PREPARE_SOURCE_LIB_DIR=$$(PREPARE_SOURCE_DIR)/$$(CFG_LIBDIR_RELATIVE)\n prepare-base-$(1)-%: PREPARE_SOURCE_MAN_DIR=$$(S)/man\n prepare-base-$(1)-%: PREPARE_DEST_BIN_DIR=$$(PREPARE_DEST_DIR)/bin\n prepare-base-$(1)-%: PREPARE_DEST_LIB_DIR=$$(PREPARE_DEST_DIR)/$$(CFG_LIBDIR_RELATIVE)"}]}