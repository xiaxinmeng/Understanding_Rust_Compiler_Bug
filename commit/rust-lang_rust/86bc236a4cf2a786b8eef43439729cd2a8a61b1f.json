{"sha": "86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2YmMyMzZhNGNmMmE3ODZiOGVlZjQzNDM5NzI5Y2QyYThhNjFiMWY=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:35:49Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:35:49Z"}, "message": "Add more assert!() tests for non_fmt_panics.", "tree": {"sha": "1bb9b7510dfd86c60f4075b71ea670c25c9b30e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1bb9b7510dfd86c60f4075b71ea670c25c9b30e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "html_url": "https://github.com/rust-lang/rust/commit/86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82d530577b3366cc62e175771e85139590275a55", "url": "https://api.github.com/repos/rust-lang/rust/commits/82d530577b3366cc62e175771e85139590275a55", "html_url": "https://github.com/rust-lang/rust/commit/82d530577b3366cc62e175771e85139590275a55"}], "stats": {"total": 64, "additions": 60, "deletions": 4}, "files": [{"sha": "d226f4129aa826efd26360cc79fd940cb127a9fa", "filename": "src/test/ui/non-fmt-panic.fixed", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed?ref=86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "patch": "@@ -65,16 +65,20 @@ fn main() {\n \n fn a<T: Send + 'static>(v: T) {\n     std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+    assert!(false, v); //~ WARN panic message is not a string literal\n }\n \n fn b<T: std::fmt::Debug + Send + 'static>(v: T) {\n     std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+    assert!(false, \"{:?}\", v); //~ WARN panic message is not a string literal\n }\n \n fn c<T: std::fmt::Display + Send + 'static>(v: T) {\n     std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+    assert!(false, \"{}\", v); //~ WARN panic message is not a string literal\n }\n \n fn d<T: std::fmt::Display + std::fmt::Debug + Send + 'static>(v: T) {\n     std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+    assert!(false, \"{}\", v); //~ WARN panic message is not a string literal\n }"}, {"sha": "2ffd7638ae0a04fa7e2e5179a1dd5fcbd29cf4b6", "filename": "src/test/ui/non-fmt-panic.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.rs?ref=86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "patch": "@@ -65,16 +65,20 @@ fn main() {\n \n fn a<T: Send + 'static>(v: T) {\n     panic!(v); //~ WARN panic message is not a string literal\n+    assert!(false, v); //~ WARN panic message is not a string literal\n }\n \n fn b<T: std::fmt::Debug + Send + 'static>(v: T) {\n     panic!(v); //~ WARN panic message is not a string literal\n+    assert!(false, v); //~ WARN panic message is not a string literal\n }\n \n fn c<T: std::fmt::Display + Send + 'static>(v: T) {\n     panic!(v); //~ WARN panic message is not a string literal\n+    assert!(false, v); //~ WARN panic message is not a string literal\n }\n \n fn d<T: std::fmt::Display + std::fmt::Debug + Send + 'static>(v: T) {\n     panic!(v); //~ WARN panic message is not a string literal\n+    assert!(false, v); //~ WARN panic message is not a string literal\n }"}, {"sha": "7b5e0ee324b393903b8ee692a50a807d789b6b1e", "filename": "src/test/ui/non-fmt-panic.stderr", "status": "modified", "additions": 52, "deletions": 4, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/86bc236a4cf2a786b8eef43439729cd2a8a61b1f/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr?ref=86bc236a4cf2a786b8eef43439729cd2a8a61b1f", "patch": "@@ -323,7 +323,16 @@ LL |     panic!(v);\n    = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n \n warning: panic message is not a string literal\n-  --> $DIR/non-fmt-panic.rs:71:12\n+  --> $DIR/non-fmt-panic.rs:68:20\n+   |\n+LL |     assert!(false, v);\n+   |                    ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:72:12\n    |\n LL |     panic!(v);\n    |            ^\n@@ -340,7 +349,20 @@ LL |     std::panic::panic_any(v);\n    |     ~~~~~~~~~~~~~~~~~~~~~\n \n warning: panic message is not a string literal\n-  --> $DIR/non-fmt-panic.rs:75:12\n+  --> $DIR/non-fmt-panic.rs:73:20\n+   |\n+LL |     assert!(false, v);\n+   |                    ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{:?}\" format string to use the Debug implementation of `T`\n+   |\n+LL |     assert!(false, \"{:?}\", v);\n+   |                    +++++++\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:77:12\n    |\n LL |     panic!(v);\n    |            ^\n@@ -357,7 +379,20 @@ LL |     std::panic::panic_any(v);\n    |     ~~~~~~~~~~~~~~~~~~~~~\n \n warning: panic message is not a string literal\n-  --> $DIR/non-fmt-panic.rs:79:12\n+  --> $DIR/non-fmt-panic.rs:78:20\n+   |\n+LL |     assert!(false, v);\n+   |                    ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{}\" format string to Display the message\n+   |\n+LL |     assert!(false, \"{}\", v);\n+   |                    +++++\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:82:12\n    |\n LL |     panic!(v);\n    |            ^\n@@ -373,5 +408,18 @@ help: or use std::panic::panic_any instead\n LL |     std::panic::panic_any(v);\n    |     ~~~~~~~~~~~~~~~~~~~~~\n \n-warning: 26 warnings emitted\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:83:20\n+   |\n+LL |     assert!(false, v);\n+   |                    ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{}\" format string to Display the message\n+   |\n+LL |     assert!(false, \"{}\", v);\n+   |                    +++++\n+\n+warning: 30 warnings emitted\n "}]}