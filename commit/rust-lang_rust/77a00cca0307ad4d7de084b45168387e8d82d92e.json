{"sha": "77a00cca0307ad4d7de084b45168387e8d82d92e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3YTAwY2NhMDMwN2FkNGQ3ZGUwODRiNDUxNjgzODdlOGQ4MmQ5MmU=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-07-09T13:14:10Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-07-19T05:55:25Z"}, "message": "debuginfo: Fixes related to changed memory layout of unique allocations", "tree": {"sha": "0655e381865f38b3a89054c4f88b535e0116896d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0655e381865f38b3a89054c4f88b535e0116896d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77a00cca0307ad4d7de084b45168387e8d82d92e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77a00cca0307ad4d7de084b45168387e8d82d92e", "html_url": "https://github.com/rust-lang/rust/commit/77a00cca0307ad4d7de084b45168387e8d82d92e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77a00cca0307ad4d7de084b45168387e8d82d92e/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b06df4e35bbde6975575cd137e6f5f65d475d86", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b06df4e35bbde6975575cd137e6f5f65d475d86", "html_url": "https://github.com/rust-lang/rust/commit/3b06df4e35bbde6975575cd137e6f5f65d475d86"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "8cabd5955323bfa81a2111733e7b3ff0fdd3c23d", "filename": "src/librustc/middle/trans/debuginfo.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs?ref=77a00cca0307ad4d7de084b45168387e8d82d92e", "patch": "@@ -568,7 +568,6 @@ fn create_enum_md(cx: &mut CrateContext,\n     assert!(Type::enum_discrim(cx) == cx.int_type);\n     let discriminant_type_md = get_or_create_type(cx, ty::mk_int(), span);\n \n-\n     let variants : &[ty::VariantInfo] = *ty::enum_variants(cx.tcx, enum_def_id);\n \n     let enumerators : ~[(~str, int)] = variants\n@@ -971,8 +970,7 @@ fn get_or_create_type(cx: &mut CrateContext, t: ty::t, span: span) -> DIType {\n         ty::ty_enum(def_id, ref substs) => {\n             create_enum_md(cx, t, def_id, substs, span)\n         },\n-        ty::ty_box(ref mt) |\n-        ty::ty_uniq(ref mt) => {\n+        ty::ty_box(ref mt) => {\n             let content_llvm_type = type_of::type_of(cx, mt.ty);\n             let content_type_metadata = get_or_create_type(cx, mt.ty, span);\n \n@@ -998,7 +996,8 @@ fn get_or_create_type(cx: &mut CrateContext, t: ty::t, span: span) -> DIType {\n                 }\n             }\n         },\n-        ty::ty_ptr(ref mt) |\n+        ty::ty_uniq(ref mt)    |\n+        ty::ty_ptr(ref mt)     |\n         ty::ty_rptr(_, ref mt) => {\n             let pointee = get_or_create_type(cx, mt.ty, span);\n             create_pointer_type(cx, t, span, pointee)"}, {"sha": "4e10bf83bcb70803a8a133898f6f4417f6a059b2", "filename": "src/test/debug-info/box.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Ftest%2Fdebug-info%2Fbox.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Ftest%2Fdebug-info%2Fbox.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Fbox.rs?ref=77a00cca0307ad4d7de084b45168387e8d82d92e", "patch": "@@ -13,9 +13,9 @@\n // debugger:break _zzz\n // debugger:run\n // debugger:finish\n-// debugger:print a->val\n+// debugger:print *a\n // check:$1 = 1\n-// debugger:print b->val\n+// debugger:print *b\n // check:$2 = {2, 3.5}\n // debugger:print c->val\n // check:$3 = 4"}, {"sha": "d06fcbbbab34b4fec11b0fa66e6a41616a6a0c3e", "filename": "src/test/debug-info/boxed-struct.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Ftest%2Fdebug-info%2Fboxed-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77a00cca0307ad4d7de084b45168387e8d82d92e/src%2Ftest%2Fdebug-info%2Fboxed-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Fboxed-struct.rs?ref=77a00cca0307ad4d7de084b45168387e8d82d92e", "patch": "@@ -13,13 +13,13 @@\n // debugger:run\n // debugger:finish\n \n-// debugger:print unique->val\n+// debugger:print *unique\n // check:$1 = {x = 99, y = 999, z = 9999, w = 99999}\n \n // debugger:print managed->val\n // check:$2 = {x = 88, y = 888, z = 8888, w = 88888}\n \n-// debugger:print unique_dtor->val\n+// debugger:print *unique_dtor\n // check:$3 = {x = 77, y = 777, z = 7777, w = 77777}\n \n // debugger:print managed_dtor->val"}]}