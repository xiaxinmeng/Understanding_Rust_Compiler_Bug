{"sha": "f0fdaba04ea7474cd1f66264ef4edb3485a95864", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwZmRhYmEwNGVhNzQ3NGNkMWY2NjI2NGVmNGVkYjM0ODVhOTU4NjQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-05-15T20:18:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-05-15T20:18:13Z"}, "message": "Auto merge of #50767 - oli-obk:rls_clippy, r=kennytm\n\nDon't inject clippy into the rls anymore\n\nr? @kennytm\n\nsorry about breaking nightlies.\n\nThe issue is that the `[patch.crates-io]` doesn't work if the versions differ. So every time we update clippy, we can only update it to the verison that rls is depending on.\n\nI'm disabling the injection of clippy into rls for now. I'm not sure how to do this properly. We could\n\n* add a version check, so rls only builds clippy if its dependency clippy is the same as the submodule clippy\n* do something crazy like auto-patching the Cargo.toml of the rls tool repo to just use a path dependency on clippy\n* build crates-io clippy instead of submodule clippy and gate clippy injection on that\n    * that's somewhat automatic, and is essentially what is necessary right now, but done manually\n* make clippy 0.1.* instead of 0.0.* and update patch versions for nightly updates and minor version updates for `clippy_lints` api changes.\n    * not sure how semver-great this is", "tree": {"sha": "d669bc09d6c2587a0e92263362c4a9019000a996", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d669bc09d6c2587a0e92263362c4a9019000a996"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f0fdaba04ea7474cd1f66264ef4edb3485a95864", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f0fdaba04ea7474cd1f66264ef4edb3485a95864", "html_url": "https://github.com/rust-lang/rust/commit/f0fdaba04ea7474cd1f66264ef4edb3485a95864", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f0fdaba04ea7474cd1f66264ef4edb3485a95864/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "27acb9b3c033e1dd74cc72310a5a346527d3e704", "url": "https://api.github.com/repos/rust-lang/rust/commits/27acb9b3c033e1dd74cc72310a5a346527d3e704", "html_url": "https://github.com/rust-lang/rust/commit/27acb9b3c033e1dd74cc72310a5a346527d3e704"}, {"sha": "0370c388956e0cc8c5ef50478e1a03b39531e65b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0370c388956e0cc8c5ef50478e1a03b39531e65b", "html_url": "https://github.com/rust-lang/rust/commit/0370c388956e0cc8c5ef50478e1a03b39531e65b"}], "stats": {"total": 9, "additions": 0, "deletions": 9}, "files": [{"sha": "4b6e266f1e55c5ec35c60fc1370be789a1b97740", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f0fdaba04ea7474cd1f66264ef4edb3485a95864/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0fdaba04ea7474cd1f66264ef4edb3485a95864/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=f0fdaba04ea7474cd1f66264ef4edb3485a95864", "patch": "@@ -556,15 +556,6 @@ tool_extended!((self, builder),\n     };\n     Miri, miri, \"src/tools/miri\", \"miri\", {};\n     Rls, rls, \"src/tools/rls\", \"rls\", {\n-        let clippy = builder.ensure(Clippy {\n-            compiler: self.compiler,\n-            target: self.target,\n-            extra_features: Vec::new(),\n-        });\n-        let channel = &builder.config.channel;\n-        if clippy.is_some() && channel != \"stable\" && channel != \"beta\" {\n-            self.extra_features.push(\"clippy\".to_owned());\n-        }\n         builder.ensure(native::Openssl {\n             target: self.target,\n         });"}]}