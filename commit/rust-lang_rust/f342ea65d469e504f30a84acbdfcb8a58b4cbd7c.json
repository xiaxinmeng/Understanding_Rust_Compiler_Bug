{"sha": "f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzNDJlYTY1ZDQ2OWU1MDRmMzBhODRhY2JkZmNiOGE1OGI0Y2JkN2M=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-12T09:29:00Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-12T09:29:00Z"}, "message": "Auto merge of #4198 - matthiaskrgr:rustup_8, r=flip1995\n\nrustup\n\nchangelog: none\n\ncc @lzutao\n\nr? @phansch", "tree": {"sha": "1215a2c4502c286da40b41d59dbb364afa9d983c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1215a2c4502c286da40b41d59dbb364afa9d983c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "html_url": "https://github.com/rust-lang/rust/commit/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba1702a05fb7f787bf070538eafb13ecf7280e1d", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba1702a05fb7f787bf070538eafb13ecf7280e1d", "html_url": "https://github.com/rust-lang/rust/commit/ba1702a05fb7f787bf070538eafb13ecf7280e1d"}, {"sha": "7c91fb8ded3792faa14fdb41fae2ab73b015cbcb", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c91fb8ded3792faa14fdb41fae2ab73b015cbcb", "html_url": "https://github.com/rust-lang/rust/commit/7c91fb8ded3792faa14fdb41fae2ab73b015cbcb"}], "stats": {"total": 64, "additions": 24, "deletions": 40}, "files": [{"sha": "aed1142d9aea1fc395fa66bf749da4a397fb8e6e", "filename": "clippy_lints/src/format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -92,7 +92,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UselessFormat {\n     }\n }\n \n-fn span_useless_format<'a, 'tcx: 'a, T: LintContext<'tcx>>(cx: &'a T, span: Span, help: &str, mut sugg: String) {\n+fn span_useless_format<T: LintContext>(cx: &T, span: Span, help: &str, mut sugg: String) {\n     let to_replace = span.source_callsite();\n \n     // The callsite span contains the statement semicolon for some reason."}, {"sha": "5aaa279941e7bed214355be480c21cb9938cf390", "filename": "clippy_lints/src/non_copy_const.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_copy_const.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -12,7 +12,7 @@ use rustc::ty::{Ty, TypeFlags};\n use rustc::{declare_lint_pass, declare_tool_lint};\n use rustc_errors::Applicability;\n use rustc_typeck::hir_ty_to_ty;\n-use syntax_pos::{Span, DUMMY_SP};\n+use syntax_pos::{InnerSpan, Span, DUMMY_SP};\n \n use crate::utils::{in_constant, in_macro_or_desugar, is_copy, span_lint_and_then};\n \n@@ -123,7 +123,7 @@ fn verify_ty_bound<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>, source: S\n         }\n         match source {\n             Source::Item { .. } => {\n-                let const_kw_span = span.from_inner_byte_pos(0, 5);\n+                let const_kw_span = span.from_inner(InnerSpan::new(0, 5));\n                 db.span_suggestion(\n                     const_kw_span,\n                     \"make this a static item\","}, {"sha": "a1bcc43d8ba277ed0b1d23bda3664d6a4b421811", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -1120,7 +1120,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Casts {\n             if let ExprKind::Lit(ref lit) = ex.node {\n                 use syntax::ast::{LitIntType, LitKind};\n                 if let LitKind::Int(n, _) = lit.node {\n-                    if cast_to.is_fp() {\n+                    if cast_to.is_floating_point() {\n                         let from_nbits = 128 - n.leading_zeros();\n                         let to_nbits = fp_ty_mantissa_nbits(cast_to);\n                         if from_nbits != 0 && to_nbits != 0 && from_nbits <= to_nbits {"}, {"sha": "6210cebfe9a0385710cf526f1bf9e19a58c59e86", "filename": "clippy_lints/src/utils/diagnostics.rs", "status": "modified", "additions": 6, "deletions": 17, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fdiagnostics.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -48,7 +48,7 @@ impl<'a> DiagnosticWrapper<'a> {\n /// 17 |     std::mem::forget(seven);\n ///    |     ^^^^^^^^^^^^^^^^^^^^^^^\n /// ```\n-pub fn span_lint<'a, T: LintContext<'a>>(cx: &T, lint: &'static Lint, sp: impl Into<MultiSpan>, msg: &str) {\n+pub fn span_lint<T: LintContext>(cx: &T, lint: &'static Lint, sp: impl Into<MultiSpan>, msg: &str) {\n     DiagnosticWrapper(cx.struct_span_lint(lint, sp, msg)).docs_link(lint);\n }\n \n@@ -70,13 +70,7 @@ pub fn span_lint<'a, T: LintContext<'a>>(cx: &T, lint: &'static Lint, sp: impl I\n ///    |\n ///    = help: Consider using `std::f64::NAN` if you would like a constant representing NaN\n /// ```\n-pub fn span_help_and_lint<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n-    cx: &'a T,\n-    lint: &'static Lint,\n-    span: Span,\n-    msg: &str,\n-    help: &str,\n-) {\n+pub fn span_help_and_lint<'a, T: LintContext>(cx: &'a T, lint: &'static Lint, span: Span, msg: &str, help: &str) {\n     let mut db = DiagnosticWrapper(cx.struct_span_lint(lint, span, msg));\n     db.0.help(help);\n     db.docs_link(lint);\n@@ -103,7 +97,7 @@ pub fn span_help_and_lint<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n /// 10 |     forget(&SomeStruct);\n ///    |            ^^^^^^^^^^^\n /// ```\n-pub fn span_note_and_lint<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n+pub fn span_note_and_lint<'a, T: LintContext>(\n     cx: &'a T,\n     lint: &'static Lint,\n     span: Span,\n@@ -120,13 +114,8 @@ pub fn span_note_and_lint<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n     db.docs_link(lint);\n }\n \n-pub fn span_lint_and_then<'a, 'tcx: 'a, T: LintContext<'tcx>, F>(\n-    cx: &'a T,\n-    lint: &'static Lint,\n-    sp: Span,\n-    msg: &str,\n-    f: F,\n-) where\n+pub fn span_lint_and_then<'a, T: LintContext, F>(cx: &'a T, lint: &'static Lint, sp: Span, msg: &str, f: F)\n+where\n     F: for<'b> FnOnce(&mut DiagnosticBuilder<'b>),\n {\n     let mut db = DiagnosticWrapper(cx.struct_span_lint(lint, sp, msg));\n@@ -166,7 +155,7 @@ pub fn span_lint_hir_and_then(\n ///     |\n ///     = note: `-D fold-any` implied by `-D warnings`\n /// ```\n-pub fn span_lint_and_sugg<'a, 'tcx: 'a, T: LintContext<'tcx>>(\n+pub fn span_lint_and_sugg<'a, T: LintContext>(\n     cx: &'a T,\n     lint: &'static Lint,\n     sp: Span,"}, {"sha": "ae5c430f133fb387cd1b3193e2d2faa5e4a5cdb0", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -114,7 +114,7 @@ pub fn in_macro(span: Span) -> bool {\n // sources that the user has no control over.\n // For some reason these attributes don't have any expansion info on them, so\n // we have to check it this way until there is a better way.\n-pub fn is_present_in_source<'a, T: LintContext<'a>>(cx: &T, span: Span) -> bool {\n+pub fn is_present_in_source<T: LintContext>(cx: &T, span: Span) -> bool {\n     if let Some(snippet) = snippet_opt(cx, span) {\n         if snippet.is_empty() {\n             return false;\n@@ -455,7 +455,7 @@ pub fn contains_name(name: Name, expr: &Expr) -> bool {\n /// ```rust,ignore\n /// snippet(cx, expr.span, \"..\")\n /// ```\n-pub fn snippet<'a, 'b, T: LintContext<'b>>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n+pub fn snippet<'a, T: LintContext>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n     snippet_opt(cx, span).map_or_else(|| Cow::Borrowed(default), From::from)\n }\n \n@@ -465,7 +465,7 @@ pub fn snippet<'a, 'b, T: LintContext<'b>>(cx: &T, span: Span, default: &'a str)\n /// - If the span is inside a macro, change the applicability level to `MaybeIncorrect`.\n /// - If the default value is used and the applicability level is `MachineApplicable`, change it to\n /// `HasPlaceholders`\n-pub fn snippet_with_applicability<'a, 'b, T: LintContext<'b>>(\n+pub fn snippet_with_applicability<'a, T: LintContext>(\n     cx: &T,\n     span: Span,\n     default: &'a str,\n@@ -487,12 +487,12 @@ pub fn snippet_with_applicability<'a, 'b, T: LintContext<'b>>(\n \n /// Same as `snippet`, but should only be used when it's clear that the input span is\n /// not a macro argument.\n-pub fn snippet_with_macro_callsite<'a, 'b, T: LintContext<'b>>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n+pub fn snippet_with_macro_callsite<'a, T: LintContext>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n     snippet(cx, span.source_callsite(), default)\n }\n \n /// Converts a span to a code snippet. Returns `None` if not available.\n-pub fn snippet_opt<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Option<String> {\n+pub fn snippet_opt<T: LintContext>(cx: &T, span: Span) -> Option<String> {\n     cx.sess().source_map().span_to_snippet(span).ok()\n }\n \n@@ -506,14 +506,14 @@ pub fn snippet_opt<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Option<String>\n /// ```rust,ignore\n /// snippet_block(cx, expr.span, \"..\")\n /// ```\n-pub fn snippet_block<'a, 'b, T: LintContext<'b>>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n+pub fn snippet_block<'a, T: LintContext>(cx: &T, span: Span, default: &'a str) -> Cow<'a, str> {\n     let snip = snippet(cx, span, default);\n     trim_multiline(snip, true)\n }\n \n /// Same as `snippet_block`, but adapts the applicability level by the rules of\n /// `snippet_with_applicabiliy`.\n-pub fn snippet_block_with_applicability<'a, 'b, T: LintContext<'b>>(\n+pub fn snippet_block_with_applicability<'a, T: LintContext>(\n     cx: &T,\n     span: Span,\n     default: &'a str,\n@@ -524,7 +524,7 @@ pub fn snippet_block_with_applicability<'a, 'b, T: LintContext<'b>>(\n }\n \n /// Returns a new Span that covers the full last line of the given Span\n-pub fn last_line_of_span<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Span {\n+pub fn last_line_of_span<T: LintContext>(cx: &T, span: Span) -> Span {\n     let source_map_and_line = cx.sess().source_map().lookup_line(span.lo()).unwrap();\n     let line_no = source_map_and_line.line;\n     let line_start = &source_map_and_line.sf.lines[line_no];\n@@ -533,12 +533,7 @@ pub fn last_line_of_span<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Span {\n \n /// Like `snippet_block`, but add braces if the expr is not an `ExprKind::Block`.\n /// Also takes an `Option<String>` which can be put inside the braces.\n-pub fn expr_block<'a, 'b, T: LintContext<'b>>(\n-    cx: &T,\n-    expr: &Expr,\n-    option: Option<String>,\n-    default: &'a str,\n-) -> Cow<'a, str> {\n+pub fn expr_block<'a, T: LintContext>(cx: &T, expr: &Expr, option: Option<String>, default: &'a str) -> Cow<'a, str> {\n     let code = snippet_block(cx, expr.span, default);\n     let string = option.unwrap_or_default();\n     if in_macro_or_desugar(expr.span) {"}, {"sha": "70286dc95a3bcb6ff3c00755ebcbfcfd78eeccd3", "filename": "clippy_lints/src/utils/sugg.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fsugg.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -480,7 +480,7 @@ fn astbinop2assignop(op: ast::BinOp) -> AssocOp {\n \n /// Returns the indentation before `span` if there are nothing but `[ \\t]`\n /// before it on its line.\n-fn indentation<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Option<String> {\n+fn indentation<T: LintContext>(cx: &T, span: Span) -> Option<String> {\n     let lo = cx.sess().source_map().lookup_char_pos(span.lo());\n     if let Some(line) = lo.file.get_line(lo.line - 1 /* line numbers in `Loc` are 1-based */) {\n         if let Some((pos, _)) = line.char_indices().find(|&(_, c)| c != ' ' && c != '\\t') {\n@@ -499,7 +499,7 @@ fn indentation<'a, T: LintContext<'a>>(cx: &T, span: Span) -> Option<String> {\n }\n \n /// Convenience extension trait for `DiagnosticBuilder`.\n-pub trait DiagnosticBuilderExt<'a, T: LintContext<'a>> {\n+pub trait DiagnosticBuilderExt<'a, T: LintContext> {\n     /// Suggests to add an attribute to an item.\n     ///\n     /// Correctly handles indentation of the attribute and item.\n@@ -546,7 +546,7 @@ pub trait DiagnosticBuilderExt<'a, T: LintContext<'a>> {\n     fn suggest_remove_item(&mut self, cx: &T, item: Span, msg: &str, applicability: Applicability);\n }\n \n-impl<'a, 'b, 'c, T: LintContext<'c>> DiagnosticBuilderExt<'c, T> for rustc_errors::DiagnosticBuilder<'b> {\n+impl<'a, 'b, 'c, T: LintContext> DiagnosticBuilderExt<'c, T> for rustc_errors::DiagnosticBuilder<'b> {\n     fn suggest_item_with_attr<D: Display + ?Sized>(\n         &mut self,\n         cx: &T,"}, {"sha": "869e532eea6a1b6f4fe30a7f26729c169362d860", "filename": "clippy_lints/src/write.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f342ea65d469e504f30a84acbdfcb8a58b4cbd7c/clippy_lints%2Fsrc%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fwrite.rs?ref=f342ea65d469e504f30a84acbdfcb8a58b4cbd7c", "patch": "@@ -6,7 +6,7 @@ use std::borrow::Cow;\n use syntax::ast::*;\n use syntax::parse::{parser, token};\n use syntax::tokenstream::TokenStream;\n-use syntax_pos::{symbol::Symbol, BytePos, Span};\n+use syntax_pos::{BytePos, Span};\n \n declare_clippy_lint! {\n     /// **What it does:** This lint warns when you use `println!(\"\")` to\n@@ -418,7 +418,7 @@ fn check_tts<'a>(cx: &EarlyContext<'a>, tts: &TokenStream, is_write: bool) -> (O\n                             match arg.position {\n                                 ArgumentImplicitlyIs(_) | ArgumentIs(_) => {},\n                                 ArgumentNamed(name) => {\n-                                    if *p == Symbol::intern(name) {\n+                                    if *p == name {\n                                         seen = true;\n                                         all_simple &= arg.format == SIMPLE;\n                                     }"}]}