{"sha": "f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxZjdmMmY1MDhiNzhkZWZjZjlmMjJmMWMzNTM0MmMyNzc2NWExZjA=", "commit": {"author": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2021-06-09T23:51:58Z"}, "committer": {"name": "Jeremy Fitzhardinge", "email": "jsgf@fb.com", "date": "2021-06-22T00:22:35Z"}, "message": "make -Zno-codegen TRACKED_NO_CRATE_HASH", "tree": {"sha": "cee9512e8c1ca07c2c462afab1db33d4566a8ed7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cee9512e8c1ca07c2c462afab1db33d4566a8ed7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "html_url": "https://github.com/rust-lang/rust/commit/f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1f7f2f508b78defcf9f22f1c35342c27765a1f0/comments", "author": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsgf", "id": 147966, "node_id": "MDQ6VXNlcjE0Nzk2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/147966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsgf", "html_url": "https://github.com/jsgf", "followers_url": "https://api.github.com/users/jsgf/followers", "following_url": "https://api.github.com/users/jsgf/following{/other_user}", "gists_url": "https://api.github.com/users/jsgf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsgf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsgf/subscriptions", "organizations_url": "https://api.github.com/users/jsgf/orgs", "repos_url": "https://api.github.com/users/jsgf/repos", "events_url": "https://api.github.com/users/jsgf/events{/privacy}", "received_events_url": "https://api.github.com/users/jsgf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "48921ce30095bcc356f2fe082e29edb004d1eda9", "url": "https://api.github.com/repos/rust-lang/rust/commits/48921ce30095bcc356f2fe082e29edb004d1eda9", "html_url": "https://github.com/rust-lang/rust/commit/48921ce30095bcc356f2fe082e29edb004d1eda9"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "26a7dd0745ce18b665ba8dbddde06eca9fd9060c", "filename": "compiler/rustc_interface/src/tests.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f1f7f2f508b78defcf9f22f1c35342c27765a1f0/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1f7f2f508b78defcf9f22f1c35342c27765a1f0/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Ftests.rs?ref=f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "patch": "@@ -720,7 +720,6 @@ fn test_debugging_options_tracking_hash() {\n     tracked!(mir_opt_level, Some(4));\n     tracked!(mutable_noalias, Some(true));\n     tracked!(new_llvm_pass_manager, Some(true));\n-    tracked!(no_codegen, true);\n     tracked!(no_generate_arange_section, true);\n     tracked!(no_link, true);\n     tracked!(osx_rpath_install_name, true);\n@@ -755,6 +754,16 @@ fn test_debugging_options_tracking_hash() {\n     tracked!(use_ctors_section, Some(true));\n     tracked!(verify_llvm_ir, true);\n     tracked!(wasi_exec_model, Some(WasiExecModel::Reactor));\n+\n+    macro_rules! tracked_no_crate_hash {\n+        ($name: ident, $non_default_value: expr) => {\n+            opts = reference.clone();\n+            assert_ne!(opts.debugging_opts.$name, $non_default_value);\n+            opts.debugging_opts.$name = $non_default_value;\n+            assert_non_crate_hash_different(&reference, &opts);\n+        };\n+    }\n+    tracked_no_crate_hash!(no_codegen, true);\n }\n \n #[test]"}, {"sha": "51bf1710db0aaab6034fa67e8725c6298cb2aff8", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f1f7f2f508b78defcf9f22f1c35342c27765a1f0/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1f7f2f508b78defcf9f22f1c35342c27765a1f0/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=f1f7f2f508b78defcf9f22f1c35342c27765a1f0", "patch": "@@ -1148,7 +1148,7 @@ options! {\n         \"the directory the NLL facts are dumped into (default: `nll-facts`)\"),\n     no_analysis: bool = (false, parse_no_flag, [UNTRACKED],\n         \"parse and expand the source, but run no analysis\"),\n-    no_codegen: bool = (false, parse_no_flag, [TRACKED],\n+    no_codegen: bool = (false, parse_no_flag, [TRACKED_NO_CRATE_HASH],\n         \"run all passes except codegen; no output\"),\n     no_generate_arange_section: bool = (false, parse_no_flag, [TRACKED],\n         \"omit DWARF address ranges that give faster lookups\"),"}]}