{"sha": "fa3716efe67f97929ad1351c9a07cc914e0bdf45", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhMzcxNmVmZTY3Zjk3OTI5YWQxMzUxYzlhMDdjYzkxNGUwYmRmNDU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-07-11T09:13:10Z"}, "committer": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-07-11T09:13:10Z"}, "message": "Merge #1520\n\n1520: Ignore workspace/didChangeConfiguration notifications. r=matklad a=bolinfest\n\nIf the client happens to send a `workspace/didChangeConfiguration`\r\nnotification, it is nicer if rust-analyzer can just ignore it rather than\r\ncrash with an \"unhandled notification\" error.\n\nCo-authored-by: Michael Bolin <bolinfest@gmail.com>", "tree": {"sha": "380f0680aed256d28db5f535d7aa0e480aa489e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/380f0680aed256d28db5f535d7aa0e480aa489e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa3716efe67f97929ad1351c9a07cc914e0bdf45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa3716efe67f97929ad1351c9a07cc914e0bdf45", "html_url": "https://github.com/rust-lang/rust/commit/fa3716efe67f97929ad1351c9a07cc914e0bdf45", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa3716efe67f97929ad1351c9a07cc914e0bdf45/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "46d7b08c5f0440fed43399ffe925e30bfe95e5dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/46d7b08c5f0440fed43399ffe925e30bfe95e5dd", "html_url": "https://github.com/rust-lang/rust/commit/46d7b08c5f0440fed43399ffe925e30bfe95e5dd"}, {"sha": "e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "url": "https://api.github.com/repos/rust-lang/rust/commits/e81a47b8ebce9bcf680b15c6e0c1e879200f75df", "html_url": "https://github.com/rust-lang/rust/commit/e81a47b8ebce9bcf680b15c6e0c1e879200f75df"}], "stats": {"total": 27, "additions": 15, "deletions": 12}, "files": [{"sha": "bb9205aed4d2b06511bb594c87063b5522758c1a", "filename": "crates/ra_lsp_server/src/caps.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fcaps.rs?ref=fa3716efe67f97929ad1351c9a07cc914e0bdf45", "patch": "@@ -1,8 +1,8 @@\n use lsp_types::{\n     CodeActionProviderCapability, CodeLensOptions, CompletionOptions,\n-    DocumentOnTypeFormattingOptions, ExecuteCommandOptions, FoldingRangeProviderCapability,\n-    GenericCapability, ImplementationProviderCapability, RenameOptions, RenameProviderCapability,\n-    ServerCapabilities, SignatureHelpOptions, TextDocumentSyncCapability, TextDocumentSyncKind,\n+    DocumentOnTypeFormattingOptions, FoldingRangeProviderCapability, GenericCapability,\n+    ImplementationProviderCapability, RenameOptions, RenameProviderCapability, ServerCapabilities,\n+    SignatureHelpOptions, TextDocumentSyncCapability, TextDocumentSyncKind,\n     TextDocumentSyncOptions, TypeDefinitionProviderCapability,\n };\n \n@@ -44,9 +44,7 @@ pub fn server_capabilities() -> ServerCapabilities {\n             prepare_provider: Some(true),\n         })),\n         color_provider: None,\n-        execute_command_provider: Some(ExecuteCommandOptions {\n-            commands: vec![\"apply_code_action\".to_string()],\n-        }),\n+        execute_command_provider: None,\n         workspace: None,\n     }\n }"}, {"sha": "668d2fd729d6a4298511dbe4f27f44b6923f66c3", "filename": "crates/ra_lsp_server/src/main_loop.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop.rs?ref=fa3716efe67f97929ad1351c9a07cc914e0bdf45", "patch": "@@ -431,6 +431,12 @@ fn on_notification(\n         }\n         Err(not) => not,\n     };\n+    let not = match not.cast::<req::DidChangeConfiguration>() {\n+        Ok(_params) => {\n+            return Ok(());\n+        }\n+        Err(not) => not,\n+    };\n     log::error!(\"unhandled notification: {:?}\", not);\n     Ok(())\n }"}, {"sha": "8d39b04a7482e2bcbdb71f1c46c57e0ccc24408b", "filename": "crates/ra_lsp_server/src/req.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Freq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa3716efe67f97929ad1351c9a07cc914e0bdf45/crates%2Fra_lsp_server%2Fsrc%2Freq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Freq.rs?ref=fa3716efe67f97929ad1351c9a07cc914e0bdf45", "patch": "@@ -5,10 +5,11 @@ use url_serde;\n \n pub use lsp_types::{\n     notification::*, request::*, ApplyWorkspaceEditParams, CodeActionParams, CodeLens,\n-    CodeLensParams, CompletionParams, CompletionResponse, DocumentOnTypeFormattingParams,\n-    DocumentSymbolParams, DocumentSymbolResponse, ExecuteCommandParams, Hover, InitializeResult,\n-    MessageType, PublishDiagnosticsParams, ReferenceParams, ShowMessageParams, SignatureHelp,\n-    TextDocumentEdit, TextDocumentPositionParams, TextEdit, WorkspaceEdit, WorkspaceSymbolParams,\n+    CodeLensParams, CompletionParams, CompletionResponse, DidChangeConfigurationParams,\n+    DocumentOnTypeFormattingParams, DocumentSymbolParams, DocumentSymbolResponse, Hover,\n+    InitializeResult, MessageType, PublishDiagnosticsParams, ReferenceParams, ShowMessageParams,\n+    SignatureHelp, TextDocumentEdit, TextDocumentPositionParams, TextEdit, WorkspaceEdit,\n+    WorkspaceSymbolParams,\n };\n \n pub enum AnalyzerStatus {}"}, {"sha": "d3e79b8bee112339471a72f5b2fd2bfbd0352da9", "filename": "docs/dev/lsp-features.md", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa3716efe67f97929ad1351c9a07cc914e0bdf45/docs%2Fdev%2Flsp-features.md", "raw_url": "https://github.com/rust-lang/rust/raw/fa3716efe67f97929ad1351c9a07cc914e0bdf45/docs%2Fdev%2Flsp-features.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Flsp-features.md?ref=fa3716efe67f97929ad1351c9a07cc914e0bdf45", "patch": "@@ -16,8 +16,6 @@ This list documents LSP features, supported by rust-analyzer.\n - [ ] [workspace/configuration](https://microsoft.github.io/language-server-protocol/specification#workspace_configuration)\n - [x] [workspace/didChangeWatchedFiles](https://microsoft.github.io/language-server-protocol/specification#workspace_didChangeWatchedFiles)\n - [x] [workspace/symbol](https://microsoft.github.io/language-server-protocol/specification#workspace_symbol)\n-- [x] [workspace/executeCommand](https://microsoft.github.io/language-server-protocol/specification#workspace_executeCommand)\n- - `apply_code_action`\n - [ ] [workspace/applyEdit](https://microsoft.github.io/language-server-protocol/specification#workspace_applyEdit)\n \n ## Text Synchronization"}]}