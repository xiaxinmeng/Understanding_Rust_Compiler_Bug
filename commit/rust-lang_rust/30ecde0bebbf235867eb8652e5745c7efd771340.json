{"sha": "30ecde0bebbf235867eb8652e5745c7efd771340", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwZWNkZTBiZWJiZjIzNTg2N2ViODY1MmU1NzQ1YzdlZmQ3NzEzNDA=", "commit": {"author": {"name": "Rune Tynan", "email": "runetynan@gmail.com", "date": "2021-01-29T06:07:50Z"}, "committer": {"name": "Rune Tynan", "email": "runetynan@gmail.com", "date": "2021-02-06T03:25:11Z"}, "message": "Add abi field to `Method`", "tree": {"sha": "4a3d0391fdf6f0468063ba46d9cbe06fb3161508", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4a3d0391fdf6f0468063ba46d9cbe06fb3161508"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/30ecde0bebbf235867eb8652e5745c7efd771340", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEETdpCnQmiF6hBYUqdfsyTL4sscx4FAmAeDCYACgkQfsyTL4ss\ncx6sZQ//c9P9/arfsTYoUvrEjjF2Rro4gOhSMzEmc+0ApAf4Q+HFH3xRAkLevZcj\nxp/o3QK0k/KX+aVqkLbdtH1bXd/Aq2nBtfP2F/uvMcwcBsCvv49Bn6s+Id5p53PE\nkYn2aAz3i2676FjOlKRUtME1opuc61XQLcAiEKXYMmN0IQWB8BUJyf92HRF/vtts\nEBibK6WfhoYASrSzybttU3fCLRzkxb43qedbk/ujHDqZIDEwvopHPAC14nJGo04X\nGl2mIVNgYPhA/dstEuAcnP0IjSTr8KPccDWVXpQZ7MY9MEoWdetkAImCE+IOrVwq\n+iiJi8Y8tynW525IjOqFXfWxs5kUFtQrrozL40R6Xanl6MpaDFxalCwA6nKcqgDQ\ndN+1udIyugRKGXLhP2Wewpu3/eAcIkOmQld1jYtCvEIATwmhhKr3lIBnKuCtr+uW\n64xKM/JI1FLoD9FckP1URUNmA1BFyAFZNCR7rX6+l7GbiXt2pT+U0nNxm+Vavufk\nL/taeZt3ShypIahiQnh64oqlE/Kcyvz8RrL2/u/n+5Ub8WlnsY/BiGrdFtf6kSwk\n7KyXC1rRyDoaTVpZ0fh1bdsGabEPue2raangLduAfs5rlz0UywSzfpEJOnlnSTp8\nsnngumaTCmvVvy2VlV66J7BCvuP2y2nm6Xr/KMpYuUqNneso1pE=\n=c+hH\n-----END PGP SIGNATURE-----", "payload": "tree 4a3d0391fdf6f0468063ba46d9cbe06fb3161508\nparent 16b805713c4cdb967263b9d59634fddea4372b65\nauthor Rune Tynan <runetynan@gmail.com> 1611900470 -0500\ncommitter Rune Tynan <runetynan@gmail.com> 1612581911 -0500\n\nAdd abi field to `Method`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/30ecde0bebbf235867eb8652e5745c7efd771340", "html_url": "https://github.com/rust-lang/rust/commit/30ecde0bebbf235867eb8652e5745c7efd771340", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/30ecde0bebbf235867eb8652e5745c7efd771340/comments", "author": {"login": "CraftSpider", "id": 13342132, "node_id": "MDQ6VXNlcjEzMzQyMTMy", "avatar_url": "https://avatars.githubusercontent.com/u/13342132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CraftSpider", "html_url": "https://github.com/CraftSpider", "followers_url": "https://api.github.com/users/CraftSpider/followers", "following_url": "https://api.github.com/users/CraftSpider/following{/other_user}", "gists_url": "https://api.github.com/users/CraftSpider/gists{/gist_id}", "starred_url": "https://api.github.com/users/CraftSpider/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CraftSpider/subscriptions", "organizations_url": "https://api.github.com/users/CraftSpider/orgs", "repos_url": "https://api.github.com/users/CraftSpider/repos", "events_url": "https://api.github.com/users/CraftSpider/events{/privacy}", "received_events_url": "https://api.github.com/users/CraftSpider/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CraftSpider", "id": 13342132, "node_id": "MDQ6VXNlcjEzMzQyMTMy", "avatar_url": "https://avatars.githubusercontent.com/u/13342132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CraftSpider", "html_url": "https://github.com/CraftSpider", "followers_url": "https://api.github.com/users/CraftSpider/followers", "following_url": "https://api.github.com/users/CraftSpider/following{/other_user}", "gists_url": "https://api.github.com/users/CraftSpider/gists{/gist_id}", "starred_url": "https://api.github.com/users/CraftSpider/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CraftSpider/subscriptions", "organizations_url": "https://api.github.com/users/CraftSpider/orgs", "repos_url": "https://api.github.com/users/CraftSpider/repos", "events_url": "https://api.github.com/users/CraftSpider/events{/privacy}", "received_events_url": "https://api.github.com/users/CraftSpider/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16b805713c4cdb967263b9d59634fddea4372b65", "url": "https://api.github.com/repos/rust-lang/rust/commits/16b805713c4cdb967263b9d59634fddea4372b65", "html_url": "https://github.com/rust-lang/rust/commit/16b805713c4cdb967263b9d59634fddea4372b65"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "d9f52cbf34c401219a91d4cd9cec10691ef5b659", "filename": "src/librustdoc/json/conversions.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Flibrustdoc%2Fjson%2Fconversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fjson%2Fconversions.rs?ref=30ecde0bebbf235867eb8652e5745c7efd771340", "patch": "@@ -434,12 +434,14 @@ impl From<clean::Impl> for Impl {\n     }\n }\n \n+<<<<<<< HEAD\n crate fn from_function_method(function: clean::Function, has_body: bool) -> Method {\n     let clean::Function { header, decl, generics, all_types: _, ret_types: _ } = function;\n     Method {\n         decl: decl.into(),\n         generics: generics.into(),\n         header: stringify_header(&header),\n+        abi: header.abi.to_string(),\n         has_body,\n     }\n }"}, {"sha": "f4b8dc9a3ad2b11ee41e568659614c64eee1ca2f", "filename": "src/rustdoc-json-types/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Frustdoc-json-types%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Frustdoc-json-types%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc-json-types%2Flib.rs?ref=30ecde0bebbf235867eb8652e5745c7efd771340", "patch": "@@ -294,6 +294,7 @@ pub struct Method {\n     pub decl: FnDecl,\n     pub generics: Generics,\n     pub header: String,\n+    pub abi: String,\n     pub has_body: bool,\n }\n "}, {"sha": "6fabbc836117ba7232baa87cad103a3e0fec977a", "filename": "src/test/rustdoc-json/method_abi.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Ftest%2Frustdoc-json%2Fmethod_abi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/30ecde0bebbf235867eb8652e5745c7efd771340/src%2Ftest%2Frustdoc-json%2Fmethod_abi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Fmethod_abi.rs?ref=30ecde0bebbf235867eb8652e5745c7efd771340", "patch": "@@ -0,0 +1,25 @@\n+// @has method_abi.json \"$.index[*][?(@.name=='Foo')]\"\n+pub struct Foo;\n+\n+impl Foo {\n+    // @has - \"$.index[*][?(@.name=='abi_rust')].inner.abi\" '\"\\\"Rust\\\"\"'\n+    pub fn abi_rust() {}\n+\n+    // @has - \"$.index[*][?(@.name=='abi_c')].inner.abi\" '\"\\\"C\\\"\"'\n+    pub extern \"C\" fn abi_c() {}\n+\n+    // @has - \"$.index[*][?(@.name=='abi_system')].inner.abi\" '\"\\\"system\\\"\"'\n+    pub extern \"system\" fn abi_system() {}\n+}\n+\n+// @has method_abi.json \"$.index[*][?(@.name=='Bar')]\"\n+pub trait Bar {\n+    // @has - \"$.index[*][?(@.name=='trait_abi_rust')].inner.abi\" '\"\\\"Rust\\\"\"'\n+    fn trait_abi_rust();\n+\n+    // @has - \"$.index[*][?(@.name=='trait_abi_c')].inner.abi\" '\"\\\"C\\\"\"'\n+    extern \"C\" fn trait_abi_c();\n+\n+    // @has - \"$.index[*][?(@.name=='trait_abi_system')].inner.abi\" '\"\\\"system\\\"\"'\n+    extern \"system\" fn trait_abi_system();\n+}"}]}