{"sha": "85f5cbc9dc7027f922198f6c2d06cf382aad6970", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1ZjVjYmM5ZGM3MDI3ZjkyMjE5OGY2YzJkMDZjZjM4MmFhZDY5NzA=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2020-07-14T11:33:37Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2020-07-14T11:33:37Z"}, "message": "Move remove_bounds to edit.rs", "tree": {"sha": "fd73b03c195602955cd71af8d3d8a49007f94009", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd73b03c195602955cd71af8d3d8a49007f94009"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85f5cbc9dc7027f922198f6c2d06cf382aad6970", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85f5cbc9dc7027f922198f6c2d06cf382aad6970", "html_url": "https://github.com/rust-lang/rust/commit/85f5cbc9dc7027f922198f6c2d06cf382aad6970", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85f5cbc9dc7027f922198f6c2d06cf382aad6970/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f654b06ab093e7bb057cfd68b27925803b003d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f654b06ab093e7bb057cfd68b27925803b003d8", "html_url": "https://github.com/rust-lang/rust/commit/0f654b06ab093e7bb057cfd68b27925803b003d8"}], "stats": {"total": 38, "additions": 16, "deletions": 22}, "files": [{"sha": "f185e61e5951ebece29a874a547249c30d0022f3", "filename": "crates/ra_assists/src/handlers/add_missing_impl_members.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fadd_missing_impl_members.rs?ref=85f5cbc9dc7027f922198f6c2d06cf382aad6970", "patch": "@@ -159,7 +159,7 @@ fn add_missing_impl_members_inner(\n             .map(|it| match it {\n                 ast::AssocItem::FnDef(def) => ast::AssocItem::FnDef(add_body(def)),\n                 ast::AssocItem::TypeAliasDef(def) => {\n-                    ast::AssocItem::TypeAliasDef(remove_bounds(def))\n+                    ast::AssocItem::TypeAliasDef(def.remove_bounds())\n                 }\n                 _ => it,\n             })\n@@ -191,14 +191,6 @@ fn add_missing_impl_members_inner(\n     })\n }\n \n-fn remove_bounds(ty_def: ast::TypeAliasDef) -> ast::TypeAliasDef {\n-    if let Some(name) = ty_def.name() {\n-        make::type_alias_def(name, None, ty_def.type_ref())\n-    } else {\n-        ty_def\n-    }\n-}\n-\n fn add_body(fn_def: ast::FnDef) -> ast::FnDef {\n     if fn_def.body().is_some() {\n         return fn_def;"}, {"sha": "abc7a646c2cd7c2319172f869bf1d6ae3742b139", "filename": "crates/ra_syntax/src/ast/edit.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast%2Fedit.rs?ref=85f5cbc9dc7027f922198f6c2d06cf382aad6970", "patch": "@@ -189,6 +189,21 @@ impl ast::RecordFieldList {\n     }\n }\n \n+impl ast::TypeAliasDef {\n+    #[must_use]\n+    pub fn remove_bounds(&self) -> ast::TypeAliasDef {\n+        let colon = match self.colon_token() {\n+            Some(it) => it,\n+            None => return self.clone(),\n+        };\n+        let end = match self.type_bound_list() {\n+            Some(it) => it.syntax().clone().into(),\n+            None => colon.clone().into(),\n+        };\n+        self.replace_children(colon.into()..=end, iter::empty())\n+    }\n+}\n+\n impl ast::TypeParam {\n     #[must_use]\n     pub fn remove_bounds(&self) -> ast::TypeParam {"}, {"sha": "192c610f1c592473d3fdf29da9268df9cd8a6131", "filename": "crates/ra_syntax/src/ast/make.rs", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_syntax%2Fsrc%2Fast%2Fmake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85f5cbc9dc7027f922198f6c2d06cf382aad6970/crates%2Fra_syntax%2Fsrc%2Fast%2Fmake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast%2Fmake.rs?ref=85f5cbc9dc7027f922198f6c2d06cf382aad6970", "patch": "@@ -64,19 +64,6 @@ pub fn use_item(use_tree: ast::UseTree) -> ast::UseItem {\n     ast_from_text(&format!(\"use {};\", use_tree))\n }\n \n-pub fn type_alias_def(\n-    name: ast::Name,\n-    bounds: Option<ast::TypeBoundList>,\n-    ty: Option<ast::TypeRef>,\n-) -> ast::TypeAliasDef {\n-    match (bounds, ty) {\n-        (None, None) => ast_from_text(&format!(\"type {};\", name)),\n-        (None, Some(ty)) => ast_from_text(&format!(\"type {} = {};\", name, ty)),\n-        (Some(bounds), None) => ast_from_text(&format!(\"type {}: {};\", name, bounds)),\n-        (Some(bounds), Some(ty)) => ast_from_text(&format!(\"type {}: {} = {};\", name, bounds, ty)),\n-    }\n-}\n-\n pub fn record_field(name: ast::NameRef, expr: Option<ast::Expr>) -> ast::RecordField {\n     return match expr {\n         Some(expr) => from_text(&format!(\"{}: {}\", name, expr)),"}]}