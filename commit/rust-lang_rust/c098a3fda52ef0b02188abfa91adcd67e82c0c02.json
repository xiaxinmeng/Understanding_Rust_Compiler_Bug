{"sha": "c098a3fda52ef0b02188abfa91adcd67e82c0c02", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMwOThhM2ZkYTUyZWYwYjAyMTg4YWJmYTkxYWRjZDY3ZTgyYzBjMDI=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-02-09T21:03:01Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2019-02-09T21:03:01Z"}, "message": "Add comment and mark", "tree": {"sha": "cd2cd9080114eee7c079b2120e27fb5655cdb947", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd2cd9080114eee7c079b2120e27fb5655cdb947"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c098a3fda52ef0b02188abfa91adcd67e82c0c02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c098a3fda52ef0b02188abfa91adcd67e82c0c02", "html_url": "https://github.com/rust-lang/rust/commit/c098a3fda52ef0b02188abfa91adcd67e82c0c02", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c098a3fda52ef0b02188abfa91adcd67e82c0c02/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a28d4befaf9984d8a13948adb7b92b1638e63739", "url": "https://api.github.com/repos/rust-lang/rust/commits/a28d4befaf9984d8a13948adb7b92b1638e63739", "html_url": "https://github.com/rust-lang/rust/commit/a28d4befaf9984d8a13948adb7b92b1638e63739"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "aba0c9968943f0f5274fe49aa8853cf29f580961", "filename": "crates/ra_hir/src/marks.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fmarks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fmarks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fmarks.rs?ref=c098a3fda52ef0b02188abfa91adcd67e82c0c02", "patch": "@@ -3,4 +3,5 @@ test_utils::marks!(\n     item_map_enum_importing\n     type_var_cycles_resolve_completely\n     type_var_cycles_resolve_as_possible\n+    type_var_resolves_to_int_var\n );"}, {"sha": "7203a8a10147091dedc5517df01d83a35beb0e56", "filename": "crates/ra_hir/src/ty.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty.rs?ref=c098a3fda52ef0b02188abfa91adcd67e82c0c02", "patch": "@@ -1003,8 +1003,13 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n     /// otherwise, return ty.\n     fn resolve_ty_shallow<'b>(&mut self, ty: &'b Ty) -> Cow<'b, Ty> {\n         let mut ty = Cow::Borrowed(ty);\n-        for _ in 0..3 {\n-            // the type variable could resolve to a int/float variable\n+        // The type variable could resolve to a int/float variable. Hence try\n+        // resolving up to three times; each type of variable shouldn't occur\n+        // more than once\n+        for i in 0..3 {\n+            if i > 0 {\n+                tested_by!(type_var_resolves_to_int_var);\n+            }\n             match &*ty {\n                 Ty::Infer(tv) => {\n                     let inner = tv.to_inner();\n@@ -1019,6 +1024,7 @@ impl<'a, D: HirDatabase> InferenceContext<'a, D> {\n                 _ => return ty,\n             }\n         }\n+        log::error!(\"Inference variable still not resolved: {:?}\", ty);\n         ty\n     }\n "}, {"sha": "e64fd27496305bde9849f5f560a3294e4791c5a6", "filename": "crates/ra_hir/src/ty/tests.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c098a3fda52ef0b02188abfa91adcd67e82c0c02/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftests.rs?ref=c098a3fda52ef0b02188abfa91adcd67e82c0c02", "patch": "@@ -652,6 +652,7 @@ fn write() {\n \n #[test]\n fn infer_std_crash_2() {\n+    covers!(type_var_resolves_to_int_var);\n     // caused \"equating two type variables, ...\", taken from std\n     check_inference(\n         \"infer_std_crash_2\","}]}