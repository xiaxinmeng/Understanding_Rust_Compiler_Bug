{"sha": "af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmNDBmZWYzZjhkMGVkZDJiNTQ3YTFmYzJjZmRlYTMzZjY2YTBjMzk=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-03T23:59:43Z"}, "committer": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2015-11-03T23:59:43Z"}, "message": "Merge pull request #560 from Florob/enum_trailing_comma\n\nHonor \"enum_trailing_comma\" option. Fixes #556", "tree": {"sha": "dabb013ce87a41e16216ae3c59b7d16d743d5f14", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dabb013ce87a41e16216ae3c59b7d16d743d5f14"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "html_url": "https://github.com/rust-lang/rust/commit/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3c60328df8d5ac952d41b5ad1d898d339c82c265", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c60328df8d5ac952d41b5ad1d898d339c82c265", "html_url": "https://github.com/rust-lang/rust/commit/3c60328df8d5ac952d41b5ad1d898d339c82c265"}, {"sha": "2aa35f0f6deb1f24c508077e877d1bf95bcc282b", "url": "https://api.github.com/repos/rust-lang/rust/commits/2aa35f0f6deb1f24c508077e877d1bf95bcc282b", "html_url": "https://github.com/rust-lang/rust/commit/2aa35f0f6deb1f24c508077e877d1bf95bcc282b"}], "stats": {"total": 94, "additions": 93, "deletions": 1}, "files": [{"sha": "fa15eeca3ac666e13710a0a1d5f0920f610c559c", "filename": "src/items.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "patch": "@@ -693,7 +693,7 @@ impl<'a> FmtVisitor<'a> {\n         let fmt = ListFormatting {\n             tactic: DefinitiveListTactic::Vertical,\n             separator: \",\",\n-            trailing_separator: SeparatorTactic::Always,\n+            trailing_separator: SeparatorTactic::from_bool(self.config.enum_trailing_comma),\n             indent: self.block_indent,\n             width: budget,\n             ends_with_newline: true,"}, {"sha": "b05e4d46066b4cf2bef5d12a7f5e5b813e9b40ab", "filename": "src/lists.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "patch": "@@ -46,6 +46,16 @@ pub enum SeparatorTactic {\n \n impl_enum_decodable!(SeparatorTactic, Always, Never, Vertical);\n \n+impl SeparatorTactic {\n+    pub fn from_bool(b: bool) -> SeparatorTactic {\n+        if b {\n+            SeparatorTactic::Always\n+        } else {\n+            SeparatorTactic::Never\n+        }\n+    }\n+}\n+\n pub struct ListFormatting<'a> {\n     pub tactic: DefinitiveListTactic,\n     pub separator: &'a str,"}, {"sha": "4b0347ab5268429057dd089b39f3a6c30e3851a2", "filename": "tests/source/enum-no_trailing_comma.rs", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/tests%2Fsource%2Fenum-no_trailing_comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/tests%2Fsource%2Fenum-no_trailing_comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fenum-no_trailing_comma.rs?ref=af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "patch": "@@ -0,0 +1,41 @@\n+// rustfmt-enum_trailing_comma: false\n+\n+enum X {\n+    A,\n+    B,\n+}\n+\n+enum Y {\n+    A,\n+    B\n+}\n+\n+enum TupX {\n+    A(u32),\n+    B(i32, u16),\n+}\n+\n+enum TupY {\n+    A(u32),\n+    B(i32, u16)\n+}\n+\n+enum StructX {\n+    A {\n+        s: u16,\n+    },\n+    B {\n+        u: u32,\n+        i: i32,\n+    },\n+}\n+\n+enum StructY {\n+    A {\n+        s: u16,\n+    },\n+    B {\n+        u: u32,\n+        i: i32,\n+    }\n+}"}, {"sha": "4ad7d1f12d71dccb4061ef949e91bc43a74d4bbc", "filename": "tests/target/enum-no_trailing_comma.rs", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/tests%2Ftarget%2Fenum-no_trailing_comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39/tests%2Ftarget%2Fenum-no_trailing_comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fenum-no_trailing_comma.rs?ref=af40fef3f8d0edd2b547a1fc2cfdea33f66a0c39", "patch": "@@ -0,0 +1,41 @@\n+// rustfmt-enum_trailing_comma: false\n+\n+enum X {\n+    A,\n+    B\n+}\n+\n+enum Y {\n+    A,\n+    B\n+}\n+\n+enum TupX {\n+    A(u32),\n+    B(i32, u16)\n+}\n+\n+enum TupY {\n+    A(u32),\n+    B(i32, u16)\n+}\n+\n+enum StructX {\n+    A {\n+        s: u16,\n+    },\n+    B {\n+        u: u32,\n+        i: i32,\n+    }\n+}\n+\n+enum StructY {\n+    A {\n+        s: u16,\n+    },\n+    B {\n+        u: u32,\n+        i: i32,\n+    }\n+}"}]}