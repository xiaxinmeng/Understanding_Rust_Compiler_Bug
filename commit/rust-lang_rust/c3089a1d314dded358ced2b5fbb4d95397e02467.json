{"sha": "c3089a1d314dded358ced2b5fbb4d95397e02467", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzMDg5YTFkMzE0ZGRlZDM1OGNlZDJiNWZiYjRkOTUzOTdlMDI0Njc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-11-04T07:30:06Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2013-11-04T07:56:45Z"}, "message": "Fix the temporary name of the object file created\n\nThis file did not respect the #[link(name = \"...\")] attribute when it was\nclearly intended to do so. The problem is that the crate attributes just weren't\npassed in. This causes lots of problems in rust today because the object file\nfor all our libraries is inferred to be 'lib.o' because all of the files are\ncalled 'lib.rs'.\n\nI tried to figure out a good way to test for this, but I wasn't able to come up\nwith a good way that fit into our current testing framework. Nonetheless, I have\ntested this locally and object files get named as they should. This should fix\ncompiling with `make -jN` again (because the object files are all different\nagain).", "tree": {"sha": "c56507bff651f3c988d0cfe8ea89e67f8ddde4ed", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c56507bff651f3c988d0cfe8ea89e67f8ddde4ed"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3089a1d314dded358ced2b5fbb4d95397e02467", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3089a1d314dded358ced2b5fbb4d95397e02467", "html_url": "https://github.com/rust-lang/rust/commit/c3089a1d314dded358ced2b5fbb4d95397e02467", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3089a1d314dded358ced2b5fbb4d95397e02467/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5c1b48048cc911c3caa07ada776239123a97b50", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5c1b48048cc911c3caa07ada776239123a97b50", "html_url": "https://github.com/rust-lang/rust/commit/b5c1b48048cc911c3caa07ada776239123a97b50"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "8e46598c35939117241f77dbbabb78fffbc4d5f3", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3089a1d314dded358ced2b5fbb4d95397e02467/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3089a1d314dded358ced2b5fbb4d95397e02467/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=c3089a1d314dded358ced2b5fbb4d95397e02467", "patch": "@@ -441,7 +441,8 @@ pub fn compile_input(sess: Session, cfg: ast::CrateConfig, input: &input,\n         };\n         let analysis = phase_3_run_analysis_passes(sess, &expanded_crate);\n         if stop_after_phase_3(sess) { return; }\n-        let outputs = build_output_filenames(input, outdir, output, [], sess);\n+        let outputs = build_output_filenames(input, outdir, output,\n+                                             expanded_crate.attrs, sess);\n         let trans = phase_4_translate_to_llvm(sess, expanded_crate,\n                                               &analysis, outputs);\n         (outputs, trans)"}]}