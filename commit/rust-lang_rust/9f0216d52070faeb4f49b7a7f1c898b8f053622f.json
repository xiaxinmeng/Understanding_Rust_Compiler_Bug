{"sha": "9f0216d52070faeb4f49b7a7f1c898b8f053622f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmMDIxNmQ1MjA3MGZhZWI0ZjQ5YjdhN2YxYzg5OGI4ZjA1MzYyMmY=", "commit": {"author": {"name": "Daniel Wagner-Hall", "email": "dawagner@gmail.com", "date": "2018-09-02T23:01:57Z"}, "committer": {"name": "Daniel Wagner-Hall", "email": "dawagner@gmail.com", "date": "2018-09-02T23:01:57Z"}, "message": "Merge branch 'master' into issue-2879", "tree": {"sha": "9e72c1f93ee64d6aad1f34b4ff6ae3bb37b33f4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9e72c1f93ee64d6aad1f34b4ff6ae3bb37b33f4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f0216d52070faeb4f49b7a7f1c898b8f053622f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f0216d52070faeb4f49b7a7f1c898b8f053622f", "html_url": "https://github.com/rust-lang/rust/commit/9f0216d52070faeb4f49b7a7f1c898b8f053622f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f0216d52070faeb4f49b7a7f1c898b8f053622f/comments", "author": {"login": "illicitonion", "id": 1131704, "node_id": "MDQ6VXNlcjExMzE3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1131704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illicitonion", "html_url": "https://github.com/illicitonion", "followers_url": "https://api.github.com/users/illicitonion/followers", "following_url": "https://api.github.com/users/illicitonion/following{/other_user}", "gists_url": "https://api.github.com/users/illicitonion/gists{/gist_id}", "starred_url": "https://api.github.com/users/illicitonion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illicitonion/subscriptions", "organizations_url": "https://api.github.com/users/illicitonion/orgs", "repos_url": "https://api.github.com/users/illicitonion/repos", "events_url": "https://api.github.com/users/illicitonion/events{/privacy}", "received_events_url": "https://api.github.com/users/illicitonion/received_events", "type": "User", "site_admin": false}, "committer": {"login": "illicitonion", "id": 1131704, "node_id": "MDQ6VXNlcjExMzE3MDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1131704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/illicitonion", "html_url": "https://github.com/illicitonion", "followers_url": "https://api.github.com/users/illicitonion/followers", "following_url": "https://api.github.com/users/illicitonion/following{/other_user}", "gists_url": "https://api.github.com/users/illicitonion/gists{/gist_id}", "starred_url": "https://api.github.com/users/illicitonion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/illicitonion/subscriptions", "organizations_url": "https://api.github.com/users/illicitonion/orgs", "repos_url": "https://api.github.com/users/illicitonion/repos", "events_url": "https://api.github.com/users/illicitonion/events{/privacy}", "received_events_url": "https://api.github.com/users/illicitonion/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "939d842ea1a8732c86cbaed76e5283358e831efa", "url": "https://api.github.com/repos/rust-lang/rust/commits/939d842ea1a8732c86cbaed76e5283358e831efa", "html_url": "https://github.com/rust-lang/rust/commit/939d842ea1a8732c86cbaed76e5283358e831efa"}, {"sha": "131c8f86b2b712d4d9b00f486b6c67f97782228a", "url": "https://api.github.com/repos/rust-lang/rust/commits/131c8f86b2b712d4d9b00f486b6c67f97782228a", "html_url": "https://github.com/rust-lang/rust/commit/131c8f86b2b712d4d9b00f486b6c67f97782228a"}], "stats": {"total": 6857, "additions": 3583, "deletions": 3274}, "files": [{"sha": "3d1385244a6f89033bf2709088b1a5f346c77776", "filename": "CONTRIBUTING.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/CONTRIBUTING.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/CONTRIBUTING.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CONTRIBUTING.md?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -170,7 +170,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n     reg.register_early_lint_pass(box else_if_without_else::ElseIfWithoutElse);\n     // ...\n \n-    reg.register_lint_group(\"clippy_restriction\", vec![\n+    reg.register_lint_group(\"clippy::restriction\", vec![\n         // ...\n         else_if_without_else::ELSE_IF_WITHOUT_ELSE,\n         // ...\n@@ -185,7 +185,7 @@ It's worth noting that the majority of `clippy_lints/src/lib.rs` is autogenerate\n ```rust\n // ./clippy_lints/src/else_if_without_else.rs\n \n-use rustc::lint::*;\n+use rustc::lint::{EarlyLintPass, LintArray, LintPass};\n \n // ...\n "}, {"sha": "98f712c28d82176c4ba9cbd4fba680918d8cf2c1", "filename": "README.md", "status": "modified", "additions": 12, "deletions": 20, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -13,14 +13,14 @@ A collection of lints to catch common mistakes and improve your [Rust](https://g\n \n We have a bunch of lint categories to allow you to choose how much Clippy is supposed to ~~annoy~~ help you:\n \n-* `clippy` (everything that has no false positives)\n-* `clippy_pedantic` (everything)\n-* `clippy_nursery` (new lints that aren't quite ready yet)\n-* `clippy_style` (code that should be written in a more idiomatic way)\n-* `clippy_complexity` (code that does something simple but in a complex way)\n-* `clippy_perf` (code that can be written in a faster way)\n-* `clippy_cargo` (checks against the cargo manifest)\n-* **`clippy_correctness`** (code that is just outright wrong or very very useless)\n+* `clippy::all` (everything that has no false positives)\n+* `clippy::pedantic` (everything)\n+* `clippy::nursery` (new lints that aren't quite ready yet)\n+* `clippy::style` (code that should be written in a more idiomatic way)\n+* `clippy::complexity` (code that does something simple but in a complex way)\n+* `clippy::perf` (code that can be written in a faster way)\n+* `clippy::cargo` (checks against the cargo manifest)\n+* **`clippy::correctness`** (code that is just outright wrong or very very useless)\n \n More to come, please [file an issue](https://github.com/rust-lang-nursery/rust-clippy/issues) if you have ideas!\n \n@@ -106,26 +106,18 @@ define the `CLIPPY_DISABLE_DOCS_LINKS` environment variable.\n \n You can add options  to `allow`/`warn`/`deny`:\n \n-*   the whole set of `Warn` lints using the `clippy` lint group (`#![deny(clippy)]`)\n+*   the whole set of `Warn` lints using the `clippy` lint group (`#![deny(clippy::all)]`)\n \n-*   all lints using both the `clippy` and `clippy_pedantic` lint groups (`#![deny(clippy)]`,\n-    `#![deny(clippy_pedantic)]`). Note that `clippy_pedantic` contains some very aggressive\n+*   all lints using both the `clippy` and `clippy::pedantic` lint groups (`#![deny(clippy::all)]`,\n+    `#![deny(clippy::pedantic)]`). Note that `clippy::pedantic` contains some very aggressive\n     lints prone to false positives.\n \n-*   only some lints (`#![deny(single_match, box_vec)]`, etc)\n+*   only some lints (`#![deny(clippy::single_match, clippy::box_vec)]`, etc)\n \n *   `allow`/`warn`/`deny` can be limited to a single function or module using `#[allow(...)]`, etc\n \n Note: `deny` produces errors instead of warnings.\n \n-For convenience, `cargo clippy` automatically defines a `cargo-clippy`\n-feature. This lets you set lint levels and compile with or without Clippy\n-transparently:\n-\n-```rust\n-#[cfg_attr(feature = \"cargo-clippy\", allow(needless_lifetimes))]\n-```\n-\n ## Updating rustc\n \n Sometimes, rustc moves forward without Clippy catching up. Therefore updating"}, {"sha": "f7c3342fe381667112fe6526247dc3a804a15bda", "filename": "ci/base-tests.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/ci%2Fbase-tests.sh", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/ci%2Fbase-tests.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ci%2Fbase-tests.sh?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -7,6 +7,7 @@ remark -f *.md > /dev/null\n # build clippy in debug mode and run tests\n cargo build --features debugging\n cargo test --features debugging\n+cd clippy_lints && cargo test && cd ..\n mkdir -p ~/rust/cargo/bin\n cp target/debug/cargo-clippy ~/rust/cargo/bin/cargo-clippy\n cp target/debug/clippy-driver ~/rust/cargo/bin/clippy-driver"}, {"sha": "99b9e79463a81aace5ed2796785f98022b8a3e13", "filename": "clippy_lints/src/approx_const.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fapprox_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fapprox_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fapprox_const.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::utils::span_lint;\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use std::f64::consts as f64;\n use syntax::ast::{FloatTy, Lit, LitKind};\n use syntax::symbol;"}, {"sha": "fa48b2b550612fb5587bc08a76e0eabdea339adf", "filename": "clippy_lints/src/arithmetic.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Farithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Farithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Farithmetic.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::utils::span_lint;\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Span;\n \n /// **What it does:** Checks for plain integer arithmetic."}, {"sha": "9a1808345a5949656d4aa9e9d69eec6e23d812c8", "filename": "clippy_lints/src/assign_ops.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fassign_ops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fassign_ops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fassign_ops.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@ use crate::utils::{get_trait_def_id, implements_trait, snippet_opt, span_lint_an\n use crate::utils::{higher, sugg};\n use rustc::hir;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast;\n \n@@ -108,7 +108,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for AssignOps {\n             },\n             hir::ExprKind::Assign(ref assignee, ref e) => {\n                 if let hir::ExprKind::Binary(op, ref l, ref r) = e.node {\n-                    #[allow(cyclomatic_complexity)]\n+                    #[allow(clippy::cyclomatic_complexity)]\n                     let lint = |assignee: &hir::Expr, rhs: &hir::Expr| {\n                         let ty = cx.tables.expr_ty(assignee);\n                         let rty = cx.tables.expr_ty(rhs);\n@@ -133,7 +133,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for AssignOps {\n                                         // the crate node is the only one that is not in the map\n                                         if_chain! {\n                                             if parent_impl != ast::CRATE_NODE_ID;\n-                                            if let hir::map::Node::NodeItem(item) = cx.tcx.hir.get(parent_impl);\n+                                            if let hir::Node::Item(item) = cx.tcx.hir.get(parent_impl);\n                                             if let hir::ItemKind::Impl(_, _, _, _, Some(ref trait_ref), _, _) =\n                                                 item.node;\n                                             if trait_ref.path.def.def_id() == trait_id;"}, {"sha": "034c2cc241ad8c802c5f9d9789bd3a7fbc64ea43", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -6,8 +6,8 @@ use crate::utils::{\n     without_block_comments,\n };\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, TyCtxt};\n use semver::Version;"}, {"sha": "ecac7f8250bec5d2f624db5855973e194edf33be", "filename": "clippy_lints/src/bit_mask.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbit_mask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbit_mask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fbit_mask.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast::LitKind;\n use syntax::source_map::Span;"}, {"sha": "97749e6f997a3eb6b2ea27405d8ada8869b3f831", "filename": "clippy_lints/src/blacklisted_name.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fblacklisted_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fblacklisted_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fblacklisted_name.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use crate::utils::span_lint;\n "}, {"sha": "752d640fa9eaa776dbd8c88b4cc4a972bf0ab930", "filename": "clippy_lints/src/block_in_if_condition.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use matches::matches;\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n use crate::utils::*;"}, {"sha": "3d3fa7b5e738e54fe3d78cc988c1b512ac1b3d5e", "filename": "clippy_lints/src/booleans.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbooleans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbooleans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fbooleans.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::hir::intravisit::*;\n use syntax::ast::{LitKind, NodeId, DUMMY_NODE_ID};\n@@ -118,7 +118,7 @@ impl<'a, 'tcx, 'v> Hir2Qmm<'a, 'tcx, 'v> {\n         }\n         for (n, expr) in self.terminals.iter().enumerate() {\n             if SpanlessEq::new(self.cx).ignore_fn().eq_expr(e, expr) {\n-                #[allow(cast_possible_truncation)]\n+                #[allow(clippy::cast_possible_truncation)]\n                 return Ok(Bool::Term(n as u8));\n             }\n             let negated = match e.node {\n@@ -150,14 +150,14 @@ impl<'a, 'tcx, 'v> Hir2Qmm<'a, 'tcx, 'v> {\n                 _ => continue,\n             };\n             if SpanlessEq::new(self.cx).ignore_fn().eq_expr(&negated, expr) {\n-                #[allow(cast_possible_truncation)]\n+                #[allow(clippy::cast_possible_truncation)]\n                 return Ok(Bool::Not(Box::new(Bool::Term(n as u8))));\n             }\n         }\n         let n = self.terminals.len();\n         self.terminals.push(e);\n         if n < 32 {\n-            #[allow(cast_possible_truncation)]\n+            #[allow(clippy::cast_possible_truncation)]\n             Ok(Bool::Term(n as u8))\n         } else {\n             Err(\"too many literals\".to_owned())"}, {"sha": "ddc017c27df20f3ef6933d1164729f677d33c74f", "filename": "clippy_lints/src/bytecount.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbytecount.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fbytecount.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fbytecount.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use syntax::ast::{Name, UintTy};"}, {"sha": "55cc94f399f52bf5029d57175741138861d639dd", "filename": "clippy_lints/src/collapsible_if.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcollapsible_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcollapsible_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcollapsible_if.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -12,8 +12,8 @@\n //!\n //! This lint is **warn** by default\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast;\n "}, {"sha": "83dd4c0509e607878d28f8e2cd3dedd3c099e607", "filename": "clippy_lints/src/const_static_lifetime.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use syntax::ast::*;\n use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use crate::utils::{in_macro, snippet, span_lint_and_then};\n \n /// **What it does:** Checks for constants with an explicit `'static` lifetime."}, {"sha": "6f646e340a070b66458ffe942f65ebc49caf154d", "filename": "clippy_lints/src/consts.rs", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconsts.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,4 @@\n-#![allow(cast_possible_truncation)]\n-#![allow(float_cmp)]\n+#![allow(clippy::float_cmp)]\n \n use rustc::lint::LateContext;\n use rustc::{span_bug, bug};\n@@ -16,22 +15,6 @@ use syntax::ast::{FloatTy, LitKind};\n use syntax::ptr::P;\n use crate::utils::{sext, unsext, clip};\n \n-#[derive(Debug, Copy, Clone)]\n-pub enum FloatWidth {\n-    F32,\n-    F64,\n-    Any,\n-}\n-\n-impl From<FloatTy> for FloatWidth {\n-    fn from(ty: FloatTy) -> Self {\n-        match ty {\n-            FloatTy::F32 => FloatWidth::F32,\n-            FloatTy::F64 => FloatWidth::F64,\n-        }\n-    }\n-}\n-\n /// A `LitKind`-like enum to fold constant `Expr`s into.\n #[derive(Debug, Clone)]\n pub enum Constant {"}, {"sha": "8f1823be15a4133fa574914cb9b914c31f256885", "filename": "clippy_lints/src/copies.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcopies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcopies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcopies.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty::Ty;\n use rustc::hir::*;\n use std::collections::HashMap;"}, {"sha": "596e83bc53935f9ab337508ce7ac7473df522268", "filename": "clippy_lints/src/copy_iterator.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcopy_iterator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcopy_iterator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcopy_iterator.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::utils::{is_copy, match_path, paths, span_note_and_lint};\n use rustc::hir::{Item, ItemKind};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n \n /// **What it does:** Checks for types that implement `Copy` as well as\n /// `Iterator`."}, {"sha": "c975e31cec92cb534f02f3eab7fcb596a89e4dde", "filename": "clippy_lints/src/cyclomatic_complexity.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! calculate cyclomatic complexity and warn about overly complex functions\n \n use rustc::cfg::CFG;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::ty;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n@@ -186,7 +186,7 @@ impl<'a, 'tcx> Visitor<'tcx> for CCHelper<'a, 'tcx> {\n }\n \n #[cfg(feature = \"debugging\")]\n-#[allow(too_many_arguments)]\n+#[allow(clippy::too_many_arguments)]\n fn report_cc_bug(_: &LateContext<'_, '_>, cc: u64, narms: u64, div: u64, shorts: u64, returns: u64, span: Span, _: NodeId) {\n     span_bug!(\n         span,\n@@ -200,7 +200,7 @@ fn report_cc_bug(_: &LateContext<'_, '_>, cc: u64, narms: u64, div: u64, shorts:\n     );\n }\n #[cfg(not(feature = \"debugging\"))]\n-#[allow(too_many_arguments)]\n+#[allow(clippy::too_many_arguments)]\n fn report_cc_bug(cx: &LateContext<'_, '_>, cc: u64, narms: u64, div: u64, shorts: u64, returns: u64, span: Span, id: NodeId) {\n     if !is_allowed(cx, CYCLOMATIC_COMPLEXITY, id) {\n         cx.sess().span_note_without_error("}, {"sha": "e7c90f041889a591627fc3053f295428397ec167", "filename": "clippy_lints/src/default_trait_access.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdefault_trait_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdefault_trait_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdefault_trait_access.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::TyKind;\n "}, {"sha": "2a26cca21ac2cccbfd576bc41842eaf75201f131", "filename": "clippy_lints/src/derive.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fderive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fderive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fderive.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use rustc::hir::*;"}, {"sha": "4d603570ebed0b1c987048b798837037cdbec551", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use itertools::Itertools;\n use pulldown_cmark;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast;\n use syntax::source_map::{BytePos, Span};\n use syntax_pos::Pos;\n@@ -86,7 +86,7 @@ impl<'a> Iterator for Parser<'a> {\n /// `syntax::parse::lexer::comments::strip_doc_comment_decoration` because we\n /// need to keep track of\n /// the spans but this function is inspired from the later.\n-#[allow(cast_possible_truncation)]\n+#[allow(clippy::cast_possible_truncation)]\n pub fn strip_doc_comment_decoration(comment: &str, span: Span) -> (String, Vec<(usize, Span)>) {\n     // one-line comments lose their prefix\n     const ONELINERS: &[&str] = &[\"///!\", \"///\", \"//!\", \"//\"];"}, {"sha": "1f38be4d7b72c8925b44956e528fc2fb0d869409", "filename": "clippy_lints/src/double_comparison.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdouble_comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdouble_comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdouble_comparison.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! Lint on unnecessary double comparisons. Some examples:\n \n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Span;\n \n use crate::utils::{snippet, span_lint_and_sugg, SpanlessEq};"}, {"sha": "42d6720d96c5d1d4034644c5b9b04c3fba165121", "filename": "clippy_lints/src/double_parens.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdouble_parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdouble_parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdouble_parens.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use syntax::ast::*;\n use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintContext, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n \n /// **What it does:** Checks for unnecessary double parentheses.\n ///"}, {"sha": "be804780ff5f2c2bb32516efe4bb0a8170aea5b9", "filename": "clippy_lints/src/drop_forget_ref.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdrop_forget_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fdrop_forget_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdrop_forget_ref.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use rustc::hir::*;"}, {"sha": "5853983dcf0a59e8bd79dfe925a20d141b2a2a7c", "filename": "clippy_lints/src/duration_subsec.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fduration_subsec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fduration_subsec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fduration_subsec.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::source_map::Spanned;\n "}, {"sha": "1c026713a5d44d1cf36cc9ee289770a3670f32d2", "filename": "clippy_lints/src/else_if_without_else.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Felse_if_without_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Felse_if_without_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Felse_if_without_else.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! lint on if expressions with an else if, but without a final else branch\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n \n use crate::utils::span_lint_and_sugg;"}, {"sha": "195a78a89e5c370e72d1091b8fb19ea49d566c15", "filename": "clippy_lints/src/empty_enum.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fempty_enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fempty_enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fempty_enum.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! lint when there is an enum with no variants\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use crate::utils::span_lint_and_then;\n "}, {"sha": "8a2fcbaea46e78a9f49a805c3c5616932927b464", "filename": "clippy_lints/src/entry.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fentry.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use rustc::hir::*;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::source_map::Span;\n use crate::utils::SpanlessEq;"}, {"sha": "0271fee8a3c9d7f882b27db15967f779ecfa05ff", "filename": "clippy_lints/src/enum_clike.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_clike.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_clike.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_clike.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! lint on C-like enums that are `repr(isize/usize)` and have values that\n //! don't fit into an `i32`\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::ty;\n use rustc::ty::subst::Substs;\n@@ -43,7 +43,7 @@ impl LintPass for UnportableVariant {\n }\n \n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UnportableVariant {\n-    #[allow(cast_possible_truncation, cast_sign_loss)]\n+    #[allow(clippy::cast_possible_truncation, clippy::cast_sign_loss)]\n     fn check_item(&mut self, cx: &LateContext<'a, 'tcx>, item: &'tcx Item) {\n         if cx.tcx.data_layout.pointer_size.bits() != 64 {\n             return;"}, {"sha": "042a4765e2b73bb1781b9f52f0f8bd73d878c971", "filename": "clippy_lints/src/enum_glob_use.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_glob_use.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -3,7 +3,7 @@\n use rustc::hir::*;\n use rustc::hir::def::Def;\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::NodeId;\n use syntax::source_map::Span;\n use crate::utils::span_lint;"}, {"sha": "56b99aa9449b77d81931ad6667beeaa8ddc56d7a", "filename": "clippy_lints/src/enum_variants.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_variants.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! lint on enum variants that are prefixed or suffixed by the same characters\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, Lint};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use syntax::source_map::Span;\n use syntax::symbol::LocalInternedString;\n@@ -147,7 +147,7 @@ fn partial_rmatch(post: &str, name: &str) -> usize {\n }\n \n // FIXME: #600\n-#[allow(while_let_on_iterator)]\n+#[allow(clippy::while_let_on_iterator)]\n fn check_variant(\n     cx: &EarlyContext<'_>,\n     threshold: u64,"}, {"sha": "b6b342044806f5f66686617d9c917029693abaef", "filename": "clippy_lints/src/eq_op.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feq_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feq_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feq_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use crate::utils::{in_macro, implements_trait, is_copy, multispan_sugg, snippet, span_lint, span_lint_and_then, SpanlessEq};\n \n /// **What it does:** Checks for equal operands to comparison, logical and\n@@ -83,7 +83,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for EqOp {\n                 BinOpKind::Lt | BinOpKind::Le | BinOpKind::Ge | BinOpKind::Gt => (cx.tcx.lang_items().ord_trait(), true),\n             };\n             if let Some(trait_id) = trait_id {\n-                #[allow(match_same_arms)]\n+                #[allow(clippy::match_same_arms)]\n                 match (&left.node, &right.node) {\n                     // do not suggest to dereference literals\n                     (&ExprKind::Lit(..), _) | (_, &ExprKind::Lit(..)) => {},"}, {"sha": "5b61a9fd8838ee17b5b05c789f01e7075bfb19ac", "filename": "clippy_lints/src/erasing_op.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ferasing_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ferasing_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ferasing_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::consts::{constant_simple, Constant};\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Span;\n use crate::utils::{in_macro, span_lint};\n "}, {"sha": "282149f81f9ea6a791beade4f582dd9b1f781eb8", "filename": "clippy_lints/src/escape.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fescape.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,7 @@\n use rustc::hir::*;\n use rustc::hir::intravisit as visit;\n-use rustc::hir::map::Node::{NodeExpr, NodeStmt};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::middle::expr_use_visitor::*;\n use rustc::middle::mem_categorization::{cmt_, Categorization};\n use rustc::ty::{self, Ty};\n@@ -100,7 +99,7 @@ impl<'a, 'tcx> Delegate<'tcx> for EscapeDelegate<'a, 'tcx> {\n         let map = &self.cx.tcx.hir;\n         if map.is_argument(consume_pat.id) {\n             // Skip closure arguments\n-            if let Some(NodeExpr(..)) = map.find(map.get_parent_node(consume_pat.id)) {\n+            if let Some(Node::Expr(..)) = map.find(map.get_parent_node(consume_pat.id)) {\n                 return;\n             }\n             if is_non_trait_box(cmt.ty) && !self.is_large_box(cmt.ty) {\n@@ -110,7 +109,7 @@ impl<'a, 'tcx> Delegate<'tcx> for EscapeDelegate<'a, 'tcx> {\n         }\n         if let Categorization::Rvalue(..) = cmt.cat {\n             let id = map.hir_to_node_id(cmt.hir_id);\n-            if let Some(NodeStmt(st)) = map.find(map.get_parent_node(id)) {\n+            if let Some(Node::Stmt(st)) = map.find(map.get_parent_node(id)) {\n                 if let StmtKind::Decl(ref decl, _) = st.node {\n                     if let DeclKind::Local(ref loc) = decl.node {\n                         if let Some(ref ex) = loc.init {"}, {"sha": "c4ffc70dbfd3d7336b592ccaa8b61a9fa1966051", "filename": "clippy_lints/src/eta_reduction.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feta_reduction.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feta_reduction.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feta_reduction.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use rustc::hir::*;\n use crate::utils::{is_adjusted, iter_input_pats, snippet_opt, span_lint_and_then};"}, {"sha": "e3ae560764560a4c46ff4943d07e5728edc24d1f", "filename": "clippy_lints/src/eval_order_dependence.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feval_order_dependence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Feval_order_dependence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feval_order_dependence.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n use rustc::hir::*;\n use rustc::ty;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast;\n use crate::utils::{get_parent_expr, span_lint, span_note_and_lint};\n@@ -109,7 +109,9 @@ impl<'a, 'tcx> DivergenceVisitor<'a, 'tcx> {\n                 self.visit_expr(e);\n                 for arm in arms {\n                     if let Some(ref guard) = arm.guard {\n-                        self.visit_expr(guard);\n+                        match guard {\n+                            Guard::If(if_expr) => self.visit_expr(if_expr),\n+                        }\n                     }\n                     // make sure top level arm expressions aren't linted\n                     self.maybe_walk_expr(&*arm.body);\n@@ -189,9 +191,9 @@ fn check_for_unsequenced_reads(vis: &mut ReadVisitor<'_, '_>) {\n         };\n \n         let stop_early = match parent_node {\n-            map::Node::NodeExpr(expr) => check_expr(vis, expr),\n-            map::Node::NodeStmt(stmt) => check_stmt(vis, stmt),\n-            map::Node::NodeItem(_) => {\n+            Node::Expr(expr) => check_expr(vis, expr),\n+            Node::Stmt(stmt) => check_stmt(vis, stmt),\n+            Node::Item(_) => {\n                 // We reached the top of the function, stop.\n                 break;\n             },"}, {"sha": "e5809371e8397f6b6a83967cef55e6efb8db9b0f", "filename": "clippy_lints/src/excessive_precision.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fexcessive_precision.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fexcessive_precision.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fexcessive_precision.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::TyKind;\n use std::f32;"}, {"sha": "77c6c1a4ad715edb70450cbd9926ff9822d73e86", "filename": "clippy_lints/src/explicit_write.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fexplicit_write.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fexplicit_write.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fexplicit_write.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use crate::utils::{is_expn_of, match_def_path, resolve_node, span_lint};\n use crate::utils::opt_def_id;"}, {"sha": "88eb880311e43a839ff527abf81c44f51498d661", "filename": "clippy_lints/src/fallible_impl_from.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ffallible_impl_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ffallible_impl_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffallible_impl_from.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir;\n use rustc::ty;"}, {"sha": "c10d554660a733c1c2b5dc51c723ec52043f6080", "filename": "clippy_lints/src/format.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use syntax::ast::LitKind;"}, {"sha": "8b20aeed108c35b7285fe2081a4def85dd70b8dd", "filename": "clippy_lints/src/formatting.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fformatting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fformatting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformatting.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast;\n use crate::utils::{differing_macro_contexts, in_macro, snippet_opt, span_note_and_lint};\n use syntax::ptr::P;"}, {"sha": "c170b0a1e152d407edd0e9068733ec74a0a64d33", "filename": "clippy_lints/src/functions.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n use matches::matches;\n use rustc::hir::intravisit;\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use rustc::hir::def::Def;\n use std::collections::HashSet;\n@@ -85,9 +85,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Functions {\n         span: Span,\n         nodeid: ast::NodeId,\n     ) {\n-        use rustc::hir::map::Node::*;\n-\n-        let is_impl = if let Some(NodeItem(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(nodeid)) {\n+        let is_impl = if let Some(hir::Node::Item(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(nodeid)) {\n             matches!(item.node, hir::ItemKind::Impl(_, _, _, _, Some(_), _, _))\n         } else {\n             false"}, {"sha": "6adf2cd681490ab0d6b664ad5ed1a70eb79fdbd2", "filename": "clippy_lints/src/identity_conversion.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fidentity_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fidentity_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fidentity_conversion.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use syntax::ast::NodeId;\n use crate::utils::{in_macro, match_def_path, match_trait_method, same_tys, snippet, span_lint_and_then};"}, {"sha": "052275d7a4533e3cf2160e570dff320009028a2f", "filename": "clippy_lints/src/identity_op.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fidentity_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fidentity_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fidentity_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::consts::{constant_simple, Constant};\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Span;\n use crate::utils::{in_macro, snippet, span_lint, unsext, clip};\n use rustc::ty;\n@@ -59,7 +59,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for IdentityOp {\n     }\n }\n \n-#[allow(cast_possible_wrap)]\n+#[allow(clippy::cast_possible_wrap)]\n fn check(cx: &LateContext<'_, '_>, e: &Expr, m: i8, span: Span, arg: Span) {\n     if let Some(Constant::Int(v)) = constant_simple(cx, cx.tables, e) {\n         let check = match cx.tables.expr_ty(e).sty {"}, {"sha": "253d295567c4a4934be080bf834ec07ae526dc57", "filename": "clippy_lints/src/if_let_redundant_pattern_matching.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fif_let_redundant_pattern_matching.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fif_let_redundant_pattern_matching.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fif_let_redundant_pattern_matching.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use crate::utils::{match_qpath, paths, snippet, span_lint_and_then};\n "}, {"sha": "3bfde1fd20d40bf85ddbf45404bcfdf0a137f256", "filename": "clippy_lints/src/if_not_else.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fif_not_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fif_not_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fif_not_else.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! lint on if branches that could be swapped so no `!` operation is necessary\n //! on the condition\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n \n use crate::utils::span_help_and_lint;"}, {"sha": "bca4844aae7ed0eabb53afd981a1e9ff2ab385b3", "filename": "clippy_lints/src/indexing_slicing.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Findexing_slicing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Findexing_slicing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Findexing_slicing.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -5,8 +5,8 @@ use crate::utils;\n use crate::utils::higher;\n use crate::utils::higher::Range;\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use syntax::ast::RangeLimits;\n "}, {"sha": "208f2ec53797ada09a00a00f5d66c6b51fc7e571", "filename": "clippy_lints/src/infallible_destructuring_match.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finfallible_destructuring_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finfallible_destructuring_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finfallible_destructuring_match.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use super::utils::{get_arg_name, match_var, remove_blocks, snippet, span_lint_and_sugg};\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n \n /// **What it does:** Checks for matches being used to destructure a single-variant enum"}, {"sha": "bb33c48fc3fb8a6823c8c81bad1016cde1226444", "filename": "clippy_lints/src/infinite_iter.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finfinite_iter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finfinite_iter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finfinite_iter.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use crate::utils::{get_trait_def_id, higher, implements_trait, match_qpath, paths, span_lint};\n \n /// **What it does:** Checks for iteration that is guaranteed to be infinite."}, {"sha": "4ca812e56bd206eb5914d5b1412b28955632ff41", "filename": "clippy_lints/src/inherent_impl.rs", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finherent_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finherent_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finherent_impl.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,11 +1,12 @@\n //! lint on inherent implementations\n \n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use std::collections::HashMap;\n use std::default::Default;\n use syntax_pos::Span;\n+use crate::utils::span_lint_and_then;\n \n /// **What it does:** Checks for multiple inherent implementations of a struct\n ///\n@@ -81,12 +82,17 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n                     .map(|(span, _)| span);\n                 if let Some(initial_span) = impl_spans.nth(0) {\n                     impl_spans.for_each(|additional_span| {\n-                        cx.span_lint_note(\n+                        span_lint_and_then(\n+                            cx,\n                             MULTIPLE_INHERENT_IMPL,\n                             *additional_span,\n                             \"Multiple implementations of this structure\",\n-                            *initial_span,\n-                            \"First implementation here\",\n+                            |db| {\n+                                db.span_note(\n+                                    *initial_span,\n+                                    \"First implementation here\",\n+                                );\n+                            },\n                         )\n                     })\n                 }"}, {"sha": "4dcc4ed473d18b78f5cbdb92b81cb5a78144f4bd", "filename": "clippy_lints/src/inline_fn_without_body.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finline_fn_without_body.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finline_fn_without_body.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finline_fn_without_body.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! checks for `#[inline]` on trait methods without bodies\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use syntax::ast::{Attribute, Name};\n use crate::utils::span_lint_and_then;"}, {"sha": "f94461b75a587324869158f86b3864e4f7d2d723", "filename": "clippy_lints/src/int_plus_one.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fint_plus_one.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fint_plus_one.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fint_plus_one.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! lint on blocks unnecessarily using >= with a + 1 or - 1\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n \n use crate::utils::{snippet_opt, span_lint_and_then};\n@@ -53,7 +53,7 @@ enum Side {\n }\n \n impl IntPlusOne {\n-    #[allow(cast_sign_loss)]\n+    #[allow(clippy::cast_sign_loss)]\n     fn check_lit(&self, lit: &Lit, target_value: i128) -> bool {\n         if let LitKind::Int(value, ..) = lit.node {\n             return value == (target_value as u128);"}, {"sha": "34a8939e104473ff71496d372510f6f8b6d78556", "filename": "clippy_lints/src/invalid_ref.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finvalid_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Finvalid_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finvalid_ref.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use rustc::hir::*;"}, {"sha": "9fe70882c867b4a0cf5c0af580d38ef624ed02b1", "filename": "clippy_lints/src/items_after_statements.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fitems_after_statements.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fitems_after_statements.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! lint when items are used after statements\n \n use matches::matches;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use crate::utils::{in_macro, span_lint};\n "}, {"sha": "63201bb2e45ca229243cbdbaa26f2b0b06d75c7c", "filename": "clippy_lints/src/large_enum_variant.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flarge_enum_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flarge_enum_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flarge_enum_variant.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! lint when there is a large size difference between variants on an enum\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use crate::utils::{snippet_opt, span_lint_and_then};\n use rustc::ty::layout::LayoutOf;"}, {"sha": "4c9c219828da2b4ccecd907c2202890936c6f276", "filename": "clippy_lints/src/len_zero.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flen_zero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flen_zero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flen_zero.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use rustc::hir::def_id::DefId;\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use std::collections::HashSet;\n use syntax::ast::{Lit, LitKind, Name};"}, {"sha": "8b4e2b0dec8085bc8cf27b429ec1d87e90b6225d", "filename": "clippy_lints/src/let_if_seq.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_if_seq.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir;\n use rustc::hir::BindingAnnotation;"}, {"sha": "adc4f76fef94900be910a14ea2642242633d8bbf", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 29, "deletions": 24, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -5,9 +5,10 @@\n #![feature(slice_patterns)]\n #![feature(stmt_expr_attributes)]\n #![feature(range_contains)]\n-#![allow(unknown_lints, shadow_reuse, missing_docs_in_private_items)]\n+#![allow(unknown_lints, clippy::shadow_reuse, clippy::missing_docs_in_private_items)]\n #![recursion_limit = \"256\"]\n #![feature(macro_at_most_once_rep)]\n+#![feature(tool_lints)]\n #![warn(rust_2018_idioms)]\n \n use toml;\n@@ -17,40 +18,40 @@ use rustc;\n \n macro_rules! declare_clippy_lint {\n     { pub $name:tt, style, $description:tt } => {\n-        declare_lint! { pub $name, Warn, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Warn, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, correctness, $description:tt } => {\n-        declare_lint! { pub $name, Deny, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Deny, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, complexity, $description:tt } => {\n-        declare_lint! { pub $name, Warn, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Warn, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, perf, $description:tt } => {\n-        declare_lint! { pub $name, Warn, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Warn, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, pedantic, $description:tt } => {\n-        declare_lint! { pub $name, Allow, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Allow, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, restriction, $description:tt } => {\n-        declare_lint! { pub $name, Allow, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Allow, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, cargo, $description:tt } => {\n-        declare_lint! { pub $name, Allow, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Allow, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, nursery, $description:tt } => {\n-        declare_lint! { pub $name, Allow, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Allow, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, internal, $description:tt } => {\n-        declare_lint! { pub $name, Allow, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Allow, $description, report_in_external_macro: true }\n     };\n     { pub $name:tt, internal_warn, $description:tt } => {\n-        declare_lint! { pub $name, Warn, $description, report_in_external_macro: true }\n+        declare_tool_lint! { pub clippy::$name, Warn, $description, report_in_external_macro: true }\n     };\n }\n \n-pub mod consts;\n+mod consts;\n #[macro_use]\n-pub mod utils;\n+mod utils;\n \n // begin lints modules, do not remove this comment, it\u2019s used in `update_lints`\n pub mod approx_const;\n@@ -142,6 +143,7 @@ pub mod panic_unimplemented;\n pub mod partialeq_ne_impl;\n pub mod precedence;\n pub mod ptr;\n+pub mod ptr_offset_with_cast;\n pub mod question_mark;\n pub mod ranges;\n pub mod redundant_field_names;\n@@ -408,8 +410,9 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n     reg.register_late_lint_pass(box default_trait_access::DefaultTraitAccess);\n     reg.register_late_lint_pass(box indexing_slicing::IndexingSlicing);\n     reg.register_late_lint_pass(box non_copy_const::NonCopyConst);\n+    reg.register_late_lint_pass(box ptr_offset_with_cast::Pass);\n \n-    reg.register_lint_group(\"clippy_restriction\", vec![\n+    reg.register_lint_group(\"clippy::restriction\", Some(\"clippy_restriction\"), vec![\n         arithmetic::FLOAT_ARITHMETIC,\n         arithmetic::INTEGER_ARITHMETIC,\n         else_if_without_else::ELSE_IF_WITHOUT_ELSE,\n@@ -432,7 +435,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         write::USE_DEBUG,\n     ]);\n \n-    reg.register_lint_group(\"clippy_pedantic\", vec![\n+    reg.register_lint_group(\"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n         attrs::INLINE_ALWAYS,\n         copies::MATCH_SAME_ARMS,\n         copy_iterator::COPY_ITERATOR,\n@@ -470,13 +473,13 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         use_self::USE_SELF,\n     ]);\n \n-    reg.register_lint_group(\"clippy_internal\", vec![\n+    reg.register_lint_group(\"clippy::internal\", Some(\"clippy_internal\"), vec![\n         utils::internal_lints::CLIPPY_LINTS_INTERNAL,\n         utils::internal_lints::LINT_WITHOUT_LINT_PASS,\n         utils::internal_lints::DEFAULT_HASH_TYPES,\n     ]);\n \n-    reg.register_lint_group(\"clippy\", vec![\n+    reg.register_lint_group(\"clippy::all\", Some(\"clippy\"), vec![\n         approx_const::APPROX_CONSTANT,\n         assign_ops::ASSIGN_OP_PATTERN,\n         assign_ops::MISREFACTORED_ASSIGN_OP,\n@@ -631,6 +634,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         ptr::CMP_NULL,\n         ptr::MUT_FROM_REF,\n         ptr::PTR_ARG,\n+        ptr_offset_with_cast::PTR_OFFSET_WITH_CAST,\n         question_mark::QUESTION_MARK,\n         ranges::ITERATOR_STEP_BY_ZERO,\n         ranges::RANGE_MINUS_ONE,\n@@ -690,7 +694,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         zero_div_zero::ZERO_DIVIDED_BY_ZERO,\n     ]);\n \n-    reg.register_lint_group(\"clippy_style\", vec![\n+    reg.register_lint_group(\"clippy::style\", Some(\"clippy_style\"), vec![\n         assign_ops::ASSIGN_OP_PATTERN,\n         bit_mask::VERBOSE_BIT_MASK,\n         blacklisted_name::BLACKLISTED_NAME,\n@@ -774,7 +778,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         write::WRITELN_EMPTY_STRING,\n     ]);\n \n-    reg.register_lint_group(\"clippy_complexity\", vec![\n+    reg.register_lint_group(\"clippy::complexity\", Some(\"clippy_complexity\"), vec![\n         assign_ops::MISREFACTORED_ASSIGN_OP,\n         booleans::NONMINIMAL_BOOL,\n         cyclomatic_complexity::CYCLOMATIC_COMPLEXITY,\n@@ -815,6 +819,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         overflow_check_conditional::OVERFLOW_CHECK_CONDITIONAL,\n         partialeq_ne_impl::PARTIALEQ_NE_IMPL,\n         precedence::PRECEDENCE,\n+        ptr_offset_with_cast::PTR_OFFSET_WITH_CAST,\n         ranges::RANGE_MINUS_ONE,\n         ranges::RANGE_PLUS_ONE,\n         ranges::RANGE_ZIP_WITH_LEN,\n@@ -841,7 +846,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         zero_div_zero::ZERO_DIVIDED_BY_ZERO,\n     ]);\n \n-    reg.register_lint_group(\"clippy_correctness\", vec![\n+    reg.register_lint_group(\"clippy::correctness\", Some(\"clippy_correctness\"), vec![\n         approx_const::APPROX_CONSTANT,\n         attrs::DEPRECATED_SEMVER,\n         attrs::USELESS_ATTRIBUTE,\n@@ -895,7 +900,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         unused_io_amount::UNUSED_IO_AMOUNT,\n     ]);\n \n-    reg.register_lint_group(\"clippy_perf\", vec![\n+    reg.register_lint_group(\"clippy::perf\", Some(\"clippy_perf\"), vec![\n         bytecount::NAIVE_BYTECOUNT,\n         entry::MAP_ENTRY,\n         escape::BOXED_LOCAL,\n@@ -913,11 +918,11 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         vec::USELESS_VEC,\n     ]);\n \n-    reg.register_lint_group(\"clippy_cargo\", vec![\n+    reg.register_lint_group(\"clippy::cargo\", Some(\"clippy_cargo\"), vec![\n         multiple_crate_versions::MULTIPLE_CRATE_VERSIONS,\n     ]);\n \n-    reg.register_lint_group(\"clippy_nursery\", vec![\n+    reg.register_lint_group(\"clippy::nursery\", Some(\"clippy_nursery\"), vec![\n         attrs::EMPTY_LINE_AFTER_OUTER_ATTR,\n         fallible_impl_from::FALLIBLE_IMPL_FROM,\n         mutex_atomic::MUTEX_INTEGER,\n@@ -929,7 +934,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n \n // only exists to let the dogfood integration test works.\n // Don't run clippy as an executable directly\n-#[allow(dead_code, print_stdout)]\n+#[allow(dead_code, clippy::print_stdout)]\n fn main() {\n     panic!(\"Please use the cargo-clippy executable\");\n }"}, {"sha": "beec9bac9403e786730f430cc0ab174add484c1d", "filename": "clippy_lints/src/lifetimes.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flifetimes.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use crate::reexport::*;\n use matches::matches;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::def::Def;\n use rustc::hir::*;\n use rustc::hir::intravisit::*;"}, {"sha": "dcffba80b3b6cd7ced1f00fab34025bd3b268b60", "filename": "clippy_lints/src/literal_representation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fliteral_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fliteral_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fliteral_representation.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n //! Lints concerned with the grouping of digits with underscores in integral or\n //! floating-point literal expressions.\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast::*;\n use syntax_pos;"}, {"sha": "51e6327e728b4310498b2ab11870440d54c5df70", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,9 +4,8 @@ use rustc::hir::*;\n use rustc::hir::def::Def;\n use rustc::hir::def_id;\n use rustc::hir::intravisit::{walk_block, walk_decl, walk_expr, walk_pat, walk_stmt, NestedVisitorMap, Visitor};\n-use rustc::hir::map::Node::{NodeBlock, NodeExpr, NodeStmt};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::middle::region;\n // use rustc::middle::region::CodeExtent;\n@@ -1330,7 +1329,7 @@ fn check_for_loop_explicit_counter<'a, 'tcx>(\n     let parent_scope = map.get_enclosing_scope(expr.id)\n         .and_then(|id| map.get_enclosing_scope(id));\n     if let Some(parent_id) = parent_scope {\n-        if let NodeBlock(block) = map.get(parent_id) {\n+        if let Node::Block(block) = map.get(parent_id) {\n             for (id, _) in visitor\n                 .states\n                 .iter()\n@@ -1506,7 +1505,7 @@ fn check_for_mutability(cx: &LateContext<'_, '_>, bound: &Expr) -> Option<NodeId\n             if let Def::Local(node_id) = def {\n                 let node_str = cx.tcx.hir.get(node_id);\n                 if_chain! {\n-                    if let map::Node::NodeBinding(pat) = node_str;\n+                    if let Node::Binding(pat) = node_str;\n                     if let PatKind::Binding(bind_ann, _, _, _) = pat.node;\n                     if let BindingAnnotation::Mutable = bind_ann;\n                     then {\n@@ -2047,7 +2046,7 @@ fn is_conditional(expr: &Expr) -> bool {\n fn is_nested(cx: &LateContext<'_, '_>, match_expr: &Expr, iter_expr: &Expr) -> bool {\n     if_chain! {\n         if let Some(loop_block) = get_enclosing_block(cx, match_expr.id);\n-        if let Some(map::Node::NodeExpr(loop_expr)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(loop_block.id));\n+        if let Some(Node::Expr(loop_expr)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(loop_block.id));\n         then {\n             return is_loop_nested(cx, loop_expr, iter_expr)\n         }\n@@ -2068,13 +2067,13 @@ fn is_loop_nested(cx: &LateContext<'_, '_>, loop_expr: &Expr, iter_expr: &Expr)\n             return false;\n         }\n         match cx.tcx.hir.find(parent) {\n-            Some(NodeExpr(expr)) => match expr.node {\n+            Some(Node::Expr(expr)) => match expr.node {\n                 ExprKind::Loop(..) | ExprKind::While(..) => {\n                     return true;\n                 },\n                 _ => (),\n             },\n-            Some(NodeBlock(block)) => {\n+            Some(Node::Block(block)) => {\n                 let mut block_visitor = LoopNestVisitor {\n                     id,\n                     iterator: iter_name,\n@@ -2085,7 +2084,7 @@ fn is_loop_nested(cx: &LateContext<'_, '_>, loop_expr: &Expr, iter_expr: &Expr)\n                     return false;\n                 }\n             },\n-            Some(NodeStmt(_)) => (),\n+            Some(Node::Stmt(_)) => (),\n             _ => {\n                 return false;\n             },"}, {"sha": "1a501b39eb55530f163300d0bbe99743ab1af0c1", "filename": "clippy_lints/src/map_clone.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmap_clone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmap_clone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmap_clone.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use rustc::ty;"}, {"sha": "90f149a1c01d380768e5c700949e80c62e82b858", "filename": "clippy_lints/src/map_unit_fn.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmap_unit_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmap_unit_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmap_unit_fn.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use rustc_errors::Applicability;"}, {"sha": "3ecf5d3b5b854818c111f2714240c1648eb2ccff", "filename": "clippy_lints/src/matches.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmatches.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use std::cmp::Ordering;"}, {"sha": "8a56dccad2dd9b8f833dc9ef19e95a55d6d2e8a7", "filename": "clippy_lints/src/mem_forget.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmem_forget.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmem_forget.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmem_forget.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::{Expr, ExprKind};\n use crate::utils::{match_def_path, opt_def_id, paths, span_lint};\n "}, {"sha": "f428a498b4dab8658b61a007f8bd40783dbbe50e", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use matches::matches;\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, Lint, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use rustc::hir::def::Def;\n@@ -714,7 +714,7 @@ impl LintPass for Pass {\n }\n \n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n-    #[allow(cyclomatic_complexity)]\n+    #[allow(clippy::cyclomatic_complexity)]\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, expr: &'tcx hir::Expr) {\n         if in_macro(expr.span) {\n             return;\n@@ -922,7 +922,7 @@ fn lint_or_fun_call(cx: &LateContext<'_, '_>, expr: &hir::Expr, method_span: Spa\n     }\n \n     /// Check for `*or(foo())`.\n-    #[allow(too_many_arguments)]\n+    #[allow(clippy::too_many_arguments)]\n     fn check_general_case(\n         cx: &LateContext<'_, '_>,\n         name: &str,\n@@ -1145,14 +1145,14 @@ fn lint_clone_on_copy(cx: &LateContext<'_, '_>, expr: &hir::Expr, arg: &hir::Exp\n             if let ty::Ref(..) = cx.tables.expr_ty(arg).sty {\n                 let parent = cx.tcx.hir.get_parent_node(expr.id);\n                 match cx.tcx.hir.get(parent) {\n-                    hir::map::NodeExpr(parent) => match parent.node {\n+                    hir::Node::Expr(parent) => match parent.node {\n                         // &*x is a nop, &x.clone() is not\n                         hir::ExprKind::AddrOf(..) |\n                         // (*x).func() is useless, x.clone().func() can work in case func borrows mutably\n                         hir::ExprKind::MethodCall(..) => return,\n                         _ => {},\n                     }\n-                    hir::map::NodeStmt(stmt) => {\n+                    hir::Node::Stmt(stmt) => {\n                         if let hir::StmtKind::Decl(ref decl, _) = stmt.node {\n                             if let hir::DeclKind::Local(ref loc) = decl.node {\n                                 if let hir::PatKind::Ref(..) = loc.pat.node {"}, {"sha": "bbbc022f08dd636c9a30c634e309908f063ed828", "filename": "clippy_lints/src/minmax.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fminmax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fminmax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fminmax.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n use crate::consts::{constant_simple, Constant};\n use crate::utils::{match_def_path, opt_def_id, paths, span_lint};\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use std::cmp::Ordering;\n \n /// **What it does:** Checks for expressions where `std::cmp::min` and `max` are"}, {"sha": "302af13630b07d623565281f9cae207261952574", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@ use crate::reexport::*;\n use matches::matches;\n use rustc::hir::*;\n use rustc::hir::intravisit::FnKind;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use syntax::source_map::{ExpnFormat, Span};\n@@ -522,7 +522,7 @@ fn check_to_owned(cx: &LateContext<'_, '_>, expr: &Expr, other: &Expr) {\n             let parent_fn = cx.tcx.hir.get_parent(expr.id);\n             let parent_impl = cx.tcx.hir.get_parent(parent_fn);\n             if parent_impl != CRATE_NODE_ID {\n-                if let map::NodeItem(item) = cx.tcx.hir.get(parent_impl) {\n+                if let Node::Item(item) = cx.tcx.hir.get(parent_impl) {\n                     if let ItemKind::Impl(.., Some(ref trait_ref), _, _) = item.node {\n                         if trait_ref.path.def.def_id() == partial_eq_trait_id {\n                             // we are implementing PartialEq, don't suggest not doing `to_owned`, otherwise"}, {"sha": "c00b3d93c47529d80801f7dccae59cf65f7614dc", "filename": "clippy_lints/src/misc_early.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmisc_early.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmisc_early.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc_early.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, LintContext, in_external_macro};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use std::collections::HashMap;\n use std::char;"}, {"sha": "f56a8fcd8b5c33a22fdcff59ea2bb187ae2ac46d", "filename": "clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_doc.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -19,13 +19,13 @@\n //\n \n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use syntax::ast;\n use syntax::attr;\n use syntax::source_map::Span;\n-use crate::utils::in_macro;\n+use crate::utils::{span_lint, in_macro};\n \n /// **What it does:** Warns if there is missing doc for any documentable item\n /// (public or private).\n@@ -87,7 +87,8 @@ impl MissingDoc {\n             .iter()\n             .any(|a| a.is_value_str() && a.name() == \"doc\");\n         if !has_doc {\n-            cx.span_lint(\n+            span_lint(\n+                cx,\n                 MISSING_DOCS_IN_PRIVATE_ITEMS,\n                 sp,\n                 &format!(\"missing documentation for {}\", desc),"}, {"sha": "bf88caa6ab9e030bc1ad821a5eac3b5458fc745f", "filename": "clippy_lints/src/missing_inline.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmissing_inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmissing_inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_inline.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -10,10 +10,11 @@\n //\n \n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast;\n use syntax::source_map::Span;\n+use crate::utils::span_lint;\n \n /// **What it does:** it lints if an exported function, method, trait method with default impl,\n /// or trait method impl is not `#[inline]`.\n@@ -74,7 +75,8 @@ fn check_missing_inline_attrs(cx: &LateContext<'_, '_>,\n         .iter()\n         .any(|a| a.name() == \"inline\" );\n     if !has_inline {\n-        cx.span_lint(\n+        span_lint(\n+            cx,\n             MISSING_INLINE_IN_PUBLIC_ITEMS,\n             sp,\n             &format!(\"missing `#[inline]` for {}\", desc),"}, {"sha": "a2ed6a1dea10014f4bce9fce9f1cc8f04676aa87", "filename": "clippy_lints/src/multiple_crate_versions.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,9 @@\n //! lint on multiple versions of a crate being used\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n+use crate::utils::span_lint;\n \n use cargo_metadata;\n use itertools::Itertools;\n@@ -43,7 +44,8 @@ impl EarlyLintPass for Pass {\n         let metadata = match cargo_metadata::metadata_deps(None, true) {\n             Ok(metadata) => metadata,\n             Err(_) => {\n-                cx.span_lint(\n+                span_lint(\n+                    cx,\n                     MULTIPLE_CRATE_VERSIONS,\n                     krate.span,\n                     \"could not read cargo metadata\"\n@@ -62,7 +64,8 @@ impl EarlyLintPass for Pass {\n             if group.len() > 1 {\n                 let versions = group.into_iter().map(|p| p.version).join(\", \");\n \n-                cx.span_lint(\n+                span_lint(\n+                    cx,\n                     MULTIPLE_CRATE_VERSIONS,\n                     krate.span,\n                     &format!(\"multiple versions for dependency `{}`: {}\", name, versions),"}, {"sha": "ea3d68dfc8333f7fae820cdd948d1d5397b26911", "filename": "clippy_lints/src/mut_mut.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmut_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmut_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmut_mut.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use rustc::hir;\n use rustc::hir::intravisit;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use crate::utils::{higher, span_lint};\n "}, {"sha": "97287aa833f4a1bf0ad577b2a3722dc9bb349bb0", "filename": "clippy_lints/src/mut_reference.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmut_reference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmut_reference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmut_reference.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty::{self, Ty};\n use rustc::ty::subst::Subst;\n use rustc::hir::*;"}, {"sha": "cb400ee4ee399d6a893437e95cb75b6b478a14ad", "filename": "clippy_lints/src/mutex_atomic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmutex_atomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fmutex_atomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmutex_atomic.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -3,7 +3,7 @@\n //! This lint is **warn** by default\n \n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty::{self, Ty};\n use rustc::hir::Expr;\n use syntax::ast;"}, {"sha": "5b9a479c1fc6c0f2f88e64043fd6ac089de63d56", "filename": "clippy_lints/src/needless_bool.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_bool.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@\n //!\n //! This lint is **warn** by default\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use syntax::ast::LitKind;\n use syntax::source_map::Spanned;"}, {"sha": "a194cb2c61b896777723c27d1ecb7de07ffafc7b", "filename": "clippy_lints/src/needless_borrow.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_borrow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_borrow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_borrow.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@\n //!\n //! This lint is **warn** by default\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::{BindingAnnotation, Expr, ExprKind, MutImmutable, Pat, PatKind};\n use rustc::ty;"}, {"sha": "4905dbc8e6b0feda2165828a3fc328ca2e47d886", "filename": "clippy_lints/src/needless_borrowed_ref.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_borrowed_ref.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@\n //!\n //! This lint is **warn** by default\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::{BindingAnnotation, MutImmutable, Pat, PatKind};\n use crate::utils::{in_macro, snippet, span_lint_and_then};"}, {"sha": "e14cd0fea897d4cba1a6d013500ade0479107822", "filename": "clippy_lints/src/needless_continue.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_continue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_continue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_continue.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -27,8 +27,8 @@\n //! ```\n //!\n //! This lint is **warn** by default.\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast;\n use syntax::source_map::{original_sp, DUMMY_SP};\n use std::borrow::Cow;"}, {"sha": "340fa4d0ee0dada7622a8d1dbe712a099ad53bfa", "filename": "clippy_lints/src/needless_pass_by_value.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,8 @@\n use matches::matches;\n use rustc::hir::*;\n-use rustc::hir::map::*;\n use rustc::hir::intravisit::FnKind;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, RegionKind, TypeFoldable};\n use rustc::traits;\n@@ -90,7 +89,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NeedlessPassByValue {\n         }\n \n         // Exclude non-inherent impls\n-        if let Some(NodeItem(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(node_id)) {\n+        if let Some(Node::Item(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(node_id)) {\n             if matches!(item.node, ItemKind::Impl(_, _, _, _, Some(_), _, _) |\n                 ItemKind::Trait(..))\n             {\n@@ -340,7 +339,7 @@ impl<'a, 'tcx> MovedVariablesCtxt<'a, 'tcx> {\n \n                 if let Some(node) = self.cx.tcx.hir.find(id) {\n                     match node {\n-                        map::Node::NodeExpr(e) => {\n+                        Node::Expr(e) => {\n                             // `match` and `if let`\n                             if let ExprKind::Match(ref c, ..) = e.node {\n                                 self.spans_need_deref\n@@ -350,7 +349,7 @@ impl<'a, 'tcx> MovedVariablesCtxt<'a, 'tcx> {\n                             }\n                         },\n \n-                        map::Node::NodeStmt(s) => {\n+                        Node::Stmt(s) => {\n                             // `let <pat> = x;`\n                             if_chain! {\n                                 if let StmtKind::Decl(ref decl, _) = s.node;"}, {"sha": "dccb7f2e0373b0c4c99363097babfabc1eda1c8e", "filename": "clippy_lints/src/needless_update.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_update.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneedless_update.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_update.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::ty;\n use rustc::hir::{Expr, ExprKind};\n use crate::utils::span_lint;"}, {"sha": "db61ea375c38a5f2c9b5ad034f0a5ebe8223ac95", "filename": "clippy_lints/src/neg_cmp_op_on_partial_ord.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneg_cmp_op_on_partial_ord.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneg_cmp_op_on_partial_ord.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneg_cmp_op_on_partial_ord.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n \n use crate::utils::{self, paths, span_lint};\n@@ -20,7 +20,7 @@ use crate::utils::{self, paths, span_lint};\n ///\n /// ```rust\n /// use std::cmp::Ordering;\n-/// \n+///\n /// // Bad\n /// let a = 1.0;\n /// let b = std::f64::NAN;"}, {"sha": "93a83fe97ba78963348516cab49299ae1e9d1cc2", "filename": "clippy_lints/src/neg_multiply.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneg_multiply.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fneg_multiply.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneg_multiply.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::source_map::{Span, Spanned};\n \n@@ -32,7 +32,7 @@ impl LintPass for NegMultiply {\n     }\n }\n \n-#[allow(match_same_arms)]\n+#[allow(clippy::match_same_arms)]\n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NegMultiply {\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, e: &'tcx Expr) {\n         if let ExprKind::Binary(Spanned { node: BinOpKind::Mul, .. }, ref l, ref r) = e.node {"}, {"sha": "493e8d0f4ce5441212ffdd5806a0f9e68775416c", "filename": "clippy_lints/src/new_without_default.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnew_without_default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnew_without_default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnew_without_default.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use rustc::hir::def_id::DefId;\n use rustc::hir;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use syntax::source_map::Span;"}, {"sha": "09a273307503cad89f0333199e2dea26c10d72af", "filename": "clippy_lints/src/no_effect.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fno_effect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fno_effect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fno_effect.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::def::Def;\n use rustc::hir::{BinOpKind, BlockCheckMode, Expr, ExprKind, Stmt, StmtKind, UnsafeSource};\n use crate::utils::{has_drop, in_macro, snippet_opt, span_lint, span_lint_and_sugg};"}, {"sha": "deb088d3ea4bff79c259b55e8bd4f393442a6a16", "filename": "clippy_lints/src/non_copy_const.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnon_copy_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_copy_const.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -3,7 +3,7 @@\n //! This lint is **deny** by default.\n \n use rustc::lint::{LateContext, LateLintPass, Lint, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::hir::def::Def;\n use rustc::ty::{self, TypeFlags};\n@@ -212,7 +212,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NonCopyConst {\n                 if parent_id == cur_expr.id {\n                     break;\n                 }\n-                if let Some(map::NodeExpr(parent_expr)) = cx.tcx.hir.find(parent_id) {\n+                if let Some(Node::Expr(parent_expr)) = cx.tcx.hir.find(parent_id) {\n                     match &parent_expr.node {\n                         ExprKind::AddrOf(..) => {\n                             // `&e` => `e` must be referenced"}, {"sha": "5e106cac96759f87bd47ceecf8104269cc956fbd", "filename": "clippy_lints/src/non_expressive_names.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnon_expressive_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fnon_expressive_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_expressive_names.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LintArray, LintPass, EarlyContext, EarlyLintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Span;\n use syntax::symbol::LocalInternedString;\n use syntax::ast::*;\n@@ -114,6 +114,9 @@ impl<'a, 'tcx: 'a, 'b> Visitor<'tcx> for SimilarNamesNameVisitor<'a, 'tcx, 'b> {\n             _ => walk_pat(self, pat),\n         }\n     }\n+    fn visit_mac(&mut self, _mac: &Mac) {\n+        // do not check macs\n+    }\n }\n \n fn get_whitelist(interned_name: &str) -> Option<&'static [&'static str]> {"}, {"sha": "651ed44110fb1eb1b7b43244a67d7b9c8e33c2b4", "filename": "clippy_lints/src/ok_if_let.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fok_if_let.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fok_if_let.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fok_if_let.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use crate::utils::{match_type, method_chain_args, paths, snippet, span_help_and_lint};"}, {"sha": "b5459059e90cda85f45c1fd64ef592dea9aa5dfb", "filename": "clippy_lints/src/open_options.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fopen_options.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fopen_options.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fopen_options.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::{Expr, ExprKind};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::LitKind;\n use syntax::source_map::{Span, Spanned};\n use crate::utils::{match_type, paths, span_lint, walk_ptrs_ty};"}, {"sha": "d33ef5e05d64015ef5c3b6992e44212b8857b2ad", "filename": "clippy_lints/src/overflow_check_conditional.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foverflow_check_conditional.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use crate::utils::{span_lint, SpanlessEq};"}, {"sha": "7a7fa3c456d960ad694cddd0f7e0e2a828416b8a", "filename": "clippy_lints/src/panic_unimplemented.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpanic_unimplemented.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast::LitKind;\n use syntax::ptr::P;"}, {"sha": "8b2e5f9c3569af1dbdb2bb4ad60c2d39819cdb42", "filename": "clippy_lints/src/partialeq_ne_impl.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpartialeq_ne_impl.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use crate::utils::{is_automatically_derived, span_lint};"}, {"sha": "0978a6b7d94929bf9d3b07c2e09726c411dab725", "filename": "clippy_lints/src/precedence.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fprecedence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fprecedence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fprecedence.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use syntax::source_map::Spanned;\n use crate::utils::{in_macro, snippet, span_lint_and_sugg};"}, {"sha": "94bbfb0e5b9d84835df98de2c7b3fc18cd091a60", "filename": "clippy_lints/src/ptr.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fptr.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,10 +2,9 @@\n \n use std::borrow::Cow;\n use rustc::hir::*;\n-use rustc::hir::map::NodeItem;\n use rustc::hir::QPath;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use syntax::ast::NodeId;\n@@ -112,7 +111,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for PointerPass {\n \n     fn check_impl_item(&mut self, cx: &LateContext<'a, 'tcx>, item: &'tcx ImplItem) {\n         if let ImplItemKind::Method(ref sig, body_id) = item.node {\n-            if let Some(NodeItem(it)) = cx.tcx.hir.find(cx.tcx.hir.get_parent(item.id)) {\n+            if let Some(Node::Item(it)) = cx.tcx.hir.find(cx.tcx.hir.get_parent(item.id)) {\n                 if let ItemKind::Impl(_, _, _, _, Some(_), _, _) = it.node {\n                     return; // ignore trait impls\n                 }"}, {"sha": "250a11dab88943248270397036f1abffded378ac", "filename": "clippy_lints/src/ptr_offset_with_cast.rs", "status": "added", "additions": 151, "deletions": 0, "changes": 151, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fptr_offset_with_cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fptr_offset_with_cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fptr_offset_with_cast.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -0,0 +1,151 @@\n+use rustc::{declare_tool_lint, hir, lint, lint_array};\n+use crate::utils;\n+use std::fmt;\n+\n+/// **What it does:** Checks for usage of the `offset` pointer method with a `usize` casted to an\n+/// `isize`.\n+///\n+/// **Why is this bad?** If we\u2019re always increasing the pointer address, we can avoid the numeric\n+/// cast by using the `add` method instead.\n+///\n+/// **Known problems:** None\n+///\n+/// **Example:**\n+/// ```rust\n+/// let vec = vec![b'a', b'b', b'c'];\n+/// let ptr = vec.as_ptr();\n+/// let offset = 1_usize;\n+///\n+/// unsafe { ptr.offset(offset as isize); }\n+/// ```\n+///\n+/// Could be written:\n+///\n+/// ```rust\n+/// let vec = vec![b'a', b'b', b'c'];\n+/// let ptr = vec.as_ptr();\n+/// let offset = 1_usize;\n+///\n+/// unsafe { ptr.add(offset); }\n+/// ```\n+declare_clippy_lint! {\n+    pub PTR_OFFSET_WITH_CAST,\n+    complexity,\n+    \"uneeded pointer offset cast\"\n+}\n+\n+#[derive(Copy, Clone, Debug)]\n+pub struct Pass;\n+\n+impl lint::LintPass for Pass {\n+    fn get_lints(&self) -> lint::LintArray {\n+        lint_array!(PTR_OFFSET_WITH_CAST)\n+    }\n+}\n+\n+impl<'a, 'tcx> lint::LateLintPass<'a, 'tcx> for Pass {\n+    fn check_expr(&mut self, cx: &lint::LateContext<'a, 'tcx>, expr: &'tcx hir::Expr) {\n+        // Check if the expressions is a ptr.offset or ptr.wrapping_offset method call\n+        let (receiver_expr, arg_expr, method) = match expr_as_ptr_offset_call(cx, expr) {\n+            Some(call_arg) => call_arg,\n+            None => return,\n+        };\n+\n+        // Check if the argument to the method call is a cast from usize\n+        let cast_lhs_expr = match expr_as_cast_from_usize(cx, arg_expr) {\n+            Some(cast_lhs_expr) => cast_lhs_expr,\n+            None => return,\n+        };\n+\n+        let msg = format!(\"use of `{}` with a `usize` casted to an `isize`\", method);\n+        if let Some(sugg) = build_suggestion(cx, method, receiver_expr, cast_lhs_expr) {\n+            utils::span_lint_and_sugg(cx, PTR_OFFSET_WITH_CAST, expr.span, &msg, \"try\", sugg);\n+        } else {\n+            utils::span_lint(cx, PTR_OFFSET_WITH_CAST, expr.span, &msg);\n+        }\n+\n+    }\n+}\n+\n+// If the given expression is a cast from a usize, return the lhs of the cast\n+fn expr_as_cast_from_usize<'a, 'tcx>(\n+    cx: &lint::LateContext<'a, 'tcx>,\n+    expr: &'tcx hir::Expr,\n+) -> Option<&'tcx hir::Expr> {\n+    if let hir::ExprKind::Cast(ref cast_lhs_expr, _) = expr.node {\n+        if is_expr_ty_usize(cx, &cast_lhs_expr) {\n+            return Some(cast_lhs_expr);\n+        }\n+    }\n+    None\n+}\n+\n+// If the given expression is a ptr::offset  or ptr::wrapping_offset method call, return the\n+// receiver, the arg of the method call, and the method.\n+fn expr_as_ptr_offset_call<'a, 'tcx>(\n+    cx: &lint::LateContext<'a, 'tcx>,\n+    expr: &'tcx hir::Expr,\n+) -> Option<(&'tcx hir::Expr, &'tcx hir::Expr, Method)> {\n+    if let hir::ExprKind::MethodCall(ref path_segment, _, ref args) = expr.node {\n+        if is_expr_ty_raw_ptr(cx, &args[0]) {\n+            if path_segment.ident.name == \"offset\" {\n+                return Some((&args[0], &args[1], Method::Offset));\n+            }\n+            if path_segment.ident.name == \"wrapping_offset\" {\n+                return Some((&args[0], &args[1], Method::WrappingOffset));\n+            }\n+        }\n+    }\n+    None\n+}\n+\n+// Is the type of the expression a usize?\n+fn is_expr_ty_usize<'a, 'tcx>(\n+    cx: &lint::LateContext<'a, 'tcx>,\n+    expr: &hir::Expr,\n+) -> bool {\n+    cx.tables.expr_ty(expr) == cx.tcx.types.usize\n+}\n+\n+// Is the type of the expression a raw pointer?\n+fn is_expr_ty_raw_ptr<'a, 'tcx>(\n+    cx: &lint::LateContext<'a, 'tcx>,\n+    expr: &hir::Expr,\n+) -> bool {\n+    cx.tables.expr_ty(expr).is_unsafe_ptr()\n+}\n+\n+fn build_suggestion<'a, 'tcx>(\n+    cx: &lint::LateContext<'a, 'tcx>,\n+    method: Method,\n+    receiver_expr: &hir::Expr,\n+    cast_lhs_expr: &hir::Expr,\n+) -> Option<String> {\n+    let receiver = utils::snippet_opt(cx, receiver_expr.span)?;\n+    let cast_lhs = utils::snippet_opt(cx, cast_lhs_expr.span)?;\n+    Some(format!(\"{}.{}({})\", receiver, method.suggestion(), cast_lhs))\n+}\n+\n+#[derive(Copy, Clone)]\n+enum Method {\n+    Offset,\n+    WrappingOffset,\n+}\n+\n+impl Method {\n+    fn suggestion(self) -> &'static str {\n+        match self {\n+            Method::Offset => \"add\",\n+            Method::WrappingOffset => \"wrapping_add\",\n+        }\n+    }\n+}\n+\n+impl fmt::Display for Method {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        match self {\n+            Method::Offset => write!(f, \"offset\"),\n+            Method::WrappingOffset => write!(f, \"wrapping_offset\"),\n+        }\n+    }\n+}"}, {"sha": "3134f14b194b5a65cb748fe2c85b69cc3b0ae29a", "filename": "clippy_lints/src/question_mark.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fquestion_mark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fquestion_mark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fquestion_mark.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use rustc::hir::def::Def;"}, {"sha": "95fd14162ace99df72f27fe70031233a50d8b72d", "filename": "clippy_lints/src/ranges.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Franges.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Franges.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Franges.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use syntax::ast::RangeLimits;"}, {"sha": "579d2ad1423b05470ff11cff764a37dca3a47e80", "filename": "clippy_lints/src/redundant_field_names.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fredundant_field_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fredundant_field_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_field_names.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use crate::utils::{span_lint_and_sugg};\n "}, {"sha": "98de8989597641d2d3eca927a34f9418148d060d", "filename": "clippy_lints/src/reference.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freference.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use syntax::ast::{Expr, ExprKind, UnOp};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use crate::utils::{snippet, span_lint_and_sugg};\n "}, {"sha": "6ac40c5a1d26a03f194384ddf9b0deaa80a05c2a", "filename": "clippy_lints/src/regex.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fregex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fregex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fregex.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use regex_syntax;\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use std::collections::HashSet;\n use syntax::ast::{LitKind, NodeId, StrStyle};"}, {"sha": "aaea8b6dd0ec46c7f754e80b98f9b2c5ea09dc6e", "filename": "clippy_lints/src/replace_consts.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freplace_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freplace_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freplace_consts.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir;\n use rustc::hir::def::Def;"}, {"sha": "ddc0a9719a80eee23c7c09e785127a20df5f3d4b", "filename": "clippy_lints/src/returns.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freturns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Freturns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freturns.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use syntax::ast;\n use syntax::source_map::Span;"}, {"sha": "0f09988c2508598890d586366ddff428200acf84", "filename": "clippy_lints/src/serde_api.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fserde_api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fserde_api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fserde_api.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use crate::utils::{get_trait_def_id, paths, span_lint};\n "}, {"sha": "1191723ba62c003904deae18d512334414293fcd", "filename": "clippy_lints/src/shadow.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fshadow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fshadow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fshadow.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use crate::reexport::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::hir::intravisit::FnKind;\n use rustc::ty;\n@@ -339,7 +339,9 @@ fn check_expr<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr, bindings:\n                     check_pat(cx, pat, Some(&**init), pat.span, bindings);\n                     // This is ugly, but needed to get the right type\n                     if let Some(ref guard) = arm.guard {\n-                        check_expr(cx, guard, bindings);\n+                        match guard {\n+                            Guard::If(if_expr) => check_expr(cx, if_expr, bindings),\n+                        }\n                     }\n                     check_expr(cx, &arm.body, bindings);\n                     bindings.truncate(len);"}, {"sha": "70d90a8fb768db104ec9a13b518eddc90b79b76c", "filename": "clippy_lints/src/strings.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fstrings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fstrings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fstrings.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::source_map::Spanned;\n use crate::utils::SpanlessEq;\n use crate::utils::{get_parent_expr, is_allowed, match_type, paths, span_lint, span_lint_and_sugg, walk_ptrs_ty};\n@@ -9,8 +9,7 @@ use crate::utils::{get_parent_expr, is_allowed, match_type, paths, span_lint, sp\n /// `let`!).\n ///\n /// **Why is this bad?** It's not really bad, but some people think that the\n-/// `.push_str(_)` method is more readable. Also creates a new heap allocation and throws\n-/// away the old one.\n+/// `.push_str(_)` method is more readable.\n ///\n /// **Known problems:** None.\n ///"}, {"sha": "9f9b279a6c57a3ff5f555d2203aa13d9457dbb1c", "filename": "clippy_lints/src/suspicious_trait_impl.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fsuspicious_trait_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fsuspicious_trait_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fsuspicious_trait_impl.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n@@ -76,7 +76,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for SuspiciousImpl {\n             // as a child node\n             let mut parent_expr = cx.tcx.hir.get_parent_node(expr.id);\n             while parent_expr != ast::CRATE_NODE_ID {\n-                if let hir::map::Node::NodeExpr(e) = cx.tcx.hir.get(parent_expr) {\n+                if let hir::Node::Expr(e) = cx.tcx.hir.get(parent_expr) {\n                     match e.node {\n                         hir::ExprKind::Binary(..)\n                         | hir::ExprKind::Unary(hir::UnOp::UnNot, _)\n@@ -187,7 +187,7 @@ fn check_binop<'a>(\n \n     if_chain! {\n         if parent_impl != ast::CRATE_NODE_ID;\n-        if let hir::map::Node::NodeItem(item) = cx.tcx.hir.get(parent_impl);\n+        if let hir::Node::Item(item) = cx.tcx.hir.get(parent_impl);\n         if let hir::ItemKind::Impl(_, _, _, _, Some(ref trait_ref), _, _) = item.node;\n         if let Some(idx) = trait_ids.iter().position(|&tid| tid == trait_ref.path.def.def_id());\n         if binop != expected_ops[idx];"}, {"sha": "9ae6ec483838911785612051a3df81046f18cbdd", "filename": "clippy_lints/src/swap.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fswap.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n use matches::matches;\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty;\n use crate::utils::{differing_macro_contexts, match_type, paths, snippet, span_lint_and_then, walk_ptrs_ty, SpanlessEq};"}, {"sha": "cb9223029642ab1be43c6fb72c6feb8d61126af7", "filename": "clippy_lints/src/temporary_assignment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftemporary_assignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftemporary_assignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftemporary_assignment.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::{Expr, ExprKind};\n use crate::utils::is_adjusted;\n use crate::utils::span_lint;"}, {"sha": "6e82bee277fe5e5fa6230a593335dcdbac05f94c", "filename": "clippy_lints/src/transmute.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftransmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftransmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftransmute.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use rustc::hir::*;"}, {"sha": "70a93e7f78a11fae6690b29de6102a81b4b55197", "filename": "clippy_lints/src/trivially_copy_pass_by_ref.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -3,10 +3,9 @@ use std::cmp;\n use matches::matches;\n use rustc::hir;\n use rustc::hir::*;\n-use rustc::hir::map::*;\n use rustc::hir::intravisit::FnKind;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::TyKind;\n use rustc::session::config::Config as SessionConfig;\n@@ -109,7 +108,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for TriviallyCopyPassByRef {\n         }\n \n         // Exclude non-inherent impls\n-        if let Some(NodeItem(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(node_id)) {\n+        if let Some(Node::Item(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent_node(node_id)) {\n             if matches!(item.node, ItemKind::Impl(_, _, _, _, Some(_), _, _) |\n                 ItemKind::Trait(..))\n             {"}, {"sha": "400a06c061e368c6ced977b9763f1191362a0e87", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -2,8 +2,8 @@ use crate::reexport::*;\n use rustc::hir;\n use rustc::hir::*;\n use rustc::hir::intravisit::{walk_body, walk_expr, walk_ty, FnKind, NestedVisitorMap, Visitor};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, in_external_macro, LintContext};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty, TyCtxt, TypeckTables};\n use rustc::ty::layout::LayoutOf;\n@@ -140,7 +140,7 @@ impl LintPass for TypePass {\n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for TypePass {\n     fn check_fn(&mut self, cx: &LateContext<'_, '_>, _: FnKind<'_>, decl: &FnDecl, _: &Body, _: Span, id: NodeId) {\n         // skip trait implementations, see #605\n-        if let Some(map::NodeItem(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent(id)) {\n+        if let Some(hir::Node::Item(item)) = cx.tcx.hir.find(cx.tcx.hir.get_parent(id)) {\n             if let ItemKind::Impl(_, _, _, _, Some(..), _, _) = item.node {\n                 return;\n             }\n@@ -514,7 +514,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UnitArg {\n                         if !is_questionmark_desugar_marked_call(expr) {\n                             if_chain!{\n                                 let opt_parent_node = map.find(map.get_parent_node(expr.id));\n-                                if let Some(hir::map::NodeExpr(parent_expr)) = opt_parent_node;\n+                                if let Some(hir::Node::Expr(parent_expr)) = opt_parent_node;\n                                 if is_questionmark_desugar_marked_call(parent_expr);\n                                 then {}\n                                 else {\n@@ -1525,7 +1525,7 @@ enum FullInt {\n }\n \n impl FullInt {\n-    #[allow(cast_sign_loss)]\n+    #[allow(clippy::cast_sign_loss)]\n     fn cmp_s_u(s: i128, u: u128) -> Ordering {\n         if s < 0 {\n             Ordering::Less\n@@ -1744,7 +1744,7 @@ impl LintPass for ImplicitHasher {\n }\n \n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for ImplicitHasher {\n-    #[allow(cast_possible_truncation)]\n+    #[allow(clippy::cast_possible_truncation)]\n     fn check_item(&mut self, cx: &LateContext<'a, 'tcx>, item: &'tcx Item) {\n         use syntax_pos::BytePos;\n "}, {"sha": "01c4cd83ce07ac1cc740d96198817e701b8a720c", "filename": "clippy_lints/src/unicode.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funicode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funicode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funicode.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use syntax::ast::{LitKind, NodeId};\n use syntax::source_map::Span;"}, {"sha": "7ef235e9297af7f4726dcc3c9060d218e73d67b7", "filename": "clippy_lints/src/unsafe_removed_from_name.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funsafe_removed_from_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funsafe_removed_from_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funsafe_removed_from_name.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use syntax::source_map::Span;\n use syntax::symbol::LocalInternedString;"}, {"sha": "c5507fcaca4f612695fdf35e0bef76ac53b5d4ad", "filename": "clippy_lints/src/unused_io_amount.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funused_io_amount.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funused_io_amount.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funused_io_amount.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir;\n use crate::utils::{is_try, match_qpath, match_trait_method, paths, span_lint};\n "}, {"sha": "71d9520c05be47e78130eedb7649437fc2915681", "filename": "clippy_lints/src/unused_label.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funused_label.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funused_label.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funused_label.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir;\n use rustc::hir::intravisit::{walk_expr, walk_fn, FnKind, NestedVisitorMap, Visitor};\n use std::collections::HashMap;"}, {"sha": "a1d24f64300f5000945ad12038f9f24558f7576c", "filename": "clippy_lints/src/unwrap.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funwrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Funwrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funwrap.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n \n use crate::utils::{in_macro, match_type, paths, span_lint_and_then, usage::is_potentially_mutated};"}, {"sha": "550f88c895e3d17856f32e895423926c8d1145a3", "filename": "clippy_lints/src/use_self.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fuse_self.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ use rustc::hir::intravisit::{walk_path, walk_ty, NestedVisitorMap, Visitor};\n use rustc::hir::*;\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n use rustc::ty;\n-use rustc::{declare_lint, lint_array};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax_pos::symbol::keywords::SelfType;\n \n /// **What it does:** Checks for unnecessary repetition of structure name when a"}, {"sha": "e2c809c0c7cc2e0687a21c43f7ac1c305dfd5ff8", "filename": "clippy_lints/src/utils/author.rs", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fauthor.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,10 +1,10 @@\n //! A group of attributes that can be attached to Rust code in order\n //! to generate a clippy lint detecting said code automatically.\n \n-#![allow(print_stdout, use_debug)]\n+#![allow(clippy::print_stdout, clippy::use_debug)]\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir;\n use rustc::hir::{Expr, ExprKind, QPath, TyKind, Pat, PatKind, BindingAnnotation, StmtKind, DeclKind, Stmt};\n use rustc::hir::intravisit::{NestedVisitorMap, Visitor};\n@@ -345,9 +345,15 @@ impl<'tcx> Visitor<'tcx> for PrintVisitor {\n                     self.visit_expr(&arm.body);\n                     if let Some(ref guard) = arm.guard {\n                         let guard_pat = self.next(\"guard\");\n-                        println!(\"    if let Some(ref {}) = {}[{}].guard\", guard_pat, arms_pat, i);\n-                        self.current = guard_pat;\n-                        self.visit_expr(guard);\n+                        println!(\"    if let Some(ref {}) = {}[{}].guard;\", guard_pat, arms_pat, i);\n+                        match guard {\n+                            hir::Guard::If(ref if_expr) => {\n+                                let if_expr_pat = self.next(\"expr\");\n+                                println!(\"    if let Guard::If(ref {}) = {};\", if_expr_pat, guard_pat);\n+                                self.current = if_expr_pat;\n+                                self.visit_expr(if_expr);\n+                            }\n+                        }\n                     }\n                     println!(\"    if {}[{}].pats.len() == {};\", arms_pat, i, arm.pats.len());\n                     for (j, pat) in arm.pats.iter().enumerate() {"}, {"sha": "e8a8d510fe5076ebfd64be18f3328bc0a84d4952", "filename": "clippy_lints/src/utils/camel_case.rs", "status": "added", "additions": 114, "deletions": 0, "changes": 114, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fcamel_case.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fcamel_case.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fcamel_case.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -0,0 +1,114 @@\n+/// Return the index of the character after the first camel-case component of\n+/// `s`.\n+pub fn camel_case_until(s: &str) -> usize {\n+    let mut iter = s.char_indices();\n+    if let Some((_, first)) = iter.next() {\n+        if !first.is_uppercase() {\n+            return 0;\n+        }\n+    } else {\n+        return 0;\n+    }\n+    let mut up = true;\n+    let mut last_i = 0;\n+    for (i, c) in iter {\n+        if up {\n+            if c.is_lowercase() {\n+                up = false;\n+            } else {\n+                return last_i;\n+            }\n+        } else if c.is_uppercase() {\n+            up = true;\n+            last_i = i;\n+        } else if !c.is_lowercase() {\n+            return i;\n+        }\n+    }\n+    if up {\n+        last_i\n+    } else {\n+        s.len()\n+    }\n+}\n+\n+/// Return index of the last camel-case component of `s`.\n+pub fn camel_case_from(s: &str) -> usize {\n+    let mut iter = s.char_indices().rev();\n+    if let Some((_, first)) = iter.next() {\n+        if !first.is_lowercase() {\n+            return s.len();\n+        }\n+    } else {\n+        return s.len();\n+    }\n+    let mut down = true;\n+    let mut last_i = s.len();\n+    for (i, c) in iter {\n+        if down {\n+            if c.is_uppercase() {\n+                down = false;\n+                last_i = i;\n+            } else if !c.is_lowercase() {\n+                return last_i;\n+            }\n+        } else if c.is_lowercase() {\n+            down = true;\n+        } else {\n+            return last_i;\n+        }\n+    }\n+    last_i\n+}\n+\n+#[cfg(test)]\n+mod test {\n+    use super::{camel_case_from, camel_case_until};\n+\n+    #[test]\n+    fn from_full() {\n+        assert_eq!(camel_case_from(\"AbcDef\"), 0);\n+        assert_eq!(camel_case_from(\"Abc\"), 0);\n+    }\n+\n+    #[test]\n+    fn from_partial() {\n+        assert_eq!(camel_case_from(\"abcDef\"), 3);\n+        assert_eq!(camel_case_from(\"aDbc\"), 1);\n+    }\n+\n+    #[test]\n+    fn from_not() {\n+        assert_eq!(camel_case_from(\"AbcDef_\"), 7);\n+        assert_eq!(camel_case_from(\"AbcDD\"), 5);\n+    }\n+\n+    #[test]\n+    fn from_caps() {\n+        assert_eq!(camel_case_from(\"ABCD\"), 4);\n+    }\n+\n+    #[test]\n+    fn until_full() {\n+        assert_eq!(camel_case_until(\"AbcDef\"), 6);\n+        assert_eq!(camel_case_until(\"Abc\"), 3);\n+    }\n+\n+    #[test]\n+    fn until_not() {\n+        assert_eq!(camel_case_until(\"abcDef\"), 0);\n+        assert_eq!(camel_case_until(\"aDbc\"), 0);\n+    }\n+\n+    #[test]\n+    fn until_partial() {\n+        assert_eq!(camel_case_until(\"AbcDef_\"), 6);\n+        assert_eq!(camel_case_until(\"CallTypeC\"), 8);\n+        assert_eq!(camel_case_until(\"AbcDD\"), 3);\n+    }\n+\n+    #[test]\n+    fn until_caps() {\n+        assert_eq!(camel_case_until(\"ABCD\"), 0);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "31e20f37e20dfab2df53f26d9dfcdbd5157d4c50", "filename": "clippy_lints/src/utils/comparisons.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fcomparisons.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fcomparisons.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fcomparisons.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n //! Utility functions about comparison operators.\n \n-#![deny(missing_docs_in_private_items)]\n+#![deny(clippy::missing_docs_in_private_items)]\n \n use rustc::hir::{BinOpKind, Expr};\n "}, {"sha": "a7e73d85cf0fee3ae829251f1b0f3ac0e21e1600", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 16, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n //! Read configurations files.\n \n-#![deny(missing_docs_in_private_items)]\n+#![deny(clippy::missing_docs_in_private_items)]\n \n use lazy_static::lazy_static;\n use std::{env, fmt, fs, io, path};\n@@ -38,28 +38,13 @@ pub enum Error {\n     Io(io::Error),\n     /// Not valid toml or doesn't fit the expected conf format\n     Toml(String),\n-    /// Type error.\n-    Type(\n-        /// The name of the key.\n-        &'static str,\n-        /// The expected type.\n-        &'static str,\n-        /// The type we got instead.\n-        &'static str,\n-    ),\n-    /// There is an unknown key is the file.\n-    UnknownKey(String),\n }\n \n impl fmt::Display for Error {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> Result<(), fmt::Error> {\n         match *self {\n             Error::Io(ref err) => err.fmt(f),\n             Error::Toml(ref err) => err.fmt(f),\n-            Error::Type(key, expected, got) => {\n-                write!(f, \"`{}` is expected to be a `{}` but is a `{}`\", key, expected, got)\n-            },\n-            Error::UnknownKey(ref key) => write!(f, \"unknown key `{}`\", key),\n         }\n     }\n }"}, {"sha": "b63be9b86c8fb9bb31f50c56f9cfcb1fb6fe2977", "filename": "clippy_lints/src/utils/constants.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fconstants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fconstants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconstants.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n //! This module contains some useful constants.\n \n-#![deny(missing_docs_in_private_items)]\n+#![deny(clippy::missing_docs_in_private_items)]\n \n /// List of the built-in types names.\n ///"}, {"sha": "42b37568a99bccaf0a5168f19e55679b223d85d6", "filename": "clippy_lints/src/utils/higher.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fhigher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fhigher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fhigher.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n //! This module contains functions for retrieve the original AST from lowered\n //! `hir`.\n \n-#![deny(missing_docs_in_private_items)]\n+#![deny(clippy::missing_docs_in_private_items)]\n \n use if_chain::if_chain;\n use rustc::{hir, ty};"}, {"sha": "939b4f595e4d09a9d32440aba3e0aae44ff3ce6f", "filename": "clippy_lints/src/utils/hir_utils.rs", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fhir_utils.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n use crate::consts::{constant_simple, constant_context};\n-use rustc::lint::*;\n+use rustc::lint::LateContext;\n use rustc::hir::*;\n use rustc::ty::{TypeckTables};\n use std::hash::{Hash, Hasher};\n@@ -113,7 +113,7 @@ impl<'a, 'tcx: 'a> SpanlessEq<'a, 'tcx> {\n             },\n             (&ExprKind::Match(ref le, ref la, ref ls), &ExprKind::Match(ref re, ref ra, ref rs)) => {\n                 ls == rs && self.eq_expr(le, re) && over(la, ra, |l, r| {\n-                    self.eq_expr(&l.body, &r.body) && both(&l.guard, &r.guard, |l, r| self.eq_expr(l, r))\n+                    self.eq_expr(&l.body, &r.body) && both(&l.guard, &r.guard, |l, r| self.eq_guard(l, r))\n                         && over(&l.pats, &r.pats, |l, r| self.eq_pat(l, r))\n                 })\n             },\n@@ -152,6 +152,12 @@ impl<'a, 'tcx: 'a> SpanlessEq<'a, 'tcx> {\n         left.ident.name == right.ident.name && self.eq_expr(&left.expr, &right.expr)\n     }\n \n+    fn eq_guard(&mut self, left: &Guard, right: &Guard) -> bool {\n+        match (left, right) {\n+            (Guard::If(l), Guard::If(r)) => self.eq_expr(l, r),\n+        }\n+    }\n+\n     fn eq_generic_arg(&mut self, left: &GenericArg, right: &GenericArg) -> bool {\n         match (left, right) {\n             (GenericArg::Lifetime(l_lt), GenericArg::Lifetime(r_lt)) => self.eq_lifetime(l_lt, r_lt),\n@@ -364,7 +370,7 @@ impl<'a, 'tcx: 'a> SpanlessHash<'a, 'tcx> {\n         }.hash(&mut self.s);\n     }\n \n-    #[allow(many_single_char_names)]\n+    #[allow(clippy::many_single_char_names)]\n     pub fn hash_expr(&mut self, e: &Expr) {\n         if let Some(e) = constant_simple(self.cx, self.tables, e) {\n             return e.hash(&mut self.s);\n@@ -497,7 +503,7 @@ impl<'a, 'tcx: 'a> SpanlessHash<'a, 'tcx> {\n                 for arm in arms {\n                     // TODO: arm.pat?\n                     if let Some(ref e) = arm.guard {\n-                        self.hash_expr(e);\n+                        self.hash_guard(e);\n                     }\n                     self.hash_expr(&arm.body);\n                 }\n@@ -637,4 +643,14 @@ impl<'a, 'tcx: 'a> SpanlessHash<'a, 'tcx> {\n             },\n         }\n     }\n+\n+    pub fn hash_guard(&mut self, g: &Guard) {\n+        match g {\n+            Guard::If(ref expr) => {\n+                let c: fn(_) -> _ = Guard::If;\n+                c.hash(&mut self.s);\n+                self.hash_expr(expr);\n+            }\n+        }\n+    }\n }"}, {"sha": "56b76fdc7b0548f947ac517c12fcc1775fc4e713", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,9 @@\n-#![allow(print_stdout, use_debug)]\n+#![allow(clippy::print_stdout, clippy::use_debug)]\n \n //! checks for attributes\n \n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir;\n use rustc::hir::print;\n use syntax::ast::Attribute;\n@@ -113,7 +113,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n         }\n         if let Some(ref guard) = arm.guard {\n             println!(\"guard:\");\n-            print_expr(cx, guard, 1);\n+            print_guard(cx, guard, 1);\n         }\n         println!(\"body:\");\n         print_expr(cx, &arm.body, 1);\n@@ -515,3 +515,14 @@ fn print_pat(cx: &LateContext<'_, '_>, pat: &hir::Pat, indent: usize) {\n         },\n     }\n }\n+\n+fn print_guard(cx: &LateContext<'_, '_>, guard: &hir::Guard, indent: usize) {\n+    let ind = \"  \".repeat(indent);\n+    println!(\"{}+\", ind);\n+    match guard {\n+        hir::Guard::If(expr) => {\n+            println!(\"{}If\", ind);\n+            print_expr(cx, expr, indent + 1);\n+        }\n+    }\n+}"}, {"sha": "7b2d2f15996e48321703a6d3aaf6157be28df26d", "filename": "clippy_lints/src/utils/internal_lints.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass, EarlyContext, EarlyLintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use rustc::hir::*;\n use rustc::hir;\n use rustc::hir::intravisit::{walk_expr, NestedVisitorMap, Visitor};\n@@ -149,13 +149,13 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for LintWithoutLintPass {\n \n     fn check_crate_post(&mut self, cx: &LateContext<'a, 'tcx>, _: &'tcx Crate) {\n         for (lint_name, &lint_span) in &self.declared_lints {\n-            // When using the `declare_lint!` macro, the original `lint_span`'s\n+            // When using the `declare_tool_lint!` macro, the original `lint_span`'s\n             // file points to \"<rustc macros>\".\n             // `compiletest-rs` thinks that's an error in a different file and\n             // just ignores it. This causes the test in compile-fail/lint_pass\n             // not able to capture the error.\n             // Therefore, we need to climb the macro expansion tree and find the\n-            // actual span that invoked `declare_lint!`:\n+            // actual span that invoked `declare_tool_lint!`:\n             let lint_span = lint_span\n                 .ctxt()\n                 .outer()"}, {"sha": "650ea373d97e22ed0b915a319c199a7661d6b48f", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 92, "deletions": 85, "changes": 177, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -6,7 +6,7 @@ use rustc::hir::*;\n use rustc::hir::def_id::{DefId, CRATE_DEF_INDEX};\n use rustc::hir::def::Def;\n use rustc::hir::intravisit::{NestedVisitorMap, Visitor};\n-use rustc::hir::map::Node;\n+use rustc::hir::Node;\n use rustc::lint::{LateContext, Level, Lint, LintContext};\n use rustc::session::Session;\n use rustc::traits;\n@@ -21,9 +21,11 @@ use syntax::ast::{self, LitKind};\n use syntax::attr;\n use syntax::source_map::{Span, DUMMY_SP};\n use syntax::errors::DiagnosticBuilder;\n-use syntax::ptr::P;\n use syntax::symbol::keywords;\n \n+mod camel_case;\n+pub use self::camel_case::{camel_case_from, camel_case_until};\n+\n pub mod comparisons;\n pub mod conf;\n pub mod constants;\n@@ -37,8 +39,6 @@ pub mod ptr;\n pub mod usage;\n pub use self::hir_utils::{SpanlessEq, SpanlessHash};\n \n-pub type MethodArgs = HirVec<P<Expr>>;\n-\n pub mod higher;\n \n /// Returns true if the two spans come from differing expansions (i.e. one is\n@@ -106,17 +106,6 @@ pub fn match_type(cx: &LateContext<'_, '_>, ty: Ty<'_>, path: &[&str]) -> bool {\n     }\n }\n \n-/// Check if the method call given in `expr` belongs to given type.\n-pub fn match_impl_method(cx: &LateContext<'_, '_>, expr: &Expr, path: &[&str]) -> bool {\n-    let method_call = cx.tables.type_dependent_defs()[expr.hir_id];\n-    let trt_id = cx.tcx.impl_of_method(method_call.def_id());\n-    if let Some(trt_id) = trt_id {\n-        match_def_path(cx.tcx, trt_id, path)\n-    } else {\n-        false\n-    }\n-}\n-\n /// Check if the method call given in `expr` belongs to given trait.\n pub fn match_trait_method(cx: &LateContext<'_, '_>, expr: &Expr, path: &[&str]) -> bool {\n     let method_call = cx.tables.type_dependent_defs()[expr.hir_id];\n@@ -309,9 +298,9 @@ pub fn method_chain_args<'a>(expr: &'a Expr, methods: &[&str]) -> Option<Vec<&'a\n pub fn get_item_name(cx: &LateContext<'_, '_>, expr: &Expr) -> Option<Name> {\n     let parent_id = cx.tcx.hir.get_parent(expr.id);\n     match cx.tcx.hir.find(parent_id) {\n-        Some(Node::NodeItem(&Item { ref name, .. })) => Some(*name),\n-        Some(Node::NodeTraitItem(&TraitItem { ident, .. })) |\n-        Some(Node::NodeImplItem(&ImplItem { ident, .. })) => Some(ident.name),\n+        Some(Node::Item(&Item { ref name, .. })) => Some(*name),\n+        Some(Node::TraitItem(&TraitItem { ident, .. })) |\n+        Some(Node::ImplItem(&ImplItem { ident, .. })) => Some(ident.name),\n         _ => None,\n     }\n }\n@@ -464,7 +453,7 @@ pub fn get_parent_expr<'c>(cx: &'c LateContext<'_, '_>, e: &Expr) -> Option<&'c\n         return None;\n     }\n     map.find(parent_id).and_then(|node| {\n-        if let Node::NodeExpr(parent) = node {\n+        if let Node::Expr(parent) = node {\n             Some(parent)\n         } else {\n             None\n@@ -478,11 +467,11 @@ pub fn get_enclosing_block<'a, 'tcx: 'a>(cx: &LateContext<'a, 'tcx>, node: NodeI\n         .and_then(|enclosing_id| map.find(enclosing_id));\n     if let Some(node) = enclosing_node {\n         match node {\n-            Node::NodeBlock(block) => Some(block),\n-            Node::NodeItem(&Item {\n+            Node::Block(block) => Some(block),\n+            Node::Item(&Item {\n                 node: ItemKind::Fn(_, _, _, eid),\n                 ..\n-            }) | Node::NodeImplItem(&ImplItem {\n+            }) | Node::ImplItem(&ImplItem {\n                 node: ImplItemKind::Method(_, eid),\n                 ..\n             }) => match cx.tcx.hir.body(eid).value.node {\n@@ -755,69 +744,6 @@ pub fn is_direct_expn_of(span: Span, name: &str) -> Option<Span> {\n     }\n }\n \n-/// Return the index of the character after the first camel-case component of\n-/// `s`.\n-pub fn camel_case_until(s: &str) -> usize {\n-    let mut iter = s.char_indices();\n-    if let Some((_, first)) = iter.next() {\n-        if !first.is_uppercase() {\n-            return 0;\n-        }\n-    } else {\n-        return 0;\n-    }\n-    let mut up = true;\n-    let mut last_i = 0;\n-    for (i, c) in iter {\n-        if up {\n-            if c.is_lowercase() {\n-                up = false;\n-            } else {\n-                return last_i;\n-            }\n-        } else if c.is_uppercase() {\n-            up = true;\n-            last_i = i;\n-        } else if !c.is_lowercase() {\n-            return i;\n-        }\n-    }\n-    if up {\n-        last_i\n-    } else {\n-        s.len()\n-    }\n-}\n-\n-/// Return index of the last camel-case component of `s`.\n-pub fn camel_case_from(s: &str) -> usize {\n-    let mut iter = s.char_indices().rev();\n-    if let Some((_, first)) = iter.next() {\n-        if !first.is_lowercase() {\n-            return s.len();\n-        }\n-    } else {\n-        return s.len();\n-    }\n-    let mut down = true;\n-    let mut last_i = s.len();\n-    for (i, c) in iter {\n-        if down {\n-            if c.is_uppercase() {\n-                down = false;\n-                last_i = i;\n-            } else if !c.is_lowercase() {\n-                return last_i;\n-            }\n-        } else if c.is_lowercase() {\n-            down = true;\n-        } else {\n-            return last_i;\n-        }\n-    }\n-    last_i\n-}\n-\n /// Convenience function to get the return type of a function\n pub fn return_ty<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, fn_item: NodeId) -> Ty<'tcx> {\n     let fn_def_id = cx.tcx.hir.local_def_id(fn_item);\n@@ -1109,3 +1035,84 @@ pub fn any_parent_is_automatically_derived(tcx: TyCtxt<'_, '_, '_>, node: NodeId\n     }\n     false\n }\n+\n+#[cfg(test)]\n+mod test {\n+    use super::{trim_multiline, without_block_comments};\n+\n+    #[test]\n+    fn test_trim_multiline_single_line() {\n+        assert_eq!(\"\", trim_multiline(\"\".into(), false));\n+        assert_eq!(\"...\", trim_multiline(\"...\".into(), false));\n+        assert_eq!(\"...\", trim_multiline(\"    ...\".into(), false));\n+        assert_eq!(\"...\", trim_multiline(\"\\t...\".into(), false));\n+        assert_eq!(\"...\", trim_multiline(\"\\t\\t...\".into(), false));\n+    }\n+\n+    #[test]\n+    #[rustfmt::skip]\n+    fn test_trim_multiline_block() {\n+        assert_eq!(\"\\\n+    if x {\n+        y\n+    } else {\n+        z\n+    }\", trim_multiline(\"    if x {\n+            y\n+        } else {\n+            z\n+        }\".into(), false));\n+        assert_eq!(\"\\\n+    if x {\n+    \\ty\n+    } else {\n+    \\tz\n+    }\", trim_multiline(\"    if x {\n+        \\ty\n+        } else {\n+        \\tz\n+        }\".into(), false));\n+    }\n+\n+    #[test]\n+    #[rustfmt::skip]\n+    fn test_trim_multiline_empty_line() {\n+        assert_eq!(\"\\\n+    if x {\n+        y\n+\n+    } else {\n+        z\n+    }\", trim_multiline(\"    if x {\n+            y\n+\n+        } else {\n+            z\n+        }\".into(), false));\n+    }\n+\n+    #[test]\n+    fn test_without_block_comments_lines_without_block_comments() {\n+        let result = without_block_comments(vec![\"/*\", \"\", \"*/\"]);\n+        println!(\"result: {:?}\", result);\n+        assert!(result.is_empty());\n+\n+        let result = without_block_comments(vec![\"\", \"/*\", \"\", \"*/\", \"#[crate_type = \\\"lib\\\"]\", \"/*\", \"\", \"*/\", \"\"]);\n+        assert_eq!(result, vec![\"\", \"#[crate_type = \\\"lib\\\"]\", \"\"]);\n+\n+        let result = without_block_comments(vec![\"/* rust\", \"\", \"*/\"]);\n+        assert!(result.is_empty());\n+\n+        let result = without_block_comments(vec![\"/* one-line comment */\"]);\n+        assert!(result.is_empty());\n+\n+        let result = without_block_comments(vec![\"/* nested\", \"/* multi-line\", \"comment\", \"*/\", \"test\", \"*/\"]);\n+        assert!(result.is_empty());\n+\n+        let result = without_block_comments(vec![\"/* nested /* inline /* comment */ test */ */\"]);\n+        assert!(result.is_empty());\n+\n+        let result = without_block_comments(vec![\"foo\", \"bar\", \"baz\"]);\n+        assert_eq!(result, vec![\"foo\", \"bar\", \"baz\"]);\n+    }\n+}\n\\ No newline at end of file"}, {"sha": "3c03645cc1b39924f2cbf7bfb8cb2f4b8c162690", "filename": "clippy_lints/src/utils/paths.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fpaths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fpaths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fpaths.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -9,8 +9,6 @@ pub const BEGIN_PANIC: [&str; 3] = [\"std\", \"panicking\", \"begin_panic\"];\n pub const BEGIN_PANIC_FMT: [&str; 3] = [\"std\", \"panicking\", \"begin_panic_fmt\"];\n pub const BINARY_HEAP: [&str; 4] = [\"alloc\", \"collections\", \"binary_heap\", \"BinaryHeap\"];\n pub const BORROW_TRAIT: [&str; 3] = [\"core\", \"borrow\", \"Borrow\"];\n-pub const BOX: [&str; 3] = [\"std\", \"boxed\", \"Box\"];\n-pub const BOX_NEW: [&str; 4] = [\"std\", \"boxed\", \"Box\", \"new\"];\n pub const BTREEMAP: [&str; 5] = [\"alloc\", \"collections\", \"btree\", \"map\", \"BTreeMap\"];\n pub const BTREEMAP_ENTRY: [&str; 5] = [\"alloc\", \"collections\", \"btree\", \"map\", \"Entry\"];\n pub const BTREESET: [&str; 5] = [\"alloc\", \"collections\", \"btree\", \"set\", \"BTreeSet\"];\n@@ -22,16 +20,13 @@ pub const COW: [&str; 3] = [\"alloc\", \"borrow\", \"Cow\"];\n pub const CSTRING_NEW: [&str; 5] = [\"std\", \"ffi\", \"c_str\", \"CString\", \"new\"];\n pub const C_VOID: [&str; 4] = [\"std\", \"os\", \"raw\", \"c_void\"];\n pub const C_VOID_LIBC: [&str; 2] = [\"libc\", \"c_void\"];\n-pub const DEBUG_FMT_METHOD: [&str; 4] = [\"core\", \"fmt\", \"Debug\", \"fmt\"];\n pub const DEFAULT_TRAIT: [&str; 3] = [\"core\", \"default\", \"Default\"];\n pub const DEFAULT_TRAIT_METHOD: [&str; 4] = [\"core\", \"default\", \"Default\", \"default\"];\n pub const DISPLAY_FMT_METHOD: [&str; 4] = [\"core\", \"fmt\", \"Display\", \"fmt\"];\n pub const DOUBLE_ENDED_ITERATOR: [&str; 4] = [\"core\", \"iter\", \"traits\", \"DoubleEndedIterator\"];\n pub const DROP: [&str; 3] = [\"core\", \"mem\", \"drop\"];\n pub const DURATION: [&str; 3] = [\"core\", \"time\", \"Duration\"];\n-pub const FMT_ARGUMENTS_NEWV1: [&str; 4] = [\"core\", \"fmt\", \"Arguments\", \"new_v1\"];\n pub const FMT_ARGUMENTS_NEWV1FORMATTED: [&str; 4] = [\"core\", \"fmt\", \"Arguments\", \"new_v1_formatted\"];\n-pub const FMT_ARGUMENTV1_NEW: [&str; 4] = [\"core\", \"fmt\", \"ArgumentV1\", \"new\"];\n pub const FROM_FROM: [&str; 4] = [\"core\", \"convert\", \"From\", \"from\"];\n pub const FROM_TRAIT: [&str; 3] = [\"core\", \"convert\", \"From\"];\n pub const HASH: [&str; 2] = [\"hash\", \"Hash\"];\n@@ -43,7 +38,6 @@ pub const INDEX_MUT: [&str; 3] = [\"core\", \"ops\", \"IndexMut\"];\n pub const INIT: [&str; 4] = [\"core\", \"intrinsics\", \"\", \"init\"];\n pub const INTO: [&str; 3] = [\"core\", \"convert\", \"Into\"];\n pub const INTO_ITERATOR: [&str; 4] = [\"core\", \"iter\", \"traits\", \"IntoIterator\"];\n-pub const IO_PRINT: [&str; 4] = [\"std\", \"io\", \"stdio\", \"_print\"];\n pub const IO_READ: [&str; 3] = [\"std\", \"io\", \"Read\"];\n pub const IO_WRITE: [&str; 3] = [\"std\", \"io\", \"Write\"];\n pub const ITERATOR: [&str; 4] = [\"core\", \"iter\", \"iterator\", \"Iterator\"];\n@@ -69,9 +63,7 @@ pub const RANGE_FROM: [&str; 3] = [\"core\", \"ops\", \"RangeFrom\"];\n pub const RANGE_FROM_STD: [&str; 3] = [\"std\", \"ops\", \"RangeFrom\"];\n pub const RANGE_FULL: [&str; 3] = [\"core\", \"ops\", \"RangeFull\"];\n pub const RANGE_FULL_STD: [&str; 3] = [\"std\", \"ops\", \"RangeFull\"];\n-pub const RANGE_INCLUSIVE: [&str; 3] = [\"core\", \"ops\", \"RangeInclusive\"];\n pub const RANGE_INCLUSIVE_NEW: [&str; 4] = [\"core\", \"ops\", \"RangeInclusive\", \"new\"];\n-pub const RANGE_INCLUSIVE_STD: [&str; 3] = [\"std\", \"ops\", \"RangeInclusive\"];\n pub const RANGE_INCLUSIVE_STD_NEW: [&str; 4] = [\"std\", \"ops\", \"RangeInclusive\", \"new\"];\n pub const RANGE_STD: [&str; 3] = [\"std\", \"ops\", \"Range\"];\n pub const RANGE_TO: [&str; 3] = [\"core\", \"ops\", \"RangeTo\"];\n@@ -81,7 +73,6 @@ pub const RANGE_TO_STD: [&str; 3] = [\"std\", \"ops\", \"RangeTo\"];\n pub const RC: [&str; 3] = [\"alloc\", \"rc\", \"Rc\"];\n pub const REGEX: [&str; 3] = [\"regex\", \"re_unicode\", \"Regex\"];\n pub const REGEX_BUILDER_NEW: [&str; 5] = [\"regex\", \"re_builder\", \"unicode\", \"RegexBuilder\", \"new\"];\n-pub const REGEX_BYTES: [&str; 3] = [\"regex\", \"re_bytes\", \"Regex\"];\n pub const REGEX_BYTES_BUILDER_NEW: [&str; 5] = [\"regex\", \"re_builder\", \"bytes\", \"RegexBuilder\", \"new\"];\n pub const REGEX_BYTES_NEW: [&str; 4] = [\"regex\", \"re_bytes\", \"Regex\", \"new\"];\n pub const REGEX_BYTES_SET_NEW: [&str; 5] = [\"regex\", \"re_set\", \"bytes\", \"RegexSet\", \"new\"];"}, {"sha": "8efee6cd964e35fc578b762415b70a662e857132", "filename": "clippy_lints/src/utils/sugg.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fsugg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fsugg.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,5 @@\n //! Contains utility functions to generate suggestions.\n-#![deny(missing_docs_in_private_items)]\n-// currently ignores lifetimes and generics\n-#![allow(use_self)]\n+#![deny(clippy::missing_docs_in_private_items)]\n \n use matches::matches;\n use rustc::hir;\n@@ -40,7 +38,7 @@ impl Display for Sugg<'_> {\n     }\n }\n \n-#[allow(wrong_self_convention)] // ok, because of the function `as_ty` method\n+#[allow(clippy::wrong_self_convention)] // ok, because of the function `as_ty` method\n impl<'a> Sugg<'a> {\n     /// Prepare a suggestion from an expression.\n     pub fn hir_opt(cx: &LateContext<'_, '_>, expr: &hir::Expr) -> Option<Self> {\n@@ -177,6 +175,7 @@ impl<'a> Sugg<'a> {\n \n     /// Convenience method to create the `<lhs>..<rhs>` or `<lhs>...<rhs>`\n     /// suggestion.\n+    #[allow(dead_code)]\n     pub fn range(self, end: &Self, limit: ast::RangeLimits) -> Sugg<'static> {\n         match limit {\n             ast::RangeLimits::HalfOpen => make_assoc(AssocOp::DotDot, &self, end),"}, {"sha": "2661bc945f36ba175d70b9b76386a51210fcc609", "filename": "clippy_lints/src/utils/usage.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fusage.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Futils%2Fusage.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fusage.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,4 @@\n-use rustc::lint::*;\n+use rustc::lint::LateContext;\n \n use rustc::hir::def::Def;\n use rustc::hir::*;"}, {"sha": "4cbefc29b9cccd0b467b766c5ffb75c6522b2af6", "filename": "clippy_lints/src/vec.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fvec.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::ty::{self, Ty};\n use syntax::source_map::Span;"}, {"sha": "5d32157238bbabd724845fd4c1c12f3787f5d455", "filename": "clippy_lints/src/write.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fwrite.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use syntax::ast::*;\n use syntax::tokenstream::{ThinTokenStream, TokenStream};\n use syntax::parse::{token, parser};"}, {"sha": "73c9e64d2cb95f82be94cb9879147a59c820feef", "filename": "clippy_lints/src/zero_div_zero.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fzero_div_zero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/clippy_lints%2Fsrc%2Fzero_div_zero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fzero_div_zero.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n use crate::consts::{constant_simple, Constant};\n-use rustc::lint::*;\n-use rustc::{declare_lint, lint_array};\n+use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n+use rustc::{declare_tool_lint, lint_array};\n use if_chain::if_chain;\n use rustc::hir::*;\n use crate::utils::span_help_and_lint;"}, {"sha": "3602f671e3dec5de2039bc0e48e3ee2a47ba15d3", "filename": "pre_publish.sh", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/pre_publish.sh", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/pre_publish.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/pre_publish.sh?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,20 +4,19 @@ set -e\n \n ./util/update_lints.py\n \n-git status --short | sort | grep -v README.md | grep -v helper.txt | sort > helper.txt\n-\n-# abort if the files differ\n-diff \"publish.files\" \"helper.txt\"\n-\n-rm helper.txt\n-\n # add all changed files\n git add .\n git commit -m \"Bump the version\"\n \n set +e\n \n+echo \"Running \\`cargo fmt\\`..\"\n+\n cd clippy_lints && cargo fmt -- --write-mode=overwrite && cd ..\n cargo fmt -- --write-mode=overwrite\n \n-echo \"remember to add a git tag and running 'cargo test' before committing the rustfmt changes\"\n+echo \"Running tests to make sure \\`cargo fmt\\` did not break anything..\"\n+\n+cargo test\n+\n+echo \"If the tests passed, review and commit the formatting changes and remember to add a git tag.\""}, {"sha": "26ff846177bb0486331ee3dda5ee9cb35a7c51ed", "filename": "src/driver.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,13 +1,14 @@\n // error-pattern:yummy\n #![feature(box_syntax)]\n #![feature(rustc_private)]\n-#![allow(unknown_lints, missing_docs_in_private_items)]\n+#![feature(tool_lints)]\n+#![allow(unknown_lints, clippy::missing_docs_in_private_items)]\n \n use rustc_driver::{self, driver::CompileController, Compilation};\n use rustc_plugin;\n use std::process::{exit, Command};\n \n-#[allow(print_stdout)]\n+#[allow(clippy::print_stdout)]\n fn show_version() {\n     println!(env!(\"CARGO_PKG_VERSION\"));\n }\n@@ -118,8 +119,8 @@ pub fn main() {\n                     ls.register_late_pass(Some(sess), true, pass);\n                 }\n \n-                for (name, to) in lint_groups {\n-                    ls.register_group(Some(sess), true, name, to);\n+                for (name, (to, deprecated_name)) in lint_groups {\n+                    ls.register_group(Some(sess), true, name, deprecated_name, to);\n                 }\n                 clippy_lints::register_pre_expansion_lints(sess, &mut ls, &conf);\n "}, {"sha": "a7167ac10de4f4a599c28adef05934570d96e056", "filename": "src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,9 @@\n // error-pattern:cargo-clippy\n #![feature(plugin_registrar)]\n #![feature(rustc_private)]\n+#![feature(tool_lints)]\n #![allow(unknown_lints)]\n-#![allow(missing_docs_in_private_items)]\n+#![allow(clippy::missing_docs_in_private_items)]\n #![warn(rust_2018_idioms)]\n \n use rustc_plugin::Registry;"}, {"sha": "12c07f60a11c1eff59b57a6621644da5d37795c2", "filename": "src/main.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,8 @@\n // error-pattern:yummy\n #![feature(box_syntax)]\n #![feature(rustc_private)]\n-#![allow(unknown_lints, missing_docs_in_private_items)]\n+#![feature(tool_lints)]\n+#![allow(unknown_lints, clippy::missing_docs_in_private_items)]\n \n const CARGO_CLIPPY_HELP: &str = r#\"Checks a package to catch common mistakes and improve your Rust code.\n \n@@ -28,12 +29,12 @@ it to allow or deny lints from the code, eg.:\n     #[cfg_attr(feature = \"cargo-clippy\", allow(needless_lifetimes))]\n \"#;\n \n-#[allow(print_stdout)]\n+#[allow(clippy::print_stdout)]\n fn show_help() {\n     println!(\"{}\", CARGO_CLIPPY_HELP);\n }\n \n-#[allow(print_stdout)]\n+#[allow(clippy::print_stdout)]\n fn show_version() {\n     println!(env!(\"CARGO_PKG_VERSION\"));\n }"}, {"sha": "b7efbde6596a517a22a30032ff6ff0457daa654d", "filename": "tests/camel_case.rs", "status": "removed", "additions": 0, "deletions": 50, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/939d842ea1a8732c86cbaed76e5283358e831efa/tests%2Fcamel_case.rs", "raw_url": "https://github.com/rust-lang/rust/raw/939d842ea1a8732c86cbaed76e5283358e831efa/tests%2Fcamel_case.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcamel_case.rs?ref=939d842ea1a8732c86cbaed76e5283358e831efa", "patch": "@@ -1,50 +0,0 @@\n-extern crate clippy_lints;\n-\n-use clippy_lints::utils::{camel_case_from, camel_case_until};\n-\n-#[test]\n-fn from_full() {\n-    assert_eq!(camel_case_from(\"AbcDef\"), 0);\n-    assert_eq!(camel_case_from(\"Abc\"), 0);\n-}\n-\n-#[test]\n-fn from_partial() {\n-    assert_eq!(camel_case_from(\"abcDef\"), 3);\n-    assert_eq!(camel_case_from(\"aDbc\"), 1);\n-}\n-\n-#[test]\n-fn from_not() {\n-    assert_eq!(camel_case_from(\"AbcDef_\"), 7);\n-    assert_eq!(camel_case_from(\"AbcDD\"), 5);\n-}\n-\n-#[test]\n-fn from_caps() {\n-    assert_eq!(camel_case_from(\"ABCD\"), 4);\n-}\n-\n-#[test]\n-fn until_full() {\n-    assert_eq!(camel_case_until(\"AbcDef\"), 6);\n-    assert_eq!(camel_case_until(\"Abc\"), 3);\n-}\n-\n-#[test]\n-fn until_not() {\n-    assert_eq!(camel_case_until(\"abcDef\"), 0);\n-    assert_eq!(camel_case_until(\"aDbc\"), 0);\n-}\n-\n-#[test]\n-fn until_partial() {\n-    assert_eq!(camel_case_until(\"AbcDef_\"), 6);\n-    assert_eq!(camel_case_until(\"CallTypeC\"), 8);\n-    assert_eq!(camel_case_until(\"AbcDD\"), 3);\n-}\n-\n-#[test]\n-fn until_caps() {\n-    assert_eq!(camel_case_until(\"ABCD\"), 0);\n-}"}, {"sha": "2c5c90683cced053fecf8980f8c99ff71b684b63", "filename": "tests/run-pass/associated-constant-ice.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fassociated-constant-ice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fassociated-constant-ice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fassociated-constant-ice.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,3 @@\n-\n-\n-\n pub trait Trait {\n     const CONSTANT: u8;\n }"}, {"sha": "6014558a184f2104d288cdd1149cf27b40bf0847", "filename": "tests/run-pass/enum-glob-import-crate.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fenum-glob-import-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fenum-glob-import-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fenum-glob-import-crate.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![deny(clippy)]\n+#![deny(clippy::all)]\n #![allow(unused_imports)]\n \n use std::*;"}, {"sha": "fcda3814e4a8dcf87e5767afd4c9806e46e262f7", "filename": "tests/run-pass/ice-1588.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-1588.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-1588.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-1588.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![allow(clippy)]\n+#![allow(clippy::all)]\n \n fn main() {\n     match 1 {"}, {"sha": "43d6bd8bfbc1a7601d45b9f254d8260f32ae9a5e", "filename": "tests/run-pass/ice-1969.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-1969.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-1969.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-1969.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![allow(clippy)]\n+#![allow(clippy::all)]\n \n fn main() { }\n "}, {"sha": "c6793a78529a62afe0179810764c18040fc6ca43", "filename": "tests/run-pass/ice-2499.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2499.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2499.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-2499.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![allow(dead_code, char_lit_as_u8, needless_bool)]\n+#![feature(tool_lints)]\n+\n+#![allow(dead_code, clippy::char_lit_as_u8, clippy::needless_bool)]\n \n /// Should not trigger an ICE in `SpanlessHash` / `consts::constant`\n ///"}, {"sha": "2e9c6d527c4453a6124cf60ac2132762652d4db7", "filename": "tests/run-pass/ice-2760.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2760.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2760.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-2760.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,7 @@\n-#![allow(unused_variables, blacklisted_name, needless_pass_by_value, dead_code)]\n+#![feature(tool_lints)]\n+\n+#![allow(unused_variables, clippy::blacklisted_name,\n+         clippy::needless_pass_by_value, dead_code)]\n \n // This should not compile-fail with:\n //"}, {"sha": "6b14a2b5e03b6d36370bd53d90144d58847ef6c2", "filename": "tests/run-pass/ice-2774.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2774.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-2774.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-2774.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,3 +1,5 @@\n+#![feature(tool_lints)]\n+\n use std::collections::HashSet;\n \n // See https://github.com/rust-lang-nursery/rust-clippy/issues/2774\n@@ -10,7 +12,7 @@ pub struct Bar {\n #[derive(Eq, PartialEq, Debug, Hash)]\n pub struct Foo {}\n \n-#[allow(implicit_hasher)]\n+#[allow(clippy::implicit_hasher)]\n // This should not cause a 'cannot relate bound region' ICE\n pub fn add_barfoos_to_foos<'a>(bars: &HashSet<&'a Bar>) {\n     let mut foos = HashSet::new();\n@@ -19,7 +21,7 @@ pub fn add_barfoos_to_foos<'a>(bars: &HashSet<&'a Bar>) {\n     );\n }\n \n-#[allow(implicit_hasher)]\n+#[allow(clippy::implicit_hasher)]\n // Also this should not cause a 'cannot relate bound region' ICE\n pub fn add_barfoos_to_foos2(bars: &HashSet<&Bar>) {\n     let mut foos = HashSet::new();"}, {"sha": "3992af2c2802b4d6394e5d3f49a564d94bf38d1a", "filename": "tests/run-pass/ice-700.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-700.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice-700.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-700.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![deny(clippy)]\n+#![deny(clippy::all)]\n \n fn core() {}\n "}, {"sha": "3d25aa50499930b5ba7b8427e9b74b31ad908129", "filename": "tests/run-pass/ice_exacte_size.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice_exacte_size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fice_exacte_size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice_exacte_size.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(clippy)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::all)]\n \n #[allow(dead_code)]\n struct Foo;"}, {"sha": "b7536e250285ca9abad2fa8e529ccd18cde814e4", "filename": "tests/run-pass/if_same_then_else.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fif_same_then_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fif_same_then_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fif_same_then_else.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(if_same_then_else)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::if_same_then_else)]\n \n fn main() {}\n "}, {"sha": "59b939f3e018655188c57d9c6ea7c6fa36fb054d", "filename": "tests/run-pass/match_same_arms_const.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fmatch_same_arms_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fmatch_same_arms_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fmatch_same_arms_const.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(match_same_arms)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::match_same_arms)]\n \n const PRICE_OF_SWEETS: u32 = 5;\n const PRICE_OF_KINDNESS: u32 = 0;"}, {"sha": "bfb9cfc71703700a5ee4d02dc3484c1ee0601965", "filename": "tests/run-pass/mut_mut_macro.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fmut_mut_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fmut_mut_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fmut_mut_macro.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(mut_mut, zero_ptr, cmp_nan)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::mut_mut, clippy::zero_ptr, clippy::cmp_nan)]\n #![allow(dead_code)]\n \n // compiletest + extern crates doesn't work together"}, {"sha": "204968e48d0ac055ecdd9765d3b2d0657cd56e82", "filename": "tests/run-pass/needless_borrow_fp.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fneedless_borrow_fp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fneedless_borrow_fp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fneedless_borrow_fp.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#[deny(clippy)]\n+#![feature(tool_lints)]\n+\n+#[deny(clippy::all)]\n \n #[derive(Debug)]\n pub enum Error {"}, {"sha": "f727b2547e3c5c107fc7963f2e6e41a0b1153890", "filename": "tests/run-pass/needless_lifetimes_impl_trait.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fneedless_lifetimes_impl_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fneedless_lifetimes_impl_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fneedless_lifetimes_impl_trait.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,6 @@\n+#![feature(tool_lints)]\n \n-#![deny(needless_lifetimes)]\n+#![deny(clippy::needless_lifetimes)]\n #![allow(dead_code)]\n \n trait Foo {}"}, {"sha": "aa4e16d39498fe24fc73bf07779c6821e9fbbf01", "filename": "tests/run-pass/regressions.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fregressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fregressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fregressions.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![allow(blacklisted_name)]\n+#![allow(clippy::blacklisted_name)]\n \n pub fn foo(bar: *const u8) {\n     println!(\"{:#p}\", bar);"}, {"sha": "379a98fc3ecf8f01b40f36495666e7d1af08a8f8", "filename": "tests/run-pass/single-match-else.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fsingle-match-else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fsingle-match-else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fsingle-match-else.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(single_match_else)]\n+#![warn(clippy::single_match_else)]\n \n fn main() {\n     let n = match (42, 43) {"}, {"sha": "73f48a96e777c32fba07ebcdbb8a29617eed5c92", "filename": "tests/run-pass/used_underscore_binding_macro.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fused_underscore_binding_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Frun-pass%2Fused_underscore_binding_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fused_underscore_binding_macro.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,12 +1,13 @@\n+#![feature(tool_lints)]\n \n-\n+#![allow(clippy::useless_attribute)] //issue #2910\n \n #[macro_use]\n extern crate serde_derive;\n \n /// Test that we do not lint for unused underscores in a `MacroAttribute`\n /// expansion\n-#[deny(used_underscore_binding)]\n+#[deny(clippy::used_underscore_binding)]\n #[derive(Deserialize)]\n struct MacroAttributesTest {\n     _foo: u32,"}, {"sha": "a0db2e59a29ead3b367068e8d4e5259e3a784f8a", "filename": "tests/trim_multiline.rs", "status": "removed", "additions": 0, "deletions": 57, "changes": 57, "blob_url": "https://github.com/rust-lang/rust/blob/939d842ea1a8732c86cbaed76e5283358e831efa/tests%2Ftrim_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/939d842ea1a8732c86cbaed76e5283358e831efa/tests%2Ftrim_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftrim_multiline.rs?ref=939d842ea1a8732c86cbaed76e5283358e831efa", "patch": "@@ -1,57 +0,0 @@\n-\n-\n-/// test the multiline-trim function\n-extern crate clippy_lints;\n-\n-use clippy_lints::utils::trim_multiline;\n-\n-#[test]\n-fn test_single_line() {\n-    assert_eq!(\"\", trim_multiline(\"\".into(), false));\n-    assert_eq!(\"...\", trim_multiline(\"...\".into(), false));\n-    assert_eq!(\"...\", trim_multiline(\"    ...\".into(), false));\n-    assert_eq!(\"...\", trim_multiline(\"\\t...\".into(), false));\n-    assert_eq!(\"...\", trim_multiline(\"\\t\\t...\".into(), false));\n-}\n-\n-#[test]\n-#[rustfmt::skip]\n-fn test_block() {\n-    assert_eq!(\"\\\n-if x {\n-    y\n-} else {\n-    z\n-}\", trim_multiline(\"    if x {\n-        y\n-    } else {\n-        z\n-    }\".into(), false));\n-    assert_eq!(\"\\\n-if x {\n-\\ty\n-} else {\n-\\tz\n-}\", trim_multiline(\"    if x {\n-    \\ty\n-    } else {\n-    \\tz\n-    }\".into(), false));\n-}\n-\n-#[test]\n-#[rustfmt::skip]\n-fn test_empty_line() {\n-    assert_eq!(\"\\\n-if x {\n-    y\n-\n-} else {\n-    z\n-}\", trim_multiline(\"    if x {\n-        y\n-\n-    } else {\n-        z\n-    }\".into(), false));\n-}"}, {"sha": "fe533f521d035073a60679b0c72900e3623c08ad", "filename": "tests/ui-toml/toml_blacklist/conf_french_blacklisted_name.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,10 +1,10 @@\n-\n+#![feature(tool_lints)]\n \n \n #![allow(dead_code)]\n-#![allow(single_match)]\n+#![allow(clippy::single_match)]\n #![allow(unused_variables)]\n-#![warn(blacklisted_name)]\n+#![warn(clippy::blacklisted_name)]\n \n fn test(toto: ()) {}\n "}, {"sha": "4229b711b0d5de71553fff03cc9c5cc49621484e", "filename": "tests/ui-toml/toml_blacklist/conf_french_blacklisted_name.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Ftoml_blacklist%2Fconf_french_blacklisted_name.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: use of a blacklisted/placeholder name `toto`\n 9 | fn test(toto: ()) {}\n   |         ^^^^\n   |\n-  = note: `-D blacklisted-name` implied by `-D warnings`\n+  = note: `-D clippy::blacklisted-name` implied by `-D warnings`\n \n error: use of a blacklisted/placeholder name `toto`\n   --> $DIR/conf_french_blacklisted_name.rs:12:9"}, {"sha": "074ca064ab5c2661ae0131710b73a2ab6be7a0f2", "filename": "tests/ui-toml/toml_trivially_copy/test.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,5 @@\n-#![allow(many_single_char_names)]\n+#![feature(tool_lints)]\n+#![allow(clippy::many_single_char_names)]\n \n #[derive(Copy, Clone)]\n struct Foo(u8);"}, {"sha": "cf2f15a68e674ef2d1e03669826eb7b5224f652c", "filename": "tests/ui-toml/toml_trivially_copy/test.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Ftoml_trivially_copy%2Ftest.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,15 +1,15 @@\n error: this argument is passed by reference, but would be more efficient if passed by value\n-  --> $DIR/test.rs:12:11\n+  --> $DIR/test.rs:13:11\n    |\n-12 | fn bad(x: &u16, y: &Foo) {\n+13 | fn bad(x: &u16, y: &Foo) {\n    |           ^^^^ help: consider passing by value instead: `u16`\n    |\n-   = note: `-D trivially-copy-pass-by-ref` implied by `-D warnings`\n+   = note: `-D clippy::trivially-copy-pass-by-ref` implied by `-D warnings`\n \n error: this argument is passed by reference, but would be more efficient if passed by value\n-  --> $DIR/test.rs:12:20\n+  --> $DIR/test.rs:13:20\n    |\n-12 | fn bad(x: &u16, y: &Foo) {\n+13 | fn bad(x: &u16, y: &Foo) {\n    |                    ^^^^ help: consider passing by value instead: `Foo`\n \n error: aborting due to 2 previous errors"}, {"sha": "d08c8008ec9a070afa2ff9a2b0362d357777ba1d", "filename": "tests/ui/absurd-extreme-comparisons.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fabsurd-extreme-comparisons.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fabsurd-extreme-comparisons.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fabsurd-extreme-comparisons.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(absurd_extreme_comparisons)]\n-#![allow(unused, eq_op, no_effect, unnecessary_operation, needless_pass_by_value)]\n+#![warn(clippy::absurd_extreme_comparisons)]\n+#![allow(unused, clippy::eq_op, clippy::no_effect, clippy::unnecessary_operation, clippy::needless_pass_by_value)]\n \n fn main() {\n     const Z: u32 = 0;\n@@ -27,7 +27,7 @@ fn main() {\n     b >= true;\n     false > b;\n     u > 0; // ok\n-    // this is handled by unit_cmp\n+    // this is handled by clippy::unit_cmp\n     () < {};\n }\n "}, {"sha": "2e5ebec757316e30e870715e605499ed268a8bc1", "filename": "tests/ui/absurd-extreme-comparisons.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fabsurd-extreme-comparisons.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fabsurd-extreme-comparisons.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fabsurd-extreme-comparisons.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this comparison involving the minimum or maximum element for this type co\n 10 |     u <= 0;\n    |     ^^^^^^\n    |\n-   = note: `-D absurd-extreme-comparisons` implied by `-D warnings`\n+   = note: `-D clippy::absurd-extreme-comparisons` implied by `-D warnings`\n    = help: because 0 is the minimum value for this type, the case where the two sides are not equal never occurs, consider using u == 0 instead\n \n error: this comparison involving the minimum or maximum element for this type contains a case that is always true or always false\n@@ -141,7 +141,7 @@ error: <-comparison of unit values detected. This will always be false\n 31 |     () < {};\n    |     ^^^^^^^\n    |\n-   = note: #[deny(unit_cmp)] on by default\n+   = note: #[deny(clippy::unit_cmp)] on by default\n \n error: aborting due to 18 previous errors\n "}, {"sha": "46ca2fbfb57e523e774d685324a059619ceffe60", "filename": "tests/ui/approx_const.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fapprox_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fapprox_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fapprox_const.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(approx_constant)]\n-#[allow(unused, shadow_unrelated, similar_names, unreadable_literal)]\n+#[warn(clippy::approx_constant)]\n+#[allow(unused, clippy::shadow_unrelated, clippy::similar_names, clippy::unreadable_literal)]\n fn main() {\n     let my_e = 2.7182;\n     let almost_e = 2.718;"}, {"sha": "3ff016b9c40caee533f90d56aef3dea81041b6d0", "filename": "tests/ui/approx_const.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fapprox_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fapprox_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fapprox_const.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: approximate value of `f{32, 64}::consts::E` found. Consider using it dire\n 7 |     let my_e = 2.7182;\n   |                ^^^^^^\n   |\n-  = note: `-D approx-constant` implied by `-D warnings`\n+  = note: `-D clippy::approx-constant` implied by `-D warnings`\n \n error: approximate value of `f{32, 64}::consts::E` found. Consider using it directly\n  --> $DIR/approx_const.rs:8:20"}, {"sha": "e7aa9a18b8a058241103968bb315af60661dcf46", "filename": "tests/ui/arithmetic.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Farithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Farithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(integer_arithmetic, float_arithmetic)]\n-#![allow(unused, shadow_reuse, shadow_unrelated, no_effect, unnecessary_operation)]\n+#![warn(clippy::integer_arithmetic, clippy::float_arithmetic)]\n+#![allow(unused, clippy::shadow_reuse, clippy::shadow_unrelated, clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n     let i = 1i32;\n     1 + i;"}, {"sha": "ee7a594fa158b6b1c9b995ddeafc9224daf71f54", "filename": "tests/ui/arithmetic.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Farithmetic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Farithmetic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: integer arithmetic detected\n 8 |     1 + i;\n   |     ^^^^^\n   |\n-  = note: `-D integer-arithmetic` implied by `-D warnings`\n+  = note: `-D clippy::integer-arithmetic` implied by `-D warnings`\n \n error: integer arithmetic detected\n  --> $DIR/arithmetic.rs:9:5\n@@ -37,7 +37,7 @@ error: floating-point arithmetic detected\n 23 |     f * 2.0;\n    |     ^^^^^^^\n    |\n-   = note: `-D float-arithmetic` implied by `-D warnings`\n+   = note: `-D clippy::float-arithmetic` implied by `-D warnings`\n \n error: floating-point arithmetic detected\n   --> $DIR/arithmetic.rs:25:5"}, {"sha": "765dbb679905d15e5b0d9c053901bc1488b8c741", "filename": "tests/ui/assign_ops.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,7 @@\n+#![feature(tool_lints)]\n+\n #[allow(dead_code, unused_assignments)]\n-#[warn(assign_op_pattern)]\n+#[warn(clippy::assign_op_pattern)]\n fn main() {\n     let mut a = 5;\n     a = a + 1;"}, {"sha": "fe7ccff78051571173901b53bfcb94704bb8e099", "filename": "tests/ui/assign_ops.stderr", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,57 +1,57 @@\n error: manual implementation of an assign operation\n- --> $DIR/assign_ops.rs:5:5\n+ --> $DIR/assign_ops.rs:7:5\n   |\n-5 |     a = a + 1;\n+7 |     a = a + 1;\n   |     ^^^^^^^^^ help: replace it with: `a += 1`\n   |\n-  = note: `-D assign-op-pattern` implied by `-D warnings`\n+  = note: `-D clippy::assign-op-pattern` implied by `-D warnings`\n \n error: manual implementation of an assign operation\n- --> $DIR/assign_ops.rs:6:5\n+ --> $DIR/assign_ops.rs:8:5\n   |\n-6 |     a = 1 + a;\n+8 |     a = 1 + a;\n   |     ^^^^^^^^^ help: replace it with: `a += 1`\n \n error: manual implementation of an assign operation\n- --> $DIR/assign_ops.rs:7:5\n+ --> $DIR/assign_ops.rs:9:5\n   |\n-7 |     a = a - 1;\n+9 |     a = a - 1;\n   |     ^^^^^^^^^ help: replace it with: `a -= 1`\n \n error: manual implementation of an assign operation\n- --> $DIR/assign_ops.rs:8:5\n-  |\n-8 |     a = a * 99;\n-  |     ^^^^^^^^^^ help: replace it with: `a *= 99`\n+  --> $DIR/assign_ops.rs:10:5\n+   |\n+10 |     a = a * 99;\n+   |     ^^^^^^^^^^ help: replace it with: `a *= 99`\n \n error: manual implementation of an assign operation\n- --> $DIR/assign_ops.rs:9:5\n-  |\n-9 |     a = 42 * a;\n-  |     ^^^^^^^^^^ help: replace it with: `a *= 42`\n+  --> $DIR/assign_ops.rs:11:5\n+   |\n+11 |     a = 42 * a;\n+   |     ^^^^^^^^^^ help: replace it with: `a *= 42`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:10:5\n+  --> $DIR/assign_ops.rs:12:5\n    |\n-10 |     a = a / 2;\n+12 |     a = a / 2;\n    |     ^^^^^^^^^ help: replace it with: `a /= 2`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:11:5\n+  --> $DIR/assign_ops.rs:13:5\n    |\n-11 |     a = a % 5;\n+13 |     a = a % 5;\n    |     ^^^^^^^^^ help: replace it with: `a %= 5`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:12:5\n+  --> $DIR/assign_ops.rs:14:5\n    |\n-12 |     a = a & 1;\n+14 |     a = a & 1;\n    |     ^^^^^^^^^ help: replace it with: `a &= 1`\n \n error: manual implementation of an assign operation\n-  --> $DIR/assign_ops.rs:18:5\n+  --> $DIR/assign_ops.rs:20:5\n    |\n-18 |     s = s + \"bla\";\n+20 |     s = s + \"bla\";\n    |     ^^^^^^^^^^^^^ help: replace it with: `s += \"bla\"`\n \n error: aborting due to 9 previous errors"}, {"sha": "c3f5083bb1f9428f626c128e76e2a6c978e12aa8", "filename": "tests/ui/assign_ops2.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops2.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n-\n+#![feature(tool_lints)]\n \n \n #[allow(unused_assignments)]\n-#[warn(misrefactored_assign_op, assign_op_pattern)]\n+#[warn(clippy::misrefactored_assign_op, clippy::assign_op_pattern)]\n fn main() {\n     let mut a = 5;\n     a += a + 1;"}, {"sha": "93528e505773b4f541e1ff9fdd2bc2cda30090ef", "filename": "tests/ui/assign_ops2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fassign_ops2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fassign_ops2.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: variable appears on both sides of an assignment operation\n 8 |     a += a + 1;\n   |     ^^^^^^^^^^\n   |\n-  = note: `-D misrefactored-assign-op` implied by `-D warnings`\n+  = note: `-D clippy::misrefactored-assign-op` implied by `-D warnings`\n help: Did you mean a = a + 1 or a = a + a + 1? Consider replacing it with\n   |\n 8 |     a += 1;"}, {"sha": "b1f0ca640aab6aa2cc5fe4da16a8ee393acbca30", "filename": "tests/ui/attrs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattrs.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(inline_always, deprecated_semver)]\n+#![warn(clippy::inline_always, clippy::deprecated_semver)]\n \n #[inline(always)]\n fn test_attr_lint() {"}, {"sha": "6b6ecd675b3ca241ec0daa61bc5eb4dd846349ad", "filename": "tests/ui/attrs.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fattrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fattrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fattrs.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,15 +4,15 @@ error: you have declared `#[inline(always)]` on `test_attr_lint`. This is usuall\n 6 | #[inline(always)]\n   | ^^^^^^^^^^^^^^^^^\n   |\n-  = note: `-D inline-always` implied by `-D warnings`\n+  = note: `-D clippy::inline-always` implied by `-D warnings`\n \n error: the since field must contain a semver-compliant version\n   --> $DIR/attrs.rs:27:14\n    |\n 27 | #[deprecated(since = \"forever\")]\n    |              ^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D deprecated-semver` implied by `-D warnings`\n+   = note: `-D clippy::deprecated-semver` implied by `-D warnings`\n \n error: the since field must contain a semver-compliant version\n   --> $DIR/attrs.rs:30:14"}, {"sha": "46618fe4065431593f1ccb61c87079647ebeff1b", "filename": "tests/ui/author/matches.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fauthor%2Fmatches.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fauthor%2Fmatches.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fauthor%2Fmatches.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: returning the result of a let binding from a block. Consider returning th\n 9 |             x\n   |             ^\n   |\n-  = note: `-D let-and-return` implied by `-D warnings`\n+  = note: `-D clippy::let-and-return` implied by `-D warnings`\n note: this expression can be directly returned\n  --> $DIR/matches.rs:8:21\n   |"}, {"sha": "4111f344b666208c63c5aba8d2f18fef2c80ba7b", "filename": "tests/ui/bit_masks.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbit_masks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbit_masks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbit_masks.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,11 +1,11 @@\n-\n+#![feature(tool_lints)]\n \n \n const THREE_BITS : i64 = 7;\n const EVEN_MORE_REDIRECTION : i64 = THREE_BITS;\n \n-#[warn(bad_bit_mask)]\n-#[allow(ineffective_bit_mask, identity_op, no_effect, unnecessary_operation)]\n+#[warn(clippy::bad_bit_mask)]\n+#[allow(clippy::ineffective_bit_mask, clippy::identity_op, clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n     let x = 5;\n \n@@ -44,8 +44,8 @@ fn main() {\n     ineffective();\n }\n \n-#[warn(ineffective_bit_mask)]\n-#[allow(bad_bit_mask, no_effect, unnecessary_operation)]\n+#[warn(clippy::ineffective_bit_mask)]\n+#[allow(clippy::bad_bit_mask, clippy::no_effect, clippy::unnecessary_operation)]\n fn ineffective() {\n     let x = 5;\n "}, {"sha": "dcf3f241b4b57cfb5f7135032798795fcdf196d1", "filename": "tests/ui/bit_masks.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbit_masks.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbit_masks.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbit_masks.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,15 +4,15 @@ error: &-masking with zero\n 12 |     x & 0 == 0;\n    |     ^^^^^^^^^^\n    |\n-   = note: `-D bad-bit-mask` implied by `-D warnings`\n+   = note: `-D clippy::bad-bit-mask` implied by `-D warnings`\n \n error: this operation will always return zero. This is likely not the intended outcome\n   --> $DIR/bit_masks.rs:12:5\n    |\n 12 |     x & 0 == 0;\n    |     ^^^^^\n    |\n-   = note: #[deny(erasing_op)] on by default\n+   = note: #[deny(clippy::erasing_op)] on by default\n \n error: incompatible bit mask: `_ & 2` can never be equal to `1`\n   --> $DIR/bit_masks.rs:15:5\n@@ -86,7 +86,7 @@ error: ineffective bit mask: `x | 1` compared to `3`, is the same as x compared\n 52 |     x | 1 > 3;\n    |     ^^^^^^^^^\n    |\n-   = note: `-D ineffective-bit-mask` implied by `-D warnings`\n+   = note: `-D clippy::ineffective-bit-mask` implied by `-D warnings`\n \n error: ineffective bit mask: `x | 1` compared to `4`, is the same as x compared directly\n   --> $DIR/bit_masks.rs:53:5"}, {"sha": "4e2e5388c989e29056ae16e4e86f7ccdf5fe9c11", "filename": "tests/ui/blacklisted_name.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblacklisted_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblacklisted_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblacklisted_name.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![allow(dead_code, similar_names, single_match, toplevel_ref_arg, unused_mut, unused_variables)]\n-#![warn(blacklisted_name)]\n+#![allow(dead_code, clippy::similar_names, clippy::single_match, clippy::toplevel_ref_arg, unused_mut, unused_variables)]\n+#![warn(clippy::blacklisted_name)]\n \n fn test(foo: ()) {}\n "}, {"sha": "472401d5ed6046e25c63b505c97a1dcc8d1d19d0", "filename": "tests/ui/blacklisted_name.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblacklisted_name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblacklisted_name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblacklisted_name.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: use of a blacklisted/placeholder name `foo`\n 7 | fn test(foo: ()) {}\n   |         ^^^\n   |\n-  = note: `-D blacklisted-name` implied by `-D warnings`\n+  = note: `-D clippy::blacklisted-name` implied by `-D warnings`\n \n error: use of a blacklisted/placeholder name `foo`\n   --> $DIR/blacklisted_name.rs:10:9"}, {"sha": "dd0e55034370a8cc1a1b27d7670ffa36b07be88d", "filename": "tests/ui/block_in_if_condition.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblock_in_if_condition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblock_in_if_condition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblock_in_if_condition.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,10 +1,10 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(block_in_if_condition_expr)]\n-#![warn(block_in_if_condition_stmt)]\n-#![allow(unused, let_and_return)]\n-#![warn(nonminimal_bool)]\n+#![warn(clippy::block_in_if_condition_expr)]\n+#![warn(clippy::block_in_if_condition_stmt)]\n+#![allow(unused, clippy::let_and_return)]\n+#![warn(clippy::nonminimal_bool)]\n \n \n macro_rules! blocky {"}, {"sha": "41f1e9c1681663c88536d769bc88b8293dc76f71", "filename": "tests/ui/block_in_if_condition.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblock_in_if_condition.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fblock_in_if_condition.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblock_in_if_condition.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -8,7 +8,7 @@ error: in an 'if' condition, avoid complex blocks or closures with blocks; inste\n 33 | |     } {\n    | |_____^\n    |\n-   = note: `-D block-in-if-condition-stmt` implied by `-D warnings`\n+   = note: `-D clippy::block-in-if-condition-stmt` implied by `-D warnings`\n    = help: try\n            let res = {\n                let x = 3;\n@@ -24,7 +24,7 @@ error: omit braces around single expression condition\n 41 |     if { true } {\n    |        ^^^^^^^^\n    |\n-   = note: `-D block-in-if-condition-expr` implied by `-D warnings`\n+   = note: `-D clippy::block-in-if-condition-expr` implied by `-D warnings`\n    = help: try\n            if true {\n                6\n@@ -48,7 +48,7 @@ error: this boolean expression can be simplified\n 67 |     if true && x == 3 {\n    |        ^^^^^^^^^^^^^^ help: try: `x == 3`\n    |\n-   = note: `-D nonminimal-bool` implied by `-D warnings`\n+   = note: `-D clippy::nonminimal-bool` implied by `-D warnings`\n \n error: aborting due to 5 previous errors\n "}, {"sha": "144f9f4c631bfbc0472f2008d7be69977ee426d9", "filename": "tests/ui/bool_comparison.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbool_comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbool_comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(bool_comparison)]\n+#[warn(clippy::bool_comparison)]\n fn main() {\n     let x = true;\n     if x == true { \"yes\" } else { \"no\" };"}, {"sha": "2fcde94367a662950e832c15a8c053c9314ec89d", "filename": "tests/ui/bool_comparison.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbool_comparison.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbool_comparison.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: equality checks against true are unnecessary\n 7 |     if x == true { \"yes\" } else { \"no\" };\n   |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n   |\n-  = note: `-D bool-comparison` implied by `-D warnings`\n+  = note: `-D clippy::bool-comparison` implied by `-D warnings`\n \n error: equality checks against false can be replaced by a negation\n  --> $DIR/bool_comparison.rs:8:8"}, {"sha": "eaa686c9a901f2ba20cb570c04d8b02df84defcb", "filename": "tests/ui/booleans.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbooleans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbooleans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbooleans.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n+#![warn(clippy::nonminimal_bool, clippy::logic_bug)]\n \n-#![warn(nonminimal_bool, logic_bug)]\n-\n-#[allow(unused, many_single_char_names)]\n+#[allow(unused, clippy::many_single_char_names)]\n fn main() {\n     let a: bool = unimplemented!();\n     let b: bool = unimplemented!();\n@@ -23,7 +23,7 @@ fn main() {\n     let _ = !(!a && b);\n }\n \n-#[allow(unused, many_single_char_names)]\n+#[allow(unused, clippy::many_single_char_names)]\n fn equality_stuff() {\n     let a: i32 = unimplemented!();\n     let b: i32 = unimplemented!();\n@@ -39,7 +39,7 @@ fn equality_stuff() {\n     let _ = a != b || !(a != b || c == d);\n }\n \n-#[allow(unused, many_single_char_names)]\n+#[allow(unused, clippy::many_single_char_names)]\n fn methods_with_negation() {\n     let a: Option<i32> = unimplemented!();\n     let b: Result<i32, i32> = unimplemented!();\n@@ -59,7 +59,7 @@ fn methods_with_negation() {\n }\n \n // Simplified versions of https://github.com/rust-lang-nursery/rust-clippy/issues/2638\n-// nonminimal_bool should only check the built-in Result and Some type, not\n+// clippy::nonminimal_bool should only check the built-in Result and Some type, not\n // any other types like the following.\n enum CustomResultOk<E> { Ok, Err(E) }\n enum CustomResultErr<E> { Ok, Err(E) }\n@@ -115,7 +115,7 @@ fn warn_for_built_in_methods_with_negation() {\n     if !res.is_none() { }\n }\n \n-#[allow(neg_cmp_op_on_partial_ord)]\n+#[allow(clippy::neg_cmp_op_on_partial_ord)]\n fn dont_warn_for_negated_partial_ord_comparison() {\n     let a: f64 = unimplemented!();\n     let b: f64 = unimplemented!();"}, {"sha": "45e371025ef6e4e4c71949849c81cebff5d2e227", "filename": "tests/ui/booleans.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbooleans.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbooleans.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbooleans.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this boolean expression contains a logic bug\n 12 |     let _ = a && b || a;\n    |             ^^^^^^^^^^^ help: it would look like the following: `a`\n    |\n-   = note: `-D logic-bug` implied by `-D warnings`\n+   = note: `-D clippy::logic-bug` implied by `-D warnings`\n help: this expression can be optimized out by applying boolean operations to the outer expression\n   --> $DIR/booleans.rs:12:18\n    |\n@@ -17,7 +17,7 @@ error: this boolean expression can be simplified\n 14 |     let _ = !true;\n    |             ^^^^^ help: try: `false`\n    |\n-   = note: `-D nonminimal-bool` implied by `-D warnings`\n+   = note: `-D clippy::nonminimal-bool` implied by `-D warnings`\n \n error: this boolean expression can be simplified\n   --> $DIR/booleans.rs:15:13"}, {"sha": "216dbebda6737dd676819fcf8ad5777830cec994", "filename": "tests/ui/borrow_box.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fborrow_box.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fborrow_box.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fborrow_box.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![deny(borrowed_box)]\n-#![allow(blacklisted_name)]\n+#![deny(clippy::borrowed_box)]\n+#![allow(clippy::blacklisted_name)]\n #![allow(unused_variables)]\n #![allow(dead_code)]\n "}, {"sha": "1098c7785e23ba74687fa19b5a256797e54be25a", "filename": "tests/ui/borrow_box.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fborrow_box.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fborrow_box.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fborrow_box.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -7,8 +7,8 @@ error: you seem to be trying to use `&Box<T>`. Consider using just `&T`\n note: lint level defined here\n  --> $DIR/borrow_box.rs:4:9\n   |\n-4 | #![deny(borrowed_box)]\n-  |         ^^^^^^^^^^^^\n+4 | #![deny(clippy::borrowed_box)]\n+  |         ^^^^^^^^^^^^^^^^^^^^\n \n error: you seem to be trying to use `&Box<T>`. Consider using just `&T`\n   --> $DIR/borrow_box.rs:14:14"}, {"sha": "bc5e8361d8bc6a6e79c2d511d1c1440c0fcd4f8c", "filename": "tests/ui/box_vec.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbox_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbox_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbox_vec.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,9 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(clippy)]\n-#![allow(boxed_local, needless_pass_by_value)]\n-#![allow(blacklisted_name)]\n+#![warn(clippy::all)]\n+#![allow(clippy::boxed_local, clippy::needless_pass_by_value)]\n+#![allow(clippy::blacklisted_name)]\n \n macro_rules! boxit {\n     ($init:expr, $x:ty) => {"}, {"sha": "b90bb5e2a4e5d4b8149924533c942a7e3d7e5c90", "filename": "tests/ui/box_vec.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbox_vec.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbox_vec.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbox_vec.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: you seem to be trying to use `Box<Vec<T>>`. Consider using just `Vec<T>`\n 17 | pub fn test(foo: Box<Vec<bool>>) {\n    |                  ^^^^^^^^^^^^^^\n    |\n-   = note: `-D box-vec` implied by `-D warnings`\n+   = note: `-D clippy::box-vec` implied by `-D warnings`\n    = help: `Vec<T>` is already on the heap, `Box<Vec<T>>` makes an extra allocation.\n \n error: aborting due to previous error"}, {"sha": "56892fc948398a2de2cca643eea3851e4dac8bb3", "filename": "tests/ui/builtin-type-shadow.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbuiltin-type-shadow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbuiltin-type-shadow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbuiltin-type-shadow.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(builtin_type_shadow)]\n+#![warn(clippy::builtin_type_shadow)]\n \n fn foo<u32>(a: u32) -> u32 {\n     42"}, {"sha": "78924ebf9cf3e85833645be429d6228dc2ead168", "filename": "tests/ui/builtin-type-shadow.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbuiltin-type-shadow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbuiltin-type-shadow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbuiltin-type-shadow.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: This generic shadows the built-in type `u32`\n 5 | fn foo<u32>(a: u32) -> u32 {\n   |        ^^^\n   |\n-  = note: `-D builtin-type-shadow` implied by `-D warnings`\n+  = note: `-D clippy::builtin-type-shadow` implied by `-D warnings`\n \n error[E0308]: mismatched types\n  --> $DIR/builtin-type-shadow.rs:6:5"}, {"sha": "7211284e4a08268a08e9467a1b2a988db43f844e", "filename": "tests/ui/bytecount.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbytecount.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbytecount.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbytecount.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[deny(naive_bytecount)]\n+#[deny(clippy::naive_bytecount)]\n fn main() {\n     let x = vec![0_u8; 16];\n "}, {"sha": "0564d6a0b609a7393f959d972ca28beca09155f9", "filename": "tests/ui/bytecount.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbytecount.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fbytecount.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbytecount.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -7,8 +7,8 @@ error: You appear to be counting bytes the naive way\n note: lint level defined here\n  --> $DIR/bytecount.rs:4:8\n   |\n-4 | #[deny(naive_bytecount)]\n-  |        ^^^^^^^^^^^^^^^\n+4 | #[deny(clippy::naive_bytecount)]\n+  |        ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: You appear to be counting bytes the naive way\n   --> $DIR/bytecount.rs:10:13"}, {"sha": "0668b16ff326cf73556eddb57488b9ffdb0f75de", "filename": "tests/ui/cast.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,35 +1,35 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(cast_precision_loss, cast_possible_truncation, cast_sign_loss, cast_possible_wrap, cast_lossless)]\n-#[allow(no_effect, unnecessary_operation)]\n+#[warn(clippy::cast_precision_loss, clippy::cast_possible_truncation, clippy::cast_sign_loss, clippy::cast_possible_wrap, clippy::cast_lossless)]\n+#[allow(clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n-    // Test cast_precision_loss\n+    // Test clippy::cast_precision_loss\n     1i32 as f32;\n     1i64 as f32;\n     1i64 as f64;\n     1u32 as f32;\n     1u64 as f32;\n     1u64 as f64;\n-    // Test cast_possible_truncation\n+    // Test clippy::cast_possible_truncation\n     1f32 as i32;\n     1f32 as u32;\n     1f64 as f32;\n     1i32 as i8;\n     1i32 as u8;\n     1f64 as isize;\n     1f64 as usize;\n-    // Test cast_possible_wrap\n+    // Test clippy::cast_possible_wrap\n     1u8 as i8;\n     1u16 as i16;\n     1u32 as i32;\n     1u64 as i64;\n     1usize as isize;\n-    // Test cast_lossless with casts from floating-point types\n+    // Test clippy::cast_lossless with casts from floating-point types\n     1.0f32 as f64;\n-    // Test cast_lossless with an expression wrapped in parens\n+    // Test clippy::cast_lossless with an expression wrapped in parens\n     (1u8 + 1u8) as u16;\n-    // Test cast_sign_loss\n+    // Test clippy::cast_sign_loss\n     1i32 as u32;\n     1isize as usize;\n     // Extra checks for *size"}, {"sha": "2578c49893f6056afb83c6b6ce4e46f059c7ef7c", "filename": "tests/ui/cast.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: casting i32 to f32 causes a loss of precision (i32 is 32 bits wide, but f\n 8 |     1i32 as f32;\n   |     ^^^^^^^^^^^\n   |\n-  = note: `-D cast-precision-loss` implied by `-D warnings`\n+  = note: `-D clippy::cast-precision-loss` implied by `-D warnings`\n \n error: casting i64 to f32 causes a loss of precision (i64 is 64 bits wide, but f32's mantissa is only 23 bits wide)\n  --> $DIR/cast.rs:9:5\n@@ -42,7 +42,7 @@ error: casting f32 to i32 may truncate the value\n 15 |     1f32 as i32;\n    |     ^^^^^^^^^^^\n    |\n-   = note: `-D cast-possible-truncation` implied by `-D warnings`\n+   = note: `-D clippy::cast-possible-truncation` implied by `-D warnings`\n \n error: casting f32 to u32 may truncate the value\n   --> $DIR/cast.rs:16:5\n@@ -56,7 +56,7 @@ error: casting f32 to u32 may lose the sign of the value\n 16 |     1f32 as u32;\n    |     ^^^^^^^^^^^\n    |\n-   = note: `-D cast-sign-loss` implied by `-D warnings`\n+   = note: `-D clippy::cast-sign-loss` implied by `-D warnings`\n \n error: casting f64 to f32 may truncate the value\n   --> $DIR/cast.rs:17:5\n@@ -106,7 +106,7 @@ error: casting u8 to i8 may wrap around the value\n 23 |     1u8 as i8;\n    |     ^^^^^^^^^\n    |\n-   = note: `-D cast-possible-wrap` implied by `-D warnings`\n+   = note: `-D clippy::cast-possible-wrap` implied by `-D warnings`\n \n error: casting u16 to i16 may wrap around the value\n   --> $DIR/cast.rs:24:5\n@@ -138,7 +138,7 @@ error: casting f32 to f64 may become silently lossy if types change\n 29 |     1.0f32 as f64;\n    |     ^^^^^^^^^^^^^ help: try: `f64::from(1.0f32)`\n    |\n-   = note: `-D cast-lossless` implied by `-D warnings`\n+   = note: `-D clippy::cast-lossless` implied by `-D warnings`\n \n error: casting u8 to u16 may become silently lossy if types change\n   --> $DIR/cast.rs:31:5\n@@ -164,7 +164,7 @@ error: casting to the same type is unnecessary (`i32` -> `i32`)\n 37 |     1i32 as i32;\n    |     ^^^^^^^^^^^\n    |\n-   = note: `-D unnecessary-cast` implied by `-D warnings`\n+   = note: `-D clippy::unnecessary-cast` implied by `-D warnings`\n \n error: casting to the same type is unnecessary (`f32` -> `f32`)\n   --> $DIR/cast.rs:38:5"}, {"sha": "1f7606de649d54fae878f274630631e8bbe55939", "filename": "tests/ui/cast_alignment.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_alignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_alignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_alignment.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,11 +1,13 @@\n+#![feature(tool_lints)]\n+\n //! Test casts for alignment issues\n \n #![feature(libc)]\n \n extern crate libc;\n \n-#[warn(cast_ptr_alignment)]\n-#[allow(no_effect, unnecessary_operation, cast_lossless)]\n+#[warn(clippy::cast_ptr_alignment)]\n+#[allow(clippy::no_effect, clippy::unnecessary_operation, clippy::cast_lossless)]\n fn main() {\n     /* These should be warned against */\n "}, {"sha": "d03d727a89c6c6344fb0bda968f1d58b1dd50b71", "filename": "tests/ui/cast_alignment.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_alignment.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_alignment.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_alignment.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,15 +1,15 @@\n error: casting from `*const u8` to a more-strictly-aligned pointer (`*const u16`)\n-  --> $DIR/cast_alignment.rs:13:5\n+  --> $DIR/cast_alignment.rs:15:5\n    |\n-13 |     (&1u8 as *const u8) as *const u16;\n+15 |     (&1u8 as *const u8) as *const u16;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D cast-ptr-alignment` implied by `-D warnings`\n+   = note: `-D clippy::cast-ptr-alignment` implied by `-D warnings`\n \n error: casting from `*mut u8` to a more-strictly-aligned pointer (`*mut u16`)\n-  --> $DIR/cast_alignment.rs:14:5\n+  --> $DIR/cast_alignment.rs:16:5\n    |\n-14 |     (&mut 1u8 as *mut u8) as *mut u16;\n+16 |     (&mut 1u8 as *mut u8) as *mut u16;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 2 previous errors"}, {"sha": "437c4b6712005785c3f545ed8f74e2970e0dc414", "filename": "tests/ui/cast_lossless_float.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_float.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_float.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_lossless_float.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,9 @@\n-#[warn(cast_lossless)]\n-#[allow(no_effect, unnecessary_operation)]\n+#![feature(tool_lints)]\n+\n+#[warn(clippy::cast_lossless)]\n+#[allow(clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n-    // Test cast_lossless with casts to floating-point types\n+    // Test clippy::cast_lossless with casts to floating-point types\n     1i8 as f32;\n     1i8 as f64;\n     1u8 as f32;"}, {"sha": "9025633a141101da7b5835706842da95851d70be", "filename": "tests/ui/cast_lossless_float.stderr", "status": "modified", "additions": 25, "deletions": 25, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_float.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_float.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_lossless_float.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,63 +1,63 @@\n error: casting i8 to f32 may become silently lossy if types change\n- --> $DIR/cast_lossless_float.rs:5:5\n+ --> $DIR/cast_lossless_float.rs:7:5\n   |\n-5 |     1i8 as f32;\n+7 |     1i8 as f32;\n   |     ^^^^^^^^^^ help: try: `f32::from(1i8)`\n   |\n-  = note: `-D cast-lossless` implied by `-D warnings`\n+  = note: `-D clippy::cast-lossless` implied by `-D warnings`\n \n error: casting i8 to f64 may become silently lossy if types change\n- --> $DIR/cast_lossless_float.rs:6:5\n+ --> $DIR/cast_lossless_float.rs:8:5\n   |\n-6 |     1i8 as f64;\n+8 |     1i8 as f64;\n   |     ^^^^^^^^^^ help: try: `f64::from(1i8)`\n \n error: casting u8 to f32 may become silently lossy if types change\n- --> $DIR/cast_lossless_float.rs:7:5\n+ --> $DIR/cast_lossless_float.rs:9:5\n   |\n-7 |     1u8 as f32;\n+9 |     1u8 as f32;\n   |     ^^^^^^^^^^ help: try: `f32::from(1u8)`\n \n error: casting u8 to f64 may become silently lossy if types change\n- --> $DIR/cast_lossless_float.rs:8:5\n-  |\n-8 |     1u8 as f64;\n-  |     ^^^^^^^^^^ help: try: `f64::from(1u8)`\n+  --> $DIR/cast_lossless_float.rs:10:5\n+   |\n+10 |     1u8 as f64;\n+   |     ^^^^^^^^^^ help: try: `f64::from(1u8)`\n \n error: casting i16 to f32 may become silently lossy if types change\n- --> $DIR/cast_lossless_float.rs:9:5\n-  |\n-9 |     1i16 as f32;\n-  |     ^^^^^^^^^^^ help: try: `f32::from(1i16)`\n+  --> $DIR/cast_lossless_float.rs:11:5\n+   |\n+11 |     1i16 as f32;\n+   |     ^^^^^^^^^^^ help: try: `f32::from(1i16)`\n \n error: casting i16 to f64 may become silently lossy if types change\n-  --> $DIR/cast_lossless_float.rs:10:5\n+  --> $DIR/cast_lossless_float.rs:12:5\n    |\n-10 |     1i16 as f64;\n+12 |     1i16 as f64;\n    |     ^^^^^^^^^^^ help: try: `f64::from(1i16)`\n \n error: casting u16 to f32 may become silently lossy if types change\n-  --> $DIR/cast_lossless_float.rs:11:5\n+  --> $DIR/cast_lossless_float.rs:13:5\n    |\n-11 |     1u16 as f32;\n+13 |     1u16 as f32;\n    |     ^^^^^^^^^^^ help: try: `f32::from(1u16)`\n \n error: casting u16 to f64 may become silently lossy if types change\n-  --> $DIR/cast_lossless_float.rs:12:5\n+  --> $DIR/cast_lossless_float.rs:14:5\n    |\n-12 |     1u16 as f64;\n+14 |     1u16 as f64;\n    |     ^^^^^^^^^^^ help: try: `f64::from(1u16)`\n \n error: casting i32 to f64 may become silently lossy if types change\n-  --> $DIR/cast_lossless_float.rs:13:5\n+  --> $DIR/cast_lossless_float.rs:15:5\n    |\n-13 |     1i32 as f64;\n+15 |     1i32 as f64;\n    |     ^^^^^^^^^^^ help: try: `f64::from(1i32)`\n \n error: casting u32 to f64 may become silently lossy if types change\n-  --> $DIR/cast_lossless_float.rs:14:5\n+  --> $DIR/cast_lossless_float.rs:16:5\n    |\n-14 |     1u32 as f64;\n+16 |     1u32 as f64;\n    |     ^^^^^^^^^^^ help: try: `f64::from(1u32)`\n \n error: aborting due to 10 previous errors"}, {"sha": "e06e653c6f5d904c76de55d45607743d60c6b402", "filename": "tests/ui/cast_lossless_integer.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_integer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_integer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_lossless_integer.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n-\n-#[warn(cast_lossless)]\n-#[allow(no_effect, unnecessary_operation)]\n+#![feature(tool_lints)]\n+#[warn(clippy::cast_lossless)]\n+#[allow(clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n-    // Test cast_lossless with casts to integer types\n+    // Test clippy::cast_lossless with casts to integer types\n     1i8 as i16;\n     1i8 as i32;\n     1i8 as i64;"}, {"sha": "9640e1e18fa2191c909bde67fde514eb1c1836ee", "filename": "tests/ui/cast_lossless_integer.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_integer.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_lossless_integer.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_lossless_integer.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: casting i8 to i16 may become silently lossy if types change\n 6 |     1i8 as i16;\n   |     ^^^^^^^^^^ help: try: `i16::from(1i8)`\n   |\n-  = note: `-D cast-lossless` implied by `-D warnings`\n+  = note: `-D clippy::cast-lossless` implied by `-D warnings`\n \n error: casting i8 to i32 may become silently lossy if types change\n  --> $DIR/cast_lossless_integer.rs:7:5"}, {"sha": "4c72f57165cb2bce74d3fc5e5b09cc865caf3dc9", "filename": "tests/ui/cast_size.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_size.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,7 @@\n-#[warn(cast_precision_loss, cast_possible_truncation, cast_sign_loss, cast_possible_wrap, cast_lossless)]\n-#[allow(no_effect, unnecessary_operation)]\n+#![feature(tool_lints)]\n+\n+#[warn(clippy::cast_precision_loss, clippy::cast_possible_truncation, clippy::cast_sign_loss, clippy::cast_possible_wrap, clippy::cast_lossless)]\n+#[allow(clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n     // Casting from *size\n     1isize as i8;"}, {"sha": "1797e2e367f48ec776e23966c1cb2767403b2cd9", "filename": "tests/ui/cast_size.stderr", "status": "modified", "additions": 46, "deletions": 46, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_size.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcast_size.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcast_size.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,123 +1,123 @@\n error: casting isize to i8 may truncate the value\n- --> $DIR/cast_size.rs:5:5\n+ --> $DIR/cast_size.rs:7:5\n   |\n-5 |     1isize as i8;\n+7 |     1isize as i8;\n   |     ^^^^^^^^^^^^\n   |\n-  = note: `-D cast-possible-truncation` implied by `-D warnings`\n+  = note: `-D clippy::cast-possible-truncation` implied by `-D warnings`\n \n error: casting isize to f64 causes a loss of precision on targets with 64-bit wide pointers (isize is 64 bits wide, but f64's mantissa is only 52 bits wide)\n- --> $DIR/cast_size.rs:6:5\n+ --> $DIR/cast_size.rs:8:5\n   |\n-6 |     1isize as f64;\n+8 |     1isize as f64;\n   |     ^^^^^^^^^^^^^\n   |\n-  = note: `-D cast-precision-loss` implied by `-D warnings`\n+  = note: `-D clippy::cast-precision-loss` implied by `-D warnings`\n \n error: casting usize to f64 causes a loss of precision on targets with 64-bit wide pointers (usize is 64 bits wide, but f64's mantissa is only 52 bits wide)\n- --> $DIR/cast_size.rs:7:5\n+ --> $DIR/cast_size.rs:9:5\n   |\n-7 |     1usize as f64;\n+9 |     1usize as f64;\n   |     ^^^^^^^^^^^^^\n \n error: casting isize to f32 causes a loss of precision (isize is 32 or 64 bits wide, but f32's mantissa is only 23 bits wide)\n- --> $DIR/cast_size.rs:8:5\n-  |\n-8 |     1isize as f32;\n-  |     ^^^^^^^^^^^^^\n+  --> $DIR/cast_size.rs:10:5\n+   |\n+10 |     1isize as f32;\n+   |     ^^^^^^^^^^^^^\n \n error: casting usize to f32 causes a loss of precision (usize is 32 or 64 bits wide, but f32's mantissa is only 23 bits wide)\n- --> $DIR/cast_size.rs:9:5\n-  |\n-9 |     1usize as f32;\n-  |     ^^^^^^^^^^^^^\n+  --> $DIR/cast_size.rs:11:5\n+   |\n+11 |     1usize as f32;\n+   |     ^^^^^^^^^^^^^\n \n error: casting isize to i32 may truncate the value on targets with 64-bit wide pointers\n-  --> $DIR/cast_size.rs:10:5\n+  --> $DIR/cast_size.rs:12:5\n    |\n-10 |     1isize as i32;\n+12 |     1isize as i32;\n    |     ^^^^^^^^^^^^^\n \n error: casting isize to u32 may lose the sign of the value\n-  --> $DIR/cast_size.rs:11:5\n+  --> $DIR/cast_size.rs:13:5\n    |\n-11 |     1isize as u32;\n+13 |     1isize as u32;\n    |     ^^^^^^^^^^^^^\n    |\n-   = note: `-D cast-sign-loss` implied by `-D warnings`\n+   = note: `-D clippy::cast-sign-loss` implied by `-D warnings`\n \n error: casting isize to u32 may truncate the value on targets with 64-bit wide pointers\n-  --> $DIR/cast_size.rs:11:5\n+  --> $DIR/cast_size.rs:13:5\n    |\n-11 |     1isize as u32;\n+13 |     1isize as u32;\n    |     ^^^^^^^^^^^^^\n \n error: casting usize to u32 may truncate the value on targets with 64-bit wide pointers\n-  --> $DIR/cast_size.rs:12:5\n+  --> $DIR/cast_size.rs:14:5\n    |\n-12 |     1usize as u32;\n+14 |     1usize as u32;\n    |     ^^^^^^^^^^^^^\n \n error: casting usize to i32 may truncate the value on targets with 64-bit wide pointers\n-  --> $DIR/cast_size.rs:13:5\n+  --> $DIR/cast_size.rs:15:5\n    |\n-13 |     1usize as i32;\n+15 |     1usize as i32;\n    |     ^^^^^^^^^^^^^\n \n error: casting usize to i32 may wrap around the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:13:5\n+  --> $DIR/cast_size.rs:15:5\n    |\n-13 |     1usize as i32;\n+15 |     1usize as i32;\n    |     ^^^^^^^^^^^^^\n    |\n-   = note: `-D cast-possible-wrap` implied by `-D warnings`\n+   = note: `-D clippy::cast-possible-wrap` implied by `-D warnings`\n \n error: casting i64 to isize may truncate the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:15:5\n+  --> $DIR/cast_size.rs:17:5\n    |\n-15 |     1i64 as isize;\n+17 |     1i64 as isize;\n    |     ^^^^^^^^^^^^^\n \n error: casting i64 to usize may lose the sign of the value\n-  --> $DIR/cast_size.rs:16:5\n+  --> $DIR/cast_size.rs:18:5\n    |\n-16 |     1i64 as usize;\n+18 |     1i64 as usize;\n    |     ^^^^^^^^^^^^^\n \n error: casting i64 to usize may truncate the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:16:5\n+  --> $DIR/cast_size.rs:18:5\n    |\n-16 |     1i64 as usize;\n+18 |     1i64 as usize;\n    |     ^^^^^^^^^^^^^\n \n error: casting u64 to isize may truncate the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:17:5\n+  --> $DIR/cast_size.rs:19:5\n    |\n-17 |     1u64 as isize;\n+19 |     1u64 as isize;\n    |     ^^^^^^^^^^^^^\n \n error: casting u64 to isize may wrap around the value on targets with 64-bit wide pointers\n-  --> $DIR/cast_size.rs:17:5\n+  --> $DIR/cast_size.rs:19:5\n    |\n-17 |     1u64 as isize;\n+19 |     1u64 as isize;\n    |     ^^^^^^^^^^^^^\n \n error: casting u64 to usize may truncate the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:18:5\n+  --> $DIR/cast_size.rs:20:5\n    |\n-18 |     1u64 as usize;\n+20 |     1u64 as usize;\n    |     ^^^^^^^^^^^^^\n \n error: casting u32 to isize may wrap around the value on targets with 32-bit wide pointers\n-  --> $DIR/cast_size.rs:19:5\n+  --> $DIR/cast_size.rs:21:5\n    |\n-19 |     1u32 as isize;\n+21 |     1u32 as isize;\n    |     ^^^^^^^^^^^^^\n \n error: casting i32 to usize may lose the sign of the value\n-  --> $DIR/cast_size.rs:22:5\n+  --> $DIR/cast_size.rs:24:5\n    |\n-22 |     1i32 as usize;\n+24 |     1i32 as usize;\n    |     ^^^^^^^^^^^^^\n \n error: aborting due to 19 previous errors"}, {"sha": "f9937ede3518e3edc94358d729d15f03d734ebce", "filename": "tests/ui/char_lit_as_u8.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchar_lit_as_u8.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchar_lit_as_u8.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchar_lit_as_u8.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(char_lit_as_u8)]\n+#![warn(clippy::char_lit_as_u8)]\n #![allow(unused_variables)]\n fn main() {\n     let c = 'a' as u8;"}, {"sha": "f6ea10d57313564ccd649bab258ad640664b94fe", "filename": "tests/ui/char_lit_as_u8.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchar_lit_as_u8.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchar_lit_as_u8.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchar_lit_as_u8.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: casting character literal to u8. `char`s are 4 bytes wide in rust, so cas\n 7 |     let c = 'a' as u8;\n   |             ^^^^^^^^^\n   |\n-  = note: `-D char-lit-as-u8` implied by `-D warnings`\n+  = note: `-D clippy::char-lit-as-u8` implied by `-D warnings`\n   = help: Consider using a byte literal instead:\n           b'a'\n "}, {"sha": "b3979245d3631269a913ff8069b07d8f017e7416", "filename": "tests/ui/checked_unwrap.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchecked_unwrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchecked_unwrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchecked_unwrap.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,7 @@\n-#![deny(panicking_unwrap, unnecessary_unwrap)]\n-#![allow(if_same_then_else)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::panicking_unwrap, clippy::unnecessary_unwrap)]\n+#![allow(clippy::if_same_then_else)]\n \n fn main() {\n     let x = Some(());"}, {"sha": "4508ce442faea933233e19b0b5c437a835e0cbf9", "filename": "tests/ui/checked_unwrap.stderr", "status": "modified", "additions": 120, "deletions": 120, "changes": 240, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchecked_unwrap.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fchecked_unwrap.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchecked_unwrap.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,313 +1,313 @@\n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n- --> $DIR/checked_unwrap.rs:7:9\n+ --> $DIR/checked_unwrap.rs:9:9\n   |\n-6 |     if x.is_some() {\n+8 |     if x.is_some() {\n   |        ----------- the check is happening here\n-7 |         x.unwrap(); // unnecessary\n+9 |         x.unwrap(); // unnecessary\n   |         ^^^^^^^^^^\n   |\n note: lint level defined here\n- --> $DIR/checked_unwrap.rs:1:27\n+ --> $DIR/checked_unwrap.rs:3:35\n   |\n-1 | #![deny(panicking_unwrap, unnecessary_unwrap)]\n-  |                           ^^^^^^^^^^^^^^^^^^\n+3 | #![deny(clippy::panicking_unwrap, clippy::unnecessary_unwrap)]\n+  |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n- --> $DIR/checked_unwrap.rs:9:9\n-  |\n-6 |     if x.is_some() {\n-  |        ----------- because of this check\n+  --> $DIR/checked_unwrap.rs:11:9\n+   |\n+8  |     if x.is_some() {\n+   |        ----------- because of this check\n ...\n-9 |         x.unwrap(); // will panic\n-  |         ^^^^^^^^^^\n-  |\n+11 |         x.unwrap(); // will panic\n+   |         ^^^^^^^^^^\n+   |\n note: lint level defined here\n- --> $DIR/checked_unwrap.rs:1:9\n-  |\n-1 | #![deny(panicking_unwrap, unnecessary_unwrap)]\n-  |         ^^^^^^^^^^^^^^^^\n+  --> $DIR/checked_unwrap.rs:3:9\n+   |\n+3  | #![deny(clippy::panicking_unwrap, clippy::unnecessary_unwrap)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:12:9\n+  --> $DIR/checked_unwrap.rs:14:9\n    |\n-11 |     if x.is_none() {\n+13 |     if x.is_none() {\n    |        ----------- because of this check\n-12 |         x.unwrap(); // will panic\n+14 |         x.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:14:9\n+  --> $DIR/checked_unwrap.rs:16:9\n    |\n-11 |     if x.is_none() {\n+13 |     if x.is_none() {\n    |        ----------- the check is happening here\n ...\n-14 |         x.unwrap(); // unnecessary\n+16 |         x.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:18:9\n+  --> $DIR/checked_unwrap.rs:20:9\n    |\n-17 |     if x.is_ok() {\n+19 |     if x.is_ok() {\n    |        --------- the check is happening here\n-18 |         x.unwrap(); // unnecessary\n+20 |         x.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:19:9\n+  --> $DIR/checked_unwrap.rs:21:9\n    |\n-17 |     if x.is_ok() {\n+19 |     if x.is_ok() {\n    |        --------- because of this check\n-18 |         x.unwrap(); // unnecessary\n-19 |         x.unwrap_err(); // will panic\n+20 |         x.unwrap(); // unnecessary\n+21 |         x.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:21:9\n+  --> $DIR/checked_unwrap.rs:23:9\n    |\n-17 |     if x.is_ok() {\n+19 |     if x.is_ok() {\n    |        --------- because of this check\n ...\n-21 |         x.unwrap(); // will panic\n+23 |         x.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:22:9\n+  --> $DIR/checked_unwrap.rs:24:9\n    |\n-17 |     if x.is_ok() {\n+19 |     if x.is_ok() {\n    |        --------- the check is happening here\n ...\n-22 |         x.unwrap_err(); // unnecessary\n+24 |         x.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:25:9\n+  --> $DIR/checked_unwrap.rs:27:9\n    |\n-24 |     if x.is_err() {\n+26 |     if x.is_err() {\n    |        ---------- because of this check\n-25 |         x.unwrap(); // will panic\n+27 |         x.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:26:9\n+  --> $DIR/checked_unwrap.rs:28:9\n    |\n-24 |     if x.is_err() {\n+26 |     if x.is_err() {\n    |        ---------- the check is happening here\n-25 |         x.unwrap(); // will panic\n-26 |         x.unwrap_err(); // unnecessary\n+27 |         x.unwrap(); // will panic\n+28 |         x.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:28:9\n+  --> $DIR/checked_unwrap.rs:30:9\n    |\n-24 |     if x.is_err() {\n+26 |     if x.is_err() {\n    |        ---------- the check is happening here\n ...\n-28 |         x.unwrap(); // unnecessary\n+30 |         x.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:29:9\n+  --> $DIR/checked_unwrap.rs:31:9\n    |\n-24 |     if x.is_err() {\n+26 |     if x.is_err() {\n    |        ---------- because of this check\n ...\n-29 |         x.unwrap_err(); // will panic\n+31 |         x.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:46:9\n+  --> $DIR/checked_unwrap.rs:48:9\n    |\n-45 |     if x.is_ok() && y.is_err() {\n+47 |     if x.is_ok() && y.is_err() {\n    |        --------- the check is happening here\n-46 |         x.unwrap(); // unnecessary\n+48 |         x.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:47:9\n+  --> $DIR/checked_unwrap.rs:49:9\n    |\n-45 |     if x.is_ok() && y.is_err() {\n+47 |     if x.is_ok() && y.is_err() {\n    |        --------- because of this check\n-46 |         x.unwrap(); // unnecessary\n-47 |         x.unwrap_err(); // will panic\n+48 |         x.unwrap(); // unnecessary\n+49 |         x.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:48:9\n+  --> $DIR/checked_unwrap.rs:50:9\n    |\n-45 |     if x.is_ok() && y.is_err() {\n+47 |     if x.is_ok() && y.is_err() {\n    |                     ---------- because of this check\n ...\n-48 |         y.unwrap(); // will panic\n+50 |         y.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:49:9\n+  --> $DIR/checked_unwrap.rs:51:9\n    |\n-45 |     if x.is_ok() && y.is_err() {\n+47 |     if x.is_ok() && y.is_err() {\n    |                     ---------- the check is happening here\n ...\n-49 |         y.unwrap_err(); // unnecessary\n+51 |         y.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:63:9\n+  --> $DIR/checked_unwrap.rs:65:9\n    |\n-58 |     if x.is_ok() || y.is_ok() {\n+60 |     if x.is_ok() || y.is_ok() {\n    |        --------- because of this check\n ...\n-63 |         x.unwrap(); // will panic\n+65 |         x.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:64:9\n+  --> $DIR/checked_unwrap.rs:66:9\n    |\n-58 |     if x.is_ok() || y.is_ok() {\n+60 |     if x.is_ok() || y.is_ok() {\n    |        --------- the check is happening here\n ...\n-64 |         x.unwrap_err(); // unnecessary\n+66 |         x.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:65:9\n+  --> $DIR/checked_unwrap.rs:67:9\n    |\n-58 |     if x.is_ok() || y.is_ok() {\n+60 |     if x.is_ok() || y.is_ok() {\n    |                     --------- because of this check\n ...\n-65 |         y.unwrap(); // will panic\n+67 |         y.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:66:9\n+  --> $DIR/checked_unwrap.rs:68:9\n    |\n-58 |     if x.is_ok() || y.is_ok() {\n+60 |     if x.is_ok() || y.is_ok() {\n    |                     --------- the check is happening here\n ...\n-66 |         y.unwrap_err(); // unnecessary\n+68 |         y.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:70:9\n+  --> $DIR/checked_unwrap.rs:72:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |        --------- the check is happening here\n-70 |         x.unwrap(); // unnecessary\n+72 |         x.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:71:9\n+  --> $DIR/checked_unwrap.rs:73:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |        --------- because of this check\n-70 |         x.unwrap(); // unnecessary\n-71 |         x.unwrap_err(); // will panic\n+72 |         x.unwrap(); // unnecessary\n+73 |         x.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:72:9\n+  --> $DIR/checked_unwrap.rs:74:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |                       --------- because of this check\n ...\n-72 |         y.unwrap(); // will panic\n+74 |         y.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:73:9\n+  --> $DIR/checked_unwrap.rs:75:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |                       --------- the check is happening here\n ...\n-73 |         y.unwrap_err(); // unnecessary\n+75 |         y.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:74:9\n+  --> $DIR/checked_unwrap.rs:76:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |                                    ---------- the check is happening here\n ...\n-74 |         z.unwrap(); // unnecessary\n+76 |         z.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:75:9\n+  --> $DIR/checked_unwrap.rs:77:9\n    |\n-69 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n+71 |     if x.is_ok() && !(y.is_ok() || z.is_err()) {\n    |                                    ---------- because of this check\n ...\n-75 |         z.unwrap_err(); // will panic\n+77 |         z.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:83:9\n+  --> $DIR/checked_unwrap.rs:85:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |        --------- because of this check\n ...\n-83 |         x.unwrap(); // will panic\n+85 |         x.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:84:9\n+  --> $DIR/checked_unwrap.rs:86:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |        --------- the check is happening here\n ...\n-84 |         x.unwrap_err(); // unnecessary\n+86 |         x.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:85:9\n+  --> $DIR/checked_unwrap.rs:87:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |                       --------- the check is happening here\n ...\n-85 |         y.unwrap(); // unnecessary\n+87 |         y.unwrap(); // unnecessary\n    |         ^^^^^^^^^^\n \n error: This call to `unwrap_err()` will always panic.\n-  --> $DIR/checked_unwrap.rs:86:9\n+  --> $DIR/checked_unwrap.rs:88:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |                       --------- because of this check\n ...\n-86 |         y.unwrap_err(); // will panic\n+88 |         y.unwrap_err(); // will panic\n    |         ^^^^^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:87:9\n+  --> $DIR/checked_unwrap.rs:89:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |                                    ---------- because of this check\n ...\n-87 |         z.unwrap(); // will panic\n+89 |         z.unwrap(); // will panic\n    |         ^^^^^^^^^^\n \n error: You checked before that `unwrap_err()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:88:9\n+  --> $DIR/checked_unwrap.rs:90:9\n    |\n-77 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n+79 |     if x.is_ok() || !(y.is_ok() && z.is_err()) {\n    |                                    ---------- the check is happening here\n ...\n-88 |         z.unwrap_err(); // unnecessary\n+90 |         z.unwrap_err(); // unnecessary\n    |         ^^^^^^^^^^^^^^\n \n error: You checked before that `unwrap()` cannot fail. Instead of checking and unwrapping, it's better to use `if let` or `match`.\n-  --> $DIR/checked_unwrap.rs:96:13\n+  --> $DIR/checked_unwrap.rs:98:13\n    |\n-95 |         if x.is_some() {\n+97 |         if x.is_some() {\n    |            ----------- the check is happening here\n-96 |             x.unwrap(); // unnecessary\n+98 |             x.unwrap(); // unnecessary\n    |             ^^^^^^^^^^\n \n error: This call to `unwrap()` will always panic.\n-  --> $DIR/checked_unwrap.rs:98:13\n-   |\n-95 |         if x.is_some() {\n-   |            ----------- because of this check\n+   --> $DIR/checked_unwrap.rs:100:13\n+    |\n+97  |         if x.is_some() {\n+    |            ----------- because of this check\n ...\n-98 |             x.unwrap(); // will panic\n-   |             ^^^^^^^^^^\n+100 |             x.unwrap(); // will panic\n+    |             ^^^^^^^^^^\n \n error: aborting due to 34 previous errors\n "}, {"sha": "77dffc67670ffd4baeaed58e2f3e778f3df49b96", "filename": "tests/ui/clone_on_copy_mut.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fclone_on_copy_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fclone_on_copy_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fclone_on_copy_mut.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,11 +1,13 @@\n+#![feature(tool_lints)]\n+\n pub fn dec_read_dec(i: &mut i32) -> i32 {\n     *i -= 1;\n     let ret = *i;\n     *i -= 1;\n     ret\n }\n \n-#[allow(trivially_copy_pass_by_ref)]\n+#[allow(clippy::trivially_copy_pass_by_ref)]\n pub fn minus_1(i: &i32) -> i32 {\n     dec_read_dec(&mut i.clone())\n }"}, {"sha": "fdebb7da18a30085a1fd5f4716772dbbec208288", "filename": "tests/ui/cmp_nan.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_nan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_nan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_nan.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(cmp_nan)]\n-#[allow(float_cmp, no_effect, unnecessary_operation)]\n+#[warn(clippy::cmp_nan)]\n+#[allow(clippy::float_cmp, clippy::no_effect, clippy::unnecessary_operation)]\n fn main() {\n     let x = 5f32;\n     x == std::f32::NAN;"}, {"sha": "7f636e6b5347b8dfac4d584c8b2ffc22c8dad186", "filename": "tests/ui/cmp_nan.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_nan.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_nan.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_nan.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: doomed comparison with NAN, use `std::{f32,f64}::is_nan()` instead\n 8 |     x == std::f32::NAN;\n   |     ^^^^^^^^^^^^^^^^^^\n   |\n-  = note: `-D cmp-nan` implied by `-D warnings`\n+  = note: `-D clippy::cmp-nan` implied by `-D warnings`\n \n error: doomed comparison with NAN, use `std::{f32,f64}::is_nan()` instead\n  --> $DIR/cmp_nan.rs:9:5"}, {"sha": "e10b3e104ec18c3889752f5d2d343e968cde0101", "filename": "tests/ui/cmp_null.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_null.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_null.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_null.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(cmp_null)]\n+#![warn(clippy::cmp_null)]\n #![allow(unused_mut)]\n \n use std::ptr;"}, {"sha": "55050d2a320ed1aa4ad3e851cd34342ad19c6f04", "filename": "tests/ui/cmp_null.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_null.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_null.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_null.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: Comparing with null is better expressed by the .is_null() method\n 11 |     if p == ptr::null() {\n    |        ^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D cmp-null` implied by `-D warnings`\n+   = note: `-D clippy::cmp-null` implied by `-D warnings`\n \n error: Comparing with null is better expressed by the .is_null() method\n   --> $DIR/cmp_null.rs:16:8"}, {"sha": "713975c4404101164a36577771dd2583b3b8feca", "filename": "tests/ui/cmp_owned.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_owned.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(cmp_owned)]\n-#[allow(unnecessary_operation)]\n+#[warn(clippy::cmp_owned)]\n+#[allow(clippy::unnecessary_operation)]\n fn main() {\n     fn with_to_string(x : &str) {\n         x != \"foo\".to_string();"}, {"sha": "2691c12eab1e1b86e9a7537d03213f2ef29f6432", "filename": "tests/ui/cmp_owned.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_owned.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcmp_owned.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcmp_owned.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this creates an owned instance just for comparison\n 8 |         x != \"foo\".to_string();\n   |              ^^^^^^^^^^^^^^^^^ help: try: `\"foo\"`\n   |\n-  = note: `-D cmp-owned` implied by `-D warnings`\n+  = note: `-D clippy::cmp-owned` implied by `-D warnings`\n \n error: this creates an owned instance just for comparison\n   --> $DIR/cmp_owned.rs:10:9"}, {"sha": "d40be6319337fed40dd300dbf1613880de23cd18", "filename": "tests/ui/collapsible_if.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcollapsible_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcollapsible_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(collapsible_if)]\n+#[warn(clippy::collapsible_if)]\n fn main() {\n     let x = \"hello\";\n     let y = \"world\";"}, {"sha": "a447fab7b6ecf71a92ea0edb9cd2f6d31da948ea", "filename": "tests/ui/collapsible_if.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcollapsible_if.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcollapsible_if.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -8,7 +8,7 @@ error: this if statement can be collapsed\n 12 | |     }\n    | |_____^\n    |\n-   = note: `-D collapsible-if` implied by `-D warnings`\n+   = note: `-D clippy::collapsible-if` implied by `-D warnings`\n help: try\n    |\n 8  |     if x == \"hello\" && y == \"world\" {"}, {"sha": "a6875793c8310c93078b10a9d033d5bda718f93c", "filename": "tests/ui/complex_types.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcomplex_types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcomplex_types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcomplex_types.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(clippy)]\n-#![allow(unused, needless_pass_by_value)]\n+#![warn(clippy::all)]\n+#![allow(unused, clippy::needless_pass_by_value)]\n #![feature(associated_type_defaults)]\n \n type Alias = Vec<Vec<Box<(u32, u32, u32, u32)>>>; // no warning here"}, {"sha": "1c9106c0c219e89fa2a50215629c429885d2e9f2", "filename": "tests/ui/complex_types.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcomplex_types.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcomplex_types.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcomplex_types.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: very complex type used. Consider factoring parts into `type` definitions\n 9 | const CST: (u32, (u32, (u32, (u32, u32)))) = (0, (0, (0, (0, 0))));\n   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n-  = note: `-D type-complexity` implied by `-D warnings`\n+  = note: `-D clippy::type-complexity` implied by `-D warnings`\n \n error: very complex type used. Consider factoring parts into `type` definitions\n   --> $DIR/complex_types.rs:10:12"}, {"sha": "db6c4d9444f79b413922f125e479731bc0fc569f", "filename": "tests/ui/const_static_lifetime.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fconst_static_lifetime.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fconst_static_lifetime.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst_static_lifetime.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: Constants have by default a `'static` lifetime\n 4 | const VAR_ONE: &'static str = \"Test constant #1\"; // ERROR Consider removing 'static.\n   |                -^^^^^^^---- help: consider removing `'static`: `&str`\n   |\n-  = note: `-D const-static-lifetime` implied by `-D warnings`\n+  = note: `-D clippy::const-static-lifetime` implied by `-D warnings`\n \n error: Constants have by default a `'static` lifetime\n  --> $DIR/const_static_lifetime.rs:8:21"}, {"sha": "064c7fc1c59c10b6a1853c54732760371893798a", "filename": "tests/ui/copies.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcopies.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,7 @@\n-#![allow(blacklisted_name, collapsible_if, cyclomatic_complexity, eq_op, needless_continue,\n-         needless_return, never_loop, no_effect, zero_divided_by_zero)]\n+#![feature(tool_lints)]\n+\n+#![allow(clippy::blacklisted_name, clippy::collapsible_if, clippy::cyclomatic_complexity, clippy::eq_op, clippy::needless_continue,\n+         clippy::needless_return, clippy::never_loop, clippy::no_effect, clippy::zero_divided_by_zero)]\n \n fn bar<T>(_: T) {}\n fn foo() -> bool { unimplemented!() }\n@@ -14,8 +16,8 @@ pub enum Abc {\n     C,\n }\n \n-#[warn(if_same_then_else)]\n-#[warn(match_same_arms)]\n+#[warn(clippy::if_same_then_else)]\n+#[warn(clippy::match_same_arms)]\n fn if_same_then_else() -> Result<&'static str, ()> {\n     if true {\n         Foo { bar: 42 };\n@@ -340,8 +342,8 @@ fn if_same_then_else() -> Result<&'static str, ()> {\n     }\n }\n \n-#[warn(ifs_same_cond)]\n-#[allow(if_same_then_else)] // all empty blocks\n+#[warn(clippy::ifs_same_cond)]\n+#[allow(clippy::if_same_then_else)] // all empty blocks\n fn ifs_same_cond() {\n     let a = 0;\n     let b = false;"}, {"sha": "febd34603c91d430e7d453510e0d0eddf01777a1", "filename": "tests/ui/copies.stderr", "status": "modified", "additions": 170, "deletions": 170, "changes": 340, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopies.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopies.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcopies.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,384 +1,384 @@\n error: this `if` has identical blocks\n-  --> $DIR/copies.rs:29:10\n+  --> $DIR/copies.rs:31:10\n    |\n-29 |       else { //~ ERROR same body as `if` block\n+31 |       else { //~ ERROR same body as `if` block\n    |  __________^\n-30 | |         Foo { bar: 42 };\n-31 | |         0..10;\n-32 | |         ..;\n+32 | |         Foo { bar: 42 };\n+33 | |         0..10;\n+34 | |         ..;\n ...  |\n-36 | |         foo();\n-37 | |     }\n+38 | |         foo();\n+39 | |     }\n    | |_____^\n    |\n-   = note: `-D if-same-then-else` implied by `-D warnings`\n+   = note: `-D clippy::if-same-then-else` implied by `-D warnings`\n note: same as this\n-  --> $DIR/copies.rs:20:13\n+  --> $DIR/copies.rs:22:13\n    |\n-20 |       if true {\n+22 |       if true {\n    |  _____________^\n-21 | |         Foo { bar: 42 };\n-22 | |         0..10;\n-23 | |         ..;\n+23 | |         Foo { bar: 42 };\n+24 | |         0..10;\n+25 | |         ..;\n ...  |\n-27 | |         foo();\n-28 | |     }\n+29 | |         foo();\n+30 | |     }\n    | |_____^\n \n error: this `match` has identical arm bodies\n-  --> $DIR/copies.rs:78:14\n+  --> $DIR/copies.rs:80:14\n    |\n-78 |           _ => { //~ ERROR match arms have same body\n+80 |           _ => { //~ ERROR match arms have same body\n    |  ______________^\n-79 | |             foo();\n-80 | |             let mut a = 42 + [23].len() as i32;\n-81 | |             if true {\n+81 | |             foo();\n+82 | |             let mut a = 42 + [23].len() as i32;\n+83 | |             if true {\n ...  |\n-85 | |             a\n-86 | |         }\n+87 | |             a\n+88 | |         }\n    | |_________^\n    |\n-   = note: `-D match-same-arms` implied by `-D warnings`\n+   = note: `-D clippy::match-same-arms` implied by `-D warnings`\n note: same as this\n-  --> $DIR/copies.rs:69:15\n+  --> $DIR/copies.rs:71:15\n    |\n-69 |           42 => {\n+71 |           42 => {\n    |  _______________^\n-70 | |             foo();\n-71 | |             let mut a = 42 + [23].len() as i32;\n-72 | |             if true {\n+72 | |             foo();\n+73 | |             let mut a = 42 + [23].len() as i32;\n+74 | |             if true {\n ...  |\n-76 | |             a\n-77 | |         }\n+78 | |             a\n+79 | |         }\n    | |_________^\n note: `42` has the same arm body as the `_` wildcard, consider removing it`\n-  --> $DIR/copies.rs:69:15\n+  --> $DIR/copies.rs:71:15\n    |\n-69 |           42 => {\n+71 |           42 => {\n    |  _______________^\n-70 | |             foo();\n-71 | |             let mut a = 42 + [23].len() as i32;\n-72 | |             if true {\n+72 | |             foo();\n+73 | |             let mut a = 42 + [23].len() as i32;\n+74 | |             if true {\n ...  |\n-76 | |             a\n-77 | |         }\n+78 | |             a\n+79 | |         }\n    | |_________^\n \n error: this `match` has identical arm bodies\n-  --> $DIR/copies.rs:92:14\n+  --> $DIR/copies.rs:94:14\n    |\n-92 |         _ => 0, //~ ERROR match arms have same body\n+94 |         _ => 0, //~ ERROR match arms have same body\n    |              ^\n    |\n note: same as this\n-  --> $DIR/copies.rs:90:19\n+  --> $DIR/copies.rs:92:19\n    |\n-90 |         Abc::A => 0,\n+92 |         Abc::A => 0,\n    |                   ^\n note: `Abc::A` has the same arm body as the `_` wildcard, consider removing it`\n-  --> $DIR/copies.rs:90:19\n+  --> $DIR/copies.rs:92:19\n    |\n-90 |         Abc::A => 0,\n+92 |         Abc::A => 0,\n    |                   ^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:102:10\n+   --> $DIR/copies.rs:104:10\n     |\n-102 |       else { //~ ERROR same body as `if` block\n+104 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-103 | |         42\n-104 | |     };\n+105 | |         42\n+106 | |     };\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:99:21\n+   --> $DIR/copies.rs:101:21\n     |\n-99  |       let _ = if true {\n+101 |       let _ = if true {\n     |  _____________________^\n-100 | |         42\n-101 | |     }\n+102 | |         42\n+103 | |     }\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:116:10\n+   --> $DIR/copies.rs:118:10\n     |\n-116 |       else { //~ ERROR same body as `if` block\n+118 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-117 | |         for _ in &[42] {\n-118 | |             let foo: &Option<_> = &Some::<u8>(42);\n-119 | |             if true {\n+119 | |         for _ in &[42] {\n+120 | |             let foo: &Option<_> = &Some::<u8>(42);\n+121 | |             if true {\n ...   |\n-124 | |         }\n-125 | |     }\n+126 | |         }\n+127 | |     }\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:106:13\n+   --> $DIR/copies.rs:108:13\n     |\n-106 |       if true {\n+108 |       if true {\n     |  _____________^\n-107 | |         for _ in &[42] {\n-108 | |             let foo: &Option<_> = &Some::<u8>(42);\n-109 | |             if true {\n+109 | |         for _ in &[42] {\n+110 | |             let foo: &Option<_> = &Some::<u8>(42);\n+111 | |             if true {\n ...   |\n-114 | |         }\n-115 | |     }\n+116 | |         }\n+117 | |     }\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:138:10\n+   --> $DIR/copies.rs:140:10\n     |\n-138 |       else { //~ ERROR same body as `if` block\n+140 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-139 | |         let bar = if true {\n-140 | |             42\n-141 | |         }\n+141 | |         let bar = if true {\n+142 | |             42\n+143 | |         }\n ...   |\n-147 | |         bar + 1;\n-148 | |     }\n+149 | |         bar + 1;\n+150 | |     }\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:127:13\n+   --> $DIR/copies.rs:129:13\n     |\n-127 |       if true {\n+129 |       if true {\n     |  _____________^\n-128 | |         let bar = if true {\n-129 | |             42\n-130 | |         }\n+130 | |         let bar = if true {\n+131 | |             42\n+132 | |         }\n ...   |\n-136 | |         bar + 1;\n-137 | |     }\n+138 | |         bar + 1;\n+139 | |     }\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:173:10\n+   --> $DIR/copies.rs:175:10\n     |\n-173 |       else { //~ ERROR same body as `if` block\n+175 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-174 | |         if let Some(a) = Some(42) {}\n-175 | |     }\n+176 | |         if let Some(a) = Some(42) {}\n+177 | |     }\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:170:13\n+   --> $DIR/copies.rs:172:13\n     |\n-170 |       if true {\n+172 |       if true {\n     |  _____________^\n-171 | |         if let Some(a) = Some(42) {}\n-172 | |     }\n+173 | |         if let Some(a) = Some(42) {}\n+174 | |     }\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:180:10\n+   --> $DIR/copies.rs:182:10\n     |\n-180 |       else { //~ ERROR same body as `if` block\n+182 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-181 | |         if let (1, .., 3) = (1, 2, 3) {}\n-182 | |     }\n+183 | |         if let (1, .., 3) = (1, 2, 3) {}\n+184 | |     }\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:177:13\n+   --> $DIR/copies.rs:179:13\n     |\n-177 |       if true {\n+179 |       if true {\n     |  _____________^\n-178 | |         if let (1, .., 3) = (1, 2, 3) {}\n-179 | |     }\n+180 | |         if let (1, .., 3) = (1, 2, 3) {}\n+181 | |     }\n     | |_____^\n \n error: this `match` has identical arm bodies\n-   --> $DIR/copies.rs:235:15\n+   --> $DIR/copies.rs:237:15\n     |\n-235 |         51 => foo(), //~ ERROR match arms have same body\n+237 |         51 => foo(), //~ ERROR match arms have same body\n     |               ^^^^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:234:15\n+   --> $DIR/copies.rs:236:15\n     |\n-234 |         42 => foo(),\n+236 |         42 => foo(),\n     |               ^^^^^\n note: consider refactoring into `42 | 51`\n-   --> $DIR/copies.rs:234:15\n+   --> $DIR/copies.rs:236:15\n     |\n-234 |         42 => foo(),\n+236 |         42 => foo(),\n     |               ^^^^^\n \n error: this `match` has identical arm bodies\n-   --> $DIR/copies.rs:241:17\n+   --> $DIR/copies.rs:243:17\n     |\n-241 |         None => 24, //~ ERROR match arms have same body\n+243 |         None => 24, //~ ERROR match arms have same body\n     |                 ^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:240:20\n+   --> $DIR/copies.rs:242:20\n     |\n-240 |         Some(_) => 24,\n+242 |         Some(_) => 24,\n     |                    ^^\n note: consider refactoring into `Some(_) | None`\n-   --> $DIR/copies.rs:240:20\n+   --> $DIR/copies.rs:242:20\n     |\n-240 |         Some(_) => 24,\n+242 |         Some(_) => 24,\n     |                    ^^\n \n error: this `match` has identical arm bodies\n-   --> $DIR/copies.rs:263:28\n+   --> $DIR/copies.rs:265:28\n     |\n-263 |         (None, Some(a)) => bar(a), //~ ERROR match arms have same body\n+265 |         (None, Some(a)) => bar(a), //~ ERROR match arms have same body\n     |                            ^^^^^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:262:28\n+   --> $DIR/copies.rs:264:28\n     |\n-262 |         (Some(a), None) => bar(a),\n+264 |         (Some(a), None) => bar(a),\n     |                            ^^^^^^\n note: consider refactoring into `(Some(a), None) | (None, Some(a))`\n-   --> $DIR/copies.rs:262:28\n+   --> $DIR/copies.rs:264:28\n     |\n-262 |         (Some(a), None) => bar(a),\n+264 |         (Some(a), None) => bar(a),\n     |                            ^^^^^^\n \n error: this `match` has identical arm bodies\n-   --> $DIR/copies.rs:269:26\n+   --> $DIR/copies.rs:271:26\n     |\n-269 |         (.., Some(a)) => bar(a), //~ ERROR match arms have same body\n+271 |         (.., Some(a)) => bar(a), //~ ERROR match arms have same body\n     |                          ^^^^^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:268:26\n+   --> $DIR/copies.rs:270:26\n     |\n-268 |         (Some(a), ..) => bar(a),\n+270 |         (Some(a), ..) => bar(a),\n     |                          ^^^^^^\n note: consider refactoring into `(Some(a), ..) | (.., Some(a))`\n-   --> $DIR/copies.rs:268:26\n+   --> $DIR/copies.rs:270:26\n     |\n-268 |         (Some(a), ..) => bar(a),\n+270 |         (Some(a), ..) => bar(a),\n     |                          ^^^^^^\n \n error: this `match` has identical arm bodies\n-   --> $DIR/copies.rs:275:20\n+   --> $DIR/copies.rs:277:20\n     |\n-275 |         (.., 3) => 42, //~ ERROR match arms have same body\n+277 |         (.., 3) => 42, //~ ERROR match arms have same body\n     |                    ^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:274:23\n+   --> $DIR/copies.rs:276:23\n     |\n-274 |         (1, .., 3) => 42,\n+276 |         (1, .., 3) => 42,\n     |                       ^^\n note: consider refactoring into `(1, .., 3) | (.., 3)`\n-   --> $DIR/copies.rs:274:23\n+   --> $DIR/copies.rs:276:23\n     |\n-274 |         (1, .., 3) => 42,\n+276 |         (1, .., 3) => 42,\n     |                       ^^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:281:12\n+   --> $DIR/copies.rs:283:12\n     |\n-281 |       } else { //~ ERROR same body as `if` block\n+283 |       } else { //~ ERROR same body as `if` block\n     |  ____________^\n-282 | |         0.0\n-283 | |     };\n+284 | |         0.0\n+285 | |     };\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:279:21\n+   --> $DIR/copies.rs:281:21\n     |\n-279 |       let _ = if true {\n+281 |       let _ = if true {\n     |  _____________________^\n-280 | |         0.0\n-281 | |     } else { //~ ERROR same body as `if` block\n+282 | |         0.0\n+283 | |     } else { //~ ERROR same body as `if` block\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:287:12\n+   --> $DIR/copies.rs:289:12\n     |\n-287 |       } else { //~ ERROR same body as `if` block\n+289 |       } else { //~ ERROR same body as `if` block\n     |  ____________^\n-288 | |         -0.0\n-289 | |     };\n+290 | |         -0.0\n+291 | |     };\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:285:21\n+   --> $DIR/copies.rs:287:21\n     |\n-285 |       let _ = if true {\n+287 |       let _ = if true {\n     |  _____________________^\n-286 | |         -0.0\n-287 | |     } else { //~ ERROR same body as `if` block\n+288 | |         -0.0\n+289 | |     } else { //~ ERROR same body as `if` block\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:307:12\n+   --> $DIR/copies.rs:309:12\n     |\n-307 |       } else { //~ ERROR same body as `if` block\n+309 |       } else { //~ ERROR same body as `if` block\n     |  ____________^\n-308 | |         std::f32::NAN\n-309 | |     };\n+310 | |         std::f32::NAN\n+311 | |     };\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:305:21\n+   --> $DIR/copies.rs:307:21\n     |\n-305 |       let _ = if true {\n+307 |       let _ = if true {\n     |  _____________________^\n-306 | |         std::f32::NAN\n-307 | |     } else { //~ ERROR same body as `if` block\n+308 | |         std::f32::NAN\n+309 | |     } else { //~ ERROR same body as `if` block\n     | |_____^\n \n error: this `if` has identical blocks\n-   --> $DIR/copies.rs:325:10\n+   --> $DIR/copies.rs:327:10\n     |\n-325 |       else { //~ ERROR same body as `if` block\n+327 |       else { //~ ERROR same body as `if` block\n     |  __________^\n-326 | |         try!(Ok(\"foo\"));\n-327 | |     }\n+328 | |         try!(Ok(\"foo\"));\n+329 | |     }\n     | |_____^\n     |\n note: same as this\n-   --> $DIR/copies.rs:322:13\n+   --> $DIR/copies.rs:324:13\n     |\n-322 |       if true {\n+324 |       if true {\n     |  _____________^\n-323 | |         try!(Ok(\"foo\"));\n-324 | |     }\n+325 | |         try!(Ok(\"foo\"));\n+326 | |     }\n     | |_____^\n \n error: this `if` has the same condition as a previous if\n-   --> $DIR/copies.rs:351:13\n+   --> $DIR/copies.rs:353:13\n     |\n-351 |     else if b { //~ ERROR ifs same condition\n+353 |     else if b { //~ ERROR ifs same condition\n     |             ^\n     |\n-    = note: `-D ifs-same-cond` implied by `-D warnings`\n+    = note: `-D clippy::ifs-same-cond` implied by `-D warnings`\n note: same as this\n-   --> $DIR/copies.rs:349:8\n+   --> $DIR/copies.rs:351:8\n     |\n-349 |     if b {\n+351 |     if b {\n     |        ^\n \n error: this `if` has the same condition as a previous if\n-   --> $DIR/copies.rs:356:13\n+   --> $DIR/copies.rs:358:13\n     |\n-356 |     else if a == 1 { //~ ERROR ifs same condition\n+358 |     else if a == 1 { //~ ERROR ifs same condition\n     |             ^^^^^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:354:8\n+   --> $DIR/copies.rs:356:8\n     |\n-354 |     if a == 1 {\n+356 |     if a == 1 {\n     |        ^^^^^^\n \n error: this `if` has the same condition as a previous if\n-   --> $DIR/copies.rs:363:13\n+   --> $DIR/copies.rs:365:13\n     |\n-363 |     else if 2*a == 1 { //~ ERROR ifs same condition\n+365 |     else if 2*a == 1 { //~ ERROR ifs same condition\n     |             ^^^^^^^^\n     |\n note: same as this\n-   --> $DIR/copies.rs:359:8\n+   --> $DIR/copies.rs:361:8\n     |\n-359 |     if 2*a == 1 {\n+361 |     if 2*a == 1 {\n     |        ^^^^^^^^\n \n error: aborting due to 20 previous errors"}, {"sha": "5ccb9910c1e13ca81011b0732f4cf08d174843d3", "filename": "tests/ui/copy_iterator.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopy_iterator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopy_iterator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcopy_iterator.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![warn(copy_iterator)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::copy_iterator)]\n \n #[derive(Copy, Clone)]\n struct Countdown(u8);"}, {"sha": "9a06a52d4bb52a2a0afe8c7a37be8b627d835c40", "filename": "tests/ui/copy_iterator.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopy_iterator.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcopy_iterator.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcopy_iterator.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,16 +1,16 @@\n error: you are implementing `Iterator` on a `Copy` type\n-  --> $DIR/copy_iterator.rs:6:1\n+  --> $DIR/copy_iterator.rs:8:1\n    |\n-6  | / impl Iterator for Countdown {\n-7  | |     type Item = u8;\n-8  | |\n-9  | |     fn next(&mut self) -> Option<u8> {\n+8  | / impl Iterator for Countdown {\n+9  | |     type Item = u8;\n+10 | |\n+11 | |     fn next(&mut self) -> Option<u8> {\n ...  |\n-14 | |     }\n-15 | | }\n+16 | |     }\n+17 | | }\n    | |_^\n    |\n-   = note: `-D copy-iterator` implied by `-D warnings`\n+   = note: `-D clippy::copy-iterator` implied by `-D warnings`\n    = note: consider implementing `IntoIterator` instead\n \n error: aborting due to previous error"}, {"sha": "e68874d540977bfdbdc92b88929c8128b062c19a", "filename": "tests/ui/cstring.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcstring.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,8 @@\n+#![feature(tool_lints)]\n+\n fn main() {}\n \n-#[allow(result_unwrap_used)]\n+#[allow(clippy::result_unwrap_used)]\n fn temporary_cstring() {\n     use std::ffi::CString;\n "}, {"sha": "2b2b51de6ae3486fc40088340cf160d1f3b115bb", "filename": "tests/ui/cstring.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcstring.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcstring.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcstring.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,15 +1,15 @@\n error: you are getting the inner pointer of a temporary `CString`\n- --> $DIR/cstring.rs:7:5\n+ --> $DIR/cstring.rs:9:5\n   |\n-7 |     CString::new(\"foo\").unwrap().as_ptr();\n+9 |     CString::new(\"foo\").unwrap().as_ptr();\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n-  = note: #[deny(temporary_cstring_as_ptr)] on by default\n+  = note: #[deny(clippy::temporary_cstring_as_ptr)] on by default\n   = note: that pointer will be invalid outside this expression\n help: assign the `CString` to a variable to extend its lifetime\n- --> $DIR/cstring.rs:7:5\n+ --> $DIR/cstring.rs:9:5\n   |\n-7 |     CString::new(\"foo\").unwrap().as_ptr();\n+9 |     CString::new(\"foo\").unwrap().as_ptr();\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to previous error"}, {"sha": "84e2a1b658378f4c8381f7cb40199defa10aae81", "filename": "tests/ui/cyclomatic_complexity.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcyclomatic_complexity.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n-\n-#![allow(clippy)]\n-#![warn(cyclomatic_complexity)]\n+#![allow(clippy::all)]\n+#![warn(clippy::cyclomatic_complexity)]\n #![allow(unused)]\n \n fn main() {\n@@ -172,7 +172,7 @@ fn bar() {\n \n #[test]\n #[clippy::cyclomatic_complexity = \"0\"]\n-/// Tests are usually complex but simple at the same time. `cyclomatic_complexity` used to give\n+/// Tests are usually complex but simple at the same time. `clippy::cyclomatic_complexity` used to give\n /// lots of false-positives in tests.\n fn dont_warn_on_tests() {\n     match 99 {"}, {"sha": "ff93f21e3ae5f6cece3b730bf5f63f4acd8fad56", "filename": "tests/ui/cyclomatic_complexity.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcyclomatic_complexity.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -10,7 +10,7 @@ error: the function has a cyclomatic complexity of 28\n 89 | | }\n    | |_^\n    |\n-   = note: `-D cyclomatic-complexity` implied by `-D warnings`\n+   = note: `-D clippy::cyclomatic-complexity` implied by `-D warnings`\n    = help: you could split it up into multiple smaller functions\n \n error: the function has a cyclomatic complexity of 7"}, {"sha": "fd8be25e6707cafe51bc48a86be9356e593c33a9", "filename": "tests/ui/cyclomatic_complexity_attr_used.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity_attr_used.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity_attr_used.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcyclomatic_complexity_attr_used.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(cyclomatic_complexity)]\n+#![warn(clippy::cyclomatic_complexity)]\n #![warn(unused)]\n \n fn main() {"}, {"sha": "f8342f0d9e5022c7624c9b2474011ad7f6478141", "filename": "tests/ui/cyclomatic_complexity_attr_used.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity_attr_used.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fcyclomatic_complexity_attr_used.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcyclomatic_complexity_attr_used.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -10,7 +10,7 @@ error: the function has a cyclomatic complexity of 3\n 17 | | }\n    | |_^\n    |\n-   = note: `-D cyclomatic-complexity` implied by `-D warnings`\n+   = note: `-D clippy::cyclomatic-complexity` implied by `-D warnings`\n    = help: you could split it up into multiple smaller functions\n \n error: aborting due to previous error"}, {"sha": "472ea618571735bd63aaefe03c32e7fbb3a77dcf", "filename": "tests/ui/decimal_literal_representation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdecimal_literal_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdecimal_literal_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdecimal_literal_representation.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(decimal_literal_representation)]\n+#[warn(clippy::decimal_literal_representation)]\n #[allow(unused_variables)]\n fn main() {\n     let good = (        // Hex:"}, {"sha": "343936bb7a21947cd9dbd78ddf06d28909a7b55f", "filename": "tests/ui/decimal_literal_representation.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdecimal_literal_representation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdecimal_literal_representation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdecimal_literal_representation.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: integer literal has a better hexadecimal representation\n 18 |         32_773,        // 0x8005\n    |         ^^^^^^ help: consider: `0x8005`\n    |\n-   = note: `-D decimal-literal-representation` implied by `-D warnings`\n+   = note: `-D clippy::decimal-literal-representation` implied by `-D warnings`\n \n error: integer literal has a better hexadecimal representation\n   --> $DIR/decimal_literal_representation.rs:19:9"}, {"sha": "248b4ec0066ee2090d7032a8d0884a09baa9ddc7", "filename": "tests/ui/default_trait_access.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdefault_trait_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdefault_trait_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdefault_trait_access.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![warn(default_trait_access)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::default_trait_access)]\n \n use std::default::Default as D2;\n use std::string;"}, {"sha": "e3c263e773291328c94085284913c9880d64a05a", "filename": "tests/ui/default_trait_access.stderr", "status": "modified", "additions": 20, "deletions": 20, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdefault_trait_access.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdefault_trait_access.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdefault_trait_access.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,51 +1,51 @@\n error: Calling std::string::String::default() is more clear than this expression\n- --> $DIR/default_trait_access.rs:8:22\n-  |\n-8 |     let s1: String = Default::default();\n-  |                      ^^^^^^^^^^^^^^^^^^ help: try: `std::string::String::default()`\n-  |\n-  = note: `-D default-trait-access` implied by `-D warnings`\n+  --> $DIR/default_trait_access.rs:10:22\n+   |\n+10 |     let s1: String = Default::default();\n+   |                      ^^^^^^^^^^^^^^^^^^ help: try: `std::string::String::default()`\n+   |\n+   = note: `-D clippy::default-trait-access` implied by `-D warnings`\n \n error: Calling std::string::String::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:12:22\n+  --> $DIR/default_trait_access.rs:14:22\n    |\n-12 |     let s3: String = D2::default();\n+14 |     let s3: String = D2::default();\n    |                      ^^^^^^^^^^^^^ help: try: `std::string::String::default()`\n \n error: Calling std::string::String::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:14:22\n+  --> $DIR/default_trait_access.rs:16:22\n    |\n-14 |     let s4: String = std::default::Default::default();\n+16 |     let s4: String = std::default::Default::default();\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `std::string::String::default()`\n \n error: Calling std::string::String::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:18:22\n+  --> $DIR/default_trait_access.rs:20:22\n    |\n-18 |     let s6: String = default::Default::default();\n+20 |     let s6: String = default::Default::default();\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `std::string::String::default()`\n \n error: Calling GenericDerivedDefault<std::string::String>::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:28:46\n+  --> $DIR/default_trait_access.rs:30:46\n    |\n-28 |     let s11: GenericDerivedDefault<String> = Default::default();\n+30 |     let s11: GenericDerivedDefault<String> = Default::default();\n    |                                              ^^^^^^^^^^^^^^^^^^ help: try: `GenericDerivedDefault<std::string::String>::default()`\n \n error: Calling TupleDerivedDefault::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:34:36\n+  --> $DIR/default_trait_access.rs:36:36\n    |\n-34 |     let s14: TupleDerivedDefault = Default::default();\n+36 |     let s14: TupleDerivedDefault = Default::default();\n    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `TupleDerivedDefault::default()`\n \n error: Calling ArrayDerivedDefault::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:36:36\n+  --> $DIR/default_trait_access.rs:38:36\n    |\n-36 |     let s15: ArrayDerivedDefault = Default::default();\n+38 |     let s15: ArrayDerivedDefault = Default::default();\n    |                                    ^^^^^^^^^^^^^^^^^^ help: try: `ArrayDerivedDefault::default()`\n \n error: Calling TupleStructDerivedDefault::default() is more clear than this expression\n-  --> $DIR/default_trait_access.rs:40:42\n+  --> $DIR/default_trait_access.rs:42:42\n    |\n-40 |     let s17: TupleStructDerivedDefault = Default::default();\n+42 |     let s17: TupleStructDerivedDefault = Default::default();\n    |                                          ^^^^^^^^^^^^^^^^^^ help: try: `TupleStructDerivedDefault::default()`\n \n error: aborting due to 8 previous errors"}, {"sha": "ae54c0290bc207c26327045214d13e14c31526d6", "filename": "tests/ui/derive.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fderive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fderive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fderive.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,9 @@\n-\n+#![feature(tool_lints)]\n \n #![feature(untagged_unions)]\n \n #![allow(dead_code)]\n-#![warn(expl_impl_clone_on_copy)]\n+#![warn(clippy::expl_impl_clone_on_copy)]\n \n use std::hash::{Hash, Hasher};\n "}, {"sha": "fa706f22b905e01d2764c4b944ec5a13c652aa08", "filename": "tests/ui/derive.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fderive.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fderive.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fderive.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: you are deriving `Hash` but have implemented `PartialEq` explicitly\n 17 | #[derive(Hash)]\n    |          ^^^^\n    |\n-   = note: #[deny(derive_hash_xor_eq)] on by default\n+   = note: #[deny(clippy::derive_hash_xor_eq)] on by default\n note: `PartialEq` implemented here\n   --> $DIR/derive.rs:20:1\n    |\n@@ -49,7 +49,7 @@ error: you are implementing `Clone` explicitly on a `Copy` type\n 43 | | }\n    | |_^\n    |\n-   = note: `-D expl-impl-clone-on-copy` implied by `-D warnings`\n+   = note: `-D clippy::expl-impl-clone-on-copy` implied by `-D warnings`\n note: consider deriving `Clone` or removing `Copy`\n   --> $DIR/derive.rs:41:1\n    |"}, {"sha": "a8284dca32677d5ed212f90618800a504f3cc0cd", "filename": "tests/ui/diverging_sub_expression.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdiverging_sub_expression.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdiverging_sub_expression.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdiverging_sub_expression.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,11 @@\n+#![feature(tool_lints)]\n+\n #![feature(never_type)]\n \n-#![warn(diverging_sub_expression)]\n-#![allow(match_same_arms, logic_bug)]\n+#![warn(clippy::diverging_sub_expression)]\n+#![allow(clippy::match_same_arms, clippy::logic_bug)]\n \n-#[allow(empty_loop)]\n+#[allow(clippy::empty_loop)]\n fn diverge() -> ! { loop {} }\n \n struct A;\n@@ -12,7 +14,7 @@ impl A {\n     fn foo(&self) -> ! { diverge() }\n }\n \n-#[allow(unused_variables, unnecessary_operation, short_circuit_statement)]\n+#[allow(unused_variables, clippy::unnecessary_operation, clippy::short_circuit_statement)]\n fn main() {\n     let b = true;\n     b || diverge();"}, {"sha": "8e86a7734dc38ca69bf201ca79879a3a7512b5ea", "filename": "tests/ui/diverging_sub_expression.stderr", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdiverging_sub_expression.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdiverging_sub_expression.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdiverging_sub_expression.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,39 +1,39 @@\n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:18:10\n+  --> $DIR/diverging_sub_expression.rs:20:10\n    |\n-18 |     b || diverge();\n+20 |     b || diverge();\n    |          ^^^^^^^^^\n    |\n-   = note: `-D diverging-sub-expression` implied by `-D warnings`\n+   = note: `-D clippy::diverging-sub-expression` implied by `-D warnings`\n \n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:19:10\n+  --> $DIR/diverging_sub_expression.rs:21:10\n    |\n-19 |     b || A.foo();\n+21 |     b || A.foo();\n    |          ^^^^^^^\n \n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:28:26\n+  --> $DIR/diverging_sub_expression.rs:30:26\n    |\n-28 |             6 => true || return,\n+30 |             6 => true || return,\n    |                          ^^^^^^\n \n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:29:26\n+  --> $DIR/diverging_sub_expression.rs:31:26\n    |\n-29 |             7 => true || continue,\n+31 |             7 => true || continue,\n    |                          ^^^^^^^^\n \n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:32:26\n+  --> $DIR/diverging_sub_expression.rs:34:26\n    |\n-32 |             3 => true || diverge(),\n+34 |             3 => true || diverge(),\n    |                          ^^^^^^^^^\n \n error: sub-expression diverges\n-  --> $DIR/diverging_sub_expression.rs:37:26\n+  --> $DIR/diverging_sub_expression.rs:39:26\n    |\n-37 |             _ => true || break,\n+39 |             _ => true || break,\n    |                          ^^^^^\n \n error: aborting due to 6 previous errors"}, {"sha": "395ff217497432614675f300930a458f8a3254d4", "filename": "tests/ui/dlist.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdlist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdlist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdlist.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,11 @@\n+#![feature(tool_lints)]\n+\n #![feature(alloc)]\n #![feature(associated_type_defaults)]\n \n \n-#![warn(linkedlist)]\n-#![allow(dead_code, needless_pass_by_value)]\n+#![warn(clippy::linkedlist)]\n+#![allow(dead_code, clippy::needless_pass_by_value)]\n \n extern crate alloc;\n use alloc::collections::linked_list::LinkedList;"}, {"sha": "5322075208ce827db48124ac4f38150319ed3b39", "filename": "tests/ui/dlist.stderr", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdlist.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdlist.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdlist.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,48 +1,48 @@\n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:12:16\n+  --> $DIR/dlist.rs:14:16\n    |\n-12 |     type Baz = LinkedList<u8>;\n+14 |     type Baz = LinkedList<u8>;\n    |                ^^^^^^^^^^^^^^\n    |\n-   = note: `-D linkedlist` implied by `-D warnings`\n+   = note: `-D clippy::linkedlist` implied by `-D warnings`\n    = help: a VecDeque might work\n \n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:13:12\n+  --> $DIR/dlist.rs:15:12\n    |\n-13 |     fn foo(LinkedList<u8>);\n+15 |     fn foo(LinkedList<u8>);\n    |            ^^^^^^^^^^^^^^\n    |\n    = help: a VecDeque might work\n \n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:14:24\n+  --> $DIR/dlist.rs:16:24\n    |\n-14 |     const BAR : Option<LinkedList<u8>>;\n+16 |     const BAR : Option<LinkedList<u8>>;\n    |                        ^^^^^^^^^^^^^^\n    |\n    = help: a VecDeque might work\n \n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:25:15\n+  --> $DIR/dlist.rs:27:15\n    |\n-25 |     fn foo(_: LinkedList<u8>) {}\n+27 |     fn foo(_: LinkedList<u8>) {}\n    |               ^^^^^^^^^^^^^^\n    |\n    = help: a VecDeque might work\n \n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:28:39\n+  --> $DIR/dlist.rs:30:39\n    |\n-28 | pub fn test(my_favourite_linked_list: LinkedList<u8>) {\n+30 | pub fn test(my_favourite_linked_list: LinkedList<u8>) {\n    |                                       ^^^^^^^^^^^^^^\n    |\n    = help: a VecDeque might work\n \n error: I see you're using a LinkedList! Perhaps you meant some other data structure?\n-  --> $DIR/dlist.rs:32:29\n+  --> $DIR/dlist.rs:34:29\n    |\n-32 | pub fn test_ret() -> Option<LinkedList<u8>> {\n+34 | pub fn test_ret() -> Option<LinkedList<u8>> {\n    |                             ^^^^^^^^^^^^^^\n    |\n    = help: a VecDeque might work"}, {"sha": "d48007a934718d8842accb19e6e661d3b70dac96", "filename": "tests/ui/doc.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdoc.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,11 @@\n+#![feature(tool_lints)]\n+\n //! This file tests for the DOC_MARKDOWN lint\n \n \n \n #![allow(dead_code)]\n-#![warn(doc_markdown)]\n+#![warn(clippy::doc_markdown)]\n \n /// The foo_bar function does _nothing_. See also foo::bar. (note the dot there)\n /// Markdown is _weird_. I mean _really weird_.  This \\_ is ok. So is `_`. But not Foo::some_fun\n@@ -50,7 +52,7 @@ fn test_units() {\n }\n \n /// This test has [a link_with_underscores][chunked-example] inside it. See #823.\n-/// See also [the issue tracker](https://github.com/rust-lang-nursery/rust-clippy/search?q=doc_markdown&type=Issues)\n+/// See also [the issue tracker](https://github.com/rust-lang-nursery/rust-clippy/search?q=clippy::doc_markdown&type=Issues)\n /// on GitHub (which is a camel-cased word, but is OK). And here is another [inline link][inline_link].\n /// It can also be [inline_link2].\n ///"}, {"sha": "c781f36db7aa78deb6425db0c3880f14cf65b507", "filename": "tests/ui/doc.stderr", "status": "modified", "additions": 69, "deletions": 69, "changes": 138, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdoc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdoc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdoc.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,183 +1,183 @@\n error: you should put `DOC_MARKDOWN` between ticks in the documentation\n- --> $DIR/doc.rs:1:29\n+ --> $DIR/doc.rs:3:29\n   |\n-1 | //! This file tests for the DOC_MARKDOWN lint\n+3 | //! This file tests for the DOC_MARKDOWN lint\n   |                             ^^^^^^^^^^^^\n   |\n-  = note: `-D doc-markdown` implied by `-D warnings`\n+  = note: `-D clippy::doc-markdown` implied by `-D warnings`\n \n error: you should put `foo_bar` between ticks in the documentation\n- --> $DIR/doc.rs:8:9\n-  |\n-8 | /// The foo_bar function does _nothing_. See also foo::bar. (note the dot there)\n-  |         ^^^^^^^\n+  --> $DIR/doc.rs:10:9\n+   |\n+10 | /// The foo_bar function does _nothing_. See also foo::bar. (note the dot there)\n+   |         ^^^^^^^\n \n error: you should put `foo::bar` between ticks in the documentation\n- --> $DIR/doc.rs:8:51\n-  |\n-8 | /// The foo_bar function does _nothing_. See also foo::bar. (note the dot there)\n-  |                                                   ^^^^^^^^\n+  --> $DIR/doc.rs:10:51\n+   |\n+10 | /// The foo_bar function does _nothing_. See also foo::bar. (note the dot there)\n+   |                                                   ^^^^^^^^\n \n error: you should put `Foo::some_fun` between ticks in the documentation\n- --> $DIR/doc.rs:9:84\n-  |\n-9 | /// Markdown is _weird_. I mean _really weird_.  This /_ is ok. So is `_`. But not Foo::some_fun\n-  |                                                                                    ^^^^^^^^^^^^^\n+  --> $DIR/doc.rs:11:84\n+   |\n+11 | /// Markdown is _weird_. I mean _really weird_.  This /_ is ok. So is `_`. But not Foo::some_fun\n+   |                                                                                    ^^^^^^^^^^^^^\n \n error: you should put `a::global:path` between ticks in the documentation\n-  --> $DIR/doc.rs:11:15\n+  --> $DIR/doc.rs:13:15\n    |\n-11 | /// Here be ::a::global:path.\n+13 | /// Here be ::a::global:path.\n    |               ^^^^^^^^^^^^^^\n \n error: you should put `NotInCodeBlock` between ticks in the documentation\n-  --> $DIR/doc.rs:12:22\n+  --> $DIR/doc.rs:14:22\n    |\n-12 | /// That's not code ~NotInCodeBlock~.\n+14 | /// That's not code ~NotInCodeBlock~.\n    |                      ^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:13:5\n+  --> $DIR/doc.rs:15:5\n    |\n-13 | /// be_sure_we_got_to_the_end_of_it\n+15 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:27:5\n+  --> $DIR/doc.rs:29:5\n    |\n-27 | /// be_sure_we_got_to_the_end_of_it\n+29 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:34:5\n+  --> $DIR/doc.rs:36:5\n    |\n-34 | /// be_sure_we_got_to_the_end_of_it\n+36 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:48:5\n+  --> $DIR/doc.rs:50:5\n    |\n-48 | /// be_sure_we_got_to_the_end_of_it\n+50 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `link_with_underscores` between ticks in the documentation\n-  --> $DIR/doc.rs:52:22\n+  --> $DIR/doc.rs:54:22\n    |\n-52 | /// This test has [a link_with_underscores][chunked-example] inside it. See #823.\n+54 | /// This test has [a link_with_underscores][chunked-example] inside it. See #823.\n    |                      ^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `inline_link2` between ticks in the documentation\n-  --> $DIR/doc.rs:55:21\n+  --> $DIR/doc.rs:57:21\n    |\n-55 | /// It can also be [inline_link2].\n+57 | /// It can also be [inline_link2].\n    |                     ^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:65:5\n+  --> $DIR/doc.rs:67:5\n    |\n-65 | /// be_sure_we_got_to_the_end_of_it\n+67 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `CamelCaseThing` between ticks in the documentation\n-  --> $DIR/doc.rs:73:8\n+  --> $DIR/doc.rs:75:8\n    |\n-73 | /// ## CamelCaseThing\n+75 | /// ## CamelCaseThing\n    |        ^^^^^^^^^^^^^^\n \n error: you should put `CamelCaseThing` between ticks in the documentation\n-  --> $DIR/doc.rs:76:7\n+  --> $DIR/doc.rs:78:7\n    |\n-76 | /// # CamelCaseThing\n+78 | /// # CamelCaseThing\n    |       ^^^^^^^^^^^^^^\n \n error: you should put `CamelCaseThing` between ticks in the documentation\n-  --> $DIR/doc.rs:78:22\n+  --> $DIR/doc.rs:80:22\n    |\n-78 | /// Not a title #897 CamelCaseThing\n+80 | /// Not a title #897 CamelCaseThing\n    |                      ^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:79:5\n+  --> $DIR/doc.rs:81:5\n    |\n-79 | /// be_sure_we_got_to_the_end_of_it\n+81 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:86:5\n+  --> $DIR/doc.rs:88:5\n    |\n-86 | /// be_sure_we_got_to_the_end_of_it\n+88 | /// be_sure_we_got_to_the_end_of_it\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-  --> $DIR/doc.rs:99:5\n-   |\n-99 | /// be_sure_we_got_to_the_end_of_it\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   --> $DIR/doc.rs:101:5\n+    |\n+101 | /// be_sure_we_got_to_the_end_of_it\n+    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `FooBar` between ticks in the documentation\n-   --> $DIR/doc.rs:110:42\n+   --> $DIR/doc.rs:112:42\n     |\n-110 | /** E.g. serialization of an empty list: FooBar\n+112 | /** E.g. serialization of an empty list: FooBar\n     |                                          ^^^^^^\n \n error: you should put `BarQuz` between ticks in the documentation\n-   --> $DIR/doc.rs:115:5\n+   --> $DIR/doc.rs:117:5\n     |\n-115 | And BarQuz too.\n+117 | And BarQuz too.\n     |     ^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-   --> $DIR/doc.rs:116:1\n+   --> $DIR/doc.rs:118:1\n     |\n-116 | be_sure_we_got_to_the_end_of_it\n+118 | be_sure_we_got_to_the_end_of_it\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `FooBar` between ticks in the documentation\n-   --> $DIR/doc.rs:121:42\n+   --> $DIR/doc.rs:123:42\n     |\n-121 | /** E.g. serialization of an empty list: FooBar\n+123 | /** E.g. serialization of an empty list: FooBar\n     |                                          ^^^^^^\n \n error: you should put `BarQuz` between ticks in the documentation\n-   --> $DIR/doc.rs:126:5\n+   --> $DIR/doc.rs:128:5\n     |\n-126 | And BarQuz too.\n+128 | And BarQuz too.\n     |     ^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-   --> $DIR/doc.rs:127:1\n+   --> $DIR/doc.rs:129:1\n     |\n-127 | be_sure_we_got_to_the_end_of_it\n+129 | be_sure_we_got_to_the_end_of_it\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put `be_sure_we_got_to_the_end_of_it` between ticks in the documentation\n-   --> $DIR/doc.rs:138:5\n+   --> $DIR/doc.rs:140:5\n     |\n-138 | /// be_sure_we_got_to_the_end_of_it\n+140 | /// be_sure_we_got_to_the_end_of_it\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put bare URLs between `<`/`>` or make a proper Markdown link\n-   --> $DIR/doc.rs:165:13\n+   --> $DIR/doc.rs:167:13\n     |\n-165 | /// Not ok: http://www.unicode.org\n+167 | /// Not ok: http://www.unicode.org\n     |             ^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put bare URLs between `<`/`>` or make a proper Markdown link\n-   --> $DIR/doc.rs:166:13\n+   --> $DIR/doc.rs:168:13\n     |\n-166 | /// Not ok: https://www.unicode.org\n+168 | /// Not ok: https://www.unicode.org\n     |             ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put bare URLs between `<`/`>` or make a proper Markdown link\n-   --> $DIR/doc.rs:167:13\n+   --> $DIR/doc.rs:169:13\n     |\n-167 | /// Not ok: http://www.unicode.org/\n+169 | /// Not ok: http://www.unicode.org/\n     |             ^^^^^^^^^^^^^^^^^^^^^^\n \n error: you should put bare URLs between `<`/`>` or make a proper Markdown link\n-   --> $DIR/doc.rs:168:13\n+   --> $DIR/doc.rs:170:13\n     |\n-168 | /// Not ok: http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels\n+170 | /// Not ok: http://www.unicode.org/reports/tr9/#Reordering_Resolved_Levels\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 30 previous errors"}, {"sha": "e6a0e976414df283e91b366c9c80435e918449e0", "filename": "tests/ui/double_comparison.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_comparison.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_comparison.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_comparison.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: This binary expression can be simplified\n 4 |     if x == y || x < y {\n   |        ^^^^^^^^^^^^^^^ help: try: `x <= y`\n   |\n-  = note: `-D double-comparisons` implied by `-D warnings`\n+  = note: `-D clippy::double-comparisons` implied by `-D warnings`\n \n error: This binary expression can be simplified\n  --> $DIR/double_comparison.rs:7:8"}, {"sha": "0ec13900f99501418d08820f4f94bb7f352f3e38", "filename": "tests/ui/double_neg.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_neg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_neg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_neg.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(double_neg)]\n+#[warn(clippy::double_neg)]\n fn main() {\n     let x = 1;\n     -x;"}, {"sha": "02202dbd63ce0120f29f4159a648c5e184d48e18", "filename": "tests/ui/double_neg.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_neg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_neg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_neg.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: `--x` could be misinterpreted as pre-decrement by C programmers, is usual\n 9 |     --x;\n   |     ^^^\n   |\n-  = note: `-D double-neg` implied by `-D warnings`\n+  = note: `-D clippy::double-neg` implied by `-D warnings`\n \n error: aborting due to previous error\n "}, {"sha": "8d81ee16fe92c0fe834fa790d673b50c4974808c", "filename": "tests/ui/double_parens.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_parens.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(double_parens)]\n+#![warn(clippy::double_parens)]\n #![allow(dead_code)]\n \n fn dummy_fn<T>(_: T) {}"}, {"sha": "a6a29eeb06316f24223002bec3fba98660f2ecb1", "filename": "tests/ui/double_parens.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdouble_parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdouble_parens.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: Consider removing unnecessary double parentheses\n 16 |     ((0))\n    |     ^^^^^\n    |\n-   = note: `-D double-parens` implied by `-D warnings`\n+   = note: `-D clippy::double-parens` implied by `-D warnings`\n \n error: Consider removing unnecessary double parentheses\n   --> $DIR/double_parens.rs:20:14"}, {"sha": "aa70490f8ab4b6729aaca808556261ef5f44fba1", "filename": "tests/ui/drop_forget_copy.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_copy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_copy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdrop_forget_copy.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(drop_copy, forget_copy)]\n-#![allow(toplevel_ref_arg, drop_ref, forget_ref, unused_mut)]\n+#![warn(clippy::drop_copy, clippy::forget_copy)]\n+#![allow(clippy::toplevel_ref_arg, clippy::drop_ref, clippy::forget_ref, unused_mut)]\n \n use std::mem::{drop, forget};\n use std::vec::Vec;"}, {"sha": "043067fe8af7311061312eac4f689c4590af0df7", "filename": "tests/ui/drop_forget_copy.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_copy.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_copy.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdrop_forget_copy.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: calls to `std::mem::drop` with a value that implements Copy. Dropping a c\n 33 |     drop(s1);\n    |     ^^^^^^^^\n    |\n-   = note: `-D drop-copy` implied by `-D warnings`\n+   = note: `-D clippy::drop-copy` implied by `-D warnings`\n note: argument has type SomeStruct\n   --> $DIR/drop_forget_copy.rs:33:10\n    |\n@@ -41,7 +41,7 @@ error: calls to `std::mem::forget` with a value that implements Copy. Forgetting\n 39 |     forget(s1);\n    |     ^^^^^^^^^^\n    |\n-   = note: `-D forget-copy` implied by `-D warnings`\n+   = note: `-D clippy::forget-copy` implied by `-D warnings`\n note: argument has type SomeStruct\n   --> $DIR/drop_forget_copy.rs:39:12\n    |"}, {"sha": "bb4781db71b8ccc367df522618f18f4773c00f38", "filename": "tests/ui/drop_forget_ref.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdrop_forget_ref.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(drop_ref, forget_ref)]\n-#![allow(toplevel_ref_arg, similar_names, needless_pass_by_value)]\n+#![warn(clippy::drop_ref, clippy::forget_ref)]\n+#![allow(clippy::toplevel_ref_arg, clippy::similar_names, clippy::needless_pass_by_value)]\n \n use std::mem::{drop, forget};\n "}, {"sha": "227918f591723e9127fe587bef01239e94bc7601", "filename": "tests/ui/drop_forget_ref.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_ref.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fdrop_forget_ref.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdrop_forget_ref.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: calls to `std::mem::drop` with a reference instead of an owned value. Dro\n 12 |     drop(&SomeStruct);\n    |     ^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D drop-ref` implied by `-D warnings`\n+   = note: `-D clippy::drop-ref` implied by `-D warnings`\n note: argument has type &SomeStruct\n   --> $DIR/drop_forget_ref.rs:12:10\n    |\n@@ -17,7 +17,7 @@ error: calls to `std::mem::forget` with a reference instead of an owned value. F\n 13 |     forget(&SomeStruct);\n    |     ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D forget-ref` implied by `-D warnings`\n+   = note: `-D clippy::forget-ref` implied by `-D warnings`\n note: argument has type &SomeStruct\n   --> $DIR/drop_forget_ref.rs:13:12\n    |"}, {"sha": "e54920c1b56ddbb912b7926811225ace86ca7b68", "filename": "tests/ui/duplicate_underscore_argument.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduplicate_underscore_argument.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduplicate_underscore_argument.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fduplicate_underscore_argument.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(duplicate_underscore_argument)]\n+#![warn(clippy::duplicate_underscore_argument)]\n #[allow(dead_code, unused)]\n \n fn join_the_dark_side(darth: i32, _darth: i32) {}"}, {"sha": "70714534653af76fd50df58ba0f022024d31a6de", "filename": "tests/ui/duplicate_underscore_argument.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduplicate_underscore_argument.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduplicate_underscore_argument.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fduplicate_underscore_argument.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: `darth` already exists, having another argument having almost the same na\n 7 | fn join_the_dark_side(darth: i32, _darth: i32) {}\n   |                       ^^^^^\n   |\n-  = note: `-D duplicate-underscore-argument` implied by `-D warnings`\n+  = note: `-D clippy::duplicate-underscore-argument` implied by `-D warnings`\n \n error: aborting due to previous error\n "}, {"sha": "d732a0228d56a15d4154d79a95958a3cac37e037", "filename": "tests/ui/duration_subsec.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduration_subsec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduration_subsec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fduration_subsec.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![warn(duration_subsec)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::duration_subsec)]\n \n use std::time::Duration;\n "}, {"sha": "c23b041a80a5e06c5ba3177c7019a0216f8a77b9", "filename": "tests/ui/duration_subsec.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduration_subsec.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fduration_subsec.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fduration_subsec.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,33 +1,33 @@\n error: Calling `subsec_millis()` is more concise than this calculation\n- --> $DIR/duration_subsec.rs:8:24\n-  |\n-8 |     let bad_millis_1 = dur.subsec_micros() / 1_000;\n-  |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_millis()`\n-  |\n-  = note: `-D duration-subsec` implied by `-D warnings`\n+  --> $DIR/duration_subsec.rs:10:24\n+   |\n+10 |     let bad_millis_1 = dur.subsec_micros() / 1_000;\n+   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_millis()`\n+   |\n+   = note: `-D clippy::duration-subsec` implied by `-D warnings`\n \n error: Calling `subsec_millis()` is more concise than this calculation\n- --> $DIR/duration_subsec.rs:9:24\n-  |\n-9 |     let bad_millis_2 = dur.subsec_nanos() / 1_000_000;\n-  |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_millis()`\n+  --> $DIR/duration_subsec.rs:11:24\n+   |\n+11 |     let bad_millis_2 = dur.subsec_nanos() / 1_000_000;\n+   |                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_millis()`\n \n error: Calling `subsec_micros()` is more concise than this calculation\n-  --> $DIR/duration_subsec.rs:14:22\n+  --> $DIR/duration_subsec.rs:16:22\n    |\n-14 |     let bad_micros = dur.subsec_nanos() / 1_000;\n+16 |     let bad_micros = dur.subsec_nanos() / 1_000;\n    |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_micros()`\n \n error: Calling `subsec_micros()` is more concise than this calculation\n-  --> $DIR/duration_subsec.rs:19:13\n+  --> $DIR/duration_subsec.rs:21:13\n    |\n-19 |     let _ = (&dur).subsec_nanos() / 1_000;\n+21 |     let _ = (&dur).subsec_nanos() / 1_000;\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `(&dur).subsec_micros()`\n \n error: Calling `subsec_micros()` is more concise than this calculation\n-  --> $DIR/duration_subsec.rs:23:13\n+  --> $DIR/duration_subsec.rs:25:13\n    |\n-23 |     let _ = dur.subsec_nanos() / NANOS_IN_MICRO;\n+25 |     let _ = dur.subsec_nanos() / NANOS_IN_MICRO;\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `dur.subsec_micros()`\n \n error: aborting due to 5 previous errors"}, {"sha": "3776aecf54faca0152e4f522258c65a437ac38ee", "filename": "tests/ui/else_if_without_else.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Felse_if_without_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Felse_if_without_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Felse_if_without_else.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,7 @@\n-#![warn(clippy)]\n-#![warn(else_if_without_else)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::all)]\n+#![warn(clippy::else_if_without_else)]\n \n fn bla1() -> bool { unimplemented!() }\n fn bla2() -> bool { unimplemented!() }"}, {"sha": "a352546ce9f007cb96afe9575cd96182838a4db8", "filename": "tests/ui/else_if_without_else.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Felse_if_without_else.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Felse_if_without_else.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Felse_if_without_else.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,21 +1,21 @@\n error: if expression with an `else if`, but without a final `else`\n-  --> $DIR/else_if_without_else.rs:39:12\n+  --> $DIR/else_if_without_else.rs:41:12\n    |\n-39 |       } else if bla2() { //~ ERROR else if without else\n+41 |       } else if bla2() { //~ ERROR else if without else\n    |  ____________^\n-40 | |         println!(\"else if\");\n-41 | |     }\n+42 | |         println!(\"else if\");\n+43 | |     }\n    | |_____^ help: add an `else` block here\n    |\n-   = note: `-D else-if-without-else` implied by `-D warnings`\n+   = note: `-D clippy::else-if-without-else` implied by `-D warnings`\n \n error: if expression with an `else if`, but without a final `else`\n-  --> $DIR/else_if_without_else.rs:47:12\n+  --> $DIR/else_if_without_else.rs:49:12\n    |\n-47 |       } else if bla3() { //~ ERROR else if without else\n+49 |       } else if bla3() { //~ ERROR else if without else\n    |  ____________^\n-48 | |         println!(\"else if 2\");\n-49 | |     }\n+50 | |         println!(\"else if 2\");\n+51 | |     }\n    | |_____^ help: add an `else` block here\n \n error: aborting due to 2 previous errors"}, {"sha": "3398b71eead9cdaf2e96d00f45975be009c3dede", "filename": "tests/ui/empty_enum.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_enum.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n-\n+#![feature(tool_lints)]\n \n \n #![allow(dead_code)]\n-#![warn(empty_enum)]\n+#![warn(clippy::empty_enum)]\n \n enum Empty {}\n "}, {"sha": "f198793fed43df19b759f46161b2399597e8d764", "filename": "tests/ui/empty_enum.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_enum.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_enum.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_enum.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: enum with no variants\n 7 | enum Empty {}\n   | ^^^^^^^^^^^^^\n   |\n-  = note: `-D empty-enum` implied by `-D warnings`\n+  = note: `-D clippy::empty-enum` implied by `-D warnings`\n help: consider using the uninhabited type `!` or a wrapper around it\n  --> $DIR/empty_enum.rs:7:1\n   |"}, {"sha": "c46a0496a732144cca2fb2d347bbc5356ece49cd", "filename": "tests/ui/empty_line_after_outer_attribute.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_line_after_outer_attribute.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,5 +1,5 @@\n-\n-#![warn(empty_line_after_outer_attr)]\n+#![feature(tool_lints)]\n+#![warn(clippy::empty_line_after_outer_attr)]\n \n // This should produce a warning\n #[crate_type = \"lib\"]"}, {"sha": "7bcec54a6003f42fd0f6a52baee5335a204a348b", "filename": "tests/ui/empty_line_after_outer_attribute.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_line_after_outer_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fempty_line_after_outer_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_line_after_outer_attribute.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -7,7 +7,7 @@ error: Found an empty line after an outer attribute. Perhaps you forgot to add a\n 8 | | fn with_one_newline_and_comment() { assert!(true) }\n   | |_\n   |\n-  = note: `-D empty-line-after-outer-attr` implied by `-D warnings`\n+  = note: `-D clippy::empty-line-after-outer-attr` implied by `-D warnings`\n \n error: Found an empty line after an outer attribute. Perhaps you forgot to add a '!' to make it an inner attribute?\n   --> $DIR/empty_line_after_outer_attribute.rs:17:1"}, {"sha": "955b0a6e917667d998c079edecf3bb64b058fa4f", "filename": "tests/ui/entry.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fentry.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n+#![allow(unused, clippy::needless_pass_by_value)]\n \n-#![allow(unused, needless_pass_by_value)]\n-\n-#![warn(map_entry)]\n+#![warn(clippy::map_entry)]\n \n use std::collections::{BTreeMap, HashMap};\n use std::hash::Hash;"}, {"sha": "cffe8b232359a7409fc0612771f42d5979aa4d11", "filename": "tests/ui/entry.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fentry.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fentry.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fentry.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: usage of `contains_key` followed by `insert` on a `HashMap`\n 13 |     if !m.contains_key(&k) { m.insert(k, v); }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider using: `m.entry(k).or_insert(v)`\n    |\n-   = note: `-D map-entry` implied by `-D warnings`\n+   = note: `-D clippy::map-entry` implied by `-D warnings`\n \n error: usage of `contains_key` followed by `insert` on a `HashMap`\n   --> $DIR/entry.rs:17:5"}, {"sha": "47082f8f3e649f85fb15315aabc2895f33912dc8", "filename": "tests/ui/enum_glob_use.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_glob_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_glob_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_glob_use.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n-\n-#![warn(clippy, clippy_pedantic)]\n-#![allow(unused_imports, dead_code, missing_docs_in_private_items)]\n+#![warn(clippy::all, clippy::pedantic)]\n+#![allow(unused_imports, dead_code, clippy::missing_docs_in_private_items)]\n \n use std::cmp::Ordering::*;\n "}, {"sha": "bb1d19e41b27a47080ad258b68df0fa4dd77d699", "filename": "tests/ui/enum_glob_use.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_glob_use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_glob_use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_glob_use.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: don't use glob imports for enum variants\n 6 | use std::cmp::Ordering::*;\n   | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n   |\n-  = note: `-D enum-glob-use` implied by `-D warnings`\n+  = note: `-D clippy::enum-glob-use` implied by `-D warnings`\n \n error: don't use glob imports for enum variants\n   --> $DIR/enum_glob_use.rs:12:1"}, {"sha": "4ddb7207a30b5761b30fd89b0ededd89f58c565e", "filename": "tests/ui/enum_variants.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_variants.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,8 @@\n+#![feature(tool_lints)]\n+\n #![feature(non_ascii_idents)]\n \n-#![warn(clippy, pub_enum_variant_names)]\n+#![warn(clippy::all, clippy::pub_enum_variant_names)]\n \n enum FakeCallType {\n     CALL, CREATE\n@@ -93,7 +95,7 @@ pub enum PubSeall {\n     WithOut,\n }\n \n-#[allow(pub_enum_variant_names)]\n+#[allow(clippy::pub_enum_variant_names)]\n mod allowed {\n     pub enum PubAllowed {\n         SomeThis,"}, {"sha": "bd083e7e069147df907cc23af3e5226f51e6fd70", "filename": "tests/ui/enum_variants.stderr", "status": "modified", "additions": 46, "deletions": 46, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_variants.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenum_variants.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_variants.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,100 +1,100 @@\n error: Variant name ends with the enum's name\n-  --> $DIR/enum_variants.rs:14:5\n+  --> $DIR/enum_variants.rs:16:5\n    |\n-14 |     cFoo,\n+16 |     cFoo,\n    |     ^^^^\n    |\n-   = note: `-D enum-variant-names` implied by `-D warnings`\n+   = note: `-D clippy::enum-variant-names` implied by `-D warnings`\n \n error: Variant name starts with the enum's name\n-  --> $DIR/enum_variants.rs:25:5\n+  --> $DIR/enum_variants.rs:27:5\n    |\n-25 |     FoodGood,\n+27 |     FoodGood,\n    |     ^^^^^^^^\n \n error: Variant name starts with the enum's name\n-  --> $DIR/enum_variants.rs:26:5\n+  --> $DIR/enum_variants.rs:28:5\n    |\n-26 |     FoodMiddle,\n+28 |     FoodMiddle,\n    |     ^^^^^^^^^^\n \n error: Variant name starts with the enum's name\n-  --> $DIR/enum_variants.rs:27:5\n+  --> $DIR/enum_variants.rs:29:5\n    |\n-27 |     FoodBad,\n+29 |     FoodBad,\n    |     ^^^^^^^\n \n error: All variants have the same prefix: `Food`\n-  --> $DIR/enum_variants.rs:24:1\n+  --> $DIR/enum_variants.rs:26:1\n    |\n-24 | / enum Food {\n-25 | |     FoodGood,\n-26 | |     FoodMiddle,\n-27 | |     FoodBad,\n-28 | | }\n+26 | / enum Food {\n+27 | |     FoodGood,\n+28 | |     FoodMiddle,\n+29 | |     FoodBad,\n+30 | | }\n    | |_^\n    |\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: All variants have the same prefix: `CallType`\n-  --> $DIR/enum_variants.rs:34:1\n+  --> $DIR/enum_variants.rs:36:1\n    |\n-34 | / enum BadCallType {\n-35 | |     CallTypeCall,\n-36 | |     CallTypeCreate,\n-37 | |     CallTypeDestroy,\n-38 | | }\n+36 | / enum BadCallType {\n+37 | |     CallTypeCall,\n+38 | |     CallTypeCreate,\n+39 | |     CallTypeDestroy,\n+40 | | }\n    | |_^\n    |\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: All variants have the same prefix: `Constant`\n-  --> $DIR/enum_variants.rs:45:1\n+  --> $DIR/enum_variants.rs:47:1\n    |\n-45 | / enum Consts {\n-46 | |     ConstantInt,\n-47 | |     ConstantCake,\n-48 | |     ConstantLie,\n-49 | | }\n+47 | / enum Consts {\n+48 | |     ConstantInt,\n+49 | |     ConstantCake,\n+50 | |     ConstantLie,\n+51 | | }\n    | |_^\n    |\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: All variants have the same prefix: `With`\n-  --> $DIR/enum_variants.rs:78:1\n+  --> $DIR/enum_variants.rs:80:1\n    |\n-78 | / enum Seallll {\n-79 | |     WithOutCake,\n-80 | |     WithOutTea,\n-81 | |     WithOut,\n-82 | | }\n+80 | / enum Seallll {\n+81 | |     WithOutCake,\n+82 | |     WithOutTea,\n+83 | |     WithOut,\n+84 | | }\n    | |_^\n    |\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: All variants have the same prefix: `Prefix`\n-  --> $DIR/enum_variants.rs:84:1\n+  --> $DIR/enum_variants.rs:86:1\n    |\n-84 | / enum NonCaps {\n-85 | |     Prefix\u7684,\n-86 | |     PrefixTea,\n-87 | |     PrefixCake,\n-88 | | }\n+86 | / enum NonCaps {\n+87 | |     Prefix\u7684,\n+88 | |     PrefixTea,\n+89 | |     PrefixCake,\n+90 | | }\n    | |_^\n    |\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: All variants have the same prefix: `With`\n-  --> $DIR/enum_variants.rs:90:1\n+  --> $DIR/enum_variants.rs:92:1\n    |\n-90 | / pub enum PubSeall {\n-91 | |     WithOutCake,\n-92 | |     WithOutTea,\n-93 | |     WithOut,\n-94 | | }\n+92 | / pub enum PubSeall {\n+93 | |     WithOutCake,\n+94 | |     WithOutTea,\n+95 | |     WithOut,\n+96 | | }\n    | |_^\n    |\n-   = note: `-D pub-enum-variant-names` implied by `-D warnings`\n+   = note: `-D clippy::pub-enum-variant-names` implied by `-D warnings`\n    = help: remove the prefixes and use full paths to the variants instead of glob imports\n \n error: aborting due to 10 previous errors"}, {"sha": "8212f12b3dbce61fe77044bc41bb9d82a2976f4e", "filename": "tests/ui/enums_clike.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenums_clike.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenums_clike.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenums_clike.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,9 @@\n+#![feature(tool_lints)]\n+\n // ignore-x86\n \n \n-#![warn(clippy)]\n+#![warn(clippy::all)]\n \n #![allow(unused)]\n "}, {"sha": "cccf4ed030c322b9c8266a07b5e8e3b24d6300b7", "filename": "tests/ui/enums_clike.stderr", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenums_clike.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fenums_clike.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenums_clike.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,51 +1,51 @@\n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:10:5\n+  --> $DIR/enums_clike.rs:12:5\n    |\n-10 |     X = 0x1_0000_0000,\n+12 |     X = 0x1_0000_0000,\n    |     ^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D enum-clike-unportable-variant` implied by `-D warnings`\n+   = note: `-D clippy::enum-clike-unportable-variant` implied by `-D warnings`\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:17:5\n+  --> $DIR/enums_clike.rs:19:5\n    |\n-17 |     X = 0x1_0000_0000,\n+19 |     X = 0x1_0000_0000,\n    |     ^^^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:20:5\n+  --> $DIR/enums_clike.rs:22:5\n    |\n-20 |     A = 0xFFFF_FFFF,\n+22 |     A = 0xFFFF_FFFF,\n    |     ^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:27:5\n+  --> $DIR/enums_clike.rs:29:5\n    |\n-27 |     Z = 0xFFFF_FFFF,\n+29 |     Z = 0xFFFF_FFFF,\n    |     ^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:28:5\n+  --> $DIR/enums_clike.rs:30:5\n    |\n-28 |     A = 0x1_0000_0000,\n+30 |     A = 0x1_0000_0000,\n    |     ^^^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:30:5\n+  --> $DIR/enums_clike.rs:32:5\n    |\n-30 |     C = (std::i32::MIN as isize) - 1,\n+32 |     C = (std::i32::MIN as isize) - 1,\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:36:5\n+  --> $DIR/enums_clike.rs:38:5\n    |\n-36 |     Z = 0xFFFF_FFFF,\n+38 |     Z = 0xFFFF_FFFF,\n    |     ^^^^^^^^^^^^^^^\n \n error: Clike enum variant discriminant is not portable to 32-bit targets\n-  --> $DIR/enums_clike.rs:37:5\n+  --> $DIR/enums_clike.rs:39:5\n    |\n-37 |     A = 0x1_0000_0000,\n+39 |     A = 0x1_0000_0000,\n    |     ^^^^^^^^^^^^^^^^^\n \n error: aborting due to 8 previous errors"}, {"sha": "a88866436dd527e6942a91ab504b28a46fdf4d62", "filename": "tests/ui/eq_op.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feq_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feq_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feq_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,10 +1,10 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(eq_op)]\n-#[allow(identity_op, double_parens, many_single_char_names)]\n-#[allow(no_effect, unused_variables, unnecessary_operation, short_circuit_statement)]\n-#[warn(nonminimal_bool)]\n+#[warn(clippy::eq_op)]\n+#[allow(clippy::identity_op, clippy::double_parens, clippy::many_single_char_names)]\n+#[allow(clippy::no_effect, unused_variables, clippy::unnecessary_operation, clippy::short_circuit_statement)]\n+#[warn(clippy::nonminimal_bool)]\n fn main() {\n     // simple values and comparisons\n     1 == 1;"}, {"sha": "ad0c8d8ecd7c860cbfbd28d6fa4c01a3f7c69301", "filename": "tests/ui/eq_op.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feq_op.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feq_op.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feq_op.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this boolean expression can be simplified\n 37 |     true && true;\n    |     ^^^^^^^^^^^^ help: try: `true`\n    |\n-   = note: `-D nonminimal-bool` implied by `-D warnings`\n+   = note: `-D clippy::nonminimal-bool` implied by `-D warnings`\n \n error: this boolean expression can be simplified\n   --> $DIR/eq_op.rs:39:5\n@@ -42,7 +42,7 @@ error: equal expressions as operands to `==`\n 10 |     1 == 1;\n    |     ^^^^^^\n    |\n-   = note: `-D eq-op` implied by `-D warnings`\n+   = note: `-D clippy::eq-op` implied by `-D warnings`\n \n error: equal expressions as operands to `==`\n   --> $DIR/eq_op.rs:11:5\n@@ -202,7 +202,7 @@ error: taken reference of right operand\n    |                 |\n    |                 help: use the right value directly: `y`\n    |\n-   = note: `-D op-ref` implied by `-D warnings`\n+   = note: `-D clippy::op-ref` implied by `-D warnings`\n \n error: equal expressions as operands to `/`\n   --> $DIR/eq_op.rs:97:20"}, {"sha": "02745ac5d911fbe5c2bd99744911f98f20508313", "filename": "tests/ui/erasing_op.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ferasing_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ferasing_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ferasing_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[allow(no_effect)]\n-#[warn(erasing_op)]\n+#[allow(clippy::no_effect)]\n+#[warn(clippy::erasing_op)]\n fn main() {\n     let x: u8 = 0;\n "}, {"sha": "18486ab47819aeb75a1d4c0aeb9b2416aeb42f06", "filename": "tests/ui/erasing_op.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ferasing_op.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ferasing_op.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ferasing_op.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this operation will always return zero. This is likely not the intended o\n 9 |     x * 0;\n   |     ^^^^^\n   |\n-  = note: `-D erasing-op` implied by `-D warnings`\n+  = note: `-D clippy::erasing-op` implied by `-D warnings`\n \n error: this operation will always return zero. This is likely not the intended outcome\n   --> $DIR/erasing_op.rs:10:5"}, {"sha": "4dd46f20e7641cf48b4f70cad8d22289d038be1d", "filename": "tests/ui/eta.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feta.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feta.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feta.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n-\n-#![allow(unknown_lints, unused, no_effect, redundant_closure_call, many_single_char_names, needless_pass_by_value, option_map_unit_fn, trivially_copy_pass_by_ref)]\n-#![warn(redundant_closure, needless_borrow)]\n+#![allow(unknown_lints, unused, clippy::no_effect, clippy::redundant_closure_call, clippy::many_single_char_names, clippy::needless_pass_by_value, clippy::option_map_unit_fn, clippy::trivially_copy_pass_by_ref)]\n+#![warn(clippy::redundant_closure, clippy::needless_borrow)]\n \n fn main() {\n     let a = Some(1u8).map(|a| foo(a));"}, {"sha": "89543d6af0c6b9ea0046a1450a10d95405857478", "filename": "tests/ui/eta.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feta.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feta.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feta.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: redundant closure found\n 7 |     let a = Some(1u8).map(|a| foo(a));\n   |                           ^^^^^^^^^^ help: remove closure as shown: `foo`\n   |\n-  = note: `-D redundant-closure` implied by `-D warnings`\n+  = note: `-D clippy::redundant-closure` implied by `-D warnings`\n \n error: redundant closure found\n  --> $DIR/eta.rs:8:10\n@@ -24,7 +24,7 @@ error: this expression borrows a reference that is immediately dereferenced by t\n 11 |     all(&[1, 2, 3], &&2, |x, y| below(x, y)); //is adjusted\n    |                     ^^^ help: change this to: `&2`\n    |\n-   = note: `-D needless-borrow` implied by `-D warnings`\n+   = note: `-D clippy::needless-borrow` implied by `-D warnings`\n \n error: redundant closure found\n   --> $DIR/eta.rs:18:27"}, {"sha": "b240dde06f8e4ffc7952e96ca9151ac4741fd540", "filename": "tests/ui/eval_order_dependence.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feval_order_dependence.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feval_order_dependence.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feval_order_dependence.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#[warn(eval_order_dependence)]\n-#[allow(unused_assignments, unused_variables, many_single_char_names, no_effect, dead_code, blacklisted_name)]\n+#[warn(clippy::eval_order_dependence)]\n+#[allow(unused_assignments, unused_variables, clippy::many_single_char_names, clippy::no_effect, dead_code, clippy::blacklisted_name)]\n fn main() {\n     let mut x = 0;\n     let a = { x = 1; 1 } + x;"}, {"sha": "3caba829be42d64771a8d2cce31b85d90b1134d8", "filename": "tests/ui/eval_order_dependence.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feval_order_dependence.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Feval_order_dependence.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Feval_order_dependence.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: unsequenced read of a variable\n 8 |     let a = { x = 1; 1 } + x;\n   |                            ^\n   |\n-  = note: `-D eval-order-dependence` implied by `-D warnings`\n+  = note: `-D clippy::eval-order-dependence` implied by `-D warnings`\n note: whether read occurs before this write depends on evaluation order\n  --> $DIR/eval_order_dependence.rs:8:15\n   |"}, {"sha": "b44364d6beb3eab06d6eac2eb774239e29da9ba4", "filename": "tests/ui/excessive_precision.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexcessive_precision.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexcessive_precision.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fexcessive_precision.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n-\n-#![warn(excessive_precision)]\n-#![allow(print_literal)]\n+#![feature(tool_lints)]\n+#![warn(clippy::excessive_precision)]\n+#![allow(clippy::print_literal)]\n \n fn main() {\n     // Consts"}, {"sha": "bb0546cdcc689cdca6e45aa6afd8c826a9e4a2aa", "filename": "tests/ui/excessive_precision.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexcessive_precision.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexcessive_precision.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fexcessive_precision.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: float has excessive precision\n 15 |     const BAD32_1: f32 = 0.123_456_789_f32;\n    |                          ^^^^^^^^^^^^^^^^^ help: consider changing the type or truncating it to: `0.123_456_79`\n    |\n-   = note: `-D excessive-precision` implied by `-D warnings`\n+   = note: `-D clippy::excessive-precision` implied by `-D warnings`\n \n error: float has excessive precision\n   --> $DIR/excessive_precision.rs:16:26"}, {"sha": "9d6d13c84c546fa786cc717c96f4b270709e69cb", "filename": "tests/ui/explicit_write.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexplicit_write.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexplicit_write.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fexplicit_write.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![warn(explicit_write)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::explicit_write)]\n \n \n fn stdout() -> String {"}, {"sha": "fb14120b16d39b07c2cbc710f0e13dadb9a8b87f", "filename": "tests/ui/explicit_write.stderr", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexplicit_write.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fexplicit_write.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fexplicit_write.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,39 +1,39 @@\n error: use of `write!(stdout(), ...).unwrap()`. Consider using `print!` instead\n-  --> $DIR/explicit_write.rs:16:9\n+  --> $DIR/explicit_write.rs:18:9\n    |\n-16 |         write!(std::io::stdout(), \"test\").unwrap();\n+18 |         write!(std::io::stdout(), \"test\").unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D explicit-write` implied by `-D warnings`\n+   = note: `-D clippy::explicit-write` implied by `-D warnings`\n \n error: use of `write!(stderr(), ...).unwrap()`. Consider using `eprint!` instead\n-  --> $DIR/explicit_write.rs:17:9\n+  --> $DIR/explicit_write.rs:19:9\n    |\n-17 |         write!(std::io::stderr(), \"test\").unwrap();\n+19 |         write!(std::io::stderr(), \"test\").unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: use of `writeln!(stdout(), ...).unwrap()`. Consider using `println!` instead\n-  --> $DIR/explicit_write.rs:18:9\n+  --> $DIR/explicit_write.rs:20:9\n    |\n-18 |         writeln!(std::io::stdout(), \"test\").unwrap();\n+20 |         writeln!(std::io::stdout(), \"test\").unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: use of `writeln!(stderr(), ...).unwrap()`. Consider using `eprintln!` instead\n-  --> $DIR/explicit_write.rs:19:9\n+  --> $DIR/explicit_write.rs:21:9\n    |\n-19 |         writeln!(std::io::stderr(), \"test\").unwrap();\n+21 |         writeln!(std::io::stderr(), \"test\").unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: use of `stdout().write_fmt(...).unwrap()`. Consider using `print!` instead\n-  --> $DIR/explicit_write.rs:20:9\n+  --> $DIR/explicit_write.rs:22:9\n    |\n-20 |         std::io::stdout().write_fmt(format_args!(\"test\")).unwrap();\n+22 |         std::io::stdout().write_fmt(format_args!(\"test\")).unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: use of `stderr().write_fmt(...).unwrap()`. Consider using `eprint!` instead\n-  --> $DIR/explicit_write.rs:21:9\n+  --> $DIR/explicit_write.rs:23:9\n    |\n-21 |         std::io::stderr().write_fmt(format_args!(\"test\")).unwrap();\n+23 |         std::io::stderr().write_fmt(format_args!(\"test\")).unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 6 previous errors"}, {"sha": "5e33cca59fa73331ad97d594e682562f99ae9a34", "filename": "tests/ui/fallible_impl_from.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffallible_impl_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffallible_impl_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffallible_impl_from.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(fallible_impl_from)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::fallible_impl_from)]\n \n // docs example\n struct Foo(i32);"}, {"sha": "4dbc7879d316d921b1e25ad000a466c352286d84", "filename": "tests/ui/fallible_impl_from.stderr", "status": "modified", "additions": 50, "deletions": 50, "changes": 100, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffallible_impl_from.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffallible_impl_from.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffallible_impl_from.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,91 +1,91 @@\n error: consider implementing `TryFrom` instead\n- --> $DIR/fallible_impl_from.rs:5:1\n-  |\n-5 | / impl From<String> for Foo {\n-6 | |     fn from(s: String) -> Self {\n-7 | |         Foo(s.parse().unwrap())\n-8 | |     }\n-9 | | }\n-  | |_^\n-  |\n+  --> $DIR/fallible_impl_from.rs:7:1\n+   |\n+7  | / impl From<String> for Foo {\n+8  | |     fn from(s: String) -> Self {\n+9  | |         Foo(s.parse().unwrap())\n+10 | |     }\n+11 | | }\n+   | |_^\n+   |\n note: lint level defined here\n- --> $DIR/fallible_impl_from.rs:1:9\n-  |\n-1 | #![deny(fallible_impl_from)]\n-  |         ^^^^^^^^^^^^^^^^^^\n-  = help: `From` is intended for infallible conversions only. Use `TryFrom` if there's a possibility for the conversion to fail.\n+  --> $DIR/fallible_impl_from.rs:3:9\n+   |\n+3  | #![deny(clippy::fallible_impl_from)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   = help: `From` is intended for infallible conversions only. Use `TryFrom` if there's a possibility for the conversion to fail.\n note: potential failure(s)\n- --> $DIR/fallible_impl_from.rs:7:13\n-  |\n-7 |         Foo(s.parse().unwrap())\n-  |             ^^^^^^^^^^^^^^^^^^\n+  --> $DIR/fallible_impl_from.rs:9:13\n+   |\n+9  |         Foo(s.parse().unwrap())\n+   |             ^^^^^^^^^^^^^^^^^^\n \n error: consider implementing `TryFrom` instead\n-  --> $DIR/fallible_impl_from.rs:28:1\n+  --> $DIR/fallible_impl_from.rs:30:1\n    |\n-28 | / impl From<usize> for Invalid {\n-29 | |     fn from(i: usize) -> Invalid {\n-30 | |         if i != 42 {\n-31 | |             panic!();\n+30 | / impl From<usize> for Invalid {\n+31 | |     fn from(i: usize) -> Invalid {\n+32 | |         if i != 42 {\n+33 | |             panic!();\n ...  |\n-34 | |     }\n-35 | | }\n+36 | |     }\n+37 | | }\n    | |_^\n    |\n    = help: `From` is intended for infallible conversions only. Use `TryFrom` if there's a possibility for the conversion to fail.\n note: potential failure(s)\n-  --> $DIR/fallible_impl_from.rs:31:13\n+  --> $DIR/fallible_impl_from.rs:33:13\n    |\n-31 |             panic!();\n+33 |             panic!();\n    |             ^^^^^^^^^\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n error: consider implementing `TryFrom` instead\n-  --> $DIR/fallible_impl_from.rs:37:1\n+  --> $DIR/fallible_impl_from.rs:39:1\n    |\n-37 | / impl From<Option<String>> for Invalid {\n-38 | |     fn from(s: Option<String>) -> Invalid {\n-39 | |         let s = s.unwrap();\n-40 | |         if !s.is_empty() {\n+39 | / impl From<Option<String>> for Invalid {\n+40 | |     fn from(s: Option<String>) -> Invalid {\n+41 | |         let s = s.unwrap();\n+42 | |         if !s.is_empty() {\n ...  |\n-46 | |     }\n-47 | | }\n+48 | |     }\n+49 | | }\n    | |_^\n    |\n    = help: `From` is intended for infallible conversions only. Use `TryFrom` if there's a possibility for the conversion to fail.\n note: potential failure(s)\n-  --> $DIR/fallible_impl_from.rs:39:17\n+  --> $DIR/fallible_impl_from.rs:41:17\n    |\n-39 |         let s = s.unwrap();\n+41 |         let s = s.unwrap();\n    |                 ^^^^^^^^^^\n-40 |         if !s.is_empty() {\n-41 |             panic!(42);\n+42 |         if !s.is_empty() {\n+43 |             panic!(42);\n    |             ^^^^^^^^^^^\n-42 |         } else if s.parse::<u32>().unwrap() != 42 {\n+44 |         } else if s.parse::<u32>().unwrap() != 42 {\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n-43 |             panic!(\"{:?}\", s);\n+45 |             panic!(\"{:?}\", s);\n    |             ^^^^^^^^^^^^^^^^^^\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n \n error: consider implementing `TryFrom` instead\n-  --> $DIR/fallible_impl_from.rs:55:1\n+  --> $DIR/fallible_impl_from.rs:57:1\n    |\n-55 | / impl<'a> From<&'a mut <Box<u32> as ProjStrTrait>::ProjString> for Invalid {\n-56 | |     fn from(s: &'a mut <Box<u32> as ProjStrTrait>::ProjString) -> Invalid {\n-57 | |         if s.parse::<u32>().ok().unwrap() != 42 {\n-58 | |             panic!(\"{:?}\", s);\n+57 | / impl<'a> From<&'a mut <Box<u32> as ProjStrTrait>::ProjString> for Invalid {\n+58 | |     fn from(s: &'a mut <Box<u32> as ProjStrTrait>::ProjString) -> Invalid {\n+59 | |         if s.parse::<u32>().ok().unwrap() != 42 {\n+60 | |             panic!(\"{:?}\", s);\n ...  |\n-61 | |     }\n-62 | | }\n+63 | |     }\n+64 | | }\n    | |_^\n    |\n    = help: `From` is intended for infallible conversions only. Use `TryFrom` if there's a possibility for the conversion to fail.\n note: potential failure(s)\n-  --> $DIR/fallible_impl_from.rs:57:12\n+  --> $DIR/fallible_impl_from.rs:59:12\n    |\n-57 |         if s.parse::<u32>().ok().unwrap() != 42 {\n+59 |         if s.parse::<u32>().ok().unwrap() != 42 {\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-58 |             panic!(\"{:?}\", s);\n+60 |             panic!(\"{:?}\", s);\n    |             ^^^^^^^^^^^^^^^^^^\n    = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n "}, {"sha": "d7a50a5883827b1c235ad388c287d44f53958516", "filename": "tests/ui/filter_methods.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffilter_methods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffilter_methods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffilter_methods.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(clippy, clippy_pedantic)]\n-#![allow(missing_docs_in_private_items)]\n+#![warn(clippy::all, clippy::pedantic)]\n+#![allow(clippy::missing_docs_in_private_items)]\n \n fn main() {\n     let _: Vec<_> = vec![5; 6].into_iter()"}, {"sha": "1fde70601aaffec15ce89ddf59edf924c3ce13bb", "filename": "tests/ui/filter_methods.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffilter_methods.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffilter_methods.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffilter_methods.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -7,7 +7,7 @@ error: called `filter(p).map(q)` on an `Iterator`. This is more succinctly expre\n 10 | |                               .map(|x| x * 2)\n    | |_____________________________________________^\n    |\n-   = note: `-D filter-map` implied by `-D warnings`\n+   = note: `-D clippy::filter-map` implied by `-D warnings`\n \n error: called `filter(p).flat_map(q)` on an `Iterator`. This is more succinctly expressed by calling `.flat_map(..)` and filtering by returning an empty Iterator.\n   --> $DIR/filter_methods.rs:13:21"}, {"sha": "d5b02fb706f1c81d120f514d791096c38681d368", "filename": "tests/ui/float_cmp.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,8 +1,8 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(float_cmp)]\n-#![allow(unused, no_effect, unnecessary_operation, cast_lossless)]\n+#![warn(clippy::float_cmp)]\n+#![allow(unused, clippy::no_effect, clippy::unnecessary_operation, clippy::cast_lossless)]\n \n use std::ops::Add;\n "}, {"sha": "598ebf3366887f2863dc3a1ac0e60bb40d18038d", "filename": "tests/ui/float_cmp.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: strict comparison of f32 or f64\n 49 |     ONE as f64 != 2.0;\n    |     ^^^^^^^^^^^^^^^^^ help: consider comparing them within some error: `(ONE as f64 - 2.0).abs() < error`\n    |\n-   = note: `-D float-cmp` implied by `-D warnings`\n+   = note: `-D clippy::float-cmp` implied by `-D warnings`\n note: std::f32::EPSILON and std::f64::EPSILON are available.\n   --> $DIR/float_cmp.rs:49:5\n    |"}, {"sha": "279400604a2987e5652c1be2edad004537f805d5", "filename": "tests/ui/float_cmp_const.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp_const.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,9 +1,9 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(float_cmp_const)]\n-#![allow(float_cmp)]\n-#![allow(unused, no_effect, unnecessary_operation)]\n+#![warn(clippy::float_cmp_const)]\n+#![allow(clippy::float_cmp)]\n+#![allow(unused, clippy::no_effect, clippy::unnecessary_operation)]\n \n const ONE: f32 = 1.0;\n const TWO: f32 = 2.0;\n@@ -36,7 +36,7 @@ fn main() {\n     ONE != ::std::f32::INFINITY;\n     ONE == ::std::f32::NEG_INFINITY;\n \n-    // no errors, but will warn float_cmp if '#![allow(float_cmp)]' above is removed\n+    // no errors, but will warn clippy::float_cmp if '#![allow(float_cmp)]' above is removed\n     let w = 1.1;\n     v == w;\n     v != w;"}, {"sha": "14083979511dbafc640095397b1f020fb842a1e5", "filename": "tests/ui/float_cmp_const.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffloat_cmp_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp_const.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: strict comparison of f32 or f64 constant\n 17 |     1f32 == ONE;\n    |     ^^^^^^^^^^^ help: consider comparing them within some error: `(1f32 - ONE).abs() < error`\n    |\n-   = note: `-D float-cmp-const` implied by `-D warnings`\n+   = note: `-D clippy::float-cmp-const` implied by `-D warnings`\n note: std::f32::EPSILON and std::f64::EPSILON are available.\n   --> $DIR/float_cmp_const.rs:17:5\n    |"}, {"sha": "39eee64883c6e3c3b0fb7f845e477ab8ccd859a6", "filename": "tests/ui/for_loop.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffor_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffor_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffor_loop.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,4 @@\n-\n+#![feature(tool_lints)]\n \n \n use std::collections::*;\n@@ -7,7 +7,7 @@ use std::rc::Rc;\n static STATIC: [usize; 4] = [0, 1, 8, 16];\n const CONST: [usize; 4] = [0, 1, 8, 16];\n \n-#[warn(clippy)]\n+#[warn(clippy::all)]\n fn for_loop_over_option_and_result() {\n     let option = Some(1);\n     let result = option.ok_or(\"x not found\");\n@@ -27,7 +27,7 @@ fn for_loop_over_option_and_result() {\n         println!(\"{}\", x);\n     }\n \n-    // make sure LOOP_OVER_NEXT lint takes precedence when next() is the last call\n+    // make sure LOOP_OVER_NEXT lint takes clippy::precedence when next() is the last call\n     // in the chain\n     for x in v.iter().next() {\n         println!(\"{}\", x);\n@@ -73,11 +73,11 @@ impl Unrelated {\n     }\n }\n \n-#[warn(needless_range_loop, explicit_iter_loop, explicit_into_iter_loop, iter_next_loop, reverse_range_loop,\n-       explicit_counter_loop, for_kv_map)]\n-#[warn(unused_collect)]\n-#[allow(linkedlist, shadow_unrelated, unnecessary_mut_passed, cyclomatic_complexity, similar_names)]\n-#[allow(many_single_char_names, unused_variables)]\n+#[warn(clippy::needless_range_loop, clippy::explicit_iter_loop, clippy::explicit_into_iter_loop, clippy::iter_next_loop, clippy::reverse_range_loop,\n+       clippy::explicit_counter_loop, clippy::for_kv_map)]\n+#[warn(clippy::unused_collect)]\n+#[allow(clippy::linkedlist, clippy::shadow_unrelated, clippy::unnecessary_mut_passed, clippy::cyclomatic_complexity, clippy::similar_names)]\n+#[allow(clippy::many_single_char_names, unused_variables)]\n fn main() {\n     const MAX_LEN: usize = 42;\n \n@@ -429,7 +429,7 @@ fn main() {\n     }\n }\n \n-#[allow(used_underscore_binding)]\n+#[allow(clippy::used_underscore_binding)]\n fn test_for_kv_map() {\n     let m: HashMap<u64, u64> = HashMap::new();\n \n@@ -456,7 +456,7 @@ fn partition<T: PartialOrd + Send>(v: &mut [T]) -> usize {\n \n const LOOP_OFFSET: usize = 5000;\n \n-#[warn(needless_range_loop)]\n+#[warn(clippy::needless_range_loop)]\n pub fn manual_copy(src: &[i32], dst: &mut [i32], dst2: &mut [i32]) {\n     // plain manual memcpy\n     for i in 0..src.len() {\n@@ -542,14 +542,14 @@ pub fn manual_copy(src: &[i32], dst: &mut [i32], dst2: &mut [i32]) {\n     }\n }\n \n-#[warn(needless_range_loop)]\n+#[warn(clippy::needless_range_loop)]\n pub fn manual_clone(src: &[String], dst: &mut [String]) {\n     for i in 0..src.len() {\n         dst[i] = src[i].clone();\n     }\n }\n \n-#[warn(needless_range_loop)]\n+#[warn(clippy::needless_range_loop)]\n pub fn manual_copy_same_destination(dst: &mut [i32], d: usize, s: usize) {\n     // Same source and destination - don't trigger lint\n     for i in 0..dst.len() {"}, {"sha": "732dc2ab448bda5f2d82c8d04c9cf22497b4c5c1", "filename": "tests/ui/for_loop.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffor_loop.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffor_loop.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffor_loop.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: for loop over `option`, which is an `Option`. This is more readably writt\n 17 |     for x in option {\n    |              ^^^^^^\n    |\n-   = note: `-D for-loop-over-option` implied by `-D warnings`\n+   = note: `-D clippy::for-loop-over-option` implied by `-D warnings`\n    = help: consider replacing `for x in option` with `if let Some(x) = option`\n \n error: for loop over `result`, which is a `Result`. This is more readably written as an `if let` statement.\n@@ -13,7 +13,7 @@ error: for loop over `result`, which is a `Result`. This is more readably writte\n 22 |     for x in result {\n    |              ^^^^^^\n    |\n-   = note: `-D for-loop-over-result` implied by `-D warnings`\n+   = note: `-D clippy::for-loop-over-result` implied by `-D warnings`\n    = help: consider replacing `for x in result` with `if let Ok(x) = result`\n \n error: for loop over `option.ok_or(\"x not found\")`, which is a `Result`. This is more readably written as an `if let` statement.\n@@ -30,7 +30,7 @@ error: you are iterating over `Iterator::next()` which is an Option; this will c\n 32 |     for x in v.iter().next() {\n    |              ^^^^^^^^^^^^^^^\n    |\n-   = note: `-D iter-next-loop` implied by `-D warnings`\n+   = note: `-D clippy::iter-next-loop` implied by `-D warnings`\n \n error: for loop over `v.iter().next().and(Some(0))`, which is an `Option`. This is more readably written as an `if let` statement.\n   --> $DIR/for_loop.rs:37:14\n@@ -57,7 +57,7 @@ error: this loop never actually loops\n 56 | |     }\n    | |_____^\n    |\n-   = note: `-D never-loop` implied by `-D warnings`\n+   = note: `-D clippy::never-loop` implied by `-D warnings`\n \n error: this loop never actually loops\n   --> $DIR/for_loop.rs:59:5\n@@ -74,7 +74,7 @@ error: the loop variable `i` is only used to index `vec`.\n 86 |     for i in 0..vec.len() {\n    |              ^^^^^^^^^^^^\n    |\n-   = note: `-D needless-range-loop` implied by `-D warnings`\n+   = note: `-D clippy::needless-range-loop` implied by `-D warnings`\n help: consider using an iterator\n    |\n 86 |     for <item> in &vec {\n@@ -206,7 +206,7 @@ error: this range is empty so this for loop will never run\n 148 |     for i in 10..0 {\n     |              ^^^^^\n     |\n-    = note: `-D reverse-range-loop` implied by `-D warnings`\n+    = note: `-D clippy::reverse-range-loop` implied by `-D warnings`\n help: consider using the following if you are attempting to iterate over this range in reverse\n     |\n 148 |     for i in (0..10).rev() {\n@@ -270,7 +270,7 @@ error: it is more idiomatic to loop over references to containers instead of usi\n 215 |     for _v in vec.iter() {}\n     |               ^^^^^^^^^^ help: to write this more concisely, try: `&vec`\n     |\n-    = note: `-D explicit-iter-loop` implied by `-D warnings`\n+    = note: `-D clippy::explicit-iter-loop` implied by `-D warnings`\n \n error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n    --> $DIR/for_loop.rs:217:15\n@@ -284,7 +284,7 @@ error: it is more idiomatic to loop over containers instead of using explicit it\n 220 |     for _v in out_vec.into_iter() {}\n     |               ^^^^^^^^^^^^^^^^^^^ help: to write this more concisely, try: `out_vec`\n     |\n-    = note: `-D explicit-into-iter-loop` implied by `-D warnings`\n+    = note: `-D clippy::explicit-into-iter-loop` implied by `-D warnings`\n \n error: it is more idiomatic to loop over references to containers instead of using explicit iteration methods\n    --> $DIR/for_loop.rs:223:15\n@@ -358,15 +358,15 @@ error: you are collect()ing an iterator and throwing away the result. Consider u\n 264 |     vec.iter().cloned().map(|x| out.push(x)).collect::<Vec<_>>();\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n     |\n-    = note: `-D unused-collect` implied by `-D warnings`\n+    = note: `-D clippy::unused-collect` implied by `-D warnings`\n \n error: the variable `_index` is used as a loop counter. Consider using `for (_index, item) in &vec.enumerate()` or similar iterators\n    --> $DIR/for_loop.rs:269:15\n     |\n 269 |     for _v in &vec {\n     |               ^^^^\n     |\n-    = note: `-D explicit-counter-loop` implied by `-D warnings`\n+    = note: `-D clippy::explicit-counter-loop` implied by `-D warnings`\n \n error: the variable `_index` is used as a loop counter. Consider using `for (_index, item) in &vec.enumerate()` or similar iterators\n    --> $DIR/for_loop.rs:275:15\n@@ -380,7 +380,7 @@ error: you seem to want to iterate on a map's values\n 385 |     for (_, v) in &m {\n     |                   ^^\n     |\n-    = note: `-D for-kv-map` implied by `-D warnings`\n+    = note: `-D clippy::for-kv-map` implied by `-D warnings`\n help: use the corresponding method\n     |\n 385 |     for v in m.values() {\n@@ -432,7 +432,7 @@ error: it looks like you're manually copying between slices\n 462 |     for i in 0..src.len() {\n     |              ^^^^^^^^^^^^ help: try replacing the loop by: `dst[..src.len()].clone_from_slice(&src[..])`\n     |\n-    = note: `-D manual-memcpy` implied by `-D warnings`\n+    = note: `-D clippy::manual-memcpy` implied by `-D warnings`\n \n error: it looks like you're manually copying between slices\n    --> $DIR/for_loop.rs:467:14"}, {"sha": "8f31d92ac3cba92ebacf7f11b5601fa1b7a40205", "filename": "tests/ui/format.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformat.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,6 +1,6 @@\n-\n-#![allow(print_literal)]\n-#![warn(useless_format)]\n+#![feature(tool_lints)]\n+#![allow(clippy::print_literal)]\n+#![warn(clippy::useless_format)]\n \n struct Foo(pub String);\n "}, {"sha": "ca6ef90539618493387e2c74961fb9d62177affd", "filename": "tests/ui/format.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformat.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformat.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformat.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: useless use of `format!`\n 12 |     format!(\"foo\");\n    |     ^^^^^^^^^^^^^^^ help: consider using .to_string(): `\"foo\".to_string()`\n    |\n-   = note: `-D useless-format` implied by `-D warnings`\n+   = note: `-D clippy::useless-format` implied by `-D warnings`\n \n error: useless use of `format!`\n   --> $DIR/format.rs:14:5"}, {"sha": "74d42f08f5ad4eae3d6dd5d194e376a837117fc2", "filename": "tests/ui/formatting.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformatting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformatting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformatting.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,11 +1,11 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(clippy)]\n+#![warn(clippy::all)]\n #![allow(unused_variables)]\n #![allow(unused_assignments)]\n-#![allow(if_same_then_else)]\n-#![allow(deref_addrof)]\n+#![allow(clippy::if_same_then_else)]\n+#![allow(clippy::deref_addrof)]\n \n fn foo() -> bool { true }\n "}, {"sha": "d9fee73660c769c329761420203bfb3295476fca", "filename": "tests/ui/formatting.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformatting.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fformatting.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fformatting.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: this looks like an `else if` but the `else` is missing\n 15 |     } if foo() {\n    |      ^\n    |\n-   = note: `-D suspicious-else-formatting` implied by `-D warnings`\n+   = note: `-D clippy::suspicious-else-formatting` implied by `-D warnings`\n    = note: to remove this lint, add the missing `else` or add a new line before the second `if`\n \n error: this looks like an `else if` but the `else` is missing\n@@ -50,7 +50,7 @@ error: this looks like you are trying to use `.. -= ..`, but you really are doin\n 71 |     a =- 35;\n    |      ^^^^\n    |\n-   = note: `-D suspicious-assignment-formatting` implied by `-D warnings`\n+   = note: `-D clippy::suspicious-assignment-formatting` implied by `-D warnings`\n    = note: to remove this lint, use either `-=` or `= -`\n \n error: this looks like you are trying to use `.. *= ..`, but you really are doing `.. = (* ..)`\n@@ -75,7 +75,7 @@ error: possibly missing a comma here\n 84 |         -1, -2, -3 // <= no comma here\n    |                   ^\n    |\n-   = note: `-D possible-missing-comma` implied by `-D warnings`\n+   = note: `-D clippy::possible-missing-comma` implied by `-D warnings`\n    = note: to remove this lint, add a comma or write the expr in a single line\n \n error: possibly missing a comma here"}, {"sha": "ab5ce5b06d842d1374a701046315ffc094236b00", "filename": "tests/ui/functions.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffunctions.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,7 +1,7 @@\n+#![feature(tool_lints)]\n \n \n-\n-#![warn(clippy)]\n+#![warn(clippy::all)]\n #![allow(dead_code)]\n #![allow(unused_unsafe)]\n "}, {"sha": "c2f7b76aab4d1fb71497bf82ff7bca5491485510", "filename": "tests/ui/functions.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffunctions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffunctions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffunctions.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -5,7 +5,7 @@ error: this function has too many arguments (8/7)\n 12 | | }\n    | |_^\n    |\n-   = note: `-D too-many-arguments` implied by `-D warnings`\n+   = note: `-D clippy::too-many-arguments` implied by `-D warnings`\n \n error: this function has too many arguments (8/7)\n   --> $DIR/functions.rs:19:5\n@@ -25,7 +25,7 @@ error: this public function dereferences a raw pointer but is not marked `unsafe\n 37 |         println!(\"{}\", unsafe { *p });\n    |                                  ^\n    |\n-   = note: `-D not-unsafe-ptr-arg-deref` implied by `-D warnings`\n+   = note: `-D clippy::not-unsafe-ptr-arg-deref` implied by `-D warnings`\n \n error: this public function dereferences a raw pointer but is not marked `unsafe`\n   --> $DIR/functions.rs:38:35"}, {"sha": "1376b9442b68c2c4ff8ff04c71362b821a6aa5aa", "filename": "tests/ui/fxhash.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffxhash.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffxhash.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffxhash.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![warn(default_hash_types)]\n+#![feature(tool_lints)]\n+\n+#![warn(clippy::default_hash_types)]\n #![feature(rustc_private)]\n \n extern crate rustc_data_structures;"}, {"sha": "869a315c9eb3fb067b502e3661847895679c1785", "filename": "tests/ui/fxhash.stderr", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffxhash.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Ffxhash.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffxhash.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,39 +1,39 @@\n error: Prefer FxHashMap over HashMap, it has better performance and we don't need any collision prevention in clippy\n- --> $DIR/fxhash.rs:6:24\n+ --> $DIR/fxhash.rs:8:24\n   |\n-6 | use std::collections::{HashMap, HashSet};\n+8 | use std::collections::{HashMap, HashSet};\n   |                        ^^^^^^^ help: use: `FxHashMap`\n   |\n-  = note: `-D default-hash-types` implied by `-D warnings`\n+  = note: `-D clippy::default-hash-types` implied by `-D warnings`\n \n error: Prefer FxHashSet over HashSet, it has better performance and we don't need any collision prevention in clippy\n- --> $DIR/fxhash.rs:6:33\n+ --> $DIR/fxhash.rs:8:33\n   |\n-6 | use std::collections::{HashMap, HashSet};\n+8 | use std::collections::{HashMap, HashSet};\n   |                                 ^^^^^^^ help: use: `FxHashSet`\n \n error: Prefer FxHashMap over HashMap, it has better performance and we don't need any collision prevention in clippy\n-  --> $DIR/fxhash.rs:10:15\n+  --> $DIR/fxhash.rs:12:15\n    |\n-10 |     let _map: HashMap<String, String> = HashMap::default();\n+12 |     let _map: HashMap<String, String> = HashMap::default();\n    |               ^^^^^^^ help: use: `FxHashMap`\n \n error: Prefer FxHashMap over HashMap, it has better performance and we don't need any collision prevention in clippy\n-  --> $DIR/fxhash.rs:10:41\n+  --> $DIR/fxhash.rs:12:41\n    |\n-10 |     let _map: HashMap<String, String> = HashMap::default();\n+12 |     let _map: HashMap<String, String> = HashMap::default();\n    |                                         ^^^^^^^ help: use: `FxHashMap`\n \n error: Prefer FxHashSet over HashSet, it has better performance and we don't need any collision prevention in clippy\n-  --> $DIR/fxhash.rs:11:15\n+  --> $DIR/fxhash.rs:13:15\n    |\n-11 |     let _set: HashSet<String> = HashSet::default();\n+13 |     let _set: HashSet<String> = HashSet::default();\n    |               ^^^^^^^ help: use: `FxHashSet`\n \n error: Prefer FxHashSet over HashSet, it has better performance and we don't need any collision prevention in clippy\n-  --> $DIR/fxhash.rs:11:33\n+  --> $DIR/fxhash.rs:13:33\n    |\n-11 |     let _set: HashSet<String> = HashSet::default();\n+13 |     let _set: HashSet<String> = HashSet::default();\n    |                                 ^^^^^^^ help: use: `FxHashSet`\n \n error: aborting due to 6 previous errors"}, {"sha": "63f6603c821e1ecc2ee43c379cad0050f9de6939", "filename": "tests/ui/get_unwrap.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fget_unwrap.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fget_unwrap.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fget_unwrap.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -4,7 +4,7 @@ error: called `.get().unwrap()` on a slice. Using `[]` is more clear and more co\n 27 |         let _ = boxed_slice.get(1).unwrap();\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try this: `&boxed_slice[1]`\n    |\n-   = note: `-D get-unwrap` implied by `-D warnings`\n+   = note: `-D clippy::get-unwrap` implied by `-D warnings`\n \n error: called `.get().unwrap()` on a slice. Using `[]` is more clear and more concise\n   --> $DIR/get_unwrap.rs:28:17"}, {"sha": "b9ad8d06ad50099e579198c044ffd6136dc51591", "filename": "tests/ui/identity_conversion.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fidentity_conversion.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,4 +1,6 @@\n-#![deny(identity_conversion)]\n+#![feature(tool_lints)]\n+\n+#![deny(clippy::identity_conversion)]\n \n fn test_generic<T: Copy>(val: T) -> T {\n     let _ = T::from(val);\n@@ -28,7 +30,7 @@ fn main() {\n     let _: String = \"foo\".into();\n     let _: String = From::from(\"foo\");\n     let _ = String::from(\"foo\");\n-    #[allow(identity_conversion)]\n+    #[allow(clippy::identity_conversion)]\n     {\n         let _: String = \"foo\".into();\n         let _ = String::from(\"foo\");"}, {"sha": "ffcd3649ad650e0ac821763c3d3729219fcd2367", "filename": "tests/ui/identity_conversion.stderr", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_conversion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_conversion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fidentity_conversion.stderr?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,61 +1,61 @@\n error: identical conversion\n- --> $DIR/identity_conversion.rs:4:13\n+ --> $DIR/identity_conversion.rs:6:13\n   |\n-4 |     let _ = T::from(val);\n+6 |     let _ = T::from(val);\n   |             ^^^^^^^^^^^^ help: consider removing `T::from()`: `val`\n   |\n note: lint level defined here\n- --> $DIR/identity_conversion.rs:1:9\n+ --> $DIR/identity_conversion.rs:3:9\n   |\n-1 | #![deny(identity_conversion)]\n-  |         ^^^^^^^^^^^^^^^^^^^\n+3 | #![deny(clippy::identity_conversion)]\n+  |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: identical conversion\n- --> $DIR/identity_conversion.rs:5:5\n+ --> $DIR/identity_conversion.rs:7:5\n   |\n-5 |     val.into()\n+7 |     val.into()\n   |     ^^^^^^^^^^ help: consider removing `.into()`: `val`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:17:22\n+  --> $DIR/identity_conversion.rs:19:22\n    |\n-17 |         let _: i32 = 0i32.into();\n+19 |         let _: i32 = 0i32.into();\n    |                      ^^^^^^^^^^^ help: consider removing `.into()`: `0i32`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:38:21\n+  --> $DIR/identity_conversion.rs:40:21\n    |\n-38 |     let _: String = \"foo\".to_string().into();\n+40 |     let _: String = \"foo\".to_string().into();\n    |                     ^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into()`: `\"foo\".to_string()`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:39:21\n+  --> $DIR/identity_conversion.rs:41:21\n    |\n-39 |     let _: String = From::from(\"foo\".to_string());\n+41 |     let _: String = From::from(\"foo\".to_string());\n    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `From::from()`: `\"foo\".to_string()`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:40:13\n+  --> $DIR/identity_conversion.rs:42:13\n    |\n-40 |     let _ = String::from(\"foo\".to_string());\n+42 |     let _ = String::from(\"foo\".to_string());\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `String::from()`: `\"foo\".to_string()`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:41:13\n+  --> $DIR/identity_conversion.rs:43:13\n    |\n-41 |     let _ = String::from(format!(\"A: {:04}\", 123));\n+43 |     let _ = String::from(format!(\"A: {:04}\", 123));\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `String::from()`: `format!(\"A: {:04}\", 123)`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:42:13\n+  --> $DIR/identity_conversion.rs:44:13\n    |\n-42 |     let _ = \"\".lines().into_iter();\n+44 |     let _ = \"\".lines().into_iter();\n    |             ^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into_iter()`: `\"\".lines()`\n \n error: identical conversion\n-  --> $DIR/identity_conversion.rs:43:13\n+  --> $DIR/identity_conversion.rs:45:13\n    |\n-43 |     let _ = vec![1, 2, 3].into_iter().into_iter();\n+45 |     let _ = vec![1, 2, 3].into_iter().into_iter();\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: consider removing `.into_iter()`: `vec![1, 2, 3].into_iter()`\n \n error: aborting due to 9 previous errors"}, {"sha": "ae8c66faa416c42bd28af0f7e72291421bc8d71e", "filename": "tests/ui/identity_op.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f0216d52070faeb4f49b7a7f1c898b8f053622f/tests%2Fui%2Fidentity_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fidentity_op.rs?ref=9f0216d52070faeb4f49b7a7f1c898b8f053622f", "patch": "@@ -1,12 +1,12 @@\n-\n+#![feature(tool_lints)]\n \n \n const ONE : i64 = 1;\n const NEG_ONE : i64 = -1;\n const ZERO : i64 = 0;\n \n-#[allow(eq_op, no_effect, unnecessary_operation, double_parens)]\n-#[warn(identity_op)]\n+#[allow(clippy::eq_op, clippy::no_effect, clippy::unnecessary_operation, clippy::double_parens)]\n+#[warn(clippy::identity_op)]\n fn main() {\n     let x = 0;\n "}]}