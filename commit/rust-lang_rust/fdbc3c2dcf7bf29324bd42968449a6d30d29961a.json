{"sha": "fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "node_id": "C_kwDOAAsO6NoAKGZkYmMzYzJkY2Y3YmYyOTMyNGJkNDI5Njg0NDlhNmQzMGQyOTk2MWE", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-02-21T13:22:46Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-02-27T11:19:02Z"}, "message": "Allow building serde and serde_derive in parallel\n\nThis reduces build time of bootstrap by ~6s", "tree": {"sha": "0dbde964bb6a51656c2b3bc03aee376224fadac8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0dbde964bb6a51656c2b3bc03aee376224fadac8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "html_url": "https://github.com/rust-lang/rust/commit/fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bda32a4023b1d3f96e56e1b2fc7510324f430316", "url": "https://api.github.com/repos/rust-lang/rust/commits/bda32a4023b1d3f96e56e1b2fc7510324f430316", "html_url": "https://github.com/rust-lang/rust/commit/bda32a4023b1d3f96e56e1b2fc7510324f430316"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "e861d520c5343006ac24a5da58fb42d72485e363", "filename": "src/bootstrap/Cargo.lock", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.lock?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -50,6 +50,7 @@ dependencies = [\n  \"opener\",\n  \"pretty_assertions\",\n  \"serde\",\n+ \"serde_derive\",\n  \"serde_json\",\n  \"sha2\",\n  \"sysinfo\",\n@@ -564,9 +565,6 @@ name = \"serde\"\n version = \"1.0.137\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"61ea8d54c77f8315140a05f4c7237403bf38b72704d031543aa1d16abbf517d1\"\n-dependencies = [\n- \"serde_derive\",\n-]\n \n [[package]]\n name = \"serde_derive\""}, {"sha": "663987f113c8bb9845f9f793cda46eb42e7fcc12", "filename": "src/bootstrap/Cargo.toml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.toml?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -39,7 +39,10 @@ cc = \"1.0.69\"\n libc = \"0.2\"\n hex = \"0.4\"\n object = { version = \"0.29.0\", default-features = false, features = [\"archive\", \"coff\", \"read_core\", \"unaligned\"] }\n-serde = { version = \"1.0.8\", features = [\"derive\"] }\n+serde = \"1.0.137\"\n+# Directly use serde_derive rather than through the derive feature of serde to allow building both\n+# in parallel and to allow serde_json and toml to start building as soon as serde has been built.\n+serde_derive = \"1.0.137\"\n serde_json = \"1.0.2\"\n sha2 = \"0.10\"\n tar = \"0.4\""}, {"sha": "9956aad8b9943938f26b25f7336c3c865a8a934b", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -16,7 +16,7 @@ use std::path::{Path, PathBuf};\n use std::process::{Command, Stdio};\n use std::str;\n \n-use serde::Deserialize;\n+use serde_derive::Deserialize;\n \n use crate::builder::crate_description;\n use crate::builder::Cargo;"}, {"sha": "73a25fdbdc8f6fc9fc329b1b3e54f6e8df8f39e3", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -25,6 +25,7 @@ use crate::flags::{Color, Flags};\n use crate::util::{exe, output, t};\n use once_cell::sync::OnceCell;\n use serde::{Deserialize, Deserializer};\n+use serde_derive::Deserialize;\n \n macro_rules! check_ci_llvm {\n     ($name:expr) => {"}, {"sha": "c064dbebf388a51f3e7ca0609b3598703d35c4a9", "filename": "src/bootstrap/format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fformat.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -87,7 +87,7 @@ fn get_modified_rs_files(build: &Builder<'_>) -> Result<Option<Vec<String>>, Str\n     get_git_modified_files(Some(&build.config.src), &vec![\"rs\"])\n }\n \n-#[derive(serde::Deserialize)]\n+#[derive(serde_derive::Deserialize)]\n struct RustfmtConfig {\n     ignore: Vec<String>,\n }"}, {"sha": "bba4d65e8c31840e14ee1c9ecff698d78267a0a6", "filename": "src/bootstrap/metadata.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmetadata.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -1,7 +1,7 @@\n use std::path::PathBuf;\n use std::process::Command;\n \n-use serde::Deserialize;\n+use serde_derive::Deserialize;\n \n use crate::cache::INTERNER;\n use crate::util::output;"}, {"sha": "2e62c950709dfd4680280cd3da57993b47076412", "filename": "src/bootstrap/metrics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fmetrics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Fmetrics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmetrics.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -7,7 +7,7 @@\n use crate::builder::Step;\n use crate::util::t;\n use crate::Build;\n-use serde::{Deserialize, Serialize};\n+use serde_derive::{Deserialize, Serialize};\n use std::cell::RefCell;\n use std::fs::File;\n use std::io::BufWriter;"}, {"sha": "7aab88a1a7364200aca92e9a02ff70d5ffb00565", "filename": "src/bootstrap/toolstate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Ftoolstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdbc3c2dcf7bf29324bd42968449a6d30d29961a/src%2Fbootstrap%2Ftoolstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftoolstate.rs?ref=fdbc3c2dcf7bf29324bd42968449a6d30d29961a", "patch": "@@ -1,6 +1,6 @@\n use crate::builder::{Builder, RunConfig, ShouldRun, Step};\n use crate::util::t;\n-use serde::{Deserialize, Serialize};\n+use serde_derive::{Deserialize, Serialize};\n use std::collections::HashMap;\n use std::env;\n use std::fmt;"}]}