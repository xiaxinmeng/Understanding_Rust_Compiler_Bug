{"sha": "8d6fef674dccae39f52aabfe0f77503f2d7fe464", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkNmZlZjY3NGRjY2FlMzlmNTJhYWJmZTBmNzc1MDNmMmQ3ZmU0NjQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-02-14T05:51:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-02-14T05:51:52Z"}, "message": "auto merge of #12256 : brson/rust/android, r=alexcrichton\n\nAndroid bot has been having some problems. A few details in the commits.", "tree": {"sha": "e4e5786105023146970b14298abdf1c85209be0c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4e5786105023146970b14298abdf1c85209be0c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d6fef674dccae39f52aabfe0f77503f2d7fe464", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d6fef674dccae39f52aabfe0f77503f2d7fe464", "html_url": "https://github.com/rust-lang/rust/commit/8d6fef674dccae39f52aabfe0f77503f2d7fe464", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d6fef674dccae39f52aabfe0f77503f2d7fe464/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "22c34f3c4cddea33b916eb92f8d7286b02b865a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/22c34f3c4cddea33b916eb92f8d7286b02b865a7", "html_url": "https://github.com/rust-lang/rust/commit/22c34f3c4cddea33b916eb92f8d7286b02b865a7"}, {"sha": "67841793522889a9cbcb93ab066ff3b744499e7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/67841793522889a9cbcb93ab066ff3b744499e7d", "html_url": "https://github.com/rust-lang/rust/commit/67841793522889a9cbcb93ab066ff3b744499e7d"}], "stats": {"total": 26, "additions": 7, "deletions": 19}, "files": [{"sha": "970ee535e0badb33ef6a1dd61d7de797b2757dc5", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8d6fef674dccae39f52aabfe0f77503f2d7fe464/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d6fef674dccae39f52aabfe0f77503f2d7fe464/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=8d6fef674dccae39f52aabfe0f77503f2d7fe464", "patch": "@@ -219,12 +219,14 @@ pub fn run_tests(config: &config) {\n             mode_debug_info => {\n                 println!(\"arm-linux-androideabi debug-info \\\n                          test uses tcp 5039 port. please reserve it\");\n-                //arm-linux-androideabi debug-info test uses remote debugger\n-                //so, we test 1 task at once\n-                os::setenv(\"RUST_TEST_TASKS\",\"1\");\n             }\n             _ =>{}\n         }\n+\n+        //arm-linux-androideabi debug-info test uses remote debugger\n+        //so, we test 1 task at once.\n+        // also trying to isolate problems with adb_run_wrapper.sh ilooping\n+        os::setenv(\"RUST_TEST_TASKS\",\"1\");\n     }\n \n     let opts = test_opts(config);"}, {"sha": "81f086fdabd6121d40071265590d9268b1381ada", "filename": "src/etc/adb_run_wrapper.sh", "status": "modified", "additions": 2, "deletions": 16, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/8d6fef674dccae39f52aabfe0f77503f2d7fe464/src%2Fetc%2Fadb_run_wrapper.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8d6fef674dccae39f52aabfe0f77503f2d7fe464/src%2Fetc%2Fadb_run_wrapper.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fadb_run_wrapper.sh?ref=8d6fef674dccae39f52aabfe0f77503f2d7fe464", "patch": "@@ -2,9 +2,6 @@\n # usage : adb_run_wrapper [test dir - where test executables exist] [test executable]\n #\n \n-# Sometimes android shell produce exitcode \"1 : Text File Busy\"\n-# Retry after $WAIT seconds, expecting resource cleaned-up\n-WAIT=10\n TEST_PATH=$1\n BIN_PATH=/system/bin\n if [ -d \"$TEST_PATH\" ]\n@@ -16,20 +13,9 @@ then\n     then\n         shift\n \n-        L_RET=1\n-        L_COUNT=0\n         cd $TEST_PATH\n-        while [ $L_RET -eq 1 ]\n-        do\n-            TEST_EXEC_ENV=22 LD_LIBRARY_PATH=$TEST_PATH PATH=$BIN_PATH:$TEST_PATH $TEST_PATH/$RUN $@ 1>$TEST_PATH/$RUN.stdout 2>$TEST_PATH/$RUN.stderr\n-            L_RET=$?\n-            if [ $L_COUNT -gt 0 ]\n-            then\n-               /system/bin/sleep $WAIT\n-               /system/bin/sync\n-            fi\n-            L_COUNT=$((L_COUNT+1))\n-        done\n+        TEST_EXEC_ENV=22 LD_LIBRARY_PATH=$TEST_PATH PATH=$BIN_PATH:$TEST_PATH $TEST_PATH/$RUN $@ 1>$TEST_PATH/$RUN.stdout 2>$TEST_PATH/$RUN.stderr\n+        L_RET=$?\n \n         echo $L_RET > $TEST_PATH/$RUN.exitcode\n "}]}