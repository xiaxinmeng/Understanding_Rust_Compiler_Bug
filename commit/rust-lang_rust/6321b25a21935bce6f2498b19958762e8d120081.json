{"sha": "6321b25a21935bce6f2498b19958762e8d120081", "node_id": "C_kwDOAAsO6NoAKDYzMjFiMjVhMjE5MzViY2U2ZjI0OThiMTk5NTg3NjJlOGQxMjAwODE", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2023-01-30T16:52:15Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2023-01-30T16:52:15Z"}, "message": "Apply the assist to itself", "tree": {"sha": "5e41d21ba1f6597c80fce0dc6262b55dbfabfce9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e41d21ba1f6597c80fce0dc6262b55dbfabfce9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6321b25a21935bce6f2498b19958762e8d120081", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6321b25a21935bce6f2498b19958762e8d120081", "html_url": "https://github.com/rust-lang/rust/commit/6321b25a21935bce6f2498b19958762e8d120081", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6321b25a21935bce6f2498b19958762e8d120081/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f20804b6e54d90226e1d82253676648ca8be8da", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f20804b6e54d90226e1d82253676648ca8be8da", "html_url": "https://github.com/rust-lang/rust/commit/1f20804b6e54d90226e1d82253676648ca8be8da"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "65c2479e9f29bb8ba560bc05bf686f1bf40eae3e", "filename": "crates/ide-assists/src/handlers/convert_match_to_let_else.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6321b25a21935bce6f2498b19958762e8d120081/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fconvert_match_to_let_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6321b25a21935bce6f2498b19958762e8d120081/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fconvert_match_to_let_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fconvert_match_to_let_else.rs?ref=6321b25a21935bce6f2498b19958762e8d120081", "patch": "@@ -32,16 +32,10 @@ pub(crate) fn convert_match_to_let_else(acc: &mut Assists, ctx: &AssistContext<'\n     let let_stmt: ast::LetStmt = ctx.find_node_at_offset()?;\n     let binding = let_stmt.pat()?;\n \n-    let initializer = match let_stmt.initializer() {\n-        Some(ast::Expr::MatchExpr(it)) => it,\n-        _ => return None,\n-    };\n+    let Some(ast::Expr::MatchExpr(initializer)) = let_stmt.initializer() else { return None };\n     let initializer_expr = initializer.expr()?;\n \n-    let (extracting_arm, diverging_arm) = match find_arms(ctx, &initializer) {\n-        Some(it) => it,\n-        None => return None,\n-    };\n+    let Some((extracting_arm, diverging_arm)) = find_arms(ctx, &initializer) else { return None };\n     if extracting_arm.guard().is_some() {\n         cov_mark::hit!(extracting_arm_has_guard);\n         return None;"}]}