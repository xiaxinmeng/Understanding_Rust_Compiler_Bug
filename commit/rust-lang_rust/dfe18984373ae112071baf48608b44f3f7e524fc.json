{"sha": "dfe18984373ae112071baf48608b44f3f7e524fc", "node_id": "C_kwDOAAsO6NoAKGRmZTE4OTg0MzczYWUxMTIwNzFiYWY0ODYwOGI0NGYzZjdlNTI0ZmM", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-12-28T16:49:03Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-12-28T17:01:20Z"}, "message": "no need to do a no_std build for wasi", "tree": {"sha": "b923c60919a16a2edfe7660a3aff0482bb4182bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b923c60919a16a2edfe7660a3aff0482bb4182bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dfe18984373ae112071baf48608b44f3f7e524fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dfe18984373ae112071baf48608b44f3f7e524fc", "html_url": "https://github.com/rust-lang/rust/commit/dfe18984373ae112071baf48608b44f3f7e524fc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dfe18984373ae112071baf48608b44f3f7e524fc/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40d65f01523b9eff6921f3b2d40c22a87affdc62", "url": "https://api.github.com/repos/rust-lang/rust/commits/40d65f01523b9eff6921f3b2d40c22a87affdc62", "html_url": "https://github.com/rust-lang/rust/commit/40d65f01523b9eff6921f3b2d40c22a87affdc62"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "b35f7370d68a57743803d427aa2cd5e7841cdd29", "filename": "src/tools/miri/ci.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dfe18984373ae112071baf48608b44f3f7e524fc/src%2Ftools%2Fmiri%2Fci.sh", "raw_url": "https://github.com/rust-lang/rust/raw/dfe18984373ae112071baf48608b44f3f7e524fc/src%2Ftools%2Fmiri%2Fci.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fci.sh?ref=dfe18984373ae112071baf48608b44f3f7e524fc", "patch": "@@ -108,7 +108,7 @@ case $HOST_TARGET in\n     MIRI_TEST_TARGET=i686-pc-windows-msvc run_tests\n     MIRI_TEST_TARGET=x86_64-unknown-freebsd run_tests_minimal hello integer vec panic/panic concurrency/simple atomic data_race env/var\n     MIRI_TEST_TARGET=aarch64-linux-android run_tests_minimal hello integer vec panic/panic\n-    MIRI_TEST_TARGET=wasm32-wasi MIRI_NO_STD=1 run_tests_minimal no_std # supports std but miri doesn't support it\n+    MIRI_TEST_TARGET=wasm32-wasi run_tests_minimal no_std integer\n     MIRI_TEST_TARGET=thumbv7em-none-eabihf MIRI_NO_STD=1 run_tests_minimal no_std # no_std embedded architecture\n     MIRI_TEST_TARGET=tests/avr.json MIRI_NO_STD=1 run_tests_minimal no_std # JSON target file\n     ;;"}, {"sha": "1df35bbbe2f9510d00e7799fb5915775dc183203", "filename": "src/tools/miri/test_dependencies/Cargo.toml", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/dfe18984373ae112071baf48608b44f3f7e524fc/src%2Ftools%2Fmiri%2Ftest_dependencies%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dfe18984373ae112071baf48608b44f3f7e524fc/src%2Ftools%2Fmiri%2Ftest_dependencies%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftest_dependencies%2FCargo.toml?ref=dfe18984373ae112071baf48608b44f3f7e524fc", "patch": "@@ -9,13 +9,15 @@ edition = \"2021\"\n \n [dependencies]\n # all dependencies (and their transitive ones) listed here can be used in `tests/`.\n-tokio = { version = \"1.0\", features = [\"full\"] }\n libc = \"0.2\"\n-page_size = \"0.5\"\n num_cpus = \"1.10.1\"\n \n getrandom_1 = { package = \"getrandom\", version = \"0.1\" }\n getrandom = { version = \"0.2\" }\n rand = { version = \"0.8\", features = [\"small_rng\"] }\n \n+[target.'cfg(not(any(target_arch = \"wasm32\", target_arch = \"wasm64\")))'.dependencies]\n+page_size = \"0.5\"\n+tokio = { version = \"1.0\", features = [\"full\"] }\n+\n [workspace]"}]}