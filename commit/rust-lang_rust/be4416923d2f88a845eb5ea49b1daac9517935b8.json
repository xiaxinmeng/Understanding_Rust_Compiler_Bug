{"sha": "be4416923d2f88a845eb5ea49b1daac9517935b8", "node_id": "C_kwDOAAsO6NoAKGJlNDQxNjkyM2QyZjg4YTg0NWViNWVhNDliMWRhYWM5NTE3OTM1Yjg", "commit": {"author": {"name": "Tom Martin", "email": "tom.martin1239@gmail.com", "date": "2023-04-06T17:02:52Z"}, "committer": {"name": "Tom Martin", "email": "tom.martin1239@gmail.com", "date": "2023-04-06T17:02:52Z"}, "message": "Collapse if statements, change message to lowercase", "tree": {"sha": "a0572ee129edaa7a9ab380d0edf1e56d02272fbf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0572ee129edaa7a9ab380d0edf1e56d02272fbf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be4416923d2f88a845eb5ea49b1daac9517935b8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE4EiFxdccn1fd6ae9c6cz+WKfWsUFAmQu+2AACgkQc6cz+WKf\nWsW6Ng/9G+naArewtf9Izm2BRQj1LV71RAm54ADvVjJ0TZ2SqQtJk5juqh86VnYt\nKuOzfemu7zjvQVy+FwIhiAkRFuOcOK+NjJ3Jr2noMSeElg34CQNaMZy1SXTQalmk\n7/xFpTZSoksZpxyXqNTn123QyP9SuVIPNjf1E6rAbUqlwU5s6xCdXBGIzwEHEm9h\numqBSMNPNrgqYMF5/5k6ldkSTsHZjDU9OXCGsuR/dtf8UWZFAWz0AKB81w/uDkaI\nJPGaZFVkC5lABftRInZnH4dLXqejoIAn0vGc60Fz63rwy3j5rFFAH39g9Cepxyfk\nH4mFhfqA/drVx7KXX/pZxbCvquAIOqtFvCPCEAekblQHIUS0fxiyM3eKkEU7HHGz\n/+1vExbiQ4pnx+VFFcGokbfWv84e9prRu6GO9EokF7lKS7rsLfNFtA65KxEV85aC\ncaQU1a8fArHUKm5f211udx5gIzOW6U26JFmXUtHvAQnoUlJG8hDraD7Uq7M7gtri\ngJZ3RxClklE/ZM0neSOG+i/kmI/9eNIYJAxrhqSm4X37TBvZZ/pTmSrfkvxRg3ka\nGuL3WX/B6ChNzhYT9pa+/QtNpl32JV1i97rWCVMiRjytCa2UtHt9Y1F/1m3X6M5U\nQf1Vx+VwBF9LSfV8Dh0Vuz9BNV9Z4TywsLdHT7mTpe39cpVNTYI=\n=xLMs\n-----END PGP SIGNATURE-----", "payload": "tree a0572ee129edaa7a9ab380d0edf1e56d02272fbf\nparent 56207b8fafac6f6697751084f0914e1dbc0381ce\nauthor Tom Martin <tom.martin1239@gmail.com> 1680800572 +0100\ncommitter Tom Martin <tom.martin1239@gmail.com> 1680800572 +0100\n\nCollapse if statements, change message to lowercase\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be4416923d2f88a845eb5ea49b1daac9517935b8", "html_url": "https://github.com/rust-lang/rust/commit/be4416923d2f88a845eb5ea49b1daac9517935b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be4416923d2f88a845eb5ea49b1daac9517935b8/comments", "author": {"login": "NotStirred", "id": 16853282, "node_id": "MDQ6VXNlcjE2ODUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/16853282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotStirred", "html_url": "https://github.com/NotStirred", "followers_url": "https://api.github.com/users/NotStirred/followers", "following_url": "https://api.github.com/users/NotStirred/following{/other_user}", "gists_url": "https://api.github.com/users/NotStirred/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotStirred/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotStirred/subscriptions", "organizations_url": "https://api.github.com/users/NotStirred/orgs", "repos_url": "https://api.github.com/users/NotStirred/repos", "events_url": "https://api.github.com/users/NotStirred/events{/privacy}", "received_events_url": "https://api.github.com/users/NotStirred/received_events", "type": "User", "site_admin": false}, "committer": {"login": "NotStirred", "id": 16853282, "node_id": "MDQ6VXNlcjE2ODUzMjgy", "avatar_url": "https://avatars.githubusercontent.com/u/16853282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NotStirred", "html_url": "https://github.com/NotStirred", "followers_url": "https://api.github.com/users/NotStirred/followers", "following_url": "https://api.github.com/users/NotStirred/following{/other_user}", "gists_url": "https://api.github.com/users/NotStirred/gists{/gist_id}", "starred_url": "https://api.github.com/users/NotStirred/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NotStirred/subscriptions", "organizations_url": "https://api.github.com/users/NotStirred/orgs", "repos_url": "https://api.github.com/users/NotStirred/repos", "events_url": "https://api.github.com/users/NotStirred/events{/privacy}", "received_events_url": "https://api.github.com/users/NotStirred/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "56207b8fafac6f6697751084f0914e1dbc0381ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/56207b8fafac6f6697751084f0914e1dbc0381ce", "html_url": "https://github.com/rust-lang/rust/commit/56207b8fafac6f6697751084f0914e1dbc0381ce"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "ed479d289d78e1f4dd2f70223597c99512e51b2c", "filename": "compiler/rustc_resolve/src/macros.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/be4416923d2f88a845eb5ea49b1daac9517935b8/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be4416923d2f88a845eb5ea49b1daac9517935b8/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs?ref=be4416923d2f88a845eb5ea49b1daac9517935b8", "patch": "@@ -548,12 +548,13 @@ impl<'a, 'tcx> Resolver<'a, 'tcx> {\n \n             err.span_label(path.span, format!(\"not {} {}\", article, expected));\n \n-            if !path.span.from_expansion() {\n-                // Suggest moving the macro out of the derive() as the macro isn't Derive\n-                if kind == MacroKind::Derive && ext.macro_kind() != MacroKind::Derive {\n-                    err.span_help(path.span, \"Remove from the surrounding `derive()`\");\n-                    err.help(format!(\"Add as non-Derive macro\\n`#[{}]`\", path_str));\n-                }\n+            // Suggest moving the macro out of the derive() as the macro isn't Derive\n+            if !path.span.from_expansion()\n+                && kind == MacroKind::Derive\n+                && ext.macro_kind() != MacroKind::Derive\n+            {\n+                err.span_help(path.span, \"remove from the surrounding `derive()`\");\n+                err.help(format!(\"add as non-Derive macro\\n`#[{}]`\", path_str));\n             }\n \n             err.emit();"}]}