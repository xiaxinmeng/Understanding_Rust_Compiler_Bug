{"sha": "bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhZDhmMGJkOTcxYmMzZDIwMzcyNDA5MGVmMzgyZWY3OGEyYTBkM2M=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-04-08T16:37:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-08T16:37:30Z"}, "message": "Rollup merge of #70915 - tsandstr:remove-nominal-flags, r=eddyb\n\nRemove unnecessary TypeFlags::NOMINAL_FLAGS\n\nThis was a relic from when we had \"nominal flags\" and \"cached\nproperties.\" The latter no longer exists, so nominal flags are no\nlonger necessary. In fact, every flag is considered a nominal flag. I\nwent ahead and removed all references to NOMINAL_FLAGS.\n\nFixes rust-lang#70836", "tree": {"sha": "2403b99f992262f301aa4dbd6667ff176f6b2c3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2403b99f992262f301aa4dbd6667ff176f6b2c3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJejf3KCRBK7hj4Ov3rIwAAdHIIAKKdcDrAgKicJWMtjy4QlD3Z\nKh+jtNW+96DIlHtYMhV9YaA/zOhJD/VnGYoLOLLakCFKj2vTTal43+nE6vPYHC3U\nY7adrb7nyZ22OCWqdsJrQMz3S+i5IJ94wE8k9cK3Ry1EG3TrYn3Z1zzBWi6rPqHV\nNx5xwo2tzJF8vI5yzRjIMl7aHXGaa5HnIyACG8mGTtwUhkqz2Midubo8km40rqjN\n8ABAnlEozlBlGcPDgCLWt58UrmBolAgiv/4am/SxgyBwcarOLn2oQ3v+I3kpjxmJ\nhdhkr6+Jj3mbth6qcZ1C+4cpGZ9144rD4/twzKDLC6xct9QKi5GAAxA1TXrrmSA=\n=i/r/\n-----END PGP SIGNATURE-----\n", "payload": "tree 2403b99f992262f301aa4dbd6667ff176f6b2c3b\nparent 9a84771a2332e66996d33de64e7e2b817451f662\nparent 4cdb2065eff17ffbaa72181b63ff2827ef76720c\nauthor Dylan DPC <dylan.dpc@gmail.com> 1586363850 +0200\ncommitter GitHub <noreply@github.com> 1586363850 +0200\n\nRollup merge of #70915 - tsandstr:remove-nominal-flags, r=eddyb\n\nRemove unnecessary TypeFlags::NOMINAL_FLAGS\n\nThis was a relic from when we had \"nominal flags\" and \"cached\nproperties.\" The latter no longer exists, so nominal flags are no\nlonger necessary. In fact, every flag is considered a nominal flag. I\nwent ahead and removed all references to NOMINAL_FLAGS.\n\nFixes rust-lang#70836\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "html_url": "https://github.com/rust-lang/rust/commit/bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bad8f0bd971bc3d203724090ef382ef78a2a0d3c/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a84771a2332e66996d33de64e7e2b817451f662", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a84771a2332e66996d33de64e7e2b817451f662", "html_url": "https://github.com/rust-lang/rust/commit/9a84771a2332e66996d33de64e7e2b817451f662"}, {"sha": "4cdb2065eff17ffbaa72181b63ff2827ef76720c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4cdb2065eff17ffbaa72181b63ff2827ef76720c", "html_url": "https://github.com/rust-lang/rust/commit/4cdb2065eff17ffbaa72181b63ff2827ef76720c"}], "stats": {"total": 25, "additions": 1, "deletions": 24}, "files": [{"sha": "7c3c96348b558433e15b2f3c18d43ff5105ae469", "filename": "src/librustc_middle/ty/flags.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bad8f0bd971bc3d203724090ef382ef78a2a0d3c/src%2Flibrustc_middle%2Fty%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bad8f0bd971bc3d203724090ef382ef78a2a0d3c/src%2Flibrustc_middle%2Fty%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fflags.rs?ref=bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "patch": "@@ -28,7 +28,7 @@ impl FlagComputation {\n     }\n \n     fn add_flags(&mut self, flags: TypeFlags) {\n-        self.flags = self.flags | (flags & TypeFlags::NOMINAL_FLAGS);\n+        self.flags = self.flags | flags;\n     }\n \n     /// indicates that `self` refers to something at binding level `binder`"}, {"sha": "57ac18185d0537f1668bbe3b629318df123d8d52", "filename": "src/librustc_middle/ty/mod.rs", "status": "modified", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/bad8f0bd971bc3d203724090ef382ef78a2a0d3c/src%2Flibrustc_middle%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bad8f0bd971bc3d203724090ef382ef78a2a0d3c/src%2Flibrustc_middle%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fmod.rs?ref=bad8f0bd971bc3d203724090ef382ef78a2a0d3c", "patch": "@@ -598,29 +598,6 @@ bitflags! {\n         /// Does this value have parameters/placeholders/inference variables which could be\n         /// replaced later, in a way that would change the results of `impl` specialization?\n         const STILL_FURTHER_SPECIALIZABLE = 1 << 18;\n-\n-        /// Flags representing the nominal content of a type,\n-        /// computed by FlagsComputation. If you add a new nominal\n-        /// flag, it should be added here too.\n-        const NOMINAL_FLAGS               = TypeFlags::HAS_TY_PARAM.bits\n-                                          | TypeFlags::HAS_RE_PARAM.bits\n-                                          | TypeFlags::HAS_CT_PARAM.bits\n-                                          | TypeFlags::HAS_TY_INFER.bits\n-                                          | TypeFlags::HAS_RE_INFER.bits\n-                                          | TypeFlags::HAS_CT_INFER.bits\n-                                          | TypeFlags::HAS_TY_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_RE_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_CT_PLACEHOLDER.bits\n-                                          | TypeFlags::HAS_FREE_LOCAL_REGIONS.bits\n-                                          | TypeFlags::HAS_TY_PROJECTION.bits\n-                                          | TypeFlags::HAS_TY_OPAQUE.bits\n-                                          | TypeFlags::HAS_CT_PROJECTION.bits\n-                                          | TypeFlags::KEEP_IN_LOCAL_TCX.bits\n-                                          | TypeFlags::HAS_TY_ERR.bits\n-                                          | TypeFlags::HAS_FREE_REGIONS.bits\n-                                          | TypeFlags::HAS_RE_LATE_BOUND.bits\n-                                          | TypeFlags::HAS_RE_ERASED.bits\n-                                          | TypeFlags::STILL_FURTHER_SPECIALIZABLE.bits;\n     }\n }\n "}]}