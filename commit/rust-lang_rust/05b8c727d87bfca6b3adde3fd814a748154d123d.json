{"sha": "05b8c727d87bfca6b3adde3fd814a748154d123d", "node_id": "C_kwDOAAsO6NoAKDA1YjhjNzI3ZDg3YmZjYTZiM2FkZGUzZmQ4MTRhNzQ4MTU0ZDEyM2Q", "commit": {"author": {"name": "kadmin", "email": "julianknodt@gmail.com", "date": "2022-01-07T03:58:32Z"}, "committer": {"name": "kadmin", "email": "julianknodt@gmail.com", "date": "2022-01-17T17:20:57Z"}, "message": "Add term\n\nInstead of having a separate enum variant for types and consts have one but have either a const\nor type.", "tree": {"sha": "0e67530abd33cc0ecef190ef2e7836e9b2cfc8c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e67530abd33cc0ecef190ef2e7836e9b2cfc8c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05b8c727d87bfca6b3adde3fd814a748154d123d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05b8c727d87bfca6b3adde3fd814a748154d123d", "html_url": "https://github.com/rust-lang/rust/commit/05b8c727d87bfca6b3adde3fd814a748154d123d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05b8c727d87bfca6b3adde3fd814a748154d123d/comments", "author": {"login": "JulianKnodt", "id": 7675847, "node_id": "MDQ6VXNlcjc2NzU4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7675847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulianKnodt", "html_url": "https://github.com/JulianKnodt", "followers_url": "https://api.github.com/users/JulianKnodt/followers", "following_url": "https://api.github.com/users/JulianKnodt/following{/other_user}", "gists_url": "https://api.github.com/users/JulianKnodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulianKnodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulianKnodt/subscriptions", "organizations_url": "https://api.github.com/users/JulianKnodt/orgs", "repos_url": "https://api.github.com/users/JulianKnodt/repos", "events_url": "https://api.github.com/users/JulianKnodt/events{/privacy}", "received_events_url": "https://api.github.com/users/JulianKnodt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JulianKnodt", "id": 7675847, "node_id": "MDQ6VXNlcjc2NzU4NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/7675847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JulianKnodt", "html_url": "https://github.com/JulianKnodt", "followers_url": "https://api.github.com/users/JulianKnodt/followers", "following_url": "https://api.github.com/users/JulianKnodt/following{/other_user}", "gists_url": "https://api.github.com/users/JulianKnodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/JulianKnodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JulianKnodt/subscriptions", "organizations_url": "https://api.github.com/users/JulianKnodt/orgs", "repos_url": "https://api.github.com/users/JulianKnodt/repos", "events_url": "https://api.github.com/users/JulianKnodt/events{/privacy}", "received_events_url": "https://api.github.com/users/JulianKnodt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7383a6196847fbf2d233ad252af2c3a555f0be9e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7383a6196847fbf2d233ad252af2c3a555f0be9e", "html_url": "https://github.com/rust-lang/rust/commit/7383a6196847fbf2d233ad252af2c3a555f0be9e"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "604c95d2bc81f17c4a3fe86ea71337bf8fb158e1", "filename": "clippy_utils/src/ast_utils.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/05b8c727d87bfca6b3adde3fd814a748154d123d/clippy_utils%2Fsrc%2Fast_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05b8c727d87bfca6b3adde3fd814a748154d123d/clippy_utils%2Fsrc%2Fast_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fast_utils.rs?ref=05b8c727d87bfca6b3adde3fd814a748154d123d", "patch": "@@ -645,13 +645,20 @@ pub fn eq_generic_bound(l: &GenericBound, r: &GenericBound) -> bool {\n     }\n }\n \n+fn eq_term(l: &Term, r: &Term) -> bool {\n+  match (l, r) {\n+    (Term::Ty(l), Term::Ty(r)) => eq_ty(l,r),\n+    (Term::Const(l), Term::Const(r)) => eq_anon_const(l,r),\n+    _ => false,\n+  }\n+}\n+\n pub fn eq_assoc_constraint(l: &AssocConstraint, r: &AssocConstraint) -> bool {\n     use AssocConstraintKind::*;\n     eq_id(l.ident, r.ident)\n         && match (&l.kind, &r.kind) {\n-            (Equality { ty: l }, Equality { ty: r }) => eq_ty(l, r),\n+            (Equality { term: l }, Equality { term: r }) => eq_term(l, r),\n             (Bound { bounds: l }, Bound { bounds: r }) => over(l, r, eq_generic_bound),\n-            (ConstEquality { c: l }, ConstEquality { c: r }) => eq_anon_const(l, r),\n             _ => false,\n         }\n }"}]}