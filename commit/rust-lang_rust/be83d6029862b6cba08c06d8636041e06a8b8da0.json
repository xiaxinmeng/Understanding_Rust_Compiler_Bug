{"sha": "be83d6029862b6cba08c06d8636041e06a8b8da0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlODNkNjAyOTg2MmI2Y2JhMDhjMDZkODYzNjA0MWUwNmE4YjhkYTA=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-02-17T10:11:34Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-02-17T12:03:18Z"}, "message": "Rollup merge of #22408 - steveklabnik:gh19321, r=nikomatsakis\n\nFixes #19321\n\n... I think? `make check` passes, but I'm not 100% sure that there's a test for that behavior. Thoughts?", "tree": {"sha": "2df40733d25fa67d78114b13d67ed013cbd7ad34", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2df40733d25fa67d78114b13d67ed013cbd7ad34"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be83d6029862b6cba08c06d8636041e06a8b8da0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be83d6029862b6cba08c06d8636041e06a8b8da0", "html_url": "https://github.com/rust-lang/rust/commit/be83d6029862b6cba08c06d8636041e06a8b8da0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be83d6029862b6cba08c06d8636041e06a8b8da0/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2833976cccf6ce8e9740ac5f055435ba17a28b9e", "url": "https://api.github.com/repos/rust-lang/rust/commits/2833976cccf6ce8e9740ac5f055435ba17a28b9e", "html_url": "https://github.com/rust-lang/rust/commit/2833976cccf6ce8e9740ac5f055435ba17a28b9e"}, {"sha": "eeee0e8f4c30301d079ab225f093804c939c3ef3", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeee0e8f4c30301d079ab225f093804c939c3ef3", "html_url": "https://github.com/rust-lang/rust/commit/eeee0e8f4c30301d079ab225f093804c939c3ef3"}], "stats": {"total": 61, "additions": 1, "deletions": 60}, "files": [{"sha": "1136d12a2b124bdcda9aeadd3c09af9b664ee838", "filename": "src/librustc_llvm/lib.rs", "status": "modified", "additions": 1, "deletions": 60, "changes": 61, "blob_url": "https://github.com/rust-lang/rust/blob/be83d6029862b6cba08c06d8636041e06a8b8da0/src%2Flibrustc_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be83d6029862b6cba08c06d8636041e06a8b8da0/src%2Flibrustc_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Flib.rs?ref=be83d6029862b6cba08c06d8636041e06a8b8da0", "patch": "@@ -58,7 +58,7 @@ pub use self::Linkage::*;\n \n use std::ffi::CString;\n use std::cell::RefCell;\n-use std::{raw, mem, ptr};\n+use std::{raw, mem};\n use libc::{c_uint, c_ushort, uint64_t, c_int, size_t, c_char};\n use libc::{c_longlong, c_ulonglong, c_void};\n use debuginfo::{DIBuilderRef, DIDescriptor,\n@@ -2251,65 +2251,6 @@ pub unsafe fn debug_loc_to_string(c: ContextRef, tr: DebugLocRef) -> String {\n         .expect(\"got a non-UTF8 DebugLoc from LLVM\")\n }\n \n-// FIXME #15460 - create a public function that actually calls our\n-// static LLVM symbols. Otherwise the linker will just throw llvm\n-// away.  We're just calling lots of stuff until we transitively get\n-// all of LLVM. This is worse than anything.\n-pub unsafe fn static_link_hack_this_sucks() {\n-    LLVMInitializePasses();\n-\n-    LLVMInitializeX86TargetInfo();\n-    LLVMInitializeX86Target();\n-    LLVMInitializeX86TargetMC();\n-    LLVMInitializeX86AsmPrinter();\n-    LLVMInitializeX86AsmParser();\n-\n-    LLVMInitializeARMTargetInfo();\n-    LLVMInitializeARMTarget();\n-    LLVMInitializeARMTargetMC();\n-    LLVMInitializeARMAsmPrinter();\n-    LLVMInitializeARMAsmParser();\n-\n-    LLVMInitializeAArch64TargetInfo();\n-    LLVMInitializeAArch64Target();\n-    LLVMInitializeAArch64TargetMC();\n-    LLVMInitializeAArch64AsmPrinter();\n-    LLVMInitializeAArch64AsmParser();\n-\n-    LLVMInitializeMipsTargetInfo();\n-    LLVMInitializeMipsTarget();\n-    LLVMInitializeMipsTargetMC();\n-    LLVMInitializeMipsAsmPrinter();\n-    LLVMInitializeMipsAsmParser();\n-\n-    LLVMInitializePowerPCTargetInfo();\n-    LLVMInitializePowerPCTarget();\n-    LLVMInitializePowerPCTargetMC();\n-    LLVMInitializePowerPCAsmPrinter();\n-    LLVMInitializePowerPCAsmParser();\n-\n-    LLVMRustSetLLVMOptions(0 as c_int, ptr::null());\n-\n-    LLVMPassManagerBuilderPopulateModulePassManager(ptr::null_mut(), ptr::null_mut());\n-    LLVMPassManagerBuilderPopulateLTOPassManager(ptr::null_mut(), ptr::null_mut(), False, False);\n-    LLVMPassManagerBuilderPopulateFunctionPassManager(ptr::null_mut(), ptr::null_mut());\n-    LLVMPassManagerBuilderSetOptLevel(ptr::null_mut(), 0 as c_uint);\n-    LLVMPassManagerBuilderUseInlinerWithThreshold(ptr::null_mut(), 0 as c_uint);\n-    LLVMWriteBitcodeToFile(ptr::null_mut(), ptr::null());\n-    LLVMPassManagerBuilderCreate();\n-    LLVMPassManagerBuilderDispose(ptr::null_mut());\n-\n-    LLVMRustLinkInExternalBitcode(ptr::null_mut(), ptr::null(), 0 as size_t);\n-\n-    LLVMLinkInMCJIT();\n-    LLVMLinkInInterpreter();\n-\n-    extern {\n-        fn LLVMLinkInMCJIT();\n-        fn LLVMLinkInInterpreter();\n-    }\n-}\n-\n // The module containing the native LLVM dependencies, generated by the build system\n // Note that this must come after the rustllvm extern declaration so that\n // parts of LLVM that rustllvm depends on aren't thrown away by the linker."}]}