{"sha": "c3ac2c93fb446329b09882ef452fd6820290bfc5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzYWMyYzkzZmI0NDYzMjliMDk4ODJlZjQ1MmZkNjgyMDI5MGJmYzU=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-01-12T15:19:17Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-01-12T15:25:41Z"}, "message": "Allow attributes before function arguments\n\nThis adds support for function calls of the form:\n\n```rust\n  (\n    #[attr(...)] 1.2,\n    #[attr_one(...)]\n    #[attr_two(...)]\n    1.5,\n    ... etc ...\n  )\n```\n\nCloses https://github.com/rust-analyzer/rust-analyzer/issues/2801", "tree": {"sha": "44734cc34641cfab04cb1c71611ee0a299a90c96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44734cc34641cfab04cb1c71611ee0a299a90c96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3ac2c93fb446329b09882ef452fd6820290bfc5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqDOwG0S92h7oDiYc5lWCPY2LEIgFAl4bOncACgkQ5lWCPY2L\nEIgK+A//Tq42EvNWN3uFTobYmTTz/mAD+mGx5zX0MXkPvbpSwNZ/r1EMyIOGqfcB\nTLTJPObPh/hQ8BNNiQ1zlITNjgD4lK83I9j1nINZTWaHS2oL7qKvKHU4FQ5bRJoe\ngOQK2MynWzk4ix6GKOGWbBVl6LNDFpDhyj+kO7Nt86u3NpPNRrU1CiPnmwAAnmYE\nNnTXmlARNiZXMMh7z3m/tw/lefBXgdstgEgmzc+EaKjSMkJanikqBrX3L5FOHDuM\nbG8GDerZuzNemcGw4MQV1TukEtNDYmY2EHodTOUwqUPwclqCpnLJkXurZ5d/FSl6\nM625sTd6cyKVSueroDhv1gCXs7aD3Ux4+8mU1lijnm1hoKP1VpkZWgn0vhHq3jdK\nKirqeYGI74AtPgkBsfvg7MT6MdEZqx8dr++4Jtnxgya2GWECwwzGJitZrmauIGKJ\nRuVbONvWejXz+tfF47hJqhV9R/OeqcI++cImR5Z56HGKhXFtndZrfUkmJPBITvbe\nlG1tKFKq1/61h1ouJHtvh4cnCPqtBbjzxqdFPF1Kyr+3hqQ8LSywM3cf5e2T9CxI\nB1x6aYkqQU5MKf1FNqa3/z9yHfs0TRrHxPes+sGUh6cWVL+YnNsDsn622PqFDHwr\nmgzpdneMfWqHfE1V7nHaIib4MSK82ejIoL3tKwqKnarl9IeB7os=\n=JozK\n-----END PGP SIGNATURE-----", "payload": "tree 44734cc34641cfab04cb1c71611ee0a299a90c96\nparent f7a7092d691aea5c254412d9fd4b3f76a355f11f\nauthor Joshua Nelson <jyn514@gmail.com> 1578842357 -0500\ncommitter Joshua Nelson <jyn514@gmail.com> 1578842741 -0500\n\nAllow attributes before function arguments\n\nThis adds support for function calls of the form:\n\n```rust\n  (\n    #[attr(...)] 1.2,\n    #[attr_one(...)]\n    #[attr_two(...)]\n    1.5,\n    ... etc ...\n  )\n```\n\nCloses https://github.com/rust-analyzer/rust-analyzer/issues/2801\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3ac2c93fb446329b09882ef452fd6820290bfc5", "html_url": "https://github.com/rust-lang/rust/commit/c3ac2c93fb446329b09882ef452fd6820290bfc5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3ac2c93fb446329b09882ef452fd6820290bfc5/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7a7092d691aea5c254412d9fd4b3f76a355f11f", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7a7092d691aea5c254412d9fd4b3f76a355f11f", "html_url": "https://github.com/rust-lang/rust/commit/f7a7092d691aea5c254412d9fd4b3f76a355f11f"}], "stats": {"total": 126, "additions": 126, "deletions": 0}, "files": [{"sha": "7caed66a0105134984550514fc1fc3b6d8a9b668", "filename": "crates/ra_parser/src/grammar/expressions.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs?ref=c3ac2c93fb446329b09882ef452fd6820290bfc5", "patch": "@@ -535,11 +535,22 @@ fn cast_expr(p: &mut Parser, lhs: CompletedMarker) -> CompletedMarker {\n     m.complete(p, CAST_EXPR)\n }\n \n+// test arg_list\n+// fn assert_float(s: &str, n: f64) {}\n+// fn foo() {\n+//     assert_float(\n+//         \"1.797693134862315708e+308L\",\n+//         #[allow(clippy::excessive_precision)]\n+//         #[allow(dead_code)]\n+//         1.797_693_134_862_315_730_8e+308,\n+//     );\n+// }\n fn arg_list(p: &mut Parser) {\n     assert!(p.at(T!['(']));\n     let m = p.start();\n     p.bump(T!['(']);\n     while !p.at(T![')']) && !p.at(EOF) {\n+        attributes::outer_attributes(p);\n         if !p.at_ts(EXPR_FIRST) {\n             p.error(\"expected expression\");\n             break;"}, {"sha": "a4009b392283d8065cda0324aa246a4a158e0ebf", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0152_arg_list.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.rs?ref=c3ac2c93fb446329b09882ef452fd6820290bfc5", "patch": "@@ -0,0 +1,9 @@\n+fn assert_float(s: &str, n: f64) {}\n+fn foo() {\n+    assert_float(\n+        \"1.797693134862315708e+308L\",\n+        #[allow(clippy::excessive_precision)]\n+        #[allow(dead_code)]\n+        1.797_693_134_862_315_730_8e+308,\n+    );\n+}"}, {"sha": "6b1992dac0603959f8ee12a15c2de9cb18271eac", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0152_arg_list.txt", "status": "added", "additions": 106, "deletions": 0, "changes": 106, "blob_url": "https://github.com/rust-lang/rust/blob/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c3ac2c93fb446329b09882ef452fd6820290bfc5/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_list.txt?ref=c3ac2c93fb446329b09882ef452fd6820290bfc5", "patch": "@@ -0,0 +1,106 @@\n+SOURCE_FILE@[0; 228)\n+  FN_DEF@[0; 35)\n+    FN_KW@[0; 2) \"fn\"\n+    WHITESPACE@[2; 3) \" \"\n+    NAME@[3; 15)\n+      IDENT@[3; 15) \"assert_float\"\n+    PARAM_LIST@[15; 32)\n+      L_PAREN@[15; 16) \"(\"\n+      PARAM@[16; 23)\n+        BIND_PAT@[16; 17)\n+          NAME@[16; 17)\n+            IDENT@[16; 17) \"s\"\n+        COLON@[17; 18) \":\"\n+        WHITESPACE@[18; 19) \" \"\n+        REFERENCE_TYPE@[19; 23)\n+          AMP@[19; 20) \"&\"\n+          PATH_TYPE@[20; 23)\n+            PATH@[20; 23)\n+              PATH_SEGMENT@[20; 23)\n+                NAME_REF@[20; 23)\n+                  IDENT@[20; 23) \"str\"\n+      COMMA@[23; 24) \",\"\n+      WHITESPACE@[24; 25) \" \"\n+      PARAM@[25; 31)\n+        BIND_PAT@[25; 26)\n+          NAME@[25; 26)\n+            IDENT@[25; 26) \"n\"\n+        COLON@[26; 27) \":\"\n+        WHITESPACE@[27; 28) \" \"\n+        PATH_TYPE@[28; 31)\n+          PATH@[28; 31)\n+            PATH_SEGMENT@[28; 31)\n+              NAME_REF@[28; 31)\n+                IDENT@[28; 31) \"f64\"\n+      R_PAREN@[31; 32) \")\"\n+    WHITESPACE@[32; 33) \" \"\n+    BLOCK_EXPR@[33; 35)\n+      BLOCK@[33; 35)\n+        L_CURLY@[33; 34) \"{\"\n+        R_CURLY@[34; 35) \"}\"\n+  WHITESPACE@[35; 36) \"\\n\"\n+  FN_DEF@[36; 227)\n+    FN_KW@[36; 38) \"fn\"\n+    WHITESPACE@[38; 39) \" \"\n+    NAME@[39; 42)\n+      IDENT@[39; 42) \"foo\"\n+    PARAM_LIST@[42; 44)\n+      L_PAREN@[42; 43) \"(\"\n+      R_PAREN@[43; 44) \")\"\n+    WHITESPACE@[44; 45) \" \"\n+    BLOCK_EXPR@[45; 227)\n+      BLOCK@[45; 227)\n+        L_CURLY@[45; 46) \"{\"\n+        WHITESPACE@[46; 51) \"\\n    \"\n+        EXPR_STMT@[51; 225)\n+          CALL_EXPR@[51; 224)\n+            PATH_EXPR@[51; 63)\n+              PATH@[51; 63)\n+                PATH_SEGMENT@[51; 63)\n+                  NAME_REF@[51; 63)\n+                    IDENT@[51; 63) \"assert_float\"\n+            ARG_LIST@[63; 224)\n+              L_PAREN@[63; 64) \"(\"\n+              WHITESPACE@[64; 73) \"\\n        \"\n+              LITERAL@[73; 101)\n+                STRING@[73; 101) \"\\\"1.797693134862315708 ...\"\n+              COMMA@[101; 102) \",\"\n+              WHITESPACE@[102; 111) \"\\n        \"\n+              ATTR@[111; 148)\n+                POUND@[111; 112) \"#\"\n+                L_BRACK@[112; 113) \"[\"\n+                PATH@[113; 118)\n+                  PATH_SEGMENT@[113; 118)\n+                    NAME_REF@[113; 118)\n+                      IDENT@[113; 118) \"allow\"\n+                TOKEN_TREE@[118; 147)\n+                  L_PAREN@[118; 119) \"(\"\n+                  IDENT@[119; 125) \"clippy\"\n+                  COLON@[125; 126) \":\"\n+                  COLON@[126; 127) \":\"\n+                  IDENT@[127; 146) \"excessive_precision\"\n+                  R_PAREN@[146; 147) \")\"\n+                R_BRACK@[147; 148) \"]\"\n+              WHITESPACE@[148; 157) \"\\n        \"\n+              ATTR@[157; 176)\n+                POUND@[157; 158) \"#\"\n+                L_BRACK@[158; 159) \"[\"\n+                PATH@[159; 164)\n+                  PATH_SEGMENT@[159; 164)\n+                    NAME_REF@[159; 164)\n+                      IDENT@[159; 164) \"allow\"\n+                TOKEN_TREE@[164; 175)\n+                  L_PAREN@[164; 165) \"(\"\n+                  IDENT@[165; 174) \"dead_code\"\n+                  R_PAREN@[174; 175) \")\"\n+                R_BRACK@[175; 176) \"]\"\n+              WHITESPACE@[176; 185) \"\\n        \"\n+              LITERAL@[185; 217)\n+                FLOAT_NUMBER@[185; 217) \"1.797_693_134_862_315 ...\"\n+              COMMA@[217; 218) \",\"\n+              WHITESPACE@[218; 223) \"\\n    \"\n+              R_PAREN@[223; 224) \")\"\n+          SEMI@[224; 225) \";\"\n+        WHITESPACE@[225; 226) \"\\n\"\n+        R_CURLY@[226; 227) \"}\"\n+  WHITESPACE@[227; 228) \"\\n\""}]}