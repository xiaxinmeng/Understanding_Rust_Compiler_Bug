{"sha": "7db332434005b823ca151804193837eaf904d2a3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkYjMzMjQzNDAwNWI4MjNjYTE1MTgwNDE5MzgzN2VhZjkwNGQyYTM=", "commit": {"author": {"name": "dylan_DPC", "email": "dylan.dpc@gmail.com", "date": "2018-07-21T06:12:44Z"}, "committer": {"name": "dylan_DPC", "email": "dylan.dpc@gmail.com", "date": "2018-07-21T06:12:44Z"}, "message": "remove unwanted tests and a reference to it in comments", "tree": {"sha": "acde610421bbe46acf3e1cdf2d6fea204578f793", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/acde610421bbe46acf3e1cdf2d6fea204578f793"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7db332434005b823ca151804193837eaf904d2a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7db332434005b823ca151804193837eaf904d2a3", "html_url": "https://github.com/rust-lang/rust/commit/7db332434005b823ca151804193837eaf904d2a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7db332434005b823ca151804193837eaf904d2a3/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbb756ded7d72fe83a77219fee1181a5ca15dca3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dbb756ded7d72fe83a77219fee1181a5ca15dca3", "html_url": "https://github.com/rust-lang/rust/commit/dbb756ded7d72fe83a77219fee1181a5ca15dca3"}], "stats": {"total": 142, "additions": 3, "deletions": 139}, "files": [{"sha": "6c5b38a806e57b1a9ec8426297741fb0b34cbd3f", "filename": "src/librustc_mir/util/liveness.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7db332434005b823ca151804193837eaf904d2a3/src%2Flibrustc_mir%2Futil%2Fliveness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7db332434005b823ca151804193837eaf904d2a3/src%2Flibrustc_mir%2Futil%2Fliveness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Futil%2Fliveness.rs?ref=7db332434005b823ca151804193837eaf904d2a3", "patch": "@@ -294,11 +294,9 @@ pub fn categorize<'tcx>(context: PlaceContext<'tcx>, mode: LivenessMode) -> Opti\n         // We let Call define the result in both the success and\n         // unwind cases. This is not really correct, however it\n         // does not seem to be observable due to the way that we\n-        // generate MIR. See the test case\n-        // `mir-opt/nll/liveness-call-subtlety.rs`. To do things\n-        // properly, we would apply the def in call only to the\n-        // input from the success path and not the unwind\n-        // path. -nmatsakis\n+        // generate MIR. To do things properly, we would apply\n+        // the def in call only to the input from the success\n+        // path and not the unwind path. -nmatsakis\n         PlaceContext::Call |\n \n         // Storage live and storage dead aren't proper defines, but we can ignore"}, {"sha": "5fdea4208df996ec156ca19e8416cd7f1c581c95", "filename": "src/test/mir-opt/nll/liveness-call-subtlety.rs", "status": "removed", "additions": 0, "deletions": 45, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-call-subtlety.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-call-subtlety.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-call-subtlety.rs?ref=dbb756ded7d72fe83a77219fee1181a5ca15dca3", "patch": "@@ -1,45 +0,0 @@\n-// Copyright 2012-2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// compile-flags:-Zborrowck=mir\n-\n-fn can_panic() -> Box<usize> {\n-    Box::new(44)\n-}\n-\n-fn main() {\n-    let mut x = Box::new(22);\n-    x = can_panic();\n-}\n-\n-// Check that:\n-// - `_1` is the variable corresponding to `x`\n-// and\n-// - `_1` is live when `can_panic` is called (because it may be dropped)\n-//\n-// END RUST SOURCE\n-// START rustc.main.nll.0.mir\n-//    bb0: {\n-//            | Live variables on entry to bb0[0]: []\n-//        StorageLive(_1);\n-//            | Live variables on entry to bb0[1]: []\n-//        _1 = const <std::boxed::Box<T>>::new(const 22usize) -> [return: bb2, unwind: bb1];\n-//            | Live variables on exit from bb0: [_1 (drop)]\n-//    }\n-// END rustc.main.nll.0.mir\n-// START rustc.main.nll.0.mir\n-//    bb2: {\n-//            | Live variables on entry to bb2[0]: [_1 (drop)]\n-//        StorageLive(_2);\n-//            | Live variables on entry to bb2[1]: [_1 (drop)]\n-//        _2 = const can_panic() -> [return: bb3, unwind: bb4];\n-//            | Live variables on exit from bb2: [_1 (drop), _2]\n-//    }\n-// END rustc.main.nll.0.mir"}, {"sha": "001499b657de955af53762ee984fca5058825084", "filename": "src/test/mir-opt/nll/liveness-drop-intra-block.rs", "status": "removed", "additions": 0, "deletions": 41, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-drop-intra-block.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-drop-intra-block.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-drop-intra-block.rs?ref=dbb756ded7d72fe83a77219fee1181a5ca15dca3", "patch": "@@ -1,41 +0,0 @@\n-// Copyright 2012-2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// compile-flags:-Zborrowck=mir\n-\n-#![allow(warnings)]\n-\n-fn use_x(_: usize) -> bool { true }\n-\n-fn main() {\n-    let mut x = 22;\n-    loop {\n-        // Key point: `x` not live on entry to this basic block.\n-        x = 55;\n-        if use_x(x) { break; }\n-    }\n-}\n-\n-// END RUST SOURCE\n-// START rustc.main.nll.0.mir\n-//    bb3: {\n-//            | Live variables on entry to bb3[0]: []\n-//        _1 = const 55usize;\n-//            | Live variables on entry to bb3[1]: [_1]\n-//        StorageLive(_3);\n-//            | Live variables on entry to bb3[2]: [_1]\n-//        StorageLive(_4);\n-//            | Live variables on entry to bb3[3]: [_1]\n-//        _4 = _1;\n-//            | Live variables on entry to bb3[4]: [_4]\n-//        _3 = const use_x(move _4) -> [return: bb4, unwind: bb1];\n-//            | Live variables on exit from bb3: [_3]\n-//    }\n-// END rustc.main.nll.0.mir"}, {"sha": "fbe20d76ea721e4406c681aa9bfcce3926138ed7", "filename": "src/test/mir-opt/nll/liveness-interblock.rs", "status": "removed", "additions": 0, "deletions": 48, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-interblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb756ded7d72fe83a77219fee1181a5ca15dca3/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-interblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fnll%2Fliveness-interblock.rs?ref=dbb756ded7d72fe83a77219fee1181a5ca15dca3", "patch": "@@ -1,48 +0,0 @@\n-// Copyright 2012-2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// compile-flags:-Zborrowck=mir\n-\n-fn cond() -> bool { false }\n-\n-fn make_live(_: usize) { }\n-\n-fn make_dead() { }\n-\n-fn main() {\n-    let x = 5;\n-\n-    if cond() {\n-        make_live(x);\n-    } else {\n-        // x should be dead on entry to this block\n-        make_dead();\n-    }\n-}\n-\n-// END RUST SOURCE\n-// START rustc.main.nll.0.mir\n-//     bb3: {\n-//             | Live variables on entry to bb3[0]: [_1]\n-//         StorageLive(_4);\n-//             | Live variables on entry to bb3[1]: [_1]\n-//         _4 = _1;\n-//             | Live variables on entry to bb3[2]: [_4]\n-//         _3 = const make_live(move _4) -> [return: bb5, unwind: bb1];\n-//             | Live variables on exit from bb3: []\n-//     }\n-// END rustc.main.nll.0.mir\n-// START rustc.main.nll.0.mir\n-//     bb4: {\n-//             | Live variables on entry to bb4[0]: []\n-//         _5 = const make_dead() -> [return: bb6, unwind: bb1];\n-//             | Live variables on exit from bb4: []\n-//     }\n-// END rustc.main.nll.0.mir"}]}