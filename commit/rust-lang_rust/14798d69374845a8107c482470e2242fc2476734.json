{"sha": "14798d69374845a8107c482470e2242fc2476734", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE0Nzk4ZDY5Mzc0ODQ1YTgxMDdjNDgyNDcwZTIyNDJmYzI0NzY3MzQ=", "commit": {"author": {"name": "Denis Merigoux", "email": "denis.merigoux@gmail.com", "date": "2018-08-20T15:44:18Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2018-11-16T12:11:09Z"}, "message": "Generalized BasicBlocks in BuilderMethods trait", "tree": {"sha": "5a5081a1dbdf142d4a07740cffb63090ec2c7590", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a5081a1dbdf142d4a07740cffb63090ec2c7590"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/14798d69374845a8107c482470e2242fc2476734", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/14798d69374845a8107c482470e2242fc2476734", "html_url": "https://github.com/rust-lang/rust/commit/14798d69374845a8107c482470e2242fc2476734", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/14798d69374845a8107c482470e2242fc2476734/comments", "author": {"login": "denismerigoux", "id": 1766128, "node_id": "MDQ6VXNlcjE3NjYxMjg=", "avatar_url": "https://avatars.githubusercontent.com/u/1766128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/denismerigoux", "html_url": "https://github.com/denismerigoux", "followers_url": "https://api.github.com/users/denismerigoux/followers", "following_url": "https://api.github.com/users/denismerigoux/following{/other_user}", "gists_url": "https://api.github.com/users/denismerigoux/gists{/gist_id}", "starred_url": "https://api.github.com/users/denismerigoux/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/denismerigoux/subscriptions", "organizations_url": "https://api.github.com/users/denismerigoux/orgs", "repos_url": "https://api.github.com/users/denismerigoux/repos", "events_url": "https://api.github.com/users/denismerigoux/events{/privacy}", "received_events_url": "https://api.github.com/users/denismerigoux/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34c5dc045f2ee53b3bc8e5cece75e6ece96389e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/34c5dc045f2ee53b3bc8e5cece75e6ece96389e6", "html_url": "https://github.com/rust-lang/rust/commit/34c5dc045f2ee53b3bc8e5cece75e6ece96389e6"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "9af77aa795366a205df029a13cb6af1aaf629ce2", "filename": "src/librustc_codegen_llvm/base.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fbase.rs?ref=14798d69374845a8107c482470e2242fc2476734", "patch": "@@ -76,6 +76,7 @@ use rustc_data_structures::sync::Lrc;\n use rustc_data_structures::indexed_vec::Idx;\n \n use traits::BuilderMethods;\n+use llvm::BasicBlock;\n \n use std::any::Any;\n use std::cmp;\n@@ -391,7 +392,7 @@ pub fn call_assume(bx: &Builder<'_, 'll, '_>, val: &'ll Value) {\n \n pub fn from_immediate<'a, 'll: 'a, 'tcx: 'll,\n     Value : ?Sized,\n-    Builder: BuilderMethods<'a, 'll, 'tcx, Value>>(\n+    Builder: BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>>(\n     bx: &Builder,\n     val: &'ll Value\n ) -> &'ll Value where Value : ValueTrait {\n@@ -426,7 +427,7 @@ pub fn to_immediate_scalar(\n \n pub fn call_memcpy<'a, 'll: 'a, 'tcx: 'll,\n     Value : ?Sized,\n-    Builder: BuilderMethods<'a, 'll, 'tcx, Value>>(\n+    Builder: BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>>(\n     bx: &Builder,\n     dst: &'ll Value,\n     dst_align: Align,\n@@ -452,7 +453,7 @@ pub fn call_memcpy<'a, 'll: 'a, 'tcx: 'll,\n \n pub fn memcpy_ty<'a, 'll: 'a, 'tcx: 'll,\n     Value : ?Sized,\n-    Builder: BuilderMethods<'a, 'll, 'tcx, Value>>(\n+    Builder: BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>>(\n     bx: &Builder,\n     dst: &'ll Value,\n     dst_align: Align,"}, {"sha": "8750b67f78a112b046adec2d762df4a21090a8de", "filename": "src/librustc_codegen_llvm/builder.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fbuilder.rs?ref=14798d69374845a8107c482470e2242fc2476734", "patch": "@@ -55,7 +55,8 @@ bitflags! {\n     }\n }\n \n-impl BuilderMethods<'a, 'll, 'tcx, Value> for Builder<'a, 'll, 'tcx> {\n+impl BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>\n+    for Builder<'a, 'll, 'tcx> {\n     fn new_block<'b>(\n         cx: &'a CodegenCx<'ll, 'tcx>,\n         llfn: &'ll Value,"}, {"sha": "9eb1f2fbb0370c66907072bb028c1e36df7f1ae7", "filename": "src/librustc_codegen_llvm/mir/operand.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fmir%2Foperand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Fmir%2Foperand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fmir%2Foperand.rs?ref=14798d69374845a8107c482470e2242fc2476734", "patch": "@@ -22,6 +22,7 @@ use type_::Type;\n use glue;\n \n use traits::BuilderMethods;\n+use llvm::BasicBlock;\n \n use std::fmt;\n \n@@ -281,7 +282,8 @@ impl OperandValue<&'ll Value> {\n \n impl<'a, 'll: 'a, 'tcx: 'll, Value : ?Sized> OperandValue<&'ll Value> where\n     Value : ValueTrait,\n-    Builder<'a, 'll, 'tcx, &'ll Value>: BuilderMethods<'a, 'll, 'tcx, Value>\n+    Builder<'a, 'll, 'tcx, &'ll Value>:\n+        BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>\n {\n     pub fn nontemporal_store(\n         self,\n@@ -291,7 +293,7 @@ impl<'a, 'll: 'a, 'tcx: 'll, Value : ?Sized> OperandValue<&'ll Value> where\n         self.store_with_flags(bx, dest, MemFlags::NONTEMPORAL);\n     }\n \n-    fn store_with_flags<Builder: BuilderMethods<'a, 'll, 'tcx, Value>>(\n+    fn store_with_flags<Builder: BuilderMethods<'a, 'll, 'tcx, Value, BasicBlock>>(\n         self,\n         bx: &Builder,\n         dest: PlaceRef<'tcx, &'ll Value>,"}, {"sha": "308677fcb7329ef361fe28225f7864f2ed125fea", "filename": "src/librustc_codegen_llvm/traits.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14798d69374845a8107c482470e2242fc2476734/src%2Flibrustc_codegen_llvm%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Ftraits.rs?ref=14798d69374845a8107c482470e2242fc2476734", "patch": "@@ -10,7 +10,7 @@\n \n use llvm::{AtomicRmwBinOp, AtomicOrdering, SynchronizationScope, AsmDialect};\n use llvm::{IntPredicate, RealPredicate, OperandBundleDef};\n-use llvm::{self, BasicBlock};\n+use llvm;\n use common::*;\n use type_::Type;\n use libc::c_char;\n@@ -23,7 +23,11 @@ use std::borrow::Cow;\n use std::ops::Range;\n \n \n-pub trait BuilderMethods<'a, 'll :'a, 'tcx: 'll, Value : ?Sized> {\n+pub trait BuilderMethods<'a, 'll :'a, 'tcx: 'll,\n+    Value : ?Sized,\n+    BasicBlock: ?Sized\n+    > {\n+\n     fn new_block<'b>(\n         cx: &'a CodegenCx<'ll, 'tcx, &'ll Value>,\n         llfn: &'ll Value,"}]}