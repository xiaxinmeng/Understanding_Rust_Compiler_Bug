{"sha": "8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "node_id": "C_kwDOAAsO6NoAKDhlZjU1N2QzNDNhOTRjM2RkNDU2OWU2YmRiZmI3ZmUzNDI1MmQwZTY", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-09-12T09:51:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-12T09:51:34Z"}, "message": "Rollup merge of #101693 - GuillaumeGomez:update-browser-ui-test-0-10, r=notriddle\n\nUpdate browser UI test 0 10\n\nThe biggest change from this browser-ui-test update is the upgrade of the puppeteer version to `17.1.3` (the latest in short).\n\nI also added the command `click-with-offset` to still allow us to click on the `[-]` part.\n\ncc `@jsha`\nr? `@notriddle`", "tree": {"sha": "bfd034ca4d579ccc513c89ec66d18488335ed015", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bfd034ca4d579ccc513c89ec66d18488335ed015"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjHwEmCRBK7hj4Ov3rIwAA/gIIABl5W8ld5M8rdbLrfno+iiiv\nckV3GDb+bwHRxbf262evQLkx/xXSFoRxOxHtHZgh+v7TnvQ1dkIH8pGkohEWSdgl\ncAJXnYqetTFCFOMakLOAQ/8SbNc690ucUS3ClYSWOhMdjo2x6CX/4IrUQrG/LIGh\nl53Q7ICtuXaoO5KTcU6yMx4sWFWy9OKb9CdHnXUhVVQcFoBj85SH9Np4B9X5lupS\nVbOkH1FM8VUif6/dlLsyJ6SPVOd/IUJV4HhlG1YKeEdOQ1aHZPXtgmAQuyn2qqli\nhJPYRUoI5rFtM60kbDwwG/PF5SkY8NSFL8vbznQd4G6l0puYmygw+HdGxcemoHA=\n=ufWO\n-----END PGP SIGNATURE-----\n", "payload": "tree bfd034ca4d579ccc513c89ec66d18488335ed015\nparent 6bacb6f6e9e1f8519392a08c98201cbd10bc4c5e\nparent d010f95af1b5bc3188b8fcf5bfcaf9aadbfe2299\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1662976294 +0530\ncommitter GitHub <noreply@github.com> 1662976294 +0530\n\nRollup merge of #101693 - GuillaumeGomez:update-browser-ui-test-0-10, r=notriddle\n\nUpdate browser UI test 0 10\n\nThe biggest change from this browser-ui-test update is the upgrade of the puppeteer version to `17.1.3` (the latest in short).\n\nI also added the command `click-with-offset` to still allow us to click on the `[-]` part.\n\ncc `@jsha`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "html_url": "https://github.com/rust-lang/rust/commit/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6bacb6f6e9e1f8519392a08c98201cbd10bc4c5e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6bacb6f6e9e1f8519392a08c98201cbd10bc4c5e", "html_url": "https://github.com/rust-lang/rust/commit/6bacb6f6e9e1f8519392a08c98201cbd10bc4c5e"}, {"sha": "d010f95af1b5bc3188b8fcf5bfcaf9aadbfe2299", "url": "https://api.github.com/repos/rust-lang/rust/commits/d010f95af1b5bc3188b8fcf5bfcaf9aadbfe2299", "html_url": "https://github.com/rust-lang/rust/commit/d010f95af1b5bc3188b8fcf5bfcaf9aadbfe2299"}], "stats": {"total": 29, "additions": 16, "deletions": 13}, "files": [{"sha": "2774f8587f40e6c320f48389dfbfefb239415d52", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -1 +1 @@\n-0.9.8\n\\ No newline at end of file\n+0.10.0\n\\ No newline at end of file"}, {"sha": "7f97cf220cc55f39a07a69094273bcb58afb3b28", "filename": "src/test/rustdoc-gui/docblock-table-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-table-overflow.goml?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -6,7 +6,7 @@ size: (1100, 800)\n compare-elements-property: (\".top-doc .docblock\", \".top-doc .docblock > p\", [\"scrollWidth\"])\n assert-property: (\".top-doc .docblock\", {\"scrollWidth\": \"801\"})\n // However, since there is overflow in the <table>, its scroll width is bigger.\n-assert-property: (\".top-doc .docblock table\", {\"scrollWidth\": \"1573\"})\n+assert-property: (\".top-doc .docblock table\", {\"scrollWidth\": \"1572\"})\n \n // Checking it works on other doc blocks as well...\n \n@@ -18,4 +18,4 @@ compare-elements-property: (\n )\n assert-property: (\"#implementations-list > details .docblock\", {\"scrollWidth\": \"801\"})\n // However, since there is overflow in the <table>, its scroll width is bigger.\n-assert-property: (\"#implementations-list > details .docblock table\", {\"scrollWidth\": \"1573\"})\n+assert-property: (\"#implementations-list > details .docblock table\", {\"scrollWidth\": \"1572\"})"}, {"sha": "dc50185f01b25449fbadde9c78106b0598b53e51", "filename": "src/test/rustdoc-gui/sidebar-mobile-scroll.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile-scroll.goml?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -6,7 +6,7 @@ assert-css: (\".sidebar\", {\"display\": \"block\", \"left\": \"-1000px\"})\n \n // Scroll down.\n scroll-to: \"//h2[@id='blanket-implementations']\"\n-assert-window-property: {\"pageYOffset\": \"702\"}\n+assert-window-property: {\"pageYOffset\": \"643\"}\n \n // Open the sidebar menu.\n click: \".sidebar-menu-toggle\"\n@@ -21,11 +21,11 @@ assert-window-property: {\"pageYOffset\": \"0\"}\n // Close the sidebar menu. Make sure the scroll position gets restored.\n click: \".sidebar-menu-toggle\"\n wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n-assert-window-property: {\"pageYOffset\": \"702\"}\n+assert-window-property: {\"pageYOffset\": \"643\"}\n \n // Now test that scrollability returns when the browser window is just resized.\n click: \".sidebar-menu-toggle\"\n wait-for-css: (\".sidebar\", {\"left\": \"0px\"})\n assert-window-property: {\"pageYOffset\": \"0\"}\n-size: (900, 900)\n-assert-window-property: {\"pageYOffset\": \"702\"}\n+size: (900, 600)\n+assert-window-property: {\"pageYOffset\": \"643\"}"}, {"sha": "4321efcdb17127ecec10455ae256f772095e5a4d", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -224,22 +224,22 @@ click: \"#sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n // We scroll to line 117 to change the scroll position.\n scroll-to: '//*[@id=\"117\"]'\n-assert-window-property: {\"pageYOffset\": \"2519\"}\n+assert-window-property: {\"pageYOffset\": \"2542\"}\n // Expanding the sidebar...\n click: \"#sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"500px\"})\n click: \"#sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n // The \"scrollTop\" property should be the same.\n-assert-window-property: {\"pageYOffset\": \"2519\"}\n+assert-window-property: {\"pageYOffset\": \"2542\"}\n \n // We now check that the scroll position is restored if the window is resized.\n size: (500, 700)\n click: \"#sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"visible\"})\n assert-window-property: {\"pageYOffset\": \"0\"}\n size: (900, 900)\n-assert-window-property: {\"pageYOffset\": \"2519\"}\n+assert-window-property: {\"pageYOffset\": \"2542\"}\n size: (500, 700)\n click: \"#sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"hidden\"})"}, {"sha": "8c3a0bf5bb78f988f18347e312b4932d2d4f9ab2", "filename": "src/test/rustdoc-gui/toggle-click-deadspace.goml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Ftoggle-click-deadspace.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Ftoggle-click-deadspace.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-click-deadspace.goml?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -4,7 +4,10 @@ goto: file://|DOC_PATH|/lib2/struct.Foo.html\n assert-attribute: (\".impl-items .rustdoc-toggle\", {\"open\": \"\"})\n click: \"h4.code-header\" // This is the position of \"pub\" in \"pub fn a_method\"\n assert-attribute: (\".impl-items .rustdoc-toggle\", {\"open\": \"\"})\n-click: \".impl-items .rustdoc-toggle summary::before\" // This is the position of \"[-]\" next to that pub fn.\n+click-with-offset: (\n+    \".impl-items .rustdoc-toggle summary\",\n+    {\"x\": -24, \"y\": 8}, // This is the position of \"[-]\" next to that pub fn.\n+)\n assert-attribute-false: (\".impl-items .rustdoc-toggle\", {\"open\": \"\"})\n \n // Click the \"Trait\" part of \"impl Trait\" and verify it navigates."}, {"sha": "9a46908f9333bc51a627ee6915d70e29a1b119bc", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=8ef557d343a94c3dd4569e6bdbfb7fe34252d0e6", "patch": "@@ -32,6 +32,6 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"950\"})\n size: (600, 600)\n goto: file://|DOC_PATH|/lib2/too_long/struct.SuperIncrediblyLongLongLongLongLongLongLongGigaGigaGigaMegaLongLongLongStructName.html\n // It shouldn't have an overflow in the topbar either.\n-assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"502\"})\n-assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"502\"})\n+assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"500\"})\n+assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"500\"})\n assert-css: (\".mobile-topbar .location\", {\"overflow-x\": \"hidden\"})"}]}