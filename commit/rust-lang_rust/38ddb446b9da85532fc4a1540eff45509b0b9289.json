{"sha": "38ddb446b9da85532fc4a1540eff45509b0b9289", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM4ZGRiNDQ2YjlkYTg1NTMyZmM0YTE1NDBlZmY0NTUwOWIwYjkyODk=", "commit": {"author": {"name": "est31", "email": "MTest31@outlook.com", "date": "2018-01-14T07:25:18Z"}, "committer": {"name": "est31", "email": "MTest31@outlook.com", "date": "2018-01-15T15:39:20Z"}, "message": "Check for deadlinks from the summary during book generation\n\nPreviously, any deadlinks from a book's SUMMARY.md wouldn't\ncause any errors or warnings or similar but mdbook would simply\ncreate a page with blank content.\n\nThis has kept bug #47394 hidden. It should have been detected\nback in the PR when those wrongly named files got added to the\nbook.\n\nPR #47414 was one component of the solution. This change\nis a second line of defense for the unstable book and a first\nline of defense for any other book.\n\nWe also update mdbook to the most recent version.", "tree": {"sha": "29236d25256820f7085a5d241eb88166fc381011", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29236d25256820f7085a5d241eb88166fc381011"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/38ddb446b9da85532fc4a1540eff45509b0b9289", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/38ddb446b9da85532fc4a1540eff45509b0b9289", "html_url": "https://github.com/rust-lang/rust/commit/38ddb446b9da85532fc4a1540eff45509b0b9289", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/38ddb446b9da85532fc4a1540eff45509b0b9289/comments", "author": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57850e53602bfc1f66a12d20299c938925c1986a", "url": "https://api.github.com/repos/rust-lang/rust/commits/57850e53602bfc1f66a12d20299c938925c1986a", "html_url": "https://github.com/rust-lang/rust/commit/57850e53602bfc1f66a12d20299c938925c1986a"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "249fabea411cd97cc5e7b2d14cdfc5ddaaaff0e6", "filename": "src/Cargo.lock", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=38ddb446b9da85532fc4a1540eff45509b0b9289", "patch": "@@ -1114,7 +1114,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"mdbook\"\n-version = \"0.0.26\"\n+version = \"0.0.28\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"clap 2.29.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1697,7 +1697,7 @@ name = \"rustbook\"\n version = \"0.1.0\"\n dependencies = [\n  \"clap 2.29.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"mdbook 0.0.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"mdbook 0.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -2882,7 +2882,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum mac 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c41e0c4fef86961ac6d6f8a82609f55f31b05e4fce149ac5710e439df7619ba4\"\n \"checksum markup5ever 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"047150a0e03b57e638fc45af33a0b63a0362305d5b9f92ecef81df472a4cceb0\"\n \"checksum matches 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"100aabe6b8ff4e4a7e32c1c13523379802df0772b82466207ac25b013f193376\"\n-\"checksum mdbook 0.0.26 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8a1ac668292d1e5c7b1c6fd64f70d3a85105b8069a89558a0d67bdb2ff298ca1\"\n+\"checksum mdbook 0.0.28 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1ee8ba20c002000546681dc78d7f7e91fd35832058b1e2fdd492ca842bb6e9be\"\n \"checksum memchr 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d8b629fb514376c675b98c1421e80b151d3817ac42d7c667717d282761418d20\"\n \"checksum memchr 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"148fab2e51b4f1cfc66da2a7c32981d1d3c083a803978268bb11fe4b86925e7a\"\n \"checksum memchr 2.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"796fba70e76612589ed2ce7f45282f5af869e0fdd7cc6199fa1aa1f1d591ba9d\""}, {"sha": "bc35cbe9fbba64a3fbb2841f980be0511a515f0c", "filename": "src/tools/rustbook/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2Ftools%2Frustbook%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2Ftools%2Frustbook%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustbook%2FCargo.toml?ref=38ddb446b9da85532fc4a1540eff45509b0b9289", "patch": "@@ -8,5 +8,5 @@ license = \"MIT/Apache-2.0\"\n clap = \"2.25.0\"\n \n [dependencies.mdbook]\n-version = \"0.0.26\"\n+version = \"0.0.28\"\n default-features = false"}, {"sha": "50f4364e448f73a8101aaf925c41e586c915716e", "filename": "src/tools/rustbook/src/main.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/38ddb446b9da85532fc4a1540eff45509b0b9289/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustbook%2Fsrc%2Fmain.rs?ref=38ddb446b9da85532fc4a1540eff45509b0b9289", "patch": "@@ -52,12 +52,14 @@ fn main() {\n // Build command implementation\n pub fn build(args: &ArgMatches) -> Result<()> {\n     let book_dir = get_book_dir(args);\n-    let book = MDBook::new(&book_dir).read_config()?;\n+    let mut book = MDBook::new(&book_dir).read_config()?;\n \n-    let mut book = match args.value_of(\"dest-dir\") {\n-        Some(dest_dir) => book.with_destination(dest_dir),\n-        None => book,\n-    };\n+    // Set this to allow us to catch bugs in advance.\n+    book.config.build.create_missing = false;\n+\n+    if let Some(dest_dir) = args.value_of(\"dest-dir\") {\n+        book.config.build.build_dir = PathBuf::from(dest_dir);\n+    }\n \n     book.build()?;\n "}]}