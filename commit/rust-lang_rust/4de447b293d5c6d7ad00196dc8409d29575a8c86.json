{"sha": "4de447b293d5c6d7ad00196dc8409d29575a8c86", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkZTQ0N2IyOTNkNWM2ZDdhZDAwMTk2ZGM4NDA5ZDI5NTc1YThjODY=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-07-29T20:32:24Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-07-29T21:02:52Z"}, "message": "Attach comma token to MATCH_ARM instead of MATCH_ARM_LIST", "tree": {"sha": "22816e2b777492e0fe4b96a451854fe68306ce08", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/22816e2b777492e0fe4b96a451854fe68306ce08"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4de447b293d5c6d7ad00196dc8409d29575a8c86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4de447b293d5c6d7ad00196dc8409d29575a8c86", "html_url": "https://github.com/rust-lang/rust/commit/4de447b293d5c6d7ad00196dc8409d29575a8c86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4de447b293d5c6d7ad00196dc8409d29575a8c86/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d3b294ef7df0863941d65c433394f0f0ceaffa3", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d3b294ef7df0863941d65c433394f0f0ceaffa3", "html_url": "https://github.com/rust-lang/rust/commit/8d3b294ef7df0863941d65c433394f0f0ceaffa3"}], "stats": {"total": 234, "additions": 113, "deletions": 121}, "files": [{"sha": "30334ffcc87e85f6ab417f10e7526aadce3eaf77", "filename": "crates/ide/src/join_lines.rs", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fide%2Fsrc%2Fjoin_lines.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fide%2Fsrc%2Fjoin_lines.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fjoin_lines.rs?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -3,11 +3,10 @@ use std::convert::TryFrom;\n use ide_assists::utils::extract_trivial_expression;\n use itertools::Itertools;\n use syntax::{\n-    algo::non_trivia_sibling,\n     ast::{self, AstNode, AstToken, IsString},\n-    Direction, NodeOrToken, SourceFile, SyntaxElement,\n+    NodeOrToken, SourceFile, SyntaxElement,\n     SyntaxKind::{self, USE_TREE, WHITESPACE},\n-    SyntaxNode, SyntaxToken, TextRange, TextSize, T,\n+    SyntaxToken, TextRange, TextSize, T,\n };\n \n use text_edit::{TextEdit, TextEditBuilder};\n@@ -204,13 +203,6 @@ fn remove_newline(\n     edit.replace(token.text_range(), compute_ws(prev.kind(), next.kind()).to_string());\n }\n \n-fn has_comma_after(node: &SyntaxNode) -> bool {\n-    match non_trivia_sibling(node.clone().into(), Direction::Next) {\n-        Some(n) => n.kind() == T![,],\n-        _ => false,\n-    }\n-}\n-\n fn join_single_expr_block(edit: &mut TextEditBuilder, token: &SyntaxToken) -> Option<()> {\n     let block_expr = ast::BlockExpr::cast(token.parent()?)?;\n     if !block_expr.is_standalone() {\n@@ -223,7 +215,7 @@ fn join_single_expr_block(edit: &mut TextEditBuilder, token: &SyntaxToken) -> Op\n \n     // Match block needs to have a comma after the block\n     if let Some(match_arm) = block_expr.syntax().parent().and_then(ast::MatchArm::cast) {\n-        if !has_comma_after(match_arm.syntax()) {\n+        if match_arm.comma_token().is_none() {\n             buf.push(',');\n         }\n     }"}, {"sha": "6245f848018a1c20d543bc60351afa68b3e09496", "filename": "crates/ide/src/move_item.rs", "status": "modified", "additions": 20, "deletions": 20, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fide%2Fsrc%2Fmove_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fide%2Fsrc%2Fmove_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fmove_item.rs?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -205,16 +205,16 @@ fn main() {\n }\n             \"#,\n             expect![[r#\"\n-fn main() {\n-    match true {\n-        false =>$0 {\n-            println!(\"Test\");\n-        },\n-        true => {\n-            println!(\"Hello, world\");\n-        }\n-    };\n-}\n+                fn main() {\n+                    match true {\n+                        false =>$0 {\n+                            println!(\"Test\");\n+                        }\n+                        true => {\n+                            println!(\"Hello, world\");\n+                        },\n+                    };\n+                }\n             \"#]],\n             Direction::Up,\n         );\n@@ -236,16 +236,16 @@ fn main() {\n }\n             \"#,\n             expect![[r#\"\n-fn main() {\n-    match true {\n-        false => {\n-            println!(\"Test\");\n-        },\n-        true =>$0 {\n-            println!(\"Hello, world\");\n-        }\n-    };\n-}\n+                fn main() {\n+                    match true {\n+                        false => {\n+                            println!(\"Test\");\n+                        }\n+                        true =>$0 {\n+                            println!(\"Hello, world\");\n+                        },\n+                    };\n+                }\n             \"#]],\n             Direction::Down,\n         );"}, {"sha": "8e7dbea3e76b0529d38f91cd1d61c9d7e9816c1f", "filename": "crates/parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -400,20 +400,7 @@ pub(crate) fn match_arm_list(p: &mut Parser) {\n             error_block(p, \"expected match arm\");\n             continue;\n         }\n-\n-        // test match_arms_commas\n-        // fn foo() {\n-        //     match () {\n-        //         _ => (),\n-        //         _ => {}\n-        //         _ => ()\n-        //     }\n-        // }\n-        if match_arm(p).is_block() {\n-            p.eat(T![,]);\n-        } else if !p.at(T!['}']) {\n-            p.expect(T![,]);\n-        }\n+        match_arm(p);\n     }\n     p.expect(T!['}']);\n     m.complete(p, MATCH_ARM_LIST);\n@@ -429,7 +416,7 @@ pub(crate) fn match_arm_list(p: &mut Parser) {\n //         | X => (),\n //     };\n // }\n-fn match_arm(p: &mut Parser) -> BlockLike {\n+fn match_arm(p: &mut Parser) {\n     let m = p.start();\n     // test match_arms_outer_attributes\n     // fn foo() {\n@@ -452,8 +439,21 @@ fn match_arm(p: &mut Parser) -> BlockLike {\n     }\n     p.expect(T![=>]);\n     let blocklike = expr_stmt(p).1;\n+\n+    // test match_arms_commas\n+    // fn foo() {\n+    //     match () {\n+    //         _ => (),\n+    //         _ => {}\n+    //         _ => ()\n+    //     }\n+    // }\n+    if blocklike.is_block() {\n+        p.eat(T![,]);\n+    } else if !p.at(T!['}']) {\n+        p.expect(T![,]);\n+    }\n     m.complete(p, MATCH_ARM);\n-    blocklike\n }\n \n // test match_guard"}, {"sha": "83b9e79c3abbafd63509f60d73932c4e27e6fbc1", "filename": "crates/syntax/test_data/parser/err/0032_match_arms_inner_attrs.rast", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0032_match_arms_inner_attrs.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -22,7 +22,7 @@ SOURCE_FILE@0..293\n           MATCH_ARM_LIST@24..101\n             L_CURLY@24..25 \"{\"\n             WHITESPACE@25..34 \"\\n        \"\n-            MATCH_ARM@34..41\n+            MATCH_ARM@34..42\n               WILDCARD_PAT@34..35\n                 UNDERSCORE@34..35 \"_\"\n               WHITESPACE@35..36 \" \"\n@@ -31,7 +31,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@39..41\n                 L_PAREN@39..40 \"(\"\n                 R_PAREN@40..41 \")\"\n-            COMMA@41..42 \",\"\n+              COMMA@41..42 \",\"\n             WHITESPACE@42..51 \"\\n        \"\n             MATCH_ARM@51..78\n               ATTR@51..52\n@@ -53,7 +53,7 @@ SOURCE_FILE@0..293\n                     R_PAREN@76..77 \")\"\n                 R_BRACK@77..78 \"]\"\n             WHITESPACE@78..87 \"\\n        \"\n-            MATCH_ARM@87..94\n+            MATCH_ARM@87..95\n               WILDCARD_PAT@87..88\n                 UNDERSCORE@87..88 \"_\"\n               WHITESPACE@88..89 \" \"\n@@ -62,7 +62,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@92..94\n                 L_PAREN@92..93 \"(\"\n                 R_PAREN@93..94 \")\"\n-            COMMA@94..95 \",\"\n+              COMMA@94..95 \",\"\n             WHITESPACE@95..100 \"\\n    \"\n             R_CURLY@100..101 \"}\"\n       WHITESPACE@101..107 \"\\n\\n    \"\n@@ -77,7 +77,7 @@ SOURCE_FILE@0..293\n           MATCH_ARM_LIST@116..185\n             L_CURLY@116..117 \"{\"\n             WHITESPACE@117..126 \"\\n        \"\n-            MATCH_ARM@126..133\n+            MATCH_ARM@126..134\n               WILDCARD_PAT@126..127\n                 UNDERSCORE@126..127 \"_\"\n               WHITESPACE@127..128 \" \"\n@@ -86,9 +86,9 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@131..133\n                 L_PAREN@131..132 \"(\"\n                 R_PAREN@132..133 \")\"\n-            COMMA@133..134 \",\"\n+              COMMA@133..134 \",\"\n             WHITESPACE@134..143 \"\\n        \"\n-            MATCH_ARM@143..150\n+            MATCH_ARM@143..151\n               WILDCARD_PAT@143..144\n                 UNDERSCORE@143..144 \"_\"\n               WHITESPACE@144..145 \" \"\n@@ -97,7 +97,7 @@ SOURCE_FILE@0..293\n               TUPLE_EXPR@148..150\n                 L_PAREN@148..149 \"(\"\n                 R_PAREN@149..150 \")\"\n-            COMMA@150..151 \",\"\n+              COMMA@150..151 \",\"\n             WHITESPACE@151..160 \"\\n        \"\n             MATCH_ARM@160..179\n               ATTR@160..161\n@@ -165,7 +165,7 @@ SOURCE_FILE@0..293\n                   R_PAREN@248..249 \")\"\n               R_BRACK@249..250 \"]\"\n           WHITESPACE@250..259 \"\\n        \"\n-          MATCH_ARM@259..266\n+          MATCH_ARM@259..267\n             WILDCARD_PAT@259..260\n               UNDERSCORE@259..260 \"_\"\n             WHITESPACE@260..261 \" \"\n@@ -174,9 +174,9 @@ SOURCE_FILE@0..293\n             TUPLE_EXPR@264..266\n               L_PAREN@264..265 \"(\"\n               R_PAREN@265..266 \")\"\n-          COMMA@266..267 \",\"\n+            COMMA@266..267 \",\"\n           WHITESPACE@267..276 \"\\n        \"\n-          MATCH_ARM@276..283\n+          MATCH_ARM@276..284\n             WILDCARD_PAT@276..277\n               UNDERSCORE@276..277 \"_\"\n             WHITESPACE@277..278 \" \"\n@@ -185,7 +185,7 @@ SOURCE_FILE@0..293\n             TUPLE_EXPR@281..283\n               L_PAREN@281..282 \"(\"\n               R_PAREN@282..283 \")\"\n-          COMMA@283..284 \",\"\n+            COMMA@283..284 \",\"\n           WHITESPACE@284..289 \"\\n    \"\n           R_CURLY@289..290 \"}\"\n       WHITESPACE@290..291 \"\\n\""}, {"sha": "b6095d5030f24555705278dec99f043559a7185f", "filename": "crates/syntax/test_data/parser/err/0033_match_arms_outer_attrs.rast", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Ferr%2F0033_match_arms_outer_attrs.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..89\n         MATCH_ARM_LIST@24..86\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..41\n+          MATCH_ARM@34..42\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -30,9 +30,9 @@ SOURCE_FILE@0..89\n             TUPLE_EXPR@39..41\n               L_PAREN@39..40 \"(\"\n               R_PAREN@40..41 \")\"\n-          COMMA@41..42 \",\"\n+            COMMA@41..42 \",\"\n           WHITESPACE@42..51 \"\\n        \"\n-          MATCH_ARM@51..58\n+          MATCH_ARM@51..59\n             WILDCARD_PAT@51..52\n               UNDERSCORE@51..52 \"_\"\n             WHITESPACE@52..53 \" \"\n@@ -41,7 +41,7 @@ SOURCE_FILE@0..89\n             TUPLE_EXPR@56..58\n               L_PAREN@56..57 \"(\"\n               R_PAREN@57..58 \")\"\n-          COMMA@58..59 \",\"\n+            COMMA@58..59 \",\"\n           WHITESPACE@59..68 \"\\n        \"\n           MATCH_ARM@68..80\n             ATTR@68..80"}, {"sha": "32187facfd71ce8991a64b60bbf5b2511f79d0b9", "filename": "crates/syntax/test_data/parser/inline/ok/0055_literal_pattern.rast", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0055_literal_pattern.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..113\n         MATCH_ARM_LIST@25..110\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..43\n+          MATCH_ARM@35..44\n             LITERAL_PAT@35..37\n               MINUS@35..36 \"-\"\n               LITERAL@36..37\n@@ -32,9 +32,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@41..43\n               L_PAREN@41..42 \"(\"\n               R_PAREN@42..43 \")\"\n-          COMMA@43..44 \",\"\n+            COMMA@43..44 \",\"\n           WHITESPACE@44..53 \"\\n        \"\n-          MATCH_ARM@53..61\n+          MATCH_ARM@53..62\n             LITERAL_PAT@53..55\n               LITERAL@53..55\n                 INT_NUMBER@53..55 \"92\"\n@@ -44,9 +44,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@59..61\n               L_PAREN@59..60 \"(\"\n               R_PAREN@60..61 \")\"\n-          COMMA@61..62 \",\"\n+            COMMA@61..62 \",\"\n           WHITESPACE@62..71 \"\\n        \"\n-          MATCH_ARM@71..80\n+          MATCH_ARM@71..81\n             LITERAL_PAT@71..74\n               LITERAL@71..74\n                 CHAR@71..74 \"'c'\"\n@@ -56,9 +56,9 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@78..80\n               L_PAREN@78..79 \"(\"\n               R_PAREN@79..80 \")\"\n-          COMMA@80..81 \",\"\n+            COMMA@80..81 \",\"\n           WHITESPACE@81..90 \"\\n        \"\n-          MATCH_ARM@90..103\n+          MATCH_ARM@90..104\n             LITERAL_PAT@90..97\n               LITERAL@90..97\n                 STRING@90..97 \"\\\"hello\\\"\"\n@@ -68,7 +68,7 @@ SOURCE_FILE@0..113\n             TUPLE_EXPR@101..103\n               L_PAREN@101..102 \"(\"\n               R_PAREN@102..103 \")\"\n-          COMMA@103..104 \",\"\n+            COMMA@103..104 \",\"\n           WHITESPACE@104..109 \"\\n    \"\n           R_CURLY@109..110 \"}\"\n       WHITESPACE@110..111 \"\\n\""}, {"sha": "3598f3bc26f07c3eefbdbf30650d5809f5112ab4", "filename": "crates/syntax/test_data/parser/inline/ok/0058_range_pat.rast", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0058_range_pat.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -20,7 +20,7 @@ SOURCE_FILE@0..112\n         MATCH_ARM_LIST@25..109\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..50\n+          MATCH_ARM@35..51\n             RANGE_PAT@35..44\n               LITERAL_PAT@35..36\n                 LITERAL@35..36\n@@ -37,9 +37,9 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@48..50\n               L_PAREN@48..49 \"(\"\n               R_PAREN@49..50 \")\"\n-          COMMA@50..51 \",\"\n+            COMMA@50..51 \",\"\n           WHITESPACE@51..60 \"\\n        \"\n-          MATCH_ARM@60..77\n+          MATCH_ARM@60..78\n             RANGE_PAT@60..71\n               LITERAL_PAT@60..63\n                 LITERAL@60..63\n@@ -56,9 +56,9 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@75..77\n               L_PAREN@75..76 \"(\"\n               R_PAREN@76..77 \")\"\n-          COMMA@77..78 \",\"\n+            COMMA@77..78 \",\"\n           WHITESPACE@78..87 \"\\n        \"\n-          MATCH_ARM@87..102\n+          MATCH_ARM@87..103\n             RANGE_PAT@87..97\n               LITERAL_PAT@87..90\n                 LITERAL@87..90\n@@ -74,7 +74,7 @@ SOURCE_FILE@0..112\n             TUPLE_EXPR@100..102\n               L_PAREN@100..101 \"(\"\n               R_PAREN@101..102 \")\"\n-          COMMA@102..103 \",\"\n+            COMMA@102..103 \",\"\n           WHITESPACE@103..108 \"\\n    \"\n           R_CURLY@108..109 \"}\"\n       WHITESPACE@109..110 \"\\n\""}, {"sha": "6155726e91a19880514a9319222608441bae309f", "filename": "crates/syntax/test_data/parser/inline/ok/0059_match_arms_commas.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0059_match_arms_commas.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..83\n         MATCH_ARM_LIST@24..80\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..41\n+          MATCH_ARM@34..42\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -30,7 +30,7 @@ SOURCE_FILE@0..83\n             TUPLE_EXPR@39..41\n               L_PAREN@39..40 \"(\"\n               R_PAREN@40..41 \")\"\n-          COMMA@41..42 \",\"\n+            COMMA@41..42 \",\"\n           WHITESPACE@42..51 \"\\n        \"\n           MATCH_ARM@51..58\n             WILDCARD_PAT@51..52"}, {"sha": "566b478ea8f9dab7797bca32a942bc75dcc86478", "filename": "crates/syntax/test_data/parser/inline/ok/0066_match_arm.rast", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0066_match_arm.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -22,7 +22,7 @@ SOURCE_FILE@0..167\n           MATCH_ARM_LIST@24..163\n             L_CURLY@24..25 \"{\"\n             WHITESPACE@25..34 \"\\n        \"\n-            MATCH_ARM@34..41\n+            MATCH_ARM@34..42\n               WILDCARD_PAT@34..35\n                 UNDERSCORE@34..35 \"_\"\n               WHITESPACE@35..36 \" \"\n@@ -31,9 +31,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@39..41\n                 L_PAREN@39..40 \"(\"\n                 R_PAREN@40..41 \")\"\n-            COMMA@41..42 \",\"\n+              COMMA@41..42 \",\"\n             WHITESPACE@42..51 \"\\n        \"\n-            MATCH_ARM@51..83\n+            MATCH_ARM@51..84\n               WILDCARD_PAT@51..52\n                 UNDERSCORE@51..52 \"_\"\n               WHITESPACE@52..53 \" \"\n@@ -70,9 +70,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@81..83\n                 L_PAREN@81..82 \"(\"\n                 R_PAREN@82..83 \")\"\n-            COMMA@83..84 \",\"\n+              COMMA@83..84 \",\"\n             WHITESPACE@84..93 \"\\n        \"\n-            MATCH_ARM@93..109\n+            MATCH_ARM@93..110\n               OR_PAT@93..98\n                 IDENT_PAT@93..94\n                   NAME@93..94\n@@ -98,9 +98,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@107..109\n                 L_PAREN@107..108 \"(\"\n                 R_PAREN@108..109 \")\"\n-            COMMA@109..110 \",\"\n+              COMMA@109..110 \",\"\n             WHITESPACE@110..119 \"\\n        \"\n-            MATCH_ARM@119..137\n+            MATCH_ARM@119..138\n               PIPE@119..120 \"|\"\n               WHITESPACE@120..121 \" \"\n               OR_PAT@121..126\n@@ -128,9 +128,9 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@135..137\n                 L_PAREN@135..136 \"(\"\n                 R_PAREN@136..137 \")\"\n-            COMMA@137..138 \",\"\n+              COMMA@137..138 \",\"\n             WHITESPACE@138..147 \"\\n        \"\n-            MATCH_ARM@147..156\n+            MATCH_ARM@147..157\n               PIPE@147..148 \"|\"\n               WHITESPACE@148..149 \" \"\n               IDENT_PAT@149..150\n@@ -142,7 +142,7 @@ SOURCE_FILE@0..167\n               TUPLE_EXPR@154..156\n                 L_PAREN@154..155 \"(\"\n                 R_PAREN@155..156 \")\"\n-            COMMA@156..157 \",\"\n+              COMMA@156..157 \",\"\n             WHITESPACE@157..162 \"\\n    \"\n             R_CURLY@162..163 \"}\"\n         SEMICOLON@163..164 \";\""}, {"sha": "12d498af62c85bdb25d161a41b91456a823c8d17", "filename": "crates/syntax/test_data/parser/inline/ok/0118_match_guard.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0118_match_guard.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..58\n         MATCH_ARM_LIST@24..55\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..48\n+          MATCH_ARM@34..49\n             WILDCARD_PAT@34..35\n               UNDERSCORE@34..35 \"_\"\n             WHITESPACE@35..36 \" \"\n@@ -39,7 +39,7 @@ SOURCE_FILE@0..58\n             TUPLE_EXPR@46..48\n               L_PAREN@46..47 \"(\"\n               R_PAREN@47..48 \")\"\n-          COMMA@48..49 \",\"\n+            COMMA@48..49 \",\"\n           WHITESPACE@49..54 \"\\n    \"\n           R_CURLY@54..55 \"}\"\n       WHITESPACE@55..56 \"\\n\""}, {"sha": "443f368532634f02b88081b656be7222e2b2789b", "filename": "crates/syntax/test_data/parser/inline/ok/0120_match_arms_inner_attribute.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0120_match_arms_inner_attribute.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -66,7 +66,7 @@ SOURCE_FILE@0..139\n                 R_PAREN@111..112 \")\"\n             R_BRACK@112..113 \"]\"\n           WHITESPACE@113..122 \"\\n        \"\n-          MATCH_ARM@122..129\n+          MATCH_ARM@122..130\n             WILDCARD_PAT@122..123\n               UNDERSCORE@122..123 \"_\"\n             WHITESPACE@123..124 \" \"\n@@ -75,7 +75,7 @@ SOURCE_FILE@0..139\n             TUPLE_EXPR@127..129\n               L_PAREN@127..128 \"(\"\n               R_PAREN@128..129 \")\"\n-          COMMA@129..130 \",\"\n+            COMMA@129..130 \",\"\n           WHITESPACE@130..135 \"\\n    \"\n           R_CURLY@135..136 \"}\"\n       WHITESPACE@136..137 \"\\n\""}, {"sha": "1b2db27e4f7bbe64231ed0b43681880da9cbcc2c", "filename": "crates/syntax/test_data/parser/inline/ok/0121_match_arms_outer_attributes.rast", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0121_match_arms_outer_attributes.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..259\n         MATCH_ARM_LIST@24..256\n           L_CURLY@24..25 \"{\"\n           WHITESPACE@25..34 \"\\n        \"\n-          MATCH_ARM@34..74\n+          MATCH_ARM@34..75\n             ATTR@34..58\n               POUND@34..35 \"#\"\n               L_BRACK@35..36 \"[\"\n@@ -48,9 +48,9 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@72..74\n               L_PAREN@72..73 \"(\"\n               R_PAREN@73..74 \")\"\n-          COMMA@74..75 \",\"\n+            COMMA@74..75 \",\"\n           WHITESPACE@75..84 \"\\n        \"\n-          MATCH_ARM@84..125\n+          MATCH_ARM@84..126\n             ATTR@84..109\n               POUND@84..85 \"#\"\n               L_BRACK@85..86 \"[\"\n@@ -77,9 +77,9 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@123..125\n               L_PAREN@123..124 \"(\"\n               R_PAREN@124..125 \")\"\n-          COMMA@125..126 \",\"\n+            COMMA@125..126 \",\"\n           WHITESPACE@126..135 \"\\n        \"\n-          MATCH_ARM@135..249\n+          MATCH_ARM@135..250\n             ATTR@135..159\n               POUND@135..136 \"#\"\n               L_BRACK@136..137 \"[\"\n@@ -142,7 +142,7 @@ SOURCE_FILE@0..259\n             TUPLE_EXPR@247..249\n               L_PAREN@247..248 \"(\"\n               R_PAREN@248..249 \")\"\n-          COMMA@249..250 \",\"\n+            COMMA@249..250 \",\"\n           WHITESPACE@250..255 \"\\n    \"\n           R_CURLY@255..256 \"}\"\n       WHITESPACE@256..257 \"\\n\""}, {"sha": "41119dbc16da2a4931f2bca5d901118e9853c308", "filename": "crates/syntax/test_data/parser/inline/ok/0156_or_pattern.rast", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0156_or_pattern.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -21,7 +21,7 @@ SOURCE_FILE@0..130\n         MATCH_ARM_LIST@25..127\n           L_CURLY@25..26 \"{\"\n           WHITESPACE@26..35 \"\\n        \"\n-          MATCH_ARM@35..48\n+          MATCH_ARM@35..49\n             PAREN_PAT@35..42\n               L_PAREN@35..36 \"(\"\n               OR_PAT@36..41\n@@ -39,9 +39,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@46..48\n               L_PAREN@46..47 \"(\"\n               R_PAREN@47..48 \")\"\n-          COMMA@48..49 \",\"\n+            COMMA@48..49 \",\"\n           WHITESPACE@49..58 \"\\n        \"\n-          MATCH_ARM@58..72\n+          MATCH_ARM@58..73\n             REF_PAT@58..66\n               AMP@58..59 \"&\"\n               PAREN_PAT@59..66\n@@ -61,9 +61,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@70..72\n               L_PAREN@70..71 \"(\"\n               R_PAREN@71..72 \")\"\n-          COMMA@72..73 \",\"\n+            COMMA@72..73 \",\"\n           WHITESPACE@73..82 \"\\n        \"\n-          MATCH_ARM@82..96\n+          MATCH_ARM@82..97\n             TUPLE_PAT@82..90\n               L_PAREN@82..83 \"(\"\n               OR_PAT@83..88\n@@ -82,9 +82,9 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@94..96\n               L_PAREN@94..95 \"(\"\n               R_PAREN@95..96 \")\"\n-          COMMA@96..97 \",\"\n+            COMMA@96..97 \",\"\n           WHITESPACE@97..106 \"\\n        \"\n-          MATCH_ARM@106..120\n+          MATCH_ARM@106..121\n             SLICE_PAT@106..114\n               L_BRACK@106..107 \"[\"\n               OR_PAT@107..112\n@@ -103,7 +103,7 @@ SOURCE_FILE@0..130\n             TUPLE_EXPR@118..120\n               L_PAREN@118..119 \"(\"\n               R_PAREN@119..120 \")\"\n-          COMMA@120..121 \",\"\n+            COMMA@120..121 \",\"\n           WHITESPACE@121..126 \"\\n    \"\n           R_CURLY@126..127 \"}\"\n       WHITESPACE@127..128 \"\\n\""}, {"sha": "5b114df801486cfc62f3d3432b48611a39ccd0cd", "filename": "crates/syntax/test_data/parser/ok/0035_weird_exprs.rast", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0035_weird_exprs.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -1093,7 +1093,7 @@ SOURCE_FILE@0..3813\n                   MATCH_ARM_LIST@1853..1885\n                     L_CURLY@1853..1854 \"{\"\n                     WHITESPACE@1854..1855 \" \"\n-                    MATCH_ARM@1855..1863\n+                    MATCH_ARM@1855..1864\n                       LITERAL_PAT@1855..1856\n                         LITERAL@1855..1856\n                           INT_NUMBER@1855..1856 \"1\"\n@@ -1104,7 +1104,7 @@ SOURCE_FILE@0..3813\n                         L_CURLY@1860..1861 \"{\"\n                         WHITESPACE@1861..1862 \" \"\n                         R_CURLY@1862..1863 \"}\"\n-                    COMMA@1863..1864 \",\"\n+                      COMMA@1863..1864 \",\"\n                     WHITESPACE@1864..1865 \" \"\n                     MATCH_ARM@1865..1883\n                       WILDCARD_PAT@1865..1866"}, {"sha": "731a2315aa49105fc30a1e8b9a05232dc580af24", "filename": "crates/syntax/test_data/parser/ok/0047_minus_in_inner_pattern.rast", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast", "raw_url": "https://github.com/rust-lang/rust/raw/4de447b293d5c6d7ad00196dc8409d29575a8c86/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Fok%2F0047_minus_in_inner_pattern.rast?ref=4de447b293d5c6d7ad00196dc8409d29575a8c86", "patch": "@@ -34,7 +34,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@93..141\n             L_CURLY@93..94 \"{\"\n             WHITESPACE@94..103 \"\\n        \"\n-            MATCH_ARM@103..117\n+            MATCH_ARM@103..118\n               TUPLE_STRUCT_PAT@103..111\n                 PATH@103..107\n                   PATH_SEGMENT@103..107\n@@ -52,9 +52,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@115..117\n                 L_PAREN@115..116 \"(\"\n                 R_PAREN@116..117 \")\"\n-            COMMA@117..118 \",\"\n+              COMMA@117..118 \",\"\n             WHITESPACE@118..127 \"\\n        \"\n-            MATCH_ARM@127..134\n+            MATCH_ARM@127..135\n               WILDCARD_PAT@127..128\n                 UNDERSCORE@127..128 \"_\"\n               WHITESPACE@128..129 \" \"\n@@ -63,7 +63,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@132..134\n                 L_PAREN@132..133 \"(\"\n                 R_PAREN@133..134 \")\"\n-            COMMA@134..135 \",\"\n+              COMMA@134..135 \",\"\n             WHITESPACE@135..140 \"\\n    \"\n             R_CURLY@140..141 \"}\"\n       WHITESPACE@141..147 \"\\n\\n    \"\n@@ -97,7 +97,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@168..222\n             L_CURLY@168..169 \"{\"\n             WHITESPACE@169..178 \"\\n        \"\n-            MATCH_ARM@178..198\n+            MATCH_ARM@178..199\n               TUPLE_STRUCT_PAT@178..192\n                 PATH@178..182\n                   PATH_SEGMENT@178..182\n@@ -124,9 +124,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@196..198\n                 L_PAREN@196..197 \"(\"\n                 R_PAREN@197..198 \")\"\n-            COMMA@198..199 \",\"\n+              COMMA@198..199 \",\"\n             WHITESPACE@199..208 \"\\n        \"\n-            MATCH_ARM@208..215\n+            MATCH_ARM@208..216\n               WILDCARD_PAT@208..209\n                 UNDERSCORE@208..209 \"_\"\n               WHITESPACE@209..210 \" \"\n@@ -135,7 +135,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@213..215\n                 L_PAREN@213..214 \"(\"\n                 R_PAREN@214..215 \")\"\n-            COMMA@215..216 \",\"\n+              COMMA@215..216 \",\"\n             WHITESPACE@216..221 \"\\n    \"\n             R_CURLY@221..222 \"}\"\n       WHITESPACE@222..228 \"\\n\\n    \"\n@@ -171,7 +171,7 @@ SOURCE_FILE@0..395\n           MATCH_ARM_LIST@247..299\n             L_CURLY@247..248 \"{\"\n             WHITESPACE@248..257 \"\\n        \"\n-            MATCH_ARM@257..275\n+            MATCH_ARM@257..276\n               TUPLE_STRUCT_PAT@257..269\n                 PATH@257..261\n                   PATH@257..258\n@@ -200,9 +200,9 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@273..275\n                 L_PAREN@273..274 \"(\"\n                 R_PAREN@274..275 \")\"\n-            COMMA@275..276 \",\"\n+              COMMA@275..276 \",\"\n             WHITESPACE@276..285 \"\\n        \"\n-            MATCH_ARM@285..292\n+            MATCH_ARM@285..293\n               WILDCARD_PAT@285..286\n                 UNDERSCORE@285..286 \"_\"\n               WHITESPACE@286..287 \" \"\n@@ -211,7 +211,7 @@ SOURCE_FILE@0..395\n               TUPLE_EXPR@290..292\n                 L_PAREN@290..291 \"(\"\n                 R_PAREN@291..292 \")\"\n-            COMMA@292..293 \",\"\n+              COMMA@292..293 \",\"\n             WHITESPACE@293..298 \"\\n    \"\n             R_CURLY@298..299 \"}\"\n       WHITESPACE@299..305 \"\\n\\n    \""}]}