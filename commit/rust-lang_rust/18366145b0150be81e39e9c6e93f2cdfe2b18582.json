{"sha": "18366145b0150be81e39e9c6e93f2cdfe2b18582", "node_id": "C_kwDOAAsO6NoAKDE4MzY2MTQ1YjAxNTBiZTgxZTM5ZTljNmU5M2YyY2RmZTJiMTg1ODI", "commit": {"author": {"name": "Michael Eliachevitch", "email": "m.eliachevitch@posteo.de", "date": "2023-01-25T11:50:58Z"}, "committer": {"name": "Michael Eliachevitch", "email": "m.eliachevitch@posteo.de", "date": "2023-01-25T12:36:27Z"}, "message": "Update documentation for emacs and split for LSP and Eglot modes\n\nEmacs has now two LSP clients, the more minimalistic and lightweight Eglot and\nthe extensive though a bit bloated LSP-Mode. Eglot will soon be\nshipped with Emacs29. Both have rust-analyzer enabled by default and require\nno further setup then just being installed and enabled. `lsp-rust.el` is not\nrequired anymore.\n\nThe base-installation for each of those modes is so easy now that I don't think\nan enumerated list is necessary, both package can be installed via the standard\n`M-x package-install` and the installation is a one-liner that I provide.\n\nConfiguration mostly comes into play for support the rust-analyzer extensions to\nthe LSP protocol, which are built into LSP mode and require an extension-package\nfor Eglot.\n\nBut for the configuration beyond the base configuration I link against official\ndocumentation, quickstart guides and documentation for the lsp extensions, to\navoid showing outdated information here.\n\nThis commit is mostly a duplicate of a PR [1] that I made against the\nrust-analyzer github project.\n\n[1]: https://github.com/rust-analyzer/rust-analyzer.github.io/pull/197,\n     https://github.com/rust-analyzer/rust-analyzer.github.io/pull/197/commits/7ff0113006d71a2114cf233422366bee6a5457c2\n\nSpelling: Space before version number in Emacs 29 in manual\n\nCo-authored-by: Lauren\u021biu Nicola <lnicola@users.noreply.github.com>", "tree": {"sha": "3f35e8b93a6e2bb737de23a3dfdcba1ca9779693", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f35e8b93a6e2bb737de23a3dfdcba1ca9779693"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18366145b0150be81e39e9c6e93f2cdfe2b18582", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEVGkIx4I4OtDn2JTsG4+VyBJdzjEFAmPRImAACgkQG4+VyBJd\nzjHO1gf8CAU11GMW17jNIam6sFFWG8/k1lbIOZDlzmpdouQE3QvxQ9aqKO+8d6p0\nlM7ynvx7gtu/tBkDEVHHSlOLIRrn2Gw7PTpW1FfQaKQahcfCtqwMxYTrHXJJ2u0x\nG6qbttsJxhssxxnQgUXLmBuIgUycb8qKRGOyEzUw5ulgkTKb1umi9jFaSBQyrCwO\nuty7Nosi42o3/b2icUTOafuZUMXIwCt4TbTSPNbdeJeQx9L8oJJGKDMPON0RAaDh\nmFJhwYgY+ZxJTR5LRp/9WLdcEgIvkp2iayNXIyjcNa+plaTQf9ymw3TcNZwrFfdl\nLqN+XGSucrkoAOcfJ9oFYSRVGxoDQA==\n=HdEq\n-----END PGP SIGNATURE-----", "payload": "tree 3f35e8b93a6e2bb737de23a3dfdcba1ca9779693\nparent 8bf338f2c86f7863a17e9884a7e7d6676c1cd9d0\nauthor Michael Eliachevitch <m.eliachevitch@posteo.de> 1674647458 +0100\ncommitter Michael Eliachevitch <m.eliachevitch@posteo.de> 1674650187 +0100\n\nUpdate documentation for emacs and split for LSP and Eglot modes\n\nEmacs has now two LSP clients, the more minimalistic and lightweight Eglot and\nthe extensive though a bit bloated LSP-Mode. Eglot will soon be\nshipped with Emacs29. Both have rust-analyzer enabled by default and require\nno further setup then just being installed and enabled. `lsp-rust.el` is not\nrequired anymore.\n\nThe base-installation for each of those modes is so easy now that I don't think\nan enumerated list is necessary, both package can be installed via the standard\n`M-x package-install` and the installation is a one-liner that I provide.\n\nConfiguration mostly comes into play for support the rust-analyzer extensions to\nthe LSP protocol, which are built into LSP mode and require an extension-package\nfor Eglot.\n\nBut for the configuration beyond the base configuration I link against official\ndocumentation, quickstart guides and documentation for the lsp extensions, to\navoid showing outdated information here.\n\nThis commit is mostly a duplicate of a PR [1] that I made against the\nrust-analyzer github project.\n\n[1]: https://github.com/rust-analyzer/rust-analyzer.github.io/pull/197,\n     https://github.com/rust-analyzer/rust-analyzer.github.io/pull/197/commits/7ff0113006d71a2114cf233422366bee6a5457c2\n\nSpelling: Space before version number in Emacs 29 in manual\n\nCo-authored-by: Lauren\u021biu Nicola <lnicola@users.noreply.github.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18366145b0150be81e39e9c6e93f2cdfe2b18582", "html_url": "https://github.com/rust-lang/rust/commit/18366145b0150be81e39e9c6e93f2cdfe2b18582", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18366145b0150be81e39e9c6e93f2cdfe2b18582/comments", "author": {"login": "meliache", "id": 5121824, "node_id": "MDQ6VXNlcjUxMjE4MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5121824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meliache", "html_url": "https://github.com/meliache", "followers_url": "https://api.github.com/users/meliache/followers", "following_url": "https://api.github.com/users/meliache/following{/other_user}", "gists_url": "https://api.github.com/users/meliache/gists{/gist_id}", "starred_url": "https://api.github.com/users/meliache/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meliache/subscriptions", "organizations_url": "https://api.github.com/users/meliache/orgs", "repos_url": "https://api.github.com/users/meliache/repos", "events_url": "https://api.github.com/users/meliache/events{/privacy}", "received_events_url": "https://api.github.com/users/meliache/received_events", "type": "User", "site_admin": false}, "committer": {"login": "meliache", "id": 5121824, "node_id": "MDQ6VXNlcjUxMjE4MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5121824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meliache", "html_url": "https://github.com/meliache", "followers_url": "https://api.github.com/users/meliache/followers", "following_url": "https://api.github.com/users/meliache/following{/other_user}", "gists_url": "https://api.github.com/users/meliache/gists{/gist_id}", "starred_url": "https://api.github.com/users/meliache/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meliache/subscriptions", "organizations_url": "https://api.github.com/users/meliache/orgs", "repos_url": "https://api.github.com/users/meliache/repos", "events_url": "https://api.github.com/users/meliache/events{/privacy}", "received_events_url": "https://api.github.com/users/meliache/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bf338f2c86f7863a17e9884a7e7d6676c1cd9d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/8bf338f2c86f7863a17e9884a7e7d6676c1cd9d0", "html_url": "https://github.com/rust-lang/rust/commit/8bf338f2c86f7863a17e9884a7e7d6676c1cd9d0"}], "stats": {"total": 41, "additions": 34, "deletions": 7}, "files": [{"sha": "2cd1188c9df33368cb01791a12e453417f9dd887", "filename": "docs/user/manual.adoc", "status": "modified", "additions": 34, "deletions": 7, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/18366145b0150be81e39e9c6e93f2cdfe2b18582/docs%2Fuser%2Fmanual.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/18366145b0150be81e39e9c6e93f2cdfe2b18582/docs%2Fuser%2Fmanual.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fmanual.adoc?ref=18366145b0150be81e39e9c6e93f2cdfe2b18582", "patch": "@@ -234,16 +234,43 @@ $ brew install rust-analyzer\n \n === Emacs\n \n-Note this excellent https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/[guide] from https://github.com/rksm[@rksm].\n-\n Prerequisites: You have installed the <<rust-analyzer-language-server-binary,`rust-analyzer` binary>>.\n \n-Emacs support is maintained as part of the https://github.com/emacs-lsp/lsp-mode[Emacs-LSP] package in https://github.com/emacs-lsp/lsp-mode/blob/master/lsp-rust.el[lsp-rust.el].\n+To use `rust-analyzer`, you need to install and enable one of the two popular two popular LSP client implementations for Emacs, https://github.com/joaotavora/eglot[Eglot] or https://github.com/emacs-lsp/lsp-mode[LSP Mode]. Both enable `rust-analyzer` by default in rust buffers if it is available.\n+\n+==== Eglot\n+\n+Eglot is the more minimalistic and lightweight LSP client for Emacs, integrates well with existing Emacs functionality and will be built into Emacs starting from release 29.\n+\n+After installing Eglot, e.g. via `M-x package-install` (not needed from Emacs 29), you can enable it via the `M-x eglot` command or load it automatically in `rust-mode` via\n+\n+[source,emacs-lisp]\n+----\n+(add-hook 'rust-mode-hook 'eglot-ensure)\n+----\n+\n+For more detailed instructions and options see the https://joaotavora.github.io/eglot[Eglot manual] (also available from Emacs via `M-x info`) and the\n+https://github.com/joaotavora/eglot/blob/master/README.md[Eglot readme].\n+\n+Eglot does not support the rust-analyzer extensions to the language-server protocol and does not aim to do so in the future. The https://github.com/nemethf/eglot-x#rust-analyzer-extensions[eglot-x] package adds experimental support for those LSP extensions.\n+\n+==== LSP Mode\n+\n+LSP-mode is the original LSP-client for emacs. Compared to Eglot it has a larger codebase and supports more features, like LSP protocol extensions.\n+With extension packages like https://github.com/emacs-lsp/lsp-mode[LSP UI] it offers a lot of visual eyecandy.\n+Further it integrates well with https://github.com/emacs-lsp/dap-mode[DAP mode] for support of the Debug Adapter Protocol.\n+\n+You can install LSP-mode via `M-x package-install` and then run it via the `M-x lsp` command or load it automatically in rust buffers with\n+\n+[source,emacs-lisp]\n+----\n+(add-hook 'rust-mode-hook 'lsp-deferred)\n+----\n+\n+For more information on how to set up LSP mode and its extension package see the instructions in the https://emacs-lsp.github.io/lsp-mode/page/installation[LSP mode manual].\n+Also see the https://emacs-lsp.github.io/lsp-mode/page/lsp-rust-analyzer/[rust-analyzer section] for `rust-analyzer` specific options and commands, which you can optionally bind to keys.\n \n-1. Install the most recent version of `emacs-lsp` package by following the https://github.com/emacs-lsp/lsp-mode[Emacs-LSP instructions].\n-2. Set `lsp-rust-server` to `'rust-analyzer`.\n-3. Run `lsp` in a Rust buffer.\n-4. (Optionally) bind commands like `lsp-rust-analyzer-join-lines`, `lsp-extend-selection` and `lsp-rust-analyzer-expand-macro` to keys.\n+Note the excellent https://robert.kra.hn/posts/2021-02-07_rust-with-emacs/[guide] from https://github.com/rksm[@rksm] on how to set-up Emacs for Rust development with LSP mode and several other packages.\n \n === Vim/NeoVim\n "}]}