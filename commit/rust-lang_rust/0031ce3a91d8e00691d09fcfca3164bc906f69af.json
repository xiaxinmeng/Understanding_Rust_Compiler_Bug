{"sha": "0031ce3a91d8e00691d09fcfca3164bc906f69af", "node_id": "C_kwDOAAsO6NoAKDAwMzFjZTNhOTFkOGUwMDY5MWQwOWZjZmNhMzE2NGJjOTA2ZjY5YWY", "commit": {"author": {"name": "Wim Looman", "email": "git@nemo157.com", "date": "2020-11-04T21:58:37Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-10-05T16:15:29Z"}, "message": "Suppress some cfg from being shown in the stdlib docs", "tree": {"sha": "d4c46d8429f55026d7630f80cc4156056587769c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d4c46d8429f55026d7630f80cc4156056587769c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0031ce3a91d8e00691d09fcfca3164bc906f69af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0031ce3a91d8e00691d09fcfca3164bc906f69af", "html_url": "https://github.com/rust-lang/rust/commit/0031ce3a91d8e00691d09fcfca3164bc906f69af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0031ce3a91d8e00691d09fcfca3164bc906f69af/comments", "author": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18fdd816b72cbf1547efbb81f164f7a457f17b78", "url": "https://api.github.com/repos/rust-lang/rust/commits/18fdd816b72cbf1547efbb81f164f7a457f17b78", "html_url": "https://github.com/rust-lang/rust/commit/18fdd816b72cbf1547efbb81f164f7a457f17b78"}], "stats": {"total": 47, "additions": 44, "deletions": 3}, "files": [{"sha": "a9704bed2df67ece52b8507808f0b1ebc61a9d50", "filename": "library/alloc/src/lib.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Falloc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Falloc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Flib.rs?ref=0031ce3a91d8e00691d09fcfca3164bc906f69af", "patch": "@@ -65,7 +65,10 @@\n #![doc(\n     html_playground_url = \"https://play.rust-lang.org/\",\n     issue_tracker_base_url = \"https://github.com/rust-lang/rust/issues/\",\n-    test(no_crate_inject, attr(allow(unused_variables), deny(warnings)))\n+    test(no_crate_inject, attr(allow(unused_variables), deny(warnings))),\n+)]\n+#![cfg_attr(not(bootstrap),\n+    doc(cfg_hide(not(test), not(any(test, bootstrap)), target_has_atomic = \"ptr\"))\n )]\n #![no_std]\n #![needs_allocator]\n@@ -146,6 +149,8 @@\n #![feature(associated_type_bounds)]\n #![feature(slice_group_by)]\n #![feature(decl_macro)]\n+#![feature(doc_cfg)]\n+#![cfg_attr(not(bootstrap), feature(doc_cfg_hide))]\n // Allow testing this library\n \n #[cfg(test)]"}, {"sha": "f4670d8feb233090110d08bfaa78161ab9054b50", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=0031ce3a91d8e00691d09fcfca3164bc906f69af", "patch": "@@ -58,7 +58,30 @@\n     html_playground_url = \"https://play.rust-lang.org/\",\n     issue_tracker_base_url = \"https://github.com/rust-lang/rust/issues/\",\n     test(no_crate_inject, attr(deny(warnings))),\n-    test(attr(allow(dead_code, deprecated, unused_variables, unused_mut)))\n+    test(attr(allow(dead_code, deprecated, unused_variables, unused_mut))),\n+)]\n+#![cfg_attr(not(bootstrap),\n+    doc(cfg_hide(\n+        not(test),\n+        target_pointer_width = \"16\",\n+        target_pointer_width = \"32\",\n+        target_pointer_width = \"64\",\n+        target_has_atomic = \"8\",\n+        target_has_atomic = \"16\",\n+        target_has_atomic = \"32\",\n+        target_has_atomic = \"64\",\n+        target_has_atomic = \"ptr\",\n+        target_has_atomic_equal_alignment = \"8\",\n+        target_has_atomic_equal_alignment = \"16\",\n+        target_has_atomic_equal_alignment = \"32\",\n+        target_has_atomic_equal_alignment = \"64\",\n+        target_has_atomic_equal_alignment = \"ptr\",\n+        target_has_atomic_load_store = \"8\",\n+        target_has_atomic_load_store = \"16\",\n+        target_has_atomic_load_store = \"32\",\n+        target_has_atomic_load_store = \"64\",\n+        target_has_atomic_load_store = \"ptr\",\n+    ))\n )]\n #![no_core]\n //\n@@ -133,6 +156,7 @@\n #![feature(doc_notable_trait)]\n #![feature(doc_primitive)]\n #![feature(exhaustive_patterns)]\n+#![cfg_attr(not(bootstrap), feature(doc_cfg_hide))]\n #![feature(extern_types)]\n #![feature(fundamental)]\n #![feature(if_let_guard)]"}, {"sha": "af48e5e9bd297041ce0f59ac12d3c46a8e95c7b0", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=0031ce3a91d8e00691d09fcfca3164bc906f69af", "patch": "@@ -193,7 +193,10 @@\n     html_playground_url = \"https://play.rust-lang.org/\",\n     issue_tracker_base_url = \"https://github.com/rust-lang/rust/issues/\",\n     test(no_crate_inject, attr(deny(warnings))),\n-    test(attr(allow(dead_code, deprecated, unused_variables, unused_mut)))\n+    test(attr(allow(dead_code, deprecated, unused_variables, unused_mut))),\n+)]\n+#![cfg_attr(not(bootstrap),\n+    doc(cfg_hide(not(test), not(any(test, bootstrap))))\n )]\n // Don't link to std. We are std.\n #![no_std]\n@@ -263,6 +266,7 @@\n #![feature(custom_test_frameworks)]\n #![feature(decl_macro)]\n #![feature(doc_cfg)]\n+#![cfg_attr(not(bootstrap), feature(doc_cfg_hide))]\n #![feature(doc_keyword)]\n #![feature(doc_masked)]\n #![feature(doc_notable_trait)]"}, {"sha": "30eeac14b43f5dde525fa633c2a4db89023dcf79", "filename": "library/std/src/os/raw/mod.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Fos%2Fraw%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Fos%2Fraw%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fos%2Fraw%2Fmod.rs?ref=0031ce3a91d8e00691d09fcfca3164bc906f69af", "patch": "@@ -46,6 +46,7 @@ macro_rules! type_alias {\n }\n \n type_alias! { \"char.md\", c_char = u8, NonZero_c_char = NonZeroU8;\n+#[doc(cfg(all()))]\n #[cfg(any(\n     all(\n         target_os = \"linux\",\n@@ -88,6 +89,7 @@ type_alias! { \"char.md\", c_char = u8, NonZero_c_char = NonZeroU8;\n     all(target_os = \"fuchsia\", target_arch = \"aarch64\")\n ))]}\n type_alias! { \"char.md\", c_char = i8, NonZero_c_char = NonZeroI8;\n+#[doc(cfg(all()))]\n #[cfg(not(any(\n     all(\n         target_os = \"linux\",\n@@ -136,12 +138,16 @@ type_alias! { \"ushort.md\", c_ushort = u16, NonZero_c_ushort = NonZeroU16; }\n type_alias! { \"int.md\", c_int = i32, NonZero_c_int = NonZeroI32; }\n type_alias! { \"uint.md\", c_uint = u32, NonZero_c_uint = NonZeroU32; }\n type_alias! { \"long.md\", c_long = i32, NonZero_c_long = NonZeroI32;\n+#[doc(cfg(all()))]\n #[cfg(any(target_pointer_width = \"32\", windows))] }\n type_alias! { \"ulong.md\", c_ulong = u32, NonZero_c_ulong = NonZeroU32;\n+#[doc(cfg(all()))]\n #[cfg(any(target_pointer_width = \"32\", windows))] }\n type_alias! { \"long.md\", c_long = i64, NonZero_c_long = NonZeroI64;\n+#[doc(cfg(all()))]\n #[cfg(all(target_pointer_width = \"64\", not(windows)))] }\n type_alias! { \"ulong.md\", c_ulong = u64, NonZero_c_ulong = NonZeroU64;\n+#[doc(cfg(all()))]\n #[cfg(all(target_pointer_width = \"64\", not(windows)))] }\n type_alias! { \"longlong.md\", c_longlong = i64, NonZero_c_longlong = NonZeroI64; }\n type_alias! { \"ulonglong.md\", c_ulonglong = u64, NonZero_c_ulonglong = NonZeroU64; }"}, {"sha": "0ef3adade5c8387a3ac0cebb4fe421ab64efa643", "filename": "library/std/src/os/windows/raw.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Fos%2Fwindows%2Fraw.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0031ce3a91d8e00691d09fcfca3164bc906f69af/library%2Fstd%2Fsrc%2Fos%2Fwindows%2Fraw.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fos%2Fwindows%2Fraw.rs?ref=0031ce3a91d8e00691d09fcfca3164bc906f69af", "patch": "@@ -7,8 +7,10 @@ use crate::os::raw::c_void;\n #[stable(feature = \"raw_ext\", since = \"1.1.0\")]\n pub type HANDLE = *mut c_void;\n #[cfg(target_pointer_width = \"32\")]\n+#[doc(cfg(all()))]\n #[stable(feature = \"raw_ext\", since = \"1.1.0\")]\n pub type SOCKET = u32;\n #[cfg(target_pointer_width = \"64\")]\n+#[doc(cfg(all()))]\n #[stable(feature = \"raw_ext\", since = \"1.1.0\")]\n pub type SOCKET = u64;"}]}