{"sha": "af41c54301ef2abee639f0a8b355ba5a8c0ba258", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmNDFjNTQzMDFlZjJhYmVlNjM5ZjBhOGIzNTViYTVhOGMwYmEyNTg=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-06-01T16:33:29Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-06-01T16:33:29Z"}, "message": "use format! compile time magics for indentation", "tree": {"sha": "fd0353f4560a8995ae51756578c27e1e7c8b0061", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd0353f4560a8995ae51756578c27e1e7c8b0061"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af41c54301ef2abee639f0a8b355ba5a8c0ba258", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXTw5ZAAoJEFbW7qD8Z6xGaOQP/RHX82+8VwSqTma+dKXPcdto\njDbubD3iZO8vTyuOpYs3+xFTepyJ/85KnD3df2VVQ5pyOsgE+scFXJ5fZtGHAAvk\nQ749jalX6BEJuIZxuJiCMd2BeqHCeYPNgjppJ1JO4aVrIlgT6gEo2UE6DuJjZ92g\nsvm4EqdHUFeMDqfKfzdoq9UOtJpwJ6LRbxcsKrHUsjkEzaG9uPf7mVXrBrR5MhGy\n/wGJJF3bGGIDezBjI/VBvl7qbJSKvxDT46cXYtbcAUNao8PwRPnDCV4+o8vYq43q\nLzbvVr//YjN23az22oRf76qtJ+3YEd6DbJ/yO0SnOTMncKlQJnc7ioNEgTRTM9le\nxZPhhu1OIufwNwoMQlinDrzocCKf6EJLLb1aUblQt46Y61jUxGA64FoKu7P/MiQB\nSHgYzYMjwnPVE419VE6vtod2K7Z+rlnhXMvCYfkRLdEGmWva09sZjvkgsEBnav7a\nKPHouqnA1Ps0ypM3eVAKwmF740+tHGTDpwnDdlXBio03G075uBPrR/bPYCX010pw\nSs1ygiDSjbLCdsBra5wmuK2snpnTsy4jVUG79my05j+XA7JefVwtSi8icsO2Hp5E\nc031egyxEvtmOEFXBdpnEGscPkVnOCBp/a4ML3GCJ7uAspPn/buHDg9xtN33TT2O\nFwJ4awFEM1smvCX4YH5V\n=fNyq\n-----END PGP SIGNATURE-----", "payload": "tree fd0353f4560a8995ae51756578c27e1e7c8b0061\nparent c62cce3116803a448991037d1adc9043a77c31d0\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1464798809 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1464798809 +0200\n\nuse format! compile time magics for indentation"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af41c54301ef2abee639f0a8b355ba5a8c0ba258", "html_url": "https://github.com/rust-lang/rust/commit/af41c54301ef2abee639f0a8b355ba5a8c0ba258", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af41c54301ef2abee639f0a8b355ba5a8c0ba258/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c62cce3116803a448991037d1adc9043a77c31d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/c62cce3116803a448991037d1adc9043a77c31d0", "html_url": "https://github.com/rust-lang/rust/commit/c62cce3116803a448991037d1adc9043a77c31d0"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "df1763ae530f95a3d8ab24835a399ec481285a85", "filename": "src/bin/miri.rs", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/af41c54301ef2abee639f0a8b355ba5a8c0ba258/src%2Fbin%2Fmiri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af41c54301ef2abee639f0a8b355ba5a8c0ba258/src%2Fbin%2Fmiri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmiri.rs?ref=af41c54301ef2abee639f0a8b355ba5a8c0ba258", "patch": "@@ -41,14 +41,19 @@ fn main() {\n \n #[miri_run]\n fn init_logger() {\n+    const NSPACES: usize = 40;\n     let format = |record: &log::LogRecord| {\n         // prepend spaces to indent the final string\n         let indentation = log_settings::settings().indentation;\n-        let spaces = \"                                        \";\n-        let depth = indentation / spaces.len();\n-        let indentation = indentation % spaces.len();\n-        let indentation = &spaces[..indentation];\n-        format!(\"{}:{}{:2}{} {}\", record.level(), record.location().module_path(), depth, indentation, record.args())\n+        let depth = indentation / NSPACES;\n+        let indentation = indentation % NSPACES;\n+        format!(\"{lvl}:{module}{depth:2}{indent:<indentation$}{text}\",\n+            lvl = record.level(),\n+            module = record.location().module_path(),\n+            depth = depth,\n+            indentation = indentation,\n+            indent = \"\",\n+            text = record.args())\n     };\n \n     let mut builder = env_logger::LogBuilder::new();"}]}