{"sha": "cb501535b38ac40fc3d93aaee13d76eecd4fa6c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiNTAxNTM1YjM4YWM0MGZjM2Q5M2FhZWUxM2Q3NmVlY2Q0ZmE2Yzk=", "commit": {"author": {"name": "Johannes Hoff", "email": "johshoff@gmail.com", "date": "2014-11-22T23:49:38Z"}, "committer": {"name": "Johannes Hoff", "email": "johshoff@gmail.com", "date": "2014-11-22T23:49:38Z"}, "message": "Use mktemp for temporary download directory\n\nUsing the current directory may not always be appropriate, for example in\nthe case where it will unnecessarily trigger a backup to be made.\n\nThe only risk with this change is that systems might not have a mktemp.\nI am not aware of such a system, but have not tested on Windows. It is\nworking on a basic Ubuntu and OS X installation.", "tree": {"sha": "010e11c050a9ac7f05cea384ebf01ac9e200a66e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/010e11c050a9ac7f05cea384ebf01ac9e200a66e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9", "html_url": "https://github.com/rust-lang/rust/commit/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9/comments", "author": {"login": "johshoff", "id": 353935, "node_id": "MDQ6VXNlcjM1MzkzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/353935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johshoff", "html_url": "https://github.com/johshoff", "followers_url": "https://api.github.com/users/johshoff/followers", "following_url": "https://api.github.com/users/johshoff/following{/other_user}", "gists_url": "https://api.github.com/users/johshoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/johshoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johshoff/subscriptions", "organizations_url": "https://api.github.com/users/johshoff/orgs", "repos_url": "https://api.github.com/users/johshoff/repos", "events_url": "https://api.github.com/users/johshoff/events{/privacy}", "received_events_url": "https://api.github.com/users/johshoff/received_events", "type": "User", "site_admin": false}, "committer": {"login": "johshoff", "id": 353935, "node_id": "MDQ6VXNlcjM1MzkzNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/353935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johshoff", "html_url": "https://github.com/johshoff", "followers_url": "https://api.github.com/users/johshoff/followers", "following_url": "https://api.github.com/users/johshoff/following{/other_user}", "gists_url": "https://api.github.com/users/johshoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/johshoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johshoff/subscriptions", "organizations_url": "https://api.github.com/users/johshoff/orgs", "repos_url": "https://api.github.com/users/johshoff/repos", "events_url": "https://api.github.com/users/johshoff/events{/privacy}", "received_events_url": "https://api.github.com/users/johshoff/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d0a29061443852cae070b27d51de7cc69bbf293", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d0a29061443852cae070b27d51de7cc69bbf293", "html_url": "https://github.com/rust-lang/rust/commit/0d0a29061443852cae070b27d51de7cc69bbf293"}], "stats": {"total": 8, "additions": 1, "deletions": 7}, "files": [{"sha": "7b72fe625c4a89012674b2ef31c38949a309b3d3", "filename": "src/etc/rustup.sh", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9/src%2Fetc%2Frustup.sh", "raw_url": "https://github.com/rust-lang/rust/raw/cb501535b38ac40fc3d93aaee13d76eecd4fa6c9/src%2Fetc%2Frustup.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Frustup.sh?ref=cb501535b38ac40fc3d93aaee13d76eecd4fa6c9", "patch": "@@ -392,7 +392,7 @@ PACKAGE_NAME=rust-nightly\n PACKAGE_NAME_AND_TRIPLE=\"${PACKAGE_NAME}-${HOST_TRIPLE}\"\n TARBALL_NAME=\"${PACKAGE_NAME_AND_TRIPLE}.tar.gz\"\n REMOTE_TARBALL=\"https://static.rust-lang.org/dist/${TARBALL_NAME}\"\n-TMP_DIR=\"./rustup-tmp-install\"\n+TMP_DIR=`mktemp -d 2>/dev/null || mktemp -d -t 'mytmpdir'`\n LOCAL_TARBALL=\"${TMP_DIR}/${TARBALL_NAME}\"\n LOCAL_INSTALL_DIR=\"${TMP_DIR}/${PACKAGE_NAME_AND_TRIPLE}\"\n LOCAL_INSTALL_SCRIPT=\"${LOCAL_INSTALL_DIR}/install.sh\"\n@@ -405,12 +405,6 @@ CARGO_LOCAL_TARBALL=\"${TMP_DIR}/${CARGO_TARBALL_NAME}\"\n CARGO_LOCAL_INSTALL_DIR=\"${TMP_DIR}/${CARGO_PACKAGE_NAME_AND_TRIPLE}\"\n CARGO_LOCAL_INSTALL_SCRIPT=\"${CARGO_LOCAL_INSTALL_DIR}/install.sh\"\n \n-rm -Rf \"${TMP_DIR}\"\n-need_ok \"failed to remove temporary installation directory\"\n-\n-mkdir -p \"${TMP_DIR}\"\n-need_ok \"failed to create create temporary installation directory\"\n-\n msg \"downloading rust installer\"\n \"${CFG_CURL}\" \"${REMOTE_TARBALL}\" > \"${LOCAL_TARBALL}\"\n if [ $? -ne 0 ]"}]}