{"sha": "39b0e7928579c4ce3a42e849695f9380b7869d62", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5YjBlNzkyODU3OWM0Y2UzYTQyZTg0OTY5NWY5MzgwYjc4NjlkNjI=", "commit": {"author": {"name": "Julian Wollersberger", "email": "julian.wollersberger@gmx.at", "date": "2020-10-12T14:04:49Z"}, "committer": {"name": "Julian Wollersberger", "email": "julian.wollersberger@gmx.at", "date": "2020-10-12T14:04:49Z"}, "message": "Remove generic argument from `QueryConfig`.", "tree": {"sha": "fc9c47f55bac3ea2c9e813cf1fbbef959e23cea4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc9c47f55bac3ea2c9e813cf1fbbef959e23cea4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/39b0e7928579c4ce3a42e849695f9380b7869d62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/39b0e7928579c4ce3a42e849695f9380b7869d62", "html_url": "https://github.com/rust-lang/rust/commit/39b0e7928579c4ce3a42e849695f9380b7869d62", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/39b0e7928579c4ce3a42e849695f9380b7869d62/comments", "author": null, "committer": null, "parents": [{"sha": "fc3d8e3fccb86d6798ce89ca9eb28679908dc526", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc3d8e3fccb86d6798ce89ca9eb28679908dc526", "html_url": "https://github.com/rust-lang/rust/commit/fc3d8e3fccb86d6798ce89ca9eb28679908dc526"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "76c7b8f1253caa461ff3338078142ffeffb6cf7e", "filename": "compiler/rustc_middle/src/ty/query/plumbing.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/39b0e7928579c4ce3a42e849695f9380b7869d62/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39b0e7928579c4ce3a42e849695f9380b7869d62/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fquery%2Fplumbing.rs?ref=39b0e7928579c4ce3a42e849695f9380b7869d62", "patch": "@@ -346,7 +346,7 @@ macro_rules! define_queries_inner {\n             $(pub type $name<$tcx> = $V;)*\n         }\n \n-        $(impl<$tcx> QueryConfig<TyCtxt<$tcx>> for queries::$name<$tcx> {\n+        $(impl<$tcx> QueryConfig for queries::$name<$tcx> {\n             type Key = $($K)*;\n             type Value = $V;\n             type Stored = <\n@@ -447,7 +447,7 @@ macro_rules! define_queries_inner {\n             #[inline(always)]\n             #[must_use]\n             pub fn $name(self, key: query_helper_param_ty!($($K)*))\n-                -> <queries::$name<$tcx> as QueryConfig<TyCtxt<$tcx>>>::Stored\n+                -> <queries::$name<$tcx> as QueryConfig>::Stored\n             {\n                 self.at(DUMMY_SP).$name(key.into_query_param())\n             })*\n@@ -486,7 +486,7 @@ macro_rules! define_queries_inner {\n             $($(#[$attr])*\n             #[inline(always)]\n             pub fn $name(self, key: query_helper_param_ty!($($K)*))\n-                -> <queries::$name<$tcx> as QueryConfig<TyCtxt<$tcx>>>::Stored\n+                -> <queries::$name<$tcx> as QueryConfig>::Stored\n             {\n                 get_query::<queries::$name<'_>, _>(self.tcx, self.span, key.into_query_param())\n             })*"}, {"sha": "423b1fab143bf1edce0c68ca137b6e14fd981a26", "filename": "compiler/rustc_query_system/src/query/config.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/39b0e7928579c4ce3a42e849695f9380b7869d62/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/39b0e7928579c4ce3a42e849695f9380b7869d62/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fconfig.rs?ref=39b0e7928579c4ce3a42e849695f9380b7869d62", "patch": "@@ -12,9 +12,7 @@ use std::borrow::Cow;\n use std::fmt::Debug;\n use std::hash::Hash;\n \n-// The parameter `CTX` is required in librustc_middle:\n-// implementations may need to access the `'tcx` lifetime in `CTX = TyCtxt<'tcx>`.\n-pub trait QueryConfig<CTX> {\n+pub trait QueryConfig {\n     const NAME: &'static str;\n     const CATEGORY: ProfileCategory;\n \n@@ -70,7 +68,7 @@ impl<CTX: QueryContext, K, V> QueryVtable<CTX, K, V> {\n     }\n }\n \n-pub trait QueryAccessors<CTX: QueryContext>: QueryConfig<CTX> {\n+pub trait QueryAccessors<CTX: QueryContext>: QueryConfig {\n     const ANON: bool;\n     const EVAL_ALWAYS: bool;\n     const DEP_KIND: CTX::DepKind;"}]}