{"sha": "dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkMmU4MDQwYTM1ODgzNTc0YWUwYzRjYzdhNGU4ODdlY2I2NjQ2OWM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-07T11:32:58Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-07-07T11:32:58Z"}, "message": "Auto merge of #59800 - Zoxc:less-dylibs, r=alexcrichton\n\nrustc: Remove `dylib` crate type from most rustc crates\n\nRevival of https://github.com/rust-lang/rust/pull/56987\n\ncc @alexcrichton\nr? @michaelwoerister", "tree": {"sha": "2df3e6dea1f773c9393c9feee18933759a665896", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2df3e6dea1f773c9393c9feee18933759a665896"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "html_url": "https://github.com/rust-lang/rust/commit/dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbeed58adee2ef046b46b252980f86672f9bfc4c", "url": "https://api.github.com/repos/rust-lang/rust/commits/dbeed58adee2ef046b46b252980f86672f9bfc4c", "html_url": "https://github.com/rust-lang/rust/commit/dbeed58adee2ef046b46b252980f86672f9bfc4c"}, {"sha": "7198687bb2df13a3298ef1e8f594753073d6b9e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/7198687bb2df13a3298ef1e8f594753073d6b9e8", "html_url": "https://github.com/rust-lang/rust/commit/7198687bb2df13a3298ef1e8f594753073d6b9e8"}], "stats": {"total": 170, "additions": 37, "deletions": 133}, "files": [{"sha": "2efcd0ace1335febc2da45f252d712a7463a8fd8", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 15, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -2691,7 +2691,6 @@ dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"byteorder 1.2.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"chalk-engine 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"flate2 1.0.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fmt_macros 0.0.0\",\n  \"graphviz 0.0.0\",\n  \"jobserver 0.1.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2714,7 +2713,6 @@ dependencies = [\n  \"smallvec 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"syntax 0.0.0\",\n  \"syntax_pos 0.0.0\",\n- \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -2946,7 +2944,6 @@ name = \"rustc_apfloat\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc_cratesio_shim 0.0.0\",\n  \"smallvec 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -2984,6 +2981,7 @@ dependencies = [\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-demangle 0.1.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc_llvm 0.0.0\",\n+ \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3030,15 +3028,6 @@ dependencies = [\n  \"syntax_pos 0.0.0\",\n ]\n \n-[[package]]\n-name = \"rustc_cratesio_shim\"\n-version = \"0.0.0\"\n-dependencies = [\n- \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicode-width 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n [[package]]\n name = \"rustc_data_structures\"\n version = \"0.0.0\"\n@@ -3054,7 +3043,6 @@ dependencies = [\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-rayon 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-rayon-core 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc_cratesio_shim 0.0.0\",\n  \"serialize 0.0.0\",\n  \"smallvec 0.6.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"stable_deref_trait 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -3103,7 +3091,6 @@ dependencies = [\n  \"annotate-snippets 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"atty 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc_cratesio_shim 0.0.0\",\n  \"rustc_data_structures 0.0.0\",\n  \"serialize 0.0.0\",\n  \"syntax_pos 0.0.0\",\n@@ -3333,7 +3320,6 @@ version = \"0.0.0\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc_cratesio_shim 0.0.0\",\n  \"rustc_data_structures 0.0.0\",\n  \"serialize 0.0.0\",\n  \"syntax_pos 0.0.0\","}, {"sha": "2643912f6d7d6caed2619450ef7307be05d3b332", "filename": "src/libarena/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibarena%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibarena%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibarena%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"arena\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "a95193b85952f80e0fe43c33380935966a8f5f63", "filename": "src/libfmt_macros/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibfmt_macros%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibfmt_macros%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibfmt_macros%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -11,3 +11,4 @@ crate-type = [\"dylib\"]\n \n [dependencies]\n syntax_pos = { path = \"../libsyntax_pos\" }\n+"}, {"sha": "4a6e41f76031994dc7119d196f8a1cba5ab03eab", "filename": "src/libgraphviz/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibgraphviz%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibgraphviz%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgraphviz%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,4 +7,3 @@ edition = \"2018\"\n [lib]\n name = \"graphviz\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]"}, {"sha": "b6f3bc62dfd294aa859039dbb715efe01c793ad3", "filename": "src/librustc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 31, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n arena = { path = \"../libarena\" }\n@@ -37,33 +37,3 @@ chalk-engine = { version = \"0.9.0\", default-features=false }\n rustc_fs_util = { path = \"../librustc_fs_util\" }\n smallvec = { version = \"0.6.7\", features = [\"union\", \"may_dangle\"] }\n measureme = \"0.3\"\n-\n-# Note that these dependencies are a lie, they're just here to get linkage to\n-# work.\n-#\n-# We're creating a bunch of dylibs for the compiler but we're also compiling a\n-# bunch of crates.io crates. Everything in the compiler is compiled as an\n-# rlib/dylib pair but all crates.io crates tend to just be rlibs. This means\n-# we've got a problem for dependency graphs that look like:\n-#\n-#           foo - rustc_codegen_llvm\n-#         /                  \\\n-#   rustc                     ---- rustc_driver\n-#         \\                     /\n-#           foo - rustc_metadata\n-#\n-# Here the crate `foo` is linked into the `rustc_codegen_llvm` and the\n-# `rustc_metadata` dylibs, meaning we've got duplicate copies! When we then\n-# go to link `rustc_driver` the compiler notices this and gives us a compiler\n-# error.\n-#\n-# To work around this problem we just add these crates.io dependencies to the\n-# `rustc` crate which is a shared dependency above. That way the crate `foo`\n-# shows up in the dylib for the `rustc` crate, deduplicating it and allowing\n-# crates like `rustc_codegen_llvm` to use `foo` *through* the `rustc` crate.\n-#\n-# tl;dr; this is not needed to get `rustc` to compile, but if you remove it then\n-#        later crate stop compiling. If you can remove this and everything\n-#        compiles, then please feel free to do so!\n-flate2 = \"1.0\"\n-tempfile = \"3.0\""}, {"sha": "dc26140ace5a583e953b9450744a3ddfda552f71", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -46,7 +46,6 @@\n #![feature(extern_types)]\n #![feature(nll)]\n #![feature(non_exhaustive)]\n-#![feature(proc_macro_internals)]\n #![feature(optin_builtin_traits)]\n #![feature(range_is_empty)]\n #![feature(rustc_diagnostic_macros)]\n@@ -90,10 +89,8 @@ extern crate serialize as rustc_serialize;\n \n #[macro_use] extern crate smallvec;\n \n-// Note that librustc doesn't actually depend on these crates, see the note in\n-// `Cargo.toml` for this crate about why these are here.\n-#[allow(unused_extern_crates)]\n-extern crate flate2;\n+// Use the test crate here so we depend on getopts through it. This allow tools to link to both\n+// librustc_driver and libtest.\n #[allow(unused_extern_crates)]\n extern crate test;\n "}, {"sha": "a964f323c9e7d06214eb8831b2fbbc81a13bee58", "filename": "src/librustc_allocator/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_allocator%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_allocator%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_allocator%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -6,7 +6,6 @@ edition = \"2018\"\n \n [lib]\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n \n [dependencies]"}, {"sha": "af6c2feed0072a9023fff52e129c1921abdcaa7c", "filename": "src/librustc_apfloat/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_apfloat%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_apfloat%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_apfloat%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -10,5 +10,4 @@ path = \"lib.rs\"\n \n [dependencies]\n bitflags = \"1.0\"\n-rustc_cratesio_shim = { path = \"../librustc_cratesio_shim\" }\n smallvec = { version = \"0.6.7\", features = [\"union\", \"may_dangle\"] }"}, {"sha": "ceade5d2788380841ab4d1d1ead04fb66ea91f3c", "filename": "src/librustc_apfloat/lib.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_apfloat%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_apfloat%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_apfloat%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -35,9 +35,6 @@\n #![deny(rust_2018_idioms)]\n \n #![feature(nll)]\n-// See librustc_cratesio_shim/Cargo.toml for a comment explaining this.\n-#[allow(unused_extern_crates)]\n-extern crate rustc_cratesio_shim;\n \n use std::cmp::Ordering;\n use std::fmt;"}, {"sha": "e9abc17202e762faf04eabe6e0768a65534f93b9", "filename": "src/librustc_borrowck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_borrowck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_borrowck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,8 +7,8 @@ edition = \"2018\"\n [lib]\n name = \"rustc_borrowck\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n+doctest = false\n \n [dependencies]\n log = \"0.4\""}, {"sha": "291d32a06814d2195ea1ef480c7d7dae9b10a656", "filename": "src/librustc_codegen_llvm/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_llvm%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_llvm%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -13,6 +13,7 @@ test = false\n [dependencies]\n cc = \"1.0.1\" # Used to locate MSVC\n num_cpus = \"1.0\"\n+tempfile = \"3.0\"\n rustc-demangle = \"0.1.15\"\n rustc_llvm = { path = \"../librustc_llvm\" }\n memmap = \"0.6\""}, {"sha": "0f0b9f279175ce39b598aa3dc90a525ce50b715e", "filename": "src/librustc_codegen_llvm/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -39,6 +39,7 @@ extern crate rustc_incremental;\n extern crate rustc_codegen_utils;\n extern crate rustc_codegen_ssa;\n extern crate rustc_fs_util;\n+extern crate rustc_driver as _;\n \n #[macro_use] extern crate log;\n #[macro_use] extern crate syntax;"}, {"sha": "343596feed25f0d0fe69616e74de0716a7b1dbbd", "filename": "src/librustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_codegen_ssa\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n \n [dependencies]"}, {"sha": "d93589ea84be0b72eed3cb3f1df7ee9dbbfc60ae", "filename": "src/librustc_codegen_utils/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_utils%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_codegen_utils%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_utils%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_codegen_utils\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n \n [dependencies]"}, {"sha": "6bdfbe09354b40530cb730696380e65cfc7fb664", "filename": "src/librustc_cratesio_shim/Cargo.toml", "status": "removed", "additions": 0, "deletions": 26, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/dbeed58adee2ef046b46b252980f86672f9bfc4c/src%2Flibrustc_cratesio_shim%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dbeed58adee2ef046b46b252980f86672f9bfc4c/src%2Flibrustc_cratesio_shim%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_cratesio_shim%2FCargo.toml?ref=dbeed58adee2ef046b46b252980f86672f9bfc4c", "patch": "@@ -1,26 +0,0 @@\n-# This crate exists to allow rustc to link certain crates from crates.io into\n-# the distribution. This doesn't work normally because:\n-#\n-# - Cargo always builds dependencies as rlibs:\n-#   https://github.com/rust-lang/cargo/issues/629\n-# - rustc wants to avoid multiple definitions of the same symbol, so it refuses\n-#   to link multiple dylibs containing the same rlib\n-# - multiple dylibs depend on the same crates.io crates\n-#\n-# This solution works by including all the conflicting rlibs in a single dylib,\n-# which is then linked into all dylibs that depend on these crates.io crates.\n-# The result is that each rlib only appears once, and things work!\n-\n-[package]\n-authors = [\"The Rust Project Developers\"]\n-name = \"rustc_cratesio_shim\"\n-version = \"0.0.0\"\n-edition = \"2018\"\n-\n-[lib]\n-crate-type = [\"dylib\"]\n-\n-[dependencies]\n-bitflags = \"1.0\"\n-log = \"0.4\"\n-unicode-width = \"0.1.4\""}, {"sha": "4c170f4f5f6f98bec42cd3d87e0d55905e4ad2a2", "filename": "src/librustc_cratesio_shim/src/lib.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/dbeed58adee2ef046b46b252980f86672f9bfc4c/src%2Flibrustc_cratesio_shim%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbeed58adee2ef046b46b252980f86672f9bfc4c/src%2Flibrustc_cratesio_shim%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_cratesio_shim%2Fsrc%2Flib.rs?ref=dbeed58adee2ef046b46b252980f86672f9bfc4c", "patch": "@@ -1,11 +0,0 @@\n-#![deny(rust_2018_idioms)]\n-\n-// See Cargo.toml for a comment explaining this crate.\n-#![allow(unused_extern_crates)]\n-\n-#![feature(nll)]\n-\n-extern crate bitflags;\n-extern crate log;\n-extern crate proc_macro;\n-extern crate unicode_width;"}, {"sha": "acddb3448ca608ea974d9638a8892117b4df2faa", "filename": "src/librustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,15 +7,14 @@ edition = \"2018\"\n [lib]\n name = \"rustc_data_structures\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n ena = \"0.13\"\n indexmap = \"1\"\n log = \"0.4\"\n jobserver_crate = { version = \"0.1.13\", package = \"jobserver\" }\n lazy_static = \"1\"\n-rustc_cratesio_shim = { path = \"../librustc_cratesio_shim\" }\n serialize = { path = \"../libserialize\" }\n graphviz = { path = \"../libgraphviz\" }\n cfg-if = \"0.1.2\""}, {"sha": "b479643a5e8cd3d18207d41e98b67fed69333b29", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -38,10 +38,6 @@ extern crate libc;\n #[macro_use]\n extern crate cfg_if;\n \n-// See librustc_cratesio_shim/Cargo.toml for a comment explaining this.\n-#[allow(unused_extern_crates)]\n-extern crate rustc_cratesio_shim;\n-\n pub use rustc_serialize::hex::ToHex;\n \n #[inline(never)]"}, {"sha": "4df9632cce26bd406b5ea4c576bad3f22bebc419", "filename": "src/librustc_errors/Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_errors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_errors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,14 +7,13 @@ edition = \"2018\"\n [lib]\n name = \"rustc_errors\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n log = \"0.4\"\n serialize = { path = \"../libserialize\" }\n syntax_pos = { path = \"../libsyntax_pos\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n-rustc_cratesio_shim = { path = \"../librustc_cratesio_shim\" }\n unicode-width = \"0.1.4\"\n atty = \"0.2\"\n termcolor = \"1.0\""}, {"sha": "e74e3809927a0aecde5768c0d0db2e9a0ca296b7", "filename": "src/librustc_fs_util/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_fs_util%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_fs_util%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_fs_util%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,5 @@ edition = \"2018\"\n [lib]\n name = \"rustc_fs_util\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]"}, {"sha": "9678cb4f655453a1b5860a5fa2c178f8d01367ea", "filename": "src/librustc_incremental/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_incremental%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_incremental%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc_incremental\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n graphviz = { path = \"../libgraphviz\" }"}, {"sha": "82880d2198712f076296bf0a769bfc1107d34542", "filename": "src/librustc_interface/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_interface%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_interface%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc_interface\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n log = \"0.4\""}, {"sha": "041d0aaead913724cda5ab81edd5f145a7582b36", "filename": "src/librustc_lint/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_lint%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_lint%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_lint\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n log = \"0.4\""}, {"sha": "bdf6b0918573555ae51312e47f5e582e92318580", "filename": "src/librustc_llvm/lib.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -4,10 +4,6 @@\n \n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\")]\n \n-// See librustc_cratesio_shim/Cargo.toml for a comment explaining this.\n-#[allow(unused_extern_crates)]\n-extern crate rustc_cratesio_shim;\n-\n // NOTE: This crate only exists to allow linking on mingw targets.\n \n /// Initialize targets enabled by the build script via `cfg(llvm_component = \"...\")`."}, {"sha": "e5c9f1bf2057b0c13db86a20807a7493602722f9", "filename": "src/librustc_metadata/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_metadata%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_metadata%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc_metadata\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n flate2 = \"1.0\""}, {"sha": "695bf1f077cd29689ac147bc4338572b47f98c99", "filename": "src/librustc_mir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_mir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_mir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc_mir\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n arena = { path = \"../libarena\" }"}, {"sha": "de2476775b07e361ae1fccba0d13934d2f140999", "filename": "src/librustc_passes/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_passes\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n log = \"0.4\""}, {"sha": "7486281c1eac187196cb9b85c101bbcb9d48dd1c", "filename": "src/librustc_plugin/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_plugin%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_plugin%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -8,7 +8,7 @@ edition = \"2018\"\n [lib]\n name = \"rustc_plugin\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n rustc = { path = \"../librustc\" }"}, {"sha": "6520cdc306203eb3cdffeecd458e016348cd43f5", "filename": "src/librustc_plugin/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_plugin%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_plugin%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_plugin%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -17,6 +17,7 @@\n //! #![feature(rustc_private)]\n //!\n //! extern crate rustc_plugin;\n+//! extern crate rustc_driver;\n //! extern crate syntax;\n //! extern crate syntax_pos;\n //!"}, {"sha": "7cf3a5d6dcde1956c46527711f674ad950c86885", "filename": "src/librustc_privacy/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_privacy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_privacy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_privacy\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n rustc = { path = \"../librustc\" }"}, {"sha": "548f982fe3bf00ccb9c2517e154ead04ef194f38", "filename": "src/librustc_resolve/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_resolve%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_resolve%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,8 +7,8 @@ edition = \"2018\"\n [lib]\n name = \"rustc_resolve\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n+doctest = false\n \n [dependencies]\n bitflags = \"1.0\""}, {"sha": "88bb76d2aba3a36aad94e24be13aa4f3ea792c07", "filename": "src/librustc_save_analysis/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_save_analysis%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_save_analysis%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_save_analysis\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n log = \"0.4\""}, {"sha": "f1b21365e4bd4a7f9f10ff4def2a7dcc7f977192", "filename": "src/librustc_target/Cargo.toml", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_target%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_target%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,12 +7,10 @@ edition = \"2018\"\n [lib]\n name = \"rustc_target\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n bitflags = \"1.0\"\n log = \"0.4\"\n-rustc_cratesio_shim = { path = \"../librustc_cratesio_shim\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n serialize = { path = \"../libserialize\" }\n syntax_pos = { path = \"../libsyntax_pos\" }"}, {"sha": "c1ec4e59ef2399580196f073fc2c6f1048609cad", "filename": "src/librustc_target/lib.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_target%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_target%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Flib.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -23,10 +23,6 @@\n #[allow(unused_extern_crates)]\n extern crate serialize as rustc_serialize; // used by deriving\n \n-// See librustc_cratesio_shim/Cargo.toml for a comment explaining this.\n-#[allow(unused_extern_crates)]\n-extern crate rustc_cratesio_shim;\n-\n #[macro_use]\n extern crate rustc_data_structures;\n "}, {"sha": "bb28ac839a54445821dc7390c6fa5bcf193ad188", "filename": "src/librustc_traits/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_traits%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_traits%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_traits%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"rustc_traits\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n \n [dependencies]\n bitflags = \"1.0\""}, {"sha": "ac3966676838aac88d3979275e0b9234a3a94f5f", "filename": "src/librustc_typeck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_typeck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibrustc_typeck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,8 +7,8 @@ edition = \"2018\"\n [lib]\n name = \"rustc_typeck\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n test = false\n+doctest = false\n \n [dependencies]\n arena = { path = \"../libarena\" }"}, {"sha": "c302bcf95dcadafe982aa26ead34a99fb217b3bb", "filename": "src/libserialize/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibserialize%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibserialize%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,6 @@ edition = \"2018\"\n [lib]\n name = \"serialize\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\", \"rlib\"]\n \n [dependencies]\n indexmap = \"1\""}, {"sha": "c5daa6564767e617511bbaf61b8c9e43532d2cc8", "filename": "src/libsyntax/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"syntax\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n bitflags = \"1.0\""}, {"sha": "eafbe6371a3c56f3332f983227643a74025edaf4", "filename": "src/libsyntax_ext/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax_ext%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax_ext%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"syntax_ext\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n fmt_macros = { path = \"../libfmt_macros\" }"}, {"sha": "eebd25d1fafd82e37c53277f66474313255db5b1", "filename": "src/libsyntax_pos/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax_pos%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Flibsyntax_pos%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_pos%2FCargo.toml?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,7 +7,7 @@ edition = \"2018\"\n [lib]\n name = \"syntax_pos\"\n path = \"lib.rs\"\n-crate-type = [\"dylib\"]\n+doctest = false\n \n [dependencies]\n serialize = { path = \"../libserialize\" }"}, {"sha": "3c4f2cd541f4eec09859ac0677a4f11cafa604a2", "filename": "src/test/run-make-fulldeps/issue-19371/foo.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-make-fulldeps%2Fissue-19371%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-make-fulldeps%2Fissue-19371%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fissue-19371%2Ffoo.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -2,6 +2,8 @@\n \n extern crate rustc;\n extern crate rustc_interface;\n+#[allow(unused_extern_crates)]\n+extern crate rustc_driver;\n extern crate syntax;\n \n use rustc::session::DiagnosticOutput;"}, {"sha": "ad42ee1d1ec1eb760fbd1fda4fc26d53e2d6de51", "filename": "src/test/run-pass-fulldeps/auxiliary/issue-40001-plugin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -4,6 +4,7 @@\n #[macro_use]\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n extern crate syntax;\n \n use rustc_plugin::Registry;"}, {"sha": "2826ae75bee2aca14cb4f5e46a420938a0f77394", "filename": "src/test/run-pass-fulldeps/auxiliary/lint-for-crate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint-for-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint-for-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint-for-crate.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n #[macro_use] extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n extern crate syntax;\n \n use rustc::lint::{LateContext, LintContext, LintPass, LateLintPass, LateLintPassObject, LintArray};"}, {"sha": "1832fee4347172ab2d0c30f2efaf44f6efaa435c", "filename": "src/test/run-pass-fulldeps/auxiliary/llvm-pass-plugin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fllvm-pass-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fllvm-pass-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fllvm-pass-plugin.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc_plugin::Registry;\n "}, {"sha": "6e446241d55791203527b71a0d83bf4e0a44857d", "filename": "src/test/run-pass-fulldeps/auxiliary/lto-syntax-extension-plugin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc_plugin::Registry;\n "}, {"sha": "d9b2740e4763840f0d496d7f2309039e48831d67", "filename": "src/test/run-pass-fulldeps/auxiliary/macro-crate-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fmacro-crate-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fmacro-crate-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fmacro-crate-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,7 @@\n extern crate syntax;\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n extern crate syntax_pos;\n extern crate proc_macro;\n "}, {"sha": "c22605afd0c8d270d9bf47a4ab93bc86a2a6f768", "filename": "src/test/run-pass-fulldeps/auxiliary/outlive-expansion-phase.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use std::any::Any;\n use std::cell::RefCell;"}, {"sha": "7cbfef52b4aad4de7f4e0671f2229e508cd501c8", "filename": "src/test/run-pass-fulldeps/auxiliary/plugin-args.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fplugin-args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fplugin-args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fplugin-args.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,7 @@ extern crate syntax;\n extern crate syntax_pos;\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use std::borrow::ToOwned;\n use syntax::ast;"}, {"sha": "07302b6e68b31ae1d4a7729a30a774fb9d24b815", "filename": "src/test/run-pass-fulldeps/auxiliary/roman-numerals.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Froman-numerals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Froman-numerals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Froman-numerals.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -13,6 +13,7 @@ extern crate syntax;\n extern crate syntax_pos;\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use syntax::parse::token::{self, Token};\n use syntax::tokenstream::TokenTree;"}, {"sha": "86441b4f735488600262f1303e92ede704913c0d", "filename": "src/test/ui-fulldeps/auxiliary/attr-plugin-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fattr-plugin-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fattr-plugin-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fattr-plugin-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,7 @@ extern crate syntax;\n \n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use syntax::symbol::Symbol;\n use syntax::feature_gate::AttributeType;"}, {"sha": "a811edd37c67dfb4ee5cfa400f44c21bfb64f81f", "filename": "src/test/ui-fulldeps/auxiliary/lint-for-crate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-for-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-for-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-for-crate.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n #[macro_use] extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n extern crate syntax;\n \n use rustc::lint::{LateContext, LintContext, LintPass, LateLintPass, LateLintPassObject, LintArray};"}, {"sha": "3206ddee6247574ced57268926d38ebf4df9bf26", "filename": "src/test/ui-fulldeps/auxiliary/lint-group-plugin-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-group-plugin-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-group-plugin-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-group-plugin-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,7 @@\n #[macro_use]\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc::hir;\n use rustc::lint::{LateContext, LintContext, LintPass, LateLintPass, LateLintPassObject, LintArray};"}, {"sha": "4d57be49ca061c21e2a479036d062bd96b09117b", "filename": "src/test/ui-fulldeps/auxiliary/lint-plugin-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-plugin-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-plugin-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-plugin-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -9,6 +9,7 @@ extern crate syntax;\n #[macro_use]\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc::lint::{EarlyContext, LintContext, LintPass, EarlyLintPass,\n                   EarlyLintPassObject, LintArray};"}, {"sha": "ea7c75fbbe5d587ad486ee845e8f7b33f3c27d59", "filename": "src/test/ui-fulldeps/auxiliary/lint-tool-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-tool-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-tool-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint-tool-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -7,6 +7,7 @@ extern crate syntax;\n #[macro_use]\n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc::lint::{EarlyContext, EarlyLintPass, LintArray, LintContext, LintPass};\n use rustc_plugin::Registry;"}, {"sha": "7a91b54bf6d81161dab81ed441ff40ac5a27df8c", "filename": "src/test/ui-fulldeps/auxiliary/rlib-crate-test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd2e8040a35883574ae0c4cc7a4e887ecb66469c/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs?ref=dd2e8040a35883574ae0c4cc7a4e887ecb66469c", "patch": "@@ -5,6 +5,7 @@\n \n extern crate rustc;\n extern crate rustc_plugin;\n+extern crate rustc_driver;\n \n use rustc_plugin::Registry;\n "}]}