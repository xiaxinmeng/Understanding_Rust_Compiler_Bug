{"sha": "fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjMTI1NzdmZGQ3OTY5ZjVlOWExMzY5MTVmNmVmNDhlNjdhY2QzYmM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T00:17:16Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T00:23:20Z"}, "message": "Add makefile rules to run compile-fail tests on .rc files\n\nThere's even more duplication now, but I'm reluctant to touch it since it's\neasy to subtly break the build rules", "tree": {"sha": "ac9f88befd0e76f153af0e0bc3b127c99a3a1d76", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac9f88befd0e76f153af0e0bc3b127c99a3a1d76"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "html_url": "https://github.com/rust-lang/rust/commit/fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc12577fdd7969f5e9a136915f6ef48e67acd3bc/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b8fba5f34e132c305811dcca8cf7d38b958506a", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b8fba5f34e132c305811dcca8cf7d38b958506a", "html_url": "https://github.com/rust-lang/rust/commit/4b8fba5f34e132c305811dcca8cf7d38b958506a"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "e2da56970cc17c5fc68a61870b85f9172606cf02", "filename": "mk/tests.mk", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/fc12577fdd7969f5e9a136915f6ef48e67acd3bc/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/fc12577fdd7969f5e9a136915f6ef48e67acd3bc/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=fc12577fdd7969f5e9a136915f6ef48e67acd3bc", "patch": "@@ -264,3 +264,27 @@ test/compile-fail/%.stage2.out.tmp: test/compile-fail/%.rs $(SREQ2)\n \t$(STAGE2) -c -o $(@:.o=$(X)) $< >$@ 2>&1; test $$? -ne 0\n \t$(Q)grep --text --quiet \\\n       \"$$(grep error-pattern $< | cut -d : -f 2- | tr -d '\\n\\r')\" $@\n+\n+test/compile-fail/%.stage0.out.tmp: test/compile-fail/%.rc $(SREQ0)\n+\t@$(call E, compile-fail [stage0]: $@)\n+\t$(Q)grep -q error-pattern $<\n+\t$(Q)rm -f $@\n+\t$(STAGE0) -c -o $(@:.o=$(X)) $< >$@ 2>&1; test $$? -ne 0\n+\t$(Q)grep --text --quiet \\\n+      \"$$(grep error-pattern $< | cut -d : -f 2- | tr -d '\\n\\r')\" $@\n+\n+test/compile-fail/%.stage1.out.tmp: test/compile-fail/%.rc $(SREQ1)\n+\t@$(call E, compile-fail [stage1]: $@)\n+\t$(Q)grep -q error-pattern $<\n+\t$(Q)rm -f $@\n+\t$(STAGE1) -c -o $(@:.o=$(X)) $< >$@ 2>&1; test $$? -ne 0\n+\t$(Q)grep --text --quiet \\\n+      \"$$(grep error-pattern $< | cut -d : -f 2- | tr -d '\\n\\r')\" $@\n+\n+test/compile-fail/%.stage2.out.tmp: test/compile-fail/%.rc $(SREQ2)\n+\t@$(call E, compile-fail [stage2]: $@)\n+\t$(Q)grep -q error-pattern $<\n+\t$(Q)rm -f $@\n+\t$(STAGE2) -c -o $(@:.o=$(X)) $< >$@ 2>&1; test $$? -ne 0\n+\t$(Q)grep --text --quiet \\\n+      \"$$(grep error-pattern $< | cut -d : -f 2- | tr -d '\\n\\r')\" $@"}]}