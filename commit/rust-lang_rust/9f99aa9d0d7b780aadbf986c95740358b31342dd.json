{"sha": "9f99aa9d0d7b780aadbf986c95740358b31342dd", "node_id": "C_kwDOAAsO6NoAKDlmOTlhYTlkMGQ3Yjc4MGFhZGJmOTg2Yzk1NzQwMzU4YjMxMzQyZGQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-23T09:43:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-23T09:43:52Z"}, "message": "Auto merge of #2505 - RalfJung:ui-test, r=oli-obk\n\ncope with rustc aborting due to a signal\n\n`status.code().unwrap()` will panic when the process is aborted due to a signal.  Let's not do that.", "tree": {"sha": "a2cc99b68deb64f594c2f077e578c7a91da4ac67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2cc99b68deb64f594c2f077e578c7a91da4ac67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f99aa9d0d7b780aadbf986c95740358b31342dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f99aa9d0d7b780aadbf986c95740358b31342dd", "html_url": "https://github.com/rust-lang/rust/commit/9f99aa9d0d7b780aadbf986c95740358b31342dd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f99aa9d0d7b780aadbf986c95740358b31342dd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "53138c6fb7d0bad110f27ff022bfe9c51999bd0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/53138c6fb7d0bad110f27ff022bfe9c51999bd0a", "html_url": "https://github.com/rust-lang/rust/commit/53138c6fb7d0bad110f27ff022bfe9c51999bd0a"}, {"sha": "1914b615ff77904308b7d0e5481fe5f053830444", "url": "https://api.github.com/repos/rust-lang/rust/commits/1914b615ff77904308b7d0e5481fe5f053830444", "html_url": "https://github.com/rust-lang/rust/commit/1914b615ff77904308b7d0e5481fe5f053830444"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "c87ac938ffd22661a17475b7b08f755650bc6bab", "filename": "ui_test/src/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f99aa9d0d7b780aadbf986c95740358b31342dd/ui_test%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f99aa9d0d7b780aadbf986c95740358b31342dd/ui_test%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Flib.rs?ref=9f99aa9d0d7b780aadbf986c95740358b31342dd", "patch": "@@ -272,7 +272,7 @@ pub fn run_tests(mut config: Config) -> Result<()> {\n                     }\n                     Error::ErrorsWithoutPattern { path: None, msgs } => {\n                         eprintln!(\n-                            \"There were {} unmatched diagnostics that occurred outside the testfile and had not pattern\",\n+                            \"There were {} unmatched diagnostics that occurred outside the testfile and had no pattern\",\n                             msgs.len(),\n                         );\n                         for Message { level, message } in msgs {\n@@ -629,8 +629,8 @@ pub enum Mode {\n \n impl Mode {\n     fn ok(self, status: ExitStatus) -> Errors {\n-        match (status.code().unwrap(), self) {\n-            (1, Mode::Fail) | (101, Mode::Panic) | (0, Mode::Pass) => vec![],\n+        match (status.code(), self) {\n+            (Some(1), Mode::Fail) | (Some(101), Mode::Panic) | (Some(0), Mode::Pass) => vec![],\n             _ => vec![Error::ExitStatus(self, status)],\n         }\n     }"}]}