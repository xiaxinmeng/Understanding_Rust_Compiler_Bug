{"sha": "a7563a30c0576761a0770b196e9effbaaf846be8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3NTYzYTMwYzA1NzY3NjFhMDc3MGIxOTZlOWVmZmJhYWY4NDZiZTg=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-03-07T16:09:41Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-03-07T16:46:18Z"}, "message": "fix bad logic", "tree": {"sha": "58611cd2e4e51ad61d49ba9b2a1678733c7c8add", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58611cd2e4e51ad61d49ba9b2a1678733c7c8add"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7563a30c0576761a0770b196e9effbaaf846be8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7563a30c0576761a0770b196e9effbaaf846be8", "html_url": "https://github.com/rust-lang/rust/commit/a7563a30c0576761a0770b196e9effbaaf846be8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7563a30c0576761a0770b196e9effbaaf846be8/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c41ddf177380e96e873d625cb7ce87468eed85e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/c41ddf177380e96e873d625cb7ce87468eed85e4", "html_url": "https://github.com/rust-lang/rust/commit/c41ddf177380e96e873d625cb7ce87468eed85e4"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "c8d47339fb36572432369715402c1a2a1fb7503b", "filename": "src/librustc_errors/diagnostic_builder.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7563a30c0576761a0770b196e9effbaaf846be8/src%2Flibrustc_errors%2Fdiagnostic_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7563a30c0576761a0770b196e9effbaaf846be8/src%2Flibrustc_errors%2Fdiagnostic_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fdiagnostic_builder.rs?ref=a7563a30c0576761a0770b196e9effbaaf846be8", "patch": "@@ -103,7 +103,9 @@ impl<'a> DiagnosticBuilder<'a> {\n     /// Buffers the diagnostic for later emission, unless handler\n     /// has disabled such buffering.\n     pub fn buffer(mut self, buffered_diagnostics: &mut Vec<Diagnostic>) {\n-        if self.handler.flags.dont_buffer_diagnostics || self.handler.treat_err_as_bug() {\n+        if self.handler.flags.dont_buffer_diagnostics ||\n+            self.handler.flags.treat_err_as_bug.is_some()\n+        {\n             self.emit();\n             return;\n         }"}, {"sha": "7c7698ddd3d7397e98a7978be053af234a8a2604", "filename": "src/librustc_errors/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a7563a30c0576761a0770b196e9effbaaf846be8/src%2Flibrustc_errors%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7563a30c0576761a0770b196e9effbaaf846be8/src%2Flibrustc_errors%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Flib.rs?ref=a7563a30c0576761a0770b196e9effbaaf846be8", "patch": "@@ -657,8 +657,7 @@ impl Handler {\n             1 => \"aborting due to previous error\".to_string(),\n             _ => format!(\"aborting due to {} previous errors\", self.err_count())\n         };\n-        let err_as_bug = self.flags.treat_err_as_bug.unwrap_or(0);\n-        if self.err_count() >= err_as_bug {\n+        if self.treat_err_as_bug() {\n             return;\n         }\n "}]}