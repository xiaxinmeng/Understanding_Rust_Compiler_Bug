{"sha": "0e079c2c689b6252154e9df04d067783bfc13224", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlMDc5YzJjNjg5YjYyNTIxNTRlOWRmMDRkMDY3NzgzYmZjMTMyMjQ=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-08-12T15:18:25Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-08-26T22:52:36Z"}, "message": "Remove support for printing HRef in alternate mode\n\nThe alternate mode merely prints out the passed in text which is largely\nuseless (as the text can simply be directly printed).", "tree": {"sha": "e0fd12709041ad76f25f92e8e93dc620bb9b0bf0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e0fd12709041ad76f25f92e8e93dc620bb9b0bf0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e079c2c689b6252154e9df04d067783bfc13224", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e079c2c689b6252154e9df04d067783bfc13224", "html_url": "https://github.com/rust-lang/rust/commit/0e079c2c689b6252154e9df04d067783bfc13224", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e079c2c689b6252154e9df04d067783bfc13224/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95f5698c10dbf92e444abc5334a3b1333b20cb0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/95f5698c10dbf92e444abc5334a3b1333b20cb0f", "html_url": "https://github.com/rust-lang/rust/commit/95f5698c10dbf92e444abc5334a3b1333b20cb0f"}], "stats": {"total": 19, "additions": 8, "deletions": 11}, "files": [{"sha": "182a72b6a4d88ba17bb8accba2814122537926f2", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/0e079c2c689b6252154e9df04d067783bfc13224/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e079c2c689b6252154e9df04d067783bfc13224/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=0e079c2c689b6252154e9df04d067783bfc13224", "patch": "@@ -72,8 +72,8 @@ pub struct WhereClause<'a>{\n }\n \n pub struct HRef<'a> {\n-    pub did: DefId,\n-    pub text: &'a str,\n+    did: DefId,\n+    text: &'a str,\n }\n \n impl<'a> VisSpace<'a> {\n@@ -452,7 +452,7 @@ fn resolved_path(w: &mut fmt::Formatter<'_>, did: DefId, path: &clean::Path,\n         }\n     }\n     if w.alternate() {\n-        write!(w, \"{:#}{:#}\", HRef::new(did, &last.name), last.args)?;\n+        write!(w, \"{}{:#}\", &last.name, last.args)?;\n     } else {\n         let path = if use_absolute {\n             match href(did) {\n@@ -538,14 +538,11 @@ impl<'a> HRef<'a> {\n \n impl<'a> fmt::Display for HRef<'a> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n-        match href(self.did) {\n-            Some((url, shortty, fqp)) => if !f.alternate() {\n-                write!(f, \"<a class=\\\"{}\\\" href=\\\"{}\\\" title=\\\"{} {}\\\">{}</a>\",\n-                       shortty, url, shortty, fqp.join(\"::\"), self.text)\n-            } else {\n-                write!(f, \"{}\", self.text)\n-            },\n-            _ => write!(f, \"{}\", self.text),\n+        if let Some((url, short_ty, fqp)) = href(self.did) {\n+            write!(f, r#\"<a class=\"{}\" href=\"{}\" title=\"{} {}\">{}</a>\"#,\n+                short_ty, url, short_ty, fqp.join(\"::\"), self.text)\n+        } else {\n+            write!(f, \"{}\", self.text)\n         }\n     }\n }"}]}