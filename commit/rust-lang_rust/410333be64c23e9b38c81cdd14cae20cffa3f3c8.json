{"sha": "410333be64c23e9b38c81cdd14cae20cffa3f3c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxMDMzM2JlNjRjMjNlOWIzOGM4MWNkZDE0Y2FlMjBjZmZhM2YzYzg=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2016-03-10T06:13:51Z"}, "committer": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2016-03-10T07:36:39Z"}, "message": "Differentiate \"line\" and \"line number\" variable names.", "tree": {"sha": "7d51a7117466068de8cb9a9a2069e7cf5f12682b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d51a7117466068de8cb9a9a2069e7cf5f12682b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/410333be64c23e9b38c81cdd14cae20cffa3f3c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/410333be64c23e9b38c81cdd14cae20cffa3f3c8", "html_url": "https://github.com/rust-lang/rust/commit/410333be64c23e9b38c81cdd14cae20cffa3f3c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/410333be64c23e9b38c81cdd14cae20cffa3f3c8/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1048b5ab64cceba5ce8edb1f41614e063edb78d", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1048b5ab64cceba5ce8edb1f41614e063edb78d", "html_url": "https://github.com/rust-lang/rust/commit/e1048b5ab64cceba5ce8edb1f41614e063edb78d"}], "stats": {"total": 29, "additions": 14, "deletions": 15}, "files": [{"sha": "c1fbfcda475597f804bd59eca1909e9236ddefb0", "filename": "src/compiletest/errors.rs", "status": "modified", "additions": 12, "deletions": 13, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/410333be64c23e9b38c81cdd14cae20cffa3f3c8/src%2Fcompiletest%2Ferrors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/410333be64c23e9b38c81cdd14cae20cffa3f3c8/src%2Fcompiletest%2Ferrors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Ferrors.rs?ref=410333be64c23e9b38c81cdd14cae20cffa3f3c8", "patch": "@@ -15,7 +15,7 @@ use std::io::prelude::*;\n use std::path::Path;\n \n pub struct ExpectedError {\n-    pub line: usize,\n+    pub line_num: usize,\n     pub kind: String,\n     pub msg: String,\n }\n@@ -53,15 +53,15 @@ pub fn load_errors(testfile: &Path, cfg: Option<&str>) -> Vec<ExpectedError> {\n \n     rdr.lines()\n        .enumerate()\n-       .filter_map(|(line_no, ln)| {\n+       .filter_map(|(line_num, line)| {\n            parse_expected(last_nonfollow_error,\n-                          line_no + 1,\n-                          &ln.unwrap(),\n+                          line_num + 1,\n+                          &line.unwrap(),\n                           &tag)\n                .map(|(which, error)| {\n                    match which {\n                        FollowPrevious(_) => {}\n-                       _ => last_nonfollow_error = Some(error.line),\n+                       _ => last_nonfollow_error = Some(error.line_num),\n                    }\n                    error\n                })\n@@ -91,22 +91,21 @@ fn parse_expected(last_nonfollow_error: Option<usize>,\n                      .skip_while(|c| !c.is_whitespace())\n                      .collect::<String>().trim().to_owned();\n \n-    let (which, line) = if follow {\n+    let (which, line_num) = if follow {\n         assert!(adjusts == 0, \"use either //~| or //~^, not both.\");\n-        let line = last_nonfollow_error.expect(\"encountered //~| without \\\n-                                                preceding //~^ line.\");\n-        (FollowPrevious(line), line)\n+        let line_num = last_nonfollow_error.expect(\"encountered //~| without \\\n+                                                    preceding //~^ line.\");\n+        (FollowPrevious(line_num), line_num)\n     } else {\n         let which =\n             if adjusts > 0 { AdjustBackward(adjusts) } else { ThisLine };\n-        let line = line_num - adjusts;\n-        (which, line)\n+        let line_num = line_num - adjusts;\n+        (which, line_num)\n     };\n \n     debug!(\"line={} tag={:?} which={:?} kind={:?} msg={:?}\",\n            line_num, tag, which, kind, msg);\n-\n-    Some((which, ExpectedError { line: line,\n+    Some((which, ExpectedError { line_num: line_num,\n                                  kind: kind,\n                                  msg: msg, }))\n }"}, {"sha": "8c3ee3fb5f4b6f373da59026ccf244da87bb2bd8", "filename": "src/compiletest/runtest.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/410333be64c23e9b38c81cdd14cae20cffa3f3c8/src%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/410333be64c23e9b38c81cdd14cae20cffa3f3c8/src%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fruntest.rs?ref=410333be64c23e9b38c81cdd14cae20cffa3f3c8", "patch": "@@ -1004,7 +1004,7 @@ fn check_expected_errors(revision: Option<&str>,\n     }\n \n     let prefixes = expected_errors.iter().map(|ee| {\n-        let expected = format!(\"{}:{}:\", testpaths.file.display(), ee.line);\n+        let expected = format!(\"{}:{}:\", testpaths.file.display(), ee.line_num);\n         // On windows just translate all '\\' path separators to '/'\n         expected.replace(r\"\\\", \"/\")\n     }).collect::<Vec<String>>();\n@@ -1076,7 +1076,7 @@ fn check_expected_errors(revision: Option<&str>,\n         if !flag {\n             let ee = &expected_errors[i];\n             error(revision, &format!(\"expected {} on line {} not found: {}\",\n-                                     ee.kind, ee.line, ee.msg));\n+                                     ee.kind, ee.line_num, ee.msg));\n             not_found += 1;\n         }\n     }"}]}