{"sha": "1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2NjFhMGE5OWJhMDlmZjBiMmNjZThhZDk5YzRmMTgxNTAxNjViODA=", "commit": {"author": {"name": "mark", "email": "markm@cs.wisc.edu", "date": "2020-03-22T00:47:23Z"}, "committer": {"name": "mark", "email": "markm@cs.wisc.edu", "date": "2020-03-22T00:47:23Z"}, "message": "convert a couple more errors", "tree": {"sha": "95668527b0f838018296cdbea8b05c4edcdde123", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/95668527b0f838018296cdbea8b05c4edcdde123"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "html_url": "https://github.com/rust-lang/rust/commit/1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/comments", "author": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2daaf2b252040ff542eb42d66043f62c360c4db5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2daaf2b252040ff542eb42d66043f62c360c4db5", "html_url": "https://github.com/rust-lang/rust/commit/2daaf2b252040ff542eb42d66043f62c360c4db5"}], "stats": {"total": 35, "additions": 14, "deletions": 21}, "files": [{"sha": "9a02bebb2355f830be089c3cc779cd208cf88454", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 6, "deletions": 13, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "patch": "@@ -469,18 +469,15 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MissingDoc {\n             return;\n         }\n \n-        let desc = match trait_item.kind {\n-            hir::TraitItemKind::Const(..) => \"an associated constant\",\n-            hir::TraitItemKind::Fn(..) => \"a trait method\",\n-            hir::TraitItemKind::Type(..) => \"an associated type\",\n-        };\n+        let def_id = cx.tcx.hir().local_def_id(trait_item.hir_id);\n+        let (article, desc) = cx.tcx.article_and_description(def_id);\n \n         self.check_missing_docs_attrs(\n             cx,\n             Some(trait_item.hir_id),\n             &trait_item.attrs,\n             trait_item.span,\n-            desc,\n+            &format!(\"{} {}\", article, desc),\n         );\n     }\n \n@@ -490,18 +487,14 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MissingDoc {\n             return;\n         }\n \n-        let desc = match impl_item.kind {\n-            hir::ImplItemKind::Const(..) => \"an associated constant\",\n-            hir::ImplItemKind::Fn(..) => \"a method\",\n-            hir::ImplItemKind::TyAlias(_) => \"an associated type\",\n-            hir::ImplItemKind::OpaqueTy(_) => \"an associated `impl Trait` type\",\n-        };\n+        let def_id = cx.tcx.hir().local_def_id(impl_item.hir_id);\n+        let (article, desc) = cx.tcx.article_and_description(def_id);\n         self.check_missing_docs_attrs(\n             cx,\n             Some(impl_item.hir_id),\n             &impl_item.attrs,\n             impl_item.span,\n-            desc,\n+            &format!(\"{} {}\", article, desc),\n         );\n     }\n "}, {"sha": "bab6f4e9e5e155835c5ed232f2ac4de8799cbab4", "filename": "src/test/ui/lint/lint-missing-doc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.rs?ref=1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "patch": "@@ -50,8 +50,8 @@ trait B {\n }\n \n pub trait C { //~ ERROR: missing documentation for a trait\n-    fn foo(&self); //~ ERROR: missing documentation for a trait method\n-    fn foo_with_impl(&self) {} //~ ERROR: missing documentation for a trait method\n+    fn foo(&self); //~ ERROR: missing documentation for an associated function\n+    fn foo_with_impl(&self) {} //~ ERROR: missing documentation for an associated function\n }\n \n #[allow(missing_docs)]\n@@ -78,7 +78,7 @@ impl Foo {\n }\n \n impl PubFoo {\n-    pub fn foo() {} //~ ERROR: missing documentation for a method\n+    pub fn foo() {} //~ ERROR: missing documentation for an associated function\n     /// dox\n     pub fn foo1() {}\n     fn foo2() {}"}, {"sha": "21da4fae4c161246f6a0ec7446eb27f84b8f43cc", "filename": "src/test/ui/lint/lint-missing-doc.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-missing-doc.stderr?ref=1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "patch": "@@ -40,13 +40,13 @@ error: missing documentation for a trait\n LL | pub trait C {\n    | ^^^^^^^^^^^\n \n-error: missing documentation for a trait method\n+error: missing documentation for an associated function\n   --> $DIR/lint-missing-doc.rs:53:5\n    |\n LL |     fn foo(&self);\n    |     ^^^^^^^^^^^^^^\n \n-error: missing documentation for a trait method\n+error: missing documentation for an associated function\n   --> $DIR/lint-missing-doc.rs:54:5\n    |\n LL |     fn foo_with_impl(&self) {}\n@@ -64,7 +64,7 @@ error: missing documentation for an associated type\n LL |     type AssociatedTypeDef = Self;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: missing documentation for a method\n+error: missing documentation for an associated function\n   --> $DIR/lint-missing-doc.rs:81:5\n    |\n LL |     pub fn foo() {}"}, {"sha": "b306849ac8e5eba746ce1b4cbb9d4402cde57b7d", "filename": "src/test/ui/privacy/private-in-public-non-principal.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.rs?ref=1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "patch": "@@ -10,7 +10,7 @@ pub fn leak_dyn_nonprincipal() -> Box<dyn PubPrincipal + PrivNonPrincipal> { loo\n #[deny(missing_docs)]\n fn container() {\n     impl dyn PubPrincipal {\n-        pub fn check_doc_lint() {} //~ ERROR missing documentation for a method\n+        pub fn check_doc_lint() {} //~ ERROR missing documentation for an associated function\n     }\n     impl dyn PubPrincipal + PrivNonPrincipal {\n         pub fn check_doc_lint() {} // OK, no missing doc lint"}, {"sha": "778c98671ad4d423e86926ef541fc2b8f8d6659a", "filename": "src/test/ui/privacy/private-in-public-non-principal.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1661a0a99ba09ff0b2cce8ad99c4f18150165b80/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fprivate-in-public-non-principal.stderr?ref=1661a0a99ba09ff0b2cce8ad99c4f18150165b80", "patch": "@@ -8,7 +8,7 @@ LL | pub fn leak_dyn_nonprincipal() -> Box<dyn PubPrincipal + PrivNonPrincipal>\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #34537 <https://github.com/rust-lang/rust/issues/34537>\n \n-error: missing documentation for a method\n+error: missing documentation for an associated function\n   --> $DIR/private-in-public-non-principal.rs:13:9\n    |\n LL |         pub fn check_doc_lint() {}"}]}