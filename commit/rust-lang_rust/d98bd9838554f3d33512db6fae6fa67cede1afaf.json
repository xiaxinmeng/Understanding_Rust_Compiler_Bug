{"sha": "d98bd9838554f3d33512db6fae6fa67cede1afaf", "node_id": "C_kwDOAAsO6NoAKGQ5OGJkOTgzODU1NGYzZDMzNTEyZGI2ZmFlNmZhNjdjZWRlMWFmYWY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-06T23:48:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-06T23:48:52Z"}, "message": "Auto merge of #2209 - RalfJung:if-only, r=RalfJung\n\nhotfix for incorrect only- logic\n\nThis hacks around https://github.com/rust-lang/miri/issues/2206. We don't currently use `only-32bit` or so, which is why this works.", "tree": {"sha": "a9f53b9cc167d1a9e20e66045c08b5ec83d35425", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9f53b9cc167d1a9e20e66045c08b5ec83d35425"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d98bd9838554f3d33512db6fae6fa67cede1afaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d98bd9838554f3d33512db6fae6fa67cede1afaf", "html_url": "https://github.com/rust-lang/rust/commit/d98bd9838554f3d33512db6fae6fa67cede1afaf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d98bd9838554f3d33512db6fae6fa67cede1afaf/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6d3d9888dbf0e6cf8eb9ecb89fa91b5f6d29b02", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6d3d9888dbf0e6cf8eb9ecb89fa91b5f6d29b02", "html_url": "https://github.com/rust-lang/rust/commit/e6d3d9888dbf0e6cf8eb9ecb89fa91b5f6d29b02"}, {"sha": "89edc355e8229ef8c8083e7974971999386c5ce4", "url": "https://api.github.com/repos/rust-lang/rust/commits/89edc355e8229ef8c8083e7974971999386c5ce4", "html_url": "https://github.com/rust-lang/rust/commit/89edc355e8229ef8c8083e7974971999386c5ce4"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "eb6c6c9b0bb8ecc935563ac6e8b16db1b9bb1212", "filename": "tests/fail/concurrency/thread-spawn.stderr", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/d98bd9838554f3d33512db6fae6fa67cede1afaf/tests%2Ffail%2Fconcurrency%2Fthread-spawn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d98bd9838554f3d33512db6fae6fa67cede1afaf/tests%2Ffail%2Fconcurrency%2Fthread-spawn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fconcurrency%2Fthread-spawn.stderr?ref=d98bd9838554f3d33512db6fae6fa67cede1afaf", "patch": "@@ -0,0 +1,30 @@\n+error: unsupported operation: can't create threads on Windows\n+  --> RUSTLIB/std/src/sys/PLATFORM/thread.rs:LL:CC\n+   |\n+LL |           let ret = c::CreateThread(\n+   |  ___________________^\n+LL | |             ptr::null_mut(),\n+LL | |             stack,\n+LL | |             thread_start,\n+...  |\n+LL | |             ptr::null_mut(),\n+LL | |         );\n+   | |_________^ can't create threads on Windows\n+   |\n+   = help: this is likely not a bug in the program; it indicates that the program performed an operation that the interpreter does not support\n+           \n+   = note: inside `std::sys::PLATFORM::thread::Thread::new` at RUSTLIB/std/src/sys/PLATFORM/thread.rs:LL:CC\n+   = note: inside `std::thread::Builder::spawn_unchecked_::<[closure@$DIR/thread-spawn.rs:LL:CC], ()>` at RUSTLIB/std/src/thread/mod.rs:LL:CC\n+   = note: inside `std::thread::Builder::spawn_unchecked::<[closure@$DIR/thread-spawn.rs:LL:CC], ()>` at RUSTLIB/std/src/thread/mod.rs:LL:CC\n+   = note: inside `std::thread::Builder::spawn::<[closure@$DIR/thread-spawn.rs:LL:CC], ()>` at RUSTLIB/std/src/thread/mod.rs:LL:CC\n+   = note: inside `std::thread::spawn::<[closure@$DIR/thread-spawn.rs:LL:CC], ()>` at RUSTLIB/std/src/thread/mod.rs:LL:CC\n+note: inside `main` at $DIR/thread-spawn.rs:LL:CC\n+  --> $DIR/thread-spawn.rs:LL:CC\n+   |\n+LL |     thread::spawn(|| {});\n+   |     ^^^^^^^^^^^^^^^^^^^^\n+\n+note: some details are omitted, run with `MIRIFLAGS=-Zmiri-backtrace=full` for a verbose backtrace\n+\n+error: aborting due to previous error\n+"}, {"sha": "caefee1992ed8a1f59360fa367075dcc23473d67", "filename": "ui_test/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d98bd9838554f3d33512db6fae6fa67cede1afaf/ui_test%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d98bd9838554f3d33512db6fae6fa67cede1afaf/ui_test%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Flib.rs?ref=d98bd9838554f3d33512db6fae6fa67cede1afaf", "patch": "@@ -516,9 +516,10 @@ fn ignore_file(comments: &Comments, target: &str) -> bool {\n         if !target.contains(s) {\n             return true;\n         }\n+        /* FIXME(https://github.com/rust-lang/miri/issues/2206)\n         if get_pointer_width(target) != s {\n             return true;\n-        }\n+        } */\n     }\n     false\n }"}]}