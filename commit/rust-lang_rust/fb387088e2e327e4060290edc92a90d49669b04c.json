{"sha": "fb387088e2e327e4060290edc92a90d49669b04c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiMzg3MDg4ZTJlMzI3ZTQwNjAyOTBlZGM5MmE5MGQ0OTY2OWIwNGM=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-09-07T19:21:32Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-09-07T19:21:32Z"}, "message": "rustdoc: fix diagnostic with mixed code block styles", "tree": {"sha": "fb84379f7ff2516c5c51a4c191ef9ebd4689e4a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb84379f7ff2516c5c51a4c191ef9ebd4689e4a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fb387088e2e327e4060290edc92a90d49669b04c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fb387088e2e327e4060290edc92a90d49669b04c", "html_url": "https://github.com/rust-lang/rust/commit/fb387088e2e327e4060290edc92a90d49669b04c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fb387088e2e327e4060290edc92a90d49669b04c/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef54f57c5b9d894a38179d09b00610c1b337b086", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef54f57c5b9d894a38179d09b00610c1b337b086", "html_url": "https://github.com/rust-lang/rust/commit/ef54f57c5b9d894a38179d09b00610c1b337b086"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "8bf01d2cc1aac8906a9790ff1dea9f56670683bd", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fb387088e2e327e4060290edc92a90d49669b04c/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb387088e2e327e4060290edc92a90d49669b04c/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=fb387088e2e327e4060290edc92a90d49669b04c", "patch": "@@ -931,7 +931,10 @@ crate fn rust_code_blocks(md: &str) -> Vec<RustCodeBlock> {\n                             is_fenced = true;\n                             previous_offset + fence_idx\n                         }\n-                        None => offset,\n+                        None => {\n+                            is_fenced = false;\n+                            offset\n+                        }\n                     };\n                 }\n             }"}, {"sha": "97a0f4aaec1eba117cd7f1e2ac76744ec9e54ae6", "filename": "src/test/rustdoc-ui/invalid-syntax.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/fb387088e2e327e4060290edc92a90d49669b04c/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb387088e2e327e4060290edc92a90d49669b04c/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.rs?ref=fb387088e2e327e4060290edc92a90d49669b04c", "patch": "@@ -74,3 +74,11 @@ pub fn empty_rust() {}\n ///\n /// ```\n pub fn empty_rust_with_whitespace() {}\n+\n+/// ```\n+/// let x = 1;\n+/// ```\n+///\n+///     \\____/\n+///\n+pub fn indent_after_fenced() {}"}, {"sha": "6f50edae6503408362d0a2b67a7f78319663ddb2", "filename": "src/test/rustdoc-ui/invalid-syntax.stderr", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/fb387088e2e327e4060290edc92a90d49669b04c/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fb387088e2e327e4060290edc92a90d49669b04c/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Finvalid-syntax.stderr?ref=fb387088e2e327e4060290edc92a90d49669b04c", "patch": "@@ -201,6 +201,24 @@ help: mark blocks that do not contain Rust code as text\n LL | /// ```text\n    |     ^^^^^^^\n \n+error: unknown start of token: \\\n+ --> <doctest>:1:1\n+  |\n+1 | \\____/\n+  | ^\n+\n+warning: could not parse code block as Rust code\n+  --> $DIR/invalid-syntax.rs:82:9\n+   |\n+LL | ///     \\____/\n+   |         ^^^^^^\n+\n+error: unknown start of token: \\\n+ --> <rustdoc-highlighting>:1:1\n+  |\n+1 | \\____/\n+  | ^\n+\n error: unknown start of token: \\\n  --> <rustdoc-highlighting>:1:1\n   |"}]}