{"sha": "b389611ce772d65ed135d6e52fecb9ca2238e902", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzODk2MTFjZTc3MmQ2NWVkMTM1ZDZlNTJmZWNiOWNhMjIzOGU5MDI=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-02-22T22:37:11Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-02-22T22:37:11Z"}, "message": "Finish the type of native functions. We now get\n\ndeclare i32 @write(i32, i8*, i32)", "tree": {"sha": "2c67fb5c27e7c87e49d3d50794a02992f91f98ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c67fb5c27e7c87e49d3d50794a02992f91f98ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b389611ce772d65ed135d6e52fecb9ca2238e902", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b389611ce772d65ed135d6e52fecb9ca2238e902", "html_url": "https://github.com/rust-lang/rust/commit/b389611ce772d65ed135d6e52fecb9ca2238e902", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b389611ce772d65ed135d6e52fecb9ca2238e902/comments", "author": null, "committer": null, "parents": [{"sha": "aaa6965794b9ff0d942a1367bc7b99f52fd49f99", "url": "https://api.github.com/repos/rust-lang/rust/commits/aaa6965794b9ff0d942a1367bc7b99f52fd49f99", "html_url": "https://github.com/rust-lang/rust/commit/aaa6965794b9ff0d942a1367bc7b99f52fd49f99"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "9da7e0099f06619ca220b3c3796da37d1b2f1591", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b389611ce772d65ed135d6e52fecb9ca2238e902/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b389611ce772d65ed135d6e52fecb9ca2238e902/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=b389611ce772d65ed135d6e52fecb9ca2238e902", "patch": "@@ -514,7 +514,7 @@ fn type_of_fn(@crate_ctxt cx,\n fn type_of_native_fn(@crate_ctxt cx, vec[ty.arg] inputs,\n                      @ty.t output) -> TypeRef {\n     let vec[TypeRef] atys = type_of_explicit_args(cx, inputs);\n-    ret T_fn(atys, llvm.LLVMVoidType());\n+    ret T_fn(atys, type_of(cx, output));\n }\n \n fn type_of_inner(@crate_ctxt cx, @ty.t t) -> TypeRef {\n@@ -4305,7 +4305,7 @@ fn decl_native_fn_and_pair(@crate_ctxt cx,\n     auto llpairty = node_type(cx, ann);\n     auto llfty = get_pair_fn_ty(llpairty);\n \n-    let ValueRef llfn = decl_fastcall_fn(cx.llmod, name, llfty);\n+    let ValueRef llfn = decl_cdecl_fn(cx.llmod, name, llfty);\n     cx.item_ids.insert(id, llfn);\n }\n "}]}