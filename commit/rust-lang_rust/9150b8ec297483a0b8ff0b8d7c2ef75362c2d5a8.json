{"sha": "9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxNTBiOGVjMjk3NDgzYTBiOGZmMGI4ZDdjMmVmNzUzNjJjMmQ1YTg=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-01-28T16:58:44Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2020-01-28T16:58:44Z"}, "message": "Set lld flavor for MSVC to link.exe", "tree": {"sha": "40e76731ecf4c8d6ead2c90581a9d37469006e32", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40e76731ecf4c8d6ead2c90581a9d37469006e32"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "html_url": "https://github.com/rust-lang/rust/commit/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b181835a6bacfa449f55d46764a10e25d1c471dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/b181835a6bacfa449f55d46764a10e25d1c471dc", "html_url": "https://github.com/rust-lang/rust/commit/b181835a6bacfa449f55d46764a10e25d1c471dc"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "52b166df93996c55d470ccc24a4b554be4f96266", "filename": "src/librustc_target/spec/windows_msvc_base.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs?ref=9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "patch": "@@ -1,9 +1,11 @@\n-use crate::spec::{LinkArgs, LinkerFlavor, TargetOptions};\n+use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, TargetOptions};\n use std::default::Default;\n \n pub fn opts() -> TargetOptions {\n+    let pre_args = vec![\"/NOLOGO\".to_string(), \"/NXCOMPAT\".to_string()];\n     let mut args = LinkArgs::new();\n-    args.insert(LinkerFlavor::Msvc, vec![\"/NOLOGO\".to_string(), \"/NXCOMPAT\".to_string()]);\n+    args.insert(LinkerFlavor::Msvc, pre_args.clone());\n+    args.insert(LinkerFlavor::Lld(LldFlavor::Link), pre_args);\n \n     TargetOptions {\n         function_sections: true,\n@@ -21,6 +23,7 @@ pub fn opts() -> TargetOptions {\n         // language packs, and avoid generating Non-UTF-8 error\n         // messages if a link error occurred.\n         link_env: vec![(\"VSLANG\".to_string(), \"1033\".to_string())],\n+        lld_flavor: LldFlavor::Link,\n         pre_link_args: args,\n         crt_static_allows_dylibs: true,\n         crt_static_respected: true,"}]}