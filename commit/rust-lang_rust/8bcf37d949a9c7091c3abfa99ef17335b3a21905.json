{"sha": "8bcf37d949a9c7091c3abfa99ef17335b3a21905", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiY2YzN2Q5NDlhOWM3MDkxYzNhYmZhOTllZjE3MzM1YjNhMjE5MDU=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-08-31T13:51:35Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-09-06T11:00:26Z"}, "message": "Add `#[allow(improper_ctypes)]` to slew of cases that need e.g. `repr(C)`.\n\nSee also rust-lang/rust#53858.", "tree": {"sha": "1852cb567b364563b1f0120b165c782e2e0ce458", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1852cb567b364563b1f0120b165c782e2e0ce458"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8bcf37d949a9c7091c3abfa99ef17335b3a21905", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8bcf37d949a9c7091c3abfa99ef17335b3a21905", "html_url": "https://github.com/rust-lang/rust/commit/8bcf37d949a9c7091c3abfa99ef17335b3a21905", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8bcf37d949a9c7091c3abfa99ef17335b3a21905/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e462c1adc5d40383f6cf937f17a7525414756c0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e462c1adc5d40383f6cf937f17a7525414756c0e", "html_url": "https://github.com/rust-lang/rust/commit/e462c1adc5d40383f6cf937f17a7525414756c0e"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "042c27d0902acab5e8568ebab5f8d37ade4ba087", "filename": "src/test/ui/run-pass/extern/extern-pass-TwoU16s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU16s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU16s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU16s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc for ffi testing\n \n // Test a foreign function that accepts and returns a struct"}, {"sha": "de1819a1fbd5b5a27b0ba6b21046362feaa445c2", "filename": "src/test/ui/run-pass/extern/extern-pass-TwoU32s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU32s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU32s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU32s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc for ffi testing\n \n // Test a foreign function that accepts and returns a struct"}, {"sha": "5e4b3823b145e70ec49b5f60bdb4bfb6b1713ac9", "filename": "src/test/ui/run-pass/extern/extern-pass-TwoU64s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU64s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU64s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU64s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc for ffi testing\n \n // Test a foreign function that accepts and returns a struct"}, {"sha": "affcf62af70055cf11dd71fefe0963711a314adf", "filename": "src/test/ui/run-pass/extern/extern-pass-TwoU8s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU8s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU8s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-pass-TwoU8s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc for ffi testing\n \n // Test a foreign function that accepts and returns a struct"}, {"sha": "826b5083676eef994ae7950eea64c5b1e3e49912", "filename": "src/test/ui/run-pass/extern/extern-return-TwoU16s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU16s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU16s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU16s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc to test ffi with\n \n pub struct TwoU16s {"}, {"sha": "15584f28d07a523d6b17722f375703876d8d8d75", "filename": "src/test/ui/run-pass/extern/extern-return-TwoU32s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU32s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU32s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU32s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc to test ffi with\n \n pub struct TwoU32s {"}, {"sha": "94378522a1b5b60478f7befa9264f4ce50512c85", "filename": "src/test/ui/run-pass/extern/extern-return-TwoU64s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU64s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU64s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU64s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc to test ffi with\n \n pub struct TwoU64s {"}, {"sha": "a66098c97747800ef059f878b7690daede9456f7", "filename": "src/test/ui/run-pass/extern/extern-return-TwoU8s.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU8s.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU8s.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fextern%2Fextern-return-TwoU8s.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc to test ffi with\n \n pub struct TwoU8s {"}, {"sha": "1c8d1bd2566dd046ff1f6e5361e251fefc63b89c", "filename": "src/test/ui/run-pass/foreign/foreign-fn-with-byval.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fforeign%2Fforeign-fn-with-byval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fforeign%2Fforeign-fn-with-byval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fforeign%2Fforeign-fn-with-byval.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // ignore-wasm32-bare no libc to test ffi with\n \n #[derive(Copy, Clone)]"}, {"sha": "1e626e2e9c1f32f5cdcdedc5dbe1208089b2133d", "filename": "src/test/ui/run-pass/issues/issue-3656.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-3656.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-3656.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-3656.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // Issue #3656\n // Incorrect struct size computation in the FFI, because of not taking\n // the alignment of elements into account."}, {"sha": "ba79c32a83de1ebd983dfc2ead023e3cbc582157", "filename": "src/test/ui/run-pass/issues/issue-5754.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-5754.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-5754.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-5754.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // pretty-expanded FIXME #23616\n \n struct TwoDoubles {"}, {"sha": "152b4bbedc3fefb14ab35a028c8872cf8853de76", "filename": "src/test/ui/run-pass/issues/issue-6470.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-6470.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8bcf37d949a9c7091c3abfa99ef17335b3a21905/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-6470.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-6470.rs?ref=8bcf37d949a9c7091c3abfa99ef17335b3a21905", "patch": "@@ -9,6 +9,8 @@\n // except according to those terms.\n \n // run-pass\n+#![allow(improper_ctypes)]\n+\n // pretty-expanded FIXME #23616\n #![allow(non_snake_case)]\n "}]}