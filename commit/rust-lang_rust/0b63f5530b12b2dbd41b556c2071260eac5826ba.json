{"sha": "0b63f5530b12b2dbd41b556c2071260eac5826ba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBiNjNmNTUzMGIxMmIyZGJkNDFiNTU2YzIwNzEyNjBlYWM1ODI2YmE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-05-10T18:31:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-05-10T18:31:11Z"}, "message": "Rollup merge of #60697 - hellow554:fix_60629, r=michaelwoerister\n\nadd regression test for #60629\n\nThis bug was fixed, but I don't know which one. (I think it even doesn't matter at all).\n\nAdded a regression test.\n\n```\nop@OP ~/m/r/s/t/incremental> rustc --version\nrustc 1.35.0-nightly (acd8dd6a5 2019-04-05)\nop@OP ~/m/r/s/t/incremental> rustc -C incremental= --cfg rpass1 issue-60629.rs\nwarning: struct is never constructed: `A`\n --> issue-60629.rs:3:1\n  |\n3 | struct A;\n  | ^^^^^^^^^\n  |\n  = note: #[warn(dead_code)] on by default\n\nop@OP ~/m/r/s/t/incremental> rustc -C incremental= --cfg rpass2 issue-60629.rs\nerror: internal compiler error: src/librustc/ty/query/plumbing.rs:1195: Cannot force dep node: coherent_trait(core[c27c]::ops[0]::drop[0]::Drop[0])\n\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:635:9\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\nerror: aborting due to previous error\n\nnote: the compiler unexpectedly panicked. this is a bug.\n\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\n\nnote: rustc 1.35.0-nightly (acd8dd6a5 2019-04-05) running on x86_64-unknown-linux-gnu\n\nnote: compiler flags: -C incremental\n```\n\nwith latest nightly it does not crash anymore, so nothing more to do.\n\nFixes #60629\n\n(accidentally removed the remote branch on github, therefore GH closed the other PR.)\n\nr? @nikomatsakis", "tree": {"sha": "8e4e9daf1b026b0b9f02f5f5286690ddef3ce8b1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e4e9daf1b026b0b9f02f5f5286690ddef3ce8b1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b63f5530b12b2dbd41b556c2071260eac5826ba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc1cNvCRBK7hj4Ov3rIwAAdHIIAKNJphFtatY9bONOENdi3gx8\ns4kCieEPwlBxaN64BmiTxdrBJgmPZ08jrGzBfDic9KxyDIpid/jmaxN5N/V/BSc3\ns71WQMYQRE4tfG5eF0mkBtlGrpKJTU7SyNRni4MIfMBeS657qoxiQHYSsCRfDUXK\nvOHk8akmttc0EmeWnQf5/0dEgrcJu+Fr0OS4ogHpo838HhDFAb6GAc1mtPInUOzF\nFufWeOd3VgeL6jaSAWEnX4G3GYh/dj6/6eR48IOTiB5vTsKC2wd6cDTm0UgN1le5\nhuW1bEXy4Pp9IE6FZFwHYjTROm2O5jSIn5UdEuSNV2Ir11eS0bxgMQrEbfouFX4=\n=Q/R/\n-----END PGP SIGNATURE-----\n", "payload": "tree 8e4e9daf1b026b0b9f02f5f5286690ddef3ce8b1\nparent ec6afb1ff634b21b1038fe605dc8456140d8ef06\nparent c81780b156c446819d94c9382eb590e881fa87b0\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1557513071 +0200\ncommitter GitHub <noreply@github.com> 1557513071 +0200\n\nRollup merge of #60697 - hellow554:fix_60629, r=michaelwoerister\n\nadd regression test for #60629\n\nThis bug was fixed, but I don't know which one. (I think it even doesn't matter at all).\n\nAdded a regression test.\n\n```\nop@OP ~/m/r/s/t/incremental> rustc --version\nrustc 1.35.0-nightly (acd8dd6a5 2019-04-05)\nop@OP ~/m/r/s/t/incremental> rustc -C incremental= --cfg rpass1 issue-60629.rs\nwarning: struct is never constructed: `A`\n --> issue-60629.rs:3:1\n  |\n3 | struct A;\n  | ^^^^^^^^^\n  |\n  = note: #[warn(dead_code)] on by default\n\nop@OP ~/m/r/s/t/incremental> rustc -C incremental= --cfg rpass2 issue-60629.rs\nerror: internal compiler error: src/librustc/ty/query/plumbing.rs:1195: Cannot force dep node: coherent_trait(core[c27c]::ops[0]::drop[0]::Drop[0])\n\nthread 'rustc' panicked at 'Box<Any>', src/librustc_errors/lib.rs:635:9\nnote: Run with `RUST_BACKTRACE=1` environment variable to display a backtrace.\nerror: aborting due to previous error\n\nnote: the compiler unexpectedly panicked. this is a bug.\n\nnote: we would appreciate a bug report: https://github.com/rust-lang/rust/blob/master/CONTRIBUTING.md#bug-reports\n\nnote: rustc 1.35.0-nightly (acd8dd6a5 2019-04-05) running on x86_64-unknown-linux-gnu\n\nnote: compiler flags: -C incremental\n```\n\nwith latest nightly it does not crash anymore, so nothing more to do.\n\nFixes #60629\n\n(accidentally removed the remote branch on github, therefore GH closed the other PR.)\n\nr? @nikomatsakis\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b63f5530b12b2dbd41b556c2071260eac5826ba", "html_url": "https://github.com/rust-lang/rust/commit/0b63f5530b12b2dbd41b556c2071260eac5826ba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b63f5530b12b2dbd41b556c2071260eac5826ba/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec6afb1ff634b21b1038fe605dc8456140d8ef06", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec6afb1ff634b21b1038fe605dc8456140d8ef06", "html_url": "https://github.com/rust-lang/rust/commit/ec6afb1ff634b21b1038fe605dc8456140d8ef06"}, {"sha": "c81780b156c446819d94c9382eb590e881fa87b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/c81780b156c446819d94c9382eb590e881fa87b0", "html_url": "https://github.com/rust-lang/rust/commit/c81780b156c446819d94c9382eb590e881fa87b0"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "4807af4b3cf708f9e415ef900868f06e773ab531", "filename": "src/test/incremental/issue-60629.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0b63f5530b12b2dbd41b556c2071260eac5826ba/src%2Ftest%2Fincremental%2Fissue-60629.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b63f5530b12b2dbd41b556c2071260eac5826ba/src%2Ftest%2Fincremental%2Fissue-60629.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fissue-60629.rs?ref=0b63f5530b12b2dbd41b556c2071260eac5826ba", "patch": "@@ -0,0 +1,10 @@\n+// revisions:rpass1 rpass2\n+\n+struct A;\n+\n+#[cfg(rpass2)]\n+impl From<A> for () {\n+    fn from(_: A) {}\n+}\n+\n+fn main() {}"}]}