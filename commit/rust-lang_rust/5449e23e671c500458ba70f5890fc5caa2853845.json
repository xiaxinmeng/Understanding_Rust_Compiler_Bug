{"sha": "5449e23e671c500458ba70f5890fc5caa2853845", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0NDllMjNlNjcxYzUwMDQ1OGJhNzBmNTg5MGZjNWNhYTI4NTM4NDU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-15T12:02:24Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-15T12:02:24Z"}, "message": "Auto merge of #7568 - dtolnay-contrib:ifletelse, r=llogiq\n\nDowngrade option_if_let_else to nursery\n\nI believe that this lint's loose understanding of ownership (#5822, #6737) makes it unsuitable to be enabled by default in its current state, even as a pedantic lint.\n\nAdditionally the lint has known problems with type inference (#6137), though I may be willing to consider this a non-blocker in isolation if it weren't for the ownership false positives.\n\nA fourth false positive involving const fn: #7567.\n\nBut on top of these, for me the biggest issue is I basically fully agree with https://github.com/rust-lang/rust-clippy/issues/6137#issuecomment-705605688. In my experience this lint universally makes code worse even when the resulting code does compile.\n\n---\n\nchangelog: remove [`option_if_let_else`] from default set of enabled lints", "tree": {"sha": "fd5041faf775210fd0fa8b23436bf997547ae061", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd5041faf775210fd0fa8b23436bf997547ae061"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5449e23e671c500458ba70f5890fc5caa2853845", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5449e23e671c500458ba70f5890fc5caa2853845", "html_url": "https://github.com/rust-lang/rust/commit/5449e23e671c500458ba70f5890fc5caa2853845", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5449e23e671c500458ba70f5890fc5caa2853845/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c5487dc62d569d4bc32cbe51951668406242137", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c5487dc62d569d4bc32cbe51951668406242137", "html_url": "https://github.com/rust-lang/rust/commit/7c5487dc62d569d4bc32cbe51951668406242137"}, {"sha": "3c8eaa8b2c2d594d39810fc2f2a62098c4107c80", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c8eaa8b2c2d594d39810fc2f2a62098c4107c80", "html_url": "https://github.com/rust-lang/rust/commit/3c8eaa8b2c2d594d39810fc2f2a62098c4107c80"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "8372d681078dfb8719a775320a0d33e44e445e2f", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5449e23e671c500458ba70f5890fc5caa2853845/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5449e23e671c500458ba70f5890fc5caa2853845/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=5449e23e671c500458ba70f5890fc5caa2853845", "patch": "@@ -1125,7 +1125,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(needless_for_each::NEEDLESS_FOR_EACH),\n         LintId::of(needless_pass_by_value::NEEDLESS_PASS_BY_VALUE),\n         LintId::of(non_expressive_names::SIMILAR_NAMES),\n-        LintId::of(option_if_let_else::OPTION_IF_LET_ELSE),\n         LintId::of(pass_by_ref_or_value::LARGE_TYPES_PASSED_BY_VALUE),\n         LintId::of(pass_by_ref_or_value::TRIVIALLY_COPY_PASS_BY_REF),\n         LintId::of(ranges::RANGE_MINUS_ONE),\n@@ -1802,6 +1801,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(mutable_debug_assertion::DEBUG_ASSERT_WITH_MUT_CALL),\n         LintId::of(mutex_atomic::MUTEX_INTEGER),\n         LintId::of(nonstandard_macro_braces::NONSTANDARD_MACRO_BRACES),\n+        LintId::of(option_if_let_else::OPTION_IF_LET_ELSE),\n         LintId::of(path_buf_push_overwrite::PATH_BUF_PUSH_OVERWRITE),\n         LintId::of(redundant_pub_crate::REDUNDANT_PUB_CRATE),\n         LintId::of(regex::TRIVIAL_REGEX),"}, {"sha": "a7899dc8bc126a8b76e2ac2f36067d10baca5879", "filename": "clippy_lints/src/option_if_let_else.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5449e23e671c500458ba70f5890fc5caa2853845/clippy_lints%2Fsrc%2Foption_if_let_else.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5449e23e671c500458ba70f5890fc5caa2853845/clippy_lints%2Fsrc%2Foption_if_let_else.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foption_if_let_else.rs?ref=5449e23e671c500458ba70f5890fc5caa2853845", "patch": "@@ -57,7 +57,7 @@ declare_clippy_lint! {\n     /// }, |foo| foo);\n     /// ```\n     pub OPTION_IF_LET_ELSE,\n-    pedantic,\n+    nursery,\n     \"reimplementation of Option::map_or\"\n }\n "}]}