{"sha": "36e3c41368c9c4f2005c599a48e0d2a82983b943", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2ZTNjNDEzNjhjOWM0ZjIwMDVjNTk5YTQ4ZTBkMmE4Mjk4M2I5NDM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-10-09T13:23:01Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-10-09T13:23:01Z"}, "message": "Auto merge of #6149 - flip1995:update_actions, r=ebroto\n\nRemove deprecated set-env from GHA\n\nThis updates all of our action dependencies and removes every usage of `set-env`. `set-env` and `add-path` has been deprecated: https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/\n\nchangelog: none", "tree": {"sha": "aecda8d8b46f8453456878828b8fb6ef72736cc6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aecda8d8b46f8453456878828b8fb6ef72736cc6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36e3c41368c9c4f2005c599a48e0d2a82983b943", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36e3c41368c9c4f2005c599a48e0d2a82983b943", "html_url": "https://github.com/rust-lang/rust/commit/36e3c41368c9c4f2005c599a48e0d2a82983b943", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36e3c41368c9c4f2005c599a48e0d2a82983b943/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed2b457fbeeccf3dab9f1dfb998f2a4db0badb4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed2b457fbeeccf3dab9f1dfb998f2a4db0badb4d", "html_url": "https://github.com/rust-lang/rust/commit/ed2b457fbeeccf3dab9f1dfb998f2a4db0badb4d"}, {"sha": "c4c9453ccfc69d00ced80db4cdd5be805f1ee1c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4c9453ccfc69d00ced80db4cdd5be805f1ee1c2", "html_url": "https://github.com/rust-lang/rust/commit/c4c9453ccfc69d00ced80db4cdd5be805f1ee1c2"}], "stats": {"total": 57, "additions": 26, "deletions": 31}, "files": [{"sha": "cf4aa39e49b903fb071d451cc767ac5e32a09c47", "filename": ".github/workflows/clippy.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy.yml", "raw_url": "https://github.com/rust-lang/rust/raw/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fclippy.yml?ref=36e3c41368c9c4f2005c599a48e0d2a82983b943", "patch": "@@ -36,14 +36,14 @@ jobs:\n         github_token: \"${{ secrets.github_token }}\"\n \n     - name: rust-toolchain\n-      uses: actions-rs/toolchain@v1.0.3\n+      uses: actions-rs/toolchain@v1.0.6\n       with:\n         toolchain: nightly\n         target: x86_64-unknown-linux-gnu\n         profile: minimal\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Run cargo update\n       run: cargo update\n@@ -63,7 +63,7 @@ jobs:\n     - name: Set LD_LIBRARY_PATH (Linux)\n       run: |\n         SYSROOT=$(rustc --print sysroot)\n-        echo \"::set-env name=LD_LIBRARY_PATH::${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\"\n+        echo \"LD_LIBRARY_PATH=${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\" >> $GITHUB_ENV\n \n     - name: Build\n       run: cargo build --features deny-warnings"}, {"sha": "7509d90c6c2fcff29fee79d75c97ff54934a3e44", "filename": ".github/workflows/clippy_bors.yml", "status": "modified", "additions": 15, "deletions": 20, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy_bors.yml", "raw_url": "https://github.com/rust-lang/rust/raw/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy_bors.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fclippy_bors.yml?ref=36e3c41368c9c4f2005c599a48e0d2a82983b943", "patch": "@@ -11,6 +11,10 @@ env:\n   CARGO_TARGET_DIR: '${{ github.workspace }}/target'\n   NO_FMT_TEST: 1\n \n+defaults:\n+  run:\n+    shell: bash\n+\n jobs:\n   changelog:\n     runs-on: ubuntu-latest\n@@ -20,7 +24,7 @@ jobs:\n       with:\n         github_token: \"${{ secrets.github_token }}\"\n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n       with:\n         ref: ${{ github.ref }}\n \n@@ -81,14 +85,14 @@ jobs:\n       if: matrix.host == 'i686-unknown-linux-gnu'\n \n     - name: rust-toolchain\n-      uses: actions-rs/toolchain@v1.0.3\n+      uses: actions-rs/toolchain@v1.0.6\n       with:\n         toolchain: nightly\n         target: ${{ matrix.host }}\n         profile: minimal\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Run cargo update\n       run: cargo update\n@@ -105,14 +109,13 @@ jobs:\n       run: bash setup-toolchain.sh\n       env:\n         HOST_TOOLCHAIN: ${{ matrix.host }}\n-      shell: bash\n \n     # Run\n     - name: Set LD_LIBRARY_PATH (Linux)\n       if: runner.os == 'Linux'\n       run: |\n         SYSROOT=$(rustc --print sysroot)\n-        echo \"::set-env name=LD_LIBRARY_PATH::${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\"\n+        echo \"LD_LIBRARY_PATH=${SYSROOT}/lib${LD_LIBRARY_PATH+:${LD_LIBRARY_PATH}}\" >> $GITHUB_ENV\n     - name: Link rustc dylib (MacOS)\n       if: runner.os == 'macOS'\n       run: |\n@@ -122,41 +125,33 @@ jobs:\n     - name: Set PATH (Windows)\n       if: runner.os == 'Windows'\n       run: |\n-        $sysroot = rustc --print sysroot\n-        $env:PATH += ';' + $sysroot + '\\bin'\n-        echo \"::set-env name=PATH::$env:PATH\"\n+        SYSROOT=$(rustc --print sysroot)\n+        echo \"$SYSROOT/bin\" >> $GITHUB_PATH\n \n     - name: Build\n       run: cargo build --features deny-warnings\n-      shell: bash\n \n     - name: Test\n       run: cargo test --features deny-warnings\n-      shell: bash\n \n     - name: Test clippy_lints\n       run: cargo test --features deny-warnings\n-      shell: bash\n       working-directory: clippy_lints\n \n     - name: Test rustc_tools_util\n       run: cargo test --features deny-warnings\n-      shell: bash\n       working-directory: rustc_tools_util\n \n     - name: Test clippy_dev\n       run: cargo test --features deny-warnings\n-      shell: bash\n       working-directory: clippy_dev\n \n     - name: Test cargo-clippy\n       run: ../target/debug/cargo-clippy\n-      shell: bash\n       working-directory: clippy_workspace_tests\n \n     - name: Test clippy-driver\n       run: bash .github/driver.sh\n-      shell: bash\n       env:\n         OS: ${{ runner.os }}\n \n@@ -165,7 +160,7 @@ jobs:\n       run: |\n         cargo +nightly install cargo-cache --no-default-features --features ci-autoclean cargo-cache\n         cargo cache\n-      shell: bash\n+\n   integration_build:\n     needs: changelog\n     runs-on: ubuntu-latest\n@@ -177,14 +172,14 @@ jobs:\n         github_token: \"${{ secrets.github_token }}\"\n \n     - name: rust-toolchain\n-      uses: actions-rs/toolchain@v1.0.3\n+      uses: actions-rs/toolchain@v1.0.6\n       with:\n         toolchain: nightly\n         target: x86_64-unknown-linux-gnu\n         profile: minimal\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Run cargo update\n       run: cargo update\n@@ -258,14 +253,14 @@ jobs:\n         github_token: \"${{ secrets.github_token }}\"\n \n     - name: rust-toolchain\n-      uses: actions-rs/toolchain@v1.0.3\n+      uses: actions-rs/toolchain@v1.0.6\n       with:\n         toolchain: nightly\n         target: x86_64-unknown-linux-gnu\n         profile: minimal\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Run cargo update\n       run: cargo update"}, {"sha": "5ee157cf23b864bb69e792ba0705aa0d9d9779ce", "filename": ".github/workflows/clippy_dev.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy_dev.yml", "raw_url": "https://github.com/rust-lang/rust/raw/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fclippy_dev.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fclippy_dev.yml?ref=36e3c41368c9c4f2005c599a48e0d2a82983b943", "patch": "@@ -23,15 +23,15 @@ jobs:\n     steps:\n     # Setup\n     - name: rust-toolchain\n-      uses: actions-rs/toolchain@v1.0.3\n+      uses: actions-rs/toolchain@v1.0.6\n       with:\n         toolchain: nightly\n         target: x86_64-unknown-linux-gnu\n         profile: minimal\n         components: rustfmt\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     # Run\n     - name: Build"}, {"sha": "15aeaf907dc6b9b1faa81521d9260c2b452e52e7", "filename": ".github/workflows/deploy.yml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fdeploy.yml", "raw_url": "https://github.com/rust-lang/rust/raw/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fdeploy.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fdeploy.yml?ref=36e3c41368c9c4f2005c599a48e0d2a82983b943", "patch": "@@ -21,10 +21,10 @@ jobs:\n     steps:\n     # Setup\n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n       with:\n         ref: ${{ env.TARGET_BRANCH }}\n         path: 'out'\n@@ -34,10 +34,10 @@ jobs:\n       if: startswith(github.ref, 'refs/tags/')\n       run: |\n         TAG=$(basename ${{ github.ref }})\n-        echo \"::set-env name=TAG_NAME::$TAG\"\n+        echo \"TAG_NAME=$TAG\" >> $GITHUB_ENV\n     - name: Set beta to true\n       if: github.ref == 'refs/heads/beta'\n-      run: echo \"::set-env name=BETA::true\"\n+      run: echo \"BETA=true\" >> $GITHUB_ENV\n \n     - name: Use scripts and templates from master branch\n       run: |"}, {"sha": "4f25a86b2e4df3cac0a28a61639b0d6df04d36cd", "filename": ".github/workflows/remark.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fremark.yml", "raw_url": "https://github.com/rust-lang/rust/raw/36e3c41368c9c4f2005c599a48e0d2a82983b943/.github%2Fworkflows%2Fremark.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fremark.yml?ref=36e3c41368c9c4f2005c599a48e0d2a82983b943", "patch": "@@ -16,10 +16,10 @@ jobs:\n     steps:\n     # Setup\n     - name: Checkout\n-      uses: actions/checkout@v2.0.0\n+      uses: actions/checkout@v2.3.3\n \n     - name: Setup Node.js\n-      uses: actions/setup-node@v1.1.0\n+      uses: actions/setup-node@v1.4.4\n \n     - name: Install remark\n       run: npm install remark-cli remark-lint remark-lint-maximum-line-length remark-preset-lint-recommended"}]}