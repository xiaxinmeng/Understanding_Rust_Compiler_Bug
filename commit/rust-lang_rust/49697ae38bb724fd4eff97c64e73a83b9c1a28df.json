{"sha": "49697ae38bb724fd4eff97c64e73a83b9c1a28df", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5Njk3YWUzOGJiNzI0ZmQ0ZWZmOTdjNjRlNzNhODNiOWMxYTI4ZGY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-12-06T16:28:04Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-12-06T16:28:04Z"}, "message": "get rid of __ in field names", "tree": {"sha": "d4672c7a6ecd534c8d05c849bf4f22fce2545eac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d4672c7a6ecd534c8d05c849bf4f22fce2545eac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49697ae38bb724fd4eff97c64e73a83b9c1a28df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49697ae38bb724fd4eff97c64e73a83b9c1a28df", "html_url": "https://github.com/rust-lang/rust/commit/49697ae38bb724fd4eff97c64e73a83b9c1a28df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49697ae38bb724fd4eff97c64e73a83b9c1a28df/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d0126e8ed3cc0d6fcb9dd44c36a46f9ce65010a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0126e8ed3cc0d6fcb9dd44c36a46f9ce65010a0", "html_url": "https://github.com/rust-lang/rust/commit/d0126e8ed3cc0d6fcb9dd44c36a46f9ce65010a0"}], "stats": {"total": 50, "additions": 24, "deletions": 26}, "files": [{"sha": "e90da69906009e9e01568eee6e60a3340d337ac7", "filename": "src/libstd/sync/mutex.rs", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/49697ae38bb724fd4eff97c64e73a83b9c1a28df/src%2Flibstd%2Fsync%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49697ae38bb724fd4eff97c64e73a83b9c1a28df/src%2Flibstd%2Fsync%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fmutex.rs?ref=49697ae38bb724fd4eff97c64e73a83b9c1a28df", "patch": "@@ -143,10 +143,8 @@ unsafe impl<T: ?Sized + Send> Sync for Mutex<T> { }\n #[must_use = \"if unused the Mutex will immediately unlock\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct MutexGuard<'a, T: ?Sized + 'a> {\n-    // funny underscores due to how Deref/DerefMut currently work (they\n-    // disregard field privacy).\n-    __lock: &'a Mutex<T>,\n-    __poison: poison::Guard,\n+    lock: &'a Mutex<T>,\n+    poison: poison::Guard,\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -417,8 +415,8 @@ impl<'mutex, T: ?Sized> MutexGuard<'mutex, T> {\n     unsafe fn new(lock: &'mutex Mutex<T>) -> LockResult<MutexGuard<'mutex, T>> {\n         poison::map_result(lock.poison.borrow(), |guard| {\n             MutexGuard {\n-                __lock: lock,\n-                __poison: guard,\n+                lock: lock,\n+                poison: guard,\n             }\n         })\n     }\n@@ -429,14 +427,14 @@ impl<T: ?Sized> Deref for MutexGuard<'_, T> {\n     type Target = T;\n \n     fn deref(&self) -> &T {\n-        unsafe { &*self.__lock.data.get() }\n+        unsafe { &*self.lock.data.get() }\n     }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> DerefMut for MutexGuard<'_, T> {\n     fn deref_mut(&mut self) -> &mut T {\n-        unsafe { &mut *self.__lock.data.get() }\n+        unsafe { &mut *self.lock.data.get() }\n     }\n }\n \n@@ -445,8 +443,8 @@ impl<T: ?Sized> Drop for MutexGuard<'_, T> {\n     #[inline]\n     fn drop(&mut self) {\n         unsafe {\n-            self.__lock.poison.done(&self.__poison);\n-            self.__lock.inner.raw_unlock();\n+            self.lock.poison.done(&self.poison);\n+            self.lock.inner.raw_unlock();\n         }\n     }\n }\n@@ -466,11 +464,11 @@ impl<T: ?Sized + fmt::Display> fmt::Display for MutexGuard<'_, T> {\n }\n \n pub fn guard_lock<'a, T: ?Sized>(guard: &MutexGuard<'a, T>) -> &'a sys::Mutex {\n-    &guard.__lock.inner\n+    &guard.lock.inner\n }\n \n pub fn guard_poison<'a, T: ?Sized>(guard: &MutexGuard<'a, T>) -> &'a poison::Flag {\n-    &guard.__lock.poison\n+    &guard.lock.poison\n }\n \n #[cfg(all(test, not(target_os = \"emscripten\")))]"}, {"sha": "c217291a42e4856de7192aa5bc2f0f52802577a3", "filename": "src/libstd/sync/rwlock.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/49697ae38bb724fd4eff97c64e73a83b9c1a28df/src%2Flibstd%2Fsync%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49697ae38bb724fd4eff97c64e73a83b9c1a28df/src%2Flibstd%2Fsync%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Frwlock.rs?ref=49697ae38bb724fd4eff97c64e73a83b9c1a28df", "patch": "@@ -87,7 +87,7 @@ unsafe impl<T: ?Sized + Send + Sync> Sync for RwLock<T> {}\n #[must_use = \"if unused the RwLock will immediately unlock\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct RwLockReadGuard<'a, T: ?Sized + 'a> {\n-    __lock: &'a RwLock<T>,\n+    lock: &'a RwLock<T>,\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -108,8 +108,8 @@ unsafe impl<T: ?Sized + Sync> Sync for RwLockReadGuard<'_, T> {}\n #[must_use = \"if unused the RwLock will immediately unlock\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct RwLockWriteGuard<'a, T: ?Sized + 'a> {\n-    __lock: &'a RwLock<T>,\n-    __poison: poison::Guard,\n+    lock: &'a RwLock<T>,\n+    poison: poison::Guard,\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -465,7 +465,7 @@ impl<'rwlock, T: ?Sized> RwLockReadGuard<'rwlock, T> {\n                   -> LockResult<RwLockReadGuard<'rwlock, T>> {\n         poison::map_result(lock.poison.borrow(), |_| {\n             RwLockReadGuard {\n-                __lock: lock,\n+                lock: lock,\n             }\n         })\n     }\n@@ -476,8 +476,8 @@ impl<'rwlock, T: ?Sized> RwLockWriteGuard<'rwlock, T> {\n                   -> LockResult<RwLockWriteGuard<'rwlock, T>> {\n         poison::map_result(lock.poison.borrow(), |guard| {\n             RwLockWriteGuard {\n-                __lock: lock,\n-                __poison: guard,\n+                lock: lock,\n+                poison: guard,\n             }\n         })\n     }\n@@ -487,7 +487,7 @@ impl<'rwlock, T: ?Sized> RwLockWriteGuard<'rwlock, T> {\n impl<T: fmt::Debug> fmt::Debug for RwLockReadGuard<'_, T> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         f.debug_struct(\"RwLockReadGuard\")\n-            .field(\"lock\", &self.__lock)\n+            .field(\"lock\", &self.lock)\n             .finish()\n     }\n }\n@@ -503,7 +503,7 @@ impl<T: ?Sized + fmt::Display> fmt::Display for RwLockReadGuard<'_, T> {\n impl<T: fmt::Debug> fmt::Debug for RwLockWriteGuard<'_, T> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         f.debug_struct(\"RwLockWriteGuard\")\n-            .field(\"lock\", &self.__lock)\n+            .field(\"lock\", &self.lock)\n             .finish()\n     }\n }\n@@ -520,7 +520,7 @@ impl<T: ?Sized> Deref for RwLockReadGuard<'_, T> {\n     type Target = T;\n \n     fn deref(&self) -> &T {\n-        unsafe { &*self.__lock.data.get() }\n+        unsafe { &*self.lock.data.get() }\n     }\n }\n \n@@ -529,29 +529,29 @@ impl<T: ?Sized> Deref for RwLockWriteGuard<'_, T> {\n     type Target = T;\n \n     fn deref(&self) -> &T {\n-        unsafe { &*self.__lock.data.get() }\n+        unsafe { &*self.lock.data.get() }\n     }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> DerefMut for RwLockWriteGuard<'_, T> {\n     fn deref_mut(&mut self) -> &mut T {\n-        unsafe { &mut *self.__lock.data.get() }\n+        unsafe { &mut *self.lock.data.get() }\n     }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> Drop for RwLockReadGuard<'_, T> {\n     fn drop(&mut self) {\n-        unsafe { self.__lock.inner.read_unlock(); }\n+        unsafe { self.lock.inner.read_unlock(); }\n     }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T: ?Sized> Drop for RwLockWriteGuard<'_, T> {\n     fn drop(&mut self) {\n-        self.__lock.poison.done(&self.__poison);\n-        unsafe { self.__lock.inner.write_unlock(); }\n+        self.lock.poison.done(&self.poison);\n+        unsafe { self.lock.inner.write_unlock(); }\n     }\n }\n "}]}