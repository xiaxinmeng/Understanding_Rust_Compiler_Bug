{"sha": "78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4ZmZjZDk5NTljYzgxZDEzMjhmY2FmYjk5NmRjYzdjZDliNWYxYWM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-07-15T21:53:17Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-07-15T21:53:17Z"}, "message": "Auto merge of #7460 - camsteffen:run-from-source, r=Manishearth\n\nAdd instructions to run from source\n\nchangelog: none\n\nWe often get messages on Zulip asking how to install and run Clippy from source. This adds instructions to the readme. I also added a note explaining that `cargo install --path . --force` is bad, which I just decided after some investigating. I use macOS. It would be nice to get some tests on other platforms to see if this is correct.", "tree": {"sha": "36d63f2113eeed011226f9ea6836846485b37b58", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36d63f2113eeed011226f9ea6836846485b37b58"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac", "html_url": "https://github.com/rust-lang/rust/commit/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54a20a02ecd0e1352a871aa0990bcc8b8b03173e", "url": "https://api.github.com/repos/rust-lang/rust/commits/54a20a02ecd0e1352a871aa0990bcc8b8b03173e", "html_url": "https://github.com/rust-lang/rust/commit/54a20a02ecd0e1352a871aa0990bcc8b8b03173e"}, {"sha": "6ef0cd7a71a400a9fa850c7258c18f381bf73a80", "url": "https://api.github.com/repos/rust-lang/rust/commits/6ef0cd7a71a400a9fa850c7258c18f381bf73a80", "html_url": "https://github.com/rust-lang/rust/commit/6ef0cd7a71a400a9fa850c7258c18f381bf73a80"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "43d3792f5952125a80cb1eccb4b9d35213301a60", "filename": "doc/basics.md", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac/doc%2Fbasics.md", "raw_url": "https://github.com/rust-lang/rust/raw/78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac/doc%2Fbasics.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2Fbasics.md?ref=78ffcd9959cc81d1328fcafb996dcc7cd9b5f1ac", "patch": "@@ -14,6 +14,7 @@ the codebase take a look at [Adding Lints] or [Common Tools].\n   - [lintcheck](#lintcheck)\n   - [PR](#pr)\n   - [Common Abbreviations](#common-abbreviations)\n+  - [Install from source](#install-from-source)\n \n ## Get the Code\n \n@@ -128,4 +129,45 @@ This is a concise list of abbreviations that can come up during Clippy developme\n general list can be found in the [rustc-dev-guide glossary][glossary]. Always feel free to ask if\n an abbreviation or meaning is unclear to you.\n \n+## Install from source\n+\n+If you are hacking on Clippy and want to install it from source, do the following:\n+\n+First, take note of the toolchain [override](https://rust-lang.github.io/rustup/overrides.html) in `/rust-toolchain`.\n+We will use this override to install Clippy into the right toolchain.\n+\n+> Tip: You can view the active toolchain for the current directory with `rustup show active-toolchain`.\n+\n+From the Clippy project root, run the following command to build the Clippy binaries and copy them into the\n+toolchain directory. This will override the currently installed Clippy component.\n+\n+```terminal\n+cargo build --release --bin cargo-clippy --bin clippy-driver -Zunstable-options --out-dir \"$(rustc --print=sysroot)/bin\"\n+```\n+\n+Now you may run `cargo clippy` in any project, using the toolchain where you just installed Clippy.\n+\n+```terminal\n+cd my-project\n+cargo +nightly-2021-07-01 clippy\n+```\n+\n+...or `clippy-driver`\n+\n+```terminal\n+clippy-driver +nightly-2021-07-01 <filename>\n+```\n+\n+If you need to restore the default Clippy installation, run the following (from the Clippy project root).\n+\n+```terminal\n+rustup component remove clippy\n+rustup component add clippy\n+```\n+\n+> **DO NOT** install using `cargo install --path . --force` since this will overwrite rustup\n+[proxies](https://rust-lang.github.io/rustup/concepts/proxies.html). That is, `~/.cargo/bin/cargo-clippy` and\n+`~/.cargo/bin/clippy-driver` should be hard or soft links to `~/.cargo/bin/rustup`. You can repair these by running\n+`rustup update`.\n+\n [glossary]: https://rustc-dev-guide.rust-lang.org/appendix/glossary.html"}]}