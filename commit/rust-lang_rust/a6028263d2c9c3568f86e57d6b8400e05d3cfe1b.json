{"sha": "a6028263d2c9c3568f86e57d6b8400e05d3cfe1b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2MDI4MjYzZDJjOWMzNTY4Zjg2ZTU3ZDZiODQwMGUwNWQzY2ZlMWI=", "commit": {"author": {"name": "lqd", "email": "remy.rakic+github@gmail.com", "date": "2019-01-25T17:35:47Z"}, "committer": {"name": "Re\u0301my Rakic", "email": "remy.rakic@gmail.com", "date": "2019-01-27T09:52:41Z"}, "message": "Handle higher-ranked lifetime conflict errors where the subtype is the `sup` region\n\nThese are happening since the switch to universes, and will now go through the \"placeholder error\" path, instead of the current fallback of E308 \"mismatched types\" errors.", "tree": {"sha": "34f745260534ae8b99f2054c1c323c9ffd8f17a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/34f745260534ae8b99f2054c1c323c9ffd8f17a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b", "html_url": "https://github.com/rust-lang/rust/commit/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b/comments", "author": {"login": "lqd", "id": 247183, "node_id": "MDQ6VXNlcjI0NzE4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/247183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lqd", "html_url": "https://github.com/lqd", "followers_url": "https://api.github.com/users/lqd/followers", "following_url": "https://api.github.com/users/lqd/following{/other_user}", "gists_url": "https://api.github.com/users/lqd/gists{/gist_id}", "starred_url": "https://api.github.com/users/lqd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lqd/subscriptions", "organizations_url": "https://api.github.com/users/lqd/orgs", "repos_url": "https://api.github.com/users/lqd/repos", "events_url": "https://api.github.com/users/lqd/events{/privacy}", "received_events_url": "https://api.github.com/users/lqd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lqd", "id": 247183, "node_id": "MDQ6VXNlcjI0NzE4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/247183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lqd", "html_url": "https://github.com/lqd", "followers_url": "https://api.github.com/users/lqd/followers", "following_url": "https://api.github.com/users/lqd/following{/other_user}", "gists_url": "https://api.github.com/users/lqd/gists{/gist_id}", "starred_url": "https://api.github.com/users/lqd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lqd/subscriptions", "organizations_url": "https://api.github.com/users/lqd/orgs", "repos_url": "https://api.github.com/users/lqd/repos", "events_url": "https://api.github.com/users/lqd/events{/privacy}", "received_events_url": "https://api.github.com/users/lqd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1437c944c280ff9d761c45912167f1023d0e24c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1437c944c280ff9d761c45912167f1023d0e24c", "html_url": "https://github.com/rust-lang/rust/commit/c1437c944c280ff9d761c45912167f1023d0e24c"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "636b66bef01cf9d12b423aca59568fb4d099d84f", "filename": "src/librustc/infer/error_reporting/nice_region_error/placeholder_error.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fplaceholder_error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6028263d2c9c3568f86e57d6b8400e05d3cfe1b/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fplaceholder_error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fplaceholder_error.rs?ref=a6028263d2c9c3568f86e57d6b8400e05d3cfe1b", "patch": "@@ -96,6 +96,30 @@ impl NiceRegionError<'me, 'gcx, 'tcx> {\n                 ))\n             }\n \n+            Some(RegionResolutionError::SubSupConflict(\n+                vid,\n+                _,\n+                _,\n+                _,\n+                SubregionOrigin::Subtype(TypeTrace {\n+                    cause,\n+                    values: ValuePairs::TraitRefs(ExpectedFound { expected, found }),\n+                }),\n+                sup_placeholder @ ty::RePlaceholder(_),\n+            ))\n+                if expected.def_id == found.def_id =>\n+            {\n+                Some(self.try_report_placeholders_trait(\n+                    Some(self.tcx().mk_region(ty::ReVar(*vid))),\n+                    cause,\n+                    None,\n+                    Some(*sup_placeholder),\n+                    expected.def_id,\n+                    expected.substs,\n+                    found.substs,\n+                ))\n+            }\n+\n             Some(RegionResolutionError::ConcreteFailure(\n                 SubregionOrigin::Subtype(TypeTrace {\n                     cause,"}]}