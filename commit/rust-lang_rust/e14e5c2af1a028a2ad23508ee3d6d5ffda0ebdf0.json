{"sha": "e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "node_id": "C_kwDOAAsO6NoAKGUxNGU1YzJhZjFhMDI4YTJhZDIzNTA4ZWUzZDZkNWZmZGEwZWJkZjA", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-05T17:57:35Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-05T18:14:59Z"}, "message": "Don't use hyperfine during testing\n\nA new command ./y.rs bench is introduced for benchmarking. This change\nallows skipping hyperfine installation in ./y.rs prepare and thus avoids\nwriting to ~/.cargo/bin.", "tree": {"sha": "88fd4461ad7bb5c8552d52409d31d042029b4719", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/88fd4461ad7bb5c8552d52409d31d042029b4719"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "html_url": "https://github.com/rust-lang/rust/commit/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da37e16c2366a47b6599600d6b69d0f89480857d", "url": "https://api.github.com/repos/rust-lang/rust/commits/da37e16c2366a47b6599600d6b69d0f89480857d", "html_url": "https://github.com/rust-lang/rust/commit/da37e16c2366a47b6599600d6b69d0f89480857d"}], "stats": {"total": 216, "additions": 106, "deletions": 110}, "files": [{"sha": "7c966aa1ab9a9aa30660f858cdeab1ceb14e2e8f", "filename": ".cirrus.yml", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.cirrus.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.cirrus.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cirrus.yml?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -6,8 +6,6 @@ task:\n     - pkg install -y curl git bash\n     - curl https://sh.rustup.rs -sSf --output rustup.sh\n     - sh rustup.sh --default-toolchain none -y --profile=minimal\n-  cargo_bin_cache:\n-    folder: ~/.cargo/bin\n   target_cache:\n     folder: target\n   prepare_script:"}, {"sha": "cc9ae19afded61ab6d32b5c094b7debb8c30562d", "filename": ".github/workflows/main.yml", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Fmain.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Fmain.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fmain.yml?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -62,12 +62,6 @@ jobs:\n     steps:\n     - uses: actions/checkout@v3\n \n-    - name: Cache cargo installed crates\n-      uses: actions/cache@v3\n-      with:\n-        path: ~/.cargo/bin\n-        key: ${{ runner.os }}-${{ matrix.env.TARGET_TRIPLE }}-cargo-installed-crates\n-\n     - name: Cache cargo registry and index\n       uses: actions/cache@v3\n       with:"}, {"sha": "968cd43efd15d65894380c73a83dfa602d73adb7", "filename": ".github/workflows/nightly-cranelift.yml", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Fnightly-cranelift.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Fnightly-cranelift.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fnightly-cranelift.yml?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -13,12 +13,6 @@ jobs:\n     steps:\n     - uses: actions/checkout@v3\n \n-    - name: Cache cargo installed crates\n-      uses: actions/cache@v3\n-      with:\n-        path: ~/.cargo/bin\n-        key: ubuntu-latest-cargo-installed-crates\n-\n     - name: Prepare dependencies\n       run: |\n         git config --global user.email \"user@example.com\""}, {"sha": "2c7de86f9b9071abe77e7cf6e9294db06088abc9", "filename": ".github/workflows/rustc.yml", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Frustc.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.github%2Fworkflows%2Frustc.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frustc.yml?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -10,12 +10,6 @@ jobs:\n     steps:\n     - uses: actions/checkout@v3\n \n-    - name: Cache cargo installed crates\n-      uses: actions/cache@v3\n-      with:\n-        path: ~/.cargo/bin\n-        key: ${{ runner.os }}-cargo-installed-crates\n-\n     - name: Cache cargo registry and index\n       uses: actions/cache@v3\n       with:\n@@ -44,12 +38,6 @@ jobs:\n     steps:\n     - uses: actions/checkout@v3\n \n-    - name: Cache cargo installed crates\n-      uses: actions/cache@v3\n-      with:\n-        path: ~/.cargo/bin\n-        key: ${{ runner.os }}-cargo-installed-crates\n-\n     - name: Cache cargo registry and index\n       uses: actions/cache@v3\n       with:"}, {"sha": "d8650d1e387d21be8f51991f0c1ac5d92439a1b7", "filename": ".vscode/settings.json", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.vscode%2Fsettings.json", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/.vscode%2Fsettings.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.vscode%2Fsettings.json?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -30,7 +30,7 @@\n             ]\n         },\n         {\n-            \"sysroot_src\": \"./build_sysroot/sysroot_src/library\",\n+            \"sysroot_src\": \"./download/sysroot/sysroot_src/library\",\n             \"crates\": [\n                 {\n                     \"root_module\": \"./example/std_example.rs\","}, {"sha": "0ad8863223de6aa32568b2609fbc542322dbc4bd", "filename": "build_system/bench.rs", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fbench.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fbench.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fbench.rs?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -0,0 +1,79 @@\n+use std::env;\n+use std::fs;\n+use std::path::Path;\n+\n+use super::path::{Dirs, RelPath};\n+use super::prepare::GitRepo;\n+use super::rustc_info::{get_file_name, get_wrapper_file_name};\n+use super::utils::{hyperfine_command, is_ci, spawn_and_wait, CargoProject};\n+\n+pub(crate) static SIMPLE_RAYTRACER_REPO: GitRepo = GitRepo::github(\n+    \"ebobby\",\n+    \"simple-raytracer\",\n+    \"804a7a21b9e673a482797aa289a18ed480e4d813\",\n+    \"<none>\",\n+);\n+\n+pub(crate) static SIMPLE_RAYTRACER: CargoProject =\n+    CargoProject::new(&SIMPLE_RAYTRACER_REPO.source_dir(), \"simple_raytracer\");\n+\n+pub(crate) fn benchmark(dirs: &Dirs) {\n+    benchmark_simple_raytracer(dirs);\n+}\n+\n+fn benchmark_simple_raytracer(dirs: &Dirs) {\n+    if std::process::Command::new(\"hyperfine\").output().is_err() {\n+        eprintln!(\"Hyperfine not installed\");\n+        eprintln!(\"Hint: Try `cargo install hyperfine` to install hyperfine\");\n+        std::process::exit(1);\n+    }\n+\n+    let run_runs = env::var(\"RUN_RUNS\")\n+        .unwrap_or(if is_ci() { \"2\" } else { \"10\" }.to_string())\n+        .parse()\n+        .unwrap();\n+\n+    eprintln!(\"[BENCH COMPILE] ebobby/simple-raytracer\");\n+    let cargo_clif = RelPath::DIST.to_path(dirs).join(get_wrapper_file_name(\"cargo-clif\", \"bin\"));\n+    let manifest_path = SIMPLE_RAYTRACER.manifest_path(dirs);\n+    let target_dir = SIMPLE_RAYTRACER.target_dir(dirs);\n+\n+    let clean_cmd = format!(\n+        \"cargo clean --manifest-path {manifest_path} --target-dir {target_dir}\",\n+        manifest_path = manifest_path.display(),\n+        target_dir = target_dir.display(),\n+    );\n+    let llvm_build_cmd = format!(\n+        \"cargo build --manifest-path {manifest_path} --target-dir {target_dir}\",\n+        manifest_path = manifest_path.display(),\n+        target_dir = target_dir.display(),\n+    );\n+    let clif_build_cmd = format!(\n+        \"{cargo_clif} build --manifest-path {manifest_path} --target-dir {target_dir}\",\n+        cargo_clif = cargo_clif.display(),\n+        manifest_path = manifest_path.display(),\n+        target_dir = target_dir.display(),\n+    );\n+\n+    let bench_compile =\n+        hyperfine_command(1, run_runs, Some(&clean_cmd), &llvm_build_cmd, &clif_build_cmd);\n+\n+    spawn_and_wait(bench_compile);\n+\n+    eprintln!(\"[BENCH RUN] ebobby/simple-raytracer\");\n+    fs::copy(\n+        target_dir.join(\"debug\").join(get_file_name(\"main\", \"bin\")),\n+        RelPath::BUILD.to_path(dirs).join(get_file_name(\"raytracer_cg_clif\", \"bin\")),\n+    )\n+    .unwrap();\n+\n+    let mut bench_run = hyperfine_command(\n+        0,\n+        run_runs,\n+        None,\n+        Path::new(\".\").join(get_file_name(\"raytracer_cg_llvm\", \"bin\")).to_str().unwrap(),\n+        Path::new(\".\").join(get_file_name(\"raytracer_cg_clif\", \"bin\")).to_str().unwrap(),\n+    );\n+    bench_run.current_dir(RelPath::BUILD.to_path(dirs));\n+    spawn_and_wait(bench_run);\n+}"}, {"sha": "76d1d013b0dbca75cffe1b71e9014c19728c47fa", "filename": "build_system/mod.rs", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fmod.rs?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -5,6 +5,7 @@ use std::process;\n use self::utils::is_ci;\n \n mod abi_cafe;\n+mod bench;\n mod build_backend;\n mod build_sysroot;\n mod config;\n@@ -20,6 +21,7 @@ USAGE:\n     ./y.rs prepare [--out-dir DIR]\n     ./y.rs build [--debug] [--sysroot none|clif|llvm] [--out-dir DIR] [--no-unstable-features]\n     ./y.rs test [--debug] [--sysroot none|clif|llvm] [--out-dir DIR] [--no-unstable-features]\n+    ./y.rs bench [--debug] [--sysroot none|clif|llvm] [--out-dir DIR] [--no-unstable-features]\n \n OPTIONS:\n     --sysroot none|clif|llvm\n@@ -54,6 +56,7 @@ enum Command {\n     Prepare,\n     Build,\n     Test,\n+    Bench,\n }\n \n #[derive(Copy, Clone, Debug)]\n@@ -67,7 +70,7 @@ pub fn main() {\n     if env::var(\"RUST_BACKTRACE\").is_err() {\n         env::set_var(\"RUST_BACKTRACE\", \"1\");\n     }\n-    env::set_var(\"CG_CLIF_DISPLAY_CG_TIME\", \"1\");\n+    env::set_var(\"CG_CLIF_DISPLAY_CG_TIME\", \"1\"); // FIXME disable this by default\n     env::set_var(\"CG_CLIF_DISABLE_INCR_CACHE\", \"1\");\n \n     if is_ci() {\n@@ -83,6 +86,7 @@ pub fn main() {\n         Some(\"prepare\") => Command::Prepare,\n         Some(\"build\") => Command::Build,\n         Some(\"test\") => Command::Test,\n+        Some(\"bench\") => Command::Bench,\n         Some(flag) if flag.starts_with('-') => arg_error!(\"Expected command found flag {}\", flag),\n         Some(command) => arg_error!(\"Unknown command {}\", command),\n         None => {\n@@ -198,5 +202,16 @@ pub fn main() {\n                 &target_triple,\n             );\n         }\n+        Command::Bench => {\n+            build_sysroot::build_sysroot(\n+                &dirs,\n+                channel,\n+                sysroot_kind,\n+                &cg_clif_dylib,\n+                &host_triple,\n+                &target_triple,\n+            );\n+            bench::benchmark(&dirs);\n+        }\n     }\n }"}, {"sha": "9ad4ddc92c5affad8a522ceb14e672380ab0c5b9", "filename": "build_system/prepare.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fprepare.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Fprepare.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fprepare.rs?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -33,14 +33,14 @@ pub(crate) fn prepare(dirs: &Dirs) {\n     super::tests::RAND_REPO.fetch(dirs);\n     super::tests::REGEX_REPO.fetch(dirs);\n     super::tests::PORTABLE_SIMD_REPO.fetch(dirs);\n-    super::tests::SIMPLE_RAYTRACER_REPO.fetch(dirs);\n+    super::bench::SIMPLE_RAYTRACER_REPO.fetch(dirs);\n \n     eprintln!(\"[LLVM BUILD] simple-raytracer\");\n     let host_compiler = Compiler::host();\n-    let build_cmd = super::tests::SIMPLE_RAYTRACER.build(&host_compiler, dirs);\n+    let build_cmd = super::bench::SIMPLE_RAYTRACER.build(&host_compiler, dirs);\n     spawn_and_wait(build_cmd);\n     fs::copy(\n-        super::tests::SIMPLE_RAYTRACER\n+        super::bench::SIMPLE_RAYTRACER\n             .target_dir(dirs)\n             .join(&host_compiler.triple)\n             .join(\"debug\")"}, {"sha": "5b8b6f2df1066875aeb24a15bd8af8b11f875968", "filename": "build_system/tests.rs", "status": "modified", "additions": 6, "deletions": 78, "changes": 84, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/build_system%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Ftests.rs?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -1,13 +1,9 @@\n-use crate::build_system::build_sysroot::SYSROOT_SRC;\n-\n-use super::build_sysroot;\n+use super::bench::SIMPLE_RAYTRACER;\n+use super::build_sysroot::{self, SYSROOT_SRC};\n use super::config;\n use super::path::{Dirs, RelPath};\n use super::prepare::GitRepo;\n-use super::rustc_info::{get_file_name, get_wrapper_file_name};\n-use super::utils::{\n-    hyperfine_command, is_ci, spawn_and_wait, spawn_and_wait_with_input, CargoProject, Compiler,\n-};\n+use super::utils::{spawn_and_wait, spawn_and_wait_with_input, CargoProject, Compiler};\n use super::SysrootKind;\n use std::env;\n use std::ffi::OsStr;\n@@ -253,16 +249,6 @@ pub(crate) static PORTABLE_SIMD_REPO: GitRepo = GitRepo::github(\n static PORTABLE_SIMD: CargoProject =\n     CargoProject::new(&PORTABLE_SIMD_REPO.source_dir(), \"portable_simd\");\n \n-pub(crate) static SIMPLE_RAYTRACER_REPO: GitRepo = GitRepo::github(\n-    \"ebobby\",\n-    \"simple-raytracer\",\n-    \"804a7a21b9e673a482797aa289a18ed480e4d813\",\n-    \"<none>\",\n-);\n-\n-pub(crate) static SIMPLE_RAYTRACER: CargoProject =\n-    CargoProject::new(&SIMPLE_RAYTRACER_REPO.source_dir(), \"simple_raytracer\");\n-\n static LIBCORE_TESTS: CargoProject =\n     CargoProject::new(&SYSROOT_SRC.join(\"library/core/tests\"), \"core_tests\");\n \n@@ -282,67 +268,9 @@ const EXTENDED_SYSROOT_SUITE: &[TestCase] = &[\n             spawn_and_wait(build_cmd);\n         }\n     }),\n-    TestCase::new(\"bench.simple-raytracer\", &|runner| {\n-        let run_runs = env::var(\"RUN_RUNS\")\n-            .unwrap_or(if is_ci() { \"2\" } else { \"10\" }.to_string())\n-            .parse()\n-            .unwrap();\n-\n-        if runner.is_native {\n-            eprintln!(\"[BENCH COMPILE] ebobby/simple-raytracer\");\n-            let cargo_clif = RelPath::DIST\n-                .to_path(&runner.dirs)\n-                .join(get_wrapper_file_name(\"cargo-clif\", \"bin\"));\n-            let manifest_path = SIMPLE_RAYTRACER.manifest_path(&runner.dirs);\n-            let target_dir = SIMPLE_RAYTRACER.target_dir(&runner.dirs);\n-\n-            let clean_cmd = format!(\n-                \"cargo clean --manifest-path {manifest_path} --target-dir {target_dir}\",\n-                manifest_path = manifest_path.display(),\n-                target_dir = target_dir.display(),\n-            );\n-            let llvm_build_cmd = format!(\n-                \"cargo build --manifest-path {manifest_path} --target-dir {target_dir}\",\n-                manifest_path = manifest_path.display(),\n-                target_dir = target_dir.display(),\n-            );\n-            let clif_build_cmd = format!(\n-                \"{cargo_clif} build --manifest-path {manifest_path} --target-dir {target_dir}\",\n-                cargo_clif = cargo_clif.display(),\n-                manifest_path = manifest_path.display(),\n-                target_dir = target_dir.display(),\n-            );\n-\n-            let bench_compile =\n-                hyperfine_command(1, run_runs, Some(&clean_cmd), &llvm_build_cmd, &clif_build_cmd);\n-\n-            spawn_and_wait(bench_compile);\n-\n-            eprintln!(\"[BENCH RUN] ebobby/simple-raytracer\");\n-            fs::copy(\n-                target_dir.join(\"debug\").join(get_file_name(\"main\", \"bin\")),\n-                RelPath::BUILD\n-                    .to_path(&runner.dirs)\n-                    .join(get_file_name(\"raytracer_cg_clif\", \"bin\")),\n-            )\n-            .unwrap();\n-\n-            let mut bench_run = hyperfine_command(\n-                0,\n-                run_runs,\n-                None,\n-                Path::new(\".\").join(get_file_name(\"raytracer_cg_llvm\", \"bin\")).to_str().unwrap(),\n-                Path::new(\".\").join(get_file_name(\"raytracer_cg_clif\", \"bin\")).to_str().unwrap(),\n-            );\n-            bench_run.current_dir(RelPath::BUILD.to_path(&runner.dirs));\n-            spawn_and_wait(bench_run);\n-        } else {\n-            spawn_and_wait(SIMPLE_RAYTRACER.clean(&runner.target_compiler.cargo, &runner.dirs));\n-            eprintln!(\"[BENCH COMPILE] ebobby/simple-raytracer (skipped)\");\n-            eprintln!(\"[COMPILE] ebobby/simple-raytracer\");\n-            spawn_and_wait(SIMPLE_RAYTRACER.build(&runner.target_compiler, &runner.dirs));\n-            eprintln!(\"[BENCH RUN] ebobby/simple-raytracer (skipped)\");\n-        }\n+    TestCase::new(\"test.simple-raytracer\", &|runner| {\n+        spawn_and_wait(SIMPLE_RAYTRACER.clean(&runner.host_compiler.cargo, &runner.dirs));\n+        spawn_and_wait(SIMPLE_RAYTRACER.build(&runner.target_compiler, &runner.dirs));\n     }),\n     TestCase::new(\"test.libcore\", &|runner| {\n         spawn_and_wait(LIBCORE_TESTS.clean(&runner.host_compiler.cargo, &runner.dirs));"}, {"sha": "d9912a8158f676715ed0567806ed4609e6ec3e7d", "filename": "config.txt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/config.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0/config.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.txt?ref=e14e5c2af1a028a2ad23508ee3d6d5ffda0ebdf0", "patch": "@@ -44,7 +44,7 @@ aot.issue-72793\n \n testsuite.extended_sysroot\n test.rust-random/rand\n-bench.simple-raytracer\n+test.simple-raytracer\n test.libcore\n test.regex-shootout-regex-dna\n test.regex"}]}