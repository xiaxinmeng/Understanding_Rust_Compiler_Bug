{"sha": "91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxNjExZmMzZDBlZThhN2EwYTdhY2NmZjQzNzdlM2EyMWZkN2I2YzQ=", "commit": {"author": {"name": "Ed Schouten", "email": "ed@nuxi.nl", "date": "2018-01-05T21:16:54Z"}, "committer": {"name": "Ed Schouten", "email": "ed@nuxi.nl", "date": "2018-01-05T21:16:54Z"}, "message": "Let libpanic_abort call into libc's abort() on CloudABI.\n\nIdeally, we should make use of CloudABI's internal proc_raise(SIGABRT)\nsystem call. POSIX abort() requires things like flushing of stdios,\nwhich may not be what we want under panic conditions. Invoking the raw\nCloudABI system call would have prevented that.\n\nUnfortunately, we have to make use of the \"cloudabi\" crate to invoke raw\nCloudABI system calls. This is undesired, as discussed in the pull\nrequest (#47190).", "tree": {"sha": "83290036063c621dce44b582c9121fa639613acd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83290036063c621dce44b582c9121fa639613acd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4", "html_url": "https://github.com/rust-lang/rust/commit/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4/comments", "author": {"login": "EdSchouten", "id": 736085, "node_id": "MDQ6VXNlcjczNjA4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/736085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdSchouten", "html_url": "https://github.com/EdSchouten", "followers_url": "https://api.github.com/users/EdSchouten/followers", "following_url": "https://api.github.com/users/EdSchouten/following{/other_user}", "gists_url": "https://api.github.com/users/EdSchouten/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdSchouten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdSchouten/subscriptions", "organizations_url": "https://api.github.com/users/EdSchouten/orgs", "repos_url": "https://api.github.com/users/EdSchouten/repos", "events_url": "https://api.github.com/users/EdSchouten/events{/privacy}", "received_events_url": "https://api.github.com/users/EdSchouten/received_events", "type": "User", "site_admin": false}, "committer": {"login": "EdSchouten", "id": 736085, "node_id": "MDQ6VXNlcjczNjA4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/736085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdSchouten", "html_url": "https://github.com/EdSchouten", "followers_url": "https://api.github.com/users/EdSchouten/followers", "following_url": "https://api.github.com/users/EdSchouten/following{/other_user}", "gists_url": "https://api.github.com/users/EdSchouten/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdSchouten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdSchouten/subscriptions", "organizations_url": "https://api.github.com/users/EdSchouten/orgs", "repos_url": "https://api.github.com/users/EdSchouten/repos", "events_url": "https://api.github.com/users/EdSchouten/events{/privacy}", "received_events_url": "https://api.github.com/users/EdSchouten/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a8f0a8cb050e647fc146363d6558a6c17155ce5", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a8f0a8cb050e647fc146363d6558a6c17155ce5", "html_url": "https://github.com/rust-lang/rust/commit/9a8f0a8cb050e647fc146363d6558a6c17155ce5"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "c3bd6a2bc187d38cdd176fa19c4df2f369f9c2be", "filename": "src/libpanic_abort/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4/src%2Flibpanic_abort%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4/src%2Flibpanic_abort%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_abort%2Flib.rs?ref=91611fc3d0ee8a7a0a7accff4377e3a21fd7b6c4", "patch": "@@ -53,7 +53,7 @@ pub unsafe extern fn __rust_maybe_catch_panic(f: fn(*mut u8),\n pub unsafe extern fn __rust_start_panic(_data: usize, _vtable: usize) -> u32 {\n     abort();\n \n-    #[cfg(unix)]\n+    #[cfg(any(unix, target_os = \"cloudabi\"))]\n     unsafe fn abort() -> ! {\n         extern crate libc;\n         libc::abort();"}]}