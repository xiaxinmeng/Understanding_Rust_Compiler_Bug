{"sha": "3d08840f34a7430a84d75a28fac8a839fab0c830", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNkMDg4NDBmMzRhNzQzMGE4NGQ3NWEyOGZhYzhhODM5ZmFiMGM4MzA=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2012-01-24T04:46:33Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2012-01-24T04:46:33Z"}, "message": "Merge pull request #1628 from startling/cargo-descriptions\n\nImplemented package descriptions for cargo", "tree": {"sha": "d5351c7047d05d5044c58824b4afe30bb14966c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5351c7047d05d5044c58824b4afe30bb14966c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d08840f34a7430a84d75a28fac8a839fab0c830", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d08840f34a7430a84d75a28fac8a839fab0c830", "html_url": "https://github.com/rust-lang/rust/commit/3d08840f34a7430a84d75a28fac8a839fab0c830", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d08840f34a7430a84d75a28fac8a839fab0c830/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e13d19cc07a1e8fbf478d21cabbd7b9f80e3b54", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e13d19cc07a1e8fbf478d21cabbd7b9f80e3b54", "html_url": "https://github.com/rust-lang/rust/commit/5e13d19cc07a1e8fbf478d21cabbd7b9f80e3b54"}, {"sha": "2c3cd1749e14682658ae3a958bb92404f795d263", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c3cd1749e14682658ae3a958bb92404f795d263", "html_url": "https://github.com/rust-lang/rust/commit/2c3cd1749e14682658ae3a958bb92404f795d263"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "6fdbeb96c1439f88c6e10ba67beb9d73b70684ee", "filename": "src/cargo/cargo.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3d08840f34a7430a84d75a28fac8a839fab0c830/src%2Fcargo%2Fcargo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3d08840f34a7430a84d75a28fac8a839fab0c830/src%2Fcargo%2Fcargo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcargo%2Fcargo.rs?ref=3d08840f34a7430a84d75a28fac8a839fab0c830", "patch": "@@ -34,6 +34,7 @@ type package = {\n     uuid: str,\n     url: str,\n     method: str,\n+    description: str,\n     ref: option::t<str>,\n     tags: [str]\n };\n@@ -271,12 +272,22 @@ fn load_one_source_package(&src: source, p: map::hashmap<str, json::json>) {\n         }\n         _ { }\n     }\n+\n+    let description = alt p.find(\"description\") {\n+        some(json::string(_n)) { _n }\n+        _ {\n+            warn(\"Malformed source json: \" + src.name + \" (missing description)\");\n+            ret;\n+        }\n+    };\n+\n     vec::grow(src.packages, 1u, {\n         // source: _source(src),\n         name: name,\n         uuid: uuid,\n         url: url,\n         method: method,\n+        description: description,\n         ref: ref,\n         tags: tags\n     });\n@@ -683,6 +694,9 @@ fn print_pkg(s: source, p: package) {\n         m = m + \" [\" + str::connect(p.tags, \", \") + \"]\";\n     }\n     info(m);\n+    if p.description != \"\" {\n+        print(\"   >> \" + p.description + \"\\n\")\n+    }\n }\n fn cmd_list(c: cargo, argv: [str]) {\n     for_each_package(c, { |s, p|"}]}