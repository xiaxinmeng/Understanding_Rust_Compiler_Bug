{"sha": "99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5YzQyMWYwMWQ4NWYzYWNmMTA0N2FlNWJmNmFmYTZmMGQxMjUzYjQ=", "commit": {"author": {"name": "Stefan Plantikow", "email": "stefan.plantikow@googlemail.com", "date": "2011-11-13T21:47:11Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-17T02:52:46Z"}, "message": "Removed --no-typestate flag from rutsc\n\nFixes issue #1139", "tree": {"sha": "6b65d8fd6f1a3baf191b7d450e7e8426f23b9ba2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b65d8fd6f1a3baf191b7d450e7e8426f23b9ba2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "html_url": "https://github.com/rust-lang/rust/commit/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/comments", "author": {"login": "boggle", "id": 50886, "node_id": "MDQ6VXNlcjUwODg2", "avatar_url": "https://avatars.githubusercontent.com/u/50886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/boggle", "html_url": "https://github.com/boggle", "followers_url": "https://api.github.com/users/boggle/followers", "following_url": "https://api.github.com/users/boggle/following{/other_user}", "gists_url": "https://api.github.com/users/boggle/gists{/gist_id}", "starred_url": "https://api.github.com/users/boggle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/boggle/subscriptions", "organizations_url": "https://api.github.com/users/boggle/orgs", "repos_url": "https://api.github.com/users/boggle/repos", "events_url": "https://api.github.com/users/boggle/events{/privacy}", "received_events_url": "https://api.github.com/users/boggle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02cebbb9f1d30fbad2b82ac1599c593b5af95019", "url": "https://api.github.com/repos/rust-lang/rust/commits/02cebbb9f1d30fbad2b82ac1599c593b5af95019", "html_url": "https://github.com/rust-lang/rust/commit/02cebbb9f1d30fbad2b82ac1599c593b5af95019"}], "stats": {"total": 19, "additions": 3, "deletions": 16}, "files": [{"sha": "1612fba873a7a4cf6915114c5f6ea8f01517170f", "filename": "Makefile.in", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "patch": "@@ -79,9 +79,6 @@ endif\n ifdef TIME_LLVM_PASSES\n   CFG_RUSTC_FLAGS += --time-llvm-passes\n endif\n-ifdef NO_TYPESTATE\n-  CFG_RUSTC_FLAGS += --no-typestate\n-endif\n ifdef DEBUG\n   CFG_RUSTC_FLAGS += -g\n endif"}, {"sha": "36ddea96ef466e109534a55eac85cb243d8dec7f", "filename": "man/rustc.1", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/man%2Frustc.1", "raw_url": "https://github.com/rust-lang/rust/raw/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/man%2Frustc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustc.1?ref=99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "patch": "@@ -115,10 +115,6 @@ values include \"i686-unknown-linux-gnu\" and \"mips-idt-ecoff\"; see\n <\\fBhttp://sources.redhat.com/autobook/autobook/autobook_17.html\\fR>. If not\n supplied, the host triple is used (see \\fB--version\\fR output).\n .TP\n-\\fB--no-typestate\\fR:\n-Disable the typestate pass. This breaks some safety\n-guarantees of the language and is quite dangerous.\n-.TP\n \\fB--test\\fR:\n Build a test harness.\n .TP"}, {"sha": "1937311a42a64b6d80a977922304da8944633d5d", "filename": "src/comp/driver/rustc.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/src%2Fcomp%2Fdriver%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/src%2Fcomp%2Fdriver%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Frustc.rs?ref=99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "patch": "@@ -142,10 +142,8 @@ fn compile_input(sess: session::session, cfg: ast::crate_cfg, input: str,\n          bind fn_usage::check_crate_fn_usage(ty_cx, crate));\n     time(time_passes, \"alt checking\",\n          bind middle::check_alt::check_crate(ty_cx, crate));\n-    if sess.get_opts().run_typestate {\n-        time(time_passes, \"typestate checking\",\n-             bind middle::tstate::ck::check_crate(ty_cx, crate));\n-    }\n+    time(time_passes, \"typestate checking\",\n+         bind middle::tstate::ck::check_crate(ty_cx, crate));\n     let mut_map =\n         time(time_passes, \"mutability checking\",\n              bind middle::mut::check_crate(ty_cx, crate));\n@@ -273,7 +271,6 @@ options:\n     --time-llvm-passes time the individual phases of the LLVM backend\n     --sysroot <path>   override the system root\n     --target <triple>  target to compile for (default: host triple)\n-    --no-typestate     don't run the typestate pass (unsafe!)\n     --test             build test harness\n     --gc               garbage collect shared data (experimental/temporary)\n     --stack-growth     perform stack checks (experimental)\n@@ -363,7 +360,6 @@ fn build_session_options(match: getopts::match)\n     let stats = opt_present(match, \"stats\");\n     let time_passes = opt_present(match, \"time-passes\");\n     let time_llvm_passes = opt_present(match, \"time-llvm-passes\");\n-    let run_typestate = !opt_present(match, \"no-typestate\");\n     let sysroot_opt = getopts::opt_maybe_str(match, \"sysroot\");\n     let target_opt = getopts::opt_maybe_str(match, \"target\");\n     let no_asm_comments = getopts::opt_present(match, \"no-asm-comments\");\n@@ -407,7 +403,6 @@ fn build_session_options(match: getopts::match)\n           optimize: opt_level,\n           debuginfo: debuginfo,\n           verify: verify,\n-          run_typestate: run_typestate,\n           save_temps: save_temps,\n           stats: stats,\n           time_passes: time_passes,\n@@ -458,7 +453,7 @@ fn opts() -> [getopts::opt] {\n          optflag(\"c\"), optopt(\"o\"), optflag(\"g\"), optflag(\"save-temps\"),\n          optopt(\"sysroot\"), optopt(\"target\"), optflag(\"stats\"),\n          optflag(\"time-passes\"), optflag(\"time-llvm-passes\"),\n-         optflag(\"no-typestate\"), optflag(\"noverify\"),\n+         optflag(\"noverify\"),\n          optmulti(\"cfg\"), optflag(\"test\"),\n          optflag(\"lib\"), optflag(\"static\"), optflag(\"gc\"),\n          optflag(\"stack-growth\"), optflag(\"check-unsafe\"),"}, {"sha": "c5708551ad91da78005f37441576e129ae3cbba3", "filename": "src/comp/driver/session.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/src%2Fcomp%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99c421f01d85f3acf1047ae5bf6afa6f0d1253b4/src%2Fcomp%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Fsession.rs?ref=99c421f01d85f3acf1047ae5bf6afa6f0d1253b4", "patch": "@@ -29,7 +29,6 @@ type options =\n      optimize: uint,\n      debuginfo: bool,\n      verify: bool,\n-     run_typestate: bool,\n      save_temps: bool,\n      stats: bool,\n      time_passes: bool,"}]}