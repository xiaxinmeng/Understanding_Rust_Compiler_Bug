{"sha": "cac62ab2dde20adca6e1a9070211afbc784c1d64", "node_id": "C_kwDOAAsO6NoAKGNhYzYyYWIyZGRlMjBhZGNhNmUxYTkwNzAyMTFhZmJjNzg0YzFkNjQ", "commit": {"author": {"name": "whtahy", "email": "whtahy@users.noreply.github.com", "date": "2023-04-19T03:55:20Z"}, "committer": {"name": "whtahy", "email": "whtahy@users.noreply.github.com", "date": "2023-04-22T04:47:07Z"}, "message": "add known-bug test for unsound issue 84533", "tree": {"sha": "037921b8c8dba3140632c6df9ba66fe365135c69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/037921b8c8dba3140632c6df9ba66fe365135c69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cac62ab2dde20adca6e1a9070211afbc784c1d64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cac62ab2dde20adca6e1a9070211afbc784c1d64", "html_url": "https://github.com/rust-lang/rust/commit/cac62ab2dde20adca6e1a9070211afbc784c1d64", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cac62ab2dde20adca6e1a9070211afbc784c1d64/comments", "author": {"login": "whtahy", "id": 19783477, "node_id": "MDQ6VXNlcjE5NzgzNDc3", "avatar_url": "https://avatars.githubusercontent.com/u/19783477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whtahy", "html_url": "https://github.com/whtahy", "followers_url": "https://api.github.com/users/whtahy/followers", "following_url": "https://api.github.com/users/whtahy/following{/other_user}", "gists_url": "https://api.github.com/users/whtahy/gists{/gist_id}", "starred_url": "https://api.github.com/users/whtahy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whtahy/subscriptions", "organizations_url": "https://api.github.com/users/whtahy/orgs", "repos_url": "https://api.github.com/users/whtahy/repos", "events_url": "https://api.github.com/users/whtahy/events{/privacy}", "received_events_url": "https://api.github.com/users/whtahy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "whtahy", "id": 19783477, "node_id": "MDQ6VXNlcjE5NzgzNDc3", "avatar_url": "https://avatars.githubusercontent.com/u/19783477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whtahy", "html_url": "https://github.com/whtahy", "followers_url": "https://api.github.com/users/whtahy/followers", "following_url": "https://api.github.com/users/whtahy/following{/other_user}", "gists_url": "https://api.github.com/users/whtahy/gists{/gist_id}", "starred_url": "https://api.github.com/users/whtahy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whtahy/subscriptions", "organizations_url": "https://api.github.com/users/whtahy/orgs", "repos_url": "https://api.github.com/users/whtahy/repos", "events_url": "https://api.github.com/users/whtahy/events{/privacy}", "received_events_url": "https://api.github.com/users/whtahy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbfb620de8afdabddfa819e698cdbfc7a7b10797", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbfb620de8afdabddfa819e698cdbfc7a7b10797", "html_url": "https://github.com/rust-lang/rust/commit/fbfb620de8afdabddfa819e698cdbfc7a7b10797"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "68a1d0ce9b0b2c01e63d4ba010e26df37602c345", "filename": "tests/ui/fn/fn-item-lifetime-bounds.rs", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/cac62ab2dde20adca6e1a9070211afbc784c1d64/tests%2Fui%2Ffn%2Ffn-item-lifetime-bounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cac62ab2dde20adca6e1a9070211afbc784c1d64/tests%2Fui%2Ffn%2Ffn-item-lifetime-bounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn%2Ffn-item-lifetime-bounds.rs?ref=cac62ab2dde20adca6e1a9070211afbc784c1d64", "patch": "@@ -0,0 +1,37 @@\n+// check-pass\n+// known-bug: #84533\n+\n+// Should fail. Lifetimes are checked correctly when `foo` is called, but NOT\n+// when only the lifetime parameters are instantiated.\n+\n+use std::marker::PhantomData;\n+\n+#[allow(dead_code)]\n+fn foo<'b, 'a>() -> PhantomData<&'b &'a ()> {\n+    PhantomData\n+}\n+\n+#[allow(dead_code)]\n+#[allow(path_statements)]\n+fn caller<'b, 'a>() {\n+    foo::<'b, 'a>;\n+}\n+\n+// In contrast to above, below code correctly does NOT compile.\n+// fn caller<'b, 'a>() {\n+//     foo::<'b, 'a>();\n+// }\n+\n+// error: lifetime may not live long enough\n+//   --> src/main.rs:22:5\n+//   |\n+// 21 | fn caller<'b, 'a>() {\n+//   |           --  -- lifetime `'a` defined here\n+//   |           |\n+//   |           lifetime `'b` defined here\n+// 22 |     foo::<'b, 'a>();\n+//   |     ^^^^^^^^^^^^^^^ requires that `'a` must outlive `'b`\n+//   |\n+//   = help: consider adding the following bound: `'a: 'b`\n+\n+fn main() {}"}]}