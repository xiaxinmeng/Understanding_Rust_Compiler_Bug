{"sha": "f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1YjY4YTQ0NDRhOTZmOGEyOTE1ZGZhOGI3ZmM5YjY0MWY1NmJkZjI=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-02-27T01:34:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-02-27T01:34:27Z"}, "message": "Rollup merge of #82420 - sunfishcode:wasi-docs, r=alexcrichton\n\nEnable API documentation for `std::os::wasi`.\n\nThis adds API documentation support for `std::os::wasi` modeled after\nhow `std::os::unix` works, so that WASI can be documented [here] along\nwith the other platforms.\n\n[here]: https://doc.rust-lang.org/stable/std/os/index.html\n\nTwo changes of particular interest:\n\n - This changes the `AsRawFd` for `io::Stdin` for WASI to return\n   `libc::STDIN_FILENO` instead of `sys::stdio::Stdin.as_raw_fd()` (and\n   similar for `Stdout` and `Stderr`), which matches how the `unix`\n   version works. `STDIN_FILENO` etc. may not always be explicitly\n   reserved at the WASI level, but as long as we have Rust's `std` and\n   `libc`, I think it's reasonable to guarantee that we'll always use\n   `libc::STDIN_FILENO` for stdin.\n\n - This duplicates the `osstr2str` utility function, rather than\n   trying to share it across all the configurations that need it.\n\nr? ```@alexcrichton```", "tree": {"sha": "69e776f6f0bccd70103155bd699250f765bf6d2f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69e776f6f0bccd70103155bd699250f765bf6d2f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgOaGkCRBK7hj4Ov3rIwAAdHIIAJxwzdy5FSH9D8abE8OhsmrV\nbjCI+7NriYTKupY/fbLiDnJBXvxTaRLBB43f+W96Hi1/CQ+ifwiDcj+BCGNcZZhK\nTRWRcVLzDJHCXGxKyffjJCUB5H3dbeUjUpKIydfnIvdFjX3+NjMvcoQZ3QE5qFlX\nvvM3ka3yVfkgZuP2aVvpkEXVPwdUFQeG5Pav1PFYIfv36yZVs2ICs3XMlpytxoVj\nmGgi8LGvS+O+k2Lb+jtOmIERrPDDV4ia/5wgZZEsGZPb0sXLKTzjakZvLl6nmetg\ntjAKgRJHErNGEsv23ptTOrqwhQVS492RbBCUEMO+zuc6izQ6dyBuYOiN6dhgJAA=\n=u7nj\n-----END PGP SIGNATURE-----\n", "payload": "tree 69e776f6f0bccd70103155bd699250f765bf6d2f\nparent 76b40d27e2946fe6118ec9d9a6f4a49aa1945800\nparent 7d5242a03a9e30fe880ff1af83a3ad7df5e62159\nauthor Dylan DPC <dylan.dpc@gmail.com> 1614389667 +0100\ncommitter GitHub <noreply@github.com> 1614389667 +0100\n\nRollup merge of #82420 - sunfishcode:wasi-docs, r=alexcrichton\n\nEnable API documentation for `std::os::wasi`.\n\nThis adds API documentation support for `std::os::wasi` modeled after\nhow `std::os::unix` works, so that WASI can be documented [here] along\nwith the other platforms.\n\n[here]: https://doc.rust-lang.org/stable/std/os/index.html\n\nTwo changes of particular interest:\n\n - This changes the `AsRawFd` for `io::Stdin` for WASI to return\n   `libc::STDIN_FILENO` instead of `sys::stdio::Stdin.as_raw_fd()` (and\n   similar for `Stdout` and `Stderr`), which matches how the `unix`\n   version works. `STDIN_FILENO` etc. may not always be explicitly\n   reserved at the WASI level, but as long as we have Rust's `std` and\n   `libc`, I think it's reasonable to guarantee that we'll always use\n   `libc::STDIN_FILENO` for stdin.\n\n - This duplicates the `osstr2str` utility function, rather than\n   trying to share it across all the configurations that need it.\n\nr? ```@alexcrichton```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "html_url": "https://github.com/rust-lang/rust/commit/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76b40d27e2946fe6118ec9d9a6f4a49aa1945800", "url": "https://api.github.com/repos/rust-lang/rust/commits/76b40d27e2946fe6118ec9d9a6f4a49aa1945800", "html_url": "https://github.com/rust-lang/rust/commit/76b40d27e2946fe6118ec9d9a6f4a49aa1945800"}, {"sha": "7d5242a03a9e30fe880ff1af83a3ad7df5e62159", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d5242a03a9e30fe880ff1af83a3ad7df5e62159", "html_url": "https://github.com/rust-lang/rust/commit/7d5242a03a9e30fe880ff1af83a3ad7df5e62159"}], "stats": {"total": 120, "additions": 91, "deletions": 29}, "files": [{"sha": "500e8267cf821d6e84c62beb7cfd38e1b134d6c5", "filename": "library/std/src/os/mod.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fos%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fos%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fos%2Fmod.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -3,7 +3,7 @@\n #![stable(feature = \"os\", since = \"1.0.0\")]\n #![allow(missing_docs, nonstandard_style, missing_debug_implementations)]\n \n-// When documenting libstd we want to show unix/windows/linux modules as these are the \"main\n+// When documenting libstd we want to show unix/windows/linux/wasi modules as these are the \"main\n // modules\" that are used across platforms, so all modules are enabled when `cfg(doc)` is set.\n // This should help show platform-specific functionality in a hopefully cross-platform way in the\n // documentation.\n@@ -22,6 +22,9 @@ pub use crate::sys::windows_ext as windows;\n #[doc(cfg(target_os = \"linux\"))]\n pub mod linux;\n \n+#[cfg(doc)]\n+pub use crate::sys::wasi_ext as wasi;\n+\n // If we're not documenting libstd then we just expose the main modules as we otherwise would.\n \n #[cfg(not(doc))]\n@@ -38,6 +41,10 @@ pub use crate::sys::ext as windows;\n #[cfg(any(target_os = \"linux\", target_os = \"l4re\"))]\n pub mod linux;\n \n+#[cfg(not(doc))]\n+#[cfg(target_os = \"wasi\")]\n+pub mod wasi;\n+\n #[cfg(target_os = \"android\")]\n pub mod android;\n #[cfg(target_os = \"dragonfly\")]\n@@ -68,7 +75,5 @@ pub mod redox;\n pub mod solaris;\n #[cfg(target_os = \"vxworks\")]\n pub mod vxworks;\n-#[cfg(target_os = \"wasi\")]\n-pub mod wasi;\n \n pub mod raw;"}, {"sha": "d3f53801d2d0fc0b42902b438b3d9c6bea6869c4", "filename": "library/std/src/sys/mod.rs", "status": "modified", "additions": 26, "deletions": 4, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fmod.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -61,9 +61,9 @@ cfg_if::cfg_if! {\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n         pub use self::ext as unix_ext;\n     } else if #[cfg(any(target_os = \"hermit\",\n-                        target_arch = \"wasm32\",\n+                        all(target_arch = \"wasm32\", not(target_os = \"wasi\")),\n                         all(target_vendor = \"fortanix\", target_env = \"sgx\")))] {\n-        // On wasm right now the module below doesn't compile\n+        // On non-WASI wasm right now the module below doesn't compile\n         // (missing things in `libc` which is empty) so just omit everything\n         // with an empty module\n         #[unstable(issue = \"none\", feature = \"std_internals\")]\n@@ -85,9 +85,9 @@ cfg_if::cfg_if! {\n         #[stable(feature = \"rust1\", since = \"1.0.0\")]\n         pub use self::ext as windows_ext;\n     } else if #[cfg(any(target_os = \"hermit\",\n-                        target_arch = \"wasm32\",\n+                        all(target_arch = \"wasm32\", not(target_os = \"wasi\")),\n                         all(target_vendor = \"fortanix\", target_env = \"sgx\")))] {\n-        // On wasm right now the shim below doesn't compile, so\n+        // On non-WASI wasm right now the shim below doesn't compile, so\n         // just omit it\n         #[unstable(issue = \"none\", feature = \"std_internals\")]\n         #[allow(missing_docs)]\n@@ -106,3 +106,25 @@ cfg_if::cfg_if! {\n         pub mod windows_ext;\n     }\n }\n+\n+#[cfg(doc)]\n+cfg_if::cfg_if! {\n+    if #[cfg(target_os = \"wasi\")] {\n+        // On WASI we'll document what's already available\n+        #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+        pub use self::ext as wasi_ext;\n+    } else if #[cfg(any(target_os = \"hermit\",\n+                        target_arch = \"wasm32\",\n+                        all(target_vendor = \"fortanix\", target_env = \"sgx\")))] {\n+        // On non-WASI wasm right now the module below doesn't compile\n+        // (missing things in `libc` which is empty) so just omit everything\n+        // with an empty module\n+        #[unstable(issue = \"none\", feature = \"std_internals\")]\n+        #[allow(missing_docs)]\n+        pub mod wasi_ext {}\n+    } else {\n+        // On other platforms like Windows document the bare bones of WASI\n+        #[path = \"wasi/ext/mod.rs\"]\n+        pub mod wasi_ext;\n+    }\n+}"}, {"sha": "66b6caf25127d59ba3c590ddeabdfee48a14a315", "filename": "library/std/src/sys/wasi/ext/fs.rs", "status": "modified", "additions": 16, "deletions": 9, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Ffs.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -3,11 +3,14 @@\n #![deny(unsafe_op_in_unsafe_fn)]\n #![unstable(feature = \"wasi_ext\", issue = \"none\")]\n \n+use crate::ffi::OsStr;\n use crate::fs::{self, File, Metadata, OpenOptions};\n use crate::io::{self, IoSlice, IoSliceMut};\n use crate::path::{Path, PathBuf};\n-use crate::sys::fs::osstr2str;\n use crate::sys_common::{AsInner, AsInnerMut, FromInner};\n+// Used for `File::read` on intra-doc links\n+#[allow(unused_imports)]\n+use io::{Read, Write};\n \n /// WASI-specific extensions to [`File`].\n pub trait FileExt {\n@@ -54,11 +57,11 @@ pub trait FileExt {\n     /// # Errors\n     ///\n     /// If this function encounters an error of the kind\n-    /// [`ErrorKind::Interrupted`] then the error is ignored and the operation\n+    /// [`io::ErrorKind::Interrupted`] then the error is ignored and the operation\n     /// will continue.\n     ///\n     /// If this function encounters an \"end of file\" before completely filling\n-    /// the buffer, it returns an error of the kind [`ErrorKind::UnexpectedEof`].\n+    /// the buffer, it returns an error of the kind [`io::ErrorKind::UnexpectedEof`].\n     /// The contents of `buf` are unspecified in this case.\n     ///\n     /// If any other read error is encountered then this function immediately\n@@ -131,16 +134,16 @@ pub trait FileExt {\n     /// The current file cursor is not affected by this function.\n     ///\n     /// This method will continuously call [`write_at`] until there is no more data\n-    /// to be written or an error of non-[`ErrorKind::Interrupted`] kind is\n+    /// to be written or an error of non-[`io::ErrorKind::Interrupted`] kind is\n     /// returned. This method will not return until the entire buffer has been\n     /// successfully written or such an error occurs. The first error that is\n-    /// not of [`ErrorKind::Interrupted`] kind generated from this method will be\n+    /// not of [`io::ErrorKind::Interrupted`] kind generated from this method will be\n     /// returned.\n     ///\n     /// # Errors\n     ///\n     /// This function will return the first error of\n-    /// non-[`ErrorKind::Interrupted`] kind that [`write_at`] returns.\n+    /// non-[`io::ErrorKind::Interrupted`] kind that [`write_at`] returns.\n     ///\n     /// [`write_at`]: FileExt::write_at\n     #[stable(feature = \"rw_exact_all_at\", since = \"1.33.0\")]\n@@ -426,7 +429,7 @@ impl MetadataExt for fs::Metadata {\n     }\n }\n \n-/// WASI-specific extensions for [`FileType`].\n+/// WASI-specific extensions for [`fs::FileType`].\n ///\n /// Adds support for special WASI file types such as block/character devices,\n /// pipes, and sockets.\n@@ -517,8 +520,12 @@ pub fn symlink<P: AsRef<Path>, U: AsRef<Path>>(\n \n /// Create a symbolic link.\n ///\n-/// This is a convenience API similar to [`std::os::unix::fs::symlink`] and\n-/// [`std::os::windows::fs::symlink_file`] and [`symlink_dir`](std::os::windows::fs::symlink_dir).\n+/// This is a convenience API similar to `std::os::unix::fs::symlink` and\n+/// `std::os::windows::fs::symlink_file` and `std::os::windows::fs::symlink_dir`.\n pub fn symlink_path<P: AsRef<Path>, U: AsRef<Path>>(old_path: P, new_path: U) -> io::Result<()> {\n     crate::sys::fs::symlink(old_path.as_ref(), new_path.as_ref())\n }\n+\n+fn osstr2str(f: &OsStr) -> io::Result<&str> {\n+    f.to_str().ok_or_else(|| io::Error::new(io::ErrorKind::Other, \"input must be utf-8\"))\n+}"}, {"sha": "3c480aa8e19bf5f43194a840d1e3fcc27a12f8c3", "filename": "library/std/src/sys/wasi/ext/io.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fio.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -145,36 +145,36 @@ impl IntoRawFd for fs::File {\n \n impl AsRawFd for io::Stdin {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stdin.as_raw_fd()\n+        libc::STDIN_FILENO as RawFd\n     }\n }\n \n impl AsRawFd for io::Stdout {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stdout.as_raw_fd()\n+        libc::STDOUT_FILENO as RawFd\n     }\n }\n \n impl AsRawFd for io::Stderr {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stderr.as_raw_fd()\n+        libc::STDERR_FILENO as RawFd\n     }\n }\n \n impl<'a> AsRawFd for io::StdinLock<'a> {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stdin.as_raw_fd()\n+        libc::STDIN_FILENO as RawFd\n     }\n }\n \n impl<'a> AsRawFd for io::StdoutLock<'a> {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stdout.as_raw_fd()\n+        libc::STDOUT_FILENO as RawFd\n     }\n }\n \n impl<'a> AsRawFd for io::StderrLock<'a> {\n     fn as_raw_fd(&self) -> RawFd {\n-        sys::stdio::Stderr.as_raw_fd()\n+        libc::STDERR_FILENO as RawFd\n     }\n }"}, {"sha": "b08402f077652b60ce5400f8a2a9dc75cf34cf47", "filename": "library/std/src/sys/wasi/ext/mod.rs", "status": "modified", "additions": 32, "deletions": 4, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fext%2Fmod.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -1,4 +1,32 @@\n+//! Platform-specific extensions to `std` for WASI.\n+//!\n+//! Provides access to platform-level information on WASI, and exposes\n+//! WASI-specific functions that would otherwise be inappropriate as\n+//! part of the core `std` library.\n+//!\n+//! It exposes more ways to deal with platform-specific strings (`OsStr`,\n+//! `OsString`), allows to set permissions more granularly, extract low-level\n+//! file descriptors from files and sockets, and has platform-specific helpers\n+//! for spawning processes.\n+//!\n+//! # Examples\n+//!\n+//! ```no_run\n+//! use std::fs::File;\n+//! use std::os::wasi::prelude::*;\n+//!\n+//! fn main() -> std::io::Result<()> {\n+//!     let f = File::create(\"foo.txt\")?;\n+//!     let fd = f.as_raw_fd();\n+//!\n+//!     // use fd with native WASI bindings\n+//!\n+//!     Ok(())\n+//! }\n+//! ```\n+\n #![deny(unsafe_op_in_unsafe_fn)]\n+#![doc(cfg(target_os = \"wasi\"))]\n \n pub mod ffi;\n pub mod fs;\n@@ -11,14 +39,14 @@ pub mod io;\n pub mod prelude {\n     #[doc(no_inline)]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    pub use crate::sys::ext::ffi::{OsStrExt, OsStringExt};\n+    pub use super::ffi::{OsStrExt, OsStringExt};\n     #[doc(no_inline)]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    pub use crate::sys::ext::fs::FileTypeExt;\n+    pub use super::fs::FileTypeExt;\n     #[doc(no_inline)]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    pub use crate::sys::ext::fs::{DirEntryExt, FileExt, MetadataExt, OpenOptionsExt};\n+    pub use super::fs::{DirEntryExt, FileExt, MetadataExt, OpenOptionsExt};\n     #[doc(no_inline)]\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    pub use crate::sys::ext::io::{AsRawFd, FromRawFd, IntoRawFd, RawFd};\n+    pub use super::io::{AsRawFd, FromRawFd, IntoRawFd, RawFd};\n }"}, {"sha": "bcf7da46b4b077e5abf424ceca9db2e83b8d5b82", "filename": "library/std/src/sys/wasi/fs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Ffs.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -1,5 +1,6 @@\n #![deny(unsafe_op_in_unsafe_fn)]\n \n+use super::fd::WasiFd;\n use crate::ffi::{CStr, CString, OsStr, OsString};\n use crate::fmt;\n use crate::io::{self, IoSlice, IoSliceMut, SeekFrom};\n@@ -9,7 +10,6 @@ use crate::os::wasi::ffi::{OsStrExt, OsStringExt};\n use crate::path::{Path, PathBuf};\n use crate::ptr;\n use crate::sync::Arc;\n-use crate::sys::fd::WasiFd;\n use crate::sys::time::SystemTime;\n use crate::sys::unsupported;\n use crate::sys_common::FromInner;"}, {"sha": "3f294e7df418ee8ae91be66b15d534a3a360822e", "filename": "library/std/src/sys/wasi/net.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fnet.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -1,10 +1,10 @@\n #![deny(unsafe_op_in_unsafe_fn)]\n \n+use super::fd::WasiFd;\n use crate::convert::TryFrom;\n use crate::fmt;\n use crate::io::{self, IoSlice, IoSliceMut};\n use crate::net::{Ipv4Addr, Ipv6Addr, Shutdown, SocketAddr};\n-use crate::sys::fd::WasiFd;\n use crate::sys::{unsupported, Void};\n use crate::sys_common::FromInner;\n use crate::time::Duration;"}, {"sha": "209d5b996e5b462b761f860ebce8b0a003b2d78e", "filename": "library/std/src/sys/wasi/stdio.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fstdio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fstdio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fstdio.rs?ref=f5b68a4444a96f8a2915dfa8b7fc9b641f56bdf2", "patch": "@@ -1,8 +1,8 @@\n #![deny(unsafe_op_in_unsafe_fn)]\n \n+use super::fd::WasiFd;\n use crate::io::{self, IoSlice, IoSliceMut};\n use crate::mem::ManuallyDrop;\n-use crate::sys::fd::WasiFd;\n \n pub struct Stdin;\n pub struct Stdout;"}]}