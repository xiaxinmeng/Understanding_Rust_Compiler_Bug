{"sha": "5376c769f0cb6076c4862e728af042bb563a5051", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzNzZjNzY5ZjBjYjYwNzZjNDg2MmU3MjhhZjA0MmJiNTYzYTUwNTE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-10-17T20:01:53Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-10-17T20:14:05Z"}, "message": "rename tools -> xtask", "tree": {"sha": "890a88741ef83c5ca0a57006c1972d0870fd86a4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/890a88741ef83c5ca0a57006c1972d0870fd86a4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5376c769f0cb6076c4862e728af042bb563a5051", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5376c769f0cb6076c4862e728af042bb563a5051", "html_url": "https://github.com/rust-lang/rust/commit/5376c769f0cb6076c4862e728af042bb563a5051", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5376c769f0cb6076c4862e728af042bb563a5051/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7b15c4f7ae95e2e855cb783871906fa7bf364c4c", "url": "https://api.github.com/repos/rust-lang/rust/commits/7b15c4f7ae95e2e855cb783871906fa7bf364c4c", "html_url": "https://github.com/rust-lang/rust/commit/7b15c4f7ae95e2e855cb783871906fa7bf364c4c"}], "stats": {"total": 37, "additions": 15, "deletions": 22}, "files": [{"sha": "3812e1e2d1e4b6327707422dcd51a8c6d93e7cbb", "filename": ".cargo/config", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/.cargo%2Fconfig", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/.cargo%2Fconfig", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.cargo%2Fconfig?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -1,4 +1,4 @@\n [alias]\n xtask = \"run --package xtask --bin xtask --\"\n \n-install-ra = \"run --package xtask -- install\" # for backwards compat\n+install-ra = \"run --package xtask --bin xtask -- install\" # for backwards compat"}, {"sha": "ea6521333bf7476fd39c4d56579c9877d81aad84", "filename": "Cargo.lock", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -1718,13 +1718,6 @@ name = \"wasi\"\n version = \"0.7.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n-[[package]]\n-name = \"website-gen\"\n-version = \"0.0.0\"\n-dependencies = [\n- \"walkdir 2.2.9 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n [[package]]\n name = \"winapi\"\n version = \"0.2.8\""}, {"sha": "97c02b40f4fa9045e5e442c4f42c5c180644b266", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -1,5 +1,5 @@\n [workspace]\n-members = [ \"crates/*\", \"xtask/\", \"website/website-gen\" ]\n+members = [ \"crates/*\", \"xtask/\" ]\n \n [profile.dev]\n debug = 1 # only line info"}, {"sha": "0a8fd06121cc7c549a821259ac596f6a42962b49", "filename": "crates/ra_syntax/src/grammar.ron", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/crates%2Fra_syntax%2Fsrc%2Fgrammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/crates%2Fra_syntax%2Fsrc%2Fgrammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fgrammar.ron?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -1,5 +1,5 @@\n // Stores definitions which must be used in multiple places\n-// See `cargo gen-syntax` (defined in crates/ra_tools/src/main.rs)\n+// See `cargo xtask codegen` (defined in xtasks/src/main.rs)\n Grammar(\n     punct: [\n         (\";\", \"SEMI\"),"}, {"sha": "e5a7ea5f6f07b9bfe0732dbec0bdb01fff268465", "filename": "docs/dev/README.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -65,8 +65,8 @@ integrating with editors. Currently, it contains plugins for VS Code (in\n typescript) and Emacs (in elisp). The `docs` top-level directory contains both\n developer and user documentation.\n \n-We have some automation infra in Rust in the `crates/tool` package. It contains\n-stuff like formatting checking, code generation and powers `cargo install-ra`.\n+We have some automation infra in Rust in the `xtask` package. It contains\n+stuff like formatting checking, code generation and powers `cargo xtask install`.\n The latter syntax is achieved with the help of cargo aliases (see `.cargo`\n directory).\n \n@@ -84,7 +84,7 @@ However, launching a VS Code instance with locally build language server is\n possible. There's even a VS Code task for this, so just <kbd>F5</kbd> should\n work (thanks, [@andrew-w-ross](https://github.com/andrew-w-ross)!).\n \n-I often just install development version with `cargo install-ra --server --jemalloc` and\n+I often just install development version with `cargo xtask install --server --jemalloc` and\n restart the host VS Code.\n \n See [./debugging.md](./debugging.md) for how to attach to rust-analyzer with\n@@ -116,7 +116,7 @@ Due to the requirements of running the tests inside VS Code they are **not run\n on CI**. When making changes to the extension please ensure the tests are not\n broken locally before opening a Pull Request.\n \n-To install **only** the VS Code extension, use `cargo install-ra --client-code`.\n+To install **only** the VS Code extension, use `cargo xtask install --client-code`.\n \n # Logging\n \n@@ -153,7 +153,7 @@ There's also two VS Code commands which might be of interest:\n   $ cargo install --path crates/ra_lsp_server --force --features jemalloc\n   ```\n \n-  There's an alias for this: `cargo install-ra --server --jemalloc`.\n+  There's an alias for this: `cargo xtask install --server --jemalloc`.\n \n * `Rust Analyzer: Syntax Tree` shows syntax tree of the current file/selection.\n "}, {"sha": "5ec5352e7137b8f91e011e2b69ba6eb220723a67", "filename": "docs/dev/architecture.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/docs%2Fdev%2Farchitecture.md", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/docs%2Fdev%2Farchitecture.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Farchitecture.md?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -71,7 +71,7 @@ Rust syntax tree structure and parser. See\n   This is the thing that turns a flat list of events into a tree (see `EventProcessor`)\n - `ast` provides a type safe API on top of the raw `rowan` tree.\n - `grammar.ron` RON description of the grammar, which is used to\n-  generate `syntax_kinds` and `ast` modules, using `cargo gen-syntax` command.\n+  generate `syntax_kinds` and `ast` modules, using `cargo xtask codegen` command.\n - `algo`: generic tree algorithms, including `walk` for O(1) stack\n   space tree traversal (this is cool).\n "}, {"sha": "4ee864756d2df1813dd77b0c7882c7f942dc2b8f", "filename": "xtask/src/bin/pre-commit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Fsrc%2Fbin%2Fpre-commit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Fsrc%2Fbin%2Fpre-commit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fbin%2Fpre-commit.rs?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -2,7 +2,7 @@\n \n use std::process::Command;\n \n-use ra_tools::{project_root, run, run_rustfmt, Overwrite, Result};\n+use xtask::{project_root, run, run_rustfmt, Overwrite, Result};\n \n fn main() -> Result<()> {\n     run_rustfmt(Overwrite)?;"}, {"sha": "a8685f5677148ddad7d855dc426c52dc6587a8ff", "filename": "xtask/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Flib.rs?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -146,7 +146,7 @@ pub fn install_format_hook() -> Result<()> {\n         \"./.git/hooks/pre-commit\"\n     });\n     if !result_path.exists() {\n-        run(\"cargo build --package ra_tools --bin pre-commit\", \".\")?;\n+        run(\"cargo build --package xtask --bin pre-commit\", \".\")?;\n         if cfg!(windows) {\n             fs::copy(\"./target/debug/pre-commit.exe\", result_path)?;\n         } else {"}, {"sha": "5d8ddea836c304bef25191872ca853ccc16a3c3c", "filename": "xtask/tests/tidy-tests/cli.rs", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fcli.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fcli.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftests%2Ftidy-tests%2Fcli.rs?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -1,17 +1,17 @@\n-use ra_tools::{gen_tests, generate_boilerplate, project_root, run_rustfmt, Verify};\n use walkdir::WalkDir;\n+use xtask::{gen_tests, generate_boilerplate, project_root, run_rustfmt, Verify};\n \n #[test]\n fn generated_grammar_is_fresh() {\n     if let Err(error) = generate_boilerplate(Verify) {\n-        panic!(\"{}. Please update it by running `cargo gen-syntax`\", error);\n+        panic!(\"{}. Please update it by running `cargo xtask codegen`\", error);\n     }\n }\n \n #[test]\n fn generated_tests_are_fresh() {\n     if let Err(error) = gen_tests(Verify) {\n-        panic!(\"{}. Please update tests by running `cargo gen-tests`\", error);\n+        panic!(\"{}. Please update tests by running `cargo xtask gen-tests`\", error);\n     }\n }\n ", "previous_filename": "xtask/tests/cli.rs"}, {"sha": "fe5852bc62811d8fe9b33c6ba27718a3aaed0acc", "filename": "xtask/tests/tidy-tests/docs.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fdocs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fdocs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftests%2Ftidy-tests%2Fdocs.rs?ref=5376c769f0cb6076c4862e728af042bb563a5051", "patch": "@@ -5,7 +5,7 @@ use std::path::Path;\n \n use walkdir::{DirEntry, WalkDir};\n \n-use ra_tools::project_root;\n+use xtask::project_root;\n \n fn is_exclude_dir(p: &Path) -> bool {\n     let exclude_dirs = [\"tests\", \"test_data\"];", "previous_filename": "xtask/tests/docs.rs"}, {"sha": "56d1318d6251449773895ee57190bde4e3060905", "filename": "xtask/tests/tidy-tests/main.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5376c769f0cb6076c4862e728af042bb563a5051/xtask%2Ftests%2Ftidy-tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftests%2Ftidy-tests%2Fmain.rs?ref=5376c769f0cb6076c4862e728af042bb563a5051", "previous_filename": "xtask/tests/main.rs"}]}