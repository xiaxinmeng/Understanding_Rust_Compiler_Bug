{"sha": "3683c43a0577df9d4197b619ae788b5f4ea5d1f2", "node_id": "C_kwDOAAsO6NoAKDM2ODNjNDNhMDU3N2RmOWQ0MTk3YjYxOWFlNzg4YjVmNGVhNWQxZjI", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2022-11-22T06:26:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-22T06:26:07Z"}, "message": "Rollup merge of #103193 - krasimirgg:sysonce, r=Amanieu\n\nmark sys_common::once::generic::Once::new const-stable\n\nAttempt to address https://github.com/rust-lang/rust/issues/103191 by marking the impl const-stable.\nPicked the declaration from the callsite:\nhttps://github.com/rust-lang/rust/blob/21b246587c2687935bd6004ffa5dcc4f4dd6600d/library/std/src/sync/once.rs#L67\n\nThis is similar to https://github.com/rust-lang/rust/pull/98457.\n\nWith this in, `python3 x.py build library/std --target x86_64-unknown-none` succeeds.", "tree": {"sha": "61eb79fb6352f295e99738b72dda38b67523523a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/61eb79fb6352f295e99738b72dda38b67523523a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3683c43a0577df9d4197b619ae788b5f4ea5d1f2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjfGt/CRBK7hj4Ov3rIwAAq48IAAFNIqldBKsZx0PE4pEyp2yp\nqVj6q3qPaY4j/zGuqLj/kfgqJrMx3/QSaNh3H1TZrZ9c+zNmDHTkm5GNqPJIEHGE\nIe+bHf7YIs9r5bGlMfW01K/zFiQi1DsaZlSLNCpYzPuB1uATjkaqHbDc93KdLvzc\ncIFLBK/xjuVTsQhnnpekT9WhnfpbTqK0AKMSaOIIsCudqP16UyEtHLiY2jvBlqHe\nKw/MHGZdHrA46M0Ujy3HRXa0u4+9hqwPL4SRB3IbFk9h/D/sFqoGDM1tcC4DunLO\nKELH4Napgzf0lNdmlrGO6iD6Tln1d3hYna4XExSKjMqU3ZVwFZeUn0dYTfADxEE=\n=bzXR\n-----END PGP SIGNATURE-----\n", "payload": "tree 61eb79fb6352f295e99738b72dda38b67523523a\nparent 1625435fa40005084d9cc8d5cf0ab116e8592d97\nparent df5d035f5199eab85dac327cbbd30a3ddfe29abd\nauthor Manish Goregaokar <manishsmail@gmail.com> 1669098367 -0500\ncommitter GitHub <noreply@github.com> 1669098367 -0500\n\nRollup merge of #103193 - krasimirgg:sysonce, r=Amanieu\n\nmark sys_common::once::generic::Once::new const-stable\n\nAttempt to address https://github.com/rust-lang/rust/issues/103191 by marking the impl const-stable.\nPicked the declaration from the callsite:\nhttps://github.com/rust-lang/rust/blob/21b246587c2687935bd6004ffa5dcc4f4dd6600d/library/std/src/sync/once.rs#L67\n\nThis is similar to https://github.com/rust-lang/rust/pull/98457.\n\nWith this in, `python3 x.py build library/std --target x86_64-unknown-none` succeeds.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3683c43a0577df9d4197b619ae788b5f4ea5d1f2", "html_url": "https://github.com/rust-lang/rust/commit/3683c43a0577df9d4197b619ae788b5f4ea5d1f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3683c43a0577df9d4197b619ae788b5f4ea5d1f2/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1625435fa40005084d9cc8d5cf0ab116e8592d97", "url": "https://api.github.com/repos/rust-lang/rust/commits/1625435fa40005084d9cc8d5cf0ab116e8592d97", "html_url": "https://github.com/rust-lang/rust/commit/1625435fa40005084d9cc8d5cf0ab116e8592d97"}, {"sha": "df5d035f5199eab85dac327cbbd30a3ddfe29abd", "url": "https://api.github.com/repos/rust-lang/rust/commits/df5d035f5199eab85dac327cbbd30a3ddfe29abd", "html_url": "https://github.com/rust-lang/rust/commit/df5d035f5199eab85dac327cbbd30a3ddfe29abd"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "d953a6745923417b1981531e0bb2343812fa23ee", "filename": "library/std/src/sys_common/once/generic.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3683c43a0577df9d4197b619ae788b5f4ea5d1f2/library%2Fstd%2Fsrc%2Fsys_common%2Fonce%2Fgeneric.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3683c43a0577df9d4197b619ae788b5f4ea5d1f2/library%2Fstd%2Fsrc%2Fsys_common%2Fonce%2Fgeneric.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys_common%2Fonce%2Fgeneric.rs?ref=3683c43a0577df9d4197b619ae788b5f4ea5d1f2", "patch": "@@ -107,6 +107,7 @@ struct WaiterQueue<'a> {\n \n impl Once {\n     #[inline]\n+    #[rustc_const_stable(feature = \"const_once_new\", since = \"1.32.0\")]\n     pub const fn new() -> Once {\n         Once { state_and_queue: AtomicPtr::new(ptr::invalid_mut(INCOMPLETE)) }\n     }"}]}