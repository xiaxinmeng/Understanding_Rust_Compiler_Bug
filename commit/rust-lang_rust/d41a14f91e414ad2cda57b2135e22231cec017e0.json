{"sha": "d41a14f91e414ad2cda57b2135e22231cec017e0", "node_id": "C_kwDOAAsO6NoAKGQ0MWExNGY5MWU0MTRhZDJjZGE1N2IyMTM1ZTIyMjMxY2VjMDE3ZTA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-01-22T10:43:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-22T10:43:07Z"}, "message": "Rollup merge of #107152 - GuillaumeGomez:migrate-to-css-var, r=notriddle\n\nMigrate scraped-examples top and bottom \"borders\" to CSS variables\n\nr? `@notriddle`", "tree": {"sha": "556c09b7fb5fc0178afc114fd2c2d1f90ea6f32b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/556c09b7fb5fc0178afc114fd2c2d1f90ea6f32b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d41a14f91e414ad2cda57b2135e22231cec017e0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjzRM7CRBK7hj4Ov3rIwAAF3cIAIJFlyI2fymUt7WHu/KRjybf\nVycauzJYv57/q0qt6DUkBUCig8Ow7dgJ+OYzjbzrMAKFWTE+kImIKjlE59rOsqlP\na9rAGldND4eyAOqfZDMg1L3ApmzbtxqMGimEztFf9P+D6kJ45G+jQGAQo7ouwij/\nqZdWj4FKSdEUgUSxPkMweNoLtMfXCgqTQKtdF59Y5DNk8uaPyqVWERJMztj1wEmA\n4Q52DyenXMgOaFvdORZININh1jowRmSIoJaSXntCJg9pEIGWkMJ3X9OS9g6wGQUa\nYwk99ZgBK0OkLu8f6C5KXMCxBoCClwL6uWrxagi+j51PCDeCjtTIvyP9KE6ou/E=\n=R1JN\n-----END PGP SIGNATURE-----\n", "payload": "tree 556c09b7fb5fc0178afc114fd2c2d1f90ea6f32b\nparent d779a592dd13219c434b4ae2d1d65619ccfa23a1\nparent 372ad130d595d50a8c79c836fcadc3b39d14859c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1674384187 +0100\ncommitter GitHub <noreply@github.com> 1674384187 +0100\n\nRollup merge of #107152 - GuillaumeGomez:migrate-to-css-var, r=notriddle\n\nMigrate scraped-examples top and bottom \"borders\" to CSS variables\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d41a14f91e414ad2cda57b2135e22231cec017e0", "html_url": "https://github.com/rust-lang/rust/commit/d41a14f91e414ad2cda57b2135e22231cec017e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d41a14f91e414ad2cda57b2135e22231cec017e0/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d779a592dd13219c434b4ae2d1d65619ccfa23a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/d779a592dd13219c434b4ae2d1d65619ccfa23a1", "html_url": "https://github.com/rust-lang/rust/commit/d779a592dd13219c434b4ae2d1d65619ccfa23a1"}, {"sha": "372ad130d595d50a8c79c836fcadc3b39d14859c", "url": "https://api.github.com/repos/rust-lang/rust/commits/372ad130d595d50a8c79c836fcadc3b39d14859c", "html_url": "https://github.com/rust-lang/rust/commit/372ad130d595d50a8c79c836fcadc3b39d14859c"}], "stats": {"total": 69, "additions": 48, "deletions": 21}, "files": [{"sha": "e0d64c231a6ab8a54c1ed985e2bcb1f38f57dcef", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=d41a14f91e414ad2cda57b2135e22231cec017e0", "patch": "@@ -1907,9 +1907,15 @@ in storage.js\n }\n .scraped-example:not(.expanded) .code-wrapper:before {\n \ttop: 0;\n+\tbackground: linear-gradient(to bottom,\n+\t\tvar(--scrape-example-code-wrapper-background-start),\n+\t\tvar(--scrape-example-code-wrapper-background-end));\n }\n .scraped-example:not(.expanded) .code-wrapper:after {\n \tbottom: 0;\n+\tbackground: linear-gradient(to top,\n+\t\tvar(--scrape-example-code-wrapper-background-start),\n+\t\tvar(--scrape-example-code-wrapper-background-end));\n }\n \n .scraped-example .code-wrapper .example-wrap {"}, {"sha": "ed779bf6166eed34cb97036796868426617b05aa", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=d41a14f91e414ad2cda57b2135e22231cec017e0", "patch": "@@ -97,6 +97,8 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--scrape-example-help-color: #eee;\n \t--scrape-example-help-hover-border-color: #fff;\n \t--scrape-example-help-hover-color: #fff;\n+\t--scrape-example-code-wrapper-background-start: rgba(15, 20, 25, 1);\n+\t--scrape-example-code-wrapper-background-end: rgba(15, 20, 25, 0);\n }\n \n h1, h2, h3, h4 {\n@@ -203,10 +205,3 @@ above the `@media (max-width: 700px)` rules due to a bug in the css checker */\n #source-sidebar div.files > a.selected {\n \tcolor: #ffb44c;\n }\n-\n-.scraped-example:not(.expanded) .code-wrapper::before {\n-\tbackground: linear-gradient(to bottom, rgba(15, 20, 25, 1), rgba(15, 20, 25, 0));\n-}\n-.scraped-example:not(.expanded) .code-wrapper::after {\n-\tbackground: linear-gradient(to top, rgba(15, 20, 25, 1), rgba(15, 20, 25, 0));\n-}"}, {"sha": "3766f0daa42ff837264542bee9f59c15212b3170", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=d41a14f91e414ad2cda57b2135e22231cec017e0", "patch": "@@ -92,6 +92,8 @@\n \t--scrape-example-help-color: #eee;\n \t--scrape-example-help-hover-border-color: #fff;\n \t--scrape-example-help-hover-color: #fff;\n+\t--scrape-example-code-wrapper-background-start: rgba(53, 53, 53, 1);\n+\t--scrape-example-code-wrapper-background-end: rgba(53, 53, 53, 0);\n }\n \n #search-tabs > button:not(.selected) {\n@@ -103,10 +105,3 @@\n \tborder-top-color: #0089ff;\n \tbackground-color: #353535;\n }\n-\n-.scraped-example:not(.expanded) .code-wrapper::before {\n-\tbackground: linear-gradient(to bottom, rgba(53, 53, 53, 1), rgba(53, 53, 53, 0));\n-}\n-.scraped-example:not(.expanded) .code-wrapper::after {\n-\tbackground: linear-gradient(to top, rgba(53, 53, 53, 1), rgba(53, 53, 53, 0));\n-}"}, {"sha": "8a7f6abcf8d8e83141923f3a8400bd38606725bd", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/d41a14f91e414ad2cda57b2135e22231cec017e0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=d41a14f91e414ad2cda57b2135e22231cec017e0", "patch": "@@ -89,6 +89,8 @@\n \t--scrape-example-help-color: #333;\n \t--scrape-example-help-hover-border-color: #000;\n \t--scrape-example-help-hover-color: #000;\n+\t--scrape-example-code-wrapper-background-start: rgba(255, 255, 255, 1);\n+\t--scrape-example-code-wrapper-background-end: rgba(255, 255, 255, 0);\n }\n \n #search-tabs > button:not(.selected) {\n@@ -100,10 +102,3 @@\n \tbackground-color: #ffffff;\n \tborder-top-color: #0089ff;\n }\n-\n-.scraped-example:not(.expanded) .code-wrapper::before {\n-\tbackground: linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));\n-}\n-.scraped-example:not(.expanded) .code-wrapper::after {\n-\tbackground: linear-gradient(to top, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));\n-}"}, {"sha": "67c58826efc2691e226365fe3a4b9a0253af9353", "filename": "tests/rustdoc-gui/scrape-examples-color.goml", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d41a14f91e414ad2cda57b2135e22231cec017e0/tests%2Frustdoc-gui%2Fscrape-examples-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/d41a14f91e414ad2cda57b2135e22231cec017e0/tests%2Frustdoc-gui%2Fscrape-examples-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fscrape-examples-color.goml?ref=d41a14f91e414ad2cda57b2135e22231cec017e0", "patch": "@@ -58,3 +58,39 @@ call-function: (\"check-colors\", {\n     \"help_hover_border\": \"rgb(0, 0, 0)\",\n     \"help_hover_color\": \"rgb(0, 0, 0)\",\n })\n+\n+// Now testing the top and bottom background in case there is only one scraped examples.\n+goto: \"file://\" + |DOC_PATH| + \"/scrape_examples/fn.test.html\"\n+\n+define-function: (\n+    \"check-background\",\n+    (theme, background_color_start, background_color_end),\n+    block {\n+        local-storage: { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\", }\n+        reload:\n+        assert-css: (\".scraped-example:not(.expanded) .code-wrapper::before\", {\n+            \"background-image\": \"linear-gradient(\" + |background_color_start| + \", \" +\n+                |background_color_end| + \")\",\n+        })\n+        assert-css: (\".scraped-example:not(.expanded) .code-wrapper::after\", {\n+            \"background-image\": \"linear-gradient(to top, \" + |background_color_start| + \", \" +\n+                |background_color_end| + \")\",\n+        })\n+    },\n+)\n+\n+call-function: (\"check-background\", {\n+    \"theme\": \"ayu\",\n+    \"background_color_start\": \"rgb(15, 20, 25)\",\n+    \"background_color_end\": \"rgba(15, 20, 25, 0)\",\n+})\n+call-function: (\"check-background\", {\n+    \"theme\": \"dark\",\n+    \"background_color_start\": \"rgb(53, 53, 53)\",\n+    \"background_color_end\": \"rgba(53, 53, 53, 0)\",\n+})\n+call-function: (\"check-background\", {\n+    \"theme\": \"light\",\n+    \"background_color_start\": \"rgb(255, 255, 255)\",\n+    \"background_color_end\": \"rgba(255, 255, 255, 0)\",\n+})"}]}