{"sha": "8eadbfd35bf8c6728c72c26b680eb23759be8c09", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhlYWRiZmQzNWJmOGM2NzI4YzcyYzI2YjY4MGViMjM3NTliZThjMDk=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-03-15T22:44:04Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-03-15T22:44:04Z"}, "message": "parent_def_id -> parent", "tree": {"sha": "c431106d44933e7049eac92bf54dd2ce71b99ac4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c431106d44933e7049eac92bf54dd2ce71b99ac4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8eadbfd35bf8c6728c72c26b680eb23759be8c09", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAlyMKrQACgkQaTCGhp1Q\nZjf79A/8D4DDZTY0j0eT8Mi35pD1wdJfk9K0CFxZVBv1A7tzWWG+hf4Rpt5JaK7g\n8QVPR+8+oVyNvKhZM261tFZoHH2pgyuKADIxj3x5fH2J3r03+wNSsaUQ2acUyYvN\nlHpFgW4AExixyQiV6vPabOp1aFTYV4+RMpIdrCgIzCoZlELNI9NRBqoXAz4pIdFK\nDqfywKdgojLdmyp1g4achEHesFungvE7XH0PKN9RMeFkmLw7TonNk4erIYNKfjG+\nJrqISpbmdxCOxxrFKjDRkVsp7nBpIpXyt15mVw242jGxZ00tMk1oEuNSaTMca7bV\n4RFj+XuQ3Yfh1ZU0lI0F1OjHe5bo8LyJ5Vf21kZlHum4wa0KO5jhRtoq5cMkumMB\nKMRFvWSCSWgAs3SoUolixzaWitly3WM4sRdsHCtkGM+QGzPEFa7ZVnuekh9R0E9p\nzYZ0VWCVFtYNPv30reDLAphOF2FR8HVkmz9k1sNk4bCrg+PVufJahRkz+vDNeCgO\nsCorH/9/+TQuhHX1kzEfOYJ0vPYLpunHnUTZ4q14A//mVuI3wjgnVbz3cLMPzJTt\nwv4vPigrUX50f4MSVFUUM8hNclFe/10MP/Wxk/lvfEo8Bp1VAAzhesnmu+M8UNcu\n+0WPcE6AGFxPaYSdmgGIQV84k+2OMAAD7PLImXw9yTSs/fSz2ZY=\n=+Gbx\n-----END PGP SIGNATURE-----", "payload": "tree c431106d44933e7049eac92bf54dd2ce71b99ac4\nparent dcbd3aefa2f56f097cdbc912d288b29bc7864ea3\nauthor flip1995 <hello@philkrones.com> 1552689844 +0100\ncommitter flip1995 <hello@philkrones.com> 1552689844 +0100\n\nparent_def_id -> parent\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8eadbfd35bf8c6728c72c26b680eb23759be8c09", "html_url": "https://github.com/rust-lang/rust/commit/8eadbfd35bf8c6728c72c26b680eb23759be8c09", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8eadbfd35bf8c6728c72c26b680eb23759be8c09/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dcbd3aefa2f56f097cdbc912d288b29bc7864ea3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dcbd3aefa2f56f097cdbc912d288b29bc7864ea3", "html_url": "https://github.com/rust-lang/rust/commit/dcbd3aefa2f56f097cdbc912d288b29bc7864ea3"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "8fc4457aad2f0f2b59b8505e3665c519c152565d", "filename": "clippy_lints/src/use_self.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8eadbfd35bf8c6728c72c26b680eb23759be8c09/clippy_lints%2Fsrc%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8eadbfd35bf8c6728c72c26b680eb23759be8c09/clippy_lints%2Fsrc%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fuse_self.rs?ref=8eadbfd35bf8c6728c72c26b680eb23759be8c09", "patch": "@@ -5,6 +5,7 @@ use rustc::hir::*;\n use rustc::lint::{in_external_macro, LateContext, LateLintPass, LintArray, LintContext, LintPass};\n use rustc::ty;\n use rustc::{declare_tool_lint, lint_array};\n+use rustc::ty::DefIdTree;\n use rustc_errors::Applicability;\n use syntax_pos::symbol::keywords::SelfUpper;\n \n@@ -233,7 +234,7 @@ impl<'a, 'tcx> Visitor<'tcx> for UseSelfVisitor<'a, 'tcx> {\n             if self.item_path.def == path.def {\n                 span_use_self_lint(self.cx, path);\n             } else if let Def::StructCtor(ctor_did, CtorKind::Fn) = path.def {\n-                if self.item_path.def.opt_def_id() == self.cx.tcx.parent_def_id(ctor_did) {\n+                if self.item_path.def.opt_def_id() == self.cx.tcx.parent(ctor_did) {\n                     span_use_self_lint(self.cx, path);\n                 }\n             }"}]}