{"sha": "b5d953bf7df9e91d96c36182b651693cf01ce0bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1ZDk1M2JmN2RmOWU5MWQ5NmMzNjE4MmI2NTE2OTNjZjAxY2UwYmY=", "commit": {"author": {"name": "llogiq", "email": "bogusandre@gmail.com", "date": "2015-09-07T21:22:30Z"}, "committer": {"name": "llogiq", "email": "bogusandre@gmail.com", "date": "2015-09-07T21:22:30Z"}, "message": "Merge pull request #316 from Manishearth/mutmut\n\nFix mut_mut false positive, make Allow (fixes #309)", "tree": {"sha": "8228e3d5b3a4dd86cae66502b2f966b871cedda7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8228e3d5b3a4dd86cae66502b2f966b871cedda7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5d953bf7df9e91d96c36182b651693cf01ce0bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5d953bf7df9e91d96c36182b651693cf01ce0bf", "html_url": "https://github.com/rust-lang/rust/commit/b5d953bf7df9e91d96c36182b651693cf01ce0bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5d953bf7df9e91d96c36182b651693cf01ce0bf/comments", "author": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "committer": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "54932dee1cf28afd5d670ba8cc8b8d0d93c7b830", "url": "https://api.github.com/repos/rust-lang/rust/commits/54932dee1cf28afd5d670ba8cc8b8d0d93c7b830", "html_url": "https://github.com/rust-lang/rust/commit/54932dee1cf28afd5d670ba8cc8b8d0d93c7b830"}, {"sha": "0e658afc1bd3447e1f10a5cb67002512ea45ba3c", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e658afc1bd3447e1f10a5cb67002512ea45ba3c", "html_url": "https://github.com/rust-lang/rust/commit/0e658afc1bd3447e1f10a5cb67002512ea45ba3c"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "ca96e496bfe84d7f276cf7cfde6df98ebf149398", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5d953bf7df9e91d96c36182b651693cf01ce0bf/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/b5d953bf7df9e91d96c36182b651693cf01ce0bf/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=b5d953bf7df9e91d96c36182b651693cf01ce0bf", "patch": "@@ -33,7 +33,7 @@ name\n [match_ref_pats](https://github.com/Manishearth/rust-clippy/wiki#match_ref_pats)                       | warn    | a match has all arms prefixed with `&`; the match expression can be dereferenced instead\n [min_max](https://github.com/Manishearth/rust-clippy/wiki#min_max)                                     | warn    | `min(_, max(_, _))` (or vice versa) with bounds clamping the result to a constant\n [modulo_one](https://github.com/Manishearth/rust-clippy/wiki#modulo_one)                               | warn    | taking a number modulo 1, which always returns 0\n-[mut_mut](https://github.com/Manishearth/rust-clippy/wiki#mut_mut)                                     | warn    | usage of double-mut refs, e.g. `&mut &mut ...` (either copy'n'paste error, or shows a fundamental misunderstanding of references)\n+[mut_mut](https://github.com/Manishearth/rust-clippy/wiki#mut_mut)                                     | allow   | usage of double-mut refs, e.g. `&mut &mut ...` (either copy'n'paste error, or shows a fundamental misunderstanding of references)\n [needless_bool](https://github.com/Manishearth/rust-clippy/wiki#needless_bool)                         | warn    | if-statements with plain booleans in the then- and else-clause, e.g. `if p { true } else { false }`\n [needless_lifetimes](https://github.com/Manishearth/rust-clippy/wiki#needless_lifetimes)               | warn    | using explicit lifetimes for references in function arguments when elision rules would allow omitting them\n [needless_range_loop](https://github.com/Manishearth/rust-clippy/wiki#needless_range_loop)             | warn    | for-looping over a range of indices where an iterator over items would do"}, {"sha": "7ce2be97358d7d89483c8d91366d278f449d26e2", "filename": "src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5d953bf7df9e91d96c36182b651693cf01ce0bf/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d953bf7df9e91d96c36182b651693cf01ce0bf/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=b5d953bf7df9e91d96c36182b651693cf01ce0bf", "patch": "@@ -92,6 +92,7 @@ pub fn plugin_registrar(reg: &mut Registry) {\n         methods::OPTION_UNWRAP_USED,\n         methods::RESULT_UNWRAP_USED,\n         methods::WRONG_PUB_SELF_CONVENTION,\n+        mut_mut::MUT_MUT,\n         ptr_arg::PTR_ARG,\n         shadow::SHADOW_REUSE,\n         shadow::SHADOW_SAME,\n@@ -135,7 +136,6 @@ pub fn plugin_registrar(reg: &mut Registry) {\n         misc::MODULO_ONE,\n         misc::REDUNDANT_PATTERN,\n         misc::TOPLEVEL_REF_ARG,\n-        mut_mut::MUT_MUT,\n         needless_bool::NEEDLESS_BOOL,\n         precedence::PRECEDENCE,\n         ranges::RANGE_STEP_BY_ZERO,"}, {"sha": "d3270861870f543baeb8827c362f33a4ddfaab5f", "filename": "src/mut_mut.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b5d953bf7df9e91d96c36182b651693cf01ce0bf/src%2Fmut_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d953bf7df9e91d96c36182b651693cf01ce0bf/src%2Fmut_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmut_mut.rs?ref=b5d953bf7df9e91d96c36182b651693cf01ce0bf", "patch": "@@ -4,7 +4,7 @@ use rustc::middle::ty::{TypeAndMut, TyRef};\n \n use utils::{in_external_macro, span_lint};\n \n-declare_lint!(pub MUT_MUT, Warn,\n+declare_lint!(pub MUT_MUT, Allow,\n               \"usage of double-mut refs, e.g. `&mut &mut ...` (either copy'n'paste error, \\\n                or shows a fundamental misunderstanding of references)\");\n \n@@ -53,7 +53,6 @@ fn check_expr_mut(cx: &Context, expr: &Expr) {\n \n fn unwrap_mut(ty : &Ty) -> Option<&Ty> {\n     match ty.node {\n-        TyPtr(MutTy{ ty: ref pty, mutbl: MutMutable }) => Option::Some(pty),\n         TyRptr(_, MutTy{ ty: ref pty, mutbl: MutMutable }) => Option::Some(pty),\n         _ => Option::None\n     }"}, {"sha": "2560a54c0ef7f75288a589fccbc057d1c63be86e", "filename": "tests/compile-fail/mut_mut.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b5d953bf7df9e91d96c36182b651693cf01ce0bf/tests%2Fcompile-fail%2Fmut_mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5d953bf7df9e91d96c36182b651693cf01ce0bf/tests%2Fcompile-fail%2Fmut_mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fmut_mut.rs?ref=b5d953bf7df9e91d96c36182b651693cf01ce0bf", "patch": "@@ -1,6 +1,8 @@\n #![feature(plugin)]\n #![plugin(clippy)]\n \n+#![allow(unused)]\n+\n //#![plugin(regex_macros)]\n //extern crate regex;\n \n@@ -9,6 +11,11 @@ fn fun(x : &mut &mut u32) -> bool { //~ERROR generally you want to avoid `&mut &\n     **x > 0\n }\n \n+#[deny(mut_mut)]\n+fn less_fun(x : *mut *mut u32) {\n+  let y = x;\n+}\n+\n macro_rules! mut_ptr {\n     ($p:expr) => { &mut $p }\n }"}]}