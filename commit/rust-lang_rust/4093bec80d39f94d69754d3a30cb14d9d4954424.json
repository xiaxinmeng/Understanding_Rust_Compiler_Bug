{"sha": "4093bec80d39f94d69754d3a30cb14d9d4954424", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwOTNiZWM4MGQzOWY5NGQ2OTc1NGQzYTMwY2IxNGQ5ZDQ5NTQ0MjQ=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2019-03-26T16:04:00Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2019-03-26T16:04:00Z"}, "message": "Exclude UnusedBrokenConst from module lints", "tree": {"sha": "74e1a051054df6b0bdc7d0edb333edd829ce9e35", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74e1a051054df6b0bdc7d0edb333edd829ce9e35"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4093bec80d39f94d69754d3a30cb14d9d4954424", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4093bec80d39f94d69754d3a30cb14d9d4954424", "html_url": "https://github.com/rust-lang/rust/commit/4093bec80d39f94d69754d3a30cb14d9d4954424", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4093bec80d39f94d69754d3a30cb14d9d4954424/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00d8fa3fdb3392916b45fc8e86ed0346fce4ffee", "url": "https://api.github.com/repos/rust-lang/rust/commits/00d8fa3fdb3392916b45fc8e86ed0346fce4ffee", "html_url": "https://github.com/rust-lang/rust/commit/00d8fa3fdb3392916b45fc8e86ed0346fce4ffee"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "492ac1bf14dcc88386375cc637e22466cb245e95", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4093bec80d39f94d69754d3a30cb14d9d4954424/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4093bec80d39f94d69754d3a30cb14d9d4954424/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=4093bec80d39f94d69754d3a30cb14d9d4954424", "patch": "@@ -1360,6 +1360,7 @@ fn check_const(cx: &LateContext<'_, '_>, body_id: hir::BodyId) {\n         promoted: None\n     };\n     // trigger the query once for all constants since that will already report the errors\n+    // FIXME: Use ensure here\n     let _ = cx.tcx.const_eval(param_env.and(cid));\n }\n "}, {"sha": "4c624a267af9b676c1afd31987bf7212ea26801c", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4093bec80d39f94d69754d3a30cb14d9d4954424/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4093bec80d39f94d69754d3a30cb14d9d4954424/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=4093bec80d39f94d69754d3a30cb14d9d4954424", "patch": "@@ -153,9 +153,6 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n \n         TypeAliasBounds: TypeAliasBounds,\n \n-        // May Depend on constants elsewhere\n-        UnusedBrokenConst: UnusedBrokenConst,\n-\n         TrivialConstraints: TrivialConstraints,\n         TypeLimits: TypeLimits::new(),\n \n@@ -171,6 +168,10 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n     store.register_late_pass(sess, false, true, box BuiltinCombinedModuleLateLintPass::new());\n \n     late_lint_methods!(declare_combined_late_lint_pass, [BuiltinCombinedLateLintPass, [\n+        // FIXME: Look into regression when this is used as a module lint\n+        // May Depend on constants elsewhere\n+        UnusedBrokenConst: UnusedBrokenConst,\n+\n         // Uses attr::is_used which is untracked, can't be an incremental module pass.\n         UnusedAttributes: UnusedAttributes,\n "}]}