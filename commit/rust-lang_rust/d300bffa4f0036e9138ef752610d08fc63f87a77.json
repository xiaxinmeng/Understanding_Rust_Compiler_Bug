{"sha": "d300bffa4f0036e9138ef752610d08fc63f87a77", "node_id": "C_kwDOAAsO6NoAKGQzMDBiZmZhNGYwMDM2ZTkxMzhlZjc1MjYxMGQwOGZjNjNmODdhNzc", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-25T11:21:17Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-25T11:21:17Z"}, "message": "Auto merge of #110906 - ekusiadadus:ekusiadadus/fix-bash-complete-etc, r=albertlarsan68\n\nfix: :bug: etc/bash_complettion -> src/etc/... to avoid copy error\n\n## why\n\nI got an error on executing `./x.py build && ./x.py install`.\n\nFound creating some folder in  `/etc/bash_completion.d/`, It appears to be incorrect to attempt to create a folder in `/etc/bash_completion.d/`, as this proccess requires `sudo`.\n\nFixes #111653\n\n```\nUplifting rustc (stage1 -> stage3)\nBuilding tool cargo (stage2 -> stage3, x86_64-unknown-linux-gnu)\n    Finished release [optimized] target(s) in 0.16s\nBuilding tool cargo-credential-1password (stage2 -> stage3, x86_64-unknown-linux-gnu)\n    Finished release [optimized] target(s) in 0.06s\nDist cargo-1.71.0-dev-x86_64-unknown-linux-gnu\n        finished in 10.700 seconds\nInstalling stage2 cargo (x86_64-unknown-linux-gnu)\ninstall: uninstalling component 'cargo'\ninstall: creating uninstall script at /home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/uninstall.sh\ninstall: installing component 'cargo'\n/home/ekusiadadus/dev/rust/rust/build/tmp/tarball/cargo/x86_64-unknown-linux-gnu/cargo-1.71.0-dev-x86_64-unknown-linux-gnu/install.sh: 310: cd: can't cd to /etc/bash_completion.d\ncp: cannot create regular file '/cargo': Permission denied\nchmod: cannot access '/cargo': No such file or directory\ninstall: error: file creation failed. see logs at '/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/install.log'\nBuild completed unsuccessfully in 0:01:11\n```\n\nError Log\n\n```\ninstall: uninstalling component 'cargo'\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/libexec/cargo-credential-1password\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/libexec/cargo-credential-1password\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-APACHE\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-APACHE\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-MIT\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-MIT\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-THIRD-PARTY\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/LICENSE-THIRD-PARTY\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/README.md\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/doc/rust/README.md\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-add.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-add.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-bench.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-bench.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-build.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-build.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-check.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-check.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-clean.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-clean.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-doc.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-doc.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-fetch.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-fetch.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-fix.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-fix.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-generate-lockfile.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-generate-lockfile.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-help.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-help.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-init.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-init.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-install.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-install.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-locate-project.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-locate-project.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-login.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-login.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-logout.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-logout.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-metadata.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-metadata.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-new.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-new.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-owner.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-owner.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-package.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-package.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-pkgid.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-pkgid.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-publish.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-publish.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-remove.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-remove.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-report.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-report.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-run.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-run.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-rustc.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-rustc.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-rustdoc.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-rustdoc.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-search.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-search.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-test.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-test.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-tree.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-tree.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-uninstall.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-uninstall.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-update.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-update.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-vendor.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-vendor.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-verify-project.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-verify-project.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-version.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-version.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-yank.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo-yank.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo.1\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/man/man1/cargo.1\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/share/zsh/site-functions/_cargo\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/share/zsh/site-functions/_cargo\ninstall: removing file /home/ekusiadadus/.rustup/toolchains/dev/src/etc/bash_completion.d/cargo\n$ rm -f /home/ekusiadadus/.rustup/toolchains/dev/src/etc/bash_completion.d/cargo\ninstall: removing component manifest /home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/manifest-cargo\n$ rm /home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/manifest-cargo\n$ echo \"rust-analyzer-preview\nrustfmt-preview\nrust-demangler-preview\nclippy-preview\nmiri-preview\nllvm-tools-preview\nrust-src\nrustc\nrust-docs\nrust-std-x86_64-unknown-linux-gnu\" > \"/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/components\"\n$ umask 022 && mkdir -p \"/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib\"\n$ echo \"3\" > \"/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/rust-installer-version\"\ninstall: creating uninstall script at /home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/uninstall.sh\n$ cp /home/ekusiadadus/dev/rust/rust/build/tmp/tarball/cargo/x86_64-unknown-linux-gnu/cargo-1.71.0-dev-x86_64-unknown-linux-gnu/install.sh /home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/uninstall.sh\ninstall: installing component 'cargo'\n$ echo \"cargo\" >> \"/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/components\"\n$ umask 022 && mkdir -p \"/home/ekusiadadus/.rustup/toolchains/dev/bin\"\ninstall: copying file /home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\n$ cp /home/ekusiadadus/dev/rust/rust/build/tmp/tarball/cargo/x86_64-unknown-linux-gnu/cargo-1.71.0-dev-x86_64-unknown-linux-gnu/cargo/bin/cargo /home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\n$ chmod 755 /home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\n$ echo \"file:/home/ekusiadadus/.rustup/toolchains/dev/bin/cargo\" >> \"/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/manifest-cargo\"\n$ umask 022 && mkdir -p \"/etc/bash_completion.d\"\ninstall: copying file /cargo\n$ cp /home/ekusiadadus/dev/rust/rust/build/tmp/tarball/cargo/x86_64-unknown-linux-gnu/cargo-1.71.0-dev-x86_64-unknown-linux-gnu/cargo/etc/bash_completion.d/cargo /cargo\n$ chmod 644 /cargo\ninstall: error: file creation failed. see logs at '/home/ekusiadadus/.rustup/toolchains/dev/lib/rustlib/install.log'\n```", "tree": {"sha": "9bdc1425b962483f5781f6eaa797c52119eda4e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9bdc1425b962483f5781f6eaa797c52119eda4e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d300bffa4f0036e9138ef752610d08fc63f87a77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d300bffa4f0036e9138ef752610d08fc63f87a77", "html_url": "https://github.com/rust-lang/rust/commit/d300bffa4f0036e9138ef752610d08fc63f87a77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d300bffa4f0036e9138ef752610d08fc63f87a77/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb9da7bfa375ad58bcb946115f3191a2756785e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb9da7bfa375ad58bcb946115f3191a2756785e5", "html_url": "https://github.com/rust-lang/rust/commit/eb9da7bfa375ad58bcb946115f3191a2756785e5"}, {"sha": "08ce68b6a6bad360e9c3611ad60cf6598401f878", "url": "https://api.github.com/repos/rust-lang/rust/commits/08ce68b6a6bad360e9c3611ad60cf6598401f878", "html_url": "https://github.com/rust-lang/rust/commit/08ce68b6a6bad360e9c3611ad60cf6598401f878"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "b49845386da174b0f44a196ca4be142aa7c13a04", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d300bffa4f0036e9138ef752610d08fc63f87a77/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d300bffa4f0036e9138ef752610d08fc63f87a77/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=d300bffa4f0036e9138ef752610d08fc63f87a77", "patch": "@@ -1071,7 +1071,11 @@ impl Step for Cargo {\n \n         tarball.add_file(&cargo, \"bin\", 0o755);\n         tarball.add_file(etc.join(\"_cargo\"), \"share/zsh/site-functions\", 0o644);\n-        tarball.add_renamed_file(etc.join(\"cargo.bashcomp.sh\"), \"etc/bash_completion.d\", \"cargo\");\n+        tarball.add_renamed_file(\n+            etc.join(\"cargo.bashcomp.sh\"),\n+            \"src/etc/bash_completion.d\",\n+            \"cargo\",\n+        );\n         tarball.add_dir(etc.join(\"man\"), \"share/man/man1\");\n         tarball.add_legal_and_readme_to(\"share/doc/cargo\");\n "}]}