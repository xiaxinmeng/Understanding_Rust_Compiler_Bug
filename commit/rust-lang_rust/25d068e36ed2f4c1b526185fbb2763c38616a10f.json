{"sha": "25d068e36ed2f4c1b526185fbb2763c38616a10f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1ZDA2OGUzNmVkMmY0YzFiNTI2MTg1ZmJiMjc2M2MzODYxNmExMGY=", "commit": {"author": {"name": "Sandeep Datta", "email": "datta.sandeep@gmail.com", "date": "2016-01-17T08:38:01Z"}, "committer": {"name": "Sandeep Datta", "email": "datta.sandeep@gmail.com", "date": "2016-01-17T08:38:01Z"}, "message": "Showed the difference between `map` and `and_then` with an example.", "tree": {"sha": "338c298fa411907d3f09635dcb128da4efb7601b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/338c298fa411907d3f09635dcb128da4efb7601b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/25d068e36ed2f4c1b526185fbb2763c38616a10f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/25d068e36ed2f4c1b526185fbb2763c38616a10f", "html_url": "https://github.com/rust-lang/rust/commit/25d068e36ed2f4c1b526185fbb2763c38616a10f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/25d068e36ed2f4c1b526185fbb2763c38616a10f/comments", "author": {"login": "sandeep-datta", "id": 328639, "node_id": "MDQ6VXNlcjMyODYzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/328639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandeep-datta", "html_url": "https://github.com/sandeep-datta", "followers_url": "https://api.github.com/users/sandeep-datta/followers", "following_url": "https://api.github.com/users/sandeep-datta/following{/other_user}", "gists_url": "https://api.github.com/users/sandeep-datta/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandeep-datta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandeep-datta/subscriptions", "organizations_url": "https://api.github.com/users/sandeep-datta/orgs", "repos_url": "https://api.github.com/users/sandeep-datta/repos", "events_url": "https://api.github.com/users/sandeep-datta/events{/privacy}", "received_events_url": "https://api.github.com/users/sandeep-datta/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sandeep-datta", "id": 328639, "node_id": "MDQ6VXNlcjMyODYzOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/328639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sandeep-datta", "html_url": "https://github.com/sandeep-datta", "followers_url": "https://api.github.com/users/sandeep-datta/followers", "following_url": "https://api.github.com/users/sandeep-datta/following{/other_user}", "gists_url": "https://api.github.com/users/sandeep-datta/gists{/gist_id}", "starred_url": "https://api.github.com/users/sandeep-datta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sandeep-datta/subscriptions", "organizations_url": "https://api.github.com/users/sandeep-datta/orgs", "repos_url": "https://api.github.com/users/sandeep-datta/repos", "events_url": "https://api.github.com/users/sandeep-datta/events{/privacy}", "received_events_url": "https://api.github.com/users/sandeep-datta/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "077f4eeb8485e5a1437f6e27973a907ac772b616", "url": "https://api.github.com/repos/rust-lang/rust/commits/077f4eeb8485e5a1437f6e27973a907ac772b616", "html_url": "https://github.com/rust-lang/rust/commit/077f4eeb8485e5a1437f6e27973a907ac772b616"}], "stats": {"total": 22, "additions": 17, "deletions": 5}, "files": [{"sha": "b5c0eabba9de7ac2d7a91548a6ff7bf57abe7da6", "filename": "src/doc/book/error-handling.md", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/25d068e36ed2f4c1b526185fbb2763c38616a10f/src%2Fdoc%2Fbook%2Ferror-handling.md", "raw_url": "https://github.com/rust-lang/rust/raw/25d068e36ed2f4c1b526185fbb2763c38616a10f/src%2Fdoc%2Fbook%2Ferror-handling.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fbook%2Ferror-handling.md?ref=25d068e36ed2f4c1b526185fbb2763c38616a10f", "patch": "@@ -351,11 +351,21 @@ fn file_name(file_path: &str) -> Option<&str> {\n ```\n \n You might think that we could use the `map` combinator to reduce the case\n-analysis, but its type doesn't quite fit. Namely, `map` takes a function that\n-does something only with the inner value. The result of that function is then\n-*always* [rewrapped with `Some`](#code-option-map). Instead, we need something\n-like `map`, but which allows the caller to return another `Option`. Its generic\n-implementation is even simpler than `map`:\n+analysis, but its type doesn't quite fit...\n+\n+```rust\n+fn file_path_ext(file_path: &str) -> Option<&str> {\n+    file_name(file_path).map(|x| extension(x)) //Compilation error\n+}\n+```\n+\n+The `map` function here wraps the value returned by the `extension` function inside an `Option<_>` and since the `extension` function itself returns an `Option<&str>` the expression `file_name(file_path).map(|x| extension(x))` actually returns an `Option<Option<&str>>`.\n+\n+But since `file_path_ext` just returns `Option<&str>` (and not `Option<Option<&str>>`) we get a compilation error.\n+\n+The result of the function taken by map as input is *always* [rewrapped with `Some`](#code-option-map). Instead, we need something like `map`, but which allows the caller to return a `Option<_>` directly without wrapping it in another `Option<_>`.\n+\n+Its generic implementation is even simpler than `map`:\n \n ```rust\n fn and_then<F, T, A>(option: Option<T>, f: F) -> Option<A>\n@@ -377,6 +387,8 @@ fn file_path_ext(file_path: &str) -> Option<&str> {\n }\n ```\n \n+Side note: Since `and_then` essentially works like `map` but returns an `Option<_>` instead of an `Option<Option<_>>` it is known as `flatmap` in some other languages.\n+\n The `Option` type has many other combinators [defined in the standard\n library][5]. It is a good idea to skim this list and familiarize\n yourself with what's available\u2014they can often reduce case analysis"}]}