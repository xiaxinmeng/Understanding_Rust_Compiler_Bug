{"sha": "9a615fd4e4ffbf9e58c56d15454ccfebff549f7c", "node_id": "C_kwDOAAsO6NoAKDlhNjE1ZmQ0ZTRmZmJmOWU1OGM1NmQxNTQ1NGNjZmViZmY1NDlmN2M", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-17T11:11:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-17T11:11:07Z"}, "message": "Rollup merge of #102962 - flba-eb:remote_test_server_help, r=pietroalbini\n\nremote-test-server: Show command line arguments\n\nThe user of remote-test-server should get at least some minimal command line help as this is often started manually.\n\nr? `@pietroalbini`", "tree": {"sha": "b47ff375d08780ab841a290f1b7bf0d28e232172", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b47ff375d08780ab841a290f1b7bf0d28e232172"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjTThLCRBK7hj4Ov3rIwAAXxMIABquqY4qs23e9fEfXnuDpOLE\nuQfDywtHM0c7dA9F4vZjRH6jh86YuP3z0KPPWvbFiFMoK+BVokBnLLgWKHs/OaJa\nhIb9CvCj5CpNTLFxuw6BnLDq+5yW7E1aOYKsqS0H6JtwaJ4Ushxd467RsUmidBRw\nSqqMhyQs8zyQ0IijctRTyCpz2C7ED9G36hV8OfHH69t/9kh/e6+EgvzxMW+5Jd3G\nDTNpqCw9bVhYWaHfwtBTObiA0HNa8NT0LElAcBEY4qVBICGLeaaibeA8xoini8MJ\nZybVOsWux3n0hTYz+dWl7Lup1E2BxWY+sthdqlZqBnAc41E3RRquakLpu7kWhm8=\n=hq9j\n-----END PGP SIGNATURE-----\n", "payload": "tree b47ff375d08780ab841a290f1b7bf0d28e232172\nparent c19a893f87e70fc1c9bab193c3f9c83d9a9d71d3\nparent 690b9faa5644e336d57a608110578d91c7ef9209\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1666005067 +0200\ncommitter GitHub <noreply@github.com> 1666005067 +0200\n\nRollup merge of #102962 - flba-eb:remote_test_server_help, r=pietroalbini\n\nremote-test-server: Show command line arguments\n\nThe user of remote-test-server should get at least some minimal command line help as this is often started manually.\n\nr? `@pietroalbini`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c", "html_url": "https://github.com/rust-lang/rust/commit/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c19a893f87e70fc1c9bab193c3f9c83d9a9d71d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c19a893f87e70fc1c9bab193c3f9c83d9a9d71d3", "html_url": "https://github.com/rust-lang/rust/commit/c19a893f87e70fc1c9bab193c3f9c83d9a9d71d3"}, {"sha": "690b9faa5644e336d57a608110578d91c7ef9209", "url": "https://api.github.com/repos/rust-lang/rust/commits/690b9faa5644e336d57a608110578d91c7ef9209", "html_url": "https://github.com/rust-lang/rust/commit/690b9faa5644e336d57a608110578d91c7ef9209"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "ec992da681219add9c0b4174f42981ef8f7f207b", "filename": "src/tools/remote-test-server/src/main.rs", "status": "modified", "additions": 22, "deletions": 3, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a615fd4e4ffbf9e58c56d15454ccfebff549f7c/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs?ref=9a615fd4e4ffbf9e58c56d15454ccfebff549f7c", "patch": "@@ -74,7 +74,11 @@ impl Config {\n                 \"--bind\" => next_is_bind = true,\n                 \"--sequential\" => config.sequential = true,\n                 \"--verbose\" | \"-v\" => config.verbose = true,\n-                arg => panic!(\"unknown argument: {}\", arg),\n+                \"--help\" | \"-h\" => {\n+                    show_help();\n+                    std::process::exit(0);\n+                }\n+                arg => panic!(\"unknown argument: {}, use `--help` for known arguments\", arg),\n             }\n         }\n         if next_is_bind {\n@@ -85,16 +89,31 @@ impl Config {\n     }\n }\n \n+fn show_help() {\n+    eprintln!(\n+        r#\"Usage:\n+\n+{} [OPTIONS]\n+\n+OPTIONS:\n+    --bind <IP>:<PORT>   Specify IP address and port to listen for requests, e.g. \"0.0.0.0:12345\"\n+    --sequential         Run only one test at a time\n+    -v, --verbose        Show status messages\n+    -h, --help           Show this help screen\n+\"#,\n+        std::env::args().next().unwrap()\n+    );\n+}\n+\n fn print_verbose(s: &str, conf: Config) {\n     if conf.verbose {\n         println!(\"{}\", s);\n     }\n }\n \n fn main() {\n-    println!(\"starting test server\");\n-\n     let config = Config::parse_args();\n+    println!(\"starting test server\");\n \n     let listener = t!(TcpListener::bind(config.bind));\n     let (work, tmp): (PathBuf, PathBuf) = if cfg!(target_os = \"android\") {"}]}