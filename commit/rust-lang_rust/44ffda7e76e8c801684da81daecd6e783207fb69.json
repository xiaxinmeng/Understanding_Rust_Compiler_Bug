{"sha": "44ffda7e76e8c801684da81daecd6e783207fb69", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ0ZmZkYTdlNzZlOGM4MDE2ODRkYTgxZGFlY2Q2ZTc4MzIwN2ZiNjk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-27T12:27:40Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-27T12:27:40Z"}, "message": "Auto merge of #3578 - matthiaskrgr:rustc_tools_util, r=oli-obk\n\nrustc_tools_util: changes in preparation of release on crates.io\n\nI want to release my [cargo-cache](https://github.com/matthiaskrgr/cargo-cache) crate on crates.io however it depends on rustc_tools_util, thus I need to publish rustc_tools_util on crates.io first.\n\nThis PR expands the Cargo.toml and adds a readme.", "tree": {"sha": "a8de60c21675cab492915883cca83e2691db5c08", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8de60c21675cab492915883cca83e2691db5c08"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/44ffda7e76e8c801684da81daecd6e783207fb69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/44ffda7e76e8c801684da81daecd6e783207fb69", "html_url": "https://github.com/rust-lang/rust/commit/44ffda7e76e8c801684da81daecd6e783207fb69", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/44ffda7e76e8c801684da81daecd6e783207fb69/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c10c515fae03a5eb35ab9f98e6ce78d133feb9a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c10c515fae03a5eb35ab9f98e6ce78d133feb9a3", "html_url": "https://github.com/rust-lang/rust/commit/c10c515fae03a5eb35ab9f98e6ce78d133feb9a3"}, {"sha": "345fe6d6c6f3598d008e20a80d4df982e99ccf45", "url": "https://api.github.com/repos/rust-lang/rust/commits/345fe6d6c6f3598d008e20a80d4df982e99ccf45", "html_url": "https://github.com/rust-lang/rust/commit/345fe6d6c6f3598d008e20a80d4df982e99ccf45"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "b73d7ca56060454e0ad4c9fc09af199e125558a6", "filename": "rustc_tools_util/Cargo.toml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/44ffda7e76e8c801684da81daecd6e783207fb69/rustc_tools_util%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/44ffda7e76e8c801684da81daecd6e783207fb69/rustc_tools_util%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustc_tools_util%2FCargo.toml?ref=44ffda7e76e8c801684da81daecd6e783207fb69", "patch": "@@ -2,5 +2,11 @@\n name = \"rustc_tools_util\"\n version = \"0.1.0\"\n authors = [\"Matthias Kr\u00fcger <matthias.krueger@famsik.de>\"]\n+description = \"small helper to generate version information for git packages\"\n+repository = \"https://github.com/rust-lang/rust-clippy\"\n+readme = \"README.md\"\n+license = \"MIT/Apache-2.0\"\n+keywords = [\"rustc\", \"tool\", \"git\", \"version\", \"hash\"]\n+categories = [\"development-tools\"]\n edition = \"2018\"\n [dependencies]"}, {"sha": "b101f55e50955c9d3129fd6574f155fcb5cb25f4", "filename": "rustc_tools_util/README.md", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/44ffda7e76e8c801684da81daecd6e783207fb69/rustc_tools_util%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/44ffda7e76e8c801684da81daecd6e783207fb69/rustc_tools_util%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustc_tools_util%2FREADME.md?ref=44ffda7e76e8c801684da81daecd6e783207fb69", "patch": "@@ -0,0 +1,58 @@\n+# rustc_tools_util\n+\n+A small tool to help you generate version information\n+for packages installed from a git repo\n+\n+## Usage\n+\n+Add a `build.rs` file to your repo and list it in `Cargo.toml`\n+````\n+build = \"build.rs\"\n+````\n+\n+List rustc_tools_util as regular AND build dependency.\n+````\n+[dependencies]\n+rustc_tools_util = \"0.1\"\n+\n+[build-dependencies]\n+rustc_tools_util = \"0.1\"\n+````\n+\n+In `build.rs`, generate the data in your `main()`\n+````rust\n+fn main() {\n+    println!(\n+        \"cargo:rustc-env=GIT_HASH={}\",\n+        rustc_tools_util::get_commit_hash().unwrap_or_default()\n+    );\n+    println!(\n+        \"cargo:rustc-env=COMMIT_DATE={}\",\n+        rustc_tools_util::get_commit_date().unwrap_or_default()\n+    );\n+}\n+\n+````\n+\n+Use the version information in your main.rs\n+````rust\n+use rustc_tools_util::*;\n+\n+fn show_version() {\n+    let version_info = rustc_tools_util::get_version_info!();\n+    println!(\"{}\", version_info);\n+}\n+````\n+This gives the following output in clippy:\n+`clippy 0.0.212 (a416c5e 2018-12-14)`\n+\n+\n+## License\n+\n+Copyright 2014-2018 The Rust Project Developers\n+\n+Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+<LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+option. All files in the project carrying such notice may not be\n+copied, modified, or distributed except according to those terms."}]}