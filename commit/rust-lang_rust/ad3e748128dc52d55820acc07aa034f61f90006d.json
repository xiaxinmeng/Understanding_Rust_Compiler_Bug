{"sha": "ad3e748128dc52d55820acc07aa034f61f90006d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkM2U3NDgxMjhkYzUyZDU1ODIwYWNjMDdhYTAzNGY2MWY5MDAwNmQ=", "commit": {"author": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-01-26T19:08:43Z"}, "committer": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-02-22T01:14:24Z"}, "message": "Don't allow default impls for traits outside their crate", "tree": {"sha": "e1738a97ba314347684b9ce91f9f619823848d4c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1738a97ba314347684b9ce91f9f619823848d4c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad3e748128dc52d55820acc07aa034f61f90006d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad3e748128dc52d55820acc07aa034f61f90006d", "html_url": "https://github.com/rust-lang/rust/commit/ad3e748128dc52d55820acc07aa034f61f90006d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad3e748128dc52d55820acc07aa034f61f90006d/comments", "author": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "839a9de8d385a082b571a88ff5a7f0c620afed1c", "url": "https://api.github.com/repos/rust-lang/rust/commits/839a9de8d385a082b571a88ff5a7f0c620afed1c", "html_url": "https://github.com/rust-lang/rust/commit/839a9de8d385a082b571a88ff5a7f0c620afed1c"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "9a730093c7d2fdfd22771e4637846e19a521034e", "filename": "src/librustc_typeck/coherence/orphan.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ad3e748128dc52d55820acc07aa034f61f90006d/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad3e748128dc52d55820acc07aa034f61f90006d/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Forphan.rs?ref=ad3e748128dc52d55820acc07aa034f61f90006d", "patch": "@@ -96,6 +96,16 @@ impl<'cx, 'tcx,'v> visit::Visitor<'v> for OrphanChecker<'cx, 'tcx> {\n                     }\n                 }\n             }\n+            ast::ItemDefTrait(_, ref ast_trait_ref) => {\n+                // \"Trait\" impl\n+                debug!(\"coherence2::orphan check: default trait impl {}\", item.repr(self.tcx));\n+                let trait_ref = ty::node_id_to_trait_ref(self.tcx, ast_trait_ref.ref_id);\n+                if trait_ref.def_id.krate != ast::LOCAL_CRATE {\n+                    span_err!(self.tcx.sess, item.span, E0316,\n+                              \"cannot create default implementations for traits outside the \\\n+                               crate they're defined in; define a new trait instead.\");\n+                }\n+            }\n             _ => {\n                 // Not an impl\n             }"}, {"sha": "f610f71cd429fe125f5d051af2c3befdc89a7862", "filename": "src/librustc_typeck/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ad3e748128dc52d55820acc07aa034f61f90006d/src%2Flibrustc_typeck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad3e748128dc52d55820acc07aa034f61f90006d/src%2Flibrustc_typeck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fdiagnostics.rs?ref=ad3e748128dc52d55820acc07aa034f61f90006d", "patch": "@@ -171,7 +171,8 @@ register_diagnostics! {\n     E0247, // found module name used as a type\n     E0248, // found value name used as a type\n     E0249, // expected constant expr for array length\n-    E0250  // expected constant expr for array length\n+    E0250, // expected constant expr for array length\n+    E0316  // can't create default impls for traits outside their crates\n }\n \n __build_diagnostic_array! { DIAGNOSTICS }"}]}