{"sha": "1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFlZTEzOWFlMWY2MTMwOWZlZTQ0YjM3MDM0ZWUxZjJhNDJhYmE4ZjE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-02-21T06:16:25Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-02-22T00:14:02Z"}, "message": "rustdoc: Convert most passes to parallel folds", "tree": {"sha": "5cc6c1f292ad8242c3568eaae9cf9cececa8827b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5cc6c1f292ad8242c3568eaae9cf9cececa8827b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "html_url": "https://github.com/rust-lang/rust/commit/1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4f57620ae3a221d94a893f57fc31f96a8a3a0ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4f57620ae3a221d94a893f57fc31f96a8a3a0ae", "html_url": "https://github.com/rust-lang/rust/commit/d4f57620ae3a221d94a893f57fc31f96a8a3a0ae"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "8d77dc6b055188e29ae275731d36764986bd0200", "filename": "src/rustdoc/attr_pass.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fattr_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fattr_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fattr_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -27,7 +27,7 @@ fn run(\n         fold_res: fold_res,\n         fold_iface: fold_iface,\n         fold_impl: fold_impl\n-        with *fold::default_seq_fold(srv)\n+        with *fold::default_par_fold(srv)\n     });\n     fold.fold_crate(fold, doc)\n }"}, {"sha": "be6bc708e67f29644510bb72a543fda5e1bbdfb6", "filename": "src/rustdoc/desc_pass.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fdesc_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fdesc_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fdesc_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -22,7 +22,7 @@ fn run(\n         fold_res: fold_res,\n         fold_iface: fold_iface,\n         fold_impl: fold_impl\n-        with *fold::default_seq_fold(op)\n+        with *fold::default_par_fold(op)\n     });\n     fold.fold_crate(fold, doc)\n }"}, {"sha": "0ea14c3bff294ae3abad547119a1800d6f5a6d57", "filename": "src/rustdoc/desc_to_brief_pass.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fdesc_to_brief_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fdesc_to_brief_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fdesc_to_brief_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -21,7 +21,7 @@ fn run(\n         fold_item: fold_item,\n         fold_iface: fold_iface,\n         fold_impl: fold_impl\n-        with *fold::default_seq_fold(())\n+        with *fold::default_par_fold(())\n     });\n     fold.fold_crate(fold, doc)\n }"}, {"sha": "bdd7709a3c481e8879fc2b276ea0fecfac0de997", "filename": "src/rustdoc/path_pass.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fpath_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fpath_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fpath_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -17,7 +17,7 @@ fn run(srv: astsrv::srv, doc: doc::cratedoc) -> doc::cratedoc {\n     let fold = fold::fold({\n         fold_item: fold_item,\n         fold_mod: fold_mod\n-        with *fold::default_seq_fold(ctxt)\n+        with *fold::default_par_fold(ctxt)\n     });\n     fold.fold_crate(fold, doc)\n }\n@@ -33,7 +33,7 @@ fn fold_mod(fold: fold::fold<ctxt>, doc: doc::moddoc) -> doc::moddoc {\n     let is_topmod = doc.id() == rustc::syntax::ast::crate_node_id;\n \n     if !is_topmod { vec::push(fold.ctxt.path, doc.name()); }\n-    let doc = fold::default_seq_fold_mod(fold, doc);\n+    let doc = fold::default_par_fold_mod(fold, doc);\n     if !is_topmod { vec::pop(fold.ctxt.path); }\n \n     {"}, {"sha": "e6dcc45c4542900af8894f7cccf67ad72f0c8ce0", "filename": "src/rustdoc/prune_undoc_details_pass.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_undoc_details_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_undoc_details_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fprune_undoc_details_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -16,7 +16,7 @@ fn run(\n         fold_res: fold_res,\n         fold_iface: fold_iface,\n         fold_impl: fold_impl\n-        with *fold::default_seq_fold(())\n+        with *fold::default_par_fold(())\n     });\n     fold.fold_crate(fold, doc)\n }"}, {"sha": "341527c540af446b0f346c6cd3dedfaf22fcb2b9", "filename": "src/rustdoc/prune_undoc_items_pass.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_undoc_items_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_undoc_items_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fprune_undoc_items_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -26,7 +26,7 @@ fn run(\n         fold_iface: fold_iface,\n         fold_impl: fold_impl,\n         fold_type: fold_type\n-        with *fold::default_seq_fold(ctxt)\n+        with *fold::default_par_fold(ctxt)\n     });\n     fold.fold_crate(fold, doc)\n }\n@@ -105,7 +105,7 @@ fn fold_mod(\n               _ { some(itemtag) }\n             }\n         }\n-        with fold::default_seq_fold_mod(fold, doc)\n+        with fold::default_par_fold_mod(fold, doc)\n     };\n     fold.ctxt.have_docs =\n         doc.brief() != none"}, {"sha": "577f44e464d979e3cd7e26008c56d998b3d7627f", "filename": "src/rustdoc/prune_unexported_pass.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_unexported_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fprune_unexported_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fprune_unexported_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -13,13 +13,13 @@ fn mk_pass() -> pass {\n fn run(srv: astsrv::srv, doc: doc::cratedoc) -> doc::cratedoc {\n     let fold = fold::fold({\n         fold_mod: fold_mod\n-        with *fold::default_seq_fold(srv)\n+        with *fold::default_par_fold(srv)\n     });\n     fold.fold_crate(fold, doc)\n }\n \n fn fold_mod(fold: fold::fold<astsrv::srv>, doc: doc::moddoc) -> doc::moddoc {\n-    let doc = fold::default_seq_fold_mod(fold, doc);\n+    let doc = fold::default_par_fold_mod(fold, doc);\n     {\n         items: ~exported_items(fold.ctxt, doc)\n         with doc"}, {"sha": "544d8b4c9195abdd30a06b083426ec41560c28b8", "filename": "src/rustdoc/reexport_pass.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Freexport_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Freexport_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Freexport_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -102,6 +102,7 @@ fn build_reexport_def_map(\n         def_map: common::new_def_hash()\n     };\n \n+    // FIXME: Do a parallel fold\n     let fold = fold::fold({\n         fold_mod: fold_mod\n         with *fold::default_seq_fold(ctxt)"}, {"sha": "28b97191c41637d545dbb7f4edb322ff0a7389bc", "filename": "src/rustdoc/sort_pass.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fsort_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Fsort_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fsort_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -19,7 +19,7 @@ fn run(\n ) -> doc::cratedoc {\n     let fold = fold::fold({\n         fold_mod: fold_mod\n-        with *fold::default_seq_fold(lteq)\n+        with *fold::default_par_fold(lteq)\n     });\n     fold.fold_crate(fold, doc)\n }\n@@ -28,7 +28,7 @@ fn fold_mod(\n     fold: fold::fold<item_lteq>,\n     doc: doc::moddoc\n ) -> doc::moddoc {\n-    let doc = fold::default_seq_fold_mod(fold, doc);\n+    let doc = fold::default_par_fold_mod(fold, doc);\n     {\n         items: ~sort::merge_sort(fold.ctxt, *doc.items)\n         with doc"}, {"sha": "f2e531fd285325c0ee8a8995c70266ce4781e952", "filename": "src/rustdoc/tystr_pass.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Ftystr_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1ee139ae1f61309fee44b37034ee1f2a42aba8f1/src%2Frustdoc%2Ftystr_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Ftystr_pass.rs?ref=1ee139ae1f61309fee44b37034ee1f2a42aba8f1", "patch": "@@ -23,7 +23,7 @@ fn run(\n         fold_iface: fold_iface,\n         fold_impl: fold_impl,\n         fold_type: fold_type\n-        with *fold::default_seq_fold(srv)\n+        with *fold::default_par_fold(srv)\n     });\n     fold.fold_crate(fold, doc)\n }"}]}