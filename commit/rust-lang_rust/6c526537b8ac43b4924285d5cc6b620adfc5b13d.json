{"sha": "6c526537b8ac43b4924285d5cc6b620adfc5b13d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjNTI2NTM3YjhhYzQzYjQ5MjQyODVkNWNjNmI2MjBhZGZjNWIxM2Q=", "commit": {"author": {"name": "Hideki Sekine", "email": "sekineh@me.com", "date": "2018-08-08T10:17:00Z"}, "committer": {"name": "Hideki Sekine", "email": "sekineh@me.com", "date": "2018-08-08T10:17:00Z"}, "message": "[CI] run-make/thumb: support 4 thumb*-none-eabi* targets:\n- thumbv6m-none-eabi (Bare Cortex-M0, M0+, M1)\n- thumbv7em-none-eabi (Bare Cortex-M4, M7)\n- thumbv7em-none-eabihf (Bare Cortex-M4F, M7F, FPU, hardfloat)\n- thumbv7m-none-eabi (Bare Cortex-M3)", "tree": {"sha": "c298dfba706b0f0eb6382c22c7ae6c4e77edb90e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c298dfba706b0f0eb6382c22c7ae6c4e77edb90e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c526537b8ac43b4924285d5cc6b620adfc5b13d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c526537b8ac43b4924285d5cc6b620adfc5b13d", "html_url": "https://github.com/rust-lang/rust/commit/6c526537b8ac43b4924285d5cc6b620adfc5b13d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c526537b8ac43b4924285d5cc6b620adfc5b13d/comments", "author": {"login": "sekineh", "id": 3956266, "node_id": "MDQ6VXNlcjM5NTYyNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3956266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sekineh", "html_url": "https://github.com/sekineh", "followers_url": "https://api.github.com/users/sekineh/followers", "following_url": "https://api.github.com/users/sekineh/following{/other_user}", "gists_url": "https://api.github.com/users/sekineh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sekineh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sekineh/subscriptions", "organizations_url": "https://api.github.com/users/sekineh/orgs", "repos_url": "https://api.github.com/users/sekineh/repos", "events_url": "https://api.github.com/users/sekineh/events{/privacy}", "received_events_url": "https://api.github.com/users/sekineh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sekineh", "id": 3956266, "node_id": "MDQ6VXNlcjM5NTYyNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/3956266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sekineh", "html_url": "https://github.com/sekineh", "followers_url": "https://api.github.com/users/sekineh/followers", "following_url": "https://api.github.com/users/sekineh/following{/other_user}", "gists_url": "https://api.github.com/users/sekineh/gists{/gist_id}", "starred_url": "https://api.github.com/users/sekineh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sekineh/subscriptions", "organizations_url": "https://api.github.com/users/sekineh/orgs", "repos_url": "https://api.github.com/users/sekineh/repos", "events_url": "https://api.github.com/users/sekineh/events{/privacy}", "received_events_url": "https://api.github.com/users/sekineh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bbbe4417d00d7a6a9384a648ce016c94fe96bb5c", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbbe4417d00d7a6a9384a648ce016c94fe96bb5c", "html_url": "https://github.com/rust-lang/rust/commit/bbbe4417d00d7a6a9384a648ce016c94fe96bb5c"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "a049fc5fb3fa564a6a86dc6d90694abbdbce495d", "filename": "src/test/run-make/thumb-none-cortex-m/Makefile", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6c526537b8ac43b4924285d5cc6b620adfc5b13d/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/6c526537b8ac43b4924285d5cc6b620adfc5b13d/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fthumb-none-cortex-m%2FMakefile?ref=6c526537b8ac43b4924285d5cc6b620adfc5b13d", "patch": "@@ -1,9 +1,17 @@\n -include ../../run-make-fulldeps/tools.mk\n \n # How to run this\n-# $ ./x.py test --target thumbv7m-none-eabi src/test/run-make\n+# $ ./x.py clean\n+# $ ./x.py test --target thumbv6m-none-eabi,thumbv7m-none-eabi src/test/run-make\n \n-ifeq ($(TARGET),thumbv7m-none-eabi)\n+# Supported targets:\n+# - thumbv6m-none-eabi (Bare Cortex-M0, M0+, M1)\n+# - thumbv7em-none-eabi (Bare Cortex-M4, M7)\n+# - thumbv7em-none-eabihf (Bare Cortex-M4F, M7F, FPU, hardfloat)\n+# - thumbv7m-none-eabi (Bare Cortex-M3)\n+\n+# See https://stackoverflow.com/questions/7656425/makefile-ifeq-logical-or\n+ifneq (,$(filter $(TARGET),thumbv6m-none-eabi thumbv7em-none-eabi thumbv7em-none-eabihf thumbv7m-none-eabi))\n \n # We need to be outside of 'src' dir in order to run cargo\n WORK_DIR := $(RUST_TEST_TMPDIR)/run-make/$(TARGET)"}]}