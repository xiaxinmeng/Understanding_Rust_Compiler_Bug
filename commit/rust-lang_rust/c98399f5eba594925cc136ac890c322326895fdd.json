{"sha": "c98399f5eba594925cc136ac890c322326895fdd", "node_id": "C_kwDOAAsO6NoAKGM5ODM5OWY1ZWJhNTk0OTI1Y2MxMzZhYzg5MGMzMjIzMjY4OTVmZGQ", "commit": {"author": {"name": "Le\u00f3n Orell Valerian Liehr", "email": "liehr.exchange@gmx.net", "date": "2022-07-22T00:28:03Z"}, "committer": {"name": "Le\u00f3n Orell Valerian Liehr", "email": "liehr.exchange@gmx.net", "date": "2022-07-22T02:55:31Z"}, "message": "Don't suggest unnameable generic arguments", "tree": {"sha": "ec89a74b408dc4a9b1150bd6ca069295b92d5611", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec89a74b408dc4a9b1150bd6ca069295b92d5611"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c98399f5eba594925cc136ac890c322326895fdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c98399f5eba594925cc136ac890c322326895fdd", "html_url": "https://github.com/rust-lang/rust/commit/c98399f5eba594925cc136ac890c322326895fdd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c98399f5eba594925cc136ac890c322326895fdd/comments", "author": {"login": "fmease", "id": 14913065, "node_id": "MDQ6VXNlcjE0OTEzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/14913065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmease", "html_url": "https://github.com/fmease", "followers_url": "https://api.github.com/users/fmease/followers", "following_url": "https://api.github.com/users/fmease/following{/other_user}", "gists_url": "https://api.github.com/users/fmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmease/subscriptions", "organizations_url": "https://api.github.com/users/fmease/orgs", "repos_url": "https://api.github.com/users/fmease/repos", "events_url": "https://api.github.com/users/fmease/events{/privacy}", "received_events_url": "https://api.github.com/users/fmease/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fmease", "id": 14913065, "node_id": "MDQ6VXNlcjE0OTEzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/14913065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmease", "html_url": "https://github.com/fmease", "followers_url": "https://api.github.com/users/fmease/followers", "following_url": "https://api.github.com/users/fmease/following{/other_user}", "gists_url": "https://api.github.com/users/fmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmease/subscriptions", "organizations_url": "https://api.github.com/users/fmease/orgs", "repos_url": "https://api.github.com/users/fmease/repos", "events_url": "https://api.github.com/users/fmease/events{/privacy}", "received_events_url": "https://api.github.com/users/fmease/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af7ab3447079fddc51c6c7749b160d24769f7c16", "url": "https://api.github.com/repos/rust-lang/rust/commits/af7ab3447079fddc51c6c7749b160d24769f7c16", "html_url": "https://github.com/rust-lang/rust/commit/af7ab3447079fddc51c6c7749b160d24769f7c16"}], "stats": {"total": 112, "additions": 90, "deletions": 22}, "files": [{"sha": "561d1354edd21bcbf393e49179de37a2ead48aae", "filename": "compiler/rustc_infer/src/infer/error_reporting/need_type_info.rs", "status": "modified", "additions": 35, "deletions": 6, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -1,4 +1,4 @@\n-use crate::infer::type_variable::TypeVariableOriginKind;\n+use crate::infer::type_variable::{TypeVariableOrigin, TypeVariableOriginKind};\n use crate::infer::InferCtxt;\n use rustc_errors::{pluralize, struct_span_err, Applicability, DiagnosticBuilder, ErrorGuaranteed};\n use rustc_hir as hir;\n@@ -8,12 +8,12 @@ use rustc_hir::def_id::DefId;\n use rustc_hir::intravisit::{self, Visitor};\n use rustc_hir::{Body, Closure, Expr, ExprKind, FnRetTy, HirId, Local, LocalSource};\n use rustc_middle::hir::nested_filter;\n-use rustc_middle::infer::unify_key::ConstVariableOriginKind;\n+use rustc_middle::infer::unify_key::{ConstVariableOrigin, ConstVariableOriginKind};\n use rustc_middle::ty::adjustment::{Adjust, Adjustment, AutoBorrow, AutoBorrowMutability};\n use rustc_middle::ty::print::{FmtPrinter, PrettyPrinter, Print, Printer};\n use rustc_middle::ty::subst::{GenericArg, GenericArgKind, Subst, SubstsRef};\n use rustc_middle::ty::{self, DefIdTree, InferConst};\n-use rustc_middle::ty::{Ty, TyCtxt, TypeckResults};\n+use rustc_middle::ty::{IsSuggestable, Ty, TyCtxt, TypeckResults};\n use rustc_span::symbol::{kw, Ident};\n use rustc_span::{BytePos, Span};\n use std::borrow::Cow;\n@@ -407,11 +407,40 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n \n                 err.span_label(span, cannot_infer_msg);\n \n-                let printer = fmt_printer(self, Namespace::TypeNS);\n-                let args = printer.comma_sep(generic_args.iter().copied()).unwrap().into_buffer();\n+                let args = fmt_printer(self, Namespace::TypeNS)\n+                    .comma_sep(generic_args.iter().copied().map(|arg| {\n+                        if arg.is_suggestable(self.tcx, true) {\n+                            return arg;\n+                        }\n+\n+                        match arg.unpack() {\n+                            GenericArgKind::Lifetime(_) => bug!(\"unexpected lifetime\"),\n+                            GenericArgKind::Type(_) => self\n+                                .next_ty_var(TypeVariableOrigin {\n+                                    span: rustc_span::DUMMY_SP,\n+                                    kind: TypeVariableOriginKind::MiscVariable,\n+                                })\n+                                .into(),\n+                            GenericArgKind::Const(arg) => self\n+                                .next_const_var(\n+                                    arg.ty(),\n+                                    ConstVariableOrigin {\n+                                        span: rustc_span::DUMMY_SP,\n+                                        kind: ConstVariableOriginKind::MiscVariable,\n+                                    },\n+                                )\n+                                .into(),\n+                        }\n+                    }))\n+                    .unwrap()\n+                    .into_buffer();\n+\n                 err.span_suggestion_verbose(\n                     insert_span,\n-                    &format!(\"consider specifying the generic argument{}\", pluralize!(args.len()),),\n+                    &format!(\n+                        \"consider specifying the generic argument{}\",\n+                        pluralize!(generic_args.len()),\n+                    ),\n                     format!(\"::<{}>\", args),\n                     Applicability::HasPlaceholders,\n                 );"}, {"sha": "dd2f43210603abb6c0e13a1fe88bbd7489ed0541", "filename": "compiler/rustc_middle/src/ty/diagnostics.rs", "status": "modified", "additions": 13, "deletions": 5, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_middle%2Fsrc%2Fty%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_middle%2Fsrc%2Fty%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fdiagnostics.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -3,7 +3,7 @@\n use std::ops::ControlFlow;\n \n use crate::ty::{\n-    visit::TypeVisitable, Const, ConstKind, DefIdTree, ExistentialPredicate, InferTy,\n+    visit::TypeVisitable, Const, ConstKind, DefIdTree, ExistentialPredicate, InferConst, InferTy,\n     PolyTraitPredicate, Ty, TyCtxt, TypeSuperVisitable, TypeVisitor,\n };\n \n@@ -82,15 +82,18 @@ pub trait IsSuggestable<'tcx> {\n     /// meaningful rendered suggestions when pretty-printed. We leave some\n     /// nonsense, such as region vars, since those render as `'_` and are\n     /// usually okay to reinterpret as elided lifetimes.\n-    fn is_suggestable(self, tcx: TyCtxt<'tcx>) -> bool;\n+    ///\n+    /// Only if `infer_suggestable` is true, we consider type and const\n+    /// inference variables to be suggestable.\n+    fn is_suggestable(self, tcx: TyCtxt<'tcx>, infer_suggestable: bool) -> bool;\n }\n \n impl<'tcx, T> IsSuggestable<'tcx> for T\n where\n     T: TypeVisitable<'tcx>,\n {\n-    fn is_suggestable(self, tcx: TyCtxt<'tcx>) -> bool {\n-        self.visit_with(&mut IsSuggestableVisitor { tcx }).is_continue()\n+    fn is_suggestable(self, tcx: TyCtxt<'tcx>, infer_suggestable: bool) -> bool {\n+        self.visit_with(&mut IsSuggestableVisitor { tcx, infer_suggestable }).is_continue()\n     }\n }\n \n@@ -100,7 +103,7 @@ pub fn suggest_arbitrary_trait_bound<'tcx>(\n     err: &mut Diagnostic,\n     trait_pred: PolyTraitPredicate<'tcx>,\n ) -> bool {\n-    if !trait_pred.is_suggestable(tcx) {\n+    if !trait_pred.is_suggestable(tcx, false) {\n         return false;\n     }\n \n@@ -419,13 +422,16 @@ impl<'v> hir::intravisit::Visitor<'v> for StaticLifetimeVisitor<'v> {\n \n pub struct IsSuggestableVisitor<'tcx> {\n     tcx: TyCtxt<'tcx>,\n+    infer_suggestable: bool,\n }\n \n impl<'tcx> TypeVisitor<'tcx> for IsSuggestableVisitor<'tcx> {\n     type BreakTy = ();\n \n     fn visit_ty(&mut self, t: Ty<'tcx>) -> ControlFlow<Self::BreakTy> {\n         match t.kind() {\n+            Infer(InferTy::TyVar(_)) if self.infer_suggestable => {}\n+\n             FnDef(..)\n             | Closure(..)\n             | Infer(..)\n@@ -479,6 +485,8 @@ impl<'tcx> TypeVisitor<'tcx> for IsSuggestableVisitor<'tcx> {\n \n     fn visit_const(&mut self, c: Const<'tcx>) -> ControlFlow<Self::BreakTy> {\n         match c.kind() {\n+            ConstKind::Infer(InferConst::Var(_)) if self.infer_suggestable => {}\n+\n             ConstKind::Infer(..)\n             | ConstKind::Bound(..)\n             | ConstKind::Placeholder(..)"}, {"sha": "7ab85e7fa663e82eb845ba1e8104d0602f27af3b", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -378,7 +378,7 @@ fn suggest_restriction<'tcx>(\n             replace_ty: ty::ParamTy::new(generics.count() as u32, Symbol::intern(&type_param_name))\n                 .to_ty(tcx),\n         });\n-        if !trait_pred.is_suggestable(tcx) {\n+        if !trait_pred.is_suggestable(tcx, false) {\n             return;\n         }\n         // We know we have an `impl Trait` that doesn't satisfy a required projection.\n@@ -417,7 +417,7 @@ fn suggest_restriction<'tcx>(\n             Applicability::MaybeIncorrect,\n         );\n     } else {\n-        if !trait_pred.is_suggestable(tcx) {\n+        if !trait_pred.is_suggestable(tcx, false) {\n             return;\n         }\n         // Trivial case: `T` needs an extra bound: `T: Bound`.\n@@ -586,7 +586,7 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n                     // else in the predicate.\n                     if !trait_pred.skip_binder().trait_ref.substs[1..]\n                         .iter()\n-                        .all(|g| g.is_suggestable(self.tcx))\n+                        .all(|g| g.is_suggestable(self.tcx, false))\n                     {\n                         return;\n                     }"}, {"sha": "40aa27a29e957ce0955a64a020cce48281cd7ce0", "filename": "compiler/rustc_typeck/src/astconv/generics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fgenerics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fgenerics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fgenerics.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -86,7 +86,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                         let param_type = tcx.infer_ctxt().enter(|infcx| {\n                             infcx.resolve_numeric_literals_with_default(tcx.type_of(param.def_id))\n                         });\n-                        if param_type.is_suggestable(tcx) {\n+                        if param_type.is_suggestable(tcx, false) {\n                             err.span_suggestion(\n                                 tcx.def_span(src_def_id),\n                                 \"consider changing this type parameter to be a `const` generic\","}, {"sha": "7111812f0b090aadb68bcf303225ace290c6ec3d", "filename": "compiler/rustc_typeck/src/astconv/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fastconv%2Fmod.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -2676,7 +2676,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                     span,\n                     ty,\n                     opt_sugg: Some((span, Applicability::MachineApplicable))\n-                        .filter(|_| ty.is_suggestable(tcx)),\n+                        .filter(|_| ty.is_suggestable(tcx, false)),\n                 });\n \n                 ty"}, {"sha": "84d2878308a1016ffb948359b2e11bcaccb0dddb", "filename": "compiler/rustc_typeck/src/check/fn_ctxt/checks.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fchecks.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -1070,7 +1070,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     let (_, expected_ty) = formal_and_expected_inputs[expected_idx];\n                     if expected_ty.is_unit() {\n                         \"()\".to_string()\n-                    } else if expected_ty.is_suggestable(tcx) {\n+                    } else if expected_ty.is_suggestable(tcx, false) {\n                         format!(\"/* {} */\", expected_ty)\n                     } else {\n                         \"/* value */\".to_string()"}, {"sha": "b8311832b84707725d87aba4fd1e7ebd6553ace8", "filename": "compiler/rustc_typeck/src/check/fn_ctxt/suggestions.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Ffn_ctxt%2Fsuggestions.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -507,7 +507,12 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             self.resolve_numeric_literals_with_default(self.resolve_vars_if_possible(found));\n         // Only suggest changing the return type for methods that\n         // haven't set a return type at all (and aren't `fn main()` or an impl).\n-        match (&fn_decl.output, found.is_suggestable(self.tcx), can_suggest, expected.is_unit()) {\n+        match (\n+            &fn_decl.output,\n+            found.is_suggestable(self.tcx, false),\n+            can_suggest,\n+            expected.is_unit(),\n+        ) {\n             (&hir::FnRetTy::DefaultReturn(span), true, true, true) => {\n                 err.subdiagnostic(AddReturnTypeSuggestion::Add { span, found });\n                 true"}, {"sha": "c303905652d52eb964371652f67c10a6c34b8313", "filename": "compiler/rustc_typeck/src/collect.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -1929,7 +1929,7 @@ fn infer_return_ty_for_fn_sig<'tcx>(\n             visitor.visit_ty(ty);\n             let mut diag = bad_placeholder(tcx, visitor.0, \"return type\");\n             let ret_ty = fn_sig.skip_binder().output();\n-            if ret_ty.is_suggestable(tcx) {\n+            if ret_ty.is_suggestable(tcx, false) {\n                 diag.span_suggestion(\n                     ty.span,\n                     \"replace with the correct return type\",\n@@ -1938,7 +1938,12 @@ fn infer_return_ty_for_fn_sig<'tcx>(\n                 );\n             } else if matches!(ret_ty.kind(), ty::FnDef(..)) {\n                 let fn_sig = ret_ty.fn_sig(tcx);\n-                if fn_sig.skip_binder().inputs_and_output.iter().all(|t| t.is_suggestable(tcx)) {\n+                if fn_sig\n+                    .skip_binder()\n+                    .inputs_and_output\n+                    .iter()\n+                    .all(|t| t.is_suggestable(tcx, false))\n+                {\n                     diag.span_suggestion(\n                         ty.span,\n                         \"replace with the correct return type\","}, {"sha": "3a30d2ee0349934f7b344f2b705048eaff5d7b96", "filename": "src/test/ui/closures/issue-99565.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.rs?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -0,0 +1,7 @@\n+#![crate_type = \"lib\"]\n+\n+fn foo<T, U>(_: U) {}\n+\n+fn bar() {\n+    foo(|| {}); //~ ERROR type annotations needed\n+}"}, {"sha": "0d940aa9a2f5f623a6a3b03bf3fd7d079b6e525e", "filename": "src/test/ui/closures/issue-99565.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosures%2Fissue-99565.stderr?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -0,0 +1,14 @@\n+error[E0282]: type annotations needed\n+  --> $DIR/issue-99565.rs:6:5\n+   |\n+LL |     foo(|| {});\n+   |     ^^^ cannot infer type of the type parameter `T` declared on the function `foo`\n+   |\n+help: consider specifying the generic arguments\n+   |\n+LL |     foo::<T, _>(|| {});\n+   |        ++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0282`."}, {"sha": "6592b76a39f7ad7c86412bb0094b052f0e786280", "filename": "src/test/ui/issues/issue-23041.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fissues%2Fissue-23041.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fissues%2Fissue-23041.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-23041.stderr?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -4,7 +4,7 @@ error[E0282]: type annotations needed\n LL |     b.downcast_ref::<fn(_)->_>();\n    |       ^^^^^^^^^^^^ cannot infer type of the type parameter `T` declared on the associated function `downcast_ref`\n    |\n-help: consider specifying the generic arguments\n+help: consider specifying the generic argument\n    |\n LL |     b.downcast_ref::<fn(_) -> _>();\n    |                   ~~~~~~~~~~~~~~"}, {"sha": "995dce552e37fcda571db2caadf165f73a5c63fe", "filename": "src/test/ui/issues/issue-24013.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fissues%2Fissue-24013.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c98399f5eba594925cc136ac890c322326895fdd/src%2Ftest%2Fui%2Fissues%2Fissue-24013.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-24013.stderr?ref=c98399f5eba594925cc136ac890c322326895fdd", "patch": "@@ -4,7 +4,7 @@ error[E0282]: type annotations needed\n LL |     unsafe {swap::<&mut _>(transmute(&a), transmute(&b))};\n    |             ^^^^^^^^^^^^^^ cannot infer type of the type parameter `T` declared on the function `swap`\n    |\n-help: consider specifying the generic arguments\n+help: consider specifying the generic argument\n    |\n LL |     unsafe {swap::<&mut _>(transmute(&a), transmute(&b))};\n    |                 ~~~~~~~~~~"}]}