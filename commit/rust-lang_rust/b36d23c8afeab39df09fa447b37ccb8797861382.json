{"sha": "b36d23c8afeab39df09fa447b37ccb8797861382", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzNmQyM2M4YWZlYWIzOWRmMDlmYTQ0N2IzN2NjYjg3OTc4NjEzODI=", "commit": {"author": {"name": "est31", "email": "MTest31@outlook.com", "date": "2017-05-12T07:53:58Z"}, "committer": {"name": "est31", "email": "MTest31@outlook.com", "date": "2017-05-13T14:02:29Z"}, "message": "Add test, and fix the other tests", "tree": {"sha": "fe218646b2c19ec8581eb323cb91d21b80351559", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fe218646b2c19ec8581eb323cb91d21b80351559"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b36d23c8afeab39df09fa447b37ccb8797861382", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b36d23c8afeab39df09fa447b37ccb8797861382", "html_url": "https://github.com/rust-lang/rust/commit/b36d23c8afeab39df09fa447b37ccb8797861382", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b36d23c8afeab39df09fa447b37ccb8797861382/comments", "author": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba0601d4b6b3a84cb7e8c2781b71491c17abb910", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba0601d4b6b3a84cb7e8c2781b71491c17abb910", "html_url": "https://github.com/rust-lang/rust/commit/ba0601d4b6b3a84cb7e8c2781b71491c17abb910"}], "stats": {"total": 69, "additions": 69, "deletions": 0}, "files": [{"sha": "ddd8631f02e62b4c0f4974539847f41b7afadb9a", "filename": "src/test/compile-fail-fulldeps/proc-macro/resolve-error.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail-fulldeps%2Fproc-macro%2Fresolve-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail-fulldeps%2Fproc-macro%2Fresolve-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fproc-macro%2Fresolve-error.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -14,6 +14,7 @@\n // aux-build:bang_proc_macro.rs\n \n #![feature(proc_macro)]\n+#![allow(unused_macros)]\n \n #[macro_use]\n extern crate derive_foo;"}, {"sha": "9af501b141955f97d777a210afcf40c1e0a4914e", "filename": "src/test/compile-fail/feature-gate-allow-internal-unstable-nested-macro.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable-nested-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable-nested-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable-nested-macro.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -10,6 +10,8 @@\n \n // gate-test-allow_internal_unstable\n \n+#![allow(unused_macros)]\n+\n macro_rules! bar {\n     () => {\n         // more layers don't help:"}, {"sha": "61a362cb37fb2c0d8d674447ba9af2b348bcf586", "filename": "src/test/compile-fail/feature-gate-allow-internal-unstable.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-allow-internal-unstable.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n #[allow_internal_unstable] //~ ERROR allow_internal_unstable side-steps\n macro_rules! foo {\n     () => {}"}, {"sha": "d710f5647dd9f97591f57c0740993bc551b3e4c7", "filename": "src/test/compile-fail/invalid-macro-matcher.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Finvalid-macro-matcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Finvalid-macro-matcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Finvalid-macro-matcher.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! invalid {\n     _ => (); //~ ERROR invalid macro matcher\n }"}, {"sha": "f66c09291cc9e4b74539de7bde5193c9f7310225", "filename": "src/test/compile-fail/issue-21356.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-21356.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-21356.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-21356.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! test { ($wrong:t_ty ..) => () }\n                   //~^ ERROR: invalid fragment specifier `t_ty`\n "}, {"sha": "15eef429eab974667e3ea77daaada669acb10ccc", "filename": "src/test/compile-fail/issue-39388.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-39388.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-39388.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-39388.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! assign {\n     (($($a:tt)*) = ($($b:tt))*) => { //~ ERROR expected `*` or `+`\n         $($a)* = $($b)*"}, {"sha": "8b49772494a6687e1f34a106ec6bb5ab4ed87b91", "filename": "src/test/compile-fail/issue-39404.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-39404.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-39404.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-39404.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n #![deny(missing_fragment_specifier)] //~ NOTE lint level defined here\n+#![allow(unused_macros)]\n \n macro_rules! m { ($i) => {} }\n //~^ ERROR missing fragment specifier"}, {"sha": "267362f902d720faeed69655bb5cc382215bd4db", "filename": "src/test/compile-fail/issue-5067.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-5067.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fissue-5067.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-5067.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! foo {\n     ( $()* ) => {};\n     //~^ ERROR repetition matches empty token tree"}, {"sha": "06f2d86e5d9bae93be3b5e23dbeea9ba5d34aaa8", "filename": "src/test/compile-fail/macro-expansion-tests.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-expansion-tests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-expansion-tests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-expansion-tests.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n mod macros_cant_escape_fns {\n     fn f() {\n         macro_rules! m { () => { 3 + 4 } }"}, {"sha": "6e80e9b574bcfae9c3932c8551a2cecc5e621ad9", "filename": "src/test/compile-fail/macro-follow.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -10,6 +10,8 @@\n //\n // Check the macro follow sets (see corresponding rpass test).\n \n+#![allow(unused_macros)]\n+\n // FOLLOW(pat) = {FatArrow, Comma, Eq, Or, Ident(if), Ident(in)}\n macro_rules! follow_pat {\n     ($p:pat ()) => {};       //~ERROR  `$p:pat` is followed by `(`"}, {"sha": "21cc946ded60563a48b5fa7ab8f713a841c23d98", "filename": "src/test/compile-fail/macro-followed-by-seq-bad.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-followed-by-seq-bad.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-followed-by-seq-bad.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-followed-by-seq-bad.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -11,6 +11,8 @@\n // Regression test for issue #25436: check that things which can be\n // followed by any token also permit X* to come afterwards.\n \n+#![allow(unused_macros)]\n+\n macro_rules! foo {\n   ( $a:expr $($b:tt)* ) => { }; //~ ERROR not allowed for `expr` fragments\n   ( $a:ty $($b:tt)* ) => { };   //~ ERROR not allowed for `ty` fragments"}, {"sha": "e5fdba63b0f152859c0a1f82614d57515b10716f", "filename": "src/test/compile-fail/macro-input-future-proofing.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-input-future-proofing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-input-future-proofing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-input-future-proofing.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! errors_everywhere {\n     ($ty:ty <) => (); //~ ERROR `$ty:ty` is followed by `<`, which is not allowed for `ty`\n     ($ty:ty < foo ,) => (); //~ ERROR `$ty:ty` is followed by `<`, which is not allowed for `ty`"}, {"sha": "f5e7305e4ea9e61ba37d0429cfe9a1f5e58d4ca5", "filename": "src/test/compile-fail/macro-shadowing.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-shadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fmacro-shadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-shadowing.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -10,6 +10,8 @@\n \n // aux-build:two_macros.rs\n \n+#![allow(unused_macros)]\n+\n macro_rules! foo { () => {} }\n macro_rules! macro_one { () => {} }\n #[macro_use(macro_two)] extern crate two_macros;"}, {"sha": "28a69e6f9e29beb5f900c78dbac33655681e0a95", "filename": "src/test/compile-fail/unused-macro-with-bad-frag-spec.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro-with-bad-frag-spec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro-with-bad-frag-spec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funused-macro-with-bad-frag-spec.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n // Issue #21370\n \n macro_rules! test {"}, {"sha": "dda0d3fc9557dd79afd0b0e895691892a816af06", "filename": "src/test/compile-fail/unused-macro-with-follow-violation.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro-with-follow-violation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro-with-follow-violation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funused-macro-with-follow-violation.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! test {\n     ($e:expr +) => () //~ ERROR not allowed for `expr` fragments\n }"}, {"sha": "5e401c09bda597ea340caae3faea955efec496b8", "filename": "src/test/compile-fail/unused-macro.rs", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Funused-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funused-macro.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -0,0 +1,39 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![deny(unused_macros)]\n+\n+// Most simple case\n+macro_rules! unused { //~ ERROR: unused macro definition\n+    () => {};\n+}\n+\n+// Test macros created by macros\n+macro_rules! create_macro {\n+    () => {\n+        macro_rules! m { //~ ERROR: unused macro definition\n+            () => {};\n+        }\n+    };\n+}\n+create_macro!();\n+\n+#[allow(unused_macros)]\n+mod bar {\n+    // Test that putting the #[deny] close to the macro's definition\n+    // works.\n+\n+    #[deny(unused_macros)]\n+    macro_rules! unused { //~ ERROR: unused macro definition\n+        () => {};\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "02e1a585fa89d054d267c206ca636f4ff4f5c093", "filename": "src/test/compile-fail/user-defined-macro-rules.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fuser-defined-macro-rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36d23c8afeab39df09fa447b37ccb8797861382/src%2Ftest%2Fcompile-fail%2Fuser-defined-macro-rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fuser-defined-macro-rules.rs?ref=b36d23c8afeab39df09fa447b37ccb8797861382", "patch": "@@ -8,4 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![allow(unused_macros)]\n+\n macro_rules! macro_rules { () => {} } //~ ERROR user-defined macros may not be named `macro_rules`"}]}