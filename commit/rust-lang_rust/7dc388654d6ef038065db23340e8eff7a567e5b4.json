{"sha": "7dc388654d6ef038065db23340e8eff7a567e5b4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkYzM4ODY1NGQ2ZWYwMzgwNjVkYjIzMzQwZThlZmY3YTU2N2U1YjQ=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-07-12T09:45:04Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-07-12T09:46:42Z"}, "message": "adjust remaining targets", "tree": {"sha": "7ad0029db375a6c1839979b41aa90de3724e5e25", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ad0029db375a6c1839979b41aa90de3724e5e25"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7dc388654d6ef038065db23340e8eff7a567e5b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7dc388654d6ef038065db23340e8eff7a567e5b4", "html_url": "https://github.com/rust-lang/rust/commit/7dc388654d6ef038065db23340e8eff7a567e5b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7dc388654d6ef038065db23340e8eff7a567e5b4/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8082fb988a5915e693f18e6d299deaae64834079", "url": "https://api.github.com/repos/rust-lang/rust/commits/8082fb988a5915e693f18e6d299deaae64834079", "html_url": "https://github.com/rust-lang/rust/commit/8082fb988a5915e693f18e6d299deaae64834079"}], "stats": {"total": 46, "additions": 21, "deletions": 25}, "files": [{"sha": "f7dd2c8d00fd220b1f2fb688e8ea18225d81d59a", "filename": "src/libstd/sys/cloudabi/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -16,8 +16,8 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-#[path = \"../unix/thread_local.rs\"]\n-pub mod thread_local;\n+#[path = \"../unix/thread_local_key.rs\"]\n+pub mod thread_local_key;\n pub mod time;\n \n pub use crate::sys_common::os_str_bytes as os_str;"}, {"sha": "675b82ceb775f7b0a35c116cc54b2c39d0c93b90", "filename": "src/libstd/sys/hermit/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -22,7 +22,6 @@ pub mod cmath;\n pub mod condvar;\n pub mod env;\n pub mod ext;\n-pub mod fast_thread_local;\n pub mod fd;\n pub mod fs;\n pub mod io;\n@@ -37,7 +36,8 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-pub mod thread_local;\n+pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod time;\n \n use crate::io::ErrorKind;"}, {"sha": "9b683fce157488df8d26ee08184e278578e5c17b", "filename": "src/libstd/sys/hermit/thread_local_dtor.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_dtor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_dtor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_dtor.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "previous_filename": "src/libstd/sys/hermit/fast_thread_local.rs"}, {"sha": "bf1b49eb83b7e14ce8c046eb9c50aea20891a0c6", "filename": "src/libstd/sys/hermit/thread_local_key.rs", "status": "renamed", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_key.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_key.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fhermit%2Fthread_local_key.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -2,25 +2,25 @@ pub type Key = usize;\n \n #[inline]\n pub unsafe fn create(_dtor: Option<unsafe extern \"C\" fn(*mut u8)>) -> Key {\n-    panic!(\"should not be used on the wasm target\");\n+    panic!(\"should not be used on the hermit target\");\n }\n \n #[inline]\n pub unsafe fn set(_key: Key, _value: *mut u8) {\n-    panic!(\"should not be used on the wasm target\");\n+    panic!(\"should not be used on the hermit target\");\n }\n \n #[inline]\n pub unsafe fn get(_key: Key) -> *mut u8 {\n-    panic!(\"should not be used on the wasm target\");\n+    panic!(\"should not be used on the hermit target\");\n }\n \n #[inline]\n pub unsafe fn destroy(_key: Key) {\n-    panic!(\"should not be used on the wasm target\");\n+    panic!(\"should not be used on the hermit target\");\n }\n \n #[inline]\n pub fn requires_synchronized_create() -> bool {\n-    panic!(\"should not be used on the wasm target\");\n+    panic!(\"should not be used on the hermit target\");\n }", "previous_filename": "src/libstd/sys/wasm/thread_local.rs"}, {"sha": "a4968ff7d4f547982706100b690d0baaecfd9c1a", "filename": "src/libstd/sys/sgx/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -30,7 +30,7 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-pub mod thread_local;\n+pub mod thread_local_key;\n pub mod time;\n \n pub use crate::sys_common::os_str_bytes as os_str;"}, {"sha": "b21784475f0d2d020aa4f0eb14cff31d0b1f558c", "filename": "src/libstd/sys/sgx/thread_local_key.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fsgx%2Fthread_local_key.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fsgx%2Fthread_local_key.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fthread_local_key.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "previous_filename": "src/libstd/sys/sgx/thread_local.rs"}, {"sha": "eddf00d3979f509292f4cd5fe17a18fafc642918", "filename": "src/libstd/sys/unix/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -67,8 +67,8 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-pub mod thread_local_key;\n pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod time;\n \n pub use crate::sys_common::os_str_bytes as os_str;"}, {"sha": "1132a849e2f18b34965d8fe11a12c6bad83c2e71", "filename": "src/libstd/sys/vxworks/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -13,7 +13,6 @@ pub mod cmath;\n pub mod condvar;\n pub mod env;\n pub mod ext;\n-pub mod fast_thread_local;\n pub mod fd;\n pub mod fs;\n pub mod io;\n@@ -29,7 +28,8 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-pub mod thread_local;\n+pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod time;\n \n pub use crate::sys_common::os_str_bytes as os_str;"}, {"sha": "3f73f6c490326fb6d4e8c6c8fd94b55abdc36f08", "filename": "src/libstd/sys/vxworks/thread_local_dtor.rs", "status": "renamed", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_dtor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_dtor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_dtor.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -5,7 +5,3 @@ pub unsafe fn register_dtor(t: *mut u8, dtor: unsafe extern \"C\" fn(*mut u8)) {\n     use crate::sys_common::thread_local::register_dtor_fallback;\n     register_dtor_fallback(t, dtor);\n }\n-\n-pub fn requires_move_before_drop() -> bool {\n-    false\n-}", "previous_filename": "src/libstd/sys/vxworks/fast_thread_local.rs"}, {"sha": "2c5b94b1e61e5710717363d92396c6b5e1027305", "filename": "src/libstd/sys/vxworks/thread_local_key.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_key.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_key.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fvxworks%2Fthread_local_key.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "previous_filename": "src/libstd/sys/vxworks/thread_local.rs"}, {"sha": "85f5282034ff18ad85e6f4a7348714931e061167", "filename": "src/libstd/sys/wasi/mod.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasi%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -36,8 +36,6 @@ pub mod net;\n pub mod os;\n pub use crate::sys_common::os_str_bytes as os_str;\n pub mod ext;\n-#[path = \"../wasm/fast_thread_local.rs\"]\n-pub mod fast_thread_local;\n pub mod path;\n pub mod pipe;\n pub mod process;\n@@ -47,8 +45,10 @@ pub mod rwlock;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-#[path = \"../wasm/thread_local.rs\"]\n-pub mod thread_local;\n+#[path = \"../wasm/thread_local_dtor.rs\"]\n+pub mod thread_local_dtor;\n+#[path = \"../wasm/thread_local_key.rs\"]\n+pub mod thread_local_key;\n pub mod time;\n \n #[cfg(not(test))]"}, {"sha": "6939596e52d7835f825f1efc1c4fb387b190d8e0", "filename": "src/libstd/sys/wasm/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -20,7 +20,6 @@ pub mod alloc;\n pub mod args;\n pub mod cmath;\n pub mod env;\n-pub mod fast_thread_local;\n pub mod fs;\n pub mod io;\n pub mod memchr;\n@@ -32,7 +31,8 @@ pub mod process;\n pub mod stack_overflow;\n pub mod stdio;\n pub mod thread;\n-pub mod thread_local;\n+pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod time;\n \n pub use crate::sys_common::os_str_bytes as os_str;"}, {"sha": "85d660983029c830329066a7da06ae20962adb6b", "filename": "src/libstd/sys/wasm/thread_local_dtor.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_dtor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_dtor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_dtor.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "previous_filename": "src/libstd/sys/wasm/fast_thread_local.rs"}, {"sha": "f8be9863ed56f69713e88c98fdfd8b4a6037f2e6", "filename": "src/libstd/sys/wasm/thread_local_key.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_key.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_key.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fthread_local_key.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "previous_filename": "src/libstd/sys/hermit/thread_local.rs"}, {"sha": "9a52371280e159ffb2e0115f8af19086eb90570d", "filename": "src/libstd/sys/windows/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -34,8 +34,8 @@ pub mod process;\n pub mod rand;\n pub mod rwlock;\n pub mod thread;\n-pub mod thread_local_key;\n pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod time;\n cfg_if::cfg_if! {\n     if #[cfg(not(target_vendor = \"uwp\"))] {"}, {"sha": "e57bb267cbd0f3f33f505f3119ecf44b191a4f05", "filename": "src/libstd/sys_common/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys_common%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dc388654d6ef038065db23340e8eff7a567e5b4/src%2Flibstd%2Fsys_common%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Fmod.rs?ref=7dc388654d6ef038065db23340e8eff7a567e5b4", "patch": "@@ -65,8 +65,8 @@ pub mod remutex;\n pub mod rwlock;\n pub mod thread;\n pub mod thread_info;\n-pub mod thread_local_key;\n pub mod thread_local_dtor;\n+pub mod thread_local_key;\n pub mod util;\n pub mod wtf8;\n "}]}