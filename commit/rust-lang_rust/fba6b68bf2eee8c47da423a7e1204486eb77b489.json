{"sha": "fba6b68bf2eee8c47da423a7e1204486eb77b489", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiYTZiNjhiZjJlZWU4YzQ3ZGE0MjNhN2UxMjA0NDg2ZWI3N2I0ODk=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-07-09T20:34:04Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-07-09T20:34:04Z"}, "message": "Merge pull request #2836 from topecongiro/async-closure\n\nFormat async closure", "tree": {"sha": "5c798fc1369c19cf6742b328a0188ac96e0b7165", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c798fc1369c19cf6742b328a0188ac96e0b7165"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fba6b68bf2eee8c47da423a7e1204486eb77b489", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbQ8a8CRBK7hj4Ov3rIwAAdHIIAAJpSkEdzqYiGAJOCAykCg9z\nMikHG/arYqv5J1U3FocyfYtW2D1aIQ79RnyJ1E6adIndQIP7TCbN1u4hYz8ITpEs\nLISCEcufv3ukYsV8oTdmYgT3uxrwc4dO5MxMFbpC9ciyjZk3uBssRPwsb3m//9Wa\nj2MDX4+kJqFfgXYTBjKxIrHfumOqnq6MRYNm0wKQ0AuP5JoKCdxGwWfki9w7RjQv\njhHYZoOb6rYlijzQQlEhjCuMcXbzSFGKccmav8jfpp2YxP5rp4mqDbMB/MQNgClG\nIr2aQGsrs2LMrSuj+JqugxBsMFhtnsRkntNc9j5iSKiIR8l2Q3uxMo4bVCYD+RE=\n=SU0S\n-----END PGP SIGNATURE-----\n", "payload": "tree 5c798fc1369c19cf6742b328a0188ac96e0b7165\nparent 4bfd47caac731e3e706b8e8772367927a14dd84e\nparent 60ce411b5310c8af09de2d552e67b0593f3f1d4b\nauthor Nick Cameron <nrc@ncameron.org> 1531168444 +1200\ncommitter GitHub <noreply@github.com> 1531168444 +1200\n\nMerge pull request #2836 from topecongiro/async-closure\n\nFormat async closure"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fba6b68bf2eee8c47da423a7e1204486eb77b489", "html_url": "https://github.com/rust-lang/rust/commit/fba6b68bf2eee8c47da423a7e1204486eb77b489", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fba6b68bf2eee8c47da423a7e1204486eb77b489/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4bfd47caac731e3e706b8e8772367927a14dd84e", "url": "https://api.github.com/repos/rust-lang/rust/commits/4bfd47caac731e3e706b8e8772367927a14dd84e", "html_url": "https://github.com/rust-lang/rust/commit/4bfd47caac731e3e706b8e8772367927a14dd84e"}, {"sha": "60ce411b5310c8af09de2d552e67b0593f3f1d4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/60ce411b5310c8af09de2d552e67b0593f3f1d4b", "html_url": "https://github.com/rust-lang/rust/commit/60ce411b5310c8af09de2d552e67b0593f3f1d4b"}], "stats": {"total": 207, "additions": 134, "deletions": 73}, "files": [{"sha": "a64ca717680e8aa775fdc44a2920fd0054ca9881", "filename": "Cargo.lock", "status": "modified", "additions": 64, "deletions": 60, "changes": 124, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -70,13 +70,13 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"cargo_metadata\"\n-version = \"0.5.6\"\n+version = \"0.5.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"error-chain 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_derive 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_json 1.0.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -151,7 +151,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"dtoa\"\n-version = \"0.4.2\"\n+version = \"0.4.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -227,8 +227,11 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"getopts\"\n-version = \"0.2.17\"\n+version = \"0.2.18\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"unicode-width 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n \n [[package]]\n name = \"humantime\"\n@@ -258,7 +261,7 @@ dependencies = [\n \n [[package]]\n name = \"itoa\"\n-version = \"0.4.1\"\n+version = \"0.4.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -425,15 +428,15 @@ dependencies = [\n \n [[package]]\n name = \"rustc-ap-arena\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rustc-ap-rustc_data_structures 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-rustc_cratesio_shim\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -442,16 +445,16 @@ dependencies = [\n \n [[package]]\n name = \"rustc-ap-rustc_data_structures\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ena 0.9.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot_core 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_cratesio_shim 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_cratesio_shim 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-rayon 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-rayon-core 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -460,57 +463,57 @@ dependencies = [\n \n [[package]]\n name = \"rustc-ap-rustc_errors\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"atty 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_data_structures 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax_pos 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax_pos 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"termcolor 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-width 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-rustc_target\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_cratesio_shim 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_cratesio_shim 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-serialize\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"rustc-ap-syntax\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_data_structures 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_errors 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_target 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax_pos 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_errors 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_target 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax_pos 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"scoped-tls 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-syntax_pos\"\n-version = \"182.0.0\"\n+version = \"191.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-arena 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_data_structures 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-arena 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"scoped-tls 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-width 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -554,21 +557,22 @@ name = \"rustfmt-nightly\"\n version = \"0.8.2\"\n dependencies = [\n  \"assert_cli 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"cargo_metadata 0.5.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cargo_metadata 0.5.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"derive-new 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"env_logger 0.5.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"failure 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"getopts 0.2.18 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"isatty 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"itertools 0.7.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_target 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_derive 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_target 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax_pos 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_json 1.0.22 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"toml 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -591,7 +595,7 @@ version = \"0.9.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -601,27 +605,27 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"serde\"\n-version = \"1.0.68\"\n+version = \"1.0.70\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"serde_derive\"\n-version = \"1.0.68\"\n+version = \"1.0.70\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.14.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.14.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"serde_json\"\n version = \"1.0.22\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"itoa 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"dtoa 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"itoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -656,7 +660,7 @@ dependencies = [\n \n [[package]]\n name = \"syn\"\n-version = \"0.14.2\"\n+version = \"0.14.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"proc-macro2 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -722,7 +726,7 @@ name = \"toml\"\n version = \"0.4.6\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -804,7 +808,7 @@ dependencies = [\n \"checksum backtrace-sys 0.1.23 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bff67d0c06556c0b8e6b5f090f0eac52d950d9dfd1d35ba04e4ca3543eaf6a7e\"\n \"checksum bitflags 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d0c54bb8f454c567f21197eefcdbf5679d0bd99f2ddbe52e84c77061952e6789\"\n \"checksum byteorder 1.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"74c0b906e9446b0a2e4f760cdb3fa4b2c48cdc6db8766a845c54b6ff063fd2e9\"\n-\"checksum cargo_metadata 0.5.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"682476b87b3e22cd3820d86b26cd8603cd84ab76dce7547b2631858347aa8967\"\n+\"checksum cargo_metadata 0.5.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1efca0b863ca03ed4c109fb1c55e0bc4bbeb221d3e103d86251046b06a526bd0\"\n \"checksum cc 1.0.17 (registry+https://github.com/rust-lang/crates.io-index)\" = \"49ec142f5768efb5b7622aebc3fdbdbb8950a4b9ba996393cb76ef7466e8747d\"\n \"checksum cfg-if 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"efe5c877e17a9c717a0bf3613b2709f723202c4e4675cc8f12926ded29bcb17e\"\n \"checksum colored 1.6.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b0aa3473e85a3161b59845d6096b289bb577874cafeaf75ea1b1beaa6572c7fc\"\n@@ -814,7 +818,7 @@ dependencies = [\n \"checksum derive-new 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ceed73957c449214f8440eec8ad7fa282b67dc9eacbb24a3085b15d60397a17a\"\n \"checksum diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a\"\n \"checksum difference 2.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"524cbf6897b527295dff137cec09ecf3a05f4fddffd7dfcd1585403449e74198\"\n-\"checksum dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"09c3753c3db574d215cba4ea76018483895d7bff25a31b49ba45db21c48e50ab\"\n+\"checksum dtoa 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6d301140eb411af13d3115f9a562c85cc6b541ade9dfa314132244aaee7489dd\"\n \"checksum either 1.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3be565ca5c557d7f59e7cfcf1844f9e3033650c929c6566f511e8005f205c1d0\"\n \"checksum ena 0.9.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"88dc8393b3c7352f94092497f6b52019643e493b6b890eb417cdb7c46117e621\"\n \"checksum env_logger 0.5.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0e6e40ebb0e66918a37b38c7acab4e10d299e0463fe2af5d29b9cc86710cfd2a\"\n@@ -824,11 +828,11 @@ dependencies = [\n \"checksum failure_derive 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c7cdda555bb90c9bb67a3b670a0f42de8e73f5981524123ad8578aafec8ddb8b\"\n \"checksum fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82\"\n \"checksum fuchsia-zircon-sys 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3dcaa9ae7725d12cdb85b3ad99a434db70b468c09ded17e012d86b5c1010f7a7\"\n-\"checksum getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b900c08c1939860ce8b54dc6a89e26e00c04c380fd0e09796799bd7f12861e05\"\n+\"checksum getopts 0.2.18 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0a7292d30132fb5424b354f5dc02512a86e4c516fe544bb7a25e7f266951b797\"\n \"checksum humantime 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0484fda3e7007f2a4a0d9c3a703ca38c71c54c55602ce4660c419fd32e188c9e\"\n \"checksum isatty 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6c324313540cd4d7ba008d43dc6606a32a5579f13cc17b2804c13096f0a5c522\"\n \"checksum itertools 0.7.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f58856976b776fedd95533137617a02fb25719f40e7d9b01c7043cd65474f450\"\n-\"checksum itoa 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c069bbec61e1ca5a596166e55dfe4773ff745c3d16b700013bcaff9a6df2c682\"\n+\"checksum itoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5adb58558dcd1d786b5f0bd15f3226ee23486e24b7b58304b60f64dc68e62606\"\n \"checksum lazy_static 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"76f033c7ad61445c5b347c7382dd1237847eb1bce590fe50365dcb33d546be73\"\n \"checksum lazy_static 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e6412c5e2ad9584b0b8e979393122026cdd6d2a80b933f890dcd694ddbe73739\"\n \"checksum libc 0.2.42 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b685088df2b950fccadf07a7187c8ef846a959c142338a48f9dc0b94517eb5f1\"\n@@ -851,14 +855,14 @@ dependencies = [\n \"checksum redox_termios 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7e891cfe48e9100a70a3b6eb652fef28920c117d366339687bd5576160db0f76\"\n \"checksum regex 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"13c93d55961981ba9226a213b385216f83ab43bd6ac53ab16b2eeb47e337cf4e\"\n \"checksum regex-syntax 0.6.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"05b06a75f5217880fc5e905952a42750bf44787e56a6c6d6852ed0992f5e1d54\"\n-\"checksum rustc-ap-arena 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f7bd7aabbf60986181924ddad8c5bee830cf83213ed8553f715145d050e42d0c\"\n-\"checksum rustc-ap-rustc_cratesio_shim 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"e1bc122961e39834268cb45baf75995eaca376b78146efce962b27de71b3e8b7\"\n-\"checksum rustc-ap-rustc_data_structures 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d6c2ed8ee3a204499534a1ea22a8eb6c87c0c39dd139197d4a0f913b8e12a4c2\"\n-\"checksum rustc-ap-rustc_errors 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d35753d6c9159f49c74f800b0d00707db09863a7554679e1b701c7eeeb5a611c\"\n-\"checksum rustc-ap-rustc_target 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7f1b3da32f4862d4722e6f699e92ffa8b556166752fbdbbd64cc7d9ddd8db0e8\"\n-\"checksum rustc-ap-serialize 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"182579d9dc2e46e232de4cdd1a56ec352a55440a86e7389a6109dae73f2a392b\"\n-\"checksum rustc-ap-syntax 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c890882969e05d73cb97695a64e32b526830c7f197a708feb376e8684d16abb2\"\n-\"checksum rustc-ap-syntax_pos 182.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6c779602d2e364440d28f8cb3c1fa13dcf11a546b96c5eab2bc7554869e2aca4\"\n+\"checksum rustc-ap-arena 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ac09eeb00d395cee3af9003caa75acc86af4ce439a974367bdbbce7c07251601\"\n+\"checksum rustc-ap-rustc_cratesio_shim 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d30def195c3c9df7929503fcde7f1f80148ff7636c48fae427ed0da677d913c1\"\n+\"checksum rustc-ap-rustc_data_structures 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"861a89e5925b111d13cae3b567d31bb2a1708be680c411f1ebd1409c5037aa9e\"\n+\"checksum rustc-ap-rustc_errors 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"44ea2b1b250c1c50a1be81dda17463c93e1bcc20f6ff66a57b7b9c02944b5296\"\n+\"checksum rustc-ap-rustc_target 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1daa23f0876f770c05861f7bbe062ca7527e29b89332e594b14bde8e9c4ac1df\"\n+\"checksum rustc-ap-serialize 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"57be2b422a199f94244aa563484e35ed7349ca1c10facf0606b36a9196f4f291\"\n+\"checksum rustc-ap-syntax 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"71c1050894843b3c851067cd82179a7b85cb0fcc5adb35b54bb8293aeb82f271\"\n+\"checksum rustc-ap-syntax_pos 191.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"23102c8d0396174e14afd64e47f39400d275e0f548f3abc5edead40463f7e0e8\"\n \"checksum rustc-demangle 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"76d7ba1feafada44f2d38eed812bd2489a03c0f5abb975799251518b68848649\"\n \"checksum rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7540fc8b0c49f096ee9c961cda096467dce8084bec6bdca2fc83895fd9b28cb8\"\n \"checksum rustc-rayon 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8c6d5a683c6ba4ed37959097e88d71c9e8e26659a3cb5be8b389078e7ad45306\"\n@@ -867,14 +871,14 @@ dependencies = [\n \"checksum scopeguard 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94258f53601af11e6a49f722422f6e3425c52b06245a5cf9bc09908b174f5e27\"\n \"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n \"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n-\"checksum serde 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\" = \"429fcc4efa8a11341b5422c2ace724daba276c1748467e869478f53c0ba4562e\"\n-\"checksum serde_derive 1.0.68 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6a25ad0bf818ed2d180c89addbe29198d1de6c89ed08a48aa6a4d3d16a63cbfe\"\n+\"checksum serde 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0c3adf19c07af6d186d91dae8927b83b0553d07ca56cbf7f2f32560455c91920\"\n+\"checksum serde_derive 1.0.70 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3525a779832b08693031b8ecfb0de81cd71cfd3812088fafe9a7496789572124\"\n \"checksum serde_json 1.0.22 (registry+https://github.com/rust-lang/crates.io-index)\" = \"84b8035cabe9b35878adec8ac5fe03d5f6bc97ff6edd7ccb96b44c1276ba390e\"\n \"checksum smallvec 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"312a7df010092e73d6bbaf141957e868d4f30efd2bfd9bb1028ad91abec58514\"\n \"checksum stable_deref_trait 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ffbc596e092fe5f598b12ef46cc03754085ac2f4d8c739ad61c4ae266cc3b3fa\"\n \"checksum syn 0.11.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d3b891b9015c88c576343b9b3e41c2c11a51c219ef067b264bd9c8aa9b441dad\"\n \"checksum syn 0.13.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"14f9bf6292f3a61d2c716723fdb789a41bbe104168e6f496dc6497e531ea1b9b\"\n-\"checksum syn 0.14.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c67da57e61ebc7b7b6fff56bb34440ca3a83db037320b0507af4c10368deda7d\"\n+\"checksum syn 0.14.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2beff8ebc3658f07512a413866875adddd20f4fd47b2a4e6c9da65cd281baaea\"\n \"checksum synom 0.11.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a393066ed9010ebaed60b9eafa373d4b1baac186dd7e008555b0f702b51945b6\"\n \"checksum synstructure 0.6.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3a761d12e6d8dcb4dcf952a7a89b475e3a9d69e4a69307e01a470977642914bd\"\n \"checksum term 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5e6b677dd1e8214ea1ef4297f85dbcbed8e8cdddb561040cc998ca2551c37561\""}, {"sha": "48ace0a570cd6dd3d66ab8c9091a913bda61a7dc", "filename": "Cargo.toml", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -47,8 +47,9 @@ env_logger = \"0.5\"\n getopts = \"0.2\"\n derive-new = \"0.5\"\n cargo_metadata = \"0.5.1\"\n-rustc-ap-rustc_target = \"182.0.0\"\n-rustc-ap-syntax = \"182.0.0\"\n+rustc-ap-rustc_target = \"191.0.0\"\n+rustc-ap-syntax = \"191.0.0\"\n+rustc-ap-syntax_pos = \"191.0.0\"\n failure = \"0.1.1\"\n \n [dev-dependencies]"}, {"sha": "dd05b7770dad120d9f0b4f05c6fe9813e9feea2d", "filename": "Configurations.md", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -2065,6 +2065,22 @@ ignore = [\n ]\n ```\n \n+## `edition`\n+\n+Specifies which edition is used by the parser.\n+\n+- **Default value**: `Edition2015`\n+- **Possible values**: `Edition2015`, `Edition2018`\n+- **Stable**: No\n+\n+### Example\n+\n+If you want to format code that requires edition 2018, add the following to your config file:\n+\n+```toml\n+edition = \"Edition2018\"\n+```\n+\n ## `emit_mode`\n \n Internal option"}, {"sha": "5e2f01053f111131cf31639cb221ad95c7b44e38", "filename": "src/closures.rs", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fclosures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fclosures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fclosures.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -31,9 +31,9 @@ use utils::{last_line_width, left_most_sub_expr, stmt_expr};\n //     statement without needing a semi-colon), then adding or removing braces\n //     can change whether it is treated as an expression or statement.\n \n-// FIXME(topecongiro) Format async closures (#2813).\n pub fn rewrite_closure(\n     capture: ast::CaptureBy,\n+    asyncness: ast::IsAsync,\n     movability: ast::Movability,\n     fn_decl: &ast::FnDecl,\n     body: &ast::Expr,\n@@ -43,8 +43,9 @@ pub fn rewrite_closure(\n ) -> Option<String> {\n     debug!(\"rewrite_closure {:?}\", body);\n \n-    let (prefix, extra_offset) =\n-        rewrite_closure_fn_decl(capture, movability, fn_decl, body, span, context, shape)?;\n+    let (prefix, extra_offset) = rewrite_closure_fn_decl(\n+        capture, asyncness, movability, fn_decl, body, span, context, shape,\n+    )?;\n     // 1 = space between `|...|` and body.\n     let body_shape = shape.offset_left(extra_offset)?;\n \n@@ -198,19 +199,20 @@ fn rewrite_closure_block(\n // Return type is (prefix, extra_offset)\n fn rewrite_closure_fn_decl(\n     capture: ast::CaptureBy,\n+    asyncness: ast::IsAsync,\n     movability: ast::Movability,\n     fn_decl: &ast::FnDecl,\n     body: &ast::Expr,\n     span: Span,\n     context: &RewriteContext,\n     shape: Shape,\n ) -> Option<(String, usize)> {\n+    let is_async = if asyncness.is_async() { \"async \" } else { \"\" };\n     let mover = if capture == ast::CaptureBy::Value {\n         \"move \"\n     } else {\n         \"\"\n     };\n-\n     let immovable = if movability == ast::Movability::Static {\n         \"static \"\n     } else {\n@@ -219,7 +221,7 @@ fn rewrite_closure_fn_decl(\n     // 4 = \"|| {\".len(), which is overconservative when the closure consists of\n     // a single expression.\n     let nested_shape = shape\n-        .shrink_left(mover.len() + immovable.len())?\n+        .shrink_left(is_async.len() + mover.len() + immovable.len())?\n         .sub_width(4)?;\n \n     // 1 = |\n@@ -265,7 +267,7 @@ fn rewrite_closure_fn_decl(\n         config: context.config,\n     };\n     let list_str = write_list(&item_vec, &fmt)?;\n-    let mut prefix = format!(\"{}{}|{}|\", immovable, mover, list_str);\n+    let mut prefix = format!(\"{}{}{}|{}|\", is_async, immovable, mover, list_str);\n \n     if !ret_str.is_empty() {\n         if prefix.contains('\\n') {\n@@ -289,7 +291,9 @@ pub fn rewrite_last_closure(\n     expr: &ast::Expr,\n     shape: Shape,\n ) -> Option<String> {\n-    if let ast::ExprKind::Closure(capture, _, movability, ref fn_decl, ref body, _) = expr.node {\n+    if let ast::ExprKind::Closure(capture, asyncness, movability, ref fn_decl, ref body, _) =\n+        expr.node\n+    {\n         let body = match body.node {\n             ast::ExprKind::Block(ref block, _)\n                 if !is_unsafe_block(block)\n@@ -300,7 +304,7 @@ pub fn rewrite_last_closure(\n             _ => body,\n         };\n         let (prefix, extra_offset) = rewrite_closure_fn_decl(\n-            capture, movability, fn_decl, body, expr.span, context, shape,\n+            capture, asyncness, movability, fn_decl, body, expr.span, context, shape,\n         )?;\n         // If the closure goes multi line before its body, do not overflow the closure.\n         if prefix.contains('\\n') {"}, {"sha": "fcda529ea893ba8ec9cb1301aafaa7e86e72af24", "filename": "src/config/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fconfig%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fconfig%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fmod.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -104,14 +104,15 @@ create_config! {\n         \"Maximum number of blank lines which can be put between items.\";\n     blank_lines_lower_bound: usize, 0, false,\n         \"Minimum number of blank lines which must be put between items.\";\n+    edition: Edition, Edition::Edition2015, false, \"The edition of the parser. (RFC 2052)\";\n \n     // Options that can change the source code beyond whitespace/blocks (somewhat linty things)\n     merge_derives: bool, true, true, \"Merge multiple `#[derive(...)]` into a single one\";\n     use_try_shorthand: bool, false, true, \"Replace uses of the try! macro by the ? shorthand\";\n     use_field_init_shorthand: bool, false, true, \"Use field initialization shorthand if possible\";\n     force_explicit_abi: bool, true, true, \"Always print the abi for extern items\";\n     condense_wildcard_suffixes: bool, false, false, \"Replace strings of _ wildcards by a single .. \\\n-                                              in tuple patterns\";\n+                                                     in tuple patterns\";\n \n     // Control options (changes the operation of rustfmt, rather than the formatting)\n     color: Color, Color::Auto, false,"}, {"sha": "5fa0a0483136936a0c68ba907eb3c54cfea89da4", "filename": "src/config/options.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fconfig%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fconfig%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Foptions.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -340,3 +340,18 @@ pub trait CliOptions {\n     fn apply_to(self, config: &mut Config);\n     fn config_path(&self) -> Option<&Path>;\n }\n+\n+/// The edition of the compiler (RFC 2052)\n+configuration_option_enum!{ Edition:\n+    Edition2015,\n+    Edition2018,\n+}\n+\n+impl Edition {\n+    pub(crate) fn to_libsyntax_pos_edition(&self) -> syntax_pos::edition::Edition {\n+        match self {\n+            Edition::Edition2015 => syntax_pos::edition::Edition::Edition2015,\n+            Edition::Edition2018 => syntax_pos::edition::Edition::Edition2018,\n+        }\n+    }\n+}"}, {"sha": "6928b77f36039d4853ddab7b6079162f03c9ec78", "filename": "src/expr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -183,9 +183,9 @@ pub fn format_expr(\n         } else {\n             Some(\"yield\".to_string())\n         },\n-        ast::ExprKind::Closure(capture, _, movability, ref fn_decl, ref body, _) => {\n+        ast::ExprKind::Closure(capture, asyncness, movability, ref fn_decl, ref body, _) => {\n             closures::rewrite_closure(\n-                capture, movability, fn_decl, body, expr.span, context, shape,\n+                capture, asyncness, movability, fn_decl, body, expr.span, context, shape,\n             )\n         }\n         ast::ExprKind::Try(..) | ast::ExprKind::Field(..) | ast::ExprKind::MethodCall(..) => {"}, {"sha": "817ed426e5226cca2681be1927f394c09525f282", "filename": "src/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -33,6 +33,7 @@ extern crate serde;\n extern crate serde_derive;\n extern crate serde_json;\n extern crate syntax;\n+extern crate syntax_pos;\n extern crate toml;\n extern crate unicode_segmentation;\n \n@@ -793,6 +794,7 @@ fn format_input_inner<T: Write>(\n     config: &Config,\n     mut out: Option<&mut T>,\n ) -> Result<(Summary, FileMap, FormatReport), (ErrorKind, Summary)> {\n+    syntax_pos::hygiene::set_default_edition(config.edition().to_libsyntax_pos_edition());\n     let mut summary = Summary::default();\n     if config.disable_all_formatting() {\n         // When the input is from stdin, echo back the input."}, {"sha": "1728460eb66ebd11066c2881c07029362b1f0a27", "filename": "tests/target/async_closure.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/fba6b68bf2eee8c47da423a7e1204486eb77b489/tests%2Ftarget%2Fasync_closure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fba6b68bf2eee8c47da423a7e1204486eb77b489/tests%2Ftarget%2Fasync_closure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fasync_closure.rs?ref=fba6b68bf2eee8c47da423a7e1204486eb77b489", "patch": "@@ -0,0 +1,18 @@\n+// rustfmt-edition: Edition2018\n+\n+fn main() {\n+    let async_closure = async {\n+        let x = 3;\n+        x\n+    };\n+\n+    let f = async /* comment */ {\n+        let x = 3;\n+        x\n+    };\n+\n+    let g = async /* comment */ move {\n+        let x = 3;\n+        x\n+    };\n+}"}]}