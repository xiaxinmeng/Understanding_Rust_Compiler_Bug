{"sha": "5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmYzJlOWU5YWI5Y2YwMzI5ZmI5ZjE4YzI4YzJkZjU0NWU0ZTNlZGM=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-02-10T20:07:01Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-02-10T20:07:11Z"}, "message": "support a fast-make mode that avoids globbing into llvm and libuv", "tree": {"sha": "438f6f201e160af560d4dc1f0a0f4c042ced43ca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/438f6f201e160af560d4dc1f0a0f4c042ced43ca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "html_url": "https://github.com/rust-lang/rust/commit/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e55d3130a1b8eab3b80c85e71a2a800fb9442f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/8e55d3130a1b8eab3b80c85e71a2a800fb9442f0", "html_url": "https://github.com/rust-lang/rust/commit/8e55d3130a1b8eab3b80c85e71a2a800fb9442f0"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "a910f6d9eabf588a69d79243dc39fad5fb2064f8", "filename": "configure", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/configure", "raw_url": "https://github.com/rust-lang/rust/raw/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "patch": "@@ -262,6 +262,7 @@ opt docs     1 \"build documentation\"\n opt optimize 1 \"build optimized rust code\"\n opt optimize-cxx 1 \"build optimized C++ code\"\n opt optimize-llvm 1 \"build optimized LLVM\"\n+opt fast-make 0 \"use .gitmodules as timestamp for submodule deps\"\n opt manage-submodules 1 \"let the build manage the git submodules\"\n opt mingw-cross 0 \"cross-compile for win32 using mingw\"\n opt clang 0 \"prefer clang to gcc for building the runtime\""}, {"sha": "9b7c82c139d4a071762177e33bf11f86ed4c1d89", "filename": "mk/llvm.mk", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/mk%2Fllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/mk%2Fllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fllvm.mk?ref=5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "patch": "@@ -1,10 +1,15 @@\n+\n+ifdef CFG_ENABLE_FAST_MAKE\n+LLVM_DEPS := $(S)/.gitmodules\n+else\n # Recursive wildcard function\n # http://blog.jgc.org/2011/07/gnu-make-recursive-wildcard-function.html\n rwildcard=$(foreach d,$(wildcard $1*),$(call rwildcard,$d/,$2) \\\n   $(filter $(subst *,%,$2),$d))\n \n # This is just a rough approximation of LLVM deps\n LLVM_DEPS=$(call rwildcard,$(CFG_LLVM_SRC_DIR),*cpp *hpp)\n+endif\n \n define DEF_LLVM_RULES\n "}, {"sha": "e43a68e5211de8419684489b41a59730fcb1f6b7", "filename": "mk/rt.mk", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=5fc2e9e9ab9cf0329fb9f18c28c2df545e4e3edc", "patch": "@@ -158,11 +158,18 @@ rt/$(1)/$(CFG_RUNTIME): $$(RUNTIME_OBJS_$(1)) $$(MKFILE_DEPS) \\\n # FIXME: For some reason libuv's makefiles can't figure out the correct definition\n # of CC on the mingw I'm using, so we are explicitly using gcc. Also, we\n # have to list environment variables first on windows... mysterious\n-$$(LIBUV_LIB_$(1)): $$(wildcard \\\n-                     $$(S)src/libuv/* \\\n-                     $$(S)src/libuv/*/* \\\n-                     $$(S)src/libuv/*/*/* \\\n-                     $$(S)src/libuv/*/*/*/*)\n+\n+ifdef CFG_ENABLE_FAST_MAKE\n+LIBUV_DEPS := $$(S)/.gitmodules\n+else\n+LIBUV_DEPS := $$(wildcard \\\n+              $$(S)src/libuv/* \\\n+              $$(S)src/libuv/*/* \\\n+              $$(S)src/libuv/*/*/* \\\n+              $$(S)src/libuv/*/*/*/*)\n+endif\n+\n+$$(LIBUV_LIB_$(1)): $$(LIBUV_DEPS)\n \t$$(Q)$$(MAKE) -C $$(S)mk/libuv/$$(LIBUV_ARCH_$(1))/$$(LIBUV_OSTYPE_$(1)) \\\n \t\tCFLAGS=\"$$(LIBUV_FLAGS_$$(HOST_$(1)))\" \\\n         LDFLAGS=\"$$(LIBUV_FLAGS_$$(HOST_$(1)))\" \\"}]}