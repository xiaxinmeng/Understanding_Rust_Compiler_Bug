{"sha": "040af62a5a780b55912f331ec1b576ccd680a109", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0MGFmNjJhNWE3ODBiNTU5MTJmMzMxZWMxYjU3NmNjZDY4MGExMDk=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-05-30T08:52:48Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-05-30T08:52:48Z"}, "message": "Rollup merge of #60802 - euclio:pulldown-cmark-panic, r=GuillaumeGomez\n\nupgrade rustdoc's `pulldown-cmark` to 0.5.2\n\nFixes #60482.", "tree": {"sha": "8f27c7507ab30eef467f951afeb1478ac69f7cee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f27c7507ab30eef467f951afeb1478ac69f7cee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/040af62a5a780b55912f331ec1b576ccd680a109", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc75ngCRBK7hj4Ov3rIwAAdHIIAFELfjnhq3IcxuMHNaASx9hf\nyhpLMJ8G9/cYmMJrlsFdCIRqarvE7mZJTsUqwIr2l+hYypkLof1FUpCYf4LpKcB1\nWSeQpk4lCTWPJEnn7XOZ2AqqTXjWbvu1rAeUdurQgYWAq+0Jh6sQs/+BEiQXE0Fh\nJmIueU3U/+jfP5eNVCTVXfHvPt33DxVQJqFmwMrEF7yfS8o6KSh+UH7Y2vJpxqnh\nh+x4WuHfyGaml9TKvqBaGz8a5xa8JW20FNZq59HS4DYbOWHoJ7lfAecGDn4TqB5t\np7I1Xp/KG8vDu7Fa84pkjjdTf8/NfLW7uapoleTFuYVcV4IBSm9pirPlZBt3JP4=\n=CpvG\n-----END PGP SIGNATURE-----\n", "payload": "tree 8f27c7507ab30eef467f951afeb1478ac69f7cee\nparent c28084ac16af4ab594b6860958df140e7c876a13\nparent ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1559206368 +0200\ncommitter GitHub <noreply@github.com> 1559206368 +0200\n\nRollup merge of #60802 - euclio:pulldown-cmark-panic, r=GuillaumeGomez\n\nupgrade rustdoc's `pulldown-cmark` to 0.5.2\n\nFixes #60482.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/040af62a5a780b55912f331ec1b576ccd680a109", "html_url": "https://github.com/rust-lang/rust/commit/040af62a5a780b55912f331ec1b576ccd680a109", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/040af62a5a780b55912f331ec1b576ccd680a109/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c28084ac16af4ab594b6860958df140e7c876a13", "url": "https://api.github.com/repos/rust-lang/rust/commits/c28084ac16af4ab594b6860958df140e7c876a13", "html_url": "https://github.com/rust-lang/rust/commit/c28084ac16af4ab594b6860958df140e7c876a13"}, {"sha": "ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "html_url": "https://github.com/rust-lang/rust/commit/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1"}], "stats": {"total": 46, "additions": 22, "deletions": 24}, "files": [{"sha": "4bee0e0e2ad2f31d25d73115ff04efe537c7dc9e", "filename": "Cargo.lock", "status": "modified", "additions": 7, "deletions": 18, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/040af62a5a780b55912f331ec1b576ccd680a109/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/040af62a5a780b55912f331ec1b576ccd680a109/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=040af62a5a780b55912f331ec1b576ccd680a109", "patch": "@@ -421,7 +421,7 @@ dependencies = [\n  \"itertools 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"matches 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"pulldown-cmark 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quine-mc_cluskey 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex-syntax 0.6.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2014,23 +2014,13 @@ dependencies = [\n \n [[package]]\n name = \"pulldown-cmark\"\n-version = \"0.4.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-dependencies = [\n- \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"memchr 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n-[[package]]\n-name = \"pulldown-cmark\"\n-version = \"0.5.0\"\n+version = \"0.5.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.19 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"memchr 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"unicase 2.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3077,7 +3067,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"minifier 0.0.30 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"pulldown-cmark 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -3854,7 +3844,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"unicase\"\n-version = \"2.3.0\"\n+version = \"2.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -4285,8 +4275,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\" = \"77619697826f31a02ae974457af0b29b723e5619e113e9397b8b82c6bd253f09\"\n \"checksum proptest 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"24f5844db2f839e97e3021980975f6ebf8691d9b9b2ca67ed3feb38dc3edb52c\"\n \"checksum pulldown-cmark 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d6fdf85cda6cadfae5428a54661d431330b312bc767ddbc57adbedc24da66e32\"\n-\"checksum pulldown-cmark 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d1b74cc784b038a9921fd1a48310cc2e238101aa8ae0b94201e2d85121dd68b5\"\n-\"checksum pulldown-cmark 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"157737d41407de9c5e0563a991d085117d60ae729af2cc1bf28d6dfbc97bcc1f\"\n+\"checksum pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"051e60ace841b3bfecd402fe5051c06cb3bec4a6e6fdd060a37aa8eb829a1db3\"\n \"checksum quick-error 1.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9274b940887ce9addde99c4eee6b5c44cc494b182b97e73dc8ffdcb3397fd3f0\"\n \"checksum quine-mc_cluskey 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"07589615d719a60c8dd8a4622e7946465dfef20d1a428f969e3443e7386d5f45\"\n \"checksum quote 0.3.15 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7a6e920b65c65f10b2ae65c831a81a073a89edd28c7cce89475bff467ab4167a\"\n@@ -4400,7 +4389,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum typenum 1.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"612d636f949607bdf9b123b4a6f6d966dedf3ff669f7f045890d3a4a73948169\"\n \"checksum ucd-trie 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"71a9c5b1fe77426cf144cc30e49e955270f5086e31a6441dfa8b32efc09b9d77\"\n \"checksum ucd-util 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"535c204ee4d8434478593480b8f86ab45ec9aae0e83c568ca81abf0fd0e88f86\"\n-\"checksum unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"41d17211f887da8e4a70a45b9536f26fc5de166b81e2d5d80de4a17fd22553bd\"\n+\"checksum unicase 2.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a84e5511b2a947f3ae965dcb29b13b7b1691b6e7332cf5dbc1744138d5acb7f6\"\n \"checksum unicode-bidi 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"49f2bd0c6468a8230e1db229cff8029217cf623c767ea5d60bfbd42729ea54d5\"\n \"checksum unicode-normalization 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6a0180bc61fc5a987082bfa111f4cc95c4caff7f9799f3e46df09163a937aa25\"\n \"checksum unicode-segmentation 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"aa6024fc12ddfd1c6dbc14a80fa2324d4568849869b779f6bd37e5e4c03344d1\""}, {"sha": "b75212d606fa5a63894b23c5d542dea00fe2e0c5", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/040af62a5a780b55912f331ec1b576ccd680a109/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/040af62a5a780b55912f331ec1b576ccd680a109/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=040af62a5a780b55912f331ec1b576ccd680a109", "patch": "@@ -9,7 +9,7 @@ name = \"rustdoc\"\n path = \"lib.rs\"\n \n [dependencies]\n-pulldown-cmark = { version = \"0.4.1\", default-features = false }\n+pulldown-cmark = { version = \"0.5.2\", default-features = false }\n minifier = \"0.0.30\"\n tempfile = \"3\"\n parking_lot = \"0.7\""}, {"sha": "334b83156507654dc638765b652ff1d942cb3a42", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/040af62a5a780b55912f331ec1b576ccd680a109/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/040af62a5a780b55912f331ec1b576ccd680a109/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=040af62a5a780b55912f331ec1b576ccd680a109", "patch": "@@ -351,9 +351,11 @@ impl<'a, 'b, 'ids, I: Iterator<Item = Event<'a>>> Iterator for HeadingLinks<'a,\n         if let Some(Event::Start(Tag::Header(level))) = event {\n             let mut id = String::new();\n             for event in &mut self.inner {\n-                match event {\n+                match &event {\n                     Event::End(Tag::Header(..)) => break,\n-                    Event::Text(ref text) => id.extend(text.chars().filter_map(slugify)),\n+                    Event::Text(text) | Event::Code(text) => {\n+                        id.extend(text.chars().filter_map(slugify));\n+                    }\n                     _ => {},\n                 }\n                 self.buf.push_back(event);\n@@ -402,7 +404,6 @@ fn check_if_allowed_tag(t: &Tag<'_>) -> bool {\n         | Tag::Item\n         | Tag::Emphasis\n         | Tag::Strong\n-        | Tag::Code\n         | Tag::Link(..)\n         | Tag::BlockQuote => true,\n         _ => false,\n@@ -790,9 +791,8 @@ pub fn plain_summary_line_full(md: &str, limit_length: bool) -> String {\n             let next_event = next_event.unwrap();\n             let (ret, is_in) = match next_event {\n                 Event::Start(Tag::Paragraph) => (None, 1),\n-                Event::Start(Tag::Code) => (Some(\"`\".to_owned()), 1),\n-                Event::End(Tag::Code) => (Some(\"`\".to_owned()), -1),\n                 Event::Start(Tag::Header(_)) => (None, 1),\n+                Event::Code(code) => (Some(format!(\"`{}`\", code)), 0),\n                 Event::Text(ref s) if self.is_in > 0 => (Some(s.as_ref().to_owned()), 0),\n                 Event::End(Tag::Paragraph) | Event::End(Tag::Header(_)) => (None, -1),\n                 _ => (None, 0),"}, {"sha": "0fd1daa746d41b7cf158e77605530857d3e83016", "filename": "src/test/rustdoc/issue-60482.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/040af62a5a780b55912f331ec1b576ccd680a109/src%2Ftest%2Frustdoc%2Fissue-60482.rs", "raw_url": "https://github.com/rust-lang/rust/raw/040af62a5a780b55912f331ec1b576ccd680a109/src%2Ftest%2Frustdoc%2Fissue-60482.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-60482.rs?ref=040af62a5a780b55912f331ec1b576ccd680a109", "patch": "@@ -0,0 +1,9 @@\n+// This code caused a panic in `pulldown-cmark` 0.4.1.\n+\n+pub const BASIC_UNICODE: bool = true;\n+\n+\n+/// # `BASIC_UNICODE`: `A` `|`\n+/// ```text\n+/// ```\n+pub const BASIC_FONTS: bool = true;"}]}