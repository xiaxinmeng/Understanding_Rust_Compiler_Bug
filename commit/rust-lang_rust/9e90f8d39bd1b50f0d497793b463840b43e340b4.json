{"sha": "9e90f8d39bd1b50f0d497793b463840b43e340b4", "node_id": "C_kwDOAAsO6NoAKDllOTBmOGQzOWJkMWI1MGYwZDQ5Nzc5M2I0NjM4NDBiNDNlMzQwYjQ", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-03-09T22:14:14Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-09T22:14:14Z"}, "message": "Rollup merge of #94763 - m-ou-se:scoped-threads-lifetime-docs, r=Mark-Simulacrum\n\nAdd documentation about lifetimes to thread::scope.\n\nThis resolves the last unresolved question of https://github.com/rust-lang/rust/issues/93203\n\nThis was brought up in https://github.com/rust-lang/rust/pull/94559#discussion_r820872694\n\nr? `````@Mark-Simulacrum`````", "tree": {"sha": "217a26ca250a66880930410d964706eb632327a9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/217a26ca250a66880930410d964706eb632327a9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9e90f8d39bd1b50f0d497793b463840b43e340b4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiKSa2CRBK7hj4Ov3rIwAAZqwIADS3AndJRG1lRq1D8ESxLqJU\nGL50t6P76EAuGYqwAC4mNdGzv8kXoypsLVEayvSgo9k3sJd5jchiYTRZuk3hCw3X\nLbGfWIz4i3T3M2m5sd7eucV4bT1zMEnMSM6o0VYcAjNOOx5QWbFZrYMs9QQPrS23\nVtWKyIEfoglZFzZX/R6XwBGf3MS5vdyW2M19/0PIlbXuo8rHcRNHDwMqEYZxwpmu\nDhVzxUtoYl2VQ/Tg7DFaiDbDuxouq76760WwVawwcebBis4pUiViiDvSa703TeBf\n7vxqGj9SKwfXN8nrYTT3J5Jh1MQKcZ1My1lH042gCShFIkq4OBMav+fnVDcfDuc=\n=ocb4\n-----END PGP SIGNATURE-----\n", "payload": "tree 217a26ca250a66880930410d964706eb632327a9\nparent 99c6be13211795455d1d0152a88da31625a8aac3\nparent 4d56c1563c5ae75acbcb8c163296561a6e17e47a\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1646864054 +0100\ncommitter GitHub <noreply@github.com> 1646864054 +0100\n\nRollup merge of #94763 - m-ou-se:scoped-threads-lifetime-docs, r=Mark-Simulacrum\n\nAdd documentation about lifetimes to thread::scope.\n\nThis resolves the last unresolved question of https://github.com/rust-lang/rust/issues/93203\n\nThis was brought up in https://github.com/rust-lang/rust/pull/94559#discussion_r820872694\n\nr? `````@Mark-Simulacrum`````\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9e90f8d39bd1b50f0d497793b463840b43e340b4", "html_url": "https://github.com/rust-lang/rust/commit/9e90f8d39bd1b50f0d497793b463840b43e340b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9e90f8d39bd1b50f0d497793b463840b43e340b4/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "99c6be13211795455d1d0152a88da31625a8aac3", "url": "https://api.github.com/repos/rust-lang/rust/commits/99c6be13211795455d1d0152a88da31625a8aac3", "html_url": "https://github.com/rust-lang/rust/commit/99c6be13211795455d1d0152a88da31625a8aac3"}, {"sha": "4d56c1563c5ae75acbcb8c163296561a6e17e47a", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d56c1563c5ae75acbcb8c163296561a6e17e47a", "html_url": "https://github.com/rust-lang/rust/commit/4d56c1563c5ae75acbcb8c163296561a6e17e47a"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "c4847b529a3613c8c52402a34d1d4787c1112823", "filename": "library/std/src/thread/scoped.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9e90f8d39bd1b50f0d497793b463840b43e340b4/library%2Fstd%2Fsrc%2Fthread%2Fscoped.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e90f8d39bd1b50f0d497793b463840b43e340b4/library%2Fstd%2Fsrc%2Fthread%2Fscoped.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fthread%2Fscoped.rs?ref=9e90f8d39bd1b50f0d497793b463840b43e340b4", "patch": "@@ -107,6 +107,24 @@ impl ScopeData {\n /// a.push(4);\n /// assert_eq!(x, a.len());\n /// ```\n+///\n+/// # Lifetimes\n+///\n+/// Scoped threads involve two lifetimes: `'scope` and `'env`.\n+///\n+/// The `'scope` lifetime represents the lifetime of the scope itself.\n+/// That is: the time during which new scoped threads may be spawned,\n+/// and also the time during which they might still be running.\n+/// Once this lifetime ends, all scoped threads are joined.\n+/// This lifetime starts within the `scope` function, before `f` (the argument to `scope`) starts.\n+/// It ends after `f` returns and all scoped threads have been joined, but before `scope` returns.\n+///\n+/// The `'env` lifetime represents the lifetime of whatever is borrowed by the scoped threads.\n+/// This lifetime must outlast the call to `scope`, and thus cannot be smaller than `'scope`.\n+/// It can be as small as the call to `scope`, meaning that anything that outlives this call,\n+/// such as local variables defined right before the scope, can be borrowed by the scoped threads.\n+///\n+/// The `'env: 'scope` bound is part of the definition of the `Scope` type.\n #[track_caller]\n pub fn scope<'env, F, T>(f: F) -> T\n where"}]}