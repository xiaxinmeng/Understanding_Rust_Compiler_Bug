{"sha": "1b3bc16533a3e701616648920603c10674eb653b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiM2JjMTY1MzNhM2U3MDE2MTY2NDg5MjA2MDNjMTA2NzRlYjY1M2I=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-07-11T10:28:21Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-07-11T10:30:18Z"}, "message": "Fix out of bounds access by checking length equality BEFORE accessing by index.\n\nFixes #5780", "tree": {"sha": "9c0c31231f98782ae7771f1d963674144bac5829", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c0c31231f98782ae7771f1d963674144bac5829"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b3bc16533a3e701616648920603c10674eb653b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b3bc16533a3e701616648920603c10674eb653b", "html_url": "https://github.com/rust-lang/rust/commit/1b3bc16533a3e701616648920603c10674eb653b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b3bc16533a3e701616648920603c10674eb653b/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be8812203998042783b4ea9850cd8cfa3fd26242", "url": "https://api.github.com/repos/rust-lang/rust/commits/be8812203998042783b4ea9850cd8cfa3fd26242", "html_url": "https://github.com/rust-lang/rust/commit/be8812203998042783b4ea9850cd8cfa3fd26242"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "502bf0c427954b616a817d91512586ff1f968d68", "filename": "clippy_lints/src/unnested_or_patterns.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b3bc16533a3e701616648920603c10674eb653b/clippy_lints%2Fsrc%2Funnested_or_patterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b3bc16533a3e701616648920603c10674eb653b/clippy_lints%2Fsrc%2Funnested_or_patterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Funnested_or_patterns.rs?ref=1b3bc16533a3e701616648920603c10674eb653b", "patch": "@@ -400,8 +400,8 @@ fn extend_with_matching(\n \n /// Are the patterns in `ps1` and `ps2` equal save for `ps1[idx]` compared to `ps2[idx]`?\n fn eq_pre_post(ps1: &[P<Pat>], ps2: &[P<Pat>], idx: usize) -> bool {\n-    ps1[idx].is_rest() == ps2[idx].is_rest() // Avoid `[x, ..] | [x, 0]` => `[x, .. | 0]`.\n-        && ps1.len() == ps2.len()\n+    ps1.len() == ps2.len()\n+        && ps1[idx].is_rest() == ps2[idx].is_rest() // Avoid `[x, ..] | [x, 0]` => `[x, .. | 0]`.\n         && over(&ps1[..idx], &ps2[..idx], |l, r| eq_pat(l, r))\n         && over(&ps1[idx + 1..], &ps2[idx + 1..], |l, r| eq_pat(l, r))\n }"}]}