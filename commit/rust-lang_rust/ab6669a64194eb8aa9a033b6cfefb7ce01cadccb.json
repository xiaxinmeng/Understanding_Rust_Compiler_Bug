{"sha": "ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiNjY2OWE2NDE5NGViOGFhOWEwMzNiNmNmZWZiN2NlMDFjYWRjY2I=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-09-09T18:24:20Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-09-10T17:13:49Z"}, "message": "Rustup to *rustc 1.13.0-nightly (f1f40f850 2016-09-09)*", "tree": {"sha": "f9202c8c8952a7dd1b336a822cac7be0e86c661c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f9202c8c8952a7dd1b336a822cac7be0e86c661c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJX1D9PAAoJEF5CfHlMukXoEDUQAJ7FTwnA4BO/PPYUu/+SgiLZ\nWyDvThtLoM1lj7bd+wnmL8rPhxlcwD4NLJg+ot68LS8pyLS4AnGOeRBqkMTVLIvA\n4QPSXS1QUeF/QlVwzcFQYmfnqk7Sx2EEjQjZAAtNL8huitfKb0tuf/Jl6HYoU7Zn\nInz7vF+vaofiDSNq3R1ptHDWgmFjH4HGDdn2L3nGfKkUnfb99CJkc1iNXBm2NW1D\n53RZHsSAdqei3+HQlAdSvHtdXENfUu3xxlCZxv+pZSinqSXDpzLgF8b++lhLGhjJ\n06elB5uX+BC81iosFT9kBXpO8nvMMRGsH0iJE/zNajjw2cOosAdyOR7XmFZ41aEB\nWn+1k+g6JeRgPAsx+HRMZiMBCEcb1pPb3jqBBBAgbrfvXXKH80X5aJ6uvNATHux9\ne8uMTkK/G9dT0TSp9AJVoCFwz3pMu1cw30bKPzognQx2k6vvPfn6soeFUC2W93U3\nRfqL7Y60PWOxDWUUG3/Nge5zPiHOyZX/WxIb5e8/437MpW+rajypE+gGFdICftZ2\nbKy/eWljl7ErlE6L14PXnBw9SlBU6KAykjfwRupwbVGs4g+wSwYeDQHomRSGjL3A\n/Ayqar14MCWx2C3CLQdcsWkIDidymt3bfB8VTDxVOYs3rfCc1WkNf9VmLnxCtMJL\nbrTvMA+UcJeoxnU+x4AY\n=iFfY\n-----END PGP SIGNATURE-----", "payload": "tree f9202c8c8952a7dd1b336a822cac7be0e86c661c\nparent b08c7aa553a0ccdd4a1fb9eb4c9f982be44332d4\nauthor mcarton <cartonmartin+git@gmail.com> 1473445460 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1473527629 +0200\n\nRustup to *rustc 1.13.0-nightly (f1f40f850 2016-09-09)*\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "html_url": "https://github.com/rust-lang/rust/commit/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b08c7aa553a0ccdd4a1fb9eb4c9f982be44332d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/b08c7aa553a0ccdd4a1fb9eb4c9f982be44332d4", "html_url": "https://github.com/rust-lang/rust/commit/b08c7aa553a0ccdd4a1fb9eb4c9f982be44332d4"}], "stats": {"total": 38, "additions": 17, "deletions": 21}, "files": [{"sha": "89e90bff625f311ee65f5d50eff095f25a717add", "filename": "clippy_lints/src/derive.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fderive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fderive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fderive.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -141,11 +141,10 @@ fn check_copy_clone<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, item: &Item, trait_ref\n         }\n \n         match ty.sty {\n-            TypeVariants::TyUnion(..) => return,\n+            TypeVariants::TyAdt(def, _) if def.is_union() => return,\n \n             // Some types are not Clone by default but could be cloned \u201cby hand\u201d if necessary\n-            TypeVariants::TyEnum(def, substs) |\n-            TypeVariants::TyStruct(def, substs) => {\n+            TypeVariants::TyAdt(def, substs) => {\n                 for variant in &def.variants {\n                     for field in &variant.fields {\n                         match field.ty(cx.tcx, substs).sty {"}, {"sha": "1d81b6dba22f42f7ddf6d876417ab8adca719d86", "filename": "clippy_lints/src/len_zero.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Flen_zero.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Flen_zero.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flen_zero.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -214,9 +214,7 @@ fn has_is_empty(cx: &LateContext, expr: &Expr) -> bool {\n               .map_or(false, |ids| ids.iter().any(|i| is_is_empty(cx, i)))\n         }\n         ty::TyProjection(_) => ty.ty_to_def_id().map_or(false, |id| has_is_empty_impl(cx, &id)),\n-        ty::TyEnum(id, _) |\n-        ty::TyStruct(id, _) |\n-        ty::TyUnion(id, _) => has_is_empty_impl(cx, &id.did),\n+        ty::TyAdt(id, _) => has_is_empty_impl(cx, &id.did),\n         ty::TyArray(..) | ty::TyStr => true,\n         _ => false,\n     }"}, {"sha": "c1b933d0121e81dcbbc2411eeb4e16ee22acc93d", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -796,7 +796,7 @@ fn derefs_to_slice(cx: &LateContext, expr: &hir::Expr, ty: ty::Ty) -> Option<sug\n     fn may_slice(cx: &LateContext, ty: ty::Ty) -> bool {\n         match ty.sty {\n             ty::TySlice(_) => true,\n-            ty::TyStruct(..) => match_type(cx, ty, &paths::VEC),\n+            ty::TyAdt(..) => match_type(cx, ty, &paths::VEC),\n             ty::TyArray(_, size) => size < 32,\n             ty::TyRef(_, ty::TypeAndMut { ty: inner, .. }) |\n             ty::TyBox(inner) => may_slice(cx, inner),\n@@ -1081,12 +1081,12 @@ fn lint_single_char_pattern(cx: &LateContext, expr: &hir::Expr, arg: &hir::Expr)\n \n /// Given a `Result<T, E>` type, return its error type (`E`).\n fn get_error_type<'a>(cx: &LateContext, ty: ty::Ty<'a>) -> Option<ty::Ty<'a>> {\n-    if !match_type(cx, ty, &paths::RESULT) {\n-        return None;\n-    }\n-\n-    if let ty::TyEnum(_, substs) = ty.sty {\n-        substs.types().nth(1)\n+    if let ty::TyAdt(_, substs) = ty.sty {\n+        if match_type(cx, ty, &paths::RESULT) {\n+            substs.types().nth(1)\n+        } else {\n+            None\n+        }\n     } else {\n         None\n     }"}, {"sha": "a2117656f9d7851b5f0499e2046d4df65afae535", "filename": "clippy_lints/src/mutex_atomic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fmutex_atomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fmutex_atomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmutex_atomic.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -57,7 +57,7 @@ pub struct MutexAtomic;\n impl LateLintPass for MutexAtomic {\n     fn check_expr(&mut self, cx: &LateContext, expr: &Expr) {\n         let ty = cx.tcx.expr_ty(expr);\n-        if let ty::TyStruct(_, subst) = ty.sty {\n+        if let ty::TyAdt(_, subst) = ty.sty {\n             if match_type(cx, ty, &paths::MUTEX) {\n                 let mutex_param = &subst.type_at(0).sty;\n                 if let Some(atomic_name) = get_atomic_name(mutex_param) {"}, {"sha": "9f607f4350d2a2259df65d8461e6d202b716b76a", "filename": "clippy_lints/src/needless_update.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fneedless_update.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fneedless_update.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_update.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -1,5 +1,5 @@\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n-use rustc::ty::TyStruct;\n+use rustc::ty::TyAdt;\n use rustc::hir::{Expr, ExprStruct};\n use utils::span_lint;\n \n@@ -34,7 +34,7 @@ impl LateLintPass for Pass {\n     fn check_expr(&mut self, cx: &LateContext, expr: &Expr) {\n         if let ExprStruct(_, ref fields, Some(ref base)) = expr.node {\n             let ty = cx.tcx.expr_ty(expr);\n-            if let TyStruct(def, _) = ty.sty {\n+            if let TyAdt(def, _) = ty.sty {\n                 if fields.len() == def.struct_variant().fields.len() {\n                     span_lint(cx,\n                               NEEDLESS_UPDATE,"}, {"sha": "538d3abd5ea430fb204d299968862a33683bdff6", "filename": "clippy_lints/src/new_without_default.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fnew_without_default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fnew_without_default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnew_without_default.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -146,7 +146,7 @@ impl LateLintPass for NewWithoutDefault {\n \n fn can_derive_default<'t, 'c>(ty: ty::Ty<'t>, cx: &LateContext<'c, 't>, default_trait_id: DefId) -> bool {\n     match ty.sty {\n-        ty::TyStruct(adt_def, substs) => {\n+        ty::TyAdt(adt_def, substs) if adt_def.is_struct() => {\n             for field in adt_def.all_fields() {\n                 let f_ty = field.ty(cx.tcx, substs);\n                 if !implements_trait(cx, f_ty, default_trait_id, Vec::new()) {"}, {"sha": "31f0c9c8e000d2ebd748f7f93488ae9c09e2f959", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -152,11 +152,10 @@ pub fn match_def_path(cx: &LateContext, def_id: DefId, path: &[&str]) -> bool {\n     apb.names == path\n }\n \n-/// Check if type is struct or enum type with given def path.\n+/// Check if type is struct, enum or union type with given def path.\n pub fn match_type(cx: &LateContext, ty: ty::Ty, path: &[&str]) -> bool {\n     match ty.sty {\n-        ty::TyEnum(adt, _) |\n-        ty::TyStruct(adt, _) => match_def_path(cx, adt.did, path),\n+        ty::TyAdt(adt, _) => match_def_path(cx, adt.did, path),\n         _ => false,\n     }\n }"}, {"sha": "06d3d040ccdc57237befdbe13d3f7cce04d9c61f", "filename": "clippy_lints/src/vec.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ab6669a64194eb8aa9a033b6cfefb7ce01cadccb/clippy_lints%2Fsrc%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fvec.rs?ref=ab6669a64194eb8aa9a033b6cfefb7ce01cadccb", "patch": "@@ -88,7 +88,7 @@ fn check_vec_macro(cx: &LateContext, vec_args: &higher::VecArgs, span: Span) {\n \n /// Return the item type of the vector (ie. the `T` in `Vec<T>`).\n fn vec_type(ty: ty::Ty) -> ty::Ty {\n-    if let ty::TyStruct(_, substs) = ty.sty {\n+    if let ty::TyAdt(_, substs) = ty.sty {\n         substs.type_at(0)\n     } else {\n         panic!(\"The type of `vec!` is a not a struct?\");"}]}