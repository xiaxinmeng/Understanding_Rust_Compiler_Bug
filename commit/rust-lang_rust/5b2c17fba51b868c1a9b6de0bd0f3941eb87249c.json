{"sha": "5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMmMxN2ZiYTUxYjg2OGMxYTliNmRlMGJkMGYzOTQxZWI4NzI0OWM=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-06-29T19:08:35Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-06-29T19:14:29Z"}, "message": "Fix resource encoding bugs.", "tree": {"sha": "f32507ef8eeb0f269e20c634bff14bd71b07f2a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f32507ef8eeb0f269e20c634bff14bd71b07f2a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "html_url": "https://github.com/rust-lang/rust/commit/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "750dcc05e441e9e958012155902ce841e1ef1ed2", "url": "https://api.github.com/repos/rust-lang/rust/commits/750dcc05e441e9e958012155902ce841e1ef1ed2", "html_url": "https://github.com/rust-lang/rust/commit/750dcc05e441e9e958012155902ce841e1ef1ed2"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "0aefb60a597f0b6c19a712c3772d463cc41b0395", "filename": "src/comp/metadata/encoder.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c/src%2Fcomp%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c/src%2Fcomp%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmetadata%2Fencoder.rs?ref=5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "patch": "@@ -280,10 +280,11 @@ fn encode_info_for_item(@crate_ctxt cx, &ebml::writer ebml_w,\n                                     tps);\n         }\n         case (item_res(_, _, ?tps, ?ctor_id)) {\n-            auto fn_ty = node_id_type(cx, item.id);\n+\n+            auto fn_ty = node_id_type(cx, ctor_id);\n \n             ebml::start_tag(ebml_w, tag_items_data_item);\n-            encode_def_id(ebml_w, local_def(item.id));\n+            encode_def_id(ebml_w, local_def(ctor_id));\n             encode_kind(ebml_w, 'y' as u8);\n             encode_type_param_count(ebml_w, tps);\n             encode_type(cx, ebml_w, ty::ty_fn_ret(cx.tcx, fn_ty));"}, {"sha": "ea5da34c773db93f2d6a725444cd68a64b35a9f8", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b2c17fba51b868c1a9b6de0bd0f3941eb87249c/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=5b2c17fba51b868c1a9b6de0bd0f3941eb87249c", "patch": "@@ -742,6 +742,7 @@ mod collect {\n                                         t_res, ast::return, []);\n                 auto t_dtor = ty::mk_fn(cx.tcx, ast::proto_fn, [t_arg],\n                                         ty::mk_nil(cx.tcx), ast::return, []);\n+                write::ty_only(cx.tcx, it.id, t_res);\n                 write::ty_only(cx.tcx, ctor_id, t_ctor);\n                 cx.tcx.tcache.insert(local_def(ctor_id),\n                                      tup(vec::len(tps), t_ctor));"}]}