{"sha": "d9769ec3834b62318da892925dc24c8883bb1635", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5NzY5ZWMzODM0YjYyMzE4ZGE4OTI5MjVkYzI0Yzg4ODNiYjE2MzU=", "commit": {"author": {"name": "P1start", "email": "rewi-github@whanau.org", "date": "2014-12-23T00:13:49Z"}, "committer": {"name": "P1start", "email": "rewi-github@whanau.org", "date": "2014-12-25T05:58:47Z"}, "message": "Parse fully-qualified associated types in generics without whitespace\n\nThis breaks code that looks like this:\n\n    let x = foo as bar << 13;\n\nChange such code to look like this:\n\n    let x = (foo as bar) << 13;\n\nCloses #17362.\n\n[breaking-change]", "tree": {"sha": "0455c075f4c1d37151c726fbbf6621e55448c525", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0455c075f4c1d37151c726fbbf6621e55448c525"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d9769ec3834b62318da892925dc24c8883bb1635", "comment_count": 7, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d9769ec3834b62318da892925dc24c8883bb1635", "html_url": "https://github.com/rust-lang/rust/commit/d9769ec3834b62318da892925dc24c8883bb1635", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d9769ec3834b62318da892925dc24c8883bb1635/comments", "author": {"login": "ftxqxd", "id": 2055302, "node_id": "MDQ6VXNlcjIwNTUzMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftxqxd", "html_url": "https://github.com/ftxqxd", "followers_url": "https://api.github.com/users/ftxqxd/followers", "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}", "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions", "organizations_url": "https://api.github.com/users/ftxqxd/orgs", "repos_url": "https://api.github.com/users/ftxqxd/repos", "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}", "received_events_url": "https://api.github.com/users/ftxqxd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ftxqxd", "id": 2055302, "node_id": "MDQ6VXNlcjIwNTUzMDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2055302?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ftxqxd", "html_url": "https://github.com/ftxqxd", "followers_url": "https://api.github.com/users/ftxqxd/followers", "following_url": "https://api.github.com/users/ftxqxd/following{/other_user}", "gists_url": "https://api.github.com/users/ftxqxd/gists{/gist_id}", "starred_url": "https://api.github.com/users/ftxqxd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ftxqxd/subscriptions", "organizations_url": "https://api.github.com/users/ftxqxd/orgs", "repos_url": "https://api.github.com/users/ftxqxd/repos", "events_url": "https://api.github.com/users/ftxqxd/events{/privacy}", "received_events_url": "https://api.github.com/users/ftxqxd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e11b22713aebd28ceaaa2ecef937c9b9d247c2f", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e11b22713aebd28ceaaa2ecef937c9b9d247c2f", "html_url": "https://github.com/rust-lang/rust/commit/7e11b22713aebd28ceaaa2ecef937c9b9d247c2f"}], "stats": {"total": 112, "additions": 53, "deletions": 59}, "files": [{"sha": "c3e9d91b7edc6cf908306be683de676ceafc5d0d", "filename": "src/libcollections/bit.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibcollections%2Fbit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibcollections%2Fbit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbit.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -314,17 +314,17 @@ impl Bitv {\n \n         for i in range(0, complete_words) {\n             bitv.storage.push(\n-                (reverse_bits(bytes[i * 4 + 0]) as u32 << 0) |\n-                (reverse_bits(bytes[i * 4 + 1]) as u32 << 8) |\n-                (reverse_bits(bytes[i * 4 + 2]) as u32 << 16) |\n-                (reverse_bits(bytes[i * 4 + 3]) as u32 << 24)\n+                ((reverse_bits(bytes[i * 4 + 0]) as u32) << 0) |\n+                ((reverse_bits(bytes[i * 4 + 1]) as u32) << 8) |\n+                ((reverse_bits(bytes[i * 4 + 2]) as u32) << 16) |\n+                ((reverse_bits(bytes[i * 4 + 3]) as u32) << 24)\n             );\n         }\n \n         if extra_bytes > 0 {\n             let mut last_word = 0u32;\n             for (i, &byte) in bytes[complete_words*4..].iter().enumerate() {\n-                last_word |= reverse_bits(byte) as u32 << (i * 8);\n+                last_word |= (reverse_bits(byte) as u32) << (i * 8);\n             }\n             bitv.storage.push(last_word);\n         }\n@@ -645,7 +645,7 @@ impl Bitv {\n             if offset >= bitv.nbits {\n                 0\n             } else {\n-                bitv[offset] as u8 << (7 - bit)\n+                (bitv[offset] as u8) << (7 - bit)\n             }\n         }\n "}, {"sha": "2501037107a22e6b95cae5095772ee3713b792b0", "filename": "src/libcore/hash/sip.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibcore%2Fhash%2Fsip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibcore%2Fhash%2Fsip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fhash%2Fsip.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -50,19 +50,19 @@ pub struct SipState {\n macro_rules! u8to64_le {\n     ($buf:expr, $i:expr) =>\n     ($buf[0+$i] as u64 |\n-     $buf[1+$i] as u64 << 8 |\n-     $buf[2+$i] as u64 << 16 |\n-     $buf[3+$i] as u64 << 24 |\n-     $buf[4+$i] as u64 << 32 |\n-     $buf[5+$i] as u64 << 40 |\n-     $buf[6+$i] as u64 << 48 |\n-     $buf[7+$i] as u64 << 56);\n+     ($buf[1+$i] as u64) << 8 |\n+     ($buf[2+$i] as u64) << 16 |\n+     ($buf[3+$i] as u64) << 24 |\n+     ($buf[4+$i] as u64) << 32 |\n+     ($buf[5+$i] as u64) << 40 |\n+     ($buf[6+$i] as u64) << 48 |\n+     ($buf[7+$i] as u64) << 56);\n     ($buf:expr, $i:expr, $len:expr) =>\n     ({\n         let mut t = 0;\n         let mut out = 0u64;\n         while t < $len {\n-            out |= $buf[t+$i] as u64 << t*8;\n+            out |= ($buf[t+$i] as u64) << t*8;\n             t += 1;\n         }\n         out"}, {"sha": "0faf43fc2ef641552af1e65538df93d6908175e5", "filename": "src/librand/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibrand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibrand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Flib.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -74,7 +74,7 @@ pub trait Rng {\n     /// these two methods. Similarly to `next_u32`, this rarely needs\n     /// to be called directly, prefer `r.gen()` to `r.next_u64()`.\n     fn next_u64(&mut self) -> u64 {\n-        (self.next_u32() as u64 << 32) | (self.next_u32() as u64)\n+        ((self.next_u32() as u64) << 32) | (self.next_u32() as u64)\n     }\n \n     /// Return the next random f32 selected from the half-open"}, {"sha": "83be9574f78b60e62c8fb6be9cd8320d5d7db824", "filename": "src/libstd/io/net/ip.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibstd%2Fio%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibstd%2Fio%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fnet%2Fip.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -267,8 +267,8 @@ impl<'a> Parser<'a> {\n                     });\n                     match ipv4 {\n                         Some(Ipv4Addr(a, b, c, d)) => {\n-                            groups[i + 0] = (a as u16 << 8) | (b as u16);\n-                            groups[i + 1] = (c as u16 << 8) | (d as u16);\n+                            groups[i + 0] = ((a as u16) << 8) | (b as u16);\n+                            groups[i + 1] = ((c as u16) << 8) | (d as u16);\n                             return (i + 2, true);\n                         }\n                         _ => {}"}, {"sha": "1e8246dabc5e4e08dd072d7243813fb15149423c", "filename": "src/libstd/sys/common/net.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcommon%2Fnet.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -55,10 +55,10 @@ pub enum InAddr {\n pub fn ip_to_inaddr(ip: IpAddr) -> InAddr {\n     match ip {\n         Ipv4Addr(a, b, c, d) => {\n-            let ip = (a as u32 << 24) |\n-                     (b as u32 << 16) |\n-                     (c as u32 <<  8) |\n-                     (d as u32 <<  0);\n+            let ip = ((a as u32) << 24) |\n+                     ((b as u32) << 16) |\n+                     ((c as u32) <<  8) |\n+                     ((d as u32) <<  0);\n             In4Addr(libc::in_addr {\n                 s_addr: Int::from_be(ip)\n             })"}, {"sha": "b3dc8c3a61a10bd876d8f92f1595e33ec5e87fc8", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 10, "deletions": 34, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -669,45 +669,22 @@ impl<'a> Parser<'a> {\n     /// `<` and continue. If a `<` is not seen, return false.\n     ///\n     /// This is meant to be used when parsing generics on a path to get the\n-    /// starting token. The `force` parameter is used to forcefully break up a\n-    /// `<<` token. If `force` is false, then `<<` is only broken when a lifetime\n-    /// shows up next. For example, consider the expression:\n-    ///\n-    ///      foo as bar << test\n-    ///\n-    /// The parser needs to know if `bar <<` is the start of a generic path or if\n-    /// it's a left-shift token. If `test` were a lifetime, then it's impossible\n-    /// for the token to be a left-shift, but if it's not a lifetime, then it's\n-    /// considered a left-shift.\n-    ///\n-    /// The reason for this is that the only current ambiguity with `<<` is when\n-    /// parsing closure types:\n-    ///\n-    ///      foo::<<'a> ||>();\n-    ///      impl Foo<<'a> ||>() { ... }\n-    fn eat_lt(&mut self, force: bool) -> bool {\n+    /// starting token.\n+    fn eat_lt(&mut self) -> bool {\n         match self.token {\n             token::Lt => { self.bump(); true }\n             token::BinOp(token::Shl) => {\n-                let next_lifetime = self.look_ahead(1, |t| match *t {\n-                    token::Lifetime(..) => true,\n-                    _ => false,\n-                });\n-                if force || next_lifetime {\n-                    let span = self.span;\n-                    let lo = span.lo + BytePos(1);\n-                    self.replace_token(token::Lt, lo, span.hi);\n-                    true\n-                } else {\n-                    false\n-                }\n+                let span = self.span;\n+                let lo = span.lo + BytePos(1);\n+                self.replace_token(token::Lt, lo, span.hi);\n+                true\n             }\n             _ => false,\n         }\n     }\n \n     fn expect_lt(&mut self) {\n-        if !self.eat_lt(true) {\n+        if !self.eat_lt() {\n             let found_token = self.this_token_to_string();\n             let token_str = Parser::token_to_string(&token::Lt);\n             self.fatal(format!(\"expected `{}`, found `{}`\",\n@@ -1582,9 +1559,8 @@ impl<'a> Parser<'a> {\n             TyTypeof(e)\n         } else if self.eat_keyword(keywords::Proc) {\n             self.parse_proc_type(Vec::new())\n-        } else if self.check(&token::Lt) {\n+        } else if self.eat_lt() {\n             // QUALIFIED PATH `<TYPE as TRAIT_REF>::item`\n-            self.bump();\n             let self_type = self.parse_ty_sum();\n             self.expect_keyword(keywords::As);\n             let trait_ref = self.parse_trait_ref();\n@@ -1870,7 +1846,7 @@ impl<'a> Parser<'a> {\n             let identifier = self.parse_ident();\n \n             // Parse types, optionally.\n-            let parameters = if self.eat_lt(false) {\n+            let parameters = if self.eat_lt() {\n                 let (lifetimes, types, bindings) = self.parse_generic_values_after_lt();\n \n                 ast::AngleBracketedParameters(ast::AngleBracketedParameterData {\n@@ -1931,7 +1907,7 @@ impl<'a> Parser<'a> {\n             }\n \n             // Check for a type segment.\n-            if self.eat_lt(false) {\n+            if self.eat_lt() {\n                 // Consumed `a::b::<`, go look for types\n                 let (lifetimes, types, bindings) = self.parse_generic_values_after_lt();\n                 segments.push(ast::PathSegment {"}, {"sha": "ec41904fd19c08a5352d55eab580410ef55fd8ff", "filename": "src/libtime/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibtime%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibtime%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtime%2Flib.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -149,8 +149,8 @@ pub fn get_time() -> Timespec {\n         // A FILETIME contains a 64-bit value representing the number of\n         // hectonanosecond (100-nanosecond) intervals since 1601-01-01T00:00:00Z.\n         // http://support.microsoft.com/kb/167296/en-us\n-        let ns_since_1601 = ((time.dwHighDateTime as u64 << 32) |\n-                             (time.dwLowDateTime  as u64 <<  0)) / 10;\n+        let ns_since_1601 = (((time.dwHighDateTime as u64) << 32) |\n+                             ((time.dwLowDateTime  as u64) <<  0)) / 10;\n         let ns_since_1970 = ns_since_1601 - NANOSECONDS_FROM_1601_TO_1970;\n \n         ((ns_since_1970 / 1000000) as i64,"}, {"sha": "9a09c13c1ab20c0a76f692c109eb8a37cba849f3", "filename": "src/libunicode/u_str.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibunicode%2Fu_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Flibunicode%2Fu_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunicode%2Fu_str.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -459,7 +459,7 @@ impl<'a> Iterator<Utf16Item> for Utf16Items<'a> {\n             }\n \n             // all ok, so lets decode it.\n-            let c = ((u - 0xD800) as u32 << 10 | (u2 - 0xDC00) as u32) + 0x1_0000;\n+            let c = (((u - 0xD800) as u32) << 10 | (u2 - 0xDC00) as u32) + 0x1_0000;\n             Some(Utf16Item::ScalarValue(unsafe {mem::transmute(c)}))\n         }\n     }"}, {"sha": "e0939dcb43b8d03e6758ab60f772cb0645aa79ef", "filename": "src/test/bench/shootout-reverse-complement.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-reverse-complement.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -62,7 +62,7 @@ impl Tables {\n         }\n         let mut table16 = [0;1 << 16];\n         for (i, v) in table16.iter_mut().enumerate() {\n-            *v = table8[i & 255] as u16 << 8 |\n+            *v = (table8[i & 255] as u16) << 8 |\n                  table8[i >> 8]  as u16;\n         }\n         Tables { table8: table8, table16: table16 }"}, {"sha": "8a68711a769fc2e5a5ab1b3e2a13a1b65c669946", "filename": "src/test/run-pass/parse-assoc-type-lt.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/d9769ec3834b62318da892925dc24c8883bb1635/src%2Ftest%2Frun-pass%2Fparse-assoc-type-lt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9769ec3834b62318da892925dc24c8883bb1635/src%2Ftest%2Frun-pass%2Fparse-assoc-type-lt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fparse-assoc-type-lt.rs?ref=d9769ec3834b62318da892925dc24c8883bb1635", "patch": "@@ -0,0 +1,18 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(associated_types)]\n+\n+trait Foo {\n+    type T;\n+    fn foo() -> Box<<Self as Foo>::T>;\n+}\n+\n+fn main() {}"}]}