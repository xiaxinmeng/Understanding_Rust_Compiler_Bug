{"sha": "d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95", "node_id": "C_kwDOAAsO6NoAKGQwNGVhMGZmMTkyMWZjZjRmNGJmMWRjNmYwODhiMjk0NzFjMzRmOTU", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2022-09-27T09:16:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-27T09:16:09Z"}, "message": "Allow passing rustix_use_libc cfg using RUSTFLAGS\n\nBefore this would error with\r\n\r\n```\r\nerror: unexpected `rustix_use_libc` as condition name\r\n  |\r\n  = note: `-D unexpected-cfgs` implied by `-D warnings`\r\n  = help: was set with `--cfg` but isn't in the `--check-cfg` expected names\r\n```\r\n\r\nI'm setting rustix_use_libc when testing bootstrapping rustc with cg_clif as I'm disabling inline asm here.", "tree": {"sha": "4577f4f3295d7376a815f3eda28e746f9ade125f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4577f4f3295d7376a815f3eda28e746f9ade125f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjMr9ZCRBK7hj4Ov3rIwAAZ00IABVZ7isz7eoGrz7qTenfkAM/\nRiu4lwTmhbFsm8wQJgcwdv2ls1VocVMYoYkcVy/RuXDOZjSqVXSTQIFlP4PuoooI\ns+UekbOolk8wS5xofjO9j5aXBzyh7+UpYFCvfvY8MQxml3nOBPEz1Q10z5865z9g\nc3K2jpZlLqNsuuO4E//gnA36AJK97zk2rZGd9TowqIMhIPvTpFD8zP8fW8CFf9aj\nGnUNInhQJTlZkR66t1vM3LfnBeQ/Gh3Wt4BD+R6rOQIHxFSqT2YZwelsf5u3wfPj\naxsqaMUBHwUNovTCsJvwk76Tw7NGnQFDzSNjtQ0Rf5Hb4A83VYVviknNnrSuWS0=\n=rAoG\n-----END PGP SIGNATURE-----\n", "payload": "tree 4577f4f3295d7376a815f3eda28e746f9ade125f\nparent de0b511daa91469dd251e736fb8914d2360ac0ec\nauthor bjorn3 <17426603+bjorn3@users.noreply.github.com> 1664270169 +0200\ncommitter GitHub <noreply@github.com> 1664270169 +0200\n\nAllow passing rustix_use_libc cfg using RUSTFLAGS\n\nBefore this would error with\r\n\r\n```\r\nerror: unexpected `rustix_use_libc` as condition name\r\n  |\r\n  = note: `-D unexpected-cfgs` implied by `-D warnings`\r\n  = help: was set with `--cfg` but isn't in the `--check-cfg` expected names\r\n```\r\n\r\nI'm setting rustix_use_libc when testing bootstrapping rustc with cg_clif as I'm disabling inline asm here."}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95", "html_url": "https://github.com/rust-lang/rust/commit/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "de0b511daa91469dd251e736fb8914d2360ac0ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/de0b511daa91469dd251e736fb8914d2360ac0ec", "html_url": "https://github.com/rust-lang/rust/commit/de0b511daa91469dd251e736fb8914d2360ac0ec"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "b20d43a3332c6440821d4c3ce85574387c9b0be5", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=d04ea0ff1921fcf4f4bf1dc6f088b29471c34f95", "patch": "@@ -229,6 +229,8 @@ const EXTRA_CHECK_CFGS: &[(Option<Mode>, &'static str, Option<&[&'static str]>)]\n     // FIXME: Used by proc-macro2, but we should not be triggering on external dependencies.\n     (Some(Mode::Rustc), \"span_locations\", None),\n     (Some(Mode::ToolRustc), \"span_locations\", None),\n+    // Can be passed in RUSTFLAGS to prevent direct syscalls in rustix.\n+    (None, \"rustix_use_libc\", None),\n ];\n \n /// A structure representing a Rust compiler."}]}