{"sha": "2707dc384d8a25ed35c33b0185201ad48b086cdf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3MDdkYzM4NGQ4YTI1ZWQzNWMzM2IwMTg1MjAxYWQ0OGIwODZjZGY=", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-12-23T08:13:19Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-12-23T08:13:19Z"}, "message": "Set RA_TARGET at job level", "tree": {"sha": "fea8daa0529da7a5001c929c3c01d25769095001", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fea8daa0529da7a5001c929c3c01d25769095001"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2707dc384d8a25ed35c33b0185201ad48b086cdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2707dc384d8a25ed35c33b0185201ad48b086cdf", "html_url": "https://github.com/rust-lang/rust/commit/2707dc384d8a25ed35c33b0185201ad48b086cdf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2707dc384d8a25ed35c33b0185201ad48b086cdf/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58b6763f206b80a3000eb3c7642181fa5fb98229", "url": "https://api.github.com/repos/rust-lang/rust/commits/58b6763f206b80a3000eb3c7642181fa5fb98229", "html_url": "https://github.com/rust-lang/rust/commit/58b6763f206b80a3000eb3c7642181fa5fb98229"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "7b9fbe6b80bd972480749bd11eab7ab9c25abfec", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 9, "deletions": 11, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/2707dc384d8a25ed35c33b0185201ad48b086cdf/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/2707dc384d8a25ed35c33b0185201ad48b086cdf/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=2707dc384d8a25ed35c33b0185201ad48b086cdf", "patch": "@@ -18,6 +18,8 @@ jobs:\n   dist-windows:\n     name: dist (Windows)\n     runs-on: windows-latest\n+    env:\n+      RA_TARGET: x86_64-pc-windows-msvc\n \n     steps:\n     - name: Checkout repository\n@@ -39,8 +41,6 @@ jobs:\n \n     - name: Dist\n       run: cargo xtask dist\n-      env:\n-        RA_TARGET: x86_64-pc-windows-msvc\n \n     - name: Upload artifacts\n       uses: actions/upload-artifact@v1\n@@ -51,6 +51,8 @@ jobs:\n   dist-ubuntu:\n     name: dist (Ubuntu 16.04)\n     runs-on: ubuntu-16.04\n+    env:\n+      RA_TARGET: x86_64-unknown-linux-gnu\n \n     steps:\n     - name: Checkout repository\n@@ -71,18 +73,14 @@ jobs:\n     - name: Dist\n       if: github.ref == 'refs/heads/release'\n       run: cargo xtask dist --client 0.2.$GITHUB_RUN_NUMBER\n-      env:\n-        RA_TARGET: x86_64-unknown-linux-gnu\n \n     - name: Dist\n       if: github.ref != 'refs/heads/release'\n       run: cargo xtask dist --nightly --client 0.3.$GITHUB_RUN_NUMBER-nightly\n-      env:\n-        RA_TARGET: x86_64-unknown-linux-gnu\n \n     - name: Nightly analysis-stats check\n       if: github.ref != 'refs/heads/release'\n-      run: target/x86_64-unknown-linux-gnu/release/rust-analyzer analysis-stats .\n+      run: target/${{ env.RA_TARGET }}/release/rust-analyzer analysis-stats .\n \n     - name: Upload artifacts\n       uses: actions/upload-artifact@v1\n@@ -93,6 +91,8 @@ jobs:\n   dist-macos-latest:\n     name: dist (MacOS latest)\n     runs-on: macos-latest\n+    env:\n+      RA_TARGET: x86_64-apple-darwin\n \n     steps:\n     - name: Checkout repository\n@@ -107,8 +107,6 @@ jobs:\n \n     - name: Dist\n       run: cargo xtask dist\n-      env:\n-        RA_TARGET: x86_64-apple-darwin\n \n     - name: Upload artifacts\n       uses: actions/upload-artifact@v1\n@@ -119,6 +117,8 @@ jobs:\n   dist-macos-11:\n     name: dist (MacOS 11.0)\n     runs-on: macos-11.0\n+    env:\n+      RA_TARGET: aarch64-apple-darwin\n \n     steps:\n     - name: Checkout repository\n@@ -134,8 +134,6 @@ jobs:\n \n     - name: Dist\n       run: cargo xtask dist\n-      env:\n-        RA_TARGET: aarch64-apple-darwin\n \n     - name: Upload artifacts\n       uses: actions/upload-artifact@v1"}]}