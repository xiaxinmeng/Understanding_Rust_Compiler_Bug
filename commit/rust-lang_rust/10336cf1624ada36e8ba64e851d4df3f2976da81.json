{"sha": "10336cf1624ada36e8ba64e851d4df3f2976da81", "node_id": "C_kwDOAAsO6NoAKDEwMzM2Y2YxNjI0YWRhMzZlOGJhNjRlODUxZDRkZjNmMjk3NmRhODE", "commit": {"author": {"name": "Chase Wilson", "email": "buckshot1233@gmail.com", "date": "2022-06-06T15:19:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-06T15:19:33Z"}, "message": "Update src/test/ui/unsized/issue-97732.rs\n\nCo-authored-by: Eduard-Mihai Burtescu <edy.burt@gmail.com>", "tree": {"sha": "70140dee4f315bf2c89faa38c0e70e458fd75f65", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/70140dee4f315bf2c89faa38c0e70e458fd75f65"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/10336cf1624ada36e8ba64e851d4df3f2976da81", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJinhsFCRBK7hj4Ov3rIwAAoywIADfTtxiu3OcT5iEsKPuMJWxC\n8vhTxerpDjXxwf/D76ZF8b4kcWqY72eRLaB9Wbz74IYeW82+ak+PvW6jHHva/MVf\ngbjuFufxxFeU9o5HHf6FF9OnmPE/4szAMioWk4+tGauBgRMS0c6K1/Q0u3sX1PHw\nDiFGgs/2uWIVtnsqxmlvDF6ILohz6aU89XzFudiDD/BwFykL1QxXpvMyHroTJpSy\nLSjsSO5MK2VXgYB36OzvpVdAHvmZvaVq4SjFC50oI4wC5AJFSo3j26Tb+iG1NSo5\n5/IW5Xeh+6QI2UomGAUSxXEN33hyS6h09DuM7ejmIHla0QyjChA+OduLK58W01c=\n=fSvy\n-----END PGP SIGNATURE-----\n", "payload": "tree 70140dee4f315bf2c89faa38c0e70e458fd75f65\nparent 857453d36c5b396d2009e08b38b672695c5cddba\nauthor Chase Wilson <buckshot1233@gmail.com> 1654528773 -0500\ncommitter GitHub <noreply@github.com> 1654528773 -0500\n\nUpdate src/test/ui/unsized/issue-97732.rs\n\nCo-authored-by: Eduard-Mihai Burtescu <edy.burt@gmail.com>"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/10336cf1624ada36e8ba64e851d4df3f2976da81", "html_url": "https://github.com/rust-lang/rust/commit/10336cf1624ada36e8ba64e851d4df3f2976da81", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/10336cf1624ada36e8ba64e851d4df3f2976da81/comments", "author": {"login": "Kixiron", "id": 25047011, "node_id": "MDQ6VXNlcjI1MDQ3MDEx", "avatar_url": "https://avatars.githubusercontent.com/u/25047011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kixiron", "html_url": "https://github.com/Kixiron", "followers_url": "https://api.github.com/users/Kixiron/followers", "following_url": "https://api.github.com/users/Kixiron/following{/other_user}", "gists_url": "https://api.github.com/users/Kixiron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kixiron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kixiron/subscriptions", "organizations_url": "https://api.github.com/users/Kixiron/orgs", "repos_url": "https://api.github.com/users/Kixiron/repos", "events_url": "https://api.github.com/users/Kixiron/events{/privacy}", "received_events_url": "https://api.github.com/users/Kixiron/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "857453d36c5b396d2009e08b38b672695c5cddba", "url": "https://api.github.com/repos/rust-lang/rust/commits/857453d36c5b396d2009e08b38b672695c5cddba", "html_url": "https://github.com/rust-lang/rust/commit/857453d36c5b396d2009e08b38b672695c5cddba"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "72f765033969a69ecc50266c6a90078e6084257c", "filename": "src/test/ui/unsized/issue-97732.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/10336cf1624ada36e8ba64e851d4df3f2976da81/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10336cf1624ada36e8ba64e851d4df3f2976da81/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs?ref=10336cf1624ada36e8ba64e851d4df3f2976da81", "patch": "@@ -15,9 +15,14 @@ impl<S: ?Sized, T: ?Sized> CoerceUnsized<BoxWithZstTail<T>> for BoxWithZstTail<S\n }\n \n pub fn noop_dyn_upcast_with_zst_tail(\n-    b: BoxWithZstTail<dyn Send + Sync>,\n-) -> BoxWithZstTail<dyn Send> {\n+    b: BoxWithZstTail<dyn ToString + Send>,\n+) -> BoxWithZstTail<dyn ToString> {\n     b\n }\n \n-fn main() {}\n+fn main() {\n+    let original = \"foo\";\n+    let boxed = BoxWithZstTail(Box::new(original) as Box<dyn ToString + Send>, ());\n+    let noop_upcasted = noop_dyn_upcast_with_zst_tail(boxed);\n+    assert_eq!(original, noop_upcasted.0.to_string());\n+}"}]}