{"sha": "8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "node_id": "C_kwDOAAsO6NoAKDhlYjdkZGZkMTdmNDJiYmE0OTNlNGU4NmU0NDIzNmZjYmE2ZDhlYWQ", "commit": {"author": {"name": "notseanray", "email": "seanray410@gmail.com", "date": "2022-03-29T18:05:58Z"}, "committer": {"name": "NotCreative21", "email": "seanray410@gmail.com", "date": "2022-06-21T10:15:31Z"}, "message": "update cpu-usage-over-time-plot script\n\nfix tidy checks and correct cpu-usage-over-time-plot script", "tree": {"sha": "ce2e8812718b9a849a99725467e0d928669af4ac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ce2e8812718b9a849a99725467e0d928669af4ac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "html_url": "https://github.com/rust-lang/rust/commit/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead/comments", "author": {"login": "notseanray", "id": 61510083, "node_id": "MDQ6VXNlcjYxNTEwMDgz", "avatar_url": "https://avatars.githubusercontent.com/u/61510083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notseanray", "html_url": "https://github.com/notseanray", "followers_url": "https://api.github.com/users/notseanray/followers", "following_url": "https://api.github.com/users/notseanray/following{/other_user}", "gists_url": "https://api.github.com/users/notseanray/gists{/gist_id}", "starred_url": "https://api.github.com/users/notseanray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notseanray/subscriptions", "organizations_url": "https://api.github.com/users/notseanray/orgs", "repos_url": "https://api.github.com/users/notseanray/repos", "events_url": "https://api.github.com/users/notseanray/events{/privacy}", "received_events_url": "https://api.github.com/users/notseanray/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notseanray", "id": 61510083, "node_id": "MDQ6VXNlcjYxNTEwMDgz", "avatar_url": "https://avatars.githubusercontent.com/u/61510083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notseanray", "html_url": "https://github.com/notseanray", "followers_url": "https://api.github.com/users/notseanray/followers", "following_url": "https://api.github.com/users/notseanray/following{/other_user}", "gists_url": "https://api.github.com/users/notseanray/gists{/gist_id}", "starred_url": "https://api.github.com/users/notseanray/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notseanray/subscriptions", "organizations_url": "https://api.github.com/users/notseanray/orgs", "repos_url": "https://api.github.com/users/notseanray/repos", "events_url": "https://api.github.com/users/notseanray/events{/privacy}", "received_events_url": "https://api.github.com/users/notseanray/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05d22212e89588e7c443cc6b9bc0e4e02fdfbc8d", "url": "https://api.github.com/repos/rust-lang/rust/commits/05d22212e89588e7c443cc6b9bc0e4e02fdfbc8d", "html_url": "https://github.com/rust-lang/rust/commit/05d22212e89588e7c443cc6b9bc0e4e02fdfbc8d"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "1c34255919434528778692442631789887f6ba58", "filename": "src/etc/cpu-usage-over-time-plot.sh", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead/src%2Fetc%2Fcpu-usage-over-time-plot.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead/src%2Fetc%2Fcpu-usage-over-time-plot.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcpu-usage-over-time-plot.sh?ref=8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "patch": "@@ -7,13 +7,21 @@\n # commit SHA of the build you're interested in, and the second is the name of\n # the builder. For example:\n #\n-#  ./src/etc/cpu-usage-over-time-plot.sh e699ea096fcc2fc9ce8e8bcf884e11496a31cc9f i686-mingw-1\n+#  ./src/etc/cpu-usage-over-time-plot.sh 7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c x86_64-gnu\n #\n # That will generate `$builder.png` in the current directory which you can open\n # up to see a hopefully pretty graph.\n #\n # Improvements to this script are greatly appreciated!\n \n+if [[ $# != 2 ]]; then\n+    echo \"expected 2 arguments, recieved $#\"\n+    echo \"example usage: './src/etc/cpu-usage-over-time-plot.sh \\\n+7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c \\\n+x86_64-gnu'\"\n+    exit 1\n+fi\n+\n set -ex\n \n bucket=rust-lang-ci2\n@@ -30,7 +38,7 @@ set ylabel \"CPU Usage %\"\n set xlabel \"Time\"\n set datafile sep ','\n set term png size 3000,1000\n-set output \"$builder.png\"\n+set output \"$builder-$commit-cpu-usage-plot.png\"\n set grid\n \n f(x) = mean_y\n@@ -43,7 +51,9 @@ set ytics 10\n set boxwidth 0.5\n \n plot \\\\\n-   mean_y with lines linetype 1 linecolor rgb \"#ff0000\" title \"average\", \\\\\n-   \"cpu-$builder.csv\" using 1:(100-\\$2) with points pointtype 7 pointsize 0.4 title \"$builder\", \\\\\n-   \"\" using 1:(100-\\$2) smooth bezier linewidth 3 title \"bezier\"\n+    mean_y with lines linetype 1 linecolor rgb \"#ff0000\" title \"average\", \"cpu-$builder.csv\" \\\\\n+    using 1:(100-\\$2) with points pointtype 7 pointsize 0.4 title \"$builder\", \"\" \\\\\n+    using 1:(100-\\$2) smooth bezier linewidth 3 title \"bezier\"\n EOF\n+\n+rm \"cpu-$builder.csv\""}]}