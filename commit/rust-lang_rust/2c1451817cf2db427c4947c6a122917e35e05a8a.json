{"sha": "2c1451817cf2db427c4947c6a122917e35e05a8a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMTQ1MTgxN2NmMmRiNDI3YzQ5NDdjNmExMjI5MTdlMzVlMDVhOGE=", "commit": {"author": {"name": "Terry Raimondo", "email": "terry.raimondo@gmail.com", "date": "2018-06-03T10:26:50Z"}, "committer": {"name": "Terry Raimondo", "email": "terry.raimondo@gmail.com", "date": "2018-06-03T10:26:50Z"}, "message": "Compute digits vec only once", "tree": {"sha": "970a6670f0ef9ddf5f2d04a2090c952c649c7b16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/970a6670f0ef9ddf5f2d04a2090c952c649c7b16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c1451817cf2db427c4947c6a122917e35e05a8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c1451817cf2db427c4947c6a122917e35e05a8a", "html_url": "https://github.com/rust-lang/rust/commit/2c1451817cf2db427c4947c6a122917e35e05a8a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c1451817cf2db427c4947c6a122917e35e05a8a/comments", "author": {"login": "terry90", "id": 1941159, "node_id": "MDQ6VXNlcjE5NDExNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1941159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terry90", "html_url": "https://github.com/terry90", "followers_url": "https://api.github.com/users/terry90/followers", "following_url": "https://api.github.com/users/terry90/following{/other_user}", "gists_url": "https://api.github.com/users/terry90/gists{/gist_id}", "starred_url": "https://api.github.com/users/terry90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terry90/subscriptions", "organizations_url": "https://api.github.com/users/terry90/orgs", "repos_url": "https://api.github.com/users/terry90/repos", "events_url": "https://api.github.com/users/terry90/events{/privacy}", "received_events_url": "https://api.github.com/users/terry90/received_events", "type": "User", "site_admin": false}, "committer": {"login": "terry90", "id": 1941159, "node_id": "MDQ6VXNlcjE5NDExNTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1941159?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terry90", "html_url": "https://github.com/terry90", "followers_url": "https://api.github.com/users/terry90/followers", "following_url": "https://api.github.com/users/terry90/following{/other_user}", "gists_url": "https://api.github.com/users/terry90/gists{/gist_id}", "starred_url": "https://api.github.com/users/terry90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terry90/subscriptions", "organizations_url": "https://api.github.com/users/terry90/orgs", "repos_url": "https://api.github.com/users/terry90/repos", "events_url": "https://api.github.com/users/terry90/events{/privacy}", "received_events_url": "https://api.github.com/users/terry90/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed011c45c4fd9177934e14ed48e1bac0a10ee891", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed011c45c4fd9177934e14ed48e1bac0a10ee891", "html_url": "https://github.com/rust-lang/rust/commit/ed011c45c4fd9177934e14ed48e1bac0a10ee891"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "e5d855c10aa8bdcfa65a20f3699e73f188d09146", "filename": "clippy_lints/src/literal_representation.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/2c1451817cf2db427c4947c6a122917e35e05a8a/clippy_lints%2Fsrc%2Fliteral_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c1451817cf2db427c4947c6a122917e35e05a8a/clippy_lints%2Fsrc%2Fliteral_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fliteral_representation.rs?ref=2c1451817cf2db427c4947c6a122917e35e05a8a", "patch": "@@ -193,18 +193,19 @@ impl<'a> DigitInfo<'a> {\n                 self.suffix.unwrap_or(\"\")\n             )\n         } else {\n-            let mut hint = self.digits\n+            let filtered_digits_vec = self.digits\n                 .chars()\n-                .rev()\n                 .filter(|&c| c != '_')\n-                .collect::<Vec<_>>()\n+                .rev()\n+                .collect::<Vec<_>>();\n+            let mut hint = filtered_digits_vec\n                 .chunks(group_size)\n                 .map(|chunk| chunk.into_iter().rev().collect())\n                 .rev()\n                 .collect::<Vec<String>>()\n                 .join(\"_\");\n             // Forces hexadecimal values to be grouped by 4 being filled with zeroes (e.g 0x00ab_cdef)\n-            let nb_digits_to_fill = self.digits.chars().filter(|&c| c != '_').collect::<Vec<_>>().len() % 4;\n+            let nb_digits_to_fill = filtered_digits_vec.len() % 4;\n             if self.radix == Radix::Hexadecimal && nb_digits_to_fill != 0 {\n                 hint = format!(\"{:0>4}{}\", &hint[..nb_digits_to_fill], &hint[nb_digits_to_fill..]);\n             }"}]}