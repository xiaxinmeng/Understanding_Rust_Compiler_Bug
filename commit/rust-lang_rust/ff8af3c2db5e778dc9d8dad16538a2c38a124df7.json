{"sha": "ff8af3c2db5e778dc9d8dad16538a2c38a124df7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmOGFmM2MyZGI1ZTc3OGRjOWQ4ZGFkMTY1MzhhMmMzOGExMjRkZjc=", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-13T20:28:46Z"}, "committer": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "respindola@mozilla.com", "date": "2011-06-13T23:10:51Z"}, "message": "Use the driver to build stage3. This worked on all 3 platforms for me,\nlets see if the bots agree.", "tree": {"sha": "e0884ab9e584ebc60496f4ef82827887f920f25c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e0884ab9e584ebc60496f4ef82827887f920f25c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff8af3c2db5e778dc9d8dad16538a2c38a124df7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff8af3c2db5e778dc9d8dad16538a2c38a124df7", "html_url": "https://github.com/rust-lang/rust/commit/ff8af3c2db5e778dc9d8dad16538a2c38a124df7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff8af3c2db5e778dc9d8dad16538a2c38a124df7/comments", "author": null, "committer": null, "parents": [{"sha": "a3be0454f9292fff21744b206304ca5c80716d3f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3be0454f9292fff21744b206304ca5c80716d3f", "html_url": "https://github.com/rust-lang/rust/commit/a3be0454f9292fff21744b206304ca5c80716d3f"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "2ad9cbb4cbafd54c4e547ba2b508cd5abd84e8db", "filename": "mk/stage3.mk", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/ff8af3c2db5e778dc9d8dad16538a2c38a124df7/mk%2Fstage3.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ff8af3c2db5e778dc9d8dad16538a2c38a124df7/mk%2Fstage3.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage3.mk?ref=ff8af3c2db5e778dc9d8dad16538a2c38a124df7", "patch": "@@ -18,10 +18,6 @@ stage3/$(CFG_RUSTCLIB): stage3/librustc.o stage3/glue.o\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage3/glue.o $(CFG_GCCISH_LINK_FLAGS) \\\n \t-o $@ $< -Lstage3 -Lrustllvm -Lrt -lrustrt -lrustllvm -lstd\n \n-stage3/rustc.o: $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ2)\n-\t@$(call E, compile: $@)\n-\t$(STAGE2) -c -o $@ $<\n-\n stage3/glue.o: stage2/rustc$(X) stage2/$(CFG_STDLIB) stage2/intrinsics.bc \\\n                rustllvm/$(CFG_RUSTLLVM) rt/$(CFG_RUNTIME)\n \t@$(call E, generate: $@)\n@@ -41,10 +37,9 @@ stage3/%.o: stage3/%.s\n \t@$(call E, assemble [gcc]: $@)\n \t$(Q)gcc $(CFG_GCCISH_CFLAGS) -o $@ -c $<\n \n-stage3/%$(X): stage3/%.o  $(SREQ2)\n-\t@$(call E, link [gcc]: $@)\n-\t$(Q)gcc $(CFG_GCCISH_CFLAGS) stage3/glue.o -o $@ $< \\\n-      -Lstage3 -Lrustllvm -Lrt rt/main.o -lrustrt -lrustllvm -lstd -lm\n+stage3/%$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ2)\n+\t@$(call E, compile_and_link: $@)\n+\t$(STAGE2) -o $@ $<\n \t@# dsymutil sometimes fails or prints a warning, but the\n \t@# program still runs.  Since it simplifies debugging other\n \t@# programs, I\\'ll live with the noise."}]}