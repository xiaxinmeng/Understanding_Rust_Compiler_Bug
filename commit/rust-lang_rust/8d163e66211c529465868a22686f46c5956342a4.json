{"sha": "8d163e66211c529465868a22686f46c5956342a4", "node_id": "C_kwDOAAsO6NoAKDhkMTYzZTY2MjExYzUyOTQ2NTg2OGEyMjY4NmY0NmM1OTU2MzQyYTQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-15T04:39:37Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-02-15T04:39:37Z"}, "message": "Auto merge of #93863 - pierwill:fix-93676, r=Mark-Simulacrum\n\nUpdate `sha1`, `sha2`, and `md-5` dependencies\n\nThis replaces the deprecated [`cpuid-bool`](https://crates.io/crates/cpuid-bool) dependency with [`cpufeatures`](https://crates.io/crates/cpufeatures), while adding [`crypto-common`](https://crates.io/crates/crypto-common) as a new dependency.\n\nCloses #93676.", "tree": {"sha": "9544c2412f1ab693cb8e6ec8d9841ea0a6ab11be", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9544c2412f1ab693cb8e6ec8d9841ea0a6ab11be"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d163e66211c529465868a22686f46c5956342a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d163e66211c529465868a22686f46c5956342a4", "html_url": "https://github.com/rust-lang/rust/commit/8d163e66211c529465868a22686f46c5956342a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d163e66211c529465868a22686f46c5956342a4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c3f0cddde337ef596b45a8ac53aae4c8845237b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c3f0cddde337ef596b45a8ac53aae4c8845237b", "html_url": "https://github.com/rust-lang/rust/commit/0c3f0cddde337ef596b45a8ac53aae4c8845237b"}, {"sha": "ef6dd124d67305edeb5e9e720cc2852936ffc044", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef6dd124d67305edeb5e9e720cc2852936ffc044", "html_url": "https://github.com/rust-lang/rust/commit/ef6dd124d67305edeb5e9e720cc2852936ffc044"}], "stats": {"total": 84, "additions": 43, "deletions": 41}, "files": [{"sha": "b330155d1448316bac65ed51643760676aa34a52", "filename": "Cargo.lock", "status": "modified", "additions": 36, "deletions": 35, "changes": 71, "blob_url": "https://github.com/rust-lang/rust/blob/8d163e66211c529465868a22686f46c5956342a4/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/8d163e66211c529465868a22686f46c5956342a4/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=8d163e66211c529465868a22686f46c5956342a4", "patch": "@@ -194,9 +194,9 @@ dependencies = [\n \n [[package]]\n name = \"block-buffer\"\n-version = \"0.9.0\"\n+version = \"0.10.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4152116fd6e9dadb291ae18fc1ec3575ed6d84c29642d97890f4b4a3417297e4\"\n+checksum = \"0bf7fe51849ea569fd452f37822f606a5cabb684dc918707a0193fd4664ff324\"\n dependencies = [\n  \"generic-array 0.14.4\",\n ]\n@@ -821,10 +821,13 @@ name = \"coverage_test_macros\"\n version = \"0.0.0\"\n \n [[package]]\n-name = \"cpuid-bool\"\n-version = \"0.1.2\"\n+name = \"cpufeatures\"\n+version = \"0.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"8aebca1129a03dc6dc2b127edd729435bbc4a37e1d5f4d7513165089ceb02634\"\n+checksum = \"95059428f66df56b63431fdb4e1947ed2190586af5c5a8a8b71122bdf5a7f469\"\n+dependencies = [\n+ \"libc\",\n+]\n \n [[package]]\n name = \"crates-io\"\n@@ -891,6 +894,15 @@ dependencies = [\n  \"lazy_static\",\n ]\n \n+[[package]]\n+name = \"crypto-common\"\n+version = \"0.1.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"a4600d695eb3f6ce1cd44e6e291adceb2cc3ab12f20a33777ecd0bf6eba34e06\"\n+dependencies = [\n+ \"generic-array 0.14.4\",\n+]\n+\n [[package]]\n name = \"crypto-hash\"\n version = \"0.3.4\"\n@@ -1005,11 +1017,12 @@ dependencies = [\n \n [[package]]\n name = \"digest\"\n-version = \"0.9.0\"\n+version = \"0.10.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d3dd60d1080a57a05ab032377049e0591415d2b31afd7028356dbf3cc6dcb066\"\n+checksum = \"8cb780dce4f9a8f5c087362b3a4595936b2019e7c8b30f2c3e9a7e94e6ae9837\"\n dependencies = [\n- \"generic-array 0.14.4\",\n+ \"block-buffer 0.10.2\",\n+ \"crypto-common\",\n ]\n \n [[package]]\n@@ -2173,13 +2186,11 @@ checksum = \"7ffc5c5338469d4d3ea17d269fa8ea3512ad247247c30bd2df69e68309ed0a08\"\n \n [[package]]\n name = \"md-5\"\n-version = \"0.9.1\"\n+version = \"0.10.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"7b5a279bb9607f9f53c22d496eade00d138d1bdcccd07d74650387cf94942a15\"\n+checksum = \"e6a38fc55c8bbc10058782919516f88826e70320db6d206aebc49611d24216ae\"\n dependencies = [\n- \"block-buffer 0.9.0\",\n- \"digest 0.9.0\",\n- \"opaque-debug 0.3.0\",\n+ \"digest 0.10.2\",\n ]\n \n [[package]]\n@@ -2435,12 +2446,6 @@ version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"2839e79665f131bdb5782e51f2c6c9599c133c6098982a54c794358bf432529c\"\n \n-[[package]]\n-name = \"opaque-debug\"\n-version = \"0.3.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"624a8340c38c1b80fd549087862da4ba43e08858af025b236e509b6649fc13d5\"\n-\n [[package]]\n name = \"opener\"\n version = \"0.5.0\"\n@@ -4253,7 +4258,7 @@ dependencies = [\n  \"rustc_macros\",\n  \"rustc_serialize\",\n  \"scoped-tls\",\n- \"sha-1 0.9.1\",\n+ \"sha-1 0.10.0\",\n  \"sha2\",\n  \"tracing\",\n  \"unicode-width\",\n@@ -4647,33 +4652,29 @@ dependencies = [\n  \"block-buffer 0.7.3\",\n  \"digest 0.8.1\",\n  \"fake-simd\",\n- \"opaque-debug 0.2.3\",\n+ \"opaque-debug\",\n ]\n \n [[package]]\n name = \"sha-1\"\n-version = \"0.9.1\"\n+version = \"0.10.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"170a36ea86c864a3f16dd2687712dd6646f7019f301e57537c7f4dc9f5916770\"\n+checksum = \"028f48d513f9678cda28f6e4064755b3fbb2af6acd672f2c209b62323f7aea0f\"\n dependencies = [\n- \"block-buffer 0.9.0\",\n- \"cfg-if 0.1.10\",\n- \"cpuid-bool\",\n- \"digest 0.9.0\",\n- \"opaque-debug 0.3.0\",\n+ \"cfg-if 1.0.0\",\n+ \"cpufeatures\",\n+ \"digest 0.10.2\",\n ]\n \n [[package]]\n name = \"sha2\"\n-version = \"0.9.1\"\n+version = \"0.10.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2933378ddfeda7ea26f48c555bdad8bb446bf8a3d17832dc83e380d444cfb8c1\"\n+checksum = \"99c3bd8169c58782adad9290a9af5939994036b76187f7b4f0e6de91dbbfc0ec\"\n dependencies = [\n- \"block-buffer 0.9.0\",\n- \"cfg-if 0.1.10\",\n- \"cpuid-bool\",\n- \"digest 0.9.0\",\n- \"opaque-debug 0.3.0\",\n+ \"cfg-if 1.0.0\",\n+ \"cpufeatures\",\n+ \"digest 0.10.2\",\n ]\n \n [[package]]"}, {"sha": "7227b193f2194046d2aa81e15ffbb62ad673140f", "filename": "compiler/rustc_span/Cargo.toml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8d163e66211c529465868a22686f46c5956342a4/compiler%2Frustc_span%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/8d163e66211c529465868a22686f46c5956342a4/compiler%2Frustc_span%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2FCargo.toml?ref=8d163e66211c529465868a22686f46c5956342a4", "patch": "@@ -16,6 +16,6 @@ scoped-tls = \"1.0\"\n unicode-width = \"0.1.4\"\n cfg-if = \"0.1.2\"\n tracing = \"0.1\"\n-sha1 = { package = \"sha-1\", version = \"0.9\" }\n-sha2 = \"0.9\"\n-md5 = { package = \"md-5\", version = \"0.9\" }\n+sha1 = { package = \"sha-1\", version = \"0.10.0\" }\n+sha2 = \"0.10.1\"\n+md5 = { package = \"md-5\", version = \"0.10.0\" }"}, {"sha": "dea2fbf04be59b52f5aacac8c9c32018346c8ffc", "filename": "compiler/rustc_span/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8d163e66211c529465868a22686f46c5956342a4/compiler%2Frustc_span%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d163e66211c529465868a22686f46c5956342a4/compiler%2Frustc_span%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Flib.rs?ref=8d163e66211c529465868a22686f46c5956342a4", "patch": "@@ -68,8 +68,8 @@ use std::ops::{Add, Range, Sub};\n use std::path::{Path, PathBuf};\n use std::str::FromStr;\n \n+use md5::Digest;\n use md5::Md5;\n-use sha1::Digest;\n use sha1::Sha1;\n use sha2::Sha256;\n "}, {"sha": "c022d3aa0acd7ca18c18add8b97507f9a7678f6e", "filename": "src/tools/build-manifest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8d163e66211c529465868a22686f46c5956342a4/src%2Ftools%2Fbuild-manifest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/8d163e66211c529465868a22686f46c5956342a4/src%2Ftools%2Fbuild-manifest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2FCargo.toml?ref=8d163e66211c529465868a22686f46c5956342a4", "patch": "@@ -10,7 +10,7 @@ serde_json = \"1.0\"\n anyhow = \"1.0.32\"\n flate2 = \"1.0.16\"\n tar = \"0.4.29\"\n-sha2 = \"0.9.1\"\n+sha2 = \"0.10.1\"\n rayon = \"1.5.1\"\n hex = \"0.4.2\"\n num_cpus = \"1.13.0\""}, {"sha": "52429fee46150f9c4f1acea967a6d63794fde3f3", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8d163e66211c529465868a22686f46c5956342a4/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d163e66211c529465868a22686f46c5956342a4/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=8d163e66211c529465868a22686f46c5956342a4", "patch": "@@ -93,11 +93,12 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"chrono\",\n     \"cmake\",\n     \"compiler_builtins\",\n-    \"cpuid-bool\",\n+    \"cpufeatures\",\n     \"crc32fast\",\n     \"crossbeam-deque\",\n     \"crossbeam-epoch\",\n     \"crossbeam-utils\",\n+    \"crypto-common\",\n     \"cstr\",\n     \"datafrog\",\n     \"difference\","}]}