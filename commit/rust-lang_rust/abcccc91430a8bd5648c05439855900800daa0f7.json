{"sha": "abcccc91430a8bd5648c05439855900800daa0f7", "node_id": "C_kwDOAAsO6NoAKGFiY2NjYzkxNDMwYThiZDU2NDhjMDU0Mzk4NTU5MDA4MDBkYWEwZjc", "commit": {"author": {"name": "Fausto", "email": "mi9uel9@gmail.com", "date": "2022-02-28T23:16:19Z"}, "committer": {"name": "Fausto", "email": "mi9uel9@gmail.com", "date": "2022-02-28T23:16:19Z"}, "message": "Suggest adding a new lifetime parameter when two elided lifetimes should match up for traits and impls.\n\nIssue #94462", "tree": {"sha": "98214fc2e25c477f270ac02607fb2c7634b54cad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98214fc2e25c477f270ac02607fb2c7634b54cad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/abcccc91430a8bd5648c05439855900800daa0f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/abcccc91430a8bd5648c05439855900800daa0f7", "html_url": "https://github.com/rust-lang/rust/commit/abcccc91430a8bd5648c05439855900800daa0f7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/abcccc91430a8bd5648c05439855900800daa0f7/comments", "author": {"login": "kckeiks", "id": 24687641, "node_id": "MDQ6VXNlcjI0Njg3NjQx", "avatar_url": "https://avatars.githubusercontent.com/u/24687641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kckeiks", "html_url": "https://github.com/kckeiks", "followers_url": "https://api.github.com/users/kckeiks/followers", "following_url": "https://api.github.com/users/kckeiks/following{/other_user}", "gists_url": "https://api.github.com/users/kckeiks/gists{/gist_id}", "starred_url": "https://api.github.com/users/kckeiks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kckeiks/subscriptions", "organizations_url": "https://api.github.com/users/kckeiks/orgs", "repos_url": "https://api.github.com/users/kckeiks/repos", "events_url": "https://api.github.com/users/kckeiks/events{/privacy}", "received_events_url": "https://api.github.com/users/kckeiks/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kckeiks", "id": 24687641, "node_id": "MDQ6VXNlcjI0Njg3NjQx", "avatar_url": "https://avatars.githubusercontent.com/u/24687641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kckeiks", "html_url": "https://github.com/kckeiks", "followers_url": "https://api.github.com/users/kckeiks/followers", "following_url": "https://api.github.com/users/kckeiks/following{/other_user}", "gists_url": "https://api.github.com/users/kckeiks/gists{/gist_id}", "starred_url": "https://api.github.com/users/kckeiks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kckeiks/subscriptions", "organizations_url": "https://api.github.com/users/kckeiks/orgs", "repos_url": "https://api.github.com/users/kckeiks/repos", "events_url": "https://api.github.com/users/kckeiks/events{/privacy}", "received_events_url": "https://api.github.com/users/kckeiks/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "97cde9fe08804a3a5208d77f6870ad7d43f8c9c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/97cde9fe08804a3a5208d77f6870ad7d43f8c9c3", "html_url": "https://github.com/rust-lang/rust/commit/97cde9fe08804a3a5208d77f6870ad7d43f8c9c3"}], "stats": {"total": 310, "additions": 258, "deletions": 52}, "files": [{"sha": "8022cd01f87b1993b4d68f7a30093dcba5209c6e", "filename": "compiler/rustc_infer/src/infer/error_reporting/nice_region_error/different_lifetimes.rs", "status": "modified", "additions": 48, "deletions": 52, "changes": 100, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -166,59 +166,55 @@ impl<'a, 'tcx> NiceRegionError<'a, 'tcx> {\n             if lifetime_sub.name.is_elided() && lifetime_sup.name.is_elided() {\n                 if let Some(anon_reg) = self.tcx().is_suitable_region(sub) {\n                     let hir_id = self.tcx().hir().local_def_id_to_hir_id(anon_reg.def_id);\n-                    if let hir::Node::Item(&hir::Item {\n-                        kind: hir::ItemKind::Fn(_, ref generics, ..),\n-                        ..\n-                    }) = self.tcx().hir().get(hir_id)\n-                    {\n-                        let (suggestion_param_name, introduce_new) = generics\n-                            .params\n-                            .iter()\n-                            .find(|p| matches!(p.kind, GenericParamKind::Lifetime { .. }))\n-                            .and_then(|p| self.tcx().sess.source_map().span_to_snippet(p.span).ok())\n-                            .map(|name| (name, false))\n-                            .unwrap_or_else(|| (\"'a\".to_string(), true));\n-\n-                        let mut suggestions = vec![\n-                            if let hir::LifetimeName::Underscore = lifetime_sub.name {\n-                                (lifetime_sub.span, suggestion_param_name.clone())\n-                            } else {\n-                                (\n-                                    lifetime_sub.span.shrink_to_hi(),\n-                                    suggestion_param_name.clone() + \" \",\n-                                )\n-                            },\n-                            if let hir::LifetimeName::Underscore = lifetime_sup.name {\n-                                (lifetime_sup.span, suggestion_param_name.clone())\n-                            } else {\n-                                (\n-                                    lifetime_sup.span.shrink_to_hi(),\n-                                    suggestion_param_name.clone() + \" \",\n-                                )\n-                            },\n-                        ];\n-\n-                        if introduce_new {\n-                            let new_param_suggestion = match &generics.params {\n-                                [] => (generics.span, format!(\"<{}>\", suggestion_param_name)),\n-                                [first, ..] => (\n-                                    first.span.shrink_to_lo(),\n-                                    format!(\"{}, \", suggestion_param_name),\n-                                ),\n-                            };\n-\n-                            suggestions.push(new_param_suggestion);\n-                        }\n-\n-                        err.multipart_suggestion(\n-                            \"consider introducing a named lifetime parameter\",\n-                            suggestions,\n-                            Applicability::MaybeIncorrect,\n-                        );\n-                        err.note(\n-                            \"each elided lifetime in input position becomes a distinct lifetime\",\n-                        );\n+\n+                    let generics = match self.tcx().hir().get(hir_id) {\n+                        hir::Node::Item(&hir::Item {\n+                            kind: hir::ItemKind::Fn(_, ref generics, ..),\n+                            ..\n+                        })\n+                        | hir::Node::TraitItem(&hir::TraitItem { ref generics, .. })\n+                        | hir::Node::ImplItem(&hir::ImplItem { ref generics, .. }) => generics,\n+                        _ => return,\n+                    };\n+\n+                    let (suggestion_param_name, introduce_new) = generics\n+                        .params\n+                        .iter()\n+                        .find(|p| matches!(p.kind, GenericParamKind::Lifetime { .. }))\n+                        .and_then(|p| self.tcx().sess.source_map().span_to_snippet(p.span).ok())\n+                        .map(|name| (name, false))\n+                        .unwrap_or_else(|| (\"'a\".to_string(), true));\n+\n+                    let mut suggestions = vec![\n+                        if let hir::LifetimeName::Underscore = lifetime_sub.name {\n+                            (lifetime_sub.span, suggestion_param_name.clone())\n+                        } else {\n+                            (lifetime_sub.span.shrink_to_hi(), suggestion_param_name.clone() + \" \")\n+                        },\n+                        if let hir::LifetimeName::Underscore = lifetime_sup.name {\n+                            (lifetime_sup.span, suggestion_param_name.clone())\n+                        } else {\n+                            (lifetime_sup.span.shrink_to_hi(), suggestion_param_name.clone() + \" \")\n+                        },\n+                    ];\n+\n+                    if introduce_new {\n+                        let new_param_suggestion = match &generics.params {\n+                            [] => (generics.span, format!(\"<{}>\", suggestion_param_name)),\n+                            [first, ..] => {\n+                                (first.span.shrink_to_lo(), format!(\"{}, \", suggestion_param_name))\n+                            }\n+                        };\n+\n+                        suggestions.push(new_param_suggestion);\n                     }\n+\n+                    err.multipart_suggestion(\n+                        \"consider introducing a named lifetime parameter\",\n+                        suggestions,\n+                        Applicability::MaybeIncorrect,\n+                    );\n+                    err.note(\"each elided lifetime in input position becomes a distinct lifetime\");\n                 }\n             }\n         }"}, {"sha": "943c63667e05f495f387095ab787a6d7082cb634", "filename": "src/test/ui/issues/issue-17728.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fissues%2Fissue-17728.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fissues%2Fissue-17728.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17728.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -8,6 +8,12 @@ LL |     fn attemptTraverse(&self, room: &Room, directionStr: &str) -> Result<&R\n ...\n LL |             Some(entry) => Ok(entry),\n    |                            ^^^^^^^^^ ...but data from `room` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn attemptTraverse<'a>(&'a self, room: &'a Room, directionStr: &str) -> Result<&Room, &str> {\n+   |                       ++++  ++              ++\n \n error[E0308]: `match` arms have incompatible types\n   --> $DIR/issue-17728.rs:109:14"}, {"sha": "86712a726dd4ce31c1823b1f671b9bf6e6c88d0b", "filename": "src/test/ui/lifetimes/lifetime-errors/ex3-both-anon-regions-return-type-is-anon.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-return-type-is-anon.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-return-type-is-anon.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-return-type-is-anon.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |   fn foo<'a>(&self, x: &i32) -> &i32 {\n    |                        this parameter and the return type are declared with different lifetimes...\n LL |     x\n    |     ^ ...but data from `x` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |   fn foo<'a>(&'a self, x: &'a i32) -> &i32 {\n+   |               ++           ++\n \n error: aborting due to previous error\n "}, {"sha": "0fdf2e8b20e99581729f0f7c6985ef4793d218b6", "filename": "src/test/ui/lifetimes/lifetime-errors/ex3-both-anon-regions-self-is-anon.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-self-is-anon.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-self-is-anon.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-self-is-anon.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn foo<'a>(&self, x: &Foo) -> &Foo {\n    |                          this parameter and the return type are declared with different lifetimes...\n LL |         if true { x } else { self }\n    |                   ^ ...but data from `x` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn foo<'a>(&'a self, x: &'a Foo) -> &Foo {\n+   |                 ++           ++\n \n error: aborting due to previous error\n "}, {"sha": "27bef1d7331457bc8399e4bb3513229d0a5e99d9", "filename": "src/test/ui/lifetimes/lifetime-errors/ex3-both-anon-regions-using-impl-items.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-using-impl-items.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-using-impl-items.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fex3-both-anon-regions-using-impl-items.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -5,6 +5,12 @@ LL |     fn foo(x: &mut Vec<&u8>, y: &u8) {\n    |                        ---      --- these two types are declared with different lifetimes...\n LL |         x.push(y);\n    |                ^ ...but data from `y` flows into `x` here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn foo<'a>(x: &mut Vec<&'a u8>, y: &'a u8) {\n+   |           ++++              ++          ++\n \n error: aborting due to previous error\n "}, {"sha": "1fc526ed3ae80577179ce8ef2e68cf13961e6607", "filename": "src/test/ui/self/arbitrary_self_types_pin_lifetime_mismatch.stderr", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Farbitrary_self_types_pin_lifetime_mismatch.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Farbitrary_self_types_pin_lifetime_mismatch.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Farbitrary_self_types_pin_lifetime_mismatch.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -5,6 +5,12 @@ LL |     fn a(self: Pin<&Foo>, f: &Foo) -> &Foo { f }\n    |                              ----     ----   ^ ...but data from `f` is returned here\n    |                              |\n    |                              this parameter and the return type are declared with different lifetimes...\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn a<'a>(self: Pin<&'a Foo>, f: &'a Foo) -> &Foo { f }\n+   |         ++++            ++           ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/arbitrary_self_types_pin_lifetime_mismatch.rs:8:76\n@@ -13,6 +19,12 @@ LL |     fn c(self: Pin<&Self>, f: &Foo, g: &Foo) -> (Pin<&Foo>, &Foo) { (self,\n    |                               ----              -----------------          ^ ...but data from `f` is returned here\n    |                               |\n    |                               this parameter and the return type are declared with different lifetimes...\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn c<'a>(self: Pin<&'a Self>, f: &'a Foo, g: &Foo) -> (Pin<&Foo>, &Foo) { (self, f) }\n+   |         ++++            ++            ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/arbitrary_self_types_pin_lifetime_mismatch.rs:13:58"}, {"sha": "47531dded070e26e69169151a91d7b24f815d2f1", "filename": "src/test/ui/self/elision/lt-ref-self.stderr", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Flt-ref-self.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Flt-ref-self.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Felision%2Flt-ref-self.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn ref_self(&self, f: &u32) -> &u32 {\n    |                           this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_self<'a>(&'a self, f: &'a u32) -> &u32 {\n+   |                ++++  ++           ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/lt-ref-self.rs:17:9\n@@ -17,6 +23,12 @@ LL |     fn ref_Self(self: &Self, f: &u32) -> &u32 {\n    |                                 this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_Self<'a>(self: &'a Self, f: &'a u32) -> &u32 {\n+   |                ++++        ++           ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/lt-ref-self.rs:21:9\n@@ -27,6 +39,12 @@ LL |     fn box_ref_Self(self: Box<&Self>, f: &u32) -> &u32 {\n    |                                          this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_ref_Self<'a>(self: Box<&'a Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++            ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/lt-ref-self.rs:25:9\n@@ -37,6 +55,12 @@ LL |     fn pin_ref_Self(self: Pin<&Self>, f: &u32) -> &u32 {\n    |                                          this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn pin_ref_Self<'a>(self: Pin<&'a Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++            ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/lt-ref-self.rs:29:9\n@@ -47,6 +71,12 @@ LL |     fn box_box_ref_Self(self: Box<Box<&Self>>, f: &u32) -> &u32 {\n    |                                                   this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_box_ref_Self<'a>(self: Box<Box<&'a Self>>, f: &'a u32) -> &u32 {\n+   |                        ++++                ++             ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/lt-ref-self.rs:33:9\n@@ -57,6 +87,12 @@ LL |     fn box_pin_Self(self: Box<Pin<&Self>>, f: &u32) -> &u32 {\n    |                                               this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_pin_Self<'a>(self: Box<Pin<&'a Self>>, f: &'a u32) -> &u32 {\n+   |                    ++++                ++             ++\n \n error: aborting due to 6 previous errors\n "}, {"sha": "b16bde55dc73097aa8129024b9564d838e0e15a0", "filename": "src/test/ui/self/elision/ref-mut-self.stderr", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-self.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-self.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-self.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn ref_self(&mut self, f: &u32) -> &u32 {\n    |                               this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_self<'a>(&'a mut self, f: &'a u32) -> &u32 {\n+   |                ++++  ++               ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-self.rs:17:9\n@@ -17,6 +23,12 @@ LL |     fn ref_Self(self: &mut Self, f: &u32) -> &u32 {\n    |                                     this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_Self<'a>(self: &'a mut Self, f: &'a u32) -> &u32 {\n+   |                ++++        ++               ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-self.rs:21:9\n@@ -27,6 +39,12 @@ LL |     fn box_ref_Self(self: Box<&mut Self>, f: &u32) -> &u32 {\n    |                                              this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_ref_Self<'a>(self: Box<&'a mut Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++                ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-self.rs:25:9\n@@ -37,6 +55,12 @@ LL |     fn pin_ref_Self(self: Pin<&mut Self>, f: &u32) -> &u32 {\n    |                                              this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn pin_ref_Self<'a>(self: Pin<&'a mut Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++                ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-self.rs:29:9\n@@ -47,6 +71,12 @@ LL |     fn box_box_ref_Self(self: Box<Box<&mut Self>>, f: &u32) -> &u32 {\n    |                                                       this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_box_ref_Self<'a>(self: Box<Box<&'a mut Self>>, f: &'a u32) -> &u32 {\n+   |                        ++++                ++                 ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-self.rs:33:9\n@@ -57,6 +87,12 @@ LL |     fn box_pin_ref_Self(self: Box<Pin<&mut Self>>, f: &u32) -> &u32 {\n    |                                                       this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_pin_ref_Self<'a>(self: Box<Pin<&'a mut Self>>, f: &'a u32) -> &u32 {\n+   |                        ++++                ++                 ++\n \n error: aborting due to 6 previous errors\n "}, {"sha": "288203f674b89341c4c4481d4fe98d7b172c2531", "filename": "src/test/ui/self/elision/ref-mut-struct.stderr", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-struct.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-struct.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Felision%2Fref-mut-struct.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn ref_Struct(self: &mut Struct, f: &u32) -> &u32 {\n    |                                         this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_Struct<'a>(self: &'a mut Struct, f: &'a u32) -> &u32 {\n+   |                  ++++        ++                 ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-struct.rs:15:9\n@@ -17,6 +23,12 @@ LL |     fn box_ref_Struct(self: Box<&mut Struct>, f: &u32) -> &u32 {\n    |                                                  this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_ref_Struct<'a>(self: Box<&'a mut Struct>, f: &'a u32) -> &u32 {\n+   |                      ++++            ++                  ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-struct.rs:19:9\n@@ -27,6 +39,12 @@ LL |     fn pin_ref_Struct(self: Pin<&mut Struct>, f: &u32) -> &u32 {\n    |                                                  this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn pin_ref_Struct<'a>(self: Pin<&'a mut Struct>, f: &'a u32) -> &u32 {\n+   |                      ++++            ++                  ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-struct.rs:23:9\n@@ -37,6 +55,12 @@ LL |     fn box_box_ref_Struct(self: Box<Box<&mut Struct>>, f: &u32) -> &u32 {\n    |                                                           this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_box_ref_Struct<'a>(self: Box<Box<&'a mut Struct>>, f: &'a u32) -> &u32 {\n+   |                          ++++                ++                   ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-mut-struct.rs:27:9\n@@ -47,6 +71,12 @@ LL |     fn box_pin_ref_Struct(self: Box<Pin<&mut Struct>>, f: &u32) -> &u32 {\n    |                                                           this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_pin_ref_Struct<'a>(self: Box<Pin<&'a mut Struct>>, f: &'a u32) -> &u32 {\n+   |                          ++++                ++                   ++\n \n error: aborting due to 5 previous errors\n "}, {"sha": "3c4abdcd67d1a7cf153406eec7c4ea615a04200b", "filename": "src/test/ui/self/elision/ref-self.stderr", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-self.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-self.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Felision%2Fref-self.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn ref_self(&self, f: &u32) -> &u32 {\n    |                           this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_self<'a>(&'a self, f: &'a u32) -> &u32 {\n+   |                ++++  ++           ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:27:9\n@@ -17,6 +23,12 @@ LL |     fn ref_Self(self: &Self, f: &u32) -> &u32 {\n    |                                 this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_Self<'a>(self: &'a Self, f: &'a u32) -> &u32 {\n+   |                ++++        ++           ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:31:9\n@@ -27,6 +39,12 @@ LL |     fn box_ref_Self(self: Box<&Self>, f: &u32) -> &u32 {\n    |                                          this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_ref_Self<'a>(self: Box<&'a Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++            ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:35:9\n@@ -37,6 +55,12 @@ LL |     fn pin_ref_Self(self: Pin<&Self>, f: &u32) -> &u32 {\n    |                                          this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn pin_ref_Self<'a>(self: Pin<&'a Self>, f: &'a u32) -> &u32 {\n+   |                    ++++            ++            ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:39:9\n@@ -47,6 +71,12 @@ LL |     fn box_box_ref_Self(self: Box<Box<&Self>>, f: &u32) -> &u32 {\n    |                                                   this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_box_ref_Self<'a>(self: Box<Box<&'a Self>>, f: &'a u32) -> &u32 {\n+   |                        ++++                ++             ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:43:9\n@@ -57,6 +87,12 @@ LL |     fn box_pin_ref_Self(self: Box<Pin<&Self>>, f: &u32) -> &u32 {\n    |                                                   this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_pin_ref_Self<'a>(self: Box<Pin<&'a Self>>, f: &'a u32) -> &u32 {\n+   |                        ++++                ++             ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-self.rs:47:9\n@@ -67,6 +103,12 @@ LL |     fn wrap_ref_Self_Self(self: Wrap<&Self, Self>, f: &u8) -> &u8 {\n    |                                                       this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn wrap_ref_Self_Self<'a>(self: Wrap<&'a Self, Self>, f: &'a u8) -> &u8 {\n+   |                          ++++             ++                  ++\n \n error: aborting due to 7 previous errors\n "}, {"sha": "eee073d7a14d5e788a802288d301ca84deb1c6ee", "filename": "src/test/ui/self/elision/ref-struct.stderr", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-struct.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abcccc91430a8bd5648c05439855900800daa0f7/src%2Ftest%2Fui%2Fself%2Felision%2Fref-struct.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fself%2Felision%2Fref-struct.stderr?ref=abcccc91430a8bd5648c05439855900800daa0f7", "patch": "@@ -7,6 +7,12 @@ LL |     fn ref_Struct(self: &Struct, f: &u32) -> &u32 {\n    |                                     this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn ref_Struct<'a>(self: &'a Struct, f: &'a u32) -> &u32 {\n+   |                  ++++        ++             ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-struct.rs:15:9\n@@ -17,6 +23,12 @@ LL |     fn box_ref_Struct(self: Box<&Struct>, f: &u32) -> &u32 {\n    |                                              this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_ref_Struct<'a>(self: Box<&'a Struct>, f: &'a u32) -> &u32 {\n+   |                      ++++            ++              ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-struct.rs:19:9\n@@ -27,6 +39,12 @@ LL |     fn pin_ref_Struct(self: Pin<&Struct>, f: &u32) -> &u32 {\n    |                                              this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn pin_ref_Struct<'a>(self: Pin<&'a Struct>, f: &'a u32) -> &u32 {\n+   |                      ++++            ++              ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-struct.rs:23:9\n@@ -37,6 +55,12 @@ LL |     fn box_box_ref_Struct(self: Box<Box<&Struct>>, f: &u32) -> &u32 {\n    |                                                       this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_box_ref_Struct<'a>(self: Box<Box<&'a Struct>>, f: &'a u32) -> &u32 {\n+   |                          ++++                ++               ++\n \n error[E0623]: lifetime mismatch\n   --> $DIR/ref-struct.rs:27:9\n@@ -47,6 +71,12 @@ LL |     fn box_pin_Struct(self: Box<Pin<&Struct>>, f: &u32) -> &u32 {\n    |                                                   this parameter and the return type are declared with different lifetimes...\n LL |         f\n    |         ^ ...but data from `f` is returned here\n+   |\n+   = note: each elided lifetime in input position becomes a distinct lifetime\n+help: consider introducing a named lifetime parameter\n+   |\n+LL |     fn box_pin_Struct<'a>(self: Box<Pin<&'a Struct>>, f: &'a u32) -> &u32 {\n+   |                      ++++                ++               ++\n \n error: aborting due to 5 previous errors\n "}]}