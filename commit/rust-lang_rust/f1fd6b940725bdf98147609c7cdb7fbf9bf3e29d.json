{"sha": "f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxZmQ2Yjk0MDcyNWJkZjk4MTQ3NjA5YzdjZGI3ZmJmOWJmM2UyOWQ=", "commit": {"author": {"name": "Jakub Bukaj", "email": "jakub@jakub.cc", "date": "2014-11-17T23:24:03Z"}, "committer": {"name": "Jakub Bukaj", "email": "jakub@jakub.cc", "date": "2014-11-17T23:24:03Z"}, "message": "rollup merge of #19016: gkoz/use_util_copy\n\nThis code is identical to io::util::copy()", "tree": {"sha": "e9ef5488e0040c654888dd50bc1f963481af089d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9ef5488e0040c654888dd50bc1f963481af089d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d", "html_url": "https://github.com/rust-lang/rust/commit/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d/comments", "author": null, "committer": null, "parents": [{"sha": "789777babda61ffbf257c85f58084c94c9f06866", "url": "https://api.github.com/repos/rust-lang/rust/commits/789777babda61ffbf257c85f58084c94c9f06866", "html_url": "https://github.com/rust-lang/rust/commit/789777babda61ffbf257c85f58084c94c9f06866"}, {"sha": "8b16ccdd7b47a4c93d6357c800a221daaf8c7db4", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b16ccdd7b47a4c93d6357c800a221daaf8c7db4", "html_url": "https://github.com/rust-lang/rust/commit/8b16ccdd7b47a4c93d6357c800a221daaf8c7db4"}], "stats": {"total": 10, "additions": 1, "deletions": 9}, "files": [{"sha": "cd4141e045cb5dc8b5c0d4be0c415549099162ca", "filename": "src/libstd/io/fs.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d/src%2Flibstd%2Fio%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d/src%2Flibstd%2Fio%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Ffs.rs?ref=f1fd6b940725bdf98147609c7cdb7fbf9bf3e29d", "patch": "@@ -381,16 +381,8 @@ pub fn copy(from: &Path, to: &Path) -> IoResult<()> {\n \n     let mut reader = try!(File::open(from));\n     let mut writer = try!(File::create(to));\n-    let mut buf = [0, ..io::DEFAULT_BUF_SIZE];\n \n-    loop {\n-        let amt = match reader.read(&mut buf) {\n-            Ok(n) => n,\n-            Err(ref e) if e.kind == io::EndOfFile => { break }\n-            Err(e) => return update_err(Err(e), from, to)\n-        };\n-        try!(writer.write(buf[..amt]));\n-    }\n+    try!(update_err(super::util::copy(&mut reader, &mut writer), from, to));\n \n     chmod(to, try!(update_err(from.stat(), from, to)).perm)\n }"}]}