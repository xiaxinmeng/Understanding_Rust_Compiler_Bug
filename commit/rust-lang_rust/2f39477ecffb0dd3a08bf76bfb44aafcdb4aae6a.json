{"sha": "2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmMzk0NzdlY2ZmYjBkZDNhMDhiZjc2YmZiNDRhYWZjZGI0YWFlNmE=", "commit": {"author": {"name": "Greg V", "email": "greg@unrelenting.technology", "date": "2020-07-20T16:07:23Z"}, "committer": {"name": "Greg V", "email": "greg@unrelenting.technology", "date": "2020-08-09T14:51:41Z"}, "message": "Add sanitizer support on FreeBSD", "tree": {"sha": "ad6d34ae8b5884c2688101b754a8f4a2dbd3626a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad6d34ae8b5884c2688101b754a8f4a2dbd3626a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "html_url": "https://github.com/rust-lang/rust/commit/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/comments", "author": {"login": "valpackett", "id": 208340, "node_id": "MDQ6VXNlcjIwODM0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/208340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/valpackett", "html_url": "https://github.com/valpackett", "followers_url": "https://api.github.com/users/valpackett/followers", "following_url": "https://api.github.com/users/valpackett/following{/other_user}", "gists_url": "https://api.github.com/users/valpackett/gists{/gist_id}", "starred_url": "https://api.github.com/users/valpackett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/valpackett/subscriptions", "organizations_url": "https://api.github.com/users/valpackett/orgs", "repos_url": "https://api.github.com/users/valpackett/repos", "events_url": "https://api.github.com/users/valpackett/events{/privacy}", "received_events_url": "https://api.github.com/users/valpackett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "valpackett", "id": 208340, "node_id": "MDQ6VXNlcjIwODM0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/208340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/valpackett", "html_url": "https://github.com/valpackett", "followers_url": "https://api.github.com/users/valpackett/followers", "following_url": "https://api.github.com/users/valpackett/following{/other_user}", "gists_url": "https://api.github.com/users/valpackett/gists{/gist_id}", "starred_url": "https://api.github.com/users/valpackett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/valpackett/subscriptions", "organizations_url": "https://api.github.com/users/valpackett/orgs", "repos_url": "https://api.github.com/users/valpackett/repos", "events_url": "https://api.github.com/users/valpackett/events{/privacy}", "received_events_url": "https://api.github.com/users/valpackett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8bc801b05019cd3e0ef19e6c4c028d55baa645d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8bc801b05019cd3e0ef19e6c4c028d55baa645d2", "html_url": "https://github.com/rust-lang/rust/commit/8bc801b05019cd3e0ef19e6c4c028d55baa645d2"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "51b87b43db0f6485fa2c7592843309add4000386", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "patch": "@@ -786,6 +786,7 @@ fn supported_sanitizers(\n         }\n         \"x86_64-apple-darwin\" => darwin_libs(\"osx\", &[\"asan\", \"lsan\", \"tsan\"]),\n         \"x86_64-fuchsia\" => common_libs(\"fuchsia\", \"x86_64\", &[\"asan\"]),\n+        \"x86_64-unknown-freebsd\" => common_libs(\"freebsd\", \"x86_64\", &[\"asan\", \"msan\", \"tsan\"]),\n         \"x86_64-unknown-linux-gnu\" => {\n             common_libs(\"linux\", \"x86_64\", &[\"asan\", \"lsan\", \"msan\", \"tsan\"])\n         }"}, {"sha": "f4c8b9fda61d093d2016c071943c4706dd9311da", "filename": "src/ci/docker/host-x86_64/dist-x86_64-freebsd/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile?ref=2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "patch": "@@ -29,5 +29,5 @@ ENV \\\n \n ENV HOSTS=x86_64-unknown-freebsd\n \n-ENV RUST_CONFIGURE_ARGS --enable-extended --enable-profiler --disable-docs\n+ENV RUST_CONFIGURE_ARGS --enable-extended --enable-profiler --enable-sanitizers --disable-docs\n ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "86d63bf1ee35d688a193afdda645ffb2f8c12d1c", "filename": "src/librustc_codegen_ssa/back/link.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs?ref=2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "patch": "@@ -818,6 +818,7 @@ fn link_sanitizer_runtime(sess: &Session, linker: &mut dyn Linker, name: &str) {\n         \"aarch64-fuchsia\"\n         | \"aarch64-unknown-linux-gnu\"\n         | \"x86_64-fuchsia\"\n+        | \"x86_64-unknown-freebsd\"\n         | \"x86_64-unknown-linux-gnu\" => {\n             let filename = format!(\"librustc{}_rt.{}.a\", channel, name);\n             let path = default_tlib.join(&filename);"}, {"sha": "66dbe53bac3871c14d006523605f5542b29a0446", "filename": "src/librustc_session/session.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Flibrustc_session%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Flibrustc_session%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_session%2Fsession.rs?ref=2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "patch": "@@ -1453,14 +1453,19 @@ fn validate_commandline_args_with_session_available(sess: &Session) {\n         \"aarch64-unknown-linux-gnu\",\n         \"x86_64-apple-darwin\",\n         \"x86_64-fuchsia\",\n+        \"x86_64-unknown-freebsd\",\n         \"x86_64-unknown-linux-gnu\",\n     ];\n     const LSAN_SUPPORTED_TARGETS: &[&str] =\n         &[\"aarch64-unknown-linux-gnu\", \"x86_64-apple-darwin\", \"x86_64-unknown-linux-gnu\"];\n     const MSAN_SUPPORTED_TARGETS: &[&str] =\n-        &[\"aarch64-unknown-linux-gnu\", \"x86_64-unknown-linux-gnu\"];\n-    const TSAN_SUPPORTED_TARGETS: &[&str] =\n-        &[\"aarch64-unknown-linux-gnu\", \"x86_64-apple-darwin\", \"x86_64-unknown-linux-gnu\"];\n+        &[\"aarch64-unknown-linux-gnu\", \"x86_64-unknown-freebsd\", \"x86_64-unknown-linux-gnu\"];\n+    const TSAN_SUPPORTED_TARGETS: &[&str] = &[\n+        \"aarch64-unknown-linux-gnu\",\n+        \"x86_64-apple-darwin\",\n+        \"x86_64-unknown-freebsd\",\n+        \"x86_64-unknown-linux-gnu\",\n+    ];\n \n     // Sanitizers can only be used on some tested platforms.\n     for s in sess.opts.debugging_opts.sanitizer {"}, {"sha": "a776bb0bfe4811678c43954344fbd9f4b0e0dbce", "filename": "src/tools/compiletest/src/util.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Ftools%2Fcompiletest%2Fsrc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a/src%2Ftools%2Fcompiletest%2Fsrc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Futil.rs?ref=2f39477ecffb0dd3a08bf76bfb44aafcdb4aae6a", "patch": "@@ -87,17 +87,22 @@ pub const ASAN_SUPPORTED_TARGETS: &'static [&'static str] = &[\n     \"aarch64-unknown-linux-gnu\",\n     \"x86_64-apple-darwin\",\n     \"x86_64-fuchsia\",\n+    \"x86_64-unknown-freebsd\",\n     \"x86_64-unknown-linux-gnu\",\n ];\n \n pub const LSAN_SUPPORTED_TARGETS: &'static [&'static str] =\n     &[\"aarch64-unknown-linux-gnu\", \"x86_64-apple-darwin\", \"x86_64-unknown-linux-gnu\"];\n \n pub const MSAN_SUPPORTED_TARGETS: &'static [&'static str] =\n-    &[\"aarch64-unknown-linux-gnu\", \"x86_64-unknown-linux-gnu\"];\n+    &[\"aarch64-unknown-linux-gnu\", \"x86_64-unknown-freebsd\", \"x86_64-unknown-linux-gnu\"];\n \n-pub const TSAN_SUPPORTED_TARGETS: &'static [&'static str] =\n-    &[\"aarch64-unknown-linux-gnu\", \"x86_64-apple-darwin\", \"x86_64-unknown-linux-gnu\"];\n+pub const TSAN_SUPPORTED_TARGETS: &'static [&'static str] = &[\n+    \"aarch64-unknown-linux-gnu\",\n+    \"x86_64-apple-darwin\",\n+    \"x86_64-unknown-freebsd\",\n+    \"x86_64-unknown-linux-gnu\",\n+];\n \n const BIG_ENDIAN: &'static [&'static str] = &[\n     \"armebv7r\","}]}