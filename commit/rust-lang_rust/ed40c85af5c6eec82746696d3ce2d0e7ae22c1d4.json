{"sha": "ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkNDBjODVhZjVjNmVlYzgyNzQ2Njk2ZDNjZTJkMGU3YWUyMmMxZDQ=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-05-03T00:29:39Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-05-03T02:07:36Z"}, "message": "Extract ast.is_exported from the resolve module", "tree": {"sha": "787c5ee833fe2604c7914a60e6b5b2f43abf382b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/787c5ee833fe2604c7914a60e6b5b2f43abf382b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "html_url": "https://github.com/rust-lang/rust/commit/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3014a5887d4785285a3f42e19f2de24e141e3eb8", "url": "https://api.github.com/repos/rust-lang/rust/commits/3014a5887d4785285a3f42e19f2de24e141e3eb8", "html_url": "https://github.com/rust-lang/rust/commit/3014a5887d4785285a3f42e19f2de24e141e3eb8"}], "stats": {"total": 41, "additions": 23, "deletions": 18}, "files": [{"sha": "82b6d81303f64c0adb8ca721b8caba84a2c7a7de", "filename": "src/comp/front/ast.rs", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4/src%2Fcomp%2Ffront%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4/src%2Fcomp%2Ffront%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fast.rs?ref=ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "patch": "@@ -1,6 +1,7 @@\n \n import std.map.hashmap;\n import std.option;\n+import std._str;\n import std._vec;\n import util.common.span;\n import util.common.spanned;\n@@ -529,6 +530,27 @@ fn index_stmt(block_index index, @stmt s) {\n     }\n }\n \n+fn is_exported(ident i, _mod m) -> bool {\n+    auto count = 0;\n+    for (@ast.view_item vi in m.view_items) {\n+        alt (vi.node) {\n+            case (ast.view_item_export(?id)) {\n+                if (_str.eq(i, id)) {\n+                    ret true;\n+                }\n+                count += 1;\n+            }\n+            case (_) { /* fall through */ }\n+        }\n+    }\n+    // If there are no declared exports then everything is exported\n+    if (count == 0) {\n+        ret true;\n+    } else {\n+        ret false;\n+    }\n+}\n+\n fn is_call_expr(@expr e) -> bool {\n     alt (e.node) {\n         case (expr_call(_, _, _)) {"}, {"sha": "5320389db9a89892c4227f3f0bacff2186e910fe", "filename": "src/comp/middle/resolve.rs", "status": "modified", "additions": 1, "deletions": 18, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4/src%2Fcomp%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4/src%2Fcomp%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fresolve.rs?ref=ed40c85af5c6eec82746696d3ce2d0e7ae22c1d4", "patch": "@@ -370,24 +370,7 @@ fn lookup_name_wrapped(&env e, ast.ident i, namespace ns, direction dir)\n                 }\n             }\n \n-            auto count = 0;\n-            for (@ast.view_item vi in m.view_items) {\n-                alt (vi.node) {\n-                    case (ast.view_item_export(?id)) {\n-                        if (_str.eq(i, id)) {\n-                            ret true;\n-                        }\n-                        count += 1;\n-                    }\n-                    case (_) { /* fall through */ }\n-                }\n-            }\n-            // If there are no declared exports then everything is exported\n-            if (count == 0) {\n-                ret true;\n-            } else {\n-                ret false;\n-            }\n+            ret ast.is_exported(i, m);\n         }\n \n         alt (m.index.find(i)) {"}]}