{"sha": "fa27d50caa5b0972803b957212a813b582a6c013", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhMjdkNTBjYWE1YjA5NzI4MDNiOTU3MjEyYTgxM2I1ODJhNmMwMTM=", "commit": {"author": {"name": "John Paul Adrian Glaubitz", "email": "glaubitz@physik.fu-berlin.de", "date": "2021-08-25T07:49:17Z"}, "committer": {"name": "John Paul Adrian Glaubitz", "email": "glaubitz@physik.fu-berlin.de", "date": "2021-09-17T15:07:14Z"}, "message": "compiler/rustc_llvm: Enable M68k LLVM target", "tree": {"sha": "9c4ec96ba42998c618b72e8cb20ed52f4f69a359", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c4ec96ba42998c618b72e8cb20ed52f4f69a359"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa27d50caa5b0972803b957212a813b582a6c013", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa27d50caa5b0972803b957212a813b582a6c013", "html_url": "https://github.com/rust-lang/rust/commit/fa27d50caa5b0972803b957212a813b582a6c013", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa27d50caa5b0972803b957212a813b582a6c013/comments", "author": {"login": "glaubitz", "id": 1647645, "node_id": "MDQ6VXNlcjE2NDc2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1647645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glaubitz", "html_url": "https://github.com/glaubitz", "followers_url": "https://api.github.com/users/glaubitz/followers", "following_url": "https://api.github.com/users/glaubitz/following{/other_user}", "gists_url": "https://api.github.com/users/glaubitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/glaubitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glaubitz/subscriptions", "organizations_url": "https://api.github.com/users/glaubitz/orgs", "repos_url": "https://api.github.com/users/glaubitz/repos", "events_url": "https://api.github.com/users/glaubitz/events{/privacy}", "received_events_url": "https://api.github.com/users/glaubitz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "glaubitz", "id": 1647645, "node_id": "MDQ6VXNlcjE2NDc2NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1647645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glaubitz", "html_url": "https://github.com/glaubitz", "followers_url": "https://api.github.com/users/glaubitz/followers", "following_url": "https://api.github.com/users/glaubitz/following{/other_user}", "gists_url": "https://api.github.com/users/glaubitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/glaubitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glaubitz/subscriptions", "organizations_url": "https://api.github.com/users/glaubitz/orgs", "repos_url": "https://api.github.com/users/glaubitz/repos", "events_url": "https://api.github.com/users/glaubitz/events{/privacy}", "received_events_url": "https://api.github.com/users/glaubitz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e56778dc8b13973dde9345e23db085eeb7bbfe9", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e56778dc8b13973dde9345e23db085eeb7bbfe9", "html_url": "https://github.com/rust-lang/rust/commit/5e56778dc8b13973dde9345e23db085eeb7bbfe9"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "36a6d2cc33a99936b53df8c3566798683c9c71fb", "filename": "compiler/rustc_llvm/build.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fbuild.rs?ref=fa27d50caa5b0972803b957212a813b582a6c013", "patch": "@@ -76,6 +76,7 @@ fn main() {\n         \"aarch64\",\n         \"amdgpu\",\n         \"avr\",\n+        \"m68k\",\n         \"mips\",\n         \"powerpc\",\n         \"systemz\","}, {"sha": "8dbacd71fc13892ee3877fa6ac4e987875de97ba", "filename": "compiler/rustc_llvm/llvm-wrapper/PassWrapper.cpp", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp?ref=fa27d50caa5b0972803b957212a813b582a6c013", "patch": "@@ -201,6 +201,12 @@ void LLVMRustAddLastExtensionPasses(\n #define SUBTARGET_AVR\n #endif\n \n+#ifdef LLVM_COMPONENT_M68k\n+#define SUBTARGET_M68K SUBTARGET(M68k)\n+#else\n+#define SUBTARGET_M68K\n+#endif\n+\n #ifdef LLVM_COMPONENT_MIPS\n #define SUBTARGET_MIPS SUBTARGET(Mips)\n #else\n@@ -248,6 +254,7 @@ void LLVMRustAddLastExtensionPasses(\n   SUBTARGET_ARM                                                                \\\n   SUBTARGET_AARCH64                                                            \\\n   SUBTARGET_AVR                                                                \\\n+  SUBTARGET_M68K                                                               \\\n   SUBTARGET_MIPS                                                               \\\n   SUBTARGET_PPC                                                                \\\n   SUBTARGET_SYSTEMZ                                                            \\"}, {"sha": "2f199989d3b214f467ef17760e7697c0e62e7348", "filename": "compiler/rustc_llvm/src/lib.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa27d50caa5b0972803b957212a813b582a6c013/compiler%2Frustc_llvm%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fsrc%2Flib.rs?ref=fa27d50caa5b0972803b957212a813b582a6c013", "patch": "@@ -90,6 +90,14 @@ pub fn initialize_available_targets() {\n         LLVMInitializeAVRAsmPrinter,\n         LLVMInitializeAVRAsmParser\n     );\n+    init_target!(\n+        llvm_component = \"m68k\",\n+        LLVMInitializeM68kTargetInfo,\n+        LLVMInitializeM68kTarget,\n+        LLVMInitializeM68kTargetMC,\n+        LLVMInitializeM68kAsmPrinter,\n+        LLVMInitializeM68kAsmParser\n+    );\n     init_target!(\n         llvm_component = \"mips\",\n         LLVMInitializeMipsTargetInfo,"}]}