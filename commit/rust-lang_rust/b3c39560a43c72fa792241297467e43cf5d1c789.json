{"sha": "b3c39560a43c72fa792241297467e43cf5d1c789", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzYzM5NTYwYTQzYzcyZmE3OTIyNDEyOTc0NjdlNDNjZjVkMWM3ODk=", "commit": {"author": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2017-12-15T02:19:17Z"}, "committer": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2017-12-15T21:57:51Z"}, "message": "save-analysis: document `process_use_tree`", "tree": {"sha": "3d513663b73f6e039e4241f67612e9d879aa1079", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3d513663b73f6e039e4241f67612e9d879aa1079"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3c39560a43c72fa792241297467e43cf5d1c789", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFKBAABCAA0FiEELriChyEaiMu0yCg7viIhAz7bw3QFAlo0RV8WHGFydXNzZWxs\nMTIzQGdtYWlsLmNvbQAKCRC+IiEDPtvDdCBvB/47rv+QY/4ye063jqVCT5ksSXob\n+n4RYLRx+O6jGrtoV+3U/DkqnNti9JmSigmwkECaeTe152NSVwbmzjPGLz7kM3la\nH4TjN966CnSR66EObY6y6C/zrG/0gww4kOpwxeMy6ojVoVbQ0T/66ENHVwVjo4Os\n+9ra2UZlejP2A/y/+Ubaznsm/CSOC9U6bDjkGFExfQaN5xYLgR1hNdNxsMH/ORhT\nVTg+NUdVSowe07p/rd7mBhLJSK/MZpy5YFpXjX7kfFEujak691pjdWmHj5IsJEFq\n3Kr4HhB2umdBlxCMmtGixKUWwcl2deaozkuk+/4/BR85is+UqKOdukA6iOen\n=Dcgo\n-----END PGP SIGNATURE-----", "payload": "tree 3d513663b73f6e039e4241f67612e9d879aa1079\nparent 59fafc88893ab568f3eb18c31ad668ca50956828\nauthor Andy Russell <arussell123@gmail.com> 1513304357 -0500\ncommitter Andy Russell <arussell123@gmail.com> 1513375071 -0500\n\nsave-analysis: document `process_use_tree`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3c39560a43c72fa792241297467e43cf5d1c789", "html_url": "https://github.com/rust-lang/rust/commit/b3c39560a43c72fa792241297467e43cf5d1c789", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3c39560a43c72fa792241297467e43cf5d1c789/comments", "author": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "59fafc88893ab568f3eb18c31ad668ca50956828", "url": "https://api.github.com/repos/rust-lang/rust/commits/59fafc88893ab568f3eb18c31ad668ca50956828", "html_url": "https://github.com/rust-lang/rust/commit/59fafc88893ab568f3eb18c31ad668ca50956828"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "08ad96c6fe898b7c0884eb449e1add0178d48d0c", "filename": "src/librustc_save_analysis/dump_visitor.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b3c39560a43c72fa792241297467e43cf5d1c789/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3c39560a43c72fa792241297467e43cf5d1c789/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdump_visitor.rs?ref=b3c39560a43c72fa792241297467e43cf5d1c789", "patch": "@@ -1231,13 +1231,23 @@ impl<'l, 'tcx: 'l, 'll, O: DumpOutput + 'll> DumpVisitor<'l, 'tcx, 'll, O> {\n         }\n     }\n \n+    /// Dumps imports in a use tree recursively.\n+    ///\n+    /// A use tree is an import that may contain nested braces (RFC 2128). The `use_tree` parameter\n+    /// is the current use tree under scrutiny, while `id` and `prefix` are its corresponding node\n+    /// id and path. `root_item` is the topmost use tree in the hierarchy.\n+    ///\n+    /// If `use_tree` is a simple or glob import, it is dumped into the analysis data. Otherwise,\n+    /// each child use tree is dumped recursively.\n     fn process_use_tree(&mut self,\n                          use_tree: &'l ast::UseTree,\n                          id: NodeId,\n                          root_item: &'l ast::Item,\n                          prefix: &ast::Path) {\n         let path = &use_tree.prefix;\n         let access = access_from!(self.save_ctxt, root_item);\n+\n+        // The parent def id of a given use tree is always the enclosing item.\n         let parent = self.save_ctxt.tcx.hir.opt_local_def_id(id)\n             .and_then(|id| self.save_ctxt.tcx.parent_def_id(id))\n             .map(::id_from_def_id);"}]}