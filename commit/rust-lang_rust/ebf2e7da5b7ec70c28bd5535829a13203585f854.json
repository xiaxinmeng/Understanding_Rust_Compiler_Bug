{"sha": "ebf2e7da5b7ec70c28bd5535829a13203585f854", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViZjJlN2RhNWI3ZWM3MGMyOGJkNTUzNTgyOWExMzIwMzU4NWY4NTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-10T00:34:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-12-10T00:34:13Z"}, "message": "Auto merge of #38223 - rkruppe:llvm-stringref-fixes, r=alexcrichton\n\nprintf type correctness\n\nThe `%.*s` format specifier requires an int for the maximum size, but StringRef::size is a size_t\n\ncc @shepmaster", "tree": {"sha": "228e11cd6c75ddbfd9a10d20ecc3e1d5b0e69244", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/228e11cd6c75ddbfd9a10d20ecc3e1d5b0e69244"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ebf2e7da5b7ec70c28bd5535829a13203585f854", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ebf2e7da5b7ec70c28bd5535829a13203585f854", "html_url": "https://github.com/rust-lang/rust/commit/ebf2e7da5b7ec70c28bd5535829a13203585f854", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ebf2e7da5b7ec70c28bd5535829a13203585f854/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fa45d0be82039d2a0c6c16e545058e9e6491b292", "url": "https://api.github.com/repos/rust-lang/rust/commits/fa45d0be82039d2a0c6c16e545058e9e6491b292", "html_url": "https://github.com/rust-lang/rust/commit/fa45d0be82039d2a0c6c16e545058e9e6491b292"}, {"sha": "f58e553001537d52e67720156f9280d122cc242d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f58e553001537d52e67720156f9280d122cc242d", "html_url": "https://github.com/rust-lang/rust/commit/f58e553001537d52e67720156f9280d122cc242d"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "c45d1c2d0888eac555c0f48ff328314722e3170c", "filename": "src/rustllvm/PassWrapper.cpp", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ebf2e7da5b7ec70c28bd5535829a13203585f854/src%2Frustllvm%2FPassWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/ebf2e7da5b7ec70c28bd5535829a13203585f854/src%2Frustllvm%2FPassWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FPassWrapper.cpp?ref=ebf2e7da5b7ec70c28bd5535829a13203585f854", "patch": "@@ -533,8 +533,11 @@ LLVMRustPrintPasses() {\n             StringRef PassArg = info->getPassArgument();\n             StringRef PassName = info->getPassName();\n             if (!PassArg.empty()) {\n-                printf(\"%15.*s - %.*s\\n\", PassArg.size(), PassArg.data(),\n-                       PassName.size(), PassName.data());\n+                // These unsigned->signed casts could theoretically overflow, but\n+                // realistically never will (and even if, the result is implementation\n+                // defined rather plain UB).\n+                printf(\"%15.*s - %.*s\\n\", (int)PassArg.size(), PassArg.data(),\n+                       (int)PassName.size(), PassName.data());\n             }\n #else\n             if (info->getPassArgument() && *info->getPassArgument()) {"}]}