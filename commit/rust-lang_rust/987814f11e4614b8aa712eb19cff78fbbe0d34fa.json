{"sha": "987814f11e4614b8aa712eb19cff78fbbe0d34fa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4NzgxNGYxMWU0NjE0YjhhYTcxMmViMTljZmY3OGZiYmUwZDM0ZmE=", "commit": {"author": {"name": "Elliott Slaughter", "email": "eslaughter@mozilla.com", "date": "2012-07-25T19:06:03Z"}, "committer": {"name": "Elliott Slaughter", "email": "eslaughter@mozilla.com", "date": "2012-07-25T23:00:13Z"}, "message": "Added debug flag to enable LLVM debug output.", "tree": {"sha": "4bbec4681396f14c3d53ee68e1b0a53a8bb656cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4bbec4681396f14c3d53ee68e1b0a53a8bb656cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/987814f11e4614b8aa712eb19cff78fbbe0d34fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/987814f11e4614b8aa712eb19cff78fbbe0d34fa", "html_url": "https://github.com/rust-lang/rust/commit/987814f11e4614b8aa712eb19cff78fbbe0d34fa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/987814f11e4614b8aa712eb19cff78fbbe0d34fa/comments", "author": null, "committer": null, "parents": [{"sha": "0b3dba42cf62419518137ec17ce7630f0174f26c", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b3dba42cf62419518137ec17ce7630f0174f26c", "html_url": "https://github.com/rust-lang/rust/commit/0b3dba42cf62419518137ec17ce7630f0174f26c"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "369eccc6bed174b02881a5f57e898fdcee284e19", "filename": "src/rustc/driver/driver.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fdriver%2Fdriver.rs?ref=987814f11e4614b8aa712eb19cff78fbbe0d34fa", "patch": "@@ -14,6 +14,7 @@ import io::{reader_util, writer_util};\n import getopts::{optopt, optmulti, optflag, optflagopt, opt_present};\n import back::{x86, x86_64};\n import std::map::hashmap;\n+import lib::llvm::llvm;\n \n enum pp_mode {ppm_normal, ppm_expanded, ppm_typed, ppm_identified,\n               ppm_expanded_identified }\n@@ -440,6 +441,9 @@ fn build_session_options(match: getopts::match,\n         }\n         debugging_opts |= this_bit;\n     }\n+    if debugging_opts & session::debug_llvm != 0 {\n+        llvm::LLVMSetDebug(1);\n+    }\n \n     let output_type =\n         if parse_only || no_trans {"}, {"sha": "61ef9f73c3f3593bc4d6bf5ae200620f871e2498", "filename": "src/rustc/driver/session.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fdriver%2Fsession.rs?ref=987814f11e4614b8aa712eb19cff78fbbe0d34fa", "patch": "@@ -40,6 +40,7 @@ const borrowck_stats: uint = 1024u;\n const borrowck_note_pure: uint = 2048;\n const borrowck_note_loan: uint = 4096;\n const no_landing_pads: uint = 8192;\n+const debug_llvm: uint = 16384;\n \n fn debugging_opts_map() -> ~[(~str, ~str, uint)] {\n     ~[(~\"ppregions\", ~\"prettyprint regions with \\\n@@ -61,7 +62,8 @@ fn debugging_opts_map() -> ~[(~str, ~str, uint)] {\n      (~\"borrowck-note-loan\", ~\"note where loans are req'd\",\n       borrowck_note_loan),\n      (~\"no-landing-pads\", ~\"omit landing pads for unwinding\",\n-      no_landing_pads)\n+      no_landing_pads),\n+     (~\"debug-llvm\", ~\"enable debug output from LLVM\", debug_llvm)\n     ]\n }\n "}, {"sha": "7dbefa8e4980cec1043e65fa6efcdac29a2428c2", "filename": "src/rustc/lib/llvm.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Flib%2Fllvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustc%2Flib%2Fllvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Flib%2Fllvm.rs?ref=987814f11e4614b8aa712eb19cff78fbbe0d34fa", "patch": "@@ -969,6 +969,9 @@ extern mod llvm {\n \n     fn LLVMConstNamedStruct(S: TypeRef, ConstantVals: *ValueRef,\n                             Count: c_uint) -> ValueRef;\n+\n+    /** Enables LLVM debug output. */\n+    fn LLVMSetDebug(Enabled: c_int);\n }\n \n fn SetInstructionCallConv(Instr: ValueRef, CC: CallConv) {"}, {"sha": "4a927744f07a0e15014db331f8e6bddebcde2e81", "filename": "src/rustllvm/RustWrapper.cpp", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustllvm%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustllvm%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FRustWrapper.cpp?ref=987814f11e4614b8aa712eb19cff78fbbe0d34fa", "patch": "@@ -27,6 +27,7 @@\n #include \"llvm/Support/SourceMgr.h\"\n #include \"llvm/Target/TargetOptions.h\"\n #include \"llvm/Support/Host.h\"\n+#include \"llvm/Support/Debug.h\"\n #include \"llvm-c/Core.h\"\n #include \"llvm-c/BitReader.h\"\n #include \"llvm-c/Object.h\"\n@@ -185,3 +186,7 @@ extern \"C\" LLVMValueRef LLVMBuildAtomicRMW(LLVMBuilderRef B,\n                                            unwrap(target), unwrap(source),\n                                            order));\n }\n+\n+extern \"C\" void LLVMSetDebug(int Enabled) {\n+  DebugFlag = Enabled;\n+}"}, {"sha": "64b560999bec5e40e34f43b51d745aa28d297b07", "filename": "src/rustllvm/rustllvm.def.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustllvm%2Frustllvm.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/987814f11e4614b8aa712eb19cff78fbbe0d34fa/src%2Frustllvm%2Frustllvm.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2Frustllvm.def.in?ref=987814f11e4614b8aa712eb19cff78fbbe0d34fa", "patch": "@@ -528,6 +528,7 @@ LLVMSetAlignment\n LLVMSetCleanup\n LLVMSetCurrentDebugLocation\n LLVMSetDataLayout\n+LLVMSetDebug\n LLVMSetFunctionCallConv\n LLVMSetGC\n LLVMSetGlobalConstant"}]}