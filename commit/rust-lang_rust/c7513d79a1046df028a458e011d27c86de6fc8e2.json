{"sha": "c7513d79a1046df028a458e011d27c86de6fc8e2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3NTEzZDc5YTEwNDZkZjAyOGE0NThlMDExZDI3Yzg2ZGU2ZmM4ZTI=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-11T13:33:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-11T13:33:59Z"}, "message": "Rollup merge of #35530 - srdja:master, r=jonathandturner\n\nUpdate E0008 and E0007 to new format\n\nPart of #35233\nA fix for #35496\n\nr? @jonathandturner", "tree": {"sha": "7e2b8586697b5796f4fe4e2c55607f0c4b4c7d73", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e2b8586697b5796f4fe4e2c55607f0c4b4c7d73"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7513d79a1046df028a458e011d27c86de6fc8e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7513d79a1046df028a458e011d27c86de6fc8e2", "html_url": "https://github.com/rust-lang/rust/commit/c7513d79a1046df028a458e011d27c86de6fc8e2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7513d79a1046df028a458e011d27c86de6fc8e2/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02834435226768257f7f71b416c6a347fc6e1613", "url": "https://api.github.com/repos/rust-lang/rust/commits/02834435226768257f7f71b416c6a347fc6e1613", "html_url": "https://github.com/rust-lang/rust/commit/02834435226768257f7f71b416c6a347fc6e1613"}, {"sha": "aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa40ec7f1155dc63bac19d218a56aec8109ac8e2", "html_url": "https://github.com/rust-lang/rust/commit/aa40ec7f1155dc63bac19d218a56aec8109ac8e2"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "b34949d7a4fafb4046dea68db94ade5c98948310", "filename": "src/librustc_const_eval/check_match.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Flibrustc_const_eval%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Flibrustc_const_eval%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_const_eval%2Fcheck_match.rs?ref=c7513d79a1046df028a458e011d27c86de6fc8e2", "patch": "@@ -1115,9 +1115,15 @@ fn check_legality_of_move_bindings(cx: &MatchCheckCtxt,\n \n         // x @ Foo(..) is legal, but x @ Foo(y) isn't.\n         if sub.map_or(false, |p| pat_contains_bindings(&p)) {\n-            span_err!(cx.tcx.sess, p.span, E0007, \"cannot bind by-move with sub-bindings\");\n+            struct_span_err!(cx.tcx.sess, p.span, E0007,\n+                             \"cannot bind by-move with sub-bindings\")\n+                .span_label(p.span, &format!(\"binds an already bound by-move value by moving it\"))\n+                .emit();\n         } else if has_guard {\n-            span_err!(cx.tcx.sess, p.span, E0008, \"cannot bind by-move into a pattern guard\");\n+            struct_span_err!(cx.tcx.sess, p.span, E0008,\n+                      \"cannot bind by-move into a pattern guard\")\n+                .span_label(p.span, &format!(\"moves value into pattern guard\"))\n+                .emit();\n         } else if by_ref_span.is_some() {\n             let mut err = struct_span_err!(cx.tcx.sess, p.span, E0009,\n                                            \"cannot bind by-move and by-ref in the same pattern\");"}, {"sha": "4be115b8afdace66329a8d4c5a97b31f32eb3346", "filename": "src/test/compile-fail/E0007.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Ftest%2Fcompile-fail%2FE0007.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Ftest%2Fcompile-fail%2FE0007.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0007.rs?ref=c7513d79a1046df028a458e011d27c86de6fc8e2", "patch": "@@ -11,8 +11,10 @@\n fn main() {\n     let x = Some(\"s\".to_string());\n     match x {\n-        op_string @ Some(s) => {}, //~ ERROR E0007\n-                                   //~| ERROR E0303\n+        op_string @ Some(s) => {},\n+        //~^ ERROR E0007\n+        //~| NOTE binds an already bound by-move value by moving it\n+        //~| ERROR E0303\n         None => {},\n     }\n }"}, {"sha": "20cc1cbd2232df233d3e92734901b112247bc1a5", "filename": "src/test/compile-fail/E0008.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Ftest%2Fcompile-fail%2FE0008.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7513d79a1046df028a458e011d27c86de6fc8e2/src%2Ftest%2Fcompile-fail%2FE0008.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0008.rs?ref=c7513d79a1046df028a458e011d27c86de6fc8e2", "patch": "@@ -10,7 +10,9 @@\n \n fn main() {\n     match Some(\"hi\".to_string()) {\n-        Some(s) if s.len() == 0 => {}, //~ ERROR E0008\n+        Some(s) if s.len() == 0 => {},\n+        //~^ ERROR E0008\n+        //~| NOTE moves value into pattern guard\n         _ => {},\n     }\n }"}]}