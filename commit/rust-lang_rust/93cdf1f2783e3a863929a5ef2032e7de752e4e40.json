{"sha": "93cdf1f2783e3a863929a5ef2032e7de752e4e40", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzY2RmMWYyNzgzZTNhODYzOTI5YTVlZjIwMzJlN2RlNzUyZTRlNDA=", "commit": {"author": {"name": "Alexis", "email": "a.beingessner@gmail.com", "date": "2015-03-01T14:42:11Z"}, "committer": {"name": "Alexis", "email": "a.beingessner@gmail.com", "date": "2015-03-27T01:36:06Z"}, "message": "update everything to use Entry defaults", "tree": {"sha": "33639adfd0d7c50b42528a196cdeaa6c4ee18845", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/33639adfd0d7c50b42528a196cdeaa6c4ee18845"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93cdf1f2783e3a863929a5ef2032e7de752e4e40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93cdf1f2783e3a863929a5ef2032e7de752e4e40", "html_url": "https://github.com/rust-lang/rust/commit/93cdf1f2783e3a863929a5ef2032e7de752e4e40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93cdf1f2783e3a863929a5ef2032e7de752e4e40/comments", "author": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c35953cf8baa2e721401ba6354f0bd9a9f2abaf", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c35953cf8baa2e721401ba6354f0bd9a9f2abaf", "html_url": "https://github.com/rust-lang/rust/commit/1c35953cf8baa2e721401ba6354f0bd9a9f2abaf"}], "stats": {"total": 108, "additions": 24, "deletions": 84}, "files": [{"sha": "1c484d5dd5eea4b7564376ee5f67275c479910e4", "filename": "src/libcollections/btree/map.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree%2Fmap.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -1587,21 +1587,12 @@ impl<K: Ord, V> BTreeMap<K, V> {\n     /// ```\n     /// # #![feature(collections)]\n     /// use std::collections::BTreeMap;\n-    /// use std::collections::btree_map::Entry;\n     ///\n     /// let mut count: BTreeMap<&str, usize> = BTreeMap::new();\n     ///\n     /// // count the number of occurrences of letters in the vec\n-    /// for x in vec![\"a\",\"b\",\"a\",\"c\",\"a\",\"b\"].iter() {\n-    ///     match count.entry(*x) {\n-    ///         Entry::Vacant(view) => {\n-    ///             view.insert(1);\n-    ///         },\n-    ///         Entry::Occupied(mut view) => {\n-    ///             let v = view.get_mut();\n-    ///             *v += 1;\n-    ///         },\n-    ///     }\n+    /// for x in vec![\"a\",\"b\",\"a\",\"c\",\"a\",\"b\"] {\n+    ///     *count.entry(x).default(0) += 1;\n     /// }\n     ///\n     /// assert_eq!(count[\"a\"], 3);"}, {"sha": "94dd997947c39556465645dedc26a41c9d43f251", "filename": "src/libcollections/vec_map.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibcollections%2Fvec_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibcollections%2Fvec_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec_map.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -632,21 +632,12 @@ impl<V> VecMap<V> {\n     /// ```\n     /// # #![feature(collections)]\n     /// use std::collections::VecMap;\n-    /// use std::collections::vec_map::Entry;\n     ///\n     /// let mut count: VecMap<u32> = VecMap::new();\n     ///\n     /// // count the number of occurrences of numbers in the vec\n-    /// for x in vec![1, 2, 1, 2, 3, 4, 1, 2, 4].iter() {\n-    ///     match count.entry(*x) {\n-    ///         Entry::Vacant(view) => {\n-    ///             view.insert(1);\n-    ///         },\n-    ///         Entry::Occupied(mut view) => {\n-    ///             let v = view.get_mut();\n-    ///             *v += 1;\n-    ///         },\n-    ///     }\n+    /// for x in vec![1, 2, 1, 2, 3, 4, 1, 2, 4] {\n+    ///     *count.entry(x).default(0) += 1;\n     /// }\n     ///\n     /// assert_eq!(count[1], 3);"}, {"sha": "a36d425c03e582d76aec7252072d1e10e20b38e6", "filename": "src/librustc/metadata/loader.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmetadata%2Floader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmetadata%2Floader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Floader.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -426,8 +426,7 @@ impl<'a> Context<'a> {\n             info!(\"lib candidate: {}\", path.display());\n \n             let hash_str = hash.to_string();\n-            let slot = candidates.entry(hash_str).get().unwrap_or_else(\n-                |vacant_entry| vacant_entry.insert((HashMap::new(), HashMap::new())));\n+            let slot = candidates.entry(hash_str).default_with(|| (HashMap::new(), HashMap::new()));\n             let (ref mut rlibs, ref mut dylibs) = *slot;\n             if rlib {\n                 rlibs.insert(fs::realpath(path).unwrap(), kind);"}, {"sha": "71b36e21d3e6fe676b8713c7953b755b38b525e6", "filename": "src/librustc/middle/dataflow.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Fdataflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Fdataflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdataflow.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -160,12 +160,7 @@ fn build_nodeid_to_index(decl: Option<&ast::FnDecl>,\n \n     cfg.graph.each_node(|node_idx, node| {\n         if let cfg::CFGNodeData::AST(id) = node.data {\n-            match index.entry(id).get() {\n-                Ok(v) => v.push(node_idx),\n-                Err(e) => {\n-                    e.insert(vec![node_idx]);\n-                }\n-            }\n+            index.entry(id).default(vec![]).push(node_idx);\n         }\n         true\n     });\n@@ -185,12 +180,7 @@ fn build_nodeid_to_index(decl: Option<&ast::FnDecl>,\n         visit::walk_fn_decl(&mut formals, decl);\n         impl<'a, 'v> visit::Visitor<'v> for Formals<'a> {\n             fn visit_pat(&mut self, p: &ast::Pat) {\n-                match self.index.entry(p.id).get() {\n-                    Ok(v) => v.push(self.entry),\n-                    Err(e) => {\n-                        e.insert(vec![self.entry]);\n-                    }\n-                }\n+                self.index.entry(p.id).default(vec![]).push(self.entry);\n                 visit::walk_pat(self, p)\n             }\n         }"}, {"sha": "76050d53a744808cf7222ef245e0d66d70c9f434", "filename": "src/librustc/middle/traits/fulfill.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -11,7 +11,6 @@\n use middle::infer::{InferCtxt};\n use middle::ty::{self, RegionEscape, Ty};\n use std::collections::HashSet;\n-use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::default::Default;\n use syntax::ast;\n use util::common::ErrorReported;\n@@ -437,9 +436,7 @@ fn register_region_obligation<'tcx>(tcx: &ty::ctxt<'tcx>,\n     debug!(\"register_region_obligation({})\",\n            region_obligation.repr(tcx));\n \n-    match region_obligations.entry(region_obligation.cause.body_id) {\n-        Vacant(entry) => { entry.insert(vec![region_obligation]); },\n-        Occupied(mut entry) => { entry.get_mut().push(region_obligation); },\n-    }\n+    region_obligations.entry(region_obligation.cause.body_id).default(vec![])\n+        .push(region_obligation);\n \n }"}, {"sha": "975d1560d6cfbf1872b53442fb6a91595cc3c807", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -5669,9 +5669,7 @@ pub fn lookup_field_type<'tcx>(tcx: &ctxt<'tcx>,\n         node_id_to_type(tcx, id.node)\n     } else {\n         let mut tcache = tcx.tcache.borrow_mut();\n-        let pty = tcache.entry(id).get().unwrap_or_else(\n-            |vacant_entry| vacant_entry.insert(csearch::get_field_type(tcx, struct_id, id)));\n-        pty.ty\n+        tcache.entry(id).default_with(|| csearch::get_field_type(tcx, struct_id, id)).ty\n     };\n     ty.subst(tcx, substs)\n }\n@@ -6819,9 +6817,7 @@ pub fn replace_late_bound_regions<'tcx, T, F>(\n         debug!(\"region={}\", region.repr(tcx));\n         match region {\n             ty::ReLateBound(debruijn, br) if debruijn.depth == current_depth => {\n-                let region =\n-                    * map.entry(br).get().unwrap_or_else(\n-                        |vacant_entry| vacant_entry.insert(mapf(br)));\n+                let region = *map.entry(br).default_with(|| mapf(br));\n \n                 if let ty::ReLateBound(debruijn1, br) = region {\n                     // If the callback returns a late-bound region,"}, {"sha": "5f0ab10488557499f48be64c4206db9045a82b4b", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -35,7 +35,6 @@ use syntax::parse::token::InternedString;\n \n use getopts;\n use std::collections::HashMap;\n-use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::env;\n use std::fmt;\n use std::path::PathBuf;\n@@ -1037,10 +1036,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n             None => early_error(\"--extern value must be of the format `foo=bar`\"),\n         };\n \n-        match externs.entry(name.to_string()) {\n-            Vacant(entry) => { entry.insert(vec![location.to_string()]); },\n-            Occupied(mut entry) => { entry.get_mut().push(location.to_string()); },\n-        }\n+        externs.entry(name.to_string()).default(vec![]).push(location.to_string());\n     }\n \n     let crate_name = matches.opt_str(\"crate-name\");"}, {"sha": "4aa5f09c1427c3cdc4cbc196e409d54dc0f40cb2", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -112,7 +112,6 @@ use util::nodemap::{DefIdMap, FnvHashMap, NodeMap};\n use util::lev_distance::lev_distance;\n \n use std::cell::{Cell, Ref, RefCell};\n-use std::collections::hash_map::Entry::{Occupied, Vacant};\n use std::mem::replace;\n use std::rc::Rc;\n use std::iter::repeat;\n@@ -1362,11 +1361,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                                        closure_def_id: ast::DefId,\n                                        r: DeferredCallResolutionHandler<'tcx>) {\n         let mut deferred_call_resolutions = self.inh.deferred_call_resolutions.borrow_mut();\n-        let mut vec = match deferred_call_resolutions.entry(closure_def_id) {\n-            Occupied(entry) => entry.into_mut(),\n-            Vacant(entry) => entry.insert(Vec::new()),\n-        };\n-        vec.push(r);\n+        deferred_call_resolutions.entry(closure_def_id).default(vec![]).push(r);\n     }\n \n     fn remove_deferred_call_resolutions(&self,"}, {"sha": "5ca31ae26e1264646918432c5f76d89b0b8ea9d0", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -876,9 +876,7 @@ impl DocFolder for Cache {\n         if let clean::ImplItem(ref i) = item.inner {\n             match i.trait_ {\n                 Some(clean::ResolvedPath{ did, .. }) => {\n-                    let v = self.implementors.entry(did).get().unwrap_or_else(\n-                        |vacant_entry| vacant_entry.insert(Vec::with_capacity(1)));\n-                    v.push(Implementor {\n+                    self.implementors.entry(did).default(vec![]).push(Implementor {\n                         def_id: item.def_id,\n                         generics: i.generics.clone(),\n                         trait_: i.trait_.as_ref().unwrap().clone(),\n@@ -1080,9 +1078,7 @@ impl DocFolder for Cache {\n                         };\n \n                         if let Some(did) = did {\n-                            let v = self.impls.entry(did).get().unwrap_or_else(\n-                                |vacant_entry| vacant_entry.insert(Vec::with_capacity(1)));\n-                            v.push(Impl {\n+                            self.impls.entry(did).default(vec![]).push(Impl {\n                                 impl_: i,\n                                 dox: dox,\n                                 stability: item.stability.clone(),\n@@ -1334,9 +1330,8 @@ impl Context {\n                 Some(ref s) => s.to_string(),\n             };\n             let short = short.to_string();\n-            let v = map.entry(short).get().unwrap_or_else(\n-                |vacant_entry| vacant_entry.insert(Vec::with_capacity(1)));\n-            v.push((myname, Some(plain_summary_line(item.doc_value()))));\n+            map.entry(short).default(vec![])\n+                .push((myname, Some(plain_summary_line(item.doc_value()))));\n         }\n \n         for (_, items) in &mut map {"}, {"sha": "4db5a262c2ccf36b171db74e28ced9708453421f", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -352,9 +352,7 @@ fn parse_externs(matches: &getopts::Matches) -> Result<core::Externs, String> {\n             }\n         };\n         let name = name.to_string();\n-        let locs = externs.entry(name).get().unwrap_or_else(\n-            |vacant_entry| vacant_entry.insert(Vec::with_capacity(1)));\n-        locs.push(location.to_string());\n+        externs.entry(name).default(vec![]).push(location.to_string());\n     }\n     Ok(externs)\n }"}, {"sha": "b51948c160b5503f03ba64ee026be5d7dc8866ef", "filename": "src/libstd/collections/mod.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibstd%2Fcollections%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibstd%2Fcollections%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fmod.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -307,10 +307,7 @@\n //! let message = \"she sells sea shells by the sea shore\";\n //!\n //! for c in message.chars() {\n-//!     match count.entry(c) {\n-//!         Entry::Vacant(entry) => { entry.insert(1); },\n-//!         Entry::Occupied(mut entry) => *entry.get_mut() += 1,\n-//!     }\n+//!     *count.entry(c).default(0) += 1;\n //! }\n //!\n //! assert_eq!(count.get(&'s'), Some(&8));\n@@ -343,10 +340,7 @@\n //! for id in orders.into_iter() {\n //!     // If this is the first time we've seen this customer, initialize them\n //!     // with no blood alcohol. Otherwise, just retrieve them.\n-//!     let person = match blood_alcohol.entry(id) {\n-//!         Entry::Vacant(entry) => entry.insert(Person{id: id, blood_alcohol: 0.0}),\n-//!         Entry::Occupied(entry) => entry.into_mut(),\n-//!     };\n+//!     let person = blood_alcohol.entry(id).default(Person{id: id, blood_alcohol: 0.0});\n //!\n //!     // Reduce their blood alcohol level. It takes time to order and drink a beer!\n //!     person.blood_alcohol *= 0.9;"}, {"sha": "2b811ce914f7e57952463421e2877270412cdb3d", "filename": "src/libsyntax/ext/mtwt.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibsyntax%2Fext%2Fmtwt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93cdf1f2783e3a863929a5ef2032e7de752e4e40/src%2Flibsyntax%2Fext%2Fmtwt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fmtwt.rs?ref=93cdf1f2783e3a863929a5ef2032e7de752e4e40", "patch": "@@ -66,9 +66,8 @@ pub fn apply_mark(m: Mrk, ctxt: SyntaxContext) -> SyntaxContext {\n /// Extend a syntax context with a given mark and sctable (explicit memoization)\n fn apply_mark_internal(m: Mrk, ctxt: SyntaxContext, table: &SCTable) -> SyntaxContext {\n     let key = (ctxt, m);\n-    * table.mark_memo.borrow_mut().entry(key).get().unwrap_or_else(\n-          |vacant_entry|\n-              vacant_entry.insert(idx_push(&mut *table.table.borrow_mut(), Mark(m, ctxt))))\n+    * table.mark_memo.borrow_mut().entry(key)\n+        .default_with(|| idx_push(&mut *table.table.borrow_mut(), Mark(m, ctxt)))\n }\n \n /// Extend a syntax context with a given rename\n@@ -84,9 +83,8 @@ fn apply_rename_internal(id: Ident,\n                        table: &SCTable) -> SyntaxContext {\n     let key = (ctxt, id, to);\n \n-    * table.rename_memo.borrow_mut().entry(key).get().unwrap_or_else(\n-          |vacant_entry|\n-              vacant_entry.insert(idx_push(&mut *table.table.borrow_mut(), Rename(id, to, ctxt))))\n+    * table.rename_memo.borrow_mut().entry(key)\n+        .default_with(|| idx_push(&mut *table.table.borrow_mut(), Rename(id, to, ctxt)))\n }\n \n /// Apply a list of renamings to a context"}]}