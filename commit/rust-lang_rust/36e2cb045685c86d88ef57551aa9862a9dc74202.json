{"sha": "36e2cb045685c86d88ef57551aa9862a9dc74202", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2ZTJjYjA0NTY4NWM4NmQ4OGVmNTc1NTFhYTk4NjJhOWRjNzQyMDI=", "commit": {"author": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2018-12-19T08:24:02Z"}, "committer": {"name": "St\u00e9phane Campinas", "email": "stephane.campinas@gmail.com", "date": "2018-12-19T08:31:13Z"}, "message": "add a section to the Contributing.md file about version-gating formatting changes", "tree": {"sha": "b796e08e7aed9f406d48b65e920773539ff4c1cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b796e08e7aed9f406d48b65e920773539ff4c1cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36e2cb045685c86d88ef57551aa9862a9dc74202", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEEipi5pnt+pUplKNfibVYg2QghATMFAlwaAdEACgkQbVYg2Qgh\nATOFmAf/dZeiObWigvjFgvJbGo6f/pBEvA9lyNKtLRVXusJzcnsNfBI6IROIS34P\npwaOX1ChwF+xcKbaAGe76bUDTV9zaNNboe0x0wKT4lQ2mnS0yV2jeFknq88EPiRb\nkDarOB4EbYT050pewrD1k8eQbz5D96a/J+Q/6nUvGOrCCTfEJkIDvPu9iU2wD+ub\nN/12rKOyRdLbzPldrkvfZJDreuBzMY96t/RqnB8IPMDNl3LIx8R8TULuEplE523t\nLDsySqaVSgb3QX9QTKQHyUd2mUsFq3NQ3JK9tXgieT2DhEz5N3PreTMv29BxTkft\n3b6SohZYtS5bZE0yLSet0wrhtrrfEw==\n=3Q/L\n-----END PGP SIGNATURE-----", "payload": "tree b796e08e7aed9f406d48b65e920773539ff4c1cc\nparent 3f6ea7788b5c65c00e995d04622533554a13dd38\nauthor St\u00e9phane Campinas <stephane.campinas@gmail.com> 1545207842 +0100\ncommitter St\u00e9phane Campinas <stephane.campinas@gmail.com> 1545208273 +0100\n\nadd a section to the Contributing.md file about version-gating formatting changes\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36e2cb045685c86d88ef57551aa9862a9dc74202", "html_url": "https://github.com/rust-lang/rust/commit/36e2cb045685c86d88ef57551aa9862a9dc74202", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36e2cb045685c86d88ef57551aa9862a9dc74202/comments", "author": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "scampi", "id": 795879, "node_id": "MDQ6VXNlcjc5NTg3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/795879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scampi", "html_url": "https://github.com/scampi", "followers_url": "https://api.github.com/users/scampi/followers", "following_url": "https://api.github.com/users/scampi/following{/other_user}", "gists_url": "https://api.github.com/users/scampi/gists{/gist_id}", "starred_url": "https://api.github.com/users/scampi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scampi/subscriptions", "organizations_url": "https://api.github.com/users/scampi/orgs", "repos_url": "https://api.github.com/users/scampi/repos", "events_url": "https://api.github.com/users/scampi/events{/privacy}", "received_events_url": "https://api.github.com/users/scampi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f6ea7788b5c65c00e995d04622533554a13dd38", "url": "https://api.github.com/repos/rust-lang/rust/commits/3f6ea7788b5c65c00e995d04622533554a13dd38", "html_url": "https://github.com/rust-lang/rust/commit/3f6ea7788b5c65c00e995d04622533554a13dd38"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "1cf6a86e54696327f0604e6faa1a452791b14871", "filename": "Contributing.md", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/36e2cb045685c86d88ef57551aa9862a9dc74202/Contributing.md", "raw_url": "https://github.com/rust-lang/rust/raw/36e2cb045685c86d88ef57551aa9862a9dc74202/Contributing.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Contributing.md?ref=36e2cb045685c86d88ef57551aa9862a9dc74202", "patch": "@@ -91,6 +91,31 @@ Please try to avoid leaving `TODO`s in the code. There are a few around, but I\n wish there weren't. You can leave `FIXME`s, preferably with an issue number.\n \n \n+### Version-gate formatting changes\n+\n+A change that introduces a different code-formatting should be gated on the\n+`version` configuration. This is to ensure the formatting of the current major\n+release is preserved, while allowing fixes to be implemented for the next\n+release.\n+\n+This is done by conditionally guarding the change like so:\n+\n+```rust\n+if config.version() == Version::One { // if the current major release is 1.x\n+    // current formatting\n+} else {\n+    // new formatting\n+}\n+```\n+\n+This allows the user to apply the next formatting explicitly via the\n+configuration, while being stable by default.\n+\n+When the next major release is done, the code block of the previous formatting\n+can be deleted, e.g., the first block in the example above when going from `1.x`\n+to `2.x`.\n+\n+\n ### A quick tour of Rustfmt\n \n Rustfmt is basically a pretty printer - that is, its mode of operation is to"}]}