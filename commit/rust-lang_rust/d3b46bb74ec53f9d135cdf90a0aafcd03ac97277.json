{"sha": "d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "node_id": "C_kwDOAAsO6NoAKGQzYjQ2YmI3NGVjNTNmOWQxMzVjZGY5MGEwYWFmY2QwM2FjOTcyNzc", "commit": {"author": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2023-02-20T18:10:51Z"}, "committer": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2023-02-20T18:10:51Z"}, "message": "Use named arguments for `uint_impl` macro\n\nThis makes it easier to understand.", "tree": {"sha": "7ca4391683ed211dfa93ec366da23a02ceff1cd2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7ca4391683ed211dfa93ec366da23a02ceff1cd2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "html_url": "https://github.com/rust-lang/rust/commit/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "267cd1d2c5abf5f0d825822a4179ba807b69ffb4", "url": "https://api.github.com/repos/rust-lang/rust/commits/267cd1d2c5abf5f0d825822a4179ba807b69ffb4", "html_url": "https://github.com/rust-lang/rust/commit/267cd1d2c5abf5f0d825822a4179ba807b69ffb4"}], "stats": {"total": 213, "additions": 174, "deletions": 39}, "files": [{"sha": "381fa68a1a49a158c399fafb33e3fe66eb797d01", "filename": "library/core/src/num/mod.rs", "status": "modified", "additions": 155, "deletions": 33, "changes": 188, "blob_url": "https://github.com/rust-lang/rust/blob/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277/library%2Fcore%2Fsrc%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277/library%2Fcore%2Fsrc%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fmod.rs?ref=d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "patch": "@@ -290,8 +290,25 @@ impl isize {\n const ASCII_CASE_MASK: u8 = 0b0010_0000;\n \n impl u8 {\n-    uint_impl! { u8, u8, i8, NonZeroU8, 8, 255, 2, \"0x82\", \"0xa\", \"0x12\", \"0x12\", \"0x48\", \"[0x12]\",\n-    \"[0x12]\", \"\", \"\", \"\" }\n+    uint_impl! {\n+        Self = u8,\n+        ActualT = u8,\n+        SignedT = i8,\n+        NonZeroT = NonZeroU8,\n+        BITS = 8,\n+        MAX = 255,\n+        rot = 2,\n+        rot_op = \"0x82\",\n+        rot_result = \"0xa\",\n+        swap_op = \"0x12\",\n+        swapped = \"0x12\",\n+        reversed = \"0x48\",\n+        le_bytes = \"[0x12]\",\n+        be_bytes = \"[0x12]\",\n+        to_xe_bytes_doc = \"\",\n+        from_xe_bytes_doc = \"\",\n+        bound_condition = \"\",\n+    }\n     widening_impl! { u8, u16, 8, unsigned }\n \n     /// Checks if the value is within the ASCII range.\n@@ -875,8 +892,25 @@ impl u8 {\n }\n \n impl u16 {\n-    uint_impl! { u16, u16, i16, NonZeroU16, 16, 65535, 4, \"0xa003\", \"0x3a\", \"0x1234\", \"0x3412\", \"0x2c48\",\n-    \"[0x34, 0x12]\", \"[0x12, 0x34]\", \"\", \"\", \"\" }\n+    uint_impl! {\n+        Self = u16,\n+        ActualT = u16,\n+        SignedT = i16,\n+        NonZeroT = NonZeroU16,\n+        BITS = 16,\n+        MAX = 65535,\n+        rot = 4,\n+        rot_op = \"0xa003\",\n+        rot_result = \"0x3a\",\n+        swap_op = \"0x1234\",\n+        swapped = \"0x3412\",\n+        reversed = \"0x2c48\",\n+        le_bytes = \"[0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34]\",\n+        to_xe_bytes_doc = \"\",\n+        from_xe_bytes_doc = \"\",\n+        bound_condition = \"\",\n+    }\n     widening_impl! { u16, u32, 16, unsigned }\n \n     /// Checks if the value is a Unicode surrogate code point, which are disallowed values for [`char`].\n@@ -906,56 +940,144 @@ impl u16 {\n }\n \n impl u32 {\n-    uint_impl! { u32, u32, i32, NonZeroU32, 32, 4294967295, 8, \"0x10000b3\", \"0xb301\", \"0x12345678\",\n-    \"0x78563412\", \"0x1e6a2c48\", \"[0x78, 0x56, 0x34, 0x12]\", \"[0x12, 0x34, 0x56, 0x78]\", \"\", \"\", \"\" }\n+    uint_impl! {\n+        Self = u32,\n+        ActualT = u32,\n+        SignedT = i32,\n+        NonZeroT = NonZeroU32,\n+        BITS = 32,\n+        MAX = 4294967295,\n+        rot = 8,\n+        rot_op = \"0x10000b3\",\n+        rot_result = \"0xb301\",\n+        swap_op = \"0x12345678\",\n+        swapped = \"0x78563412\",\n+        reversed = \"0x1e6a2c48\",\n+        le_bytes = \"[0x78, 0x56, 0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34, 0x56, 0x78]\",\n+        to_xe_bytes_doc = \"\",\n+        from_xe_bytes_doc = \"\",\n+        bound_condition = \"\",\n+    }\n     widening_impl! { u32, u64, 32, unsigned }\n }\n \n impl u64 {\n-    uint_impl! { u64, u64, i64, NonZeroU64, 64, 18446744073709551615, 12, \"0xaa00000000006e1\", \"0x6e10aa\",\n-    \"0x1234567890123456\", \"0x5634129078563412\", \"0x6a2c48091e6a2c48\",\n-    \"[0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n-    \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56]\",\n-    \"\", \"\", \"\"}\n+    uint_impl! {\n+        Self = u64,\n+        ActualT = u64,\n+        SignedT = i64,\n+        NonZeroT = NonZeroU64,\n+        BITS = 64,\n+        MAX = 18446744073709551615,\n+        rot = 12,\n+        rot_op = \"0xaa00000000006e1\",\n+        rot_result = \"0x6e10aa\",\n+        swap_op = \"0x1234567890123456\",\n+        swapped = \"0x5634129078563412\",\n+        reversed = \"0x6a2c48091e6a2c48\",\n+        le_bytes = \"[0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56]\",\n+        to_xe_bytes_doc = \"\",\n+        from_xe_bytes_doc = \"\",\n+        bound_condition = \"\",\n+    }\n     widening_impl! { u64, u128, 64, unsigned }\n }\n \n impl u128 {\n-    uint_impl! { u128, u128, i128, NonZeroU128, 128, 340282366920938463463374607431768211455, 16,\n-    \"0x13f40000000000000000000000004f76\", \"0x4f7613f4\", \"0x12345678901234567890123456789012\",\n-    \"0x12907856341290785634129078563412\", \"0x48091e6a2c48091e6a2c48091e6a2c48\",\n-    \"[0x12, 0x90, 0x78, 0x56, 0x34, 0x12, 0x90, 0x78, \\\n-      0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n-    \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56, \\\n-      0x78, 0x90, 0x12, 0x34, 0x56, 0x78, 0x90, 0x12]\",\n-     \"\", \"\", \"\"}\n+    uint_impl! {\n+        Self = u128,\n+        ActualT = u128,\n+        SignedT = i128,\n+        NonZeroT = NonZeroU128,\n+        BITS = 128,\n+        MAX = 340282366920938463463374607431768211455,\n+        rot = 16,\n+        rot_op = \"0x13f40000000000000000000000004f76\",\n+        rot_result = \"0x4f7613f4\",\n+        swap_op = \"0x12345678901234567890123456789012\",\n+        swapped = \"0x12907856341290785634129078563412\",\n+        reversed = \"0x48091e6a2c48091e6a2c48091e6a2c48\",\n+        le_bytes = \"[0x12, 0x90, 0x78, 0x56, 0x34, 0x12, 0x90, 0x78, \\\n+            0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56, \\\n+            0x78, 0x90, 0x12, 0x34, 0x56, 0x78, 0x90, 0x12]\",\n+        to_xe_bytes_doc = \"\",\n+        from_xe_bytes_doc = \"\",\n+        bound_condition = \"\",\n+    }\n }\n \n #[cfg(target_pointer_width = \"16\")]\n impl usize {\n-    uint_impl! { usize, u16, isize, NonZeroUsize, 16, 65535, 4, \"0xa003\", \"0x3a\", \"0x1234\", \"0x3412\", \"0x2c48\",\n-    \"[0x34, 0x12]\", \"[0x12, 0x34]\",\n-    usize_isize_to_xe_bytes_doc!(), usize_isize_from_xe_bytes_doc!(),\n-    \" on 16-bit targets\" }\n+    uint_impl! {\n+        Self = usize,\n+        ActualT = u16,\n+        SignedT = isize,\n+        NonZeroT = NonZeroUsize,\n+        BITS = 16,\n+        MAX = 65535,\n+        rot = 4,\n+        rot_op = \"0xa003\",\n+        rot_result = \"0x3a\",\n+        swap_op = \"0x1234\",\n+        swapped = \"0x3412\",\n+        reversed = \"0x2c48\",\n+        le_bytes = \"[0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34]\",\n+        to_xe_bytes_doc = usize_isize_to_xe_bytes_doc!(),\n+        from_xe_bytes_doc = usize_isize_from_xe_bytes_doc!(),\n+        bound_condition = \" on 16-bit targets\",\n+    }\n     widening_impl! { usize, u32, 16, unsigned }\n }\n+\n #[cfg(target_pointer_width = \"32\")]\n impl usize {\n-    uint_impl! { usize, u32, isize, NonZeroUsize, 32, 4294967295, 8, \"0x10000b3\", \"0xb301\", \"0x12345678\",\n-    \"0x78563412\", \"0x1e6a2c48\", \"[0x78, 0x56, 0x34, 0x12]\", \"[0x12, 0x34, 0x56, 0x78]\",\n-    usize_isize_to_xe_bytes_doc!(), usize_isize_from_xe_bytes_doc!(),\n-    \" on 32-bit targets\" }\n+    uint_impl! {\n+        Self = usize,\n+        ActualT = u32,\n+        SignedT = isize,\n+        NonZeroT = NonZeroUsize,\n+        BITS = 32,\n+        MAX = 4294967295,\n+        rot = 8,\n+        rot_op = \"0x10000b3\",\n+        rot_result = \"0xb301\",\n+        swap_op = \"0x12345678\",\n+        swapped = \"0x78563412\",\n+        reversed = \"0x1e6a2c48\",\n+        le_bytes = \"[0x78, 0x56, 0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34, 0x56, 0x78]\",\n+        to_xe_bytes_doc = usize_isize_to_xe_bytes_doc!(),\n+        from_xe_bytes_doc = usize_isize_from_xe_bytes_doc!(),\n+        bound_condition = \" on 32-bit targets\",\n+    }\n     widening_impl! { usize, u64, 32, unsigned }\n }\n \n #[cfg(target_pointer_width = \"64\")]\n impl usize {\n-    uint_impl! { usize, u64, isize, NonZeroUsize, 64, 18446744073709551615, 12, \"0xaa00000000006e1\", \"0x6e10aa\",\n-    \"0x1234567890123456\", \"0x5634129078563412\", \"0x6a2c48091e6a2c48\",\n-    \"[0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n-    \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56]\",\n-    usize_isize_to_xe_bytes_doc!(), usize_isize_from_xe_bytes_doc!(),\n-    \" on 64-bit targets\" }\n+    uint_impl! {\n+        Self = usize,\n+        ActualT = u64,\n+        SignedT = isize,\n+        NonZeroT = NonZeroUsize,\n+        BITS = 64,\n+        MAX = 18446744073709551615,\n+        rot = 12,\n+        rot_op = \"0xaa00000000006e1\",\n+        rot_result = \"0x6e10aa\",\n+        swap_op = \"0x1234567890123456\",\n+        swapped = \"0x5634129078563412\",\n+        reversed = \"0x6a2c48091e6a2c48\",\n+        le_bytes = \"[0x56, 0x34, 0x12, 0x90, 0x78, 0x56, 0x34, 0x12]\",\n+        be_bytes = \"[0x12, 0x34, 0x56, 0x78, 0x90, 0x12, 0x34, 0x56]\",\n+        to_xe_bytes_doc = usize_isize_to_xe_bytes_doc!(),\n+        from_xe_bytes_doc = usize_isize_from_xe_bytes_doc!(),\n+        bound_condition = \" on 64-bit targets\",\n+    }\n     widening_impl! { usize, u128, 64, unsigned }\n }\n "}, {"sha": "c4fe8e966fdbff23daccf7a491db6ca1a1b277b0", "filename": "library/core/src/num/uint_macros.rs", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3b46bb74ec53f9d135cdf90a0aafcd03ac97277/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs?ref=d3b46bb74ec53f9d135cdf90a0aafcd03ac97277", "patch": "@@ -1,10 +1,23 @@\n macro_rules! uint_impl {\n-    ($SelfT:ty, $ActualT:ident, $SignedT:ident, $NonZeroT:ident,\n-        $BITS:expr, $MaxV:expr,\n-        $rot:expr, $rot_op:expr, $rot_result:expr, $swap_op:expr, $swapped:expr,\n-        $reversed:expr, $le_bytes:expr, $be_bytes:expr,\n-        $to_xe_bytes_doc:expr, $from_xe_bytes_doc:expr,\n-        $bound_condition:expr) => {\n+    (\n+        Self = $SelfT:ty,\n+        ActualT = $ActualT:ident,\n+        SignedT = $SignedT:ident,\n+        NonZeroT = $NonZeroT:ident,\n+        BITS = $BITS:expr,\n+        MAX = $MaxV:expr,\n+        rot = $rot:expr,\n+        rot_op = $rot_op:expr,\n+        rot_result = $rot_result:expr,\n+        swap_op = $swap_op:expr,\n+        swapped = $swapped:expr,\n+        reversed = $reversed:expr,\n+        le_bytes = $le_bytes:expr,\n+        be_bytes = $be_bytes:expr,\n+        to_xe_bytes_doc = $to_xe_bytes_doc:expr,\n+        from_xe_bytes_doc = $from_xe_bytes_doc:expr,\n+        bound_condition = $bound_condition:expr,\n+    ) => {\n         /// The smallest value that can be represented by this integer type.\n         ///\n         /// # Examples"}]}