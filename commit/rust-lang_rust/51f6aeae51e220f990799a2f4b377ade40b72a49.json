{"sha": "51f6aeae51e220f990799a2f4b377ade40b72a49", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxZjZhZWFlNTFlMjIwZjk5MDc5OWEyZjRiMzc3YWRlNDBiNzJhNDk=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-05-11T14:37:46Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-05-11T17:00:14Z"}, "message": "Reduce code duplication", "tree": {"sha": "2be6045b5aa04dc296075189f996cc27fe52ee28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2be6045b5aa04dc296075189f996cc27fe52ee28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51f6aeae51e220f990799a2f4b377ade40b72a49", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAlkUmJ4ACgkQpp+NIls6\n19lXBg//V/UJH3vqtMxUlB0MrO1RoZmKoO85e8imbLEbJqUioZ6xoAFFTybIaV+6\nGxaCF+H/AtOGrTj/Pa/YecAmMeU8yGpElX84SLh6FQ8grdvAKQ4/uut4kQL32uWp\n3v1/nQ9vPIZswZpzGrAoggljXik3sv/SnNOWsFRXItEupEikha5LNjKabV9t/n/T\nQI0H5cKQEcTuJxRwmUvHRhuDhUPNyp2o7HfGCom+k1Q9GQuhY+SrihKB1geM0T0U\nKiA+9mdSnlmRCGS0F08VESbgPSD1COYI6xGp2K91eAlygDY5acb9d84vkr1JTrfg\nUqoYKB9VoF4f8bBu+ng9w2PHeDT7G4WN7fDnnSaxCIVjH88tzFX+wUc0xfdYR0Bt\neiS97wv3llaifBSGeIyTCbq8zh8gZLKQLTZjUXF/h7cnZmFR823Znjdpe6COoj+1\nGpGeyz7A+HHDlx9OYucP2CB+F/yFSvkNJD+C6D10NtFADQrB0fs3TnbvuCMKt/BS\nrmjMJ/5trqXsN+Uzv1nqgLJBTv5FEyyIGptUpgDP8F7s+1iT+jpDecajcQr/visx\nTDIWiJ74SjSCK7FWYXeTqiHX57CnNlrvRoIAeJqH7apMzSzWt3eV9a0j8zL1rdyK\n5oLw1B+/pDoBp/if6ldyKEBRPfP5DpSeWVvEwjbOwM+u+qB0Zt8=\n=uG1S\n-----END PGP SIGNATURE-----", "payload": "tree 2be6045b5aa04dc296075189f996cc27fe52ee28\nparent 8300f0c080608b2f36bdec15ac7361691360401d\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1494513466 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1494522014 +0200\n\nReduce code duplication\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51f6aeae51e220f990799a2f4b377ade40b72a49", "html_url": "https://github.com/rust-lang/rust/commit/51f6aeae51e220f990799a2f4b377ade40b72a49", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51f6aeae51e220f990799a2f4b377ade40b72a49/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8300f0c080608b2f36bdec15ac7361691360401d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8300f0c080608b2f36bdec15ac7361691360401d", "html_url": "https://github.com/rust-lang/rust/commit/8300f0c080608b2f36bdec15ac7361691360401d"}], "stats": {"total": 30, "additions": 10, "deletions": 20}, "files": [{"sha": "3a202c189ec2e123a24bda39fcad6c28725d8f21", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 10, "deletions": 20, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/51f6aeae51e220f990799a2f4b377ade40b72a49/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51f6aeae51e220f990799a2f4b377ade40b72a49/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=51f6aeae51e220f990799a2f4b377ade40b72a49", "patch": "@@ -456,26 +456,16 @@ fn check_to_owned(cx: &LateContext, expr: &Expr, other: &Expr, left: bool, op: S\n         return;\n     }\n \n-    if left {\n-        span_lint(cx,\n-                  CMP_OWNED,\n-                  expr.span,\n-                  &format!(\"this creates an owned instance just for comparison. Consider using `{} {} {}` to \\\n-                            compare without allocation\",\n-                           snip,\n-                           snippet(cx, op, \"==\"),\n-                           snippet(cx, other.span, \"..\")));\n-    } else {\n-        span_lint(cx,\n-                  CMP_OWNED,\n-                  expr.span,\n-                  &format!(\"this creates an owned instance just for comparison. Consider using `{} {} {}` to \\\n-                            compare without allocation\",\n-                           snippet(cx, other.span, \"..\"),\n-                           snippet(cx, op, \"==\"),\n-                           snip));\n-    }\n-\n+    let other = snippet(cx, other.span, \"..\");\n+    let (snip, other) = if left { (snip, other) } else { (other, snip) };\n+    span_lint(cx,\n+                CMP_OWNED,\n+                expr.span,\n+                &format!(\"this creates an owned instance just for comparison. Consider using `{} {} {}` to \\\n+                        compare without allocation\",\n+                        snip,\n+                        snippet(cx, op, \"==\"),\n+                        other));\n }\n \n fn is_str_arg(cx: &LateContext, args: &[Expr]) -> bool {"}]}