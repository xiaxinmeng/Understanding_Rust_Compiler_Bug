{"sha": "24b1ce1daf9dbf66d04116d0549a48a7610bc614", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0YjFjZTFkYWY5ZGJmNjZkMDQxMTZkMDU0OWE0OGE3NjEwYmM2MTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-05-28T13:06:47Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-05-28T13:06:47Z"}, "message": "auto merge of #14458 : huonw/rust/rustdoc-cross-crate-link-path, r=alexcrichton\n\nPreviously this was adding one-too-many `..`s to the path for the\r\n`gotosrc=...` links for local crates. Also, the `root_path` already ends\r\nin `/`s so a trailing / shouldn't be added after the root (some servers\r\ntreat `...//...` different to `.../...` including the one running\r\ndoc.rust-lang.org).", "tree": {"sha": "5a14e8fe2be8761df43e60cecbc3861331a34b2c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a14e8fe2be8761df43e60cecbc3861331a34b2c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24b1ce1daf9dbf66d04116d0549a48a7610bc614", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24b1ce1daf9dbf66d04116d0549a48a7610bc614", "html_url": "https://github.com/rust-lang/rust/commit/24b1ce1daf9dbf66d04116d0549a48a7610bc614", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24b1ce1daf9dbf66d04116d0549a48a7610bc614/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bee42a9413f0ecc65110b16846fb92ae1ba91dba", "url": "https://api.github.com/repos/rust-lang/rust/commits/bee42a9413f0ecc65110b16846fb92ae1ba91dba", "html_url": "https://github.com/rust-lang/rust/commit/bee42a9413f0ecc65110b16846fb92ae1ba91dba"}, {"sha": "3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3482ab3699784d5fa838b8e3ddbef9dee19bce2d", "html_url": "https://github.com/rust-lang/rust/commit/3482ab3699784d5fa838b8e3ddbef9dee19bce2d"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "d0974c25e95319e2ce2a4b6e9a4d46f67b77741e", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/24b1ce1daf9dbf66d04116d0549a48a7610bc614/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24b1ce1daf9dbf66d04116d0549a48a7610bc614/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=24b1ce1daf9dbf66d04116d0549a48a7610bc614", "patch": "@@ -1094,10 +1094,10 @@ impl<'a> Item<'a> {\n             let path = cache.external_paths.get(&self.item.def_id);\n             let root = match *cache.extern_locations.get(&self.item.def_id.krate) {\n                 Remote(ref s) => s.to_string(),\n-                Local => format!(\"{}/..\", self.cx.root_path),\n+                Local => self.cx.root_path.clone(),\n                 Unknown => return None,\n             };\n-            Some(format!(\"{root}/{path}/{file}?gotosrc={goto}\",\n+            Some(format!(\"{root}{path}/{file}?gotosrc={goto}\",\n                          root = root,\n                          path = path.slice_to(path.len() - 1).connect(\"/\"),\n                          file = item_path(self.item),"}]}