{"sha": "84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0YjJlMTRiOWQwMGQ2ZDUwZTg3ZDExM2JkZjgxOWU5ZWIxOGIzYzg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-05-26T11:32:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-05-26T11:32:33Z"}, "message": "Rollup merge of #51073 - dtolnay:empty, r=alexcrichton\n\nRename TokenStream::empty to TokenStream::new\n\nThere is no precedent for the `empty` name -- we do not have `Vec::empty` or `HashMap::empty` etc.\n\nI would propose landing this but reflecting it in a non-breaking release of proc-macro2 that provides both `new` and a deprecated `empty` constructor.\n\nTracking issue: #38356\n\nr? @alexcrichton", "tree": {"sha": "4377b9ae88f3b5715d060478cf5721842b011607", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4377b9ae88f3b5715d060478cf5721842b011607"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbCUXRCRBK7hj4Ov3rIwAAdHIIAAqtXA7LBOGHRcXPbxGtZWWW\ntj7/5UuvaGUH1dRB0VtrdPoRWz0abaxtFr5x9QmJ5JN57+9CoX9LPeqjvS4JZXXU\nCJQwNS6Bx/wZc3/m3gqlUGMEPO4ZosZfVTr7RkJZI4bcPrEAQu6BU76xnefH1oco\nMunJ0rxjs/mDJN91JSVpLxzuAeycRDtKDC66S0faT8SDboRxEHi5YuPkfNy9nMtA\nK+JqKDF4alD2yMc1ki197TOiqCZX32ueuTtmotNo+YeF4JcNNMajcQ1ARY5rFcBK\n46wj6d/J/ObmJvUJ72w4wCSzgbx4oeWmBSzU6j2pdsVL1HWUM5ulqEkSELLIKcE=\n=T61l\n-----END PGP SIGNATURE-----\n", "payload": "tree 4377b9ae88f3b5715d060478cf5721842b011607\nparent 5089ebc5682ed71ee01b309c6681cb1ca127c62e\nparent a49bc9ce5996b9cb0c49142f458a6612ef3c252c\nauthor kennytm <kennytm@gmail.com> 1527334353 +0800\ncommitter GitHub <noreply@github.com> 1527334353 +0800\n\nRollup merge of #51073 - dtolnay:empty, r=alexcrichton\n\nRename TokenStream::empty to TokenStream::new\n\nThere is no precedent for the `empty` name -- we do not have `Vec::empty` or `HashMap::empty` etc.\n\nI would propose landing this but reflecting it in a non-breaking release of proc-macro2 that provides both `new` and a deprecated `empty` constructor.\n\nTracking issue: #38356\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "html_url": "https://github.com/rust-lang/rust/commit/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5089ebc5682ed71ee01b309c6681cb1ca127c62e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5089ebc5682ed71ee01b309c6681cb1ca127c62e", "html_url": "https://github.com/rust-lang/rust/commit/5089ebc5682ed71ee01b309c6681cb1ca127c62e"}, {"sha": "a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "url": "https://api.github.com/repos/rust-lang/rust/commits/a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "html_url": "https://github.com/rust-lang/rust/commit/a49bc9ce5996b9cb0c49142f458a6612ef3c252c"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "35e2d6b23167e658391eb3a2f9b703f66410b08e", "filename": "src/libproc_macro/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Flibproc_macro%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Flibproc_macro%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Flib.rs?ref=84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "patch": "@@ -93,7 +93,7 @@ impl !Sync for LexError {}\n impl TokenStream {\n     /// Returns an empty `TokenStream` containing no token trees.\n     #[unstable(feature = \"proc_macro\", issue = \"38356\")]\n-    pub fn empty() -> TokenStream {\n+    pub fn new() -> TokenStream {\n         TokenStream(tokenstream::TokenStream::empty())\n     }\n "}, {"sha": "c9d0bc1405fc01dcb17fcf6432590a0f32864786", "filename": "src/libproc_macro/quote.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Flibproc_macro%2Fquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Flibproc_macro%2Fquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Fquote.rs?ref=84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "patch": "@@ -71,7 +71,7 @@ macro_rules! quote_tree {\n }\n \n macro_rules! quote {\n-    () => { TokenStream::empty() };\n+    () => { TokenStream::new() };\n     ($($t:tt)*) => {\n         [$(quote_tree!($t),)*].iter()\n             .cloned()\n@@ -104,7 +104,7 @@ impl<T: Quote> Quote for Option<T> {\n impl Quote for TokenStream {\n     fn quote(self) -> TokenStream {\n         if self.is_empty() {\n-            return quote!(::TokenStream::empty());\n+            return quote!(::TokenStream::new());\n         }\n         let mut after_dollar = false;\n         let tokens = self.into_iter().filter_map(|tree| {"}, {"sha": "c37682220da3358d40da13e9906f03d546cb164f", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/modify-ast.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs?ref=84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "patch": "@@ -26,7 +26,7 @@ pub fn assert1(_a: TokenStream, b: TokenStream) -> TokenStream {\n #[proc_macro_derive(Foo, attributes(foo))]\n pub fn assert2(a: TokenStream) -> TokenStream {\n     assert_eq(a, \"pub struct MyStructc { _a: i32, }\".parse().unwrap());\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n fn assert_eq(a: TokenStream, b: TokenStream) {"}, {"sha": "a640fabe04fac7f0a0bccc31f9e814c9f1126335", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/not-joint.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs?ref=84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "patch": "@@ -20,13 +20,13 @@ use proc_macro::*;\n #[proc_macro]\n pub fn tokens(input: TokenStream) -> TokenStream {\n     assert_nothing_joint(input);\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n #[proc_macro_attribute]\n pub fn nothing(_: TokenStream, input: TokenStream) -> TokenStream {\n     assert_nothing_joint(input);\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n fn assert_nothing_joint(s: TokenStream) {"}, {"sha": "5b8fcab0baaa70903b112f1c93918adf843f7752", "filename": "src/test/ui-fulldeps/proc-macro/auxiliary/three-equals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs?ref=84b2e14b9d00d6d50e87d113bdf819e9eb18b3c8", "patch": "@@ -50,7 +50,7 @@ fn parse(input: TokenStream) -> Result<(), Diagnostic> {\n pub fn three_equals(input: TokenStream) -> TokenStream {\n     if let Err(diag) = parse(input) {\n         diag.emit();\n-        return TokenStream::empty();\n+        return TokenStream::new();\n     }\n \n     \"3\".parse().unwrap()"}]}