{"sha": "8c36a76626badd7c8e9cf2aee75f121f2acdb749", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMzZhNzY2MjZiYWRkN2M4ZTljZjJhZWU3NWYxMjFmMmFjZGI3NDk=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-06-30T16:26:17Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-06-30T16:26:17Z"}, "message": "More fiddling with fast-check, now works on at least one windows machine.", "tree": {"sha": "545647a82650060b64be8ffc79345c6120a3f8a6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/545647a82650060b64be8ffc79345c6120a3f8a6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c36a76626badd7c8e9cf2aee75f121f2acdb749", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c36a76626badd7c8e9cf2aee75f121f2acdb749", "html_url": "https://github.com/rust-lang/rust/commit/8c36a76626badd7c8e9cf2aee75f121f2acdb749", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c36a76626badd7c8e9cf2aee75f121f2acdb749/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5b7ce80ffa7c4f5795dfc9ed64fab8b2afd407b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/5b7ce80ffa7c4f5795dfc9ed64fab8b2afd407b0", "html_url": "https://github.com/rust-lang/rust/commit/5b7ce80ffa7c4f5795dfc9ed64fab8b2afd407b0"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "627df6b7f8ef17f919312307134a4e41febe255b", "filename": "src/etc/combine-tests.py", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/8c36a76626badd7c8e9cf2aee75f121f2acdb749/src%2Fetc%2Fcombine-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/8c36a76626badd7c8e9cf2aee75f121f2acdb749/src%2Fetc%2Fcombine-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcombine-tests.py?ref=8c36a76626badd7c8e9cf2aee75f121f2acdb749", "patch": "@@ -4,7 +4,7 @@\n # can run it \"fast\": spawning zillions of windows processes is our major build\n # bottleneck (and it doesn't hurt to run faster on other platforms as well).\n \n-import sys, os, re\n+import sys, os, re, codecs\n \n def scrub(b):\n   if sys.version_info >= (3,) and type(b) == bytes:\n@@ -23,7 +23,7 @@ def scrub(b):\n \n for t in os.listdir(run_pass):\n     if t.endswith(\".rs\"):\n-        f = open(os.path.join(run_pass, t))\n+        f = codecs.open(os.path.join(run_pass, t), \"r\", \"utf8\")\n         s = f.read()\n         if not (\"xfail-stage2\" in s):\n             stage2_tests.append(t)\n@@ -38,8 +38,9 @@ def scrub(b):\n c.write(\"// AUTO-GENERATED FILE: DO NOT EDIT\\n\")\n c.write(\"#[link(name=\\\"run_pass_stage2\\\", vers=\\\"0.1\\\")];\\n\")\n for t in stage2_tests:\n-    c.write(\"mod t_%d = \\\"%s\\\";\\n\"\n-            % (i, os.path.join(run_pass, t)))\n+    p = os.path.join(run_pass, t)\n+    p = p.replace(\"\\\\\", \"\\\\\\\\\")\n+    c.write(\"mod t_%d = \\\"%s\\\";\\n\" % (i, p))\n     i += 1\n c.close()\n \n@@ -53,8 +54,9 @@ def scrub(b):\n d.write(\"    auto out = std::io::stdout();\\n\");\n i = 0\n for t in stage2_tests:\n-    d.write(\"    out.write_str(\\\"run-pass [stage2]: %s\\\\n\\\");\\n\"\n-            % os.path.join(\"test\", \"run-pass\", t))\n+    p = os.path.join(\"test\", \"run-pass\", t)\n+    p = p.replace(\"\\\\\", \"\\\\\\\\\")\n+    d.write(\"    out.write_str(\\\"run-pass [stage2]: %s\\\\n\\\");\\n\" % p)\n     if t in take_args:\n         d.write(\"    t_%d::main([\\\"arg0\\\"]);\\n\" % i)\n     else:"}]}