{"sha": "d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "node_id": "C_kwDOAAsO6NoAKGQ1Y2I1ZmIxODUzOTUyYzBlNTM3N2U4NmEwOWMwZmNmNWJmMmE4Mjk", "commit": {"author": {"name": "Le\u00f3n Orell Valerian Liehr", "email": "liehr.exchange@gmx.net", "date": "2022-12-05T17:02:47Z"}, "committer": {"name": "Le\u00f3n Orell Valerian Liehr", "email": "liehr.exchange@gmx.net", "date": "2022-12-05T17:02:47Z"}, "message": "normalize inherent associated types after substitution", "tree": {"sha": "160d882892d85b29a6d2d6d938d782c8d212552c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/160d882892d85b29a6d2d6d938d782c8d212552c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE/neO4LLiv/pSFQJbzXXjHOLP19kFAmOOJEIACgkQzXXjHOLP\n19kwjg//bCYVEv6b7IxY0ubewz2u4Vqin2zdpEt1i2ip+q8UuPooPw+jl1Xe30XG\n7yc5aUE9i7RyN+21LAD3lBNZmmRFK9LdBn9hXd6s6L1I/LiGTjCFLQ06t/Ix1hqY\nYE2MzIOpg8BLsemcehrGbkQ8L/6dara2kjyvdN5zRVYjI641IGWnz4jnqZ+i0R/D\nzODhebr7/VTHIyLT8JYNJFEmnb8iRIKCruToN/vLY1g2O9zU1a9UY7K3Np9Ll2JD\nGH5EPY+fZPHp7wv6qUsRkSpmWvuen6DEnkDAGgBvz+AUFpD4UhTb8DoN0eoRlN4i\nAAj7UnBIr89PWaHHt66H+4Dn9tolrznCLwJJt6C35/FSDQyl+wqcPvFjkoALSVLz\nEY8FSyRVPl6GfL3To087WiavBqLj/E7r96WE5ZO0Xx7LyS0huH8xB6k5WsDa6hue\nfgHtgSn//3CMgvklkaLCBgoexbK0NEl+QY2MpxTHmG+/SSQlClCTwyEQBOiXrAPS\nRQBcK8w6tjA00FXCQXyHtt5wUdNISl1jiFZCYShwsDHXA9EZHb3L6lvhzdjMO7D4\n9qseOkWBLdJyzx0Qgxw5BOZ1a0eDFKkTXpYztTaIHpmyoAsssNBAg+mkgGuvMd79\ndXPeEj6MDJ9p5mbIF6Pwv1reeOvdpZyxRh7oGhm8cXCN6gqPXkg=\n=egc0\n-----END PGP SIGNATURE-----", "payload": "tree 160d882892d85b29a6d2d6d938d782c8d212552c\nparent 203c8765ea33c65d888febe0e8219c4bb11b0d89\nauthor Le\u00f3n Orell Valerian Liehr <liehr.exchange@gmx.net> 1670259767 +0100\ncommitter Le\u00f3n Orell Valerian Liehr <liehr.exchange@gmx.net> 1670259767 +0100\n\nnormalize inherent associated types after substitution\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "html_url": "https://github.com/rust-lang/rust/commit/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/comments", "author": {"login": "fmease", "id": 14913065, "node_id": "MDQ6VXNlcjE0OTEzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/14913065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmease", "html_url": "https://github.com/fmease", "followers_url": "https://api.github.com/users/fmease/followers", "following_url": "https://api.github.com/users/fmease/following{/other_user}", "gists_url": "https://api.github.com/users/fmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmease/subscriptions", "organizations_url": "https://api.github.com/users/fmease/orgs", "repos_url": "https://api.github.com/users/fmease/repos", "events_url": "https://api.github.com/users/fmease/events{/privacy}", "received_events_url": "https://api.github.com/users/fmease/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fmease", "id": 14913065, "node_id": "MDQ6VXNlcjE0OTEzMDY1", "avatar_url": "https://avatars.githubusercontent.com/u/14913065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fmease", "html_url": "https://github.com/fmease", "followers_url": "https://api.github.com/users/fmease/followers", "following_url": "https://api.github.com/users/fmease/following{/other_user}", "gists_url": "https://api.github.com/users/fmease/gists{/gist_id}", "starred_url": "https://api.github.com/users/fmease/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fmease/subscriptions", "organizations_url": "https://api.github.com/users/fmease/orgs", "repos_url": "https://api.github.com/users/fmease/repos", "events_url": "https://api.github.com/users/fmease/events{/privacy}", "received_events_url": "https://api.github.com/users/fmease/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "203c8765ea33c65d888febe0e8219c4bb11b0d89", "url": "https://api.github.com/repos/rust-lang/rust/commits/203c8765ea33c65d888febe0e8219c4bb11b0d89", "html_url": "https://github.com/rust-lang/rust/commit/203c8765ea33c65d888febe0e8219c4bb11b0d89"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "66906b331da2ece663b3b06fb9883a144b5d474a", "filename": "compiler/rustc_hir_analysis/src/astconv/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fastconv%2Fmod.rs?ref=d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "patch": "@@ -1930,6 +1930,7 @@ impl<'o, 'tcx> dyn AstConv<'tcx> + 'o {\n                     adt_substs,\n                 );\n                 let ty = tcx.bound_type_of(assoc_ty_did).subst(tcx, item_substs);\n+                let ty = self.normalize_ty(span, ty);\n                 return Ok((ty, DefKind::AssocTy, assoc_ty_did));\n             }\n         }"}, {"sha": "50763ecddf99c34dc1a9447e7106675f5686945e", "filename": "src/test/ui/associated-inherent-types/normalize-projection-0.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-0.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-0.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-0.rs?ref=d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "patch": "@@ -0,0 +1,22 @@\n+// check-pass\n+\n+#![feature(inherent_associated_types)]\n+#![allow(incomplete_features)]\n+\n+struct S<T>(T);\n+\n+impl<T: O> S<T> {\n+    type P = <T as O>::P;\n+}\n+\n+trait O {\n+    type P;\n+}\n+\n+impl O for i32 {\n+    type P = String;\n+}\n+\n+fn main() {\n+    let _: S<i32>::P = String::new();\n+}"}, {"sha": "2f7b2551a03eced2c807406d1c922748196f513b", "filename": "src/test/ui/associated-inherent-types/normalize-projection-1.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-inherent-types%2Fnormalize-projection-1.rs?ref=d5cb5fb1853952c0e5377e86a09c0fcf5bf2a829", "patch": "@@ -0,0 +1,22 @@\n+// check-pass\n+\n+#![feature(inherent_associated_types)]\n+#![allow(incomplete_features)]\n+\n+struct S;\n+\n+impl S {\n+    type P<T: O> = <T as O>::P;\n+}\n+\n+trait O {\n+    type P;\n+}\n+\n+impl O for i32 {\n+    type P = String;\n+}\n+\n+fn main() {\n+    let _: S::P<i32> = String::new();\n+}"}]}