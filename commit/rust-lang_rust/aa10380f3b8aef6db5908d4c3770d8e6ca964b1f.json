{"sha": "aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhMTAzODBmM2I4YWVmNmRiNTkwOGQ0YzM3NzBkOGU2Y2E5NjRiMWY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2021-05-18T17:35:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-18T17:35:40Z"}, "message": "Rollup merge of #85251 - BoxyUwU:constparamdefaultsany%, r=lcnr\n\nMake `const_generics_defaults` not an incomplete feature\n\nr? `@lcnr`", "tree": {"sha": "7e95498db15a6268cf3dd259a169e6e44c221d6d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e95498db15a6268cf3dd259a169e6e44c221d6d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgo/ruCRBK7hj4Ov3rIwAAfToIADErclTU3O/uTz3b5CLt9nlL\nrQDlZDayX0vPgwOCauWifTpsO2ulC+Am29TLdTI194+3zyWaRXY9p2HejU76Yn9Y\nK5ndIiJ/IQ3p7GSj8nL8xU35pPhhI0QXosPjqr90cqCqRBcuTCORFDPXUvF2U64I\nvPDgx6BCtfyKu7kCDkjnzelbhEUVT1Q3cIu+vfD+rZ742y2yUlNh3tqHUt3ZFh47\nqlYRAauDpsgFL8Z0PebPisEKWASb0gZCoGt/Q3jAaP4hYim++Uo7Pdnl8sdNfBRb\nQX8/EXVpoDv1b5ePPzHnyxCj2beaVNVpX2Bt3oCQKl74FJvfBWn0Qutqq+rU4XM=\n=Zt9q\n-----END PGP SIGNATURE-----\n", "payload": "tree 7e95498db15a6268cf3dd259a169e6e44c221d6d\nparent c9b6bb92798108dfa4f8ae93a961aa95163b2df6\nparent aec611c08d4b0d51a0d294b8ac39cc0a6c345ca6\nauthor Ralf Jung <post@ralfj.de> 1621359340 +0200\ncommitter GitHub <noreply@github.com> 1621359340 +0200\n\nRollup merge of #85251 - BoxyUwU:constparamdefaultsany%, r=lcnr\n\nMake `const_generics_defaults` not an incomplete feature\n\nr? `@lcnr`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "html_url": "https://github.com/rust-lang/rust/commit/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9b6bb92798108dfa4f8ae93a961aa95163b2df6", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9b6bb92798108dfa4f8ae93a961aa95163b2df6", "html_url": "https://github.com/rust-lang/rust/commit/c9b6bb92798108dfa4f8ae93a961aa95163b2df6"}, {"sha": "aec611c08d4b0d51a0d294b8ac39cc0a6c345ca6", "url": "https://api.github.com/repos/rust-lang/rust/commits/aec611c08d4b0d51a0d294b8ac39cc0a6c345ca6", "html_url": "https://github.com/rust-lang/rust/commit/aec611c08d4b0d51a0d294b8ac39cc0a6c345ca6"}], "stats": {"total": 13, "additions": 2, "deletions": 11}, "files": [{"sha": "b3a6fb3c808b2ad5882dfdcb62bc8488d69106d8", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -698,7 +698,6 @@ pub const INCOMPLETE_FEATURES: &[Symbol] = &[\n     sym::repr128,\n     sym::unsized_locals,\n     sym::capture_disjoint_fields,\n-    sym::const_generics_defaults,\n     sym::inherent_associated_types,\n     sym::type_alias_impl_trait,\n     sym::native_link_modifiers,"}, {"sha": "9779835d3150b40b06e09aea72d59dbace7945e9", "filename": "src/test/ui/const-generics/defaults/const-param-as-default-value.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-as-default-value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-as-default-value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-as-default-value.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n struct Foo<const N: usize, const M: usize = N>([u8; N], [u8; M]);\n \n fn foo<const N: usize>() -> Foo<N> {"}, {"sha": "dbcab77dcd2ee0eeb06d8dfc6dcdd6f8a6e617c4", "filename": "src/test/ui/const-generics/defaults/const-param-in-ty-defaults.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-in-ty-defaults.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-in-ty-defaults.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fconst-param-in-ty-defaults.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n struct Foo<const N: usize, T = [u8; N]>(T);\n \n impl<const N: usize> Foo<N> {"}, {"sha": "d4271adefd12ae1488c017880c78b5b57972222b", "filename": "src/test/ui/const-generics/defaults/default-param-wf-concrete.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n struct Foo<const N: u8 = { 255 + 1 }>;\n //~^ ERROR evaluation of constant value failed\n fn main() {}"}, {"sha": "6fca9d31c0a99f31e498095ffb31e168756d3c52", "filename": "src/test/ui/const-generics/defaults/default-param-wf-concrete.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fdefault-param-wf-concrete.stderr?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,5 +1,5 @@\n error[E0080]: evaluation of constant value failed\n-  --> $DIR/default-param-wf-concrete.rs:3:28\n+  --> $DIR/default-param-wf-concrete.rs:2:28\n    |\n LL | struct Foo<const N: u8 = { 255 + 1 }>;\n    |                            ^^^^^^^ attempt to compute `u8::MAX + 1_u8`, which would overflow"}, {"sha": "0487668cd2a7c0f7bb152e2944214df4cb29a3e9", "filename": "src/test/ui/const-generics/defaults/pretty-printing-ast.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -4,7 +4,6 @@\n \n #![crate_type = \"lib\"]\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n \n trait Foo<const KIND: bool = true> {}\n "}, {"sha": "1bceb8cbb94ddcc3b8e8ac179d353e43000dcb0d", "filename": "src/test/ui/const-generics/defaults/pretty-printing-ast.stdout", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fpretty-printing-ast.stdout?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -6,7 +6,6 @@\n \n #![crate_type = \"lib\"]\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n #[prelude_import]\n use ::std::prelude::rust_2015::*;\n #[macro_use]"}, {"sha": "ca29ee942064536aaee9252305c93b693b627796", "filename": "src/test/ui/const-generics/defaults/repr-c-issue-82792.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Frepr-c-issue-82792.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Frepr-c-issue-82792.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Frepr-c-issue-82792.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -3,7 +3,6 @@\n // run-pass\n \n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n \n #[repr(C)]\n pub struct Loaf<T: Sized, const N: usize = 1> {"}, {"sha": "b47dd2f618cd976b7cc9e61bff27bf1b81a2c0fd", "filename": "src/test/ui/const-generics/min_const_generics/default_function_param.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,6 +1,5 @@\n #![crate_type = \"lib\"]\n #![feature(const_generics_defaults)]\n-#![allow(incomplete_features)]\n \n fn foo<const SIZE: usize = 5usize>() {}\n //~^ ERROR defaults for const parameters are"}, {"sha": "11df8621faa24a57ba39cb42e419d7caadf737a3", "filename": "src/test/ui/const-generics/min_const_generics/default_function_param.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fmin_const_generics%2Fdefault_function_param.stderr?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,5 +1,5 @@\n error: defaults for const parameters are only allowed in `struct`, `enum`, `type`, or `trait` definitions\n-  --> $DIR/default_function_param.rs:5:14\n+  --> $DIR/default_function_param.rs:4:14\n    |\n LL | fn foo<const SIZE: usize = 5usize>() {}\n    |              ^^^^"}, {"sha": "7c4ebca874673f769b76640e8329a0d22aea9a6b", "filename": "src/test/ui/derives/derive-macro-const-default.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fderives%2Fderive-macro-const-default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa10380f3b8aef6db5908d4c3770d8e6ca964b1f/src%2Ftest%2Fui%2Fderives%2Fderive-macro-const-default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fderives%2Fderive-macro-const-default.rs?ref=aa10380f3b8aef6db5908d4c3770d8e6ca964b1f", "patch": "@@ -1,5 +1,4 @@\n // check-pass\n-#![allow(incomplete_features)]\n #![feature(const_generics_defaults)]\n \n #[derive(Clone, PartialEq, Debug)]"}]}