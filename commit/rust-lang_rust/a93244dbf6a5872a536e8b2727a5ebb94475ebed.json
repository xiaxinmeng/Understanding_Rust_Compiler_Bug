{"sha": "a93244dbf6a5872a536e8b2727a5ebb94475ebed", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5MzI0NGRiZjZhNTg3MmE1MzZlOGIyNzI3YTVlYmI5NDQ3NWViZWQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-07-17T07:52:48Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-07-17T07:52:48Z"}, "message": "auto merge of #7839 : graydon/rust/new-codegen-tests, r=pcwalton\n\nAdd some codegen tests. Nothing too surprising.", "tree": {"sha": "2901d2a3f54d9817403eac04a756d3aa2d601bd8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2901d2a3f54d9817403eac04a756d3aa2d601bd8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a93244dbf6a5872a536e8b2727a5ebb94475ebed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a93244dbf6a5872a536e8b2727a5ebb94475ebed", "html_url": "https://github.com/rust-lang/rust/commit/a93244dbf6a5872a536e8b2727a5ebb94475ebed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a93244dbf6a5872a536e8b2727a5ebb94475ebed/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af54f633fd72dda691e70aef9aeadd36f0fab8b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/af54f633fd72dda691e70aef9aeadd36f0fab8b9", "html_url": "https://github.com/rust-lang/rust/commit/af54f633fd72dda691e70aef9aeadd36f0fab8b9"}, {"sha": "40f74341f3ba2cee2afedb31014ee14432d700cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/40f74341f3ba2cee2afedb31014ee14432d700cd", "html_url": "https://github.com/rust-lang/rust/commit/40f74341f3ba2cee2afedb31014ee14432d700cd"}], "stats": {"total": 65, "additions": 65, "deletions": 0}, "files": [{"sha": "7eca21b13d70b693ef97bff8649dbd6c8c76ab7a", "filename": "src/test/codegen/iterate-over-array.cc", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fiterate-over-array.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fiterate-over-array.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fiterate-over-array.cc?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,17 @@\n+#include <stdlib.h>\n+#include <assert.h>\n+\n+struct slice {\n+  int const *p;\n+  size_t len;\n+};\n+\n+extern \"C\"\n+size_t test(slice s) {\n+  size_t y = 0;\n+  for (int i = 0; i < s.len; ++i) {\n+\tassert(i < s.len);\n+\ty += s.p[i];\n+  }\n+  return y;\n+}"}, {"sha": "cf54e6eafbaf1c288c13601f75098a506c7a6457", "filename": "src/test/codegen/iterate-over-array.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fiterate-over-array.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fiterate-over-array.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fiterate-over-array.rs?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,10 @@\n+#[no_mangle]\n+fn test(x: &[int]) -> int {\n+    let mut y = 0;\n+    let mut i = 0;\n+    while (i < x.len()) {\n+        y += x[i];\n+        i += 1;\n+    }\n+    y\n+}"}, {"sha": "91ed882f68a9f57096314ca6be12ae3a42df18d6", "filename": "src/test/codegen/scalar-function-call.cc", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fscalar-function-call.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fscalar-function-call.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fscalar-function-call.cc?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,10 @@\n+#include <stdlib.h>\n+\n+size_t foo(size_t x) {\n+    return x * x;\n+}\n+\n+extern \"C\"\n+void test() {\n+    size_t x = foo(10);\n+}"}, {"sha": "7e4a566749ba666cee21b116022a35b0ce5e87f1", "filename": "src/test/codegen/scalar-function-call.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fscalar-function-call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fscalar-function-call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fscalar-function-call.rs?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,8 @@\n+fn foo(x: int) -> int {\n+    x * x\n+}\n+\n+#[no_mangle]\n+fn test() {\n+    let x = foo(10);\n+}"}, {"sha": "87bc5bf852eb4a36abf111d315bc7e8386572682", "filename": "src/test/codegen/small-dense-int-switch.cc", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.cc?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,11 @@\n+#include <stdlib.h>\n+\n+extern \"C\"\n+size_t test(size_t x, size_t y) {\n+  switch (x) {\n+  case 1: return y;\n+  case 2: return y*2;\n+  case 4: return y*3;\n+  default: return 11;\n+  }\n+}"}, {"sha": "6840dc7411b34b6a6a858cc70a8a31211bcd643e", "filename": "src/test/codegen/small-dense-int-switch.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fsmall-dense-int-switch.rs?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "patch": "@@ -0,0 +1,9 @@\n+#[no_mangle]\n+fn test(x: int, y: int) -> int {\n+    match x {\n+        1 => y,\n+        2 => y*2,\n+        4 => y*3,\n+        _ => 11\n+    }\n+}"}, {"sha": "01eae9b16bb6faf9c1cc84d8362726bcb5949cff", "filename": "src/test/codegen/stack-alloc-string-slice.cc", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.cc", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.cc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.cc?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "previous_filename": "src/test/codegen/hello.cc"}, {"sha": "e7cd84f63f2b09d4c482cd02e1d2ada81def7401", "filename": "src/test/codegen/stack-alloc-string-slice.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a93244dbf6a5872a536e8b2727a5ebb94475ebed/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fstack-alloc-string-slice.rs?ref=a93244dbf6a5872a536e8b2727a5ebb94475ebed", "previous_filename": "src/test/codegen/hello.rs"}]}