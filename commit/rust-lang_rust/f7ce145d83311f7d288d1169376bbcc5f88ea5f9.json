{"sha": "f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "node_id": "C_kwDOAAsO6NoAKGY3Y2UxNDVkODMzMTFmN2QyODhkMTE2OTM3NmJiY2M1Zjg4ZWE1Zjk", "commit": {"author": {"name": "Lo\u00efc BRANSTETT", "email": "lolo.branstett@numericable.fr", "date": "2022-04-08T15:33:40Z"}, "committer": {"name": "Lo\u00efc BRANSTETT", "email": "lolo.branstett@numericable.fr", "date": "2022-04-17T10:00:52Z"}, "message": "Remove extra space before a where clause in the documentation", "tree": {"sha": "15145e1df4c787b3a58ff06d6af6ad3b17af9500", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15145e1df4c787b3a58ff06d6af6ad3b17af9500"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "html_url": "https://github.com/rust-lang/rust/commit/f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/comments", "author": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac8b11810f4a0def3596ee401feb9ef00015b555", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac8b11810f4a0def3596ee401feb9ef00015b555", "html_url": "https://github.com/rust-lang/rust/commit/ac8b11810f4a0def3596ee401feb9ef00015b555"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "0f0efcf62a010a29fb8f2fd76eec47fd37848732", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "patch": "@@ -371,7 +371,8 @@ crate fn print_where_clause<'a, 'tcx: 'a>(\n             clause = clause.replace(\"<br>\", &format!(\"<br>{}\", padding));\n             clause.insert_str(0, &\"&nbsp;\".repeat(indent.saturating_sub(1)));\n             if !end_newline {\n-                clause.insert_str(0, \"<br>\");\n+                // we insert the <br> after a single space but before multiple spaces at the start\n+                clause.insert_str(if indent == 0 { 1 } else { 0 }, \"<br>\");\n             }\n         }\n         write!(f, \"{}\", clause)"}, {"sha": "0133bcaeb66734f700c59da6b6ec9d0749d812a8", "filename": "src/test/rustdoc/where.SWhere_Simd_item-decl.html", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_Simd_item-decl.html", "raw_url": "https://github.com/rust-lang/rust/raw/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_Simd_item-decl.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhere.SWhere_Simd_item-decl.html?ref=f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "patch": "@@ -0,0 +1 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust struct\"><code>pub struct Simd&lt;T&gt;(_) <br /><span class=\"where\">where<br />&#160;&#160;&#160;&#160;T: <a class=\"trait\" href=\"trait.MyTrait.html\" title=\"trait foo::MyTrait\">MyTrait</a></span>;</code></pre></div>\n\\ No newline at end of file"}, {"sha": "54026ff034e001b93f3b6fd8f4b5141ff5528f76", "filename": "src/test/rustdoc/where.SWhere_TraitWhere_item-decl.html", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html", "raw_url": "https://github.com/rust-lang/rust/raw/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhere.SWhere_TraitWhere_item-decl.html?ref=f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "patch": "@@ -0,0 +1,3 @@\n+<div class=\"docblock item-decl\"><pre class=\"rust trait\"><code>pub trait TraitWhere {\n+    type <a href=\"#associatedtype.Item\" class=\"associatedtype\">Item</a>&lt;'a&gt;<br />&#160;&#160;&#160; <span class=\"where\">where<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Self: 'a</span>;\n+}</code></pre></div>\n\\ No newline at end of file"}, {"sha": "50a5722fbaff6926e5feec51c6ffd18d531bac5a", "filename": "src/test/rustdoc/where.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7ce145d83311f7d288d1169376bbcc5f88ea5f9/src%2Ftest%2Frustdoc%2Fwhere.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fwhere.rs?ref=f7ce145d83311f7d288d1169376bbcc5f88ea5f9", "patch": "@@ -1,3 +1,4 @@\n+#![feature(generic_associated_types)]\n #![crate_name = \"foo\"]\n \n pub trait MyTrait { fn dummy(&self) { } }\n@@ -19,6 +20,18 @@ impl<D> Delta<D> where D: MyTrait {\n \n pub struct Echo<E>(E);\n \n+// @has 'foo/struct.Simd.html'\n+// @snapshot SWhere_Simd_item-decl - '//div[@class=\"docblock item-decl\"]'\n+pub struct Simd<T>([T; 1])\n+where\n+    T: MyTrait;\n+\n+// @has 'foo/trait.TraitWhere.html'\n+// @snapshot SWhere_TraitWhere_item-decl - '//div[@class=\"docblock item-decl\"]'\n+pub trait TraitWhere {\n+    type Item<'a> where Self: 'a;\n+}\n+\n // @has foo/struct.Echo.html '//*[@class=\"impl has-srclink\"]//h3[@class=\"code-header in-band\"]' \\\n //          \"impl<E> MyTrait for Echo<E> where E: MyTrait\"\n // @has foo/trait.MyTrait.html '//*[@id=\"implementors-list\"]//h3[@class=\"code-header in-band\"]' \\"}]}