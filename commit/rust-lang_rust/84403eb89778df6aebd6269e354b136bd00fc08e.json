{"sha": "84403eb89778df6aebd6269e354b136bd00fc08e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0NDAzZWI4OTc3OGRmNmFlYmQ2MjY5ZTM1NGIxMzZiZDAwZmMwOGU=", "commit": {"author": {"name": "Luqman Aden", "email": "laden@csclub.uwaterloo.ca", "date": "2013-11-23T02:21:37Z"}, "committer": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2013-11-23T06:04:36Z"}, "message": "Remove sjlj stuff from rust_upcall and don't pass -Werror to libuv.", "tree": {"sha": "f2ca60dc59cffc1fbaf6503178eaf00d99fc6a84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2ca60dc59cffc1fbaf6503178eaf00d99fc6a84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84403eb89778df6aebd6269e354b136bd00fc08e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84403eb89778df6aebd6269e354b136bd00fc08e", "html_url": "https://github.com/rust-lang/rust/commit/84403eb89778df6aebd6269e354b136bd00fc08e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84403eb89778df6aebd6269e354b136bd00fc08e/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2c111abde887d462293a0868b1968c1aa2c0a2e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2c111abde887d462293a0868b1968c1aa2c0a2e", "html_url": "https://github.com/rust-lang/rust/commit/a2c111abde887d462293a0868b1968c1aa2c0a2e"}], "stats": {"total": 30, "additions": 12, "deletions": 18}, "files": [{"sha": "f54c948425fc7def1f70fa768c53bdf93f84103e", "filename": "mk/platform.mk", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/84403eb89778df6aebd6269e354b136bd00fc08e/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/84403eb89778df6aebd6269e354b136bd00fc08e/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=84403eb89778df6aebd6269e354b136bd00fc08e", "patch": "@@ -231,7 +231,7 @@ CFG_LIB_NAME_x86_64-apple-darwin=lib$(1).dylib\n CFG_STATIC_LIB_NAME_x86_64-apple-darwin=lib$(1).a\n CFG_LIB_GLOB_x86_64-apple-darwin=lib$(1)-*.dylib\n CFG_LIB_DSYM_GLOB_x86_64-apple-darwin=lib$(1)-*.dylib.dSYM\n-CFG_GCCISH_CFLAGS_x86_64-apple-darwin := -Wall -g -fPIC -m64 -arch x86_64\n+CFG_GCCISH_CFLAGS_x86_64-apple-darwin := -Wall -Werror -g -fPIC -m64 -arch x86_64\n CFG_GCCISH_CXXFLAGS_x86_64-apple-darwin := -fno-rtti\n CFG_GCCISH_LINK_FLAGS_x86_64-apple-darwin := -dynamiclib -pthread  -framework CoreServices -m64\n CFG_GCCISH_DEF_FLAG_x86_64-apple-darwin := -Wl,-exported_symbols_list,\n@@ -257,7 +257,7 @@ CFG_LIB_NAME_i686-apple-darwin=lib$(1).dylib\n CFG_STATIC_LIB_NAME_i686-apple-darwin=lib$(1).a\n CFG_LIB_GLOB_i686-apple-darwin=lib$(1)-*.dylib\n CFG_LIB_DSYM_GLOB_i686-apple-darwin=lib$(1)-*.dylib.dSYM\n-CFG_GCCISH_CFLAGS_i686-apple-darwin := -Wall -g -fPIC -m32 -arch i386\n+CFG_GCCISH_CFLAGS_i686-apple-darwin := -Wall -Werror -g -fPIC -m32 -arch i386\n CFG_GCCISH_CXXFLAGS_i686-apple-darwin := -fno-rtti\n CFG_GCCISH_LINK_FLAGS_i686-apple-darwin := -dynamiclib -pthread  -framework CoreServices -m32\n CFG_GCCISH_DEF_FLAG_i686-apple-darwin := -Wl,-exported_symbols_list,\n@@ -396,7 +396,7 @@ CFG_LIB_NAME_i686-pc-mingw32=$(1).dll\n CFG_STATIC_LIB_NAME_i686-pc-mingw32=$(1).lib\n CFG_LIB_GLOB_i686-pc-mingw32=$(1)-*.dll\n CFG_LIB_DSYM_GLOB_i686-pc-mingw32=$(1)-*.dylib.dSYM\n-CFG_GCCISH_CFLAGS_i686-pc-mingw32 := -Wall -g -m32 -march=i686 -D_WIN32_WINNT=0x0600 -I$(CFG_SRC_DIR)src/etc/mingw-fix-include\n+CFG_GCCISH_CFLAGS_i686-pc-mingw32 := -Wall -Werror -g -m32 -march=i686 -D_WIN32_WINNT=0x0600 -I$(CFG_SRC_DIR)src/etc/mingw-fix-include\n CFG_GCCISH_CXXFLAGS_i686-pc-mingw32 := -fno-rtti\n CFG_GCCISH_LINK_FLAGS_i686-pc-mingw32 := -shared -fPIC -g -m32\n CFG_GCCISH_DEF_FLAG_i686-pc-mingw32 :=\n@@ -452,7 +452,7 @@ CFG_LIB_NAME_i686-w64-mingw32=$(1).dll\n CFG_STATIC_LIB_NAME_i686-w64-mingw32=$(1).lib\n CFG_LIB_GLOB_i686-w64-mingw32=$(1)-*.dll\n CFG_LIB_DSYM_GLOB_i686-w64-mingw32=$(1)-*.dylib.dSYM\n-CFG_GCCISH_CFLAGS_i686-w64-mingw32 := -Wall -g -m32 -D_WIN32_WINNT=0x0600\n+CFG_GCCISH_CFLAGS_i686-w64-mingw32 := -Wall -Werror -g -m32 -D_WIN32_WINNT=0x0600\n CFG_GCCISH_CXXFLAGS_i686-w64-mingw32 := -fno-rtti\n CFG_GCCISH_LINK_FLAGS_i686-w64-mingw32 := -shared -g -m32\n CFG_GCCISH_DEF_FLAG_i686-w64-mingw32 :=\n@@ -480,7 +480,7 @@ CFG_LIB_NAME_x86_64-w64-mingw32=$(1).dll\n CFG_STATIC_LIB_NAME_x86_64-w64-mingw32=$(1).lib\n CFG_LIB_GLOB_x86_64-w64-mingw32=$(1)-*.dll\n CFG_LIB_DSYM_GLOB_x86_64-w64-mingw32=$(1)-*.dylib.dSYM\n-CFG_GCCISH_CFLAGS_x86_64-w64-mingw32 := -Wall -g -m64 -D_WIN32_WINNT=0x0600\n+CFG_GCCISH_CFLAGS_x86_64-w64-mingw32 := -Wall -Werror -g -m64 -D_WIN32_WINNT=0x0600\n CFG_GCCISH_CXXFLAGS_x86_64-w64-mingw32 := -fno-rtti\n CFG_GCCISH_LINK_FLAGS_x86_64-w64-mingw32 := -shared -g -m64\n CFG_GCCISH_DEF_FLAG_x86_64-w64-mingw32 :="}, {"sha": "cc22d5781a6a2dd8e8013e9f63120726667f340c", "filename": "mk/rt.mk", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/84403eb89778df6aebd6269e354b136bd00fc08e/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/84403eb89778df6aebd6269e354b136bd00fc08e/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=84403eb89778df6aebd6269e354b136bd00fc08e", "patch": "@@ -192,6 +192,9 @@ LIBUV_LIB_$(1) := $$(RT_OUTPUT_DIR_$(1))/libuv/$$(LIBUV_NAME_$(1))\n \n LIBUV_MAKEFILE_$(1) := $$(CFG_BUILD_DIR)$$(RT_OUTPUT_DIR_$(1))/libuv/Makefile\n \n+# libuv triggers a few warnings on some platforms\n+LIBUV_CFLAGS_$(1) := $(subst -Werror,,$(CFG_GCCISH_CFLAGS_$(1)))\n+\n $$(LIBUV_MAKEFILE_$(1)): $$(LIBUV_DEPS)\n \t(cd $(S)src/libuv/ && \\\n \t $$(CFG_PYTHON) ./gyp_uv.py -f make -Dtarget_arch=$$(LIBUV_ARCH_$(1)) \\\n@@ -205,14 +208,16 @@ $$(LIBUV_MAKEFILE_$(1)): $$(LIBUV_DEPS)\n ifdef CFG_WINDOWSY_$(1)\n $$(LIBUV_LIB_$(1)): $$(LIBUV_DEPS)\n \t$$(Q)$$(MAKE) -C $$(S)src/libuv -f Makefile.mingw \\\n-\t\tCC=\"$$(CC_$(1)) $$(CFG_GCCISH_CFLAGS_$(1)) $$(SNAP_DEFINES)\" \\\n+\t\tLDFLAGS=\"$$(CFG_GCCISH_LINK_FLAGS_$(1))\" \\\n+\t\tCC=\"$$(CC_$(1)) $$(LIBUV_CFLAGS_$(1)) $$(SNAP_DEFINES)\" \\\n+\t\tCXX=\"$$(CXX_$(1))\" \\\n \t\tAR=\"$$(AR_$(1))\" \\\n \t\tV=$$(VERBOSE)\n \t$$(Q)cp $$(S)src/libuv/libuv.a $$@\n else\n $$(LIBUV_LIB_$(1)): $$(LIBUV_DEPS) $$(LIBUV_MAKEFILE_$(1))\n \t$$(Q)$$(MAKE) -C $$(@D) \\\n-\t\tCFLAGS=\"$$(CFG_GCCISH_CFLAGS_$(1)) $$(SNAP_DEFINES)\" \\\n+\t\tCFLAGS=\"$$(LIBUV_CFLAGS_$(1)) $$(SNAP_DEFINES)\" \\\n \t\tLDFLAGS=\"$$(CFG_GCCISH_LINK_FLAGS_$(1))\" \\\n \t\tCC=\"$$(CC_$(1))\" \\\n \t\tCXX=\"$$(CXX_$(1))\" \\"}, {"sha": "9740fdea82c962081437896c939ab722a54b6697", "filename": "src/rt/rust_upcall.c", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/84403eb89778df6aebd6269e354b136bd00fc08e/src%2Frt%2Frust_upcall.c", "raw_url": "https://github.com/rust-lang/rust/raw/84403eb89778df6aebd6269e354b136bd00fc08e/src%2Frt%2Frust_upcall.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.c?ref=84403eb89778df6aebd6269e354b136bd00fc08e", "patch": "@@ -35,16 +35,6 @@ struct _Unwind_Exception;\n #   endif\n #endif\n \n-#if __USING_SJLJ_EXCEPTIONS__\n-void _Unwind_SjLj_Resume(struct _Unwind_Exception* exception_object);\n-\n-void _Unwind_Resume(struct _Unwind_Exception* exception_object) {\n-    _Unwind_SjLj_Resume(exception_object);\n-}\n-#else\n-extern void _Unnwind_Resume(struct _Unwind_Exception* exception_object);\n-#endif\n-\n _Unwind_Reason_Code\n PERSONALITY_FUNC(int version,\n                      _Unwind_Action actions,"}, {"sha": "2a3e687ee55551835127e4a11ccc795cf26b9614", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/84403eb89778df6aebd6269e354b136bd00fc08e/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/84403eb89778df6aebd6269e354b136bd00fc08e/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=84403eb89778df6aebd6269e354b136bd00fc08e", "patch": "@@ -49,4 +49,3 @@ rust_get_test_int\n rust_pthread_mutex_t_size\n rust_pthread_cond_t_size\n rust_crit_section_size\n-_Unwind_Resume"}]}