{"sha": "fdb4b7c46261c61847ce3dbe3d77c4f102041973", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZkYjRiN2M0NjI2MWM2MTg0N2NlM2RiZTNkNzdjNGYxMDIwNDE5NzM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-08-29T14:25:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-29T14:25:30Z"}, "message": "Rollup merge of #88357 - lcnr:stabilize-relaxed_struct_unsize, r=Mark-Simulacrum\n\nadd unsized coercion test\n\nwe had no tests in our test suite for this case", "tree": {"sha": "af6dc39e694ae37c90ac51bab508df8f62e68628", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af6dc39e694ae37c90ac51bab508df8f62e68628"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fdb4b7c46261c61847ce3dbe3d77c4f102041973", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhK5jbCRBK7hj4Ov3rIwAArt0IAFL/A29EBHyZoGRH1O8kN8lu\nzWMk4xHmxyc96twGuxn1Oda4sll1PDJF5QPFN13HWfvMHIppC6dbEC9ACJ9X/334\nuf7XLzb4tnXYwuQCF2kE87ojjxBHjXT41I9xTRgmWF/EBJr2oQ3TzsP65PKkzxxj\n3pxTh0Shs1Kjp20dYHXd2sx/xzoyLYER5vs2HMOJCR4rwkwU7pFxG/GhBGO5c0k3\n/SuICBDNayA4jTzmMS7ceK68f0VjYMYQHdqOVz8RY3ODoc0O3WsXL33EFEZSMcnQ\ne2yrmbGEXQ6q4QONg3+0W6ufz1cCn2FNRi7cS69TOri3ddpERIWZD5lJzMUTBIE=\n=XCfI\n-----END PGP SIGNATURE-----\n", "payload": "tree af6dc39e694ae37c90ac51bab508df8f62e68628\nparent 3e1a15bb12c203b42069dd06a3afa621e4b61567\nparent bee13d18af34ce6056a0b76fb7652cafda52cb69\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1630247130 +0200\ncommitter GitHub <noreply@github.com> 1630247130 +0200\n\nRollup merge of #88357 - lcnr:stabilize-relaxed_struct_unsize, r=Mark-Simulacrum\n\nadd unsized coercion test\n\nwe had no tests in our test suite for this case\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fdb4b7c46261c61847ce3dbe3d77c4f102041973", "html_url": "https://github.com/rust-lang/rust/commit/fdb4b7c46261c61847ce3dbe3d77c4f102041973", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fdb4b7c46261c61847ce3dbe3d77c4f102041973/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e1a15bb12c203b42069dd06a3afa621e4b61567", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e1a15bb12c203b42069dd06a3afa621e4b61567", "html_url": "https://github.com/rust-lang/rust/commit/3e1a15bb12c203b42069dd06a3afa621e4b61567"}, {"sha": "bee13d18af34ce6056a0b76fb7652cafda52cb69", "url": "https://api.github.com/repos/rust-lang/rust/commits/bee13d18af34ce6056a0b76fb7652cafda52cb69", "html_url": "https://github.com/rust-lang/rust/commit/bee13d18af34ce6056a0b76fb7652cafda52cb69"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "cda94b306d333e477b9fdd8d46cedf25b93d0eb6", "filename": "src/test/ui/unsized/param-mentioned-by-different-field.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/fdb4b7c46261c61847ce3dbe3d77c4f102041973/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fdb4b7c46261c61847ce3dbe3d77c4f102041973/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs?ref=fdb4b7c46261c61847ce3dbe3d77c4f102041973", "patch": "@@ -0,0 +1,10 @@\n+// We must not allow this with our current setup as `T`\n+// is mentioned both in the tail of `Foo` and by another\n+// field.\n+struct Foo<T: ?Sized>(Box<T>, T);\n+\n+fn main() {\n+    let x: Foo<[u8; 1]> = Foo(Box::new([2]), [3]);\n+    let y: &Foo<[u8]> = &x; //~ ERROR mismatched types\n+    assert_eq!(y.0.len(), 1);\n+}"}, {"sha": "d18fa6456f3ee41d7a8ccc422f2a69e530b78b53", "filename": "src/test/ui/unsized/param-mentioned-by-different-field.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/fdb4b7c46261c61847ce3dbe3d77c4f102041973/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fdb4b7c46261c61847ce3dbe3d77c4f102041973/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr?ref=fdb4b7c46261c61847ce3dbe3d77c4f102041973", "patch": "@@ -0,0 +1,14 @@\n+error[E0308]: mismatched types\n+  --> $DIR/param-mentioned-by-different-field.rs:8:25\n+   |\n+LL |     let y: &Foo<[u8]> = &x;\n+   |            ----------   ^^ expected slice `[u8]`, found array `[u8; 1]`\n+   |            |\n+   |            expected due to this\n+   |\n+   = note: expected reference `&Foo<[u8]>`\n+              found reference `&Foo<[u8; 1]>`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}]}