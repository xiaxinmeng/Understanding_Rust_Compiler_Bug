{"sha": "4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjOTA4YTlkMzdkMWVkMTczZTQyMjZjM2I3MWU5ZjA1YjcyNjBjMzk=", "commit": {"author": {"name": "Marco Castelluccio", "email": "mcastelluccio@mozilla.com", "date": "2017-06-06T17:09:33Z"}, "committer": {"name": "Marco Castelluccio", "email": "mcastelluccio@mozilla.com", "date": "2017-06-06T17:09:33Z"}, "message": "Enable profiler selectively on some builders", "tree": {"sha": "3c610d11ccac5b9fa5e5fac96f23b3f6b28ebc86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c610d11ccac5b9fa5e5fac96f23b3f6b28ebc86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "html_url": "https://github.com/rust-lang/rust/commit/4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/comments", "author": {"login": "marco-c", "id": 1616846, "node_id": "MDQ6VXNlcjE2MTY4NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1616846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marco-c", "html_url": "https://github.com/marco-c", "followers_url": "https://api.github.com/users/marco-c/followers", "following_url": "https://api.github.com/users/marco-c/following{/other_user}", "gists_url": "https://api.github.com/users/marco-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/marco-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marco-c/subscriptions", "organizations_url": "https://api.github.com/users/marco-c/orgs", "repos_url": "https://api.github.com/users/marco-c/repos", "events_url": "https://api.github.com/users/marco-c/events{/privacy}", "received_events_url": "https://api.github.com/users/marco-c/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marco-c", "id": 1616846, "node_id": "MDQ6VXNlcjE2MTY4NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1616846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marco-c", "html_url": "https://github.com/marco-c", "followers_url": "https://api.github.com/users/marco-c/followers", "following_url": "https://api.github.com/users/marco-c/following{/other_user}", "gists_url": "https://api.github.com/users/marco-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/marco-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marco-c/subscriptions", "organizations_url": "https://api.github.com/users/marco-c/orgs", "repos_url": "https://api.github.com/users/marco-c/repos", "events_url": "https://api.github.com/users/marco-c/events{/privacy}", "received_events_url": "https://api.github.com/users/marco-c/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95c6fc49441d5387c5495da4eb7b40537c218c1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/95c6fc49441d5387c5495da4eb7b40537c218c1a", "html_url": "https://github.com/rust-lang/rust/commit/95c6fc49441d5387c5495da4eb7b40537c218c1a"}], "stats": {"total": 23, "additions": 13, "deletions": 10}, "files": [{"sha": "cf7134f873a5e617e83bc8fc368dd66cb8865200", "filename": ".travis.yml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -54,7 +54,7 @@ matrix:\n     # version that we're using, 8.2, cannot compile LLVM for OSX 10.7.\n     - env: >\n         RUST_CHECK_TARGET=check\n-        RUST_CONFIGURE_ARGS=\"--build=x86_64-apple-darwin --enable-sanitizers\"\n+        RUST_CONFIGURE_ARGS=\"--build=x86_64-apple-darwin --enable-sanitizers --enable-profiler\"\n         SRC=.\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n         SCCACHE_ERROR_LOG=/tmp/sccache.log\n@@ -87,7 +87,7 @@ matrix:\n     # OSX 10.7 and `xcode7` is the latest Xcode able to compile LLVM for 10.7.\n     - env: >\n         RUST_CHECK_TARGET=dist\n-        RUST_CONFIGURE_ARGS=\"--build=i686-apple-darwin --enable-extended\"\n+        RUST_CONFIGURE_ARGS=\"--build=i686-apple-darwin --enable-extended --enable-profiler\"\n         SRC=.\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1\n@@ -101,7 +101,7 @@ matrix:\n         - *osx_install_sccache\n     - env: >\n         RUST_CHECK_TARGET=dist\n-        RUST_CONFIGURE_ARGS=\"--target=aarch64-apple-ios,armv7-apple-ios,armv7s-apple-ios,i386-apple-ios,x86_64-apple-ios --enable-extended --enable-sanitizers\"\n+        RUST_CONFIGURE_ARGS=\"--target=aarch64-apple-ios,armv7-apple-ios,armv7s-apple-ios,i386-apple-ios,x86_64-apple-ios --enable-extended --enable-sanitizers --enable-profiler\"\n         SRC=.\n         DEPLOY=1\n         RUSTC_RETRY_LINKER_ON_SEGFAULT=1"}, {"sha": "d4f805de5de3fae7400e197d886d4cc4626d845d", "filename": "appveyor.yml", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -7,7 +7,7 @@ environment:\n   matrix:\n   # 32/64 bit MSVC tests\n   - MSYS_BITS: 64\n-    RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n+    RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-profiler\n     SCRIPT: python x.py test\n   - MSYS_BITS: 32\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-msvc --target=i586-pc-windows-msvc\n@@ -48,24 +48,26 @@ environment:\n   - RUST_CONFIGURE_ARGS: >\n       --build=x86_64-pc-windows-msvc\n       --enable-extended\n+      --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY: 1\n   - RUST_CONFIGURE_ARGS: >\n       --build=i686-pc-windows-msvc\n       --target=i586-pc-windows-msvc\n       --enable-extended\n+      --enable-profiler\n     SCRIPT: python x.py dist\n     DEPLOY: 1\n   - MSYS_BITS: 32\n-    RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-extended\n+    RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-extended --enable-profiler\n     SCRIPT: python x.py dist\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n     MINGW_ARCHIVE: i686-6.3.0-release-posix-dwarf-rt_v5-rev2.7z\n     MINGW_DIR: mingw32\n     DEPLOY: 1\n   - MSYS_BITS: 64\n     SCRIPT: python x.py dist\n-    RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-extended\n+    RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-extended --enable-profiler\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n     MINGW_ARCHIVE: x86_64-6.3.0-release-posix-seh-rt_v5-rev2.7z\n     MINGW_DIR: mingw64"}, {"sha": "9145e9dfc8d1a5fbe50babebdb05e93536efd30c", "filename": "src/ci/docker/dist-i686-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fdist-i686-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fdist-i686-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-i686-linux%2FDockerfile?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -90,7 +90,8 @@ ENV HOSTS=i686-unknown-linux-gnu\n ENV RUST_CONFIGURE_ARGS \\\n       --host=$HOSTS \\\n       --enable-extended \\\n-      --enable-sanitizers\n+      --enable-sanitizers \\\n+      --enable-profiler\n ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n \n # This is the only builder which will create source tarballs"}, {"sha": "78b62839a35d5a14604b621851a282f576664a73", "filename": "src/ci/docker/dist-x86_64-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-linux%2FDockerfile?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -90,7 +90,8 @@ ENV HOSTS=x86_64-unknown-linux-gnu\n ENV RUST_CONFIGURE_ARGS \\\n       --host=$HOSTS \\\n       --enable-extended \\\n-      --enable-sanitizers\n+      --enable-sanitizers \\\n+      --enable-profiler\n ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n \n # This is the only builder which will create source tarballs"}, {"sha": "0bbbded57f27d23c1828cafcda0e4bfd5f040370", "filename": "src/ci/docker/x86_64-gnu/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -22,5 +22,5 @@ RUN curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-ini\n     rm dumb-init_*.deb\n ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n \n-ENV RUST_CONFIGURE_ARGS --build=x86_64-unknown-linux-gnu --enable-sanitizers\n+ENV RUST_CONFIGURE_ARGS --build=x86_64-unknown-linux-gnu --enable-sanitizers --enable-profiler\n ENV SCRIPT python2.7 ../x.py test"}, {"sha": "549e804603c07b90f14bc223d3605e64559c1c45", "filename": "src/ci/run.sh", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/4c908a9d37d1ed173e4226c3b71e9f05b7260c39/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=4c908a9d37d1ed173e4226c3b71e9f05b7260c39", "patch": "@@ -32,7 +32,6 @@ RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-manage-submodules\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-locked-deps\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-cargo-openssl-static\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-llvm-clean-rebuild\"\n-RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-profiler\"\n \n if [ \"$DIST_SRC\" = \"\" ]; then\n   RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-dist-src\""}]}