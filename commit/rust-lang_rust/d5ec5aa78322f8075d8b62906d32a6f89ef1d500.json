{"sha": "d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1ZWM1YWE3ODMyMmY4MDc1ZDhiNjI5MDZkMzJhNmY4OWVmMWQ1MDA=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T21:37:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-16T21:37:35Z"}, "message": "Rollup merge of #88089 - dns2utf8:rustdoc_font_test, r=GuillaumeGomez\n\nRustdoc font test\n\n Add a font test based on #85669 fixes #85632.\n\nr? `@jsha` `@GuillaumeGomez`", "tree": {"sha": "ee3c36d4a57deb92debf5dba98f9f36d849c4c05", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee3c36d4a57deb92debf5dba98f9f36d849c4c05"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhGtqfCRBK7hj4Ov3rIwAAJVUIAIpQmqhJbARZ5l7WWU0tzkt1\nC0DtHRcnpQWO9AoUkjRX6nCmrhbznV1Fe/Kaunnpiazq7YLV/RFa7+Ajevu1iX+4\nZHu5qopjp20zQybgbIpaCy5hJAP+rVRhGMKchxXEB+7kksQtR8Bze1U5FthSW+Uj\nAaGoAvNbk9FUqrrm2ik3zNuA6zSVjQwFdXt5tc/hwHZYRhUFEoIHygeGkm/ZD8eh\nV81/p6yB8o8IUs2x1MLaKRYzXQXPpcnhnj0RTe/tf6ooUkAMje3M9Tm7AayqEJO8\nF5L9uVWeyAIzzt9sqckaAF9WEHvAHHi0zQp19CdkuO/DoxAA1tbmjMPoV9H4grk=\n=PyQc\n-----END PGP SIGNATURE-----\n", "payload": "tree ee3c36d4a57deb92debf5dba98f9f36d849c4c05\nparent 4de53c427bffc24590056932770ebfc21427aa16\nparent 2f486d5f8d77256c4bba91b135f62e66fcc85e04\nauthor Mara Bos <m-ou.se@m-ou.se> 1629149855 +0200\ncommitter GitHub <noreply@github.com> 1629149855 +0200\n\nRollup merge of #88089 - dns2utf8:rustdoc_font_test, r=GuillaumeGomez\n\nRustdoc font test\n\n Add a font test based on #85669 fixes #85632.\n\nr? `@jsha` `@GuillaumeGomez`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "html_url": "https://github.com/rust-lang/rust/commit/d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5ec5aa78322f8075d8b62906d32a6f89ef1d500/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4de53c427bffc24590056932770ebfc21427aa16", "url": "https://api.github.com/repos/rust-lang/rust/commits/4de53c427bffc24590056932770ebfc21427aa16", "html_url": "https://github.com/rust-lang/rust/commit/4de53c427bffc24590056932770ebfc21427aa16"}, {"sha": "2f486d5f8d77256c4bba91b135f62e66fcc85e04", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f486d5f8d77256c4bba91b135f62e66fcc85e04", "html_url": "https://github.com/rust-lang/rust/commit/2f486d5f8d77256c4bba91b135f62e66fcc85e04"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "ab595d28019210bfec57a956853fb640dd11ab75", "filename": "src/test/rustdoc-gui/module-items-font.goml", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/d5ec5aa78322f8075d8b62906d32a6f89ef1d500/src%2Ftest%2Frustdoc-gui%2Fmodule-items-font.goml", "raw_url": "https://github.com/rust-lang/rust/raw/d5ec5aa78322f8075d8b62906d32a6f89ef1d500/src%2Ftest%2Frustdoc-gui%2Fmodule-items-font.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fmodule-items-font.goml?ref=d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "patch": "@@ -2,3 +2,22 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n assert-css: (\".item-table .module-item a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'}, ALL)\n assert-css: (\".item-table .docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'}, ALL)\n+\n+// modules\n+assert-css: (\"#modules + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#modules + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})\n+// structs\n+assert-css: (\"#structs + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#structs + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})\n+// enums\n+assert-css: (\"#enums + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#enums + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})\n+// traits\n+assert-css: (\"#traits + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#traits + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})\n+// functions\n+assert-css: (\"#functions + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#functions + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})\n+// keywords\n+assert-css: (\"#keywords + .item-table .item-left a\", {\"font-family\": '\"Fira Sans\", Arial, sans-serif'})\n+assert-css: (\"#keywords + .item-table .item-right.docblock-short\", {\"font-family\": '\"Source Serif 4\", \"Noto Sans KR\", serif'})"}, {"sha": "d1cf5fb803d630c11825e8e083dc330e80b2db48", "filename": "src/tools/rustdoc-gui/tester.js", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d5ec5aa78322f8075d8b62906d32a6f89ef1d500/src%2Ftools%2Frustdoc-gui%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/d5ec5aa78322f8075d8b62906d32a6f89ef1d500/src%2Ftools%2Frustdoc-gui%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-gui%2Ftester.js?ref=d5ec5aa78322f8075d8b62906d32a6f89ef1d500", "patch": "@@ -93,8 +93,13 @@ function char_printer(n_tests) {\n             }\n         },\n         finish: function() {\n-            const spaces = \" \".repeat(max_per_line - (current % max_per_line));\n-            process.stdout.write(`${spaces} (${current}/${n_tests})${os.EOL}${os.EOL}`);\n+            if (current % max_per_line === 0) {\n+                // Don't output if we are already at a matching line end\n+                console.log(\"\");\n+            } else {\n+                const spaces = \" \".repeat(max_per_line - (current % max_per_line));\n+                process.stdout.write(`${spaces} (${current}/${n_tests})${os.EOL}${os.EOL}`);\n+            }\n         },\n     };\n }"}]}