{"sha": "1566273f482612fa5812ecb41d15a9c87a571465", "node_id": "C_kwDOAAsO6NoAKDE1NjYyNzNmNDgyNjEyZmE1ODEyZWNiNDFkMTVhOWM4N2E1NzE0NjU", "commit": {"author": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-10-10T16:11:53Z"}, "committer": {"name": "nils", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2022-10-14T20:32:05Z"}, "message": "Remove unsued variable in query macro", "tree": {"sha": "0334f08e0c847b0a58281e43a1eb7584f6354ab6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0334f08e0c847b0a58281e43a1eb7584f6354ab6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1566273f482612fa5812ecb41d15a9c87a571465", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgWnoWpkMvJlSFxMiZfPmQ9OBZ0B\nzicY1KArCIU18CM8IAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQCt/ICrx7PWlwqt8UZ67FILy0WfMWmPlWSo2LeXyV42+v84Ibq3Gp+XSQwP9Tt3FBj\nEqoxmE6tN1a4zUKIH3HgI=\n-----END SSH SIGNATURE-----", "payload": "tree 0334f08e0c847b0a58281e43a1eb7584f6354ab6\nparent 5819f419a7b9fcda92b74ab2c48010a778eaec40\nauthor Nilstrieb <48135649+Nilstrieb@users.noreply.github.com> 1665418313 +0200\ncommitter nils <48135649+Nilstrieb@users.noreply.github.com> 1665779525 +0200\n\nRemove unsued variable in query macro\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1566273f482612fa5812ecb41d15a9c87a571465", "html_url": "https://github.com/rust-lang/rust/commit/1566273f482612fa5812ecb41d15a9c87a571465", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1566273f482612fa5812ecb41d15a9c87a571465/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5819f419a7b9fcda92b74ab2c48010a778eaec40", "url": "https://api.github.com/repos/rust-lang/rust/commits/5819f419a7b9fcda92b74ab2c48010a778eaec40", "html_url": "https://github.com/rust-lang/rust/commit/5819f419a7b9fcda92b74ab2c48010a778eaec40"}], "stats": {"total": 7, "additions": 0, "deletions": 7}, "files": [{"sha": "8fd6830cbdae86e8c09b806605e07930d8dbc7e6", "filename": "compiler/rustc_macros/src/query.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1566273f482612fa5812ecb41d15a9c87a571465/compiler%2Frustc_macros%2Fsrc%2Fquery.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1566273f482612fa5812ecb41d15a9c87a571465/compiler%2Frustc_macros%2Fsrc%2Fquery.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_macros%2Fsrc%2Fquery.rs?ref=1566273f482612fa5812ecb41d15a9c87a571465", "patch": "@@ -289,7 +289,6 @@ pub fn rustc_queries(input: TokenStream) -> TokenStream {\n \n     let mut query_stream = quote! {};\n     let mut query_description_stream = quote! {};\n-    let mut cached_queries = quote! {};\n \n     for query in queries.0 {\n         let Query { name, arg, modifiers, .. } = &query;\n@@ -299,12 +298,6 @@ pub fn rustc_queries(input: TokenStream) -> TokenStream {\n             _ => quote! { #result_full },\n         };\n \n-        if modifiers.cache.is_some() {\n-            cached_queries.extend(quote! {\n-                #name,\n-            });\n-        }\n-\n         let mut attributes = Vec::new();\n \n         macro_rules! passthrough {"}]}