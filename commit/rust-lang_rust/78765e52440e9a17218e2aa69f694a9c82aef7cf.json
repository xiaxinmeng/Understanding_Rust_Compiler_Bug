{"sha": "78765e52440e9a17218e2aa69f694a9c82aef7cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4NzY1ZTUyNDQwZTlhMTcyMThlMmFhNjlmNjk0YTljODJhZWY3Y2Y=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2018-10-15T17:15:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-10-15T17:15:15Z"}, "message": "Rollup merge of #55025 - ehuss:missing-lifetime-err-msg, r=petrochenkov\n\nAdd missing lifetime fragment specifier to error message.\n\nA very minor issue, `lifetime` was missing from the error list.\nI left `literal` in the list, even though it is unstable. It looks like it may stabilize soon anyways.", "tree": {"sha": "d7ffc34eb02586eb6d7e056618acad4c2e3fec7d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d7ffc34eb02586eb6d7e056618acad4c2e3fec7d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/78765e52440e9a17218e2aa69f694a9c82aef7cf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbxMsjCRBK7hj4Ov3rIwAAdHIIAHYyf5f4z956RxPLSo9XioY0\nPqkzvDEshHfraZ1e1T0XkCpiksqbNvCc8N7oSVWdhOkcuU+E1niIIWoLefKafrxG\nOZI9TTvYtQb9FivOzW0Ssu7q302pv8RZo7nzA0MOxKBt+dRWsIP48NSbuyU0t/9N\nZY2KoGs2hI6zIjzXmRfyav/c4DjqaFfWYsvpUY9bwWtWvoZMI6KjCPHaos7X2cHQ\nzvgAy755cH8ywC/ct9Hcbe9wiDBb+VrI/J3VKXDmob/WcxSmJw4YS2okPnj0Qp83\ntENwyq/DbKCZkNcKdeAc5lPKnQpOnHG0T64CPkXyJMXzx0NRVFCY0iSaf66iwAQ=\n=IqJg\n-----END PGP SIGNATURE-----\n", "payload": "tree d7ffc34eb02586eb6d7e056618acad4c2e3fec7d\nparent defcb164b1f2a4cb20a0ee100a747b1232b54b88\nparent 09f42dd9029f0913355a9c52d6a0c6642f0e6e52\nauthor Manish Goregaokar <manishsmail@gmail.com> 1539623715 -0700\ncommitter GitHub <noreply@github.com> 1539623715 -0700\n\nRollup merge of #55025 - ehuss:missing-lifetime-err-msg, r=petrochenkov\n\nAdd missing lifetime fragment specifier to error message.\n\nA very minor issue, `lifetime` was missing from the error list.\nI left `literal` in the list, even though it is unstable. It looks like it may stabilize soon anyways.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/78765e52440e9a17218e2aa69f694a9c82aef7cf", "html_url": "https://github.com/rust-lang/rust/commit/78765e52440e9a17218e2aa69f694a9c82aef7cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/78765e52440e9a17218e2aa69f694a9c82aef7cf/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "defcb164b1f2a4cb20a0ee100a747b1232b54b88", "url": "https://api.github.com/repos/rust-lang/rust/commits/defcb164b1f2a4cb20a0ee100a747b1232b54b88", "html_url": "https://github.com/rust-lang/rust/commit/defcb164b1f2a4cb20a0ee100a747b1232b54b88"}, {"sha": "09f42dd9029f0913355a9c52d6a0c6642f0e6e52", "url": "https://api.github.com/repos/rust-lang/rust/commits/09f42dd9029f0913355a9c52d6a0c6642f0e6e52", "html_url": "https://github.com/rust-lang/rust/commit/09f42dd9029f0913355a9c52d6a0c6642f0e6e52"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "87ade278c685a7fadf4e9d8114861e6806c83725", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=78765e52440e9a17218e2aa69f694a9c82aef7cf", "patch": "@@ -34,6 +34,10 @@ use std::collections::hash_map::Entry;\n use rustc_data_structures::sync::Lrc;\n use errors::Applicability;\n \n+const VALID_FRAGMENT_NAMES_MSG: &str = \"valid fragment specifiers are \\\n+    `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `lifetime`, `literal`, \\\n+    `path`, `meta`, `tt`, `item` and `vis`\";\n+\n pub struct ParserAnyMacro<'a> {\n     parser: Parser<'a>,\n \n@@ -708,8 +712,7 @@ fn check_matcher_core(sess: &ParseSess,\n                 if let Err(bad_frag) = has_legal_fragment_specifier(sess, features, attrs, token) {\n                     let msg = format!(\"invalid fragment specifier `{}`\", bad_frag);\n                     sess.span_diagnostic.struct_span_err(token.span(), &msg)\n-                        .help(\"valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, \\\n-                              `pat`, `ty`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\")\n+                        .help(VALID_FRAGMENT_NAMES_MSG)\n                         .emit();\n                     // (This eliminates false positives and duplicates\n                     // from error messages.)\n@@ -938,9 +941,7 @@ fn is_in_follow(tok: &quoted::TokenTree, frag: &str) -> Result<bool, (String, &'\n             },\n             \"\" => Ok(true), // keywords::Invalid\n             _ => Err((format!(\"invalid fragment specifier `{}`\", frag),\n-                     \"valid fragment specifiers are `ident`, `block`, \\\n-                      `stmt`, `expr`, `pat`, `ty`, `path`, `meta`, `tt`, \\\n-                      `literal`, `item` and `vis`\"))\n+                     VALID_FRAGMENT_NAMES_MSG))\n         }\n     }\n }"}, {"sha": "924767fb5e17a3cdd666c87e0ff67b02141ba46f", "filename": "src/test/ui/issues/issue-21356.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Fissues%2Fissue-21356.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Fissues%2Fissue-21356.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-21356.stderr?ref=78765e52440e9a17218e2aa69f694a9c82aef7cf", "patch": "@@ -4,7 +4,7 @@ error: invalid fragment specifier `t_ty`\n LL | macro_rules! test { ($wrong:t_ty ..) => () }\n    |                      ^^^^^^^^^^^\n    |\n-   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n+   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `lifetime`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n \n error: aborting due to previous error\n "}, {"sha": "e683d47cf54826cd03a9abc5a84ed15bdc41bf50", "filename": "src/test/ui/macros/macro-invalid-fragment-spec.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Fmacros%2Fmacro-invalid-fragment-spec.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Fmacros%2Fmacro-invalid-fragment-spec.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-invalid-fragment-spec.stderr?ref=78765e52440e9a17218e2aa69f694a9c82aef7cf", "patch": "@@ -4,7 +4,7 @@ error: invalid fragment specifier `foo`\n LL |     ($x:foo) => ()\n    |      ^^^^^^\n    |\n-   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n+   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `lifetime`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n \n error: aborting due to previous error\n "}, {"sha": "20b1ae690ec82d1b7e833775d1c96bac01c4bf2c", "filename": "src/test/ui/unused/unused-macro-with-bad-frag-spec.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Funused%2Funused-macro-with-bad-frag-spec.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/78765e52440e9a17218e2aa69f694a9c82aef7cf/src%2Ftest%2Fui%2Funused%2Funused-macro-with-bad-frag-spec.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funused%2Funused-macro-with-bad-frag-spec.stderr?ref=78765e52440e9a17218e2aa69f694a9c82aef7cf", "patch": "@@ -4,7 +4,7 @@ error: invalid fragment specifier `t_ty`\n LL |     ($wrong:t_ty) => () //~ ERROR invalid fragment specifier `t_ty`\n    |      ^^^^^^^^^^^\n    |\n-   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n+   = help: valid fragment specifiers are `ident`, `block`, `stmt`, `expr`, `pat`, `ty`, `lifetime`, `literal`, `path`, `meta`, `tt`, `item` and `vis`\n \n error: aborting due to previous error\n "}]}