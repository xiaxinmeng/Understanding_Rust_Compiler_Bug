{"sha": "106ca9665371b5738091533aca481ab0b230400b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwNmNhOTY2NTM3MWI1NzM4MDkxNTMzYWNhNDgxYWIwYjIzMDQwMGI=", "commit": {"author": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2021-01-02T15:20:43Z"}, "committer": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2021-01-02T15:20:43Z"}, "message": "Use rustc --version in versioncheck", "tree": {"sha": "0f37e423cce86f0efbd44cb2fb52801af80b9140", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f37e423cce86f0efbd44cb2fb52801af80b9140"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/106ca9665371b5738091533aca481ab0b230400b", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEij1UXJ/PQTcb99vTHKDfKvWdaKUFAl/wj0sACgkQHKDfKvWd\naKXAMA/+N9NY4oFZwzSZdrg8RTU4OvREfFLypAqDJ2wRJm2O0c/DQ1zhnhDbnC4N\n+p1ZBnDexFdllWxhZE/pjBoru9AWOUJ896aL60rlHAHf8MUaauSRjatBZSHw9Z3X\nE/8XoJYv1d4hi0RSXEzD9BJZYXTtDqev6eJktZvhwIejqajWtE1wM02AsBGKit5a\nZggIVpzrEn4M8JbGPvHX0oxy0uuKKV59FcWYTWzKbr16NxhelH9AvibJxvDbU2jP\ngCMwf0qbwj4lIgqity+AK2gEVkTtWxTHHcCXPuuykl9WbWBU3apJairVrGF0ccSS\nznE/zA4vyJS0PPSRspBNroay2IQDelXK3Omgp0KQGhZ3lGHSvUU6xNROgrUWNS+h\nHmPPRq9Z76xv9yh767JF1bX5kIKB8QHOpE0jnOE4uyfTBVwLouYFlYy4V7Fb+sDH\nq002YQBveeuMVp2h1di6PySBlu4kMu1ufWEc9EmkUXSkzfeaYwDvqJSys+Kl0kvB\nYDlksgl9i0SkQG1n8KiCYkd0rv7D5YG+5fNEwI5Hh2p6qd4gDZhPymZjGmd32GV0\n5ENqc+Kzn1YUYoBuSl5L/p4et5Eh+zlhbtl51NjatJ+sceynkZ9pgozLXZAd6/e0\nHD/8tvH1+WCNcfZKmGyRIcoIQVKDRjEDrU9lQoG4MMGPdl3YZe0=\n=85XU\n-----END PGP SIGNATURE-----", "payload": "tree 0f37e423cce86f0efbd44cb2fb52801af80b9140\nparent db268f8ef8e8ba0b0f1fedeb82156b251c86395a\nauthor flip1995 <philipp.krones@embecosm.com> 1609600843 +0100\ncommitter flip1995 <philipp.krones@embecosm.com> 1609600843 +0100\n\nUse rustc --version in versioncheck\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/106ca9665371b5738091533aca481ab0b230400b", "html_url": "https://github.com/rust-lang/rust/commit/106ca9665371b5738091533aca481ab0b230400b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/106ca9665371b5738091533aca481ab0b230400b/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db268f8ef8e8ba0b0f1fedeb82156b251c86395a", "url": "https://api.github.com/repos/rust-lang/rust/commits/db268f8ef8e8ba0b0f1fedeb82156b251c86395a", "html_url": "https://github.com/rust-lang/rust/commit/db268f8ef8e8ba0b0f1fedeb82156b251c86395a"}], "stats": {"total": 15, "additions": 6, "deletions": 9}, "files": [{"sha": "589b19f68f7a05bb485b1a700e3a0c2ddc0c50dd", "filename": "tests/versioncheck.rs", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/106ca9665371b5738091533aca481ab0b230400b/tests%2Fversioncheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/106ca9665371b5738091533aca481ab0b230400b/tests%2Fversioncheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fversioncheck.rs?ref=106ca9665371b5738091533aca481ab0b230400b", "patch": "@@ -28,17 +28,17 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n     let clippy_minor = clippy_version.minor;\n     let clippy_patch = clippy_version.patch;\n \n-    // get the rustc version from cargo\n+    // get the rustc version\n     // this way the rust-toolchain file version is honored\n     let rustc_version = String::from_utf8(\n-        std::process::Command::new(\"cargo\")\n+        std::process::Command::new(\"rustc\")\n             .arg(\"--version\")\n             .output()\n-            .expect(\"failed to run 'cargo --version'\")\n+            .expect(\"failed to run `rustc --version`\")\n             .stdout,\n     )\n     .unwrap();\n-    // extract \"1 50 0\" from \"cargo 1.50.0-nightly (a3c2627fb 2020-12-14)\"\n+    // extract \"1 XX 0\" from \"rustc 1.XX.0-nightly (<commit> <date>)\"\n     let vsplit: Vec<&str> = rustc_version\n         .split(' ')\n         .nth(1)\n@@ -50,9 +50,7 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n         .collect();\n     match vsplit.as_slice() {\n         [rustc_major, rustc_minor, _rustc_patch] => {\n-            // clippy 0.1.50 should correspond to rustc 1.50.0\n-            dbg!(&rustc_version);\n-            dbg!(&clippy_version);\n+            // clippy 0.1.XX should correspond to rustc 1.XX.0\n             assert_eq!(clippy_major, 0); // this will probably stay the same for a long time\n             assert_eq!(\n                 clippy_minor.to_string(),\n@@ -68,8 +66,7 @@ fn check_that_clippy_has_the_same_major_version_as_rustc() {\n             // we don't want our tests failing suddenly\n         },\n         _ => {\n-            dbg!(vsplit);\n-            panic!(\"Failed to parse rustc version\");\n+            panic!(\"Failed to parse rustc version: {:?}\", vsplit);\n         },\n     };\n }"}]}