{"sha": "5d0fea144181eb8504852b664ff44543a429969e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkMGZlYTE0NDE4MWViODUwNDg1MmI2NjRmZjQ0NTQzYTQyOTk2OWU=", "commit": {"author": {"name": "Andreas Neuhaus", "email": "zargony@zargony.com", "date": "2013-12-22T20:37:33Z"}, "committer": {"name": "Andreas Neuhaus", "email": "zargony@zargony.com", "date": "2013-12-22T20:37:33Z"}, "message": "Use --crate-file-name to find out the library filename in dep-info test", "tree": {"sha": "c2b64f27a280dc6763c9777ae07e0282f96d17a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2b64f27a280dc6763c9777ae07e0282f96d17a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d0fea144181eb8504852b664ff44543a429969e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d0fea144181eb8504852b664ff44543a429969e", "html_url": "https://github.com/rust-lang/rust/commit/5d0fea144181eb8504852b664ff44543a429969e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d0fea144181eb8504852b664ff44543a429969e/comments", "author": {"login": "zargony", "id": 5121, "node_id": "MDQ6VXNlcjUxMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zargony", "html_url": "https://github.com/zargony", "followers_url": "https://api.github.com/users/zargony/followers", "following_url": "https://api.github.com/users/zargony/following{/other_user}", "gists_url": "https://api.github.com/users/zargony/gists{/gist_id}", "starred_url": "https://api.github.com/users/zargony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zargony/subscriptions", "organizations_url": "https://api.github.com/users/zargony/orgs", "repos_url": "https://api.github.com/users/zargony/repos", "events_url": "https://api.github.com/users/zargony/events{/privacy}", "received_events_url": "https://api.github.com/users/zargony/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zargony", "id": 5121, "node_id": "MDQ6VXNlcjUxMjE=", "avatar_url": "https://avatars.githubusercontent.com/u/5121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zargony", "html_url": "https://github.com/zargony", "followers_url": "https://api.github.com/users/zargony/followers", "following_url": "https://api.github.com/users/zargony/following{/other_user}", "gists_url": "https://api.github.com/users/zargony/gists{/gist_id}", "starred_url": "https://api.github.com/users/zargony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zargony/subscriptions", "organizations_url": "https://api.github.com/users/zargony/orgs", "repos_url": "https://api.github.com/users/zargony/repos", "events_url": "https://api.github.com/users/zargony/events{/privacy}", "received_events_url": "https://api.github.com/users/zargony/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b1e7db71c3a71c7a9f89f765e9d500c48539bfe", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b1e7db71c3a71c7a9f89f765e9d500c48539bfe", "html_url": "https://github.com/rust-lang/rust/commit/9b1e7db71c3a71c7a9f89f765e9d500c48539bfe"}], "stats": {"total": 9, "additions": 3, "deletions": 6}, "files": [{"sha": "236fb1e4024d9aeb2eccdbb50e3c03867df1e172", "filename": "src/test/run-make/dep-info/Makefile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5d0fea144181eb8504852b664ff44543a429969e/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/5d0fea144181eb8504852b664ff44543a429969e/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile?ref=5d0fea144181eb8504852b664ff44543a429969e", "patch": "@@ -1,4 +1,5 @@\n -include ../tools.mk\n+\n all:\n \t$(RUSTC) --dep-info --lib lib.rs\n \tsleep 1"}, {"sha": "2a1ce715e280ae49fe76e39027756cb9b6461008", "filename": "src/test/run-make/dep-info/Makefile.foo", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5d0fea144181eb8504852b664ff44543a429969e/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile.foo", "raw_url": "https://github.com/rust-lang/rust/raw/5d0fea144181eb8504852b664ff44543a429969e/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile.foo", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fdep-info%2FMakefile.foo?ref=5d0fea144181eb8504852b664ff44543a429969e", "patch": "@@ -1,10 +1,6 @@\n-ifeq ($(shell uname),Darwin)\n-LIBEXT=dylib\n-else\n-LIBEXT=so\n-endif\n+LIB := $(shell $(RUSTC) --crate-file-name --lib lib.rs)\n \n-$(TMPDIR)/libfoo-b517899a-0.1.$(LIBEXT):\n+$(TMPDIR)/$(LIB):\n \t$(RUSTC) --dep-info --lib lib.rs\n \ttouch $(TMPDIR)/done\n "}]}