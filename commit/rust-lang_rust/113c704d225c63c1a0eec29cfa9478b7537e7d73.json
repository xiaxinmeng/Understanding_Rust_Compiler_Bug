{"sha": "113c704d225c63c1a0eec29cfa9478b7537e7d73", "node_id": "C_kwDOAAsO6NoAKDExM2M3MDRkMjI1YzYzYzFhMGVlYzI5Y2ZhOTQ3OGI3NTM3ZTdkNzM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-28T21:24:26Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-28T21:24:26Z"}, "message": "Auto merge of #10427 - xFrednet:changelog-1-68, r=Manishearth\n\nUpdate version attribute for 1.68 lints\n\nRoses are red,\nviolets are blue,\nI'm running out of rhymes,\nchangelogs are crimes????\n\n---\n\nchangelog: none\n<!-- changelog_checked -->", "tree": {"sha": "77a00d132b45cb04531503dc8c888407a8847ea7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/77a00d132b45cb04531503dc8c888407a8847ea7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/113c704d225c63c1a0eec29cfa9478b7537e7d73", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/113c704d225c63c1a0eec29cfa9478b7537e7d73", "html_url": "https://github.com/rust-lang/rust/commit/113c704d225c63c1a0eec29cfa9478b7537e7d73", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/113c704d225c63c1a0eec29cfa9478b7537e7d73/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d9ca944fa066d4873313092aa1ec18aa2781df4", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d9ca944fa066d4873313092aa1ec18aa2781df4", "html_url": "https://github.com/rust-lang/rust/commit/2d9ca944fa066d4873313092aa1ec18aa2781df4"}, {"sha": "917ebc3af65abc067262b3e987d12603c9002841", "url": "https://api.github.com/repos/rust-lang/rust/commits/917ebc3af65abc067262b3e987d12603c9002841", "html_url": "https://github.com/rust-lang/rust/commit/917ebc3af65abc067262b3e987d12603c9002841"}], "stats": {"total": 157, "additions": 151, "deletions": 6}, "files": [{"sha": "915a12fc8cb52abe3966b07dbdc0bcada7aac0f3", "filename": "CHANGELOG.md", "status": "modified", "additions": 146, "deletions": 1, "changes": 147, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -6,7 +6,152 @@ document.\n \n ## Unreleased / Beta / In Rust Nightly\n \n-[d822110d...master](https://github.com/rust-lang/rust-clippy/compare/d822110d...master)\n+[7f27e2e7...master](https://github.com/rust-lang/rust-clippy/compare/7f27e2e7...master)\n+\n+## Rust 1.68\n+\n+Current beta, released 2023-03-09\n+\n+[d822110d...7f27e2e7](https://github.com/rust-lang/rust-clippy/compare/d822110d...7f27e2e7)\n+\n+### New Lints\n+\n+* [`permissions_set_readonly_false`]\n+  [#10063](https://github.com/rust-lang/rust-clippy/pull/10063)\n+* [`almost_complete_range`]\n+  [#10043](https://github.com/rust-lang/rust-clippy/pull/10043)\n+* [`size_of_ref`]\n+  [#10098](https://github.com/rust-lang/rust-clippy/pull/10098)\n+* [`semicolon_outside_block`]\n+  [#9826](https://github.com/rust-lang/rust-clippy/pull/9826)\n+* [`semicolon_inside_block`]\n+  [#9826](https://github.com/rust-lang/rust-clippy/pull/9826)\n+* [`transmute_null_to_fn`]\n+  [#10099](https://github.com/rust-lang/rust-clippy/pull/10099)\n+* [`fn_null_check`]\n+  [#10099](https://github.com/rust-lang/rust-clippy/pull/10099)\n+\n+### Moves and Deprecations\n+\n+* Moved [`manual_clamp`] to `nursery` (Now allow-by-default)\n+  [#10101](https://github.com/rust-lang/rust-clippy/pull/10101)\n+* Moved [`mutex_atomic`] to `restriction`\n+  [#10115](https://github.com/rust-lang/rust-clippy/pull/10115)\n+* Renamed `derive_hash_xor_eq` to [`derived_hash_with_manual_eq`]\n+  [#10184](https://github.com/rust-lang/rust-clippy/pull/10184)\n+\n+### Enhancements\n+\n+* [`collapsible_str_replace`]: Now takes MSRV into consideration. The minimal version is 1.58\n+  [#10047](https://github.com/rust-lang/rust-clippy/pull/10047)\n+* [`unused_self`]: No longer lints, if the method body contains a `todo!()` call\n+  [#10166](https://github.com/rust-lang/rust-clippy/pull/10166)\n+* [`derivable_impls`]: Now suggests deriving `Default` for enums with default unit variants\n+  [#10161](https://github.com/rust-lang/rust-clippy/pull/10161)\n+* [`arithmetic_side_effects`]: Added two new config values\n+  `arithmetic-side-effects-allowed-binary` and `arithmetic-side-effects-allowed-unary`\n+  to allow operation on user types\n+  [#9840](https://github.com/rust-lang/rust-clippy/pull/9840)\n+* [`large_const_arrays`], [`large_stack_arrays`]: avoid integer overflow when calculating\n+  total array size\n+  [#10103](https://github.com/rust-lang/rust-clippy/pull/10103)\n+* [`indexing_slicing`]: add new config `suppress-restriction-lint-in-const` to enable\n+  restriction lints, even if the suggestion might not be applicable\n+  [#9920](https://github.com/rust-lang/rust-clippy/pull/9920)\n+* [`needless_borrow`], [`redundant_clone`]: Now track references better and detect more cases\n+  [#9701](https://github.com/rust-lang/rust-clippy/pull/9701)\n+* [`derived_hash_with_manual_eq`]: Now allows `#[derive(PartialEq)]` with custom `Hash`\n+  implementations\n+  [#10184](https://github.com/rust-lang/rust-clippy/pull/10184)\n+* [`manual_is_ascii_check`]: Now detects ranges with `.contains()` calls\n+  [#10053](https://github.com/rust-lang/rust-clippy/pull/10053)\n+* [`transmuting_null`]: Now detects `const` pointers to all types\n+  [#10099](https://github.com/rust-lang/rust-clippy/pull/10099)\n+* [`needless_return`]: Now detects more cases for returns of owned values\n+  [#10110](https://github.com/rust-lang/rust-clippy/pull/10110)\n+\n+### False Positive Fixes\n+\n+* [`field_reassign_with_default`]: No longer lints cases, where values are initializes from\n+  closures capturing struct values\n+  [#10143](https://github.com/rust-lang/rust-clippy/pull/10143)\n+* [`seek_to_start_instead_of_rewind`]: No longer lints, if the return of `seek` is used.\n+  [#10096](https://github.com/rust-lang/rust-clippy/pull/10096)\n+* [`manual_filter`]: Now ignores if expressions where the else branch has side effects or\n+  doesn't return `None`\n+  [#10091](https://github.com/rust-lang/rust-clippy/pull/10091)\n+* [`implicit_clone`]: No longer lints if the type doesn't implement clone\n+  [#10022](https://github.com/rust-lang/rust-clippy/pull/10022)\n+* [`match_wildcard_for_single_variants`]: No longer lints on wildcards with a guard\n+  [#10056](https://github.com/rust-lang/rust-clippy/pull/10056)\n+* [`drop_ref`]: No longer lints idiomatic expression in `match` arms\n+  [#10142](https://github.com/rust-lang/rust-clippy/pull/10142)\n+* [`arithmetic_side_effects`]: No longer lints on corner cases with negative number literals\n+  [#9867](https://github.com/rust-lang/rust-clippy/pull/9867)\n+* [`string_lit_as_bytes`]: No longer lints in scrutinies of `match` statements\n+  [#10012](https://github.com/rust-lang/rust-clippy/pull/10012)\n+* [`manual_assert`]: No longer lints in `else if` statements\n+  [#10013](https://github.com/rust-lang/rust-clippy/pull/10013)\n+* [`needless_return`]: don't lint when using `do yeet`\n+  [#10109](https://github.com/rust-lang/rust-clippy/pull/10109)\n+* All lints: No longer lint in enum discriminant values when the suggestion won't work in a\n+  const context\n+  [#10008](https://github.com/rust-lang/rust-clippy/pull/10008)\n+* [`single_element_loop`]: No longer lints, if the loop contains a `break` or `continue`\n+  [#10162](https://github.com/rust-lang/rust-clippy/pull/10162)\n+* [`uninlined_format_args`]: No longer suggests inlining arguments in `assert!` and\n+  `debug_assert!` macros before 2021 edition\n+  [#10055](https://github.com/rust-lang/rust-clippy/pull/10055)\n+* [`explicit_counter_loop`]: No longer ignores counter changes after `continue` expressions\n+  [#10094](https://github.com/rust-lang/rust-clippy/pull/10094)\n+* [`from_over_into`]: No longer lints on opaque types\n+  [#9982](https://github.com/rust-lang/rust-clippy/pull/9982)\n+* [`expl_impl_clone_on_copy`]: No longer lints on `#[repr(packed)]` structs with generic\n+  parameters\n+  [#10189](https://github.com/rust-lang/rust-clippy/pull/10189)\n+\n+### Suggestion Fixes/Improvements\n+\n+* [`zero_ptr`]: Now suggests `core::` paths for `no_std` crates\n+  [#10023](https://github.com/rust-lang/rust-clippy/pull/10023)\n+* [`useless_conversion`]: Now suggests removing calls to `into_iter()` on an expression\n+  implementing `Iterator`\n+  [#10020](https://github.com/rust-lang/rust-clippy/pull/10020)\n+* [`box_default`]: The suggestion now uses short paths\n+  [#10153](https://github.com/rust-lang/rust-clippy/pull/10153)\n+* [`default_trait_access`], [`clone_on_copy`]: The suggestion now uses short paths\n+  [#10160](https://github.com/rust-lang/rust-clippy/pull/10160)\n+* [`comparison_to_empty`]: The suggestion now removes unused deref operations\n+  [#9962](https://github.com/rust-lang/rust-clippy/pull/9962)\n+* [`manual_let_else`]: Suggestions for or-patterns now include required brackets.\n+  [#9966](https://github.com/rust-lang/rust-clippy/pull/9966)\n+* [`match_single_binding`]: suggestion no longer introduces unneeded semicolons\n+  [#10060](https://github.com/rust-lang/rust-clippy/pull/10060)\n+* [`case_sensitive_file_extension_comparisons`]: Now displays a suggestion with `Path`\n+  [#10107](https://github.com/rust-lang/rust-clippy/pull/10107)\n+* [`empty_structs_with_brackets`]: The suggestion is no longer machine applicable, to avoid\n+  errors when accessing struct fields\n+  [#10141](https://github.com/rust-lang/rust-clippy/pull/10141)\n+* [`identity_op`]: Removes borrows in the suggestion when needed\n+  [#10004](https://github.com/rust-lang/rust-clippy/pull/10004)\n+* [`suboptimal_flops`]: The suggestion now includes parentheses when required\n+  [#10113](https://github.com/rust-lang/rust-clippy/pull/10113)\n+* [`iter_kv_map`]: Now handles `mut` and reference annotations in the suggestion\n+  [#10159](https://github.com/rust-lang/rust-clippy/pull/10159)\n+* [`redundant_static_lifetimes`]: The suggestion no longer removes `mut` from references\n+  [#10006](https://github.com/rust-lang/rust-clippy/pull/10006)\n+\n+### ICE Fixes\n+\n+* [`new_ret_no_self`]: Now avoids a stack overflow for `impl Trait` types\n+  [#10086](https://github.com/rust-lang/rust-clippy/pull/10086)\n+* [`unnecessary_to_owned`]: Now handles compiler generated notes better\n+  [#10027](https://github.com/rust-lang/rust-clippy/pull/10027)\n+\n+### Others\n+\n+* `SYSROOT` and `--sysroot` can now be set at the same time\n+  [#10149](https://github.com/rust-lang/rust-clippy/pull/10149)\n \n ## Rust 1.67\n "}, {"sha": "32d80f42e7e0705cad8f6762050cda3240586cb1", "filename": "clippy_lints/src/almost_complete_range.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Falmost_complete_range.rs", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Falmost_complete_range.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Falmost_complete_range.rs?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -24,7 +24,7 @@ declare_clippy_lint! {\n     /// ```rust\n     /// let _ = 'a'..='z';\n     /// ```\n-    #[clippy::version = \"1.63.0\"]\n+    #[clippy::version = \"1.68.0\"]\n     pub ALMOST_COMPLETE_RANGE,\n     suspicious,\n     \"almost complete range\""}, {"sha": "d8f4a5fe221bfd28dfff089d32b999ddee676d75", "filename": "clippy_lints/src/fn_null_check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Ffn_null_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Ffn_null_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffn_null_check.rs?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -25,7 +25,7 @@ declare_clippy_lint! {\n     ///\n     /// if fn_ptr.is_none() { ... }\n     /// ```\n-    #[clippy::version = \"1.67.0\"]\n+    #[clippy::version = \"1.68.0\"]\n     pub FN_NULL_CHECK,\n     correctness,\n     \"`fn()` type assumed to be nullable\""}, {"sha": "664d44d6504dc6338f67c8097a3260a558ab713c", "filename": "clippy_lints/src/permissions_set_readonly_false.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Fpermissions_set_readonly_false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Fpermissions_set_readonly_false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpermissions_set_readonly_false.rs?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -21,7 +21,7 @@ declare_clippy_lint! {\n     /// let mut permissions = metadata.permissions();\n     /// permissions.set_readonly(false);\n     /// ```\n-    #[clippy::version = \"1.66.0\"]\n+    #[clippy::version = \"1.68.0\"]\n     pub PERMISSIONS_SET_READONLY_FALSE,\n     suspicious,\n     \"Checks for calls to `std::fs::Permissions.set_readonly` with argument `false`\""}, {"sha": "8abec06c641ccfbe5456d4f2250adae13d5dac55", "filename": "clippy_lints/src/size_of_ref.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Fsize_of_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Fsize_of_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fsize_of_ref.rs?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -45,7 +45,7 @@ declare_clippy_lint! {\n     ///     }\n     /// }\n     /// ```\n-    #[clippy::version = \"1.67.0\"]\n+    #[clippy::version = \"1.68.0\"]\n     pub SIZE_OF_REF,\n     suspicious,\n     \"Argument to `std::mem::size_of_val()` is a double-reference, which is almost certainly unintended\""}, {"sha": "0dc30f7a9355408ae3077182356dcfb74c7a371b", "filename": "clippy_lints/src/transmute/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Ftransmute%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/113c704d225c63c1a0eec29cfa9478b7537e7d73/clippy_lints%2Fsrc%2Ftransmute%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftransmute%2Fmod.rs?ref=113c704d225c63c1a0eec29cfa9478b7537e7d73", "patch": "@@ -458,7 +458,7 @@ declare_clippy_lint! {\n     /// ```rust\n     /// let null_fn: Option<fn()> = None;\n     /// ```\n-    #[clippy::version = \"1.67.0\"]\n+    #[clippy::version = \"1.68.0\"]\n     pub TRANSMUTE_NULL_TO_FN,\n     correctness,\n     \"transmute results in a null function pointer, which is undefined behavior\""}]}