{"sha": "17fd2d073bf9c1a5e59b68c2f412f24456c9a39c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3ZmQyZDA3M2JmOWMxYTVlNTliNjhjMmY0MTJmMjQ0NTZjOWEzOWM=", "commit": {"author": {"name": "Markus Westerlind", "email": "marwes91@gmail.com", "date": "2015-12-01T18:51:49Z"}, "committer": {"name": "Markus Westerlind", "email": "marwes91@gmail.com", "date": "2015-12-01T18:51:49Z"}, "message": "Add a BraceStyle parameter to rewrite_where_clause\n\nThis allow it to exactly calculate if it needs to break the where clause into multiple lines", "tree": {"sha": "cb5a345a3715ed96836372c4f906e02c57ea2051", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cb5a345a3715ed96836372c4f906e02c57ea2051"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c", "html_url": "https://github.com/rust-lang/rust/commit/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c/comments", "author": {"login": "Marwes", "id": 957312, "node_id": "MDQ6VXNlcjk1NzMxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/957312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Marwes", "html_url": "https://github.com/Marwes", "followers_url": "https://api.github.com/users/Marwes/followers", "following_url": "https://api.github.com/users/Marwes/following{/other_user}", "gists_url": "https://api.github.com/users/Marwes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Marwes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Marwes/subscriptions", "organizations_url": "https://api.github.com/users/Marwes/orgs", "repos_url": "https://api.github.com/users/Marwes/repos", "events_url": "https://api.github.com/users/Marwes/events{/privacy}", "received_events_url": "https://api.github.com/users/Marwes/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Marwes", "id": 957312, "node_id": "MDQ6VXNlcjk1NzMxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/957312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Marwes", "html_url": "https://github.com/Marwes", "followers_url": "https://api.github.com/users/Marwes/followers", "following_url": "https://api.github.com/users/Marwes/following{/other_user}", "gists_url": "https://api.github.com/users/Marwes/gists{/gist_id}", "starred_url": "https://api.github.com/users/Marwes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Marwes/subscriptions", "organizations_url": "https://api.github.com/users/Marwes/orgs", "repos_url": "https://api.github.com/users/Marwes/repos", "events_url": "https://api.github.com/users/Marwes/events{/privacy}", "received_events_url": "https://api.github.com/users/Marwes/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "052fddd4ddd64d3b1a54aa50cb57e95b7d6cbdcc", "url": "https://api.github.com/repos/rust-lang/rust/commits/052fddd4ddd64d3b1a54aa50cb57e95b7d6cbdcc", "html_url": "https://github.com/rust-lang/rust/commit/052fddd4ddd64d3b1a54aa50cb57e95b7d6cbdcc"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "3088c21ad09f2d5c44b8c3aa6f5fd1000ce22bcf", "filename": "src/items.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/17fd2d073bf9c1a5e59b68c2f412f24456c9a39c/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=17fd2d073bf9c1a5e59b68c2f412f24456c9a39c", "patch": "@@ -480,6 +480,7 @@ pub fn format_impl(context: &RewriteContext, item: &ast::Item, offset: Indent) -\n         let where_clause_str = try_opt!(rewrite_where_clause(context,\n                                                              &generics.where_clause,\n                                                              context.config,\n+                                                             context.config.item_brace_style,\n                                                              context.block_indent,\n                                                              where_budget,\n                                                              context.config.where_density,\n@@ -695,6 +696,7 @@ fn format_tuple_struct(context: &RewriteContext,\n             let where_clause_str = try_opt!(rewrite_where_clause(context,\n                                                                  &generics.where_clause,\n                                                                  context.config,\n+                                                                 context.config.item_brace_style,\n                                                                  context.block_indent,\n                                                                  where_budget,\n                                                                  Density::Compressed,\n@@ -1178,6 +1180,7 @@ fn rewrite_fn_base(context: &RewriteContext,\n     let where_clause_str = try_opt!(rewrite_where_clause(context,\n                                                          where_clause,\n                                                          context.config,\n+                                                         context.config.fn_brace_style,\n                                                          indent,\n                                                          where_budget,\n                                                          where_density,\n@@ -1416,6 +1419,7 @@ fn rewrite_generics(context: &RewriteContext,\n fn rewrite_where_clause(context: &RewriteContext,\n                         where_clause: &ast::WhereClause,\n                         config: &Config,\n+                        brace_style: BraceStyle,\n                         indent: Indent,\n                         width: usize,\n                         density: Density,\n@@ -1474,7 +1478,7 @@ fn rewrite_where_clause(context: &RewriteContext,\n     let end_length = if terminator == \"{\" {\n         // If the brace is on the next line we don't need to count it otherwise it needs two\n         // characters \" {\"\n-        match context.config.item_brace_style {\n+        match brace_style {\n             BraceStyle::AlwaysNextLine => 0,\n             BraceStyle::PreferSameLine => 2,\n             BraceStyle::SameLineWhere => 0,\n@@ -1513,6 +1517,7 @@ fn format_generics(context: &RewriteContext,\n         let where_clause_str = try_opt!(rewrite_where_clause(context,\n                                                              &generics.where_clause,\n                                                              context.config,\n+                                                             brace_style,\n                                                              context.block_indent,\n                                                              budget,\n                                                              Density::Tall,"}]}