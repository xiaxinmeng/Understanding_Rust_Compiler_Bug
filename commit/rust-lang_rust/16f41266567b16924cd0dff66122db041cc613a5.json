{"sha": "16f41266567b16924cd0dff66122db041cc613a5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2ZjQxMjY2NTY3YjE2OTI0Y2QwZGZmNjYxMjJkYjA0MWNjNjEzYTU=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2019-04-10T14:50:50Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2019-04-10T14:53:23Z"}, "message": "Pass --sysroot in config.sh to prevent passing it", "tree": {"sha": "55921dcb0429c7c9e56540d0080af46e9411eaf1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55921dcb0429c7c9e56540d0080af46e9411eaf1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16f41266567b16924cd0dff66122db041cc613a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16f41266567b16924cd0dff66122db041cc613a5", "html_url": "https://github.com/rust-lang/rust/commit/16f41266567b16924cd0dff66122db041cc613a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16f41266567b16924cd0dff66122db041cc613a5/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fb3043358c27a648430fc024111eba0651d0d5c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fb3043358c27a648430fc024111eba0651d0d5c", "html_url": "https://github.com/rust-lang/rust/commit/3fb3043358c27a648430fc024111eba0651d0d5c"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "5e1d0904753f8ffb70795d083d3d8cfdf802946b", "filename": "build_sysroot/build_sysroot.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/16f41266567b16924cd0dff66122db041cc613a5/build_sysroot%2Fbuild_sysroot.sh", "raw_url": "https://github.com/rust-lang/rust/raw/16f41266567b16924cd0dff66122db041cc613a5/build_sysroot%2Fbuild_sysroot.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_sysroot%2Fbuild_sysroot.sh?ref=16f41266567b16924cd0dff66122db041cc613a5", "patch": "@@ -20,7 +20,7 @@ fi\n \n # Build libs\n mkdir -p sysroot/lib/rustlib/$TARGET_TRIPLE/lib/\n-export RUSTFLAGS=\"$RUSTFLAGS -Z force-unstable-if-unmarked --sysroot sysroot\"\n+export RUSTFLAGS=\"$RUSTFLAGS -Z force-unstable-if-unmarked\"\n if [[ \"$1\" == \"--release\" ]]; then\n     channel='release'\n     RUSTFLAGS=\"$RUSTFLAGS -Zmir-opt-level=3\" cargo build --target $TARGET_TRIPLE --release"}, {"sha": "5dca77855d7f0ad7fd3cdc2d4f2b5ba75ef5516f", "filename": "config.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/16f41266567b16924cd0dff66122db041cc613a5/config.sh", "raw_url": "https://github.com/rust-lang/rust/raw/16f41266567b16924cd0dff66122db041cc613a5/config.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.sh?ref=16f41266567b16924cd0dff66122db041cc613a5", "patch": "@@ -18,6 +18,6 @@ else\n     cargo build\n fi\n \n-export RUSTFLAGS='-Zalways-encode-mir -Cpanic=abort -Cdebuginfo=2 -Zcodegen-backend='$(pwd)'/target/'$channel'/librustc_codegen_cranelift.'$dylib_ext\n+export RUSTFLAGS='-Zalways-encode-mir -Cpanic=abort -Cdebuginfo=2 -Zcodegen-backend='$(pwd)'/target/'$channel'/librustc_codegen_cranelift.'$dylib_ext' --sysroot '$(pwd)'/build_sysroot/sysroot'\n RUSTC=\"rustc $RUSTFLAGS -L crate=target/out --out-dir target/out\"\n export RUST_LOG=warn # display metadata load errors"}, {"sha": "6be002a9c03d9f076a46660c973f0722fd4673cb", "filename": "test.sh", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/16f41266567b16924cd0dff66122db041cc613a5/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/16f41266567b16924cd0dff66122db041cc613a5/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=16f41266567b16924cd0dff66122db041cc613a5", "patch": "@@ -25,21 +25,21 @@ echo \"[BUILD] sysroot\"\n time ./build_sysroot/build_sysroot.sh\n \n echo \"[BUILD+RUN] alloc_example\"\n-$RUSTC --sysroot ./build_sysroot/sysroot example/alloc_example.rs --crate-type bin\n+$RUSTC example/alloc_example.rs --crate-type bin\n ./target/out/alloc_example\n \n echo \"[BUILD+RUN] std_example\"\n-$RUSTC --sysroot ./build_sysroot/sysroot example/std_example.rs --crate-type bin\n+$RUSTC example/std_example.rs --crate-type bin\n ./target/out/std_example\n \n echo \"[BUILD] mod_bench\"\n-$RUSTC --sysroot ./build_sysroot/sysroot example/mod_bench.rs --crate-type bin\n+$RUSTC example/mod_bench.rs --crate-type bin\n \n # FIXME linker gives multiple definitions error on Linux\n #echo \"[BUILD] sysroot in release mode\"\n #./build_sysroot/build_sysroot.sh --release\n \n-COMPILE_MOD_BENCH_INLINE=\"$RUSTC --sysroot ./build_sysroot/sysroot example/mod_bench.rs --crate-type bin -Zmir-opt-level=3 -O --crate-name mod_bench_inline\"\n+COMPILE_MOD_BENCH_INLINE=\"$RUSTC example/mod_bench.rs --crate-type bin -Zmir-opt-level=3 -O --crate-name mod_bench_inline\"\n COMPILE_MOD_BENCH_LLVM_0=\"rustc example/mod_bench.rs --crate-type bin -Copt-level=0 -o target/out/mod_bench_llvm_0 -Cpanic=abort\"\n COMPILE_MOD_BENCH_LLVM_1=\"rustc example/mod_bench.rs --crate-type bin -Copt-level=1 -o target/out/mod_bench_llvm_1 -Cpanic=abort\"\n COMPILE_MOD_BENCH_LLVM_2=\"rustc example/mod_bench.rs --crate-type bin -Copt-level=2 -o target/out/mod_bench_llvm_2 -Cpanic=abort\""}]}