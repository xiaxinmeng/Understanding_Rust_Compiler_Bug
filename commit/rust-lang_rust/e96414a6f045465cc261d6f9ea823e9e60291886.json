{"sha": "e96414a6f045465cc261d6f9ea823e9e60291886", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5NjQxNGE2ZjA0NTQ2NWNjMjYxZDZmOWVhODIzZTllNjAyOTE4ODY=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-01-10T22:53:20Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-01-10T22:53:20Z"}, "message": "Further corrections to the Makefile rules covering failing tests.", "tree": {"sha": "2caa9bd248897ad17e6d60ff3edf4c16400472bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2caa9bd248897ad17e6d60ff3edf4c16400472bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e96414a6f045465cc261d6f9ea823e9e60291886", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e96414a6f045465cc261d6f9ea823e9e60291886", "html_url": "https://github.com/rust-lang/rust/commit/e96414a6f045465cc261d6f9ea823e9e60291886", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e96414a6f045465cc261d6f9ea823e9e60291886/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e5f6d3977d96b4d12b0530432ec505b8df2a383", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e5f6d3977d96b4d12b0530432ec505b8df2a383", "html_url": "https://github.com/rust-lang/rust/commit/9e5f6d3977d96b4d12b0530432ec505b8df2a383"}], "stats": {"total": 35, "additions": 27, "deletions": 8}, "files": [{"sha": "7127e4b11ca9c55d57e11a9d8afe5cc1b5b7fb0e", "filename": "src/Makefile", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FMakefile?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -642,6 +642,7 @@ test/run-fail/%.out.tmp: test/run-fail/%$(CFG_EXE_SUFFIX) \\\n                                   $(CFG_RUNTIME)\n \t$(CFG_QUIET)rm -f $<.tmp\n \t@$(call CFG_ECHO, run: $<)\n+\t$(CFG_QUIET)grep -q error-pattern test/run-fail/$(basename $*).rs\n \t$(CFG_QUIET)rm -f $@\n \t$(CFG_QUIET)$(call CFG_RUN_TARG, $<) >$@ 2>&1 ; X=$$? ; \\\n       if [ $$X -eq 0 ] ; then exit 1 ; else exit 0 ; fi\n@@ -652,15 +653,17 @@ test/run-fail/%.out.tmp: test/run-fail/%$(CFG_EXE_SUFFIX) \\\n \n test/compile-fail/%.boot.out.tmp: test/compile-fail/%.rs $(BREQ)\n \t@$(call CFG_ECHO, compile [boot]: $<)\n+\t$(CFG_QUIET)grep -q error-pattern $<\n \t$(CFG_QUIET)rm -f $@\n-\t$(BOOT) -o $(@:.out=$(CFG_EXE_SUFFIX)) $< >$@ 2>&1 || true\n+\t$(BOOT) -o $(@:.out=$(CFG_EXE_SUFFIX)) $< >$@ 2>&1; test $$? -ne 0\n \t$(CFG_QUIET)grep --text --quiet \\\n       \"`awk -F: '/error-pattern/ { print $$2 }' $< | tr -d '\\n\\r'`\" $@\n \n test/compile-fail/%.rustc.out.tmp: test/compile-fail/%.rs $(SREQ)\n \t@$(call CFG_ECHO, compile [rustc]: $<)\n+\t$(CFG_QUIET)grep -q error-pattern $<\n \t$(CFG_QUIET)rm -f $@\n-\t$(RUSTC) -o $(@:.out=$(CFG_EXE_SUFFIX)) $< >$@ 2>&1 || true\n+\t$(RUSTC) -o $(@:.out=$(CFG_EXE_SUFFIX)) $< >$@ 2>&1; test $$? -ne 0\n \t$(CFG_QUIET)grep --text --quiet \\\n       \"`awk -F: '/error-pattern/ { print $$2 }' $< | tr -d '\\n\\r'`\" $@\n "}, {"sha": "9e5564dfe76ce5e7fe4f0aa8523c905d0f68aff3", "filename": "src/test/compile-fail/bogus-tag.rs", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fbogus-tag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fbogus-tag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbogus-tag.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,17 +1,19 @@\n // -*- rust -*-\n \n-type color = tag(\n-  rgb(int, int, int),\n-  rgba(int, int, int, int)\n-);\n+// error-pattern: unresolved\n+\n+tag color {\n+  rgb(int, int, int);\n+  rgba(int, int, int, int);\n+}\n \n fn main() -> () {\n   let color red = rgb(255, 0, 0);\n   alt (red) {\n-    case (rgb(int r, int g, int b)) {\n+    case (rgb(?r, ?g, ?b)) {\n       log \"rgb\";\n     }\n-    case (hsl(int h, int s, int l)) {\n+    case (hsl(?h, ?s, ?l)) {\n       log \"hsl\";\n     }\n   }"}, {"sha": "af1456a4105ed7de4d69bbf8ceac7f03c5b85f1e", "filename": "src/test/compile-fail/dead-code-be.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fdead-code-be.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fdead-code-be.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdead-code-be.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: dead\n+\n fn f(str caller) {\n   log caller;\n }"}, {"sha": "4c52fcaa372adfa5784aff7fd256292bb0587cb2", "filename": "src/test/compile-fail/dead-code-ret.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fdead-code-ret.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fdead-code-ret.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdead-code-ret.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: dead\n+\n fn f(str caller) {\n   log caller;\n }"}, {"sha": "601aca267cccc6ce790b25a09d7b6a80a3e144a4", "filename": "src/test/compile-fail/fru-extra-field.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Ffru-extra-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Ffru-extra-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffru-extra-field.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: record\n+\n type point = rec(int x, int y);\n \n fn main() {"}, {"sha": "86c68e5b9056d17bd77698999b0ded36548f845c", "filename": "src/test/compile-fail/fru-typestate.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Ffru-typestate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Ffru-typestate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffru-typestate.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: precondition\n+\n type point = rec(int x, int y);\n \n fn main() {"}, {"sha": "f0f585f5eb8e27ba58cf73e85e0ef40f41926817", "filename": "src/test/compile-fail/item-name-overload.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fitem-name-overload.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: name\n+\n mod foo {\n   fn bar[T](T f) -> int { ret 17; }\n   type bar[U, T] = tup(int, U, T);"}, {"sha": "5b7dd4d8e85fc287b5ce1fd2ae1415feddaf7d38", "filename": "src/test/compile-fail/rec-missing-fields.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Frec-missing-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Frec-missing-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frec-missing-fields.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: mismatched types\n+\n // Issue #51.\n \n type point = rec(int x, int y);"}, {"sha": "a1916fdccacd96e81b6673023d50b218740b0a0a", "filename": "src/test/compile-fail/unbalanced-comment.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Funbalanced-comment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e96414a6f045465cc261d6f9ea823e9e60291886/src%2Ftest%2Fcompile-fail%2Funbalanced-comment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funbalanced-comment.rs?ref=e96414a6f045465cc261d6f9ea823e9e60291886", "patch": "@@ -1,5 +1,7 @@\n // -*- rust -*-\n \n+// error-pattern: token\n+\n /*\n  * This is an un-balanced /* multi-line comment.\n  */"}]}