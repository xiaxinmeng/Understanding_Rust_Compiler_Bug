{"sha": "8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhhNzMwYTI1NWRkY2U3MmEzZDdmODQzN2U3OGI0MTI4YWQzMGU4YjM=", "commit": {"author": {"name": "Lindsey Kuper", "email": "lindsey@rockstargirl.org", "date": "2012-06-12T19:05:23Z"}, "committer": {"name": "Lindsey Kuper", "email": "lindsey@rockstargirl.org", "date": "2012-06-12T20:03:30Z"}, "message": "Allow trailing comma in vectors.  Closes #2482.", "tree": {"sha": "38b710e7356ae0b1a4f75f486b98063982c1a74c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38b710e7356ae0b1a4f75f486b98063982c1a74c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "html_url": "https://github.com/rust-lang/rust/commit/8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/comments", "author": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bffb7db8aec094f6adbf7c68a7c02e8b1332a704", "url": "https://api.github.com/repos/rust-lang/rust/commits/bffb7db8aec094f6adbf7c68a7c02e8b1332a704", "html_url": "https://github.com/rust-lang/rust/commit/bffb7db8aec094f6adbf7c68a7c02e8b1332a704"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "828cd5ce7d435be0276b4bc382839642643c8f9e", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "patch": "@@ -805,7 +805,7 @@ class parser {\n             self.bump();\n             let mutbl = self.parse_mutability();\n             let es = self.parse_seq_to_end(\n-                token::RBRACKET, seq_sep_trailing_disallowed(token::COMMA),\n+                token::RBRACKET, seq_sep_trailing_allowed(token::COMMA),\n                 {|p| p.parse_expr()});\n             hi = self.span.hi;\n             ex = expr_vec(es, mutbl);"}, {"sha": "e7bb6b704a1948593f56017ea7a1b93272517f3b", "filename": "src/test/compile-fail/empty-vec-trailing-comma.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Ftest%2Fcompile-fail%2Fempty-vec-trailing-comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Ftest%2Fcompile-fail%2Fempty-vec-trailing-comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fempty-vec-trailing-comma.rs?ref=8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+    let v = [,]; //! ERROR unexpected token: ','\n+}"}, {"sha": "473ffe9f11d696921f8c7a61398d81fbfae44824", "filename": "src/test/run-pass/vec-trailing-comma.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Ftest%2Frun-pass%2Fvec-trailing-comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a730a255ddce72a3d7f8437e78b4128ad30e8b3/src%2Ftest%2Frun-pass%2Fvec-trailing-comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fvec-trailing-comma.rs?ref=8a730a255ddce72a3d7f8437e78b4128ad30e8b3", "patch": "@@ -0,0 +1,10 @@\n+// Issue #2482.\n+\n+fn main() {\n+    let v1: [int] = [10, 20, 30,];\n+    let v2: [int] = [10, 20, 30];\n+    assert (v1[2] == v2[2]);\n+    let v3: [int] = [10,];\n+    let v4: [int] = [10];\n+    assert (v3[0] == v4[0]);\n+}"}]}