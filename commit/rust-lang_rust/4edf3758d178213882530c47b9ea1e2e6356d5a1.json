{"sha": "4edf3758d178213882530c47b9ea1e2e6356d5a1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlZGYzNzU4ZDE3ODIxMzg4MjUzMGM0N2I5ZWExZTJlNjM1NmQ1YTE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-23T12:16:21Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-23T12:16:21Z"}, "message": "auto merge of #8691 : anasazi/rust/fix-timer-interface, r=brson\n\nResolves #8687.", "tree": {"sha": "ed4fac8695064a6ad9b9ce96160b7e153f4875f0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed4fac8695064a6ad9b9ce96160b7e153f4875f0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4edf3758d178213882530c47b9ea1e2e6356d5a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4edf3758d178213882530c47b9ea1e2e6356d5a1", "html_url": "https://github.com/rust-lang/rust/commit/4edf3758d178213882530c47b9ea1e2e6356d5a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4edf3758d178213882530c47b9ea1e2e6356d5a1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5018c5a4c908e5236c59b71df285e0569478c72", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5018c5a4c908e5236c59b71df285e0569478c72", "html_url": "https://github.com/rust-lang/rust/commit/f5018c5a4c908e5236c59b71df285e0569478c72"}, {"sha": "a909144b1c5cc5ae5d32aaba63a4ee6bce5fc1e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/a909144b1c5cc5ae5d32aaba63a4ee6bce5fc1e2", "html_url": "https://github.com/rust-lang/rust/commit/a909144b1c5cc5ae5d32aaba63a4ee6bce5fc1e2"}], "stats": {"total": 9, "additions": 2, "deletions": 7}, "files": [{"sha": "b0ec747800d23287b55453c1e1a2069f69fb796f", "filename": "src/libstd/rt/io/timer.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4edf3758d178213882530c47b9ea1e2e6356d5a1/src%2Flibstd%2Frt%2Fio%2Ftimer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4edf3758d178213882530c47b9ea1e2e6356d5a1/src%2Flibstd%2Frt%2Fio%2Ftimer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fio%2Ftimer.rs?ref=4edf3758d178213882530c47b9ea1e2e6356d5a1", "patch": "@@ -18,9 +18,6 @@ use rt::local::Local;\n pub struct Timer(~RtioTimerObject);\n \n impl Timer {\n-    fn new_on_rt(i: ~RtioTimerObject) -> Timer {\n-        Timer(i)\n-    }\n \n     pub fn new() -> Option<Timer> {\n         let timer = unsafe {\n@@ -30,18 +27,16 @@ impl Timer {\n             (*io).timer_init()\n         };\n         match timer {\n-            Ok(t) => Some(Timer::new_on_rt(t)),\n+            Ok(t) => Some(Timer(t)),\n             Err(ioerr) => {\n                 rtdebug!(\"Timer::init: failed to init: %?\", ioerr);\n                 io_error::cond.raise(ioerr);\n                 None\n             }\n         }\n     }\n-}\n \n-impl RtioTimer for Timer {\n-    fn sleep(&mut self, msecs: u64) {\n+    pub fn sleep(&mut self, msecs: u64) {\n         (**self).sleep(msecs);\n     }\n }"}]}