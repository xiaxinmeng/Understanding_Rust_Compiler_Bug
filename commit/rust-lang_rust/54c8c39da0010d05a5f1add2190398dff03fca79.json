{"sha": "54c8c39da0010d05a5f1add2190398dff03fca79", "node_id": "C_kwDOAAsO6NoAKDU0YzhjMzlkYTAwMTBkMDVhNWYxYWRkMjE5MDM5OGRmZjAzZmNhNzk", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-05-16T17:27:27Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-05-16T17:27:27Z"}, "message": "Don't generate documentation in `generate_setter`", "tree": {"sha": "37f6166d5566e9db3e0401d0edbadac324426f91", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/37f6166d5566e9db3e0401d0edbadac324426f91"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54c8c39da0010d05a5f1add2190398dff03fca79", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54c8c39da0010d05a5f1add2190398dff03fca79", "html_url": "https://github.com/rust-lang/rust/commit/54c8c39da0010d05a5f1add2190398dff03fca79", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54c8c39da0010d05a5f1add2190398dff03fca79/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da503b6a1349b1402bfc9e2d109c7c16b3e9b9f4", "url": "https://api.github.com/repos/rust-lang/rust/commits/da503b6a1349b1402bfc9e2d109c7c16b3e9b9f4", "html_url": "https://github.com/rust-lang/rust/commit/da503b6a1349b1402bfc9e2d109c7c16b3e9b9f4"}], "stats": {"total": 17, "additions": 1, "deletions": 16}, "files": [{"sha": "62576a854f92f5047029dd6ef3ea7d8a6f3b495b", "filename": "crates/ide-assists/src/handlers/generate_setter.rs", "status": "modified", "additions": 1, "deletions": 15, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/54c8c39da0010d05a5f1add2190398dff03fca79/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_setter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54c8c39da0010d05a5f1add2190398dff03fca79/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_setter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_setter.rs?ref=54c8c39da0010d05a5f1add2190398dff03fca79", "patch": "@@ -22,7 +22,6 @@ use crate::{\n // }\n //\n // impl Person {\n-//     /// Set the person's name.\n //     fn set_name(&mut self, name: String) {\n //         self.name = name;\n //     }\n@@ -32,7 +31,6 @@ pub(crate) fn generate_setter(acc: &mut Assists, ctx: &AssistContext) -> Option<\n     let strukt = ctx.find_node_at_offset::<ast::Struct>()?;\n     let field = ctx.find_node_at_offset::<ast::RecordField>()?;\n \n-    let strukt_name = strukt.name()?;\n     let field_name = field.name()?;\n     let field_ty = field.ty()?;\n \n@@ -53,23 +51,16 @@ pub(crate) fn generate_setter(acc: &mut Assists, ctx: &AssistContext) -> Option<\n         |builder| {\n             let mut buf = String::with_capacity(512);\n \n-            let fn_name_spaced = fn_name.replace('_', \" \");\n-            let strukt_name_spaced =\n-                to_lower_snake_case(&strukt_name.to_string()).replace('_', \" \");\n-\n             if impl_def.is_some() {\n                 buf.push('\\n');\n             }\n \n             let vis = strukt.visibility().map_or(String::new(), |v| format!(\"{} \", v));\n             format_to!(\n                 buf,\n-                \"    /// Set the {}'s {}.\n-    {}fn set_{}(&mut self, {}: {}) {{\n+                \"    {}fn set_{}(&mut self, {}: {}) {{\n         self.{} = {};\n     }}\",\n-                strukt_name_spaced,\n-                fn_name_spaced,\n                 vis,\n                 fn_name,\n                 fn_name,\n@@ -114,7 +105,6 @@ struct Person<T: Clone> {\n }\n \n impl<T: Clone> Person<T> {\n-    /// Set the person's data.\n     fn set_data(&mut self, data: T) {\n         self.data = data;\n     }\n@@ -152,7 +142,6 @@ pub(crate) struct Person<T: Clone> {\n }\n \n impl<T: Clone> Person<T> {\n-    /// Set the person's data.\n     pub(crate) fn set_data(&mut self, data: T) {\n         self.data = data;\n     }\n@@ -171,7 +160,6 @@ struct Context<T: Clone> {\n }\n \n impl<T: Clone> Context<T> {\n-    /// Set the context's data.\n     fn set_data(&mut self, data: T) {\n         self.data = data;\n     }\n@@ -183,12 +171,10 @@ struct Context<T: Clone> {\n }\n \n impl<T: Clone> Context<T> {\n-    /// Set the context's data.\n     fn set_data(&mut self, data: T) {\n         self.data = data;\n     }\n \n-    /// Set the context's count.\n     fn set_count(&mut self, count: usize) {\n         self.count = count;\n     }"}, {"sha": "5a3f23309e834cfb8174c3a809282f33f8c7fd39", "filename": "crates/ide-assists/src/tests/generated.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/54c8c39da0010d05a5f1add2190398dff03fca79/crates%2Fide-assists%2Fsrc%2Ftests%2Fgenerated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54c8c39da0010d05a5f1add2190398dff03fca79/crates%2Fide-assists%2Fsrc%2Ftests%2Fgenerated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Ftests%2Fgenerated.rs?ref=54c8c39da0010d05a5f1add2190398dff03fca79", "patch": "@@ -1158,7 +1158,6 @@ struct Person {\n }\n \n impl Person {\n-    /// Set the person's name.\n     fn set_name(&mut self, name: String) {\n         self.name = name;\n     }"}]}