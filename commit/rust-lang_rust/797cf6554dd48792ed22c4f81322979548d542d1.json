{"sha": "797cf6554dd48792ed22c4f81322979548d542d1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5N2NmNjU1NGRkNDg3OTJlZDIyYzRmODEzMjI5Nzk1NDhkNTQyZDE=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2021-01-30T16:43:00Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2021-01-30T16:43:00Z"}, "message": "Get rid of regex and lazy_static dependencies", "tree": {"sha": "d2ab5d2197913d6cbb051b30b619f520c1122eb7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d2ab5d2197913d6cbb051b30b619f520c1122eb7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/797cf6554dd48792ed22c4f81322979548d542d1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAmAVjJUACgkQLO/Nsn7Q\nvnnXXxAAk3LG63QrNGkHyTF30MdikhafvOUGPb/oQhMcc8OyfAIrkYn39fy4pR9T\n16MRYpBOz1iEo4qOp8VAfGakei3cXeeS1gY+/JnXA6du7xrMr8o0SCtMUbsCznok\nq3zFm/7bt8GEDhrnJ4G/xHgqJrcSCzPGSUCKgAvTg7PIwAQNCDoqpMmqfDtqRlNI\n+0d/OvRr2HFV9jvpIBhPsnNqeNa2Y7L5JC6TYYw7M/80v9uGa3Too2zK18t9sEBO\nTmY6Fk/1CUBSvn/VkqjMewYJz+EBja/L7tvSjY3Hr5CBj5A3LpDPMpwIX6qd3Pjp\nB1OVDTFkg3LPhkt8GNmtm5bRxDvh/WH/9nvSyCHK6crihObBlkOI+Nj0AFIIlRUC\nanGvr3TDqwAR5j8cyY1fSbDG2bsyCZn6bj9AeDaTjE5QLjK6XfYqrD3iW0mwXYDV\njjaFSMzzL/GDYzayq7gDnhI8lPREbOEmVCrURFynv5gW0b2tlYBIMV3FFhKsueoO\nNQkbWwqfOtlpzYMYUqllq1vqeE2Oycraa/c27qDshcKwQ3UOygTqE8PKimd9xLLo\n0imrrc7wfEO6q+KxixiP4WEzeOoYWLkMvKH2nfwdxT3nircSWcaXWAVgxRAakgzy\nSjeUIBZBvUs8N4gYWmCvM+ZccFSGjQPVOJKOeVkUWdY2EjGcdAw=\n=Sk7F\n-----END PGP SIGNATURE-----", "payload": "tree d2ab5d2197913d6cbb051b30b619f520c1122eb7\nparent 4db76a6bcc51fca61de6f5a41b84ad21058835dc\nauthor flip1995 <hello@philkrones.com> 1612024980 +0100\ncommitter flip1995 <hello@philkrones.com> 1612024980 +0100\n\nGet rid of regex and lazy_static dependencies\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/797cf6554dd48792ed22c4f81322979548d542d1", "html_url": "https://github.com/rust-lang/rust/commit/797cf6554dd48792ed22c4f81322979548d542d1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/797cf6554dd48792ed22c4f81322979548d542d1/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4db76a6bcc51fca61de6f5a41b84ad21058835dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/4db76a6bcc51fca61de6f5a41b84ad21058835dc", "html_url": "https://github.com/rust-lang/rust/commit/4db76a6bcc51fca61de6f5a41b84ad21058835dc"}], "stats": {"total": 12, "additions": 4, "deletions": 8}, "files": [{"sha": "a9516560a61952c9bb6d58acd168805cccd1f35a", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/797cf6554dd48792ed22c4f81322979548d542d1/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/797cf6554dd48792ed22c4f81322979548d542d1/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=797cf6554dd48792ed22c4f81322979548d542d1", "patch": "@@ -34,8 +34,6 @@ rustc-semver=\"1.1.0\"\n url = { version =  \"2.1.0\", features = [\"serde\"] }\n quote = \"1\"\n syn = { version = \"1\", features = [\"full\"] }\n-regex = \"1.4\"\n-lazy_static = \"1.4\"\n \n [features]\n deny-warnings = []"}, {"sha": "6969ac949d845d3fb9d59c6abd5260a51b32f06a", "filename": "clippy_lints/src/case_sensitive_file_extension_comparisons.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/797cf6554dd48792ed22c4f81322979548d542d1/clippy_lints%2Fsrc%2Fcase_sensitive_file_extension_comparisons.rs", "raw_url": "https://github.com/rust-lang/rust/raw/797cf6554dd48792ed22c4f81322979548d542d1/clippy_lints%2Fsrc%2Fcase_sensitive_file_extension_comparisons.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcase_sensitive_file_extension_comparisons.rs?ref=797cf6554dd48792ed22c4f81322979548d542d1", "patch": "@@ -1,8 +1,6 @@\n use crate::utils::paths::STRING;\n use crate::utils::{match_def_path, span_lint_and_help};\n use if_chain::if_chain;\n-use lazy_static::lazy_static;\n-use regex::Regex;\n use rustc_ast::ast::LitKind;\n use rustc_hir::{Expr, ExprKind, PathSegment};\n use rustc_lint::{LateContext, LateLintPass};\n@@ -41,14 +39,14 @@ declare_clippy_lint! {\n declare_lint_pass!(CaseSensitiveFileExtensionComparisons => [CASE_SENSITIVE_FILE_EXTENSION_COMPARISONS]);\n \n fn check_case_sensitive_file_extension_comparison(ctx: &LateContext<'_>, expr: &Expr<'_>) -> Option<Span> {\n-    lazy_static! {\n-        static ref RE: Regex = Regex::new(r\"^\\.([a-z0-9]{1,5}|[A-Z0-9]{1,5})$\").unwrap();\n-    }\n     if_chain! {\n         if let ExprKind::MethodCall(PathSegment { ident, .. }, _, [obj, extension, ..], span) = expr.kind;\n         if ident.as_str() == \"ends_with\";\n         if let ExprKind::Lit(Spanned { node: LitKind::Str(ext_literal, ..), ..}) = extension.kind;\n-        if RE.is_match(&ext_literal.as_str());\n+        if (2..=6).contains(&ext_literal.as_str().len());\n+        if ext_literal.as_str().starts_with('.');\n+        if ext_literal.as_str().chars().skip(1).all(|c| c.is_uppercase() || c.is_digit(10))\n+            || ext_literal.as_str().chars().skip(1).all(|c| c.is_lowercase() || c.is_digit(10));\n         then {\n             let mut ty = ctx.typeck_results().expr_ty(obj);\n             ty = match ty.kind() {"}]}