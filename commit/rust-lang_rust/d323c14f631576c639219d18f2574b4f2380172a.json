{"sha": "d323c14f631576c639219d18f2574b4f2380172a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzMjNjMTRmNjMxNTc2YzYzOTIxOWQxOGYyNTc0YjRmMjM4MDE3MmE=", "commit": {"author": {"name": "Kubilay Kocak", "email": "koobs@users.noreply.github.com", "date": "2015-05-26T08:23:33Z"}, "committer": {"name": "Kubilay Kocak", "email": "koobs@users.noreply.github.com", "date": "2015-05-26T08:23:33Z"}, "message": "Remove redundant compiler check. Allow CC override\n\nCurrently, there are two conditional blocks that exist to check for \"clang or gcc\"\r\n\r\nOn line 866:\r\n\r\n```\r\nif [ -z \"$CFG_ENABLE_CLANG\" -a -z \"$CFG_GCC\" ]\r\nthen\r\n    err \"either clang or gcc is required\"\r\nfi\r\n```\r\nand on line 1019:\r\n\r\n```\r\nif [ -z \"$CC\" -a -z \"$CFG_ENABLE_CLANG\" -a -z \"$CFG_GCC\" ]\r\nthen\r\n    err \"either clang or gcc is required\"\r\nfi\r\n```\r\n\r\nGiven the order of the clauses, this results in the \"either clang or gcc is required\" error from the earlier block, (even) when CC is set. \r\n\r\nThe expected behaviour is to honour user-flags, in this case CC.\r\n\r\nAside from removing all hand-holdy compiler checks in favour of actual compiler *feature* checks, this change removes the redundant former block in favour of the latter block, which appears designed to allow the expected behaviour.", "tree": {"sha": "ce88b02a1be8dcc7dc69b3b8591df9f4cbc231f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ce88b02a1be8dcc7dc69b3b8591df9f4cbc231f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d323c14f631576c639219d18f2574b4f2380172a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d323c14f631576c639219d18f2574b4f2380172a", "html_url": "https://github.com/rust-lang/rust/commit/d323c14f631576c639219d18f2574b4f2380172a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d323c14f631576c639219d18f2574b4f2380172a/comments", "author": {"login": "koobs", "id": 1011612, "node_id": "MDQ6VXNlcjEwMTE2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1011612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koobs", "html_url": "https://github.com/koobs", "followers_url": "https://api.github.com/users/koobs/followers", "following_url": "https://api.github.com/users/koobs/following{/other_user}", "gists_url": "https://api.github.com/users/koobs/gists{/gist_id}", "starred_url": "https://api.github.com/users/koobs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koobs/subscriptions", "organizations_url": "https://api.github.com/users/koobs/orgs", "repos_url": "https://api.github.com/users/koobs/repos", "events_url": "https://api.github.com/users/koobs/events{/privacy}", "received_events_url": "https://api.github.com/users/koobs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "koobs", "id": 1011612, "node_id": "MDQ6VXNlcjEwMTE2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1011612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koobs", "html_url": "https://github.com/koobs", "followers_url": "https://api.github.com/users/koobs/followers", "following_url": "https://api.github.com/users/koobs/following{/other_user}", "gists_url": "https://api.github.com/users/koobs/gists{/gist_id}", "starred_url": "https://api.github.com/users/koobs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koobs/subscriptions", "organizations_url": "https://api.github.com/users/koobs/orgs", "repos_url": "https://api.github.com/users/koobs/repos", "events_url": "https://api.github.com/users/koobs/events{/privacy}", "received_events_url": "https://api.github.com/users/koobs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7cb9914fceaeaa6a39add43d3da15bb6e1d191f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/7cb9914fceaeaa6a39add43d3da15bb6e1d191f6", "html_url": "https://github.com/rust-lang/rust/commit/7cb9914fceaeaa6a39add43d3da15bb6e1d191f6"}], "stats": {"total": 5, "additions": 0, "deletions": 5}, "files": [{"sha": "20a5fa390f00b5ca1273c84d2f9d222e5331bd41", "filename": "configure", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d323c14f631576c639219d18f2574b4f2380172a/configure", "raw_url": "https://github.com/rust-lang/rust/raw/d323c14f631576c639219d18f2574b4f2380172a/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=d323c14f631576c639219d18f2574b4f2380172a", "patch": "@@ -863,11 +863,6 @@ then\n     CFG_DISABLE_JEMALLOC=1\n fi\n \n-if [ -z \"$CFG_ENABLE_CLANG\" -a -z \"$CFG_GCC\" ]\n-then\n-    err \"either clang or gcc is required\"\n-fi\n-\n # OS X 10.9, gcc is actually clang. This can cause some confusion in the build\n # system, so if we find that gcc is clang, we should just use clang directly.\n if [ $CFG_OSTYPE = apple-darwin -a -z \"$CFG_ENABLE_CLANG\" ]"}]}