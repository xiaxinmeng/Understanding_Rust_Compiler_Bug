{"sha": "4101d8c22d239eba5b2202faa28db54b5e1a4909", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxMDFkOGMyMmQyMzllYmE1YjIyMDJmYWEyOGRiNTRiNWUxYTQ5MDk=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-10-02T23:19:03Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-10-02T23:19:03Z"}, "message": "rustc: Add a side table for legacy boxed traits, not filled in.\n\nThis is part of the transition to \"@int as @Trait\".", "tree": {"sha": "9de4396ac9ec454e2e4387fcbfc8b41c86a62179", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9de4396ac9ec454e2e4387fcbfc8b41c86a62179"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4101d8c22d239eba5b2202faa28db54b5e1a4909", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4101d8c22d239eba5b2202faa28db54b5e1a4909", "html_url": "https://github.com/rust-lang/rust/commit/4101d8c22d239eba5b2202faa28db54b5e1a4909", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4101d8c22d239eba5b2202faa28db54b5e1a4909/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2df168812d3abd3878a55058b12d911ff17c95ad", "url": "https://api.github.com/repos/rust-lang/rust/commits/2df168812d3abd3878a55058b12d911ff17c95ad", "html_url": "https://github.com/rust-lang/rust/commit/2df168812d3abd3878a55058b12d911ff17c95ad"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "1857abf2cf2f9504a8515f8032518d3895de557c", "filename": "src/rustc/metadata/common.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmetadata%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmetadata%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmetadata%2Fcommon.rs?ref=4101d8c22d239eba5b2202faa28db54b5e1a4909", "patch": "@@ -120,7 +120,8 @@ enum astencode_tag { // Reserves 0x50 -- 0x6f\n     tag_table_spill = 0x5f,\n     tag_table_method_map = 0x60,\n     tag_table_vtable_map = 0x61,\n-    tag_table_adjustments = 0x62\n+    tag_table_adjustments = 0x62,\n+    tag_table_legacy_boxed_trait = 0x63\n }\n \n type link_meta = {name: ~str, vers: ~str, extras_hash: ~str};"}, {"sha": "92af75ef84a8ba2137fb20a207c47f52525f92fa", "filename": "src/rustc/middle/astencode.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmiddle%2Fastencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmiddle%2Fastencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fastencode.rs?ref=4101d8c22d239eba5b2202faa28db54b5e1a4909", "patch": "@@ -832,6 +832,12 @@ fn encode_side_tables_for_id(ecx: @e::encode_ctxt,\n             }\n         }\n     }\n+\n+    do option::iter(&tcx.legacy_boxed_traits.find(id)) |_x| {\n+        do ebml_w.tag(c::tag_table_legacy_boxed_trait) {\n+            ebml_w.id(id);\n+        }\n+    }\n }\n \n trait doc_decoder_helpers {\n@@ -963,6 +969,8 @@ fn decode_side_tables(xcx: extended_decode_ctxt,\n             } else if tag == (c::tag_table_adjustments as uint) {\n                 let adj = @ty::deserialize_AutoAdjustment(val_dsr).tr(xcx);\n                 dcx.tcx.adjustments.insert(id, adj);\n+            } else if tag == (c::tag_table_legacy_boxed_trait as uint) {\n+                dcx.tcx.legacy_boxed_traits.insert(id, ());\n             } else {\n                 xcx.dcx.tcx.sess.bug(\n                     fmt!(\"unknown tag found in side tables: %x\", tag));"}, {"sha": "5afc60f58ac15a041fcbd2ee57e0b20df74c947f", "filename": "src/rustc/middle/ty.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4101d8c22d239eba5b2202faa28db54b5e1a4909/src%2Frustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fty.rs?ref=4101d8c22d239eba5b2202faa28db54b5e1a4909", "patch": "@@ -356,7 +356,8 @@ type ctxt =\n       inferred_modes: HashMap<ast::node_id, ast::mode>,\n       adjustments: HashMap<ast::node_id, @AutoAdjustment>,\n       normalized_cache: HashMap<t, t>,\n-      lang_items: middle::lang_items::LanguageItems};\n+      lang_items: middle::lang_items::LanguageItems,\n+      legacy_boxed_traits: HashMap<node_id, ()>};\n \n enum tbox_flag {\n     has_params = 1,\n@@ -875,7 +876,8 @@ fn mk_ctxt(s: session::session,\n       inferred_modes: HashMap(),\n       adjustments: HashMap(),\n       normalized_cache: new_ty_hash(),\n-      lang_items: move lang_items}\n+      lang_items: move lang_items,\n+      legacy_boxed_traits: HashMap()}\n }\n \n "}]}