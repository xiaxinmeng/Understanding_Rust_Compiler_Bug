{"sha": "b55394415ab63adf32036f63595f3bba3e1c9098", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1NTM5NDQxNWFiNjNhZGYzMjAzNmY2MzU5NWYzYmJhM2UxYzkwOTg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-24T22:01:19Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-24T22:01:19Z"}, "message": "auto merge of #13729 : chris-morgan/rust/fix-vim-indent, r=alexcrichton\n\nThe change in #13600 was incorrect, containing a bad regular expression;\r\ninside an indent function, errors are silently ignored (and the ``~=``\r\noperation will return 0), so it just always failed, causing the cases\r\nthat were supposed to be caught to not be caught and making things like\r\nthe ``match`` example shown above or struct field definitions regress.\r\n\r\nI have fixed the regular expression to what it should have been. This is\r\nstill imperfect, of course, not handling cases like where the first\r\nargument to a function is a function call (``foo(bar(),``), but it'll do\r\nfor now.\r\n\r\n----\r\n\r\nI have a general request to make of reviewers about any changes made to `src/etc/vim`: **please tell me**. As a general rule I want to review them. (I\u2019ll make an exception for changes the prelude; it needs fixing from time to time when some people don\u2019t update the syntax file, anyway.)\r\n\r\ncc @brandonw", "tree": {"sha": "cba275b47b8254b798e897fe8eb693faa7d8a9e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cba275b47b8254b798e897fe8eb693faa7d8a9e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b55394415ab63adf32036f63595f3bba3e1c9098", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b55394415ab63adf32036f63595f3bba3e1c9098", "html_url": "https://github.com/rust-lang/rust/commit/b55394415ab63adf32036f63595f3bba3e1c9098", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b55394415ab63adf32036f63595f3bba3e1c9098/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d70434a1e0ba68753b7d1e83f594dea6d23dd51", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d70434a1e0ba68753b7d1e83f594dea6d23dd51", "html_url": "https://github.com/rust-lang/rust/commit/7d70434a1e0ba68753b7d1e83f594dea6d23dd51"}, {"sha": "7266587f3e52513328926d9229be7003323ceac8", "url": "https://api.github.com/repos/rust-lang/rust/commits/7266587f3e52513328926d9229be7003323ceac8", "html_url": "https://github.com/rust-lang/rust/commit/7266587f3e52513328926d9229be7003323ceac8"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "54094a741196747ce38476866bd9f2a753bdcb2b", "filename": "src/etc/vim/indent/rust.vim", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b55394415ab63adf32036f63595f3bba3e1c9098/src%2Fetc%2Fvim%2Findent%2Frust.vim", "raw_url": "https://github.com/rust-lang/rust/raw/b55394415ab63adf32036f63595f3bba3e1c9098/src%2Fetc%2Fvim%2Findent%2Frust.vim", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fvim%2Findent%2Frust.vim?ref=b55394415ab63adf32036f63595f3bba3e1c9098", "patch": "@@ -105,7 +105,7 @@ function GetRustIndent(lnum)\n \tif prevline[len(prevline) - 1] == \",\"\n \t\t\t\t\\ && s:get_line_trimmed(a:lnum) !~ \"^\\\\s*[\\\\[\\\\]{}]\"\n \t\t\t\t\\ && prevline !~ \"^\\\\s*fn\\\\s\"\n-\t\t\t\t\\ && prevline !~ \"\\\\([^\\\\(\\\\)]\\+,$\"\n+\t\t\t\t\\ && prevline !~ \"([^()]\\\\+,$\"\n \t\t\" Oh ho! The previous line ended in a comma! I bet cindent will try to\n \t\t\" take this too far... For now, let's normally use the previous line's\n \t\t\" indent."}]}