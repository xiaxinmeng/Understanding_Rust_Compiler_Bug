{"sha": "5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhZWNkMjgxMWU2NWYzZDIzOGU2OGNlZDZiZjlmZGRhYzdiYjI1YzI=", "commit": {"author": {"name": "Smitty", "email": "me@smitop.com", "date": "2021-09-11T16:00:59Z"}, "committer": {"name": "Smitty", "email": "me@smitop.com", "date": "2021-09-11T16:00:59Z"}, "message": "One character aliases for cargo-miri run/test\n\nThe main `cargo` command supports `cargo r` as an alias for\n`cargo run`, and `cargo t` as an alias for `cargo test`. This adds\nsupport to them in cargo-miri for consistency.", "tree": {"sha": "8b25daa3536610d352f209c7b7f488bfb2c35f0c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b25daa3536610d352f209c7b7f488bfb2c35f0c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "html_url": "https://github.com/rust-lang/rust/commit/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2/comments", "author": {"login": "syvb", "id": 10530973, "node_id": "MDQ6VXNlcjEwNTMwOTcz", "avatar_url": "https://avatars.githubusercontent.com/u/10530973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syvb", "html_url": "https://github.com/syvb", "followers_url": "https://api.github.com/users/syvb/followers", "following_url": "https://api.github.com/users/syvb/following{/other_user}", "gists_url": "https://api.github.com/users/syvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/syvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syvb/subscriptions", "organizations_url": "https://api.github.com/users/syvb/orgs", "repos_url": "https://api.github.com/users/syvb/repos", "events_url": "https://api.github.com/users/syvb/events{/privacy}", "received_events_url": "https://api.github.com/users/syvb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "syvb", "id": 10530973, "node_id": "MDQ6VXNlcjEwNTMwOTcz", "avatar_url": "https://avatars.githubusercontent.com/u/10530973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syvb", "html_url": "https://github.com/syvb", "followers_url": "https://api.github.com/users/syvb/followers", "following_url": "https://api.github.com/users/syvb/following{/other_user}", "gists_url": "https://api.github.com/users/syvb/gists{/gist_id}", "starred_url": "https://api.github.com/users/syvb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syvb/subscriptions", "organizations_url": "https://api.github.com/users/syvb/orgs", "repos_url": "https://api.github.com/users/syvb/repos", "events_url": "https://api.github.com/users/syvb/events{/privacy}", "received_events_url": "https://api.github.com/users/syvb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "035933186957cf81c488261fb48a98bf523e8006", "url": "https://api.github.com/repos/rust-lang/rust/commits/035933186957cf81c488261fb48a98bf523e8006", "html_url": "https://github.com/rust-lang/rust/commit/035933186957cf81c488261fb48a98bf523e8006"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "21f53a45e41f6815d497006645b9e603b132fa9a", "filename": "cargo-miri/bin.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2/cargo-miri%2Fbin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2/cargo-miri%2Fbin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fbin.rs?ref=5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "patch": "@@ -20,8 +20,8 @@ Usage:\n     cargo miri [subcommand] [<cargo options>...] [--] [<program/test suite options>...]\n \n Subcommands:\n-    run                      Run binaries\n-    test                     Run tests\n+    run, r                   Run binaries\n+    test, t                  Run tests\n     setup                    Only perform automatic setup, but without asking questions (for getting a proper libstd)\n \n The cargo options are exactly the same as for `cargo run` and `cargo test`, respectively.\n@@ -524,8 +524,8 @@ fn phase_cargo_miri(mut args: env::Args) {\n     // We cannot know which of those flags take arguments and which do not,\n     // so we cannot detect subcommands later.\n     let subcommand = match args.next().as_deref() {\n-        Some(\"test\") => MiriCommand::Test,\n-        Some(\"run\") => MiriCommand::Run,\n+        Some(\"test\" | \"t\") => MiriCommand::Test,\n+        Some(\"run\" | \"r\") => MiriCommand::Run,\n         Some(\"setup\") => MiriCommand::Setup,\n         // Invalid command.\n         _ =>"}, {"sha": "db8f6049900eb7279bf98e22fb1ed3caeb218cc0", "filename": "test-cargo-miri/run-test.py", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2/test-cargo-miri%2Frun-test.py", "raw_url": "https://github.com/rust-lang/rust/raw/5aecd2811e65f3d238e68ced6bf9fddac7bb25c2/test-cargo-miri%2Frun-test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Frun-test.py?ref=5aecd2811e65f3d238e68ced6bf9fddac7bb25c2", "patch": "@@ -102,6 +102,11 @@ def test_cargo_miri_run():\n         \"run.subcrate.stdout.ref\", \"run.subcrate.stderr.ref\",\n         env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n     )\n+    test(\"`cargo miri r` (subcrate, no ioslation)\",\n+        cargo_miri(\"r\") + [\"-p\", \"subcrate\"],\n+        \"run.subcrate.stdout.ref\", \"run.subcrate.stderr.ref\",\n+        env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n+    )\n     test(\"`cargo miri run` (custom target dir)\",\n         # Attempt to confuse the argument parser.\n         cargo_miri(\"run\") + [\"--target-dir=custom-run\", \"--\", \"--target-dir=target/custom-run\"],\n@@ -146,6 +151,11 @@ def test_cargo_miri_test():\n         \"test.subcrate.stdout.ref\", \"test.stderr-proc-macro.ref\",\n         env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n     )\n+    test(\"`cargo miri t` (subcrate, no isolation)\",\n+        cargo_miri(\"t\") + [\"-p\", \"subcrate\"],\n+        \"test.subcrate.stdout.ref\", \"test.stderr-proc-macro.ref\",\n+        env={'MIRIFLAGS': \"-Zmiri-disable-isolation\"},\n+    )\n     test(\"`cargo miri test` (subcrate, doctests)\",\n         cargo_miri(\"test\") + [\"-p\", \"subcrate\", \"--doc\"],\n         \"test.stdout-empty.ref\", \"test.stderr-proc-macro-doctest.ref\","}]}