{"sha": "0c3b04fa0fc71d319fae14287246126e2e7c84d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjM2IwNGZhMGZjNzFkMzE5ZmFlMTQyODcyNDYxMjZlMmU3Yzg0ZDM=", "commit": {"author": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2013-11-17T11:47:47Z"}, "committer": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2013-11-17T11:47:47Z"}, "message": "Clarrify the message for test mode and use u8 instead of i8 for storing bits", "tree": {"sha": "07d0ad07d585ecef60f5be30532b45985ae14468", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/07d0ad07d585ecef60f5be30532b45985ae14468"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c3b04fa0fc71d319fae14287246126e2e7c84d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c3b04fa0fc71d319fae14287246126e2e7c84d3", "html_url": "https://github.com/rust-lang/rust/commit/0c3b04fa0fc71d319fae14287246126e2e7c84d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c3b04fa0fc71d319fae14287246126e2e7c84d3/comments", "author": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6258857beb447c3f230a226abe65edd9d1b3e142", "url": "https://api.github.com/repos/rust-lang/rust/commits/6258857beb447c3f230a226abe65edd9d1b3e142", "html_url": "https://github.com/rust-lang/rust/commit/6258857beb447c3f230a226abe65edd9d1b3e142"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "a08dfb29d3eac86be65be6db0e6584aaa6066416", "filename": "src/test/bench/shootout-mandelbrot.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/0c3b04fa0fc71d319fae14287246126e2e7c84d3/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c3b04fa0fc71d319fae14287246126e2e7c84d3/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs?ref=0c3b04fa0fc71d319fae14287246126e2e7c84d3", "patch": "@@ -21,14 +21,15 @@ static LIMIT: f64 = 2.0;\n fn main() {\n     let args = std::os::args();\n     let (w, mut out) = if args.len() < 2 {\n-        println(\"Test mode: do not dump the image.\");\n+        println(\"Test mode: do not dump the image because it's not utf8,\"\n+                + \" which interferes with the test runner.\");\n         (1000, ~DummyWriter as ~Writer)\n     } else {\n         (from_str(args[1]).unwrap(),\n          ~BufferedWriter::new(std::io::stdout()) as ~Writer)\n     };\n     let h = w;\n-    let mut byte_acc = 0i8;\n+    let mut byte_acc = 0u8;\n     let mut bit_num = 0;\n \n     writeln!(out, \"P4\\n{} {}\", w, h);\n@@ -62,12 +63,12 @@ fn main() {\n             bit_num += 1;\n \n             if bit_num == 8 {\n-                out.write_i8(byte_acc);\n+                out.write_u8(byte_acc);\n                 byte_acc = 0;\n                 bit_num = 0;\n             } else if x == w - 1 {\n                 byte_acc <<= 8 - w % 8;\n-                out.write_i8(byte_acc);\n+                out.write_u8(byte_acc);\n                 byte_acc = 0;\n                 bit_num = 0;\n             }"}]}