{"sha": "0599f3403366d9c57f0625e6de3af214b5042a90", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1OTlmMzQwMzM2NmQ5YzU3ZjA2MjVlNmRlM2FmMjE0YjUwNDJhOTA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-24T17:41:24Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-24T17:41:24Z"}, "message": "Auto merge of #87472 - inquisitivecrystal:stabilize-force-warn, r=Mark-Simulacrum\n\nStabilize and document `--force-warn`\n\nThis PR will stabilize and document the `--force-warn` command line option. It is currently a draft, pending an FCP.\n\nI've taken the liberty of tidying up the lint level command line options a bit as part of this. The changes are quite minor and should only affect rustc's help output. I'm making them here because they're trivial and, in one case, necessary to unify the way `--force-warn` with the way the other options are displayed.\n\nI also want to mention that `@rylev` has done a ton of work on moving this along and deserves most of the credit. I'm just the one who landed up writing this particular PR.\n\nResolves #86516.", "tree": {"sha": "45baf2e5d0576987aed24dd889a98d8a5aa817e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/45baf2e5d0576987aed24dd889a98d8a5aa817e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0599f3403366d9c57f0625e6de3af214b5042a90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0599f3403366d9c57f0625e6de3af214b5042a90", "html_url": "https://github.com/rust-lang/rust/commit/0599f3403366d9c57f0625e6de3af214b5042a90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0599f3403366d9c57f0625e6de3af214b5042a90/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5fe3bc0650279e4283a0511670c0668fc0f2217", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5fe3bc0650279e4283a0511670c0668fc0f2217", "html_url": "https://github.com/rust-lang/rust/commit/b5fe3bc0650279e4283a0511670c0668fc0f2217"}, {"sha": "1f3170cf164e1b744d007d924e042d6f394fa79b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f3170cf164e1b744d007d924e042d6f394fa79b", "html_url": "https://github.com/rust-lang/rust/commit/1f3170cf164e1b744d007d924e042d6f394fa79b"}], "stats": {"total": 143, "additions": 53, "deletions": 90}, "files": [{"sha": "fdedb7e6a4afe9b2334822fd8afcf0d576f5e0cf", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 6, "deletions": 22, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1089,10 +1089,11 @@ pub fn rustc_short_optgroups() -> Vec<RustcOptGroup> {\n         ),\n         opt::flag_s(\"\", \"test\", \"Build a test harness\"),\n         opt::opt_s(\"\", \"target\", \"Target triple for which the code is compiled\", \"TARGET\"),\n-        opt::multi_s(\"W\", \"warn\", \"Set lint warnings\", \"OPT\"),\n-        opt::multi_s(\"A\", \"allow\", \"Set lint allowed\", \"OPT\"),\n-        opt::multi_s(\"D\", \"deny\", \"Set lint denied\", \"OPT\"),\n-        opt::multi_s(\"F\", \"forbid\", \"Set lint forbidden\", \"OPT\"),\n+        opt::multi_s(\"A\", \"allow\", \"Set lint allowed\", \"LINT\"),\n+        opt::multi_s(\"W\", \"warn\", \"Set lint warnings\", \"LINT\"),\n+        opt::multi_s(\"\", \"force-warn\", \"Set lint force-warn\", \"LINT\"),\n+        opt::multi_s(\"D\", \"deny\", \"Set lint denied\", \"LINT\"),\n+        opt::multi_s(\"F\", \"forbid\", \"Set lint forbidden\", \"LINT\"),\n         opt::multi_s(\n             \"\",\n             \"cap-lints\",\n@@ -1101,13 +1102,6 @@ pub fn rustc_short_optgroups() -> Vec<RustcOptGroup> {\n              level\",\n             \"LEVEL\",\n         ),\n-        opt::multi_s(\n-            \"\",\n-            \"force-warn\",\n-            \"Specifiy lints that should warn even if \\\n-             they are allowed somewhere else\",\n-            \"LINT\",\n-        ),\n         opt::multi_s(\"C\", \"codegen\", \"Set a codegen option\", \"OPT[=VALUE]\"),\n         opt::flag_s(\"V\", \"version\", \"Print version info and exit\"),\n         opt::flag_s(\"v\", \"verbose\", \"Use verbose output\"),\n@@ -1163,19 +1157,10 @@ pub fn rustc_optgroups() -> Vec<RustcOptGroup> {\n pub fn get_cmd_lint_options(\n     matches: &getopts::Matches,\n     error_format: ErrorOutputType,\n-    debugging_opts: &DebuggingOptions,\n ) -> (Vec<(String, lint::Level)>, bool, Option<lint::Level>) {\n     let mut lint_opts_with_position = vec![];\n     let mut describe_lints = false;\n \n-    if !debugging_opts.unstable_options && matches.opt_present(\"force-warn\") {\n-        early_error(\n-            error_format,\n-            \"the `-Z unstable-options` flag must also be passed to enable \\\n-            the flag `--force-warn=lints`\",\n-        );\n-    }\n-\n     for level in [lint::Allow, lint::Warn, lint::ForceWarn, lint::Deny, lint::Forbid] {\n         for (arg_pos, lint_name) in matches.opt_strs_pos(level.as_str()) {\n             if lint_name == \"help\" {\n@@ -1965,8 +1950,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n         .unwrap_or_else(|e| early_error(error_format, &e[..]));\n \n     let mut debugging_opts = DebuggingOptions::build(matches, error_format);\n-    let (lint_opts, describe_lints, lint_cap) =\n-        get_cmd_lint_options(matches, error_format, &debugging_opts);\n+    let (lint_opts, describe_lints, lint_cap) = get_cmd_lint_options(matches, error_format);\n \n     check_debug_option_stability(&debugging_opts, error_format, json_rendered);\n "}, {"sha": "7bd46fafadf8344fe432971136857780cb639df4", "filename": "src/doc/rustc/src/lints/levels.md", "status": "modified", "additions": 27, "deletions": 12, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flevels.md", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flevels.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flevels.md?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,11 +1,12 @@\n # Lint levels\n \n-In `rustc`, lints are divided into four *levels*:\n+In `rustc`, lints are divided into five *levels*:\n \n 1. allow\n 2. warn\n-3. deny\n-4. forbid\n+3. force-warn\n+4. deny\n+5. forbid\n \n Each lint has a default level (explained in the lint listing later in this\n chapter), and the compiler has a default warning level. First, let's explain\n@@ -57,6 +58,14 @@ warning: unused variable: `x`\n   = note: to avoid this warning, consider using `_x` instead\n ```\n \n+## force-warn\n+\n+'force-warn' is a special lint level. It's the same as 'warn' in that a lint\n+at this level will produce a warning, but unlike the 'warn' level, the\n+'force-warn' level cannot be overridden. If a lint is set to 'force-warn', it\n+is guaranteed to warn: no more, no less. This is true even if the overall lint\n+level is capped via cap-lints.\n+\n ## deny\n \n A 'deny' lint produces an error if you violate it. For example, this code\n@@ -87,11 +96,12 @@ This lint level gives you that.\n \n ## forbid\n \n-'forbid' is a special lint level that's stronger than 'deny'. It's the same\n-as 'deny' in that a lint at this level will produce an error, but unlike the\n-'deny' level, the 'forbid' level can not be overridden to be anything lower\n-than an error.  However, lint levels may still be capped with `--cap-lints`\n-(see below) so `rustc --cap-lints warn` will make lints set to 'forbid' just\n+'forbid' is a special lint level that fills the same role for 'deny' that\n+'force-warn' does for 'warn'. It's the same as 'deny' in that a lint at this\n+level will produce an error, but unlike the 'deny' level, the 'forbid' level\n+can not be overridden to be anything lower than an error.  However, lint\n+levels may still be capped with `--cap-lints` (see below) so `rustc --cap-\n+lints warn` will make lints set to 'forbid' just\n warn.\n \n ## Configuring warning levels\n@@ -113,8 +123,8 @@ certain lint levels. We'll talk about that last.\n \n ### Via compiler flag\n \n-The `-A`, `-W`, `-D`, and `-F` flags let you turn one or more lints\n-into allowed, warning, deny, or forbid levels, like this:\n+The `-A`, `-W`, `--force-warn` `-D`, and `-F` flags let you turn one or more lints\n+into allowed, warning, force-warn, deny, or forbid levels, like this:\n \n ```bash\n $ rustc lib.rs --crate-type=lib -W missing-docs\n@@ -158,7 +168,7 @@ You can also pass each flag more than once for changing multiple lints:\n $ rustc lib.rs --crate-type=lib -D missing-docs -D unused-variables\n ```\n \n-And of course, you can mix these four flags together:\n+And of course, you can mix these five flags together:\n \n ```bash\n $ rustc lib.rs --crate-type=lib -D missing-docs -A unused-variables\n@@ -176,6 +186,10 @@ You can make use of this behavior by overriding the level of one specific lint o\n $ rustc lib.rs --crate-type=lib -D unused -A unused-variables\n ```\n \n+Since `force-warn` and `forbid` cannot be overridden, setting\n+one of them will prevent any later level for the same lint from\n+taking effect.\n+\n ### Via an attribute\n \n You can also modify the lint level with a crate-wide attribute:\n@@ -207,7 +221,8 @@ warning: missing documentation for a function\n   | ^^^^^^^^^^^^\n ```\n \n-All four, `warn`, `allow`, `deny`, and `forbid` all work this way.\n+`warn`, `allow`, `deny`, and `forbid` all work this way. There is\n+no way to set a lint to `force-warn` using an attribute.\n \n You can also pass in multiple lints per attribute:\n "}, {"sha": "052de0f379e7fbc222b6e5fa63f93e3b6becd275", "filename": "src/doc/unstable-book/src/compiler-flags/force-warn.md", "status": "removed", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/b5fe3bc0650279e4283a0511670c0668fc0f2217/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fforce-warn.md", "raw_url": "https://github.com/rust-lang/rust/raw/b5fe3bc0650279e4283a0511670c0668fc0f2217/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fforce-warn.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fforce-warn.md?ref=b5fe3bc0650279e4283a0511670c0668fc0f2217", "patch": "@@ -1,21 +0,0 @@\n-# `force-warn`\n-\n-The tracking issue for this feature is: [#85512](https://github.com/rust-lang/rust/issues/85512).\n-\n-------------------------\n-\n-This feature allows you to cause any lint to produce a warning even if the lint has a different level by default or another level is set somewhere else. For instance, the `force-warn` option can be used to make a lint (e.g., `dead_code`) produce a warning even if that lint is allowed in code with `#![allow(dead_code)]`.\n-\n-## Example\n-\n-```rust,ignore (partial-example)\n-#![allow(dead_code)]\n-\n-fn dead_function() {}\n-// This would normally not produce a warning even though the\n-// function is not used, because dead code is being allowed\n-\n-fn main() {}\n-```\n-\n-We can force a warning to be produced by providing `--force-warn dead_code` to rustc."}, {"sha": "97930f106994a3a95df9fe2b1be22d098c0c97f6", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -671,8 +671,7 @@ impl Options {\n             return Err(1);\n         }\n \n-        let (lint_opts, describe_lints, lint_cap) =\n-            get_cmd_lint_options(matches, error_format, &debugging_opts);\n+        let (lint_opts, describe_lints, lint_cap) = get_cmd_lint_options(matches, error_format);\n \n         Ok(Options {\n             input,"}, {"sha": "4eae813aff7b0a3f270822eb12e095ef64d05006", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 5, "deletions": 12, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -503,10 +503,11 @@ fn opts() -> Vec<RustcOptGroup> {\n         unstable(\"disable-minification\", |o| {\n             o.optflagmulti(\"\", \"disable-minification\", \"Disable minification applied on JS files\")\n         }),\n-        stable(\"warn\", |o| o.optmulti(\"W\", \"warn\", \"Set lint warnings\", \"OPT\")),\n-        stable(\"allow\", |o| o.optmulti(\"A\", \"allow\", \"Set lint allowed\", \"OPT\")),\n-        stable(\"deny\", |o| o.optmulti(\"D\", \"deny\", \"Set lint denied\", \"OPT\")),\n-        stable(\"forbid\", |o| o.optmulti(\"F\", \"forbid\", \"Set lint forbidden\", \"OPT\")),\n+        stable(\"allow\", |o| o.optmulti(\"A\", \"allow\", \"Set lint allowed\", \"LINT\")),\n+        stable(\"warn\", |o| o.optmulti(\"W\", \"warn\", \"Set lint warnings\", \"LINT\")),\n+        stable(\"force-warn\", |o| o.optmulti(\"\", \"force-warn\", \"Set lint force-warn\", \"LINT\")),\n+        stable(\"deny\", |o| o.optmulti(\"D\", \"deny\", \"Set lint denied\", \"LINT\")),\n+        stable(\"forbid\", |o| o.optmulti(\"F\", \"forbid\", \"Set lint forbidden\", \"LINT\")),\n         stable(\"cap-lints\", |o| {\n             o.optmulti(\n                 \"\",\n@@ -517,14 +518,6 @@ fn opts() -> Vec<RustcOptGroup> {\n                 \"LEVEL\",\n             )\n         }),\n-        unstable(\"force-warn\", |o| {\n-            o.optopt(\n-                \"\",\n-                \"force-warn\",\n-                \"Lints that will warn even if allowed somewhere else\",\n-                \"LINTS\",\n-            )\n-        }),\n         unstable(\"index-page\", |o| {\n             o.optopt(\"\", \"index-page\", \"Markdown file to be used as index page\", \"PATH\")\n         }),"}, {"sha": "b8769d5f6905178c2aab86e27a20ef053a158ee2", "filename": "src/test/run-make/unstable-flag-required/Makefile", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Frun-make%2Funstable-flag-required%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Frun-make%2Funstable-flag-required%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Funstable-flag-required%2FMakefile?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -2,4 +2,3 @@\n \n all:\n \t$(RUSTDOC) --output-format=json x.html 2>&1 | diff - output-format-json.stderr\n-\t$(RUSTC) --force-warn dead_code x.rs 2>&1 | diff - force-warn.stderr"}, {"sha": "1b70dc83bdb158e0782b1ecfd2419676e382d685", "filename": "src/test/run-make/unstable-flag-required/force-warn.stderr", "status": "removed", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5fe3bc0650279e4283a0511670c0668fc0f2217/src%2Ftest%2Frun-make%2Funstable-flag-required%2Fforce-warn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b5fe3bc0650279e4283a0511670c0668fc0f2217/src%2Ftest%2Frun-make%2Funstable-flag-required%2Fforce-warn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Funstable-flag-required%2Fforce-warn.stderr?ref=b5fe3bc0650279e4283a0511670c0668fc0f2217", "patch": "@@ -1,2 +0,0 @@\n-error: the `-Z unstable-options` flag must also be passed to enable the flag `--force-warn=lints`\n-"}, {"sha": "7d762b05c97b998974937afa21dec72eb4af55cf", "filename": "src/test/ui/lint/cli-lint-override.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-lint-override.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-lint-override.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fcli-lint-override.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -5,7 +5,7 @@\n //\n //[warn_deny] compile-flags: --warn missing_abi --deny missing_abi\n //[forbid_warn] compile-flags: --warn missing_abi --forbid missing_abi\n-//[force_warn_deny] compile-flags: -Z unstable-options --force-warn missing_abi --allow missing_abi\n+//[force_warn_deny] compile-flags: --force-warn missing_abi --allow missing_abi\n //[force_warn_deny] check-pass\n \n "}, {"sha": "f3dea87a6b69a1fccc2a66f9d000c3013d40aca4", "filename": "src/test/ui/lint/cli-unknown-force-warn.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,7 +1,7 @@\n // Checks that rustc correctly errors when passed an invalid lint with\n // `--force-warn`. This is a regression test for issue #86958.\n //\n-// compile-flags: -Z unstable-options --force-warn foo-qux\n+// compile-flags: --force-warn foo-qux\n // error-pattern: unknown lint: `foo_qux`\n \n fn main() {}"}, {"sha": "9ce9f405aee699d38d5ca0b1b30e0f5ce90651f2", "filename": "src/test/ui/lint/cli-unknown-force-warn.stderr", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fcli-unknown-force-warn.stderr?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -6,10 +6,6 @@ error[E0602]: unknown lint: `foo_qux`\n    |\n    = note: requested on the command line with `--force-warn foo_qux`\n \n-error[E0602]: unknown lint: `foo_qux`\n-   |\n-   = note: requested on the command line with `--force-warn foo_qux`\n-\n-error: aborting due to 3 previous errors\n+error: aborting due to 2 previous errors\n \n For more information about this error, try `rustc --explain E0602`."}, {"sha": "adcefc7ec78c4190d723423f4e67ecffc7ea1749", "filename": "src/test/ui/lint/force-warn/allow-warnings.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallow-warnings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallow-warnings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallow-warnings.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT causes $LINT (which is warn-by-default) to warn\n // despite allowing all warnings in module\n-// compile-flags: --force-warn dead_code -Zunstable-options\n+// compile-flags: --force-warn dead_code\n // check-pass\n \n #![allow(warnings)]"}, {"sha": "b24ab822d93037b4f61a4bc6a32f0fff5445cd24", "filename": "src/test/ui/lint/force-warn/allowed-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,5 +1,5 @@\n // --force-warn $LINT causes $LINT (which is allow-by-default) to warn\n-// compile-flags: --force-warn elided_lifetimes_in_paths -Zunstable-options\n+// compile-flags: --force-warn elided_lifetimes_in_paths\n // check-pass\n \n struct Foo<'a> {"}, {"sha": "08e75a775d0b55b98a343610efbb0b18d75c30ec", "filename": "src/test/ui/lint/force-warn/allowed-deny-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-deny-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-deny-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-deny-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT causes $LINT (which is deny-by-default) to warn\n // despite $LINT being allowed in module\n-// compile-flags: --force-warn const_err -Zunstable-options\n+// compile-flags: --force-warn const_err\n // check-pass\n \n #![allow(const_err)]"}, {"sha": "9b1edba41aafeec4ab481508287271efab2bdd22", "filename": "src/test/ui/lint/force-warn/allowed-group-warn-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-group-warn-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-group-warn-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-group-warn-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT causes $LINT (which is warn-by-default) to warn\n // despite $LINT_GROUP (which contains $LINT) being allowed\n-// compile-flags: --force-warn bare_trait_objects -Zunstable-options\n+// compile-flags: --force-warn bare_trait_objects\n // check-pass\n \n #![allow(rust_2018_idioms)]"}, {"sha": "4ac29ff7d99b7e57272ebe02fed7674d0d8e1141", "filename": "src/test/ui/lint/force-warn/allowed-warn-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-warn-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-warn-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fallowed-warn-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT causes $LINT (which is warn-by-default) to warn\n // despite $LINT being allowed in module\n-// compile-flags: --force-warn dead_code -Zunstable-options\n+// compile-flags: --force-warn dead_code\n // check-pass\n \n #![allow(dead_code)]"}, {"sha": "9609ea994312fb8fb0cff619094584ba09441882", "filename": "src/test/ui/lint/force-warn/cap-lints-allow.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-allow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-allow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-allow.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT casuses $LINT to warn despite --cap-lints\n // set to allow\n-// compile-flags: --cap-lints allow  --force-warn bare_trait_objects -Zunstable-options\n+// compile-flags: --cap-lints allow  --force-warn bare_trait_objects\n // check-pass\n \n pub trait SomeTrait {}"}, {"sha": "e65f156bfdc9a8c69b9460d159ef62079e12728f", "filename": "src/test/ui/lint/force-warn/cap-lints-warn-allowed-warn-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-warn-allowed-warn-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-warn-allowed-warn-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fcap-lints-warn-allowed-warn-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT_GROUP causes $LINT to warn despite $LINT being\n // allowed in module and cap-lints set to warn\n-// compile-flags: --cap-lints warn  --force-warn rust-2021-compatibility -Zunstable-options\n+// compile-flags: --cap-lints warn  --force-warn rust-2021-compatibility\n // check-pass\n #![allow(ellipsis_inclusive_range_patterns)]\n "}, {"sha": "e371029032fe906be94f93a95ee88634a13003c9", "filename": "src/test/ui/lint/force-warn/deny-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fdeny-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fdeny-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Fdeny-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,5 +1,5 @@\n // --force-warn $LINT causes $LINT (which is deny-by-default) to warn\n-// compile-flags: --force-warn const_err -Zunstable-options\n+// compile-flags: --force-warn const_err\n // check-pass\n \n const C: i32 = 1 / 0;"}, {"sha": "4b95f4d2dfbbaa5b9fe5fc42263bfe3c1f66ca1b", "filename": "src/test/ui/lint/force-warn/lint-group-allow-warnings.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allow-warnings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allow-warnings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allow-warnings.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,7 +1,7 @@\n // --force-warn $LINT_GROUP causes $LINT in $LINT_GROUP to warn\n // despite all warnings being allowed in module\n // warn-by-default lint to warn\n-// compile-flags: --force-warn nonstandard_style -Zunstable-options\n+// compile-flags: --force-warn nonstandard_style\n // check-pass\n \n #![allow(warnings)]"}, {"sha": "99cad614c25cd38acab5ba2fc752afede288e215", "filename": "src/test/ui/lint/force-warn/lint-group-allowed-lint-group.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-lint-group.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-lint-group.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-lint-group.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT_GROUP causes $LINT to warn despite\n // $LINT_GROUP being allowed in module\n-// compile-flags: --force-warn rust_2018_idioms -Zunstable-options\n+// compile-flags: --force-warn rust_2018_idioms\n // check-pass\n \n #![allow(rust_2018_idioms)]"}, {"sha": "f0aacd773401f6cf433700995ae6dac24fb99b2a", "filename": "src/test/ui/lint/force-warn/lint-group-allowed-warn-by-default-lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-warn-by-default-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0599f3403366d9c57f0625e6de3af214b5042a90/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-warn-by-default-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fforce-warn%2Flint-group-allowed-warn-by-default-lint.rs?ref=0599f3403366d9c57f0625e6de3af214b5042a90", "patch": "@@ -1,6 +1,6 @@\n // --force-warn $LINT_GROUP causes $LINT (which is warn-by-default) to warn\n // despite $LINT being allowed in module\n-// compile-flags: --force-warn rust-2018-idioms -Zunstable-options\n+// compile-flags: --force-warn rust-2018-idioms\n // check-pass\n \n #![allow(bare_trait_objects)]"}]}