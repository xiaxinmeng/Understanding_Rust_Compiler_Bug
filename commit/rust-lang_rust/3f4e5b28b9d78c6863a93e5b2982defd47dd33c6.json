{"sha": "3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmNGU1YjI4YjlkNzhjNjg2M2E5M2U1YjI5ODJkZWZkNDdkZDMzYzY=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-27T06:16:45Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-27T08:23:24Z"}, "message": "Rollup merge of #50227 - sinkuu:ice_non_local_trait, r=estebank\n\nFix ICE with erroneous `impl Trait` in a trait impl\n\nFixes #49841.", "tree": {"sha": "3b549dd4a9e37f208d151add264274394c792e97", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b549dd4a9e37f208d151add264274394c792e97"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlri3fwACgkQ/vbIBR0O\nATzHnQ/+OpjyU7zYb/4NrHtvQaKrTuevmYgebqbCUHZ3lUURLFGt3bEo3EkyeyaD\nmlNoRnHwfDz7ixiutabDuIDmepOzJ4CEKTx+aRGYKbi3YiU0cQWOVhC3+qbJSMAO\nYyxznUb0C99L4NCX6HHcRSyTy9IWTfWmgkEkBZBr8xPRzacB5k/bdSWzXknPZqJq\nQfSpYyEGlhAEtIVLqPb6WGGgV2S1oyYMNzFwh3z8K/1d+53RUxvNnj1L1H9j9B6C\nHbP9L6J/nVzhu2zavGyhALUAlnnhgZ6aEAHxY4uCHtB49PeQ6P2ENqOGFzT5v91o\nekyYoz4e1pGhAgOwV2YrdsRvFjQyGQsSZi/57fQdQDx27+rs3FHyE7FjPfyskv6Z\nN+tkRMI7IzkrI/xfUXJm+1SaV1PZUwEfcEouSPsB/LufpxE46c9F0kaJCancC10h\nxcLSacAq46BYHPWUorVGWAA22ccHOYM+sz6eGFuYgiqmcaPp1e+T4FhExfJDjZ7i\nc0uqp2i9Omcez5QnCJz8Ppd63lCembVEeA7JR4hNHFjJZLldQnmEMoOZeiZPkoaE\nsfXC3ZN8oYRfEMWqUeveXSrNWGNIdNiz48BmZxPLMD8lEU+5/zlxjMnkXOxwJiSX\n/+X5qHoDpZ13topzZPT/gzFSk5CxqFrChJUfZsQ0qO4+Ed75yHc=\n=P9kB\n-----END PGP SIGNATURE-----", "payload": "tree 3b549dd4a9e37f208d151add264274394c792e97\nparent d1faefcbc3513be81be8445df20501245889e6de\nparent 98c2e0976d6c4d0d3bd22e477b504f1a6f9b4ffa\nauthor kennytm <kennytm@gmail.com> 1524809805 +0800\ncommitter kennytm <kennytm@gmail.com> 1524817404 +0800\n\nRollup merge of #50227 - sinkuu:ice_non_local_trait, r=estebank\n\nFix ICE with erroneous `impl Trait` in a trait impl\n\nFixes #49841.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "html_url": "https://github.com/rust-lang/rust/commit/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1faefcbc3513be81be8445df20501245889e6de", "url": "https://api.github.com/repos/rust-lang/rust/commits/d1faefcbc3513be81be8445df20501245889e6de", "html_url": "https://github.com/rust-lang/rust/commit/d1faefcbc3513be81be8445df20501245889e6de"}, {"sha": "98c2e0976d6c4d0d3bd22e477b504f1a6f9b4ffa", "url": "https://api.github.com/repos/rust-lang/rust/commits/98c2e0976d6c4d0d3bd22e477b504f1a6f9b4ffa", "html_url": "https://github.com/rust-lang/rust/commit/98c2e0976d6c4d0d3bd22e477b504f1a6f9b4ffa"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "91264849cadf85f41f6930da4045cb23c54e89b1", "filename": "src/librustc_typeck/check/compare_method.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6/src%2Flibrustc_typeck%2Fcheck%2Fcompare_method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6/src%2Flibrustc_typeck%2Fcheck%2Fcompare_method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fcompare_method.rs?ref=3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "patch": "@@ -732,8 +732,7 @@ fn compare_synthetic_generics<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         if impl_ty.synthetic != trait_ty.synthetic {\n             let impl_node_id = tcx.hir.as_local_node_id(impl_ty.def_id).unwrap();\n             let impl_span = tcx.hir.span(impl_node_id);\n-            let trait_node_id = tcx.hir.as_local_node_id(trait_ty.def_id).unwrap();\n-            let trait_span = tcx.hir.span(trait_node_id);\n+            let trait_span = tcx.def_span(trait_ty.def_id);\n             let mut err = struct_span_err!(tcx.sess,\n                                            impl_span,\n                                            E0643,"}, {"sha": "d6707f590113ce5e464edd019ca0b55225d610e1", "filename": "src/test/compile-fail/impl-trait/impl-generic-mismatch.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6/src%2Ftest%2Fcompile-fail%2Fimpl-trait%2Fimpl-generic-mismatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f4e5b28b9d78c6863a93e5b2982defd47dd33c6/src%2Ftest%2Fcompile-fail%2Fimpl-trait%2Fimpl-generic-mismatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fimpl-trait%2Fimpl-generic-mismatch.rs?ref=3f4e5b28b9d78c6863a93e5b2982defd47dd33c6", "patch": "@@ -28,4 +28,15 @@ impl Bar for () {\n     //~^ Error method `bar` has incompatible signature for trait\n }\n \n+// With non-local trait (#49841):\n+\n+use std::hash::{Hash, Hasher};\n+\n+struct X;\n+\n+impl Hash for X {\n+    fn hash(&self, hasher: &mut impl Hasher) {}\n+    //~^ Error method `hash` has incompatible signature for trait\n+}\n+\n fn main() {}"}]}