{"sha": "50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwZjBlMmU5ZTZlODVjNWFlMTVmZmRlNzllMzRlZGZkMjg0NDY1ZmQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-11T08:48:57Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-02-01T17:54:55Z"}, "message": "{syntax -> rustc_ast_passes}::node_count", "tree": {"sha": "d1b4e48382fa045495eafc82fbbc4564b52c0e18", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1b4e48382fa045495eafc82fbbc4564b52c0e18"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "html_url": "https://github.com/rust-lang/rust/commit/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c0b779b7bb23ad1bead914e8023642cc2368406", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c0b779b7bb23ad1bead914e8023642cc2368406", "html_url": "https://github.com/rust-lang/rust/commit/6c0b779b7bb23ad1bead914e8023642cc2368406"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "b4d8ddccb041d247bfbb43aafcd7de1a58f21972", "filename": "src/librustc_ast_passes/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_ast_passes%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_ast_passes%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Flib.rs?ref=50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "patch": "@@ -1,9 +1,12 @@\n //! The `rustc_ast_passes` crate contains passes which validate the AST in `syntax`\n //! parsed by `rustc_parse` and then lowered, after the passes in this crate,\n //! by `rustc_ast_lowering`.\n+//!\n+//! The crate also contains other misc AST visitors, e.g. `node_count` and `show_span`.\n \n #![cfg_attr(bootstrap, feature(slice_patterns))]\n \n pub mod ast_validation;\n pub mod feature_gate;\n+pub mod node_count;\n pub mod show_span;"}, {"sha": "9fe7238fcfc3eaeef3e645673e9cba78c1277be1", "filename": "src/librustc_ast_passes/node_count.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_ast_passes%2Fnode_count.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_ast_passes%2Fnode_count.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Fnode_count.rs?ref=50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "patch": "@@ -1,8 +1,8 @@\n // Simply gives a rought count of the number of nodes in an AST.\n \n-use crate::ast::*;\n-use crate::visit::*;\n use rustc_span::Span;\n+use syntax::ast::*;\n+use syntax::visit::*;\n \n pub struct NodeCounter {\n     pub count: usize,", "previous_filename": "src/libsyntax/util/node_count.rs"}, {"sha": "c22c00e9154e716a922ed03d4188a8fdb673b213", "filename": "src/librustc_interface/passes.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_interface%2Fpasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibrustc_interface%2Fpasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fpasses.rs?ref=50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "patch": "@@ -40,7 +40,6 @@ use rustc_span::FileName;\n use rustc_traits;\n use rustc_typeck as typeck;\n use syntax::mut_visit::MutVisitor;\n-use syntax::util::node_count::NodeCounter;\n use syntax::{self, ast, visit};\n \n use rustc_serialize::json;\n@@ -83,7 +82,7 @@ pub fn parse<'a>(sess: &'a Session, input: &Input) -> PResult<'a, ast::Crate> {\n }\n \n fn count_nodes(krate: &ast::Crate) -> usize {\n-    let mut counter = NodeCounter::new();\n+    let mut counter = rustc_ast_passes::node_count::NodeCounter::new();\n     visit::walk_crate(&mut counter, krate);\n     counter.count\n }"}, {"sha": "6c88cd738f4c945226945779b209e7a89da5948e", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/50f0e2e9e6e85c5ae15ffde79e34edfd284465fd/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=50f0e2e9e6e85c5ae15ffde79e34edfd284465fd", "patch": "@@ -67,7 +67,6 @@ pub mod util {\n     pub mod lev_distance;\n     pub mod literal;\n     pub mod map_in_place;\n-    pub mod node_count;\n     pub mod parser;\n }\n "}]}