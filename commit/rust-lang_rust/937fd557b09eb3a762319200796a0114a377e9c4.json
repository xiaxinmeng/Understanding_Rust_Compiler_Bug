{"sha": "937fd557b09eb3a762319200796a0114a377e9c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzN2ZkNTU3YjA5ZWIzYTc2MjMxOTIwMDc5NmEwMTE0YTM3N2U5YzQ=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-04-08T20:39:45Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-08T20:39:45Z"}, "message": "Merge #3899\n\n3899: Enable the SemanticTokensFeature by default r=matklad a=kjeremy\n\nThis is covered under vscode's \"editor.semanticHighlighting.enabled\"\r\nsetting plus the user has to have a theme that has opted into highlighting.\r\n\r\nBumps required vscode stable to 1.44\r\n\r\nCloses #3773 \n\nCo-authored-by: kjeremy <kjeremy@gmail.com>", "tree": {"sha": "74828e0f7fcc984487137f0b3534100f34810455", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74828e0f7fcc984487137f0b3534100f34810455"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/937fd557b09eb3a762319200796a0114a377e9c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJejjaRCRBK7hj4Ov3rIwAAdHIIAFtNMza+VcumK9OTZR+ooODd\nLPymsydZaGgM9P4qDRZX9J+X7Adiwi5pE/A7rzE0jCJTjwYHgsh824+uT5iQ29m5\n4T9gpe+DcTTikiGmIfZ+nYpAhbsnH0VElF22eDElbXj5LXBU34/8K/dBmfrKG3O+\n81X1oRLG3NEZ+bhoZPTLxUgbETHB8rwwK9SgMAL/9k/vdqEUWFTf+qQrsl0b+71g\n6S0bchwiEHqmPhf/j7/2Uv4Godmnt7TXq1nV8cz4JXJRJm1t5UZLBnoweOcqfEVu\nDjTwzyYS44JC5ZroCzEJQGIjVw0Z7VKrusS1+uncNueYfg0tYdS/LkjegwT2xUQ=\n=tU6m\n-----END PGP SIGNATURE-----\n", "payload": "tree 74828e0f7fcc984487137f0b3534100f34810455\nparent 779555c1beac90f633c01a773558c4007c99c97f\nparent 6f0f86d2c57749000df2d6dc2932983173f948ee\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1586378385 +0000\ncommitter GitHub <noreply@github.com> 1586378385 +0000\n\nMerge #3899\n\n3899: Enable the SemanticTokensFeature by default r=matklad a=kjeremy\n\nThis is covered under vscode's \"editor.semanticHighlighting.enabled\"\r\nsetting plus the user has to have a theme that has opted into highlighting.\r\n\r\nBumps required vscode stable to 1.44\r\n\r\nCloses #3773 \n\nCo-authored-by: kjeremy <kjeremy@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/937fd557b09eb3a762319200796a0114a377e9c4", "html_url": "https://github.com/rust-lang/rust/commit/937fd557b09eb3a762319200796a0114a377e9c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/937fd557b09eb3a762319200796a0114a377e9c4/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "779555c1beac90f633c01a773558c4007c99c97f", "url": "https://api.github.com/repos/rust-lang/rust/commits/779555c1beac90f633c01a773558c4007c99c97f", "html_url": "https://github.com/rust-lang/rust/commit/779555c1beac90f633c01a773558c4007c99c97f"}, {"sha": "6f0f86d2c57749000df2d6dc2932983173f948ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f0f86d2c57749000df2d6dc2932983173f948ee", "html_url": "https://github.com/rust-lang/rust/commit/6f0f86d2c57749000df2d6dc2932983173f948ee"}], "stats": {"total": 26, "additions": 8, "deletions": 18}, "files": [{"sha": "0bf7b6ae68c6a6afa82ce1175edac39994a48810", "filename": "editors/code/package.json", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=937fd557b09eb3a762319200796a0114a377e9c4", "patch": "@@ -21,7 +21,7 @@\n         \"Programming Languages\"\n     ],\n     \"engines\": {\n-        \"vscode\": \"^1.43.0\"\n+        \"vscode\": \"^1.44.0\"\n     },\n     \"enableProposedApi\": true,\n     \"scripts\": {\n@@ -342,11 +342,6 @@\n                     \"default\": true,\n                     \"description\": \"Show function name and docs in parameter hints\"\n                 },\n-                \"rust-analyzer.highlighting.semanticTokens\": {\n-                    \"type\": \"boolean\",\n-                    \"default\": false,\n-                    \"description\": \"Use proposed semantic tokens API for syntax highlighting\"\n-                },\n                 \"rust-analyzer.updates.channel\": {\n                     \"type\": \"string\",\n                     \"enum\": ["}, {"sha": "0ad4b63aeb18e3cf37e892f6203e323647f6f149", "filename": "editors/code/src/client.ts", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fclient.ts", "raw_url": "https://github.com/rust-lang/rust/raw/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fclient.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fclient.ts?ref=937fd557b09eb3a762319200796a0114a377e9c4", "patch": "@@ -1,11 +1,10 @@\n import * as lc from 'vscode-languageclient';\n import * as vscode from 'vscode';\n \n-import { Config } from './config';\n import { CallHierarchyFeature } from 'vscode-languageclient/lib/callHierarchy.proposed';\n import { SemanticTokensFeature, DocumentSemanticsTokensSignature } from 'vscode-languageclient/lib/semanticTokens.proposed';\n \n-export async function createClient(config: Config, serverPath: string, cwd: string): Promise<lc.LanguageClient> {\n+export async function createClient(serverPath: string, cwd: string): Promise<lc.LanguageClient> {\n     // '.' Is the fallback if no folder is open\n     // TODO?: Workspace folders support Uri's (eg: file://test.txt).\n     // It might be a good idea to test if the uri points to a file.\n@@ -73,15 +72,12 @@ export async function createClient(config: Config, serverPath: string, cwd: stri\n     };\n \n     // To turn on all proposed features use: res.registerProposedFeatures();\n-    // Here we want to just enable CallHierarchyFeature since it is available on stable.\n-    // Note that while the CallHierarchyFeature is stable the LSP protocol is not.\n+    // Here we want to enable CallHierarchyFeature and SemanticTokensFeature\n+    // since they are available on stable.\n+    // Note that while these features are stable in vscode their LSP protocol\n+    // implementations are still in the \"proposed\" category for 3.16.\n     res.registerFeature(new CallHierarchyFeature(res));\n-\n-    if (config.package.enableProposedApi) {\n-        if (config.highlightingSemanticTokens) {\n-            res.registerFeature(new SemanticTokensFeature(res));\n-        }\n-    }\n+    res.registerFeature(new SemanticTokensFeature(res));\n \n     return res;\n }"}, {"sha": "21c1c9f232ed11b0526ecc87183799a136efdbfa", "filename": "editors/code/src/config.ts", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fconfig.ts", "raw_url": "https://github.com/rust-lang/rust/raw/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fconfig.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fconfig.ts?ref=937fd557b09eb3a762319200796a0114a377e9c4", "patch": "@@ -69,7 +69,6 @@ export class Config {\n     get serverPath() { return this.cfg.get<null | string>(\"serverPath\")!; }\n     get channel() { return this.cfg.get<UpdatesChannel>(\"updates.channel\")!; }\n     get askBeforeDownload() { return this.cfg.get<boolean>(\"updates.askBeforeDownload\")!; }\n-    get highlightingSemanticTokens() { return this.cfg.get<boolean>(\"highlighting.semanticTokens\")!; }\n     get traceExtension() { return this.cfg.get<boolean>(\"trace.extension\")!; }\n \n     get inlayHints() {"}, {"sha": "f7ed62d0356b54372ca0c9838c5e144ad7a46b6a", "filename": "editors/code/src/ctx.ts", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fctx.ts", "raw_url": "https://github.com/rust-lang/rust/raw/937fd557b09eb3a762319200796a0114a377e9c4/editors%2Fcode%2Fsrc%2Fctx.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fctx.ts?ref=937fd557b09eb3a762319200796a0114a377e9c4", "patch": "@@ -21,7 +21,7 @@ export class Ctx {\n         serverPath: string,\n         cwd: string,\n     ): Promise<Ctx> {\n-        const client = await createClient(config, serverPath, cwd);\n+        const client = await createClient(serverPath, cwd);\n         const res = new Ctx(config, extCtx, client, serverPath);\n         res.pushCleanup(client.start());\n         await client.onReady();"}]}