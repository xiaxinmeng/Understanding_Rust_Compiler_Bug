{"sha": "7bb0923e464c34291e7ed60f270095957d8cd331", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiYjA5MjNlNDY0YzM0MjkxZTdlZDYwZjI3MDA5NTk1N2Q4Y2QzMzE=", "commit": {"author": {"name": "Ariel Ben-Yehuda", "email": "ariel.byd@gmail.com", "date": "2017-09-25T10:47:19Z"}, "committer": {"name": "Ariel Ben-Yehuda", "email": "ariel.byd@gmail.com", "date": "2017-09-25T10:47:19Z"}, "message": "fix Debug impls", "tree": {"sha": "b3d62983f361cccd28ea4b77e7207cff2146f000", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3d62983f361cccd28ea4b77e7207cff2146f000"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7bb0923e464c34291e7ed60f270095957d8cd331", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7bb0923e464c34291e7ed60f270095957d8cd331", "html_url": "https://github.com/rust-lang/rust/commit/7bb0923e464c34291e7ed60f270095957d8cd331", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7bb0923e464c34291e7ed60f270095957d8cd331/comments", "author": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "committer": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c10b23e2e0ef86f126a4589ac32c92f747d82eaf", "url": "https://api.github.com/repos/rust-lang/rust/commits/c10b23e2e0ef86f126a4589ac32c92f747d82eaf", "html_url": "https://github.com/rust-lang/rust/commit/c10b23e2e0ef86f126a4589ac32c92f747d82eaf"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "cede0c2b9a2c27f155d9b3337184d0df5b5200a6", "filename": "src/librustc/middle/region.rs", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/7bb0923e464c34291e7ed60f270095957d8cd331/src%2Flibrustc%2Fmiddle%2Fregion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7bb0923e464c34291e7ed60f270095957d8cd331/src%2Flibrustc%2Fmiddle%2Fregion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fregion.rs?ref=7bb0923e464c34291e7ed60f270095957d8cd331", "patch": "@@ -18,6 +18,7 @@ use ich::{StableHashingContext, NodeIdHashingMode};\n use util::nodemap::{FxHashMap, FxHashSet};\n use ty;\n \n+use std::fmt;\n use std::mem;\n use std::rc::Rc;\n use syntax::codemap;\n@@ -96,7 +97,11 @@ use rustc_data_structures::stable_hasher::{HashStable, StableHasher,\n /// placate the same deriving in `ty::FreeRegion`, but we may want to\n /// actually attach a more meaningful ordering to scopes than the one\n /// generated via deriving here.\n-#[derive(Clone, PartialEq, PartialOrd, Eq, Ord, Hash, Debug, Copy, RustcEncodable, RustcDecodable)]\n+///\n+/// Scope is a bit-packed to save space - if `code` is SCOPE_DATA_REMAINDER_MAX\n+/// or less, it is a `ScopeData::Remainder`, otherwise it is a type specified\n+/// by the bitpacking.\n+#[derive(Clone, PartialEq, PartialOrd, Eq, Ord, Hash, Copy, RustcEncodable, RustcDecodable)]\n pub struct Scope {\n     pub(crate) id: hir::ItemLocalId,\n     pub(crate) code: u32\n@@ -152,7 +157,7 @@ pub struct BlockRemainder {\n }\n \n #[derive(Clone, PartialEq, PartialOrd, Eq, Ord, Hash, RustcEncodable,\n-         RustcDecodable, Debug, Copy)]\n+         RustcDecodable, Copy)]\n pub struct FirstStatementIndex { pub idx: u32 }\n \n impl Idx for FirstStatementIndex {\n@@ -166,6 +171,12 @@ impl Idx for FirstStatementIndex {\n     }\n }\n \n+impl fmt::Debug for FirstStatementIndex {\n+    fn fmt(&self, formatter: &mut fmt::Formatter) -> fmt::Result {\n+        fmt::Debug::fmt(&self.index(), formatter)\n+    }\n+}\n+\n impl From<ScopeData> for Scope {\n     #[inline]\n     fn from(scope_data: ScopeData) -> Self {\n@@ -180,6 +191,12 @@ impl From<ScopeData> for Scope {\n     }\n }\n \n+impl fmt::Debug for Scope {\n+    fn fmt(&self, formatter: &mut fmt::Formatter) -> fmt::Result {\n+        fmt::Debug::fmt(&self.data(), formatter)\n+    }\n+}\n+\n #[allow(non_snake_case)]\n impl Scope {\n     #[inline]"}]}