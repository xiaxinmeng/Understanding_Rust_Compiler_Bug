{"sha": "a40bca29a818b4cbea072a295cb80aa9a4c43d52", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0MGJjYTI5YTgxOGI0Y2JlYTA3MmEyOTVjYjgwYWE5YTRjNDNkNTI=", "commit": {"author": {"name": "petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2015-06-01T17:50:35Z"}, "committer": {"name": "petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2015-06-01T17:50:35Z"}, "message": "Fix platform detection", "tree": {"sha": "1e16c25afbf232088fc053a3b3060dcfd8fa8e2f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e16c25afbf232088fc053a3b3060dcfd8fa8e2f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a40bca29a818b4cbea072a295cb80aa9a4c43d52", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a40bca29a818b4cbea072a295cb80aa9a4c43d52", "html_url": "https://github.com/rust-lang/rust/commit/a40bca29a818b4cbea072a295cb80aa9a4c43d52", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a40bca29a818b4cbea072a295cb80aa9a4c43d52/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8c86f8ff8c7cbbf0e87f0c7fe22e5596a4778bfc", "url": "https://api.github.com/repos/rust-lang/rust/commits/8c86f8ff8c7cbbf0e87f0c7fe22e5596a4778bfc", "html_url": "https://github.com/rust-lang/rust/commit/8c86f8ff8c7cbbf0e87f0c7fe22e5596a4778bfc"}], "stats": {"total": 9, "additions": 3, "deletions": 6}, "files": [{"sha": "0e103fbcffbad6a0fb1b2f34044b0887200519c8", "filename": "src/etc/check-sanitycheck.py", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a40bca29a818b4cbea072a295cb80aa9a4c43d52/src%2Fetc%2Fcheck-sanitycheck.py", "raw_url": "https://github.com/rust-lang/rust/raw/a40bca29a818b4cbea072a295cb80aa9a4c43d52/src%2Fetc%2Fcheck-sanitycheck.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcheck-sanitycheck.py?ref=a40bca29a818b4cbea072a295cb80aa9a4c43d52", "patch": "@@ -17,14 +17,12 @@\n \n STATUS = 0\n \n-\n def error_unless_permitted(env_var, message):\n     global STATUS\n     if not os.getenv(env_var):\n         sys.stderr.write(message)\n         STATUS = 1\n \n-\n def only_on(platforms):\n     def decorator(func):\n         @functools.wraps(func)\n@@ -34,8 +32,7 @@ def inner():\n         return inner\n     return decorator\n \n-\n-@only_on(('linux', 'darwin', 'freebsd', 'openbsd'))\n+@only_on(['linux', 'darwin', 'freebsd', 'openbsd'])\n def check_rlimit_core():\n     import resource\n     soft, hard = resource.getrlimit(resource.RLIMIT_CORE)\n@@ -46,9 +43,9 @@ def check_rlimit_core():\n set ALLOW_NONZERO_RLIMIT_CORE to ignore this warning\n \"\"\" % (soft))\n \n-@only_on(('windows'))\n+@only_on(['win32'])\n def check_console_code_page():\n-    if \"65001\" not in subprocess.check_output(['cmd', '/c', 'chcp']):\n+    if '65001' not in subprocess.check_output(['cmd', '/c', 'chcp']):\n         sys.stderr.write('Warning: the console output code page is not UTF-8, \\\n some tests may fail. Use `cmd /c \"chcp 65001\"` to setup UTF-8 code page.\\n')\n "}]}