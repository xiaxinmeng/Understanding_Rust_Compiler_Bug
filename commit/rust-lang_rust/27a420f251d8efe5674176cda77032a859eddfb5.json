{"sha": "27a420f251d8efe5674176cda77032a859eddfb5", "node_id": "C_kwDOAAsO6NoAKDI3YTQyMGYyNTFkOGVmZTU2NzQxNzZjZGE3NzAzMmE4NTllZGRmYjU", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-20T21:23:03Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-09-20T21:23:03Z"}, "message": "Unify generation of section on \"All items\" page with all other pages", "tree": {"sha": "3c3296f79e0a4f8d4962b940bbf7c70c4290460f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c3296f79e0a4f8d4962b940bbf7c70c4290460f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27a420f251d8efe5674176cda77032a859eddfb5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27a420f251d8efe5674176cda77032a859eddfb5", "html_url": "https://github.com/rust-lang/rust/commit/27a420f251d8efe5674176cda77032a859eddfb5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27a420f251d8efe5674176cda77032a859eddfb5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a3109e8b7a30f18ef8a98308b5e9adadf2e40a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/4a3109e8b7a30f18ef8a98308b5e9adadf2e40a9", "html_url": "https://github.com/rust-lang/rust/commit/4a3109e8b7a30f18ef8a98308b5e9adadf2e40a9"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "7e5e4df43d2918972013d4a2d35346b42053861c", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/27a420f251d8efe5674176cda77032a859eddfb5/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27a420f251d8efe5674176cda77032a859eddfb5/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=27a420f251d8efe5674176cda77032a859eddfb5", "patch": "@@ -341,15 +341,15 @@ impl AllTypes {\n     }\n \n     fn print(self, f: &mut Buffer) {\n-        fn print_entries(f: &mut Buffer, e: &FxHashSet<ItemEntry>, title: &str) {\n+        fn print_entries(f: &mut Buffer, e: &FxHashSet<ItemEntry>, kind: ItemSection) {\n             if !e.is_empty() {\n                 let mut e: Vec<&ItemEntry> = e.iter().collect();\n                 e.sort();\n                 write!(\n                     f,\n-                    \"<h3 id=\\\"{}\\\">{}</h3><ul class=\\\"all-items\\\">\",\n-                    title.replace(' ', \"-\"), // IDs cannot contain whitespaces.\n-                    title\n+                    \"<h3 id=\\\"{id}\\\">{title}</h3><ul class=\\\"all-items\\\">\",\n+                    id = kind.id(),\n+                    title = kind.name(),\n                 );\n \n                 for s in e.iter() {\n@@ -367,20 +367,20 @@ impl AllTypes {\n         );\n         // Note: print_entries does not escape the title, because we know the current set of titles\n         // doesn't require escaping.\n-        print_entries(f, &self.structs, \"Structs\");\n-        print_entries(f, &self.enums, \"Enums\");\n-        print_entries(f, &self.unions, \"Unions\");\n-        print_entries(f, &self.primitives, \"Primitives\");\n-        print_entries(f, &self.traits, \"Traits\");\n-        print_entries(f, &self.macros, \"Macros\");\n-        print_entries(f, &self.attributes, \"Attribute Macros\");\n-        print_entries(f, &self.derives, \"Derive Macros\");\n-        print_entries(f, &self.functions, \"Functions\");\n-        print_entries(f, &self.typedefs, \"Typedefs\");\n-        print_entries(f, &self.trait_aliases, \"Trait Aliases\");\n-        print_entries(f, &self.opaque_tys, \"Opaque Types\");\n-        print_entries(f, &self.statics, \"Statics\");\n-        print_entries(f, &self.constants, \"Constants\");\n+        print_entries(f, &self.structs, ItemSection::Structs);\n+        print_entries(f, &self.enums, ItemSection::Enums);\n+        print_entries(f, &self.unions, ItemSection::Unions);\n+        print_entries(f, &self.primitives, ItemSection::PrimitiveTypes);\n+        print_entries(f, &self.traits, ItemSection::Traits);\n+        print_entries(f, &self.macros, ItemSection::Macros);\n+        print_entries(f, &self.attributes, ItemSection::AttributeMacros);\n+        print_entries(f, &self.derives, ItemSection::DeriveMacros);\n+        print_entries(f, &self.functions, ItemSection::Functions);\n+        print_entries(f, &self.typedefs, ItemSection::TypeDefinitions);\n+        print_entries(f, &self.trait_aliases, ItemSection::TraitAliases);\n+        print_entries(f, &self.opaque_tys, ItemSection::OpaqueTypes);\n+        print_entries(f, &self.statics, ItemSection::Statics);\n+        print_entries(f, &self.constants, ItemSection::Constants);\n     }\n }\n "}]}