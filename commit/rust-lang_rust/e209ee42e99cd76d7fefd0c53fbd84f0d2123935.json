{"sha": "e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUyMDllZTQyZTk5Y2Q3NmQ3ZmVmZDBjNTNmYmQ4NGYwZDIxMjM5MzU=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-10-30T17:56:40Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-11-12T10:06:11Z"}, "message": "ci: extract collecting cpu stats into a script", "tree": {"sha": "5a97c755ead3f91a01b9cd26642efa7ccb260ef5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a97c755ead3f91a01b9cd26642efa7ccb260ef5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl3KhBkACgkQPgar6Auq\n8Zwdxw/+Pg1ybQkeTh3KL25qvVIFYIhzZmAmhqx1RMagE/f+DYZPZeVlFm1oFZNY\nBAI22fkLqQCdYEI/7EFWOg7YaoLSMdxVsIDdaRF6dxHYCz4uj8S7OquPHxT3wQgy\n8VWkqdE0tlPYaWrWr3nalhuOGlZ603jykVNrMs9AzsD1OnHQhrRe3F/agjfPenBu\nBhmZun/pWYDs9pByAF2LQozCIkDJmW1UDRDCVIKuwNqtfo4sWrKOzCiMJ+k7dN2I\nyn3HLec57J7FzlCAdNEg06JrbMUchH5g+LaJa+GH9t9nkLdhSuZa6PeAOCf7YTVE\nDpi875rdHhL1qNhsMnHraUJPM+6iRm+MR+0yPs/7q+W20m5wxPxKsg6eJWjrnpt3\n4RCbQ+NDSoN547KdL0Qf9WAZrocN1HfwJtH4y41m9cprbjPRSAYZoKvIDwLzf7Zz\n61lh0TiFwl30h4IGkxuB85pjy9duk1r60gCuNYF8JNsc/w4wIZ05o+Wrb6C1v4EC\nG/HtSYG3WP8kO77XB1Q3NMoQzIE+DFllFSnGhWTvZACb5lAo5xvCORAIEIAQwyCK\nIAzM5HLmYFmXa2us1V9H9/esjyUTImFSMyiooy4TS+jG2jOmlV32rs+FvE4jQ6vU\n5YhrrUyMYcsDh4TIYgv1RtarU9hJEFSqvNGH6IMfOCHryMiy79I=\n=i4+K\n-----END PGP SIGNATURE-----", "payload": "tree 5a97c755ead3f91a01b9cd26642efa7ccb260ef5\nparent d623c56f4c2eab00a9cb5ba12e9e708430945f1a\nauthor Pietro Albini <pietro@pietroalbini.org> 1572458200 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1573553171 +0100\n\nci: extract collecting cpu stats into a script\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "html_url": "https://github.com/rust-lang/rust/commit/e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e209ee42e99cd76d7fefd0c53fbd84f0d2123935/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d623c56f4c2eab00a9cb5ba12e9e708430945f1a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d623c56f4c2eab00a9cb5ba12e9e708430945f1a", "html_url": "https://github.com/rust-lang/rust/commit/d623c56f4c2eab00a9cb5ba12e9e708430945f1a"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "e856207b17d4993b1b4dbf64e3b5b809ae6ae7a3", "filename": "src/ci/azure-pipelines/steps/run.yml", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e209ee42e99cd76d7fefd0c53fbd84f0d2123935/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e209ee42e99cd76d7fefd0c53fbd84f0d2123935/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml?ref=e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "patch": "@@ -31,11 +31,8 @@ steps:\n - bash: src/ci/scripts/should-skip-this.sh\n   displayName: Decide whether to run this job\n \n-# Spawn a background process to collect CPU usage statistics which we'll upload\n-# at the end of the build. See the comments in the script here for more\n-# information.\n-- bash: python src/ci/cpu-usage-over-time.py &> cpu-usage.csv &\n-  displayName: \"Collect CPU-usage statistics in the background\"\n+- bash: src/ci/scripts/collect-cpu-stats.sh\n+  displayName: Collect CPU-usage statistics in the background\n \n - bash: src/ci/scripts/dump-environment.sh\n   displayName: Show the current environment"}, {"sha": "08065431f981650e7b000281c288220e80f9d4c6", "filename": "src/ci/scripts/collect-cpu-stats.sh", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/e209ee42e99cd76d7fefd0c53fbd84f0d2123935/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh", "raw_url": "https://github.com/rust-lang/rust/raw/e209ee42e99cd76d7fefd0c53fbd84f0d2123935/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fcollect-cpu-stats.sh?ref=e209ee42e99cd76d7fefd0c53fbd84f0d2123935", "patch": "@@ -0,0 +1,9 @@\n+#!/bin/bash\n+# Spawn a background process to collect CPU usage statistics which we'll upload\n+# at the end of the build. See the comments in the script here for more\n+# information.\n+\n+set -euo pipefail\n+IFS=$'\\n\\t'\n+\n+python src/ci/cpu-usage-over-time.py &> cpu-usage.csv &"}]}