{"sha": "81c4d2371aab4636c56ac5d61d391ae195d8bb0a", "node_id": "C_kwDOAAsO6NoAKDgxYzRkMjM3MWFhYjQ2MzZjNTZhYzVkNjFkMzkxYWUxOTVkOGJiMGE", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-02T14:00:34Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-04T14:26:54Z"}, "message": "Restructure visit_ty in a more clear way", "tree": {"sha": "f4ed7bfcff3e6144ee8769a9b6c10c59b6016a3e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f4ed7bfcff3e6144ee8769a9b6c10c59b6016a3e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81c4d2371aab4636c56ac5d61d391ae195d8bb0a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmLr1y4ACgkQgTGiTgx5\n768M+hAAmjFtBrfEkbmEpguxB30u9sWvTxjf25gBV0wwm/PrL3SRqCOgbaul2Iex\n+YWWVLRyx6qMluOv7aPAsQYYgCL5AJ/R60xi6hzUiLzjEeZ3/yzf2UIAu/AALRSm\nlBd7rVcndoF5rn+Mk4fTN1C64b1Wg/r9N/j7Lvr2oAKBBWYqNawDGtXFSamwjRb8\ng9jfPN2j5o3S8xumphMB1RtLZknycK3yEd7ZxkmDwTe/iKardlBARRQyFFzJ4/KJ\neCfULGtSubYFX7ZZP0mflQaoeEgNG5ktppJ1P+IrtFJCk/Pu50Ek/X1uMUVhfxlz\nlPQXlZUC6D2OnrE3oYYSbHXsvag2mnpCjLDsnoAoh9+JmuwzA/NozLLWTMwvAIBr\nOjoWVcHbu9rC0l+0qbAwjBughAnPOA8hraXa14k5fppLRox+MqW/fz/6QJ01FJdU\nK1WduEf+STu6uAd+BjV5BZhecsTexWgNLCPzRxnyeVIx9VIcWbiCzSv8YoqRHK5u\ny38iSv5RDX1FJO650kLo2IvADPNwCrO5OOrxVTiWugKElnF/nZygEK63g3o4Mxv8\nOcMFAFUK3oKsxaFrPujuViNWEs5qGqfKFp7EMi2M8IwpNgfb4GnyP8JbwW6D/rmV\niLheW+xsrcaWZh1rhcmCGx3hyioi508vkPPv35E6/mSNNlGP3xs=\n=537R\n-----END PGP SIGNATURE-----", "payload": "tree f4ed7bfcff3e6144ee8769a9b6c10c59b6016a3e\nparent 05b989e16e7c6a7d4364f33f2612e540a50b1a27\nauthor Santiago Pastorino <spastorino@gmail.com> 1659448834 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1659623214 -0300\n\nRestructure visit_ty in a more clear way\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81c4d2371aab4636c56ac5d61d391ae195d8bb0a", "html_url": "https://github.com/rust-lang/rust/commit/81c4d2371aab4636c56ac5d61d391ae195d8bb0a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81c4d2371aab4636c56ac5d61d391ae195d8bb0a/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05b989e16e7c6a7d4364f33f2612e540a50b1a27", "url": "https://api.github.com/repos/rust-lang/rust/commits/05b989e16e7c6a7d4364f33f2612e540a50b1a27", "html_url": "https://github.com/rust-lang/rust/commit/05b989e16e7c6a7d4364f33f2612e540a50b1a27"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "586436240f124d4fd677140e6e1a31d6c5110deb", "filename": "compiler/rustc_ast_lowering/src/lifetime_collector.rs", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/81c4d2371aab4636c56ac5d61d391ae195d8bb0a/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c4d2371aab4636c56ac5d61d391ae195d8bb0a/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flifetime_collector.rs?ref=81c4d2371aab4636c56ac5d61d391ae195d8bb0a", "patch": "@@ -38,12 +38,15 @@ impl<'this, 'ast: 'this> Visitor<'ast> for LifetimeCollectVisitor<'this, 'ast> {\n     }\n \n     fn visit_ty(&mut self, t: &'ast Ty) {\n-        if let TyKind::BareFn(_) = t.kind {\n-            self.current_binders.push(t.id);\n-        }\n-        visit::walk_ty(self, t);\n-        if let TyKind::BareFn(_) = t.kind {\n-            self.current_binders.pop();\n+        match t.kind {\n+            TyKind::BareFn(_) => {\n+                self.current_binders.push(t.id);\n+                visit::walk_ty(self, t);\n+                self.current_binders.pop();\n+            }\n+            _ => {\n+                visit::walk_ty(self, t);\n+            }\n         }\n     }\n }"}]}