{"sha": "1965a156f0fa0f3e1528af7deedd34c21dd5a1e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5NjVhMTU2ZjBmYTBmM2UxNTI4YWY3ZGVlZGQzNGMyMWRkNWExZTg=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-05-03T23:22:00Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-05-03T23:22:00Z"}, "message": "Attempt to use more portable python", "tree": {"sha": "6c3d04f3a2d651da695bf92f14bc416a3e8d3c61", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c3d04f3a2d651da695bf92f14bc416a3e8d3c61"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8", "html_url": "https://github.com/rust-lang/rust/commit/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f52ab52c19154f63f09d9f3d066af61264b1600", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f52ab52c19154f63f09d9f3d066af61264b1600", "html_url": "https://github.com/rust-lang/rust/commit/4f52ab52c19154f63f09d9f3d066af61264b1600"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "f1a85189e2bb6ef374d64a24c2111b4782032f88", "filename": "src/etc/get-snapshot.py", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8/src%2Fetc%2Fget-snapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/1965a156f0fa0f3e1528af7deedd34c21dd5a1e8/src%2Fetc%2Fget-snapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fget-snapshot.py?ref=1965a156f0fa0f3e1528af7deedd34c21dd5a1e8", "patch": "@@ -35,24 +35,24 @@ def determine_curr_snapshot_for_platform():\n   date = None\n   rev = None\n \n-  with open(snapshotfile) as f:\n-    for line in f.xreadlines():\n-      i += 1\n-      parsed = parse_line(i, line)\n-      if (not parsed): continue\n-\n-      if parsed[\"type\"] == \"transition\":\n-        raise Exception(\"working on a transition, not updating stage0\")\n-\n-      if found_snap and parsed[\"type\"] == \"file\":\n-        if parsed[\"platform\"] == platform:\n-          hsh = parsed[\"hash\"]\n-          found_file = True\n-          break;\n-      elif parsed[\"type\"] == \"snapshot\":\n-        date = parsed[\"date\"]\n-        rev = parsed[\"rev\"]\n-        found_snap = True\n+  f = open(snapshotfile)\n+  for line in f.readlines():\n+    i += 1\n+    parsed = parse_line(i, line)\n+    if (not parsed): continue\n+\n+    if parsed[\"type\"] == \"transition\":\n+      raise Exception(\"working on a transition, not updating stage0\")\n+\n+    if found_snap and parsed[\"type\"] == \"file\":\n+      if parsed[\"platform\"] == platform:\n+        hsh = parsed[\"hash\"]\n+        found_file = True\n+        break;\n+    elif parsed[\"type\"] == \"snapshot\":\n+      date = parsed[\"date\"]\n+      rev = parsed[\"rev\"]\n+      found_snap = True\n \n   if not found_snap:\n     raise Exception(\"no snapshot entries in file\")"}]}