{"sha": "54dc7cebce9e983a72ee06657e931ba34b373ea8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0ZGM3Y2ViY2U5ZTk4M2E3MmVlMDY2NTdlOTMxYmEzNGIzNzNlYTg=", "commit": {"author": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2021-04-07T19:49:33Z"}, "committer": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2021-04-07T20:09:56Z"}, "message": "Remove the insta-stable `cfg(wasm)`\n\nThe addition of `cfg(wasm)` was an oversight on my end that has a number\nof downsides:\n\n* It was introduced as an insta-stable addition, forgoing the usual\n  staging mechanism we use for potentially far-reaching changes;\n* It is a breaking change for people who are using `--cfg wasm` either\n  directly or via cargo for other purposes;\n* It is not entirely clear if a bare `wasm` cfg is a right option or\n  whether `wasm` family of targets are special enough to warrant\n  special-casing these targets specifically.\n\nAs for the last point, there appears to be a fair amount of support for\nreducing the boilerplate in specifying architectures from the same\nfamily, while ignoring their pointer width. The suggested way forward\nwould be to propose such a change as a separate RFC as it is potentially\na quite contentious addition.", "tree": {"sha": "f3b177c403a71bfae64b5436797fea41e080fa4e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3b177c403a71bfae64b5436797fea41e080fa4e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54dc7cebce9e983a72ee06657e931ba34b373ea8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54dc7cebce9e983a72ee06657e931ba34b373ea8", "html_url": "https://github.com/rust-lang/rust/commit/54dc7cebce9e983a72ee06657e931ba34b373ea8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54dc7cebce9e983a72ee06657e931ba34b373ea8/comments", "author": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9cdcccfa8321363999a43ee30a18b3aadbc20de", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9cdcccfa8321363999a43ee30a18b3aadbc20de", "html_url": "https://github.com/rust-lang/rust/commit/e9cdcccfa8321363999a43ee30a18b3aadbc20de"}], "stats": {"total": 5, "additions": 0, "deletions": 5}, "files": [{"sha": "75bd8880b3460e68525f1edd520ce76063409207", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/54dc7cebce9e983a72ee06657e931ba34b373ea8/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54dc7cebce9e983a72ee06657e931ba34b373ea8/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=54dc7cebce9e983a72ee06657e931ba34b373ea8", "patch": "@@ -822,9 +822,6 @@ pub fn default_configuration(sess: &Session) -> CrateConfig {\n         }\n     }\n     ret.insert((sym::target_arch, Some(Symbol::intern(arch))));\n-    if sess.target.is_like_wasm {\n-        ret.insert((sym::wasm, None));\n-    }\n     ret.insert((sym::target_endian, Some(Symbol::intern(end.as_str()))));\n     ret.insert((sym::target_pointer_width, Some(Symbol::intern(&wordsz))));\n     ret.insert((sym::target_env, Some(Symbol::intern(env))));"}, {"sha": "03fe5bcd2971b876407c95ff8853a1f0054b8a60", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/54dc7cebce9e983a72ee06657e931ba34b373ea8/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54dc7cebce9e983a72ee06657e931ba34b373ea8/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=54dc7cebce9e983a72ee06657e931ba34b373ea8", "patch": "@@ -1295,7 +1295,6 @@ symbols! {\n         vreg,\n         vreg_low16,\n         warn,\n-        wasm,\n         wasm_import_module,\n         wasm_target_feature,\n         while_let,"}, {"sha": "592aefb6a4b015a044e7605e7f8b422c0116059d", "filename": "src/librustdoc/clean/cfg.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/54dc7cebce9e983a72ee06657e931ba34b373ea8/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54dc7cebce9e983a72ee06657e931ba34b373ea8/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fcfg.rs?ref=54dc7cebce9e983a72ee06657e931ba34b373ea8", "patch": "@@ -487,7 +487,6 @@ impl<'a> fmt::Display for Display<'a> {\n                         \"windows\" => \"Windows\",\n                         _ => \"\",\n                     },\n-                    (sym::wasm, None) => \"WebAssembly\",\n                     (sym::target_arch, Some(arch)) => match &*arch.as_str() {\n                         \"aarch64\" => \"AArch64\",\n                         \"arm\" => \"ARM\","}]}