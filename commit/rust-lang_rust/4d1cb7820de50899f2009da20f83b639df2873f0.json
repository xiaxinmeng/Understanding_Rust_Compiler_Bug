{"sha": "4d1cb7820de50899f2009da20f83b639df2873f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkMWNiNzgyMGRlNTA4OTlmMjAwOWRhMjBmODNiNjM5ZGYyODczZjA=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2014-11-26T21:48:06Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2014-11-28T15:06:08Z"}, "message": "reword faq to remove reference to indexing strings\n\nFixes #19344", "tree": {"sha": "0494b6be13765bfa725addca9eb8d8645d25478e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0494b6be13765bfa725addca9eb8d8645d25478e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d1cb7820de50899f2009da20f83b639df2873f0", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d1cb7820de50899f2009da20f83b639df2873f0", "html_url": "https://github.com/rust-lang/rust/commit/4d1cb7820de50899f2009da20f83b639df2873f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d1cb7820de50899f2009da20f83b639df2873f0/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f33d879a7094bce7e16345dcc2efa85da6f05261", "url": "https://api.github.com/repos/rust-lang/rust/commits/f33d879a7094bce7e16345dcc2efa85da6f05261", "html_url": "https://github.com/rust-lang/rust/commit/f33d879a7094bce7e16345dcc2efa85da6f05261"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "62faecede55392e7be0c59afc4e7a613e91f6647", "filename": "src/doc/complement-lang-faq.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4d1cb7820de50899f2009da20f83b639df2873f0/src%2Fdoc%2Fcomplement-lang-faq.md", "raw_url": "https://github.com/rust-lang/rust/raw/4d1cb7820de50899f2009da20f83b639df2873f0/src%2Fdoc%2Fcomplement-lang-faq.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fcomplement-lang-faq.md?ref=4d1cb7820de50899f2009da20f83b639df2873f0", "patch": "@@ -108,7 +108,7 @@ The `str` type is UTF-8 because we observe more text in the wild in this encodin\n \n This does mean that indexed access to a Unicode codepoint inside a `str` value is an O(n) operation. On the one hand, this is clearly undesirable; on the other hand, this problem is full of trade-offs and we'd like to point a few important qualifications:\n \n-* Scanning a `str` for ASCII-range codepoints can still be done safely octet-at-a-time, with each indexing operation pulling out a `u8` costing only O(1) and producing a value that can be cast and compared to an ASCII-range `char`. So if you're (say) line-breaking on `'\\n'`, octet-based treatment still works. UTF8 was well-designed this way.\n+* Scanning a `str` for ASCII-range codepoints can still be done safely octet-at-a-time. If you use `.as_bytes()`, pulling out a `u8` costs only O(1) and produces a value that can be cast and compared to an ASCII-range `char`. So if you're (say) line-breaking on `'\\n'`, octet-based treatment still works. UTF8 was well-designed this way.\n * Most \"character oriented\" operations on text only work under very restricted language assumptions sets such as \"ASCII-range codepoints only\". Outside ASCII-range, you tend to have to use a complex (non-constant-time) algorithm for determining linguistic-unit (glyph, word, paragraph) boundaries anyways. We recommend using an \"honest\" linguistically-aware, Unicode-approved algorithm.\n * The `char` type is UCS4. If you honestly need to do a codepoint-at-a-time algorithm, it's trivial to write a `type wstr = [char]`, and unpack a `str` into it in a single pass, then work with the `wstr`. In other words: the fact that the language is not \"decoding to UCS4 by default\" shouldn't stop you from decoding (or re-encoding any other way) if you need to work with that encoding.\n "}]}