{"sha": "22b75c4ceaefbaf26e63540b3e2d6705375c043c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyYjc1YzRjZWFlZmJhZjI2ZTYzNTQwYjNlMmQ2NzA1Mzc1YzA0M2M=", "commit": {"author": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2020-05-10T15:08:54Z"}, "committer": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2020-05-10T15:25:51Z"}, "message": "Highlight the name in macro declarations", "tree": {"sha": "cac4170b29dcb99b5103376b20c430182593ad35", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cac4170b29dcb99b5103376b20c430182593ad35"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/22b75c4ceaefbaf26e63540b3e2d6705375c043c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/22b75c4ceaefbaf26e63540b3e2d6705375c043c", "html_url": "https://github.com/rust-lang/rust/commit/22b75c4ceaefbaf26e63540b3e2d6705375c043c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/22b75c4ceaefbaf26e63540b3e2d6705375c043c/comments", "author": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11c0a5bb60f9377526a588c11c68d5471ae46aa3", "url": "https://api.github.com/repos/rust-lang/rust/commits/11c0a5bb60f9377526a588c11c68d5471ae46aa3", "html_url": "https://github.com/rust-lang/rust/commit/11c0a5bb60f9377526a588c11c68d5471ae46aa3"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "752b487e82fa76530f534f5cdb66f8763b169f76", "filename": "crates/ra_ide/src/snapshots/highlight_strings.html", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_strings.html", "raw_url": "https://github.com/rust-lang/rust/raw/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_strings.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlight_strings.html?ref=22b75c4ceaefbaf26e63540b3e2d6705375c043c", "patch": "@@ -27,13 +27,13 @@\n .keyword.unsafe     { color: #BC8383; font-weight: bold; }\n .control            { font-style: italic; }\n </style>\n-<pre><code><span class=\"macro\">macro_rules!</span> println {\n+<pre><code><span class=\"macro\">macro_rules!</span> <span class=\"macro declaration\">println</span> {\n     ($($arg:tt)*) =&gt; ({\n         $<span class=\"keyword\">crate</span>::io::_print($<span class=\"keyword\">crate</span>::format_args_nl!($($arg)*));\n     })\n }\n #[rustc_builtin_macro]\n-<span class=\"macro\">macro_rules!</span> format_args_nl {\n+<span class=\"macro\">macro_rules!</span> <span class=\"macro declaration\">format_args_nl</span> {\n     ($fmt:expr) =&gt; {{ <span class=\"comment\">/* compiler built-in */</span> }};\n     ($fmt:expr, $($args:tt)*) =&gt; {{ <span class=\"comment\">/* compiler built-in */</span> }};\n }"}, {"sha": "4c27aade40255f703f0f65da1510fd5a7bba04f6", "filename": "crates/ra_ide/src/snapshots/highlighting.html", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsnapshots%2Fhighlighting.html?ref=22b75c4ceaefbaf26e63540b3e2d6705375c043c", "patch": "@@ -33,11 +33,13 @@\n     <span class=\"keyword\">pub</span> <span class=\"field declaration\">y</span>: <span class=\"builtin_type\">i32</span>,\n }\n \n+<span class=\"keyword\">static</span> <span class=\"keyword\">mut</span> <span class=\"static declaration mutable\">STATIC_MUT</span>: <span class=\"builtin_type\">i32</span> = <span class=\"numeric_literal\">0</span>;\n+\n <span class=\"keyword\">fn</span> <span class=\"function declaration\">foo</span>&lt;<span class=\"lifetime declaration\">'a</span>, <span class=\"type_param declaration\">T</span>&gt;() -&gt; <span class=\"type_param\">T</span> {\n     <span class=\"function\">foo</span>::&lt;<span class=\"lifetime\">'a</span>, <span class=\"builtin_type\">i32</span>&gt;()\n }\n \n-<span class=\"macro\">macro_rules!</span> def_fn {\n+<span class=\"macro\">macro_rules!</span> <span class=\"macro declaration\">def_fn</span> {\n     ($($tt:tt)*) =&gt; {$($tt)*}\n }\n "}, {"sha": "d53a39f57b526963ca12ecfc3340411920f3fb26", "filename": "crates/ra_ide/src/syntax_highlighting.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22b75c4ceaefbaf26e63540b3e2d6705375c043c/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fsyntax_highlighting.rs?ref=22b75c4ceaefbaf26e63540b3e2d6705375c043c", "patch": "@@ -167,6 +167,19 @@ pub(crate) fn highlight(\n                         binding_hash: None,\n                     });\n                 }\n+                if let Some(name) = mc.is_macro_rules() {\n+                    if let Some((highlight, binding_hash)) = highlight_element(\n+                        &sema,\n+                        &mut bindings_shadow_count,\n+                        name.syntax().clone().into(),\n+                    ) {\n+                        stack.add(HighlightedRange {\n+                            range: name.syntax().text_range(),\n+                            highlight,\n+                            binding_hash,\n+                        });\n+                    }\n+                }\n                 continue;\n             }\n             WalkEvent::Leave(Some(mc)) => {"}]}