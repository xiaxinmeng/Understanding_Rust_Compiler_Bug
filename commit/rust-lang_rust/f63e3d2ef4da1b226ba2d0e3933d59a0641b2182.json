{"sha": "f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2M2UzZDJlZjRkYTFiMjI2YmEyZDBlMzkzM2Q1OWEwNjQxYjIxODI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-01-18T21:56:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-01-18T21:56:42Z"}, "message": "Rollup merge of #57635 - euclio:path-separators, r=michaelwoerister\n\nuse structured macro and path resolve suggestions", "tree": {"sha": "2b8e835d26e26e3fec2faaf6c286c2b5f100ab28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b8e835d26e26e3fec2faaf6c286c2b5f100ab28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcQkuaCRBK7hj4Ov3rIwAAdHIIADsPassl3zimjJWdci1uNNao\nQO8G2r8NjcPsaFICH/wirp1yrH6kATnFGJMP2rgTfu8zTc5VkhTNYzgGjyBuiikq\nYqSJqa963QRy+CHz3LDudJ5yPrFcUiK9K+/M767KCvX61T1HXvPqkRfwKjXHoM9/\nDlXP4cjeFaAS243dll9a/fZSS5Jd/9scnIWbYlifWcj/WLcyGrZ1ySF72jkzPubR\nYxoTZHUh9oZt1Yirr5KMeY2LvqPe1C/Gk4T924jYrhJb9oEJTZRqlTozcEWFFnf/\n1EOciaQ7QHRCEfmV8LqP1FdD+sTvqkvF2FHeOYdMz8G1InKEvMlyGaFrkijfBeM=\n=VySp\n-----END PGP SIGNATURE-----\n", "payload": "tree 2b8e835d26e26e3fec2faaf6c286c2b5f100ab28\nparent 49c74e4c859a1f24c03ff4cf983802dffca7bd31\nparent 93b55365b59767f87ac2a2e42876ad46210a0e55\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1547848602 +0100\ncommitter GitHub <noreply@github.com> 1547848602 +0100\n\nRollup merge of #57635 - euclio:path-separators, r=michaelwoerister\n\nuse structured macro and path resolve suggestions\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "html_url": "https://github.com/rust-lang/rust/commit/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49c74e4c859a1f24c03ff4cf983802dffca7bd31", "url": "https://api.github.com/repos/rust-lang/rust/commits/49c74e4c859a1f24c03ff4cf983802dffca7bd31", "html_url": "https://github.com/rust-lang/rust/commit/49c74e4c859a1f24c03ff4cf983802dffca7bd31"}, {"sha": "93b55365b59767f87ac2a2e42876ad46210a0e55", "url": "https://api.github.com/repos/rust-lang/rust/commits/93b55365b59767f87ac2a2e42876ad46210a0e55", "html_url": "https://github.com/rust-lang/rust/commit/93b55365b59767f87ac2a2e42876ad46210a0e55"}], "stats": {"total": 64, "additions": 44, "deletions": 20}, "files": [{"sha": "c11a2cd01c167e375d198eaf5381b10c469ab728", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 19, "deletions": 5, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "patch": "@@ -3318,7 +3318,12 @@ impl<'a> Resolver<'a> {\n             if let Some(def) = def {\n                 match (def, source) {\n                     (Def::Macro(..), _) => {\n-                        err.span_label(span, format!(\"did you mean `{}!(...)`?\", path_str));\n+                        err.span_suggestion_with_applicability(\n+                            span,\n+                            \"use `!` to invoke the macro\",\n+                            format!(\"{}!\", path_str),\n+                            Applicability::MaybeIncorrect,\n+                        );\n                         return (err, candidates);\n                     }\n                     (Def::TyAlias(..), PathSource::Trait(_)) => {\n@@ -3330,13 +3335,22 @@ impl<'a> Resolver<'a> {\n                     }\n                     (Def::Mod(..), PathSource::Expr(Some(parent))) => match parent.node {\n                         ExprKind::Field(_, ident) => {\n-                            err.span_label(parent.span, format!(\"did you mean `{}::{}`?\",\n-                                                                 path_str, ident));\n+                            err.span_suggestion_with_applicability(\n+                                parent.span,\n+                                \"use the path separator to refer to an item\",\n+                                format!(\"{}::{}\", path_str, ident),\n+                                Applicability::MaybeIncorrect,\n+                            );\n                             return (err, candidates);\n                         }\n                         ExprKind::MethodCall(ref segment, ..) => {\n-                            err.span_label(parent.span, format!(\"did you mean `{}::{}(...)`?\",\n-                                                                 path_str, segment.ident));\n+                            let span = parent.span.with_hi(segment.ident.span.hi());\n+                            err.span_suggestion_with_applicability(\n+                                span,\n+                                \"use the path separator to refer to an item\",\n+                                format!(\"{}::{}\", path_str, segment.ident),\n+                                Applicability::MaybeIncorrect,\n+                            );\n                             return (err, candidates);\n                         }\n                         _ => {}"}, {"sha": "ebe3c36f21eb1f83d81e824157e98ab42df99b32", "filename": "src/test/ui/resolve/resolve-hint-macro.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Fresolve%2Fresolve-hint-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Fresolve%2Fresolve-hint-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fresolve-hint-macro.stderr?ref=f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "patch": "@@ -2,7 +2,7 @@ error[E0423]: expected function, found macro `assert`\n   --> $DIR/resolve-hint-macro.rs:2:5\n    |\n LL |     assert(true);\n-   |     ^^^^^^ did you mean `assert!(...)`?\n+   |     ^^^^^^ help: use `!` to invoke the macro: `assert!`\n \n error: aborting due to previous error\n "}, {"sha": "b7b158ce7efa6e4e5778021fbaabc11a8e6265a4", "filename": "src/test/ui/resolve/suggest-path-instead-of-mod-dot-item.stderr", "status": "modified", "additions": 23, "deletions": 13, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Fresolve%2Fsuggest-path-instead-of-mod-dot-item.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Fresolve%2Fsuggest-path-instead-of-mod-dot-item.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fsuggest-path-instead-of-mod-dot-item.stderr?ref=f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "patch": "@@ -4,40 +4,45 @@ error[E0423]: expected value, found module `a`\n LL |     a.I\n    |     ^--\n    |     |\n-   |     did you mean `a::I`?\n+   |     help: use the path separator to refer to an item: `a::I`\n \n error[E0423]: expected value, found module `a`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:22:5\n    |\n LL |     a.g()\n-   |     ^----\n+   |     ^--\n    |     |\n-   |     did you mean `a::g(...)`?\n+   |     help: use the path separator to refer to an item: `a::g`\n \n error[E0423]: expected value, found module `a`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:27:5\n    |\n LL |     a.b.J\n    |     ^--\n    |     |\n-   |     did you mean `a::b`?\n+   |     help: use the path separator to refer to an item: `a::b`\n \n error[E0423]: expected value, found module `a::b`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:32:5\n    |\n LL |     a::b.J\n-   |     ^^^---\n-   |     |  |\n-   |     |  help: a constant with a similar name exists: `I`\n-   |     did you mean `a::b::J`?\n+   |     ^^^^\n+help: a constant with a similar name exists\n+   |\n+LL |     a::I.J\n+   |        ^\n+help: use the path separator to refer to an item\n+   |\n+LL |     a::b::J\n+   |\n \n error[E0423]: expected value, found module `a`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:37:5\n    |\n LL |     a.b.f();\n    |     ^--\n    |     |\n-   |     did you mean `a::b`?\n+   |     help: use the path separator to refer to an item: `a::b`\n \n error[E0423]: expected value, found module `a::b`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:40:12\n@@ -51,10 +56,15 @@ error[E0423]: expected value, found module `a::b`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:45:5\n    |\n LL |     a::b.f()\n-   |     ^^^-----\n-   |     |  |\n-   |     |  help: a constant with a similar name exists: `I`\n-   |     did you mean `a::b::f(...)`?\n+   |     ^^^^\n+help: a constant with a similar name exists\n+   |\n+LL |     a::I.f()\n+   |        ^\n+help: use the path separator to refer to an item\n+   |\n+LL |     a::b::f()\n+   |     ^^^^^^^\n \n error[E0423]: expected value, found module `a::b`\n   --> $DIR/suggest-path-instead-of-mod-dot-item.rs:50:5"}, {"sha": "a7b81060d3dc6a3e1b4746f56bf7396f846f2718", "filename": "src/test/ui/try-block/try-block-in-edition2015.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-in-edition2015.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f63e3d2ef4da1b226ba2d0e3933d59a0641b2182/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-in-edition2015.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-in-edition2015.stderr?ref=f63e3d2ef4da1b226ba2d0e3933d59a0641b2182", "patch": "@@ -15,7 +15,7 @@ error[E0574]: expected struct, variant or union type, found macro `try`\n   --> $DIR/try-block-in-edition2015.rs:4:33\n    |\n LL |     let try_result: Option<_> = try {\n-   |                                 ^^^ did you mean `try!(...)`?\n+   |                                 ^^^ help: use `!` to invoke the macro: `try!`\n \n error: aborting due to 2 previous errors\n "}]}