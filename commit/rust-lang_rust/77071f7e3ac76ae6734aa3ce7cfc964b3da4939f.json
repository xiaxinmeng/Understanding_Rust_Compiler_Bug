{"sha": "77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "node_id": "C_kwDOAAsO6NoAKDc3MDcxZjdlM2FjNzZhZTY3MzRhYTNjZTdjZmM5NjRiM2RhNDkzOWY", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-26T09:10:34Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-11-26T09:10:34Z"}, "message": "interpret: remove PartialOrd from a bunch of types that do not have or need a sensible order", "tree": {"sha": "4c4b837fa291f5973c25ee9a0f978301ece6f0e5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c4b837fa291f5973c25ee9a0f978301ece6f0e5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "html_url": "https://github.com/rust-lang/rust/commit/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8a2e491ebec34113563cf8683f6fec2646cebb1", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8a2e491ebec34113563cf8683f6fec2646cebb1", "html_url": "https://github.com/rust-lang/rust/commit/f8a2e491ebec34113563cf8683f6fec2646cebb1"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "5f911d5884a3353019f39ee10521beaab33bdcd1", "filename": "compiler/rustc_middle/src/mir/interpret/allocation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -36,7 +36,7 @@ pub use init_mask::{InitChunk, InitChunkIter};\n /// module provides higher-level access.\n // Note: for performance reasons when interning, some of the `Allocation` fields can be partially\n // hashed. (see the `Hash` impl below for more details), so the impl is not derived.\n-#[derive(Clone, Eq, PartialEq, PartialOrd, Ord, TyEncodable, TyDecodable)]\n+#[derive(Clone, Eq, PartialEq, TyEncodable, TyDecodable)]\n #[derive(HashStable)]\n pub struct Allocation<Prov: Provenance = AllocId, Extra = ()> {\n     /// The actual bytes of the allocation.\n@@ -108,7 +108,7 @@ impl hash::Hash for Allocation {\n /// Here things are different because only const allocations are interned. This\n /// means that both the inner type (`Allocation`) and the outer type\n /// (`ConstAllocation`) are used quite a bit.\n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash, HashStable)]\n+#[derive(Copy, Clone, PartialEq, Eq, Hash, HashStable)]\n #[rustc_pass_by_value]\n pub struct ConstAllocation<'tcx>(pub Interned<'tcx, Allocation>);\n "}, {"sha": "82e9a961a2bfb73a3b703917b29231d4588e6911", "filename": "compiler/rustc_middle/src/mir/interpret/allocation/init_mask.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Finit_mask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Finit_mask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Finit_mask.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -12,7 +12,7 @@ type Block = u64;\n /// is initialized. If it is `false` the byte is uninitialized.\n // Note: for performance reasons when interning, some of the `InitMask` fields can be partially\n // hashed. (see the `Hash` impl below for more details), so the impl is not derived.\n-#[derive(Clone, Debug, Eq, PartialEq, PartialOrd, Ord, TyEncodable, TyDecodable)]\n+#[derive(Clone, Debug, Eq, PartialEq, TyEncodable, TyDecodable)]\n #[derive(HashStable)]\n pub struct InitMask {\n     blocks: Vec<Block>,"}, {"sha": "ddd3f394358a311d059dae14a971f204308b71a6", "filename": "compiler/rustc_middle/src/mir/interpret/allocation/provenance_map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Fprovenance_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Fprovenance_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation%2Fprovenance_map.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -10,7 +10,7 @@ use super::{alloc_range, AllocError, AllocId, AllocRange, AllocResult, Provenanc\n use rustc_serialize::{Decodable, Decoder, Encodable, Encoder};\n \n /// Stores the provenance information of pointers stored in memory.\n-#[derive(Clone, PartialEq, Eq, PartialOrd, Ord, Hash, Debug)]\n+#[derive(Clone, PartialEq, Eq, Hash, Debug)]\n #[derive(HashStable)]\n pub struct ProvenanceMap<Prov = AllocId> {\n     /// Provenance in this map applies from the given offset for an entire pointer-size worth of"}, {"sha": "9c270ba1ec179939e18834ca0f773c9efbea4836", "filename": "compiler/rustc_middle/src/mir/interpret/pointer.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fpointer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fpointer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fpointer.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -173,7 +173,7 @@ impl Provenance for AllocId {\n /// Represents a pointer in the Miri engine.\n ///\n /// Pointers are \"tagged\" with provenance information; typically the `AllocId` they belong to.\n-#[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, TyEncodable, TyDecodable, Hash)]\n+#[derive(Copy, Clone, Eq, PartialEq, TyEncodable, TyDecodable, Hash)]\n #[derive(HashStable)]\n pub struct Pointer<Prov = AllocId> {\n     pub(super) offset: Size, // kept private to avoid accidental misinterpretation (meaning depends on `Prov` type)"}, {"sha": "48a137162952e34e3f5440471a97a59fe23522ba", "filename": "compiler/rustc_middle/src/mir/interpret/value.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fvalue.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -28,7 +28,7 @@ pub struct ConstAlloc<'tcx> {\n \n /// Represents a constant value in Rust. `Scalar` and `Slice` are optimizations for\n /// array length computations, enum discriminants and the pattern matching logic.\n-#[derive(Copy, Clone, Debug, Eq, PartialEq, PartialOrd, Ord, TyEncodable, TyDecodable, Hash)]\n+#[derive(Copy, Clone, Debug, Eq, PartialEq, TyEncodable, TyDecodable, Hash)]\n #[derive(HashStable, Lift)]\n pub enum ConstValue<'tcx> {\n     /// Used only for types with `layout::abi::Scalar` ABI.\n@@ -110,7 +110,7 @@ impl<'tcx> ConstValue<'tcx> {\n ///\n /// These variants would be private if there was a convenient way to achieve that in Rust.\n /// Do *not* match on a `Scalar`! Use the various `to_*` methods instead.\n-#[derive(Clone, Copy, Eq, PartialEq, Ord, PartialOrd, TyEncodable, TyDecodable, Hash)]\n+#[derive(Clone, Copy, Eq, PartialEq, TyEncodable, TyDecodable, Hash)]\n #[derive(HashStable)]\n pub enum Scalar<Prov = AllocId> {\n     /// The raw bytes of a simple value."}, {"sha": "ebfd3bca736cfb3914a97e9d4b9eb85ec20fb03c", "filename": "src/tools/miri/src/concurrency/data_race.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/src%2Ftools%2Fmiri%2Fsrc%2Fconcurrency%2Fdata_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77071f7e3ac76ae6734aa3ce7cfc964b3da4939f/src%2Ftools%2Fmiri%2Fsrc%2Fconcurrency%2Fdata_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Fconcurrency%2Fdata_race.rs?ref=77071f7e3ac76ae6734aa3ce7cfc964b3da4939f", "patch": "@@ -158,7 +158,7 @@ impl ThreadClockSet {\n \n /// Error returned by finding a data race\n /// should be elaborated upon.\n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash, Debug)]\n+#[derive(Copy, Clone, PartialEq, Eq, Hash, Debug)]\n pub struct DataRace;\n \n /// Externally stored memory cell clocks"}]}