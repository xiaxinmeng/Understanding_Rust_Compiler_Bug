{"sha": "6cd669e8809d9e19b2169d04b99f33258848b814", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjZDY2OWU4ODA5ZDllMTliMjE2OWQwNGI5OWYzMzI1ODg0OGI4MTQ=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-04-26T14:17:05Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-26T14:17:05Z"}, "message": "Merge #8668\n\n8668: Use more cross-platform utc `date` argument r=matklad a=SomeoneToIgnore\n\nPart of https://github.com/rust-analyzer/rust-analyzer/issues/8571\r\n\r\n```\r\n$ docker run -it --rm ubuntu:20.04 bash\r\nroot@7393d1e7bbad:/# date -u +%Y-%m-%d\r\n2021-04-26\r\n```\r\n\r\n```\r\n$ date -u +%Y-%m-%d\r\n2021-04-26\r\n\r\n$ uname -a\r\nDarwin alaptop.local 20.3.0 Darwin Kernel Version 20.3.0: Thu Jan 21 00:07:06 PST 2021; root:xnu-7195.81.3~1/RELEASE_X86_64 x86_64\r\n```\r\n\r\nSome of the places where I've change this do not really require it (since macos bin would have failed with `--iso` param also), but I've changed them for consistency.\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>", "tree": {"sha": "485371c10449f0da91f2170a9ae904cca678f60d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/485371c10449f0da91f2170a9ae904cca678f60d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6cd669e8809d9e19b2169d04b99f33258848b814", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJghsthCRBK7hj4Ov3rIwAAiEIIADSmAzRojaDHI0tEx0vg1+kj\n+7TZWdzmeeuQw/2KgQcUqzZkCNtfUDe9kKkmjuEYFpvtpBIThG9iU+booI+WBL1i\nCRBYTkXiq+TeR6GujR04RUjIAQ7nprFjCZNpLDsUz7fRYPOra6XDSpdTNAjpmP+x\neOcYvtVoP3k4mDUfWldip3oD3Je1H38jP5WdlqqE33DpLMp5I1XrXlxdmiGcWNET\nREtXQoX53nPuRP4v0vm1aqVgkY1Jes1hOA6Pa4idzAPpmVhM12Ak2CxxnAhZ9ha4\nHB9hXsaV52Blbx73SUSWZ+BhbuJJztM6VSVk+EpM6Q5BjzWd5JgxCjcrnBUmAWo=\n=luF9\n-----END PGP SIGNATURE-----\n", "payload": "tree 485371c10449f0da91f2170a9ae904cca678f60d\nparent eee50b6921662dee766c987e1a0b15b371e141d1\nparent c24bdab97e53943fd36cf4e63047785b9c08077b\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1619446625 +0000\ncommitter GitHub <noreply@github.com> 1619446625 +0000\n\nMerge #8668\n\n8668: Use more cross-platform utc `date` argument r=matklad a=SomeoneToIgnore\n\nPart of https://github.com/rust-analyzer/rust-analyzer/issues/8571\r\n\r\n```\r\n$ docker run -it --rm ubuntu:20.04 bash\r\nroot@7393d1e7bbad:/# date -u +%Y-%m-%d\r\n2021-04-26\r\n```\r\n\r\n```\r\n$ date -u +%Y-%m-%d\r\n2021-04-26\r\n\r\n$ uname -a\r\nDarwin alaptop.local 20.3.0 Darwin Kernel Version 20.3.0: Thu Jan 21 00:07:06 PST 2021; root:xnu-7195.81.3~1/RELEASE_X86_64 x86_64\r\n```\r\n\r\nSome of the places where I've change this do not really require it (since macos bin would have failed with `--iso` param also), but I've changed them for consistency.\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6cd669e8809d9e19b2169d04b99f33258848b814", "html_url": "https://github.com/rust-lang/rust/commit/6cd669e8809d9e19b2169d04b99f33258848b814", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6cd669e8809d9e19b2169d04b99f33258848b814/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eee50b6921662dee766c987e1a0b15b371e141d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/eee50b6921662dee766c987e1a0b15b371e141d1", "html_url": "https://github.com/rust-lang/rust/commit/eee50b6921662dee766c987e1a0b15b371e141d1"}, {"sha": "c24bdab97e53943fd36cf4e63047785b9c08077b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c24bdab97e53943fd36cf4e63047785b9c08077b", "html_url": "https://github.com/rust-lang/rust/commit/c24bdab97e53943fd36cf4e63047785b9c08077b"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "d5c93f69b0215735e1213b6dbbd4d105b51ee464", "filename": ".github/workflows/release.yaml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cd669e8809d9e19b2169d04b99f33258848b814/.github%2Fworkflows%2Frelease.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/6cd669e8809d9e19b2169d04b99f33258848b814/.github%2Fworkflows%2Frelease.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Frelease.yaml?ref=6cd669e8809d9e19b2169d04b99f33258848b814", "patch": "@@ -261,7 +261,7 @@ jobs:\n       with:\n         node-version: 12.x\n \n-    - run: echo \"TAG=$(date --iso --utc)\" >> $GITHUB_ENV\n+    - run: echo \"TAG=$(date --iso -u)\" >> $GITHUB_ENV\n       if: github.ref == 'refs/heads/release'\n     - run: echo \"TAG=nightly\" >> $GITHUB_ENV\n       if: github.ref != 'refs/heads/release'"}, {"sha": "bca6611d6042b7ce9a58e7609d18d7b50f91a81d", "filename": "crates/rust-analyzer/build.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cd669e8809d9e19b2169d04b99f33258848b814/crates%2Frust-analyzer%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cd669e8809d9e19b2169d04b99f33258848b814/crates%2Frust-analyzer%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fbuild.rs?ref=6cd669e8809d9e19b2169d04b99f33258848b814", "patch": "@@ -55,7 +55,7 @@ fn commit_hash() -> Option<String> {\n }\n \n fn build_date() -> Option<String> {\n-    output_to_string(\"date --utc +%Y-%m-%d\")\n+    output_to_string(\"date -u +%Y-%m-%d\")\n }\n \n fn output_to_string(command: &str) -> Option<String> {"}, {"sha": "ce3353410840b3fc96f1ebdf669eea2dc63e204f", "filename": "xtask/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cd669e8809d9e19b2169d04b99f33258848b814/xtask%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cd669e8809d9e19b2169d04b99f33258848b814/xtask%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fmain.rs?ref=6cd669e8809d9e19b2169d04b99f33258848b814", "patch": "@@ -108,7 +108,7 @@ fn run_fuzzer() -> Result<()> {\n }\n \n fn date_iso() -> Result<String> {\n-    let res = cmd!(\"date --utc +%Y-%m-%d\").read()?;\n+    let res = cmd!(\"date -u +%Y-%m-%d\").read()?;\n     Ok(res)\n }\n "}]}