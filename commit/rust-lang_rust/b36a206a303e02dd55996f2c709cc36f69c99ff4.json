{"sha": "b36a206a303e02dd55996f2c709cc36f69c99ff4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzNmEyMDZhMzAzZTAyZGQ1NTk5NmYyYzcwOWNjMzZmNjljOTlmZjQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-09T00:05:54Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-09T14:44:23Z"}, "message": "joined_uncovered_patterns: use slice pats & eta-reduce.", "tree": {"sha": "aec0133c2c944ad2339d79e2c7473a2b1a58fdaa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aec0133c2c944ad2339d79e2c7473a2b1a58fdaa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b36a206a303e02dd55996f2c709cc36f69c99ff4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b36a206a303e02dd55996f2c709cc36f69c99ff4", "html_url": "https://github.com/rust-lang/rust/commit/b36a206a303e02dd55996f2c709cc36f69c99ff4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b36a206a303e02dd55996f2c709cc36f69c99ff4/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5435b38456547aae42bec55da38e760fc77aabce", "url": "https://api.github.com/repos/rust-lang/rust/commits/5435b38456547aae42bec55da38e760fc77aabce", "html_url": "https://github.com/rust-lang/rust/commit/5435b38456547aae42bec55da38e760fc77aabce"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "a2ca53a9a3f3658ab7bd3e989402508b14f11001", "filename": "src/librustc_mir/hair/pattern/check_match.rs", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b36a206a303e02dd55996f2c709cc36f69c99ff4/src%2Flibrustc_mir%2Fhair%2Fpattern%2Fcheck_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36a206a303e02dd55996f2c709cc36f69c99ff4/src%2Flibrustc_mir%2Fhair%2Fpattern%2Fcheck_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fhair%2Fpattern%2Fcheck_match.rs?ref=b36a206a303e02dd55996f2c709cc36f69c99ff4", "patch": "@@ -489,17 +489,16 @@ fn check_exhaustive<'tcx>(\n \n fn joined_uncovered_patterns(witnesses: &[&Pattern<'_>]) -> String {\n     const LIMIT: usize = 3;\n-    match witnesses.len() {\n-        0 => bug!(),\n-        1 => format!(\"`{}`\", witnesses[0]),\n-        2..=LIMIT => {\n-            let (tail, head) = witnesses.split_last().unwrap();\n-            let head: Vec<_> = head.iter().map(|w| w.to_string()).collect();\n+    match witnesses {\n+        [] => bug!(),\n+        [witness] => format!(\"`{}`\", witness),\n+        [head @ .., tail] if head.len() < LIMIT => {\n+            let head: Vec<_> = head.iter().map(<_>::to_string).collect();\n             format!(\"`{}` and `{}`\", head.join(\"`, `\"), tail)\n         }\n         _ => {\n             let (head, tail) = witnesses.split_at(LIMIT);\n-            let head: Vec<_> = head.iter().map(|w| w.to_string()).collect();\n+            let head: Vec<_> = head.iter().map(<_>::to_string).collect();\n             format!(\"`{}` and {} more\", head.join(\"`, `\"), tail.len())\n         }\n     }"}]}