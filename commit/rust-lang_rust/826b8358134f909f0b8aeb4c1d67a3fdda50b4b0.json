{"sha": "826b8358134f909f0b8aeb4c1d67a3fdda50b4b0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyNmI4MzU4MTM0ZjkwOWYwYjhhZWI0YzFkNjdhM2ZkZGE1MGI0YjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-23T14:06:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-23T14:06:08Z"}, "message": "auto merge of #15749 : vhbit/rust/treemap-doc-fixes, r=alexcrichton\n\n1. Removed obsolete comment regarding recursive/iteration implementations of tree_find_with/tree_find_mut_with\r\n2. Replaced easy breakable find_with example with simpler one (which only removes redundant allocation during search)", "tree": {"sha": "925ba46178d78565770d052031112c3eeb06c06a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/925ba46178d78565770d052031112c3eeb06c06a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0", "html_url": "https://github.com/rust-lang/rust/commit/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b10dcbe53ae68ba97314b5c68eddbb4ea403d59f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b10dcbe53ae68ba97314b5c68eddbb4ea403d59f", "html_url": "https://github.com/rust-lang/rust/commit/b10dcbe53ae68ba97314b5c68eddbb4ea403d59f"}, {"sha": "4a00d4e676d3333db77db6f08d5570b0d500b9cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/4a00d4e676d3333db77db6f08d5570b0d500b9cc", "html_url": "https://github.com/rust-lang/rust/commit/4a00d4e676d3333db77db6f08d5570b0d500b9cc"}], "stats": {"total": 42, "additions": 21, "deletions": 21}, "files": [{"sha": "8c24326c84092508c350161dd1dfda1c9c462296", "filename": "src/libcollections/treemap.rs", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0/src%2Flibcollections%2Ftreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/826b8358134f909f0b8aeb4c1d67a3fdda50b4b0/src%2Flibcollections%2Ftreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Ftreemap.rs?ref=826b8358134f909f0b8aeb4c1d67a3fdda50b4b0", "patch": "@@ -190,33 +190,38 @@ impl<K: Ord, V> TreeMap<K, V> {\n }\n \n impl<K, V> TreeMap<K, V> {\n-    /// Return the value for which f(key) returns Equal. f is invoked\n-    /// with current key and helps to navigate the tree\n+    /// Return the value for which `f(key)` returns `Equal`. `f` is invoked\n+    /// with current key and guides tree navigation. That means `f` should\n+    /// be aware of natural ordering of the tree.\n     ///\n     /// # Example\n     ///\n     /// ```\n-    /// use std::ascii::StrAsciiExt;\n+    /// use collections::treemap::TreeMap;\n     ///\n-    /// let mut t = collections::treemap::TreeMap::new();\n-    /// t.insert(\"Content-Type\", \"application/xml\");\n-    /// t.insert(\"User-Agent\", \"Curl-Rust/0.1\");\n+    /// fn get_headers() -> TreeMap<String, String> {\n+    ///     let mut result = TreeMap::new();\n+    ///     result.insert(\"Content-Type\".to_string(), \"application/xml\".to_string());\n+    ///     result.insert(\"User-Agent\".to_string(), \"Curl-Rust/0.1\".to_string());\n+    ///     result\n+    /// }\n     ///\n-    /// let ua_key = \"user-agent\";\n-    /// let ua = t.find_with(|&k| {\n-    ///    ua_key.cmp(&k.to_ascii_lower().as_slice())\n+    /// let headers = get_headers();\n+    /// let ua_key = \"User-Agent\";\n+    /// let ua = headers.find_with(|k| {\n+    ///    ua_key.cmp(&k.as_slice())\n     /// });\n     ///\n-    /// assert_eq!(*ua.unwrap(), \"Curl-Rust/0.1\");\n+    /// assert_eq!((*ua.unwrap()).as_slice(), \"Curl-Rust/0.1\");\n     /// ```\n     #[inline]\n     pub fn find_with<'a>(&'a self, f:|&K| -> Ordering) -> Option<&'a V> {\n         tree_find_with(&self.root, f)\n     }\n \n-    /// Return the value for which f(key) returns Equal. f is invoked\n-    /// with current key and helps to navigate the tree\n-    ///\n+    /// Return the value for which `f(key)` returns `Equal`. `f` is invoked\n+    /// with current key and guides tree navigation. That means `f` should\n+    /// be aware of natural ordering of the tree.\n     /// # Example\n     ///\n     /// ```\n@@ -913,14 +918,9 @@ fn split<K: Ord, V>(node: &mut Box<TreeNode<K, V>>) {\n     }\n }\n \n-// Next 2 functions have the same conventions\n-//\n-// The only difference is that non-mutable version uses loop instead\n-// of recursion (performance considerations)\n-// It seems to be impossible to avoid recursion with mutability\n-//\n-// So convention is that comparator is gets at input current key\n-// and returns search_key cmp cur_key (i.e. search_key.cmp(cur_key))\n+// Next 2 functions have the same convention: comparator gets\n+// at input current key and returns search_key cmp cur_key\n+// (i.e. search_key.cmp(&cur_key))\n fn tree_find_with<'r, K, V>(node: &'r Option<Box<TreeNode<K, V>>>,\n                             f: |&K| -> Ordering) -> Option<&'r V> {\n     let mut current: &'r Option<Box<TreeNode<K, V>>> = node;"}]}