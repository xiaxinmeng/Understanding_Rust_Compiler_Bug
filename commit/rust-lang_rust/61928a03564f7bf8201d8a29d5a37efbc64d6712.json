{"sha": "61928a03564f7bf8201d8a29d5a37efbc64d6712", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxOTI4YTAzNTY0ZjdiZjgyMDFkOGEyOWQ1YTM3ZWZiYzY0ZDY3MTI=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-27T20:24:39Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-27T22:56:26Z"}, "message": "Rollup merge of #40865 - alexcrichton:downgrade-mingw, r=arielb1\n\nappveyor: Downgrade MinGW to 6.2.0\n\nIt looks like the 6.3.0 MinGW comes with a gdb which has issues (#40184) that an\nattempted workaround (#40777) does not actually fix (#40835). The original\nmotivation for upgradin MinGW was to fix build flakiness (#40546) due to newer\nbuilds not exhibiting the same bug, so let's hope that 6.2.0 isn't too far back\nin time and still contains the fix we need.\n\nCloses #40835", "tree": {"sha": "b25508bcd4d999249c34c2a4b751f2ca84d2a072", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b25508bcd4d999249c34c2a4b751f2ca84d2a072"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61928a03564f7bf8201d8a29d5a37efbc64d6712", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61928a03564f7bf8201d8a29d5a37efbc64d6712", "html_url": "https://github.com/rust-lang/rust/commit/61928a03564f7bf8201d8a29d5a37efbc64d6712", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61928a03564f7bf8201d8a29d5a37efbc64d6712/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0dbf84b73719b12d9fc59c2d6979d9e25c6bf639", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dbf84b73719b12d9fc59c2d6979d9e25c6bf639", "html_url": "https://github.com/rust-lang/rust/commit/0dbf84b73719b12d9fc59c2d6979d9e25c6bf639"}, {"sha": "e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "url": "https://api.github.com/repos/rust-lang/rust/commits/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa", "html_url": "https://github.com/rust-lang/rust/commit/e87dd42cfe3dc384cceb3c8385f7551c3af8edaa"}], "stats": {"total": 28, "additions": 6, "deletions": 22}, "files": [{"sha": "68b2a239aff1babc31c622fd0631dd4abaac9c78", "filename": "appveyor.yml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/61928a03564f7bf8201d8a29d5a37efbc64d6712/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/61928a03564f7bf8201d8a29d5a37efbc64d6712/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=61928a03564f7bf8201d8a29d5a37efbc64d6712", "patch": "@@ -46,13 +46,13 @@ environment:\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-ninja\n     SCRIPT: python x.py test\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: i686-6.3.0-release-win32-dwarf-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: i686-6.2.0-release-win32-dwarf-rt_v5-rev1.7z\n     MINGW_DIR: mingw32\n   - MSYS_BITS: 64\n     SCRIPT: python x.py test\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-ninja\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: x86_64-6.3.0-release-win32-seh-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: x86_64-6.2.0-release-win32-seh-rt_v5-rev1.7z\n     MINGW_DIR: mingw64\n \n   # 32/64 bit MSVC and GNU deployment\n@@ -71,14 +71,14 @@ environment:\n     RUST_CONFIGURE_ARGS: --build=i686-pc-windows-gnu --enable-extended --enable-ninja\n     SCRIPT: python x.py dist\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: i686-6.3.0-release-win32-dwarf-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: i686-6.2.0-release-win32-dwarf-rt_v5-rev1.7z\n     MINGW_DIR: mingw32\n     DEPLOY: 1\n   - MSYS_BITS: 64\n     SCRIPT: python x.py dist\n     RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-gnu --enable-extended --enable-ninja\n     MINGW_URL: https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror\n-    MINGW_ARCHIVE: x86_64-6.3.0-release-win32-seh-rt_v5-rev1.7z\n+    MINGW_ARCHIVE: x86_64-6.2.0-release-win32-seh-rt_v5-rev1.7z\n     MINGW_DIR: mingw64\n     DEPLOY: 1\n "}, {"sha": "3d8f2296236a2014c6c60df5657c7ab5fd522b26", "filename": "src/tools/compiletest/src/procsrv.rs", "status": "modified", "additions": 2, "deletions": 18, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/61928a03564f7bf8201d8a29d5a37efbc64d6712/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61928a03564f7bf8201d8a29d5a37efbc64d6712/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fprocsrv.rs?ref=61928a03564f7bf8201d8a29d5a37efbc64d6712", "patch": "@@ -58,24 +58,8 @@ pub fn run(lib_path: &str,\n     let mut cmd = Command::new(prog);\n     cmd.args(args)\n         .stdout(Stdio::piped())\n-        .stderr(Stdio::piped());\n-\n-    // Why oh why do we sometimes make a pipe and sometimes inherit the stdin\n-    // stream, well that's an excellent question! In theory it should suffice to\n-    // always create a pipe here and be done with it. Unfortunately though\n-    // there's apparently something odd with the gdb that comes with gcc 6.3.0\n-    // on MinGW. Tracked at rust-lang/rust#40184 when stdin is piped here\n-    // (unconditionally) then all gdb tests will fail on MinGW when using gcc\n-    // 6.3.0. WHen using an inherited stdin though they happen to all work!\n-    //\n-    // As to why this fixes the issue, well, I have no idea. If you can remove\n-    // this branch and unconditionally use `piped` and it gets past @bors please\n-    // feel free to send a PR!\n-    if input.is_some() || !cfg!(windows) {\n-        cmd.stdin(Stdio::piped());\n-    } else {\n-        cmd.stdin(Stdio::inherit());\n-    }\n+        .stderr(Stdio::piped())\n+        .stdin(Stdio::piped());\n \n     add_target_env(&mut cmd, lib_path, aux_path);\n     for (key, val) in env {"}]}