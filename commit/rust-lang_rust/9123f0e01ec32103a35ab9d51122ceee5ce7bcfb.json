{"sha": "9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxMjNmMGUwMWVjMzIxMDNhMzVhYjlkNTExMjJjZWVlNWNlN2JjZmI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-29T11:22:05Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-29T11:22:05Z"}, "message": "Auto merge of #1531 - divergentdave:cargo-miri-targets-test, r=RalfJung\n\nTest cargo miri target selection\n\nThis is a followup to #1525, adding a few test invocations with targets specified in the cargo arguments.", "tree": {"sha": "e3b0d91243a44e2d3a2261e94e93cca09a2540da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3b0d91243a44e2d3a2261e94e93cca09a2540da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "html_url": "https://github.com/rust-lang/rust/commit/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2a2e25d0b050d70d6a355f9b7545a991fc8783a", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2a2e25d0b050d70d6a355f9b7545a991fc8783a", "html_url": "https://github.com/rust-lang/rust/commit/c2a2e25d0b050d70d6a355f9b7545a991fc8783a"}, {"sha": "5d9d75fc1f2fc87f419913db7bf8a073b04f955d", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d9d75fc1f2fc87f419913db7bf8a073b04f955d", "html_url": "https://github.com/rust-lang/rust/commit/5d9d75fc1f2fc87f419913db7bf8a073b04f955d"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "a258c7f73c2d94c4dc18ab64d881bbc40439542f", "filename": "test-cargo-miri/run-test.py", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Frun-test.py", "raw_url": "https://github.com/rust-lang/rust/raw/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Frun-test.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Frun-test.py?ref=9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "patch": "@@ -50,6 +50,10 @@ def test_cargo_miri_run():\n         cargo_miri(\"run\"),\n         \"stdout.ref\", \"stderr.ref\"\n     )\n+    test(\"cargo miri run (with target)\",\n+        cargo_miri(\"run\") + [\"--bin\", \"cargo-miri-test\"],\n+        \"stdout.ref\", \"stderr.ref\"\n+    )\n     test(\"cargo miri run (with arguments)\",\n         cargo_miri(\"run\") + [\"--\", \"--\", \"hello world\", '\"hello world\"'],\n         \"stdout.ref\", \"stderr.ref2\"\n@@ -68,6 +72,14 @@ def test_cargo_miri_test():\n         cargo_miri(\"test\") + [\"--\", \"-Zmiri-disable-isolation\", \"--\", \"num_cpus\"],\n         \"test.stdout.ref3\", \"test.stderr.ref\"\n     )\n+    test(\"cargo miri test (test target)\",\n+        cargo_miri(\"test\") + [\"--test\", \"test\"],\n+        \"test.stdout.ref4\", \"test.stderr.ref\"\n+    )\n+    test(\"cargo miri test (bin target)\",\n+        cargo_miri(\"test\") + [\"--bin\", \"cargo-miri-test\"],\n+        \"test.stdout.ref5\", \"test.stderr.ref\"\n+    )\n \n os.chdir(os.path.dirname(os.path.realpath(__file__)))\n "}, {"sha": "b6403bf6c09160df93bb27a7867e61b2e77abc25", "filename": "test-cargo-miri/test.stdout.ref4", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Ftest.stdout.ref4", "raw_url": "https://github.com/rust-lang/rust/raw/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Ftest.stdout.ref4", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref4?ref=9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "patch": "@@ -0,0 +1,12 @@\n+\n+running 7 tests\n+test do_panic ... ok\n+test does_not_work_on_miri ... ignored\n+test entropy_rng ... ok\n+test fail_index_check ... ok\n+test num_cpus ... ok\n+test simple1 ... ok\n+test simple2 ... ok\n+\n+test result: ok. 6 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out\n+"}, {"sha": "4caa30a7f0e50418166470f1e4cd074dc76c1eea", "filename": "test-cargo-miri/test.stdout.ref5", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Ftest.stdout.ref5", "raw_url": "https://github.com/rust-lang/rust/raw/9123f0e01ec32103a35ab9d51122ceee5ce7bcfb/test-cargo-miri%2Ftest.stdout.ref5", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftest.stdout.ref5?ref=9123f0e01ec32103a35ab9d51122ceee5ce7bcfb", "patch": "@@ -0,0 +1,6 @@\n+\n+running 1 test\n+test test::rng ... ok\n+\n+test result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out\n+"}]}