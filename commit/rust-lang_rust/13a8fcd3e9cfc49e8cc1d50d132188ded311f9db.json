{"sha": "13a8fcd3e9cfc49e8cc1d50d132188ded311f9db", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzYThmY2QzZTljZmM0OWU4Y2MxZDUwZDEzMjE4OGRlZDMxMWY5ZGI=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-02-24T18:59:11Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-02-24T20:33:06Z"}, "message": "windows: Fix the test_exists unit test\n\nTurns out the `timeout` command was exiting immediately because it didn't like\nits output piped. Instead use `ping` repeatedly to get a process that will sleep\nfor awhile.\n\ncc #12516", "tree": {"sha": "474472bd05e4e9570c3b008768939407c247ffa8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/474472bd05e4e9570c3b008768939407c247ffa8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db", "html_url": "https://github.com/rust-lang/rust/commit/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0e767b00b325576b4d09b624a47382133db6163", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0e767b00b325576b4d09b624a47382133db6163", "html_url": "https://github.com/rust-lang/rust/commit/c0e767b00b325576b4d09b624a47382133db6163"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "b782cf1d21ab7823c56bb9e3b1b55b32fb12d41d", "filename": "src/libstd/io/process.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db/src%2Flibstd%2Fio%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13a8fcd3e9cfc49e8cc1d50d132188ded311f9db/src%2Flibstd%2Fio%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fprocess.rs?ref=13a8fcd3e9cfc49e8cc1d50d132188ded311f9db", "patch": "@@ -814,7 +814,10 @@ mod tests {\n     }\n     #[cfg(windows)]\n     pub fn sleeper() -> Process {\n-        Process::new(\"timeout\", [~\"1000\"]).unwrap()\n+        // There's a `timeout` command on windows, but it doesn't like having\n+        // its output piped, so instead just ping ourselves a few times with\n+        // gaps inbetweeen so we're sure this process is alive for awhile\n+        Process::new(\"ping\", [~\"127.0.0.1\", ~\"-n\", ~\"1000\"]).unwrap()\n     }\n \n     iotest!(fn test_kill() {\n@@ -828,5 +831,5 @@ mod tests {\n         assert!(Process::kill(p.id(), 0).is_ok());\n         p.signal_kill().unwrap();\n         assert!(!p.wait().success());\n-    } #[ignore(cfg(windows))]) // FIXME(#12516)\n+    })\n }"}]}