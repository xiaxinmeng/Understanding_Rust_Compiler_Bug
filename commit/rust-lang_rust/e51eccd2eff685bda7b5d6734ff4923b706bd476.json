{"sha": "e51eccd2eff685bda7b5d6734ff4923b706bd476", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1MWVjY2QyZWZmNjg1YmRhN2I1ZDY3MzRmZjQ5MjNiNzA2YmQ0NzY=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-01-11T13:40:07Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-01-11T13:40:07Z"}, "message": "Make codegen tests wordsize independent", "tree": {"sha": "3fae7fdaba466ed96b031a6453a30fc271bd7eee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3fae7fdaba466ed96b031a6453a30fc271bd7eee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e51eccd2eff685bda7b5d6734ff4923b706bd476", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e51eccd2eff685bda7b5d6734ff4923b706bd476", "html_url": "https://github.com/rust-lang/rust/commit/e51eccd2eff685bda7b5d6734ff4923b706bd476", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e51eccd2eff685bda7b5d6734ff4923b706bd476/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5d8ab713ad9871283d07c8920be14f0d6132705", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5d8ab713ad9871283d07c8920be14f0d6132705", "html_url": "https://github.com/rust-lang/rust/commit/a5d8ab713ad9871283d07c8920be14f0d6132705"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "a89ecdfd3a90153f05d20bc01378c8a461d1cd64", "filename": "src/test/codegen/consts.rs", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e51eccd2eff685bda7b5d6734ff4923b706bd476/src%2Ftest%2Fcodegen%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e51eccd2eff685bda7b5d6734ff4923b706bd476/src%2Ftest%2Fcodegen%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fconsts.rs?ref=e51eccd2eff685bda7b5d6734ff4923b706bd476", "patch": "@@ -14,10 +14,9 @@\n \n // This checks the constants from {low,high}_align_const, they share the same\n // constant, but the alignment differs, so the higher one should be used\n-// CHECK: [[LOW_HIGH:@[0-9]+]] = {{.*}} getelementptr inbounds (<{ [8 x i8] }>, <{ [8 x i8] }>* @2, i32 0, i32 0, i32 0), {{.*}}, align 8\n+// CHECK: [[LOW_HIGH:@[0-9]+]] = {{.*}} getelementptr inbounds (<{ [8 x i8] }>, <{ [8 x i8] }>* @2, i32 0, i32 0, i32 0), {{.*}},\n \n #[derive(Copy, Clone)]\n-\n // repr(i16) is required for the {low,high}_align_const test\n #[repr(i16)]\n pub enum E<A, B> {\n@@ -31,7 +30,7 @@ pub static STATIC: E<i16, i32> = E::A(0);\n // CHECK-LABEL: @static_enum_const\n #[no_mangle]\n pub fn static_enum_const() -> E<i16, i32> {\n-   STATIC\n+    STATIC\n }\n \n // CHECK-LABEL: @inline_enum_const\n@@ -43,15 +42,15 @@ pub fn inline_enum_const() -> E<i8, i16> {\n // CHECK-LABEL: @low_align_const\n #[no_mangle]\n pub fn low_align_const() -> E<i16, [i16; 3]> {\n-// Check that low_align_const and high_align_const use the same constant\n-// CHECK: load %\"E<i16, [i16; 3]>\"*, %\"E<i16, [i16; 3]>\"** bitcast (<{ i8*, [0 x i8] }>* [[LOW_HIGH]] to %\"E<i16, [i16; 3]>\"**), align 8\n+    // Check that low_align_const and high_align_const use the same constant\n+    // CHECK: load %\"E<i16, [i16; 3]>\"*, %\"E<i16, [i16; 3]>\"** bitcast (<{ i8*, [0 x i8] }>* [[LOW_HIGH]] to %\"E<i16, [i16; 3]>\"**),\n     *&E::A(0)\n }\n \n // CHECK-LABEL: @high_align_const\n #[no_mangle]\n pub fn high_align_const() -> E<i16, i32> {\n-// Check that low_align_const and high_align_const use the same constant\n-// CHECK: load %\"E<i16, i32>\"*, %\"E<i16, i32>\"** bitcast (<{ i8*, [0 x i8] }>* [[LOW_HIGH]] to %\"E<i16, i32>\"**), align 8\n+    // Check that low_align_const and high_align_const use the same constant\n+    // CHECK: load %\"E<i16, i32>\"*, %\"E<i16, i32>\"** bitcast (<{ i8*, [0 x i8] }>* [[LOW_HIGH]] to %\"E<i16, i32>\"**),\n     *&E::A(0)\n }"}]}