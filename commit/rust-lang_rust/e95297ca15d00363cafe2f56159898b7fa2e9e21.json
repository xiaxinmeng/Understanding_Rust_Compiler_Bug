{"sha": "e95297ca15d00363cafe2f56159898b7fa2e9e21", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5NTI5N2NhMTVkMDAzNjNjYWZlMmY1NjE1OTg5OGI3ZmEyZTllMjE=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-02-19T17:13:24Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-02-20T03:58:38Z"}, "message": "Rollup merge of #58528 - Zoxc:stmtkind-item, r=oli-obk\n\nDon't use an allocation for ItemId in StmtKind", "tree": {"sha": "cbe6a3373caba5144f5b548186f7a8f16685e11d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cbe6a3373caba5144f5b548186f7a8f16685e11d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e95297ca15d00363cafe2f56159898b7fa2e9e21", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlxs0G4ACgkQ/vbIBR0O\nATyNrQ//bE6VP+AvJCtMxVAg89DWSnbyuuD/rDJ7trrRo9LlHnMPlUMMnYxPGSzK\nNbcHK66Dn6NUyCQMwYL1ss2Tz5/lnJS55EM0m3ULr03YmO7+48m+7NeKsQzd1gaN\nJsEeZsQSGnULwfRgI4w/gxrtmQw9JygZU3ipWKJPJzPE/qlm1NFrw5wO8coon924\nmOD6SO/1Dfl5pDt4FWadeJ9tIVZTAs27H5WLio6doc7GXvH6OhvZj4qMqO4auuzZ\nMHRExoNA6N8GXdSUGG87bQz0+XpJVfWbnkA35fkbzRVgP7Of2pVQKsqLqVdJAiFg\ngRPjI7XcNAMMLGA6aPgRP0jvXeWHugQnNzliE88F7lToLJbXWJqtXiN2ny/uB0Aw\n50ajp0sq/V1SM4m9wWnN3qwywXCKaV+8pyIPDQcCrvZGQwSdHmFS3UWGaYE3K8n5\nOF9Us03C1LIQVrB5Pj+3NaKmA9CFpwedkXaixFeX6oJ3HLflDjEVR3E4/8sh9fYJ\nJwa/kyLpLSHMlgjdojpe3hBzRxMxsVBLFk7l5rG3XOlZcq8dan+9rY7MAlXffIOm\nbr/ciUOJAzhGbdEC5pGko6lY9ErZVvhZAZU+bN6uZJXQ3wxnXxnajnA1/cfn8+fm\nz2j1LsGUX8bjK1zeCjFT1ZHmLRkjCD2bvZ5HcpKcfDhrkw/14l4=\n=04bt\n-----END PGP SIGNATURE-----", "payload": "tree cbe6a3373caba5144f5b548186f7a8f16685e11d\nparent 897778ec2881f17f9106477c1d47646c86c60bc7\nparent cdd1c0efbb37fd475ebc60e0e58e32e7d2cbff19\nauthor kennytm <kennytm@gmail.com> 1550596404 +0800\ncommitter kennytm <kennytm@gmail.com> 1550635118 +0800\n\nRollup merge of #58528 - Zoxc:stmtkind-item, r=oli-obk\n\nDon't use an allocation for ItemId in StmtKind\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e95297ca15d00363cafe2f56159898b7fa2e9e21", "html_url": "https://github.com/rust-lang/rust/commit/e95297ca15d00363cafe2f56159898b7fa2e9e21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e95297ca15d00363cafe2f56159898b7fa2e9e21/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "897778ec2881f17f9106477c1d47646c86c60bc7", "url": "https://api.github.com/repos/rust-lang/rust/commits/897778ec2881f17f9106477c1d47646c86c60bc7", "html_url": "https://github.com/rust-lang/rust/commit/897778ec2881f17f9106477c1d47646c86c60bc7"}, {"sha": "cdd1c0efbb37fd475ebc60e0e58e32e7d2cbff19", "url": "https://api.github.com/repos/rust-lang/rust/commits/cdd1c0efbb37fd475ebc60e0e58e32e7d2cbff19", "html_url": "https://github.com/rust-lang/rust/commit/cdd1c0efbb37fd475ebc60e0e58e32e7d2cbff19"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "4a2bc213fea80d0c0c86809ad71322e63ef8d3ef", "filename": "src/librustc/hir/intravisit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fintravisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fintravisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fintravisit.rs?ref=e95297ca15d00363cafe2f56159898b7fa2e9e21", "patch": "@@ -953,7 +953,7 @@ pub fn walk_stmt<'v, V: Visitor<'v>>(visitor: &mut V, statement: &'v Stmt) {\n     visitor.visit_id(statement.id);\n     match statement.node {\n         StmtKind::Local(ref local) => visitor.visit_local(local),\n-        StmtKind::Item(ref item) => visitor.visit_nested_item(**item),\n+        StmtKind::Item(item) => visitor.visit_nested_item(item),\n         StmtKind::Expr(ref expression) |\n         StmtKind::Semi(ref expression) => {\n             visitor.visit_expr(expression)"}, {"sha": "9f48a628274db4721a482e6fe8f70bcddee6d295", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=e95297ca15d00363cafe2f56159898b7fa2e9e21", "patch": "@@ -4656,7 +4656,7 @@ impl<'a> LoweringContext<'a> {\n                         hir::Stmt {\n                             id: node_id,\n                             hir_id,\n-                            node: hir::StmtKind::Item(P(item_id)),\n+                            node: hir::StmtKind::Item(item_id),\n                             span: s.span,\n                         }\n                     })\n@@ -4686,7 +4686,7 @@ impl<'a> LoweringContext<'a> {\n                         hir::Stmt {\n                             id: node_id,\n                             hir_id,\n-                            node: hir::StmtKind::Item(P(item_id)),\n+                            node: hir::StmtKind::Item(item_id),\n                             span: s.span,\n                         }\n                     })"}, {"sha": "deb2eb33b0f0b34a85c5ab7d3f990f5c10275127", "filename": "src/librustc/hir/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmod.rs?ref=e95297ca15d00363cafe2f56159898b7fa2e9e21", "patch": "@@ -1175,8 +1175,9 @@ impl fmt::Debug for Stmt {\n pub enum StmtKind {\n     /// A local (`let`) binding.\n     Local(P<Local>),\n+\n     /// An item binding.\n-    Item(P<ItemId>),\n+    Item(ItemId),\n \n     /// An expression without a trailing semi-colon (must have unit type).\n     Expr(P<Expr>),"}, {"sha": "ece649cf1b882f86839dc5eb50a5e77f16a1fba2", "filename": "src/librustc/hir/print.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fprint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e95297ca15d00363cafe2f56159898b7fa2e9e21/src%2Flibrustc%2Fhir%2Fprint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fprint.rs?ref=e95297ca15d00363cafe2f56159898b7fa2e9e21", "patch": "@@ -1007,8 +1007,8 @@ impl<'a> State<'a> {\n                 }\n                 self.end()?\n             }\n-            hir::StmtKind::Item(ref item) => {\n-                self.ann.nested(self, Nested::Item(**item))?\n+            hir::StmtKind::Item(item) => {\n+                self.ann.nested(self, Nested::Item(item))?\n             }\n             hir::StmtKind::Expr(ref expr) => {\n                 self.space_if_not_bol()?;"}]}