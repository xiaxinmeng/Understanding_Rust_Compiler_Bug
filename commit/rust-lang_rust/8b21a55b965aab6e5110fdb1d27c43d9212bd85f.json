{"sha": "8b21a55b965aab6e5110fdb1d27c43d9212bd85f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiMjFhNTViOTY1YWFiNmU1MTEwZmRiMWQyN2M0M2Q5MjEyYmQ4NWY=", "commit": {"author": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-12T04:50:31Z"}, "committer": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-02-12T14:39:38Z"}, "message": "use Ubuntu keyserver for CloudABI ports\n\nThe Ubuntu keyserver is more reliable than the MIT PGP server, which is\nprone to going down. This commit also explicitly uses port 80 on the\nkeyserver for reasons outlined in #57844.", "tree": {"sha": "7a4602baf2fd934b7c1240dac7637f669bbb2a26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a4602baf2fd934b7c1240dac7637f669bbb2a26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b21a55b965aab6e5110fdb1d27c43d9212bd85f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFKBAABCAA0FiEELriChyEaiMu0yCg7viIhAz7bw3QFAlxi2roWHGFydXNzZWxs\nMTIzQGdtYWlsLmNvbQAKCRC+IiEDPtvDdG73B/9sSLajNvrVco9jBVLv3AcdnS6p\nVM+p9339TGvRkM9CMpXiHb352bYJe6ROSEPrrqv1XAWJGc7BsYb59F+PMxwd9RXz\nUW/T5FWX84Ox3gEbzcLe2gjw6s5ZmQKjX1hYxR4kNg1LEFqmVvEx/HoiUsriUoeT\nN2XC8Ors39H4P48Olfg2Rq7DALS29dJqcu5HpIXwK977l+GxIlcbpdMLNmwPe/g3\nzqSC45rqmxC0ukXCF2HTV7UQZ5vKXhyOvw8/r0KcrWrtHuQbp8kwL6BE06sDwGcF\nmLexYNp6l1+cIs/n8E85EvMBsO4kjCdSSaLhKGZ6qsA2dhT+k6geFsnPhzBR\n=Tt93\n-----END PGP SIGNATURE-----", "payload": "tree 7a4602baf2fd934b7c1240dac7637f669bbb2a26\nparent 0710c2026f257b9560f7f84539bc57183c3a02d3\nauthor Andy Russell <arussell123@gmail.com> 1549947031 -0500\ncommitter Andy Russell <arussell123@gmail.com> 1549982378 -0500\n\nuse Ubuntu keyserver for CloudABI ports\n\nThe Ubuntu keyserver is more reliable than the MIT PGP server, which is\nprone to going down. This commit also explicitly uses port 80 on the\nkeyserver for reasons outlined in #57844.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b21a55b965aab6e5110fdb1d27c43d9212bd85f", "html_url": "https://github.com/rust-lang/rust/commit/8b21a55b965aab6e5110fdb1d27c43d9212bd85f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b21a55b965aab6e5110fdb1d27c43d9212bd85f/comments", "author": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0710c2026f257b9560f7f84539bc57183c3a02d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/0710c2026f257b9560f7f84539bc57183c3a02d3", "html_url": "https://github.com/rust-lang/rust/commit/0710c2026f257b9560f7f84539bc57183c3a02d3"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "3354a796c357e51672845828d83e4a0e94160722", "filename": "src/ci/docker/dist-various-2/build-cloudabi-toolchain.sh", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8b21a55b965aab6e5110fdb1d27c43d9212bd85f/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8b21a55b965aab6e5110fdb1d27c43d9212bd85f/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-cloudabi-toolchain.sh?ref=8b21a55b965aab6e5110fdb1d27c43d9212bd85f", "patch": "@@ -32,9 +32,8 @@ ln -s ../lib/llvm-5.0/bin/lld /usr/bin/${target}-ld\n ln -s ../../${target} /usr/lib/llvm-5.0/${target}\n \n # Install the C++ runtime libraries from CloudABI Ports.\n-echo deb https://nuxi.nl/distfiles/cloudabi-ports/debian/ cloudabi cloudabi > \\\n-    /etc/apt/sources.list.d/cloudabi.list\n-curl 'https://pgp.mit.edu/pks/lookup?op=get&search=0x0DA51B8531344B15' | \\\n-    apt-key add -\n+apt-key adv --batch --yes --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 0DA51B8531344B15\n+add-apt-repository -y 'deb https://nuxi.nl/distfiles/cloudabi-ports/debian/ cloudabi cloudabi'\n+\n apt-get update\n-apt-get install -y $(echo ${target} | sed -e s/_/-/g)-cxx-runtime\n+apt-get install -y \"${target//_/-}-cxx-runtime\""}]}