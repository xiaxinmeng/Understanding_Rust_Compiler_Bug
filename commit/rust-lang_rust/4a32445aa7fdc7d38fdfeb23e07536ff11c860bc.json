{"sha": "4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhMzI0NDVhYTdmZGM3ZDM4ZmRmZWIyM2UwNzUzNmZmMTFjODYwYmM=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-12-19T23:15:31Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-12-19T23:23:29Z"}, "message": "Add macro check to used_underscore", "tree": {"sha": "e752ab09275505cc969b721b47a8549bd85bcdc0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e752ab09275505cc969b721b47a8549bd85bcdc0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "html_url": "https://github.com/rust-lang/rust/commit/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a65a7770b3e16fbe5e350c670d852c2696ce2907", "url": "https://api.github.com/repos/rust-lang/rust/commits/a65a7770b3e16fbe5e350c670d852c2696ce2907", "html_url": "https://github.com/rust-lang/rust/commit/a65a7770b3e16fbe5e350c670d852c2696ce2907"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "5b1332b18f58096ccb0b14797b69c7ec99425835", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"clippy\"\n-version = \"0.0.31\"\n+version = \"0.0.32\"\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\","}, {"sha": "3a17ff0f0cb173f0d1411c510ede22f85ac39175", "filename": "src/misc.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/src%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/src%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmisc.rs?ref=4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "patch": "@@ -10,9 +10,8 @@ use rustc::middle::const_eval::ConstVal::Float;\n use rustc::middle::const_eval::eval_const_expr_partial;\n use rustc::middle::const_eval::EvalHint::ExprTypeChecked;\n \n-use utils::{get_item_name, match_path, snippet, get_parent_expr, span_lint, walk_ptrs_ty,\n-            is_integer_literal};\n-use utils::span_help_and_lint;\n+use utils::{get_item_name, match_path, snippet, get_parent_expr, span_lint};\n+use utils::{span_help_and_lint, in_external_macro, walk_ptrs_ty, is_integer_literal};\n \n /// **What it does:** This lint checks for function arguments and let bindings denoted as `ref`. It is `Warn` by default.\n ///\n@@ -363,6 +362,9 @@ impl LateLintPass for UsedUnderscoreBinding {\n             },\n             _ => false\n         };\n+        if in_external_macro(cx, expr.span) {\n+            return\n+        }\n         if needs_lint {\n             cx.span_lint(USED_UNDERSCORE_BINDING, expr.span,\n                          \"used binding which is prefixed with an underscore. A leading underscore \\"}, {"sha": "49e1aa99cc0676c81f23d23c15d5ff07dd0b00a5", "filename": "tests/compile-fail/used_underscore_binding.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/tests%2Fcompile-fail%2Fused_underscore_binding.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a32445aa7fdc7d38fdfeb23e07536ff11c860bc/tests%2Fcompile-fail%2Fused_underscore_binding.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fused_underscore_binding.rs?ref=4a32445aa7fdc7d38fdfeb23e07536ff11c860bc", "patch": "@@ -9,7 +9,7 @@ fn prefix_underscore(_foo: u32) -> u32 {\n \n /// Test that we lint even if the use is within a macro expansion\n fn in_macro(_foo: u32) {\n-    println!(\"{}\", _foo); //~ ERROR used binding which is prefixed with an underscore\n+    println!(\"{}\", _foo); // doesn't warn, nut should #507\n }\n \n // Struct for testing use of fields prefixed with an underscore"}]}