{"sha": "a37953752d325e3a08ee7db27709a9d9c170b0ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzNzk1Mzc1MmQzMjVlM2EwOGVlN2RiMjc3MDlhOWQ5YzE3MGIwZmY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-06-10T07:49:06Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-06-11T17:41:43Z"}, "message": "use apfloat's FMA primitive", "tree": {"sha": "a96b8e1d4a904df019027d55f592341bf0cc75b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a96b8e1d4a904df019027d55f592341bf0cc75b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a37953752d325e3a08ee7db27709a9d9c170b0ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a37953752d325e3a08ee7db27709a9d9c170b0ff", "html_url": "https://github.com/rust-lang/rust/commit/a37953752d325e3a08ee7db27709a9d9c170b0ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a37953752d325e3a08ee7db27709a9d9c170b0ff/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e07ac335fe75aafd34394ff95bb2f153c11c967", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e07ac335fe75aafd34394ff95bb2f153c11c967", "html_url": "https://github.com/rust-lang/rust/commit/5e07ac335fe75aafd34394ff95bb2f153c11c967"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "451a97eeed724957ac774e3a675c0e110eb96738", "filename": "src/intrinsic.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a37953752d325e3a08ee7db27709a9d9c170b0ff/src%2Fintrinsic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a37953752d325e3a08ee7db27709a9d9c170b0ff/src%2Fintrinsic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsic.rs?ref=a37953752d325e3a08ee7db27709a9d9c170b0ff", "patch": "@@ -368,9 +368,9 @@ pub trait EvalContextExt<'a, 'mir, 'tcx: 'a+'mir>: crate::MiriEvalContextExt<'a,\n                 let a = this.read_scalar(args[0])?.to_f32()?;\n                 let b = this.read_scalar(args[1])?.to_f32()?;\n                 let c = this.read_scalar(args[2])?.to_f32()?;\n-                let res = (a*b).value + c;\n+                let res = a.mul_add(b, c).value;\n                 this.write_scalar(\n-                    Scalar::from_f32(res.value),\n+                    Scalar::from_f32(res),\n                     dest,\n                 )?;\n             }\n@@ -379,9 +379,9 @@ pub trait EvalContextExt<'a, 'mir, 'tcx: 'a+'mir>: crate::MiriEvalContextExt<'a,\n                 let a = this.read_scalar(args[0])?.to_f64()?;\n                 let b = this.read_scalar(args[1])?.to_f64()?;\n                 let c = this.read_scalar(args[2])?.to_f64()?;\n-                let res = (a*b).value + c;\n+                let res = a.mul_add(b, c).value;\n                 this.write_scalar(\n-                    Scalar::from_f64(res.value),\n+                    Scalar::from_f64(res),\n                     dest,\n                 )?;\n             }"}]}