{"sha": "70a839fd8f279b05e365bb41541c90ecb4a8f51a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwYTgzOWZkOGYyNzliMDVlMzY1YmI0MTU0MWM5MGVjYjRhOGY1MWE=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-11-22T15:15:13Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-22T15:15:13Z"}, "message": "Rollup merge of #79300 - GuillaumeGomez:hidden-feature-info, r=jyn514\n\nPrevent feature information to be hidden if it's on the impl directly\n\nFixes #79279.\n\nSo when a `#[doc(cfg...)]` is used on a trait impl directly, it's not hidden by the toggle.\n\n![Screenshot from 2020-11-22 14-40-11](https://user-images.githubusercontent.com/3050060/99905528-997fab00-2cd1-11eb-83be-ed06b0cb97df.png)\n\nr? `@jyn514`", "tree": {"sha": "6e7e5cfd596648b4797712372a32a13cb5a88cb8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e7e5cfd596648b4797712372a32a13cb5a88cb8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70a839fd8f279b05e365bb41541c90ecb4a8f51a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfuoCCCRBK7hj4Ov3rIwAAdHIIAF8QsKt3teUZy0I69fByZG2K\nNJr0K4xfv0bd+I1GCRJ5bFshlB30VVurqQPlo7djYYM/wgIjO8YANfNSHSl0uxm9\nCMwVwRBrY+/oZLHFFCuvncgWwoGpCfEvZqL59EVxlk+DP9I0t+voYk35l2iXC3lC\niLGcacCj8EKdjitPhpiC7uhcMtZRYBZsgTrz1NFAZLamZn2ajGwpN+AOMhPoNA0O\n9/krPs3srA0GjDPh+8DS54GFuRqPrX5jgk5LCWLMQaj05BXKN7eWhw71XmjGD8By\nSPRMEPvuKJMMcNYkk3m/3VXSCjWNqVjhDX28a2fQ4UqgcgIc1UAN053lQMK/M5Y=\n=QvlA\n-----END PGP SIGNATURE-----\n", "payload": "tree 6e7e5cfd596648b4797712372a32a13cb5a88cb8\nparent 5c982b7ca219dba478a455e0c5e169a0f14b20a8\nparent 28a94a3ae5a4149bdc3e795a1893b58f58913636\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1606058113 +0100\ncommitter GitHub <noreply@github.com> 1606058113 +0100\n\nRollup merge of #79300 - GuillaumeGomez:hidden-feature-info, r=jyn514\n\nPrevent feature information to be hidden if it's on the impl directly\n\nFixes #79279.\n\nSo when a `#[doc(cfg...)]` is used on a trait impl directly, it's not hidden by the toggle.\n\n![Screenshot from 2020-11-22 14-40-11](https://user-images.githubusercontent.com/3050060/99905528-997fab00-2cd1-11eb-83be-ed06b0cb97df.png)\n\nr? `@jyn514`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70a839fd8f279b05e365bb41541c90ecb4a8f51a", "html_url": "https://github.com/rust-lang/rust/commit/70a839fd8f279b05e365bb41541c90ecb4a8f51a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70a839fd8f279b05e365bb41541c90ecb4a8f51a/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5c982b7ca219dba478a455e0c5e169a0f14b20a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/5c982b7ca219dba478a455e0c5e169a0f14b20a8", "html_url": "https://github.com/rust-lang/rust/commit/5c982b7ca219dba478a455e0c5e169a0f14b20a8"}, {"sha": "28a94a3ae5a4149bdc3e795a1893b58f58913636", "url": "https://api.github.com/repos/rust-lang/rust/commits/28a94a3ae5a4149bdc3e795a1893b58f58913636", "html_url": "https://github.com/rust-lang/rust/commit/28a94a3ae5a4149bdc3e795a1893b58f58913636"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "b11bd66709327ca20f005035c3395391226ae7dd", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/70a839fd8f279b05e365bb41541c90ecb4a8f51a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/70a839fd8f279b05e365bb41541c90ecb4a8f51a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=70a839fd8f279b05e365bb41541c90ecb4a8f51a", "patch": "@@ -2332,12 +2332,18 @@ function defocusSearchBar() {\n             var dontApplyBlockRule = toggle.parentNode.parentNode.id !== \"main\";\n             if (action === \"show\") {\n                 removeClass(relatedDoc, \"fns-now-collapsed\");\n-                removeClass(docblock, \"hidden-by-usual-hider\");\n+                // Stability information is never hidden.\n+                if (hasClass(docblock, \"stability\") === false) {\n+                    removeClass(docblock, \"hidden-by-usual-hider\");\n+                }\n                 onEachLazy(toggle.childNodes, adjustToggle(false, dontApplyBlockRule));\n                 onEachLazy(relatedDoc.childNodes, implHider(false, dontApplyBlockRule));\n             } else if (action === \"hide\") {\n                 addClass(relatedDoc, \"fns-now-collapsed\");\n-                addClass(docblock, \"hidden-by-usual-hider\");\n+                // Stability information should be shown even when detailed info is hidden.\n+                if (hasClass(docblock, \"stability\") === false) {\n+                    addClass(docblock, \"hidden-by-usual-hider\");\n+                }\n                 onEachLazy(toggle.childNodes, adjustToggle(true, dontApplyBlockRule));\n                 onEachLazy(relatedDoc.childNodes, implHider(true, dontApplyBlockRule));\n             }"}]}