{"sha": "7fc7ebd520f16947f8356fdeb9061238e2fb4f0b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmYzdlYmQ1MjBmMTY5NDdmODM1NmZkZWI5MDYxMjM4ZTJmYjRmMGI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-11T21:38:55Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-11T21:41:55Z"}, "message": "The lexer's get_mark_str should slice by byte position, not char. Closes #654", "tree": {"sha": "dbadcb7d377fdaf14e5b0c23f0a2c7b4f55cde16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dbadcb7d377fdaf14e5b0c23f0a2c7b4f55cde16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b", "html_url": "https://github.com/rust-lang/rust/commit/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eef61a527d8d08f57df8309d42ba15d15e391a83", "url": "https://api.github.com/repos/rust-lang/rust/commits/eef61a527d8d08f57df8309d42ba15d15e391a83", "html_url": "https://github.com/rust-lang/rust/commit/eef61a527d8d08f57df8309d42ba15d15e391a83"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "46c3e0abb52532837a25ad27a4c0c85219fe3838", "filename": "src/comp/syntax/parse/lexer.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7fc7ebd520f16947f8356fdeb9061238e2fb4f0b/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fparse%2Flexer.rs?ref=7fc7ebd520f16947f8356fdeb9061238e2fb4f0b", "patch": "@@ -37,14 +37,15 @@ fn new_reader(&codemap::codemap cm, io::reader rdr, codemap::filemap filemap,\n                mutable uint col,\n                mutable uint pos,\n                mutable char ch,\n+               mutable uint mark_pos,\n                mutable uint mark_chpos,\n                mutable uint chpos,\n                mutable vec[str] strs,\n                codemap::filemap fm,\n                @interner::interner[str] itr) {\n         fn is_eof() -> bool { ret ch == -1 as char; }\n-        fn mark() { mark_chpos = chpos; }\n-        fn get_mark_str() -> str { ret str::slice(file, mark_chpos, chpos); }\n+        fn mark() { mark_pos = pos; mark_chpos = chpos; }\n+        fn get_mark_str() -> str { ret str::slice(file, mark_pos, pos); }\n         fn get_mark_chpos() -> uint { ret mark_chpos; }\n         fn get_chpos() -> uint { ret chpos; }\n         fn curr() -> char { ret ch; }\n@@ -80,7 +81,7 @@ fn new_reader(&codemap::codemap cm, io::reader rdr, codemap::filemap filemap,\n     auto file = str::unsafe_from_bytes(rdr.read_whole_stream());\n     let vec[str] strs = [];\n     auto rd =\n-        reader(cm, file, str::byte_len(file), 0u, 0u, -1 as char,\n+        reader(cm, file, str::byte_len(file), 0u, 0u, -1 as char, 0u,\n                filemap.start_pos, filemap.start_pos, strs, filemap, itr);\n     rd.init();\n     ret rd;"}]}