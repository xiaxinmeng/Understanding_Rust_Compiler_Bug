{"sha": "5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyMjJiOGFiYTNiMWMyYzY4NzA2YWFjZjY4Njk0MjNhOGU0ZmU2ZDU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-02-20T12:47:32Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-02-20T12:47:32Z"}, "message": "move all parsing related bits to a separate module", "tree": {"sha": "c8a6e999b8ac5f1f29bde86a2e0b3a53466bb369", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8a6e999b8ac5f1f29bde86a2e0b3a53466bb369"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "html_url": "https://github.com/rust-lang/rust/commit/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d0cda4bc84350961f3884e75a1c20e62c449ede", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d0cda4bc84350961f3884e75a1c20e62c449ede", "html_url": "https://github.com/rust-lang/rust/commit/9d0cda4bc84350961f3884e75a1c20e62c449ede"}], "stats": {"total": 125, "additions": 78, "deletions": 47}, "files": [{"sha": "755ccd8e00ef0a89d67d2aa982aae9cd91334017", "filename": "crates/ra_syntax/src/lib.rs", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Flib.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -18,13 +18,7 @@\n \n pub mod algo;\n pub mod ast;\n-mod lexer;\n-#[macro_use]\n-mod token_set;\n-mod grammar;\n-mod parser_api;\n-mod parser_impl;\n-mod reparsing;\n+mod parsing;\n mod string_lexing;\n mod syntax_kinds;\n /// Utilities for simple uses of the parser.\n@@ -36,10 +30,10 @@ mod ptr;\n pub use rowan::{SmolStr, TextRange, TextUnit};\n pub use crate::{\n     ast::AstNode,\n-    lexer::{tokenize, Token},\n     syntax_kinds::SyntaxKind,\n     syntax_node::{Direction, SyntaxError, SyntaxNode, WalkEvent, Location, TreeArc},\n     ptr::{SyntaxNodePtr, AstPtr},\n+    parsing::{tokenize, Token},\n };\n \n use ra_text_edit::AtomTextEdit;\n@@ -59,9 +53,7 @@ impl SourceFile {\n     }\n \n     pub fn parse(text: &str) -> TreeArc<SourceFile> {\n-        let tokens = tokenize(&text);\n-        let (green, errors) =\n-            parser_impl::parse_with(syntax_node::GreenBuilder::new(), text, &tokens, grammar::root);\n+        let (green, errors) = parsing::parse_text(text);\n         SourceFile::new(green, errors)\n     }\n \n@@ -70,7 +62,7 @@ impl SourceFile {\n     }\n \n     pub fn incremental_reparse(&self, edit: &AtomTextEdit) -> Option<TreeArc<SourceFile>> {\n-        reparsing::incremental_reparse(self.syntax(), edit, self.errors())\n+        parsing::incremental_reparse(self.syntax(), edit, self.errors())\n             .map(|(green_node, errors)| SourceFile::new(green_node, errors))\n     }\n "}, {"sha": "2c92d554eefce8adab0162807dbd671f305f385a", "filename": "crates/ra_syntax/src/parsing.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -0,0 +1,24 @@\n+#[macro_use]\n+mod token_set;\n+mod builder;\n+mod lexer;\n+mod parser_impl;\n+mod parser_api;\n+mod reparsing;\n+mod grammar;\n+\n+use crate::{\n+    parsing::builder::GreenBuilder,\n+    syntax_node::{GreenNode, SyntaxError},\n+};\n+\n+pub use self::lexer::{tokenize, Token};\n+\n+pub(crate) use self::reparsing::incremental_reparse;\n+\n+pub(crate) fn parse_text(text: &str) -> (GreenNode, Vec<SyntaxError>) {\n+    let tokens = tokenize(&text);\n+    let (green, errors) =\n+        parser_impl::parse_with(GreenBuilder::new(), text, &tokens, grammar::root);\n+    (green, errors)\n+}"}, {"sha": "9d7ad06fee69dc4be089c3ad49ea9d48937c63eb", "filename": "crates/ra_syntax/src/parsing/builder.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fbuilder.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,5 +1,5 @@\n use crate::{\n-    parser_impl::Sink,\n+    parsing::parser_impl::Sink,\n     syntax_node::{GreenNode, RaTypes, SyntaxError},\n     SmolStr, SyntaxKind,\n };", "previous_filename": "crates/ra_syntax/src/syntax_node/builder.rs"}, {"sha": "bf86443deb705383c351b0f40020c58254814ab1", "filename": "crates/ra_syntax/src/parsing/grammar.rs", "status": "renamed", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -44,9 +44,11 @@ pub(crate) use self::{\n     },\n };\n use crate::{\n-    parser_api::{CompletedMarker, Marker, Parser},\n-    token_set::TokenSet,\n     SyntaxKind::{self, *},\n+    parsing::{\n+        token_set::TokenSet,\n+        parser_api::{CompletedMarker, Marker, Parser}\n+    },\n };\n \n pub(crate) fn root(p: &mut Parser) {", "previous_filename": "crates/ra_syntax/src/grammar.rs"}, {"sha": "cd30e8a450c6192c9a9ef5ba3fec3a211db84646", "filename": "crates/ra_syntax/src/parsing/grammar/attributes.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fattributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fattributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fattributes.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/attributes.rs"}, {"sha": "d5a4f4d7b94bab8abaee0c485aab46dcad7817c9", "filename": "crates/ra_syntax/src/parsing/grammar/expressions.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/expressions.rs"}, {"sha": "e74305b6a94c222dd0c6e47ef816f295b04f33e4", "filename": "crates/ra_syntax/src/parsing/grammar/expressions/atom.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fexpressions%2Fatom.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/expressions/atom.rs"}, {"sha": "4b962c1f37f989d42942ed7d7b5ed896bd5a79ef", "filename": "crates/ra_syntax/src/parsing/grammar/items.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/items.rs"}, {"sha": "5a5852f83ad4658a1cae37ffe48c68af3b412b25", "filename": "crates/ra_syntax/src/parsing/grammar/items/consts.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fconsts.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/items/consts.rs"}, {"sha": "ff9b38f9c25d8dd28968a18c12049b69820b0354", "filename": "crates/ra_syntax/src/parsing/grammar/items/nominal.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fnominal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fnominal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fnominal.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/items/nominal.rs"}, {"sha": "d5a8ccd98e2b636da839e898cafd27586054d5eb", "filename": "crates/ra_syntax/src/parsing/grammar/items/traits.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Ftraits.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/items/traits.rs"}, {"sha": "5111d37ebda00819e9fbf57c7325d1d4a0b8aff2", "filename": "crates/ra_syntax/src/parsing/grammar/items/use_item.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fuse_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fuse_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fitems%2Fuse_item.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/items/use_item.rs"}, {"sha": "185386569aa01014c70627823de2fa9cddfb965e", "filename": "crates/ra_syntax/src/parsing/grammar/params.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fparams.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fparams.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fparams.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/params.rs"}, {"sha": "33a11886cb3085c50c0f5fb7dffcc5052bdb37a5", "filename": "crates/ra_syntax/src/parsing/grammar/paths.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpaths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpaths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpaths.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/paths.rs"}, {"sha": "9d7da639d5e812828fd18428bc48c3b4d78ca11c", "filename": "crates/ra_syntax/src/parsing/grammar/patterns.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Fpatterns.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/patterns.rs"}, {"sha": "f889419c51d22281271fc0838c397856cbe92251", "filename": "crates/ra_syntax/src/parsing/grammar/type_args.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_args.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/type_args.rs"}, {"sha": "40f99868206e84bb6b6f5d982aabb71b2e4b4ccf", "filename": "crates/ra_syntax/src/parsing/grammar/type_params.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftype_params.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/type_params.rs"}, {"sha": "adc189a292d5d319c32734a771d6c4010435724f", "filename": "crates/ra_syntax/src/parsing/grammar/types.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fgrammar%2Ftypes.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/grammar/types.rs"}, {"sha": "f9362120e1491e6755e2468e938b0e14a2e8d6dc", "filename": "crates/ra_syntax/src/parsing/lexer.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/lexer.rs"}, {"sha": "4235d2648ad3a903ab9d71655d16bdf70323f7ba", "filename": "crates/ra_syntax/src/parsing/lexer/classes.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fclasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fclasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fclasses.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/lexer/classes.rs"}, {"sha": "8bbbe659b35ea4a72035b56bdd9e148d2f708b73", "filename": "crates/ra_syntax/src/parsing/lexer/comments.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fcomments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fcomments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fcomments.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,4 +1,4 @@\n-use crate::lexer::ptr::Ptr;\n+use crate::parsing::lexer::ptr::Ptr;\n \n use crate::SyntaxKind::{self, *};\n ", "previous_filename": "crates/ra_syntax/src/lexer/comments.rs"}, {"sha": "7f6abe1d5c31d0d65821863ed87b2fdf94904594", "filename": "crates/ra_syntax/src/parsing/lexer/numbers.rs", "status": "renamed", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fnumbers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fnumbers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fnumbers.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,5 +1,7 @@\n-use crate::lexer::classes::*;\n-use crate::lexer::ptr::Ptr;\n+use crate::parsing::lexer::{\n+    ptr::Ptr,\n+    classes::*,\n+};\n \n use crate::SyntaxKind::{self, *};\n ", "previous_filename": "crates/ra_syntax/src/lexer/numbers.rs"}, {"sha": "c341c4176bbe85a74634fa44398383a9b80401ae", "filename": "crates/ra_syntax/src/parsing/lexer/ptr.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fptr.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "previous_filename": "crates/ra_syntax/src/lexer/ptr.rs"}, {"sha": "f74acff9e21bac578f1e0f77d4288bb7eda2a0d1", "filename": "crates/ra_syntax/src/parsing/lexer/strings.rs", "status": "renamed", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fstrings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fstrings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Flexer%2Fstrings.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,6 +1,7 @@\n-use crate::SyntaxKind::{self, *};\n-\n-use crate::lexer::ptr::Ptr;\n+use crate::{\n+    parsing::lexer::ptr::Ptr,\n+    SyntaxKind::{self, *},\n+};\n \n pub(crate) fn is_string_literal_start(c: char, c1: Option<char>, c2: Option<char>) -> bool {\n     match (c, c1, c2) {", "previous_filename": "crates/ra_syntax/src/lexer/strings.rs"}, {"sha": "781c407debb0290ec3fd9de3bbfd6c3b4b058add", "filename": "crates/ra_syntax/src/parsing/parser_api.rs", "status": "renamed", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_api.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,9 +1,11 @@\n use drop_bomb::DropBomb;\n \n use crate::{\n-    parser_impl::ParserImpl,\n-    token_set::TokenSet,\n     SyntaxKind::{self, ERROR},\n+    parsing::{\n+        token_set::TokenSet,\n+        parser_impl::ParserImpl\n+    },\n };\n \n /// `Parser` struct provides the low-level API for", "previous_filename": "crates/ra_syntax/src/parser_api.rs"}, {"sha": "c639d83e83b210b815cbc7db5fe883ccec15c0b6", "filename": "crates/ra_syntax/src/parsing/parser_impl.rs", "status": "renamed", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -4,18 +4,16 @@ mod input;\n use std::cell::Cell;\n \n use crate::{\n+    SmolStr,\n+    syntax_node::syntax_error::{ParseError, SyntaxError},\n+    parsing::{\n     lexer::Token,\n     parser_api::Parser,\n     parser_impl::{\n         event::{Event, EventProcessor},\n         input::{InputPosition, ParserInput},\n     },\n-    SmolStr,\n-    syntax_node::syntax_error::{\n-        ParseError,\n-        SyntaxError,\n-    },\n-};\n+}};\n \n use crate::SyntaxKind::{self, EOF, TOMBSTONE};\n ", "previous_filename": "crates/ra_syntax/src/parser_impl.rs"}, {"sha": "fb43e19cc6dd32f443c8282fe81f2688eccebb6c", "filename": "crates/ra_syntax/src/parsing/parser_impl/event.rs", "status": "renamed", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Fevent.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Fevent.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Fevent.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -7,9 +7,9 @@\n //! tree builder: the parser produces a stream of events like\n //! `start node`, `finish node`, and `FileBuilder` converts\n //! this stream to a real tree.\n+use std::mem;\n+\n use crate::{\n-    lexer::Token,\n-    parser_impl::Sink,\n     SmolStr,\n     SyntaxKind::{self, *},\n     TextRange, TextUnit,\n@@ -18,8 +18,11 @@ use crate::{\n         SyntaxError,\n         SyntaxErrorKind,\n     },\n+    parsing::{\n+        lexer::Token,\n+        parser_impl::Sink,\n+    },\n };\n-use std::mem;\n \n /// `Parser` produces a flat list of `Event`s.\n /// They are converted to a tree-structure in", "previous_filename": "crates/ra_syntax/src/parser_impl/event.rs"}, {"sha": "275d949189aaccee986372c554c0a5f6d230401f", "filename": "crates/ra_syntax/src/parsing/parser_impl/input.rs", "status": "renamed", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Fparser_impl%2Finput.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,4 +1,7 @@\n-use crate::{lexer::Token, SyntaxKind, SyntaxKind::EOF, TextRange, TextUnit};\n+use crate::{\n+    SyntaxKind, SyntaxKind::EOF, TextRange, TextUnit,\n+    parsing::lexer::Token,\n+};\n \n use std::ops::{Add, AddAssign};\n ", "previous_filename": "crates/ra_syntax/src/parser_impl/input.rs"}, {"sha": "994e7e212b2aa6d281ff3e2daa5d9337149251cd", "filename": "crates/ra_syntax/src/parsing/reparsing.rs", "status": "renamed", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Freparsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Freparsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Freparsing.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,10 +1,16 @@\n-use crate::algo;\n-use crate::grammar;\n-use crate::lexer::{tokenize, Token};\n-use crate::parser_api::Parser;\n-use crate::parser_impl;\n-use crate::syntax_node::{self, GreenNode, SyntaxError, SyntaxNode};\n-use crate::{SyntaxKind::*, TextRange, TextUnit};\n+use crate::{\n+    SyntaxKind::*, TextRange, TextUnit,\n+    algo,\n+    syntax_node::{GreenNode, SyntaxError, SyntaxNode},\n+    parsing::{\n+        grammar,\n+        parser_impl,\n+        builder::GreenBuilder,\n+        parser_api::Parser,\n+        lexer::{tokenize, Token},\n+    }\n+};\n+\n use ra_text_edit::AtomTextEdit;\n \n pub(crate) fn incremental_reparse(\n@@ -56,7 +62,7 @@ fn reparse_block<'node>(\n         return None;\n     }\n     let (green, new_errors) =\n-        parser_impl::parse_with(syntax_node::GreenBuilder::new(), &text, &tokens, reparser);\n+        parser_impl::parse_with(GreenBuilder::new(), &text, &tokens, reparser);\n     Some((node, green, new_errors))\n }\n ", "previous_filename": "crates/ra_syntax/src/reparsing.rs"}, {"sha": "5719fe5a21e05955dd6f9dce1ae37cb53b78b7a4", "filename": "crates/ra_syntax/src/parsing/token_set.rs", "status": "renamed", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Ftoken_set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fparsing%2Ftoken_set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fparsing%2Ftoken_set.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -4,19 +4,19 @@ use crate::SyntaxKind;\n pub(crate) struct TokenSet(u128);\n \n impl TokenSet {\n-    pub const fn empty() -> TokenSet {\n+    pub(crate) const fn empty() -> TokenSet {\n         TokenSet(0)\n     }\n \n-    pub const fn singleton(kind: SyntaxKind) -> TokenSet {\n+    pub(crate) const fn singleton(kind: SyntaxKind) -> TokenSet {\n         TokenSet(mask(kind))\n     }\n \n-    pub const fn union(self, other: TokenSet) -> TokenSet {\n+    pub(crate) const fn union(self, other: TokenSet) -> TokenSet {\n         TokenSet(self.0 | other.0)\n     }\n \n-    pub fn contains(&self, kind: SyntaxKind) -> bool {\n+    pub(crate) fn contains(&self, kind: SyntaxKind) -> bool {\n         self.0 & mask(kind) != 0\n     }\n }", "previous_filename": "crates/ra_syntax/src/token_set.rs"}, {"sha": "a0d7c32ecc84c29065a03f041e709d94c972615a", "filename": "crates/ra_syntax/src/syntax_node.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fsyntax_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5222b8aba3b1c2c68706aacf6869423a8e4fe6d5/crates%2Fra_syntax%2Fsrc%2Fsyntax_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fsyntax_node.rs?ref=5222b8aba3b1c2c68706aacf6869423a8e4fe6d5", "patch": "@@ -1,4 +1,3 @@\n-mod builder;\n pub mod syntax_error;\n mod syntax_text;\n \n@@ -8,7 +7,6 @@ use self::syntax_text::SyntaxText;\n use crate::{SmolStr, SyntaxKind, TextRange};\n use rowan::{Types, TransparentNewType};\n \n-pub(crate) use self::builder::GreenBuilder;\n pub use self::syntax_error::{SyntaxError, SyntaxErrorKind, Location};\n pub use rowan::WalkEvent;\n "}]}