{"sha": "d1c4d28eedf4ccead50afa21fbaf5966820405f6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxYzRkMjhlZWRmNGNjZWFkNTBhZmEyMWZiYWY1OTY2ODIwNDA1ZjY=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-06-03T16:06:17Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-06-03T16:09:21Z"}, "message": "Update list of built-in attributes", "tree": {"sha": "e96db1522ef7eac80c99b7fe4be83b3da089a9c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e96db1522ef7eac80c99b7fe4be83b3da089a9c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1c4d28eedf4ccead50afa21fbaf5966820405f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1c4d28eedf4ccead50afa21fbaf5966820405f6", "html_url": "https://github.com/rust-lang/rust/commit/d1c4d28eedf4ccead50afa21fbaf5966820405f6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1c4d28eedf4ccead50afa21fbaf5966820405f6/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9fdb8f90376c02ec2a267cf9eb3bdb7b6027e1e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/9fdb8f90376c02ec2a267cf9eb3bdb7b6027e1e6", "html_url": "https://github.com/rust-lang/rust/commit/9fdb8f90376c02ec2a267cf9eb3bdb7b6027e1e6"}], "stats": {"total": 38, "additions": 22, "deletions": 16}, "files": [{"sha": "39c7f84f7e4fda8c6967b6b128ce66a07d35f3b7", "filename": "crates/hir_def/src/builtin_attr.rs", "status": "modified", "additions": 22, "deletions": 16, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/d1c4d28eedf4ccead50afa21fbaf5966820405f6/crates%2Fhir_def%2Fsrc%2Fbuiltin_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1c4d28eedf4ccead50afa21fbaf5966820405f6/crates%2Fhir_def%2Fsrc%2Fbuiltin_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fbuiltin_attr.rs?ref=d1c4d28eedf4ccead50afa21fbaf5966820405f6", "patch": "@@ -2,7 +2,7 @@\n //!\n //! The actual definitions were copied from rustc's `compiler/rustc_feature/src/builtin_attrs.rs`.\n //!\n-//! It was last synchronized with upstream commit 2225ee1b62ff089917434aefd9b2bf509cfa087f.\n+//! It was last synchronized with upstream commit 835150e70288535bc57bb624792229b9dc94991d.\n //!\n //! The macros were adjusted to only expand to the attribute name, since that is all we need to do\n //! name resolution, and `BUILTIN_ATTRIBUTES` is almost entirely unchanged from the original, to\n@@ -58,7 +58,6 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n     ungated!(reexport_test_harness_main, Normal, template!(NameValueStr: \"name\")),\n \n     // Macros:\n-    ungated!(derive, Normal, template!(List: \"Trait1, Trait2, ...\")),\n     ungated!(automatically_derived, Normal, template!(Word)),\n     // FIXME(#14407)\n     ungated!(macro_use, Normal, template!(Word, List: \"name1, name2, ...\")),\n@@ -98,8 +97,8 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         template!(List: r#\"name = \"...\", /*opt*/ kind = \"dylib|static|...\", /*opt*/ wasm_import_module = \"...\"\"#),\n     ),\n     ungated!(link_name, AssumedUsed, template!(NameValueStr: \"name\")),\n-    ungated!(no_link, Normal, template!(Word)),\n-    ungated!(repr, Normal, template!(List: \"C\")),\n+    ungated!(no_link, AssumedUsed, template!(Word)),\n+    ungated!(repr, AssumedUsed, template!(List: \"C\")),\n     ungated!(export_name, AssumedUsed, template!(NameValueStr: \"name\")),\n     ungated!(link_section, AssumedUsed, template!(NameValueStr: \"name\")),\n     ungated!(no_mangle, AssumedUsed, template!(Word)),\n@@ -112,6 +111,10 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         const_eval_limit, CrateLevel, template!(NameValueStr: \"N\"), const_eval_limit,\n         experimental!(const_eval_limit)\n     ),\n+    gated!(\n+        move_size_limit, CrateLevel, template!(NameValueStr: \"N\"), large_assignments,\n+        experimental!(move_size_limit)\n+    ),\n \n     // Entry point:\n     ungated!(main, Normal, template!(Word)),\n@@ -140,6 +143,7 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         template!(List: \"address, memory, thread\"),\n         experimental!(no_sanitize)\n     ),\n+    gated!(no_coverage, AssumedUsed, template!(Word), experimental!(no_coverage)),\n \n     // FIXME: #14408 assume docs are used since rustdoc looks at them.\n     ungated!(doc, AssumedUsed, template!(List: \"hidden|inline|...\", NameValueStr: \"string\")),\n@@ -150,11 +154,6 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n \n     // Linking:\n     gated!(naked, AssumedUsed, template!(Word), naked_functions, experimental!(naked)),\n-    gated!(\n-        link_args, Normal, template!(NameValueStr: \"args\"),\n-        \"the `link_args` attribute is experimental and not portable across platforms, \\\n-        it is recommended to use `#[link(name = \\\"foo\\\")] instead\",\n-    ),\n     gated!(\n         link_ordinal, AssumedUsed, template!(List: \"ordinal\"), raw_dylib,\n         experimental!(link_ordinal)\n@@ -172,7 +171,7 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         \"custom test frameworks are an unstable feature\",\n     ),\n     // RFC #1268\n-    gated!(marker, Normal, template!(Word), marker_trait_attr, experimental!(marker)),\n+    gated!(marker, AssumedUsed, template!(Word), marker_trait_attr, experimental!(marker)),\n     gated!(\n         thread_local, AssumedUsed, template!(Word),\n         \"`#[thread_local]` is an experimental feature, and does not currently handle destructors\",\n@@ -291,7 +290,7 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n     // Internal attributes, Macro related:\n     // ==========================================================================\n \n-    rustc_attr!(rustc_builtin_macro, AssumedUsed, template!(Word), IMPL_DETAIL),\n+    rustc_attr!(rustc_builtin_macro, AssumedUsed, template!(Word, NameValueStr: \"name\"), IMPL_DETAIL),\n     rustc_attr!(rustc_proc_macro_decls, Normal, template!(Word), INTERNAL_UNSTABLE),\n     rustc_attr!(\n         rustc_macro_transparency, AssumedUsed,\n@@ -319,7 +318,7 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n     // ==========================================================================\n \n     rustc_attr!(rustc_promotable, AssumedUsed, template!(Word), IMPL_DETAIL),\n-    rustc_attr!(rustc_args_required_const, AssumedUsed, template!(List: \"N\"), INTERNAL_UNSTABLE),\n+    rustc_attr!(rustc_legacy_const_generics, AssumedUsed, template!(List: \"N\"), INTERNAL_UNSTABLE),\n \n     // ==========================================================================\n     // Internal attributes, Layout related:\n@@ -380,13 +379,23 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         rustc_specialization_trait, Normal, template!(Word),\n         \"the `#[rustc_specialization_trait]` attribute is used to check specializations\"\n     ),\n+    rustc_attr!(\n+        rustc_main, Normal, template!(Word),\n+        \"the `#[rustc_main]` attribute is used internally to specify test entry point function\",\n+    ),\n+    rustc_attr!(\n+        rustc_skip_array_during_method_dispatch, Normal, template!(Word),\n+        \"the `#[rustc_skip_array_during_method_dispatch]` attribute is used to exclude a trait \\\n+        from method dispatch when the receiver is an array, for compatibility in editions < 2021.\"\n+    ),\n \n     // ==========================================================================\n     // Internal attributes, Testing:\n     // ==========================================================================\n \n     rustc_attr!(TEST, rustc_outlives, Normal, template!(Word)),\n     rustc_attr!(TEST, rustc_capture_analysis, Normal, template!(Word)),\n+    rustc_attr!(TEST, rustc_insignificant_dtor, Normal, template!(Word)),\n     rustc_attr!(TEST, rustc_variance, Normal, template!(Word)),\n     rustc_attr!(TEST, rustc_layout, Normal, template!(List: \"field1, field2, ...\")),\n     rustc_attr!(TEST, rustc_regions, Normal, template!(Word)),\n@@ -395,12 +404,9 @@ pub const INERT_ATTRIBUTES: &[BuiltinAttribute] = &[\n         template!(Word, List: \"delay_span_bug_from_inside_query\")\n     ),\n     rustc_attr!(TEST, rustc_dump_user_substs, AssumedUsed, template!(Word)),\n+    rustc_attr!(TEST, rustc_evaluate_where_clauses, AssumedUsed, template!(Word)),\n     rustc_attr!(TEST, rustc_if_this_changed, AssumedUsed, template!(Word, List: \"DepNode\")),\n     rustc_attr!(TEST, rustc_then_this_would_need, AssumedUsed, template!(List: \"DepNode\")),\n-    rustc_attr!(\n-        TEST, rustc_dirty, AssumedUsed,\n-        template!(List: r#\"cfg = \"...\", /*opt*/ label = \"...\", /*opt*/ except = \"...\"\"#),\n-    ),\n     rustc_attr!(\n         TEST, rustc_clean, AssumedUsed,\n         template!(List: r#\"cfg = \"...\", /*opt*/ label = \"...\", /*opt*/ except = \"...\"\"#),"}]}