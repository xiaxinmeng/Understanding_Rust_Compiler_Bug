{"sha": "a65421651adfcd5123153a847c075b5a14465f1d", "node_id": "C_kwDOAAsO6NoAKGE2NTQyMTY1MWFkZmNkNTEyMzE1M2E4NDdjMDc1YjVhMTQ0NjVmMWQ", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-11-20T02:54:43Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-11-20T02:58:25Z"}, "message": "rustdoc: Record aliases as Symbols", "tree": {"sha": "0b776a908b02e0a1d368ed4c808ca7a3e8ab1fe2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b776a908b02e0a1d368ed4c808ca7a3e8ab1fe2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a65421651adfcd5123153a847c075b5a14465f1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a65421651adfcd5123153a847c075b5a14465f1d", "html_url": "https://github.com/rust-lang/rust/commit/a65421651adfcd5123153a847c075b5a14465f1d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a65421651adfcd5123153a847c075b5a14465f1d/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8b8f1e069fd6b81cdedf2d7ef80460a7a51d36ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b8f1e069fd6b81cdedf2d7ef80460a7a51d36ef", "html_url": "https://github.com/rust-lang/rust/commit/8b8f1e069fd6b81cdedf2d7ef80460a7a51d36ef"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "ea43797b5bf7946986a259f99850023157cea2fe", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=a65421651adfcd5123153a847c075b5a14465f1d", "patch": "@@ -1114,24 +1114,24 @@ impl Attributes {\n         if self.doc_strings.is_empty() { None } else { Some(self.doc_strings.iter().collect()) }\n     }\n \n-    crate fn get_doc_aliases(&self) -> Box<[String]> {\n+    crate fn get_doc_aliases(&self) -> Box<[Symbol]> {\n         let mut aliases = FxHashSet::default();\n \n         for attr in self.other_attrs.lists(sym::doc).filter(|a| a.has_name(sym::alias)) {\n             if let Some(values) = attr.meta_item_list() {\n                 for l in values {\n                     match l.literal().unwrap().kind {\n                         ast::LitKind::Str(s, _) => {\n-                            aliases.insert(s.as_str().to_string());\n+                            aliases.insert(s);\n                         }\n                         _ => unreachable!(),\n                     }\n                 }\n             } else {\n-                aliases.insert(attr.value_str().map(|s| s.to_string()).unwrap());\n+                aliases.insert(attr.value_str().unwrap());\n             }\n         }\n-        aliases.into_iter().collect::<Vec<String>>().into()\n+        aliases.into_iter().collect::<Vec<_>>().into()\n     }\n }\n "}, {"sha": "9aa69d94215ded7281c96f0fb1a33c3dbade33eb", "filename": "src/librustdoc/html/render/cache.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs?ref=a65421651adfcd5123153a847c075b5a14465f1d", "patch": "@@ -70,7 +70,7 @@ crate fn build_index<'tcx>(krate: &clean::Crate, cache: &mut Cache, tcx: TyCtxt<\n     // Set up alias indexes.\n     for (i, item) in search_index.iter().enumerate() {\n         for alias in &item.aliases[..] {\n-            aliases.entry(alias.to_lowercase()).or_insert_with(Vec::new).push(i);\n+            aliases.entry(alias.as_str().to_lowercase()).or_default().push(i);\n         }\n     }\n "}, {"sha": "ffd09663f8240700efe2c005ecf64a815700c283", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a65421651adfcd5123153a847c075b5a14465f1d/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=a65421651adfcd5123153a847c075b5a14465f1d", "patch": "@@ -103,7 +103,7 @@ crate struct IndexItem {\n     crate parent: Option<DefId>,\n     crate parent_idx: Option<usize>,\n     crate search_type: Option<IndexItemFunctionType>,\n-    crate aliases: Box<[String]>,\n+    crate aliases: Box<[Symbol]>,\n }\n \n /// A type used for the search index."}]}