{"sha": "97c0258bc07efe0cc41b7420a2294040e254d0b2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk3YzAyNThiYzA3ZWZlMGNjNDFiNzQyMGEyMjk0MDQwZTI1NGQwYjI=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-02-11T20:38:47Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-02-11T20:38:47Z"}, "message": "Merge #51\n\n51: G: for type r=matklad a=matklad\n\nbors r+", "tree": {"sha": "8ec42959ece0d41606416bd43c2dcccedbf5fb0d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ec42959ece0d41606416bd43c2dcccedbf5fb0d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/97c0258bc07efe0cc41b7420a2294040e254d0b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/97c0258bc07efe0cc41b7420a2294040e254d0b2", "html_url": "https://github.com/rust-lang/rust/commit/97c0258bc07efe0cc41b7420a2294040e254d0b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/97c0258bc07efe0cc41b7420a2294040e254d0b2/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "a6f9b0414cf5bf49ad7f714b9d3fe5af91a16404", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6f9b0414cf5bf49ad7f714b9d3fe5af91a16404", "html_url": "https://github.com/rust-lang/rust/commit/a6f9b0414cf5bf49ad7f714b9d3fe5af91a16404"}, {"sha": "c8910b0683dfc9ad88d440c22cef71c263837997", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8910b0683dfc9ad88d440c22cef71c263837997", "html_url": "https://github.com/rust-lang/rust/commit/c8910b0683dfc9ad88d440c22cef71c263837997"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "fbb3c384ab21bb284d4dd541111fab68f6fa090f", "filename": "grammar.ron", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/97c0258bc07efe0cc41b7420a2294040e254d0b2/grammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/97c0258bc07efe0cc41b7420a2294040e254d0b2/grammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/grammar.ron?ref=97c0258bc07efe0cc41b7420a2294040e254d0b2", "patch": "@@ -111,6 +111,7 @@ Grammar(\n         \"REFERENCE_TYPE\",\n         \"PLACEHOLDER_TYPE\",\n         \"FN_POINTER_TYPE\",\n+        \"FOR_TYPE\",\n \n         \"EXTERN_BLOCK\",\n         \"ENUM_VARIANT\","}, {"sha": "c25517a514993dc70c20f2bd45beb6ed662db305", "filename": "src/parser/grammar/types.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/97c0258bc07efe0cc41b7420a2294040e254d0b2/src%2Fparser%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97c0258bc07efe0cc41b7420a2294040e254d0b2/src%2Fparser%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Ftypes.rs?ref=97c0258bc07efe0cc41b7420a2294040e254d0b2", "patch": "@@ -9,6 +9,7 @@ pub(super) fn type_(p: &mut Parser) {\n         AMPERSAND => reference_type(p),\n         UNDERSCORE => placeholder_type(p),\n         FN_KW | UNSAFE_KW | EXTERN_KW => fn_pointer_type(p),\n+        FOR_KW => for_type(p),\n         IDENT => path_type(p),\n         _ => {\n             p.error(\"expected type\");\n@@ -166,6 +167,17 @@ fn fn_pointer_type(p: &mut Parser) {\n     m.complete(p, FN_POINTER_TYPE);\n }\n \n+// test for_type\n+// type A = for<'a> fn() -> ();\n+fn for_type(p: &mut Parser) {\n+    assert!(p.at(FOR_KW));\n+    let m = p.start();\n+    p.bump();\n+    type_params::list(p);\n+    type_(p);\n+    m.complete(p, FOR_TYPE);\n+}\n+\n fn path_type(p: &mut Parser) {\n     assert!(p.at(IDENT));\n     let m = p.start();"}, {"sha": "537a80417ef2f88632eb4d4dbf7892f8157cf437", "filename": "src/syntax_kinds.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/97c0258bc07efe0cc41b7420a2294040e254d0b2/src%2Fsyntax_kinds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97c0258bc07efe0cc41b7420a2294040e254d0b2/src%2Fsyntax_kinds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsyntax_kinds.rs?ref=97c0258bc07efe0cc41b7420a2294040e254d0b2", "patch": "@@ -109,6 +109,7 @@ pub enum SyntaxKind {\n     REFERENCE_TYPE,\n     PLACEHOLDER_TYPE,\n     FN_POINTER_TYPE,\n+    FOR_TYPE,\n     EXTERN_BLOCK,\n     ENUM_VARIANT,\n     NAMED_FIELD,\n@@ -244,6 +245,7 @@ impl SyntaxKind {\n             REFERENCE_TYPE => &SyntaxInfo { name: \"REFERENCE_TYPE\" },\n             PLACEHOLDER_TYPE => &SyntaxInfo { name: \"PLACEHOLDER_TYPE\" },\n             FN_POINTER_TYPE => &SyntaxInfo { name: \"FN_POINTER_TYPE\" },\n+            FOR_TYPE => &SyntaxInfo { name: \"FOR_TYPE\" },\n             EXTERN_BLOCK => &SyntaxInfo { name: \"EXTERN_BLOCK\" },\n             ENUM_VARIANT => &SyntaxInfo { name: \"ENUM_VARIANT\" },\n             NAMED_FIELD => &SyntaxInfo { name: \"NAMED_FIELD\" },"}, {"sha": "4d6a18c6bb4ee8e6a3a361e6d7dfcb64b9886b3b", "filename": "tests/data/parser/inline/0031_for_type.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/97c0258bc07efe0cc41b7420a2294040e254d0b2/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97c0258bc07efe0cc41b7420a2294040e254d0b2/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.rs?ref=97c0258bc07efe0cc41b7420a2294040e254d0b2", "patch": "@@ -0,0 +1 @@\n+type A = for<'a> fn() -> ();"}, {"sha": "0211950bc61333fa0448d5a761b82c19fa91d8d9", "filename": "tests/data/parser/inline/0031_for_type.txt", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/97c0258bc07efe0cc41b7420a2294040e254d0b2/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.txt", "raw_url": "https://github.com/rust-lang/rust/raw/97c0258bc07efe0cc41b7420a2294040e254d0b2/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0031_for_type.txt?ref=97c0258bc07efe0cc41b7420a2294040e254d0b2", "patch": "@@ -0,0 +1,29 @@\n+FILE@[0; 29)\n+  TYPE_ITEM@[0; 29)\n+    TYPE_KW@[0; 4)\n+    NAME@[4; 7)\n+      WHITESPACE@[4; 5)\n+      IDENT@[5; 6) \"A\"\n+      WHITESPACE@[6; 7)\n+    EQ@[7; 8)\n+    FOR_TYPE@[8; 27)\n+      WHITESPACE@[8; 9)\n+      FOR_KW@[9; 12)\n+      TYPE_PARAM_LIST@[12; 17)\n+        L_ANGLE@[12; 13)\n+        LIFETIME_PARAM@[13; 15)\n+          LIFETIME@[13; 15) \"'a\"\n+        R_ANGLE@[15; 16)\n+        WHITESPACE@[16; 17)\n+      FN_POINTER_TYPE@[17; 27)\n+        FN_KW@[17; 19)\n+        L_PAREN@[19; 20)\n+        R_PAREN@[20; 21)\n+        WHITESPACE@[21; 22)\n+        THIN_ARROW@[22; 24)\n+        TUPLE_TYPE@[24; 27)\n+          WHITESPACE@[24; 25)\n+          L_PAREN@[25; 26)\n+          R_PAREN@[26; 27)\n+    SEMI@[27; 28)\n+    WHITESPACE@[28; 29)"}]}