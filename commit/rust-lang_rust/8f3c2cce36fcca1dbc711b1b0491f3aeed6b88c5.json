{"sha": "8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhmM2MyY2NlMzZmY2NhMWRiYzcxMWIxYjA0OTFmM2FlZWQ2Yjg4YzU=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-05-11T22:18:05Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-11T22:18:05Z"}, "message": "Rollup merge of #85191 - GuillaumeGomez:improve-rustdoc-gui-tester, r=Mark-Simulacrum\n\nImprove rustdoc gui tester\n\nI cherry-picked the commit from https://github.com/rust-lang/rust/pull/84834 (and modified it a bit). I also used this opportunity to update it to last version (forgot to update GUI test in https://github.com/rust-lang/rust/pull/85074, really can't wait to make https://github.com/rust-lang/rust/pull/84586 finally work).\n\ncc `@Mark-Simulacrum` for the changes in bootstrap.\n\nr? `@jsha`", "tree": {"sha": "f8826bcbf2a2d71ce67a98419fe557b439b9aaf8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f8826bcbf2a2d71ce67a98419fe557b439b9aaf8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgmwKeCRBK7hj4Ov3rIwAANloIAKTVP/DlxHAtu7ZpaBzTlxWO\np9FXb2VQbvR4bqjVf6Dg2Ak/11ML/cDk6Lz0Y7VavI9aFk5U1w6cJjrcuFXqXDnJ\nrOuzYAMpnmUO/Zy1cx10+flK6ZXTmLgYVw48bl/P/b1vKI6lD3NHAksQ+fpkk0h+\nlF/e9QPZ7RyRQ/Z8Oqj9BJXcJryiHF5Q5EjgPKnX4re40CUZ/UPaiTCP7KqdBmtC\n1A+jgr5LZyQHAcwb0bNZaTDQywwtH+Gx30433WVatrFPYLNop9t495fesVlE0jxx\nLFaFNEJqZrVdF7qM0UaaZJ6NNK2QjWakf9x0NaNeNa1kbXL7a/UjWmu3yo3dRnA=\n=qYyv\n-----END PGP SIGNATURE-----\n", "payload": "tree f8826bcbf2a2d71ce67a98419fe557b439b9aaf8\nparent c4c654f422e34530f2728c0aa4d89bd837dbfd8b\nparent 6b9499085be274226bfc3eb2434bea4e0e90096d\nauthor Yuki Okushi <jtitor@2k36.org> 1620771485 +0900\ncommitter GitHub <noreply@github.com> 1620771485 +0900\n\nRollup merge of #85191 - GuillaumeGomez:improve-rustdoc-gui-tester, r=Mark-Simulacrum\n\nImprove rustdoc gui tester\n\nI cherry-picked the commit from https://github.com/rust-lang/rust/pull/84834 (and modified it a bit). I also used this opportunity to update it to last version (forgot to update GUI test in https://github.com/rust-lang/rust/pull/85074, really can't wait to make https://github.com/rust-lang/rust/pull/84586 finally work).\n\ncc `@Mark-Simulacrum` for the changes in bootstrap.\n\nr? `@jsha`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "html_url": "https://github.com/rust-lang/rust/commit/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4c654f422e34530f2728c0aa4d89bd837dbfd8b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4c654f422e34530f2728c0aa4d89bd837dbfd8b", "html_url": "https://github.com/rust-lang/rust/commit/c4c654f422e34530f2728c0aa4d89bd837dbfd8b"}, {"sha": "6b9499085be274226bfc3eb2434bea4e0e90096d", "url": "https://api.github.com/repos/rust-lang/rust/commits/6b9499085be274226bfc3eb2434bea4e0e90096d", "html_url": "https://github.com/rust-lang/rust/commit/6b9499085be274226bfc3eb2434bea4e0e90096d"}], "stats": {"total": 70, "additions": 43, "deletions": 27}, "files": [{"sha": "0e9c561c68994820348a175bd5d71b961e2994bb", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -827,17 +827,30 @@ impl Step for RustdocGUI {\n             }\n \n             let out_dir = builder.test_out(self.target).join(\"rustdoc-gui\");\n-            let mut command = builder.rustdoc_cmd(self.compiler);\n-            command.arg(\"src/test/rustdoc-gui/lib.rs\").arg(\"-o\").arg(&out_dir);\n-            builder.run(&mut command);\n \n+            // We remove existing folder to be sure there won't be artifacts remaining.\n+            let _ = fs::remove_dir_all(&out_dir);\n+\n+            // We generate docs for the libraries present in the rustdoc-gui's src folder.\n+            let libs_dir = builder.build.src.join(\"src/test/rustdoc-gui/src\");\n+            for entry in libs_dir.read_dir().expect(\"read_dir call failed\") {\n+                let entry = entry.expect(\"invalid entry\");\n+                let path = entry.path();\n+                if path.extension().map(|e| e == \"rs\").unwrap_or(false) {\n+                    let mut command = builder.rustdoc_cmd(self.compiler);\n+                    command.arg(path).arg(\"-o\").arg(&out_dir);\n+                    builder.run(&mut command);\n+                }\n+            }\n+\n+            // We now run GUI tests.\n             let mut command = Command::new(&nodejs);\n             command\n-                .arg(\"src/tools/rustdoc-gui/tester.js\")\n+                .arg(builder.build.src.join(\"src/tools/rustdoc-gui/tester.js\"))\n                 .arg(\"--doc-folder\")\n-                .arg(out_dir.join(\"test_docs\"))\n+                .arg(out_dir)\n                 .arg(\"--tests-folder\")\n-                .arg(\"src/test/rustdoc-gui\");\n+                .arg(builder.build.src.join(\"src/test/rustdoc-gui\"));\n             builder.run(&mut command);\n         } else {\n             builder.info(\"No nodejs found, skipping \\\"src/test/rustdoc-gui\\\" tests\");"}, {"sha": "d014ed60eb039e737b36b93ed819e25b0b235425", "filename": "src/test/rustdoc-gui/basic-code.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,3 +1,3 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n click: \".srclink\"\n assert: (\".line-numbers\", 1)"}, {"sha": "44fcec3393744dedd21752a821bda94875581b04", "filename": "src/test/rustdoc-gui/basic.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fbasic.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fbasic.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fbasic.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,4 +1,4 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n assert: (\"#functions\")\n goto: ./struct.Foo.html\n assert: (\"div.type-decl\")"}, {"sha": "d64ee0261370c9bc327c8c315c8e5df25858f7fb", "filename": "src/test/rustdoc-gui/check_info_sign_position.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,4 +1,4 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n goto: ./fn.check_list_code_block.html\n // If the codeblock is the first element of the docblock, the information tooltip must have\n // have some top margin to avoid going over the toggle (the \"[+]\")."}, {"sha": "7e7003d4340a3ef281913cdea9563417219b54ca", "filename": "src/test/rustdoc-gui/code-sidebar-toggle.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,4 +1,4 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n click: \".srclink\"\n click: \"#sidebar-toggle\"\n wait-for: 500"}, {"sha": "1248d11200e6c5f27b51e7a17342f08da84613ad", "filename": "src/test/rustdoc-gui/hash-item-expansion.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,5 +1,5 @@\n // This test ensures that the element corresponding to the hash is displayed.\n-goto: file://|DOC_PATH|/struct.Foo.html#method.borrow\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html#method.borrow\n // In the blanket implementations list, \"Borrow\" is the second one, hence the \":nth(2)\".\n assert: (\"#blanket-implementations-list > details:nth-child(2)\", \"open\", \"\")\n // Please note the \"\\\" below is needed because otherwise \".borrow\" would be interpreted as"}, {"sha": "3f1e7ec4a789c17db69cd05b2a84b6cfa6f5e6da", "filename": "src/test/rustdoc-gui/impl-default-expansion.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,3 +1,3 @@\n // This test ensures that the impl blocks are open by default.\n-goto: file://|DOC_PATH|/struct.Foo.html\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n assert: (\"#main > details.implementors-toggle\", \"open\", \"\")"}, {"sha": "7d3490e9d9410b4ab9eae0bdbd49c4a357010b34", "filename": "src/test/rustdoc-gui/list_code_block.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Flist_code_block.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Flist_code_block.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Flist_code_block.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,3 +1,3 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n goto: ./fn.check_list_code_block.html\n assert: (\"pre.rust.fn\")"}, {"sha": "5c95db70aecdd46a25f2926967a0d9a5e58dbf10", "filename": "src/test/rustdoc-gui/search-input-mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsearch-input-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsearch-input-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-input-mobile.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,6 +1,6 @@\n // Test to ensure that you can click on the search input, whatever the width.\n // The PR which fixed it is: https://github.com/rust-lang/rust/pull/81592\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n size: (463, 700)\n // We first check that the search input isn't already focused.\n assert-false: (\"input.search-input:focus\")"}, {"sha": "c828c72e910d592e104e7a1c4b408dbde90f4114", "filename": "src/test/rustdoc-gui/search-tab-selection-if-current-is-empty.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,19 +1,19 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"Foo\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n assert: (\"#titles > button:nth-of-type(1)\", \"class\", \"selected\")\n \n // To go back to the original \"state\"\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> String\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // With this search, only the last tab shouldn't be empty so it should be selected.\n assert: (\"#titles > button:nth-of-type(3)\", \"class\", \"selected\")\n \n // To go back to the original \"state\"\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> Something\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\""}, {"sha": "884c38d85fbdba6bf6a6f829332d2cfbd039d386", "filename": "src/test/rustdoc-gui/shortcuts.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fshortcuts.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,5 +1,5 @@\n // Check that the various shortcuts are working.\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n // We first check that the search input isn't already focused.\n assert-false: \"input.search-input:focus\"\n press-key: \"s\""}, {"sha": "ff33a541a1801642dd1164f84d2623e58c16a611", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,11 +1,11 @@\n-goto: file://|DOC_PATH|/../src/test_docs/lib.rs.html\n+goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // Check that we can click on the line number.\n click: (40, 224) // This is the position of the span for line 4.\n // Unfortunately, \"#4\" isn't a valid query selector, so we have to go around that limitation\n // by instead getting the nth span.\n assert: (\".line-numbers > span:nth-child(4)\", \"class\", \"line-highlighted\")\n // We now check that the good spans are highlighted\n-goto: file://|DOC_PATH|/../src/test_docs/lib.rs.html#4-6\n+goto: file://|DOC_PATH|/src/test_docs/lib.rs.html#4-6\n assert-false: (\".line-numbers > span:nth-child(3)\", \"class\", \"line-highlighted\")\n assert: (\".line-numbers > span:nth-child(4)\", \"class\", \"line-highlighted\")\n assert: (\".line-numbers > span:nth-child(5)\", \"class\", \"line-highlighted\")"}, {"sha": "eeba3e3f9070df5b75ea8ff101f5fd106c64c4be", "filename": "src/test/rustdoc-gui/src/lib.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib.rs?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "previous_filename": "src/test/rustdoc-gui/lib.rs"}, {"sha": "bc9063edd1e7a460b3d0d6d615395e0627457b41", "filename": "src/test/rustdoc-gui/theme-change.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftheme-change.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,4 +1,4 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n click: \"#theme-picker\"\n click: \"#theme-choices > button:first-child\"\n wait-for: 500"}, {"sha": "062bc7d51e54263993f9cda0068d24c200b93f38", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,7 +1,10 @@\n-goto: file://|DOC_PATH|/index.html\n+goto: file://|DOC_PATH|/test_docs/index.html\n+assert: (\"#main > details.top-doc\", \"open\", \"\")\n click: \"#toggle-all-docs\"\n-wait-for: 5000\n-assert: (\"#main > div.docblock.hidden-by-usual-hider\")\n+wait-for: 1000\n+// This is now collapsed so there shouldn't be the \"open\" attribute on details.\n+assert-false: (\"#main > details.top-doc\", \"open\", \"\")\n click: \"#toggle-all-docs\"\n-wait-for: 5000\n-assert: (\"#main > div.docblock.hidden-by-usual-hider\", 0)\n+wait-for: 1000\n+// Not collapsed anymore so the \"open\" attribute should be back.\n+assert: (\"#main > details.top-doc\", \"open\", \"\")"}, {"sha": "2e9f85336ecd8f4960a3098501d74318db23f2c6", "filename": "src/test/rustdoc-gui/trait-sidebar-item-order.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml?ref=8f3c2cce36fcca1dbc711b1b0491f3aeed6b88c5", "patch": "@@ -1,4 +1,4 @@\n-goto: file://|DOC_PATH|/trait.AnotherOne.html\n+goto: file://|DOC_PATH|/test_docs/trait.AnotherOne.html\n assert: (\".sidebar-links a:nth-of-type(1)\", \"another\")\n assert: (\".sidebar-links a:nth-of-type(2)\", \"func1\")\n assert: (\".sidebar-links a:nth-of-type(3)\", \"func2\")"}]}