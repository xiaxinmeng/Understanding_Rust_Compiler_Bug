{"sha": "76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2Y2YxYjhiZDAzMTQyZWFjZWUzYmQzMWNhNDY1MWYwY2UwNDMxY2E=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-07-09T13:33:42Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-07-28T14:10:43Z"}, "message": "Add test for const panic in Rust 2021.", "tree": {"sha": "18a04df420dd49b49271ebce86caf3376c8ae0dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/18a04df420dd49b49271ebce86caf3376c8ae0dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "html_url": "https://github.com/rust-lang/rust/commit/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91d0823dffc29dc3e7b09791469d0c7b8beb2407", "url": "https://api.github.com/repos/rust-lang/rust/commits/91d0823dffc29dc3e7b09791469d0c7b8beb2407", "html_url": "https://github.com/rust-lang/rust/commit/91d0823dffc29dc3e7b09791469d0c7b8beb2407"}], "stats": {"total": 94, "additions": 94, "deletions": 0}, "files": [{"sha": "daef34cd6a3062602ebd1a0d9e332a5d0f0408dc", "filename": "src/test/ui/consts/const-eval/const_panic_2021.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.rs?ref=76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "patch": "@@ -0,0 +1,27 @@\n+// edition:2021\n+#![feature(const_panic)]\n+#![crate_type = \"lib\"]\n+\n+const A: () = std::panic!(\"bl\u00e5haj\");\n+//~^ ERROR evaluation of constant value failed\n+\n+const B: () = std::panic!();\n+//~^ ERROR evaluation of constant value failed\n+\n+const C: () = std::unreachable!();\n+//~^ ERROR evaluation of constant value failed\n+\n+const D: () = std::unimplemented!();\n+//~^ ERROR evaluation of constant value failed\n+\n+const E: () = core::panic!(\"shark\");\n+//~^ ERROR evaluation of constant value failed\n+\n+const F: () = core::panic!();\n+//~^ ERROR evaluation of constant value failed\n+\n+const G: () = core::unreachable!();\n+//~^ ERROR evaluation of constant value failed\n+\n+const H: () = core::unimplemented!();\n+//~^ ERROR evaluation of constant value failed"}, {"sha": "c1bdab3693d11babcf1bb9f60b9371ed6546227b", "filename": "src/test/ui/consts/const-eval/const_panic_2021.stderr", "status": "added", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/76cf1b8bd03142eacee3bd31ca4651f0ce0431ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_panic_2021.stderr?ref=76cf1b8bd03142eacee3bd31ca4651f0ce0431ca", "patch": "@@ -0,0 +1,67 @@\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:5:15\n+   |\n+LL | const A: () = std::panic!(\"bl\u00e5haj\");\n+   |               ^^^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'bl\u00e5haj', $DIR/const_panic_2021.rs:5:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2021` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:8:15\n+   |\n+LL | const B: () = std::panic!();\n+   |               ^^^^^^^^^^^^^ the evaluated program panicked at 'explicit panic', $DIR/const_panic_2021.rs:8:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2021` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:11:15\n+   |\n+LL | const C: () = std::unreachable!();\n+   |               ^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'internal error: entered unreachable code', $DIR/const_panic_2021.rs:11:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2015` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:14:15\n+   |\n+LL | const D: () = std::unimplemented!();\n+   |               ^^^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'not implemented', $DIR/const_panic_2021.rs:14:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2015` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:17:15\n+   |\n+LL | const E: () = core::panic!(\"shark\");\n+   |               ^^^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'shark', $DIR/const_panic_2021.rs:17:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2021` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:20:15\n+   |\n+LL | const F: () = core::panic!();\n+   |               ^^^^^^^^^^^^^^ the evaluated program panicked at 'explicit panic', $DIR/const_panic_2021.rs:20:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2021` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:23:15\n+   |\n+LL | const G: () = core::unreachable!();\n+   |               ^^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'internal error: entered unreachable code', $DIR/const_panic_2021.rs:23:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2015` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/const_panic_2021.rs:26:15\n+   |\n+LL | const H: () = core::unimplemented!();\n+   |               ^^^^^^^^^^^^^^^^^^^^^^ the evaluated program panicked at 'not implemented', $DIR/const_panic_2021.rs:26:15\n+   |\n+   = note: this error originates in the macro `$crate::panic::panic_2015` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: aborting due to 8 previous errors\n+\n+For more information about this error, try `rustc --explain E0080`."}]}