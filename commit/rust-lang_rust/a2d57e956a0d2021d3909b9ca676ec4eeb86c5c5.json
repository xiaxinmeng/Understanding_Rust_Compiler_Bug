{"sha": "a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyZDU3ZTk1NmEwZDIwMjFkMzkwOWI5Y2E2NzZlYzRlZWI4NmM1YzU=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-03-28T14:14:48Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-03-28T14:20:50Z"}, "message": "Remove duplicate definitions\n\nThis commit removes duplicated definitions of `type_annotation_separator` and\n`type_bound_colon`.", "tree": {"sha": "26425caec675d1487764773e4e252ed2f16de8d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/26425caec675d1487764773e4e252ed2f16de8d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "html_url": "https://github.com/rust-lang/rust/commit/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7377dfc38c932949f26e99016f491ae3a81db6b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/7377dfc38c932949f26e99016f491ae3a81db6b2", "html_url": "https://github.com/rust-lang/rust/commit/7377dfc38c932949f26e99016f491ae3a81db6b2"}], "stats": {"total": 31, "additions": 16, "deletions": 15}, "files": [{"sha": "3c0cf9b06ae17901e9c0957c2c28a0382b84474f", "filename": "src/expr.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "patch": "@@ -23,7 +23,8 @@ use lists::{write_list, itemize_list, ListFormatting, SeparatorTactic, ListTacti\n             struct_lit_tactic, shape_for_tactic, struct_lit_formatting};\n use string::{StringFormat, rewrite_string};\n use utils::{extra_offset, last_line_width, wrap_str, binary_search, first_line_width,\n-            semicolon_for_stmt, trimmed_last_line_width, left_most_sub_expr, stmt_expr};\n+            semicolon_for_stmt, trimmed_last_line_width, left_most_sub_expr, stmt_expr,\n+            place_spaces};\n use visitor::FmtVisitor;\n use config::{Config, IndentStyle, MultilineStyle, ControlBraceStyle};\n use comment::{FindUncommented, rewrite_comment, contains_comment, recover_comment_removed};\n@@ -1890,13 +1891,8 @@ fn rewrite_struct_lit<'a>(context: &RewriteContext,\n     // of space, we should fall back to BlockIndent.\n }\n \n-pub fn type_annotation_separator(config: &Config) -> &str {\n-    match (config.space_before_type_annotation, config.space_after_type_annotation_colon) {\n-        (true, true) => \" : \",\n-        (true, false) => \" :\",\n-        (false, true) => \": \",\n-        (false, false) => \":\",\n-    }\n+pub fn type_annotation_separator(config: &Config) -> & str {\n+    place_spaces (config.space_before_type_annotation, config.space_after_type_annotation_colon)\n }\n \n fn rewrite_field(context: &RewriteContext, field: &ast::Field, shape: Shape) -> Option<String> {"}, {"sha": "9c7ba2c7bd3ae03816062b6f57ddec369cf8e670", "filename": "src/types.rs", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "patch": "@@ -21,7 +21,7 @@ use {Shape, Spanned};\n use codemap::SpanUtils;\n use lists::{format_item_list, itemize_list, format_fn_args};\n use rewrite::{Rewrite, RewriteContext};\n-use utils::{extra_offset, format_mutability, wrap_str};\n+use utils::{extra_offset, format_mutability, place_spaces, wrap_str};\n use expr::{rewrite_unary_prefix, rewrite_pair, rewrite_tuple};\n use config::TypeDensity;\n use itertools::Itertools;\n@@ -346,12 +346,7 @@ fn format_function_type<'a, I>(inputs: I,\n }\n \n fn type_bound_colon(context: &RewriteContext) -> &'static str {\n-    match (context.config.space_before_bound, context.config.space_after_bound_colon) {\n-        (true, true) => \" : \",\n-        (true, false) => \" :\",\n-        (false, true) => \": \",\n-        (false, false) => \":\",\n-    }\n+    place_spaces(context.config.space_before_bound, context.config.space_after_bound_colon)\n }\n \n impl Rewrite for ast::WherePredicate {"}, {"sha": "f7f4b0ba7893083e7047bd9230fef5b8de334029", "filename": "src/utils.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5/src%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Futils.rs?ref=a2d57e956a0d2021d3909b9ca676ec4eeb86c5c5", "patch": "@@ -326,6 +326,16 @@ pub fn binary_search<C, T>(mut lo: usize, mut hi: usize, callback: C) -> Option<\n     None\n }\n \n+#[inline]\n+pub fn place_spaces(before: bool, after: bool) -> &'static str {\n+    match (before, after) {\n+        (true, true) => \" : \",\n+        (true, false) => \" :\",\n+        (false, true) => \": \",\n+        (false, false) => \":\",\n+    }\n+}\n+\n #[test]\n fn bin_search_test() {\n     let closure = |i| match i {"}]}