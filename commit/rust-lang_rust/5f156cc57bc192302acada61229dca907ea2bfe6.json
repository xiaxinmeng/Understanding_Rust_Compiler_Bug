{"sha": "5f156cc57bc192302acada61229dca907ea2bfe6", "node_id": "C_kwDOAAsO6NoAKDVmMTU2Y2M1N2JjMTkyMzAyYWNhZGE2MTIyOWRjYTkwN2VhMmJmZTY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-13T22:45:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-13T22:45:18Z"}, "message": "Rollup merge of #103011 - GuillaumeGomez:improve-unsafe-fn-gui-test, r=notriddle\n\nImprove rustdoc `unsafe-fn` GUI test\n\nr? ``@notriddle``", "tree": {"sha": "e378b1f7ed277db4185d2931532fb19faa35a3bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e378b1f7ed277db4185d2931532fb19faa35a3bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f156cc57bc192302acada61229dca907ea2bfe6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjSJT+CRBK7hj4Ov3rIwAA/2gIAC1ZqsONHBt85DCfpo52YfHq\nND0aXSyQnhUSQvXQPnqisVt24vJCCG2aTrKR55ZX+HFqcg7XFHnpU6ORcOBwTSEx\n24QHgxs1RyglpN1S3N8juzRgaQzmDEteOGqMknP2CbB4jFeEdcitzT728wmQnMvQ\n6T1G863XYKHJqIGictUVWmradE7h+aBv/NpCL8uwncH5pV7aK/x3T2RbaFsgH7Dk\n7Ny/vnYpf0Fg6WlfZ+lsOOU7xhZqvubS/adM8P+E082dKLFEe+VcKCCN2552Lb75\nnRXwi5AlNmj5FT+L3WJi4Y92Sd/X9dAMqiE1xo3lXalYrAELyuZmIexTGjVy5ME=\n=rXM5\n-----END PGP SIGNATURE-----\n", "payload": "tree e378b1f7ed277db4185d2931532fb19faa35a3bf\nparent 059bbf7ea945d5c6dc2ca5af5abd3eb5c6677ece\nparent 16cfd6cc8446215ec31dfd2e79a61e68fc8f276c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1665701118 +0200\ncommitter GitHub <noreply@github.com> 1665701118 +0200\n\nRollup merge of #103011 - GuillaumeGomez:improve-unsafe-fn-gui-test, r=notriddle\n\nImprove rustdoc `unsafe-fn` GUI test\n\nr? ``@notriddle``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f156cc57bc192302acada61229dca907ea2bfe6", "html_url": "https://github.com/rust-lang/rust/commit/5f156cc57bc192302acada61229dca907ea2bfe6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f156cc57bc192302acada61229dca907ea2bfe6/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "059bbf7ea945d5c6dc2ca5af5abd3eb5c6677ece", "url": "https://api.github.com/repos/rust-lang/rust/commits/059bbf7ea945d5c6dc2ca5af5abd3eb5c6677ece", "html_url": "https://github.com/rust-lang/rust/commit/059bbf7ea945d5c6dc2ca5af5abd3eb5c6677ece"}, {"sha": "16cfd6cc8446215ec31dfd2e79a61e68fc8f276c", "url": "https://api.github.com/repos/rust-lang/rust/commits/16cfd6cc8446215ec31dfd2e79a61e68fc8f276c", "html_url": "https://github.com/rust-lang/rust/commit/16cfd6cc8446215ec31dfd2e79a61e68fc8f276c"}], "stats": {"total": 55, "additions": 23, "deletions": 32}, "files": [{"sha": "d61567cd134a38075dcb80baa5d5ca3c6f4e5cf0", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5f156cc57bc192302acada61229dca907ea2bfe6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/5f156cc57bc192302acada61229dca907ea2bfe6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=5f156cc57bc192302acada61229dca907ea2bfe6", "patch": "@@ -1 +1 @@\n-0.12.2\n\\ No newline at end of file\n+0.12.3\n\\ No newline at end of file"}, {"sha": "5e43b85fce08410eecf07e4ec32af48ecda6fa97", "filename": "src/test/rustdoc-gui/unsafe-fn.goml", "status": "modified", "additions": 22, "deletions": 31, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/5f156cc57bc192302acada61229dca907ea2bfe6/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml", "raw_url": "https://github.com/rust-lang/rust/raw/5f156cc57bc192302acada61229dca907ea2bfe6/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml?ref=5f156cc57bc192302acada61229dca907ea2bfe6", "patch": "@@ -1,37 +1,28 @@\n+// Check position and color of the `<sup>` for unsafe elements.\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n-\n-compare-elements-property: (\n-\t\"//a[@title='test_docs::safe_fn fn']/..\",\n-\t\"//a[@title='test_docs::unsafe_fn fn']/..\",\n-\t[\"clientHeight\"]\n-)\n-\n // If the text isn't displayed, the browser doesn't compute color style correctly...\n show-text: true\n \n-// Set the theme to dark.\n-local-storage: {\"rustdoc-theme\": \"dark\", \"rustdoc-preferred-dark-theme\": \"dark\", \"rustdoc-use-system-theme\": \"false\"}\n-// We reload the page so the local storage settings are being used.\n-reload:\n-\n-assert-css: (\".item-left sup\", {\n-\t\"color\": \"rgb(221, 221, 221)\"\n-})\n-\n-// Set the theme to ayu.\n-local-storage: {\"rustdoc-theme\": \"ayu\", \"rustdoc-preferred-dark-theme\": \"ayu\", \"rustdoc-use-system-theme\": \"false\"}\n-// We reload the page so the local storage settings are being used.\n-reload:\n-\n-assert-css: (\".item-left sup\", {\n-\t\"color\": \"rgb(197, 197, 197)\"\n-})\n+compare-elements-property: (\n+    \"//a[@title='test_docs::safe_fn fn']/..\",\n+    \"//a[@title='test_docs::unsafe_fn fn']/..\",\n+    [\"clientHeight\"]\n+)\n \n-// Set the theme to light.\n-local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-preferred-dark-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n-// We reload the page so the local storage settings are being used.\n-reload:\n+define-function: (\n+    \"sup-check\",\n+    // `theme` is the theme being tested.\n+    // `color` is the expected color of the `<sup>` element.\n+    (theme, color),\n+    [\n+        // Set the theme.\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        // We reload the page so the local storage settings are being used.\n+        (\"reload\"),\n+        (\"assert-css\", (\".item-left sup\", {\"color\": |color|})),\n+    ],\n+)\n \n-assert-css: (\".item-left sup\", {\n-\t\"color\": \"rgb(0, 0, 0)\"\n-})\n+call-function: (\"sup-check\", (\"dark\", \"rgb(221, 221, 221)\"))\n+call-function: (\"sup-check\", (\"ayu\", \"rgb(197, 197, 197)\"))\n+call-function: (\"sup-check\", (\"light\", \"rgb(0, 0, 0)\"))"}]}