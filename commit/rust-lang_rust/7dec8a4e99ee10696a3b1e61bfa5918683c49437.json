{"sha": "7dec8a4e99ee10696a3b1e61bfa5918683c49437", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkZWM4YTRlOTllZTEwNjk2YTNiMWU2MWJmYTU5MTg2ODNjNDk0Mzc=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-05-26T04:57:02Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-05-26T19:03:50Z"}, "message": "Fix test", "tree": {"sha": "7a10cf1ba3390ab80a500f1522acfa94744b60ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a10cf1ba3390ab80a500f1522acfa94744b60ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7dec8a4e99ee10696a3b1e61bfa5918683c49437", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7dec8a4e99ee10696a3b1e61bfa5918683c49437", "html_url": "https://github.com/rust-lang/rust/commit/7dec8a4e99ee10696a3b1e61bfa5918683c49437", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7dec8a4e99ee10696a3b1e61bfa5918683c49437/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6437295b173a17361fdca1a45d2f9e7547cbc99f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6437295b173a17361fdca1a45d2f9e7547cbc99f", "html_url": "https://github.com/rust-lang/rust/commit/6437295b173a17361fdca1a45d2f9e7547cbc99f"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "c39eb1594b28bf3591b8546a89421655c795c0cc", "filename": "src/libsyntax/parse/lexer/mod.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs?ref=7dec8a4e99ee10696a3b1e61bfa5918683c49437", "patch": "@@ -1081,10 +1081,12 @@ impl<'a> StringReader<'a> {\n                 );\n                 if let Some(ch) = self.ch {\n                     // check for e.g. Unicode minus '\u2212' (Issue #49746)\n-                    unicode_chars::check_for_substitution(self, ch, &mut err);\n+                    if unicode_chars::check_for_substitution(self, ch, &mut err) {\n+                        self.bump();\n+                        self.scan_digits(10, 10);\n+                    }\n                 }\n                 err.emit();\n-                FatalError.raise();\n             }\n         }\n     }"}, {"sha": "c5c2e02523302c20100bb407ae1d03d2462bb161", "filename": "src/libsyntax/parse/lexer/unicode_chars.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Flibsyntax%2Fparse%2Flexer%2Funicode_chars.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Flibsyntax%2Fparse%2Flexer%2Funicode_chars.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Funicode_chars.rs?ref=7dec8a4e99ee10696a3b1e61bfa5918683c49437", "patch": "@@ -335,7 +335,7 @@ const ASCII_ARRAY: &'static [(char, &'static str)] = &[\n \n pub fn check_for_substitution<'a>(reader: &StringReader<'a>,\n                                   ch: char,\n-                                  err: &mut DiagnosticBuilder<'a>) {\n+                                  err: &mut DiagnosticBuilder<'a>) -> bool {\n     UNICODE_ARRAY\n     .iter()\n     .find(|&&(c, _, _)| c == ch)\n@@ -347,11 +347,13 @@ pub fn check_for_substitution<'a>(reader: &StringReader<'a>,\n                     format!(\"Unicode character '{}' ({}) looks like '{}' ({}), but it is not\",\n                             ch, u_name, ascii_char, ascii_name);\n                 err.span_suggestion(span, &msg, ascii_char.to_string());\n+                true\n             },\n             None => {\n                 let msg = format!(\"substitution character not found for '{}'\", ch);\n                 reader.sess.span_diagnostic.span_bug_no_panic(span, &msg);\n+                false\n             }\n         }\n-    });\n+    }).unwrap_or(false)\n }"}, {"sha": "f590a7f2aa2eb9a4fea9638317bc2ebd46c762da", "filename": "src/test/parse-fail/unicode-chars.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fparse-fail%2Funicode-chars.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fparse-fail%2Funicode-chars.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fparse-fail%2Funicode-chars.rs?ref=7dec8a4e99ee10696a3b1e61bfa5918683c49437", "patch": "@@ -13,5 +13,5 @@\n fn main() {\n     let y = 0\u037e\n     //~^ ERROR unknown start of token: \\u{37e}\n-    //~^^ HELP unicode character '\u037e' (Greek Question Mark) looks like ';' (Semicolon), but it's not\n+    //~^^ HELP Unicode character '\u037e' (Greek Question Mark) looks like ';' (Semicolon), but it is not\n }"}, {"sha": "9daf9df695548ee76d7f4f782f1c1e38acc63cf7", "filename": "src/test/ui/did_you_mean/issue-49746-unicode-confusable-in-float-literal-expt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.rs?ref=7dec8a4e99ee10696a3b1e61bfa5918683c49437", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-const UNIVERSAL_GRAVITATIONAL_CONSTANT = 6.674e\u221211; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n+const UNIVERSAL_GRAVITATIONAL_CONSTANT: f64 = 6.674e\u221211; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n //~^ ERROR expected at least one digit in exponent\n \n fn main() {}"}, {"sha": "b387472e0e7499e47b03921f021b983614232eea", "filename": "src/test/ui/did_you_mean/issue-49746-unicode-confusable-in-float-literal-expt.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7dec8a4e99ee10696a3b1e61bfa5918683c49437/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-49746-unicode-confusable-in-float-literal-expt.stderr?ref=7dec8a4e99ee10696a3b1e61bfa5918683c49437", "patch": "@@ -1,12 +1,12 @@\n error: expected at least one digit in exponent\n-  --> $DIR/issue-49746-unicode-confusable-in-float-literal-expt.rs:11:48\n+  --> $DIR/issue-49746-unicode-confusable-in-float-literal-expt.rs:11:53\n    |\n-LL | const UNIVERSAL_GRAVITATIONAL_CONSTANT = 6.674e\u221211; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n-   |                                                ^\n+LL | const UNIVERSAL_GRAVITATIONAL_CONSTANT: f64 = 6.674e\u221211; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n+   |                                                     ^\n help: Unicode character '\u2212' (Minus Sign) looks like '-' (Minus/Hyphen), but it is not\n    |\n-LL | const UNIVERSAL_GRAVITATIONAL_CONSTANT = 6.674e-11; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n-   |                                                ^\n+LL | const UNIVERSAL_GRAVITATIONAL_CONSTANT: f64 = 6.674e-11; // m\u00b3\u22c5kg\u207b\u00b9\u22c5s\u207b\u00b2\n+   |                                                     ^\n \n error: aborting due to previous error\n "}]}