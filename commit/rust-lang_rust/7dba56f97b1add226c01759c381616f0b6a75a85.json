{"sha": "7dba56f97b1add226c01759c381616f0b6a75a85", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkYmE1NmY5N2IxYWRkMjI2YzAxNzU5YzM4MTYxNmYwYjZhNzVhODU=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-03-02T22:39:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-03-02T22:39:24Z"}, "message": "Merge pull request #2503 from Eijebong/winapi\n\nBump winapi to 0.3", "tree": {"sha": "6f3c2cb27b45d0443c70bf8061505ae340f1f116", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f3c2cb27b45d0443c70bf8061505ae340f1f116"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7dba56f97b1add226c01759c381616f0b6a75a85", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJamdKcCRBK7hj4Ov3rIwAAdHIIAEDpmyM2wBaFp7URrwsOqPCA\nL/dHxFEqKpZBn2iEdfqfdCJbuHwX2e5oOKbt59IqrtK8zv8RyJsvmrvw3KpbaGvR\n+fhxLoRHLjh7OmywDDcw3mgs08Qd9vQOqalrUzUoOFOJJ2OG4oP/jXdwitOXwx4H\nlBMyuj4m3m5Dh7Gql4ysCvoX2UsGVTjb7/wqEVtx87XUxzm/0UbSjCAglmLTcQi2\nTkqJnYpxS+ve9TJAZoQX+3nFtOVu/tuwjVrax+bfy4qXID4VARO64RrkAZawhpcs\n7+ShnMTlcwf68uuY04qS7QBVhQw1OS1UhGZlBaNYd2fplxpHlV05o2J+6aP3eFs=\n=TQlf\n-----END PGP SIGNATURE-----\n", "payload": "tree 6f3c2cb27b45d0443c70bf8061505ae340f1f116\nparent 7589ebdc785f9d840d5ce227e05d365a77ec2110\nparent 64f6372f3224f77a2ceb1eb9c0eefdcd3bfbe1e6\nauthor Nick Cameron <nrc@ncameron.org> 1520030364 +1300\ncommitter GitHub <noreply@github.com> 1520030364 +1300\n\nMerge pull request #2503 from Eijebong/winapi\n\nBump winapi to 0.3"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7dba56f97b1add226c01759c381616f0b6a75a85", "html_url": "https://github.com/rust-lang/rust/commit/7dba56f97b1add226c01759c381616f0b6a75a85", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7dba56f97b1add226c01759c381616f0b6a75a85/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7589ebdc785f9d840d5ce227e05d365a77ec2110", "url": "https://api.github.com/repos/rust-lang/rust/commits/7589ebdc785f9d840d5ce227e05d365a77ec2110", "html_url": "https://github.com/rust-lang/rust/commit/7589ebdc785f9d840d5ce227e05d365a77ec2110"}, {"sha": "64f6372f3224f77a2ceb1eb9c0eefdcd3bfbe1e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/64f6372f3224f77a2ceb1eb9c0eefdcd3bfbe1e6", "html_url": "https://github.com/rust-lang/rust/commit/64f6372f3224f77a2ceb1eb9c0eefdcd3bfbe1e6"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "488b2bb52a5561477947dee39f66da1915ba4fbc", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7dba56f97b1add226c01759c381616f0b6a75a85/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/7dba56f97b1add226c01759c381616f0b6a75a85/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=7dba56f97b1add226c01759c381616f0b6a75a85", "patch": "@@ -333,7 +333,6 @@ dependencies = [\n  \"diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"env_logger 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"kernel32-sys 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.37 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -346,7 +345,7 @@ dependencies = [\n  \"term 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"toml 0.4.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-segmentation 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"winapi 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"winapi 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]"}, {"sha": "dfaf38876dbea873858130872b7d20c891f91f8e", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7dba56f97b1add226c01759c381616f0b6a75a85/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7dba56f97b1add226c01759c381616f0b6a75a85/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=7dba56f97b1add226c01759c381616f0b6a75a85", "patch": "@@ -58,5 +58,4 @@ lazy_static = \"1.0.0\"\n libc = \"0.2.11\"\n \n [target.'cfg(windows)'.dependencies]\n-kernel32-sys = \"0.2.2\"\n-winapi = \"0.2.7\"\n+winapi = { version = \"0.3\" }"}, {"sha": "5ec5ee180092aa9a44659e6e9e26a8c5aa84e2eb", "filename": "src/utils.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7dba56f97b1add226c01759c381616f0b6a75a85/src%2Futils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7dba56f97b1add226c01759c381616f0b6a75a85/src%2Futils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Futils.rs?ref=7dba56f97b1add226c01759c381616f0b6a75a85", "patch": "@@ -382,13 +382,12 @@ pub fn isatty() -> bool {\n }\n #[cfg(windows)]\n pub fn isatty() -> bool {\n-    extern crate kernel32;\n     extern crate winapi;\n \n     unsafe {\n-        let handle = kernel32::GetStdHandle(winapi::winbase::STD_OUTPUT_HANDLE);\n+        let handle = winapi::um::processenv::GetStdHandle(winapi::um::winbase::STD_OUTPUT_HANDLE);\n         let mut out = 0;\n-        kernel32::GetConsoleMode(handle, &mut out) != 0\n+        winapi::um::consoleapi::GetConsoleMode(handle, &mut out) != 0\n     }\n }\n "}]}