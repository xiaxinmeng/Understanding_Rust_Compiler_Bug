{"sha": "516da4c93f804f27b1a5f664ae06b9054532f095", "node_id": "C_kwDOAAsO6NoAKDUxNmRhNGM5M2Y4MDRmMjdiMWE1ZjY2NGFlMDZiOTA1NDUzMmYwOTU", "commit": {"author": {"name": "Jiahao XU", "email": "Jiahao_XU@outlook.com", "date": "2022-06-23T02:58:33Z"}, "committer": {"name": "Jiahao XU", "email": "Jiahao_XU@outlook.com", "date": "2022-06-23T02:58:33Z"}, "message": "Use `unwrap` instead of `unwrap_unchecked`\n\nSigned-off-by: Jiahao XU <Jiahao_XU@outlook.com>", "tree": {"sha": "20ecbb30003e644c6c6ede72a8550429637c4651", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/20ecbb30003e644c6c6ede72a8550429637c4651"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/516da4c93f804f27b1a5f664ae06b9054532f095", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJKBAABCAA0FiEE+UH+0gCgmS2CS1eIWRwLAwQEFtYFAmKz1uMWHGppYWhhb194\ndUBvdXRsb29rLmNvbQAKCRBZHAsDBAQW1kYGD/4hSpPFUdxYc9RfzgLJvMVHsBad\ndeT4aX7atyP4a/Pm+XCc8NT/InoC0ouhvEzd/V9GAPPYYnsrzW6G1yQMgHx8PQvi\n26Ww2NyK5jZ0IKXDNwTjgMsbfUXx5kIm0mwWOr0+PW46uZr/w3XmmlhtDfR4kgi0\n3+bNZu2SXhewe3fpeOX+XGSykJvSK5wdyjYTeaFrWewuGxkb2XktrsLD4KBkEgHu\ntwMg4GSBn7DRwramFwvjnehYVfkym7a71sbjMVUX6ys/SPlE1a15Y3VycNy7Ww/d\nW4JtcdrCc9mWb980JmXGxyqiZKBk6PGtA0sY93VOlXfPQyVyZ++mhgPROLux8w9g\nWfK/JBs9IjA6OQopNwUsiabnnoFh89BiPImse4Vwa8PpBBnMOcYarhpcLhQbHL0Q\nU/ZTPPVIV8TYuZKcw55X887bjErUhzO5LDVFmcU1yaNuFAzKTktKlYF678fRptXp\nzbRlIYlWVSOmMy7A5vi818na0e002pyLVqpxUHahsGg58UDMku8/AbV0PqJhy3Ou\nUoGxQUsAXxa8eHEXA9fsEmOKJVeNnLpr+gMMnNerGIwp/VUp1Ar4pn8ykDzxmNN+\n258QbV2looE1TkgOQWsYqBy6LzyUBV4fmx747F/0d+Phv4p4yhlnN1A+/QZvmqjt\n3ucVfD1sXlUKpsbO4g==\n=D+3Y\n-----END PGP SIGNATURE-----", "payload": "tree 20ecbb30003e644c6c6ede72a8550429637c4651\nparent d2211c9fdc8fd49bdbd17e92a16a9f304eda1d8c\nauthor Jiahao XU <Jiahao_XU@outlook.com> 1655953113 +1000\ncommitter Jiahao XU <Jiahao_XU@outlook.com> 1655953113 +1000\n\nUse `unwrap` instead of `unwrap_unchecked`\n\nSigned-off-by: Jiahao XU <Jiahao_XU@outlook.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/516da4c93f804f27b1a5f664ae06b9054532f095", "html_url": "https://github.com/rust-lang/rust/commit/516da4c93f804f27b1a5f664ae06b9054532f095", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/516da4c93f804f27b1a5f664ae06b9054532f095/comments", "author": {"login": "NobodyXu", "id": 30436523, "node_id": "MDQ6VXNlcjMwNDM2NTIz", "avatar_url": "https://avatars.githubusercontent.com/u/30436523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NobodyXu", "html_url": "https://github.com/NobodyXu", "followers_url": "https://api.github.com/users/NobodyXu/followers", "following_url": "https://api.github.com/users/NobodyXu/following{/other_user}", "gists_url": "https://api.github.com/users/NobodyXu/gists{/gist_id}", "starred_url": "https://api.github.com/users/NobodyXu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NobodyXu/subscriptions", "organizations_url": "https://api.github.com/users/NobodyXu/orgs", "repos_url": "https://api.github.com/users/NobodyXu/repos", "events_url": "https://api.github.com/users/NobodyXu/events{/privacy}", "received_events_url": "https://api.github.com/users/NobodyXu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "NobodyXu", "id": 30436523, "node_id": "MDQ6VXNlcjMwNDM2NTIz", "avatar_url": "https://avatars.githubusercontent.com/u/30436523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NobodyXu", "html_url": "https://github.com/NobodyXu", "followers_url": "https://api.github.com/users/NobodyXu/followers", "following_url": "https://api.github.com/users/NobodyXu/following{/other_user}", "gists_url": "https://api.github.com/users/NobodyXu/gists{/gist_id}", "starred_url": "https://api.github.com/users/NobodyXu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NobodyXu/subscriptions", "organizations_url": "https://api.github.com/users/NobodyXu/orgs", "repos_url": "https://api.github.com/users/NobodyXu/repos", "events_url": "https://api.github.com/users/NobodyXu/events{/privacy}", "received_events_url": "https://api.github.com/users/NobodyXu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2211c9fdc8fd49bdbd17e92a16a9f304eda1d8c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2211c9fdc8fd49bdbd17e92a16a9f304eda1d8c", "html_url": "https://github.com/rust-lang/rust/commit/d2211c9fdc8fd49bdbd17e92a16a9f304eda1d8c"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "4c6fd55ad13a3e1d9525c5164afef90b8983a65c", "filename": "library/std/src/io/error.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/516da4c93f804f27b1a5f664ae06b9054532f095/library%2Fstd%2Fsrc%2Fio%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/516da4c93f804f27b1a5f664ae06b9054532f095/library%2Fstd%2Fsrc%2Fio%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fio%2Ferror.rs?ref=516da4c93f804f27b1a5f664ae06b9054532f095", "patch": "@@ -844,9 +844,13 @@ impl Error {\n             ErrorData::Custom(b) if b.error.is::<E>() => {\n                 let res = (*b).error.downcast::<E>();\n \n-                // Safety: b.error.is::<E>() returns true,\n-                // which means that res must be Ok(e).\n-                Ok(unsafe { res.unwrap_unchecked() })\n+                // downcast is a really trivial and is marked as inline, so\n+                // it's likely be inlined here.\n+                //\n+                // And the compiler should be able to eliminate the branch\n+                // that produces `Err` here since b.error.is::<E>()\n+                // returns true.\n+                Ok(res.unwrap())\n             }\n             repr_data => Err(Self { repr: Repr::new(repr_data) }),\n         }"}]}