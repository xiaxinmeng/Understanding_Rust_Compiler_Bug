{"sha": "832c0830ec3d6be0f406cc76611975a1cb8bd8bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzMmMwODMwZWMzZDZiZTBmNDA2Y2M3NjYxMTk3NWExY2I4YmQ4YmM=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-08-28T08:41:06Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-08-29T15:34:02Z"}, "message": "Also return the method spans in utils::method_calls", "tree": {"sha": "c950039fc123991bbb17e58b032bca879c2ca6da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c950039fc123991bbb17e58b032bca879c2ca6da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/832c0830ec3d6be0f406cc76611975a1cb8bd8bc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAl1n8GoACgkQaTCGhp1Q\nZjfHFBAApcFG/LLL17vH7vMaW6G1ZzxNwR0IakpX1qBgS1e8S60VyQsNeLGxjlCB\nrf9dQUG9X77gqe4Xq5e++EVyTFcjU5tBqYG4iRRr8U+Zcwdy8NleUW13aXtN4BU8\nynkiWGrgPNbKz2NjA+4276SXuswh9dw5/nVPAjSLkC5j9veVQqepjuny8of6K+I1\nhF0tp93chnJnhw/2KANGYJQsDiLe2G0wobHz59HqSfyemwdkENMuSJE0tZHURLI8\n51Yray4E8dowLvKQIhQFHkQioqNknIT2Y4k4sJWApt/cy1qapDerssIbj5cRIj2V\nyfTZ6QS+nZ1by+2o0AdOCaYDm87/FGrYyHJMpNNpP5tMcLrPNE+dVh98c/dzN5Mj\ntWq9VXhAtxFwykUaNVCPthX579UfVofd72hR12B8UDU+FNYHSOd2qcBfnGQ7Ixn8\nyqDxszZ7U9A8wtdF6ddBPQkrz7I9VAFiftMj4jL+qlZectxBmzy+9jOsssMs1i55\nxTfZMKu4ZhWbA1NBSt2Wb06D9Jsy4xQNIrgLwbC/XbgvWvl3Y1SKqXpbuEf9EJ0G\nCzOKIK0o1xbt7+nnLrbxZDKvW2pTZnezMGQnU/NjC4QjalWfPLdhB+p+svFO76cm\ndAGqWyzPGUROYB8/VbXFC5o9136ASBtIeZQ4TW4zp578U7+JvxQ=\n=JJga\n-----END PGP SIGNATURE-----", "payload": "tree c950039fc123991bbb17e58b032bca879c2ca6da\nparent 945d4cf69f7a2a63f17e82c5927bad75922a6005\nauthor flip1995 <hello@philkrones.com> 1566981666 +0200\ncommitter flip1995 <hello@philkrones.com> 1567092842 +0200\n\nAlso return the method spans in utils::method_calls\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/832c0830ec3d6be0f406cc76611975a1cb8bd8bc", "html_url": "https://github.com/rust-lang/rust/commit/832c0830ec3d6be0f406cc76611975a1cb8bd8bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/832c0830ec3d6be0f406cc76611975a1cb8bd8bc/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "945d4cf69f7a2a63f17e82c5927bad75922a6005", "url": "https://api.github.com/repos/rust-lang/rust/commits/945d4cf69f7a2a63f17e82c5927bad75922a6005", "html_url": "https://github.com/rust-lang/rust/commit/945d4cf69f7a2a63f17e82c5927bad75922a6005"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "9d88e020fd1168130219c541ab748df01210c1f9", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/832c0830ec3d6be0f406cc76611975a1cb8bd8bc/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/832c0830ec3d6be0f406cc76611975a1cb8bd8bc/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=832c0830ec3d6be0f406cc76611975a1cb8bd8bc", "patch": "@@ -339,25 +339,27 @@ pub fn resolve_node(cx: &LateContext<'_, '_>, qpath: &QPath, id: HirId) -> Res {\n \n /// Returns the method names and argument list of nested method call expressions that make up\n /// `expr`.\n-pub fn method_calls(expr: &Expr, max_depth: usize) -> (Vec<Symbol>, Vec<&[Expr]>) {\n+pub fn method_calls(expr: &Expr, max_depth: usize) -> (Vec<Symbol>, Vec<&[Expr]>, Vec<Span>) {\n     let mut method_names = Vec::with_capacity(max_depth);\n     let mut arg_lists = Vec::with_capacity(max_depth);\n+    let mut spans = Vec::with_capacity(max_depth);\n \n     let mut current = expr;\n     for _ in 0..max_depth {\n-        if let ExprKind::MethodCall(path, _, args) = &current.node {\n+        if let ExprKind::MethodCall(path, span, args) = &current.node {\n             if args.iter().any(|e| e.span.from_expansion()) {\n                 break;\n             }\n             method_names.push(path.ident.name);\n             arg_lists.push(&**args);\n+            spans.push(*span);\n             current = &args[0];\n         } else {\n             break;\n         }\n     }\n \n-    (method_names, arg_lists)\n+    (method_names, arg_lists, spans)\n }\n \n /// Matches an `Expr` against a chain of methods, and return the matched `Expr`s."}]}