{"sha": "3ae669d758f7a7c0498d9208ef231718e50fb0ae", "node_id": "C_kwDOAAsO6NoAKDNhZTY2OWQ3NThmN2E3YzA0OThkOTIwOGVmMjMxNzE4ZTUwZmIwYWU", "commit": {"author": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-07-29T05:12:37Z"}, "committer": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-07-29T05:17:26Z"}, "message": "check if T is slice\n\nfix msg", "tree": {"sha": "026eef5196b0482fdc9d9b499d2059149c4dd063", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/026eef5196b0482fdc9d9b499d2059149c4dd063"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ae669d758f7a7c0498d9208ef231718e50fb0ae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ae669d758f7a7c0498d9208ef231718e50fb0ae", "html_url": "https://github.com/rust-lang/rust/commit/3ae669d758f7a7c0498d9208ef231718e50fb0ae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ae669d758f7a7c0498d9208ef231718e50fb0ae/comments", "author": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "06f89b7924af4657e847742bf0e40eafaaee52f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/06f89b7924af4657e847742bf0e40eafaaee52f9", "html_url": "https://github.com/rust-lang/rust/commit/06f89b7924af4657e847742bf0e40eafaaee52f9"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "6ad7ee32a4f345d98773938b6854e68a1d99a002", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3ae669d758f7a7c0498d9208ef231718e50fb0ae/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ae669d758f7a7c0498d9208ef231718e50fb0ae/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=3ae669d758f7a7c0498d9208ef231718e50fb0ae", "patch": "@@ -2943,14 +2943,15 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n     ) {\n         if let ObligationCauseCode::ImplDerivedObligation(_) = obligation.cause.code()\n             && self.tcx.is_diagnostic_item(sym::SliceIndex, trait_pred.skip_binder().trait_ref.def_id)\n+            && let ty::Slice(_) = trait_pred.skip_binder().trait_ref.substs.type_at(1).kind()\n             && let ty::Ref(_, inner_ty, _) = trait_pred.skip_binder().self_ty().kind()\n             && let ty::Uint(ty::UintTy::Usize) = inner_ty.kind()\n         {\n             err.span_suggestion_verbose(\n                 obligation.cause.span.shrink_to_lo(),\n-            \"consider dereferencing here\",\n+            \"dereference this index\",\n             '*',\n-                Applicability::MaybeIncorrect,\n+                Applicability::MachineApplicable,\n             );\n         }\n     }"}, {"sha": "c8b87af7bd80c76ecc1e9233fedf6985f5a7bebf", "filename": "src/test/ui/suggestions/suggest-dereferencing-index.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3ae669d758f7a7c0498d9208ef231718e50fb0ae/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-dereferencing-index.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ae669d758f7a7c0498d9208ef231718e50fb0ae/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-dereferencing-index.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-dereferencing-index.stderr?ref=3ae669d758f7a7c0498d9208ef231718e50fb0ae", "patch": "@@ -7,7 +7,7 @@ LL |     let one_item_please: i32 = [1, 2, 3][i];\n    = help: the trait `SliceIndex<[{integer}]>` is not implemented for `&usize`\n    = help: the trait `SliceIndex<[T]>` is implemented for `usize`\n    = note: required because of the requirements on the impl of `Index<&usize>` for `[{integer}]`\n-help: consider dereferencing here\n+help: dereference this index\n    |\n LL |     let one_item_please: i32 = [1, 2, 3][*i];\n    |                                          +"}]}