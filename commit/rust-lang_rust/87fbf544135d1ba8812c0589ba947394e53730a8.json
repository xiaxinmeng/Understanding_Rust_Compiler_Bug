{"sha": "87fbf544135d1ba8812c0589ba947394e53730a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3ZmJmNTQ0MTM1ZDFiYTg4MTJjMDU4OWJhOTQ3Mzk0ZTUzNzMwYTg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-09-07T10:14:28Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-09-07T10:14:28Z"}, "message": "Rollup merge of #54023 - matthiaskrgr:clippy, r=oli-obk\n\nupdate clippy submodule\n\nupdates to cafef7b576203f166add9ed143979d9775c25219", "tree": {"sha": "ee8a37dc0a91e24ff4ef4f479150a7222e3a2d3d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee8a37dc0a91e24ff4ef4f479150a7222e3a2d3d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/87fbf544135d1ba8812c0589ba947394e53730a8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAluST4UACgkQ/vbIBR0O\nATx6WxAAuq83QUXUx9Oz/RVszeawPPpHXJKAm4/4675upQouprhC4l8LCWTDAzbv\nVWkeZt9r4wmdHAx6RCDobslzL0jHVFvm+t4rsK+ESIe+iu0/LB09VMLspBaxyK9D\nlAt8X0408+W543h7ffuc8l/3N/xFuKlOCVZrcKtzrNrVFlVqpGHpa18FCyDo8Uhk\nTjq0jubzm9q2DVeKaer21ugkCKhzMjZqS18mznNNBN+haRPTcHB1pOWQ+9JD/Lju\n+rJvkfkJZLIwH7FhX9Kkz/faj/lFR04eFUtqEsB0XeccgrXX6giZ63yW2Kitr+61\nxwi+i34X2n9r5QM1SjU+YOvYJFIW0BxMBfPv0l1lfmaWlq+Lhh86EZ55OUjVeb8x\n81C88Nhgw2Q450k9B+8ZRVP1b9qUIBH1XFZtThzywb8zogagm3m3zd5QmzP2aVhO\nOxIkEpnQ99WF2Z02SeTy+Ur8IqC94rJTBz5Ag3ngItqUqRW6nD5+83h5PapfYDYP\nRKo/+lTnG38/vBF3dSjml3u827iGFB8VBSUtizz1om1m4yrFGdSm1eU+A4P9QVLI\nim1GO5mykolZOOLRImXMaHSXTra9+bHa2MJihV0s09RTTyxEW9uP9Y4OQOY4Jnpt\nUmvflB+1lxTRoZWUMHGOvdiSqByfOMiTlxlTQzmvIHg6qJZ6ncg=\n=trMv\n-----END PGP SIGNATURE-----", "payload": "tree ee8a37dc0a91e24ff4ef4f479150a7222e3a2d3d\nparent ba57ef116f0491b9065c9b140b858efd18b6219c\nparent 10e7b76dfcd58716e5ba5f5b3743896b5e053f39\nauthor kennytm <kennytm@gmail.com> 1536315268 +0800\ncommitter kennytm <kennytm@gmail.com> 1536315268 +0800\n\nRollup merge of #54023 - matthiaskrgr:clippy, r=oli-obk\n\nupdate clippy submodule\n\nupdates to cafef7b576203f166add9ed143979d9775c25219\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/87fbf544135d1ba8812c0589ba947394e53730a8", "html_url": "https://github.com/rust-lang/rust/commit/87fbf544135d1ba8812c0589ba947394e53730a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/87fbf544135d1ba8812c0589ba947394e53730a8/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba57ef116f0491b9065c9b140b858efd18b6219c", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba57ef116f0491b9065c9b140b858efd18b6219c", "html_url": "https://github.com/rust-lang/rust/commit/ba57ef116f0491b9065c9b140b858efd18b6219c"}, {"sha": "10e7b76dfcd58716e5ba5f5b3743896b5e053f39", "url": "https://api.github.com/repos/rust-lang/rust/commits/10e7b76dfcd58716e5ba5f5b3743896b5e053f39", "html_url": "https://github.com/rust-lang/rust/commit/10e7b76dfcd58716e5ba5f5b3743896b5e053f39"}], "stats": {"total": 30, "additions": 27, "deletions": 3}, "files": [{"sha": "fc2dfcfd8604c215d546ca5f3f7d8193ff103f7a", "filename": "src/Cargo.lock", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/87fbf544135d1ba8812c0589ba947394e53730a8/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/87fbf544135d1ba8812c0589ba947394e53730a8/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=87fbf544135d1ba8812c0589ba947394e53730a8", "patch": "@@ -296,12 +296,14 @@ version = \"0.0.212\"\n dependencies = [\n  \"cargo_metadata 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"clippy-mini-macro-test 0.2.0\",\n+ \"clippy_dev 0.0.1\",\n  \"clippy_lints 0.0.212\",\n  \"compiletest_rs 0.3.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"derive-new 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-workspace-hack 1.0.0\",\n+ \"rustc_tools_util 0.1.0\",\n  \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde 1.0.75 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"serde_derive 1.0.75 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -311,6 +313,16 @@ dependencies = [\n name = \"clippy-mini-macro-test\"\n version = \"0.2.0\"\n \n+[[package]]\n+name = \"clippy_dev\"\n+version = \"0.0.1\"\n+dependencies = [\n+ \"clap 2.32.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"itertools 0.7.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"lazy_static 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"clippy_lints\"\n version = \"0.0.212\"\n@@ -2361,6 +2373,10 @@ dependencies = [\n  \"serialize 0.0.0\",\n ]\n \n+[[package]]\n+name = \"rustc_tools_util\"\n+version = \"0.1.0\"\n+\n [[package]]\n name = \"rustc_traits\"\n version = \"0.0.0\""}, {"sha": "167e4a78edaf8e9a251d21eb7e9273c306e9c3dd", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/87fbf544135d1ba8812c0589ba947394e53730a8/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/87fbf544135d1ba8812c0589ba947394e53730a8/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=87fbf544135d1ba8812c0589ba947394e53730a8", "patch": "@@ -1902,6 +1902,16 @@ fn maybe_install_llvm_dylib(builder: &Builder,\n     let src_libdir = builder\n         .llvm_out(target)\n         .join(\"lib\");\n+    let dst_libdir = image.join(\"lib/rustlib\").join(&*target).join(\"lib\");\n+    t!(fs::create_dir_all(&dst_libdir));\n+\n+    if target.contains(\"apple-darwin\") {\n+        let llvm_dylib_path = src_libdir.join(\"libLLVM.dylib\");\n+        if llvm_dylib_path.exists() {\n+            builder.install(&llvm_dylib_path, &dst_libdir, 0o644);\n+        }\n+        return\n+    }\n \n     // Usually libLLVM.so is a symlink to something like libLLVM-6.0.so.\n     // Since tools link to the latter rather than the former, we have to\n@@ -1913,8 +1923,6 @@ fn maybe_install_llvm_dylib(builder: &Builder,\n                    llvm_dylib_path.display(), e);\n         });\n \n-        let dst_libdir = image.join(\"lib/rustlib\").join(&*target).join(\"lib\");\n-        t!(fs::create_dir_all(&dst_libdir));\n \n         builder.install(&llvm_dylib_path, &dst_libdir, 0o644);\n     }"}, {"sha": "cafef7b576203f166add9ed143979d9775c25219", "filename": "src/tools/clippy", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy?ref=87fbf544135d1ba8812c0589ba947394e53730a8", "patch": "@@ -1 +1 @@\n-Subproject commit 131c8f86b2b712d4d9b00f486b6c67f97782228a\n+Subproject commit cafef7b576203f166add9ed143979d9775c25219"}]}