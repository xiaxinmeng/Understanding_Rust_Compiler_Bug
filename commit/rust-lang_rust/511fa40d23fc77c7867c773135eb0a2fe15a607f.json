{"sha": "511fa40d23fc77c7867c773135eb0a2fe15a607f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxMWZhNDBkMjNmYzc3Yzc4NjdjNzczMTM1ZWIwYTJmZTE1YTYwN2Y=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-11-15T13:11:00Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-11-15T13:11:00Z"}, "message": "add test for int -> fn ptr cast", "tree": {"sha": "127bc65463f9602477444cac63a1298d97bfb5a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/127bc65463f9602477444cac63a1298d97bfb5a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/511fa40d23fc77c7867c773135eb0a2fe15a607f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJYKwlkAAoJEFbW7qD8Z6xGLg0P/0ymGMNADycaeKVcMzWqF4vE\nudYz6r182mdnVOYft5RA7Bt+xutjgwdFvfptZqOFlS8lIaGE3zL9TXrr2J+2JadI\nXNB2HCalBm8/aK5jOnQCxIQQjH0omTPovFYtu2IKRWcE1si5ox6Pc7I7KvEgnuHn\nhRB0w9/dD8nHNgHNdu5R6t4GxDYp8w3cw3uhVxZzpAtuCbLdjAEQ2Do2SFY5Pg1b\nt9zVRiCA7jzG/2g7OX9KIe5jCwuwRYrMuGY9PG3w6SH6EuOddUqJ3eTaS37amRH2\nEm6ZoXiX9sXF+BhiSF9J+i4crNP4xOZ9ashsqNbPuO/B88zxa9qxPQck3+yZpa2f\ng3RYIlvSk4c56fi68YqtxNoMrQ82IF2atrRShQQQps6Qa1OS5yqMTca0FIOKhZLa\n2Y5Yz17t1vt8Zu+Y2N0h60bVv60ZjHMWRo5X417aIZOs8z+ZJk9MqC8k/wcq3eFb\nJNZc3zO+8zwZQSsECQ9N2OW3KWIk+PfgGVYaQ27AKMMM3kVw6UKv6VUMlS/5Dpxq\ncqMhopYGFwFHRnEURHlnE9FHWGwaTERTqq07ejkePBPvs71HGykpUweUfK3x6CKr\nUvgkpUR40zBwNs+SWVrX+Jt7rnG0Gqqwg11p+g+bLt3dHuJPnqKwIzdYXeEalLng\nYucqe0spb/1Ksrp3LyfV\n=oNO+\n-----END PGP SIGNATURE-----", "payload": "tree 127bc65463f9602477444cac63a1298d97bfb5a1\nparent 2c34d6558c4d5c8f0283566cba8110a50de427a1\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1479215460 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1479215460 +0100\n\nadd test for int -> fn ptr cast"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/511fa40d23fc77c7867c773135eb0a2fe15a607f", "html_url": "https://github.com/rust-lang/rust/commit/511fa40d23fc77c7867c773135eb0a2fe15a607f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/511fa40d23fc77c7867c773135eb0a2fe15a607f/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c34d6558c4d5c8f0283566cba8110a50de427a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c34d6558c4d5c8f0283566cba8110a50de427a1", "html_url": "https://github.com/rust-lang/rust/commit/2c34d6558c4d5c8f0283566cba8110a50de427a1"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "8001d95941e847826ff9b61922a0a0ffe29d22fd", "filename": "src/error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/511fa40d23fc77c7867c773135eb0a2fe15a607f/src%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/511fa40d23fc77c7867c773135eb0a2fe15a607f/src%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ferror.rs?ref=511fa40d23fc77c7867c773135eb0a2fe15a607f", "patch": "@@ -61,7 +61,7 @@ impl<'tcx> Error for EvalError<'tcx> {\n             EvalError::DanglingPointerDeref =>\n                 \"dangling pointer was dereferenced\",\n             EvalError::InvalidFunctionPointer =>\n-                \"tried to use an integer pointer as a function pointer\",\n+                \"tried to use an integer pointer or a dangling pointer as a function pointer\",\n             EvalError::InvalidBool =>\n                 \"invalid boolean value read\",\n             EvalError::InvalidDiscriminant =>"}, {"sha": "030bed6a35298430e449ed7f5b79a4c7cbe4d68d", "filename": "tests/compile-fail/cast_box_int_to_fn_ptr.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/511fa40d23fc77c7867c773135eb0a2fe15a607f/tests%2Fcompile-fail%2Fcast_box_int_to_fn_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/511fa40d23fc77c7867c773135eb0a2fe15a607f/tests%2Fcompile-fail%2Fcast_box_int_to_fn_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fcast_box_int_to_fn_ptr.rs?ref=511fa40d23fc77c7867c773135eb0a2fe15a607f", "patch": "@@ -0,0 +1,8 @@\n+fn main() {\n+    let b = Box::new(42);\n+    let g = unsafe {\n+        std::mem::transmute::<&usize, &fn(i32)>(&b)\n+    };\n+\n+    (*g)(42) //~ ERROR tried to use an integer pointer or a dangling pointer as a function pointer\n+}"}]}