{"sha": "6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "node_id": "C_kwDOAAsO6NoAKDZiYzZlYTdhM2UyMWI3Y2IzM2NiMjRjNWM2M2M3ZDExMjVhM2YxZTk", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-04-12T13:17:33Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-04-12T18:07:10Z"}, "message": "Add/update tests for `--extend-css` option", "tree": {"sha": "b0a40303f42342460a0eb9673d8b2be2fdceebe8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b0a40303f42342460a0eb9673d8b2be2fdceebe8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "html_url": "https://github.com/rust-lang/rust/commit/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf6582e0cc9c1fbeb274bd496c8077e94d26adc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf6582e0cc9c1fbeb274bd496c8077e94d26adc4", "html_url": "https://github.com/rust-lang/rust/commit/bf6582e0cc9c1fbeb274bd496c8077e94d26adc4"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "e4e4f938528d94b507a65fcbc0b9ebdf03219fee", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -1064,6 +1064,8 @@ impl Step for RustdocGUI {\n                     cargo.env(\"RUSTDOCFLAGS\", \"-Zunstable-options --generate-link-to-definition\");\n                 } else if entry.file_name() == \"scrape_examples\" {\n                     cargo.arg(\"-Zrustdoc-scrape-examples\");\n+                } else if entry.file_name() == \"extend_css\" {\n+                    cargo.env(\"RUSTDOCFLAGS\", &format!(\"--extend-css extra.css\"));\n                 }\n                 builder.run(&mut cargo);\n             }"}, {"sha": "fb34469df6c522367014510a653ce46d961eccfb", "filename": "tests/rustdoc-gui/extend-css.goml", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fextend-css.goml", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fextend-css.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fextend-css.goml?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -0,0 +1,5 @@\n+// Test to ensure that the `--extend-css` option is working as expected.\n+go-to: \"file://\" + |DOC_PATH| + \"/extend_css/index.html\"\n+show-text: true\n+// The text from the `.extend` element should be red.\n+assert-css: (\".extend\", {\"color\": \"rgb(255, 0, 0)\"})"}, {"sha": "d739471a625a423439e48fe5f0bb71c4ce282d55", "filename": "tests/rustdoc-gui/search-filter.goml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsearch-filter.goml", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsearch-filter.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-filter.goml?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -16,6 +16,7 @@ press-key: \"ArrowDown\"\n press-key: \"ArrowDown\"\n press-key: \"ArrowDown\"\n press-key: \"ArrowDown\"\n+press-key: \"ArrowDown\"\n press-key: \"Enter\"\n // Waiting for the search results to appear...\n wait-for: \"#search-tabs\"\n@@ -41,6 +42,7 @@ press-key: \"ArrowUp\"\n press-key: \"ArrowUp\"\n press-key: \"ArrowUp\"\n press-key: \"ArrowUp\"\n+press-key: \"ArrowUp\"\n press-key: \"Enter\"\n // Waiting for the search results to appear...\n wait-for: \"#search-tabs\""}, {"sha": "520b2c59b0f89079c4170100b6a80f762cfc9eb0", "filename": "tests/rustdoc-gui/sidebar-source-code.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsidebar-source-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsidebar-source-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsidebar-source-code.goml?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -73,7 +73,7 @@ assert: \"//*[@class='dir-entry' and @open]/*[text()='sub_mod']\"\n // Only \"another_folder\" should be \"open\" in \"lib2\".\n assert: \"//*[@class='dir-entry' and not(@open)]/*[text()='another_mod']\"\n // All other trees should be collapsed.\n-assert-count: (\"//*[@id='source-sidebar']/details[not(text()='lib2') and not(@open)]\", 8)\n+assert-count: (\"//*[@id='source-sidebar']/details[not(text()='lib2') and not(@open)]\", 9)\n \n // We now switch to mobile mode.\n set-window-size: (600, 600)"}, {"sha": "42f3200e9679ace5c9a60cecf5f4a6f11947d3aa", "filename": "tests/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsource-code-page.goml?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -102,7 +102,7 @@ assert: \".source-sidebar-expanded\"\n \n // We check that the first entry of the sidebar is collapsed\n assert-property: (\"#source-sidebar details:first-of-type\", {\"open\": \"false\"})\n-assert-text: (\"#source-sidebar details:first-of-type > summary\", \"http\")\n+assert-text: (\"#source-sidebar details:first-of-type > summary\", \"extend_css\")\n // We now click on it.\n click: \"#source-sidebar details:first-of-type > summary\"\n assert-property: (\"#source-sidebar details:first-of-type\", {\"open\": \"true\"})"}, {"sha": "7101a6f0ffbb96d273ee3da37bd37d80919dce63", "filename": "tests/rustdoc-gui/src/extend_css/Cargo.lock", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.lock?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -0,0 +1,7 @@\n+# This file is automatically @generated by Cargo.\n+# It is not intended for manual editing.\n+version = 3\n+\n+[[package]]\n+name = \"extend_css\"\n+version = \"0.1.0\""}, {"sha": "91683fe896488e44924c867217814dc7ed50b2e3", "filename": "tests/rustdoc-gui/src/extend_css/Cargo.toml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2FCargo.toml?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -0,0 +1,7 @@\n+[package]\n+name = \"extend_css\"\n+version = \"0.1.0\"\n+edition = \"2018\"\n+\n+[lib]\n+path = \"lib.rs\""}, {"sha": "ee7062d9621ab3c3fc8a4967468b3bd5cf32384a", "filename": "tests/rustdoc-gui/src/extend_css/extra.css", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Fextra.css", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Fextra.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Fextra.css?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -0,0 +1,3 @@\n+.extend {\n+    color: red !important;\n+}"}, {"sha": "3a3babf8984050298c0ae61364c3e264512b5274", "filename": "tests/rustdoc-gui/src/extend_css/lib.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsrc%2Fextend_css%2Flib.rs?ref=6bc6ea7a3e21b7cb33cb24c5c63c7d1125a3f1e9", "patch": "@@ -0,0 +1 @@\n+//! <div class=\"extend\">text in red</div>"}]}