{"sha": "e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "node_id": "C_kwDOAAsO6NoAKGUzMzJmM2I0NWViMWRmNGVlMzIyZTBjZTRkNTNiOTBkNmVhYTUyMGE", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-03-30T07:10:04Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-30T07:10:04Z"}, "message": "Rollup merge of #95294 - sourcefrog:doc-copy, r=dtolnay\n\nDocument Linux kernel handoff in std::io::copy and std::fs::copy", "tree": {"sha": "8257b0f44e7e39e5186beaf5af6d66d85b8140ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8257b0f44e7e39e5186beaf5af6d66d85b8140ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiRAJMCRBK7hj4Ov3rIwAAlHUIADTKJThMOuK7qtbnHOd+EWm/\nQ+P9A2PgOQ5E/VfBSxsRFGpFo7bKMYd2KOXOm/X7fA7ZnfFZA7JuzrNQEbjyvVYs\n3+SFjdY5ve4CAo6JLcxi2rDxntDeJZygAWqJSjDM65w4wXjXP8NpddO9USj9ZQHb\nubY1uYfcUrWvoKItVP+GSiMq8kAJZ2XOdlZp/OQr5OgQGsEggN8BwPHMjb+HER/a\n2qpj1F3feTwT5J/9HVQtoKhF6Oc+0FEuWQKE8dWKdX2sWpDyBuSKARSF61Fd8fHd\n2O4sbmPVkfWJn3pZbmcWv+fwe/LhFAPCKPxJJVwlMvzJcfeCBH3xJ+fQfs482Ic=\n=xdsE\n-----END PGP SIGNATURE-----\n", "payload": "tree 8257b0f44e7e39e5186beaf5af6d66d85b8140ea\nparent 1446d17b8f4bd3ff8dbfb129a7674165e06f9f4c\nparent cfee2ed8cb1c77e5bf841d52771e95e99f4fcac3\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1648624204 +0200\ncommitter GitHub <noreply@github.com> 1648624204 +0200\n\nRollup merge of #95294 - sourcefrog:doc-copy, r=dtolnay\n\nDocument Linux kernel handoff in std::io::copy and std::fs::copy\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "html_url": "https://github.com/rust-lang/rust/commit/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1446d17b8f4bd3ff8dbfb129a7674165e06f9f4c", "url": "https://api.github.com/repos/rust-lang/rust/commits/1446d17b8f4bd3ff8dbfb129a7674165e06f9f4c", "html_url": "https://github.com/rust-lang/rust/commit/1446d17b8f4bd3ff8dbfb129a7674165e06f9f4c"}, {"sha": "cfee2ed8cb1c77e5bf841d52771e95e99f4fcac3", "url": "https://api.github.com/repos/rust-lang/rust/commits/cfee2ed8cb1c77e5bf841d52771e95e99f4fcac3", "html_url": "https://github.com/rust-lang/rust/commit/cfee2ed8cb1c77e5bf841d52771e95e99f4fcac3"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "46acd0ee4c5958b1f42f189bb1a16f59b96f3402", "filename": "library/std/src/fs.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a/library%2Fstd%2Fsrc%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a/library%2Fstd%2Fsrc%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ffs.rs?ref=e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "patch": "@@ -1729,11 +1729,17 @@ pub fn rename<P: AsRef<Path>, Q: AsRef<Path>>(from: P, to: Q) -> io::Result<()>\n /// This function currently corresponds to the `open` function in Unix\n /// with `O_RDONLY` for `from` and `O_WRONLY`, `O_CREAT`, and `O_TRUNC` for `to`.\n /// `O_CLOEXEC` is set for returned file descriptors.\n+///\n+/// On Linux (including Android), this function attempts to use `copy_file_range(2)`,\n+/// and falls back to reading and writing if that is not possible.\n+///\n /// On Windows, this function currently corresponds to `CopyFileEx`. Alternate\n /// NTFS streams are copied but only the size of the main stream is returned by\n-/// this function. On MacOS, this function corresponds to `fclonefileat` and\n-/// `fcopyfile`.\n-/// Note that, this [may change in the future][changes].\n+/// this function.\n+///\n+/// On MacOS, this function corresponds to `fclonefileat` and `fcopyfile`.\n+///\n+/// Note that platform-specific behavior [may change in the future][changes].\n ///\n /// [changes]: io#platform-specific-behavior\n ///"}, {"sha": "1a10245e4a5e397dea8ee28d23ac5b390cb53aca", "filename": "library/std/src/io/copy.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a/library%2Fstd%2Fsrc%2Fio%2Fcopy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a/library%2Fstd%2Fsrc%2Fio%2Fcopy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fio%2Fcopy.rs?ref=e332f3b45eb1df4ee322e0ce4d53b90d6eaa520a", "patch": "@@ -39,6 +39,16 @@ use crate::mem::MaybeUninit;\n ///     Ok(())\n /// }\n /// ```\n+///\n+/// # Platform-specific behavior\n+///\n+/// On Linux (including Android), this function uses `copy_file_range(2)`,\n+/// `sendfile(2)` or `splice(2)` syscalls to move data directly between file\n+/// descriptors if possible.\n+///\n+/// Note that platform-specific behavior [may change in the future][changes].\n+///\n+/// [changes]: crate::io#platform-specific-behavior\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub fn copy<R: ?Sized, W: ?Sized>(reader: &mut R, writer: &mut W) -> Result<u64>\n where"}]}