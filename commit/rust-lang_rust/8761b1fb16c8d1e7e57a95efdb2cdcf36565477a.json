{"sha": "8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3NjFiMWZiMTZjOGQxZTdlNTdhOTVlZmRiMmNkY2YzNjU2NTQ3N2E=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-12T02:37:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-12T02:37:39Z"}, "message": "auto merge of #7067 : brson/rust/notasktrans, r=graydon", "tree": {"sha": "fc944df8f911d437591d8fd05354e1c252eecf5b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc944df8f911d437591d8fd05354e1c252eecf5b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "html_url": "https://github.com/rust-lang/rust/commit/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e06579bc0935ed1dcbddef41bc1b6a8850a2059c", "url": "https://api.github.com/repos/rust-lang/rust/commits/e06579bc0935ed1dcbddef41bc1b6a8850a2059c", "html_url": "https://github.com/rust-lang/rust/commit/e06579bc0935ed1dcbddef41bc1b6a8850a2059c"}, {"sha": "48c7bc17c68032d142dd6ce53b8f5933d52c2165", "url": "https://api.github.com/repos/rust-lang/rust/commits/48c7bc17c68032d142dd6ce53b8f5933d52c2165", "html_url": "https://github.com/rust-lang/rust/commit/48c7bc17c68032d142dd6ce53b8f5933d52c2165"}], "stats": {"total": 29, "additions": 0, "deletions": 29}, "files": [{"sha": "8db838c5d311dd7e0ffc53fd18268b57c216503d", "filename": "src/librustc/middle/trans/base.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "patch": "@@ -3074,9 +3074,6 @@ pub fn trans_crate(sess: session::Session,\n         }\n         let int_type = T_int(targ_cfg);\n         let float_type = T_float(targ_cfg);\n-        let task_type = T_task(targ_cfg);\n-        let taskptr_type = T_ptr(task_type);\n-        lib::llvm::associate_type(tn, @\"taskptr\", taskptr_type);\n         let tydesc_type = T_tydesc(targ_cfg);\n         lib::llvm::associate_type(tn, @\"tydesc\", tydesc_type);\n         let crate_map = decl_crate_map(sess, link_meta, llmod);\n@@ -3142,7 +3139,6 @@ pub fn trans_crate(sess: session::Session,\n               tydesc_type: tydesc_type,\n               int_type: int_type,\n               float_type: float_type,\n-              task_type: task_type,\n               opaque_vec_type: T_opaque_vec(targ_cfg),\n               builder: BuilderRef_res(unsafe {\n                   llvm::LLVMCreateBuilderInContext(llcx)"}, {"sha": "6150364e552654106f7bfcac2b45022b20cc717c", "filename": "src/librustc/middle/trans/common.rs", "status": "modified", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8761b1fb16c8d1e7e57a95efdb2cdcf36565477a/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs?ref=8761b1fb16c8d1e7e57a95efdb2cdcf36565477a", "patch": "@@ -223,7 +223,6 @@ pub struct CrateContext {\n      tydesc_type: TypeRef,\n      int_type: TypeRef,\n      float_type: TypeRef,\n-     task_type: TypeRef,\n      opaque_vec_type: TypeRef,\n      builder: BuilderRef_res,\n      shape_cx: shape::Ctxt,\n@@ -952,28 +951,6 @@ pub fn T_empty_struct() -> TypeRef { return T_struct([], false); }\n // they are described by this opaque type.\n pub fn T_vtable() -> TypeRef { T_array(T_ptr(T_i8()), 1u) }\n \n-pub fn T_task(targ_cfg: @session::config) -> TypeRef {\n-    let t = T_named_struct(\"task\");\n-\n-    // Refcount\n-    // Delegate pointer\n-    // Stack segment pointer\n-    // Runtime SP\n-    // Rust SP\n-    // GC chain\n-\n-\n-    // Domain pointer\n-    // Crate cache pointer\n-\n-    let t_int = T_int(targ_cfg);\n-    let elems =\n-        ~[t_int, t_int, t_int, t_int,\n-         t_int, t_int, t_int, t_int];\n-    set_struct_body(t, elems, false);\n-    return t;\n-}\n-\n pub fn T_tydesc_field(cx: @CrateContext, field: uint) -> TypeRef {\n     // Bit of a kludge: pick the fn typeref out of the tydesc..\n \n@@ -1103,8 +1080,6 @@ pub fn T_chan(cx: @CrateContext, _t: TypeRef) -> TypeRef {\n \n }\n \n-pub fn T_taskptr(cx: @CrateContext) -> TypeRef { return T_ptr(cx.task_type); }\n-\n \n pub fn T_opaque_cbox_ptr(cx: @CrateContext) -> TypeRef {\n     // closures look like boxes (even when they are ~fn or &fn)"}]}