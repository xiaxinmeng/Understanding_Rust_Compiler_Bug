{"sha": "6c63b9497dfcd546199db03174ac11866bf3bfb8", "node_id": "C_kwDOAAsO6NoAKDZjNjNiOTQ5N2RmY2Q1NDYxOTlkYjAzMTc0YWMxMTg2NmJmM2JmYjg", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-01-16T17:10:11Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-01-17T13:00:55Z"}, "message": "Add failing test for invalid projection as union field type", "tree": {"sha": "a72392557f6e1a657c0fbe8592ea12b8c268e19a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a72392557f6e1a657c0fbe8592ea12b8c268e19a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c63b9497dfcd546199db03174ac11866bf3bfb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c63b9497dfcd546199db03174ac11866bf3bfb8", "html_url": "https://github.com/rust-lang/rust/commit/6c63b9497dfcd546199db03174ac11866bf3bfb8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c63b9497dfcd546199db03174ac11866bf3bfb8/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4653bbfaee990326a95d3dc24e60cf6827aca567", "url": "https://api.github.com/repos/rust-lang/rust/commits/4653bbfaee990326a95d3dc24e60cf6827aca567", "html_url": "https://github.com/rust-lang/rust/commit/4653bbfaee990326a95d3dc24e60cf6827aca567"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "b88167b3b5459860e2fe4a12c5ab9df645dbfb57", "filename": "tests/ui/union/projection-as-union-type-error-2.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.rs?ref=6c63b9497dfcd546199db03174ac11866bf3bfb8", "patch": "@@ -0,0 +1,20 @@\n+// Test to ensure that there is no ICE when normalizing a projection\n+// which is invalid (from <https://github.com/rust-lang/rust/pull/106938>).\n+\n+#![crate_type = \"lib\"]\n+\n+trait Identity {\n+    type Identity;\n+}\n+trait NotImplemented {}\n+\n+impl<T: NotImplemented> Identity for T {\n+    type Identity = Self;\n+}\n+\n+type Foo = u8;\n+\n+union Bar {\n+    a: <Foo as Identity>::Identity, //~ ERROR\n+    b: u8,\n+}"}, {"sha": "bab226f271df7e0340e1efb573705eeb73c3f4bc", "filename": "tests/ui/union/projection-as-union-type-error-2.stderr", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funion%2Fprojection-as-union-type-error-2.stderr?ref=6c63b9497dfcd546199db03174ac11866bf3bfb8", "patch": "@@ -0,0 +1,17 @@\n+error[E0277]: the trait bound `u8: NotImplemented` is not satisfied\n+  --> $DIR/projection-as-union-type-error-2.rs:18:8\n+   |\n+LL |     a: <Foo as Identity>::Identity,\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `NotImplemented` is not implemented for `u8`\n+   |\n+note: required for `u8` to implement `Identity`\n+  --> $DIR/projection-as-union-type-error-2.rs:11:25\n+   |\n+LL | impl<T: NotImplemented> Identity for T {\n+   |         --------------  ^^^^^^^^     ^\n+   |         |\n+   |         unsatisfied trait bound introduced here\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}, {"sha": "17091c35fb230d0cd73d0e6f191cbebebcd38d57", "filename": "tests/ui/union/projection-as-union-type-error.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funion%2Fprojection-as-union-type-error.rs?ref=6c63b9497dfcd546199db03174ac11866bf3bfb8", "patch": "@@ -0,0 +1,15 @@\n+// Test to ensure that there is no ICE when normalizing a projection\n+// which is invalid (from <https://github.com/rust-lang/rust/pull/106938>).\n+\n+#![crate_type = \"lib\"]\n+\n+pub trait Identity {\n+    type Identity;\n+}\n+\n+pub type Foo = u8;\n+\n+pub union Bar {\n+    a:  <Foo as Identity>::Identity, //~ ERROR\n+    b: u8,\n+}"}, {"sha": "e4fbe9603ad458b916c0be16ad5f0d989b89beb1", "filename": "tests/ui/union/projection-as-union-type-error.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6c63b9497dfcd546199db03174ac11866bf3bfb8/tests%2Fui%2Funion%2Fprojection-as-union-type-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funion%2Fprojection-as-union-type-error.stderr?ref=6c63b9497dfcd546199db03174ac11866bf3bfb8", "patch": "@@ -0,0 +1,9 @@\n+error[E0277]: the trait bound `u8: Identity` is not satisfied\n+  --> $DIR/projection-as-union-type-error.rs:13:9\n+   |\n+LL |     a:  <Foo as Identity>::Identity,\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `Identity` is not implemented for `u8`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}