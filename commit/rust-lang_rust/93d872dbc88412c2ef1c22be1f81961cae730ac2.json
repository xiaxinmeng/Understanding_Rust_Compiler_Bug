{"sha": "93d872dbc88412c2ef1c22be1f81961cae730ac2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzZDg3MmRiYzg4NDEyYzJlZjFjMjJiZTFmODE5NjFjYWU3MzBhYzI=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-01-13T23:50:24Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-02-01T14:43:56Z"}, "message": "Add UI test", "tree": {"sha": "ff23e15dc8b4551e225b4f8b158e1326eb174c41", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ff23e15dc8b4551e225b4f8b158e1326eb174c41"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93d872dbc88412c2ef1c22be1f81961cae730ac2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAlxUWywACgkQtAh+UQ6Y\nsWRG7hAArWV6VnSIQkzs7x9bGgStjc77w6Y25lmtQEqMLAK1jA9euCXQxN3N4fF2\nfOiZiNBl9xyYj3PYjDYuIUnSkxQSy4ug9KjUqfp3CBTpgeF5volEVPOvPmICIZmQ\npEUiUKIDf6UThkKo+gFD4AinL/IwIixVoGrNdExcn6DPisElxRVme1Ffv0hwXA5i\nzWwRM/M/qFDGQwvq+NW9i4WDh/EVwyk1Z1FXUdBz9d2k7Ik8nArHfaWITCXPYQYq\ndl8E0/qPFNi7vEepKg8ahw770zQojJeEFxMv2e4lgXlymEUtQ88mFo8uP1wP6rFH\neRbKicP1EDfx0QsEfqSBIy/h2TC/kWKDDYSgn6aj+T3wS1lfL5bziL6eg1kVc3ou\n8n0Ovd5yuslj+C1Rmi/FUjmXx529BFrzUjNVwNZiU+5UGjqRjYvYF7wbYHn12hOr\n97PfCz8fq4Xlthn5C6BCxI68gNZ2/ati7GK5ECL/1WCNiAQSI2BiAfpCZVn6sQqE\n3R5NpebJ2L9PdzKwQMuNa5rhQ3Om+R6TaAyDDyD0s2zHl7vaGBWOJxylIe6aSZpW\niUGmP5AnJtkpx+8fWeBJwtzrunk5JrT3rJmcmdtcP2zDnUUYoTXjaqaCCaK0Qf1O\ntmKjw9eOFh9DXjryxBh3SS5Z2x6eH0fgrkw9+aKrw2bxXJlsxZg=\n=rESu\n-----END PGP SIGNATURE-----", "payload": "tree ff23e15dc8b4551e225b4f8b158e1326eb174c41\nparent 23014b4036ef88522e5134e71622b64eebbcf703\nauthor Aaron Hill <aa1ronham@gmail.com> 1547423424 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1549032236 -0500\n\nAdd UI test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93d872dbc88412c2ef1c22be1f81961cae730ac2", "html_url": "https://github.com/rust-lang/rust/commit/93d872dbc88412c2ef1c22be1f81961cae730ac2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93d872dbc88412c2ef1c22be1f81961cae730ac2/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23014b4036ef88522e5134e71622b64eebbcf703", "url": "https://api.github.com/repos/rust-lang/rust/commits/23014b4036ef88522e5134e71622b64eebbcf703", "html_url": "https://github.com/rust-lang/rust/commit/23014b4036ef88522e5134e71622b64eebbcf703"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "23426f96c75f060b3aaaa3fc4a49a2c87fe4b6f9", "filename": "src/test/ui/privacy/pub-priv-dep/auxiliary/priv_dep.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fauxiliary%2Fpriv_dep.rs?ref=93d872dbc88412c2ef1c22be1f81961cae730ac2", "patch": "@@ -0,0 +1 @@\n+pub struct OtherType;"}, {"sha": "d8620944065c98120614d25ddb5a63530f813db6", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs?ref=93d872dbc88412c2ef1c22be1f81961cae730ac2", "patch": "@@ -0,0 +1,31 @@\n+ // aux-build:priv_dep.rs\n+#![feature(public_private_dependencies)]\n+#![deny(leaked_private_dependency)]\n+\n+// This crate is a private dependency\n+extern crate priv_dep;\n+\n+use priv_dep::OtherType;\n+\n+// Type from private dependency used in private\n+// type - this is fine\n+struct PrivateType {\n+    field: OtherType\n+}\n+\n+pub struct PublicType {\n+    pub field: OtherType,\n+    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+    //~| WARNING this was previously accepted\n+    priv_field: OtherType,\n+}\n+\n+impl PublicType {\n+    pub fn pub_fn(param: OtherType) {}\n+    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+    //~| WARNING this was previously accepted\n+\n+    fn priv_fn(param: OtherType) {}\n+}\n+\n+fn main() {}"}, {"sha": "330bf8a1f52267df6c09619e228baaf4977759a1", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/93d872dbc88412c2ef1c22be1f81961cae730ac2/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr?ref=93d872dbc88412c2ef1c22be1f81961cae730ac2", "patch": "@@ -0,0 +1,25 @@\n+error: type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n+  --> $DIR/pub-priv1.rs:17:5\n+   |\n+LL |     pub field: OtherType,\n+   |     ^^^^^^^^^^^^^^^^^^^^\n+   |\n+note: lint level defined here\n+  --> $DIR/pub-priv1.rs:3:9\n+   |\n+LL | #![deny(leaked_private_dependency)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n+\n+error: type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n+  --> $DIR/pub-priv1.rs:24:5\n+   |\n+LL |     pub fn pub_fn(param: OtherType) {}\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n+\n+error: aborting due to 2 previous errors\n+"}]}