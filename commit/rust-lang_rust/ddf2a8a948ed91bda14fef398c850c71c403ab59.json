{"sha": "ddf2a8a948ed91bda14fef398c850c71c403ab59", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkZjJhOGE5NDhlZDkxYmRhMTRmZWYzOThjODUwYzcxYzQwM2FiNTk=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-09T15:09:49Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-09T16:40:11Z"}, "message": "add completion detail", "tree": {"sha": "4b219aac4b876d5526b295beab1d7e0ee6272adc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b219aac4b876d5526b295beab1d7e0ee6272adc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ddf2a8a948ed91bda14fef398c850c71c403ab59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ddf2a8a948ed91bda14fef398c850c71c403ab59", "html_url": "https://github.com/rust-lang/rust/commit/ddf2a8a948ed91bda14fef398c850c71c403ab59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ddf2a8a948ed91bda14fef398c850c71c403ab59/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2b8aa1ce5e5398d981387079e86ff67a5b7e8c0", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2b8aa1ce5e5398d981387079e86ff67a5b7e8c0", "html_url": "https://github.com/rust-lang/rust/commit/c2b8aa1ce5e5398d981387079e86ff67a5b7e8c0"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "d707a84ef3d919e0e55ad720e780b48c8de62c1b", "filename": "crates/ra_ide_api/src/completion/completion_item.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ddf2a8a948ed91bda14fef398c850c71c403ab59/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ddf2a8a948ed91bda14fef398c850c71c403ab59/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs?ref=ddf2a8a948ed91bda14fef398c850c71c403ab59", "patch": "@@ -11,6 +11,7 @@ pub struct CompletionItem {\n     /// completion.\n     completion_kind: CompletionKind,\n     label: String,\n+    detail: Option<String>,\n     lookup: Option<String>,\n     snippet: Option<String>,\n     kind: Option<CompletionItemKind>,\n@@ -51,6 +52,7 @@ impl CompletionItem {\n         Builder {\n             completion_kind,\n             label,\n+            detail: None,\n             lookup: None,\n             snippet: None,\n             kind: None,\n@@ -60,6 +62,10 @@ impl CompletionItem {\n     pub fn label(&self) -> &str {\n         &self.label\n     }\n+    /// Short one-line additional information, like a type\n+    pub fn detail(&self) -> Option<&str> {\n+        self.detail.as_ref().map(|it| it.as_str())\n+    }\n     /// What string is used for filtering.\n     pub fn lookup(&self) -> &str {\n         self.lookup\n@@ -87,6 +93,7 @@ impl CompletionItem {\n pub(crate) struct Builder {\n     completion_kind: CompletionKind,\n     label: String,\n+    detail: Option<String>,\n     lookup: Option<String>,\n     snippet: Option<String>,\n     kind: Option<CompletionItemKind>,\n@@ -100,6 +107,7 @@ impl Builder {\n     pub(crate) fn build(self) -> CompletionItem {\n         CompletionItem {\n             label: self.label,\n+            detail: self.detail,\n             lookup: self.lookup,\n             snippet: self.snippet,\n             kind: self.kind,\n@@ -118,6 +126,10 @@ impl Builder {\n         self.kind = Some(kind);\n         self\n     }\n+    pub(crate) fn detail(mut self, detail: impl Into<String>) -> Builder {\n+        self.detail = Some(detail.into());\n+        self\n+    }\n     pub(super) fn from_resolution(\n         mut self,\n         ctx: &CompletionContext,"}, {"sha": "35c679a4af4ad17ce45af1761f2b32aa17ff233b", "filename": "crates/ra_lsp_server/src/conv.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ddf2a8a948ed91bda14fef398c850c71c403ab59/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ddf2a8a948ed91bda14fef398c850c71c403ab59/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fconv.rs?ref=ddf2a8a948ed91bda14fef398c850c71c403ab59", "patch": "@@ -75,6 +75,7 @@ impl Conv for CompletionItem {\n     fn conv(self) -> <Self as Conv>::Output {\n         let mut res = ::languageserver_types::CompletionItem {\n             label: self.label().to_string(),\n+            detail: self.detail().map(|it| it.to_string()),\n             filter_text: Some(self.lookup().to_string()),\n             kind: self.kind().map(|it| it.conv()),\n             ..Default::default()"}]}