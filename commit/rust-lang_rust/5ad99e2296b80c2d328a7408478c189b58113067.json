{"sha": "5ad99e2296b80c2d328a7408478c189b58113067", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhZDk5ZTIyOTZiODBjMmQzMjhhNzQwODQ3OGMxODliNTgxMTMwNjc=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2016-04-08T19:10:56Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2016-05-06T03:09:48Z"}, "message": "Distribute both rust-lldb and rust-gdb everywhere except win-msvc\n\nBoth debuggers are viable in some capacity on all tier-1 platforms,\nand people often ask for rust-lldb on Linux or rust-gdb on OS X.", "tree": {"sha": "5f1b35b608b190b20f713100ca5f30371c330e16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5f1b35b608b190b20f713100ca5f30371c330e16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ad99e2296b80c2d328a7408478c189b58113067", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ad99e2296b80c2d328a7408478c189b58113067", "html_url": "https://github.com/rust-lang/rust/commit/5ad99e2296b80c2d328a7408478c189b58113067", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ad99e2296b80c2d328a7408478c189b58113067/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "77987ba89894997c174ac8b01185c0dc12913fa5", "url": "https://api.github.com/repos/rust-lang/rust/commits/77987ba89894997c174ac8b01185c0dc12913fa5", "html_url": "https://github.com/rust-lang/rust/commit/77987ba89894997c174ac8b01185c0dc12913fa5"}], "stats": {"total": 31, "additions": 17, "deletions": 14}, "files": [{"sha": "fbf32dc1a397f2468b10eecd1100394472c7eb50", "filename": "mk/debuggers.mk", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/5ad99e2296b80c2d328a7408478c189b58113067/mk%2Fdebuggers.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5ad99e2296b80c2d328a7408478c189b58113067/mk%2Fdebuggers.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdebuggers.mk?ref=5ad99e2296b80c2d328a7408478c189b58113067", "patch": "@@ -41,10 +41,13 @@ DEBUGGER_BIN_SCRIPTS_LLDB_ABS=\\\n \n \n ## ALL ##\n-DEBUGGER_RUSTLIB_ETC_SCRIPTS_ALL=$(DEBUGGER_RUSTLIB_ETC_SCRIPTS_GDB) \\\n-                                 $(DEBUGGER_RUSTLIB_ETC_SCRIPTS_LLDB)\n-DEBUGGER_RUSTLIB_ETC_SCRIPTS_ALL_ABS=$(DEBUGGER_RUSTLIB_ETC_SCRIPTS_GDB_ABS) \\\n-                                     $(DEBUGGER_RUSTLIB_ETC_SCRIPTS_LLDB_ABS)\n+DEBUGGER_RUSTLIB_ETC_SCRIPTS_ALL=gdb_load_rust_pretty_printers.py \\\n+                                 gdb_rust_pretty_printing.py \\\n+                                 lldb_rust_formatters.py \\\n+                                 debugger_pretty_printers_common.py\n+DEBUGGER_RUSTLIB_ETC_SCRIPTS_ALL_ABS=\\\n+    $(foreach script,$(DEBUGGER_RUSTLIB_ETC_SCRIPTS_ALL), \\\n+        $(CFG_SRC_DIR)src/etc/$(script))\n DEBUGGER_BIN_SCRIPTS_ALL=$(DEBUGGER_BIN_SCRIPTS_GDB) \\\n                          $(DEBUGGER_BIN_SCRIPTS_LLDB)\n DEBUGGER_BIN_SCRIPTS_ALL_ABS=$(DEBUGGER_BIN_SCRIPTS_GDB_ABS) \\"}, {"sha": "493b61051331f498776fd783a5113e6bf1f294a9", "filename": "mk/main.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5ad99e2296b80c2d328a7408478c189b58113067/mk%2Fmain.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5ad99e2296b80c2d328a7408478c189b58113067/mk%2Fmain.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fmain.mk?ref=5ad99e2296b80c2d328a7408478c189b58113067", "patch": "@@ -390,7 +390,7 @@ endif\n # This 'function' will determine which debugger scripts to copy based on a\n # target triple. See debuggers.mk for more information.\n TRIPLE_TO_DEBUGGER_SCRIPT_SETTING=\\\n- $(if $(findstring windows,$(1)),none,$(if $(findstring darwin,$(1)),lldb,gdb))\n+ $(if $(findstring windows-msvc,$(1)),none,all)\n \n STAGES = 0 1 2 3\n "}, {"sha": "9e875ec44c23a04843cb53a9f3f0e5b1766d0609", "filename": "src/bootstrap/build/dist.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/5ad99e2296b80c2d328a7408478c189b58113067/src%2Fbootstrap%2Fbuild%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ad99e2296b80c2d328a7408478c189b58113067/src%2Fbootstrap%2Fbuild%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild%2Fdist.rs?ref=5ad99e2296b80c2d328a7408478c189b58113067", "patch": "@@ -217,23 +217,23 @@ pub fn debugger_scripts(build: &Build,\n         t!(fs::create_dir_all(&dst));\n         install(&build.src.join(\"src/etc/\").join(file), &dst, 0o644);\n     };\n-    if host.contains(\"windows\") {\n+    if host.contains(\"windows-msvc\") {\n         // no debugger scripts\n-    } else if host.contains(\"darwin\") {\n-        // lldb debugger scripts\n-        install(&build.src.join(\"src/etc/rust-lldb\"), &sysroot.join(\"bin\"),\n-                0o755);\n-\n-        cp_debugger_script(\"lldb_rust_formatters.py\");\n-        cp_debugger_script(\"debugger_pretty_printers_common.py\");\n     } else {\n+        cp_debugger_script(\"debugger_pretty_printers_common.py\");\n+\n         // gdb debugger scripts\n         install(&build.src.join(\"src/etc/rust-gdb\"), &sysroot.join(\"bin\"),\n                 0o755);\n \n         cp_debugger_script(\"gdb_load_rust_pretty_printers.py\");\n         cp_debugger_script(\"gdb_rust_pretty_printing.py\");\n-        cp_debugger_script(\"debugger_pretty_printers_common.py\");\n+\n+        // lldb debugger scripts\n+        install(&build.src.join(\"src/etc/rust-lldb\"), &sysroot.join(\"bin\"),\n+                0o755);\n+\n+        cp_debugger_script(\"lldb_rust_formatters.py\");\n     }\n }\n "}]}