{"sha": "4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmZjFkMjBhZDcxYzAxYWRjYWE2MWVhMWMxMWYzZWExNGNlOGM5ODM=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-01-13T22:52:19Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-01-14T05:34:41Z"}, "message": "Rollup merge of #30835 - kraai:show-span, r=sanxiyn\n\nI think this will fix #30656.", "tree": {"sha": "4b2b47afef30690155ef1e4d58626c0a0a4e9443", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b2b47afef30690155ef1e4d58626c0a0a4e9443"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "html_url": "https://github.com/rust-lang/rust/commit/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98c7519826a129fea55e891f0930f2c5d3d8bc10", "url": "https://api.github.com/repos/rust-lang/rust/commits/98c7519826a129fea55e891f0930f2c5d3d8bc10", "html_url": "https://github.com/rust-lang/rust/commit/98c7519826a129fea55e891f0930f2c5d3d8bc10"}, {"sha": "5fb15d02379b2d18176bd5a920a94157a3344e51", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb15d02379b2d18176bd5a920a94157a3344e51", "html_url": "https://github.com/rust-lang/rust/commit/5fb15d02379b2d18176bd5a920a94157a3344e51"}], "stats": {"total": 15, "additions": 5, "deletions": 10}, "files": [{"sha": "80bfbe4edda8810dedb47db0085254a450497c89", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "patch": "@@ -132,7 +132,6 @@ pub struct Options {\n     pub prints: Vec<PrintRequest>,\n     pub cg: CodegenOptions,\n     pub color: ColorConfig,\n-    pub show_span: Option<String>,\n     pub externs: HashMap<String, Vec<String>>,\n     pub crate_name: Option<String>,\n     /// An optional name to use as the crate for std during std injection,\n@@ -243,7 +242,6 @@ pub fn basic_options() -> Options {\n         prints: Vec::new(),\n         cg: basic_codegen_options(),\n         color: ColorConfig::Auto,\n-        show_span: None,\n         externs: HashMap::new(),\n         crate_name: None,\n         alt_std_name: None,\n@@ -634,6 +632,8 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n           \"don't clear the resolution tables after analysis\"),\n     keep_ast: bool = (false, parse_bool,\n           \"keep the AST after lowering it to HIR\"),\n+    show_span: Option<String> = (None, parse_opt_string,\n+          \"show spans for compiler debugging (expr|pat|ty)\"),\n }\n \n pub fn default_lib_output() -> CrateType {\n@@ -882,7 +882,6 @@ pub fn rustc_optgroups() -> Vec<RustcOptGroup> {\n                       `hir` (the HIR), `hir,identified`, or\n                       `hir,typed` (HIR with types for each node).\",\n                      \"TYPE\"),\n-        opt::opt_u(\"\", \"show-span\", \"Show spans for compiler debugging\", \"expr|pat|ty\"),\n     ]);\n     opts\n }\n@@ -1123,7 +1122,6 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n         prints: prints,\n         cg: cg,\n         color: color,\n-        show_span: None,\n         externs: externs,\n         crate_name: crate_name,\n         alt_std_name: None,"}, {"sha": "840260da33086956d30499da09b76782da9453b2", "filename": "src/librustc_driver/driver.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc_driver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc_driver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fdriver.rs?ref=4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "patch": "@@ -428,7 +428,7 @@ pub fn phase_1_parse_input(sess: &Session, cfg: ast::CrateConfig, input: &Input)\n         println!(\"Pre-expansion node count:  {}\", count_nodes(&krate));\n     }\n \n-    if let Some(ref s) = sess.opts.show_span {\n+    if let Some(ref s) = sess.opts.debugging_opts.show_span {\n         syntax::show_span::run(sess.diagnostic(), s, &krate);\n     }\n "}, {"sha": "cdac3de3682e57911c104f5df1c15dc5ab813da7", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=4ff1d20ad71c01adcaa61ea1c11f3ea14ce8c983", "patch": "@@ -138,12 +138,9 @@ pub fn run_compiler<'a>(args: &[String], callbacks: &mut CompilerCalls<'a>) {\n     };\n \n     let cstore = Rc::new(CStore::new(token::get_ident_interner()));\n-    let mut sess = build_session(sopts, input_file_path, descriptions,\n+    let sess = build_session(sopts, input_file_path, descriptions,\n                                  cstore.clone());\n     rustc_lint::register_builtins(&mut sess.lint_store.borrow_mut(), Some(&sess));\n-    if sess.unstable_options() {\n-        sess.opts.show_span = matches.opt_str(\"show-span\");\n-    }\n     let mut cfg = config::build_configuration(&sess);\n     target_features::add_configuration(&mut cfg, &sess);\n \n@@ -387,7 +384,7 @@ impl<'a> CompilerCalls<'a> for RustcDefaultCalls {\n     fn build_controller(&mut self, sess: &Session) -> CompileController<'a> {\n         let mut control = CompileController::basic();\n \n-        if sess.opts.parse_only || sess.opts.show_span.is_some() ||\n+        if sess.opts.parse_only || sess.opts.debugging_opts.show_span.is_some() ||\n            sess.opts.debugging_opts.ast_json_noexpand {\n             control.after_parse.stop = Compilation::Stop;\n         }"}]}