{"sha": "122ea68b12ec1587f0fe0bd4737ae866e2a56c39", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyMmVhNjhiMTJlYzE1ODdmMGZlMGJkNDczN2FlODY2ZTJhNTZjMzk=", "commit": {"author": {"name": "Or Brostovski", "email": "tohava@gmail.com", "date": "2010-08-06T13:11:15Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-07T00:34:31Z"}, "message": "Added AST pretty printing for slice expression", "tree": {"sha": "f2437f1a8de9391a0aec9fe679dc98b9d87b9775", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2437f1a8de9391a0aec9fe679dc98b9d87b9775"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/122ea68b12ec1587f0fe0bd4737ae866e2a56c39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/122ea68b12ec1587f0fe0bd4737ae866e2a56c39", "html_url": "https://github.com/rust-lang/rust/commit/122ea68b12ec1587f0fe0bd4737ae866e2a56c39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/122ea68b12ec1587f0fe0bd4737ae866e2a56c39/comments", "author": {"login": "tohava", "id": 329651, "node_id": "MDQ6VXNlcjMyOTY1MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/329651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tohava", "html_url": "https://github.com/tohava", "followers_url": "https://api.github.com/users/tohava/followers", "following_url": "https://api.github.com/users/tohava/following{/other_user}", "gists_url": "https://api.github.com/users/tohava/gists{/gist_id}", "starred_url": "https://api.github.com/users/tohava/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tohava/subscriptions", "organizations_url": "https://api.github.com/users/tohava/orgs", "repos_url": "https://api.github.com/users/tohava/repos", "events_url": "https://api.github.com/users/tohava/events{/privacy}", "received_events_url": "https://api.github.com/users/tohava/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0cc4817e952f1a022b1ad9c01793db1735a579e", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0cc4817e952f1a022b1ad9c01793db1735a579e", "html_url": "https://github.com/rust-lang/rust/commit/a0cc4817e952f1a022b1ad9c01793db1735a579e"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "9cad5ce539ed8fae5a43eea20c75558e16b90fcb", "filename": "src/boot/fe/ast.ml", "status": "modified", "additions": 28, "deletions": 1, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/122ea68b12ec1587f0fe0bd4737ae866e2a56c39/src%2Fboot%2Ffe%2Fast.ml", "raw_url": "https://github.com/rust-lang/rust/raw/122ea68b12ec1587f0fe0bd4737ae866e2a56c39/src%2Fboot%2Ffe%2Fast.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Ffe%2Fast.ml?ref=122ea68b12ec1587f0fe0bd4737ae866e2a56c39", "patch": "@@ -1237,7 +1237,13 @@ and fmt_stmt_body (ff:Format.formatter) (s:stmt) : unit =\n           \n       | STMT_alt_port _ -> fmt ff \"?stmt_alt_port?\"\n       | STMT_note _ -> fmt ff \"?stmt_note?\"\n-      | STMT_slice _ -> fmt ff \"?stmt_slice?\"\n+      | STMT_slice (dst, src, slice) -> \n+          fmt_lval ff dst;\n+          fmt ff \" = \";\n+          fmt_lval ff src;\n+          fmt ff \".\";\n+          fmt_slice ff slice;\n+          fmt ff \";\";\n   end\n \n and fmt_arm \n@@ -1275,6 +1281,27 @@ and fmt_pat (ff:Format.formatter) (pat:pat) : unit =\n     | PAT_wild ->\n         fmt ff \"_\"\n \n+and fmt_slice (ff:Format.formatter) (slice:slice) : unit =\n+  let fmt_slice_start = (match slice.slice_start with\n+                             None -> (fun ff -> fmt ff \"0\")\n+                           | Some atom -> (fun ff -> fmt_atom ff atom)) in\n+    fmt ff \"(@[\";\n+    fmt_slice_start ff;\n+    begin\n+      match slice.slice_len with\n+          None -> fmt ff \",\"\n+        | Some slice_len ->\n+            fmt ff \",@ @[\";\n+            fmt_slice_start ff;\n+            fmt ff \" +@ \";\n+            fmt_atom ff slice_len;\n+            fmt ff \"@]\";\n+    end;\n+    fmt ff \"@])\";\n+    \n+\n+    \n+\n and fmt_decl_param (ff:Format.formatter) (param:ty_param) : unit =\n   let (ident, (i, e)) = param in\n   fmt_effect ff e;"}]}