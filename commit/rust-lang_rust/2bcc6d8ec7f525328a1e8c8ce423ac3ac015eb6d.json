{"sha": "2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJiY2M2ZDhlYzdmNTI1MzI4YTFlOGM4Y2U0MjNhYzNhYzAxNWViNmQ=", "commit": {"author": {"name": "Ariel Ben-Yehuda", "email": "arielb1@mail.tau.ac.il", "date": "2015-08-19T12:10:18Z"}, "committer": {"name": "Ariel Ben-Yehuda", "email": "ariel.byd@gmail.com", "date": "2015-08-24T17:10:25Z"}, "message": "Use a u32 instead of a usize in CodeExtent\n\nThis reduces the size of CodeExtent to 12 bytes (was 24). We should have\na warning for this kind of problem.", "tree": {"sha": "8c969bd83856f317316dc5803805d5985dcf7436", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c969bd83856f317316dc5803805d5985dcf7436"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "html_url": "https://github.com/rust-lang/rust/commit/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d/comments", "author": null, "committer": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "316510f5e216340d9ec1a2734e2f5ada87504689", "url": "https://api.github.com/repos/rust-lang/rust/commits/316510f5e216340d9ec1a2734e2f5ada87504689", "html_url": "https://github.com/rust-lang/rust/commit/316510f5e216340d9ec1a2734e2f5ada87504689"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "7a111003aa8ce0b25cc36bdb7eac45b1fc447202", "filename": "src/librustc/metadata/tydecode.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d/src%2Flibrustc%2Fmetadata%2Ftydecode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ftydecode.rs?ref=2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "patch": "@@ -269,7 +269,7 @@ impl<'a,'tcx> TyDecoder<'a,'tcx> {\n                 assert_eq!(self.next(), '[');\n                 let node_id = self.parse_uint() as ast::NodeId;\n                 assert_eq!(self.next(), '|');\n-                let first_stmt_index = self.parse_uint();\n+                let first_stmt_index = self.parse_u32();\n                 assert_eq!(self.next(), ']');\n                 let block_remainder = region::BlockRemainder {\n                     block: node_id, first_statement_index: first_stmt_index,\n@@ -717,4 +717,3 @@ fn parse_unsafety(c: char) -> ast::Unsafety {\n         _ => panic!(\"parse_unsafety: bad unsafety {}\", c)\n     }\n }\n-"}, {"sha": "5ccbffa40a3f5d0e0107e6f0b373648b4cd52091", "filename": "src/librustc/middle/region.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d/src%2Flibrustc%2Fmiddle%2Fregion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d/src%2Flibrustc%2Fmiddle%2Fregion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fregion.rs?ref=2bcc6d8ec7f525328a1e8c8ce423ac3ac015eb6d", "patch": "@@ -144,7 +144,7 @@ impl DestructionScopeData {\n          RustcDecodable, Debug, Copy)]\n pub struct BlockRemainder {\n     pub block: ast::NodeId,\n-    pub first_statement_index: usize,\n+    pub first_statement_index: u32,\n }\n \n impl CodeExtent {\n@@ -207,7 +207,7 @@ impl CodeExtent {\n                         //\n                         // (This is the special case aluded to in the\n                         // doc-comment for this method)\n-                        let stmt_span = blk.stmts[r.first_statement_index].span;\n+                        let stmt_span = blk.stmts[r.first_statement_index as usize].span;\n                         Some(Span { lo: stmt_span.hi, ..blk.span })\n                     }\n                 }\n@@ -310,7 +310,7 @@ impl InnermostDeclaringBlock {\n struct DeclaringStatementContext {\n     stmt_id: ast::NodeId,\n     block_id: ast::NodeId,\n-    stmt_index: usize,\n+    stmt_index: u32,\n }\n \n impl DeclaringStatementContext {\n@@ -711,7 +711,7 @@ fn resolve_block(visitor: &mut RegionResolutionVisitor, blk: &ast::Block) {\n                 let declaring = DeclaringStatementContext {\n                     stmt_id: stmt_id,\n                     block_id: blk.id,\n-                    stmt_index: i,\n+                    stmt_index: i as u32,\n                 };\n                 record_superlifetime(\n                     visitor, declaring.to_code_extent(), statement.span);"}]}