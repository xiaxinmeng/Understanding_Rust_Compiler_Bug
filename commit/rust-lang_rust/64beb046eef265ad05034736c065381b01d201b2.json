{"sha": "64beb046eef265ad05034736c065381b01d201b2", "node_id": "C_kwDOAAsO6NoAKDY0YmViMDQ2ZWVmMjY1YWQwNTAzNDczNmMwNjUzODFiMDFkMjAxYjI", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-01-07T05:54:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-07T05:54:00Z"}, "message": "Rollup merge of #106543 - notriddle:notriddle/source-sidebar-width-zero, r=GuillaumeGomez\n\nrustdoc: remove no-op CSS `.rustdoc.source .sidebar { width: 0 }`\n\nThis CSS was added in dc2c9723343c985740be09919236a6e96c4e4433, before 6a5f8b1aef1417d7dc85b5d0a229d2db1930eb7c when the sidebars were merged.\n\nNow that they are merged, the source sidebar is being pushed off-screen anyway, so giving it zero width doesn't do much.", "tree": {"sha": "d8deb476bc511844ce6ae8c5b389c7243341a84a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8deb476bc511844ce6ae8c5b389c7243341a84a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/64beb046eef265ad05034736c065381b01d201b2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjuQj4CRBK7hj4Ov3rIwAA/AYIABHOOBE+/j+4uBFgH/7WotEj\nl+NA31vgAZkpj+lhMH6++CPnYYz6otMSl0JJO+C3bugYMfFsdwP98CTQuGrgAKUo\nGMbsl00f/LhhzVzzcBk6mBdQ/Q76++fLDdgWYfMObeG/TWYGVMB+czf+6ix3wO67\nxsbA/3nL+cdue92BtNOwT32vudr/DzhL5lvZLFDzZ/YeQjp5yNoOdmqi0BWVZvCj\njToxVuGekht+H1T2Q6uasZHFUP+0qoATaeQWoUa9B9auB6HuTgQb/mSQiRp81AXU\nhHqDBCl85s8vaHbyXPfPhJWlbEGHUi7r/fQ9vEzE99e9Rby2s8pCyoa3myE1DE4=\n=/Zu1\n-----END PGP SIGNATURE-----\n", "payload": "tree d8deb476bc511844ce6ae8c5b389c7243341a84a\nparent eeb76eb593adab0165404ec9be441eaadf0385c2\nparent 16a3c8032e634d3da53f8d4c0a875f369a9d4394\nauthor Michael Goulet <michael@errs.io> 1673070840 -0800\ncommitter GitHub <noreply@github.com> 1673070840 -0800\n\nRollup merge of #106543 - notriddle:notriddle/source-sidebar-width-zero, r=GuillaumeGomez\n\nrustdoc: remove no-op CSS `.rustdoc.source .sidebar { width: 0 }`\n\nThis CSS was added in dc2c9723343c985740be09919236a6e96c4e4433, before 6a5f8b1aef1417d7dc85b5d0a229d2db1930eb7c when the sidebars were merged.\n\nNow that they are merged, the source sidebar is being pushed off-screen anyway, so giving it zero width doesn't do much.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/64beb046eef265ad05034736c065381b01d201b2", "html_url": "https://github.com/rust-lang/rust/commit/64beb046eef265ad05034736c065381b01d201b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/64beb046eef265ad05034736c065381b01d201b2/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eeb76eb593adab0165404ec9be441eaadf0385c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/eeb76eb593adab0165404ec9be441eaadf0385c2", "html_url": "https://github.com/rust-lang/rust/commit/eeb76eb593adab0165404ec9be441eaadf0385c2"}, {"sha": "16a3c8032e634d3da53f8d4c0a875f369a9d4394", "url": "https://api.github.com/repos/rust-lang/rust/commits/16a3c8032e634d3da53f8d4c0a875f369a9d4394", "html_url": "https://github.com/rust-lang/rust/commit/16a3c8032e634d3da53f8d4c0a875f369a9d4394"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "d77b65ac6034316c4c8eeba584f32c3bcf979d7c", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/64beb046eef265ad05034736c065381b01d201b2/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/64beb046eef265ad05034736c065381b01d201b2/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=64beb046eef265ad05034736c065381b01d201b2", "patch": "@@ -1598,14 +1598,10 @@ in storage.js\n \n \t.sidebar.shown,\n \t.source-sidebar-expanded .source .sidebar,\n-\t.sidebar:focus-within {\n+\t.rustdoc:not(.source) .sidebar:focus-within {\n \t\tleft: 0;\n \t}\n \n-\t.rustdoc.source > .sidebar {\n-\t\twidth: 0;\n-\t}\n-\n \t.mobile-topbar h2 {\n \t\tpadding-bottom: 0;\n \t\tmargin: auto 0.5em auto auto;"}, {"sha": "f3eb8ff76a38b945f0950d5f2d79bf3a339ca116", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/64beb046eef265ad05034736c065381b01d201b2/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/64beb046eef265ad05034736c065381b01d201b2/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=64beb046eef265ad05034736c065381b01d201b2", "patch": "@@ -171,15 +171,15 @@ assert-css: (\n \n // We now check that the scroll position is kept when opening the sidebar.\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n // We scroll to line 117 to change the scroll position.\n scroll-to: '//*[@id=\"117\"]'\n assert-window-property: {\"pageYOffset\": \"2542\"}\n // Expanding the sidebar...\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"500px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"0px\"})\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n // The \"scrollTop\" property should be the same.\n assert-window-property: {\"pageYOffset\": \"2542\"}\n "}, {"sha": "c8a29b58d3458df5a5d2342a2c7c5b5964a1079e", "filename": "src/test/rustdoc-gui/sidebar-source-code.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/64beb046eef265ad05034736c065381b01d201b2/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/64beb046eef265ad05034736c065381b01d201b2/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml?ref=64beb046eef265ad05034736c065381b01d201b2", "patch": "@@ -77,11 +77,11 @@ assert-count: (\"//*[@id='source-sidebar']/details[not(text()='lib2') and not(@op\n \n // We now switch to mobile mode.\n size: (600, 600)\n-wait-for-css: (\".source-sidebar-expanded nav.sidebar\", {\"width\": \"600px\"})\n+wait-for-css: (\".source-sidebar-expanded nav.sidebar\", {\"left\": \"0px\"})\n // We collapse the sidebar.\n click: (10, 10)\n-// We check that the sidebar has the expected width (0).\n-assert-css: (\"nav.sidebar\", {\"width\": \"0px\"})\n+// We check that the sidebar has been moved off-screen.\n+assert-css: (\"nav.sidebar\", {\"left\": \"-1000px\"})\n // We ensure that the class has been removed.\n assert-false: \".source-sidebar-expanded\"\n assert: \"nav.sidebar\""}]}