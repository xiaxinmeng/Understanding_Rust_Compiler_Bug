{"sha": "e3be84c6c81c63e11f62105a9befcc39b9a17081", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzYmU4NGM2YzgxYzYzZTExZjYyMTA1YTliZWZjYzM5YjlhMTcwODE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2015-09-16T16:35:33Z"}, "committer": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2015-09-17T07:02:08Z"}, "message": "libsyntax: forbid visibility modifiers for enum variants\n\nfixes #28433", "tree": {"sha": "ddfc1c2b05b58a946ceb8c9dd81d4641d43ada72", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ddfc1c2b05b58a946ceb8c9dd81d4641d43ada72"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e3be84c6c81c63e11f62105a9befcc39b9a17081", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e3be84c6c81c63e11f62105a9befcc39b9a17081", "html_url": "https://github.com/rust-lang/rust/commit/e3be84c6c81c63e11f62105a9befcc39b9a17081", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e3be84c6c81c63e11f62105a9befcc39b9a17081/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8dfb89067a57949e9b74f6ed4a409d728c1240a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/8dfb89067a57949e9b74f6ed4a409d728c1240a5", "html_url": "https://github.com/rust-lang/rust/commit/8dfb89067a57949e9b74f6ed4a409d728c1240a5"}], "stats": {"total": 22, "additions": 7, "deletions": 15}, "files": [{"sha": "4c2571409348127c36fa02e2bffea5dca552296f", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=e3be84c6c81c63e11f62105a9befcc39b9a17081", "patch": "@@ -5200,13 +5200,10 @@ impl<'a> Parser<'a> {\n             let variant_attrs = self.parse_outer_attributes();\n             let vlo = self.span.lo;\n \n-            let vis = try!(self.parse_visibility());\n-\n-            let ident;\n             let kind;\n             let mut args = Vec::new();\n             let mut disr_expr = None;\n-            ident = try!(self.parse_ident());\n+            let ident = try!(self.parse_ident());\n             if try!(self.eat(&token::OpenDelim(token::Brace)) ){\n                 // Parse a struct variant.\n                 all_nullary = false;\n@@ -5248,7 +5245,7 @@ impl<'a> Parser<'a> {\n                 kind: kind,\n                 id: ast::DUMMY_NODE_ID,\n                 disr_expr: disr_expr,\n-                vis: vis,\n+                vis: Inherited,\n             };\n             variants.push(P(spanned(vlo, self.last_span.hi, vr)));\n "}, {"sha": "ab0708c28aef69fd991d4a041c5acd6e616325a5", "filename": "src/test/compile-fail/issue-28433.rs", "status": "renamed", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Ftest%2Fcompile-fail%2Fissue-28433.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Ftest%2Fcompile-fail%2Fissue-28433.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28433.rs?ref=e3be84c6c81c63e11f62105a9befcc39b9a17081", "patch": "@@ -1,4 +1,4 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -8,16 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use zoo::bird::{duck, goose};\n-\n-mod zoo {\n-    pub enum bird {\n-        pub duck, //~ ERROR: unnecessary `pub` visibility\n-        goose\n-    }\n+enum bird {\n+    pub duck, //~ ERROR: expected identifier, found keyword `pub`\n+    goose\n }\n \n \n fn main() {\n-    let y = goose;\n+    let y = bird::goose;\n }", "previous_filename": "src/test/compile-fail/issue-3993-2.rs"}, {"sha": "fb6cdf7fa592442b53113eb782444b053ed7885b", "filename": "src/test/compile-fail/useless-pub.rs", "status": "renamed", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Ftest%2Fcompile-fail%2Fuseless-pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3be84c6c81c63e11f62105a9befcc39b9a17081/src%2Ftest%2Fcompile-fail%2Fuseless-pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fuseless-pub.rs?ref=e3be84c6c81c63e11f62105a9befcc39b9a17081", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n struct A { pub i: isize }\n-pub enum C { pub Variant }      //~ ERROR: unnecessary `pub`\n \n pub trait E {\n     fn foo(&self);", "previous_filename": "src/test/compile-fail/useless-priv.rs"}]}