{"sha": "67f548d8e9f9034d94e82430867a9f65438bbeda", "node_id": "C_kwDOAAsO6NoAKDY3ZjU0OGQ4ZTlmOTAzNGQ5NGU4MjQzMDg2N2E5ZjY1NDM4YmJlZGE", "commit": {"author": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-01-08T14:01:26Z"}, "committer": {"name": "Jonas Schievink", "email": "jonas.schievink@ferrous-systems.com", "date": "2022-01-08T14:27:48Z"}, "message": "Allow doc comments on all `Item`s", "tree": {"sha": "d41601bb13d6ed2684b1e86a1959cc270659a978", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d41601bb13d6ed2684b1e86a1959cc270659a978"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67f548d8e9f9034d94e82430867a9f65438bbeda", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67f548d8e9f9034d94e82430867a9f65438bbeda", "html_url": "https://github.com/rust-lang/rust/commit/67f548d8e9f9034d94e82430867a9f65438bbeda", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67f548d8e9f9034d94e82430867a9f65438bbeda/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca8bd3ec42c9ab98b53c3402041e1e78bcc948a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca8bd3ec42c9ab98b53c3402041e1e78bcc948a4", "html_url": "https://github.com/rust-lang/rust/commit/ca8bd3ec42c9ab98b53c3402041e1e78bcc948a4"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "09c5af210f58d78fdb79a1f762cea3ecd2ba0cfe", "filename": "crates/syntax/src/ast/generated/nodes.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/67f548d8e9f9034d94e82430867a9f65438bbeda/crates%2Fsyntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67f548d8e9f9034d94e82430867a9f65438bbeda/crates%2Fsyntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs?ref=67f548d8e9f9034d94e82430867a9f65438bbeda", "patch": "@@ -162,6 +162,7 @@ pub struct MacroCall {\n     pub(crate) syntax: SyntaxNode,\n }\n impl ast::HasAttrs for MacroCall {}\n+impl ast::HasDocComments for MacroCall {}\n impl MacroCall {\n     pub fn path(&self) -> Option<Path> { support::child(&self.syntax) }\n     pub fn excl_token(&self) -> Option<SyntaxToken> { support::token(&self.syntax, T![!]) }\n@@ -259,6 +260,7 @@ pub struct ExternBlock {\n     pub(crate) syntax: SyntaxNode,\n }\n impl ast::HasAttrs for ExternBlock {}\n+impl ast::HasDocComments for ExternBlock {}\n impl ExternBlock {\n     pub fn abi(&self) -> Option<Abi> { support::child(&self.syntax) }\n     pub fn extern_item_list(&self) -> Option<ExternItemList> { support::child(&self.syntax) }\n@@ -270,6 +272,7 @@ pub struct ExternCrate {\n }\n impl ast::HasAttrs for ExternCrate {}\n impl ast::HasVisibility for ExternCrate {}\n+impl ast::HasDocComments for ExternCrate {}\n impl ExternCrate {\n     pub fn extern_token(&self) -> Option<SyntaxToken> { support::token(&self.syntax, T![extern]) }\n     pub fn crate_token(&self) -> Option<SyntaxToken> { support::token(&self.syntax, T![crate]) }\n@@ -1543,6 +1546,7 @@ pub enum Item {\n     Use(Use),\n }\n impl ast::HasAttrs for Item {}\n+impl ast::HasDocComments for Item {}\n \n #[derive(Debug, Clone, PartialEq, Eq, Hash)]\n pub enum Stmt {\n@@ -1597,6 +1601,7 @@ pub enum AssocItem {\n     TypeAlias(TypeAlias),\n }\n impl ast::HasAttrs for AssocItem {}\n+impl ast::HasDocComments for AssocItem {}\n \n #[derive(Debug, Clone, PartialEq, Eq, Hash)]\n pub enum ExternItem {\n@@ -1606,6 +1611,7 @@ pub enum ExternItem {\n     TypeAlias(TypeAlias),\n }\n impl ast::HasAttrs for ExternItem {}\n+impl ast::HasDocComments for ExternItem {}\n \n #[derive(Debug, Clone, PartialEq, Eq, Hash)]\n pub enum GenericParam {\n@@ -3902,10 +3908,9 @@ impl AnyHasDocComments {\n impl AstNode for AnyHasDocComments {\n     fn can_cast(kind: SyntaxKind) -> bool {\n         match kind {\n-            SOURCE_FILE | CONST | ENUM | FN | IMPL | MACRO_RULES | MACRO_DEF | MODULE | STATIC\n-            | STRUCT | TRAIT | TYPE_ALIAS | UNION | USE | RECORD_FIELD | TUPLE_FIELD | VARIANT => {\n-                true\n-            }\n+            MACRO_CALL | SOURCE_FILE | CONST | ENUM | EXTERN_BLOCK | EXTERN_CRATE | FN | IMPL\n+            | MACRO_RULES | MACRO_DEF | MODULE | STATIC | STRUCT | TRAIT | TYPE_ALIAS | UNION\n+            | USE | RECORD_FIELD | TUPLE_FIELD | VARIANT => true,\n             _ => false,\n         }\n     }"}, {"sha": "4a608da9ff4b11adce924393ee03c3a93a54294a", "filename": "crates/syntax/src/tests/sourcegen_ast.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/67f548d8e9f9034d94e82430867a9f65438bbeda/crates%2Fsyntax%2Fsrc%2Ftests%2Fsourcegen_ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67f548d8e9f9034d94e82430867a9f65438bbeda/crates%2Fsyntax%2Fsrc%2Ftests%2Fsourcegen_ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Ftests%2Fsourcegen_ast.rs?ref=67f548d8e9f9034d94e82430867a9f65438bbeda", "patch": "@@ -793,9 +793,11 @@ fn extract_struct_traits(ast: &mut AstSrc) {\n         \"Const\",\n         \"TypeAlias\",\n         \"Impl\",\n+        \"ExternBlock\",\n+        \"ExternCrate\",\n+        \"MacroCall\",\n         \"MacroRules\",\n         \"MacroDef\",\n-        \"Macro\",\n         \"Use\",\n     ];\n "}]}