{"sha": "973d676cd105b3ec87e4edb99fc0fb63b374e213", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk3M2Q2NzZjZDEwNWIzZWM4N2U0ZWRiOTlmYzBmYjYzYjM3NGUyMTM=", "commit": {"author": {"name": "daxpedda", "email": "daxpedda@users.noreply.github.com", "date": "2018-12-06T11:22:54Z"}, "committer": {"name": "daxpedda", "email": "daxpedda@users.noreply.github.com", "date": "2018-12-06T11:22:54Z"}, "message": "Fix bug in `implicit_return`.\nBug was already covered by test, but test was not checked for.", "tree": {"sha": "195e7fbcb895d1b0c4886049458ae309ad8b81cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/195e7fbcb895d1b0c4886049458ae309ad8b81cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/973d676cd105b3ec87e4edb99fc0fb63b374e213", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJWBAABCABAFiEEtfVYniVMfR+YKQUSxyLctqGR7qsFAlwJBo4iHGRheHBlZGRh\nQHVzZXJzLm5vcmVwbHkuZ2l0aHViLmNvbQAKCRDHIty2oZHuq+vzEACCYnudHZBo\nFQ96Q/ngzWDlEv1KvrrpAlreH6lgbBa5BCKLmX7JjPJXvgD6bvLlXzfUcSH/iuOB\nZZJ8hEdg1H34D7NpL5drO2kakZKTFtIy3bkc0pBUHFe+2SKBOhuBFFmMpTlLJ6gP\njrAXl1wCg9rd4+5eTeh2sOWzkGOrWiUd7/Gmpz5a2oqFfrX5nzkLO/4YqeDNXCxK\noy2f7wR6BbngZSvFztnFsyIXzHXygykOlhf5N1MKLSNni8Cz8rWHUNsxXGTWcXmn\nRiUlzkHl/6Shidw/HEXZrD9GkZiBq4gkBTQyNfawxltHYU3E7lyc6rDwCfyqhFpB\n6Xrdzj9IwzuFwZFYxFU+6qR+nnocqcOtRqr6emwfHpsHx5xVY8iEJeXG13Cz1l4j\n9MW67LQL+rx9Aopr1NLY36YbbOpIZtD2r/JoxZ7HNc6vhvlINMtzvHHYoOIQjSBG\n6ntqmXQQA/Hp3RxS35EBVnS5/juL1aUuq+io6KpSCeE3rb6t10sFpu1f8tjaLpMl\ncl26Uc4aCQRkR4w+H1V7F3Dfat45m2qWxy5iJvz1/0pwGaFu90bHUtJZI0VhG7LA\noAO/YvpqhZORjJTSzOOwfx81igPbq9ltHx3zB47j/OefLbuQv/SoP+Wa7p30FQBb\noCQntQUDILntATKnUjxuYWtltp2Efx6t4g==\n=qYHq\n-----END PGP SIGNATURE-----", "payload": "tree 195e7fbcb895d1b0c4886049458ae309ad8b81cc\nparent f93591294d60f705fb70578cfc32346efe1e03d8\nauthor daxpedda <daxpedda@users.noreply.github.com> 1544095374 +0100\ncommitter daxpedda <daxpedda@users.noreply.github.com> 1544095374 +0100\n\nFix bug in `implicit_return`.\nBug was already covered by test, but test was not checked for.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/973d676cd105b3ec87e4edb99fc0fb63b374e213", "html_url": "https://github.com/rust-lang/rust/commit/973d676cd105b3ec87e4edb99fc0fb63b374e213", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/973d676cd105b3ec87e4edb99fc0fb63b374e213/comments", "author": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "daxpedda", "id": 1645124, "node_id": "MDQ6VXNlcjE2NDUxMjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1645124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daxpedda", "html_url": "https://github.com/daxpedda", "followers_url": "https://api.github.com/users/daxpedda/followers", "following_url": "https://api.github.com/users/daxpedda/following{/other_user}", "gists_url": "https://api.github.com/users/daxpedda/gists{/gist_id}", "starred_url": "https://api.github.com/users/daxpedda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daxpedda/subscriptions", "organizations_url": "https://api.github.com/users/daxpedda/orgs", "repos_url": "https://api.github.com/users/daxpedda/repos", "events_url": "https://api.github.com/users/daxpedda/events{/privacy}", "received_events_url": "https://api.github.com/users/daxpedda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f93591294d60f705fb70578cfc32346efe1e03d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/f93591294d60f705fb70578cfc32346efe1e03d8", "html_url": "https://github.com/rust-lang/rust/commit/f93591294d60f705fb70578cfc32346efe1e03d8"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "d29b508ba37a7ab95cb64efaa4bb36a81a12b11f", "filename": "clippy_lints/src/implicit_return.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/973d676cd105b3ec87e4edb99fc0fb63b374e213/clippy_lints%2Fsrc%2Fimplicit_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/973d676cd105b3ec87e4edb99fc0fb63b374e213/clippy_lints%2Fsrc%2Fimplicit_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fimplicit_return.rs?ref=973d676cd105b3ec87e4edb99fc0fb63b374e213", "patch": "@@ -90,6 +90,12 @@ impl Pass {\n                 if let Some(expr) = &block.expr {\n                     Self::expr_match(cx, expr);\n                 }\n+                // only needed in the case of `break` with `;` at the end\n+                else if let Some(stmt) = block.stmts.last() {\n+                    if let rustc::hir::StmtKind::Semi(expr, ..) = &stmt.node {\n+                        Self::expr_match(cx, expr);\n+                    }\n+                }\n             },\n             // skip if it already has a return statement\n             ExprKind::Ret(..) => (),"}, {"sha": "6f4fe12757a3f9eb4c0028840b417180d0aa71b4", "filename": "tests/ui/implicit_return.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/973d676cd105b3ec87e4edb99fc0fb63b374e213/tests%2Fui%2Fimplicit_return.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/973d676cd105b3ec87e4edb99fc0fb63b374e213/tests%2Fui%2Fimplicit_return.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplicit_return.stderr?ref=973d676cd105b3ec87e4edb99fc0fb63b374e213", "patch": "@@ -30,6 +30,12 @@ error: missing return statement\n 38 |             true\n    |             ^^^^ help: add `return` as shown: `return true`\n \n+error: missing return statement\n+  --> $DIR/implicit_return.rs:46:9\n+   |\n+46 |         break true;\n+   |         ^^^^^^^^^^ help: change `break` to `return` as shown: `return true`\n+\n error: missing return statement\n   --> $DIR/implicit_return.rs:52:9\n    |\n@@ -42,5 +48,5 @@ error: missing return statement\n 54 |     let _ = || true;\n    |                ^^^^ help: add `return` as shown: `return true`\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 8 previous errors\n "}]}