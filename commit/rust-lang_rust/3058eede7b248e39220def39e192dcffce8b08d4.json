{"sha": "3058eede7b248e39220def39e192dcffce8b08d4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwNThlZWRlN2IyNDhlMzkyMjBkZWYzOWUxOTJkY2ZmY2U4YjA4ZDQ=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-04-04T05:24:58Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-04-04T05:24:58Z"}, "message": "Rollup merge of #23990 - dhuseby:bitrig_fixing_jemalloc_config, r=alexcrichton\n\n Until I can figure out the correct way to configure jemalloc for Bitrig, this patch will correctly disable it.  All other build targets remain unchanged.", "tree": {"sha": "515b0a435ff9f2bc5bf86c075c2ac65c78134a2f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/515b0a435ff9f2bc5bf86c075c2ac65c78134a2f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3058eede7b248e39220def39e192dcffce8b08d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3058eede7b248e39220def39e192dcffce8b08d4", "html_url": "https://github.com/rust-lang/rust/commit/3058eede7b248e39220def39e192dcffce8b08d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3058eede7b248e39220def39e192dcffce8b08d4/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "17e83e31be13e6fb96e7164ea28f796caae51cdc", "url": "https://api.github.com/repos/rust-lang/rust/commits/17e83e31be13e6fb96e7164ea28f796caae51cdc", "html_url": "https://github.com/rust-lang/rust/commit/17e83e31be13e6fb96e7164ea28f796caae51cdc"}, {"sha": "787c6cda00f45de8634052b743b384f1fdaee7e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/787c6cda00f45de8634052b743b384f1fdaee7e0", "html_url": "https://github.com/rust-lang/rust/commit/787c6cda00f45de8634052b743b384f1fdaee7e0"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "ef474fcf79dabaadf92c1a4c3af284973aa4f778", "filename": "configure", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3058eede7b248e39220def39e192dcffce8b08d4/configure", "raw_url": "https://github.com/rust-lang/rust/raw/3058eede7b248e39220def39e192dcffce8b08d4/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=3058eede7b248e39220def39e192dcffce8b08d4", "patch": "@@ -545,7 +545,6 @@ opt verify-install 1 \"verify installed binaries work\"\n # This is used by the automation to produce single-target nightlies\n opt dist-host-only 0 \"only install bins for the host architecture\"\n opt inject-std-version 1 \"inject the current compiler version of libstd into programs\"\n-opt jemalloc 1 \"build liballoc with jemalloc\"\n opt llvm-version-check 1 \"don't check if the LLVM version is supported, build anyway\"\n \n valopt localstatedir \"/var/lib\" \"local state directory\"\n@@ -562,6 +561,7 @@ valopt android-cross-path \"/opt/ndk_standalone\" \"Android NDK standalone path\"\n # (others are conditionally saved).\n opt_nosave manage-submodules 1 \"let the build manage the git submodules\"\n opt_nosave clang 0 \"prefer clang to gcc for building the runtime\"\n+opt_nosave jemalloc 1 \"build liballoc with jemalloc\"\n \n valopt_nosave prefix \"/usr/local\" \"set installation prefix\"\n valopt_nosave local-rust-root \"/usr/local\" \"set prefix for local rust binary\"\n@@ -782,7 +782,7 @@ if [ $CFG_OSTYPE = unknown-bitrig ]\n then\n     step_msg \"on Bitrig, forcing use of clang, disabling jemalloc\"\n     CFG_ENABLE_CLANG=1\n-    CFG_ENABLE_JEMALLOC=0\n+    CFG_DISABLE_JEMALLOC=1\n fi\n \n if [ -z \"$CFG_ENABLE_CLANG\" -a -z \"$CFG_GCC\" ]\n@@ -835,6 +835,12 @@ then\n     putvar CFG_ENABLE_CLANG\n fi\n \n+# Same with jemalloc.  save the setting here.\n+if [ ! -z \"$CFG_DISABLE_JEMALLOC\" ]\n+then\n+    putvar CFG_DISABLE_JEMALLOC\n+fi\n+\n if [ ! -z \"$CFG_LLVM_ROOT\" -a -z \"$CFG_DISABLE_LLVM_VERSION_CHECK\" -a -e \"$CFG_LLVM_ROOT/bin/llvm-config\" ]\n then\n     step_msg \"using custom LLVM at $CFG_LLVM_ROOT\""}]}