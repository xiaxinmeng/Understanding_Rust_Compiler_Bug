{"sha": "82d530577b3366cc62e175771e85139590275a55", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyZDUzMDU3N2IzMzY2Y2M2MmUxNzU3NzFlODUxMzk1OTAyNzVhNTU=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:33:42Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-08-16T15:33:42Z"}, "message": "Add tests for non_fmt_panics in generic functions.", "tree": {"sha": "2641ee78e39ae95c25f5db782a89751af7958407", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2641ee78e39ae95c25f5db782a89751af7958407"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/82d530577b3366cc62e175771e85139590275a55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/82d530577b3366cc62e175771e85139590275a55", "html_url": "https://github.com/rust-lang/rust/commit/82d530577b3366cc62e175771e85139590275a55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/82d530577b3366cc62e175771e85139590275a55/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00ca4d0dd3f9e8432420c234e44e21a3502db382", "url": "https://api.github.com/repos/rust-lang/rust/commits/00ca4d0dd3f9e8432420c234e44e21a3502db382", "html_url": "https://github.com/rust-lang/rust/commit/00ca4d0dd3f9e8432420c234e44e21a3502db382"}], "stats": {"total": 106, "additions": 105, "deletions": 1}, "files": [{"sha": "0f55f1ae817b1bddcb92ce58027529be1735a3ee", "filename": "src/test/ui/non-fmt-panic.fixed", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.fixed?ref=82d530577b3366cc62e175771e85139590275a55", "patch": "@@ -56,4 +56,25 @@ fn main() {\n     }\n     panic!(\"{}\"); // OK\n     panic!(S); // OK\n+\n+    a(1);\n+    b(1);\n+    c(1);\n+    d(1);\n+}\n+\n+fn a<T: Send + 'static>(v: T) {\n+    std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn b<T: std::fmt::Debug + Send + 'static>(v: T) {\n+    std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn c<T: std::fmt::Display + Send + 'static>(v: T) {\n+    std::panic::panic_any(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn d<T: std::fmt::Display + std::fmt::Debug + Send + 'static>(v: T) {\n+    std::panic::panic_any(v); //~ WARN panic message is not a string literal\n }"}, {"sha": "6e9bdb21f0c36697a4cee1a309a212d58dba018c", "filename": "src/test/ui/non-fmt-panic.rs", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.rs?ref=82d530577b3366cc62e175771e85139590275a55", "patch": "@@ -56,4 +56,25 @@ fn main() {\n     }\n     panic!(\"{}\"); // OK\n     panic!(S); // OK\n+\n+    a(1);\n+    b(1);\n+    c(1);\n+    d(1);\n+}\n+\n+fn a<T: Send + 'static>(v: T) {\n+    panic!(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn b<T: std::fmt::Debug + Send + 'static>(v: T) {\n+    panic!(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn c<T: std::fmt::Display + Send + 'static>(v: T) {\n+    panic!(v); //~ WARN panic message is not a string literal\n+}\n+\n+fn d<T: std::fmt::Display + std::fmt::Debug + Send + 'static>(v: T) {\n+    panic!(v); //~ WARN panic message is not a string literal\n }"}, {"sha": "1d3346d7756e679ad5394155a67fdbcf184b7654", "filename": "src/test/ui/non-fmt-panic.stderr", "status": "modified", "additions": 63, "deletions": 1, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/82d530577b3366cc62e175771e85139590275a55/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnon-fmt-panic.stderr?ref=82d530577b3366cc62e175771e85139590275a55", "patch": "@@ -311,5 +311,67 @@ help: or use std::panic::panic_any instead\n LL |     std::panic::panic_any(123);\n    |     ~~~~~~~~~~~~~~~~~~~~~~   ~\n \n-warning: 22 warnings emitted\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:67:12\n+   |\n+LL |     panic!(v);\n+   |     ------ ^\n+   |     |\n+   |     help: use std::panic::panic_any instead: `std::panic::panic_any`\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:71:12\n+   |\n+LL |     panic!(v);\n+   |            ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{:?}\" format string to use the Debug implementation of `T`\n+   |\n+LL |     panic!(\"{:?}\", v);\n+   |            +++++++\n+help: or use std::panic::panic_any instead\n+   |\n+LL |     std::panic::panic_any(v);\n+   |     ~~~~~~~~~~~~~~~~~~~~~\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:75:12\n+   |\n+LL |     panic!(v);\n+   |            ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{}\" format string to Display the message\n+   |\n+LL |     panic!(\"{}\", v);\n+   |            +++++\n+help: or use std::panic::panic_any instead\n+   |\n+LL |     std::panic::panic_any(v);\n+   |     ~~~~~~~~~~~~~~~~~~~~~\n+\n+warning: panic message is not a string literal\n+  --> $DIR/non-fmt-panic.rs:79:12\n+   |\n+LL |     panic!(v);\n+   |            ^\n+   |\n+   = note: this usage of panic!() is deprecated; it will be a hard error in Rust 2021\n+   = note: for more information, see <https://doc.rust-lang.org/nightly/edition-guide/rust-2021/panic-macro-consistency.html>\n+help: add a \"{}\" format string to Display the message\n+   |\n+LL |     panic!(\"{}\", v);\n+   |            +++++\n+help: or use std::panic::panic_any instead\n+   |\n+LL |     std::panic::panic_any(v);\n+   |     ~~~~~~~~~~~~~~~~~~~~~\n+\n+warning: 26 warnings emitted\n "}]}