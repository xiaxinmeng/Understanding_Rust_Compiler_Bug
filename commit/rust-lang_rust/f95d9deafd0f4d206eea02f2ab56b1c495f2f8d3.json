{"sha": "f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "node_id": "C_kwDOAAsO6NoAKGY5NWQ5ZGVhZmQwZjRkMjA2ZWVhMDJmMmFiNTZiMWM0OTVmMmY4ZDM", "commit": {"author": {"name": "Samuel Moelius", "email": "sam@moeli.us", "date": "2023-02-25T20:54:31Z"}, "committer": {"name": "Samuel Moelius", "email": "sam@moeli.us", "date": "2023-03-05T00:03:40Z"}, "message": "Handle ambiguous projections", "tree": {"sha": "14fdc42da869bfa3da4752e81cf39a63fe07a5f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14fdc42da869bfa3da4752e81cf39a63fe07a5f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "html_url": "https://github.com/rust-lang/rust/commit/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3/comments", "author": {"login": "smoelius", "id": 35515885, "node_id": "MDQ6VXNlcjM1NTE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/35515885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoelius", "html_url": "https://github.com/smoelius", "followers_url": "https://api.github.com/users/smoelius/followers", "following_url": "https://api.github.com/users/smoelius/following{/other_user}", "gists_url": "https://api.github.com/users/smoelius/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoelius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoelius/subscriptions", "organizations_url": "https://api.github.com/users/smoelius/orgs", "repos_url": "https://api.github.com/users/smoelius/repos", "events_url": "https://api.github.com/users/smoelius/events{/privacy}", "received_events_url": "https://api.github.com/users/smoelius/received_events", "type": "User", "site_admin": false}, "committer": {"login": "smoelius", "id": 35515885, "node_id": "MDQ6VXNlcjM1NTE1ODg1", "avatar_url": "https://avatars.githubusercontent.com/u/35515885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smoelius", "html_url": "https://github.com/smoelius", "followers_url": "https://api.github.com/users/smoelius/followers", "following_url": "https://api.github.com/users/smoelius/following{/other_user}", "gists_url": "https://api.github.com/users/smoelius/gists{/gist_id}", "starred_url": "https://api.github.com/users/smoelius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smoelius/subscriptions", "organizations_url": "https://api.github.com/users/smoelius/orgs", "repos_url": "https://api.github.com/users/smoelius/repos", "events_url": "https://api.github.com/users/smoelius/events{/privacy}", "received_events_url": "https://api.github.com/users/smoelius/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b528cc90bc35a111125bfd2382bfcdcd345cea69", "url": "https://api.github.com/repos/rust-lang/rust/commits/b528cc90bc35a111125bfd2382bfcdcd345cea69", "html_url": "https://github.com/rust-lang/rust/commit/b528cc90bc35a111125bfd2382bfcdcd345cea69"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "4e305d4f668877576b97649f4e08d670372d9e94", "filename": "clippy_lints/src/dereference.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3/clippy_lints%2Fsrc%2Fdereference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3/clippy_lints%2Fsrc%2Fdereference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdereference.rs?ref=f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "patch": "@@ -1357,10 +1357,10 @@ fn replace_types<'tcx>(\n                     && let Some(term_ty) = projection_predicate.term.ty()\n                     && let ty::Param(term_param_ty) = term_ty.kind()\n                 {\n-                    let item_def_id = projection_predicate.projection_ty.def_id;\n-                    let assoc_item = cx.tcx.associated_item(item_def_id);\n-                    let projection = cx.tcx\n-                        .mk_projection(assoc_item.def_id, cx.tcx.mk_substs_trait(new_ty, []));\n+                    let projection = cx.tcx.mk_ty(ty::Alias(\n+                        ty::Projection,\n+                        projection_predicate.projection_ty.with_self_ty(cx.tcx, new_ty),\n+                    ));\n \n                     if let Ok(projected_ty) = cx.tcx.try_normalize_erasing_regions(cx.param_env, projection)\n                         && substs[term_param_ty.index as usize] != ty::GenericArg::from(projected_ty)"}, {"sha": "7f5bae60d55d9b4837577bac7c1d630236f0bedb", "filename": "tests/ui/crashes/ice-rust-107877.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3/tests%2Fui%2Fcrashes%2Fice-rust-107877.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3/tests%2Fui%2Fcrashes%2Fice-rust-107877.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcrashes%2Fice-rust-107877.rs?ref=f95d9deafd0f4d206eea02f2ab56b1c495f2f8d3", "patch": "@@ -0,0 +1,17 @@\n+#![allow(dead_code)]\n+\n+struct Foo;\n+\n+impl<'a> std::convert::TryFrom<&'a String> for Foo {\n+    type Error = std::convert::Infallible;\n+\n+    fn try_from(_: &'a String) -> Result<Self, Self::Error> {\n+        Ok(Foo)\n+    }\n+}\n+\n+fn find<E>(_: impl std::convert::TryInto<Foo, Error = E>) {}\n+\n+fn main() {\n+    find(&String::new());\n+}"}]}