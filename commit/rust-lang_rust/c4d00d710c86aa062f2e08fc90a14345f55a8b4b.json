{"sha": "c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "node_id": "C_kwDOAAsO6NoAKGM0ZDAwZDcxMGM4NmFhMDYyZjJlMDhmYzkwYTE0MzQ1ZjU1YThiNGI", "commit": {"author": {"name": "yukang", "email": "moorekang@gmail.com", "date": "2023-01-26T02:52:57Z"}, "committer": {"name": "yukang", "email": "moorekang@gmail.com", "date": "2023-01-26T02:52:57Z"}, "message": "add testcase for #104012", "tree": {"sha": "357cdbf327788655567e7425c75fe653f25954c6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/357cdbf327788655567e7425c75fe653f25954c6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "html_url": "https://github.com/rust-lang/rust/commit/c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/comments", "author": {"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f72129ffe5e8c495113f9a2d4e1730f7fad3209", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f72129ffe5e8c495113f9a2d4e1730f7fad3209", "html_url": "https://github.com/rust-lang/rust/commit/1f72129ffe5e8c495113f9a2d4e1730f7fad3209"}], "stats": {"total": 216, "additions": 216, "deletions": 0}, "files": [{"sha": "a8cbf8640f7a346db64b40564e49e689bb401488", "filename": "tests/ui/parser/deli-ident-issue-1.rs", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,25 @@\n+// error-pattern: this file contains an unclosed delimiter\n+#![feature(let_chains)]\n+trait Demo {}\n+\n+impl dyn Demo {\n+    pub fn report(&self) -> u32 {\n+        let sum = |a: u32,\n+                   b: u32,\n+                   c: u32| {\n+            a + b + c\n+        };\n+        sum(1, 2, 3)\n+    }\n+\n+    fn check(&self, val: Option<u32>, num: Option<u32>) {\n+        if let Some(b) = val\n+        && let Some(c) = num {\n+        && b == c {\n+            //~^ ERROR expected struct\n+            //~| ERROR mismatched types\n+        }\n+    }\n+}\n+\n+fn main() { } //~ ERROR this file contains an unclosed delimiter"}, {"sha": "784f598f9d05cb0a746ebecf9ed68efca1ac13de", "filename": "tests/ui/parser/deli-ident-issue-1.stderr", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdeli-ident-issue-1.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,37 @@\n+error: this file contains an unclosed delimiter\n+  --> $DIR/deli-ident-issue-1.rs:25:66\n+   |\n+LL | impl dyn Demo {\n+   |               - unclosed delimiter\n+...\n+LL |                    c: u32| {\n+   |                            - this delimiter might not be properly closed...\n+LL |             a + b + c\n+LL |         };\n+   |         - ...as it matches this but it has different indentation\n+...\n+LL | fn main() { }\n+   |                                                                  ^\n+\n+error[E0574]: expected struct, variant or union type, found local variable `c`\n+  --> $DIR/deli-ident-issue-1.rs:18:17\n+   |\n+LL |         && b == c {\n+   |                 ^ not a struct, variant or union type\n+\n+error[E0308]: mismatched types\n+  --> $DIR/deli-ident-issue-1.rs:18:9\n+   |\n+LL |       fn check(&self, val: Option<u32>, num: Option<u32>) {\n+   |                                                           - expected `()` because of default return type\n+...\n+LL | /         && b == c {\n+LL | |\n+LL | |\n+LL | |         }\n+   | |_________^ expected `()`, found `bool`\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors have detailed explanations: E0308, E0574.\n+For more information about an error, try `rustc --explain E0308`."}, {"sha": "5394760df702642db0ce23baa89db0badbaa3560", "filename": "tests/ui/parser/deli-ident-issue-2.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,7 @@\n+fn main() {\n+    if 1 < 2 {\n+        let _a = vec!]; //~ ERROR mismatched closing delimiter\n+    }\n+} //~ ERROR unexpected closing delimiter\n+\n+fn main() {}"}, {"sha": "782dac8f32d35d5651a423a9cab4fdfdeb89ce5a", "filename": "tests/ui/parser/deli-ident-issue-2.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdeli-ident-issue-2.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,21 @@\n+error: unexpected closing delimiter: `}`\n+  --> $DIR/deli-ident-issue-2.rs:5:1\n+   |\n+LL | fn main() {\n+   |           - this opening brace...\n+...\n+LL |     }\n+   |     - ...matches this closing brace\n+LL | }\n+   | ^ unexpected closing delimiter\n+\n+error: mismatched closing delimiter: `]`\n+  --> $DIR/deli-ident-issue-2.rs:2:14\n+   |\n+LL |     if 1 < 2 {\n+   |              ^ unclosed delimiter\n+LL |         let _a = vec!];\n+   |                      ^ mismatched closing delimiter\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "30e7ef467368a0b5b6398a613535b100959845e5", "filename": "tests/ui/parser/issue-68987-unmatch-issue-1.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,12 @@\n+// This file has unexpected closing delimiter,\n+\n+fn func(o: Option<u32>) {\n+    match o {\n+        Some(_x) => {}   // Extra '}'\n+            let _ = if true {};\n+        }\n+        None => {}\n+    }\n+} //~ ERROR unexpected closing delimiter\n+\n+fn main() {}"}, {"sha": "b5c1887f76f08f2d248818f48207fe459ee5adff", "filename": "tests/ui/parser/issue-68987-unmatch-issue-1.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-1.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,11 @@\n+error: unexpected closing delimiter: `}`\n+  --> $DIR/issue-68987-unmatch-issue-1.rs:10:1\n+   |\n+LL |         None => {}\n+   |                 -- block is empty, you might have not meant to close it\n+LL |     }\n+LL | }\n+   | ^ unexpected closing delimiter\n+\n+error: aborting due to previous error\n+"}, {"sha": "89aaa68ba40955e55b0ad4be22b36919a030d0bc", "filename": "tests/ui/parser/issue-68987-unmatch-issue-2.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,14 @@\n+// FIXME: this case need more work to fix\n+// currently the TokenTree matching ')' with '{', which is not user friendly for diagnostics\n+async fn obstest() -> Result<> {\n+    let obs_connect = || -> Result<(), MyError) { //~ ERROR mismatched closing delimiter\n+        async {\n+        }\n+    }\n+\n+    if let Ok(version, scene_list) = obs_connect() {\n+\n+    } else {\n+\n+    }\n+} //~ ERROR unexpected closing delimiter"}, {"sha": "253f12d44b83fca4434c78b6c5ec9029c38d1c06", "filename": "tests/ui/parser/issue-68987-unmatch-issue-2.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-2.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,21 @@\n+error: unexpected closing delimiter: `}`\n+  --> $DIR/issue-68987-unmatch-issue-2.rs:14:1\n+   |\n+LL |     } else {\n+   |            - this opening brace...\n+LL |\n+LL |     }\n+   |     - ...matches this closing brace\n+LL | }\n+   | ^ unexpected closing delimiter\n+\n+error: mismatched closing delimiter: `)`\n+  --> $DIR/issue-68987-unmatch-issue-2.rs:3:32\n+   |\n+LL | async fn obstest() -> Result<> {\n+   |                                ^ unclosed delimiter\n+LL |     let obs_connect = || -> Result<(), MyError) {\n+   |                                               ^ mismatched closing delimiter\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "e98df8d7c3c4ee534f2865559c4cf72ea1b23eea", "filename": "tests/ui/parser/issue-68987-unmatch-issue-3.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,8 @@\n+// the `{` is closed with `)`, there is a missing `(`\n+fn f(i: u32, j: u32) {\n+    let res = String::new();\n+    let mut cnt = i;\n+    while cnt < j {\n+        write!&mut res, \" \"); //~ ERROR mismatched closing delimiter\n+    }\n+} //~ ERROR unexpected closing delimiter"}, {"sha": "258a692c8557b312a682f3a0c4342933a59a0934", "filename": "tests/ui/parser/issue-68987-unmatch-issue-3.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue-3.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,21 @@\n+error: unexpected closing delimiter: `}`\n+  --> $DIR/issue-68987-unmatch-issue-3.rs:8:1\n+   |\n+LL | fn f(i: u32, j: u32) {\n+   |                      - this opening brace...\n+...\n+LL |     }\n+   |     - ...matches this closing brace\n+LL | }\n+   | ^ unexpected closing delimiter\n+\n+error: mismatched closing delimiter: `)`\n+  --> $DIR/issue-68987-unmatch-issue-3.rs:5:19\n+   |\n+LL |     while cnt < j {\n+   |                   ^ unclosed delimiter\n+LL |         write!&mut res, \" \");\n+   |                            ^ mismatched closing delimiter\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "5a3620bf24bd4bbf23eb734793a45ed26e1c8014", "filename": "tests/ui/parser/issue-68987-unmatch-issue.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,12 @@\n+// This file has unexpected closing delimiter,\n+\n+fn func(o: Option<u32>) {\n+    match o {\n+        Some(_x) =>   // Missing '{'\n+            let _ = if true {};\n+        }\n+        None => {}\n+    }\n+} //~ ERROR unexpected closing delimiter\n+\n+fn main() {}"}, {"sha": "00e9c9a5ccee0dfb74c825399c812dd5d24f00fa", "filename": "tests/ui/parser/issue-68987-unmatch-issue.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissue-68987-unmatch-issue.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,11 @@\n+error: unexpected closing delimiter: `}`\n+  --> $DIR/issue-68987-unmatch-issue.rs:10:1\n+   |\n+LL |         None => {}\n+   |                 -- block is empty, you might have not meant to close it\n+LL |     }\n+LL | }\n+   | ^ unexpected closing delimiter\n+\n+error: aborting due to previous error\n+"}, {"sha": "01fc2c08546479907e03a08b9a8d3751ce7ec444", "filename": "tests/ui/parser/issues/issue-69259.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.rs?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,3 @@\n+fn main() {}\n+\n+fn f) {} //~ ERROR unexpected closing delimiter"}, {"sha": "f4cb391cb1ff2156d38ba24fc4329fe3be427fe6", "filename": "tests/ui/parser/issues/issue-69259.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c4d00d710c86aa062f2e08fc90a14345f55a8b4b/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-69259.stderr?ref=c4d00d710c86aa062f2e08fc90a14345f55a8b4b", "patch": "@@ -0,0 +1,13 @@\n+error: unexpected closing delimiter: `)`\n+  --> $DIR/issue-69259.rs:3:5\n+   |\n+LL | fn main() {}\n+   |           -- ...matches this closing brace\n+   |           |\n+   |           this opening brace...\n+LL |\n+LL | fn f) {}\n+   |     ^ unexpected closing delimiter\n+\n+error: aborting due to previous error\n+"}]}