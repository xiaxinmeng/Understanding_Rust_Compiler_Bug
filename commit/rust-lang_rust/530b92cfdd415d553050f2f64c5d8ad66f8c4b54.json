{"sha": "530b92cfdd415d553050f2f64c5d8ad66f8c4b54", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzMGI5MmNmZGQ0MTVkNTUzMDUwZjJmNjRjNWQ4YWQ2NmY4YzRiNTQ=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-02-18T10:47:01Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-02-28T13:43:47Z"}, "message": "remove the borrowck stats", "tree": {"sha": "ec1fab6ba9f106fe169ad875b418c6fd5ac44245", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec1fab6ba9f106fe169ad875b418c6fd5ac44245"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/530b92cfdd415d553050f2f64c5d8ad66f8c4b54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/530b92cfdd415d553050f2f64c5d8ad66f8c4b54", "html_url": "https://github.com/rust-lang/rust/commit/530b92cfdd415d553050f2f64c5d8ad66f8c4b54", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/530b92cfdd415d553050f2f64c5d8ad66f8c4b54/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "03e8b26f35c737138f75ebd33b44784ea0a8dc9c", "url": "https://api.github.com/repos/rust-lang/rust/commits/03e8b26f35c737138f75ebd33b44784ea0a8dc9c", "html_url": "https://github.com/rust-lang/rust/commit/03e8b26f35c737138f75ebd33b44784ea0a8dc9c"}], "stats": {"total": 41, "additions": 0, "deletions": 41}, "files": [{"sha": "2011cbe416f18f337adbe42c4ce887f2729da822", "filename": "src/librustc_borrowck/borrowck/mod.rs", "status": "modified", "additions": 0, "deletions": 41, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/530b92cfdd415d553050f2f64c5d8ad66f8c4b54/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/530b92cfdd415d553050f2f64c5d8ad66f8c4b54/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs?ref=530b92cfdd415d553050f2f64c5d8ad66f8c4b54", "patch": "@@ -104,33 +104,9 @@ pub fn check_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>) {\n     let mut bccx = BorrowckCtxt {\n         tcx: tcx,\n         tables: None,\n-        stats: BorrowStats {\n-            loaned_paths_same: 0,\n-            loaned_paths_imm: 0,\n-            stable_paths: 0,\n-            guaranteed_paths: 0\n-        }\n     };\n \n     tcx.visit_all_item_likes_in_krate(DepNode::BorrowCheck, &mut bccx.as_deep_visitor());\n-\n-    if tcx.sess.borrowck_stats() {\n-        println!(\"--- borrowck stats ---\");\n-        println!(\"paths requiring guarantees: {}\",\n-                 bccx.stats.guaranteed_paths);\n-        println!(\"paths requiring loans     : {}\",\n-                 make_stat(&bccx, bccx.stats.loaned_paths_same));\n-        println!(\"paths requiring imm loans : {}\",\n-                 make_stat(&bccx, bccx.stats.loaned_paths_imm));\n-        println!(\"stable paths              : {}\",\n-                 make_stat(&bccx, bccx.stats.stable_paths));\n-    }\n-\n-    fn make_stat(bccx: &BorrowckCtxt, stat: usize) -> String {\n-        let total = bccx.stats.guaranteed_paths as f64;\n-        let perc = if total == 0.0 { 0.0 } else { stat as f64 * 100.0 / total };\n-        format!(\"{} ({:.0}%)\", stat, perc)\n-    }\n }\n \n fn borrowck_item<'a, 'tcx>(this: &mut BorrowckCtxt<'a, 'tcx>, item: &'tcx hir::Item) {\n@@ -245,12 +221,6 @@ pub fn build_borrowck_dataflow_data_for_fn<'a, 'tcx>(\n     let mut bccx = BorrowckCtxt {\n         tcx: tcx,\n         tables: None,\n-        stats: BorrowStats {\n-            loaned_paths_same: 0,\n-            loaned_paths_imm: 0,\n-            stable_paths: 0,\n-            guaranteed_paths: 0\n-        }\n     };\n \n     let dataflow_data = build_borrowck_dataflow_data(&mut bccx, cfg, body);\n@@ -266,17 +236,6 @@ pub struct BorrowckCtxt<'a, 'tcx: 'a> {\n     // tables for the current thing we are checking; set to\n     // Some in `borrowck_fn` and cleared later\n     tables: Option<&'a ty::TypeckTables<'tcx>>,\n-\n-    // Statistics:\n-    stats: BorrowStats\n-}\n-\n-#[derive(Clone)]\n-struct BorrowStats {\n-    loaned_paths_same: usize,\n-    loaned_paths_imm: usize,\n-    stable_paths: usize,\n-    guaranteed_paths: usize\n }\n \n ///////////////////////////////////////////////////////////////////////////"}]}