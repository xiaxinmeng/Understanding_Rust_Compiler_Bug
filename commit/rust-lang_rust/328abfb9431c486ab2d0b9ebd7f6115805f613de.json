{"sha": "328abfb9431c486ab2d0b9ebd7f6115805f613de", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMyOGFiZmI5NDMxYzQ4NmFiMmQwYjllYmQ3ZjYxMTU4MDVmNjEzZGU=", "commit": {"author": {"name": "Giles Cope", "email": "gilescope@gmail.com", "date": "2021-01-26T11:14:57Z"}, "committer": {"name": "Giles Cope", "email": "gilescope@gmail.com", "date": "2021-01-26T11:14:57Z"}, "message": "Slight simplification of chars().count()", "tree": {"sha": "47ee65701bc9957d23afaea520d9b47c7902104f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/47ee65701bc9957d23afaea520d9b47c7902104f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/328abfb9431c486ab2d0b9ebd7f6115805f613de", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEElfpt1fswGixBWxap34UWHa4P82sFAmAP+bIACgkQ34UWHa4P\n82snVBAAqUdkBIVhIu4AAPX/td+Ll60Y4NEhs4UXEBeqQghjuaMTDD/79rzfecIk\ncHiwhe2u0Kw/pYrgTg6dDmNdDF0DVud+Qrt0+YGe/3jbIuloRzi9wsfUEVPd5Ipi\nnPwkwrRUzy5tGt+03s5WHmilqWG+FllE12+H2i0eitP2D83UwNO8mhx/XiDVO+mX\n2wL8ug360YY5H4pTVU+RfHoW9NEqzD5F+ICOoJX/6BTDtNLD4m57Q887eMDGznEB\nM56uwUK8tPs2B8+r+3tUneRn5Oee/ZpS2kSIencvZoyA+w2yzEWeCGR8Ytv5ywC2\njy9j+xro7+Xm41ijK14HIavcg3wmhEDl9ca1IwYWzO2oRtNVKxMOcpNUd667Nk7l\nH5sTOpcu/meb8wi8xQHHoqSUEDm3wEvyJWNdRRHL960+yxdz02U/F+IkmuKXeNCo\n3vlolmXC7Hxgf3Qp/HDdlvf5j98zTwaSWsBg27IivgyLyIFLS2U2jHX+kt9ceWIs\nBqHCgGyfEnAMlC3tUV4wK1w/GFNrwzE4S7Sc6efWhLQ9+9BpNFeoy1ja3USuz7a1\nhZfKvonqbNvTZUpj2AMWrNBbd6Meh4YtyIemmUvqoKMCpo+de6rnnglRZ+Gs2FTp\nLV7aHKtOqtMwfpz1nNA17PFFoWoADWC5/ZMubxlhu+rmf76d2c0=\n=p7Ur\n-----END PGP SIGNATURE-----", "payload": "tree 47ee65701bc9957d23afaea520d9b47c7902104f\nparent 9a9477fada5baf69d693e717d6df902e411a73d6\nauthor Giles Cope <gilescope@gmail.com> 1611659697 +0000\ncommitter Giles Cope <gilescope@gmail.com> 1611659697 +0000\n\nSlight simplification of chars().count()\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/328abfb9431c486ab2d0b9ebd7f6115805f613de", "html_url": "https://github.com/rust-lang/rust/commit/328abfb9431c486ab2d0b9ebd7f6115805f613de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/328abfb9431c486ab2d0b9ebd7f6115805f613de/comments", "author": {"login": "gilescope", "id": 803976, "node_id": "MDQ6VXNlcjgwMzk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/803976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilescope", "html_url": "https://github.com/gilescope", "followers_url": "https://api.github.com/users/gilescope/followers", "following_url": "https://api.github.com/users/gilescope/following{/other_user}", "gists_url": "https://api.github.com/users/gilescope/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilescope/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilescope/subscriptions", "organizations_url": "https://api.github.com/users/gilescope/orgs", "repos_url": "https://api.github.com/users/gilescope/repos", "events_url": "https://api.github.com/users/gilescope/events{/privacy}", "received_events_url": "https://api.github.com/users/gilescope/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gilescope", "id": 803976, "node_id": "MDQ6VXNlcjgwMzk3Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/803976?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gilescope", "html_url": "https://github.com/gilescope", "followers_url": "https://api.github.com/users/gilescope/followers", "following_url": "https://api.github.com/users/gilescope/following{/other_user}", "gists_url": "https://api.github.com/users/gilescope/gists{/gist_id}", "starred_url": "https://api.github.com/users/gilescope/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gilescope/subscriptions", "organizations_url": "https://api.github.com/users/gilescope/orgs", "repos_url": "https://api.github.com/users/gilescope/repos", "events_url": "https://api.github.com/users/gilescope/events{/privacy}", "received_events_url": "https://api.github.com/users/gilescope/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a9477fada5baf69d693e717d6df902e411a73d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a9477fada5baf69d693e717d6df902e411a73d6", "html_url": "https://github.com/rust-lang/rust/commit/9a9477fada5baf69d693e717d6df902e411a73d6"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "c37843434781ac21359cfe1487f6012d45dc23a0", "filename": "library/core/src/str/iter.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/328abfb9431c486ab2d0b9ebd7f6115805f613de/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/328abfb9431c486ab2d0b9ebd7f6115805f613de/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs?ref=328abfb9431c486ab2d0b9ebd7f6115805f613de", "patch": "@@ -47,12 +47,13 @@ impl<'a> Iterator for Chars<'a> {\n     #[inline]\n     fn count(self) -> usize {\n         // length in `char` is equal to the number of non-continuation bytes\n-        let bytes_len = self.iter.len();\n-        let mut cont_bytes = 0;\n+        let mut char_count = 0;\n         for &byte in self.iter {\n-            cont_bytes += utf8_is_cont_byte(byte) as usize;\n+            if !utf8_is_cont_byte(byte) {\n+                char_count += 1;\n+            }\n         }\n-        bytes_len - cont_bytes\n+        char_count\n     }\n \n     #[inline]"}]}