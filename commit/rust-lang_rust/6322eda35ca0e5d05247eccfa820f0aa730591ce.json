{"sha": "6322eda35ca0e5d05247eccfa820f0aa730591ce", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzMjJlZGEzNWNhMGU1ZDA1MjQ3ZWNjZmE4MjBmMGFhNzMwNTkxY2U=", "commit": {"author": {"name": "Ben Striegel", "email": "ben.striegel@gmail.com", "date": "2012-06-26T00:18:09Z"}, "committer": {"name": "Ben Striegel", "email": "ben.striegel@gmail.com", "date": "2012-06-26T00:18:09Z"}, "message": "Fail to configure without an LLVM-friendly Python\n\nThis addresses issue #2720. According to LLVM's documentation, it requires a\nversion of Python between 2.4 and 2.7. Without the proper version, LLVM fails\nto build with cryptic errors. Prior to this commit, the configure script\nchecked for the `python` command in the environment, but didn't actually check\nthe version, which can cause problems e.g. on Linux distros where the default\nis Python 3. Now the configure script always prefers to select a more specific\nversion of Python when available, in the order `python2.7` > `python2.6` >\n`python2` > `python`, and will always check to ensure that the interpreter's\nversion is in the correct range.", "tree": {"sha": "2b17bda0f63527792705794d397644cd9e9316b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b17bda0f63527792705794d397644cd9e9316b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6322eda35ca0e5d05247eccfa820f0aa730591ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6322eda35ca0e5d05247eccfa820f0aa730591ce", "html_url": "https://github.com/rust-lang/rust/commit/6322eda35ca0e5d05247eccfa820f0aa730591ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6322eda35ca0e5d05247eccfa820f0aa730591ce/comments", "author": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bstrie", "id": 865233, "node_id": "MDQ6VXNlcjg2NTIzMw==", "avatar_url": "https://avatars.githubusercontent.com/u/865233?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bstrie", "html_url": "https://github.com/bstrie", "followers_url": "https://api.github.com/users/bstrie/followers", "following_url": "https://api.github.com/users/bstrie/following{/other_user}", "gists_url": "https://api.github.com/users/bstrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bstrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bstrie/subscriptions", "organizations_url": "https://api.github.com/users/bstrie/orgs", "repos_url": "https://api.github.com/users/bstrie/repos", "events_url": "https://api.github.com/users/bstrie/events{/privacy}", "received_events_url": "https://api.github.com/users/bstrie/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e6d20a40f86d1f8d8dd8d28c882378218a040c9", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e6d20a40f86d1f8d8dd8d28c882378218a040c9", "html_url": "https://github.com/rust-lang/rust/commit/6e6d20a40f86d1f8d8dd8d28c882378218a040c9"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "1bcbe5135791a161584c87f85a6c1f6f408c793f", "filename": "configure", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6322eda35ca0e5d05247eccfa820f0aa730591ce/configure", "raw_url": "https://github.com/rust-lang/rust/raw/6322eda35ca0e5d05247eccfa820f0aa730591ce/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=6322eda35ca0e5d05247eccfa820f0aa730591ce", "patch": "@@ -311,8 +311,13 @@ fi\n step_msg \"looking for build programs\"\n \n probe_need CFG_PERL        perl\n-probe_need CFG_PYTHON      python python2.6 python2 python3\n probe_need CFG_CURL        curl\n+probe_need CFG_PYTHON      python2.7 python2.6 python2 python\n+\n+python_version=$($CFG_PYTHON -V 2>&1)\n+if [ $(echo $python_version | grep -c '^Python 2\\.[4567]') -ne 1 ]; then\n+    err \"Found $python_version, but LLVM requires Python 2.4-2.7\"\n+fi\n \n # If we have no git directory then we are probably a tarball distribution\n # and shouldn't attempt to load submodules"}]}