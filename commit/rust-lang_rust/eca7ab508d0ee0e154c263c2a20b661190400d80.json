{"sha": "eca7ab508d0ee0e154c263c2a20b661190400d80", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVjYTdhYjUwOGQwZWUwZTE1NGMyNjNjMmEyMGI2NjExOTA0MDBkODA=", "commit": {"author": {"name": "Sean Jensen-Grey", "email": "seanj@xyke.com", "date": "2014-11-02T16:06:32Z"}, "committer": {"name": "Sean Jensen-Grey", "email": "seanj@xyke.com", "date": "2014-11-02T16:06:32Z"}, "message": "cleaned up ids, added direct rust doc search\n\nSearch functionality uses both duckduckgo for site wide doc search\nand the rust specific documentation search @\n\nhttp://doc.rust-lang.org/core/?search=unwrap_or_else", "tree": {"sha": "6d5f5cf629b7432bc2578795b0bad94d5176008c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d5f5cf629b7432bc2578795b0bad94d5176008c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eca7ab508d0ee0e154c263c2a20b661190400d80", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eca7ab508d0ee0e154c263c2a20b661190400d80", "html_url": "https://github.com/rust-lang/rust/commit/eca7ab508d0ee0e154c263c2a20b661190400d80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eca7ab508d0ee0e154c263c2a20b661190400d80/comments", "author": {"login": "seanjensengrey", "id": 128454, "node_id": "MDQ6VXNlcjEyODQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/128454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seanjensengrey", "html_url": "https://github.com/seanjensengrey", "followers_url": "https://api.github.com/users/seanjensengrey/followers", "following_url": "https://api.github.com/users/seanjensengrey/following{/other_user}", "gists_url": "https://api.github.com/users/seanjensengrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/seanjensengrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seanjensengrey/subscriptions", "organizations_url": "https://api.github.com/users/seanjensengrey/orgs", "repos_url": "https://api.github.com/users/seanjensengrey/repos", "events_url": "https://api.github.com/users/seanjensengrey/events{/privacy}", "received_events_url": "https://api.github.com/users/seanjensengrey/received_events", "type": "User", "site_admin": false}, "committer": {"login": "seanjensengrey", "id": 128454, "node_id": "MDQ6VXNlcjEyODQ1NA==", "avatar_url": "https://avatars.githubusercontent.com/u/128454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seanjensengrey", "html_url": "https://github.com/seanjensengrey", "followers_url": "https://api.github.com/users/seanjensengrey/followers", "following_url": "https://api.github.com/users/seanjensengrey/following{/other_user}", "gists_url": "https://api.github.com/users/seanjensengrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/seanjensengrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seanjensengrey/subscriptions", "organizations_url": "https://api.github.com/users/seanjensengrey/orgs", "repos_url": "https://api.github.com/users/seanjensengrey/repos", "events_url": "https://api.github.com/users/seanjensengrey/events{/privacy}", "received_events_url": "https://api.github.com/users/seanjensengrey/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f878a883e5d0d7472359c4757d7d47048f313a49", "url": "https://api.github.com/repos/rust-lang/rust/commits/f878a883e5d0d7472359c4757d7d47048f313a49", "html_url": "https://github.com/rust-lang/rust/commit/f878a883e5d0d7472359c4757d7d47048f313a49"}], "stats": {"total": 34, "additions": 27, "deletions": 7}, "files": [{"sha": "bd4d959109716e354d97227bda0b38a5958d1f30", "filename": "src/doc/not_found.md", "status": "modified", "additions": 27, "deletions": 7, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/eca7ab508d0ee0e154c263c2a20b661190400d80/src%2Fdoc%2Fnot_found.md", "raw_url": "https://github.com/rust-lang/rust/raw/eca7ab508d0ee0e154c263c2a20b661190400d80/src%2Fdoc%2Fnot_found.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fnot_found.md?ref=eca7ab508d0ee0e154c263c2a20b661190400d80", "patch": "@@ -13,9 +13,10 @@ Some things that might be helpful to you though:\n \n ## Search\n * <form action=\"https://duckduckgo.com/\">\n-    <input type=\"text\" id=\"code.search\" name=\"q\" size=\"80\"></input>\n+    <input type=\"text\" id=\"site-search\" name=\"q\" size=\"80\"></input>\n     <input type=\"submit\" value=\"Search DuckDuckGo\">\n </form>\n+* Rust doc search: <span id=\"core-search\"></span>\n \n ## Reference\n * [The Rust official site](http://rust-lang.org)\n@@ -25,19 +26,38 @@ Some things that might be helpful to you though:\n * [The standard library](http://doc.rust-lang.org/std/)\n \n <script>\n-function populate_search_box() {\n-\n+function get_url_fragments() {\n     var last = document.URL.split(\"/\").pop();\n     var tokens = last.split(\".\");\n     var op = [];\n     for (var i=0; i < tokens.length; i++) {\n-        if (tokens[i].indexOf(\"#\") == -1) \n-            op.push(tokens[i]);\n+        var t = tokens[i];\n+        if (t == 'html' || t.indexOf(\"#\") != -1) {\n+            // no html or anchors\n+        } else {\n+            op.push(t);\n+        }\n     }\n+    return op;\n+}\n \n-    var search = document.getElementById('code.search');\n+function populate_site_search() {\n+    var op = get_url_fragments();\n+\n+    var search = document.getElementById('site-search');\n     search.value = op.join(' ') + \" site:doc.rust-lang.org\";\n }\n-populate_search_box();\n+\n+function populate_rust_search() {\n+    var op = get_url_fragments();\n+    var lt = op.pop();\n+\n+    // #18540, use a single token\n+\n+    var search = document.getElementById('core-search');\n+    search.innerHTML = \"<a href=\\\"http://doc.rust-lang.org/core/?search=\" + lt + \"\\\">\" + lt + \"</a>\";\n+}\n+populate_site_search();\n+populate_rust_search();\n </script>\n "}]}