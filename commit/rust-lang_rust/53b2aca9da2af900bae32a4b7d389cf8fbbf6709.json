{"sha": "53b2aca9da2af900bae32a4b7d389cf8fbbf6709", "node_id": "C_kwDOAAsO6NoAKDUzYjJhY2E5ZGEyYWY5MDBiYWUzMmE0YjdkMzg5Y2Y4ZmJiZjY3MDk", "commit": {"author": {"name": "Isak Nyberg", "email": "36712644+IsakNyberg@users.noreply.github.com", "date": "2022-04-13T22:22:08Z"}, "committer": {"name": "Isak Nyberg", "email": "36712644+IsakNyberg@users.noreply.github.com", "date": "2022-04-13T22:22:08Z"}, "message": "Refactor loop into iterator; simplify negation logic.", "tree": {"sha": "14607ae2ff40075c8171b98e5f9de2851993bd31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14607ae2ff40075c8171b98e5f9de2851993bd31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53b2aca9da2af900bae32a4b7d389cf8fbbf6709", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53b2aca9da2af900bae32a4b7d389cf8fbbf6709", "html_url": "https://github.com/rust-lang/rust/commit/53b2aca9da2af900bae32a4b7d389cf8fbbf6709", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53b2aca9da2af900bae32a4b7d389cf8fbbf6709/comments", "author": {"login": "IsakNyberg", "id": 36712644, "node_id": "MDQ6VXNlcjM2NzEyNjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/36712644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsakNyberg", "html_url": "https://github.com/IsakNyberg", "followers_url": "https://api.github.com/users/IsakNyberg/followers", "following_url": "https://api.github.com/users/IsakNyberg/following{/other_user}", "gists_url": "https://api.github.com/users/IsakNyberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsakNyberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsakNyberg/subscriptions", "organizations_url": "https://api.github.com/users/IsakNyberg/orgs", "repos_url": "https://api.github.com/users/IsakNyberg/repos", "events_url": "https://api.github.com/users/IsakNyberg/events{/privacy}", "received_events_url": "https://api.github.com/users/IsakNyberg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "IsakNyberg", "id": 36712644, "node_id": "MDQ6VXNlcjM2NzEyNjQ0", "avatar_url": "https://avatars.githubusercontent.com/u/36712644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IsakNyberg", "html_url": "https://github.com/IsakNyberg", "followers_url": "https://api.github.com/users/IsakNyberg/followers", "following_url": "https://api.github.com/users/IsakNyberg/following{/other_user}", "gists_url": "https://api.github.com/users/IsakNyberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/IsakNyberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IsakNyberg/subscriptions", "organizations_url": "https://api.github.com/users/IsakNyberg/orgs", "repos_url": "https://api.github.com/users/IsakNyberg/repos", "events_url": "https://api.github.com/users/IsakNyberg/events{/privacy}", "received_events_url": "https://api.github.com/users/IsakNyberg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc4bfcbdfff651c82eff4bdd311d28e54d1513c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/dc4bfcbdfff651c82eff4bdd311d28e54d1513c4", "html_url": "https://github.com/rust-lang/rust/commit/dc4bfcbdfff651c82eff4bdd311d28e54d1513c4"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "894f3fdaf596d9b859d833274afd584eea603845", "filename": "compiler/rustc_error_messages/src/lib.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/53b2aca9da2af900bae32a4b7d389cf8fbbf6709/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/53b2aca9da2af900bae32a4b7d389cf8fbbf6709/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs?ref=53b2aca9da2af900bae32a4b7d389cf8fbbf6709", "patch": "@@ -320,18 +320,12 @@ impl MultiSpan {\n \n     /// Returns `true` if any of the primary spans are displayable.\n     pub fn has_primary_spans(&self) -> bool {\n-        self.primary_spans.iter().any(|sp| !sp.is_dummy())\n+        !self.primary_spans.iter().all(|sp| sp.is_dummy())\n     }\n \n     /// Returns `true` if this contains only a dummy primary span with any hygienic context.\n     pub fn is_dummy(&self) -> bool {\n-        let mut is_dummy = true;\n-        for span in &self.primary_spans {\n-            if !span.is_dummy() {\n-                is_dummy = false;\n-            }\n-        }\n-        is_dummy\n+        self.primary_spans.iter().all(|sp| sp.is_dummy())\n     }\n \n     /// Replaces all occurrences of one Span with another. Used to move `Span`s in areas that don't"}]}