{"sha": "96418569641eecbb5d87a790ce4300658d46fd46", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2NDE4NTY5NjQxZWVjYmI1ZDg3YTc5MGNlNDMwMDY1OGQ0NmZkNDY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-12T00:08:58Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-12T04:13:40Z"}, "message": "Only run ldconfig on Linux", "tree": {"sha": "38e77cbf467f18852f2864985a2cab57590560a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38e77cbf467f18852f2864985a2cab57590560a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96418569641eecbb5d87a790ce4300658d46fd46", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96418569641eecbb5d87a790ce4300658d46fd46", "html_url": "https://github.com/rust-lang/rust/commit/96418569641eecbb5d87a790ce4300658d46fd46", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96418569641eecbb5d87a790ce4300658d46fd46/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5ee270a148f95c35b14872fc6497e66c11177ea3", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ee270a148f95c35b14872fc6497e66c11177ea3", "html_url": "https://github.com/rust-lang/rust/commit/5ee270a148f95c35b14872fc6497e66c11177ea3"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "c949743ea75949f4bd84b4e1b6812b391ec7f5d9", "filename": "src/etc/install.sh", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/96418569641eecbb5d87a790ce4300658d46fd46/src%2Fetc%2Finstall.sh", "raw_url": "https://github.com/rust-lang/rust/raw/96418569641eecbb5d87a790ce4300658d46fd46/src%2Fetc%2Finstall.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Finstall.sh?ref=96418569641eecbb5d87a790ce4300658d46fd46", "patch": "@@ -293,11 +293,9 @@ elif [ \"$CFG_OSTYPE\" = \"Darwin\" ]\n then\n     CFG_LD_PATH_VAR=DYLD_LIBRARY_PATH\n     CFG_OLD_LD_PATH_VAR=$DYLD_LIBRARY_PATH\n-    UNIX=1\n else\n     CFG_LD_PATH_VAR=LD_LIBRARY_PATH\n     CFG_OLD_LD_PATH_VAR=$LD_LIBRARY_PATH\n-    UNIX=1\n fi\n \n flag uninstall \"only uninstall from the installation prefix\"\n@@ -469,13 +467,13 @@ while read p; do\n done < \"${CFG_SRC_DIR}/${CFG_LIBDIR_RELATIVE}/rustlib/manifest.in\"\n \n # Run ldconfig to make dynamic libraries available to the linker\n-if [ $UNIX -eq 1 ]\n+if [ \"$CFG_OSTYPE\" = \"Linux\" ]\n     then\n     ldconfig\n     if [ $? -ne 0 ]\n     then\n-\twarn \"failed to run ldconfig.\"\n-\twarn \"this may happen when not installing as root, in which case you know what you are doing and it's probably fine.\"\n+        warn \"failed to run ldconfig.\"\n+        warn \"this may happen when not installing as root and may be fine\"\n     fi\n fi\n "}]}