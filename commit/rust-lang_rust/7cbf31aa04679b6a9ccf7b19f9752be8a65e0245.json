{"sha": "7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdjYmYzMWFhMDQ2NzliNmE5Y2NmN2IxOWY5NzUyYmU4YTY1ZTAyNDU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-09-14T15:43:10Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-11-18T15:43:48Z"}, "message": "rename check-theme option into check-themes", "tree": {"sha": "079a4f8b781f035e4c0e3e052d7bb762ed23baa3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/079a4f8b781f035e4c0e3e052d7bb762ed23baa3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "html_url": "https://github.com/rust-lang/rust/commit/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bbfd63c89afe091fa9ec75bba0a5721d153d78f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbfd63c89afe091fa9ec75bba0a5721d153d78f3", "html_url": "https://github.com/rust-lang/rust/commit/bbfd63c89afe091fa9ec75bba0a5721d153d78f3"}], "stats": {"total": 21, "additions": 9, "deletions": 12}, "files": [{"sha": "85feb89d7d5dcce73cb4ba7279c713eb7028c714", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "patch": "@@ -282,12 +282,12 @@ impl Options {\n         // check for deprecated options\n         check_deprecated_options(&matches, &diag);\n \n-        let to_check = matches.opt_strs(\"check-theme\");\n+        let to_check = matches.opt_strs(\"check-themes\");\n         if !to_check.is_empty() {\n             let paths = theme::load_css_paths(static_files::themes::LIGHT.as_bytes());\n             let mut errors = 0;\n \n-            println!(\"rustdoc: [check-theme] Starting tests! (Ignoring all other arguments)\");\n+            println!(\"rustdoc: [check-themes] Starting tests! (Ignoring all other arguments)\");\n             for theme_file in to_check.iter() {\n                 print!(\" - Checking \\\"{}\\\"...\", theme_file);\n                 let (success, differences) = theme::test_theme_against(theme_file, &paths, &diag);\n@@ -384,7 +384,7 @@ impl Options {\n                                                default theme\", theme_s))\n                         .warn(\"the theme may appear incorrect when loaded\")\n                         .help(&format!(\"to see what rules are missing, call `rustdoc \\\n-                                        --check-theme \\\"{}\\\"`\", theme_s))\n+                                        --check-themes \\\"{}\\\"`\", theme_s))\n                         .emit();\n                 }\n                 themes.push(theme_file);"}, {"sha": "dda4b024bcea5c9c9828a1fcf28d6504cec45199", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "patch": "@@ -635,7 +635,7 @@ function handleThemeButtonsBlur(e) {{\n \n themePicker.onclick = switchThemeButtonState;\n themePicker.onblur = handleThemeButtonsBlur;\n-[{}].forEach(function(item) {{\n+{}.forEach(function(item) {{\n     var but = document.createElement('button');\n     but.innerHTML = item;\n     but.onclick = function(el) {{\n@@ -644,10 +644,7 @@ themePicker.onblur = handleThemeButtonsBlur;\n     but.onblur = handleThemeButtonsBlur;\n     themes.appendChild(but);\n }});\"#,\n-                 themes.iter()\n-                       .map(|s| format!(\"\\\"{}\\\"\", s.replace(\"\\\\\", \"\\\\\\\\\").replace(\"\\\"\", \"\\\\\\\"\")))\n-                       .collect::<Vec<String>>()\n-                       .join(\",\"));\n+                 as_json(&themes));\n     write(cx.dst.join(&format!(\"theme{}.js\", cx.shared.resource_suffix)),\n           theme_js.as_bytes()\n     )?;"}, {"sha": "8702ba224db568dfbb16209d8b8fdff2ea57d7a9", "filename": "src/librustdoc/html/static_files.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs?ref=7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "patch": "@@ -59,7 +59,7 @@ pub static RUST_FAVICON: &'static [u8] = include_bytes!(\"static/favicon.ico\");\n /// The built-in themes given to every documentation site.\n pub mod themes {\n     /// The \"light\" theme, selected by default when no setting is available. Used as the basis for\n-    /// the `--check-theme` functionality.\n+    /// the `--check-themes` functionality.\n     pub static LIGHT: &'static str = include_str!(\"static/themes/light.css\");\n \n     /// The \"dark\" theme."}, {"sha": "6241ae7a3bbb96b431646ec66fa07d9008b237c0", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "patch": "@@ -256,8 +256,8 @@ fn opts() -> Vec<RustcOptGroup> {\n                        \"additional themes which will be added to the generated docs\",\n                        \"FILES\")\n         }),\n-        stable(\"check-theme\", |o| {\n-            o.optmulti(\"\", \"check-theme\",\n+        stable(\"check-themes\", |o| {\n+            o.optmulti(\"\", \"check-themes\",\n                        \"check if given theme is valid\",\n                        \"FILES\")\n         }),"}, {"sha": "fb0c9d7d4e0c479965f67c1cf12dc66d084e1459", "filename": "src/tools/rustdoc-themes/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Ftools%2Frustdoc-themes%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7cbf31aa04679b6a9ccf7b19f9752be8a65e0245/src%2Ftools%2Frustdoc-themes%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-themes%2Fmain.rs?ref=7cbf31aa04679b6a9ccf7b19f9752be8a65e0245", "patch": "@@ -39,7 +39,7 @@ fn main() {\n         exit(1);\n     }\n     let status = Command::new(rustdoc_bin)\n-                        .args(&[\"-Z\", \"unstable-options\", \"--check-theme\"])\n+                        .args(&[\"-Z\", \"unstable-options\", \"--check-themes\"])\n                         .args(&themes)\n                         .status()\n                         .expect(\"failed to execute child\");"}]}