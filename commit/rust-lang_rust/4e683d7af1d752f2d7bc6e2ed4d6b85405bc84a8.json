{"sha": "4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlNjgzZDdhZjFkNzUyZjJkN2JjNmUyZWQ0ZDZiODU0MDViYzg0YTg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-11-20T11:52:10Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-11-20T11:52:10Z"}, "message": "Add ModId", "tree": {"sha": "aa262b51d963e5c36925c90d1c88859d39598c64", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa262b51d963e5c36925c90d1c88859d39598c64"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8", "html_url": "https://github.com/rust-lang/rust/commit/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "902778ccaefc7b51548cab459715aaf8653bbbc6", "url": "https://api.github.com/repos/rust-lang/rust/commits/902778ccaefc7b51548cab459715aaf8653bbbc6", "html_url": "https://github.com/rust-lang/rust/commit/902778ccaefc7b51548cab459715aaf8653bbbc6"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "53bf609fa327a5dde6c6fc23344de52a521309a5", "filename": "crates/ra_analysis/src/loc2id.rs", "status": "modified", "additions": 17, "deletions": 8, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8/crates%2Fra_analysis%2Fsrc%2Floc2id.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8/crates%2Fra_analysis%2Fsrc%2Floc2id.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Floc2id.rs?ref=4e683d7af1d752f2d7bc6e2ed4d6b85405bc84a8", "patch": "@@ -72,17 +72,26 @@ pub(crate) trait NumericId: Clone + Eq + Hash {\n     fn to_u32(self) -> u32;\n }\n \n+macro_rules! impl_numeric_id {\n+    ($id:ident) => {\n+        impl NumericId for $id {\n+            fn from_u32(id: u32) -> Self {\n+                $id(id)\n+            }\n+            fn to_u32(self) -> u32 {\n+                self.0\n+            }\n+        }\n+    };\n+}\n+\n #[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]\n pub(crate) struct FnId(u32);\n+impl_numeric_id!(FnId);\n \n-impl NumericId for FnId {\n-    fn from_u32(id: u32) -> FnId {\n-        FnId(id)\n-    }\n-    fn to_u32(self) -> u32 {\n-        self.0\n-    }\n-}\n+#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]\n+pub(crate) struct ModId(u32);\n+impl_numeric_id!(ModId);\n \n pub(crate) trait IdDatabase: salsa::Database {\n     fn id_maps(&self) -> &IdMaps;"}]}