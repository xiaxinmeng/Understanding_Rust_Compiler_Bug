{"sha": "8f942532541f571733c38d8c3145845948e4cd44", "node_id": "C_kwDOAAsO6NoAKDhmOTQyNTMyNTQxZjU3MTczM2MzOGQ4YzMxNDU4NDU5NDhlNGNkNDQ", "commit": {"author": {"name": "Wim Looman", "email": "git@nemo157.com", "date": "2023-05-28T11:11:23Z"}, "committer": {"name": "Wim Looman", "email": "git@nemo157.com", "date": "2023-05-28T11:11:30Z"}, "message": "Add details about `unsafe_op_in_unsafe_fn` to E0133", "tree": {"sha": "a91673955c03d77692892552d965e8e9b3358c4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a91673955c03d77692892552d965e8e9b3358c4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f942532541f571733c38d8c3145845948e4cd44", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIYEABYIAC4WIQSil6aeYAADwGp0ncHG9XSMbdFgewUCZHM24hAcZ2l0QG5lbW8x\nNTcuY29tAAoJEMb1dIxt0WB7uL0A/RKKOuzNEimRp77AD55nkahNzzPfpCyIG7NY\nzuQe/6AdAQDjUTgtlvIW2lVEyxF7QPrUB4iTDN4PXKiEAXP2KousDw==\n=hCbD\n-----END PGP SIGNATURE-----", "payload": "tree a91673955c03d77692892552d965e8e9b3358c4d\nparent a525c7ddba5997b132efa46515e0ce90c173f480\nauthor Wim Looman <git@nemo157.com> 1685272283 +0200\ncommitter Wim Looman <git@nemo157.com> 1685272290 +0200\n\nAdd details about `unsafe_op_in_unsafe_fn` to E0133\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f942532541f571733c38d8c3145845948e4cd44", "html_url": "https://github.com/rust-lang/rust/commit/8f942532541f571733c38d8c3145845948e4cd44", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f942532541f571733c38d8c3145845948e4cd44/comments", "author": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a525c7ddba5997b132efa46515e0ce90c173f480", "url": "https://api.github.com/repos/rust-lang/rust/commits/a525c7ddba5997b132efa46515e0ce90c173f480", "html_url": "https://github.com/rust-lang/rust/commit/a525c7ddba5997b132efa46515e0ce90c173f480"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "8ca3f03ce156fec63cf82b37bd82fcd506be6721", "filename": "compiler/rustc_error_codes/src/error_codes/E0133.md", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/8f942532541f571733c38d8c3145845948e4cd44/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0133.md", "raw_url": "https://github.com/rust-lang/rust/raw/8f942532541f571733c38d8c3145845948e4cd44/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0133.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0133.md?ref=8f942532541f571733c38d8c3145845948e4cd44", "patch": "@@ -1,4 +1,4 @@\n-Unsafe code was used outside of an unsafe function or block.\n+Unsafe code was used outside of an unsafe block.\n \n Erroneous code example:\n \n@@ -30,4 +30,21 @@ fn main() {\n \n See the [unsafe section][unsafe-section] of the Book for more details.\n \n+#### Unsafe code in functions\n+\n+Unsafe code is currently accepted in unsafe functions, but that is being phased\n+out in favor of requiring unsafe blocks here too.\n+\n+```\n+unsafe fn f() { return; }\n+\n+unsafe fn g() {\n+    f(); // Is accepted, but no longer recommended\n+    unsafe { f(); } // Recommended way to write this\n+}\n+```\n+\n+Linting against this is controlled via the `unsafe_op_in_unsafe_fn` lint, which\n+is `allow` by default but will be upgraded to `warn` in a future edition.\n+\n [unsafe-section]: https://doc.rust-lang.org/book/ch19-01-unsafe-rust.html"}]}