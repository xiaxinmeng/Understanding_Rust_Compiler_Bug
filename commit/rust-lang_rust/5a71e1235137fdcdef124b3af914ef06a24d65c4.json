{"sha": "5a71e1235137fdcdef124b3af914ef06a24d65c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhNzFlMTIzNTEzN2ZkY2RlZjEyNGIzYWY5MTRlZjA2YTI0ZDY1YzQ=", "commit": {"author": {"name": "est31", "email": "MTest31@outlook.com", "date": "2017-08-25T10:25:22Z"}, "committer": {"name": "est31", "email": "MTest31@outlook.com", "date": "2017-08-25T19:46:54Z"}, "message": "Fix a byte/char confusion issue in the error emitter\n\nFixes #44078. Fixes #44023.\n\nThe start_col member is given in chars,\nwhile the code previously assumed it was given in bytes.\n\nThe more basic issue #44080 doesn't get fixed.", "tree": {"sha": "b841619b5042ce6db26eb706084ebcd9268c2a60", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b841619b5042ce6db26eb706084ebcd9268c2a60"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5a71e1235137fdcdef124b3af914ef06a24d65c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5a71e1235137fdcdef124b3af914ef06a24d65c4", "html_url": "https://github.com/rust-lang/rust/commit/5a71e1235137fdcdef124b3af914ef06a24d65c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5a71e1235137fdcdef124b3af914ef06a24d65c4/comments", "author": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "32b50e280faf56f21cbd82d1cf82cb4795535143", "url": "https://api.github.com/repos/rust-lang/rust/commits/32b50e280faf56f21cbd82d1cf82cb4795535143", "html_url": "https://github.com/rust-lang/rust/commit/32b50e280faf56f21cbd82d1cf82cb4795535143"}], "stats": {"total": 56, "additions": 55, "deletions": 1}, "files": [{"sha": "53d90531cc946a4c043d7c7983200f0f6ffc1228", "filename": "src/librustc_errors/emitter.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Flibrustc_errors%2Femitter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Flibrustc_errors%2Femitter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Femitter.rs?ref=5a71e1235137fdcdef124b3af914ef06a24d65c4", "patch": "@@ -311,7 +311,9 @@ impl EmitterWriter {\n         if line.annotations.len() == 1 {\n             if let Some(ref ann) = line.annotations.get(0) {\n                 if let AnnotationType::MultilineStart(depth) = ann.annotation_type {\n-                    if source_string[0..ann.start_col].trim() == \"\" {\n+                    if source_string.chars()\n+                                    .take(ann.start_col)\n+                                    .all(|c| c.is_whitespace()) {\n                         let style = if ann.is_primary {\n                             Style::UnderlinePrimary\n                         } else {"}, {"sha": "295d480828930ba7bf47da9534538a65bdb3b06d", "filename": "src/test/ui/issue-44023.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44023.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44023.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-44023.rs?ref=5a71e1235137fdcdef124b3af914ef06a24d65c4", "patch": "@@ -0,0 +1,16 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(non_ascii_idents)]\n+\n+pub fn main () {}\n+\n+fn \u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8 ( ) -> isize {\n+}"}, {"sha": "a17512ba4abc4824e0af7ccf9a4b7e1b63ecd90f", "filename": "src/test/ui/issue-44023.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44023.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44023.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-44023.stderr?ref=5a71e1235137fdcdef124b3af914ef06a24d65c4", "patch": "@@ -0,0 +1,13 @@\n+error[E0308]: mismatched types\n+  --> $DIR/issue-44023.rs:15:42\n+   |\n+15 |   fn \u10e1\u10d0\u10ed\u10db\u10d4\u10da\u10d0\u10d3_\u10d2\u10d4\u10db\u10e0\u10d8\u10d4\u10da\u10d8_\u10e1\u10d0\u10d3\u10d8\u10da\u10d8 ( ) -> isize {\n+   |  __________________________________________^\n+16 | | }\n+   | |_^ expected isize, found ()\n+   |\n+   = note: expected type `isize`\n+              found type `()`\n+\n+error: aborting due to previous error\n+"}, {"sha": "ef47214f2b393fb8d6c7ecd341847f67d7dbc4f4", "filename": "src/test/ui/issue-44078.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44078.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44078.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-44078.rs?ref=5a71e1235137fdcdef124b3af914ef06a24d65c4", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    \"\ud83d\ude0a\"\";\n+}"}, {"sha": "389f3b2479aa45c3f6669934be61380275c0013d", "filename": "src/test/ui/issue-44078.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44078.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5a71e1235137fdcdef124b3af914ef06a24d65c4/src%2Ftest%2Fui%2Fissue-44078.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-44078.stderr?ref=5a71e1235137fdcdef124b3af914ef06a24d65c4", "patch": "@@ -0,0 +1,10 @@\n+error: unterminated double quote string\n+  --> $DIR/issue-44078.rs:12:8\n+   |\n+12 |       \"\ud83d\ude0a\"\";\n+   |  ________^\n+13 | | }\n+   | |__^\n+\n+error: aborting due to previous error\n+"}]}