{"sha": "d6de9616a16fa5c078836fb0b39173a1d0cc9d58", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2ZGU5NjE2YTE2ZmE1YzA3ODgzNmZiMGIzOTE3M2ExZDBjYzlkNTg=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-08-24T02:48:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-24T02:48:49Z"}, "message": "Rollup merge of #75844 - ehuss:publish-toolstate-httperror, r=Mark-Simulacrum\n\npublish-toolstate: show more context on HTTP error\n\nThe default display for HTTPError in Python does not include the request body. For GitHub API, the body includes more details about the error (like rate limiting). This could help diagnosing errors like this: https://github.com/rust-lang/rust/pull/75815#issuecomment-678798158", "tree": {"sha": "6fdd508ec80474066c619851c76eaa43d9237d4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fdd508ec80474066c619851c76eaa43d9237d4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d6de9616a16fa5c078836fb0b39173a1d0cc9d58", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfQyqRCRBK7hj4Ov3rIwAAdHIIAGR0ctX1ccCduFaFwf4fiO8H\nIbxuw+G2GSHQCVH2SOo4eYHw/y6zxfllhU9ga3dbxv3EA96Sbt8h5q/BRIRkUSQ4\nXZ/pI1kAkYm8v/SP29NbG9d5kJPxMTUw6n6OLkF3GxOegIpct48eMx9csa3Sl6bq\nqYQX4aVYecTSiCzi35CX2mAfL/0TJypQAF1FcqX4+J++J2Ijn5EUEUfctaltRwnM\n+5Nf3dxi6DTZmbz81yI6jgqF905WMVcY0VJPLqouhd/kSl3gGDXDs2TVwjpyoCyF\nu8EdghqwFJ1Nz0CS14Qw5LAxwRvCKaEVOYkL2H5vYkQeflHj995ogQJDJ+zp8B0=\n=E4v6\n-----END PGP SIGNATURE-----\n", "payload": "tree 6fdd508ec80474066c619851c76eaa43d9237d4d\nparent 25a677ccef5f355184a835aa2ba39380724a77ef\nparent 2e6f2e885506ee46ea32622e33fe74d99774cf57\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1598237329 +0900\ncommitter GitHub <noreply@github.com> 1598237329 +0900\n\nRollup merge of #75844 - ehuss:publish-toolstate-httperror, r=Mark-Simulacrum\n\npublish-toolstate: show more context on HTTP error\n\nThe default display for HTTPError in Python does not include the request body. For GitHub API, the body includes more details about the error (like rate limiting). This could help diagnosing errors like this: https://github.com/rust-lang/rust/pull/75815#issuecomment-678798158\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d6de9616a16fa5c078836fb0b39173a1d0cc9d58", "html_url": "https://github.com/rust-lang/rust/commit/d6de9616a16fa5c078836fb0b39173a1d0cc9d58", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d6de9616a16fa5c078836fb0b39173a1d0cc9d58/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "25a677ccef5f355184a835aa2ba39380724a77ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/25a677ccef5f355184a835aa2ba39380724a77ef", "html_url": "https://github.com/rust-lang/rust/commit/25a677ccef5f355184a835aa2ba39380724a77ef"}, {"sha": "2e6f2e885506ee46ea32622e33fe74d99774cf57", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e6f2e885506ee46ea32622e33fe74d99774cf57", "html_url": "https://github.com/rust-lang/rust/commit/2e6f2e885506ee46ea32622e33fe74d99774cf57"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "51416c8ce63649789704368d414397f3f9596feb", "filename": "src/tools/publish_toolstate.py", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d6de9616a16fa5c078836fb0b39173a1d0cc9d58/src%2Ftools%2Fpublish_toolstate.py", "raw_url": "https://github.com/rust-lang/rust/raw/d6de9616a16fa5c078836fb0b39173a1d0cc9d58/src%2Ftools%2Fpublish_toolstate.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fpublish_toolstate.py?ref=d6de9616a16fa5c078836fb0b39173a1d0cc9d58", "patch": "@@ -275,7 +275,7 @@ def update_latest(\n         return message\n \n \n-if __name__ == '__main__':\n+def main():\n     repo = os.environ.get('TOOLSTATE_VALIDATE_MAINTAINERS_REPO')\n     if repo:\n         github_token = os.environ.get('TOOLSTATE_REPO_ACCESS_TOKEN')\n@@ -342,3 +342,11 @@ def update_latest(\n         }\n     ))\n     response.read()\n+\n+\n+if __name__ == '__main__':\n+    try:\n+        main()\n+    except urllib2.HTTPError as e:\n+        print(\"HTTPError: %s\\n%s\" % (e, e.read()))\n+        raise"}]}