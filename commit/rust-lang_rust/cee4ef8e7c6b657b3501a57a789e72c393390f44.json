{"sha": "cee4ef8e7c6b657b3501a57a789e72c393390f44", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlZTRlZjhlN2M2YjY1N2IzNTAxYTU3YTc4OWU3MmMzOTMzOTBmNDQ=", "commit": {"author": {"name": "Gibson Fahnestock", "email": "gibfahn@gmail.com", "date": "2017-03-05T20:10:39Z"}, "committer": {"name": "Gibson Fahnestock", "email": "gibfahn@gmail.com", "date": "2017-03-05T20:17:47Z"}, "message": "Add compile-fail test for cfg_target_thread_local\n\nTest copied from src/test/run-pass/thread-local-extern-static.rs.\n\nRefs: https://github.com/rust-lang/rust/issues/39059", "tree": {"sha": "ad9fdea0698772da9541e53fbd8032bde3c33456", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad9fdea0698772da9541e53fbd8032bde3c33456"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cee4ef8e7c6b657b3501a57a789e72c393390f44", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJYvHJrAAoJELAfu5KCHFh6FGsQAIV/SUL82LvIzxS4wTQ0UHPJ\nlQsZFhnAgoriYwOhe6ShtIKicprQbMKI2yrIjuG6tNAKrfnbjcGAMk9t/mFSqqm6\n4Kih9jpa7z7JF2E8xNgxwGjMx8gdtHML1JoiPZfUchtkl+thuGbGFqeMzQMvexzw\nDeVwNyrfzYhMZNZQPh03DKL9ZFPjkS61iOGaIgl+uPMg57eoNLqL2NUqNOIJI63C\nbuW2TLu+Jb1K9CYZVq/rehfeZlL4JRKJm0ockc5OuX/Y8YeDc/Zv2GJEPZ6ITt9o\nvMh8fbJIhOtQGZIE7Ir2D3kQ5nXPq13O2V/CFnI8hbjh/86ehV+W9VWbhlCtqvi2\nNVgCEOrG40etynG9N26937PKjUCfhs+0dHjclr5Yc//LTPQ6KoyVNKiR3k8+2BBK\nuNza1dZvMn/HzNkN5F0e777xfOzU+caJ9/FjBHGR2V2C5XdvvzddFZW82ade1RAo\ntEnDy29Dpm8eUfsf5V5Hz3AS53yRAwCLRvA1G+2Dbw7f7cTW6i4L6qh6Toheoy2T\n3HclJ7CqHaaxNrd+cEvyZPPH4Fs6k+0fKT3FIHaO9hM9Ts60OaYcb3wHVIMV7boW\nUPESqdxqvkehAA9CpBridYN7ZhogGzJR4OvufCWhq2ilNJS+9Lw+CweinrJxd56Q\nLyUvStzShRa0/iah3I8u\n=fCWy\n-----END PGP SIGNATURE-----", "payload": "tree ad9fdea0698772da9541e53fbd8032bde3c33456\nparent ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26\nauthor Gibson Fahnestock <gibfahn@gmail.com> 1488744639 +0000\ncommitter Gibson Fahnestock <gibfahn@gmail.com> 1488745067 +0000\n\nAdd compile-fail test for cfg_target_thread_local\n\nTest copied from src/test/run-pass/thread-local-extern-static.rs.\n\nRefs: https://github.com/rust-lang/rust/issues/39059\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cee4ef8e7c6b657b3501a57a789e72c393390f44", "html_url": "https://github.com/rust-lang/rust/commit/cee4ef8e7c6b657b3501a57a789e72c393390f44", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cee4ef8e7c6b657b3501a57a789e72c393390f44/comments", "author": {"login": "gibfahn", "id": 15943089, "node_id": "MDQ6VXNlcjE1OTQzMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/15943089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibfahn", "html_url": "https://github.com/gibfahn", "followers_url": "https://api.github.com/users/gibfahn/followers", "following_url": "https://api.github.com/users/gibfahn/following{/other_user}", "gists_url": "https://api.github.com/users/gibfahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibfahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibfahn/subscriptions", "organizations_url": "https://api.github.com/users/gibfahn/orgs", "repos_url": "https://api.github.com/users/gibfahn/repos", "events_url": "https://api.github.com/users/gibfahn/events{/privacy}", "received_events_url": "https://api.github.com/users/gibfahn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gibfahn", "id": 15943089, "node_id": "MDQ6VXNlcjE1OTQzMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/15943089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibfahn", "html_url": "https://github.com/gibfahn", "followers_url": "https://api.github.com/users/gibfahn/followers", "following_url": "https://api.github.com/users/gibfahn/following{/other_user}", "gists_url": "https://api.github.com/users/gibfahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibfahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibfahn/subscriptions", "organizations_url": "https://api.github.com/users/gibfahn/orgs", "repos_url": "https://api.github.com/users/gibfahn/repos", "events_url": "https://api.github.com/users/gibfahn/events{/privacy}", "received_events_url": "https://api.github.com/users/gibfahn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "html_url": "https://github.com/rust-lang/rust/commit/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "d1971a5e1aea40403f0a486d23d25285de263685", "filename": "src/test/compile-fail/auxiliary/cfg-target-thread-local.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fcfg-target-thread-local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fcfg-target-thread-local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fauxiliary%2Fcfg-target-thread-local.rs?ref=cee4ef8e7c6b657b3501a57a789e72c393390f44", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![feature(thread_local)]\n+#![feature(cfg_target_thread_local)]\n+#![crate_type = \"lib\"]\n+\n+#[no_mangle]\n+#[cfg_attr(target_thread_local, thread_local)]\n+pub static FOO: u32 = 3;"}, {"sha": "985bd8320e05938d9449dc6b75b970d909ab16e4", "filename": "src/test/compile-fail/feature-gate-cfg-target-thread-local.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftest%2Fcompile-fail%2Ffeature-gate-cfg-target-thread-local.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftest%2Fcompile-fail%2Ffeature-gate-cfg-target-thread-local.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-cfg-target-thread-local.rs?ref=cee4ef8e7c6b657b3501a57a789e72c393390f44", "patch": "@@ -0,0 +1,27 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// ignore-windows\n+// aux-build:cfg-target-thread-local.rs\n+\n+#![feature(thread_local)]\n+\n+extern crate cfg_target_thread_local;\n+\n+extern {\n+    #[cfg_attr(target_thread_local, thread_local)]\n+    //~^ `cfg(target_thread_local)` is experimental and subject to change (see issue #29594)\n+\n+    static FOO: u32;\n+}\n+\n+fn main() {\n+    assert_eq!(FOO, 3);\n+}"}, {"sha": "0206fcb5848d42cdcb9a9728946253c1ce473a3d", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cee4ef8e7c6b657b3501a57a789e72c393390f44/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=cee4ef8e7c6b657b3501a57a789e72c393390f44", "patch": "@@ -167,7 +167,6 @@ pub fn check(path: &Path, bad: &mut bool) {\n \n     // FIXME get this whitelist empty.\n     let whitelist = vec![\n-        \"cfg_target_thread_local\",\n     ];\n \n     // Only check the number of lang features."}]}