{"sha": "076a5cdc357a3a9e03850a745bee0b3f0db3d54f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA3NmE1Y2RjMzU3YTNhOWUwMzg1MGE3NDViZWUwYjNmMGRiM2Q1NGY=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-06-24T21:15:37Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-07-07T07:32:36Z"}, "message": "format a bit", "tree": {"sha": "cf6586f7d7aa2ce6f429fb1b18d4688678ff983e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf6586f7d7aa2ce6f429fb1b18d4688678ff983e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/076a5cdc357a3a9e03850a745bee0b3f0db3d54f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/076a5cdc357a3a9e03850a745bee0b3f0db3d54f", "html_url": "https://github.com/rust-lang/rust/commit/076a5cdc357a3a9e03850a745bee0b3f0db3d54f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/076a5cdc357a3a9e03850a745bee0b3f0db3d54f/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5b30211c8fe3acb93be9a748004ee835adaa6e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5b30211c8fe3acb93be9a748004ee835adaa6e4", "html_url": "https://github.com/rust-lang/rust/commit/f5b30211c8fe3acb93be9a748004ee835adaa6e4"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "cd7255888118cd9747f6693a94eeb270241694d6", "filename": "src/librustc_codegen_llvm/metadata.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/076a5cdc357a3a9e03850a745bee0b3f0db3d54f/src%2Flibrustc_codegen_llvm%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/076a5cdc357a3a9e03850a745bee0b3f0db3d54f/src%2Flibrustc_codegen_llvm%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fmetadata.rs?ref=076a5cdc357a3a9e03850a745bee0b3f0db3d54f", "patch": "@@ -69,11 +69,13 @@ fn search_meta_section<'a>(of: &'a ObjectFile,\n             let mut name_buf = None;\n             let name_len = llvm::LLVMRustGetSectionName(si.llsi, &mut name_buf);\n             let name = name_buf.map_or(\n-                \"\".to_string(),\n+                String::new(), // We got a NULL ptr, ignore `name_len`.\n                 |buf| String::from_utf8(\n                     slice::from_raw_parts(buf.as_ptr() as *const u8,\n                                           name_len as usize)\n-                    .to_vec()).unwrap());\n+                    .to_vec()\n+                ).unwrap()\n+            );\n             debug!(\"get_metadata_section: name {}\", name);\n             if read_metadata_section_name(target) == name {\n                 let cbuf = llvm::LLVMGetSectionContents(si.llsi);"}]}