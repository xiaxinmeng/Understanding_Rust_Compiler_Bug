{"sha": "c7ca540da279406e055f71f58feb6427314322ab", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3Y2E1NDBkYTI3OTQwNmUwNTVmNzFmNThmZWI2NDI3MzE0MzIyYWI=", "commit": {"author": {"name": "Ashley Mannix", "email": "kodraus@hey.com", "date": "2021-01-18T11:53:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-18T11:53:24Z"}, "message": "Rollup merge of #81071 - osa1:fix_81006, r=estebank\n\nrustc_parse_format: Fix character indices in find_skips\n\nFixes #81006", "tree": {"sha": "72bf54cfcb129bad8e5c03a3c61216b75889c53e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72bf54cfcb129bad8e5c03a3c61216b75889c53e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7ca540da279406e055f71f58feb6427314322ab", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgBXa0CRBK7hj4Ov3rIwAAdHIIAFoUjo/DRIyFOwV9kZKYB8pa\nkdQLFb8wXWn6VsA3jKxgOAVKjXpZ0k05IftSUQFSYg8lXKmYEabo4gnKyJs4tjRq\nxntXcXbFlSrPpd+N0KdjT36odpjcu7VqHSCBrBViKQDeaUEdvFi3GfLRaHI/djEk\nA3KiN4738T4w2Ulq7tFKQBELEfSYD3m5w3fonItnX/JuhS6eaCpcCNknsuknQICU\ndrIAjU+NH06yjMzlfiYo8qWiP0FpwOfhORjHK/R03P5eKvrWeWHYZ1H9mOrQmcHa\nSOofBnXoVJHe5GVBhC5zoNSlbdKFbMOe96QcF6gyrn71/aPqka9yUwLk4t3xSDI=\n=HYo+\n-----END PGP SIGNATURE-----\n", "payload": "tree 72bf54cfcb129bad8e5c03a3c61216b75889c53e\nparent 090ab8c02e356f82337bbad4e2289766acc2c40b\nparent 9111e9dd01ac08b5a7e40ad0f348946816d6d140\nauthor Ashley Mannix <kodraus@hey.com> 1610970804 +1000\ncommitter GitHub <noreply@github.com> 1610970804 +1000\n\nRollup merge of #81071 - osa1:fix_81006, r=estebank\n\nrustc_parse_format: Fix character indices in find_skips\n\nFixes #81006\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7ca540da279406e055f71f58feb6427314322ab", "html_url": "https://github.com/rust-lang/rust/commit/c7ca540da279406e055f71f58feb6427314322ab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7ca540da279406e055f71f58feb6427314322ab/comments", "author": {"login": "KodrAus", "id": 6721458, "node_id": "MDQ6VXNlcjY3MjE0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6721458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KodrAus", "html_url": "https://github.com/KodrAus", "followers_url": "https://api.github.com/users/KodrAus/followers", "following_url": "https://api.github.com/users/KodrAus/following{/other_user}", "gists_url": "https://api.github.com/users/KodrAus/gists{/gist_id}", "starred_url": "https://api.github.com/users/KodrAus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KodrAus/subscriptions", "organizations_url": "https://api.github.com/users/KodrAus/orgs", "repos_url": "https://api.github.com/users/KodrAus/repos", "events_url": "https://api.github.com/users/KodrAus/events{/privacy}", "received_events_url": "https://api.github.com/users/KodrAus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "090ab8c02e356f82337bbad4e2289766acc2c40b", "url": "https://api.github.com/repos/rust-lang/rust/commits/090ab8c02e356f82337bbad4e2289766acc2c40b", "html_url": "https://github.com/rust-lang/rust/commit/090ab8c02e356f82337bbad4e2289766acc2c40b"}, {"sha": "9111e9dd01ac08b5a7e40ad0f348946816d6d140", "url": "https://api.github.com/repos/rust-lang/rust/commits/9111e9dd01ac08b5a7e40ad0f348946816d6d140", "html_url": "https://github.com/rust-lang/rust/commit/9111e9dd01ac08b5a7e40ad0f348946816d6d140"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "f150f7a41ae807d9bace8b7a464312eaa04fe85b", "filename": "compiler/rustc_parse_format/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c7ca540da279406e055f71f58feb6427314322ab/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7ca540da279406e055f71f58feb6427314322ab/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs?ref=c7ca540da279406e055f71f58feb6427314322ab", "patch": "@@ -736,7 +736,7 @@ fn find_skips_from_snippet(\n \n     fn find_skips(snippet: &str, is_raw: bool) -> Vec<usize> {\n         let mut eat_ws = false;\n-        let mut s = snippet.chars().enumerate().peekable();\n+        let mut s = snippet.char_indices().peekable();\n         let mut skips = vec![];\n         while let Some((pos, c)) = s.next() {\n             match (c, s.peek()) {"}, {"sha": "602eb59742879c90830ee3f4b59d9e0ec9270da9", "filename": "src/test/ui/macros/issue-81006.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c7ca540da279406e055f71f58feb6427314322ab/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7ca540da279406e055f71f58feb6427314322ab/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs?ref=c7ca540da279406e055f71f58feb6427314322ab", "patch": "@@ -0,0 +1,10 @@\n+// check-fail\n+\n+// First format below would cause a panic, second would generate error with incorrect span\n+\n+fn main() {\n+    let _ = format!(\"\u2192{}\u2192\\n\");\n+    //~^ ERROR 1 positional argument in format string, but no arguments were given\n+    let _ = format!(\"\u2192{} \\n\");\n+    //~^ ERROR 1 positional argument in format string, but no arguments were given\n+}"}, {"sha": "14a8cbe0155f96917d4677ddc9c1b68eebaf134a", "filename": "src/test/ui/macros/issue-81006.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c7ca540da279406e055f71f58feb6427314322ab/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c7ca540da279406e055f71f58feb6427314322ab/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr?ref=c7ca540da279406e055f71f58feb6427314322ab", "patch": "@@ -0,0 +1,14 @@\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/issue-81006.rs:6:23\n+   |\n+LL |     let _ = format!(\"\u2192{}\u2192\\n\");\n+   |                       ^^\n+\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/issue-81006.rs:8:23\n+   |\n+LL |     let _ = format!(\"\u2192{} \\n\");\n+   |                       ^^\n+\n+error: aborting due to 2 previous errors\n+"}]}