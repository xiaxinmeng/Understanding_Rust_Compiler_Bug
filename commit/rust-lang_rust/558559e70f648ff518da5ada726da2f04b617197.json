{"sha": "558559e70f648ff518da5ada726da2f04b617197", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1ODU1OWU3MGY2NDhmZjUxOGRhNWFkYTcyNmRhMmYwNGI2MTcxOTc=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-05-18T19:46:27Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-05-23T09:44:05Z"}, "message": "syntax: Remove an obsolete hack from literal comparisons", "tree": {"sha": "e339664c45198178427082e627a9873d320c7ee6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e339664c45198178427082e627a9873d320c7ee6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/558559e70f648ff518da5ada726da2f04b617197", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/558559e70f648ff518da5ada726da2f04b617197", "html_url": "https://github.com/rust-lang/rust/commit/558559e70f648ff518da5ada726da2f04b617197", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/558559e70f648ff518da5ada726da2f04b617197/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9450e7d142f53fc9daad87866cdc7af144013264", "url": "https://api.github.com/repos/rust-lang/rust/commits/9450e7d142f53fc9daad87866cdc7af144013264", "html_url": "https://github.com/rust-lang/rust/commit/9450e7d142f53fc9daad87866cdc7af144013264"}], "stats": {"total": 10, "additions": 1, "deletions": 9}, "files": [{"sha": "fbc27d1999d860a7625649c747aa1840f560689f", "filename": "src/libsyntax/parse/token.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/558559e70f648ff518da5ada726da2f04b617197/src%2Flibsyntax%2Fparse%2Ftoken.rs", "raw_url": "https://github.com/rust-lang/rust/raw/558559e70f648ff518da5ada726da2f04b617197/src%2Flibsyntax%2Fparse%2Ftoken.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Ftoken.rs?ref=558559e70f648ff518da5ada726da2f04b617197", "patch": "@@ -110,12 +110,6 @@ impl Lit {\n             _ => false,\n         }\n     }\n-\n-    // See comments in `Nonterminal::to_tokenstream` for why we care about\n-    // *probably* equal here rather than actual equality\n-    fn probably_equal_for_proc_macro(&self, other: &Lit) -> bool {\n-        mem::discriminant(self) == mem::discriminant(other)\n-    }\n }\n \n pub(crate) fn ident_can_begin_expr(ident: ast::Ident, is_raw: bool) -> bool {\n@@ -590,9 +584,7 @@ impl Token {\n                                                        a.name == kw::DollarCrate ||\n                                                        c.name == kw::DollarCrate),\n \n-            (&Literal(ref a, b), &Literal(ref c, d)) => {\n-                b == d && a.probably_equal_for_proc_macro(c)\n-            }\n+            (&Literal(a, b), &Literal(c, d)) => b == d && a == c,\n \n             (&Interpolated(_), &Interpolated(_)) => false,\n "}]}