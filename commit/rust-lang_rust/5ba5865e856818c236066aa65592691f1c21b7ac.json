{"sha": "5ba5865e856818c236066aa65592691f1c21b7ac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViYTU4NjVlODU2ODE4YzIzNjA2NmFhNjU1OTI2OTFmMWMyMWI3YWM=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-05-24T00:52:17Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-05-24T01:57:37Z"}, "message": "swap_ptr: rm equality check\n\nThis isn't needed semantically, and it's the wrong case to optimize for.", "tree": {"sha": "2efcd67c36e55fc1c9f8ea7e8aba1565c51fed95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2efcd67c36e55fc1c9f8ea7e8aba1565c51fed95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ba5865e856818c236066aa65592691f1c21b7ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ba5865e856818c236066aa65592691f1c21b7ac", "html_url": "https://github.com/rust-lang/rust/commit/5ba5865e856818c236066aa65592691f1c21b7ac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ba5865e856818c236066aa65592691f1c21b7ac/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e2b082adc84c22ea3b023f4f08d7b21857fc399", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e2b082adc84c22ea3b023f4f08d7b21857fc399", "html_url": "https://github.com/rust-lang/rust/commit/6e2b082adc84c22ea3b023f4f08d7b21857fc399"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "1a822ca62cbadad5c9ebdf605fdd9f42207618eb", "filename": "src/libstd/ptr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5ba5865e856818c236066aa65592691f1c21b7ac/src%2Flibstd%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ba5865e856818c236066aa65592691f1c21b7ac/src%2Flibstd%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fptr.rs?ref=5ba5865e856818c236066aa65592691f1c21b7ac", "patch": "@@ -103,6 +103,7 @@ pub unsafe fn copy_memory<T>(dst: *mut T, src: *const T, count: uint) {\n     let n = count * sys::size_of::<T>();\n     memmove32(dst as *mut u8, src as *u8, n as u32);\n }\n+\n #[inline(always)]\n #[cfg(target_word_size = \"64\")]\n pub unsafe fn copy_memory<T>(dst: *mut T, src: *const T, count: uint) {"}, {"sha": "53de853ad469c256183c424936b4d85951fb0e05", "filename": "src/libstd/util.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5ba5865e856818c236066aa65592691f1c21b7ac/src%2Flibstd%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ba5865e856818c236066aa65592691f1c21b7ac/src%2Flibstd%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Futil.rs?ref=5ba5865e856818c236066aa65592691f1c21b7ac", "patch": "@@ -61,8 +61,6 @@ pub fn swap<T>(x: &mut T, y: &mut T) {\n  */\n #[inline]\n pub unsafe fn swap_ptr<T>(x: *mut T, y: *mut T) {\n-    if x == y { return }\n-\n     // Give ourselves some scratch space to work with\n     let mut tmp: T = intrinsics::uninit();\n     let t = ptr::to_mut_unsafe_ptr(&mut tmp);\n@@ -72,7 +70,7 @@ pub unsafe fn swap_ptr<T>(x: *mut T, y: *mut T) {\n     ptr::copy_memory(x, y, 1);\n     ptr::copy_memory(y, t, 1);\n \n-    // y and t now point to the same thing, but we need to completely forget t\n+    // y and t now point to the same thing, but we need to completely forget `tmp`\n     // because it's no longer relevant.\n     cast::forget(tmp);\n }"}]}