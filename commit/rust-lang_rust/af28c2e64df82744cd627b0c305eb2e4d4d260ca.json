{"sha": "af28c2e64df82744cd627b0c305eb2e4d4d260ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmMjhjMmU2NGRmODI3NDRjZDYyN2IwYzMwNWViMmU0ZDRkMjYwY2E=", "commit": {"author": {"name": "Jeffrey Griffin", "email": "git@geogriffin.com", "date": "2021-02-05T16:49:59Z"}, "committer": {"name": "Jeffrey Griffin", "email": "git@geogriffin.com", "date": "2021-02-05T16:49:59Z"}, "message": "fix ui tests referencing pointer-to-integer cast error message", "tree": {"sha": "15881c6c62a8353af258ac79be998d4e65427f1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/15881c6c62a8353af258ac79be998d4e65427f1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af28c2e64df82744cd627b0c305eb2e4d4d260ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af28c2e64df82744cd627b0c305eb2e4d4d260ca", "html_url": "https://github.com/rust-lang/rust/commit/af28c2e64df82744cd627b0c305eb2e4d4d260ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af28c2e64df82744cd627b0c305eb2e4d4d260ca/comments", "author": null, "committer": null, "parents": [{"sha": "ff315e34e8cfb9766b10f7740c8720e56f6d3475", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff315e34e8cfb9766b10f7740c8720e56f6d3475", "html_url": "https://github.com/rust-lang/rust/commit/ff315e34e8cfb9766b10f7740c8720e56f6d3475"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "df8b33a0898f659deab953e1a3b9e7614a8a5dcd", "filename": "src/test/ui/consts/const-eval/const_raw_ptr_ops2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_raw_ptr_ops2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_raw_ptr_ops2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fconst_raw_ptr_ops2.stderr?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -4,7 +4,7 @@ error: any use of this value will cause an error\n LL | const Y2: usize = unsafe { &1 as *const i32 as usize + 1 };\n    | ---------------------------^^^^^^^^^^^^^^^^^^^^^^^^^-------\n    |                            |\n-   |                            \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |                            cannot cast pointer to integer because it was not created by cast from integer\n    |\n    = note: `#[deny(const_err)]` on by default\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!"}, {"sha": "d571eb549630f948ffb25569946f6463603bc160", "filename": "src/test/ui/consts/issue-51559.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-51559.stderr?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -4,7 +4,7 @@ error: any use of this value will cause an error\n LL | pub const FOO: usize = unsafe { BAR as usize };\n    | --------------------------------^^^^^^^^^^^^---\n    |                                 |\n-   |                                 \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |                                 cannot cast pointer to integer because it was not created by cast from integer\n    |\n    = note: `#[deny(const_err)]` on by default\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!"}, {"sha": "29998950552cd502c761a8b287a533c39ff4522a", "filename": "src/test/ui/consts/issue-52432.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fissue-52432.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fissue-52432.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-52432.stderr?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -20,7 +20,7 @@ error[E0080]: evaluation of constant value failed\n   --> $DIR/issue-52432.rs:7:10\n    |\n LL |     [(); &(static || {}) as *const _ as usize];\n-   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ cannot cast pointer to integer because it was not created by cast from integer\n \n error: aborting due to 4 previous errors\n "}, {"sha": "aae6d837204e3a2e596bb5a2774f46944c39640e", "filename": "src/test/ui/consts/miri_unleashed/ptr_arith.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.rs?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -15,7 +15,7 @@ static INT_PTR_ARITH: () = unsafe {\n     let x: usize = std::mem::transmute(&0);\n     let _v = x + 0;\n     //~^ ERROR could not evaluate static initializer\n-    //~| NOTE pointer-to-integer cast\n+    //~| NOTE cannot cast pointer to integer\n };\n \n fn main() {}"}, {"sha": "8ac4aa87f642a41df642fdf73ee2538901d77380", "filename": "src/test/ui/consts/miri_unleashed/ptr_arith.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmiri_unleashed%2Fptr_arith.stderr?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -8,7 +8,7 @@ error[E0080]: could not evaluate static initializer\n   --> $DIR/ptr_arith.rs:16:14\n    |\n LL |     let _v = x + 0;\n-   |              ^^^^^ \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |              ^^^^^ cannot cast pointer to integer because it was not created by cast from integer\n \n warning: skipping const checks\n    |"}, {"sha": "0fbe55f972ee543f24cc433f7e86436b67744610", "filename": "src/test/ui/consts/ptr_comparisons.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.rs", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.rs?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -71,14 +71,14 @@ const _: *const u8 =\n \n const _: usize = unsafe { std::mem::transmute::<*const usize, usize>(FOO) + 4 };\n //~^ ERROR any use of this value will cause an error\n-//~| NOTE \"pointer-to-integer cast\" needs an rfc\n+//~| NOTE cannot cast pointer to integer\n //~| NOTE\n //~| WARN this was previously accepted by the compiler but is being phased out\n //~| NOTE\n \n const _: usize = unsafe { *std::mem::transmute::<&&usize, &usize>(&FOO) + 4 };\n //~^ ERROR any use of this value will cause an error\n-//~| NOTE \"pointer-to-integer cast\" needs an rfc\n+//~| NOTE cannot cast pointer to integer\n //~| NOTE\n //~| WARN this was previously accepted by the compiler but is being phased out\n //~| NOTE"}, {"sha": "9ec009c55c443e4d1984e280342652c435254a59", "filename": "src/test/ui/consts/ptr_comparisons.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/af28c2e64df82744cd627b0c305eb2e4d4d260ca/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fptr_comparisons.stderr?ref=af28c2e64df82744cd627b0c305eb2e4d4d260ca", "patch": "@@ -36,7 +36,7 @@ error: any use of this value will cause an error\n LL | const _: usize = unsafe { std::mem::transmute::<*const usize, usize>(FOO) + 4 };\n    | --------------------------^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^---\n    |                           |\n-   |                           \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |                           cannot cast pointer to integer because it was not created by cast from integer\n    |\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #71800 <https://github.com/rust-lang/rust/issues/71800>\n@@ -47,7 +47,7 @@ error: any use of this value will cause an error\n LL | const _: usize = unsafe { *std::mem::transmute::<&&usize, &usize>(&FOO) + 4 };\n    | --------------------------^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^---\n    |                           |\n-   |                           \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n+   |                           cannot cast pointer to integer because it was not created by cast from integer\n    |\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #71800 <https://github.com/rust-lang/rust/issues/71800>"}]}