{"sha": "022146d2c3c4e1baa65f19c45205152af1a8b997", "node_id": "C_kwDOAAsO6NoAKDAyMjE0NmQyYzNjNGUxYmFhNjVmMTljNDUyMDUxNTJhZjFhOGI5OTc", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-10-12T14:23:05Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-10-28T14:41:53Z"}, "message": "Rename if_then_panic to manual_assert", "tree": {"sha": "41e23df9cb6204a0397bcb7bcc72d0693307035f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41e23df9cb6204a0397bcb7bcc72d0693307035f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/022146d2c3c4e1baa65f19c45205152af1a8b997", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/022146d2c3c4e1baa65f19c45205152af1a8b997", "html_url": "https://github.com/rust-lang/rust/commit/022146d2c3c4e1baa65f19c45205152af1a8b997", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/022146d2c3c4e1baa65f19c45205152af1a8b997/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8fcfd7d64f102402819aba3ac91954a7a6888cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8fcfd7d64f102402819aba3ac91954a7a6888cc", "html_url": "https://github.com/rust-lang/rust/commit/d8fcfd7d64f102402819aba3ac91954a7a6888cc"}], "stats": {"total": 42, "additions": 21, "deletions": 21}, "files": [{"sha": "c78aa5908de903df91cb6a55b6575cbff50acd79", "filename": "CHANGELOG.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -34,7 +34,7 @@ Current beta, release 2021-12-02\n   [#7610](https://github.com/rust-lang/rust-clippy/pull/7610)\n * [`same_name_method`]\n   [#7653](https://github.com/rust-lang/rust-clippy/pull/7653)\n-* [`if_then_panic`] [#7669](https://github.com/rust-lang/rust-clippy/pull/7669)\n+* [`manual_assert`] [#7669](https://github.com/rust-lang/rust-clippy/pull/7669)\n * [`non_send_fields_in_send_ty`]\n   [#7709](https://github.com/rust-lang/rust-clippy/pull/7709)\n * [`equatable_if_let`]\n@@ -139,7 +139,7 @@ Current beta, release 2021-12-02\n   `rsplitn` is used [#7663](https://github.com/rust-lang/rust-clippy/pull/7663)\n * [`while_let_on_iterator`]: Produce correct suggestion when using `&mut`\n   [#7690](https://github.com/rust-lang/rust-clippy/pull/7690)\n-* [`if_then_panic`]: No better handles complex conditions\n+* [`manual_assert`]: No better handles complex conditions\n   [#7741](https://github.com/rust-lang/rust-clippy/pull/7741)\n * Correctly handle signs in exponents in numeric literals lints\n   [#7747](https://github.com/rust-lang/rust-clippy/pull/7747)\n@@ -2895,7 +2895,6 @@ Released 2018-09-13\n [`if_let_redundant_pattern_matching`]: https://rust-lang.github.io/rust-clippy/master/index.html#if_let_redundant_pattern_matching\n [`if_not_else`]: https://rust-lang.github.io/rust-clippy/master/index.html#if_not_else\n [`if_same_then_else`]: https://rust-lang.github.io/rust-clippy/master/index.html#if_same_then_else\n-[`if_then_panic`]: https://rust-lang.github.io/rust-clippy/master/index.html#if_then_panic\n [`if_then_some_else_none`]: https://rust-lang.github.io/rust-clippy/master/index.html#if_then_some_else_none\n [`ifs_same_cond`]: https://rust-lang.github.io/rust-clippy/master/index.html#ifs_same_cond\n [`implicit_clone`]: https://rust-lang.github.io/rust-clippy/master/index.html#implicit_clone\n@@ -2953,6 +2952,7 @@ Released 2018-09-13\n [`lossy_float_literal`]: https://rust-lang.github.io/rust-clippy/master/index.html#lossy_float_literal\n [`macro_use_imports`]: https://rust-lang.github.io/rust-clippy/master/index.html#macro_use_imports\n [`main_recursion`]: https://rust-lang.github.io/rust-clippy/master/index.html#main_recursion\n+[`manual_assert`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_assert\n [`manual_async_fn`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_async_fn\n [`manual_filter_map`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_filter_map\n [`manual_find_map`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_find_map"}, {"sha": "9b2107915746378bf496dcd3e882606b3cbd3ce4", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -159,7 +159,6 @@ store.register_lints(&[\n     identity_op::IDENTITY_OP,\n     if_let_mutex::IF_LET_MUTEX,\n     if_not_else::IF_NOT_ELSE,\n-    if_then_panic::IF_THEN_PANIC,\n     if_then_some_else_none::IF_THEN_SOME_ELSE_NONE,\n     implicit_hasher::IMPLICIT_HASHER,\n     implicit_return::IMPLICIT_RETURN,\n@@ -216,6 +215,7 @@ store.register_lints(&[\n     loops::WHILE_LET_ON_ITERATOR,\n     macro_use::MACRO_USE_IMPORTS,\n     main_recursion::MAIN_RECURSION,\n+    manual_assert::MANUAL_ASSERT,\n     manual_async_fn::MANUAL_ASYNC_FN,\n     manual_map::MANUAL_MAP,\n     manual_non_exhaustive::MANUAL_NON_EXHAUSTIVE,"}, {"sha": "63ab7f1ca6f67d3367b4006d95ebca532d328ede", "filename": "clippy_lints/src/lib.register_pedantic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.register_pedantic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_pedantic.rs?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -34,7 +34,6 @@ store.register_group(true, \"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n     LintId::of(functions::MUST_USE_CANDIDATE),\n     LintId::of(functions::TOO_MANY_LINES),\n     LintId::of(if_not_else::IF_NOT_ELSE),\n-    LintId::of(if_then_panic::IF_THEN_PANIC),\n     LintId::of(implicit_hasher::IMPLICIT_HASHER),\n     LintId::of(implicit_saturating_sub::IMPLICIT_SATURATING_SUB),\n     LintId::of(inconsistent_struct_constructor::INCONSISTENT_STRUCT_CONSTRUCTOR),\n@@ -49,6 +48,7 @@ store.register_group(true, \"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n     LintId::of(loops::EXPLICIT_INTO_ITER_LOOP),\n     LintId::of(loops::EXPLICIT_ITER_LOOP),\n     LintId::of(macro_use::MACRO_USE_IMPORTS),\n+    LintId::of(manual_assert::MANUAL_ASSERT),\n     LintId::of(manual_ok_or::MANUAL_OK_OR),\n     LintId::of(match_on_vec_items::MATCH_ON_VEC_ITEMS),\n     LintId::of(matches::MATCH_BOOL),"}, {"sha": "fd5f164e7a1bd2987edf47f9993038674c52b347", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -228,7 +228,6 @@ mod get_last_with_len;\n mod identity_op;\n mod if_let_mutex;\n mod if_not_else;\n-mod if_then_panic;\n mod if_then_some_else_none;\n mod implicit_hasher;\n mod implicit_return;\n@@ -255,6 +254,7 @@ mod literal_representation;\n mod loops;\n mod macro_use;\n mod main_recursion;\n+mod manual_assert;\n mod manual_async_fn;\n mod manual_map;\n mod manual_non_exhaustive;\n@@ -772,7 +772,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     store.register_late_pass(move || Box::new(self_named_constructors::SelfNamedConstructors));\n     store.register_late_pass(move || Box::new(feature_name::FeatureName));\n     store.register_late_pass(move || Box::new(iter_not_returning_iterator::IterNotReturningIterator));\n-    store.register_late_pass(move || Box::new(if_then_panic::IfThenPanic));\n+    store.register_late_pass(move || Box::new(manual_assert::ManualAssert));\n     let enable_raw_pointer_heuristic_for_send = conf.enable_raw_pointer_heuristic_for_send;\n     store.register_late_pass(move || Box::new(non_send_fields_in_send_ty::NonSendFieldInSendTy::new(enable_raw_pointer_heuristic_for_send)));\n     store.register_late_pass(move || Box::new(undocumented_unsafe_blocks::UndocumentedUnsafeBlocks::default()));"}, {"sha": "c639be1bccba4645fd9f088713d8d66044583319", "filename": "clippy_lints/src/manual_assert.rs", "status": "renamed", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Fmanual_assert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/clippy_lints%2Fsrc%2Fmanual_assert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmanual_assert.rs?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -26,14 +26,14 @@ declare_clippy_lint! {\n     /// let sad_people: Vec<&str> = vec![];\n     /// assert!(sad_people.is_empty(), \"there are sad people: {:?}\", sad_people);\n     /// ```\n-    pub IF_THEN_PANIC,\n+    pub MANUAL_ASSERT,\n     pedantic,\n     \"`panic!` and only a `panic!` in `if`-then statement\"\n }\n \n-declare_lint_pass!(IfThenPanic => [IF_THEN_PANIC]);\n+declare_lint_pass!(ManualAssert => [MANUAL_ASSERT]);\n \n-impl LateLintPass<'_> for IfThenPanic {\n+impl LateLintPass<'_> for ManualAssert {\n     fn check_expr(&mut self, cx: &LateContext<'_>, expr: &Expr<'_>) {\n         if_chain! {\n             if let Expr {\n@@ -86,7 +86,7 @@ impl LateLintPass<'_> for IfThenPanic {\n \n                 span_lint_and_sugg(\n                     cx,\n-                    IF_THEN_PANIC,\n+                    MANUAL_ASSERT,\n                     expr.span,\n                     \"only a `panic!` in `if`-then statement\",\n                     \"try\",", "previous_filename": "clippy_lints/src/if_then_panic.rs"}, {"sha": "9d461cff68d8806a78a1ef47536331b6abce3a52", "filename": "tests/ui/manual_assert.fixed", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.fixed?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-#![warn(clippy::if_then_panic)]\n+#![warn(clippy::manual_assert)]\n \n fn main() {\n     let a = vec![1, 2, 3];", "previous_filename": "tests/ui/if_then_panic.fixed"}, {"sha": "6aadff887ca8dadfd8a55ac81009f90cae16e87d", "filename": "tests/ui/manual_assert.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.rs?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -1,5 +1,5 @@\n // run-rustfix\n-#![warn(clippy::if_then_panic)]\n+#![warn(clippy::manual_assert)]\n \n fn main() {\n     let a = vec![1, 2, 3];", "previous_filename": "tests/ui/if_then_panic.rs"}, {"sha": "ab2786247b1debc3274f8afa80c3f6baf3f3ff33", "filename": "tests/ui/manual_assert.stderr", "status": "renamed", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/022146d2c3c4e1baa65f19c45205152af1a8b997/tests%2Fui%2Fmanual_assert.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.stderr?ref=022146d2c3c4e1baa65f19c45205152af1a8b997", "patch": "@@ -1,55 +1,55 @@\n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:19:5\n+  --> $DIR/manual_assert.rs:19:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qaqaq{:?}\", a);\n LL | |     }\n    | |_____^ help: try: `assert!(a.is_empty(), \"qaqaq{:?}\", a);`\n    |\n-   = note: `-D clippy::if-then-panic` implied by `-D warnings`\n+   = note: `-D clippy::manual-assert` implied by `-D warnings`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:22:5\n+  --> $DIR/manual_assert.rs:22:5\n    |\n LL | /     if !a.is_empty() {\n LL | |         panic!(\"qwqwq\");\n LL | |     }\n    | |_____^ help: try: `assert!(a.is_empty(), \"qwqwq\");`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:39:5\n+  --> $DIR/manual_assert.rs:39:5\n    |\n LL | /     if b.is_empty() {\n LL | |         panic!(\"panic1\");\n LL | |     }\n    | |_____^ help: try: `assert!(!b.is_empty(), \"panic1\");`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:42:5\n+  --> $DIR/manual_assert.rs:42:5\n    |\n LL | /     if b.is_empty() && a.is_empty() {\n LL | |         panic!(\"panic2\");\n LL | |     }\n    | |_____^ help: try: `assert!(!(b.is_empty() && a.is_empty()), \"panic2\");`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:45:5\n+  --> $DIR/manual_assert.rs:45:5\n    |\n LL | /     if a.is_empty() && !b.is_empty() {\n LL | |         panic!(\"panic3\");\n LL | |     }\n    | |_____^ help: try: `assert!(!(a.is_empty() && !b.is_empty()), \"panic3\");`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:48:5\n+  --> $DIR/manual_assert.rs:48:5\n    |\n LL | /     if b.is_empty() || a.is_empty() {\n LL | |         panic!(\"panic4\");\n LL | |     }\n    | |_____^ help: try: `assert!(!(b.is_empty() || a.is_empty()), \"panic4\");`\n \n error: only a `panic!` in `if`-then statement\n-  --> $DIR/if_then_panic.rs:51:5\n+  --> $DIR/manual_assert.rs:51:5\n    |\n LL | /     if a.is_empty() || !b.is_empty() {\n LL | |         panic!(\"panic5\");", "previous_filename": "tests/ui/if_then_panic.stderr"}]}