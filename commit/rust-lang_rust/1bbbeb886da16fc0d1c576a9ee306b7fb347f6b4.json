{"sha": "1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiYmJlYjg4NmRhMTZmYzBkMWM1NzZhOWVlMzA2YjdmYjM0N2Y2YjQ=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-06-03T06:29:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-03T06:29:33Z"}, "message": "Merge #4703\n\n4703: Start documenting review process r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "3658927faba9ecfa43a85c0b67f1819113c1ffa5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3658927faba9ecfa43a85c0b67f1819113c1ffa5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe10NNCRBK7hj4Ov3rIwAAdHIIAEGpmjLiCTiHKWKQLivYA5gc\nlAGcxEbFZyQaJYoYeFO5eavaUueeFomdl157XyXIAjIjh3Ab7pvOUYk/yF5103lb\nqMu4zjy5JEPUuDb3cLHlYRhRwys2x0DA/PhifENjZQUYMFBOZPJUF+uCMkXzJ5jJ\nTEjUF+1hw+sjQkXEJPyumIQnwKTzFaL3kDL5oIPb+Ulf91z61SU1a3Dp0vM4LIXH\nFN3qBw/wGLcEbe50XI+xmuAh8rA/LmiIS8df12yLqMgmZxv+FRP8qdxp3oCFbNaj\n46UwEj/Msf/gE8Ke4z1t2g31IK71RpfqskJfy8xtysSHQGY4KVtraT0uchs3yao=\n=ecni\n-----END PGP SIGNATURE-----\n", "payload": "tree 3658927faba9ecfa43a85c0b67f1819113c1ffa5\nparent 6d38351db420bd7d069d17783f83b8936ffe361b\nparent 994006585be6850b250b21aac76a58f1324cad5d\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1591165773 +0000\ncommitter GitHub <noreply@github.com> 1591165773 +0000\n\nMerge #4703\n\n4703: Start documenting review process r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4", "html_url": "https://github.com/rust-lang/rust/commit/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d38351db420bd7d069d17783f83b8936ffe361b", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d38351db420bd7d069d17783f83b8936ffe361b", "html_url": "https://github.com/rust-lang/rust/commit/6d38351db420bd7d069d17783f83b8936ffe361b"}, {"sha": "994006585be6850b250b21aac76a58f1324cad5d", "url": "https://api.github.com/repos/rust-lang/rust/commits/994006585be6850b250b21aac76a58f1324cad5d", "html_url": "https://github.com/rust-lang/rust/commit/994006585be6850b250b21aac76a58f1324cad5d"}], "stats": {"total": 105, "additions": 104, "deletions": 1}, "files": [{"sha": "1de5a2aab1d75d6c4c3d5158d842ed11271d9281", "filename": "docs/dev/README.md", "status": "modified", "additions": 104, "deletions": 1, "changes": 105, "blob_url": "https://github.com/rust-lang/rust/blob/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=1bbbeb886da16fc0d1c576a9ee306b7fb347f6b4", "patch": "@@ -30,7 +30,7 @@ https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0\n \n * [good-first-issue](https://github.com/rust-analyzer/rust-analyzer/labels/good%20first%20issue)\n   are good issues to get into the project.\n-* [E-mentor](https://github.com/rust-analyzer/rust-analyzer/issues?q=is%3Aopen+is%3Aissue+label%3AE-mentor)\n+* [E-has-instructions](https://github.com/rust-analyzer/rust-analyzer/issues?q=is%3Aopen+is%3Aissue+label%3AE-has-instructions)\n   issues have links to the code in question and tests.\n * [E-easy](https://github.com/rust-analyzer/rust-analyzer/issues?q=is%3Aopen+is%3Aissue+label%3AE-easy),\n   [E-medium](https://github.com/rust-analyzer/rust-analyzer/issues?q=is%3Aopen+is%3Aissue+label%3AE-medium),\n@@ -117,6 +117,109 @@ Additionally, I use `cargo run --release -p rust-analyzer -- analysis-stats\n path/to/some/rust/crate` to run a batch analysis. This is primarily useful for\n performance optimizations, or for bug minimization.\n \n+# Code Style & Review Process\n+\n+Our approach to \"clean code\" is two fold:\n+\n+* We generally don't block PRs on style changes.\n+* At the same time, all code in rust-analyzer is constantly refactored.\n+\n+It is explicitly OK for reviewer to flag only some nits in the PR, and than send a follow up cleanup PR for things which are easier to explain by example, cc-ing the original author.\n+Sending small cleanup PRs (like rename a single local variable) is encouraged.\n+\n+## Scale of Changes\n+\n+Everyone knows that it's better to send small & focused pull requests.\n+The problem is, sometimes you *have* to, eg, rewrite the whole compiler, and that just doesn't fit into a set of isolated PRs.\n+\n+The main thing too keep an eye on is the boundaries between various components.\n+There are three kinds of changes:\n+\n+1. Internals of a single component are changed.\n+   Specifically, you don't change any `pub` items.\n+   A good example here would be an addition of a new assist.\n+\n+2. API of a component is expanded.\n+   Specifically, you add a new `pub` function which wasn't there before.\n+   A good example here would be expansion of assist API, for example, to implement lazy assists or assists groups.\n+\n+3. A new dependency between components is introduced.\n+   Specifically, you add a `pub use` reexport from another crate or you add a new line to `[dependencies]` section of `Cargo.toml`.\n+   A good example here would be adding reference search capability to the assists crates.\n+\n+For the first group, the change is generally merged as long as:\n+\n+* it works for the happy case,\n+* it has tests,\n+* it doesn't panic for unhappy case.\n+\n+For the second group, the change would be subjected to quite a bit of scrutiny and iteration.\n+The new API needs to be right (or at least easy to change later).\n+The actual implementation doesn't matter that much.\n+It's very important to minimize the amount of changed lines of code for changes of the second kind.\n+Often, you start doing change of the first kind, only to realise that you need to elevate to a change of the second kind.\n+In this case, we'll probably ask you to split API changes into a separate PR.\n+\n+Changes of the third group should be pretty rare, so we don't specify any specific process for them.\n+That said, adding an innocent-looking `pub use` is a very simple way to break encapsulation, keep an eye on it!\n+\n+Note: if you enjoyed this abstract hand-waving about boundaries, you might appreciate\n+https://www.tedinski.com/2018/02/06/system-boundaries.html\n+\n+## Order of Imports\n+\n+We separate import groups with blank lines\n+\n+```\n+mod x;\n+mod y;\n+\n+use std::{ ... }\n+\n+use crate_foo::{ ... }\n+use crate_bar::{ ... }\n+\n+use crate::{}\n+\n+use super::{} // but prefer `use crate::`\n+```\n+\n+## Order of Items\n+\n+Optimize for the reader who sees the file for the first time, and wants to get the general idea about what's going on.\n+People read things from top to bottom, so place most important things first.\n+\n+Specifically, if all items except one are private, always put the non-private item on top.\n+\n+Put `struct`s and `enum`s first, functions and impls last.\n+\n+Do\n+\n+```\n+// Good\n+struct Foo {\n+  bars: Vec<Bar>\n+}\n+\n+struct Bar;\n+```\n+\n+rather than\n+\n+```\n+// Not as good\n+struct Bar;\n+\n+struct Foo {\n+  bars: Vec<Bar>\n+}\n+```\n+\n+## Documentation\n+\n+For `.md` and `.adoc` files, prefer a sentence-per-line format, don't wrap lines.\n+If the line is too long, you want to split the sentence in two :-)\n+\n # Logging\n \n Logging is done by both rust-analyzer and VS Code, so it might be tricky to"}]}