{"sha": "096ca873330d61de91d81618ce3a1e9905581ff1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA5NmNhODczMzMwZDYxZGU5MWQ4MTYxOGNlM2ExZTk5MDU1ODFmZjE=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2019-01-15T16:11:07Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2019-01-15T16:11:07Z"}, "message": "Remove an unused function argument", "tree": {"sha": "83a8593b7e40bc4a3ae5ee76d9eba588ab6e5823", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83a8593b7e40bc4a3ae5ee76d9eba588ab6e5823"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/096ca873330d61de91d81618ce3a1e9905581ff1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/096ca873330d61de91d81618ce3a1e9905581ff1", "html_url": "https://github.com/rust-lang/rust/commit/096ca873330d61de91d81618ce3a1e9905581ff1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/096ca873330d61de91d81618ce3a1e9905581ff1/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "920192490f3eea0cf3b2e58e28912eb68423fdde", "url": "https://api.github.com/repos/rust-lang/rust/commits/920192490f3eea0cf3b2e58e28912eb68423fdde", "html_url": "https://github.com/rust-lang/rust/commit/920192490f3eea0cf3b2e58e28912eb68423fdde"}], "stats": {"total": 78, "additions": 4, "deletions": 74}, "files": [{"sha": "041291e80eee989d0aa804cdf94a5048187057b6", "filename": "src/librustc/hir/intravisit.rs", "status": "modified", "additions": 1, "deletions": 57, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc%2Fhir%2Fintravisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc%2Fhir%2Fintravisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fintravisit.rs?ref=096ca873330d61de91d81618ce3a1e9905581ff1", "patch": "@@ -35,11 +35,9 @@ use syntax::ast::{NodeId, CRATE_NODE_ID, Ident, Name, Attribute};\n use syntax_pos::Span;\n use hir::*;\n use hir::def::Def;\n-use hir::map::{self, Map};\n+use hir::map::Map;\n use super::itemlikevisit::DeepVisitor;\n \n-use std::cmp;\n-\n #[derive(Copy, Clone)]\n pub enum FnKind<'a> {\n     /// `#[xxx] pub async/const/extern \"Abi\" fn foo()`\n@@ -1133,57 +1131,3 @@ pub fn walk_defaultness<'v, V: Visitor<'v>>(_: &mut V, _: &'v Defaultness) {\n     // the right thing to do, should content be added in the future,\n     // would be to walk it.\n }\n-\n-#[derive(Copy, Clone, RustcEncodable, RustcDecodable, Debug)]\n-pub struct IdRange {\n-    pub min: NodeId,\n-    pub max: NodeId,\n-}\n-\n-impl IdRange {\n-    pub fn max() -> IdRange {\n-        IdRange {\n-            min: NodeId::MAX,\n-            max: NodeId::from_u32(0),\n-        }\n-    }\n-\n-    pub fn empty(&self) -> bool {\n-        self.min >= self.max\n-    }\n-\n-    pub fn contains(&self, id: NodeId) -> bool {\n-        id >= self.min && id < self.max\n-    }\n-\n-    pub fn add(&mut self, id: NodeId) {\n-        self.min = cmp::min(self.min, id);\n-        self.max = cmp::max(self.max, NodeId::from_u32(id.as_u32() + 1));\n-    }\n-}\n-\n-\n-pub struct IdRangeComputingVisitor<'a, 'hir: 'a> {\n-    result: IdRange,\n-    map: &'a map::Map<'hir>,\n-}\n-\n-impl<'a, 'hir> IdRangeComputingVisitor<'a, 'hir> {\n-    pub fn new(map: &'a map::Map<'hir>) -> IdRangeComputingVisitor<'a, 'hir> {\n-        IdRangeComputingVisitor { result: IdRange::max(), map: map }\n-    }\n-\n-    pub fn result(&self) -> IdRange {\n-        self.result\n-    }\n-}\n-\n-impl<'a, 'hir> Visitor<'hir> for IdRangeComputingVisitor<'a, 'hir> {\n-    fn nested_visit_map<'this>(&'this mut self) -> NestedVisitorMap<'this, 'hir> {\n-        NestedVisitorMap::OnlyBodies(&self.map)\n-    }\n-\n-    fn visit_id(&mut self, id: NodeId) {\n-        self.result.add(id);\n-    }\n-}"}, {"sha": "72963cb7e7fb4e76a99d34dd59ce70f4f5b0d4f6", "filename": "src/librustc_borrowck/borrowck/mod.rs", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmod.rs?ref=096ca873330d61de91d81618ce3a1e9905581ff1", "patch": "@@ -39,7 +39,6 @@ use syntax_pos::{MultiSpan, Span};\n use errors::{Applicability, DiagnosticBuilder, DiagnosticId};\n \n use rustc::hir;\n-use rustc::hir::intravisit::{self, Visitor};\n \n use dataflow::{DataFlowContext, BitwiseOperator, DataFlowOperator, KillFrom};\n \n@@ -157,12 +156,6 @@ fn build_borrowck_dataflow_data<'a, 'c, 'tcx, F>(this: &mut BorrowckCtxt<'a, 'tc\n     where F: FnOnce(&mut BorrowckCtxt<'a, 'tcx>) -> &'c cfg::CFG\n {\n     // Check the body of fn items.\n-    let tcx = this.tcx;\n-    let id_range = {\n-        let mut visitor = intravisit::IdRangeComputingVisitor::new(&tcx.hir());\n-        visitor.visit_body(this.body);\n-        visitor.result()\n-    };\n     let (all_loans, move_data) =\n         gather_loans::gather_loans_in_fn(this, body_id);\n \n@@ -184,7 +177,6 @@ fn build_borrowck_dataflow_data<'a, 'c, 'tcx, F>(this: &mut BorrowckCtxt<'a, 'tc\n                              Some(this.body),\n                              cfg,\n                              LoanDataFlowOperator,\n-                             id_range,\n                              all_loans.len());\n     for (loan_idx, loan) in all_loans.iter().enumerate() {\n         loan_dfcx.add_gen(loan.gen_scope.item_local_id(), loan_idx);\n@@ -198,7 +190,6 @@ fn build_borrowck_dataflow_data<'a, 'c, 'tcx, F>(this: &mut BorrowckCtxt<'a, 'tc\n     let flowed_moves = move_data::FlowedMoveData::new(move_data,\n                                                       this,\n                                                       cfg,\n-                                                      id_range,\n                                                       this.body);\n \n     Some(AnalysisData { all_loans,"}, {"sha": "56c9f928eb03a30885a1521b8f5fdf0cabdc1de6", "filename": "src/librustc_borrowck/borrowck/move_data.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fborrowck%2Fmove_data.rs?ref=096ca873330d61de91d81618ce3a1e9905581ff1", "patch": "@@ -15,7 +15,6 @@ use std::rc::Rc;\n use std::usize;\n use syntax_pos::Span;\n use rustc::hir;\n-use rustc::hir::intravisit::IdRange;\n \n #[derive(Default)]\n pub struct MoveData<'tcx> {\n@@ -559,7 +558,6 @@ impl<'a, 'tcx> FlowedMoveData<'a, 'tcx> {\n     pub fn new(move_data: MoveData<'tcx>,\n                bccx: &BorrowckCtxt<'a, 'tcx>,\n                cfg: &cfg::CFG,\n-               id_range: IdRange,\n                body: &hir::Body)\n                -> FlowedMoveData<'a, 'tcx> {\n         let tcx = bccx.tcx;\n@@ -570,15 +568,13 @@ impl<'a, 'tcx> FlowedMoveData<'a, 'tcx> {\n                                  Some(body),\n                                  cfg,\n                                  MoveDataFlowOperator,\n-                                 id_range,\n                                  move_data.moves.borrow().len());\n         let mut dfcx_assign =\n             DataFlowContext::new(tcx,\n                                  \"flowed_move_data_assigns\",\n                                  Some(body),\n                                  cfg,\n                                  AssignDataFlowOperator,\n-                                 id_range,\n                                  move_data.var_assignments.borrow().len());\n \n         move_data.add_gen_kills(bccx,"}, {"sha": "8cf620567405c374b203eb5a9be56dd9a1c49e39", "filename": "src/librustc_borrowck/dataflow.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fdataflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/096ca873330d61de91d81618ce3a1e9905581ff1/src%2Flibrustc_borrowck%2Fdataflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fdataflow.rs?ref=096ca873330d61de91d81618ce3a1e9905581ff1", "patch": "@@ -15,7 +15,7 @@ use rustc_data_structures::graph::implementation::OUTGOING;\n \n use rustc::util::nodemap::FxHashMap;\n use rustc::hir;\n-use rustc::hir::intravisit::{self, IdRange};\n+use rustc::hir::intravisit;\n use rustc::hir::print as pprust;\n \n \n@@ -230,16 +230,15 @@ impl<'a, 'tcx, O:DataFlowOperator> DataFlowContext<'a, 'tcx, O> {\n                body: Option<&hir::Body>,\n                cfg: &cfg::CFG,\n                oper: O,\n-               id_range: IdRange,\n                bits_per_id: usize) -> DataFlowContext<'a, 'tcx, O> {\n         let usize_bits = mem::size_of::<usize>() * 8;\n         let words_per_id = (bits_per_id + usize_bits - 1) / usize_bits;\n         let num_nodes = cfg.graph.all_nodes().len();\n \n-        debug!(\"DataFlowContext::new(analysis_name: {}, id_range={:?}, \\\n+        debug!(\"DataFlowContext::new(analysis_name: {}, \\\n                                      bits_per_id={}, words_per_id={}) \\\n                                      num_nodes: {}\",\n-               analysis_name, id_range, bits_per_id, words_per_id,\n+               analysis_name, bits_per_id, words_per_id,\n                num_nodes);\n \n         let entry = if oper.initial_value() { usize::MAX } else {0};"}]}