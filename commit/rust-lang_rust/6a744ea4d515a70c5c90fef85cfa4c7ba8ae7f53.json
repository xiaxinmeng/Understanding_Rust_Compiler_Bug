{"sha": "6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhNzQ0ZWE0ZDUxNWE3MGM1YzkwZmVmODVjZmE0YzdiYThhZTdmNTM=", "commit": {"author": {"name": "Timoth\u00e9e Gerber", "email": "contact@timotheegerber.fr", "date": "2020-03-26T21:57:33Z"}, "committer": {"name": "Timoth\u00e9e Gerber", "email": "contact@timotheegerber.fr", "date": "2020-03-26T22:06:17Z"}, "message": "Create output dir in rustdoc markdown render", "tree": {"sha": "ed723f7b51972077b6b111e491b3865d2087d35c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed723f7b51972077b6b111e491b3865d2087d35c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53", "html_url": "https://github.com/rust-lang/rust/commit/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53/comments", "author": {"login": "TimotheeGerber", "id": 37541513, "node_id": "MDQ6VXNlcjM3NTQxNTEz", "avatar_url": "https://avatars.githubusercontent.com/u/37541513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimotheeGerber", "html_url": "https://github.com/TimotheeGerber", "followers_url": "https://api.github.com/users/TimotheeGerber/followers", "following_url": "https://api.github.com/users/TimotheeGerber/following{/other_user}", "gists_url": "https://api.github.com/users/TimotheeGerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimotheeGerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimotheeGerber/subscriptions", "organizations_url": "https://api.github.com/users/TimotheeGerber/orgs", "repos_url": "https://api.github.com/users/TimotheeGerber/repos", "events_url": "https://api.github.com/users/TimotheeGerber/events{/privacy}", "received_events_url": "https://api.github.com/users/TimotheeGerber/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TimotheeGerber", "id": 37541513, "node_id": "MDQ6VXNlcjM3NTQxNTEz", "avatar_url": "https://avatars.githubusercontent.com/u/37541513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimotheeGerber", "html_url": "https://github.com/TimotheeGerber", "followers_url": "https://api.github.com/users/TimotheeGerber/followers", "following_url": "https://api.github.com/users/TimotheeGerber/following{/other_user}", "gists_url": "https://api.github.com/users/TimotheeGerber/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimotheeGerber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimotheeGerber/subscriptions", "organizations_url": "https://api.github.com/users/TimotheeGerber/orgs", "repos_url": "https://api.github.com/users/TimotheeGerber/repos", "events_url": "https://api.github.com/users/TimotheeGerber/events{/privacy}", "received_events_url": "https://api.github.com/users/TimotheeGerber/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2fbb07525e2f07a815e780a4268b11916248b5a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/2fbb07525e2f07a815e780a4268b11916248b5a9", "html_url": "https://github.com/rust-lang/rust/commit/2fbb07525e2f07a815e780a4268b11916248b5a9"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "0a1b5f588158f5eb6ab5f669c7197cbae6ee0862", "filename": "src/librustdoc/markdown.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53/src%2Flibrustdoc%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53/src%2Flibrustdoc%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown.rs?ref=6a744ea4d515a70c5c90fef85cfa4c7ba8ae7f53", "patch": "@@ -1,4 +1,4 @@\n-use std::fs::File;\n+use std::fs::{create_dir_all, File};\n use std::io::prelude::*;\n use std::path::PathBuf;\n \n@@ -40,6 +40,11 @@ pub fn render(\n     diag: &rustc_errors::Handler,\n     edition: Edition,\n ) -> i32 {\n+    if let Err(e) = create_dir_all(&options.output) {\n+        diag.struct_err(&format!(\"{}: {}\", options.output.display(), e)).emit();\n+        return 4;\n+    }\n+\n     let mut output = options.output;\n     output.push(input.file_name().unwrap());\n     output.set_extension(\"html\");"}]}