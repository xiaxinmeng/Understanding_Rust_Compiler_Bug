{"sha": "eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViMWM0NGI2ZWRmMjBhNmExYzIwYTdkOGIxYzk0YWIxNWMyZmU3ZjQ=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-30T20:48:49Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-30T20:50:19Z"}, "message": "rustbuild: Remove `--enable-llvm-clean-rebuild`\n\nThis was intended for bots back in the day where we'd persist caches of LLVM\nbuilds across runs, but nowadays we don't do that on any of the bots so this\noption is no longer necessary", "tree": {"sha": "210219ed44465aa5063c1cc8e6c1aceccf42ff76", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/210219ed44465aa5063c1cc8e6c1aceccf42ff76"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "html_url": "https://github.com/rust-lang/rust/commit/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "489b792babba74b57f1793e91a76fd1f55972759", "url": "https://api.github.com/repos/rust-lang/rust/commits/489b792babba74b57f1793e91a76fd1f55972759", "html_url": "https://github.com/rust-lang/rust/commit/489b792babba74b57f1793e91a76fd1f55972759"}], "stats": {"total": 14, "additions": 0, "deletions": 14}, "files": [{"sha": "664b473b2c9d00e9452fe55b55bab6ccc9b15037", "filename": "configure", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/configure", "raw_url": "https://github.com/rust-lang/rust/raw/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "patch": "@@ -437,7 +437,6 @@ opt local-rust 0 \"use an installed rustc rather than downloading a snapshot\"\n opt local-rebuild 0 \"assume local-rust matches the current version, for rebuilds; implies local-rust, and is implied if local-rust already matches the current version\"\n opt llvm-static-stdcpp 0 \"statically link to libstdc++ for LLVM\"\n opt llvm-link-shared 0 \"prefer shared linking to LLVM (llvm-config --link-shared)\"\n-opt llvm-clean-rebuild 0 \"delete LLVM build directory on rebuild\"\n opt rpath 1 \"build rpaths into rustc itself\"\n opt stage0-landing-pads 1 \"enable landing pads during bootstrap with stage0\"\n # This is used by the automation to produce single-target nightlies"}, {"sha": "5d898cb716dcf68d48b7426e40d9a6e957190b51", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "patch": "@@ -62,7 +62,6 @@ pub struct Config {\n     pub llvm_targets: Option<String>,\n     pub llvm_experimental_targets: Option<String>,\n     pub llvm_link_jobs: Option<u32>,\n-    pub llvm_clean_rebuild: bool,\n \n     // rust codegen options\n     pub rust_optimize: bool,\n@@ -203,7 +202,6 @@ struct Llvm {\n     targets: Option<String>,\n     experimental_targets: Option<String>,\n     link_jobs: Option<u32>,\n-    clean_rebuild: Option<bool>,\n }\n \n #[derive(Deserialize, Default, Clone)]\n@@ -352,7 +350,6 @@ impl Config {\n             set(&mut config.llvm_release_debuginfo, llvm.release_debuginfo);\n             set(&mut config.llvm_version_check, llvm.version_check);\n             set(&mut config.llvm_static_stdcpp, llvm.static_libstdcpp);\n-            set(&mut config.llvm_clean_rebuild, llvm.clean_rebuild);\n             config.llvm_targets = llvm.targets.clone();\n             config.llvm_experimental_targets = llvm.experimental_targets.clone();\n             config.llvm_link_jobs = llvm.link_jobs;\n@@ -477,7 +474,6 @@ impl Config {\n                 (\"LLVM_VERSION_CHECK\", self.llvm_version_check),\n                 (\"LLVM_STATIC_STDCPP\", self.llvm_static_stdcpp),\n                 (\"LLVM_LINK_SHARED\", self.llvm_link_shared),\n-                (\"LLVM_CLEAN_REBUILD\", self.llvm_clean_rebuild),\n                 (\"OPTIMIZE\", self.rust_optimize),\n                 (\"DEBUG_ASSERTIONS\", self.rust_debug_assertions),\n                 (\"DEBUGINFO\", self.rust_debuginfo),"}, {"sha": "bf4786ba552ae754dc63662d003b69d8d6ea0015", "filename": "src/bootstrap/config.toml.example", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fconfig.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fconfig.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.toml.example?ref=eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "patch": "@@ -69,11 +69,6 @@\n # controlled by rustbuild's -j parameter.\n #link-jobs = 0\n \n-# Delete LLVM build directory on LLVM rebuild.\n-# This option defaults to `false` for local development, but CI may want to\n-# always perform clean full builds (possibly accelerated by (s)ccache).\n-#clean-rebuild = false\n-\n # =============================================================================\n # General build configuration options\n # ============================================================================="}, {"sha": "cfd20b02aaf6b70261db593bdc25c49e24a06d55", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "patch": "@@ -80,9 +80,6 @@ impl Step for Llvm {\n                 return\n             }\n         }\n-        if build.config.llvm_clean_rebuild {\n-            drop(fs::remove_dir_all(&out_dir));\n-        }\n \n         let _folder = build.fold_output(|| \"llvm\");\n         println!(\"Building LLVM for {}\", target);"}, {"sha": "39fb4e44078124f118794ca89d37d5e6da1ebd6b", "filename": "src/ci/run.sh", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=eb1c44b6edf20a6a1c20a7d8b1c94ab15c2fe7f4", "patch": "@@ -31,7 +31,6 @@ RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-sccache\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-manage-submodules\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-locked-deps\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-cargo-openssl-static\"\n-RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-llvm-clean-rebuild\"\n \n if [ \"$DIST_SRC\" = \"\" ]; then\n   RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-dist-src\""}]}