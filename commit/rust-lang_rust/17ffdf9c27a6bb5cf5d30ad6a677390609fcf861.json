{"sha": "17ffdf9c27a6bb5cf5d30ad6a677390609fcf861", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3ZmZkZjljMjdhNmJiNWNmNWQzMGFkNmE2NzczOTA2MDlmY2Y4NjE=", "commit": {"author": {"name": "Jeremy Kolb", "email": "kjeremy@gmail.com", "date": "2020-02-25T02:17:20Z"}, "committer": {"name": "Jeremy Kolb", "email": "kjeremy@gmail.com", "date": "2020-02-25T02:17:20Z"}, "message": "Add docs", "tree": {"sha": "9783a59c97d1800fa1ed82eff4d39353c701b8c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9783a59c97d1800fa1ed82eff4d39353c701b8c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861", "html_url": "https://github.com/rust-lang/rust/commit/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f0cfb7ad2120514ca8ffd21e08e3ddd0bfb34e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f0cfb7ad2120514ca8ffd21e08e3ddd0bfb34e9", "html_url": "https://github.com/rust-lang/rust/commit/9f0cfb7ad2120514ca8ffd21e08e3ddd0bfb34e9"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "ad000a3ce2fa99837e751d0dfa00ac6263924b0d", "filename": "crates/rust-analyzer/src/semantic_tokens.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/17ffdf9c27a6bb5cf5d30ad6a677390609fcf861/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fsemantic_tokens.rs?ref=17ffdf9c27a6bb5cf5d30ad6a677390609fcf861", "patch": "@@ -1,3 +1,5 @@\n+//! Semantic Tokens helpers\n+\n use lsp_types::{Range, SemanticToken, SemanticTokenModifier, SemanticTokenType};\n \n const SUPPORTED_TYPES: &[SemanticTokenType] = &[\n@@ -36,14 +38,19 @@ const SUPPORTED_MODIFIERS: &[SemanticTokenModifier] = &[\n     SemanticTokenModifier::READONLY,\n ];\n \n+/// Token types that the server supports\n pub(crate) fn supported_token_types() -> &'static [SemanticTokenType] {\n     SUPPORTED_TYPES\n }\n \n+/// Token modifiers that the server supports\n pub(crate) fn supported_token_modifiers() -> &'static [SemanticTokenModifier] {\n     SUPPORTED_MODIFIERS\n }\n \n+/// Tokens are encoded relative to each other.\n+/// \n+/// This is a direct port of https://github.com/microsoft/vscode-languageserver-node/blob/f425af9de46a0187adb78ec8a46b9b2ce80c5412/server/src/sematicTokens.proposed.ts#L45\n #[derive(Default)]\n pub(crate) struct SemanticTokensBuilder {\n     prev_line: u32,\n@@ -52,6 +59,7 @@ pub(crate) struct SemanticTokensBuilder {\n }\n \n impl SemanticTokensBuilder {\n+    /// Push a new token onto the builder\n     pub fn push(&mut self, range: Range, token_index: u32, modifier_bitset: u32) {\n         let mut push_line = range.start.line as u32;\n         let mut push_char = range.start.character as u32;"}]}