{"sha": "22972b8b6f38dbda4b5269afb3fd5223d176aa59", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyOTcyYjhiNmYzOGRiZGE0YjUyNjlhZmIzZmQ1MjIzZDE3NmFhNTk=", "commit": {"author": {"name": "Luca Bruno", "email": "lucab@debian.org", "date": "2016-05-14T16:57:09Z"}, "committer": {"name": "Luca Bruno", "email": "lucab@debian.org", "date": "2016-05-14T16:57:09Z"}, "message": "test: clear deprecation warnings in tcp-stress\n\nSigned-off-by: Luca Bruno <lucab@debian.org>", "tree": {"sha": "036542998e597c26e30a86150b79e995c18f5586", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/036542998e597c26e30a86150b79e995c18f5586"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/22972b8b6f38dbda4b5269afb3fd5223d176aa59", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJXN1jlAAoJEKmDSiJSB45O09oP/3f8tSlyWIL4McWoTI6W5nER\n0gKzBfUCl+0dkMDzC7WRvyh+rlVLj1Ndj0b8NLI2g+R0z8nuu1PUkwXfsCYMute9\nGpvlQBt+KPXK7ZgR8RPK2feeqm8xkJvn59+8uNNLVPDLulsM/csDj9mJkyVImkmB\nu1faTJTFQCJ82ZDJ4hqlU5kQAOaIe/Ekp1Wd2fSGkSLTc73VJlLKNhxh90rdzj8Z\n+O8NVjg4+eNVXnwJwdYnG+FN0x8MXdvH5urZ8g4CPD/Xh6RpJRZSgsECsxxRHvJx\n1vVE87dA13O7Clu0p8CCk2blijNvGTYJmGlKwt8VZOijHCQsd7/yrbOVq6JP+F4k\nNnf0AsZQ/j0fu5WDYx653ZH8GFAqBwqWtdora9wnD1Vjww4a2HOGD0NH+FuOhIP0\njNbs3XJSv9SYL2OTFzefG/c/agWXhw1DOzfeWw8UtOIw/vGB+QnTBL9ZW1pZtM4S\nqncyQVFezrquJf/s56a8Zwe2VTvXBDGy0cHRKzROqcfTuh83W7pyJp+Th6jRRfoO\nr+9C1BCRLzXdPF7EJPVHTcgUs+GVzfP/xHUu4jCMgBXzDdMD6+7Z0+rdvsIkiTll\n49uAHyNkbFsw+WWq5SkEbFoHqJCfw86n0k5mzoUFnb7em2Nvss/U020OFcbK0Sca\nkuMYfmROq7Xc9oX3kjcF\n=tR1k\n-----END PGP SIGNATURE-----", "payload": "tree 036542998e597c26e30a86150b79e995c18f5586\nparent 47ebc563860f1e5608dbdaf7603921c7676ed75f\nauthor Luca Bruno <lucab@debian.org> 1463245029 +0200\ncommitter Luca Bruno <lucab@debian.org> 1463245029 +0200\n\ntest: clear deprecation warnings in tcp-stress\n\nSigned-off-by: Luca Bruno <lucab@debian.org>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/22972b8b6f38dbda4b5269afb3fd5223d176aa59", "html_url": "https://github.com/rust-lang/rust/commit/22972b8b6f38dbda4b5269afb3fd5223d176aa59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/22972b8b6f38dbda4b5269afb3fd5223d176aa59/comments", "author": {"login": "lucab", "id": 98086, "node_id": "MDQ6VXNlcjk4MDg2", "avatar_url": "https://avatars.githubusercontent.com/u/98086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucab", "html_url": "https://github.com/lucab", "followers_url": "https://api.github.com/users/lucab/followers", "following_url": "https://api.github.com/users/lucab/following{/other_user}", "gists_url": "https://api.github.com/users/lucab/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucab/subscriptions", "organizations_url": "https://api.github.com/users/lucab/orgs", "repos_url": "https://api.github.com/users/lucab/repos", "events_url": "https://api.github.com/users/lucab/events{/privacy}", "received_events_url": "https://api.github.com/users/lucab/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lucab", "id": 98086, "node_id": "MDQ6VXNlcjk4MDg2", "avatar_url": "https://avatars.githubusercontent.com/u/98086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucab", "html_url": "https://github.com/lucab", "followers_url": "https://api.github.com/users/lucab/followers", "following_url": "https://api.github.com/users/lucab/following{/other_user}", "gists_url": "https://api.github.com/users/lucab/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucab/subscriptions", "organizations_url": "https://api.github.com/users/lucab/orgs", "repos_url": "https://api.github.com/users/lucab/repos", "events_url": "https://api.github.com/users/lucab/events{/privacy}", "received_events_url": "https://api.github.com/users/lucab/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47ebc563860f1e5608dbdaf7603921c7676ed75f", "url": "https://api.github.com/repos/rust-lang/rust/commits/47ebc563860f1e5608dbdaf7603921c7676ed75f", "html_url": "https://github.com/rust-lang/rust/commit/47ebc563860f1e5608dbdaf7603921c7676ed75f"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "dfc86497c9652a14952d86b09e23bb6e77b1f512", "filename": "src/test/run-pass/tcp-stress.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/22972b8b6f38dbda4b5269afb3fd5223d176aa59/src%2Ftest%2Frun-pass%2Ftcp-stress.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22972b8b6f38dbda4b5269afb3fd5223d176aa59/src%2Ftest%2Frun-pass%2Ftcp-stress.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ftcp-stress.rs?ref=22972b8b6f38dbda4b5269afb3fd5223d176aa59", "patch": "@@ -18,25 +18,26 @@ use std::io::prelude::*;\n use std::net::{TcpListener, TcpStream};\n use std::process;\n use std::sync::mpsc::channel;\n+use std::time::Duration;\n use std::thread::{self, Builder};\n \n fn main() {\n     // This test has a chance to time out, try to not let it time out\n     thread::spawn(move|| -> () {\n-        thread::sleep_ms(30 * 1000);\n+        thread::sleep(Duration::from_secs(30));\n         process::exit(1);\n     });\n \n-    let mut listener = TcpListener::bind(\"127.0.0.1:0\").unwrap();\n+    let listener = TcpListener::bind(\"127.0.0.1:0\").unwrap();\n     let addr = listener.local_addr().unwrap();\n     thread::spawn(move || -> () {\n         loop {\n             let mut stream = match listener.accept() {\n                 Ok(stream) => stream.0,\n-                Err(error) => continue,\n+                Err(_) => continue,\n             };\n-            stream.read(&mut [0]);\n-            stream.write(&[2]);\n+            let _ = stream.read(&mut [0]);\n+            let _ = stream.write(&[2]);\n         }\n     });\n \n@@ -47,8 +48,8 @@ fn main() {\n         let res = Builder::new().stack_size(64 * 1024).spawn(move|| {\n             match TcpStream::connect(addr) {\n                 Ok(mut stream) => {\n-                    stream.write(&[1]);\n-                    stream.read(&mut [0]);\n+                    let _ = stream.write(&[1]);\n+                    let _ = stream.read(&mut [0]);\n                 },\n                 Err(..) => {}\n             }"}]}