{"sha": "53543d2aa36608966acda7a49276d7746df8ea3b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzNTQzZDJhYTM2NjA4OTY2YWNkYTdhNDkyNzZkNzc0NmRmOGVhM2I=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-25T04:30:43Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-25T04:34:51Z"}, "message": "mk: Some fixes to grammar.mk\n\nInvoke rustc in a way that sets LD_LIBRARY_PATH,\nand disable the deps on RustLexer.class when antlr isn't available.", "tree": {"sha": "076cc6c9ef5dcb8ec35ce8268f5c8c3071e4cfcb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/076cc6c9ef5dcb8ec35ce8268f5c8c3071e4cfcb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53543d2aa36608966acda7a49276d7746df8ea3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53543d2aa36608966acda7a49276d7746df8ea3b", "html_url": "https://github.com/rust-lang/rust/commit/53543d2aa36608966acda7a49276d7746df8ea3b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53543d2aa36608966acda7a49276d7746df8ea3b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71f8db5b629cc6f74cd2894ed55fdbab07f9581c", "url": "https://api.github.com/repos/rust-lang/rust/commits/71f8db5b629cc6f74cd2894ed55fdbab07f9581c", "html_url": "https://github.com/rust-lang/rust/commit/71f8db5b629cc6f74cd2894ed55fdbab07f9581c"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "6ff0f82293b13599c98fd05eab7360bce2ae4be8", "filename": "mk/grammar.mk", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/53543d2aa36608966acda7a49276d7746df8ea3b/mk%2Fgrammar.mk", "raw_url": "https://github.com/rust-lang/rust/raw/53543d2aa36608966acda7a49276d7746df8ea3b/mk%2Fgrammar.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fgrammar.mk?ref=53543d2aa36608966acda7a49276d7746df8ea3b", "patch": "@@ -13,7 +13,7 @@ SG = $(S)src/grammar/\n B = $(CFG_BUILD_DIR)/$(CFG_BUILD)/stage2/\n L = $(B)lib/rustlib/$(CFG_BUILD)/lib\n LD = $(CFG_BUILD)/stage2/lib/rustlib/$(CFG_BUILD)/lib/\n-RUSTC = $(B)bin/rustc\n+RUSTC = $(STAGE2_T_$(CFG_BUILD)_H_$(CFG_BUILD))\n \n # Run the reference lexer against libsyntax and compare the tokens and spans.\n # If \"// ignore-lexer-test\" is present in the file, it will be ignored.\n@@ -37,19 +37,25 @@ $(BG)RustLexer.class: $(SG)RustLexer.g4\n $(BG)verify: $(SG)verify.rs rustc-stage2-H-$(CFG_BUILD) $(LD)stamp.regex_macros $(LD)stamp.rustc\n \t$(Q)$(RUSTC) -O --out-dir $(BG) -L $(L) $(SG)verify.rs\n \n-check-lexer: $(BG) $(BG)RustLexer.class $(BG)verify\n ifdef CFG_JAVAC\n ifdef CFG_ANTLR4\n ifdef CFG_GRUN\n+check-lexer: $(BG) $(BG)RustLexer.class $(BG)verify\n \t$(info Verifying libsyntax against the reference lexer ...)\n \t$(Q)$(SG)check.sh $(S) \"$(BG)\" \\\n \t\t\"$(CFG_GRUN)\" \"$(BG)verify\" \"$(BG)RustLexer.tokens\"\n else\n $(info grun not available, skipping lexer test...)\n+check-lexer:\n+\n endif\n else\n $(info antlr4 not available, skipping lexer test...)\n+check-lexer:\n+\n endif\n else\n $(info javac not available, skipping lexer test...)\n+check-lexer:\n+\n endif"}]}