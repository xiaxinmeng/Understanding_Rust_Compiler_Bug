{"sha": "d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQxYjlkZGM4ZDQ5NzQ0YTRlN2U0NzhlNzc1ZDAyZDA3MWRiZDc4YTQ=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-04-19T23:52:59Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-04-19T23:53:12Z"}, "message": "Add testcase for bootstrap blocker and fix for each result type to nil.", "tree": {"sha": "770ede20366096233245c4e348f86bbfab27d780", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/770ede20366096233245c4e348f86bbfab27d780"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "html_url": "https://github.com/rust-lang/rust/commit/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6651826677842083c59725903a856eb39d8e5051", "url": "https://api.github.com/repos/rust-lang/rust/commits/6651826677842083c59725903a856eb39d8e5051", "html_url": "https://github.com/rust-lang/rust/commit/6651826677842083c59725903a856eb39d8e5051"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "468173b7f461dd3d3634de58d473fdda89d90cad", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "patch": "@@ -3583,12 +3583,12 @@ fn trans_for_each(@block_ctxt cx,\n     bcx.build.Store(lllvar, lllvarptr);\n     fcx.llupvars.insert(decl_id, lllvarptr);\n \n-    auto res = trans_block(bcx, body);\n+    auto r = trans_block(bcx, body);\n \n     // Tie up the llallocas -> lltop edge.\n     new_builder(fcx.llallocas).Br(lltop);\n \n-    res.bcx.build.RetVoid();\n+    r.bcx.build.RetVoid();\n \n \n     // Step 3: Call iter passing [lliterbody, llenv], plus other args.\n@@ -3611,10 +3611,11 @@ fn trans_for_each(@block_ctxt cx,\n             cx.build.Store(llenvblobptr, env_cell);\n \n             // log \"lliterbody: \" + val_str(cx.fcx.lcx.ccx.tn, lliterbody);\n-            ret trans_call(cx, f,\n+            r = trans_call(cx, f,\n                            some[ValueRef](cx.build.Load(pair)),\n                            args,\n                            ann);\n+            ret res(r.bcx, C_nil());\n         }\n     }\n     fail;"}, {"sha": "607a434a8c9cb07d3135c6d1cd724cbb15f89028", "filename": "src/test/run-pass/alt-phi.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4/src%2Ftest%2Frun-pass%2Falt-phi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d1b9ddc8d49744a4e7e478e775d02d071dbd78a4/src%2Ftest%2Frun-pass%2Falt-phi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Falt-phi.rs?ref=d1b9ddc8d49744a4e7e478e775d02d071dbd78a4", "patch": "@@ -0,0 +1,22 @@\n+tag thing { a; b; c; }\n+\n+iter foo() -> int {\n+  put 10;\n+}\n+\n+fn main() {\n+  auto x = true;\n+    alt (a) {\n+        case (a) {\n+            x = true;\n+            for each (int i in foo()) {\n+            }\n+        }\n+        case (b) {\n+            x = false;\n+        }\n+        case (c) {\n+            x = false;\n+        }\n+    }\n+}"}]}