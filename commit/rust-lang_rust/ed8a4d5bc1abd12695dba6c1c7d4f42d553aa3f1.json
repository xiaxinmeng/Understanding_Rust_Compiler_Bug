{"sha": "ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkOGE0ZDViYzFhYmQxMjY5NWRiYTZjMWM3ZDRmNDJkNTUzYWEzZjE=", "commit": {"author": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-05-13T21:18:21Z"}, "committer": {"name": "Andy Russell", "email": "arussell123@gmail.com", "date": "2019-05-29T14:59:59Z"}, "message": "upgrade rustdoc's `pulldown-cmark` to 0.5.2\n\nFixes #60482.", "tree": {"sha": "971ad869a90e5cd1da362ed9a9f1589235ce745a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/971ad869a90e5cd1da362ed9a9f1589235ce745a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQFKBAABCAA0FiEELriChyEaiMu0yCg7viIhAz7bw3QFAlzunnYWHGFydXNzZWxs\nMTIzQGdtYWlsLmNvbQAKCRC+IiEDPtvDdIiKB/9yRDNc3ezpWa+kI63qgXt7eeV9\n5HXEY8ogwcjSpo+7PNtZw3oGP34KoTpT0I+I1/UXK9cHp8WQJGiCmFw0gYjCe2Fq\ngC/udO5FmiOto78Pqw4E4/vaWRxoGj+mN58aRRDV5iMWaf1zSqB8S24gMlp7xaVW\n4P28pSZ69uXBIBkZBAo7D/Jcpr7PhbE5w4rFEIxfm4ygBZDSqTbjO2Nr1UErQjPB\nOWgJoRFJ7BGM67QrBLG97+CpvhuddIvu+NPhfsvpTJkY16xgeqEuX01lGPodVRfS\nQZ5StzgXxL4piLZVEiWKBhnGY7JmURZ8JFPyYql3Deh+szPKaFw8et+KLkrE\n=SKUy\n-----END PGP SIGNATURE-----", "payload": "tree 971ad869a90e5cd1da362ed9a9f1589235ce745a\nparent 81970852e172c04322cbf8ba23effabeb491c83c\nauthor Andy Russell <arussell123@gmail.com> 1557782301 -0400\ncommitter Andy Russell <arussell123@gmail.com> 1559141999 -0400\n\nupgrade rustdoc's `pulldown-cmark` to 0.5.2\n\nFixes #60482.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "html_url": "https://github.com/rust-lang/rust/commit/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/comments", "author": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "euclio", "id": 1372438, "node_id": "MDQ6VXNlcjEzNzI0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1372438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/euclio", "html_url": "https://github.com/euclio", "followers_url": "https://api.github.com/users/euclio/followers", "following_url": "https://api.github.com/users/euclio/following{/other_user}", "gists_url": "https://api.github.com/users/euclio/gists{/gist_id}", "starred_url": "https://api.github.com/users/euclio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/euclio/subscriptions", "organizations_url": "https://api.github.com/users/euclio/orgs", "repos_url": "https://api.github.com/users/euclio/repos", "events_url": "https://api.github.com/users/euclio/events{/privacy}", "received_events_url": "https://api.github.com/users/euclio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81970852e172c04322cbf8ba23effabeb491c83c", "url": "https://api.github.com/repos/rust-lang/rust/commits/81970852e172c04322cbf8ba23effabeb491c83c", "html_url": "https://github.com/rust-lang/rust/commit/81970852e172c04322cbf8ba23effabeb491c83c"}], "stats": {"total": 46, "additions": 22, "deletions": 24}, "files": [{"sha": "9bb9e4805887c95e44aa7cfb0ee25925d6da887b", "filename": "Cargo.lock", "status": "modified", "additions": 7, "deletions": 18, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "patch": "@@ -421,7 +421,7 @@ dependencies = [\n  \"itertools 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"matches 0.1.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"pulldown-cmark 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quine-mc_cluskey 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex-syntax 0.6.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2014,23 +2014,13 @@ dependencies = [\n \n [[package]]\n name = \"pulldown-cmark\"\n-version = \"0.4.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-dependencies = [\n- \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"memchr 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n-[[package]]\n-name = \"pulldown-cmark\"\n-version = \"0.5.0\"\n+version = \"0.5.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.19 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"memchr 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"unicase 2.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3077,7 +3067,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"minifier 0.0.30 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.7.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"pulldown-cmark 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"tempfile 3.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -3854,7 +3844,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"unicase\"\n-version = \"2.3.0\"\n+version = \"2.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -4285,8 +4275,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum proc-macro2 0.4.24 (registry+https://github.com/rust-lang/crates.io-index)\" = \"77619697826f31a02ae974457af0b29b723e5619e113e9397b8b82c6bd253f09\"\n \"checksum proptest 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"24f5844db2f839e97e3021980975f6ebf8691d9b9b2ca67ed3feb38dc3edb52c\"\n \"checksum pulldown-cmark 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d6fdf85cda6cadfae5428a54661d431330b312bc767ddbc57adbedc24da66e32\"\n-\"checksum pulldown-cmark 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d1b74cc784b038a9921fd1a48310cc2e238101aa8ae0b94201e2d85121dd68b5\"\n-\"checksum pulldown-cmark 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"157737d41407de9c5e0563a991d085117d60ae729af2cc1bf28d6dfbc97bcc1f\"\n+\"checksum pulldown-cmark 0.5.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"051e60ace841b3bfecd402fe5051c06cb3bec4a6e6fdd060a37aa8eb829a1db3\"\n \"checksum quick-error 1.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9274b940887ce9addde99c4eee6b5c44cc494b182b97e73dc8ffdcb3397fd3f0\"\n \"checksum quine-mc_cluskey 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"07589615d719a60c8dd8a4622e7946465dfef20d1a428f969e3443e7386d5f45\"\n \"checksum quote 0.3.15 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7a6e920b65c65f10b2ae65c831a81a073a89edd28c7cce89475bff467ab4167a\"\n@@ -4400,7 +4389,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum typenum 1.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"612d636f949607bdf9b123b4a6f6d966dedf3ff669f7f045890d3a4a73948169\"\n \"checksum ucd-trie 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"71a9c5b1fe77426cf144cc30e49e955270f5086e31a6441dfa8b32efc09b9d77\"\n \"checksum ucd-util 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"535c204ee4d8434478593480b8f86ab45ec9aae0e83c568ca81abf0fd0e88f86\"\n-\"checksum unicase 2.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"41d17211f887da8e4a70a45b9536f26fc5de166b81e2d5d80de4a17fd22553bd\"\n+\"checksum unicase 2.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a84e5511b2a947f3ae965dcb29b13b7b1691b6e7332cf5dbc1744138d5acb7f6\"\n \"checksum unicode-bidi 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"49f2bd0c6468a8230e1db229cff8029217cf623c767ea5d60bfbd42729ea54d5\"\n \"checksum unicode-normalization 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6a0180bc61fc5a987082bfa111f4cc95c4caff7f9799f3e46df09163a937aa25\"\n \"checksum unicode-segmentation 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"aa6024fc12ddfd1c6dbc14a80fa2324d4568849869b779f6bd37e5e4c03344d1\""}, {"sha": "b75212d606fa5a63894b23c5d542dea00fe2e0c5", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "patch": "@@ -9,7 +9,7 @@ name = \"rustdoc\"\n path = \"lib.rs\"\n \n [dependencies]\n-pulldown-cmark = { version = \"0.4.1\", default-features = false }\n+pulldown-cmark = { version = \"0.5.2\", default-features = false }\n minifier = \"0.0.30\"\n tempfile = \"3\"\n parking_lot = \"0.7\""}, {"sha": "334b83156507654dc638765b652ff1d942cb3a42", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "patch": "@@ -351,9 +351,11 @@ impl<'a, 'b, 'ids, I: Iterator<Item = Event<'a>>> Iterator for HeadingLinks<'a,\n         if let Some(Event::Start(Tag::Header(level))) = event {\n             let mut id = String::new();\n             for event in &mut self.inner {\n-                match event {\n+                match &event {\n                     Event::End(Tag::Header(..)) => break,\n-                    Event::Text(ref text) => id.extend(text.chars().filter_map(slugify)),\n+                    Event::Text(text) | Event::Code(text) => {\n+                        id.extend(text.chars().filter_map(slugify));\n+                    }\n                     _ => {},\n                 }\n                 self.buf.push_back(event);\n@@ -402,7 +404,6 @@ fn check_if_allowed_tag(t: &Tag<'_>) -> bool {\n         | Tag::Item\n         | Tag::Emphasis\n         | Tag::Strong\n-        | Tag::Code\n         | Tag::Link(..)\n         | Tag::BlockQuote => true,\n         _ => false,\n@@ -790,9 +791,8 @@ pub fn plain_summary_line_full(md: &str, limit_length: bool) -> String {\n             let next_event = next_event.unwrap();\n             let (ret, is_in) = match next_event {\n                 Event::Start(Tag::Paragraph) => (None, 1),\n-                Event::Start(Tag::Code) => (Some(\"`\".to_owned()), 1),\n-                Event::End(Tag::Code) => (Some(\"`\".to_owned()), -1),\n                 Event::Start(Tag::Header(_)) => (None, 1),\n+                Event::Code(code) => (Some(format!(\"`{}`\", code)), 0),\n                 Event::Text(ref s) if self.is_in > 0 => (Some(s.as_ref().to_owned()), 0),\n                 Event::End(Tag::Paragraph) | Event::End(Tag::Header(_)) => (None, -1),\n                 _ => (None, 0),"}, {"sha": "0fd1daa746d41b7cf158e77605530857d3e83016", "filename": "src/test/rustdoc/issue-60482.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Ftest%2Frustdoc%2Fissue-60482.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1/src%2Ftest%2Frustdoc%2Fissue-60482.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-60482.rs?ref=ed8a4d5bc1abd12695dba6c1c7d4f42d553aa3f1", "patch": "@@ -0,0 +1,9 @@\n+// This code caused a panic in `pulldown-cmark` 0.4.1.\n+\n+pub const BASIC_UNICODE: bool = true;\n+\n+\n+/// # `BASIC_UNICODE`: `A` `|`\n+/// ```text\n+/// ```\n+pub const BASIC_FONTS: bool = true;"}]}