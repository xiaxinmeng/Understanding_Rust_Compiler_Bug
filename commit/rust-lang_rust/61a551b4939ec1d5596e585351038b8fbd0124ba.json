{"sha": "61a551b4939ec1d5596e585351038b8fbd0124ba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxYTU1MWI0OTM5ZWMxZDU1OTZlNTg1MzUxMDM4YjhmYmQwMTI0YmE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-11-06T09:35:27Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-11-06T09:35:27Z"}, "message": "Auto merge of #65830 - Quantumplation:master, r=davidtwco,estebank\n\nUse ident.span instead of def_span in dead-code pass\n\nHello! First time contributor! :)\n\nThis should fix #58729.\n\nAccording to @estebank in the duplicate #63064, def_span scans forward on the line until it finds a {,\nand if it can't find one, falls back to the span for the whole item. This\nwas apparently written before the identifier span was explicitly tracked on\neach node.\n\nThis means that if an unused function signature spans multiple lines, the\nentire function (potentially hundreds of lines) gets flagged as dead code.\nThis could, for example, cause IDEs to add error squiggly's to the whole\nfunction.\n\nBy using the span from the ident instead, we narrow the scope of this in\nmost cases. In a wider sense, it's probably safe to use ident.span\ninstead of def_span in most locations throughout the whole code base,\nbut since this is my first contribution, I kept it small.\n\nSome interesting points that came up while I was working on this:\n- I reorganized the tests a bit to bring some of the dead code ones all\ninto the same location\n- A few tests were for things unrelated to dead code (like the\npath-lookahead for parens), so I added #![allow(dead_code)] and\ncleaned up the stderr file to reduce noise in the future\n- The same fix doesn't apply to const and static declarations. I tried\nadding these cases to the match expression, but that created a much\nwider change to tests and error messages, so I left it off until I\ncould get some code review to validate the approach.", "tree": {"sha": "9da5e45a058cd0995ea5a35e30dc4d34fa5ea956", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9da5e45a058cd0995ea5a35e30dc4d34fa5ea956"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61a551b4939ec1d5596e585351038b8fbd0124ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61a551b4939ec1d5596e585351038b8fbd0124ba", "html_url": "https://github.com/rust-lang/rust/commit/61a551b4939ec1d5596e585351038b8fbd0124ba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61a551b4939ec1d5596e585351038b8fbd0124ba/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8b190ac4ad79e58d21ee1d573529ff74d8eedaa", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8b190ac4ad79e58d21ee1d573529ff74d8eedaa", "html_url": "https://github.com/rust-lang/rust/commit/e8b190ac4ad79e58d21ee1d573529ff74d8eedaa"}, {"sha": "6186edeae52a95952e7da16a1f66d7352287427e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6186edeae52a95952e7da16a1f66d7352287427e", "html_url": "https://github.com/rust-lang/rust/commit/6186edeae52a95952e7da16a1f66d7352287427e"}], "stats": {"total": 248, "additions": 139, "deletions": 109}, "files": [{"sha": "2aeec029cc334dee7f57da7b60409eb3bf46af95", "filename": "src/librustc_passes/dead.rs", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Flibrustc_passes%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Flibrustc_passes%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fdead.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -569,16 +569,27 @@ impl Visitor<'tcx> for DeadVisitor<'tcx> {\n \n     fn visit_item(&mut self, item: &'tcx hir::Item) {\n         if self.should_warn_about_item(item) {\n-            // For items that have a definition with a signature followed by a\n-            // block, point only at the signature.\n+            // For most items, we want to highlight its identifier\n             let span = match item.kind {\n                 hir::ItemKind::Fn(..) |\n                 hir::ItemKind::Mod(..) |\n                 hir::ItemKind::Enum(..) |\n                 hir::ItemKind::Struct(..) |\n                 hir::ItemKind::Union(..) |\n                 hir::ItemKind::Trait(..) |\n-                hir::ItemKind::Impl(..) => self.tcx.sess.source_map().def_span(item.span),\n+                hir::ItemKind::Impl(..) => {\n+                    // FIXME(66095): Because item.span is annotated with things\n+                    // like expansion data, and ident.span isn't, we use the\n+                    // def_span method if it's part of a macro invocation\n+                    // (and thus has asource_callee set).\n+                    // We should probably annotate ident.span with the macro\n+                    // context, but that's a larger change.\n+                    if item.span.source_callee().is_some() {\n+                        self.tcx.sess.source_map().def_span(item.span)\n+                    } else {\n+                        item.ident.span\n+                    }\n+                },\n                 _ => item.span,\n             };\n             let participle = match item.kind {"}, {"sha": "5ab3dfb24496f854ed0584f3559f7121d2ab6f61", "filename": "src/test/ui-fulldeps/lint-plugin-cmdline-allow.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-allow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-allow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-allow.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -7,10 +7,10 @@ LL | #![plugin(lint_plugin_test)]\n    = note: `#[warn(deprecated)]` on by default\n \n warning: function is never used: `lintme`\n-  --> $DIR/lint-plugin-cmdline-allow.rs:10:1\n+  --> $DIR/lint-plugin-cmdline-allow.rs:10:4\n    |\n LL | fn lintme() { }\n-   | ^^^^^^^^^^^\n+   |    ^^^^^^\n    |\n note: lint level defined here\n   --> $DIR/lint-plugin-cmdline-allow.rs:7:9"}, {"sha": "3a9fd7c2867f2099943941e691f52e2b2406249a", "filename": "src/test/ui-fulldeps/lint-tool-cmdline-allow.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -19,10 +19,10 @@ LL | fn lintme() {}\n    = note: `#[warn(clippy::test_lint)]` on by default\n \n warning: function is never used: `lintme`\n-  --> $DIR/lint-tool-cmdline-allow.rs:10:1\n+  --> $DIR/lint-tool-cmdline-allow.rs:10:4\n    |\n LL | fn lintme() {}\n-   | ^^^^^^^^^^^\n+   |    ^^^^^^\n    |\n note: lint level defined here\n   --> $DIR/lint-tool-cmdline-allow.rs:7:9"}, {"sha": "69d455f3b60e0a60077b00e75f5722143704b413", "filename": "src/test/ui/lint/dead-code/alias-in-pat.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Falias-in-pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Falias-in-pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Falias-in-pat.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-alias-in-pat.rs"}, {"sha": "1cf66e75a95a5a386c78278dcec8822d6e05a5ef", "filename": "src/test/ui/lint/dead-code/associated-type.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fassociated-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fassociated-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fassociated-type.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint-dead-code-associated-type.rs"}, {"sha": "2b69985d33d46bebc9ac02c92fd98f5ac8fcd3d6", "filename": "src/test/ui/lint/dead-code/basic.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/fail-no-dead-code.rs"}, {"sha": "194398e5a07a5e0350e77565791979540bc3d7ef", "filename": "src/test/ui/lint/dead-code/basic.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fbasic.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: function is never used: `foo`\n-  --> $DIR/fail-no-dead-code.rs:4:1\n+  --> $DIR/basic.rs:4:4\n    |\n LL | fn foo() {\n-   | ^^^^^^^^\n+   |    ^^^\n    |\n note: lint level defined here\n-  --> $DIR/fail-no-dead-code.rs:1:9\n+  --> $DIR/basic.rs:1:9\n    |\n LL | #![deny(dead_code)]\n    |         ^^^^^^^^^", "previous_filename": "src/test/ui/fail-no-dead-code.stderr"}, {"sha": "8e8636b1180ef1df0552879be7287499414d9dc2", "filename": "src/test/ui/lint/dead-code/closure-bang.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fclosure-bang.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fclosure-bang.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fclosure-bang.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-closure-bang.rs"}, {"sha": "1a7b3f43cda145ef9e6941f7860138479b9605a8", "filename": "src/test/ui/lint/dead-code/const-and-self.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fconst-and-self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fconst-and-self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fconst-and-self.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-const-and-self.rs"}, {"sha": "834681d77e613a9309ae1c510556e86b57ddac02", "filename": "src/test/ui/lint/dead-code/empty-unused-enum.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-empty-unused-enum.rs"}, {"sha": "44b0a8f613e27240506aa3b6c4f00d64938b7638", "filename": "src/test/ui/lint/dead-code/empty-unused-enum.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-enum.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: enum is never used: `E`\n-  --> $DIR/lint-dead-code-empty-unused-enum.rs:3:1\n+  --> $DIR/empty-unused-enum.rs:3:6\n    |\n LL | enum E {}\n-   | ^^^^^^\n+   |      ^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-empty-unused-enum.rs:1:9\n+  --> $DIR/empty-unused-enum.rs:1:9\n    |\n LL | #![deny(unused)]\n    |         ^^^^^^", "previous_filename": "src/test/ui/lint/lint-dead-code-empty-unused-enum.stderr"}, {"sha": "15b04496ba7b1568ee4144f8b70eb9658c2a182c", "filename": "src/test/ui/lint/dead-code/empty-unused-public-enum.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-public-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-public-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fempty-unused-public-enum.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-empty-unused-enum-pub.rs"}, {"sha": "91c97232eedb1c5b6d0fb85567e98312c03f1e54", "filename": "src/test/ui/lint/dead-code/enum-variants.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fenum-variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fenum-variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fenum-variants.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint-dead-code-variant.rs"}, {"sha": "a2736d97308afcadd7ae6b1ce8416e8e7400f120", "filename": "src/test/ui/lint/dead-code/impl-trait.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-impl-trait.rs"}, {"sha": "f2a78cc65e26efef11c79275ffff504e9503b361", "filename": "src/test/ui/lint/dead-code/impl-trait.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fimpl-trait.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: type alias is never used: `Unused`\n-  --> $DIR/lint-dead-code-impl-trait.rs:12:1\n+  --> $DIR/impl-trait.rs:12:1\n    |\n LL | type Unused = ();\n    | ^^^^^^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-impl-trait.rs:1:9\n+  --> $DIR/impl-trait.rs:1:9\n    |\n LL | #![deny(dead_code)]\n    |         ^^^^^^^^^", "previous_filename": "src/test/ui/lint/lint-dead-code-impl-trait.stderr"}, {"sha": "1b6e03ab8874d2608a31d0b576be781e753ed90c", "filename": "src/test/ui/lint/dead-code/leading-underscore.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fleading-underscore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fleading-underscore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fleading-underscore.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-leading-underscore.rs"}, {"sha": "09977f8df51cfaa47c412070353cc68ac0049945", "filename": "src/test/ui/lint/dead-code/lint-dead-code-1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-1.rs"}, {"sha": "bac46a2e843cd93fb9f6c8c3e63fa24c5f8e0644", "filename": "src/test/ui/lint/dead-code/lint-dead-code-1.stderr", "status": "renamed", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-1.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,8 +1,8 @@\n error: struct is never constructed: `Bar`\n-  --> $DIR/lint-dead-code-1.rs:12:5\n+  --> $DIR/lint-dead-code-1.rs:12:16\n    |\n LL |     pub struct Bar;\n-   |     ^^^^^^^^^^^^^^^\n+   |                ^^^\n    |\n note: lint level defined here\n   --> $DIR/lint-dead-code-1.rs:5:9\n@@ -23,16 +23,16 @@ LL | const priv_const: isize = 0;\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: struct is never constructed: `PrivStruct`\n-  --> $DIR/lint-dead-code-1.rs:35:1\n+  --> $DIR/lint-dead-code-1.rs:35:8\n    |\n LL | struct PrivStruct;\n-   | ^^^^^^^^^^^^^^^^^^\n+   |        ^^^^^^^^^^\n \n error: enum is never used: `priv_enum`\n-  --> $DIR/lint-dead-code-1.rs:64:1\n+  --> $DIR/lint-dead-code-1.rs:64:6\n    |\n LL | enum priv_enum { foo2, bar2 }\n-   | ^^^^^^^^^^^^^^\n+   |      ^^^^^^^^^\n \n error: variant is never constructed: `bar3`\n   --> $DIR/lint-dead-code-1.rs:67:5\n@@ -41,28 +41,28 @@ LL |     bar3\n    |     ^^^^\n \n error: function is never used: `priv_fn`\n-  --> $DIR/lint-dead-code-1.rs:88:1\n+  --> $DIR/lint-dead-code-1.rs:88:4\n    |\n LL | fn priv_fn() {\n-   | ^^^^^^^^^^^^\n+   |    ^^^^^^^\n \n error: function is never used: `foo`\n-  --> $DIR/lint-dead-code-1.rs:93:1\n+  --> $DIR/lint-dead-code-1.rs:93:4\n    |\n LL | fn foo() {\n-   | ^^^^^^^^\n+   |    ^^^\n \n error: function is never used: `bar`\n-  --> $DIR/lint-dead-code-1.rs:98:1\n+  --> $DIR/lint-dead-code-1.rs:98:4\n    |\n LL | fn bar() {\n-   | ^^^^^^^^\n+   |    ^^^\n \n error: function is never used: `baz`\n-  --> $DIR/lint-dead-code-1.rs:102:1\n+  --> $DIR/lint-dead-code-1.rs:102:4\n    |\n LL | fn baz() -> impl Copy {\n-   | ^^^^^^^^^^^^^^^^^^^^^\n+   |    ^^^\n \n error: aborting due to 10 previous errors\n ", "previous_filename": "src/test/ui/lint/lint-dead-code-1.stderr"}, {"sha": "88db4f88c3feb8ff0890df2b0e2c6f1aa2eab26f", "filename": "src/test/ui/lint/dead-code/lint-dead-code-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-2.rs"}, {"sha": "a578a76d9a075d3cbc5d5e9efe30a739e057ce92", "filename": "src/test/ui/lint/dead-code/lint-dead-code-2.stderr", "status": "renamed", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-2.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,8 +1,8 @@\n error: function is never used: `dead_fn`\n-  --> $DIR/lint-dead-code-2.rs:22:1\n+  --> $DIR/lint-dead-code-2.rs:22:4\n    |\n LL | fn dead_fn() {}\n-   | ^^^^^^^^^^^^\n+   |    ^^^^^^^\n    |\n note: lint level defined here\n   --> $DIR/lint-dead-code-2.rs:2:9\n@@ -11,16 +11,16 @@ LL | #![deny(dead_code)]\n    |         ^^^^^^^^^\n \n error: function is never used: `dead_fn2`\n-  --> $DIR/lint-dead-code-2.rs:25:1\n+  --> $DIR/lint-dead-code-2.rs:25:4\n    |\n LL | fn dead_fn2() {}\n-   | ^^^^^^^^^^^^^\n+   |    ^^^^^^^^\n \n error: function is never used: `main`\n-  --> $DIR/lint-dead-code-2.rs:38:1\n+  --> $DIR/lint-dead-code-2.rs:38:4\n    |\n LL | fn main() {\n-   | ^^^^^^^^^\n+   |    ^^^^\n \n error: aborting due to 3 previous errors\n ", "previous_filename": "src/test/ui/lint/lint-dead-code-2.stderr"}, {"sha": "4397522f3f32fd8274b1f223c057a7c0c848a5cb", "filename": "src/test/ui/lint/dead-code/lint-dead-code-3.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-3.rs"}, {"sha": "569196fffdd50b47e0f70b9f70bffa44c6757c3f", "filename": "src/test/ui/lint/dead-code/lint-dead-code-3.stderr", "status": "renamed", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-3.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,8 +1,8 @@\n error: struct is never constructed: `Foo`\n-  --> $DIR/lint-dead-code-3.rs:13:1\n+  --> $DIR/lint-dead-code-3.rs:13:8\n    |\n LL | struct Foo;\n-   | ^^^^^^^^^^^\n+   |        ^^^\n    |\n note: lint level defined here\n   --> $DIR/lint-dead-code-3.rs:3:9\n@@ -17,16 +17,16 @@ LL |     fn foo(&self) {\n    |     ^^^^^^^^^^^^^\n \n error: function is never used: `bar`\n-  --> $DIR/lint-dead-code-3.rs:20:1\n+  --> $DIR/lint-dead-code-3.rs:20:4\n    |\n LL | fn bar() {\n-   | ^^^^^^^^\n+   |    ^^^\n \n error: enum is never used: `c_void`\n-  --> $DIR/lint-dead-code-3.rs:59:1\n+  --> $DIR/lint-dead-code-3.rs:59:6\n    |\n LL | enum c_void {}\n-   | ^^^^^^^^^^^\n+   |      ^^^^^^\n \n error: foreign function is never used: `free`\n   --> $DIR/lint-dead-code-3.rs:61:5", "previous_filename": "src/test/ui/lint/lint-dead-code-3.stderr"}, {"sha": "3f4a9e210401ef0ded220748f5a156aba8b069b8", "filename": "src/test/ui/lint/dead-code/lint-dead-code-4.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-4.rs"}, {"sha": "8eaf789f8f7934dd3dd89f8cca1a5ec1dde1c674", "filename": "src/test/ui/lint/dead-code/lint-dead-code-4.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-4.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -27,10 +27,10 @@ LL | |     },\n    | |_____^\n \n error: enum is never used: `ABC`\n-  --> $DIR/lint-dead-code-4.rs:24:1\n+  --> $DIR/lint-dead-code-4.rs:24:6\n    |\n LL | enum ABC {\n-   | ^^^^^^^^\n+   |      ^^^\n \n error: variant is never constructed: `I`\n   --> $DIR/lint-dead-code-4.rs:36:5", "previous_filename": "src/test/ui/lint/lint-dead-code-4.stderr"}, {"sha": "764a23e4e49e9c69a4e9cc271b3a43751883ee12", "filename": "src/test/ui/lint/dead-code/lint-dead-code-5.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-5.rs"}, {"sha": "9670d8e7a32e39b33a2558d9bfd4d55b65255b51", "filename": "src/test/ui/lint/dead-code/lint-dead-code-5.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Flint-dead-code-5.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -23,10 +23,10 @@ LL |     Variant6(isize),\n    |     ^^^^^^^^^^^^^^^\n \n error: enum is never used: `Enum3`\n-  --> $DIR/lint-dead-code-5.rs:18:1\n+  --> $DIR/lint-dead-code-5.rs:18:6\n    |\n LL | enum Enum3 {\n-   | ^^^^^^^^^^\n+   |      ^^^^^\n \n error: aborting due to 4 previous errors\n ", "previous_filename": "src/test/ui/lint/lint-dead-code-5.stderr"}, {"sha": "a4342056419d7dc2c3c70d99e60e223530b4d9ea", "filename": "src/test/ui/lint/dead-code/newline-span.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -0,0 +1,19 @@\n+#![deny(dead_code)]\n+\n+fn unused() { //~ error: function is never used:\n+    println!(\"blah\");\n+}\n+\n+fn unused2(var: i32) { //~ error: function is never used:\n+    println!(\"foo {}\", var);\n+}\n+\n+fn unused3( //~ error: function is never used:\n+    var: i32,\n+) {\n+    println!(\"bar {}\", var);\n+}\n+\n+fn main() {\n+    println!(\"Hello world!\");\n+}"}, {"sha": "c5d0d605067442eda89afa20d6b77ebc157217c0", "filename": "src/test/ui/lint/dead-code/newline-span.stderr", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fnewline-span.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -0,0 +1,26 @@\n+error: function is never used: `unused`\n+  --> $DIR/newline-span.rs:3:4\n+   |\n+LL | fn unused() {\n+   |    ^^^^^^\n+   |\n+note: lint level defined here\n+  --> $DIR/newline-span.rs:1:9\n+   |\n+LL | #![deny(dead_code)]\n+   |         ^^^^^^^^^\n+\n+error: function is never used: `unused2`\n+  --> $DIR/newline-span.rs:7:4\n+   |\n+LL | fn unused2(var: i32) {\n+   |    ^^^^^^^\n+\n+error: function is never used: `unused3`\n+  --> $DIR/newline-span.rs:11:4\n+   |\n+LL | fn unused3(\n+   |    ^^^^^^^\n+\n+error: aborting due to 3 previous errors\n+"}, {"sha": "92a67950986b0e4f4c492ec8e1f0aae20a4877ce", "filename": "src/test/ui/lint/dead-code/tuple-struct-field.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftuple-struct-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftuple-struct-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftuple-struct-field.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-tuple-struct-field.rs"}, {"sha": "86daf3ea04dbd91c18455b536983fceb7b04498e", "filename": "src/test/ui/lint/dead-code/type-alias.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-type-alias.rs"}, {"sha": "82df23bd9448b6ee91cc7cc15cb6cd87117c3553", "filename": "src/test/ui/lint/dead-code/type-alias.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Ftype-alias.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: type alias is never used: `Unused`\n-  --> $DIR/lint-dead-code-type-alias.rs:4:1\n+  --> $DIR/type-alias.rs:4:1\n    |\n LL | type Unused = u8;\n    | ^^^^^^^^^^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-type-alias.rs:1:9\n+  --> $DIR/type-alias.rs:1:9\n    |\n LL | #![deny(dead_code)]\n    |         ^^^^^^^^^", "previous_filename": "src/test/ui/lint/lint-dead-code-type-alias.stderr"}, {"sha": "e57fac259c5d55f2f86fd7520bebb0cff35fb46b", "filename": "src/test/ui/lint/dead-code/unused-enum.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-unused-enum.rs"}, {"sha": "142c2ccb99b05603e1a962375b172c7eb34b8956", "filename": "src/test/ui/lint/dead-code/unused-enum.stderr", "status": "renamed", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-enum.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,27 +1,27 @@\n error: struct is never constructed: `F`\n-  --> $DIR/lint-dead-code-unused-enum.rs:3:1\n+  --> $DIR/unused-enum.rs:3:8\n    |\n LL | struct F;\n-   | ^^^^^^^^^\n+   |        ^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-unused-enum.rs:1:9\n+  --> $DIR/unused-enum.rs:1:9\n    |\n LL | #![deny(unused)]\n    |         ^^^^^^\n    = note: `#[deny(dead_code)]` implied by `#[deny(unused)]`\n \n error: struct is never constructed: `B`\n-  --> $DIR/lint-dead-code-unused-enum.rs:4:1\n+  --> $DIR/unused-enum.rs:4:8\n    |\n LL | struct B;\n-   | ^^^^^^^^^\n+   |        ^\n \n error: enum is never used: `E`\n-  --> $DIR/lint-dead-code-unused-enum.rs:6:1\n+  --> $DIR/unused-enum.rs:6:6\n    |\n LL | enum E {\n-   | ^^^^^^\n+   |      ^\n \n error: aborting due to 3 previous errors\n ", "previous_filename": "src/test/ui/lint/lint-dead-code-unused-enum.stderr"}, {"sha": "69ab29042e5a4594af22ae47c115a02abff112d1", "filename": "src/test/ui/lint/dead-code/unused-struct-variant.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-unused-variant.rs"}, {"sha": "0037592e3de068214eb966a03170872ad9f546ec", "filename": "src/test/ui/lint/dead-code/unused-struct-variant.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-struct-variant.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: variant is never constructed: `Bar`\n-  --> $DIR/lint-dead-code-unused-variant.rs:8:5\n+  --> $DIR/unused-struct-variant.rs:8:5\n    |\n LL |     Bar(B),\n    |     ^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-unused-variant.rs:1:9\n+  --> $DIR/unused-struct-variant.rs:1:9\n    |\n LL | #![deny(unused)]\n    |         ^^^^^^", "previous_filename": "src/test/ui/lint/lint-dead-code-unused-variant.stderr"}, {"sha": "3a9061340eb812a66844cf2a198d334780d9afa6", "filename": "src/test/ui/lint/dead-code/unused-variant-pub.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant-pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant-pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant-pub.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-unused-variant-pub.rs"}, {"sha": "295ed16d4cf0beaf1821eadec2c3f0be1bde88ab", "filename": "src/test/ui/lint/dead-code/unused-variant.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/lint/lint-dead-code-variant.rs"}, {"sha": "2167b9d910d94f8c8883405dd69116dc6401943a", "filename": "src/test/ui/lint/dead-code/unused-variant.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Funused-variant.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: variant is never constructed: `Variant1`\n-  --> $DIR/lint-dead-code-variant.rs:5:5\n+  --> $DIR/unused-variant.rs:5:5\n    |\n LL |     Variant1,\n    |     ^^^^^^^^\n    |\n note: lint level defined here\n-  --> $DIR/lint-dead-code-variant.rs:1:9\n+  --> $DIR/unused-variant.rs:1:9\n    |\n LL | #![deny(dead_code)]\n    |         ^^^^^^^^^", "previous_filename": "src/test/ui/lint/lint-dead-code-variant.stderr"}, {"sha": "bc74e807783e1acda52c56d9a8523557d63f2b60", "filename": "src/test/ui/lint/dead-code/with-core-crate.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/fail-no-dead-code-core.rs"}, {"sha": "0b6ab67d9bfa5e90a1ce496afdb44e7691ff6edf", "filename": "src/test/ui/lint/dead-code/with-core-crate.stderr", "status": "renamed", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-core-crate.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,11 +1,11 @@\n error: function is never used: `foo`\n-  --> $DIR/fail-no-dead-code-core.rs:7:1\n+  --> $DIR/with-core-crate.rs:7:4\n    |\n LL | fn foo() {\n-   | ^^^^^^^^\n+   |    ^^^\n    |\n note: lint level defined here\n-  --> $DIR/fail-no-dead-code-core.rs:1:9\n+  --> $DIR/with-core-crate.rs:1:9\n    |\n LL | #![deny(dead_code)]\n    |         ^^^^^^^^^", "previous_filename": "src/test/ui/fail-no-dead-code-core.stderr"}, {"sha": "84829c98e573908cdddc1a50890d25680ceca2b3", "filename": "src/test/ui/lint/dead-code/with-impl.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fdead-code%2Fwith-impl.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-impl.rs"}, {"sha": "86bcb08de404eddcc04839b11c2cdfe2b96652af", "filename": "src/test/ui/path-lookahead.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fpath-lookahead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fpath-lookahead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpath-lookahead.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,14 +1,14 @@\n // run-pass\n-\n-#![warn(unused)]\n+#![allow(dead_code)]\n+#![warn(unused_parens)]\n \n // Parser test for #37765\n \n-fn with_parens<T: ToString>(arg: T) -> String { //~WARN function is never used: `with_parens`\n+fn with_parens<T: ToString>(arg: T) -> String {\n   return (<T as ToString>::to_string(&arg)); //~WARN unnecessary parentheses around `return` value\n }\n \n-fn no_parens<T: ToString>(arg: T) -> String { //~WARN function is never used: `no_parens`\n+fn no_parens<T: ToString>(arg: T) -> String {\n   return <T as ToString>::to_string(&arg);\n }\n "}, {"sha": "caf9e8303ea37b4005f1dcf26d17df36198afed2", "filename": "src/test/ui/path-lookahead.stderr", "status": "modified", "additions": 2, "deletions": 22, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fpath-lookahead.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fpath-lookahead.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpath-lookahead.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -7,26 +7,6 @@ LL |   return (<T as ToString>::to_string(&arg));\n note: lint level defined here\n   --> $DIR/path-lookahead.rs:3:9\n    |\n-LL | #![warn(unused)]\n-   |         ^^^^^^\n-   = note: `#[warn(unused_parens)]` implied by `#[warn(unused)]`\n-\n-warning: function is never used: `with_parens`\n-  --> $DIR/path-lookahead.rs:7:1\n-   |\n-LL | fn with_parens<T: ToString>(arg: T) -> String {\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-note: lint level defined here\n-  --> $DIR/path-lookahead.rs:3:9\n-   |\n-LL | #![warn(unused)]\n-   |         ^^^^^^\n-   = note: `#[warn(dead_code)]` implied by `#[warn(unused)]`\n-\n-warning: function is never used: `no_parens`\n-  --> $DIR/path-lookahead.rs:11:1\n-   |\n-LL | fn no_parens<T: ToString>(arg: T) -> String {\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(unused_parens)]\n+   |         ^^^^^^^^^^^^^\n "}, {"sha": "d4d5bc1cbc8f133bb80db0c275d03908490fefb6", "filename": "src/test/ui/span/unused-warning-point-at-identifier.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -20,8 +20,8 @@ fn func() -> usize { //~ WARN function is never used\n     3\n }\n \n-fn //~ WARN function is never used\n-func_complete_span()\n+fn\n+func_complete_span() //~ WARN function is never used\n -> usize\n {\n     3", "previous_filename": "src/test/ui/span/unused-warning-point-at-signature.rs"}, {"sha": "a4715d4adeb8842ca472f2060b27a81c213497a4", "filename": "src/test/ui/span/unused-warning-point-at-identifier.stderr", "status": "renamed", "additions": 10, "deletions": 15, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Funused-warning-point-at-identifier.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,36 +1,31 @@\n warning: enum is never used: `Enum`\n-  --> $DIR/unused-warning-point-at-signature.rs:5:1\n+  --> $DIR/unused-warning-point-at-identifier.rs:5:6\n    |\n LL | enum Enum {\n-   | ^^^^^^^^^\n+   |      ^^^^\n    |\n note: lint level defined here\n-  --> $DIR/unused-warning-point-at-signature.rs:3:9\n+  --> $DIR/unused-warning-point-at-identifier.rs:3:9\n    |\n LL | #![warn(unused)]\n    |         ^^^^^^\n    = note: `#[warn(dead_code)]` implied by `#[warn(unused)]`\n \n warning: struct is never constructed: `Struct`\n-  --> $DIR/unused-warning-point-at-signature.rs:12:1\n+  --> $DIR/unused-warning-point-at-identifier.rs:12:8\n    |\n LL | struct Struct {\n-   | ^^^^^^^^^^^^^\n+   |        ^^^^^^\n \n warning: function is never used: `func`\n-  --> $DIR/unused-warning-point-at-signature.rs:19:1\n+  --> $DIR/unused-warning-point-at-identifier.rs:19:4\n    |\n LL | fn func() -> usize {\n-   | ^^^^^^^^^^^^^^^^^^\n+   |    ^^^^\n \n warning: function is never used: `func_complete_span`\n-  --> $DIR/unused-warning-point-at-signature.rs:23:1\n+  --> $DIR/unused-warning-point-at-identifier.rs:24:1\n    |\n-LL | / fn\n-LL | | func_complete_span()\n-LL | | -> usize\n-LL | | {\n-LL | |     3\n-LL | | }\n-   | |_^\n+LL | func_complete_span()\n+   | ^^^^^^^^^^^^^^^^^^\n ", "previous_filename": "src/test/ui/span/unused-warning-point-at-signature.stderr"}, {"sha": "cb118cdb4103c21a6998f8a7616eaa8500c57815", "filename": "src/test/ui/test-attrs/test-warns-dead-code.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-warns-dead-code.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-warns-dead-code.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftest-attrs%2Ftest-warns-dead-code.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,8 +1,8 @@\n error: function is never used: `dead`\n-  --> $DIR/test-warns-dead-code.rs:5:1\n+  --> $DIR/test-warns-dead-code.rs:5:4\n    |\n LL | fn dead() {}\n-   | ^^^^^^^^^\n+   |    ^^^^\n    |\n note: lint level defined here\n   --> $DIR/test-warns-dead-code.rs:3:9"}, {"sha": "e5ed09c600bf9618d0d04567c8ed983738423879", "filename": "src/test/ui/thread-local-not-in-prelude.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fthread-local-not-in-prelude.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Fthread-local-not-in-prelude.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fthread-local-not-in-prelude.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,5 +1,4 @@\n // run-pass\n-\n #![no_std]\n \n extern crate std;"}, {"sha": "fad35794fae78b73b0eddc93217753f6ace66a0f", "filename": "src/test/ui/unreachable-code-ret.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Funreachable-code-ret.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Funreachable-code-ret.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funreachable-code-ret.rs?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "previous_filename": "src/test/ui/dead-code-ret.rs"}, {"sha": "c22342ce7218de22bc00bbaeea50c983a16ac959", "filename": "src/test/ui/unreachable-code-ret.stderr", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Funreachable-code-ret.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/61a551b4939ec1d5596e585351038b8fbd0124ba/src%2Ftest%2Fui%2Funreachable-code-ret.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funreachable-code-ret.stderr?ref=61a551b4939ec1d5596e585351038b8fbd0124ba", "patch": "@@ -1,13 +1,13 @@\n error: unreachable statement\n-  --> $DIR/dead-code-ret.rs:7:5\n+  --> $DIR/unreachable-code-ret.rs:7:5\n    |\n LL |     return;\n    |     ------ any code following this expression is unreachable\n LL |     println!(\"Paul is dead\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^ unreachable statement\n    |\n note: lint level defined here\n-  --> $DIR/dead-code-ret.rs:3:9\n+  --> $DIR/unreachable-code-ret.rs:3:9\n    |\n LL | #![deny(unreachable_code)]\n    |         ^^^^^^^^^^^^^^^^", "previous_filename": "src/test/ui/dead-code-ret.stderr"}]}