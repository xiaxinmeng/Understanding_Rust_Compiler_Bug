{"sha": "5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmYTk3OGZhMWI4Mzc3Nzg2YjNmNmJkMWZmNGViNGI5MjYzOWZjOGM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-10-05T00:29:25Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-05T00:29:25Z"}, "message": "Rollup merge of #75928 - JulianKnodt:non_utf8, r=estebank\n\nRemove trait_selection error message in specific case\n\nIn the case that a trait is not implemented for an ADT with type errors, cancel the error.\n\nFixes #75627", "tree": {"sha": "3dda68afa7e09086ff6eea28c441f733b6c9daac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3dda68afa7e09086ff6eea28c441f733b6c9daac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfemjmCRBK7hj4Ov3rIwAAdHIIACk5WU8mqtK4x3H6h0NhcfNt\nqBxzAVtgE+zh2SIu132RF3AZGeZ2vkIoWZMHCjCy3gvJl7qackWNkYZucydpXESX\n1JB99QVa7nsJr5UQMXOnS/hAsptoh+0fTisJBceDE4gPWjfAckc81gMKnbAHDm8y\nhSOTJ5Ht0ZzH7U/48J3EOgBNpxGUix9z2v+tobVQ4U4p6siE8By3hX4Rxlbrrpck\nY27JCKR4aQ3YjXfXCyhVOiOWfluketqjVjdCQ4tOdf71ZlcIRGtrIIlhyN4V0iLk\nk/kUggqQ+6ToDdoGJw7ShdTHjKdpg7cED6n1TUhiRk1zRzW/mSb4NzOLxKjTVPA=\n=VuIO\n-----END PGP SIGNATURE-----\n", "payload": "tree 3dda68afa7e09086ff6eea28c441f733b6c9daac\nparent 6c9e85726c46254f0bb1b23d781c4c1b8a11e797\nparent 8894b366fdb976a703fe76010f6e56c591cada1f\nauthor Dylan DPC <dylan.dpc@gmail.com> 1601857765 +0200\ncommitter GitHub <noreply@github.com> 1601857765 +0200\n\nRollup merge of #75928 - JulianKnodt:non_utf8, r=estebank\n\nRemove trait_selection error message in specific case\n\nIn the case that a trait is not implemented for an ADT with type errors, cancel the error.\n\nFixes #75627\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "html_url": "https://github.com/rust-lang/rust/commit/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c9e85726c46254f0bb1b23d781c4c1b8a11e797", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c9e85726c46254f0bb1b23d781c4c1b8a11e797", "html_url": "https://github.com/rust-lang/rust/commit/6c9e85726c46254f0bb1b23d781c4c1b8a11e797"}, {"sha": "8894b366fdb976a703fe76010f6e56c591cada1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8894b366fdb976a703fe76010f6e56c591cada1f", "html_url": "https://github.com/rust-lang/rust/commit/8894b366fdb976a703fe76010f6e56c591cada1f"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "967374ffdc2c01f5ce541d45a07465d0822f7065", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "patch": "@@ -1907,6 +1907,11 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n             ObligationCauseCode::BuiltinDerivedObligation(ref data) => {\n                 let parent_trait_ref = self.resolve_vars_if_possible(&data.parent_trait_ref);\n                 let ty = parent_trait_ref.skip_binder().self_ty();\n+                if parent_trait_ref.references_error() {\n+                    err.cancel();\n+                    return;\n+                }\n+\n                 err.note(&format!(\"required because it appears within the type `{}`\", ty));\n                 obligated_types.push(ty);\n "}, {"sha": "93a2ec1cc50c33e019d50d3b7544af732f97974d", "filename": "src/test/ui/traits/issue-75627.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.rs?ref=5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "patch": "@@ -0,0 +1,6 @@\n+struct Foo<T>(T, *const ());\n+\n+unsafe impl Send for Foo<T> {}\n+//~^ ERROR cannot find type\n+\n+fn main() {}"}, {"sha": "92d9ac0f84c990a622e6fb149688f595c1835f60", "filename": "src/test/ui/traits/issue-75627.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fissue-75627.stderr?ref=5fa978fa1b8377786b3f6bd1ff4eb4b92639fc8c", "patch": "@@ -0,0 +1,9 @@\n+error[E0412]: cannot find type `T` in this scope\n+  --> $DIR/issue-75627.rs:3:26\n+   |\n+LL | unsafe impl Send for Foo<T> {}\n+   |                          ^ not found in this scope\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0412`."}]}