{"sha": "fa374f91a1f3ca7950e32a83ea61fae48338feb4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhMzc0ZjkxYTFmM2NhNzk1MGUzMmE4M2VhNjFmYWU0ODMzOGZlYjQ=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-06T08:25:42Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-06T12:52:34Z"}, "message": "Rollup merge of #48761 - frewsxcv:frewsxcv-rm-python, r=alexcrichton\n\nRemove seemingly unused sugarise-doc-comments Python script.\n\nThis Python script converts documentation comments from the\n`#[doc = \"...\"]` attribute to the `///` syntax. It was added six\nyears ago, presumably to help with the transition when `///` was\nimplemented and hasn't really been touched since. I don't think there's\nmuch value in keeping it around at this point.", "tree": {"sha": "8e501c41fa8f210e52ae3ab06bd4f83f65ccc27a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e501c41fa8f210e52ae3ab06bd4f83f65ccc27a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa374f91a1f3ca7950e32a83ea61fae48338feb4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlqejxIACgkQ/vbIBR0O\nATyi7g/8DjPITiIHNUdYBqnPhxM377LZm+xOJyDJ2dLvAKZWlroJnCs3goNVqFif\ny3PuR1cRzpaO0JLDiMkbT4tqfj4TaH+8Q/CJ14dCsj6w/w6uk8K0HKPNFgmb5s+Q\nUxyR2OyWEjlKliX6gsMeWpBzYZJehik/pfzDbWvm7iDLh6ifKusPxi38R+2OERzm\nrsyvbt0nN+ywQxzl0eMMCErz+8/5+R5LMYkqUc6KW1z8uwASI8xsoEwG9KE84Gxt\n8osk+wYd5hmU+F7J6sOoUbHTze2DbRsY+et9eRZ+wxiGugOrgdWa79UrqHWRKnhH\nvDZoqnm8B8UES8q4NggkIojwM8vHKSY6Qs3C+Hlw5CEZyHUis1qKXkIRSbEPUBQR\nAG4Pk7KVGO2RAAEM3zY8lBjHcXCcs4pDlvViHKbnYqco4ykjxtVnW11GEh9ZetTT\nZW3tm0cfEYARyJtygZf2Ow6fBfxRJk8Y1bzNzAZKGm1+/0z0QUgi9ZjuROl8N8H2\n3nj21lOxnf+lHJcQQbhazjgcrio/yB9VB2KMfHP25EVE4UL6jhzyEPEMNxDRm4IN\nA7eExHRVfsBjuaGUK+TsKOYM+Hivm9rIQf3bpDXzittUpHYWuJX64b8BlUB6Kna4\n1BdL3exTmSKswbDqGdONTGtJSfaxFIG8oZIEyqj7LM8b63mAei0=\n=haBx\n-----END PGP SIGNATURE-----", "payload": "tree 8e501c41fa8f210e52ae3ab06bd4f83f65ccc27a\nparent b691c521bb079dda26b9d37d00662fafeb87f783\nparent 2ec47e07ee933f9497185fc111b3501b8648aef5\nauthor kennytm <kennytm@gmail.com> 1520324742 +0800\ncommitter kennytm <kennytm@gmail.com> 1520340754 +0800\n\nRollup merge of #48761 - frewsxcv:frewsxcv-rm-python, r=alexcrichton\n\nRemove seemingly unused sugarise-doc-comments Python script.\n\nThis Python script converts documentation comments from the\n`#[doc = \"...\"]` attribute to the `///` syntax. It was added six\nyears ago, presumably to help with the transition when `///` was\nimplemented and hasn't really been touched since. I don't think there's\nmuch value in keeping it around at this point.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa374f91a1f3ca7950e32a83ea61fae48338feb4", "html_url": "https://github.com/rust-lang/rust/commit/fa374f91a1f3ca7950e32a83ea61fae48338feb4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa374f91a1f3ca7950e32a83ea61fae48338feb4/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b691c521bb079dda26b9d37d00662fafeb87f783", "url": "https://api.github.com/repos/rust-lang/rust/commits/b691c521bb079dda26b9d37d00662fafeb87f783", "html_url": "https://github.com/rust-lang/rust/commit/b691c521bb079dda26b9d37d00662fafeb87f783"}, {"sha": "2ec47e07ee933f9497185fc111b3501b8648aef5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ec47e07ee933f9497185fc111b3501b8648aef5", "html_url": "https://github.com/rust-lang/rust/commit/2ec47e07ee933f9497185fc111b3501b8648aef5"}], "stats": {"total": 93, "additions": 0, "deletions": 93}, "files": [{"sha": "ac2223f4acef3052d32d35689b90eb1227ca4a19", "filename": "src/etc/sugarise-doc-comments.py", "status": "removed", "additions": 0, "deletions": 93, "changes": 93, "blob_url": "https://github.com/rust-lang/rust/blob/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Fetc%2Fsugarise-doc-comments.py", "raw_url": "https://github.com/rust-lang/rust/raw/b691c521bb079dda26b9d37d00662fafeb87f783/src%2Fetc%2Fsugarise-doc-comments.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsugarise-doc-comments.py?ref=b691c521bb079dda26b9d37d00662fafeb87f783", "patch": "@@ -1,93 +0,0 @@\n-#!/usr/bin/env python\n-#\n-# Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n-\n-#\n-# this script attempts to turn doc comment attributes (#[doc = \"...\"])\n-# into sugared-doc-comments (/** ... */ and /// ...)\n-#\n-# it sugarises all .rs/.rc files underneath the working directory\n-#\n-\n-import sys\n-import os\n-import fnmatch\n-import re\n-\n-\n-DOC_PATTERN = '^(?P<indent>[\\\\t ]*)#\\\\[(\\\\s*)doc(\\\\s*)=' + \\\n-              '(\\\\s*)\"(?P<text>(\\\\\"|[^\"])*?)\"(\\\\s*)\\\\]' + \\\n-              '(?P<semi>;)?'\n-\n-ESCAPES = [(\"\\\\'\", \"'\"),\n-           ('\\\\\"', '\"'),\n-           (\"\\\\n\", \"\\n\"),\n-           (\"\\\\r\", \"\\r\"),\n-           (\"\\\\t\", \"\\t\")]\n-\n-\n-def unescape(s):\n-    for (find, repl) in ESCAPES:\n-        s = s.replace(find, repl)\n-    return s\n-\n-\n-def block_trim(s):\n-    lns = s.splitlines()\n-\n-    # remove leading/trailing whitespace-lines\n-    while lns and not lns[0].strip():\n-        lns = lns[1:]\n-    while lns and not lns[-1].strip():\n-        lns = lns[:-1]\n-\n-    # remove leading horizontal whitespace\n-    n = sys.maxsize\n-    for ln in lns:\n-        if ln.strip():\n-            n = min(n, len(re.search('^\\s*', ln).group()))\n-    if n != sys.maxsize:\n-        lns = [ln[n:] for ln in lns]\n-\n-    # strip trailing whitespace\n-    lns = [ln.rstrip() for ln in lns]\n-\n-    return lns\n-\n-\n-def replace_doc(m):\n-    indent = m.group('indent')\n-    text = block_trim(unescape(m.group('text')))\n-\n-    if len(text) > 1:\n-        inner = '!' if m.group('semi') else '*'\n-        starify = lambda s: indent + ' *' + (' ' + s if s else '')\n-        text = '\\n'.join(map(starify, text))\n-        repl = indent + '/*' + inner + '\\n' + text + '\\n' + indent + ' */'\n-    else:\n-        inner = '!' if m.group('semi') else '/'\n-        repl = indent + '//' + inner + ' ' + text[0]\n-\n-    return repl\n-\n-\n-def sugarise_file(path):\n-    s = open(path).read()\n-\n-    r = re.compile(DOC_PATTERN, re.MULTILINE | re.DOTALL)\n-    ns = re.sub(r, replace_doc, s)\n-\n-    if s != ns:\n-        open(path, 'w').write(ns)\n-\n-for (dirpath, dirnames, filenames) in os.walk('.'):\n-    for name in fnmatch.filter(filenames, '*.r[sc]'):\n-        sugarise_file(os.path.join(dirpath, name))"}]}