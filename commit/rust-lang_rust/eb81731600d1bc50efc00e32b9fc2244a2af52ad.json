{"sha": "eb81731600d1bc50efc00e32b9fc2244a2af52ad", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViODE3MzE2MDBkMWJjNTBlZmMwMGUzMmI5ZmMyMjQ0YTJhZjUyYWQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-18T14:22:01Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-18T14:22:01Z"}, "message": "Minor", "tree": {"sha": "a19bf046c3952221c5a58a077d8a2fdd82fc8d0c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a19bf046c3952221c5a58a077d8a2fdd82fc8d0c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eb81731600d1bc50efc00e32b9fc2244a2af52ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eb81731600d1bc50efc00e32b9fc2244a2af52ad", "html_url": "https://github.com/rust-lang/rust/commit/eb81731600d1bc50efc00e32b9fc2244a2af52ad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eb81731600d1bc50efc00e32b9fc2244a2af52ad/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0866b1be894b9148cf69897a1e1aa70e3c416e29", "url": "https://api.github.com/repos/rust-lang/rust/commits/0866b1be894b9148cf69897a1e1aa70e3c416e29", "html_url": "https://github.com/rust-lang/rust/commit/0866b1be894b9148cf69897a1e1aa70e3c416e29"}], "stats": {"total": 76, "additions": 40, "deletions": 36}, "files": [{"sha": "1f85805d223aebbed16e03700231af4a2d665fc3", "filename": "crates/ide/src/diagnostics.rs", "status": "modified", "additions": 32, "deletions": 3, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdiagnostics.rs?ref=eb81731600d1bc50efc00e32b9fc2244a2af52ad", "patch": "@@ -4,7 +4,7 @@\n //! macro-expanded files, but we need to present them to the users in terms of\n //! original files. So we need to map the ranges.\n \n-mod diagnostics_with_fix;\n+mod fixes;\n \n use std::cell::RefCell;\n \n@@ -19,9 +19,38 @@ use syntax::{\n };\n use text_edit::TextEdit;\n \n-use crate::{Diagnostic, FileId, Fix, SourceFileEdit};\n+use crate::{FileId, SourceChange, SourceFileEdit};\n \n-use self::diagnostics_with_fix::DiagnosticWithFix;\n+use self::fixes::DiagnosticWithFix;\n+\n+#[derive(Debug)]\n+pub struct Diagnostic {\n+    pub name: Option<String>,\n+    pub message: String,\n+    pub range: TextRange,\n+    pub severity: Severity,\n+    pub fix: Option<Fix>,\n+}\n+\n+#[derive(Debug)]\n+pub struct Fix {\n+    pub label: String,\n+    pub source_change: SourceChange,\n+    /// Allows to trigger the fix only when the caret is in the range given\n+    pub fix_trigger_range: TextRange,\n+}\n+\n+impl Fix {\n+    fn new(\n+        label: impl Into<String>,\n+        source_change: SourceChange,\n+        fix_trigger_range: TextRange,\n+    ) -> Self {\n+        let label = label.into();\n+        assert!(label.starts_with(char::is_uppercase) && !label.ends_with('.'));\n+        Self { label, source_change, fix_trigger_range }\n+    }\n+}\n \n #[derive(Debug, Copy, Clone)]\n pub enum Severity {"}, {"sha": "68ae1c23981cafab09872037b9f35dc1619fe26b", "filename": "crates/ide/src/diagnostics/fixes.rs", "status": "renamed", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fdiagnostics%2Ffixes.rs?ref=eb81731600d1bc50efc00e32b9fc2244a2af52ad", "patch": "@@ -1,7 +1,5 @@\n //! Provides a way to attach fixes to the diagnostics.\n //! The same module also has all curret custom fixes for the diagnostics implemented.\n-use crate::Fix;\n-use ast::{edit::IndentLevel, make};\n use base_db::FileId;\n use hir::{\n     db::AstDatabase,\n@@ -12,9 +10,15 @@ use ide_db::{\n     source_change::{FileSystemEdit, SourceFileEdit},\n     RootDatabase,\n };\n-use syntax::{algo, ast, AstNode};\n+use syntax::{\n+    algo,\n+    ast::{self, edit::IndentLevel, make},\n+    AstNode,\n+};\n use text_edit::TextEdit;\n \n+use crate::diagnostics::Fix;\n+\n /// A [Diagnostic] that potentially has a fix available.\n ///\n /// [Diagnostic]: hir::diagnostics::Diagnostic", "previous_filename": "crates/ide/src/diagnostics/diagnostics_with_fix.rs"}, {"sha": "f37119e28bddc4ed4f6128378025223367f8bc7c", "filename": "crates/ide/src/lib.rs", "status": "modified", "additions": 1, "deletions": 30, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb81731600d1bc50efc00e32b9fc2244a2af52ad/crates%2Fide%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Flib.rs?ref=eb81731600d1bc50efc00e32b9fc2244a2af52ad", "patch": "@@ -65,7 +65,7 @@ pub use crate::{\n     completion::{\n         CompletionConfig, CompletionItem, CompletionItemKind, CompletionScore, InsertTextFormat,\n     },\n-    diagnostics::{DiagnosticsConfig, Severity},\n+    diagnostics::{Diagnostic, DiagnosticsConfig, Fix, Severity},\n     display::NavigationTarget,\n     expand_macro::ExpandedMacro,\n     file_structure::StructureNode,\n@@ -99,35 +99,6 @@ pub use text_edit::{Indel, TextEdit};\n \n pub type Cancelable<T> = Result<T, Canceled>;\n \n-#[derive(Debug)]\n-pub struct Diagnostic {\n-    pub name: Option<String>,\n-    pub message: String,\n-    pub range: TextRange,\n-    pub severity: Severity,\n-    pub fix: Option<Fix>,\n-}\n-\n-#[derive(Debug)]\n-pub struct Fix {\n-    pub label: String,\n-    pub source_change: SourceChange,\n-    /// Allows to trigger the fix only when the caret is in the range given\n-    pub fix_trigger_range: TextRange,\n-}\n-\n-impl Fix {\n-    pub fn new(\n-        label: impl Into<String>,\n-        source_change: SourceChange,\n-        fix_trigger_range: TextRange,\n-    ) -> Self {\n-        let label = label.into();\n-        assert!(label.starts_with(char::is_uppercase) && !label.ends_with('.'));\n-        Self { label, source_change, fix_trigger_range }\n-    }\n-}\n-\n /// Info associated with a text range.\n #[derive(Debug)]\n pub struct RangeInfo<T> {"}]}