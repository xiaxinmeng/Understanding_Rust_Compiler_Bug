{"sha": "6e42ca187fa8fc70c8cd0571348da4b3d0021513", "node_id": "C_kwDOAAsO6NoAKDZlNDJjYTE4N2ZhOGZjNzBjOGNkMDU3MTM0OGRhNGIzZDAwMjE1MTM", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-13T13:39:10Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-13T13:39:10Z"}, "message": "Sync from rust 4800c7816ee1937d028407066d229f74b4673c92", "tree": {"sha": "443b3545c01391544c5488095fc68fd96837e57c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/443b3545c01391544c5488095fc68fd96837e57c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e42ca187fa8fc70c8cd0571348da4b3d0021513", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e42ca187fa8fc70c8cd0571348da4b3d0021513", "html_url": "https://github.com/rust-lang/rust/commit/6e42ca187fa8fc70c8cd0571348da4b3d0021513", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e42ca187fa8fc70c8cd0571348da4b3d0021513/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2026d679e33252cf6e2569ae052b0c54518e24a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2026d679e33252cf6e2569ae052b0c54518e24a", "html_url": "https://github.com/rust-lang/rust/commit/d2026d679e33252cf6e2569ae052b0c54518e24a"}, {"sha": "e439761b8fe67f39c1a987fae10433b9a29c045a", "url": "https://api.github.com/repos/rust-lang/rust/commits/e439761b8fe67f39c1a987fae10433b9a29c045a", "html_url": "https://github.com/rust-lang/rust/commit/e439761b8fe67f39c1a987fae10433b9a29c045a"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "89fd0bfa8bbfa2f7fe4b99415d35a8b0efd94c28", "filename": "src/common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcommon.rs?ref=6e42ca187fa8fc70c8cd0571348da4b3d0021513", "patch": "@@ -67,7 +67,7 @@ fn clif_type_from_ty<'tcx>(tcx: TyCtxt<'tcx>, ty: Ty<'tcx>) -> Option<types::Typ\n                 pointer_ty(tcx)\n             }\n         }\n-        ty::Adt(adt_def, _) if adt_def.repr.simd() => {\n+        ty::Adt(adt_def, _) if adt_def.repr().simd() => {\n             let (element, count) = match &tcx.layout_of(ParamEnv::reveal_all().and(ty)).unwrap().abi\n             {\n                 Abi::Vector { element, count } => (element.clone(), *count),"}, {"sha": "fd63c3ecddbdfd9cdb2365ca0aec9bca6bc18d5e", "filename": "src/unsize.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Funsize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Funsize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Funsize.rs?ref=6e42ca187fa8fc70c8cd0571348da4b3d0021513", "patch": "@@ -127,7 +127,7 @@ pub(crate) fn coerce_unsized_into<'tcx>(\n         (&ty::Adt(def_a, _), &ty::Adt(def_b, _)) => {\n             assert_eq!(def_a, def_b);\n \n-            for i in 0..def_a.variants[VariantIdx::new(0)].fields.len() {\n+            for i in 0..def_a.variant(VariantIdx::new(0)).fields.len() {\n                 let src_f = src.value_field(fx, mir::Field::new(i));\n                 let dst_f = dst.place_field(fx, mir::Field::new(i));\n \n@@ -200,7 +200,7 @@ pub(crate) fn size_and_align_of_dst<'tcx>(\n \n             // Packed types ignore the alignment of their fields.\n             if let ty::Adt(def, _) = layout.ty.kind() {\n-                if def.repr.packed() {\n+                if def.repr().packed() {\n                     unsized_align = sized_align;\n                 }\n             }"}, {"sha": "afe8797a0300969ef7901b36142a2f9841a8b640", "filename": "src/value_and_place.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Fvalue_and_place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e42ca187fa8fc70c8cd0571348da4b3d0021513/src%2Fvalue_and_place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvalue_and_place.rs?ref=6e42ca187fa8fc70c8cd0571348da4b3d0021513", "patch": "@@ -24,7 +24,7 @@ fn codegen_field<'tcx>(\n         }\n         match field_layout.ty.kind() {\n             ty::Slice(..) | ty::Str | ty::Foreign(..) => simple(fx),\n-            ty::Adt(def, _) if def.repr.packed() => {\n+            ty::Adt(def, _) if def.repr().packed() => {\n                 assert_eq!(layout.align.abi.bytes(), 1);\n                 simple(fx)\n             }\n@@ -816,7 +816,7 @@ pub(crate) fn assert_assignable<'tcx>(\n             // dyn for<'r> Trait<'r> -> dyn Trait<'_> is allowed\n         }\n         (&ty::Adt(adt_def_a, substs_a), &ty::Adt(adt_def_b, substs_b))\n-            if adt_def_a.did == adt_def_b.did =>\n+            if adt_def_a.did() == adt_def_b.did() =>\n         {\n             let mut types_a = substs_a.types();\n             let mut types_b = substs_b.types();"}]}