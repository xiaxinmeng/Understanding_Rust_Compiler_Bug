{"sha": "bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "node_id": "C_kwDOAAsO6NoAKGJmOWIzOWFlN2RmNWNjYTQxOGZkMmFmYzI1YjMwYTU2MzJiMzJjMjM", "commit": {"author": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2022-06-30T08:28:04Z"}, "committer": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2022-06-30T08:28:04Z"}, "message": "Fix dogfood", "tree": {"sha": "faa195808c3128e84e4af60a7bb2aceaef068799", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/faa195808c3128e84e4af60a7bb2aceaef068799"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEij1UXJ/PQTcb99vTHKDfKvWdaKUFAmK9XpQACgkQHKDfKvWd\naKUODg//b5nCU17RICbqwe16zskQR2UaDrc0/JgE47+5ujjuPK5aT9GDe8Z8fU/G\nGN/MUQSRi4XrfURWmyPZqJTeME0ebBtrFrKSu5cE7MZHpnadQJVM5jZjrVGcK/cb\nM3KjxPA/n0rvu/0AKgHxuqIr6YzQUuvCmfjwgCwvvYiCrLbwpLyiq+l9OWAMul/7\na9Z+LDeDDK95WJXZi5k025ZQSwfya6Ujm6iryiUw0/mDQ4Vzy0JRTBnKhTx1t7q0\nc+OunxntuOJcrmB2pnTfhgngvpOAW9iabiu7mK355vbOZMW6K5zZsgVV40P0I2u8\n+b9BrRp7x6JNS5U2EhazZXBqA6dcEOv3kRDNo8hXoUYwewFGFOk+O0IFxkKACoqE\n5B0PAfzJgZypeZS2yKtMmWmUidJ7JCDfz8h7FzvTUSzdYlOjBpLKOIY+OUhBBFYU\nJJRsM2erC02yG+8Vr8T5kPelBCbhufCrwfsOsrdFBA0+wjM/QAdi+OrE5A/hHG9K\naBCF1IwZ4NT/1Hbws4pHD2w2fg4IhJKav1XinBr4z3B6sWroRkKudloYKIEfPXd2\nc0ClPKKMJHF4qfvmWbr8sWWkUvQPNDoeiADFMjNpqA333JjTqg24+GScvmtOnltX\nPmZHCUO+3BTpHmJgMZHU/LSC2wk0S9PgPj7VYMOXI67Jl+WACSw=\n=f2/6\n-----END PGP SIGNATURE-----", "payload": "tree faa195808c3128e84e4af60a7bb2aceaef068799\nparent f26cf11fe88e1b5bb51d0bd7515941fe51d5739d\nauthor Philipp Krones <hello@philkrones.com> 1656577684 +0200\ncommitter Philipp Krones <hello@philkrones.com> 1656577684 +0200\n\nFix dogfood\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "html_url": "https://github.com/rust-lang/rust/commit/bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf9b39ae7df5cca418fd2afc25b30a5632b32c23/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f26cf11fe88e1b5bb51d0bd7515941fe51d5739d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f26cf11fe88e1b5bb51d0bd7515941fe51d5739d", "html_url": "https://github.com/rust-lang/rust/commit/f26cf11fe88e1b5bb51d0bd7515941fe51d5739d"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "793e3cc58c21dba57339fb431899bef7e2bdf523", "filename": "clippy_utils/src/hir_utils.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bf9b39ae7df5cca418fd2afc25b30a5632b32c23/clippy_utils%2Fsrc%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf9b39ae7df5cca418fd2afc25b30a5632b32c23/clippy_utils%2Fsrc%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fhir_utils.rs?ref=bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "patch": "@@ -16,6 +16,10 @@ use rustc_middle::ty::TypeckResults;\n use rustc_span::{sym, Symbol};\n use std::hash::{Hash, Hasher};\n \n+/// Callback that is called when two expressions are not equal in the sense of `SpanlessEq`, but\n+/// other conditions would make them equal.\n+type SpanlessEqCallback<'a> = dyn FnMut(&Expr<'_>, &Expr<'_>) -> bool + 'a;\n+\n /// Type used to check whether two ast are the same. This is different from the\n /// operator `==` on ast types as this operator would compare true equality with\n /// ID and span.\n@@ -26,7 +30,7 @@ pub struct SpanlessEq<'a, 'tcx> {\n     cx: &'a LateContext<'tcx>,\n     maybe_typeck_results: Option<(&'tcx TypeckResults<'tcx>, &'tcx TypeckResults<'tcx>)>,\n     allow_side_effects: bool,\n-    expr_fallback: Option<Box<dyn FnMut(&Expr<'_>, &Expr<'_>) -> bool + 'a>>,\n+    expr_fallback: Option<Box<SpanlessEqCallback<'a>>>,\n }\n \n impl<'a, 'tcx> SpanlessEq<'a, 'tcx> {"}, {"sha": "96d542cfe105223b59c13d7b57398de1d7e70d2e", "filename": "src/driver.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bf9b39ae7df5cca418fd2afc25b30a5632b32c23/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf9b39ae7df5cca418fd2afc25b30a5632b32c23/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=bf9b39ae7df5cca418fd2afc25b30a5632b32c23", "patch": "@@ -153,7 +153,8 @@ You can use tool lints to allow or deny lints from your code, eg.:\n \n const BUG_REPORT_URL: &str = \"https://github.com/rust-lang/rust-clippy/issues/new\";\n \n-static ICE_HOOK: LazyLock<Box<dyn Fn(&panic::PanicInfo<'_>) + Sync + Send + 'static>> = LazyLock::new(|| {\n+type PanicCallback = dyn Fn(&panic::PanicInfo<'_>) + Sync + Send + 'static;\n+static ICE_HOOK: LazyLock<Box<PanicCallback>> = LazyLock::new(|| {\n     let hook = panic::take_hook();\n     panic::set_hook(Box::new(|info| report_clippy_ice(info, BUG_REPORT_URL)));\n     hook"}]}