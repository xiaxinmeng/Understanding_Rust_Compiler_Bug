{"sha": "8c09d29d04dabc96a3ae88d914e3b54220952943", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMDlkMjlkMDRkYWJjOTZhM2FlODhkOTE0ZTNiNTQyMjA5NTI5NDM=", "commit": {"author": {"name": "Adam C. Foltzer", "email": "acfoltzer@galois.com", "date": "2018-01-15T21:08:27Z"}, "committer": {"name": "Adam C. Foltzer", "email": "acfoltzer@galois.com", "date": "2018-01-15T21:19:46Z"}, "message": "Add `-Z dep-info-omit-d-target` to control dep-info style\n\nThis avoids a breaking change to dep-info output, putting the\ngcc/clang-compliant dep-info behavior behind a flag", "tree": {"sha": "f5662fe4427898fbac8904e6e924836869be72f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5662fe4427898fbac8904e6e924836869be72f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c09d29d04dabc96a3ae88d914e3b54220952943", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c09d29d04dabc96a3ae88d914e3b54220952943", "html_url": "https://github.com/rust-lang/rust/commit/8c09d29d04dabc96a3ae88d914e3b54220952943", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c09d29d04dabc96a3ae88d914e3b54220952943/comments", "author": null, "committer": null, "parents": [{"sha": "7e99764df351e558aff6c7077e6a942d0818c31b", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e99764df351e558aff6c7077e6a942d0818c31b", "html_url": "https://github.com/rust-lang/rust/commit/7e99764df351e558aff6c7077e6a942d0818c31b"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "eb1a84b9dc720eda842640e08b4bed66e75a94f8", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8c09d29d04dabc96a3ae88d914e3b54220952943/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c09d29d04dabc96a3ae88d914e3b54220952943/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=8c09d29d04dabc96a3ae88d914e3b54220952943", "patch": "@@ -1236,6 +1236,9 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n          overriding the default for the current target\"),\n     human_readable_cgu_names: bool = (false, parse_bool, [TRACKED],\n         \"generate human-readable, predictable names for codegen units\"),\n+    dep_info_omit_d_target: bool = (false, parse_bool, [TRACKED],\n+        \"in dep-info output, omit targets for tracking dependencies of the dep-info files \\\n+         themselves\"),\n }\n \n pub fn default_lib_output() -> CrateType {"}, {"sha": "f7e35ba0081e46300d3d88f7e1193f1db65b5725", "filename": "src/librustc_driver/driver.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8c09d29d04dabc96a3ae88d914e3b54220952943/src%2Flibrustc_driver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c09d29d04dabc96a3ae88d914e3b54220952943/src%2Flibrustc_driver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fdriver.rs?ref=8c09d29d04dabc96a3ae88d914e3b54220952943", "patch": "@@ -1162,8 +1162,9 @@ fn write_out_deps(sess: &Session, outputs: &OutputFilenames, crate_name: &str) {\n                     out_filenames.push(p);\n                 }\n             }\n-            // Do not include the dep-info file in itself as a target\n-            OutputType::DepInfo => { }\n+            OutputType::DepInfo if sess.opts.debugging_opts.dep_info_omit_d_target => {\n+                // Don't add the dep-info output when omitting it from dep-info targets\n+            }\n             _ => {\n                 out_filenames.push(file);\n             }"}]}