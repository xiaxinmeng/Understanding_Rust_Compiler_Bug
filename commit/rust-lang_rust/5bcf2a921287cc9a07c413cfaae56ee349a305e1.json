{"sha": "5bcf2a921287cc9a07c413cfaae56ee349a305e1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViY2YyYTkyMTI4N2NjOWEwN2M0MTNjZmFhZTU2ZWUzNDlhMzA1ZTE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-02-11T22:02:17Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-02-11T22:02:17Z"}, "message": "rollup merge of #22177: semarie/openbsd-notls\n\nOpenBSD doesn't have thread-local-storage support (yet).\nPermit to compile (and run) `check-stage1-crates` under OpenBSD.", "tree": {"sha": "dd967d7b1624c631a8a1a8ea432de7e5a82c74f6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd967d7b1624c631a8a1a8ea432de7e5a82c74f6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bcf2a921287cc9a07c413cfaae56ee349a305e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bcf2a921287cc9a07c413cfaae56ee349a305e1", "html_url": "https://github.com/rust-lang/rust/commit/5bcf2a921287cc9a07c413cfaae56ee349a305e1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bcf2a921287cc9a07c413cfaae56ee349a305e1/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7362bd57a90fa4f9fe730bea5ec2713099a54082", "url": "https://api.github.com/repos/rust-lang/rust/commits/7362bd57a90fa4f9fe730bea5ec2713099a54082", "html_url": "https://github.com/rust-lang/rust/commit/7362bd57a90fa4f9fe730bea5ec2713099a54082"}, {"sha": "92b72222541a86adbadf6661cccc854f9e9cdb39", "url": "https://api.github.com/repos/rust-lang/rust/commits/92b72222541a86adbadf6661cccc854f9e9cdb39", "html_url": "https://github.com/rust-lang/rust/commit/92b72222541a86adbadf6661cccc854f9e9cdb39"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "01220e7bc1fe1d0baf0460af5dab84a342b94e4a", "filename": "src/libstd/thread_local/scoped.rs", "status": "modified", "additions": 22, "deletions": 4, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/5bcf2a921287cc9a07c413cfaae56ee349a305e1/src%2Flibstd%2Fthread_local%2Fscoped.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5bcf2a921287cc9a07c413cfaae56ee349a305e1/src%2Flibstd%2Fthread_local%2Fscoped.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fthread_local%2Fscoped.rs?ref=5bcf2a921287cc9a07c413cfaae56ee349a305e1", "patch": "@@ -81,6 +81,7 @@ macro_rules! __scoped_thread_local_inner {\n         #[cfg_attr(not(any(windows,\n                            target_os = \"android\",\n                            target_os = \"ios\",\n+                           target_os = \"openbsd\",\n                            target_arch = \"aarch64\")),\n                    thread_local)]\n         static $name: ::std::thread_local::scoped::Key<$t> =\n@@ -90,6 +91,7 @@ macro_rules! __scoped_thread_local_inner {\n         #[cfg_attr(not(any(windows,\n                            target_os = \"android\",\n                            target_os = \"ios\",\n+                           target_os = \"openbsd\",\n                            target_arch = \"aarch64\")),\n                    thread_local)]\n         pub static $name: ::std::thread_local::scoped::Key<$t> =\n@@ -98,14 +100,22 @@ macro_rules! __scoped_thread_local_inner {\n     ($t:ty) => ({\n         use std::thread_local::scoped::Key as __Key;\n \n-        #[cfg(not(any(windows, target_os = \"android\", target_os = \"ios\", target_arch = \"aarch64\")))]\n+        #[cfg(not(any(windows,\n+                      target_os = \"android\",\n+                      target_os = \"ios\",\n+                      target_os = \"openbsd\",\n+                      target_arch = \"aarch64\")))]\n         const _INIT: __Key<$t> = __Key {\n             inner: ::std::thread_local::scoped::__impl::KeyInner {\n                 inner: ::std::cell::UnsafeCell { value: 0 as *mut _ },\n             }\n         };\n \n-        #[cfg(any(windows, target_os = \"android\", target_os = \"ios\", target_arch = \"aarch64\"))]\n+        #[cfg(any(windows,\n+                  target_os = \"android\",\n+                  target_os = \"ios\",\n+                  target_os = \"openbsd\",\n+                  target_arch = \"aarch64\"))]\n         const _INIT: __Key<$t> = __Key {\n             inner: ::std::thread_local::scoped::__impl::KeyInner {\n                 inner: ::std::thread_local::scoped::__impl::OS_INIT,\n@@ -205,7 +215,11 @@ impl<T> Key<T> {\n     }\n }\n \n-#[cfg(not(any(windows, target_os = \"android\", target_os = \"ios\", target_arch = \"aarch64\")))]\n+#[cfg(not(any(windows,\n+              target_os = \"android\",\n+              target_os = \"ios\",\n+              target_os = \"openbsd\",\n+              target_arch = \"aarch64\")))]\n mod imp {\n     use std::cell::UnsafeCell;\n \n@@ -223,7 +237,11 @@ mod imp {\n     }\n }\n \n-#[cfg(any(windows, target_os = \"android\", target_os = \"ios\", target_arch = \"aarch64\"))]\n+#[cfg(any(windows,\n+          target_os = \"android\",\n+          target_os = \"ios\",\n+          target_os = \"openbsd\",\n+          target_arch = \"aarch64\"))]\n mod imp {\n     use marker;\n     use sys_common::thread_local::StaticKey as OsStaticKey;"}]}