{"sha": "182044b42502f59bcf3156d5092c565ebb32d59e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4MjA0NGI0MjUwMmY1OWJjZjMxNTZkNTA5MmM1NjVlYmIzMmQ1OWU=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-02T21:50:35Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-10-02T21:50:35Z"}, "message": "rollup merge of #17706 : thestinger/supp", "tree": {"sha": "ba1d26d7502ac3bf7e5ed4c17e0fff374015d5cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ba1d26d7502ac3bf7e5ed4c17e0fff374015d5cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/182044b42502f59bcf3156d5092c565ebb32d59e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/182044b42502f59bcf3156d5092c565ebb32d59e", "html_url": "https://github.com/rust-lang/rust/commit/182044b42502f59bcf3156d5092c565ebb32d59e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/182044b42502f59bcf3156d5092c565ebb32d59e/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f40767a1a75089694952273c65d8abfea72f3564", "url": "https://api.github.com/repos/rust-lang/rust/commits/f40767a1a75089694952273c65d8abfea72f3564", "html_url": "https://github.com/rust-lang/rust/commit/f40767a1a75089694952273c65d8abfea72f3564"}, {"sha": "618e41874a1ef47a6629524016bd8d9ffce617bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/618e41874a1ef47a6629524016bd8d9ffce617bc", "html_url": "https://github.com/rust-lang/rust/commit/618e41874a1ef47a6629524016bd8d9ffce617bc"}], "stats": {"total": 194, "additions": 1, "deletions": 193}, "files": [{"sha": "de06d4917eeb812f0aa0c6332539f090271966f1", "filename": "mk/rt.mk", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/182044b42502f59bcf3156d5092c565ebb32d59e/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/182044b42502f59bcf3156d5092c565ebb32d59e/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=182044b42502f59bcf3156d5092c565ebb32d59e", "patch": "@@ -35,7 +35,7 @@\n # that's per-target so you're allowed to conditionally add files based on the\n # target.\n ################################################################################\n-NATIVE_LIBS := rust_builtin hoedown uv_support morestack miniz context_switch \\\n+NATIVE_LIBS := rust_builtin hoedown morestack miniz context_switch \\\n \t\trustrt_native rust_test_helpers\n \n # $(1) is the target triple\n@@ -50,7 +50,6 @@ NATIVE_DEPS_hoedown_$(1) := hoedown/src/autolink.c \\\n \t\t\thoedown/src/html_smartypants.c \\\n \t\t\thoedown/src/stack.c \\\n \t\t\thoedown/src/version.c\n-NATIVE_DEPS_uv_support_$(1) := rust_uv.c\n NATIVE_DEPS_miniz_$(1) = miniz.c\n NATIVE_DEPS_rust_builtin_$(1) := rust_builtin.c \\\n \t\t\trust_android_dummy.c"}, {"sha": "58eb109d860ed3a0c7ba8bb1085158e5bfe1cba7", "filename": "src/etc/x86.supp", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/182044b42502f59bcf3156d5092c565ebb32d59e/src%2Fetc%2Fx86.supp", "raw_url": "https://github.com/rust-lang/rust/raw/182044b42502f59bcf3156d5092c565ebb32d59e/src%2Fetc%2Fx86.supp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fx86.supp?ref=182044b42502f59bcf3156d5092c565ebb32d59e", "patch": "@@ -373,14 +373,6 @@\n    fun:_ZN4llvm4UsernwEjj\n }\n \n-{\n-   libuv-0-byte-realloc\n-   Memcheck:Leak\n-   fun:malloc\n-   ...\n-   fun:*uv_loop_delete*\n-}\n-\n {\n    race-or-something-ask-pcwalton-0\n    Memcheck:Value4\n@@ -502,15 +494,3 @@\n    fun:*\n    ...\n }\n-\n-{\n-   libuv-mac-no-thread-join\n-   Memcheck:Leak\n-   fun:malloc_zone_malloc\n-   fun:_CFRuntimeCreateInstance\n-   fun:CFRunLoopSourceCreate\n-   fun:uv__platform_loop_init\n-   fun:uv__loop_init\n-   fun:uv_loop_new\n-   ...\n-}"}, {"sha": "8bd7aa54751753bb0bb72e540016f2858e5c19ca", "filename": "src/rt/libuv-auto-clean-trigger", "status": "removed", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f40767a1a75089694952273c65d8abfea72f3564/src%2Frt%2Flibuv-auto-clean-trigger", "raw_url": "https://github.com/rust-lang/rust/raw/f40767a1a75089694952273c65d8abfea72f3564/src%2Frt%2Flibuv-auto-clean-trigger", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Flibuv-auto-clean-trigger?ref=f40767a1a75089694952273c65d8abfea72f3564", "patch": "@@ -1,2 +0,0 @@\n-# Change the contents of this file to force a full rebuild of libuv\n-2014-04-18"}, {"sha": "0739e8b5e112d9a7a32475eb9e4af9dd96b8ffe7", "filename": "src/rt/rust_uv.c", "status": "removed", "additions": 0, "deletions": 169, "changes": 169, "blob_url": "https://github.com/rust-lang/rust/blob/f40767a1a75089694952273c65d8abfea72f3564/src%2Frt%2Frust_uv.c", "raw_url": "https://github.com/rust-lang/rust/raw/f40767a1a75089694952273c65d8abfea72f3564/src%2Frt%2Frust_uv.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_uv.c?ref=f40767a1a75089694952273c65d8abfea72f3564", "patch": "@@ -1,169 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-#include <stdlib.h>\n-#include <assert.h>\n-\n-#ifdef __WIN32__\n-// For alloca\n-#include <malloc.h>\n-#endif\n-\n-#ifndef __WIN32__\n-// for signal\n-#include <signal.h>\n-#endif\n-\n-#include \"uv.h\"\n-\n-void*\n-rust_uv_loop_new() {\n-// FIXME libuv doesn't always ignore SIGPIPE even though we don't need it.\n-#ifndef __WIN32__\n-    signal(SIGPIPE, SIG_IGN);\n-#endif\n-    return (void*)uv_loop_new();\n-}\n-\n-void\n-rust_uv_loop_set_data(uv_loop_t* loop, void* data) {\n-    loop->data = data;\n-}\n-\n-uv_udp_t*\n-rust_uv_get_udp_handle_from_send_req(uv_udp_send_t* send_req) {\n-    return send_req->handle;\n-}\n-\n-uv_stream_t*\n-rust_uv_get_stream_handle_from_connect_req(uv_connect_t* connect) {\n-    return connect->handle;\n-}\n-uv_stream_t*\n-rust_uv_get_stream_handle_from_write_req(uv_write_t* write_req) {\n-    return write_req->handle;\n-}\n-\n-uv_loop_t*\n-rust_uv_get_loop_for_uv_handle(uv_handle_t* handle) {\n-    return handle->loop;\n-}\n-\n-void*\n-rust_uv_get_data_for_uv_loop(uv_loop_t* loop) {\n-    return loop->data;\n-}\n-\n-void\n-rust_uv_set_data_for_uv_loop(uv_loop_t* loop,\n-        void* data) {\n-    loop->data = data;\n-}\n-\n-void*\n-rust_uv_get_data_for_uv_handle(uv_handle_t* handle) {\n-    return handle->data;\n-}\n-\n-void\n-rust_uv_set_data_for_uv_handle(uv_handle_t* handle, void* data) {\n-    handle->data = data;\n-}\n-\n-void*\n-rust_uv_get_data_for_req(uv_req_t* req) {\n-    return req->data;\n-}\n-\n-void\n-rust_uv_set_data_for_req(uv_req_t* req, void* data) {\n-    req->data = data;\n-}\n-\n-uintptr_t\n-rust_uv_handle_type_max() {\n-  return UV_HANDLE_TYPE_MAX;\n-}\n-\n-uintptr_t\n-rust_uv_req_type_max() {\n-  return UV_REQ_TYPE_MAX;\n-}\n-\n-ssize_t\n-rust_uv_get_result_from_fs_req(uv_fs_t* req) {\n-  return req->result;\n-}\n-const char*\n-rust_uv_get_path_from_fs_req(uv_fs_t* req) {\n-  return req->path;\n-}\n-void*\n-rust_uv_get_ptr_from_fs_req(uv_fs_t* req) {\n-  return req->ptr;\n-}\n-uv_loop_t*\n-rust_uv_get_loop_from_fs_req(uv_fs_t* req) {\n-  return req->loop;\n-}\n-\n-uv_loop_t*\n-rust_uv_get_loop_from_getaddrinfo_req(uv_getaddrinfo_t* req) {\n-  return req->loop;\n-}\n-\n-void\n-rust_uv_populate_uv_stat(uv_fs_t* req_in, uv_stat_t* stat_out) {\n-  stat_out->st_dev = req_in->statbuf.st_dev;\n-  stat_out->st_mode = req_in->statbuf.st_mode;\n-  stat_out->st_nlink = req_in->statbuf.st_nlink;\n-  stat_out->st_uid = req_in->statbuf.st_uid;\n-  stat_out->st_gid = req_in->statbuf.st_gid;\n-  stat_out->st_rdev = req_in->statbuf.st_rdev;\n-  stat_out->st_ino = req_in->statbuf.st_ino;\n-  stat_out->st_size = req_in->statbuf.st_size;\n-  stat_out->st_blksize = req_in->statbuf.st_blksize;\n-  stat_out->st_blocks = req_in->statbuf.st_blocks;\n-  stat_out->st_flags = req_in->statbuf.st_flags;\n-  stat_out->st_gen = req_in->statbuf.st_gen;\n-  stat_out->st_atim.tv_sec = req_in->statbuf.st_atim.tv_sec;\n-  stat_out->st_atim.tv_nsec = req_in->statbuf.st_atim.tv_nsec;\n-  stat_out->st_mtim.tv_sec = req_in->statbuf.st_mtim.tv_sec;\n-  stat_out->st_mtim.tv_nsec = req_in->statbuf.st_mtim.tv_nsec;\n-  stat_out->st_ctim.tv_sec = req_in->statbuf.st_ctim.tv_sec;\n-  stat_out->st_ctim.tv_nsec = req_in->statbuf.st_ctim.tv_nsec;\n-  stat_out->st_birthtim.tv_sec = req_in->statbuf.st_birthtim.tv_sec;\n-  stat_out->st_birthtim.tv_nsec = req_in->statbuf.st_birthtim.tv_nsec;\n-}\n-\n-void\n-rust_set_stdio_container_flags(uv_stdio_container_t *c, int flags) {\n-  c->flags = (uv_stdio_flags) flags;\n-}\n-\n-void\n-rust_set_stdio_container_fd(uv_stdio_container_t *c, int fd) {\n-  c->data.fd = fd;\n-}\n-\n-void\n-rust_set_stdio_container_stream(uv_stdio_container_t *c, uv_stream_t *stream) {\n-  c->data.stream = stream;\n-}\n-\n-int\n-rust_uv_process_pid(uv_process_t* p) {\n-  return p->pid;\n-}\n-\n-int\n-rust_uv_guess_handle(int fd) {\n-  return uv_guess_handle(fd);\n-}"}]}