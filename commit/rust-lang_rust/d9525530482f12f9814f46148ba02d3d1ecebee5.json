{"sha": "d9525530482f12f9814f46148ba02d3d1ecebee5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5NTI1NTMwNDgyZjEyZjk4MTRmNDYxNDhiYTAyZDNkMWVjZWJlZTU=", "commit": {"author": {"name": "Carter Tazio Schonwald", "email": "carter.schonwald@gmail.com", "date": "2013-12-14T07:59:40Z"}, "committer": {"name": "Carter Tazio Schonwald", "email": "carter.schonwald@gmail.com", "date": "2013-12-17T01:00:37Z"}, "message": "provide an error at  at configure time if gcc, and g++ point to a mixture of clang and gcc. Fixes issue #10959\n\nSigned-off-by: Carter Tazio Schonwald <carter.schonwald@gmail.com>", "tree": {"sha": "a3b9f0731e2f22b78c61b9c2d5995071bf9766bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a3b9f0731e2f22b78c61b9c2d5995071bf9766bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d9525530482f12f9814f46148ba02d3d1ecebee5", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d9525530482f12f9814f46148ba02d3d1ecebee5", "html_url": "https://github.com/rust-lang/rust/commit/d9525530482f12f9814f46148ba02d3d1ecebee5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d9525530482f12f9814f46148ba02d3d1ecebee5/comments", "author": {"login": "cartazio", "id": 4290, "node_id": "MDQ6VXNlcjQyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/4290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cartazio", "html_url": "https://github.com/cartazio", "followers_url": "https://api.github.com/users/cartazio/followers", "following_url": "https://api.github.com/users/cartazio/following{/other_user}", "gists_url": "https://api.github.com/users/cartazio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cartazio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cartazio/subscriptions", "organizations_url": "https://api.github.com/users/cartazio/orgs", "repos_url": "https://api.github.com/users/cartazio/repos", "events_url": "https://api.github.com/users/cartazio/events{/privacy}", "received_events_url": "https://api.github.com/users/cartazio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cartazio", "id": 4290, "node_id": "MDQ6VXNlcjQyOTA=", "avatar_url": "https://avatars.githubusercontent.com/u/4290?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cartazio", "html_url": "https://github.com/cartazio", "followers_url": "https://api.github.com/users/cartazio/followers", "following_url": "https://api.github.com/users/cartazio/following{/other_user}", "gists_url": "https://api.github.com/users/cartazio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cartazio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cartazio/subscriptions", "organizations_url": "https://api.github.com/users/cartazio/orgs", "repos_url": "https://api.github.com/users/cartazio/repos", "events_url": "https://api.github.com/users/cartazio/events{/privacy}", "received_events_url": "https://api.github.com/users/cartazio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d52dfbace05c46754f4f6bb5a25f55906c9d7b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d52dfbace05c46754f4f6bb5a25f55906c9d7b0", "html_url": "https://github.com/rust-lang/rust/commit/8d52dfbace05c46754f4f6bb5a25f55906c9d7b0"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "30bbb05cf5d10551d3f377f4b5c0b9a75e2745b3", "filename": "configure", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/d9525530482f12f9814f46148ba02d3d1ecebee5/configure", "raw_url": "https://github.com/rust-lang/rust/raw/d9525530482f12f9814f46148ba02d3d1ecebee5/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=d9525530482f12f9814f46148ba02d3d1ecebee5", "patch": "@@ -559,6 +559,27 @@ then\n         step_msg \"on OS X 10.9, forcing use of clang\"\n         CFG_ENABLE_CLANG=1\n         putvar CFG_ENABLE_CLANG\n+    else \n+        # on OS X, with xcode 5 and newer, certain developers may have \n+        # cc, gcc and g++ point to a  mixture of clang and gcc\n+        # if so, this will create very strange build errors \n+        # this last stanza is to detect some such problems and save the future rust\n+        # contributor some time solving that issue.\n+        # this detection could be generalized to other OSes aside from OS X\n+        # but the issue seems most likely to happen on OS X\n+\n+        chk_cc () {\n+            $1 --version 2> /dev/null | grep -q $2\n+        }\n+        # check that gcc, cc and g++ all point to the same compiler.\n+        # note that for xcode 5, g++ points to clang, not clang++\n+        if !((chk_cc gcc clang  && chk_cc g++ clang) ||\n+            (chk_cc gcc gcc  &&( chk_cc g++ g++ || chk g++ gcc))) then\n+            err \"the gcc and g++ in your path point to different compilers. \n+Check which versions are in your path with  cc --version and g++ --version. \n+To resolve this problem, either fix your PATH  or run configure with --enable-clang\"\n+        fi\n+\n     fi\n fi\n "}]}