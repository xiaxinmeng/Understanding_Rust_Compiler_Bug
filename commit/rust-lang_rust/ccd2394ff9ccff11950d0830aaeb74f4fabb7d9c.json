{"sha": "ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNjZDIzOTRmZjljY2ZmMTE5NTBkMDgzMGFhZWI3NGY0ZmFiYjdkOWM=", "commit": {"author": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-06-26T21:04:15Z"}, "committer": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-06-26T21:08:16Z"}, "message": "perf: improved the core-std benchmark", "tree": {"sha": "b3ae705168bf84b3f6273659edbf45c0e4c1a158", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3ae705168bf84b3f6273659edbf45c0e4c1a158"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "html_url": "https://github.com/rust-lang/rust/commit/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a08281616f5afcf7b134159a919e76829d2f2a8d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a08281616f5afcf7b134159a919e76829d2f2a8d", "html_url": "https://github.com/rust-lang/rust/commit/a08281616f5afcf7b134159a919e76829d2f2a8d"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "00d4a5e6b31639dfe3b2c0b1499835e7c6979bfe", "filename": "src/libstd/map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c/src%2Flibstd%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c/src%2Flibstd%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmap.rs?ref=ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "patch": "@@ -326,7 +326,7 @@ Convert a set into a vector.\n fn vec_from_set<T: copy>(s: set<T>) -> [T]/~ {\n     let mut v = []/~;\n     s.each_key() {|k|\n-        v += [k]/~;\n+        vec::push(v, k);\n         true\n     };\n     v"}, {"sha": "9ea0ad51feb119e381f9f4ff36cbda38ae2e8fa9", "filename": "src/test/bench/core-std.rs", "status": "modified", "additions": 28, "deletions": 2, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c/src%2Ftest%2Fbench%2Fcore-std.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c/src%2Ftest%2Fbench%2Fcore-std.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fcore-std.rs?ref=ccd2394ff9ccff11950d0830aaeb74f4fabb7d9c", "patch": "@@ -3,17 +3,25 @@\n use std;\n \n import std::time::precise_time_s;\n+import std::map;\n+import std::map::{map, hashmap};\n \n import io::{reader, reader_util};\n \n-fn main() {\n+fn main(argv: [str]/~) {\n     #macro[\n         [#bench[id],\n-         run_test(#stringify(id), id)]\n+         if tests.len() == 0 || vec::contains(tests, #stringify(id)) {\n+             run_test(#stringify(id), id);\n+         }\n+        ]\n     ];\n \n+    let tests = vec::view(argv, 1, argv.len());\n+\n     #bench[shift_push];\n     #bench[read_line];\n+    #bench[str_set];\n }\n \n fn run_test(name: str, test: fn()) {\n@@ -46,3 +54,21 @@ fn read_line() {\n         }\n     }\n }\n+\n+fn str_set() {\n+    let r = rand::rng();\n+\n+    let s = map::hashmap(str::hash, str::eq);\n+\n+    for int::range(0, 1000) {|_i|\n+        map::set_add(s, r.gen_str(10));\n+    }\n+    \n+    let mut found = 0;\n+    for int::range(0, 1000) {|_i|\n+        alt s.find(r.gen_str(10)) {\n+          some(_) { found += 1; }\n+          none { }\n+        }\n+    }\n+}"}]}