{"sha": "e0ef7767cab847f73e145d3f2eb99aef02c94067", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwZWY3NzY3Y2FiODQ3ZjczZTE0NWQzZjJlYjk5YWVmMDJjOTQwNjc=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-10-08T16:59:14Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-10-10T23:23:33Z"}, "message": "Add long error explanation for E0697", "tree": {"sha": "b84918ae1ff0b243b64609295957c7384adc85f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b84918ae1ff0b243b64609295957c7384adc85f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0ef7767cab847f73e145d3f2eb99aef02c94067", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0ef7767cab847f73e145d3f2eb99aef02c94067", "html_url": "https://github.com/rust-lang/rust/commit/e0ef7767cab847f73e145d3f2eb99aef02c94067", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0ef7767cab847f73e145d3f2eb99aef02c94067/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "321ccbe1dbc655faeb20bf78c5463ebb12640d78", "url": "https://api.github.com/repos/rust-lang/rust/commits/321ccbe1dbc655faeb20bf78c5463ebb12640d78", "html_url": "https://github.com/rust-lang/rust/commit/321ccbe1dbc655faeb20bf78c5463ebb12640d78"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "a4c1afc4f1dac114fdfdec52c1cb80c7731cfe27", "filename": "src/librustc/error_codes.rs", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/e0ef7767cab847f73e145d3f2eb99aef02c94067/src%2Flibrustc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0ef7767cab847f73e145d3f2eb99aef02c94067/src%2Flibrustc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ferror_codes.rs?ref=e0ef7767cab847f73e145d3f2eb99aef02c94067", "patch": "@@ -2001,6 +2001,24 @@ a (non-transparent) struct containing a single float, while `Grams` is a\n transparent wrapper around a float. This can make a difference for the ABI.\n \"##,\n \n+E0697: r##\"\n+A closure has been used as `static`.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0697\n+fn main() {\n+    static || {}; // used as `static`\n+}\n+```\n+\n+Closures cannot be used as `static`. They \"save\" the environment.\n+Therefore, having a static closure with a static environment doesn't\n+really make sense since all you can capture inside it would be variables\n+with static lifetime. In this condition, better use a function directly.\n+The easiest fix is to remove `static` keyword.\n+\"##,\n+\n E0698: r##\"\n When using generators (or async) all type variables must be bound so a\n generator can be constructed.\n@@ -2187,7 +2205,6 @@ See [RFC 2091] for details on this and other limitations.\n     E0657, // `impl Trait` can only capture lifetimes bound at the fn level\n     E0687, // in-band lifetimes cannot be used in `fn`/`Fn` syntax\n     E0688, // in-band lifetimes cannot be mixed with explicit lifetime binders\n-    E0697, // closures cannot be static\n //  E0707, // multiple elided lifetimes used in arguments of `async fn`\n     E0708, // `async` non-`move` closures with parameters are not currently\n            // supported"}, {"sha": "99235e26e15e7a5a23afefd80b52671ebc3e877d", "filename": "src/test/ui/static/static-closures.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e0ef7767cab847f73e145d3f2eb99aef02c94067/src%2Ftest%2Fui%2Fstatic%2Fstatic-closures.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e0ef7767cab847f73e145d3f2eb99aef02c94067/src%2Ftest%2Fui%2Fstatic%2Fstatic-closures.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstatic%2Fstatic-closures.stderr?ref=e0ef7767cab847f73e145d3f2eb99aef02c94067", "patch": "@@ -6,3 +6,4 @@ LL |     static || {};\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0697`."}]}