{"sha": "1e55c31cbbc43a21c93ed5652dc39c267e6557af", "node_id": "C_kwDOAAsO6NoAKDFlNTVjMzFjYmJjNDNhMjFjOTNlZDU2NTJkYzM5YzI2N2U2NTU3YWY", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-11-29T14:55:05Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-12-02T13:17:20Z"}, "message": "Fix remaining bugs", "tree": {"sha": "a6bd5af58ffba4afcdb9b077ba4ccd9d4a16b3e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a6bd5af58ffba4afcdb9b077ba4ccd9d4a16b3e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1e55c31cbbc43a21c93ed5652dc39c267e6557af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1e55c31cbbc43a21c93ed5652dc39c267e6557af", "html_url": "https://github.com/rust-lang/rust/commit/1e55c31cbbc43a21c93ed5652dc39c267e6557af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1e55c31cbbc43a21c93ed5652dc39c267e6557af/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e9954d12e0f6ea5bd1ebe306694edf004de003f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e9954d12e0f6ea5bd1ebe306694edf004de003f", "html_url": "https://github.com/rust-lang/rust/commit/6e9954d12e0f6ea5bd1ebe306694edf004de003f"}], "stats": {"total": 30, "additions": 22, "deletions": 8}, "files": [{"sha": "d2b299a027aef030c9721a7b8376c91f5023971e", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 21, "deletions": 6, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=1e55c31cbbc43a21c93ed5652dc39c267e6557af", "patch": "@@ -348,21 +348,18 @@ nav.sub {\n \tposition: sticky;\n \tmin-width: 200px;\n \theight: 100vh;\n+\ttop: 0;\n+\tleft: 0;\n }\n \n .rustdoc.source .sidebar {\n-\toverflow: auto;\n-}\n-\n-.source .sidebar {\n \twidth: 50px;\n \tmin-width: 0px;\n \tmax-width: 300px;\n \tflex-grow: 0;\n \tflex-shrink: 0;\n \tflex-basis: auto;\n \tborder-right: 1px solid;\n-\ttransition: width .5s;\n \toverflow-x: hidden;\n \t/* The sidebar is by default hidden  */\n \toverflow-y: hidden;\n@@ -376,7 +373,7 @@ nav.sub {\n \n .source .sidebar.expanded {\n \toverflow-y: auto;\n-\twidth: 300px !important;\n+\twidth: 300px;\n }\n \n .source .sidebar.expanded > * {\n@@ -1698,6 +1695,18 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t.docblock > .information:first-child > .tooltip {\n \t\tmargin-top: 16px;\n \t}\n+\n+\t/* When we expand the sidebar on the source code page, we hide the logo on the left of the\n+\tsearch bar to have more space. */\n+\t.sidebar.expanded + main .main-inner .sub-logo-container.rust-logo {\n+\t\tdisplay: none;\n+\t}\n+\n+\t/* It doesn't render well on mobile because of the layout, so better only have the transition\n+\ton desktop. */\n+\t.rustdoc.source .sidebar {\n+\t\ttransition: width .5s;\n+\t}\n }\n \n @media (max-width: 700px) {\n@@ -1723,6 +1732,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tpadding: 0 15px;\n \t\tposition: static;\n \t\tz-index: 11;\n+\t\toverflow-y: hidden;\n \t}\n \n \t.rustdoc.source > .sidebar {\n@@ -1779,6 +1789,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\tcursor: pointer;\n \t\twidth: 45px;\n \t\tleft: 0;\n+\t\ttop: 0;\n \t\ttext-align: center;\n \t\tdisplay: block;\n \t\tborder-bottom: 1px solid;\n@@ -2052,6 +2063,10 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \t\theight: 35px;\n \t\twidth: 35px;\n \t}\n+\n+\t.sidebar:not(.expanded) #sidebar-toggle {\n+\t\ttop: 10px;\n+\t}\n }\n \n "}, {"sha": "9f30ffe3b08075b26f1ec3260bf260cdceef1c9f", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=1e55c31cbbc43a21c93ed5652dc39c267e6557af", "patch": "@@ -111,7 +111,6 @@\n                                 <input {# -#}\n                                     class=\"search-input\" {# -#}\n                                     name=\"search\" {# -#}\n-                                    disabled {# -#}\n                                     autocomplete=\"off\" {# -#}\n                                     spellcheck=\"false\" {# -#}\n                                     placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}"}, {"sha": "f3682f59d2141c758d720f2d9f0e667d5e74bd25", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/1e55c31cbbc43a21c93ed5652dc39c267e6557af/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=1e55c31cbbc43a21c93ed5652dc39c267e6557af", "patch": "@@ -1,6 +1,6 @@\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // Check that we can click on the line number.\n-click: (50, 196) // This is the position of the span for line 4.\n+click: \".line-numbers > span:nth-child(4)\" // This is the span for line 4.\n // Unfortunately, \"#4\" isn't a valid query selector, so we have to go around that limitation\n // by instead getting the nth span.\n assert-attribute: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})"}]}