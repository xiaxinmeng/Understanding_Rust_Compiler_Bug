{"sha": "79fd51df3935247cf6ce354e64fca067f0fd9f8d", "node_id": "C_kwDOAAsO6NoAKDc5ZmQ1MWRmMzkzNTI0N2NmNmNlMzU0ZTY0ZmNhMDY3ZjBmZDlmOGQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-03-07T14:06:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-07T14:06:24Z"}, "message": "Rollup merge of #108805 - GuillaumeGomez:update-askama, r=notriddle\n\nUpdate askama to 0.12 and improve whitespace control\n\n`askama` 0.12 was just released, and it adds the possibility to have \"whitespace suppression\" enabled by default in the configuration so I switched to it.\n\nr? ``@notriddle``", "tree": {"sha": "1ddda55a16b50ba4bc47cae76a9d8137c7bf53e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1ddda55a16b50ba4bc47cae76a9d8137c7bf53e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79fd51df3935247cf6ce354e64fca067f0fd9f8d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkB0TgCRBK7hj4Ov3rIwAADykIAIUDT3AJwTBkVfzMUozaySLl\nkVYesc+LwpYQLXkxMPzzxQJTIaP/ZnCEEEyw+KM71WNSPiHbujr+rMIZi+eBwzDX\nfUEfp64fEXYw8Y8/rb5sT769dNwyus6ZMzwm6RaiDcoFWK9Eih6GUw3epuP3UKam\nqO/9brwcbI1bTg4Wo2hsWj3NWDQVObA4r10ajmdpf4DPXBBxKv7u4IdEo7oXdUCv\nWdD5aFo5a5IK3aV84hnfGoY7b8iyzFLDmIc+d2XgRwPtqghodGg3te9C+wwUBT9n\nsLEOZdRLhrWsy1pm+lIXpF/ltk2QX2XpNWz9oj0Tx82mEXlqpcRbEsI+jpsl8KA=\n=ofHv\n-----END PGP SIGNATURE-----\n", "payload": "tree 1ddda55a16b50ba4bc47cae76a9d8137c7bf53e9\nparent 4dc48db31015b6ac4dccb953aeeceee55752f592\nparent 511d2628c0c3a0920718029e815bb8df1834ee03\nauthor Yuki Okushi <jtitor@2k36.org> 1678197984 +0900\ncommitter GitHub <noreply@github.com> 1678197984 +0900\n\nRollup merge of #108805 - GuillaumeGomez:update-askama, r=notriddle\n\nUpdate askama to 0.12 and improve whitespace control\n\n`askama` 0.12 was just released, and it adds the possibility to have \"whitespace suppression\" enabled by default in the configuration so I switched to it.\n\nr? ``@notriddle``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79fd51df3935247cf6ce354e64fca067f0fd9f8d", "html_url": "https://github.com/rust-lang/rust/commit/79fd51df3935247cf6ce354e64fca067f0fd9f8d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79fd51df3935247cf6ce354e64fca067f0fd9f8d/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4dc48db31015b6ac4dccb953aeeceee55752f592", "url": "https://api.github.com/repos/rust-lang/rust/commits/4dc48db31015b6ac4dccb953aeeceee55752f592", "html_url": "https://github.com/rust-lang/rust/commit/4dc48db31015b6ac4dccb953aeeceee55752f592"}, {"sha": "511d2628c0c3a0920718029e815bb8df1834ee03", "url": "https://api.github.com/repos/rust-lang/rust/commits/511d2628c0c3a0920718029e815bb8df1834ee03", "html_url": "https://github.com/rust-lang/rust/commit/511d2628c0c3a0920718029e815bb8df1834ee03"}], "stats": {"total": 436, "additions": 226, "deletions": 210}, "files": [{"sha": "82530c019a91c217f286ebe5d21bf137ba3df61c", "filename": "Cargo.lock", "status": "modified", "additions": 37, "deletions": 23, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -132,47 +132,36 @@ checksum = \"5a2f58b0bb10c380af2b26e57212856b8c9a59e0925b4c20f4a174a49734eaf7\"\n \n [[package]]\n name = \"askama\"\n-version = \"0.11.0\"\n+version = \"0.12.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4d8f355701c672c2ba3d718acbd213f740beea577cc4eae66accdffe15be1882\"\n+checksum = \"47cbc3cf73fa8d9833727bbee4835ba5c421a0d65b72daf9a7b5d0e0f9cfb57e\"\n dependencies = [\n  \"askama_derive\",\n  \"askama_escape\",\n- \"askama_shared\",\n ]\n \n [[package]]\n name = \"askama_derive\"\n-version = \"0.11.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"84704cab5b7ae0fd3a9f78ee5eb7b27f3749df445f04623db6633459ae283267\"\n-dependencies = [\n- \"askama_shared\",\n- \"proc-macro2\",\n- \"syn\",\n-]\n-\n-[[package]]\n-name = \"askama_escape\"\n-version = \"0.10.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9a1bb320f97e6edf9f756bf015900038e43c7700e059688e5724a928c8f3b8d5\"\n-\n-[[package]]\n-name = \"askama_shared\"\n version = \"0.12.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"dae03eebba55a2697a376e58b573a29fe36893157173ac8df312ad85f3c0e012\"\n+checksum = \"e80b5ad1afe82872b7aa3e9de9b206ecb85584aa324f0f60fa4c903ce935936b\"\n dependencies = [\n- \"askama_escape\",\n+ \"basic-toml\",\n+ \"mime\",\n+ \"mime_guess\",\n  \"nom\",\n  \"proc-macro2\",\n  \"quote\",\n  \"serde\",\n  \"syn\",\n- \"toml 0.5.7\",\n ]\n \n+[[package]]\n+name = \"askama_escape\"\n+version = \"0.10.3\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"619743e34b5ba4e9703bba34deac3427c72507c7159f5fd030aea8cac0cfe341\"\n+\n [[package]]\n name = \"atty\"\n version = \"0.2.14\"\n@@ -223,6 +212,15 @@ version = \"1.5.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"b645a089122eccb6111b4f81cbc1a49f5900ac4666bb93ac027feaecf15607bf\"\n \n+[[package]]\n+name = \"basic-toml\"\n+version = \"0.1.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"5c0de75129aa8d0cceaf750b89013f0e08804d6ec61416da787b35ad0d7cddf1\"\n+dependencies = [\n+ \"serde\",\n+]\n+\n [[package]]\n name = \"bitflags\"\n version = \"1.3.2\"\n@@ -2614,6 +2612,22 @@ dependencies = [\n  \"autocfg\",\n ]\n \n+[[package]]\n+name = \"mime\"\n+version = \"0.3.16\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"2a60c7ce501c71e03a9c9c0d35b861413ae925bd979cc7a4e30d060069aaac8d\"\n+\n+[[package]]\n+name = \"mime_guess\"\n+version = \"2.0.4\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"4192263c238a5f0d0c6bfd21f336a313a4ce1c450542449ca191bb657b4642ef\"\n+dependencies = [\n+ \"mime\",\n+ \"unicase\",\n+]\n+\n [[package]]\n name = \"minifier\"\n version = \"0.2.2\""}, {"sha": "6ca6edfd3c9fed181e88b7fef03e8f3aeb66bf5c", "filename": "src/librustdoc/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2FCargo.toml?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -8,7 +8,7 @@ path = \"lib.rs\"\n \n [dependencies]\n arrayvec = { version = \"0.7\", default-features = false }\n-askama = { version = \"0.11\", default-features = false, features = [\"config\"] }\n+askama = { version = \"0.12\", default-features = false, features = [\"config\"] }\n itertools = \"0.10.1\"\n minifier = \"0.2.2\"\n once_cell = \"1.10.0\""}, {"sha": "2732c4bc61ef698dfefe1c6ebadf3e32f99a7cf1", "filename": "src/librustdoc/askama.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Faskama.toml", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Faskama.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Faskama.toml?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -1,2 +1,3 @@\n [general]\n dirs = [\"html/templates\"]\n+whitespace = \"suppress\""}, {"sha": "72c516c93eb7fa6a9886ffaedb2c4bc356560576", "filename": "src/librustdoc/html/templates/STYLE.md", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2FSTYLE.md", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2FSTYLE.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2FSTYLE.md?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -10,28 +10,29 @@ similar to [Jinja2](jinjadoc) and [Django](djangodoc) templates, and also to [As\n \n We want our rendered output to have as little unnecessary whitespace as\n possible, so that pages load quickly. To achieve that we use Tera's\n-[whitespace control] features. At the end of most lines, we put an empty comment\n-tag with the whitespace control characters: `{#- -#}`. This causes all\n-whitespace between the end of the line and the beginning of the next, including\n-indentation, to be omitted on render. Sometimes we want to preserve a single\n-space. In those cases we put the space at the end of the line, followed by\n-`{# -#}`, which is a directive to remove following whitespace but not preceding.\n-We also use the whitespace control characters in most instances of tags with\n-control flow, for example `{%- if foo -%}`.\n+[whitespace control] features. By default, whitespace characters are removed\n+around jinja tags (`{% %}` for example). At the end of most lines, we put an\n+empty comment tag: `{# #}`. This causes all whitespace between the end of the\n+line and the beginning of the next, including indentation, to be omitted on\n+render. Sometimes we want to preserve a single space. In those cases we put the\n+space at the end of the line, followed by `{#+ #}`, which is a directive to\n+remove following whitespace but not preceding. We also use the whitespace\n+control characters in most instances of tags with control flow, for example\n+`{% if foo %}`.\n \n [whitespace control]: https://tera.netlify.app/docs/#whitespace-control\n \n We want our templates to be readable, so we use indentation and newlines\n-liberally. We indent by four spaces after opening an HTML tag _or_ a Tera\n+liberally. We indent by four spaces after opening an HTML tag _or_ a Jinja\n tag. In most cases an HTML tag should be followed by a newline, but if the\n tag has simple contents and fits with its close tag on a single line, the\n contents don't necessarily need a new line.\n \n-Tera templates support quite sophisticated control flow. To keep our templates\n+Askama templates support quite sophisticated control flow. To keep our templates\n simple and understandable, we use only a subset: `if` and `for`. In particular\n-we avoid [assignments in the template logic](assignments) and [Tera\n+we avoid [assignments in the template logic](assignments) and [Askama\n macros](macros). This also may make things easier if we switch to a different\n Jinja-style template system, like Askama, in the future.\n \n-[assignments]: https://tera.netlify.app/docs/#assignments\n-[macros]: https://tera.netlify.app/docs/#macros\n+[assignments]: https://djc.github.io/askama/template_syntax.html#assignments\n+[macros]: https://djc.github.io/askama/template_syntax.html#macros"}, {"sha": "e896850fab6bdb0eb05b56b0706eef1526c54769", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 147, "deletions": 147, "changes": 294, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -1,148 +1,148 @@\n-<!DOCTYPE html> {#- -#}\n-<html lang=\"en\"> {#- -#}\n-<head> {#- -#}\n-    <meta charset=\"utf-8\"> {#- -#}\n-    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> {#- -#}\n-    <meta name=\"generator\" content=\"rustdoc\"> {#- -#}\n-    <meta name=\"description\" content=\"{{page.description}}\"> {#- -#}\n-    <title>{{page.title}}</title> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_serif_4_regular}}\"> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.fira_sans_regular}}\"> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.fira_sans_medium}}\"> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_code_pro_regular}}\"> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_serif_4_bold}}\"> {#- -#}\n-    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_code_pro_semibold}}\"> {#- -#}\n-    <link rel=\"stylesheet\" {# -#}\n-          href=\"{{static_root_path|safe}}{{files.normalize_css}}\"> {#- -#}\n-    <link rel=\"stylesheet\" {# -#}\n-          href=\"{{static_root_path|safe}}{{files.rustdoc_css}}\" {# -#}\n-          id=\"mainThemeStyle\"> {#- -#}\n-    <link rel=\"stylesheet\" id=\"themeStyle\" href=\"{{static_root_path|safe}}{{files.theme_light_css}}\"> {#- -#}\n-    <link rel=\"stylesheet\" disabled href=\"{{static_root_path|safe}}{{files.theme_dark_css}}\"> {#- -#}\n-    <link rel=\"stylesheet\" disabled href=\"{{static_root_path|safe}}{{files.theme_ayu_css}}\"> {#- -#}\n-    {%- for theme in themes -%}\n-        <link rel=\"stylesheet\" disabled href=\"{{page.root_path|safe}}{{theme}}{{page.resource_suffix}}.css\"> {#- -#}\n-    {%- endfor -%}\n-    {%- if !layout.default_settings.is_empty() -%}\n-    <script id=\"default-settings\" {# -#}\n-      {% for (k, v) in layout.default_settings %}\n+<!DOCTYPE html> {# #}\n+<html lang=\"en\"> {# #}\n+<head> {# #}\n+    <meta charset=\"utf-8\"> {# #}\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> {# #}\n+    <meta name=\"generator\" content=\"rustdoc\"> {# #}\n+    <meta name=\"description\" content=\"{{page.description}}\"> {# #}\n+    <title>{{page.title}}</title> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_serif_4_regular}}\"> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.fira_sans_regular}}\"> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.fira_sans_medium}}\"> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_code_pro_regular}}\"> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_serif_4_bold}}\"> {# #}\n+    <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_code_pro_semibold}}\"> {# #}\n+    <link rel=\"stylesheet\" {#+ #}\n+          href=\"{{static_root_path|safe}}{{files.normalize_css}}\"> {# #}\n+    <link rel=\"stylesheet\" {#+ #}\n+          href=\"{{static_root_path|safe}}{{files.rustdoc_css}}\" {#+ #}\n+          id=\"mainThemeStyle\"> {# #}\n+    <link rel=\"stylesheet\" id=\"themeStyle\" href=\"{{static_root_path|safe}}{{files.theme_light_css}}\"> {# #}\n+    <link rel=\"stylesheet\" disabled href=\"{{static_root_path|safe}}{{files.theme_dark_css}}\"> {# #}\n+    <link rel=\"stylesheet\" disabled href=\"{{static_root_path|safe}}{{files.theme_ayu_css}}\"> {# #}\n+    {% for theme in themes %}\n+        <link rel=\"stylesheet\" disabled href=\"{{page.root_path|safe}}{{theme}}{{page.resource_suffix}}.css\"> {# #}\n+    {% endfor %}\n+    {% if !layout.default_settings.is_empty() %}\n+    <script id=\"default-settings\" {#+ #}\n+      {%~ for (k, v) in layout.default_settings ~%}\n         data-{{k}}=\"{{v}}\"\n-      {%- endfor -%}\n-    ></script> {#- -#}\n-    {%- endif -%}\n-    <script src=\"{{static_root_path|safe}}{{files.storage_js}}\"></script> {#- -#}\n-    {%- if page.css_class.contains(\"crate\") -%}\n-    <script defer src=\"{{page.root_path|safe}}crates{{page.resource_suffix}}.js\"></script> {#- -#}\n-    {%- else if page.css_class == \"source\" -%}\n-    <script defer src=\"{{static_root_path|safe}}{{files.source_script_js}}\"></script> {#- -#}\n-    <script defer src=\"{{page.root_path|safe}}source-files{{page.resource_suffix}}.js\"></script> {#- -#}\n-    {%- else if !page.css_class.contains(\"mod\") -%}\n-    <script defer src=\"sidebar-items{{page.resource_suffix}}.js\"></script> {#- -#}\n-    {%- endif -%}\n-    <script defer src=\"{{static_root_path|safe}}{{files.main_js}}\"></script> {#- -#}\n-    {%- if layout.scrape_examples_extension -%}\n-    <script defer src=\"{{static_root_path|safe}}{{files.scrape_examples_js}}\"></script> {#- -#}\n-    {%- endif -%}\n-    <noscript> {#- -#}\n-        <link rel=\"stylesheet\" {# -#}\n-           href=\"{{static_root_path|safe}}{{files.noscript_css}}\"> {#- -#}\n-    </noscript> {#- -#}\n-    {%- if layout.css_file_extension.is_some() -%}\n-        <link rel=\"stylesheet\" {# -#}\n-            href=\"{{static_root_path|safe}}theme{{page.resource_suffix}}.css\"> {#- -#}\n-    {%- endif -%}\n-    {%- if !layout.favicon.is_empty() -%}\n-        <link rel=\"icon\" href=\"{{layout.favicon}}\"> {#- -#}\n-    {%- else -%}\n-        <link rel=\"alternate icon\" type=\"image/png\" {# -#}\n-            href=\"{{static_root_path|safe}}{{files.rust_favicon_png_16}}\"> {#- -#}\n-        <link rel=\"alternate icon\" type=\"image/png\" {# -#}\n-            href=\"{{static_root_path|safe}}{{files.rust_favicon_png_32}}\"> {#- -#}\n-        <link rel=\"icon\" type=\"image/svg+xml\" {# -#}\n-            href=\"{{static_root_path|safe}}{{files.rust_favicon_svg}}\"> {#- -#}\n-    {%- endif -%}\n-    {{- layout.external_html.in_header|safe -}}\n-</head> {#- -#}\n-<body class=\"rustdoc {{page.css_class}}\"> {#- -#}\n-    <!--[if lte IE 11]> {#- -#}\n-    <div class=\"warning\"> {#- -#}\n-        This old browser is unsupported and will most likely display funky things. {#- -#}\n-    </div> {#- -#}\n-    <![endif]--> {#- -#}\n-    {{- layout.external_html.before_content|safe -}}\n-    {%- if page.css_class != \"source\" -%}\n-    <nav class=\"mobile-topbar\"> {#- -#}\n-        <button class=\"sidebar-menu-toggle\">&#9776;</button> {#- -#}\n-        <a class=\"logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {#- -#}\n-        {%- if !layout.logo.is_empty() -%}\n-            <img src=\"{{layout.logo}}\" alt=\"logo\"> {#- -#}\n-        {%- else -%}\n-            <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {#- -#}\n-        {%- endif -%}\n-        </a> {#- -#}\n-        <h2></h2> {#- -#}\n-    </nav> {#- -#}\n-    {%- endif -%}\n-    <nav class=\"sidebar\"> {#- -#}\n-        {%- if page.css_class != \"source\" -%}\n-        <a class=\"logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {#- -#}\n-            {%- if !layout.logo.is_empty()  %}\n-                <img src=\"{{layout.logo}}\" alt=\"logo\"> {#- -#}\n-            {%- else -%}\n-                <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {#- -#}\n-            {%- endif -%}\n-        </a> {#- -#}\n-        {%- endif -%}\n-        {{- sidebar|safe -}}\n-    </nav> {#- -#}\n-    <main> {#- -#}\n-        {%- if page.css_class != \"source\" -%}<div class=\"width-limiter\">{%- endif -%}\n-            <nav class=\"sub\"> {#- -#}\n-                {%- if page.css_class == \"source\" -%}\n-                <a class=\"sub-logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {#- -#}\n-                    {%- if !layout.logo.is_empty()  %}\n-                        <img src=\"{{layout.logo}}\" alt=\"logo\"> {#- -#}\n-                    {%- else -%}\n-                        <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {#- -#}\n-                    {%- endif -%}\n-                </a> {#- -#}\n-                {%- endif -%}\n-                <form class=\"search-form\"> {#- -#}\n-                    <span></span> {#- This empty span is a hacky fix for Safari - See #93184 -#}\n-                    <input {# -#}\n-                        class=\"search-input\" {# -#}\n-                        name=\"search\" {# -#}\n-                        aria-label=\"Run search in the documentation\" {# -#}\n-                        autocomplete=\"off\" {# -#}\n-                        spellcheck=\"false\" {# -#}\n-                        placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n-                        type=\"search\"> {#- -#}\n-                    <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {#- -#}\n-                        <a href=\"{{page.root_path|safe}}help.html\">?</a> {#- -#}\n-                    </div> {#- -#}\n-                    <div id=\"settings-menu\" tabindex=\"-1\"> {#- -#}\n-                        <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {#- -#}\n-                            <img width=\"22\" height=\"22\" alt=\"Change settings\" {# -#}\n-                            src=\"{{static_root_path|safe}}{{files.wheel_svg}}\"> {#- -#}\n-                        </a> {#- -#}\n-                    </div> {#- -#}\n-                </form> {#- -#}\n-            </nav> {#- -#}\n-            <section id=\"main-content\" class=\"content\">{{- content|safe -}}</section> {#- -#}\n-        {%- if page.css_class != \"source\" -%}</div>{%- endif -%}\n-    </main> {#- -#}\n-    {{- layout.external_html.after_content|safe -}}\n-    <div id=\"rustdoc-vars\" {# -#}\n-         data-root-path=\"{{page.root_path|safe}}\" {# -#}\n-         data-static-root-path=\"{{static_root_path|safe}}\" {# -#}\n-         data-current-crate=\"{{layout.krate}}\" {# -#}\n-         data-themes=\"{{themes|join(\",\") }}\" {# -#}\n-         data-resource-suffix=\"{{page.resource_suffix}}\" {# -#}\n-         data-rustdoc-version=\"{{rustdoc_version}}\" {# -#}\n-         data-search-js=\"{{files.search_js}}\" {# -#}\n-         data-settings-js=\"{{files.settings_js}}\" {# -#}\n-         data-settings-css=\"{{files.settings_css}}\" {# -#}\n-    > {#- -#}\n-    </div> {#- -#}\n-</body> {#- -#}\n-</html> {#- -#}\n+      {% endfor %}\n+    ></script> {# #}\n+    {% endif %}\n+    <script src=\"{{static_root_path|safe}}{{files.storage_js}}\"></script> {# #}\n+    {% if page.css_class.contains(\"crate\") %}\n+    <script defer src=\"{{page.root_path|safe}}crates{{page.resource_suffix}}.js\"></script> {# #}\n+    {% else if page.css_class == \"source\" %}\n+    <script defer src=\"{{static_root_path|safe}}{{files.source_script_js}}\"></script> {# #}\n+    <script defer src=\"{{page.root_path|safe}}source-files{{page.resource_suffix}}.js\"></script> {# #}\n+    {% else if !page.css_class.contains(\"mod\") %}\n+    <script defer src=\"sidebar-items{{page.resource_suffix}}.js\"></script> {# #}\n+    {% endif %}\n+    <script defer src=\"{{static_root_path|safe}}{{files.main_js}}\"></script> {# #}\n+    {% if layout.scrape_examples_extension %}\n+    <script defer src=\"{{static_root_path|safe}}{{files.scrape_examples_js}}\"></script> {# #}\n+    {% endif %}\n+    <noscript> {# #}\n+        <link rel=\"stylesheet\" {#+ #}\n+           href=\"{{static_root_path|safe}}{{files.noscript_css}}\"> {# #}\n+    </noscript> {# #}\n+    {% if layout.css_file_extension.is_some() %}\n+        <link rel=\"stylesheet\" {#+ #}\n+            href=\"{{static_root_path|safe}}theme{{page.resource_suffix}}.css\"> {# #}\n+    {% endif %}\n+    {% if !layout.favicon.is_empty() %}\n+        <link rel=\"icon\" href=\"{{layout.favicon}}\"> {# #}\n+    {% else %}\n+        <link rel=\"alternate icon\" type=\"image/png\" {#+ #}\n+            href=\"{{static_root_path|safe}}{{files.rust_favicon_png_16}}\"> {# #}\n+        <link rel=\"alternate icon\" type=\"image/png\" {#+ #}\n+            href=\"{{static_root_path|safe}}{{files.rust_favicon_png_32}}\"> {# #}\n+        <link rel=\"icon\" type=\"image/svg+xml\" {#+ #}\n+            href=\"{{static_root_path|safe}}{{files.rust_favicon_svg}}\"> {# #}\n+    {% endif %}\n+    {{ layout.external_html.in_header|safe }}\n+</head> {# #}\n+<body class=\"rustdoc {{+page.css_class}}\"> {# #}\n+    <!--[if lte IE 11]> {# #}\n+    <div class=\"warning\"> {# #}\n+        This old browser is unsupported and will most likely display funky things. {# #}\n+    </div> {# #}\n+    <![endif]--> {# #}\n+    {{ layout.external_html.before_content|safe }}\n+    {% if page.css_class != \"source\" %}\n+    <nav class=\"mobile-topbar\"> {# #}\n+        <button class=\"sidebar-menu-toggle\">&#9776;</button> {# #}\n+        <a class=\"logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {# #}\n+        {% if !layout.logo.is_empty() %}\n+            <img src=\"{{layout.logo}}\" alt=\"logo\"> {# #}\n+        {% else %}\n+            <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {# #}\n+        {% endif %}\n+        </a> {# #}\n+        <h2></h2> {# #}\n+    </nav> {# #}\n+    {% endif %}\n+    <nav class=\"sidebar\"> {# #}\n+        {% if page.css_class != \"source\" %}\n+        <a class=\"logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {# #}\n+            {% if !layout.logo.is_empty() %}\n+                <img src=\"{{layout.logo}}\" alt=\"logo\"> {# #}\n+            {% else %}\n+                <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {# #}\n+            {% endif %}\n+        </a> {# #}\n+        {% endif %}\n+        {{ sidebar|safe }}\n+    </nav> {# #}\n+    <main> {# #}\n+        {% if page.css_class != \"source\" %}<div class=\"width-limiter\">{% endif %}\n+            <nav class=\"sub\"> {# #}\n+                {% if page.css_class == \"source\" %}\n+                <a class=\"sub-logo-container\" href=\"{{page.root_path|safe}}{{krate_with_trailing_slash|safe}}index.html\"> {# #}\n+                    {% if !layout.logo.is_empty() %}\n+                        <img src=\"{{layout.logo}}\" alt=\"logo\"> {# #}\n+                    {% else %}\n+                        <img class=\"rust-logo\" src=\"{{static_root_path|safe}}{{files.rust_logo_svg}}\" alt=\"logo\"> {# #}\n+                    {% endif %}\n+                </a> {# #}\n+                {% endif %}\n+                <form class=\"search-form\"> {# #}\n+                    <span></span> {# This empty span is a hacky fix for Safari - See #93184 #}\n+                    <input {#+ #}\n+                        class=\"search-input\" {#+ #}\n+                        name=\"search\" {#+ #}\n+                        aria-label=\"Run search in the documentation\" {#+ #}\n+                        autocomplete=\"off\" {#+ #}\n+                        spellcheck=\"false\" {#+ #}\n+                        placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {#+ #}\n+                        type=\"search\"> {# #}\n+                    <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {# #}\n+                        <a href=\"{{page.root_path|safe}}help.html\">?</a> {# #}\n+                    </div> {# #}\n+                    <div id=\"settings-menu\" tabindex=\"-1\"> {# #}\n+                        <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {# #}\n+                            <img width=\"22\" height=\"22\" alt=\"Change settings\" {#+ #}\n+                            src=\"{{static_root_path|safe}}{{files.wheel_svg}}\"> {# #}\n+                        </a> {# #}\n+                    </div> {# #}\n+                </form> {# #}\n+            </nav> {# #}\n+            <section id=\"main-content\" class=\"content\">{{ content|safe }}</section> {# #}\n+        {% if page.css_class != \"source\" %}</div>{% endif %}\n+    </main> {# #}\n+    {{ layout.external_html.after_content|safe }}\n+    <div id=\"rustdoc-vars\" {#+ #}\n+         data-root-path=\"{{page.root_path|safe}}\" {#+ #}\n+         data-static-root-path=\"{{static_root_path|safe}}\" {#+ #}\n+         data-current-crate=\"{{layout.krate}}\" {#+ #}\n+         data-themes=\"{{themes|join(\",\") }}\" {#+ #}\n+         data-resource-suffix=\"{{page.resource_suffix}}\" {#+ #}\n+         data-rustdoc-version=\"{{rustdoc_version}}\" {#+ #}\n+         data-search-js=\"{{files.search_js}}\" {#+ #}\n+         data-settings-js=\"{{files.settings_js}}\" {#+ #}\n+         data-settings-css=\"{{files.settings_css}}\" {#+ #}\n+    > {# #}\n+    </div> {# #}\n+</body> {# #}\n+</html> {# #}"}, {"sha": "edabac9a08231b055bfe95216d7c4a7b8f266d07", "filename": "src/librustdoc/html/templates/print_item.html", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "raw_url": "https://github.com/rust-lang/rust/raw/79fd51df3935247cf6ce354e64fca067f0fd9f8d/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fprint_item.html?ref=79fd51df3935247cf6ce354e64fca067f0fd9f8d", "patch": "@@ -1,28 +1,28 @@\n-<div class=\"main-heading\"> {#- -#}\n-    <h1> {#- -#}\n-        {{-typ-}}\n-        {#- The breadcrumbs of the item path, like std::string -#}\n-        {%- for component in path_components -%}\n-        <a href=\"{{component.path|safe}}index.html\">{{component.name}}</a>::<wbr>\n-        {%- endfor -%}\n-        <a class=\"{{item_type}}\" href=\"#\">{{name}}</a> {#- -#}\n-        <button id=\"copy-path\" title=\"Copy item path to clipboard\"> {#- -#}\n-        <img src=\"{{static_root_path|safe}}{{clipboard_svg}}\" {# -#}\n-                width=\"19\" height=\"18\" {# -#}\n-                alt=\"Copy item path\"> {#- -#}\n-        </button> {#- -#}\n-    </h1> {#- -#}\n-    <span class=\"out-of-band\"> {#- -#}\n+<div class=\"main-heading\"> {# #}\n+    <h1> {# #}\n+        {{typ}}\n+        {# The breadcrumbs of the item path, like std::string #}\n+        {% for component in path_components %}\n+            <a href=\"{{component.path|safe}}index.html\">{{component.name}}</a>::<wbr>\n+        {% endfor %}\n+        <a class=\"{{item_type}}\" href=\"#\">{{name}}</a> {# #}\n+        <button id=\"copy-path\" title=\"Copy item path to clipboard\"> {# #}\n+        <img src=\"{{static_root_path|safe}}{{clipboard_svg}}\" {#+ #}\n+                width=\"19\" height=\"18\" {#+ #}\n+                alt=\"Copy item path\"> {# #}\n+        </button> {# #}\n+    </h1> {# #}\n+    <span class=\"out-of-band\"> {# #}\n         {% if !stability_since_raw.is_empty() %}\n-        {{- stability_since_raw|safe }} \u00b7 {# -#}\n+        {{ stability_since_raw|safe +}} \u00b7 {#+ #}\n         {% endif %}\n-        {%- match src_href -%}\n-            {%- when Some with (href) -%}\n-                <a class=\"srclink\" href=\"{{href|safe}}\">source</a> \u00b7 {# -#}\n-            {%- else -%}\n-        {%- endmatch -%}\n-        <button id=\"toggle-all-docs\" title=\"collapse all docs\"> {#- -#}\n-            [<span>&#x2212;</span>] {#- -#}\n-        </button> {#- -#}\n-    </span> {#- -#}\n-</div> {#- -#}\n+        {% match src_href %}\n+            {% when Some with (href) %}\n+                <a class=\"srclink\" href=\"{{href|safe}}\">source</a> \u00b7 {#+ #}\n+            {% else %}\n+        {% endmatch %}\n+        <button id=\"toggle-all-docs\" title=\"collapse all docs\"> {# #}\n+            [<span>&#x2212;</span>] {# #}\n+        </button> {# #}\n+    </span> {# #}\n+</div> {# #}"}]}