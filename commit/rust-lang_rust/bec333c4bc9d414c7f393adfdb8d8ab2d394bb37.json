{"sha": "bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlYzMzM2M0YmM5ZDQxNGM3ZjM5M2FkZmRiOGQ4YWIyZDM5NGJiMzc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-28T21:35:43Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-29T01:29:29Z"}, "message": "dist: Tweak the OSX pkg installer\n\nThis performs a few touch-ups to the OSX installer:\n\n* A rust logo is shown during installation\n* The installation happens to /usr/local by default (instead of /)\n* A new welcome screen is shown that's slightly more relevant", "tree": {"sha": "9c06e33fc787586ab5bb9ba5174caf782753c46b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c06e33fc787586ab5bb9ba5174caf782753c46b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "html_url": "https://github.com/rust-lang/rust/commit/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8601a3d8b91ad3b653d143307611f2f5c75617e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8601a3d8b91ad3b653d143307611f2f5c75617e", "html_url": "https://github.com/rust-lang/rust/commit/b8601a3d8b91ad3b653d143307611f2f5c75617e"}], "stats": {"total": 38, "additions": 35, "deletions": 3}, "files": [{"sha": "052341b5845bef97fccbba7667a1d686625b4875", "filename": ".gitattributes", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/.gitattributes", "raw_url": "https://github.com/rust-lang/rust/raw/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/.gitattributes", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.gitattributes?ref=bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "patch": "@@ -5,6 +5,7 @@\n *.h rust\n *.rs rust\n src/etc/pkg/rust-logo.ico binary\n+src/etc/pkg/rust-logo.png binary\n src/rt/msvc/* -whitespace\n src/rt/vg/* -whitespace\n src/rt/jemalloc/**/* -whitespace"}, {"sha": "d0990dfd720735afe205fba52f727dd1eaa9daee", "filename": "mk/dist.mk", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "patch": "@@ -160,12 +160,27 @@ dist-prepare-osx-$(1): PREPARE_LIB_CMD=$(DEFAULT_PREPARE_LIB_CMD)\n dist-prepare-osx-$(1): PREPARE_MAN_CMD=$(DEFAULT_PREPARE_MAN_CMD)\n dist-prepare-osx-$(1): prepare-base-osx-$(1)\n \n-dist/$(PKG_NAME)-$(1).pkg: $(S)src/etc/pkg/Distribution.xml LICENSE.txt dist-prepare-osx-$(1)\n+dist/$(PKG_NAME)-$(1).pkg: $(S)src/etc/pkg/Distribution.xml LICENSE.txt \\\n+\t\tdist-prepare-osx-$(1) \\\n+\t\ttmp/dist/pkgres-$(1)/LICENSE.txt \\\n+\t\ttmp/dist/pkgres-$(1)/welcome.rtf \\\n+\t\ttmp/dist/pkgres-$(1)/rust-logo.png\n \t@$$(call E, making OS X pkg)\n \t$(Q)pkgbuild --identifier org.rust-lang.rust --root tmp/dist/pkgroot-$(1) rust.pkg\n-\t$(Q)productbuild --distribution $(S)src/etc/pkg/Distribution.xml --resources . dist/$(PKG_NAME)-$(1).pkg\n+\t$(Q)productbuild --distribution $(S)src/etc/pkg/Distribution.xml \\\n+\t      --resources tmp/dist/pkgres-$(1) dist/$(PKG_NAME)-$(1).pkg\n \t$(Q)rm -rf tmp rust.pkg\n \n+tmp/dist/pkgres-$(1)/LICENSE.txt: $(S)/LICENSE.txt\n+\t@$$(call E,pkg resource LICENSE.txt)\n+\t$(Q)mkdir -p $$(@D)\n+\t$(Q)cp $$< $$@\n+\n+tmp/dist/pkgres-$(1)/%: $(S)src/etc/pkg/%\n+\t@$$(call E,pkg resource $$*)\n+\t$(Q)mkdir -p $$(@D)\n+\t$(Q)cp -r $$< $$@\n+\n endef\n \n $(foreach host,$(CFG_HOST),$(eval $(call DEF_OSX_PKG,$(host))))"}, {"sha": "c7383c0bb1a9fdfd91eaa480401f9cc33a365478", "filename": "src/etc/pkg/Distribution.xml", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2FDistribution.xml", "raw_url": "https://github.com/rust-lang/rust/raw/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2FDistribution.xml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpkg%2FDistribution.xml?ref=bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "patch": "@@ -14,9 +14,13 @@\n             <line choice=\"org.rust-lang.rust\"/>\n         </line>\n     </choices-outline>\n-    <choice id=\"default\"/>\n+    <choice id=\"default\"\n+            customLocation=\"usr/local\"/>\n     <choice id=\"org.rust-lang.rust\" visible=\"false\">\n         <pkg-ref id=\"org.rust-lang.rust\"/>\n     </choice>\n     <pkg-ref id=\"org.rust-lang.rust\" version=\"0\" onConclusion=\"none\">rust.pkg</pkg-ref>\n+    <welcome file=\"welcome.rtf\" mime-type=\"text/enriched\"/>\n+    <background file=\"rust-logo.png\" mime-type=\"image/png\"\n+                alignment=\"bottomleft\"/>\n </installer-gui-script>"}, {"sha": "2c3de3000879b36b1dc4751ea5db0fa8fce4b5aa", "filename": "src/etc/pkg/rust-logo.png", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2Frust-logo.png", "raw_url": "https://github.com/rust-lang/rust/raw/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2Frust-logo.png", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpkg%2Frust-logo.png?ref=bec333c4bc9d414c7f393adfdb8d8ab2d394bb37"}, {"sha": "2433348998ecfac72f7978a2843a86c2ab59b9cc", "filename": "src/etc/pkg/welcome.rtf", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2Fwelcome.rtf", "raw_url": "https://github.com/rust-lang/rust/raw/bec333c4bc9d414c7f393adfdb8d8ab2d394bb37/src%2Fetc%2Fpkg%2Fwelcome.rtf", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpkg%2Fwelcome.rtf?ref=bec333c4bc9d414c7f393adfdb8d8ab2d394bb37", "patch": "@@ -0,0 +1,12 @@\n+{\\rtf1\\ansi\\ansicpg1252\\cocoartf1265\\cocoasubrtf190\n+{\\fonttbl\\f0\\fswiss\\fcharset0 Helvetica;}\n+{\\colortbl;\\red255\\green255\\blue255;}\n+\\margl1440\\margr1440\\vieww10800\\viewh6300\\viewkind0\n+\\pard\\tx720\\tx1440\\tx2160\\tx2880\\tx3600\\tx4320\\tx5040\\tx5760\\tx6480\\tx7200\\tx7920\\tx8640\\pardirnatural\n+\n+\\f0\\fs28 \\cf0 \\\n+\\\n+\tYou will be guided through the steps necessary to\\\n+\tinstall this software.\\\n+\\\n+\tThis will install Rust to /usr/local}"}]}