{"sha": "19fdc5c07f7222dbf7ac34cdee6986945059d797", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5ZmRjNWMwN2Y3MjIyZGJmN2FjMzRjZGVlNjk4Njk0NTA1OWQ3OTc=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-10-22T15:10:08Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-10-25T14:47:41Z"}, "message": "ci: fix installation condition for MinGW\n\nI mistakenly inverted the \"variable is not set\" check in bash.", "tree": {"sha": "890fb66f7d686415b619a4424e231908749e8d17", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/890fb66f7d686415b619a4424e231908749e8d17"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19fdc5c07f7222dbf7ac34cdee6986945059d797", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl2zCw8ACgkQPgar6Auq\n8Zw8lQ//fljF2LURHAI4D6q5eXyzvVFZJdX5QafzRSc8yuhg57OulEYCDIb+RrLI\nDbTBLbfNYpKCPum8P8OQUtOoh7coVwPtAceoPjyFUCpif4uaI5OG3g8rRfqrselG\ne2eLrqq4+qXk54Pav6MbKZgT/vWQu23Pa75SIJjZGivmeQvF0p9gYBmuv2Aj5xkY\n2qTh9TwdledOFL2FKfUQ3HqpU3FF0xpHwZNeRXcCrkJ+fXc8cXHuw68/4SAkZK9A\nB75haHJqseKMFri1Hs6WPmFKDVACXSxV49L7HgleIqJ1WaHXTlzfFaGVoS4iIHxP\noUjVKSyR6wLXfjQyL5LI4JHbMFDDq6NgWNuoRzWXqSJbwcAQgD1xlVoC2aPWfsPz\nv0pL6bDRD5f8n7DFPLX+q/pBakkH1thgBmW7GVNM5yePMMfR/NV1HvkdMVfn+WYz\nIoFA9Teum88FjPL5ZteyIJIflgVyAvR6n5Q2cWnBZsLyvge2R07IruxPyKpEEVsN\nECtKW0I9Bi85oLTCtg1am+4fiTyCTgDZ0dOUAQtjPD/hRqWjNtn9xBlL0QqajEYB\nH9+w+WwMNrRB08wxmka13JFbE0O66k/2MFvBM5v43KUFGMhyuxrYyINlojj1H0X6\nVm8pLUFQEfV6s1ELOlUqGcinhR7Em7Cb5EwS4J58GCpjYkYh6Vw=\n=9V0t\n-----END PGP SIGNATURE-----", "payload": "tree 890fb66f7d686415b619a4424e231908749e8d17\nparent db0078706b47f7ee0e492a15995ae55ae70c086d\nauthor Pietro Albini <pietro@pietroalbini.org> 1571757008 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1572014861 +0200\n\nci: fix installation condition for MinGW\n\nI mistakenly inverted the \"variable is not set\" check in bash.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19fdc5c07f7222dbf7ac34cdee6986945059d797", "html_url": "https://github.com/rust-lang/rust/commit/19fdc5c07f7222dbf7ac34cdee6986945059d797", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19fdc5c07f7222dbf7ac34cdee6986945059d797/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db0078706b47f7ee0e492a15995ae55ae70c086d", "url": "https://api.github.com/repos/rust-lang/rust/commits/db0078706b47f7ee0e492a15995ae55ae70c086d", "html_url": "https://github.com/rust-lang/rust/commit/db0078706b47f7ee0e492a15995ae55ae70c086d"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "b4e8b889f520a9e26fc17ccb3cb249fb0a303a7e", "filename": "src/ci/scripts/install-mingw.sh", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/19fdc5c07f7222dbf7ac34cdee6986945059d797/src%2Fci%2Fscripts%2Finstall-mingw.sh", "raw_url": "https://github.com/rust-lang/rust/raw/19fdc5c07f7222dbf7ac34cdee6986945059d797/src%2Fci%2Fscripts%2Finstall-mingw.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-mingw.sh?ref=19fdc5c07f7222dbf7ac34cdee6986945059d797", "patch": "@@ -29,17 +29,17 @@ source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n \n if isWindows; then\n     if [[ -z \"${MINGW_URL+x}\" ]]; then\n-        curl -o mingw.7z \"${MINGW_URL}/${MINGW_ARCHIVE}\"\n-        7z x -y mingw.7z > /dev/null\n-        curl -o \"${MINGW_DIR}/bin/gdborig.exe\" \"${MINGW_URL}/2017-04-20-${MSYS_BITS}bit-gdborig.exe\"\n-        ciCommandAddPath \"$(pwd)/${MINGW_DIR}/bin\"\n-    else\n         arch=i686\n         if [ \"$MSYS_BITS\" = \"64\" ]; then\n           arch=x86_64\n         fi\n         pacman -S --noconfirm --needed mingw-w64-$arch-toolchain mingw-w64-$arch-cmake \\\n             mingw-w64-$arch-gcc mingw-w64-$arch-python2\n         ciCommandAddPath \"${SYSTEM_WORKFOLDER}/msys2/mingw${MSYS_BITS}/bin\"\n+    else\n+        curl -o mingw.7z \"${MINGW_URL}/${MINGW_ARCHIVE}\"\n+        7z x -y mingw.7z > /dev/null\n+        curl -o \"${MINGW_DIR}/bin/gdborig.exe\" \"${MINGW_URL}/2017-04-20-${MSYS_BITS}bit-gdborig.exe\"\n+        ciCommandAddPath \"$(pwd)/${MINGW_DIR}/bin\"\n     fi\n fi"}]}