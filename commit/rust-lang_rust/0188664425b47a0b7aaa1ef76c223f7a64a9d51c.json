{"sha": "0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAxODg2NjQ0MjViNDdhMGI3YWFhMWVmNzZjMjIzZjdhNjRhOWQ1MWM=", "commit": {"author": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2021-05-20T23:38:40Z"}, "committer": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2021-05-20T23:47:08Z"}, "message": "Swap TargetOptions::linker_is_gnu default from false to true and update targets as appropriate.", "tree": {"sha": "cd1b016dfdf8099c93979ede67e604e13f50020c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd1b016dfdf8099c93979ede67e604e13f50020c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "html_url": "https://github.com/rust-lang/rust/commit/0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "99e3aef02079e9c10583638520cd0c134dc3a01d", "url": "https://api.github.com/repos/rust-lang/rust/commits/99e3aef02079e9c10583638520cd0c134dc3a01d", "html_url": "https://github.com/rust-lang/rust/commit/99e3aef02079e9c10583638520cd0c134dc3a01d"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "45c5c1a16e9cc417191e4bc0d7d68e9ffeb2c93e", "filename": "compiler/rustc_target/src/spec/apple_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -22,6 +22,7 @@ pub fn opts(os: &str) -> TargetOptions {\n         // macOS has -dead_strip, which doesn't rely on function_sections\n         function_sections: false,\n         dynamic_linking: true,\n+        linker_is_gnu: false,\n         executables: true,\n         families: vec![\"unix\".to_string()],\n         is_like_osx: true,"}, {"sha": "9d9da50be7a27341d843f65fd1c3d01e45b46f2c", "filename": "compiler/rustc_target/src/spec/illumos_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fillumos_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fillumos_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fillumos_base.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -33,6 +33,7 @@ pub fn opts() -> TargetOptions {\n         has_rpath: true,\n         families: vec![\"unix\".to_string()],\n         is_like_solaris: true,\n+        linker_is_gnu: false,\n         limit_rdylib_exports: false, // Linker doesn't support this\n         eliminate_frame_pointer: false,\n         eh_frame_header: false,"}, {"sha": "f6e3102f6176203dbc3743e6e012241344693cad", "filename": "compiler/rustc_target/src/spec/l4re_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -20,6 +20,7 @@ pub fn opts() -> TargetOptions {\n         executables: true,\n         panic_strategy: PanicStrategy::Abort,\n         linker: Some(\"ld\".to_string()),\n+        linker_is_gnu: false,\n         families: vec![\"unix\".to_string()],\n         ..Default::default()\n     }"}, {"sha": "f1bd8ff237d0a9f30f9f7101b94a3786228bcee8", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -1086,7 +1086,7 @@ pub struct TargetOptions {\n     /// Version of DWARF to use if not using the default.\n     /// Useful because some platforms (osx, bsd) only want up to DWARF2.\n     pub dwarf_version: Option<u32>,\n-    /// Whether the linker support GNU-like arguments such as -O. Defaults to false.\n+    /// Whether the linker support GNU-like arguments such as -O. Defaults to true.\n     pub linker_is_gnu: bool,\n     /// The MinGW toolchain has a known issue that prevents it from correctly\n     /// handling COFF object files with more than 2<sup>15</sup> sections. Since each weak\n@@ -1307,7 +1307,7 @@ impl Default for TargetOptions {\n             is_like_fuchsia: false,\n             is_like_wasm: false,\n             dwarf_version: None,\n-            linker_is_gnu: false,\n+            linker_is_gnu: true,\n             allows_weak_linkage: true,\n             has_rpath: false,\n             no_default_libraries: true,"}, {"sha": "f1ed4c154d27251cd5e035ff0b008f5d7c915dee", "filename": "compiler/rustc_target/src/spec/msvc_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmsvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmsvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmsvc_base.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -16,6 +16,7 @@ pub fn opts() -> TargetOptions {\n         is_like_windows: true,\n         is_like_msvc: true,\n         lld_flavor: LldFlavor::Link,\n+        linker_is_gnu: false,\n         pre_link_args,\n         abi_return_struct_as_int: true,\n         emit_debug_gdb_scripts: false,"}, {"sha": "97960a75b095f43a2e6be7f738cd96d5269579f6", "filename": "compiler/rustc_target/src/spec/nvptx64_nvidia_cuda.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fnvptx64_nvidia_cuda.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fnvptx64_nvidia_cuda.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fnvptx64_nvidia_cuda.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -14,6 +14,7 @@ pub fn target() -> Target {\n             linker_flavor: LinkerFlavor::PtxLinker,\n             // The linker can be installed from `crates.io`.\n             linker: Some(\"rust-ptx-linker\".to_string()),\n+            linker_is_gnu: false,\n \n             // With `ptx-linker` approach, it can be later overridden via link flags.\n             cpu: \"sm_30\".to_string(),"}, {"sha": "bc32b50168884668fd129e5ceb546c67572db5cc", "filename": "compiler/rustc_target/src/spec/solaris_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fsolaris_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0188664425b47a0b7aaa1ef76c223f7a64a9d51c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fsolaris_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fsolaris_base.rs?ref=0188664425b47a0b7aaa1ef76c223f7a64a9d51c", "patch": "@@ -8,6 +8,7 @@ pub fn opts() -> TargetOptions {\n         has_rpath: true,\n         families: vec![\"unix\".to_string()],\n         is_like_solaris: true,\n+        linker_is_gnu: false,\n         limit_rdylib_exports: false, // Linker doesn't support this\n         eh_frame_header: false,\n "}]}