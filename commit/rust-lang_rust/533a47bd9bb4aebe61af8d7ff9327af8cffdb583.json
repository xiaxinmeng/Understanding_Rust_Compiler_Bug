{"sha": "533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzM2E0N2JkOWJiNGFlYmU2MWFmOGQ3ZmY5MzI3YWY4Y2ZmZGI1ODM=", "commit": {"author": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2014-12-06T17:30:35Z"}, "committer": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2014-12-13T22:03:46Z"}, "message": "librand: use unboxed closures in `distributions` module", "tree": {"sha": "96b5845240a5d38ffbe11940e46e2433ebf1986d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96b5845240a5d38ffbe11940e46e2433ebf1986d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "html_url": "https://github.com/rust-lang/rust/commit/533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/533a47bd9bb4aebe61af8d7ff9327af8cffdb583/comments", "author": null, "committer": null, "parents": [{"sha": "5d7543b6baf511306ea91ac5f59ae8265ab0b6a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d7543b6baf511306ea91ac5f59ae8265ab0b6a3", "html_url": "https://github.com/rust-lang/rust/commit/5d7543b6baf511306ea91ac5f59ae8265ab0b6a3"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "a44197c98590c74e720e45b71a19e3c9b13ebeb2", "filename": "src/librand/distributions/mod.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/533a47bd9bb4aebe61af8d7ff9327af8cffdb583/src%2Flibrand%2Fdistributions%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/533a47bd9bb4aebe61af8d7ff9327af8cffdb583/src%2Flibrand%2Fdistributions%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Fdistributions%2Fmod.rs?ref=533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "patch": "@@ -208,14 +208,14 @@ mod ziggurat_tables;\n // the perf improvement (25-50%) is definitely worth the extra code\n // size from force-inlining.\n #[inline(always)]\n-fn ziggurat<R:Rng>(\n+fn ziggurat<R: Rng, P, Z>(\n             rng: &mut R,\n             symmetric: bool,\n             x_tab: ziggurat_tables::ZigTable,\n             f_tab: ziggurat_tables::ZigTable,\n-            pdf: |f64|: 'static -> f64,\n-            zero_case: |&mut R, f64|: 'static -> f64)\n-            -> f64 {\n+            mut pdf: P,\n+            mut zero_case: Z)\n+            -> f64 where P: FnMut(f64) -> f64, Z: FnMut(&mut R, f64) -> f64 {\n     static SCALE: f64 = (1u64 << 53) as f64;\n     loop {\n         // reimplement the f64 generation as an optimisation suggested"}, {"sha": "4fba3707703a5f6d7ed68e3639431d61acaec32f", "filename": "src/librand/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/533a47bd9bb4aebe61af8d7ff9327af8cffdb583/src%2Flibrand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/533a47bd9bb4aebe61af8d7ff9327af8cffdb583/src%2Flibrand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Flib.rs?ref=533a47bd9bb4aebe61af8d7ff9327af8cffdb583", "patch": "@@ -24,6 +24,7 @@\n        html_playground_url = \"http://play.rust-lang.org/\")]\n \n #![feature(macro_rules, phase, globs)]\n+#![feature(unboxed_closures)]\n #![no_std]\n #![experimental]\n "}]}