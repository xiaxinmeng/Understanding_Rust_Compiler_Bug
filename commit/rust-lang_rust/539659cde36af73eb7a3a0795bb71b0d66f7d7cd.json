{"sha": "539659cde36af73eb7a3a0795bb71b0d66f7d7cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzOTY1OWNkZTM2YWY3M2ViN2EzYTA3OTViYjcxYjBkNjZmN2Q3Y2Q=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-07-10T23:39:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-10T23:39:44Z"}, "message": "Merge #5304\n\n5304: Don't show error when speculatively reloading workspace r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "7986dee8ec73d21f624822530b0224681ab61806", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7986dee8ec73d21f624822530b0224681ab61806"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/539659cde36af73eb7a3a0795bb71b0d66f7d7cd", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfCPxACRBK7hj4Ov3rIwAAdHIIADl1gjXfNXOpEQ4uOBLfu9Xz\nlCuNJm5/Zo88wua/xy1XBL7xymmqyIbfDMsIVV7BZsGy/vs22OCdBbtuOOHgs6ad\nDv2hAuYoRDV92P9jj10ptvDa2DuLLhws7F4c+BIkwm6Y9JejTcsRLJa/iwarENx/\nqD73NfEwNeAHzavwxAPoyeSmWaD+hJUOyGZfparHmOa9xp+ThHJ4jT2Vti3+rig1\nMC3O4vMlRNYpKx4WpJNX0cGr+D4WKUZAwcmxT0B9TWG7Fa7u4IXxT074pgOgMEZx\nMVTT+6nchH5i1seTT2aMY9HM8m89Msk60b04cYuqGmm7zX16/VUjV4BthY7cJKA=\n=JCg+\n-----END PGP SIGNATURE-----\n", "payload": "tree 7986dee8ec73d21f624822530b0224681ab61806\nparent 343b9c6e76919c255466fd9b12fc7fd46f59022e\nparent e6ea395fb0635dbe206d7004fb720dd84516bc4f\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1594424384 +0000\ncommitter GitHub <noreply@github.com> 1594424384 +0000\n\nMerge #5304\n\n5304: Don't show error when speculatively reloading workspace r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/539659cde36af73eb7a3a0795bb71b0d66f7d7cd", "html_url": "https://github.com/rust-lang/rust/commit/539659cde36af73eb7a3a0795bb71b0d66f7d7cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/539659cde36af73eb7a3a0795bb71b0d66f7d7cd/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "343b9c6e76919c255466fd9b12fc7fd46f59022e", "url": "https://api.github.com/repos/rust-lang/rust/commits/343b9c6e76919c255466fd9b12fc7fd46f59022e", "html_url": "https://github.com/rust-lang/rust/commit/343b9c6e76919c255466fd9b12fc7fd46f59022e"}, {"sha": "e6ea395fb0635dbe206d7004fb720dd84516bc4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6ea395fb0635dbe206d7004fb720dd84516bc4f", "html_url": "https://github.com/rust-lang/rust/commit/e6ea395fb0635dbe206d7004fb720dd84516bc4f"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "ab1b18ea97a5696b6bd823730a7044e91f382711", "filename": "crates/rust-analyzer/src/reload.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/539659cde36af73eb7a3a0795bb71b0d66f7d7cd/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/539659cde36af73eb7a3a0795bb71b0d66f7d7cd/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Freload.rs?ref=539659cde36af73eb7a3a0795bb71b0d66f7d7cd", "patch": "@@ -126,10 +126,12 @@ impl GlobalState {\n                 res.map_err(|err| {\n                     has_errors = true;\n                     log::error!(\"failed to load workspace: {:#}\", err);\n-                    self.show_message(\n-                        lsp_types::MessageType::Error,\n-                        format!(\"rust-analyzer failed to load workspace: {:#}\", err),\n-                    );\n+                    if self.workspaces.is_empty() {\n+                        self.show_message(\n+                            lsp_types::MessageType::Error,\n+                            format!(\"rust-analyzer failed to load workspace: {:#}\", err),\n+                        );\n+                    }\n                 })\n                 .ok()\n             })"}]}