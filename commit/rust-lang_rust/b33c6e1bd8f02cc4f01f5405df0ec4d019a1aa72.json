{"sha": "b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72", "node_id": "C_kwDOAAsO6NoAKGIzM2M2ZTFiZDhmMDJjYzRmMDFmNTQwNWRmMGVjNGQwMTlhMWFhNzI", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-05-06T19:37:14Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-30T19:45:29Z"}, "message": "Do not error on the param_env during inlining.\n\nThis created unexpected diagnostics while compiling alga:\n    cannot satisfy `<Self as Module>::Ring == _`\n\nTurns out that we don't need this diagnostic as we disable inlining when\nit would trigger an ICE.", "tree": {"sha": "3cb13e3afe666906987a2162f9a1283058d9967b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3cb13e3afe666906987a2162f9a1283058d9967b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72", "html_url": "https://github.com/rust-lang/rust/commit/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce4b5c8afc735454fd8476de957e9804c61bff01", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce4b5c8afc735454fd8476de957e9804c61bff01", "html_url": "https://github.com/rust-lang/rust/commit/ce4b5c8afc735454fd8476de957e9804c61bff01"}], "stats": {"total": 8, "additions": 0, "deletions": 8}, "files": [{"sha": "4f45ae0d05036376f6430a40d457cc937f48516e", "filename": "compiler/rustc_mir_transform/src/inline.rs", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72/compiler%2Frustc_mir_transform%2Fsrc%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72/compiler%2Frustc_mir_transform%2Fsrc%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Finline.rs?ref=b33c6e1bd8f02cc4f01f5405df0ec4d019a1aa72", "patch": "@@ -7,7 +7,6 @@ use rustc_index::vec::Idx;\n use rustc_middle::middle::codegen_fn_attrs::{CodegenFnAttrFlags, CodegenFnAttrs};\n use rustc_middle::mir::visit::*;\n use rustc_middle::mir::*;\n-use rustc_middle::traits::ObligationCause;\n use rustc_middle::ty::subst::Subst;\n use rustc_middle::ty::{self, ConstKind, Instance, InstanceDef, ParamEnv, Ty, TyCtxt};\n use rustc_span::{hygiene::ExpnKind, ExpnData, LocalExpnId, Span};\n@@ -77,13 +76,6 @@ fn inline<'tcx>(tcx: TyCtxt<'tcx>, body: &mut Body<'tcx>) -> bool {\n     }\n \n     let param_env = tcx.param_env_reveal_all_normalized(def_id);\n-    let hir_id = tcx.hir().local_def_id_to_hir_id(def_id);\n-    let param_env = rustc_trait_selection::traits::normalize_param_env_or_error(\n-        tcx,\n-        def_id.to_def_id(),\n-        param_env,\n-        ObligationCause::misc(body.span, hir_id),\n-    );\n \n     let mut this = Inliner {\n         tcx,"}]}