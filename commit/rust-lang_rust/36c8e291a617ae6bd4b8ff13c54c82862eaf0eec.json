{"sha": "36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "node_id": "C_kwDOAAsO6NoAKDM2YzhlMjkxYTYxN2FlNmJkNGI4ZmYxM2M1NGM4Mjg2MmVhZjBlZWM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-10T21:41:02Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-10T21:41:02Z"}, "message": "Auto merge of #101720 - GuillaumeGomez:warn-INVALID_HTML_TAGS, r=notriddle\n\nChange default level of INVALID_HTML_TAGS to warning and stabilize it\n\nFixes of #67799.\n\ncc `@Nemo157`\nr? `@notriddle`", "tree": {"sha": "b38170662d2d265859e26ac69489240c3bea2924", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b38170662d2d265859e26ac69489240c3bea2924"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "html_url": "https://github.com/rust-lang/rust/commit/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a6b7274a462829f8ef08a1ddcdcec7ac80dbf3e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6b7274a462829f8ef08a1ddcdcec7ac80dbf3e1", "html_url": "https://github.com/rust-lang/rust/commit/a6b7274a462829f8ef08a1ddcdcec7ac80dbf3e1"}, {"sha": "d565200270d425ab2d72b06109314c786676f593", "url": "https://api.github.com/repos/rust-lang/rust/commits/d565200270d425ab2d72b06109314c786676f593", "html_url": "https://github.com/rust-lang/rust/commit/d565200270d425ab2d72b06109314c786676f593"}], "stats": {"total": 159, "additions": 119, "deletions": 40}, "files": [{"sha": "2f6686f81965b309f6eb533ab83f37bf401f5ac1", "filename": "compiler/rustc_errors/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_errors%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Flib.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -411,7 +411,7 @@ struct HandlerInner {\n     /// would be unnecessary repetition.\n     taught_diagnostics: FxHashSet<DiagnosticId>,\n \n-    /// Used to suggest rustc --explain <error code>\n+    /// Used to suggest rustc --explain `<error code>`\n     emitted_diagnostic_codes: FxIndexSet<DiagnosticId>,\n \n     /// This set contains a hash of every diagnostic that has been emitted by"}, {"sha": "77ab27266b286bc77ae14c7b4c7f976526778394", "filename": "compiler/rustc_hir_analysis/src/check/check.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcheck.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -707,10 +707,12 @@ pub(super) fn check_opaque_for_cycles<'tcx>(\n /// check those cases in the `param_env` of that function, which may have\n /// bounds not on this opaque type:\n ///\n-/// type X<T> = impl Clone\n+/// ```ignore (illustrative)\n+/// type X<T> = impl Clone;\n /// fn f<T: Clone>(t: T) -> X<T> {\n ///     t\n /// }\n+/// ```\n ///\n /// Without this check the above code is incorrectly accepted: we would ICE if\n /// some tried, for example, to clone an `Option<X<&mut ()>>`."}, {"sha": "213b89fc7843c150ebf94c6c9aa3478ca31f4ac9", "filename": "compiler/rustc_hir_analysis/src/constrained_generic_params.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fconstrained_generic_params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fconstrained_generic_params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fconstrained_generic_params.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -114,9 +114,9 @@ pub fn identify_constrained_generic_params<'tcx>(\n /// ```\n /// The impl's predicates are collected from left to right. Ignoring\n /// the implicit `Sized` bounds, these are\n-///   * T: Debug\n-///   * U: Iterator\n-///   * <U as Iterator>::Item = T -- a desugared ProjectionPredicate\n+///   * `T: Debug`\n+///   * `U: Iterator`\n+///   * `<U as Iterator>::Item = T` -- a desugared ProjectionPredicate\n ///\n /// When we, for example, try to go over the trait-reference\n /// `IntoIter<u32> as Trait`, we substitute the impl parameters with fresh\n@@ -132,12 +132,16 @@ pub fn identify_constrained_generic_params<'tcx>(\n ///\n /// We *do* have to be somewhat careful when projection targets contain\n /// projections themselves, for example in\n+///\n+/// ```ignore (illustrative)\n ///     impl<S,U,V,W> Trait for U where\n /// /* 0 */   S: Iterator<Item = U>,\n /// /* - */   U: Iterator,\n /// /* 1 */   <U as Iterator>::Item: ToOwned<Owned=(W,<V as Iterator>::Item)>\n /// /* 2 */   W: Iterator<Item = V>\n /// /* 3 */   V: Debug\n+/// ```\n+///\n /// we have to evaluate the projections in the order I wrote them:\n /// `V: Debug` requires `V` to be evaluated. The only projection that\n /// *determines* `V` is 2 (1 contains it, but *does not determine it*,"}, {"sha": "e806e94879d932641087b87b842ae3fdab334b98", "filename": "compiler/rustc_hir_analysis/src/impl_wf_check/min_specialization.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -130,8 +130,10 @@ fn check_always_applicable(tcx: TyCtxt<'_>, impl1_def_id: LocalDefId, impl2_node\n ///\n /// Example\n ///\n+/// ```ignore (illustrative)\n /// impl<A, B> Foo<A> for B { /* impl2 */ }\n /// impl<C> Foo<Vec<C>> for C { /* impl1 */ }\n+/// ```\n ///\n /// Would return `S1 = [C]` and `S2 = [Vec<C>, C]`.\n fn get_impl_substs<'tcx>(\n@@ -225,13 +227,17 @@ fn unconstrained_parent_impl_substs<'tcx>(\n ///\n /// For example forbid the following:\n ///\n+/// ```ignore (illustrative)\n /// impl<A> Tr for A { }\n /// impl<B> Tr for (B, B) { }\n+/// ```\n ///\n /// Note that only consider the unconstrained parameters of the base impl:\n ///\n+/// ```ignore (illustrative)\n /// impl<S, I: IntoIterator<Item = S>> Tr<S> for I { }\n /// impl<T> Tr<T> for Vec<T> { }\n+/// ```\n ///\n /// The substs for the parent impl here are `[T, Vec<T>]`, which repeats `T`,\n /// but `S` is constrained in the parent impl, so `parent_substs` is only\n@@ -256,8 +262,10 @@ fn check_duplicate_params<'tcx>(\n ///\n /// For example forbid the following:\n ///\n+/// ```ignore (illustrative)\n /// impl<A> Tr for A { }\n /// impl Tr for &'static i32 { }\n+/// ```\n fn check_static_lifetimes<'tcx>(\n     tcx: TyCtxt<'tcx>,\n     parent_substs: &Vec<GenericArg<'tcx>>,"}, {"sha": "b62c5b5e077833229e3362075ef7619209fded8b", "filename": "compiler/rustc_hir_analysis/src/mem_categorization.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fmem_categorization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_hir_analysis%2Fsrc%2Fmem_categorization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fmem_categorization.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -184,7 +184,7 @@ impl<'a, 'tcx> MemCategorizationContext<'a, 'tcx> {\n     ///   modes #42640) may look like `Some(x)` but in fact have\n     ///   implicit deref patterns attached (e.g., it is really\n     ///   `&Some(x)`). In that case, we return the \"outermost\" type\n-    ///   (e.g., `&Option<T>).\n+    ///   (e.g., `&Option<T>`).\n     pub(crate) fn pat_ty_adjusted(&self, pat: &hir::Pat<'_>) -> McResult<Ty<'tcx>> {\n         // Check for implicit `&` types wrapping the pattern; note\n         // that these are never attached to binding patterns, so"}, {"sha": "f46f0ea4cabed078c20ed232afec33b9c6aedb4b", "filename": "compiler/rustc_middle/src/thir.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_middle%2Fsrc%2Fthir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_middle%2Fsrc%2Fthir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fthir.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -203,7 +203,7 @@ pub enum StmtKind<'tcx> {\n         /// `let pat: ty = <INIT>`\n         initializer: Option<ExprId>,\n \n-        /// `let pat: ty = <INIT> else { <ELSE> }\n+        /// `let pat: ty = <INIT> else { <ELSE> }`\n         else_block: Option<BlockId>,\n \n         /// The lint level for this `let` statement."}, {"sha": "26b6be7a1b891e9bea15109143440cd576b3f19e", "filename": "compiler/rustc_middle/src/ty/adt.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_middle%2Fsrc%2Fty%2Fadt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_middle%2Fsrc%2Fty%2Fadt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fadt.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -332,13 +332,13 @@ impl<'tcx> AdtDef<'tcx> {\n         self.flags().contains(AdtFlags::IS_PHANTOM_DATA)\n     }\n \n-    /// Returns `true` if this is Box<T>.\n+    /// Returns `true` if this is `Box<T>`.\n     #[inline]\n     pub fn is_box(self) -> bool {\n         self.flags().contains(AdtFlags::IS_BOX)\n     }\n \n-    /// Returns `true` if this is UnsafeCell<T>.\n+    /// Returns `true` if this is `UnsafeCell<T>`.\n     #[inline]\n     pub fn is_unsafe_cell(self) -> bool {\n         self.flags().contains(AdtFlags::IS_UNSAFE_CELL)"}, {"sha": "3dcadb4c9115f90ce30d372a7aba764ef6a99e1d", "filename": "compiler/rustc_parse/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_parse%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_parse%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Flib.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -39,7 +39,8 @@ mod errors;\n // uses a HOF to parse anything, and <source> includes file and\n // `source_str`.\n \n-/// A variant of 'panictry!' that works on a Vec<Diagnostic> instead of a single DiagnosticBuilder.\n+/// A variant of 'panictry!' that works on a `Vec<Diagnostic>` instead of a single\n+/// `DiagnosticBuilder`.\n macro_rules! panictry_buffer {\n     ($handler:expr, $e:expr) => {{\n         use rustc_errors::FatalError;"}, {"sha": "ed34ab95ad6c00009e96e4b4b81062525d40d427", "filename": "compiler/rustc_trait_selection/src/traits/auto_trait.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fauto_trait.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -66,13 +66,13 @@ impl<'tcx> AutoTraitFinder<'tcx> {\n     /// struct Foo<T> { data: Box<T> }\n     /// ```\n     ///\n-    /// then this might return that Foo<T>: Send if T: Send (encoded in the AutoTraitResult type).\n-    /// The analysis attempts to account for custom impls as well as other complex cases. This\n-    /// result is intended for use by rustdoc and other such consumers.\n+    /// then this might return that `Foo<T>: Send` if `T: Send` (encoded in the AutoTraitResult\n+    /// type). The analysis attempts to account for custom impls as well as other complex cases.\n+    /// This result is intended for use by rustdoc and other such consumers.\n     ///\n     /// (Note that due to the coinductive nature of Send, the full and correct result is actually\n     /// quite simple to generate. That is, when a type has no custom impl, it is Send iff its field\n-    /// types are all Send. So, in our example, we might have that Foo<T>: Send if Box<T>: Send.\n+    /// types are all Send. So, in our example, we might have that `Foo<T>: Send` if `Box<T>: Send`.\n     /// But this is often not the best way to present to the user.)\n     ///\n     /// Warning: The API should be considered highly unstable, and it may be refactored or removed"}, {"sha": "511646b0eaf2963ba65a14f7213deaee3470ffd6", "filename": "compiler/rustc_trait_selection/src/traits/project.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fproject.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fproject.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fproject.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -62,7 +62,8 @@ enum ProjectionCandidate<'tcx> {\n     /// From a where-clause in the env or object type\n     ParamEnv(ty::PolyProjectionPredicate<'tcx>),\n \n-    /// From the definition of `Trait` when you have something like <<A as Trait>::B as Trait2>::C\n+    /// From the definition of `Trait` when you have something like\n+    /// `<<A as Trait>::B as Trait2>::C`.\n     TraitDef(ty::PolyProjectionPredicate<'tcx>),\n \n     /// Bounds specified on an object type\n@@ -1367,7 +1368,7 @@ fn assemble_candidates_from_param_env<'cx, 'tcx>(\n     );\n }\n \n-/// In the case of a nested projection like <<A as Foo>::FooT as Bar>::BarT, we may find\n+/// In the case of a nested projection like `<<A as Foo>::FooT as Bar>::BarT`, we may find\n /// that the definition of `Foo` has some clues:\n ///\n /// ```ignore (illustrative)"}, {"sha": "ddabea700d374f3a1a6fe2730925b65fefd084f5", "filename": "compiler/rustc_trait_selection/src/traits/select/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -826,7 +826,7 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n     /// must be met of course). One obvious case this comes up is\n     /// marker traits like `Send`. Think of a linked list:\n     ///\n-    ///    struct List<T> { data: T, next: Option<Box<List<T>>> }\n+    ///     struct List<T> { data: T, next: Option<Box<List<T>>> }\n     ///\n     /// `Box<List<T>>` will be `Send` if `T` is `Send` and\n     /// `Option<Box<List<T>>>` is `Send`, and in turn"}, {"sha": "3aad97bc296fb02f6158ab896da3ab97f96cac7f", "filename": "src/librustdoc/lint.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Flibrustdoc%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Flibrustdoc%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flint.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -148,7 +148,7 @@ declare_rustdoc_lint! {\n     ///\n     /// [rustdoc book]: ../../../rustdoc/lints.html#invalid_html_tags\n     INVALID_HTML_TAGS,\n-    Allow,\n+    Warn,\n     \"detects invalid HTML tags in doc comments\"\n }\n "}, {"sha": "67fc71665ccf7c6d8e5fedc942bbbaecc8fad955", "filename": "src/librustdoc/passes/html_tags.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fhtml_tags.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -22,10 +22,8 @@ struct InvalidHtmlTagsLinter<'a, 'tcx> {\n }\n \n pub(crate) fn check_invalid_html_tags(krate: Crate, cx: &mut DocContext<'_>) -> Crate {\n-    if cx.tcx.sess.is_nightly_build() {\n-        let mut coll = InvalidHtmlTagsLinter { cx };\n-        coll.visit_crate(&krate);\n-    }\n+    let mut coll = InvalidHtmlTagsLinter { cx };\n+    coll.visit_crate(&krate);\n     krate\n }\n "}, {"sha": "161625ed28c295e22467744333a63e81288397b8", "filename": "src/test/rustdoc-ui/intra-doc/malformed-generics.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -3,17 +3,26 @@\n //! [Vec<] //~ ERROR\n //! [Vec<Box<T] //~ ERROR\n //! [Vec<Box<T>] //~ ERROR\n+//~^ WARN\n //! [Vec<Box<T>>>] //~ ERROR\n+//~^ WARN\n //! [Vec<T>>>] //~ ERROR\n+//~^ WARN\n //! [<Vec] //~ ERROR\n //! [Vec::<] //~ ERROR\n //! [<T>] //~ ERROR\n+//~^ WARN\n //! [<invalid syntax>] //~ ERROR\n+//~^ WARN\n //! [Vec:<T>:new()] //~ ERROR\n+//~^ WARN\n //! [Vec<<T>>] //~ ERROR\n+//~^ WARN\n //! [Vec<>] //~ ERROR\n //! [Vec<<>>] //~ ERROR\n \n // FIXME(#74563) support UFCS\n //! [<Vec as IntoIterator>::into_iter] //~ ERROR\n+//~^ WARN\n //! [<Vec<T> as IntoIterator>::iter] //~ ERROR\n+//~^ WARN"}, {"sha": "08349fef88d380327baba3c33e4f30651df7e278", "filename": "src/test/rustdoc-ui/intra-doc/malformed-generics.stderr", "status": "modified", "additions": 69, "deletions": 13, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fintra-doc%2Fmalformed-generics.stderr?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -23,80 +23,136 @@ LL | //! [Vec<Box<T>]\n    |      ^^^^^^^^^^ unbalanced angle brackets\n \n error: unresolved link to `Vec<Box<T>>>`\n-  --> $DIR/malformed-generics.rs:6:6\n+  --> $DIR/malformed-generics.rs:7:6\n    |\n LL | //! [Vec<Box<T>>>]\n    |      ^^^^^^^^^^^^ unbalanced angle brackets\n \n error: unresolved link to `Vec<T>>>`\n-  --> $DIR/malformed-generics.rs:7:6\n+  --> $DIR/malformed-generics.rs:9:6\n    |\n LL | //! [Vec<T>>>]\n    |      ^^^^^^^^ unbalanced angle brackets\n \n error: unresolved link to `<Vec`\n-  --> $DIR/malformed-generics.rs:8:6\n+  --> $DIR/malformed-generics.rs:11:6\n    |\n LL | //! [<Vec]\n    |      ^^^^ unbalanced angle brackets\n \n error: unresolved link to `Vec::<`\n-  --> $DIR/malformed-generics.rs:9:6\n+  --> $DIR/malformed-generics.rs:12:6\n    |\n LL | //! [Vec::<]\n    |      ^^^^^^ unbalanced angle brackets\n \n error: unresolved link to `<T>`\n-  --> $DIR/malformed-generics.rs:10:6\n+  --> $DIR/malformed-generics.rs:13:6\n    |\n LL | //! [<T>]\n    |      ^^^ missing type for generic parameters\n \n error: unresolved link to `<invalid syntax>`\n-  --> $DIR/malformed-generics.rs:11:6\n+  --> $DIR/malformed-generics.rs:15:6\n    |\n LL | //! [<invalid syntax>]\n    |      ^^^^^^^^^^^^^^^^ missing type for generic parameters\n \n error: unresolved link to `Vec:<T>:new`\n-  --> $DIR/malformed-generics.rs:12:6\n+  --> $DIR/malformed-generics.rs:17:6\n    |\n LL | //! [Vec:<T>:new()]\n    |      ^^^^^^^^^^^^^ has invalid path separator\n \n error: unresolved link to `Vec<<T>>`\n-  --> $DIR/malformed-generics.rs:13:6\n+  --> $DIR/malformed-generics.rs:19:6\n    |\n LL | //! [Vec<<T>>]\n    |      ^^^^^^^^ too many angle brackets\n \n error: unresolved link to `Vec<>`\n-  --> $DIR/malformed-generics.rs:14:6\n+  --> $DIR/malformed-generics.rs:21:6\n    |\n LL | //! [Vec<>]\n    |      ^^^^^ empty angle brackets\n \n error: unresolved link to `Vec<<>>`\n-  --> $DIR/malformed-generics.rs:15:6\n+  --> $DIR/malformed-generics.rs:22:6\n    |\n LL | //! [Vec<<>>]\n    |      ^^^^^^^ too many angle brackets\n \n error: unresolved link to `<Vec as IntoIterator>::into_iter`\n-  --> $DIR/malformed-generics.rs:18:6\n+  --> $DIR/malformed-generics.rs:25:6\n    |\n LL | //! [<Vec as IntoIterator>::into_iter]\n    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ fully-qualified syntax is unsupported\n    |\n    = note: see https://github.com/rust-lang/rust/issues/74563 for more information\n \n error: unresolved link to `<Vec<T> as IntoIterator>::iter`\n-  --> $DIR/malformed-generics.rs:19:6\n+  --> $DIR/malformed-generics.rs:27:6\n    |\n LL | //! [<Vec<T> as IntoIterator>::iter]\n    |      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ fully-qualified syntax is unsupported\n    |\n    = note: see https://github.com/rust-lang/rust/issues/74563 for more information\n \n-error: aborting due to 15 previous errors\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:5:13\n+   |\n+LL | //! [Vec<Box<T>]\n+   |             ^^^\n+   |\n+   = note: `#[warn(rustdoc::invalid_html_tags)]` on by default\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:7:13\n+   |\n+LL | //! [Vec<Box<T>>>]\n+   |             ^^^\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:9:9\n+   |\n+LL | //! [Vec<T>>>]\n+   |         ^^^\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:13:6\n+   |\n+LL | //! [<T>]\n+   |      ^^^\n+\n+warning: unclosed HTML tag `invalid`\n+  --> $DIR/malformed-generics.rs:15:6\n+   |\n+LL | //! [<invalid syntax>]\n+   |      ^^^^^^^^\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:17:10\n+   |\n+LL | //! [Vec:<T>:new()]\n+   |          ^^^\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:19:10\n+   |\n+LL | //! [Vec<<T>>]\n+   |          ^^^\n+\n+warning: unclosed HTML tag `Vec`\n+  --> $DIR/malformed-generics.rs:25:6\n+   |\n+LL | //! [<Vec as IntoIterator>::into_iter]\n+   |      ^^^^\n+\n+warning: unclosed HTML tag `T`\n+  --> $DIR/malformed-generics.rs:27:10\n+   |\n+LL | //! [<Vec<T> as IntoIterator>::iter]\n+   |          ^^^\n+\n+error: aborting due to 15 previous errors; 9 warnings emitted\n "}, {"sha": "ad50887e9221c571f0e4319a37c175c158fd1a3d", "filename": "src/test/rustdoc/intra-doc/extern-crate-only-used-in-link.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc%2Fintra-doc%2Fextern-crate-only-used-in-link.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftest%2Frustdoc%2Fintra-doc%2Fextern-crate-only-used-in-link.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Fextern-crate-only-used-in-link.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -16,4 +16,4 @@\n //! [`empty`]\n \n // @has - '//a[@href=\"../empty2/index.html\"]' 'empty2'\n-//! [empty2<x>]\n+//! [`empty2<x>`]"}, {"sha": "e7e3625c078ab15412c33e4db9bcd2c18886f5e5", "filename": "src/tools/clippy/clippy_utils/src/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -2064,9 +2064,9 @@ pub fn fn_def_id(cx: &LateContext<'_>, expr: &Expr<'_>) -> Option<DefId> {\n     }\n }\n \n-/// Returns Option<String> where String is a textual representation of the type encapsulated in the\n-/// slice iff the given expression is a slice of primitives (as defined in the\n-/// `is_recursively_primitive_type` function) and None otherwise.\n+/// Returns `Option<String>` where String is a textual representation of the type encapsulated in\n+/// the slice iff the given expression is a slice of primitives (as defined in the\n+/// `is_recursively_primitive_type` function) and `None` otherwise.\n pub fn is_slice_of_primitives(cx: &LateContext<'_>, expr: &Expr<'_>) -> Option<String> {\n     let expr_type = cx.typeck_results().expr_ty_adjusted(expr);\n     let expr_kind = expr_type.kind();"}, {"sha": "c5e61658ad1ed19106c4f9860b994f8588fe0e90", "filename": "src/tools/rustfmt/src/config/config_type.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftools%2Frustfmt%2Fsrc%2Fconfig%2Fconfig_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36c8e291a617ae6bd4b8ff13c54c82862eaf0eec/src%2Ftools%2Frustfmt%2Fsrc%2Fconfig%2Fconfig_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustfmt%2Fsrc%2Fconfig%2Fconfig_type.rs?ref=36c8e291a617ae6bd4b8ff13c54c82862eaf0eec", "patch": "@@ -4,7 +4,7 @@ use crate::config::options::{IgnoreList, WidthHeuristics};\n /// Trait for types that can be used in `Config`.\n pub(crate) trait ConfigType: Sized {\n     /// Returns hint text for use in `Config::print_docs()`. For enum types, this is a\n-    /// pipe-separated list of variants; for other types it returns \"<type>\".\n+    /// pipe-separated list of variants; for other types it returns `<type>`.\n     fn doc_hint() -> String;\n }\n "}]}