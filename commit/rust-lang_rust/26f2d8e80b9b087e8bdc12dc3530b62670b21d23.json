{"sha": "26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2ZjJkOGU4MGI5YjA4N2U4YmRjMTJkYzM1MzBiNjI2NzBiMjFkMjM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-12-22T23:13:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-12-22T23:13:31Z"}, "message": "Rollup merge of #80136 - aDotInTheVoid:74824-test, r=Mark-Simulacrum\n\nAdd test for issue #74824\n\nIt was fixed a while ago, but doesn't have a test.\n\nCloses #74824", "tree": {"sha": "d91fc73d91531176b065218cf434ae2ffa20899b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d91fc73d91531176b065218cf434ae2ffa20899b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf4n2bCRBK7hj4Ov3rIwAAdHIIADSr2Pr+C8VRMY10G+ASrP8G\n6fh/w1cqm4nDhJzIw5KxK28padjx2bB47VTQGX/8RnunlXir1Bl6O+JyRQsolb01\ntX3PH4BMg1m3t+U8MZ6dixxqJGaSAPCc6itHXQTCkE04+AWCCp9/jebAxGJSj0L3\neJS3qjNMmPh78k9m6T9t+UJB2f7SyELsJvLabKVoNfMb6UW1XhR+QJTCHpNrHyus\nPxNONSdEFJL6vO7O5BM2LJtndOAme4YEbT+KdJ894uJ+7pYOALMid9LwGMzo4TES\nhCTfJpDaWvd+WifMi6076SCkw6TU5qIDpysMs5UFCBTxU1mM+V/h7YSvl8b5zr4=\n=NifB\n-----END PGP SIGNATURE-----\n", "payload": "tree d91fc73d91531176b065218cf434ae2ffa20899b\nparent bb1fbbf84455fbad9afd26c17e0f725019322655\nparent b11b705e52c534300565fa9a44fa4630a896ae5b\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1608678811 +0100\ncommitter GitHub <noreply@github.com> 1608678811 +0100\n\nRollup merge of #80136 - aDotInTheVoid:74824-test, r=Mark-Simulacrum\n\nAdd test for issue #74824\n\nIt was fixed a while ago, but doesn't have a test.\n\nCloses #74824\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "html_url": "https://github.com/rust-lang/rust/commit/26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/26f2d8e80b9b087e8bdc12dc3530b62670b21d23/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb1fbbf84455fbad9afd26c17e0f725019322655", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb1fbbf84455fbad9afd26c17e0f725019322655", "html_url": "https://github.com/rust-lang/rust/commit/bb1fbbf84455fbad9afd26c17e0f725019322655"}, {"sha": "b11b705e52c534300565fa9a44fa4630a896ae5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/b11b705e52c534300565fa9a44fa4630a896ae5b", "html_url": "https://github.com/rust-lang/rust/commit/b11b705e52c534300565fa9a44fa4630a896ae5b"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "00761a97d00c729eac537bd4872f8aa70ba139fd", "filename": "src/test/ui/generic-associated-types/issue-74824.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/26f2d8e80b9b087e8bdc12dc3530b62670b21d23/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26f2d8e80b9b087e8bdc12dc3530b62670b21d23/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.rs?ref=26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "patch": "@@ -0,0 +1,27 @@\n+#![feature(generic_associated_types)]\n+#![feature(associated_type_defaults)]\n+#![allow(incomplete_features)]\n+\n+use std::ops::Deref;\n+\n+trait UnsafeCopy {\n+    type Copy<T>: Copy = Box<T>;\n+    //~^ ERROR the trait bound `Box<T>: Copy` is not satisfied\n+    //~^^ ERROR the trait bound `T: Clone` is not satisfied\n+    fn copy<T>(x: &Self::Copy<T>) -> Self::Copy<T> {\n+        *x\n+    }\n+}\n+\n+impl<T> UnsafeCopy for T {}\n+\n+fn main() {\n+    let b = Box::new(42usize);\n+    let copy = <()>::copy(&b);\n+\n+    let raw_b = Box::deref(&b) as *const _;\n+    let raw_copy = Box::deref(&copy) as *const _;\n+\n+    // assert the addresses.\n+    assert_eq!(raw_b, raw_copy);\n+}"}, {"sha": "34a2c1932ebcccff2ef86b2d1c533eda6de463d4", "filename": "src/test/ui/generic-associated-types/issue-74824.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/26f2d8e80b9b087e8bdc12dc3530b62670b21d23/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/26f2d8e80b9b087e8bdc12dc3530b62670b21d23/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fissue-74824.stderr?ref=26f2d8e80b9b087e8bdc12dc3530b62670b21d23", "patch": "@@ -0,0 +1,27 @@\n+error[E0277]: the trait bound `Box<T>: Copy` is not satisfied\n+  --> $DIR/issue-74824.rs:8:5\n+   |\n+LL |     type Copy<T>: Copy = Box<T>;\n+   |     ^^^^^^^^^^^^^^----^^^^^^^^^^\n+   |     |             |\n+   |     |             required by this bound in `UnsafeCopy::Copy`\n+   |     the trait `Copy` is not implemented for `Box<T>`\n+\n+error[E0277]: the trait bound `T: Clone` is not satisfied\n+  --> $DIR/issue-74824.rs:8:5\n+   |\n+LL |     type Copy<T>: Copy = Box<T>;\n+   |     ^^^^^^^^^^^^^^----^^^^^^^^^^\n+   |     |             |\n+   |     |             required by this bound in `UnsafeCopy::Copy`\n+   |     the trait `Clone` is not implemented for `T`\n+   |\n+   = note: required because of the requirements on the impl of `Clone` for `Box<T>`\n+help: consider restricting type parameter `T`\n+   |\n+LL |     type Copy<T: Clone>: Copy = Box<T>;\n+   |                ^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0277`."}]}