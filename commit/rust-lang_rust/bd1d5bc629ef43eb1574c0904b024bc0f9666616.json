{"sha": "bd1d5bc629ef43eb1574c0904b024bc0f9666616", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkMWQ1YmM2MjllZjQzZWIxNTc0YzA5MDRiMDI0YmMwZjk2NjY2MTY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2018-12-22T17:58:06Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2018-12-23T09:29:38Z"}, "message": "stabilize min_const_unsafe_fn --bless tests.", "tree": {"sha": "6a7803f93c9530b085f374e968732efe4ab10605", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a7803f93c9530b085f374e968732efe4ab10605"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd1d5bc629ef43eb1574c0904b024bc0f9666616", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd1d5bc629ef43eb1574c0904b024bc0f9666616", "html_url": "https://github.com/rust-lang/rust/commit/bd1d5bc629ef43eb1574c0904b024bc0f9666616", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd1d5bc629ef43eb1574c0904b024bc0f9666616/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b42a3acaeca0f14df7d35b87d0045b4d58c95b55", "url": "https://api.github.com/repos/rust-lang/rust/commits/b42a3acaeca0f14df7d35b87d0045b4d58c95b55", "html_url": "https://github.com/rust-lang/rust/commit/b42a3acaeca0f14df7d35b87d0045b4d58c95b55"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "68f81f408f70a68cfda457cac665537715ac3e7b", "filename": "src/test/ui/consts/const-size_of-cycle.stderr", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fconst-size_of-cycle.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fconst-size_of-cycle.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-size_of-cycle.stderr?ref=bd1d5bc629ef43eb1574c0904b024bc0f9666616", "patch": "@@ -5,10 +5,6 @@ LL |     bytes: [u8; std::mem::size_of::<Foo>()]\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: ...which requires const-evaluating `Foo::bytes::{{constant}}`...\n-  --> $SRC_DIR/libcore/mem.rs:LL:COL\n-   |\n-LL |     intrinsics::size_of::<T>()\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n note: ...which requires computing layout of `Foo`...\n note: ...which requires normalizing `ParamEnvAnd { param_env: ParamEnv { caller_bounds: [], reveal: All }, value: [u8; _] }`...\n note: ...which requires const-evaluating + checking `Foo::bytes::{{constant}}`..."}, {"sha": "68b782bf0e7eaed960d7290072b082a137e2082a", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_unsafe.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_unsafe.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_unsafe.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_unsafe.stderr?ref=bd1d5bc629ef43eb1574c0904b024bc0f9666616", "patch": "@@ -1,37 +1,37 @@\n error[E0658]: dereferencing raw pointers in constant functions is unstable (see issue #51911)\n-  --> $DIR/min_const_fn_unsafe.rs:54:77\n+  --> $DIR/min_const_fn_unsafe.rs:60:77\n    |\n LL | const fn bad_const_fn_deref_raw(x: *mut usize) -> &'static usize { unsafe { &*x } } //~ is unsafe\n    |                                                                             ^^^\n    |\n    = help: add #![feature(const_raw_ptr_deref)] to the crate attributes to enable\n \n error[E0658]: dereferencing raw pointers in constant functions is unstable (see issue #51911)\n-  --> $DIR/min_const_fn_unsafe.rs:57:70\n+  --> $DIR/min_const_fn_unsafe.rs:63:70\n    |\n LL | const unsafe fn bad_const_unsafe_deref_raw(x: *mut usize) -> usize { *x }\n    |                                                                      ^^\n    |\n    = help: add #![feature(const_raw_ptr_deref)] to the crate attributes to enable\n \n error[E0658]: dereferencing raw pointers in constant functions is unstable (see issue #51911)\n-  --> $DIR/min_const_fn_unsafe.rs:60:83\n+  --> $DIR/min_const_fn_unsafe.rs:66:83\n    |\n LL | const unsafe fn bad_const_unsafe_deref_raw_ref(x: *mut usize) -> &'static usize { &*x }\n    |                                                                                   ^^^\n    |\n    = help: add #![feature(const_raw_ptr_deref)] to the crate attributes to enable\n \n error[E0658]: unions in const fn are unstable (see issue #51909)\n-  --> $DIR/min_const_fn_unsafe.rs:67:5\n+  --> $DIR/min_const_fn_unsafe.rs:73:5\n    |\n LL |     Foo { x: () }.y\n    |     ^^^^^^^^^^^^^^^\n    |\n    = help: add #![feature(const_fn_union)] to the crate attributes to enable\n \n error[E0133]: dereference of raw pointer is unsafe and requires unsafe function or block\n-  --> $DIR/min_const_fn_unsafe.rs:54:77\n+  --> $DIR/min_const_fn_unsafe.rs:60:77\n    |\n LL | const fn bad_const_fn_deref_raw(x: *mut usize) -> &'static usize { unsafe { &*x } } //~ is unsafe\n    |                                                                             ^^^ dereference of raw pointer"}, {"sha": "2a0ef0e6b96515a5a482497ccdf9e3145a508b87", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr?ref=bd1d5bc629ef43eb1574c0904b024bc0f9666616", "patch": "@@ -1,23 +1,23 @@\n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:26:41\n+  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:25:41\n    |\n LL | const unsafe fn bar() -> u32 { unsafe { foo() } } //~ ERROR can only call other `min_const_fn`\n    |                                         ^^^^^\n \n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:33:42\n+  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:32:42\n    |\n LL | const unsafe fn bar2() -> u32 { unsafe { foo2() } } //~ ERROR can only call other `min_const_fn`\n    |                                          ^^^^^^\n \n error: only int, `bool` and `char` operations are stable in const fn\n-  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:37:33\n+  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:36:33\n    |\n LL | const unsafe fn bar3() -> u32 { (5f32 + 6f32) as u32 } //~ ERROR only int, `bool` and `char` op\n    |                                 ^^^^^^^^^^^^^\n \n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:45:48\n+  --> $DIR/min_const_unsafe_fn_libstd_stability.rs:44:48\n    |\n LL | const unsafe fn bar2_gated() -> u32 { unsafe { foo2_gated() } } //~ ERROR can only call other\n    |                                                ^^^^^^^^^^^^"}, {"sha": "6153301518563c7a8533613679a7918b6ea0c1e8", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability2.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1d5bc629ef43eb1574c0904b024bc0f9666616/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr?ref=bd1d5bc629ef43eb1574c0904b024bc0f9666616", "patch": "@@ -1,17 +1,17 @@\n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:26:32\n+  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:25:32\n    |\n LL | const unsafe fn bar() -> u32 { foo() } //~ ERROR can only call other `min_const_fn`\n    |                                ^^^^^\n \n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:33:33\n+  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:32:33\n    |\n LL | const unsafe fn bar2() -> u32 { foo2() } //~ ERROR can only call other `min_const_fn`\n    |                                 ^^^^^^\n \n error: can only call other `min_const_fn` within a `min_const_fn`\n-  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:41:39\n+  --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:40:39\n    |\n LL | const unsafe fn bar2_gated() -> u32 { foo2_gated() } //~ ERROR can only call other `min_const_fn`\n    |                                       ^^^^^^^^^^^^"}]}