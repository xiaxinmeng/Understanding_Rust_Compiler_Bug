{"sha": "decbb83f9e7e763d440d9e00861f6dd066e0e487", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlY2JiODNmOWU3ZTc2M2Q0NDBkOWUwMDg2MWY2ZGQwNjZlMGU0ODc=", "commit": {"author": {"name": "Michael Lamparski", "email": "diagonaldevice@gmail.com", "date": "2018-03-13T19:11:53Z"}, "committer": {"name": "Michael Lamparski", "email": "diagonaldevice@gmail.com", "date": "2018-03-13T19:23:36Z"}, "message": "Add test for issue 48941\n\nA broken test to be fixed in the next commit.", "tree": {"sha": "bc7ea89b61fe97f6a08380cf194bfe3d5a17a474", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bc7ea89b61fe97f6a08380cf194bfe3d5a17a474"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/decbb83f9e7e763d440d9e00861f6dd066e0e487", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/decbb83f9e7e763d440d9e00861f6dd066e0e487", "html_url": "https://github.com/rust-lang/rust/commit/decbb83f9e7e763d440d9e00861f6dd066e0e487", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/decbb83f9e7e763d440d9e00861f6dd066e0e487/comments", "author": {"login": "ExpHP", "id": 1411280, "node_id": "MDQ6VXNlcjE0MTEyODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1411280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExpHP", "html_url": "https://github.com/ExpHP", "followers_url": "https://api.github.com/users/ExpHP/followers", "following_url": "https://api.github.com/users/ExpHP/following{/other_user}", "gists_url": "https://api.github.com/users/ExpHP/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExpHP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExpHP/subscriptions", "organizations_url": "https://api.github.com/users/ExpHP/orgs", "repos_url": "https://api.github.com/users/ExpHP/repos", "events_url": "https://api.github.com/users/ExpHP/events{/privacy}", "received_events_url": "https://api.github.com/users/ExpHP/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ExpHP", "id": 1411280, "node_id": "MDQ6VXNlcjE0MTEyODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1411280?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ExpHP", "html_url": "https://github.com/ExpHP", "followers_url": "https://api.github.com/users/ExpHP/followers", "following_url": "https://api.github.com/users/ExpHP/following{/other_user}", "gists_url": "https://api.github.com/users/ExpHP/gists{/gist_id}", "starred_url": "https://api.github.com/users/ExpHP/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ExpHP/subscriptions", "organizations_url": "https://api.github.com/users/ExpHP/orgs", "repos_url": "https://api.github.com/users/ExpHP/repos", "events_url": "https://api.github.com/users/ExpHP/events{/privacy}", "received_events_url": "https://api.github.com/users/ExpHP/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "883e74645d350b6752cb94d48f46363f6f8789e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/883e74645d350b6752cb94d48f46363f6f8789e9", "html_url": "https://github.com/rust-lang/rust/commit/883e74645d350b6752cb94d48f46363f6f8789e9"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "48be4ac6c37bc5cf0ca80c3d88f155a04955d7b2", "filename": "src/test/compile-fail-fulldeps/auxiliary/macro_crate_test.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/decbb83f9e7e763d440d9e00861f6dd066e0e487/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fmacro_crate_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/decbb83f9e7e763d440d9e00861f6dd066e0e487/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fmacro_crate_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fmacro_crate_test.rs?ref=decbb83f9e7e763d440d9e00861f6dd066e0e487", "patch": "@@ -37,6 +37,9 @@ pub fn plugin_registrar(reg: &mut Registry) {\n     reg.register_syntax_extension(\n         Symbol::intern(\"into_multi_foo\"),\n         MultiModifier(Box::new(expand_into_foo_multi)));\n+    reg.register_syntax_extension(\n+        Symbol::intern(\"noop_attribute\"),\n+        MultiModifier(Box::new(expand_noop_attribute)));\n     reg.register_syntax_extension(\n         Symbol::intern(\"duplicate\"),\n         MultiDecorator(Box::new(expand_duplicate)));\n@@ -93,6 +96,13 @@ fn expand_into_foo_multi(cx: &mut ExtCtxt,\n     }\n }\n \n+fn expand_noop_attribute(_cx: &mut ExtCtxt,\n+                         _sp: Span,\n+                         _attr: &MetaItem,\n+                         it: Annotatable) -> Annotatable {\n+    it\n+}\n+\n // Create a duplicate of the annotatable, based on the MetaItem\n fn expand_duplicate(cx: &mut ExtCtxt,\n                     _sp: Span,"}, {"sha": "4be2874ed4ff6e3b5e4aee5559b630ac08ce1ff8", "filename": "src/test/compile-fail-fulldeps/issue-48941.rs", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/decbb83f9e7e763d440d9e00861f6dd066e0e487/src%2Ftest%2Fcompile-fail-fulldeps%2Fissue-48941.rs", "raw_url": "https://github.com/rust-lang/rust/raw/decbb83f9e7e763d440d9e00861f6dd066e0e487/src%2Ftest%2Fcompile-fail-fulldeps%2Fissue-48941.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fissue-48941.rs?ref=decbb83f9e7e763d440d9e00861f6dd066e0e487", "patch": "@@ -0,0 +1,29 @@\n+// Copyright 2013-2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// This is a regression test against an ICE that used to occur\n+// on malformed attributes for a custom MultiModifier.\n+\n+// aux-build:macro_crate_test.rs\n+// ignore-stage1\n+\n+#![feature(plugin)]\n+#![plugin(macro_crate_test)]\n+\n+#[noop_attribute\"x\"] //~ ERROR expected one of\n+fn night() { }\n+\n+#[noop_attribute(\"hi\"), rank = 2] //~ ERROR unexpected token\n+fn knight() { }\n+\n+#[noop_attribute(\"/user\", data= = \"<user\")] //~ ERROR literal or identifier\n+fn nite() { }\n+\n+fn main() {}"}]}