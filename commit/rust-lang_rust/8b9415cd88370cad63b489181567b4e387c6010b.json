{"sha": "8b9415cd88370cad63b489181567b4e387c6010b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiOTQxNWNkODgzNzBjYWQ2M2I0ODkxODE1NjdiNGUzODdjNjAxMGI=", "commit": {"author": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2019-09-27T05:59:34Z"}, "committer": {"name": "Michael Wright", "email": "mikerite@lavabit.com", "date": "2019-09-27T05:59:34Z"}, "message": "Refactor `booleans`\n\nRemove unused output from `suggest(..)`", "tree": {"sha": "3ee11b56d24079926dd90c581f9bd4f28e3de771", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ee11b56d24079926dd90c581f9bd4f28e3de771"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b9415cd88370cad63b489181567b4e387c6010b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b9415cd88370cad63b489181567b4e387c6010b", "html_url": "https://github.com/rust-lang/rust/commit/8b9415cd88370cad63b489181567b4e387c6010b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b9415cd88370cad63b489181567b4e387c6010b/comments", "author": null, "committer": null, "parents": [{"sha": "f7d7456303a5f451668a8a47c016f3f78207f79c", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7d7456303a5f451668a8a47c016f3f78207f79c", "html_url": "https://github.com/rust-lang/rust/commit/f7d7456303a5f451668a8a47c016f3f78207f79c"}], "stats": {"total": 12, "additions": 4, "deletions": 8}, "files": [{"sha": "461abf86ea555f88c0b914621662024f353c260c", "filename": "clippy_lints/src/booleans.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/8b9415cd88370cad63b489181567b4e387c6010b/clippy_lints%2Fsrc%2Fbooleans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b9415cd88370cad63b489181567b4e387c6010b/clippy_lints%2Fsrc%2Fbooleans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fbooleans.rs?ref=8b9415cd88370cad63b489181567b4e387c6010b", "patch": "@@ -156,7 +156,6 @@ struct SuggestContext<'a, 'tcx, 'v> {\n     terminals: &'v [&'v Expr],\n     cx: &'a LateContext<'a, 'tcx>,\n     output: String,\n-    simplified: bool,\n }\n \n impl<'a, 'tcx, 'v> SuggestContext<'a, 'tcx, 'v> {\n@@ -179,7 +178,6 @@ impl<'a, 'tcx, 'v> SuggestContext<'a, 'tcx, 'v> {\n                 Term(n) => {\n                     let terminal = self.terminals[n as usize];\n                     if let Some(str) = simplify_not(self.cx, terminal) {\n-                        self.simplified = true;\n                         self.output.push_str(&str)\n                     } else {\n                         self.output.push('!');\n@@ -264,16 +262,14 @@ fn simplify_not(cx: &LateContext<'_, '_>, expr: &Expr) -> Option<String> {\n     }\n }\n \n-// The boolean part of the return indicates whether some simplifications have been applied.\n-fn suggest(cx: &LateContext<'_, '_>, suggestion: &Bool, terminals: &[&Expr]) -> (String, bool) {\n+fn suggest(cx: &LateContext<'_, '_>, suggestion: &Bool, terminals: &[&Expr]) -> String {\n     let mut suggest_context = SuggestContext {\n         terminals,\n         cx,\n         output: String::new(),\n-        simplified: false,\n     };\n     suggest_context.recurse(suggestion);\n-    (suggest_context.output, suggest_context.simplified)\n+    suggest_context.output\n }\n \n fn simple_negate(b: Bool) -> Bool {\n@@ -383,7 +379,7 @@ impl<'a, 'tcx> NonminimalBoolVisitor<'a, 'tcx> {\n                                 db.span_suggestion(\n                                     e.span,\n                                     \"it would look like the following\",\n-                                    suggest(self.cx, suggestion, &h2q.terminals).0,\n+                                    suggest(self.cx, suggestion, &h2q.terminals),\n                                     // nonminimal_bool can produce minimal but\n                                     // not human readable expressions (#3141)\n                                     Applicability::Unspecified,\n@@ -428,7 +424,7 @@ impl<'a, 'tcx> NonminimalBoolVisitor<'a, 'tcx> {\n                 nonminimal_bool_lint(\n                     improvements\n                         .into_iter()\n-                        .map(|suggestion| suggest(self.cx, suggestion, &h2q.terminals).0)\n+                        .map(|suggestion| suggest(self.cx, suggestion, &h2q.terminals))\n                         .collect(),\n                 );\n             }"}]}