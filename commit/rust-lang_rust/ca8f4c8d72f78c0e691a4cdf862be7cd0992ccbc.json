{"sha": "ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "node_id": "C_kwDOAAsO6NoAKGNhOGY0YzhkNzJmNzhjMGU2OTFhNGNkZjg2MmJlN2NkMDk5MmNjYmM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-29T21:43:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-29T21:43:18Z"}, "message": "Rollup merge of #104911 - spastorino:inferred_outlives_crate-return-clause, r=oli-obk\n\nMake inferred_outlives_crate return Clause\n\nr? ``@oli-obk``", "tree": {"sha": "40ead988a0b439c16eba7e8ac8a3aa88518f5ea2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40ead988a0b439c16eba7e8ac8a3aa88518f5ea2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjhnz2CRBK7hj4Ov3rIwAA9gsIACmSr6Gdq7RYAkY0LoHpgpfW\nhE6BH9mmW5Kuc2fl2TLO5yv1WVQmCJ00z2pZNXQf4Ph8N3QUCK6TWso7Gor3Zto1\n0RfhEWKrUshhZQvszxYhTIVQptWFbt3TFYeinYXWhIrpLiLObM/a/wwFrnZW3qoS\n3yCNI2hBD3q2I3EK8LMvwRuh1LKLzQUWmPX97QdIPGnvoCjtTMXkH8W8ThWIA5/h\n4VzZO+7/ugZwp1MWP7/7u7yoo+4+qqddkQ94M1fV2/wdxOG8pnM+w784EfAn+Ixd\nBH+TReojbMb6AZhCsFbxwJKVgZtVwfhHkFuVcfLy7hoEXsbeO95aKylF3wCbHEw=\n=2xkB\n-----END PGP SIGNATURE-----\n", "payload": "tree 40ead988a0b439c16eba7e8ac8a3aa88518f5ea2\nparent 3539cf9344d3efb853751a17b520af35dcd5030b\nparent 537488efd6f0be7240b5e2d08cae4af5db7162ab\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669758198 +0100\ncommitter GitHub <noreply@github.com> 1669758198 +0100\n\nRollup merge of #104911 - spastorino:inferred_outlives_crate-return-clause, r=oli-obk\n\nMake inferred_outlives_crate return Clause\n\nr? ``@oli-obk``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "html_url": "https://github.com/rust-lang/rust/commit/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3539cf9344d3efb853751a17b520af35dcd5030b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3539cf9344d3efb853751a17b520af35dcd5030b", "html_url": "https://github.com/rust-lang/rust/commit/3539cf9344d3efb853751a17b520af35dcd5030b"}, {"sha": "537488efd6f0be7240b5e2d08cae4af5db7162ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/537488efd6f0be7240b5e2d08cae4af5db7162ab", "html_url": "https://github.com/rust-lang/rust/commit/537488efd6f0be7240b5e2d08cae4af5db7162ab"}], "stats": {"total": 88, "additions": 49, "deletions": 39}, "files": [{"sha": "d623e726139442891d173b04829e287ede2cdc82", "filename": "compiler/rustc_hir_analysis/src/collect.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -33,7 +33,7 @@ use rustc_middle::middle::codegen_fn_attrs::{CodegenFnAttrFlags, CodegenFnAttrs}\n use rustc_middle::mir::mono::Linkage;\n use rustc_middle::ty::query::Providers;\n use rustc_middle::ty::util::{Discr, IntTypeExt};\n-use rustc_middle::ty::{self, AdtKind, Const, DefIdTree, IsSuggestable, Ty, TyCtxt};\n+use rustc_middle::ty::{self, AdtKind, Const, DefIdTree, IsSuggestable, ToPredicate, Ty, TyCtxt};\n use rustc_session::lint;\n use rustc_session::parse::feature_err;\n use rustc_span::symbol::{kw, sym, Ident, Symbol};\n@@ -1366,12 +1366,14 @@ fn predicates_defined_on(tcx: TyCtxt<'_>, def_id: DefId) -> ty::GenericPredicate\n             \"predicates_defined_on: inferred_outlives_of({:?}) = {:?}\",\n             def_id, inferred_outlives,\n         );\n+        let inferred_outlives_iter =\n+            inferred_outlives.iter().map(|(clause, span)| ((*clause).to_predicate(tcx), *span));\n         if result.predicates.is_empty() {\n-            result.predicates = inferred_outlives;\n+            result.predicates = tcx.arena.alloc_from_iter(inferred_outlives_iter);\n         } else {\n-            result.predicates = tcx\n-                .arena\n-                .alloc_from_iter(result.predicates.iter().chain(inferred_outlives).copied());\n+            result.predicates = tcx.arena.alloc_from_iter(\n+                result.predicates.into_iter().copied().chain(inferred_outlives_iter),\n+            );\n         }\n     }\n "}, {"sha": "81fe32000d3079450050b0937075c5f20bcdfae2", "filename": "compiler/rustc_hir_analysis/src/outlives/mod.rs", "status": "modified", "additions": 8, "deletions": 18, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_hir_analysis%2Fsrc%2Foutlives%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_hir_analysis%2Fsrc%2Foutlives%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Foutlives%2Fmod.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -3,7 +3,7 @@ use rustc_hir as hir;\n use rustc_hir::def_id::DefId;\n use rustc_middle::ty::query::Providers;\n use rustc_middle::ty::subst::GenericArgKind;\n-use rustc_middle::ty::{self, CratePredicatesMap, ToPredicate, TyCtxt};\n+use rustc_middle::ty::{self, CratePredicatesMap, TyCtxt};\n use rustc_span::symbol::sym;\n use rustc_span::Span;\n \n@@ -17,7 +17,7 @@ pub fn provide(providers: &mut Providers) {\n     *providers = Providers { inferred_outlives_of, inferred_outlives_crate, ..*providers };\n }\n \n-fn inferred_outlives_of(tcx: TyCtxt<'_>, item_def_id: DefId) -> &[(ty::Predicate<'_>, Span)] {\n+fn inferred_outlives_of(tcx: TyCtxt<'_>, item_def_id: DefId) -> &[(ty::Clause<'_>, Span)] {\n     let id = tcx.hir().local_def_id_to_hir_id(item_def_id.expect_local());\n \n     if matches!(tcx.def_kind(item_def_id), hir::def::DefKind::AnonConst) && tcx.lazy_normalization()\n@@ -50,12 +50,10 @@ fn inferred_outlives_of(tcx: TyCtxt<'_>, item_def_id: DefId) -> &[(ty::Predicate\n                 if tcx.has_attr(item_def_id, sym::rustc_outlives) {\n                     let mut pred: Vec<String> = predicates\n                         .iter()\n-                        .map(|(out_pred, _)| match out_pred.kind().skip_binder() {\n-                            ty::PredicateKind::Clause(ty::Clause::RegionOutlives(p)) => {\n-                                p.to_string()\n-                            }\n-                            ty::PredicateKind::Clause(ty::Clause::TypeOutlives(p)) => p.to_string(),\n-                            err => bug!(\"unexpected predicate {:?}\", err),\n+                        .map(|(out_pred, _)| match out_pred {\n+                            ty::Clause::RegionOutlives(p) => p.to_string(),\n+                            ty::Clause::TypeOutlives(p) => p.to_string(),\n+                            err => bug!(\"unexpected clause {:?}\", err),\n                         })\n                         .collect();\n                     pred.sort();\n@@ -103,19 +101,11 @@ fn inferred_outlives_crate(tcx: TyCtxt<'_>, (): ()) -> CratePredicatesMap<'_> {\n                 |(ty::OutlivesPredicate(kind1, region2), &span)| {\n                     match kind1.unpack() {\n                         GenericArgKind::Type(ty1) => Some((\n-                            ty::Binder::dummy(ty::PredicateKind::Clause(ty::Clause::TypeOutlives(\n-                                ty::OutlivesPredicate(ty1, *region2),\n-                            )))\n-                            .to_predicate(tcx),\n+                            ty::Clause::TypeOutlives(ty::OutlivesPredicate(ty1, *region2)),\n                             span,\n                         )),\n                         GenericArgKind::Lifetime(region1) => Some((\n-                            ty::Binder::dummy(ty::PredicateKind::Clause(\n-                                ty::Clause::RegionOutlives(ty::OutlivesPredicate(\n-                                    region1, *region2,\n-                                )),\n-                            ))\n-                            .to_predicate(tcx),\n+                            ty::Clause::RegionOutlives(ty::OutlivesPredicate(region1, *region2)),\n                             span,\n                         )),\n                         GenericArgKind::Const(_) => {"}, {"sha": "825093384fba7f4688948e4f1eb963decf7fc9e3", "filename": "compiler/rustc_lint/src/builtin.rs", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fbuiltin.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -2046,16 +2046,13 @@ declare_lint_pass!(ExplicitOutlivesRequirements => [EXPLICIT_OUTLIVES_REQUIREMEN\n \n impl ExplicitOutlivesRequirements {\n     fn lifetimes_outliving_lifetime<'tcx>(\n-        inferred_outlives: &'tcx [(ty::Predicate<'tcx>, Span)],\n+        inferred_outlives: &'tcx [(ty::Clause<'tcx>, Span)],\n         def_id: DefId,\n     ) -> Vec<ty::Region<'tcx>> {\n         inferred_outlives\n             .iter()\n-            .filter_map(|(pred, _)| match pred.kind().skip_binder() {\n-                ty::PredicateKind::Clause(ty::Clause::RegionOutlives(ty::OutlivesPredicate(\n-                    a,\n-                    b,\n-                ))) => match *a {\n+            .filter_map(|(clause, _)| match *clause {\n+                ty::Clause::RegionOutlives(ty::OutlivesPredicate(a, b)) => match *a {\n                     ty::ReEarlyBound(ebr) if ebr.def_id == def_id => Some(b),\n                     _ => None,\n                 },\n@@ -2065,16 +2062,15 @@ impl ExplicitOutlivesRequirements {\n     }\n \n     fn lifetimes_outliving_type<'tcx>(\n-        inferred_outlives: &'tcx [(ty::Predicate<'tcx>, Span)],\n+        inferred_outlives: &'tcx [(ty::Clause<'tcx>, Span)],\n         index: u32,\n     ) -> Vec<ty::Region<'tcx>> {\n         inferred_outlives\n             .iter()\n-            .filter_map(|(pred, _)| match pred.kind().skip_binder() {\n-                ty::PredicateKind::Clause(ty::Clause::TypeOutlives(ty::OutlivesPredicate(\n-                    a,\n-                    b,\n-                ))) => a.is_param(index).then_some(b),\n+            .filter_map(|(clause, _)| match *clause {\n+                ty::Clause::TypeOutlives(ty::OutlivesPredicate(a, b)) => {\n+                    a.is_param(index).then_some(b)\n+                }\n                 _ => None,\n             })\n             .collect()"}, {"sha": "6b60577c9023fff91ffa1fa29675a9523afa3be3", "filename": "compiler/rustc_metadata/src/rmeta/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -353,7 +353,7 @@ define_tables! {\n     explicit_predicates_of: Table<DefIndex, LazyValue<ty::GenericPredicates<'static>>>,\n     generics_of: Table<DefIndex, LazyValue<ty::Generics>>,\n     // As an optimization, a missing entry indicates an empty `&[]`.\n-    inferred_outlives_of: Table<DefIndex, LazyArray<(ty::Predicate<'static>, Span)>>,\n+    inferred_outlives_of: Table<DefIndex, LazyArray<(ty::Clause<'static>, Span)>>,\n     super_predicates_of: Table<DefIndex, LazyValue<ty::GenericPredicates<'static>>>,\n     type_of: Table<DefIndex, LazyValue<Ty<'static>>>,\n     variances_of: Table<DefIndex, LazyArray<ty::Variance>>,"}, {"sha": "e1220320eea1b5732808dea43d0644f1e48565e9", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -562,7 +562,7 @@ rustc_queries! {\n \n     /// Returns the inferred outlives predicates (e.g., for `struct\n     /// Foo<'a, T> { x: &'a T }`, this would return `T: 'a`).\n-    query inferred_outlives_of(key: DefId) -> &'tcx [(ty::Predicate<'tcx>, Span)] {\n+    query inferred_outlives_of(key: DefId) -> &'tcx [(ty::Clause<'tcx>, Span)] {\n         desc { |tcx| \"computing inferred outlives predicates of `{}`\", tcx.def_path_str(key) }\n         cache_on_disk_if { key.is_local() }\n         separate_provide_extern"}, {"sha": "75f2d45eadb81dbdea74246cedd6188b6002b6eb", "filename": "compiler/rustc_middle/src/ty/codec.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcodec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcodec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fcodec.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -345,6 +345,14 @@ impl<'tcx, D: TyDecoder<I = TyCtxt<'tcx>>> RefDecodable<'tcx, D>\n     }\n }\n \n+impl<'tcx, D: TyDecoder<I = TyCtxt<'tcx>>> RefDecodable<'tcx, D> for [(ty::Clause<'tcx>, Span)] {\n+    fn decode(decoder: &mut D) -> &'tcx Self {\n+        decoder.interner().arena.alloc_from_iter(\n+            (0..decoder.read_usize()).map(|_| Decodable::decode(decoder)).collect::<Vec<_>>(),\n+        )\n+    }\n+}\n+\n impl<'tcx, D: TyDecoder<I = TyCtxt<'tcx>>> RefDecodable<'tcx, D>\n     for ty::List<ty::BoundVariableKind>\n {"}, {"sha": "7be9fee3b0cf663eae9fb5f5bd4405c811303ecc", "filename": "compiler/rustc_middle/src/ty/mod.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -734,7 +734,7 @@ pub struct CratePredicatesMap<'tcx> {\n     /// For each struct with outlive bounds, maps to a vector of the\n     /// predicate of its outlive bounds. If an item has no outlives\n     /// bounds, it will have no entry.\n-    pub predicates: FxHashMap<DefId, &'tcx [(Predicate<'tcx>, Span)]>,\n+    pub predicates: FxHashMap<DefId, &'tcx [(Clause<'tcx>, Span)]>,\n }\n \n impl<'tcx> Predicate<'tcx> {\n@@ -1167,6 +1167,13 @@ impl<'tcx> ToPredicate<'tcx, Predicate<'tcx>> for Binder<'tcx, PredicateKind<'tc\n     }\n }\n \n+impl<'tcx> ToPredicate<'tcx, Predicate<'tcx>> for Clause<'tcx> {\n+    #[inline(always)]\n+    fn to_predicate(self, tcx: TyCtxt<'tcx>) -> Predicate<'tcx> {\n+        tcx.mk_predicate(ty::Binder::dummy(ty::PredicateKind::Clause(self)))\n+    }\n+}\n+\n impl<'tcx> ToPredicate<'tcx, Predicate<'tcx>> for Binder<'tcx, TraitRef<'tcx>> {\n     #[inline(always)]\n     fn to_predicate(self, tcx: TyCtxt<'tcx>) -> Predicate<'tcx> {"}, {"sha": "c7d6c6abd1c22ebe153c37ae240e8f572058eee3", "filename": "compiler/rustc_middle/src/ty/parameterized.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fparameterized.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fparameterized.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fparameterized.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -5,7 +5,7 @@ use rustc_index::vec::{Idx, IndexVec};\n use crate::middle::exported_symbols::ExportedSymbol;\n use crate::mir::Body;\n use crate::ty::{\n-    self, Const, FnSig, GeneratorDiagnosticData, GenericPredicates, Predicate, TraitRef, Ty,\n+    self, Clause, Const, FnSig, GeneratorDiagnosticData, GenericPredicates, Predicate, TraitRef, Ty,\n };\n \n pub trait ParameterizedOverTcx: 'static {\n@@ -121,6 +121,7 @@ parameterized_over_tcx! {\n     TraitRef,\n     Const,\n     Predicate,\n+    Clause,\n     GeneratorDiagnosticData,\n     Body,\n     ExportedSymbol,"}, {"sha": "ac9653b90071cdacd01923cd3bb2c6c42479be14", "filename": "compiler/rustc_query_impl/src/on_disk_cache.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_query_impl%2Fsrc%2Fon_disk_cache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc/compiler%2Frustc_query_impl%2Fsrc%2Fon_disk_cache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_impl%2Fsrc%2Fon_disk_cache.rs?ref=ca8f4c8d72f78c0e691a4cdf862be7cd0992ccbc", "patch": "@@ -818,6 +818,12 @@ impl<'a, 'tcx> Decodable<CacheDecoder<'a, 'tcx>> for &'tcx [(ty::Predicate<'tcx>\n     }\n }\n \n+impl<'a, 'tcx> Decodable<CacheDecoder<'a, 'tcx>> for &'tcx [(ty::Clause<'tcx>, Span)] {\n+    fn decode(d: &mut CacheDecoder<'a, 'tcx>) -> Self {\n+        RefDecodable::decode(d)\n+    }\n+}\n+\n impl<'a, 'tcx> Decodable<CacheDecoder<'a, 'tcx>> for &'tcx [rustc_ast::InlineAsmTemplatePiece] {\n     fn decode(d: &mut CacheDecoder<'a, 'tcx>) -> Self {\n         RefDecodable::decode(d)"}]}