{"sha": "5bbcdf5f53c4b32cf242837d87e49a5f75600052", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViYmNkZjVmNTNjNGIzMmNmMjQyODM3ZDg3ZTQ5YTVmNzU2MDAwNTI=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-06-16T13:08:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-16T13:08:37Z"}, "message": "Rollup merge of #73339 - jonas-schievink:unbug, r=estebank\n\nDon't run generator transform when there's a TyErr\n\nNot sure if this might cause any problems later on, but we shouldn't be hitting codegen or const eval for the produced MIR anyways, so it should be fine.\n\ncc https://github.com/rust-lang/rust/issues/72685#issuecomment-643749020", "tree": {"sha": "d038c45b6f97aa3581f62c8b84f03fc54a534563", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d038c45b6f97aa3581f62c8b84f03fc54a534563"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bbcdf5f53c4b32cf242837d87e49a5f75600052", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe6MRWCRBK7hj4Ov3rIwAAdHIIABnuG+vACoDj/hre3UvFYEvW\nhn0FABaGj3E6J/Bohywh/PfmQu0tIx3yM1W16Mq/BAkMLV+te4CKhQz9GguMK+oe\nfyMkDw07ZhR5SvdOL7106DlpQwwOmGYH89n+pOGCuhuCDnXVCSL/XPwtmg4rBHHc\nurq2jXNvHfphMGfrYHdb2zILmHWIaD73h+Pvt8D4gc+sz+FO84ajlIg1hpekfLaa\nMYMMV3OpKMYGpmfsqEee1visPpHNZyp96p1iOtDb9PoA7aHHQh8rGtu23U9JCmyV\nF3vbFFBgZhx46hEgo+qfmu6CMRe/OMdNUa2AciKOtNPgR2tlnaWsHvEYWwpjEyM=\n=3mFG\n-----END PGP SIGNATURE-----\n", "payload": "tree d038c45b6f97aa3581f62c8b84f03fc54a534563\nparent c65f39dac4114052eee2a900a287d767d8b678c6\nparent 4004bf19035b5fbe9f552dfafd28ee69f0b234af\nauthor Dylan DPC <dylan.dpc@gmail.com> 1592312917 +0200\ncommitter GitHub <noreply@github.com> 1592312917 +0200\n\nRollup merge of #73339 - jonas-schievink:unbug, r=estebank\n\nDon't run generator transform when there's a TyErr\n\nNot sure if this might cause any problems later on, but we shouldn't be hitting codegen or const eval for the produced MIR anyways, so it should be fine.\n\ncc https://github.com/rust-lang/rust/issues/72685#issuecomment-643749020\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bbcdf5f53c4b32cf242837d87e49a5f75600052", "html_url": "https://github.com/rust-lang/rust/commit/5bbcdf5f53c4b32cf242837d87e49a5f75600052", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bbcdf5f53c4b32cf242837d87e49a5f75600052/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c65f39dac4114052eee2a900a287d767d8b678c6", "url": "https://api.github.com/repos/rust-lang/rust/commits/c65f39dac4114052eee2a900a287d767d8b678c6", "html_url": "https://github.com/rust-lang/rust/commit/c65f39dac4114052eee2a900a287d767d8b678c6"}, {"sha": "4004bf19035b5fbe9f552dfafd28ee69f0b234af", "url": "https://api.github.com/repos/rust-lang/rust/commits/4004bf19035b5fbe9f552dfafd28ee69f0b234af", "html_url": "https://github.com/rust-lang/rust/commit/4004bf19035b5fbe9f552dfafd28ee69f0b234af"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "acadb5385c9cfa402b5473a2faa05eba5e2cb73f", "filename": "src/librustc_mir/transform/generator.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5bbcdf5f53c4b32cf242837d87e49a5f75600052/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5bbcdf5f53c4b32cf242837d87e49a5f75600052/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fgenerator.rs?ref=5bbcdf5f53c4b32cf242837d87e49a5f75600052", "patch": "@@ -1222,7 +1222,11 @@ impl<'tcx> MirPass<'tcx> for StateTransform {\n                     movability == hir::Movability::Movable,\n                 )\n             }\n-            _ => bug!(),\n+            _ => {\n+                tcx.sess\n+                    .delay_span_bug(body.span, &format!(\"unexpected generator type {}\", gen_ty));\n+                return;\n+            }\n         };\n \n         // Compute GeneratorState<yield_ty, return_ty>"}]}