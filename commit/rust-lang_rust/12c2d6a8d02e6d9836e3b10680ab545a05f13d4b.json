{"sha": "12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyYzJkNmE4ZDAyZTZkOTgzNmUzYjEwNjgwYWI1NDVhMDVmMTNkNGI=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-02T13:12:12Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-02T13:12:12Z"}, "message": "Add a script to run `kcov`", "tree": {"sha": "b4cd7355b41dafb20cb78bd3d0f8359ef878bade", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4cd7355b41dafb20cb78bd3d0f8359ef878bade"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJX8Qe5AAoJEF5CfHlMukXoENUP/jkrEs3IsaurXpBYzbkoGnlD\nAjqhlPTP8tVGaf4CysxDh0KtKYWp5lfHmzs5qkvy3FViijBIBQVjJKjhbqTDe4IT\nVfaVa9mgl6qmIAtk7Eg4ztj6OpVQz+EjFhJFWIAhqTqlEPA4biGSqzdmsF3b6i52\n3S7fNo1YvSL2Beu7kDSNZZXk/mzBdHrgIbi4ZQ03O0ziMJR8sZIx5IdxO/cQxFhd\nlGrnWkwfIVlZbADudYXDgNsPY974TrAHqFx1lU1nVT5PAs1YL1IwZRB5PD0mAi1i\nUWRrUw3jmuBN+3cqNOvaL4PEnHvHkNJLIy8ddC+9HVSutNWiyXRfdgeNJsLIquQ+\n3yoHF5qHARiod3OyqaUE1tMuc1fQXLLkWVZDLb/T1qKy/WF4MLtMZ4qN6HuwiFwW\npjOz10IlC8bfe5P2YpGWmoFTBR9PeaJxqPJZrCn0t7QpBopnMmocXVZFSVCyCCsY\nddStBEFGoJbbtp9qnNQoNv8KlwZf4ESdCYDORoMAn+L7/Td6uhn84hR2hAs3+T1z\nNy7UWekMdFr8dvNUMzO8H1EKm+W1cKBTih9NbmEGU7BMGi0IxjNVjCrOZvIa4qvy\nMsTZQNAREs/scoo1GYpgYqTMVw/pzchD6SZ461yQOWRpopSo7EnvhSBvzB4HDkPu\nUdLmFQqb+8bUjpN1NhGZ\n=6kq5\n-----END PGP SIGNATURE-----", "payload": "tree b4cd7355b41dafb20cb78bd3d0f8359ef878bade\nparent 7b92fe0387865a9f56f3c491a7986a99365ccb01\nauthor mcarton <cartonmartin+git@gmail.com> 1475413932 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1475413932 +0200\n\nAdd a script to run `kcov`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "html_url": "https://github.com/rust-lang/rust/commit/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7b92fe0387865a9f56f3c491a7986a99365ccb01", "url": "https://api.github.com/repos/rust-lang/rust/commits/7b92fe0387865a9f56f3c491a7986a99365ccb01", "html_url": "https://github.com/rust-lang/rust/commit/7b92fe0387865a9f56f3c491a7986a99365ccb01"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "76f4dab71f77605a9f60e170f92602baa6030168", "filename": "util/cov.sh", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b/util%2Fcov.sh", "raw_url": "https://github.com/rust-lang/rust/raw/12c2d6a8d02e6d9836e3b10680ab545a05f13d4b/util%2Fcov.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fcov.sh?ref=12c2d6a8d02e6d9836e3b10680ab545a05f13d4b", "patch": "@@ -0,0 +1,47 @@\n+#!/usr/bin/bash\n+\n+# This run `kcov` on Clippy. The coverage report will be at\n+# `./target/cov/index.html`.\n+# `compile-test` is special. `kcov` does not work directly on it so these files\n+# are compiled manually.\n+\n+tests=(\n+    camel_case\n+    cc_seme\n+    consts\n+    dogfood\n+    issue_825\n+    matches\n+    trim_multiline\n+    used_underscore_binding_macro\n+    versioncheck\n+)\n+tmpdir=$(mktemp -d)\n+\n+cargo test --no-run --verbose\n+\n+for t in \"${tests[@]}\"; do\n+  kcov \\\n+    --verify \\\n+    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n+    \"$tmpdir/$t\" \\\n+    cargo test --test \"$t\"\n+done\n+\n+for t in ./tests/compile-fail/*.rs; do\n+  kcov \\\n+    --verify \\\n+    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n+    \"$tmpdir/compile-fail-$(basename $t)\" \\\n+    cargo run -- -L target/debug -L target/debug/deps -Z no-trans \"$t\"\n+done\n+\n+for t in ./tests/run-pass/*.rs; do\n+  kcov \\\n+    --verify \\\n+    --include-path=\"$(pwd)/src\",\"$(pwd)/clippy_lints/src\" \\\n+    \"$tmpdir/run-pass-$(basename $t)\" \\\n+    cargo run -- -L target/debug -L target/debug/deps -Z no-trans \"$t\"\n+done\n+\n+kcov --verify --merge target/cov \"$tmpdir\"/*"}]}