{"sha": "5ed02b5c0eced7c9e4aa72b2096e537bede31df8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlZDAyYjVjMGVjZWQ3YzllNGFhNzJiMjA5NmU1MzdiZWRlMzFkZjg=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-05-18T03:25:38Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-05-18T03:25:38Z"}, "message": "Rollup merge of #25537 - carols10cents:grammar-oops, r=alexcrichton\n\nHiiii soooo I'm trying to get the reference grammar and associated tests running again, and I swear I tested before but I must have had multiple things going on when I did, because the change I made in #25137 to verify.rs is totally wrong. The RustLexer.tokens file that antlr generates has two sections:\r\n\r\n```\r\nEQ=1\r\nLT=2\r\nLE=3\r\nEQEQ=4\r\nNE=5\r\n...\r\nCOMMENT=56\r\nSHEBANG=57\r\nUTF8_BOM=58\r\n'='=1\r\n'<'=2\r\n'<='=3\r\n'=='=4\r\n...\r\n```\r\n\r\nand verify.rs is only interested in the first half-- the `continue` is to ignore the second half. In 9c7d5ae, I made it panic instead. I was trying to make sure verify.rs handled everything that might happen in the first half and complain if it didn't. That would mean the reference grammar was out of sync with at least verify.rs, if not the real grammar. But it's totally ok for verify.rs to not handle the entire second half of the file.\r\n\r\nI'm sorry for breaking this :( Good thing these tests aren't being run regularly yet...? :flushed:", "tree": {"sha": "c8c050b2e23bd046792caaf22df68b981fe7526c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c8c050b2e23bd046792caaf22df68b981fe7526c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ed02b5c0eced7c9e4aa72b2096e537bede31df8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ed02b5c0eced7c9e4aa72b2096e537bede31df8", "html_url": "https://github.com/rust-lang/rust/commit/5ed02b5c0eced7c9e4aa72b2096e537bede31df8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ed02b5c0eced7c9e4aa72b2096e537bede31df8/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "252027768eac85cfd98427ba2cbf1d51bfc77d53", "url": "https://api.github.com/repos/rust-lang/rust/commits/252027768eac85cfd98427ba2cbf1d51bfc77d53", "html_url": "https://github.com/rust-lang/rust/commit/252027768eac85cfd98427ba2cbf1d51bfc77d53"}, {"sha": "e70c8584d562c86fdca9c98895fb981683d18859", "url": "https://api.github.com/repos/rust-lang/rust/commits/e70c8584d562c86fdca9c98895fb981683d18859", "html_url": "https://github.com/rust-lang/rust/commit/e70c8584d562c86fdca9c98895fb981683d18859"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "0d8fb312d11315c3a52d0e4fe6d7075a126c11f1", "filename": "src/grammar/verify.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5ed02b5c0eced7c9e4aa72b2096e537bede31df8/src%2Fgrammar%2Fverify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ed02b5c0eced7c9e4aa72b2096e537bede31df8/src%2Fgrammar%2Fverify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fgrammar%2Fverify.rs?ref=5ed02b5c0eced7c9e4aa72b2096e537bede31df8", "patch": "@@ -111,7 +111,7 @@ fn parse_token_list(file: &str) -> HashMap<String, token::Token> {\n             \"LIT_BINARY_RAW\"    => token::Literal(token::BinaryRaw(Name(0), 0), None),\n             \"QUESTION\"          => token::Question,\n             \"SHEBANG\"           => token::Shebang(Name(0)),\n-            _                   => panic!(\"Bad token str `{}`\", val),\n+            _                   => continue,\n         };\n \n         res.insert(num.to_string(), tok);"}]}