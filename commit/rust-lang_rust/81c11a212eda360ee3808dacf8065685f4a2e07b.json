{"sha": "81c11a212eda360ee3808dacf8065685f4a2e07b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYzExYTIxMmVkYTM2MGVlMzgwOGRhY2Y4MDY1Njg1ZjRhMmUwN2I=", "commit": {"author": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2021-06-30T13:56:50Z"}, "committer": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2021-07-06T18:13:16Z"}, "message": "rust_2021_token_prefixes", "tree": {"sha": "45c84e9b1044e99a9fc873aaeb869fcdc4d96f3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/45c84e9b1044e99a9fc873aaeb869fcdc4d96f3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81c11a212eda360ee3808dacf8065685f4a2e07b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81c11a212eda360ee3808dacf8065685f4a2e07b", "html_url": "https://github.com/rust-lang/rust/commit/81c11a212eda360ee3808dacf8065685f4a2e07b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81c11a212eda360ee3808dacf8065685f4a2e07b/comments", "author": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a902e25f589b929b65bd0b55abdeb2f22796401a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a902e25f589b929b65bd0b55abdeb2f22796401a", "html_url": "https://github.com/rust-lang/rust/commit/a902e25f589b929b65bd0b55abdeb2f22796401a"}], "stats": {"total": 40, "additions": 20, "deletions": 20}, "files": [{"sha": "9d809e388a18c1665e1b119414747ba2f5e0ac30", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/81c11a212eda360ee3808dacf8065685f4a2e07b/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c11a212eda360ee3808dacf8065685f4a2e07b/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=81c11a212eda360ee3808dacf8065685f4a2e07b", "patch": "@@ -2973,7 +2973,7 @@ declare_lint_pass! {\n         RUST_2021_INCOMPATIBLE_OR_PATTERNS,\n         LARGE_ASSIGNMENTS,\n         FUTURE_PRELUDE_COLLISIONS,\n-        RESERVED_PREFIXES,\n+        RUST_2021_TOKEN_PREFIXES,\n         UNSUPPORTED_CALLING_CONVENTIONS,\n     ]\n }\n@@ -3270,13 +3270,13 @@ declare_lint! {\n }\n \n declare_lint! {\n-    /// The `reserved_prefixes` lint detects identifiers that will be parsed as a\n+    /// The `rust_2021_token_prefixes` lint detects identifiers that will be parsed as a\n     /// prefix instead in Rust 2021.\n     ///\n     /// ### Example\n     ///\n     /// ```rust,compile_fail\n-    /// #![deny(reserved_prefixes)]\n+    /// #![deny(rust_2021_token_prefixes)]\n     ///\n     /// macro_rules! m {\n     ///     (z $x:expr) => ();\n@@ -3295,7 +3295,7 @@ declare_lint! {\n     ///\n     /// This lint suggests to add whitespace between the `z` and `\"hey\"` tokens\n     /// to keep them separated in Rust 2021.\n-    pub RESERVED_PREFIXES,\n+    pub RUST_2021_TOKEN_PREFIXES,\n     Allow,\n     \"identifiers that will be parsed as a prefix in Rust 2021\",\n     @future_incompatible = FutureIncompatibleInfo {"}, {"sha": "73ca9b04b37cc611bcb977de9f1dc70054af1bed", "filename": "compiler/rustc_parse/src/lexer/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/81c11a212eda360ee3808dacf8065685f4a2e07b/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c11a212eda360ee3808dacf8065685f4a2e07b/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Flexer%2Fmod.rs?ref=81c11a212eda360ee3808dacf8065685f4a2e07b", "patch": "@@ -4,7 +4,7 @@ use rustc_ast::tokenstream::{Spacing, TokenStream};\n use rustc_errors::{error_code, Applicability, DiagnosticBuilder, FatalError, PResult};\n use rustc_lexer::unescape::{self, Mode};\n use rustc_lexer::{Base, DocStyle, RawStrError};\n-use rustc_session::lint::builtin::RESERVED_PREFIXES;\n+use rustc_session::lint::builtin::RUST_2021_TOKEN_PREFIXES;\n use rustc_session::lint::BuiltinLintDiagnostics;\n use rustc_session::parse::ParseSess;\n use rustc_span::symbol::{sym, Symbol};\n@@ -526,7 +526,7 @@ impl<'a> StringReader<'a> {\n         } else {\n             // Before Rust 2021, only emit a lint for migration.\n             self.sess.buffer_lint_with_diagnostic(\n-                &RESERVED_PREFIXES,\n+                &RUST_2021_TOKEN_PREFIXES,\n                 prefix_span,\n                 ast::CRATE_NODE_ID,\n                 &msg,"}, {"sha": "3392970d8d3534a7ad22b71a67169b31f0cb70b1", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.fixed", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.fixed?ref=81c11a212eda360ee3808dacf8065685f4a2e07b", "patch": "@@ -2,7 +2,7 @@\n // run-rustfix\n // compile-flags: -Z unstable-options --edition 2018\n \n-#![warn(reserved_prefixes)]\n+#![warn(rust_2021_token_prefixes)]\n \n macro_rules! m2 {\n     ($a:tt $b:tt) => {};\n@@ -14,16 +14,16 @@ macro_rules! m3 {\n \n fn main() {\n     m2!(z \"hey\");\n-    //~^ WARNING prefix `z` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `z` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m2!(prefix \"hey\");\n-    //~^ WARNING prefix `prefix` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `prefix` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey #123);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `hey` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey #hey);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `hey` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n }\n \n@@ -33,6 +33,6 @@ macro_rules! quote {\n \n quote! {\n     #name = #kind #value\n-    //~^ WARNING prefix `kind` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `kind` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n }"}, {"sha": "b8a75224f84082eede2adefa85f11c86fe4d6adb", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.rs?ref=81c11a212eda360ee3808dacf8065685f4a2e07b", "patch": "@@ -2,7 +2,7 @@\n // run-rustfix\n // compile-flags: -Z unstable-options --edition 2018\n \n-#![warn(reserved_prefixes)]\n+#![warn(rust_2021_token_prefixes)]\n \n macro_rules! m2 {\n     ($a:tt $b:tt) => {};\n@@ -14,16 +14,16 @@ macro_rules! m3 {\n \n fn main() {\n     m2!(z\"hey\");\n-    //~^ WARNING prefix `z` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `z` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m2!(prefix\"hey\");\n-    //~^ WARNING prefix `prefix` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `prefix` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey#123);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `hey` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n     m3!(hey#hey);\n-    //~^ WARNING prefix `hey` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `hey` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n }\n \n@@ -33,6 +33,6 @@ macro_rules! quote {\n \n quote! {\n     #name = #kind#value\n-    //~^ WARNING prefix `kind` is unknown [reserved_prefixes]\n+    //~^ WARNING prefix `kind` is unknown [rust_2021_token_prefixes]\n     //~| WARNING hard error in Rust 2021\n }"}, {"sha": "872aefc0715ee22e46d487ad2af3783cbf34bf0f", "filename": "src/test/ui/rust-2021/reserved-prefixes-migration.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/81c11a212eda360ee3808dacf8065685f4a2e07b/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2021%2Freserved-prefixes-migration.stderr?ref=81c11a212eda360ee3808dacf8065685f4a2e07b", "patch": "@@ -7,8 +7,8 @@ LL |     m2!(z\"hey\");\n note: the lint level is defined here\n   --> $DIR/reserved-prefixes-migration.rs:5:9\n    |\n-LL | #![warn(reserved_prefixes)]\n-   |         ^^^^^^^^^^^^^^^^^\n+LL | #![warn(rust_2021_token_prefixes)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^\n    = warning: this is accepted in the current edition (Rust 2018) but is a hard error in Rust 2021!\n    = note: for more information, see issue #84978 <https://github.com/rust-lang/rust/issues/84978>\n help: insert whitespace here to avoid this being parsed as a prefix in Rust 2021"}]}