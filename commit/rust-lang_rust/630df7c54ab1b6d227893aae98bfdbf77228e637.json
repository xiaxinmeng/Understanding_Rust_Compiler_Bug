{"sha": "630df7c54ab1b6d227893aae98bfdbf77228e637", "node_id": "C_kwDOAAsO6NoAKDYzMGRmN2M1NGFiMWI2ZDIyNzg5M2FhZTk4YmZkYmY3NzIyOGU2Mzc", "commit": {"author": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-10-19T02:34:58Z"}, "committer": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-10-26T02:02:51Z"}, "message": "Remove unnecessary check for registers\n\n`is_clobber()` already checks if `reg` is a register and the both\nvalues should be the same.", "tree": {"sha": "85385223dd14af1f364ddb24f73cfc5746c8e1b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/85385223dd14af1f364ddb24f73cfc5746c8e1b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/630df7c54ab1b6d227893aae98bfdbf77228e637", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEx6scKn6IIf/+FpBu2rpbBylhwYoFAmF3YcsACgkQ2rpbBylh\nwYqZzxAAuTM+wDhsBQ8mMe0WSFtynXpLwJmsiqYJAOVJfXberkEsExdkqzMdGxXn\nUMenltbfgCDZysgmJhkQKxBrmOd9xgsnDkftVoDOuk8cGLV8c+Mbeul/0c5nDV42\nfJgebLkfO3knuuQLVkPfAiFZGhSD3kIQZwLZIK0eo7rDY3H5PnHtNhaECPueVWCp\n9y2MKEBemt5AfJo+hqIPmm80F7b1AzaLJ/z1T+275RsLcwbu/8o2hoLP6ZTQk/I8\n/UG1WdSOt4e6+dVpK/ZrJ1oUGqjqatmFpz3mnJlySiDjv9zsODVF6vjyliRCIHdo\nL0egNH646GC/0pUSoYt34t1sZOLNM757yTfMUO0yM2uYB0pmJSo4ixYLVCI/TcVP\nsSTAGvIMws1X4akVOzwAqWhAdJudE6Pr7441ZRJdQd543/yXC9+dqMKZv+IO3W12\nDJA/zLuFIjQZbNYSR4wy0cvCQ+U8UUzu5zlILG9Y6z/PmDI7i9xsjIw6DNGPfsd4\n4ZcLWLwFLJPSTBsEpyv/DBBhcNxslmlVl/8/OuYEycDpoa2UBUZBlJllikp3iKyp\n9jFzCcPYa0yIVPpAfdSh7k90NdY6l5F9a3ePl1PGF5p/DPEor6e9OlALtwBzgoTM\nNJwXvWbrsCfNKPE5Ke+7ekNOpHUucffV7c3VU1x73ToXqod3+ME=\n=Fci6\n-----END PGP SIGNATURE-----", "payload": "tree 85385223dd14af1f364ddb24f73cfc5746c8e1b5\nparent f5cbb9b9e6e8c2d2e1932b0e7b6556f689d44b0d\nauthor Yuki Okushi <yuki.okushi@huawei.com> 1634610898 +0900\ncommitter Yuki Okushi <yuki.okushi@huawei.com> 1635213771 +0900\n\nRemove unnecessary check for registers\n\n`is_clobber()` already checks if `reg` is a register and the both\nvalues should be the same.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/630df7c54ab1b6d227893aae98bfdbf77228e637", "html_url": "https://github.com/rust-lang/rust/commit/630df7c54ab1b6d227893aae98bfdbf77228e637", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/630df7c54ab1b6d227893aae98bfdbf77228e637/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5cbb9b9e6e8c2d2e1932b0e7b6556f689d44b0d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5cbb9b9e6e8c2d2e1932b0e7b6556f689d44b0d", "html_url": "https://github.com/rust-lang/rust/commit/f5cbb9b9e6e8c2d2e1932b0e7b6556f689d44b0d"}], "stats": {"total": 4, "additions": 1, "deletions": 3}, "files": [{"sha": "d0da88f1cc095163e82ebef41dd2df9a95eea2e3", "filename": "compiler/rustc_ast_lowering/src/asm.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/630df7c54ab1b6d227893aae98bfdbf77228e637/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/630df7c54ab1b6d227893aae98bfdbf77228e637/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs?ref=630df7c54ab1b6d227893aae98bfdbf77228e637", "patch": "@@ -214,9 +214,7 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n                 // means that we disallow passing a value in/out of the asm and\n                 // require that the operand name an explicit register, not a\n                 // register class.\n-                if reg_class.is_clobber_only(asm_arch.unwrap())\n-                    && !(op.is_clobber() && matches!(reg, asm::InlineAsmRegOrRegClass::Reg(_)))\n-                {\n+                if reg_class.is_clobber_only(asm_arch.unwrap()) && !op.is_clobber() {\n                     let msg = format!(\n                         \"register class `{}` can only be used as a clobber, \\\n                              not as an input or output\","}]}