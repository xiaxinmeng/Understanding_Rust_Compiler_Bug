{"sha": "a216131c3566858b78f45ccc0c36b5578f5c5155", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyMTYxMzFjMzU2Njg1OGI3OGY0NWNjYzBjMzZiNTU3OGY1YzUxNTU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-06-14T13:05:54Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-06-14T13:05:54Z"}, "message": "Auto merge of #86273 - JohnTitor:stabilize-maybe-uninit-ref, r=RalfJung\n\nStabilize `maybe_uninit_ref`\n\nThis stabilizes `assume_init_{ref,mut}`. FCP is complete: https://github.com/rust-lang/rust/issues/63568#issuecomment-590121300\nThe renaming was done by #76047 and FIXME was resolved by #76241, so I think we can now stabilize them finally \ud83c\udf89\nStill, it's const-unstable as `assert_inhabited` is unstable.\n\nCloses #63568", "tree": {"sha": "b902b6aa9318d86107ce5d5f1848ae8232df18c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b902b6aa9318d86107ce5d5f1848ae8232df18c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a216131c3566858b78f45ccc0c36b5578f5c5155", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a216131c3566858b78f45ccc0c36b5578f5c5155", "html_url": "https://github.com/rust-lang/rust/commit/a216131c3566858b78f45ccc0c36b5578f5c5155", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a216131c3566858b78f45ccc0c36b5578f5c5155/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7510b0ca45d1204f8f0e9dc1bb2dc7d95b279c9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7510b0ca45d1204f8f0e9dc1bb2dc7d95b279c9a", "html_url": "https://github.com/rust-lang/rust/commit/7510b0ca45d1204f8f0e9dc1bb2dc7d95b279c9a"}, {"sha": "7fa1308db1929822e802d06ca8bfe6225e50a736", "url": "https://api.github.com/repos/rust-lang/rust/commits/7fa1308db1929822e802d06ca8bfe6225e50a736", "html_url": "https://github.com/rust-lang/rust/commit/7fa1308db1929822e802d06ca8bfe6225e50a736"}], "stats": {"total": 16, "additions": 2, "deletions": 14}, "files": [{"sha": "7b0291c5f2efa5d3769e0fd6c2c7f2e4f03bd82e", "filename": "library/alloc/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Falloc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Falloc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Flib.rs?ref=a216131c3566858b78f45ccc0c36b5578f5c5155", "patch": "@@ -109,7 +109,6 @@\n #![feature(iter_zip)]\n #![feature(lang_items)]\n #![feature(layout_for_ptr)]\n-#![feature(maybe_uninit_ref)]\n #![feature(negative_impls)]\n #![feature(never_type)]\n #![feature(nll)]"}, {"sha": "623fd745a5ee98a0457955b56c1669c9e493ede3", "filename": "library/core/src/mem/maybe_uninit.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs?ref=a216131c3566858b78f45ccc0c36b5578f5c5155", "patch": "@@ -665,7 +665,6 @@ impl<T> MaybeUninit<T> {\n     /// ### Correct usage of this method:\n     ///\n     /// ```rust\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::mem::MaybeUninit;\n     ///\n     /// let mut x = MaybeUninit::<Vec<u32>>::uninit();\n@@ -683,7 +682,6 @@ impl<T> MaybeUninit<T> {\n     /// ### *Incorrect* usages of this method:\n     ///\n     /// ```rust,no_run\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::mem::MaybeUninit;\n     ///\n     /// let x = MaybeUninit::<Vec<u32>>::uninit();\n@@ -692,7 +690,6 @@ impl<T> MaybeUninit<T> {\n     /// ```\n     ///\n     /// ```rust,no_run\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::{cell::Cell, mem::MaybeUninit};\n     ///\n     /// let b = MaybeUninit::<Cell<bool>>::uninit();\n@@ -703,7 +700,7 @@ impl<T> MaybeUninit<T> {\n     ///    // Reference to an uninitialized `Cell<bool>`: UB!\n     /// }\n     /// ```\n-    #[unstable(feature = \"maybe_uninit_ref\", issue = \"63568\")]\n+    #[stable(feature = \"maybe_uninit_ref\", since = \"1.55.0\")]\n     #[rustc_const_unstable(feature = \"const_maybe_uninit_assume_init\", issue = \"none\")]\n     #[inline(always)]\n     pub const unsafe fn assume_init_ref(&self) -> &T {\n@@ -733,7 +730,6 @@ impl<T> MaybeUninit<T> {\n     /// ### Correct usage of this method:\n     ///\n     /// ```rust\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::mem::MaybeUninit;\n     ///\n     /// # unsafe extern \"C\" fn initialize_buffer(buf: *mut [u8; 1024]) { *buf = [0; 1024] }\n@@ -769,7 +765,6 @@ impl<T> MaybeUninit<T> {\n     /// You cannot use `.assume_init_mut()` to initialize a value:\n     ///\n     /// ```rust,no_run\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::mem::MaybeUninit;\n     ///\n     /// let mut b = MaybeUninit::<bool>::uninit();\n@@ -785,7 +780,6 @@ impl<T> MaybeUninit<T> {\n     /// [`Read`]: https://doc.rust-lang.org/std/io/trait.Read.html\n     ///\n     /// ```rust,no_run\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::{io, mem::MaybeUninit};\n     ///\n     /// fn read_chunk (reader: &'_ mut dyn io::Read) -> io::Result<[u8; 64]>\n@@ -802,7 +796,6 @@ impl<T> MaybeUninit<T> {\n     /// Nor can you use direct field access to do field-by-field gradual initialization:\n     ///\n     /// ```rust,no_run\n-    /// #![feature(maybe_uninit_ref)]\n     /// use std::{mem::MaybeUninit, ptr};\n     ///\n     /// struct Foo {\n@@ -823,10 +816,7 @@ impl<T> MaybeUninit<T> {\n     ///     foo.assume_init()\n     /// };\n     /// ```\n-    // FIXME(#76092): We currently rely on the above being incorrect, i.e., we have references\n-    // to uninitialized data (e.g., in `libcore/fmt/float.rs`).  We should make\n-    // a final decision about the rules before stabilization.\n-    #[unstable(feature = \"maybe_uninit_ref\", issue = \"63568\")]\n+    #[stable(feature = \"maybe_uninit_ref\", since = \"1.55.0\")]\n     #[rustc_const_unstable(feature = \"const_maybe_uninit_assume_init\", issue = \"none\")]\n     #[inline(always)]\n     pub const unsafe fn assume_init_mut(&mut self) -> &mut T {"}, {"sha": "6f94a0599ed3117f911d00ecfc7c035532aea7e8", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a216131c3566858b78f45ccc0c36b5578f5c5155/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=a216131c3566858b78f45ccc0c36b5578f5c5155", "patch": "@@ -286,7 +286,6 @@\n #![feature(log_syntax)]\n #![feature(map_try_insert)]\n #![feature(maybe_uninit_extra)]\n-#![feature(maybe_uninit_ref)]\n #![feature(maybe_uninit_slice)]\n #![feature(maybe_uninit_uninit_array)]\n #![feature(min_specialization)]"}]}