{"sha": "c9c81d92a96531d72782fb24f923e972facab6f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5YzgxZDkyYTk2NTMxZDcyNzgyZmIyNGY5MjNlOTcyZmFjYWI2ZjQ=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-11-29T02:14:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-29T02:14:22Z"}, "message": "Rollup merge of #79484 - sreehax:master, r=Mark-Simulacrum\n\nadd enable-full-tools to freebsd builds to prevent occasional link er\u2026\n\nOn FreeBSD, there is sometimes an issue where linking a rust program will fail due to rust not finding a linker, even though lld is included in the base system. This seems to mostly affect bare metal/cross compilation things, such as wasm builds and arm/riscv bare metal work (eg. when trying to compile [this](https://github.com/quantumscraps/scraps)). On Linux and other operating systems, full tools are enabled for builds of rust, so there are no linking issues. This pr should enable fully functional builds on FreeBSD, assuming rust builds correctly with these options.", "tree": {"sha": "fa17f6a0748c60fb7533df768a947e04a00a71a4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa17f6a0748c60fb7533df768a947e04a00a71a4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9c81d92a96531d72782fb24f923e972facab6f4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfwwP/CRBK7hj4Ov3rIwAAdHIIAB5Wcs1mGq83Q2PnRPi/h3vP\n3baTK6vANRbM068ugZX2n9J1EEzLfYyVytnIF+D4/HEvrmoSkL9XhuHWcOV6ktII\n0TsrYAoZUZdC96tO2g2F46s323AEOefL7FDHroeRu3brdQZWXD/HcmJqmvOPRYSf\nlPqojnZEn+HwQ9zinTeKYMwTUkL47IiOf2ba8QyGZmMSdnb0Gey8TVcTnHciIYfw\noaBu63cZLKtKxTuuEiMws15ozUfi9319W8cZBuECO+V7Pg1m6o0qr/zfTyNJ7S9z\n0gb5wPBAffQuW891TBmZQVU/5R90mphWB+XD48tduiE+AWfbFdIKOjTHUjFGFS0=\n=W6pi\n-----END PGP SIGNATURE-----\n", "payload": "tree fa17f6a0748c60fb7533df768a947e04a00a71a4\nparent ca8a1b05c62d05d82fb6d5480dc9e4b4fdad1ce4\nparent 7e00222aab90df9f09e23be01c2c7fb6a5044e6a\nauthor Dylan DPC <dylan.dpc@gmail.com> 1606616062 +0100\ncommitter GitHub <noreply@github.com> 1606616062 +0100\n\nRollup merge of #79484 - sreehax:master, r=Mark-Simulacrum\n\nadd enable-full-tools to freebsd builds to prevent occasional link er\u2026\n\nOn FreeBSD, there is sometimes an issue where linking a rust program will fail due to rust not finding a linker, even though lld is included in the base system. This seems to mostly affect bare metal/cross compilation things, such as wasm builds and arm/riscv bare metal work (eg. when trying to compile [this](https://github.com/quantumscraps/scraps)). On Linux and other operating systems, full tools are enabled for builds of rust, so there are no linking issues. This pr should enable fully functional builds on FreeBSD, assuming rust builds correctly with these options.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9c81d92a96531d72782fb24f923e972facab6f4", "html_url": "https://github.com/rust-lang/rust/commit/c9c81d92a96531d72782fb24f923e972facab6f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9c81d92a96531d72782fb24f923e972facab6f4/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca8a1b05c62d05d82fb6d5480dc9e4b4fdad1ce4", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca8a1b05c62d05d82fb6d5480dc9e4b4fdad1ce4", "html_url": "https://github.com/rust-lang/rust/commit/ca8a1b05c62d05d82fb6d5480dc9e4b4fdad1ce4"}, {"sha": "7e00222aab90df9f09e23be01c2c7fb6a5044e6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e00222aab90df9f09e23be01c2c7fb6a5044e6a", "html_url": "https://github.com/rust-lang/rust/commit/7e00222aab90df9f09e23be01c2c7fb6a5044e6a"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "8413d775ac4c4b3f9ba287e3522328d931f2405c", "filename": "src/ci/docker/host-x86_64/dist-x86_64-freebsd/Dockerfile", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c9c81d92a96531d72782fb24f923e972facab6f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/c9c81d92a96531d72782fb24f923e972facab6f4/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile?ref=c9c81d92a96531d72782fb24f923e972facab6f4", "patch": "@@ -30,5 +30,10 @@ ENV \\\n \n ENV HOSTS=x86_64-unknown-freebsd\n \n-ENV RUST_CONFIGURE_ARGS --enable-extended --enable-profiler --enable-sanitizers --disable-docs\n+ENV RUST_CONFIGURE_ARGS \\\n+    --enable-full-tools \\\n+    --enable-extended \\\n+    --enable-profiler \\\n+    --enable-sanitizers \\\n+    --disable-docs\n ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}]}