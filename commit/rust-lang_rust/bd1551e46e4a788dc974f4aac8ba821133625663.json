{"sha": "bd1551e46e4a788dc974f4aac8ba821133625663", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkMTU1MWU0NmU0YTc4OGRjOTc0ZjRhYWM4YmE4MjExMzM2MjU2NjM=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-01-15T09:02:46Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-01-15T09:02:46Z"}, "message": "Fix tests", "tree": {"sha": "987d9e98f096bcc170af0718744cee062ca73a41", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/987d9e98f096bcc170af0718744cee062ca73a41"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd1551e46e4a788dc974f4aac8ba821133625663", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd1551e46e4a788dc974f4aac8ba821133625663", "html_url": "https://github.com/rust-lang/rust/commit/bd1551e46e4a788dc974f4aac8ba821133625663", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd1551e46e4a788dc974f4aac8ba821133625663/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b39e9e2d07a79998f7e6a87f1c0855f5a939b92e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b39e9e2d07a79998f7e6a87f1c0855f5a939b92e", "html_url": "https://github.com/rust-lang/rust/commit/b39e9e2d07a79998f7e6a87f1c0855f5a939b92e"}], "stats": {"total": 43, "additions": 11, "deletions": 32}, "files": [{"sha": "b08fbf6f845f88d2b30656db5b132104e9e0c3cd", "filename": "src/test/ui/lint/lint-forbid-internal-unsafe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.rs?ref=bd1551e46e4a788dc974f4aac8ba821133625663", "patch": "@@ -2,7 +2,7 @@\n #![feature(allow_internal_unsafe)]\n \n #[allow_internal_unsafe]\n-//~^ ERROR: cannot use `allow_internal_unsafe` with `forbid(unsafe_code)`\n+//~^ ERROR: `allow_internal_unsafe` allows defining\n macro_rules! evil {\n     ($e:expr) => {\n         unsafe {"}, {"sha": "59dab119682c1a85f429094ea6a13a3c38de31c6", "filename": "src/test/ui/lint/lint-forbid-internal-unsafe.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-forbid-internal-unsafe.stderr?ref=bd1551e46e4a788dc974f4aac8ba821133625663", "patch": "@@ -1,4 +1,4 @@\n-error: cannot use `allow_internal_unsafe` with `forbid(unsafe_code)`\n+error: `allow_internal_unsafe` allows defining macros using unsafe without triggering the `unsafe_code` lint at their call site\n   --> $DIR/lint-forbid-internal-unsafe.rs:4:1\n    |\n LL | #[allow_internal_unsafe]"}, {"sha": "735f33f601f9dcb64ad2ec6806ca0d0580e6c1cb", "filename": "src/test/ui/lint/lint-unsafe-code.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.rs?ref=bd1551e46e4a788dc974f4aac8ba821133625663", "patch": "@@ -27,9 +27,7 @@ unsafe impl Foo for Bar {} //~ ERROR: implementation of an `unsafe` trait\n trait Baz {\n     unsafe fn baz(&self); //~ ERROR: declaration of an `unsafe` method\n     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n-    //~^ ERROR: declaration of an `unsafe` method\n     unsafe fn provided_override(&self) {} //~ ERROR: implementation of an `unsafe` method\n-    //~^ ERROR: declaration of an `unsafe` method\n }\n \n impl Baz for Bar {\n@@ -65,7 +63,6 @@ trait C {\n     #[allow(unsafe_code)]\n     unsafe fn baz(&self);\n     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n-    //~^ ERROR: declaration of an `unsafe` method\n }\n \n impl C for Bar {"}, {"sha": "e2dd45e2c8a31a3e1c5e828c03c22aa9930a3729", "filename": "src/test/ui/lint/lint-unsafe-code.stderr", "status": "modified", "additions": 9, "deletions": 27, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bd1551e46e4a788dc974f4aac8ba821133625663/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unsafe-code.stderr?ref=bd1551e46e4a788dc974f4aac8ba821133625663", "patch": "@@ -28,74 +28,56 @@ error: declaration of an `unsafe` method\n LL |     unsafe fn baz(&self); //~ ERROR: declaration of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^\n \n-error: declaration of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:29:5\n-   |\n-LL |     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n error: implementation of an `unsafe` method\n   --> $DIR/lint-unsafe-code.rs:29:5\n    |\n LL |     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: declaration of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:31:5\n-   |\n-LL |     unsafe fn provided_override(&self) {} //~ ERROR: implementation of an `unsafe` method\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:31:5\n+  --> $DIR/lint-unsafe-code.rs:30:5\n    |\n LL |     unsafe fn provided_override(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:36:5\n+  --> $DIR/lint-unsafe-code.rs:34:5\n    |\n LL |     unsafe fn baz(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:37:5\n+  --> $DIR/lint-unsafe-code.rs:35:5\n    |\n LL |     unsafe fn provided_override(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:56:5\n+  --> $DIR/lint-unsafe-code.rs:54:5\n    |\n LL |     unsafe fn provided_override(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: declaration of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:67:5\n-   |\n-LL |     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:67:5\n+  --> $DIR/lint-unsafe-code.rs:65:5\n    |\n LL |     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:74:5\n+  --> $DIR/lint-unsafe-code.rs:71:5\n    |\n LL |     unsafe fn provided(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: implementation of an `unsafe` method\n-  --> $DIR/lint-unsafe-code.rs:78:5\n+  --> $DIR/lint-unsafe-code.rs:75:5\n    |\n LL |     unsafe fn baz(&self) {} //~ ERROR: implementation of an `unsafe` method\n    |     ^^^^^^^^^^^^^^^^^^^^^^^\n \n error: usage of an `unsafe` block\n-  --> $DIR/lint-unsafe-code.rs:89:5\n+  --> $DIR/lint-unsafe-code.rs:86:5\n    |\n LL |     unsafe {} //~ ERROR: usage of an `unsafe` block\n    |     ^^^^^^^^^\n@@ -109,5 +91,5 @@ LL |         unsafe {} //~ ERROR: usage of an `unsafe` block\n LL |     unsafe_in_macro!()\n    |     ------------------ in this macro invocation\n \n-error: aborting due to 17 previous errors\n+error: aborting due to 14 previous errors\n "}]}