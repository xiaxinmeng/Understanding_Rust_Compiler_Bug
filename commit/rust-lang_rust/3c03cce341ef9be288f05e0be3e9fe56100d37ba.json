{"sha": "3c03cce341ef9be288f05e0be3e9fe56100d37ba", "node_id": "C_kwDOAAsO6NoAKDNjMDNjY2UzNDFlZjliZTI4OGYwNWUwYmUzZTlmZTU2MTAwZDM3YmE", "commit": {"author": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2023-05-09T15:20:13Z"}, "committer": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2023-05-09T15:20:13Z"}, "message": "bump windows crate 0.46 -> 0.48 in workspace", "tree": {"sha": "48ebf590c9ed95cbfd3b1c2b37e234acb6d4e573", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/48ebf590c9ed95cbfd3b1c2b37e234acb6d4e573"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3c03cce341ef9be288f05e0be3e9fe56100d37ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3c03cce341ef9be288f05e0be3e9fe56100d37ba", "html_url": "https://github.com/rust-lang/rust/commit/3c03cce341ef9be288f05e0be3e9fe56100d37ba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3c03cce341ef9be288f05e0be3e9fe56100d37ba/comments", "author": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e7483d26e3cec7a44ef00cf7ae6c9c8c918bec6", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e7483d26e3cec7a44ef00cf7ae6c9c8c918bec6", "html_url": "https://github.com/rust-lang/rust/commit/7e7483d26e3cec7a44ef00cf7ae6c9c8c918bec6"}], "stats": {"total": 49, "additions": 20, "deletions": 29}, "files": [{"sha": "9790810902e7afa03a7b6d1f8e2639aafe735e73", "filename": "Cargo.lock", "status": "modified", "additions": 7, "deletions": 16, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -741,7 +741,7 @@ dependencies = [\n  \"tracing-subscriber\",\n  \"unified-diff\",\n  \"walkdir\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -1647,7 +1647,7 @@ dependencies = [\n  \"iana-time-zone-haiku\",\n  \"js-sys\",\n  \"wasm-bindgen\",\n- \"windows 0.48.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -3259,7 +3259,7 @@ dependencies = [\n  \"tempfile\",\n  \"thorin-dwp\",\n  \"tracing\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -3315,7 +3315,7 @@ dependencies = [\n  \"tempfile\",\n  \"thin-vec\",\n  \"tracing\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -3376,7 +3376,7 @@ dependencies = [\n  \"rustc_ty_utils\",\n  \"serde_json\",\n  \"tracing\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -3426,7 +3426,7 @@ dependencies = [\n  \"termize\",\n  \"tracing\",\n  \"unicode-width\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -4096,7 +4096,7 @@ dependencies = [\n  \"smallvec\",\n  \"termize\",\n  \"tracing\",\n- \"windows 0.46.0\",\n+ \"windows\",\n ]\n \n [[package]]\n@@ -5498,15 +5498,6 @@ version = \"0.4.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"712e227841d057c1ee1cd2fb22fa7e5a5461ae8e48fa2ca79ec42cfc1931183f\"\n \n-[[package]]\n-name = \"windows\"\n-version = \"0.46.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"cdacb41e6a96a052c6cb63a144f24900236121c6f63f4f8219fef5977ecb0c25\"\n-dependencies = [\n- \"windows-targets 0.42.2\",\n-]\n-\n [[package]]\n name = \"windows\"\n version = \"0.48.0\""}, {"sha": "02be88df103a52405369c32f515dc0c6f9caf7de", "filename": "compiler/rustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -51,5 +51,5 @@ default-features = false\n features = [\"read_core\", \"elf\", \"macho\", \"pe\", \"unaligned\", \"archive\", \"write\"]\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\"Win32_Globalization\"]"}, {"sha": "c815bb2d1974920dcb4c124c087f57405da07254", "filename": "compiler/rustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -37,7 +37,7 @@ itertools = \"0.10.1\"\n version = \"0.11\"\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\n     \"Win32_Foundation\",\n     \"Win32_Storage_FileSystem\","}, {"sha": "3c76c2b79911a05dc209a4564179eff0bb4454b4", "filename": "compiler/rustc_data_structures/src/profiling.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Fprofiling.rs?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -865,14 +865,16 @@ cfg_if! {\n             use std::mem;\n \n             use windows::{\n-                Win32::System::ProcessStatus::{K32GetProcessMemoryInfo, PROCESS_MEMORY_COUNTERS},\n+                // FIXME: change back to K32GetProcessMemoryInfo when windows crate\n+                // updated to 0.49.0+ to drop dependency on psapi.dll\n+                Win32::System::ProcessStatus::{GetProcessMemoryInfo, PROCESS_MEMORY_COUNTERS},\n                 Win32::System::Threading::GetCurrentProcess,\n             };\n \n             let mut pmc = PROCESS_MEMORY_COUNTERS::default();\n             let pmc_size = mem::size_of_val(&pmc);\n             unsafe {\n-                K32GetProcessMemoryInfo(\n+                GetProcessMemoryInfo(\n                     GetCurrentProcess(),\n                     &mut pmc,\n                     pmc_size as u32,"}, {"sha": "67352c55c9019713723d89508145c7ea8b48469c", "filename": "compiler/rustc_driver_impl/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_driver_impl%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_driver_impl%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver_impl%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -57,7 +57,7 @@ rustc_mir_transform = { path = \"../rustc_mir_transform\" }\n libc = \"0.2\"\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\n     \"Win32_System_Diagnostics_Debug\",\n ]"}, {"sha": "bd3033fcb3e868412c5016a5eef7ede3d134772d", "filename": "compiler/rustc_errors/Cargo.toml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_errors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_errors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -27,12 +27,11 @@ serde = { version = \"1.0.125\", features = [ \"derive\" ] }\n serde_json = \"1.0.59\"\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\n     \"Win32_Foundation\",\n     \"Win32_Security\",\n     \"Win32_System_Threading\",\n-    \"Win32_System_WindowsProgramming\",\n ]\n \n [features]"}, {"sha": "bd5cf49b56bd7dc0d9f7dba5bbc3dfd1bad2ab69", "filename": "compiler/rustc_errors/src/lock.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_errors%2Fsrc%2Flock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_errors%2Fsrc%2Flock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Flock.rs?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -19,8 +19,7 @@ pub fn acquire_global_lock(name: &str) -> Box<dyn Any> {\n     use windows::{\n         core::PCSTR,\n         Win32::Foundation::{CloseHandle, HANDLE, WAIT_ABANDONED, WAIT_OBJECT_0},\n-        Win32::System::Threading::{CreateMutexA, ReleaseMutex, WaitForSingleObject},\n-        Win32::System::WindowsProgramming::INFINITE,\n+        Win32::System::Threading::{CreateMutexA, ReleaseMutex, WaitForSingleObject, INFINITE},\n     };\n \n     struct Handle(HANDLE);"}, {"sha": "3af83aaaaa8a22a9947f66d334b9e492fa07c1ed", "filename": "compiler/rustc_session/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_session%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_session%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -25,7 +25,7 @@ termize = \"0.1.1\"\n libc = \"0.2\"\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\n     \"Win32_Foundation\",\n     \"Win32_System_LibraryLoader\","}, {"sha": "3988416d0c795c24a3bc0ca0445cd68fc9c61459", "filename": "compiler/rustc_session/src/filesearch.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_session%2Fsrc%2Ffilesearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/compiler%2Frustc_session%2Fsrc%2Ffilesearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Ffilesearch.rs?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -135,13 +135,13 @@ fn current_dll_path() -> Result<PathBuf, String> {\n \n     use windows::{\n         core::PCWSTR,\n-        Win32::Foundation::HINSTANCE,\n+        Win32::Foundation::HMODULE,\n         Win32::System::LibraryLoader::{\n             GetModuleFileNameW, GetModuleHandleExW, GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS,\n         },\n     };\n \n-    let mut module = HINSTANCE::default();\n+    let mut module = HMODULE::default();\n     unsafe {\n         GetModuleHandleExW(\n             GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS,"}, {"sha": "0d42504c7f4ca1ccbe79d46ac8916c4deeaf24e7", "filename": "src/tools/compiletest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c03cce341ef9be288f05e0be3e9fe56100d37ba/src%2Ftools%2Fcompiletest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3c03cce341ef9be288f05e0be3e9fe56100d37ba/src%2Ftools%2Fcompiletest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2FCargo.toml?ref=3c03cce341ef9be288f05e0be3e9fe56100d37ba", "patch": "@@ -28,7 +28,7 @@ libc = \"0.2\"\n miow = \"0.5\"\n \n [target.'cfg(windows)'.dependencies.windows]\n-version = \"0.46.0\"\n+version = \"0.48.0\"\n features = [\n     \"Win32_Foundation\",\n     \"Win32_System_Diagnostics_Debug\","}]}