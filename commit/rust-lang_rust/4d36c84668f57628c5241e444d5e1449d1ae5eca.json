{"sha": "4d36c84668f57628c5241e444d5e1449d1ae5eca", "node_id": "C_kwDOAAsO6NoAKDRkMzZjODQ2NjhmNTc2MjhjNTI0MWU0NDRkNWUxNDQ5ZDFhZTVlY2E", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-06-10T09:20:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-06-10T09:20:10Z"}, "message": "Rollup merge of #112467 - sigaloid:master, r=albertlarsan68\n\nCompile rustc_driver by default\n\nFixes #112440. It now properly compiles `rustc_driver` and opens the doc page.", "tree": {"sha": "f7731a9bf95dc0842c6023af55055d431505ec25", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7731a9bf95dc0842c6023af55055d431505ec25"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d36c84668f57628c5241e444d5e1449d1ae5eca", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkhEBKCRBK7hj4Ov3rIwAAnJgIAFMuWQmLuID/8WP19hryvobk\n9szPQnm9lVPMuZtFhbW7WspJqY5ggiHRk0SmSB9hx5lui/aU7INoLBgxQNMZeK6n\nhqC4I6SmgjqaBZaAa/n/lZ5Zeo6wQa9CD6iwit4q7XRPF16ZN9Szn//5IhVvc8JM\nnnd11jCdShg4NmZ0D5hH0VJhH/VplwXLgp7pX6duJ6bh0IcK3N/uyIFC1hQR0tMA\n49GKPxl7nSElIror073GuvTkl/27kvJW0ZB5NN+xLghpixjVLRMco7vShVwLSL9j\nVF93CcPF6mWLMM6+FFbT+bDApUfOXSIcnp4cyIL9KcOHy6WE/wGnUaRDNWwEJMk=\n=Wy78\n-----END PGP SIGNATURE-----\n", "payload": "tree f7731a9bf95dc0842c6023af55055d431505ec25\nparent 3189ce630d1746e966791ae8e9ef05c7919cd5c4\nparent 7f79ceb438321810a8199fb099067cd648c638da\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1686388810 +0200\ncommitter GitHub <noreply@github.com> 1686388810 +0200\n\nRollup merge of #112467 - sigaloid:master, r=albertlarsan68\n\nCompile rustc_driver by default\n\nFixes #112440. It now properly compiles `rustc_driver` and opens the doc page.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d36c84668f57628c5241e444d5e1449d1ae5eca", "html_url": "https://github.com/rust-lang/rust/commit/4d36c84668f57628c5241e444d5e1449d1ae5eca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d36c84668f57628c5241e444d5e1449d1ae5eca/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3189ce630d1746e966791ae8e9ef05c7919cd5c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/3189ce630d1746e966791ae8e9ef05c7919cd5c4", "html_url": "https://github.com/rust-lang/rust/commit/3189ce630d1746e966791ae8e9ef05c7919cd5c4"}, {"sha": "7f79ceb438321810a8199fb099067cd648c638da", "url": "https://api.github.com/repos/rust-lang/rust/commits/7f79ceb438321810a8199fb099067cd648c638da", "html_url": "https://github.com/rust-lang/rust/commit/7f79ceb438321810a8199fb099067cd648c638da"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "fef7e4db9ab85f7820db6b42733d28a6fe01efeb", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4d36c84668f57628c5241e444d5e1449d1ae5eca/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d36c84668f57628c5241e444d5e1449d1ae5eca/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=4d36c84668f57628c5241e444d5e1449d1ae5eca", "patch": "@@ -667,7 +667,7 @@ impl Step for Rustc {\n     /// Compiler documentation is distributed separately, so we make sure\n     /// we do not merge it with the other documentation from std, test and\n     /// proc_macros. This is largely just a wrapper around `cargo doc`.\n-    fn run(self, builder: &Builder<'_>) {\n+    fn run(mut self, builder: &Builder<'_>) {\n         let stage = self.stage;\n         let target = self.target;\n \n@@ -725,6 +725,11 @@ impl Step for Rustc {\n         cargo.rustdocflag(\"ena=https://docs.rs/ena/latest/\");\n \n         let mut to_open = None;\n+\n+        if self.crates.is_empty() {\n+            self.crates = INTERNER.intern_list(vec![\"rustc_driver\".to_owned()]);\n+        };\n+\n         for krate in &*self.crates {\n             // Create all crate output directories first to make sure rustdoc uses\n             // relative links."}]}