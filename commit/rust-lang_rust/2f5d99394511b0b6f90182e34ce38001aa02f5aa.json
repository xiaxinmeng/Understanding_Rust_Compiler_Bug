{"sha": "2f5d99394511b0b6f90182e34ce38001aa02f5aa", "node_id": "C_kwDOAAsO6NoAKDJmNWQ5OTM5NDUxMWIwYjZmOTAxODJlMzRjZTM4MDAxYWEwMmY1YWE", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2023-05-15T08:14:57Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2023-05-15T10:47:37Z"}, "message": "Shorten lifetime of even more panic temporaries", "tree": {"sha": "b3666dbfc5f2ae5b5d877a8d33f86ed48bb228cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3666dbfc5f2ae5b5d877a8d33f86ed48bb228cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f5d99394511b0b6f90182e34ce38001aa02f5aa", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmRiDckACgkQ+boUO5X/\nbYKDQg//d9yCKhJw151vTXfmbwa/Z/0RMO0hxKlmyfXV6Wo2lKHIyyGIP74wg5jF\nHUw9gNSqrdlkAa6ffgEE/r0GUbBr/RAQjKvUV0Q33XY0bsvFbrkgeCeOSSb2X7xO\nTT3XOQYMfsFQgRs+4uUwQtROtpTwA+tqQrxzDKRpsXMB2YMkNc5x4P0IUAP3+AhO\nB7bdCo1mdAIeaXHo9qcViHpE25cyJjUOHECEy8ufdJMWvzXzTyVID6ufqxrQLoNl\nXFC2x2cCjzsFsKPTOPIu6xrJVUjc3PkDfpGpwJt/xd2nv5hk9lxyLYVWzDLbhSX5\nFt0W4Vm/e36+37fYPke3+WdVSvEoZT0gAEDbeg2JgDlvhsH/MbJBw65ySqqkKxwG\nTYY4QXGvdReKzo+QGpwkK6HgN+cJmPgfpEDlWt4S3z55BeOf5dYt0CYqH2DpZh3y\nR23QSRHYc760PSm8R8wRFFgrpaaM5mjukozX+oAnYM7bTHmzJVe3y47iEqYIH/D1\nAclYyhC/n+OSsLMxWh3hlwug0dmsBZh+ffuhYToC3qpJG5ng6bL3lI3H1RFqcOYq\nxC5Va7nkfV2ge0VABFY/WdBx8VmrgKnoGaClx9+GCvNYqycQegjy9gOXNvFotskv\nYMRESqYsGDbTuftd0Z8K/mrXKdYcBBVjFWDHfvGu3SO7hyad5L0=\n=bazP\n-----END PGP SIGNATURE-----", "payload": "tree b3666dbfc5f2ae5b5d877a8d33f86ed48bb228cb\nparent 0ebb5cbab62e42b2e71ff8bfe6e30a8a51b59d4b\nauthor David Tolnay <dtolnay@gmail.com> 1684138497 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1684147657 -0700\n\nShorten lifetime of even more panic temporaries\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f5d99394511b0b6f90182e34ce38001aa02f5aa", "html_url": "https://github.com/rust-lang/rust/commit/2f5d99394511b0b6f90182e34ce38001aa02f5aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f5d99394511b0b6f90182e34ce38001aa02f5aa/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0ebb5cbab62e42b2e71ff8bfe6e30a8a51b59d4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0ebb5cbab62e42b2e71ff8bfe6e30a8a51b59d4b", "html_url": "https://github.com/rust-lang/rust/commit/0ebb5cbab62e42b2e71ff8bfe6e30a8a51b59d4b"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "20be60d35353e747ad1f2f3ee1475980e9cfcb73", "filename": "library/core/src/panic.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/2f5d99394511b0b6f90182e34ce38001aa02f5aa/library%2Fcore%2Fsrc%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f5d99394511b0b6f90182e34ce38001aa02f5aa/library%2Fcore%2Fsrc%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fpanic.rs?ref=2f5d99394511b0b6f90182e34ce38001aa02f5aa", "patch": "@@ -28,13 +28,13 @@ pub macro panic_2015 {\n         $crate::panicking::panic($msg)\n     ),\n     // Use `panic_str` instead of `panic_display::<&str>` for non_fmt_panic lint.\n-    ($msg:expr $(,)?) => (\n-        $crate::panicking::panic_str($msg)\n-    ),\n+    ($msg:expr $(,)?) => ({\n+        $crate::panicking::panic_str($msg);\n+    }),\n     // Special-case the single-argument case for const_panic.\n-    (\"{}\", $arg:expr $(,)?) => (\n-        $crate::panicking::panic_display(&$arg)\n-    ),\n+    (\"{}\", $arg:expr $(,)?) => ({\n+        $crate::panicking::panic_display(&$arg);\n+    }),\n     ($fmt:expr, $($arg:tt)+) => ({\n         // Semicolon to prevent temporaries inside the formatting machinery from\n         // being considered alive in the caller after the panic_fmt call.\n@@ -52,9 +52,9 @@ pub macro panic_2021 {\n         $crate::panicking::panic(\"explicit panic\")\n     ),\n     // Special-case the single-argument case for const_panic.\n-    (\"{}\", $arg:expr $(,)?) => (\n-        $crate::panicking::panic_display(&$arg)\n-    ),\n+    (\"{}\", $arg:expr $(,)?) => ({\n+        $crate::panicking::panic_display(&$arg);\n+    }),\n     ($($t:tt)+) => ({\n         // Semicolon to prevent temporaries inside the formatting machinery from\n         // being considered alive in the caller after the panic_fmt call.\n@@ -73,9 +73,9 @@ pub macro unreachable_2015 {\n     ),\n     // Use of `unreachable_display` for non_fmt_panic lint.\n     // NOTE: the message (\"internal error ...\") is embedded directly in unreachable_display\n-    ($msg:expr $(,)?) => (\n-        $crate::panicking::unreachable_display(&$msg)\n-    ),\n+    ($msg:expr $(,)?) => ({\n+        $crate::panicking::unreachable_display(&$msg);\n+    }),\n     ($fmt:expr, $($arg:tt)*) => (\n         $crate::panic!($crate::concat!(\"internal error: entered unreachable code: \", $fmt), $($arg)*)\n     ),"}, {"sha": "69a6f3e6d5ac43a83cb9369bb1b5d38bf0aa92d3", "filename": "library/std/src/panic.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2f5d99394511b0b6f90182e34ce38001aa02f5aa/library%2Fstd%2Fsrc%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f5d99394511b0b6f90182e34ce38001aa02f5aa/library%2Fstd%2Fsrc%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpanic.rs?ref=2f5d99394511b0b6f90182e34ce38001aa02f5aa", "patch": "@@ -19,11 +19,11 @@ pub macro panic_2015 {\n         $crate::rt::begin_panic(\"explicit panic\")\n     }),\n     ($msg:expr $(,)?) => ({\n-        $crate::rt::begin_panic($msg)\n+        $crate::rt::begin_panic($msg);\n     }),\n     // Special-case the single-argument case for const_panic.\n     (\"{}\", $arg:expr $(,)?) => ({\n-        $crate::rt::panic_display(&$arg)\n+        $crate::rt::panic_display(&$arg);\n     }),\n     ($fmt:expr, $($arg:tt)+) => ({\n         // Semicolon to prevent temporaries inside the formatting machinery from"}]}