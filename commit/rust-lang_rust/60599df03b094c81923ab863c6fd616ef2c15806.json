{"sha": "60599df03b094c81923ab863c6fd616ef2c15806", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwNTk5ZGYwM2IwOTRjODE5MjNhYjg2M2M2ZmQ2MTZlZjJjMTU4MDY=", "commit": {"author": {"name": "Jan-Erik Rediger", "email": "janerik@fnordig.de", "date": "2016-08-08T23:41:51Z"}, "committer": {"name": "Jan-Erik Rediger", "email": "janerik@fnordig.de", "date": "2016-08-10T14:39:32Z"}, "message": "[emscripten] Disable code paths that don't work on emscripten", "tree": {"sha": "f1ea4f5429bc23080aecc27cdd86f1abe3a81730", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1ea4f5429bc23080aecc27cdd86f1abe3a81730"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/60599df03b094c81923ab863c6fd616ef2c15806", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/60599df03b094c81923ab863c6fd616ef2c15806", "html_url": "https://github.com/rust-lang/rust/commit/60599df03b094c81923ab863c6fd616ef2c15806", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/60599df03b094c81923ab863c6fd616ef2c15806/comments", "author": {"login": "badboy", "id": 2129, "node_id": "MDQ6VXNlcjIxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/2129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badboy", "html_url": "https://github.com/badboy", "followers_url": "https://api.github.com/users/badboy/followers", "following_url": "https://api.github.com/users/badboy/following{/other_user}", "gists_url": "https://api.github.com/users/badboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/badboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badboy/subscriptions", "organizations_url": "https://api.github.com/users/badboy/orgs", "repos_url": "https://api.github.com/users/badboy/repos", "events_url": "https://api.github.com/users/badboy/events{/privacy}", "received_events_url": "https://api.github.com/users/badboy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "badboy", "id": 2129, "node_id": "MDQ6VXNlcjIxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/2129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/badboy", "html_url": "https://github.com/badboy", "followers_url": "https://api.github.com/users/badboy/followers", "following_url": "https://api.github.com/users/badboy/following{/other_user}", "gists_url": "https://api.github.com/users/badboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/badboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/badboy/subscriptions", "organizations_url": "https://api.github.com/users/badboy/orgs", "repos_url": "https://api.github.com/users/badboy/repos", "events_url": "https://api.github.com/users/badboy/events{/privacy}", "received_events_url": "https://api.github.com/users/badboy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ad91873cb6ca0824e395cc8e9bb452fed986fde3", "url": "https://api.github.com/repos/rust-lang/rust/commits/ad91873cb6ca0824e395cc8e9bb452fed986fde3", "html_url": "https://github.com/rust-lang/rust/commit/ad91873cb6ca0824e395cc8e9bb452fed986fde3"}], "stats": {"total": 24, "additions": 13, "deletions": 11}, "files": [{"sha": "23687e10e476d40de9750064d09ded52a0624369", "filename": "src/libstd/sys/unix/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fmod.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -83,11 +83,11 @@ pub fn init() {\n         }\n     }\n \n-    #[cfg(not(target_os = \"nacl\"))]\n+    #[cfg(not(any(target_os = \"nacl\", target_os = \"emscripten\")))]\n     unsafe fn reset_sigpipe() {\n         assert!(signal(libc::SIGPIPE, libc::SIG_IGN) != !0);\n     }\n-    #[cfg(target_os = \"nacl\")]\n+    #[cfg(any(target_os = \"nacl\", target_os = \"emscripten\"))]\n     unsafe fn reset_sigpipe() {}\n }\n "}, {"sha": "c29e87f91c9a7e247471f2c4749e3264e663d572", "filename": "src/libstd/sys/unix/os.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fos.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -551,11 +551,13 @@ pub fn home_dir() -> Option<PathBuf> {\n \n     #[cfg(any(target_os = \"android\",\n               target_os = \"ios\",\n-              target_os = \"nacl\"))]\n+              target_os = \"nacl\",\n+              target_os = \"emscripten\"))]\n     unsafe fn fallback() -> Option<OsString> { None }\n     #[cfg(not(any(target_os = \"android\",\n                   target_os = \"ios\",\n-                  target_os = \"nacl\")))]\n+                  target_os = \"nacl\",\n+                  target_os = \"emscripten\")))]\n     unsafe fn fallback() -> Option<OsString> {\n         #[cfg(not(target_os = \"solaris\"))]\n         unsafe fn getpwduid_r(me: libc::uid_t, passwd: &mut libc::passwd,"}, {"sha": "75e10d2585308cecb85d17e374fff32c0842509f", "filename": "src/libstd/sys/unix/thread.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibstd%2Fsys%2Funix%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fthread.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -81,8 +81,7 @@ impl Thread {\n     }\n \n     #[cfg(any(target_os = \"linux\",\n-              target_os = \"android\",\n-              target_os = \"emscripten\"))]\n+              target_os = \"android\"))]\n     pub fn set_name(name: &CStr) {\n         const PR_SET_NAME: libc::c_int = 15;\n         // pthread wrapper only appeared in glibc 2.12, so we use syscall\n@@ -118,9 +117,9 @@ impl Thread {\n                                      name.as_ptr() as *mut libc::c_void);\n         }\n     }\n-    #[cfg(any(target_env = \"newlib\", target_os = \"solaris\"))]\n+    #[cfg(any(target_env = \"newlib\", target_os = \"solaris\", target_os = \"emscripten\"))]\n     pub fn set_name(_name: &CStr) {\n-        // Newlib and Illumos has no way to set a thread name.\n+        // Newlib, Illumos and Emscripten have no way to set a thread name.\n     }\n \n     pub fn sleep(dur: Duration) {"}, {"sha": "680ad3ecd64a6c156cb65fce6d67a90e08be4d8e", "filename": "src/libunwind/libunwind.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibunwind%2Flibunwind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Flibunwind%2Flibunwind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Flibunwind.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -60,7 +60,6 @@ pub const unwinder_private_data_size: usize = 2;\n pub const unwinder_private_data_size: usize = 2;\n \n #[cfg(target_arch = \"asmjs\")]\n-// FIXME: Copied from arm. Need to confirm.\n pub const unwinder_private_data_size: usize = 20;\n \n #[repr(C)]"}, {"sha": "cfae9903a95e5ecd5204d7254228ee7f245319a7", "filename": "src/test/run-pass/intrinsic-alignment.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Ftest%2Frun-pass%2Fintrinsic-alignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Ftest%2Frun-pass%2Fintrinsic-alignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fintrinsic-alignment.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -24,7 +24,8 @@ mod rusti {\n           target_os = \"dragonfly\",\n           target_os = \"netbsd\",\n           target_os = \"openbsd\",\n-          target_os = \"solaris\"))]\n+          target_os = \"solaris\",\n+          target_os = \"emscripten\"))]\n mod m {\n     #[main]\n     #[cfg(target_arch = \"x86\")]"}, {"sha": "4863979b3f6c2bdd0731cc40add9a6cdd0f416d5", "filename": "src/test/run-pass/rec-align-u64.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/60599df03b094c81923ab863c6fd616ef2c15806/src%2Ftest%2Frun-pass%2Frec-align-u64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60599df03b094c81923ab863c6fd616ef2c15806/src%2Ftest%2Frun-pass%2Frec-align-u64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frec-align-u64.rs?ref=60599df03b094c81923ab863c6fd616ef2c15806", "patch": "@@ -42,7 +42,8 @@ struct Outer {\n           target_os = \"dragonfly\",\n           target_os = \"netbsd\",\n           target_os = \"openbsd\",\n-          target_os = \"solaris\"))]\n+          target_os = \"solaris\",\n+          target_os = \"emscripten\"))]\n mod m {\n     #[cfg(target_arch = \"x86\")]\n     pub mod m {"}]}