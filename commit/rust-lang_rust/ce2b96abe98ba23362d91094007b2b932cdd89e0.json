{"sha": "ce2b96abe98ba23362d91094007b2b932cdd89e0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlMmI5NmFiZTk4YmEyMzM2MmQ5MTA5NDAwN2IyYjkzMmNkZDg5ZTA=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-06-08T22:22:59Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-06-09T21:33:38Z"}, "message": "Fix yet another FP in `USELESS_LET_IF_SEQ`\n\nThe block expression before the assignment must be `None`.", "tree": {"sha": "7cc18b750450331fef584123dbc79d7f6534ec43", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7cc18b750450331fef584123dbc79d7f6534ec43"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce2b96abe98ba23362d91094007b2b932cdd89e0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJXWeC0AAoJEF5CfHlMukXo5S0P/A7B592MqkLXCI4wWvZoWop0\n0U3w9JuIi3rbgZj1QJh2LjHY3mKJJBoMUxp0U9j6NybifN/9NNs22u4nU9UYHPyc\nwWvgVNycEnwFClfdV22cgDMzuZbGbrVKDDkAtuJG8oxIckpS2Eepl0iKjLIcHk7e\n4VHXfIy+tB0MtV2YxidIoxvH7OLyxPpqrfGXEvKl3F/7DOLNEJOgeBcuwsB/A/Si\nKisD/HhZ0LDLG15SD1IvAy1D+bPLK7Tt9nycjT4Et1eeUt+vxFSJiGscMoQK53s2\nQeC3oJGaghgaK0zwNkms3IVBhzn00XgfsseRR6B1UsAs7vdPsRWlwo6Pzw7M9lc2\ncRQRhtUmzOvB6+qL0l9ZmDdJQaVRnGgvkjVHAHm2jmkAg4biWsmCCI59rNOwkPqD\nFvqsCdxWPxID+umBSXv/Dj4P4OxFnlWynEWlfGBkurWOYV9xpjHsGwjBGEzrzZvN\ncogrYb45y0aVQRv+ejjLXdP0q+9I3YImW2Qu2y6KKOvOjzciQ4x5UOBQs63voJ3K\nE1FsxgVvezhqUWadH3r++QfdJoQ0TTi/VnTCgtvv/TpZyOFiPfcRPL4J8CnzAuh0\nVxuH9DvlDzK8XHqQgIAIG88mandnVzUVrf/t1XkY9G6LgoFiX+5Jija4QvgpVlYB\ngbK1Kv/HPvbcL+BiM++u\n=UdK0\n-----END PGP SIGNATURE-----", "payload": "tree 7cc18b750450331fef584123dbc79d7f6534ec43\nparent c5affa2efc697f478828c81def852f70968bb329\nauthor mcarton <cartonmartin+git@gmail.com> 1465424579 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1465508018 +0200\n\nFix yet another FP in `USELESS_LET_IF_SEQ`\n\nThe block expression before the assignment must be `None`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce2b96abe98ba23362d91094007b2b932cdd89e0", "html_url": "https://github.com/rust-lang/rust/commit/ce2b96abe98ba23362d91094007b2b932cdd89e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce2b96abe98ba23362d91094007b2b932cdd89e0/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5affa2efc697f478828c81def852f70968bb329", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5affa2efc697f478828c81def852f70968bb329", "html_url": "https://github.com/rust-lang/rust/commit/c5affa2efc697f478828c81def852f70968bb329"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "2f98d10dee0bb68c07c02e6f8852b563c23a7201", "filename": "clippy_lints/src/let_if_seq.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ce2b96abe98ba23362d91094007b2b932cdd89e0/clippy_lints%2Fsrc%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce2b96abe98ba23362d91094007b2b932cdd89e0/clippy_lints%2Fsrc%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_if_seq.rs?ref=ce2b96abe98ba23362d91094007b2b932cdd89e0", "patch": "@@ -150,6 +150,7 @@ impl<'a, 'tcx, 'v> hir::intravisit::Visitor<'v> for UsedVisitor<'a, 'tcx> {\n \n fn check_assign<'e>(cx: &LateContext, decl: hir::def_id::DefId, block: &'e hir::Block) -> Option<&'e hir::Expr> {\n     if_let_chain! {[\n+        block.expr.is_none(),\n         let Some(expr) = block.stmts.iter().last(),\n         let hir::StmtSemi(ref expr, _) = expr.node,\n         let hir::ExprAssign(ref var, ref value) = expr.node,"}, {"sha": "b49e5a2612239bb08cb7eb609c7af2b8d54e186b", "filename": "tests/compile-fail/let_if_seq.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ce2b96abe98ba23362d91094007b2b932cdd89e0/tests%2Fcompile-fail%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce2b96abe98ba23362d91094007b2b932cdd89e0/tests%2Fcompile-fail%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Flet_if_seq.rs?ref=ce2b96abe98ba23362d91094007b2b932cdd89e0", "patch": "@@ -98,6 +98,15 @@ fn main() {\n         toto = 2;\n     }\n \n+    // found in libcore, the inner if is not a statement but the block's expr\n+    let mut ch = b'x';\n+    if f() {\n+        ch = b'*';\n+        if f() {\n+            ch = b'?';\n+        }\n+    }\n+\n     // baz needs to be mut\n     let mut baz = 0;\n     //~^ ERROR `if _ { .. } else { .. }` is an expression"}]}