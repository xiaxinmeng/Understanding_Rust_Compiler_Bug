{"sha": "c46f5784a68dbddf360b5e0d504ca77b359e1742", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0NmY1Nzg0YTY4ZGJkZGYzNjBiNWUwZDUwNGNhNzdiMzU5ZTE3NDI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-09-30T18:56:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-30T18:56:15Z"}, "message": "Rollup merge of #77328 - hyd-dev:assert-to-rtassert, r=Amanieu\n\nUse `rtassert!` instead of `assert!` from the child process after fork() in std::sys::unix::process::Command::spawn()\n\nAs discussed in #73894, `assert!` panics on failure, which is not signal-safe, and `rtassert!` is a suitable replacement.\n\nFixes #73894.\n\nr? @Amanieu @cuviper @joshtriplett", "tree": {"sha": "a7cff56d10123b5fb34bdadba1fbe0aa30d66899", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a7cff56d10123b5fb34bdadba1fbe0aa30d66899"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c46f5784a68dbddf360b5e0d504ca77b359e1742", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfdNTQCRBK7hj4Ov3rIwAAdHIIAEV1zPI8Nh139JJc7l+BU0Fp\nYzKP8iowI0ZymVnwhXGa4axX2L/DjK1izv3FVSu2s+MuwFIrM7pbpv4wsj3+9//0\nxZGfAJtESiNijeZvbNOCw5UmUH/b2RMN0y/2qn7FsaAk0JNVoPt9ujw4IFnuhprf\nlVXxeleEyXsxXU8CTA0jw3z8XKtqKoeMRK91YBY2sR2Omj5sCA6iufTAtpvwBoen\nQ4kTyhvjGR+l2H7ktWq7pdlyvjz3whj/w8sQbeZK8fcKXw2nENS0MI8cVXQfd/9H\nN3viUQHbf05O8zClIhE0u2a5m2+ARHszmRXmr4xo1Fg+6E4kRqemsb6pGA5mZKk=\n=sfOV\n-----END PGP SIGNATURE-----\n", "payload": "tree a7cff56d10123b5fb34bdadba1fbe0aa30d66899\nparent b85081d46ac2cbfa6862487024fa3323ef95a0e3\nparent a2526b416fb4ca7874fa41a3eb595f456703d486\nauthor Jonas Schievink <jonasschievink@gmail.com> 1601492175 +0200\ncommitter GitHub <noreply@github.com> 1601492175 +0200\n\nRollup merge of #77328 - hyd-dev:assert-to-rtassert, r=Amanieu\n\nUse `rtassert!` instead of `assert!` from the child process after fork() in std::sys::unix::process::Command::spawn()\n\nAs discussed in #73894, `assert!` panics on failure, which is not signal-safe, and `rtassert!` is a suitable replacement.\n\nFixes #73894.\n\nr? @Amanieu @cuviper @joshtriplett\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c46f5784a68dbddf360b5e0d504ca77b359e1742", "html_url": "https://github.com/rust-lang/rust/commit/c46f5784a68dbddf360b5e0d504ca77b359e1742", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c46f5784a68dbddf360b5e0d504ca77b359e1742/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b85081d46ac2cbfa6862487024fa3323ef95a0e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/b85081d46ac2cbfa6862487024fa3323ef95a0e3", "html_url": "https://github.com/rust-lang/rust/commit/b85081d46ac2cbfa6862487024fa3323ef95a0e3"}, {"sha": "a2526b416fb4ca7874fa41a3eb595f456703d486", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2526b416fb4ca7874fa41a3eb595f456703d486", "html_url": "https://github.com/rust-lang/rust/commit/a2526b416fb4ca7874fa41a3eb595f456703d486"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "c3625d306ab736a5ac4dcbe18881a43935bfa1a2", "filename": "library/std/src/sys/unix/process/process_unix.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c46f5784a68dbddf360b5e0d504ca77b359e1742/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c46f5784a68dbddf360b5e0d504ca77b359e1742/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs?ref=c46f5784a68dbddf360b5e0d504ca77b359e1742", "patch": "@@ -67,7 +67,7 @@ impl Command {\n                     // pipe I/O up to PIPE_BUF bytes should be atomic, and then\n                     // we want to be sure we *don't* run at_exit destructors as\n                     // we're being torn down regardless\n-                    assert!(output.write(&bytes).is_ok());\n+                    rtassert!(output.write(&bytes).is_ok());\n                     libc::_exit(1)\n                 }\n                 n => n,"}]}