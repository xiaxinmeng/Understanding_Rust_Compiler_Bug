{"sha": "8ad78cb02c62af59e750082c538968430d9c0cdd", "node_id": "C_kwDOAAsO6NoAKDhhZDc4Y2IwMmM2MmFmNTllNzUwMDgyYzUzODk2ODQzMGQ5YzBjZGQ", "commit": {"author": {"name": "WANG Rui", "email": "wangrui@loongson.cn", "date": "2023-05-08T03:05:46Z"}, "committer": {"name": "WANG Rui", "email": "wangrui@loongson.cn", "date": "2023-05-08T03:05:46Z"}, "message": "Mark LoongArch float-point condition flags as clobbered in inline assembly", "tree": {"sha": "b1c735c0471d0ca5c05bb2a0bd1eec1103f8ad1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b1c735c0471d0ca5c05bb2a0bd1eec1103f8ad1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ad78cb02c62af59e750082c538968430d9c0cdd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ad78cb02c62af59e750082c538968430d9c0cdd", "html_url": "https://github.com/rust-lang/rust/commit/8ad78cb02c62af59e750082c538968430d9c0cdd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ad78cb02c62af59e750082c538968430d9c0cdd/comments", "author": {"login": "heiher", "id": 1407733, "node_id": "MDQ6VXNlcjE0MDc3MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1407733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heiher", "html_url": "https://github.com/heiher", "followers_url": "https://api.github.com/users/heiher/followers", "following_url": "https://api.github.com/users/heiher/following{/other_user}", "gists_url": "https://api.github.com/users/heiher/gists{/gist_id}", "starred_url": "https://api.github.com/users/heiher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heiher/subscriptions", "organizations_url": "https://api.github.com/users/heiher/orgs", "repos_url": "https://api.github.com/users/heiher/repos", "events_url": "https://api.github.com/users/heiher/events{/privacy}", "received_events_url": "https://api.github.com/users/heiher/received_events", "type": "User", "site_admin": false}, "committer": {"login": "heiher", "id": 1407733, "node_id": "MDQ6VXNlcjE0MDc3MzM=", "avatar_url": "https://avatars.githubusercontent.com/u/1407733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/heiher", "html_url": "https://github.com/heiher", "followers_url": "https://api.github.com/users/heiher/followers", "following_url": "https://api.github.com/users/heiher/following{/other_user}", "gists_url": "https://api.github.com/users/heiher/gists{/gist_id}", "starred_url": "https://api.github.com/users/heiher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/heiher/subscriptions", "organizations_url": "https://api.github.com/users/heiher/orgs", "repos_url": "https://api.github.com/users/heiher/repos", "events_url": "https://api.github.com/users/heiher/events{/privacy}", "received_events_url": "https://api.github.com/users/heiher/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ad6b20bf5225c65aab30169c9a173719f5bdfc04", "url": "https://api.github.com/repos/rust-lang/rust/commits/ad6b20bf5225c65aab30169c9a173719f5bdfc04", "html_url": "https://github.com/rust-lang/rust/commit/ad6b20bf5225c65aab30169c9a173719f5bdfc04"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "645b5b41c6bf67ffce716a895e8ff89caf18587d", "filename": "compiler/rustc_codegen_llvm/src/asm.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8ad78cb02c62af59e750082c538968430d9c0cdd/compiler%2Frustc_codegen_llvm%2Fsrc%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ad78cb02c62af59e750082c538968430d9c0cdd/compiler%2Frustc_codegen_llvm%2Fsrc%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fasm.rs?ref=8ad78cb02c62af59e750082c538968430d9c0cdd", "patch": "@@ -236,7 +236,18 @@ impl<'ll, 'tcx> AsmBuilderMethods<'tcx> for Builder<'_, 'll, 'tcx> {\n                 InlineAsmArch::Nvptx64 => {}\n                 InlineAsmArch::PowerPC | InlineAsmArch::PowerPC64 => {}\n                 InlineAsmArch::Hexagon => {}\n-                InlineAsmArch::LoongArch64 => {}\n+                InlineAsmArch::LoongArch64 => {\n+                    constraints.extend_from_slice(&[\n+                        \"~{$fcc0}\".to_string(),\n+                        \"~{$fcc1}\".to_string(),\n+                        \"~{$fcc2}\".to_string(),\n+                        \"~{$fcc3}\".to_string(),\n+                        \"~{$fcc4}\".to_string(),\n+                        \"~{$fcc5}\".to_string(),\n+                        \"~{$fcc6}\".to_string(),\n+                        \"~{$fcc7}\".to_string(),\n+                    ]);\n+                }\n                 InlineAsmArch::Mips | InlineAsmArch::Mips64 => {}\n                 InlineAsmArch::S390x => {}\n                 InlineAsmArch::SpirV => {}"}]}