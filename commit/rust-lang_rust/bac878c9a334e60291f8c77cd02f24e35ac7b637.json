{"sha": "bac878c9a334e60291f8c77cd02f24e35ac7b637", "node_id": "C_kwDOAAsO6NoAKGJhYzg3OGM5YTMzNGU2MDI5MWY4Yzc3Y2QwMmYyNGUzNWFjN2I2Mzc", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2022-05-15T13:13:48Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2022-05-15T13:25:12Z"}, "message": "Add instrinsics from aweinstock314's llvmint as well", "tree": {"sha": "8a45a676e8423bc44db75ce4c867c143e56d0e72", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a45a676e8423bc44db75ce4c867c143e56d0e72"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bac878c9a334e60291f8c77cd02f24e35ac7b637", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bac878c9a334e60291f8c77cd02f24e35ac7b637", "html_url": "https://github.com/rust-lang/rust/commit/bac878c9a334e60291f8c77cd02f24e35ac7b637", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bac878c9a334e60291f8c77cd02f24e35ac7b637/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e25e2c3b94e1f89fb1d38f77a8a58da5e8a2d581", "url": "https://api.github.com/repos/rust-lang/rust/commits/e25e2c3b94e1f89fb1d38f77a8a58da5e8a2d581", "html_url": "https://github.com/rust-lang/rust/commit/e25e2c3b94e1f89fb1d38f77a8a58da5e8a2d581"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "849c6e9c98164adf72f254c684f2216234ccceb2", "filename": "tools/generate_intrinsics.py", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/bac878c9a334e60291f8c77cd02f24e35ac7b637/tools%2Fgenerate_intrinsics.py", "raw_url": "https://github.com/rust-lang/rust/raw/bac878c9a334e60291f8c77cd02f24e35ac7b637/tools%2Fgenerate_intrinsics.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tools%2Fgenerate_intrinsics.py?ref=bac878c9a334e60291f8c77cd02f24e35ac7b637", "patch": "@@ -16,7 +16,7 @@ def run_command(command, cwd=None):\n def clone_repository(repo_name, path, repo_url, sub_path=None):\n     if os.path.exists(path):\n         while True:\n-            choice = input(\"There is already a `{}` folder, do you want to update it? [y/N]\".format(repo_name))\n+            choice = input(\"There is already a `{}` folder, do you want to update it? [y/N]\".format(path))\n             if choice == \"\" or choice.lower() == \"n\":\n                 print(\"Skipping repository update.\")\n                 return\n@@ -159,13 +159,14 @@ def fill_intrinsics(intrinsics, from_intrinsics, all_intrinsics):\n                 all_intrinsics[entry[0]] = entry[1]\n \n \n-def update_intrinsics(llvm_path, llvmint):\n+def update_intrinsics(llvm_path, llvmint, llvmint2):\n     intrinsics_llvm = {}\n     intrinsics_llvmint = {}\n     all_intrinsics = {}\n \n     extract_instrinsics_from_llvm(llvm_path, intrinsics_llvm)\n     extract_instrinsics_from_llvmint(llvmint, intrinsics_llvmint)\n+    extract_instrinsics_from_llvmint(llvmint2, intrinsics_llvmint)\n \n     intrinsics = {}\n     # We give priority to translations from LLVM over the ones from llvmint.\n@@ -208,6 +209,10 @@ def main():\n         os.path.dirname(os.path.abspath(__file__)),\n         \"llvmint\",\n     )\n+    llvmint2_path = os.path.join(\n+        os.path.dirname(os.path.abspath(__file__)),\n+        \"llvmint-2\",\n+    )\n \n     # First, we clone the LLVM repository if it's not already here.\n     clone_repository(\n@@ -221,7 +226,12 @@ def main():\n         llvmint_path,\n         \"https://github.com/GuillaumeGomez/llvmint\",\n     )\n-    update_intrinsics(llvm_path, llvmint_path)\n+    clone_repository(\n+        \"llvmint2\",\n+        llvmint2_path,\n+        \"https://github.com/antoyo/llvmint\",\n+    )\n+    update_intrinsics(llvm_path, llvmint_path, llvmint2_path)\n \n \n if __name__ == \"__main__\":"}]}