{"sha": "26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2ZmIxZTM3M2JkMzEzYjcwZDFmOTVjZDE2MjU5MDM1ZTVhN2Y4Yzg=", "commit": {"author": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-24T15:50:40Z"}, "committer": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-28T12:25:04Z"}, "message": "Reuse `unix::cmath`", "tree": {"sha": "7925b132d9f0cbb4e0d2a8ddc97c5adcfb3edb37", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7925b132d9f0cbb4e0d2a8ddc97c5adcfb3edb37"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "html_url": "https://github.com/rust-lang/rust/commit/26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/comments", "author": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4", "html_url": "https://github.com/rust-lang/rust/commit/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4"}], "stats": {"total": 152, "additions": 34, "deletions": 118}, "files": [{"sha": "304cf906b2aeadba92007440bb5628e3c9ed8184", "filename": "library/std/src/sys/hermit/cmath.rs", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcmath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcmath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcmath.rs?ref=e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4", "patch": "@@ -1,29 +0,0 @@\n-// These symbols are all defined in `compiler-builtins`\n-extern \"C\" {\n-    pub fn acos(n: f64) -> f64;\n-    pub fn acosf(n: f32) -> f32;\n-    pub fn asin(n: f64) -> f64;\n-    pub fn asinf(n: f32) -> f32;\n-    pub fn atan(n: f64) -> f64;\n-    pub fn atan2(a: f64, b: f64) -> f64;\n-    pub fn atan2f(a: f32, b: f32) -> f32;\n-    pub fn atanf(n: f32) -> f32;\n-    pub fn cbrt(n: f64) -> f64;\n-    pub fn cbrtf(n: f32) -> f32;\n-    pub fn cosh(n: f64) -> f64;\n-    pub fn coshf(n: f32) -> f32;\n-    pub fn expm1(n: f64) -> f64;\n-    pub fn expm1f(n: f32) -> f32;\n-    pub fn fdim(a: f64, b: f64) -> f64;\n-    pub fn fdimf(a: f32, b: f32) -> f32;\n-    pub fn hypot(x: f64, y: f64) -> f64;\n-    pub fn hypotf(x: f32, y: f32) -> f32;\n-    pub fn log1p(n: f64) -> f64;\n-    pub fn log1pf(n: f32) -> f32;\n-    pub fn sinh(n: f64) -> f64;\n-    pub fn sinhf(n: f32) -> f32;\n-    pub fn tan(n: f64) -> f64;\n-    pub fn tanf(n: f32) -> f32;\n-    pub fn tanh(n: f64) -> f64;\n-    pub fn tanhf(n: f32) -> f32;\n-}"}, {"sha": "941e8bc7a66bf9e501414a57c443b50816771f84", "filename": "library/std/src/sys/hermit/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -20,6 +20,7 @@ use crate::os::raw::c_char;\n \n pub mod alloc;\n pub mod args;\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n pub mod condvar;\n pub mod env;"}, {"sha": "b89238f1da8f7af7f3eada50e050eff26797e857", "filename": "library/std/src/sys/sgx/cmath.rs", "status": "removed", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fcmath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fcmath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fcmath.rs?ref=e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4", "patch": "@@ -1,31 +0,0 @@\n-#![cfg(not(test))]\n-\n-// These symbols are all defined in `compiler-builtins`\n-extern \"C\" {\n-    pub fn acos(n: f64) -> f64;\n-    pub fn acosf(n: f32) -> f32;\n-    pub fn asin(n: f64) -> f64;\n-    pub fn asinf(n: f32) -> f32;\n-    pub fn atan(n: f64) -> f64;\n-    pub fn atan2(a: f64, b: f64) -> f64;\n-    pub fn atan2f(a: f32, b: f32) -> f32;\n-    pub fn atanf(n: f32) -> f32;\n-    pub fn cbrt(n: f64) -> f64;\n-    pub fn cbrtf(n: f32) -> f32;\n-    pub fn cosh(n: f64) -> f64;\n-    pub fn coshf(n: f32) -> f32;\n-    pub fn expm1(n: f64) -> f64;\n-    pub fn expm1f(n: f32) -> f32;\n-    pub fn fdim(a: f64, b: f64) -> f64;\n-    pub fn fdimf(a: f32, b: f32) -> f32;\n-    pub fn hypot(x: f64, y: f64) -> f64;\n-    pub fn hypotf(x: f32, y: f32) -> f32;\n-    pub fn log1p(n: f64) -> f64;\n-    pub fn log1pf(n: f32) -> f32;\n-    pub fn sinh(n: f64) -> f64;\n-    pub fn sinhf(n: f32) -> f32;\n-    pub fn tan(n: f64) -> f64;\n-    pub fn tanf(n: f32) -> f32;\n-    pub fn tanh(n: f64) -> f64;\n-    pub fn tanhf(n: f32) -> f32;\n-}"}, {"sha": "276ac81773132554d2b85ca838d6fc8ceeb09186", "filename": "library/std/src/sys/sgx/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fsgx%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -13,6 +13,7 @@ mod waitqueue;\n \n pub mod alloc;\n pub mod args;\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n pub mod condvar;\n pub mod env;"}, {"sha": "2bf80d7a4cbe2cbf84536e585db646cee4a78a99", "filename": "library/std/src/sys/unix/cmath.rs", "status": "modified", "additions": 28, "deletions": 27, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fcmath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fcmath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fcmath.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -1,32 +1,33 @@\n #![cfg(not(test))]\n \n-use libc::{c_double, c_float};\n+// These symbols are all defined by `libm`,\n+// or by `compiler-builtins` on unsupported platforms.\n \n extern \"C\" {\n-    pub fn acos(n: c_double) -> c_double;\n-    pub fn acosf(n: c_float) -> c_float;\n-    pub fn asin(n: c_double) -> c_double;\n-    pub fn asinf(n: c_float) -> c_float;\n-    pub fn atan(n: c_double) -> c_double;\n-    pub fn atan2(a: c_double, b: c_double) -> c_double;\n-    pub fn atan2f(a: c_float, b: c_float) -> c_float;\n-    pub fn atanf(n: c_float) -> c_float;\n-    pub fn cbrt(n: c_double) -> c_double;\n-    pub fn cbrtf(n: c_float) -> c_float;\n-    pub fn cosh(n: c_double) -> c_double;\n-    pub fn coshf(n: c_float) -> c_float;\n-    pub fn expm1(n: c_double) -> c_double;\n-    pub fn expm1f(n: c_float) -> c_float;\n-    pub fn fdim(a: c_double, b: c_double) -> c_double;\n-    pub fn fdimf(a: c_float, b: c_float) -> c_float;\n-    pub fn hypot(x: c_double, y: c_double) -> c_double;\n-    pub fn hypotf(x: c_float, y: c_float) -> c_float;\n-    pub fn log1p(n: c_double) -> c_double;\n-    pub fn log1pf(n: c_float) -> c_float;\n-    pub fn sinh(n: c_double) -> c_double;\n-    pub fn sinhf(n: c_float) -> c_float;\n-    pub fn tan(n: c_double) -> c_double;\n-    pub fn tanf(n: c_float) -> c_float;\n-    pub fn tanh(n: c_double) -> c_double;\n-    pub fn tanhf(n: c_float) -> c_float;\n+    pub fn acos(n: f64) -> f64;\n+    pub fn acosf(n: f32) -> f32;\n+    pub fn asin(n: f64) -> f64;\n+    pub fn asinf(n: f32) -> f32;\n+    pub fn atan(n: f64) -> f64;\n+    pub fn atan2(a: f64, b: f64) -> f64;\n+    pub fn atan2f(a: f32, b: f32) -> f32;\n+    pub fn atanf(n: f32) -> f32;\n+    pub fn cbrt(n: f64) -> f64;\n+    pub fn cbrtf(n: f32) -> f32;\n+    pub fn cosh(n: f64) -> f64;\n+    pub fn coshf(n: f32) -> f32;\n+    pub fn expm1(n: f64) -> f64;\n+    pub fn expm1f(n: f32) -> f32;\n+    pub fn fdim(a: f64, b: f64) -> f64;\n+    pub fn fdimf(a: f32, b: f32) -> f32;\n+    pub fn hypot(x: f64, y: f64) -> f64;\n+    pub fn hypotf(x: f32, y: f32) -> f32;\n+    pub fn log1p(n: f64) -> f64;\n+    pub fn log1pf(n: f32) -> f32;\n+    pub fn sinh(n: f64) -> f64;\n+    pub fn sinhf(n: f32) -> f32;\n+    pub fn tan(n: f64) -> f64;\n+    pub fn tanf(n: f32) -> f32;\n+    pub fn tanh(n: f64) -> f64;\n+    pub fn tanhf(n: f32) -> f32;\n }"}, {"sha": "d19322355061e3ebc7dc901d4b0b016788dbf09f", "filename": "library/std/src/sys/unix/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -11,6 +11,7 @@ pub mod weak;\n pub mod alloc;\n pub mod android;\n pub mod args;\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n pub mod condvar;\n pub mod env;"}, {"sha": "304cf906b2aeadba92007440bb5628e3c9ed8184", "filename": "library/std/src/sys/unsupported/cmath.rs", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fcmath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fcmath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fcmath.rs?ref=e11a9fa52a3f372dadd6db3d3f2ed7dc2621dcc4", "patch": "@@ -1,29 +0,0 @@\n-// These symbols are all defined in `compiler-builtins`\n-extern \"C\" {\n-    pub fn acos(n: f64) -> f64;\n-    pub fn acosf(n: f32) -> f32;\n-    pub fn asin(n: f64) -> f64;\n-    pub fn asinf(n: f32) -> f32;\n-    pub fn atan(n: f64) -> f64;\n-    pub fn atan2(a: f64, b: f64) -> f64;\n-    pub fn atan2f(a: f32, b: f32) -> f32;\n-    pub fn atanf(n: f32) -> f32;\n-    pub fn cbrt(n: f64) -> f64;\n-    pub fn cbrtf(n: f32) -> f32;\n-    pub fn cosh(n: f64) -> f64;\n-    pub fn coshf(n: f32) -> f32;\n-    pub fn expm1(n: f64) -> f64;\n-    pub fn expm1f(n: f32) -> f32;\n-    pub fn fdim(a: f64, b: f64) -> f64;\n-    pub fn fdimf(a: f32, b: f32) -> f32;\n-    pub fn hypot(x: f64, y: f64) -> f64;\n-    pub fn hypotf(x: f32, y: f32) -> f32;\n-    pub fn log1p(n: f64) -> f64;\n-    pub fn log1pf(n: f32) -> f32;\n-    pub fn sinh(n: f64) -> f64;\n-    pub fn sinhf(n: f32) -> f32;\n-    pub fn tan(n: f64) -> f64;\n-    pub fn tanf(n: f32) -> f32;\n-    pub fn tanh(n: f64) -> f64;\n-    pub fn tanhf(n: f32) -> f32;\n-}"}, {"sha": "43cdad004468d9d04730042251d429b1a99a750a", "filename": "library/std/src/sys/unsupported/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funsupported%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -2,6 +2,7 @@\n \n pub mod alloc;\n pub mod args;\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n pub mod condvar;\n pub mod env;"}, {"sha": "25213fa2742446db7147c29f7e12f6f1629d4d26", "filename": "library/std/src/sys/wasi/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -20,7 +20,7 @@ use crate::mem;\n #[path = \"../unix/alloc.rs\"]\n pub mod alloc;\n pub mod args;\n-#[path = \"../unsupported/cmath.rs\"]\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n #[path = \"../unsupported/condvar.rs\"]\n pub mod condvar;"}, {"sha": "bb7ef4f13819d75a7e6ccf785ea0b980fcc50b46", "filename": "library/std/src/sys/wasm/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fwasm%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26fb1e373bd313b70d1f95cd16259035e5a7f8c8/library%2Fstd%2Fsrc%2Fsys%2Fwasm%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasm%2Fmod.rs?ref=26fb1e373bd313b70d1f95cd16259035e5a7f8c8", "patch": "@@ -18,7 +18,7 @@\n \n pub mod alloc;\n pub mod args;\n-#[path = \"../unsupported/cmath.rs\"]\n+#[path = \"../unix/cmath.rs\"]\n pub mod cmath;\n pub mod env;\n #[path = \"../unsupported/fs.rs\"]"}]}