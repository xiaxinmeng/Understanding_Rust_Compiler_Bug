{"sha": "6684d176c78647c467870c75e276f5d37ffd3e3c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY2ODRkMTc2Yzc4NjQ3YzQ2Nzg3MGM3NWUyNzZmNWQzN2ZmZDNlM2M=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-06-03T20:31:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-06-03T20:31:11Z"}, "message": "Auto merge of #42387 - GuillaumeGomez:error-codes-next, r=Susurrus\n\nAdd E0603 error code\n\nPart of #42229.\n\ncc @Susurrus", "tree": {"sha": "8b629fce00b9787cd6e29bc8e4d2ba16ae455817", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b629fce00b9787cd6e29bc8e4d2ba16ae455817"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6684d176c78647c467870c75e276f5d37ffd3e3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6684d176c78647c467870c75e276f5d37ffd3e3c", "html_url": "https://github.com/rust-lang/rust/commit/6684d176c78647c467870c75e276f5d37ffd3e3c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6684d176c78647c467870c75e276f5d37ffd3e3c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0453cf520d4176140fc199d811e54538600daa4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/0453cf520d4176140fc199d811e54538600daa4f", "html_url": "https://github.com/rust-lang/rust/commit/0453cf520d4176140fc199d811e54538600daa4f"}, {"sha": "6675bb3e732b5dccc250419755acb35cf7f8155c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6675bb3e732b5dccc250419755acb35cf7f8155c", "html_url": "https://github.com/rust-lang/rust/commit/6675bb3e732b5dccc250419755acb35cf7f8155c"}], "stats": {"total": 58, "additions": 52, "deletions": 6}, "files": [{"sha": "1a5cf89f96998f1dad5005cd16ada36b7ad4e6e5", "filename": "src/librustc_resolve/diagnostics.rs", "status": "modified", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Flibrustc_resolve%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Flibrustc_resolve%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fdiagnostics.rs?ref=6684d176c78647c467870c75e276f5d37ffd3e3c", "patch": "@@ -1578,6 +1578,35 @@ fn print_on_failure(state: &State) {\n ```\n \"##,\n \n+E0603: r##\"\n+A private item was used outside its scope.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0603\n+mod SomeModule {\n+    const PRIVATE: u32 = 0x_a_bad_1dea_u32; // This const is private, so we\n+                                            // can't use it outside of the\n+                                            // `SomeModule` module.\n+}\n+\n+println!(\"const value: {}\", SomeModule::PRIVATE); // error: constant `CONSTANT`\n+                                                  //        is private\n+```\n+\n+In order to fix this error, you need to make the item public by using the `pub`\n+keyword. Example:\n+\n+```\n+mod SomeModule {\n+    pub const PRIVATE: u32 = 0x_a_bad_1dea_u32; // We set it public by using the\n+                                                // `pub` keyword.\n+}\n+\n+println!(\"const value: {}\", SomeModule::PRIVATE); // ok!\n+```\n+\"##,\n+\n }\n \n register_diagnostics! {"}, {"sha": "b77d5a2f71f9ed0a2e3b16ab94bd5277d4870e8a", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=6684d176c78647c467870c75e276f5d37ffd3e3c", "patch": "@@ -3428,7 +3428,7 @@ impl<'a> Resolver<'a> {\n \n         for &PrivacyError(span, name, binding) in &self.privacy_errors {\n             if !reported_spans.insert(span) { continue }\n-            self.session.span_err(span, &format!(\"{} `{}` is private\", binding.descr(), name));\n+            span_err!(self.session, span, E0603, \"{} `{}` is private\", binding.descr(), name);\n         }\n     }\n "}, {"sha": "1cc9f6bfa7dbe6aaa121977f163220a553b6d086", "filename": "src/test/compile-fail/E0603.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Ftest%2Fcompile-fail%2FE0603.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Ftest%2Fcompile-fail%2FE0603.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0603.rs?ref=6684d176c78647c467870c75e276f5d37ffd3e3c", "patch": "@@ -0,0 +1,17 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+mod SomeModule {\n+    const PRIVATE: u32 = 0x_a_bad_1dea_u32;\n+}\n+\n+fn main() {\n+    SomeModule::PRIVATE; //~ ERROR E0603\n+}"}, {"sha": "a1ec5f0b713a5d003cdbc2360954b2c7b991b1f5", "filename": "src/test/ui/resolve/privacy-struct-ctor.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Ftest%2Fui%2Fresolve%2Fprivacy-struct-ctor.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6684d176c78647c467870c75e276f5d37ffd3e3c/src%2Ftest%2Fui%2Fresolve%2Fprivacy-struct-ctor.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fprivacy-struct-ctor.stderr?ref=6684d176c78647c467870c75e276f5d37ffd3e3c", "patch": "@@ -35,31 +35,31 @@ error[E0423]: expected value, found struct `xcrate::S`\n help: possible better candidate is found in another module, you can import it into scope\n    | use m::S;\n \n-error: tuple struct `Z` is private\n+error[E0603]: tuple struct `Z` is private\n   --> $DIR/privacy-struct-ctor.rs:25:9\n    |\n 25 |         n::Z; //~ ERROR tuple struct `Z` is private\n    |         ^^^^\n \n-error: tuple struct `S` is private\n+error[E0603]: tuple struct `S` is private\n   --> $DIR/privacy-struct-ctor.rs:35:5\n    |\n 35 |     m::S; //~ ERROR tuple struct `S` is private\n    |     ^^^^\n \n-error: tuple struct `Z` is private\n+error[E0603]: tuple struct `Z` is private\n   --> $DIR/privacy-struct-ctor.rs:39:5\n    |\n 39 |     m::n::Z; //~ ERROR tuple struct `Z` is private\n    |     ^^^^^^^\n \n-error: tuple struct `S` is private\n+error[E0603]: tuple struct `S` is private\n   --> $DIR/privacy-struct-ctor.rs:41:5\n    |\n 41 |     xcrate::m::S; //~ ERROR tuple struct `S` is private\n    |     ^^^^^^^^^^^^\n \n-error: tuple struct `Z` is private\n+error[E0603]: tuple struct `Z` is private\n   --> $DIR/privacy-struct-ctor.rs:45:5\n    |\n 45 |     xcrate::m::n::Z; //~ ERROR tuple struct `Z` is private"}]}