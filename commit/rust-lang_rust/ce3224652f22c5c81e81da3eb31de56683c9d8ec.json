{"sha": "ce3224652f22c5c81e81da3eb31de56683c9d8ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlMzIyNDY1MmYyMmM1YzgxZTgxZGEzZWIzMWRlNTY2ODNjOWQ4ZWM=", "commit": {"author": {"name": "Dave Herman", "email": "dherman@mozilla.com", "date": "2010-10-21T05:04:19Z"}, "committer": {"name": "Dave Herman", "email": "dherman@mozilla.com", "date": "2010-10-21T05:04:19Z"}, "message": "simpler computation of uint_bits(), plus whitespace police", "tree": {"sha": "96f62ab18b8e4560efced37f91e640b204359962", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96f62ab18b8e4560efced37f91e640b204359962"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce3224652f22c5c81e81da3eb31de56683c9d8ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce3224652f22c5c81e81da3eb31de56683c9d8ec", "html_url": "https://github.com/rust-lang/rust/commit/ce3224652f22c5c81e81da3eb31de56683c9d8ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce3224652f22c5c81e81da3eb31de56683c9d8ec/comments", "author": null, "committer": null, "parents": [{"sha": "9a539a5dd18d3e8cf9dfab59f793d2e4df58464c", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a539a5dd18d3e8cf9dfab59f793d2e4df58464c", "html_url": "https://github.com/rust-lang/rust/commit/9a539a5dd18d3e8cf9dfab59f793d2e4df58464c"}], "stats": {"total": 15, "additions": 2, "deletions": 13}, "files": [{"sha": "1208f1f756069e90232613d6c5d24a3ed59f4efe", "filename": "src/comp/util/bits.rs", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/ce3224652f22c5c81e81da3eb31de56683c9d8ec/src%2Fcomp%2Futil%2Fbits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce3224652f22c5c81e81da3eb31de56683c9d8ec/src%2Fcomp%2Futil%2Fbits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Futil%2Fbits.rs?ref=ce3224652f22c5c81e81da3eb31de56683c9d8ec", "patch": "@@ -9,18 +9,9 @@ import std._vec;\n \n state type t = rec(vec[mutable uint] storage, uint nbits);\n \n-// FIXME: we should bind std.max_int\n-fn is32bit() -> bool {\n-    let uint n = 0xffffffffu;\n-    ret (n + 1u) == 0u;\n-}\n-\n+// FIXME: this should be a constant once they work\n fn uint_bits() -> uint {\n-    if (is32bit()) {\n-        ret 31u;\n-    } else {\n-        ret 63u;\n-    }\n+    ret 32u + ((1u << 32u) >> 27u) - 1u;\n }\n \n // FIXME: this should be state\n@@ -36,8 +27,6 @@ fn create(uint nbits, bool init) -> t {\n             nbits = nbits);\n }\n \n-\n-\n // FIXME: this should be state\n fn process(fn(uint, uint) -> uint op, t v0, t v1) -> bool {\n     auto len = _vec.len[mutable uint](v1.storage);"}]}