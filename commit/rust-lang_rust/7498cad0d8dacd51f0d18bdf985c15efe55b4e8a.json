{"sha": "7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0OThjYWQwZDhkYWNkNTFmMGQxOGJkZjk4NWMxNWVmZTU1YjRlOGE=", "commit": {"author": {"name": "CAD97", "email": "cad97@cad97.com", "date": "2020-07-01T20:01:34Z"}, "committer": {"name": "CAD97", "email": "cad97@cad97.com", "date": "2020-07-01T20:02:34Z"}, "message": "Reclarify safety comments in Weak::as_ptr", "tree": {"sha": "382d621701670803051ab82156855482b9726674", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/382d621701670803051ab82156855482b9726674"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "html_url": "https://github.com/rust-lang/rust/commit/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a/comments", "author": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "98789ac75a15c78462ada2438881c8a4e4fda94a", "url": "https://api.github.com/repos/rust-lang/rust/commits/98789ac75a15c78462ada2438881c8a4e4fda94a", "html_url": "https://github.com/rust-lang/rust/commit/98789ac75a15c78462ada2438881c8a4e4fda94a"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "835df66d55c4efd6b40857d1626b068dcb9f4d1b", "filename": "src/liballoc/rc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a/src%2Fliballoc%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a/src%2Fliballoc%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Frc.rs?ref=7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "patch": "@@ -1705,9 +1705,9 @@ impl<T> Weak<T> {\n         let ptr: *mut RcBox<T> = NonNull::as_ptr(self.ptr);\n \n         // SAFETY: we must offset the pointer manually, and said pointer may be\n-        // a dangling weak (usize::MAX). data_offset is safe to call, because we\n-        // know a pointer to unsized T must be derived from a real unsized T,\n-        // because dangling weaks are only created for sized T. wrapping_offset\n+        // a dangling weak (usize::MAX) if T is sized. data_offset is safe to call,\n+        // because we know that a pointer to unsized T was derived from a real\n+        // unsized T, as dangling weaks are only created for sized T. wrapping_offset\n         // is used so that we can use the same code path for the non-dangling\n         // unsized case and the potentially dangling sized case.\n         unsafe {"}, {"sha": "875bec5b2037295ffdc9e8005b654b222dfe1b1c", "filename": "src/liballoc/sync.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a/src%2Fliballoc%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7498cad0d8dacd51f0d18bdf985c15efe55b4e8a/src%2Fliballoc%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fsync.rs?ref=7498cad0d8dacd51f0d18bdf985c15efe55b4e8a", "patch": "@@ -1473,9 +1473,9 @@ impl<T> Weak<T> {\n         let ptr: *mut ArcInner<T> = NonNull::as_ptr(self.ptr);\n \n         // SAFETY: we must offset the pointer manually, and said pointer may be\n-        // a dangling weak (usize::MAX). data_offset is safe to call, because we\n-        // know a pointer to unsized T must be derived from a real unsized T,\n-        // because dangling weaks are only created for sized T. wrapping_offset\n+        // a dangling weak (usize::MAX) if T is sized. data_offset is safe to call,\n+        // because we know that a pointer to unsized T was derived from a real\n+        // unsized T, as dangling weaks are only created for sized T. wrapping_offset\n         // is used so that we can use the same code path for the non-dangling\n         // unsized case and the potentially dangling sized case.\n         unsafe {"}]}