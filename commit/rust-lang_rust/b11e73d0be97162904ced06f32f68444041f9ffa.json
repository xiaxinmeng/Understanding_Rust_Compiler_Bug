{"sha": "b11e73d0be97162904ced06f32f68444041f9ffa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxMWU3M2QwYmU5NzE2MjkwNGNlZDA2ZjMyZjY4NDQ0MDQxZjlmZmE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-02-14T05:22:08Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-02-15T01:45:53Z"}, "message": "mk: Add some serious documentation and 'make help'\n\n'make help' is implemented in a fairly ridiculous way, using awk\nto parse comments out of Makefile.in and displaying them.", "tree": {"sha": "e687ba8d164d42118ce0611c97b056de2b319b28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e687ba8d164d42118ce0611c97b056de2b319b28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b11e73d0be97162904ced06f32f68444041f9ffa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b11e73d0be97162904ced06f32f68444041f9ffa", "html_url": "https://github.com/rust-lang/rust/commit/b11e73d0be97162904ced06f32f68444041f9ffa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b11e73d0be97162904ced06f32f68444041f9ffa/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d365c3a6e6eea2079ce758208fd5e71cad299377", "url": "https://api.github.com/repos/rust-lang/rust/commits/d365c3a6e6eea2079ce758208fd5e71cad299377", "html_url": "https://github.com/rust-lang/rust/commit/d365c3a6e6eea2079ce758208fd5e71cad299377"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "2bfcd49e7fc4782cedc7a547d9981d8770ea836a", "filename": "Makefile.in", "status": "modified", "additions": 54, "deletions": 1, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/b11e73d0be97162904ced06f32f68444041f9ffa/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/b11e73d0be97162904ced06f32f68444041f9ffa/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=b11e73d0be97162904ced06f32f68444041f9ffa", "patch": "@@ -8,7 +8,54 @@\n # option. This file may not be copied, modified, or distributed\n # except according to those terms.\n \n-# An explanation of how the build is structured:\n+# <help>\n+#\n+# # The Rust Build System\n+#\n+# Start with these these build targets:\n+#\n+# * all - The default rule. Builds a complete stage2 compiler, std,\n+#           and extra for all hosts and targets\n+# * docs - Generate HTML documentation for the std and extra libraries\n+#            from source code comments\n+# * rustc - The stage 2 compiler for the build platform with standard\n+#             and extra libraries\n+# * install\n+# * uninstall\n+# * check - Run tests\n+# * check-stage1-$(crate) - Run tests for a crate, e.g. `check-stage1-std`\n+# * check-stage1-rpass - Run the language tests\n+# * check-docs - Run the doc tests\n+#\n+# Then mix in some of these environment variables to harness the\n+# ultimate power of Rust Build System.\n+#\n+# * `VERBOSE=1` - Print all commands. Use this to see what's going on.\n+# * `RUSTFLAGS=...` - Add compiler flags to all `rustc` invocations\n+# * `CFG_ENABLE_VALGRIND=1` - Run tests under valgrind\n+# * `VALGRIND_COMPILE=1` - Run the compiler itself under valgrind\n+#                          (may require `CFG_ENABLE_VALGRIND`)\n+# * `NO_REBUILD=1` - Don't rebootstrap when testing std\n+#                    (and possibly other crates)\n+# * `SAVE_TEMPS=1` - Use `--save-temps` flag on all `rustc` invocations\n+# * `ASM_COMMENTS=1` - Use `-Z asm-comments`\n+# * `TIME_PASSES=1` - Use `-Z time-passes`\n+# * `TIME_LLVM_PASSES=1` - Use `-Z time-llvm-passes`\n+# * `TRACE=1` - Use `-Z trace`\n+#\n+# This is hardly all there is to know of The Rust Build System's\n+# mysteries. Your journey continues on the wiki[1][2].\n+#\n+# [1]: https://github.com/mozilla/rust/wiki/Note-build-system\n+# [2]: https://github.com/mozilla/rust/wiki/Note-testsuite\n+#\n+# </help>\n+#\n+# # An (old) explanation of how the build is structured:\n+#\n+# *Note: Hey, like, this is probably inaccurate, and is definitely\n+# an outdated and insufficient explanation of the remarkable\n+# and discomfiting Rust Build System.*\n #\n # There are multiple build stages (0-3) needed to verify that the\n # compiler is properly self-hosting. Each stage is divided between\n@@ -598,3 +645,9 @@ endif\n # header file dependencies.\n ALL_DEP_FILES := $(ALL_OBJ_FILES:%.o=%.d)\n -include $(ALL_DEP_FILES)\n+\n+help:\n+# Show the comments from this file as \"help\"\n+# pick everything between tags | remove first line | remove last line\n+# | remove extra (?) line | strip leading `#` from lines\n+\t$(Q)awk '/<help>/,/<\\/help>/' $(S)/Makefile.in | sed '1d' | sed '$$d' | sed 's/^# \\?//'"}]}