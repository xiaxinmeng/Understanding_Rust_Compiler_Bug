{"sha": "19dc574890c42a4e87665276d4cff1f69ca13e21", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5ZGM1NzQ4OTBjNDJhNGU4NzY2NTI3NmQ0Y2ZmMWY2OWNhMTNlMjE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-07T21:06:29Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-09-07T21:06:29Z"}, "message": "auto merge of #17035 : huonw/rust/moar-jquery, r=alexcrichton\n\nSometimes (e.g. on Rust CI) the \"expand description\" text of the\r\ncollapse toggle was displayed by default, when a page is first\r\nloaded (even though the description is expanded), because some\r\nContent-Security-Policy settings disable inline CSS.\r\n\r\nSetting it the style with the `.css` method allows the output to be used\r\nin more places.", "tree": {"sha": "b64117b499f4c8fe3ec92d95580b6786fea5763c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b64117b499f4c8fe3ec92d95580b6786fea5763c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19dc574890c42a4e87665276d4cff1f69ca13e21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19dc574890c42a4e87665276d4cff1f69ca13e21", "html_url": "https://github.com/rust-lang/rust/commit/19dc574890c42a4e87665276d4cff1f69ca13e21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19dc574890c42a4e87665276d4cff1f69ca13e21/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86730e43c0dd83f946deb88ccbdaaa49817b1136", "url": "https://api.github.com/repos/rust-lang/rust/commits/86730e43c0dd83f946deb88ccbdaaa49817b1136", "html_url": "https://github.com/rust-lang/rust/commit/86730e43c0dd83f946deb88ccbdaaa49817b1136"}, {"sha": "9151874f406c5caf723d8cd6c09f1a9029b4d038", "url": "https://api.github.com/repos/rust-lang/rust/commits/9151874f406c5caf723d8cd6c09f1a9029b4d038", "html_url": "https://github.com/rust-lang/rust/commit/9151874f406c5caf723d8cd6c09f1a9029b4d038"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "93bf8d115b3a07c73fb4a7108e2c826840cd7000", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/19dc574890c42a4e87665276d4cff1f69ca13e21/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/19dc574890c42a4e87665276d4cff1f69ca13e21/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=19dc574890c42a4e87665276d4cff1f69ca13e21", "patch": "@@ -118,7 +118,7 @@\n      * A function to compute the Levenshtein distance between two strings\n      * Licensed under the Creative Commons Attribution-ShareAlike 3.0 Unported\n      * Full License can be found at http://creativecommons.org/licenses/by-sa/3.0/legalcode\n-     * This code is an unmodified version of the code written by Marco de Wit \n+     * This code is an unmodified version of the code written by Marco de Wit\n      * and was found at http://stackoverflow.com/a/18514751/745719\n      */\n     var levenshtein = (function() {\n@@ -224,7 +224,7 @@\n                                 });\n                             }\n                         } else if (\n-                            (lev_distance = levenshtein(searchWords[j], val)) <= \n+                            (lev_distance = levenshtein(searchWords[j], val)) <=\n                                 MAX_LEV_DISTANCE) {\n                             if (typeFilter < 0 || typeFilter === searchIndex[j].ty) {\n                                 results.push({\n@@ -350,16 +350,16 @@\n         function validateResult(name, path, keys, parent) {\n             for (var i=0; i < keys.length; ++i) {\n                 // each check is for validation so we negate the conditions and invalidate\n-                if (!( \n+                if (!(\n                     // check for an exact name match\n                     name.toLowerCase().indexOf(keys[i]) > -1 ||\n                     // then an exact path match\n                     path.toLowerCase().indexOf(keys[i]) > -1 ||\n                     // next if there is a parent, check for exact parent match\n-                    (parent !== undefined && \n+                    (parent !== undefined &&\n                         parent.name.toLowerCase().indexOf(keys[i]) > -1) ||\n                     // lastly check to see if the name was a levenshtein match\n-                    levenshtein(name.toLowerCase(), keys[i]) <= \n+                    levenshtein(name.toLowerCase(), keys[i]) <=\n                         MAX_LEV_DISTANCE)) {\n                     return false;\n                 }\n@@ -757,20 +757,21 @@\n     });\n \n     $(function() {\n-        var toggle = \"<a href='javascript:void(0)'\"\n-            + \"class='collapse-toggle'>[<span class='inner'>-</span>]</a>\";\n+        var toggle = $(\"<a/>\", {'href': 'javascript:void(0)', 'class': 'collapse-toggle'})\n+            .html(\"[<span class='inner'>-</span>]\");\n \n         $(\".method\").each(function() {\n            if ($(this).next().is(\".docblock\")) {\n-               $(this).children().first().after(toggle);\n+               $(this).children().first().after(toggle[0]);\n            }\n         });\n \n-        var mainToggle = $(toggle);\n-        mainToggle.append(\"<span class='toggle-label' style='display:none'>\"\n-            + \"&nbsp;Expand&nbsp;description</span></a>\")\n-        var wrapper =  $(\"<div class='toggle-wrapper'>\");\n-        wrapper.append(mainToggle);\n+        var mainToggle =\n+            $(toggle).append(\n+                $('<span/>', {'class': 'toggle-label'})\n+                    .css('display', 'none')\n+                    .html('&nbsp;Expand&nbsp;description'));\n+        var wrapper =  $(\"<div class='toggle-wrapper'>\").append(mainToggle);\n         $(\"#main > .docblock\").before(wrapper);\n     });\n "}]}