{"sha": "c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "node_id": "C_kwDOAAsO6NoAKGMxNDg3NTUwY2E3NWMyYmNkNGNiNGRhMDM4ZWYxZDE4ZDg2YTg1N2E", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-06-11T16:37:40Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-06-11T16:54:23Z"}, "message": "Add test case for #trait-implementations-1 link", "tree": {"sha": "91709b5942e2e7f2818be4a27c43850e02c518af", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/91709b5942e2e7f2818be4a27c43850e02c518af"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "html_url": "https://github.com/rust-lang/rust/commit/c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fd16648fe7c7373965d9a14bc8c832589518361", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fd16648fe7c7373965d9a14bc8c832589518361", "html_url": "https://github.com/rust-lang/rust/commit/3fd16648fe7c7373965d9a14bc8c832589518361"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "c423acd7047deb02590538371433528adf4b8d19", "filename": "library/core/src/primitive_docs.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/library%2Fcore%2Fsrc%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/library%2Fcore%2Fsrc%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fprimitive_docs.rs?ref=c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "patch": "@@ -914,6 +914,8 @@ mod prim_str {}\n ///\n /// For more about tuples, see [the book](../book/ch03-02-data-types.html#the-tuple-type).\n ///\n+// Hardcoded anchor in src/librustdoc/html/format.rs\n+// linked to as `#trait-implementations-1`\n /// # Trait implementations\n ///\n /// In this documentation the shorthand `(T, ...)` is used to represent tuples of varying length."}, {"sha": "c423acd7047deb02590538371433528adf4b8d19", "filename": "library/std/src/primitive_docs.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fprimitive_docs.rs?ref=c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "patch": "@@ -914,6 +914,8 @@ mod prim_str {}\n ///\n /// For more about tuples, see [the book](../book/ch03-02-data-types.html#the-tuple-type).\n ///\n+// Hardcoded anchor in src/librustdoc/html/format.rs\n+// linked to as `#trait-implementations-1`\n /// # Trait implementations\n ///\n /// In this documentation the shorthand `(T, ...)` is used to represent tuples of varying length."}, {"sha": "c714549d0f545511e05bae68115a664176ba04a6", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "patch": "@@ -1077,6 +1077,8 @@ impl clean::Impl {\n             if let clean::Type::Tuple(types) = &self.for_ &&\n                 let [clean::Type::Generic(name)] = &types[..] &&\n                 (self.kind.is_tuple_variadic() || self.kind.is_auto()) {\n+                // Hardcoded anchor library/core/src/primitive_docs.rs\n+                // Link should match `# Trait implementations`\n                 primitive_link_fragment(f, PrimitiveType::Tuple, &format!(\"({name}, ...)\"), \"#trait-implementations-1\", cx)?;\n             } else if let Some(ty) = self.kind.as_blanket_ty() {\n                 fmt_type(ty, f, use_absolute, cx)?;"}, {"sha": "71b0b07700958967dcec531d4233833c133260bb", "filename": "src/test/rustdoc/primitive-tuple-auto-trait.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/src%2Ftest%2Frustdoc%2Fprimitive-tuple-auto-trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1487550ca75c2bcd4cb4da038ef1d18d86a857a/src%2Ftest%2Frustdoc%2Fprimitive-tuple-auto-trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fprimitive-tuple-auto-trait.rs?ref=c1487550ca75c2bcd4cb4da038ef1d18d86a857a", "patch": "@@ -11,4 +11,12 @@\n // @has - '//div[@id=\"synthetic-implementations-list\"]//h3' 'Sync'\n #[doc(primitive = \"tuple\")]\n /// this is a test!\n+///\n+// Hardcoded anchor to header written in library/core/src/primitive_docs.rs\n+// @has - '//h2[@id=\"trait-implementations-1\"]' 'Trait implementations'\n+/// # Trait implementations\n+///\n+/// This header is hard-coded in the HTML format linking for `#[doc(tuple_variadics)]`.\n+/// To make sure it gets linked correctly, we need to make sure the hardcoded anchor\n+/// in the code matches what rustdoc generates for the header.\n mod tuple_prim {}"}]}