{"sha": "5a299a9903abd6bd5161d610855b0c123ed58dfb", "node_id": "C_kwDOAAsO6NoAKDVhMjk5YTk5MDNhYmQ2YmQ1MTYxZDYxMDg1NWIwYzEyM2VkNThkZmI", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-01-28T18:13:01Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-01-28T18:13:01Z"}, "message": "Make local_def_id_to_hir_id return MaybeOwner<()>", "tree": {"sha": "eda4fc583b9b8e1001d3e5947171cebc43faa210", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eda4fc583b9b8e1001d3e5947171cebc43faa210"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5a299a9903abd6bd5161d610855b0c123ed58dfb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmH0Mi0ACgkQgTGiTgx5\n768kiw//fv4aWdTDLhWI2k+R0K4FqGRIZRSMpkxRxQ50xfhMzK4pgt1KTjaQTfKu\n4RzPo1zz8JIjRpU3tn3U7EY8M5NerXNc8NSTyeJMTt0U+eTT+3V8qYZ8g6QnMaXZ\nltOjWrBl5UZrRcyT6wvLtqJSzCqzJ+VH5fUsdqUG2GY2FKHf91/ET2SQrY+EyAqC\n1W4eX9UFV1TCQ3lDSQvpzsu10zrS+A7FwgBBmmsx9aJ93E90W4B+Ie81rTAsctEm\no3/dClBHJ9wba9RNm90PwsF5VOA4Ib9l8B+rg2VPuLvNW2Lo9TnotnYzIcCBxvED\nozVQYrKGiMV2GTw2TRNl2dwruxveEjgvOXsAzo11KnRKinW8ZeqHDz1YMIMXUJgU\nMEuCAcaYcSz62gGxFfhR6vVZ95mU8RC/AsJ9z98IT95nA75xAdGEECNOfGG/4W7g\nTirVj0Es2WyEsoTrFAfsv3FSnxaZxGtEqp7h4Wvr18KSyJ4vgawwiP8k4mY9lqfO\nEp4isxnyDC8HzzveBCsD29NGn1Mzzymvhfe2DJH2ZuD6x7HS9Sq3iToNAmZBItk5\nZyIAVHjgQWjz4iYkPshzG4/zj8nP6pkMT6JiU1PRsw2QKrgNzWlGjh1C2COMuQDe\nYnKKle3BwLDv4hjnDfzJ+PpiQK/lm4fyXJOClHOVYpw8FMfatJk=\n=XoYJ\n-----END PGP SIGNATURE-----", "payload": "tree eda4fc583b9b8e1001d3e5947171cebc43faa210\nparent d17eb78cf836610d8571806744785f1cbcbb6481\nauthor Santiago Pastorino <spastorino@gmail.com> 1643393581 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1643393581 -0300\n\nMake local_def_id_to_hir_id return MaybeOwner<()>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5a299a9903abd6bd5161d610855b0c123ed58dfb", "html_url": "https://github.com/rust-lang/rust/commit/5a299a9903abd6bd5161d610855b0c123ed58dfb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5a299a9903abd6bd5161d610855b0c123ed58dfb/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d17eb78cf836610d8571806744785f1cbcbb6481", "url": "https://api.github.com/repos/rust-lang/rust/commits/d17eb78cf836610d8571806744785f1cbcbb6481", "html_url": "https://github.com/rust-lang/rust/commit/d17eb78cf836610d8571806744785f1cbcbb6481"}], "stats": {"total": 9, "additions": 2, "deletions": 7}, "files": [{"sha": "12379eed80ec4e7de984969aff7ecef91cb1562a", "filename": "compiler/rustc_middle/src/hir/mod.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5a299a9903abd6bd5161d610855b0c123ed58dfb/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a299a9903abd6bd5161d610855b0c123ed58dfb/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fhir%2Fmod.rs?ref=5a299a9903abd6bd5161d610855b0c123ed58dfb", "patch": "@@ -69,12 +69,7 @@ pub fn provide(providers: &mut Providers) {\n         let node = owner.node();\n         Some(Owner { node, hash_without_bodies: owner.nodes.hash_without_bodies })\n     };\n-    providers.local_def_id_to_hir_id = |tcx, id| {\n-        tcx.hir_crate(()).owners[id].map(|owner| {\n-            let node = owner.nodes.node();\n-            Owner { node, hash_without_bodies: owner.nodes.hash_without_bodies }\n-        })\n-    };\n+    providers.local_def_id_to_hir_id = |tcx, id| tcx.hir_crate(()).owners[id].map(|_| ());\n     providers.hir_owner_nodes = |tcx, id| tcx.hir_crate(()).owners[id].map(|i| &i.nodes);\n     providers.hir_owner_parent = |tcx, id| {\n         // Accessing the def_key is ok since its value is hashed as part of `id`'s DefPathHash."}, {"sha": "334e06aa685a9f97084424a127cadff44857396c", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5a299a9903abd6bd5161d610855b0c123ed58dfb/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a299a9903abd6bd5161d610855b0c123ed58dfb/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=5a299a9903abd6bd5161d610855b0c123ed58dfb", "patch": "@@ -60,7 +60,7 @@ rustc_queries! {\n     ///\n     /// This can be conveniently accessed by methods on `tcx.hir()`.\n     /// Avoid calling this query directly.\n-    query local_def_id_to_hir_id(key: LocalDefId) -> hir::MaybeOwner<crate::hir::Owner<'tcx>> {\n+    query local_def_id_to_hir_id(key: LocalDefId) -> hir::MaybeOwner<()> {\n         desc { |tcx| \"HIR ID of `{}`\", tcx.def_path_str(key.to_def_id()) }\n     }\n "}]}