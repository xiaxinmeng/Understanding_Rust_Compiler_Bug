{"sha": "e63e2680dadeb87c9fea78c431e628cf7ed461a6", "node_id": "C_kwDOAAsO6NoAKGU2M2UyNjgwZGFkZWI4N2M5ZmVhNzhjNDMxZTYyOGNmN2VkNDYxYTY", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-30T18:30:28Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-30T18:30:28Z"}, "message": "Consolidate impl Result<&T, E>", "tree": {"sha": "8ec3c7605510c492a79079d1b663fb45db85f6dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ec3c7605510c492a79079d1b663fb45db85f6dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e63e2680dadeb87c9fea78c431e628cf7ed461a6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHN+sQACgkQ+boUO5X/\nbYK9zQ//Qxxe7YyqqVXBpszrNe7eBgSStjocIYnFaB0mHyb2+GZc4oS6iNqbBwtz\npdEl5YGG/XFqIX9Fk7J3xgYxzpWVBxkNnvCeSP0CJJp/QeccxDW+eJiPWFxAo++g\nGymu224BNhXzkQWo7dy0epz1yoDpQskKkMasGlPPNVAJZyms1MIYN4OfUiWPj6LN\nBOYT/s+4XGr2WDADzgPe2QF+vE6TnVQ/Bo1ozS6PSwlbKEKB5zAZhAnaIK0PJ/0n\nxpWhBGPkiKHzcm1soUjvLCER3q4zYS91bmXG+1IoirQ0Pnxy8TU5CqoG5SKh+iXF\nFOXddMTsU+wk6dGO2PToC1zN8NoVYreTaWlEyP/VK2bnvxoB/J+B7PWRxyuoqsA9\nNqF8rgZrvNZv5GDmaNKGIPR/M2sFjQfuEp+7ck0WdXcdn4bpg6yfAXfZ1HIeuTF2\nGzEvegdwi3RzVaZFSwcvjWjkD/CTzWTe4xr5UTyCYLrrsYgybrb9MaSjyCOsOD8o\n7n2rFHJVkicuePP1eNZO/NVRC9j5aNVE45cMQy5b/deRa5c91gcvqZOPKFIJ8cW9\nMgZJcShP6ORfFuZvZ2yL1zi5AKYfwPxgEDdF3QocCiXxDXNiClCnkMD5zGZC9DAg\nChHxbJiH8PirVynJKck9dmeFApEAmolhm7f6HyUEQa2u+ucoe5o=\n=M9NG\n-----END PGP SIGNATURE-----", "payload": "tree 8ec3c7605510c492a79079d1b663fb45db85f6dd\nparent b2df61fa9f69554f3a1cdc5e02d1259396f8ff53\nauthor David Tolnay <dtolnay@gmail.com> 1640889028 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1640889028 -0800\n\nConsolidate impl Result<&T, E>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e63e2680dadeb87c9fea78c431e628cf7ed461a6", "html_url": "https://github.com/rust-lang/rust/commit/e63e2680dadeb87c9fea78c431e628cf7ed461a6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e63e2680dadeb87c9fea78c431e628cf7ed461a6/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2df61fa9f69554f3a1cdc5e02d1259396f8ff53", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2df61fa9f69554f3a1cdc5e02d1259396f8ff53", "html_url": "https://github.com/rust-lang/rust/commit/b2df61fa9f69554f3a1cdc5e02d1259396f8ff53"}], "stats": {"total": 48, "additions": 26, "deletions": 22}, "files": [{"sha": "29a0be68083c5a241ef201395157614b4772ec8c", "filename": "library/core/src/result.rs", "status": "modified", "additions": 26, "deletions": 22, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/e63e2680dadeb87c9fea78c431e628cf7ed461a6/library%2Fcore%2Fsrc%2Fresult.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e63e2680dadeb87c9fea78c431e628cf7ed461a6/library%2Fcore%2Fsrc%2Fresult.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fresult.rs?ref=e63e2680dadeb87c9fea78c431e628cf7ed461a6", "patch": "@@ -1493,7 +1493,7 @@ impl<T, E> Result<T, E> {\n     }\n }\n \n-impl<T: Copy, E> Result<&T, E> {\n+impl<T, E> Result<&T, E> {\n     /// Maps a `Result<&T, E>` to a `Result<T, E>` by copying the contents of the\n     /// `Ok` part.\n     ///\n@@ -1508,9 +1508,33 @@ impl<T: Copy, E> Result<&T, E> {\n     /// assert_eq!(copied, Ok(12));\n     /// ```\n     #[unstable(feature = \"result_copied\", reason = \"newly added\", issue = \"63168\")]\n-    pub fn copied(self) -> Result<T, E> {\n+    pub fn copied(self) -> Result<T, E>\n+    where\n+        T: Copy,\n+    {\n         self.map(|&t| t)\n     }\n+\n+    /// Maps a `Result<&T, E>` to a `Result<T, E>` by cloning the contents of the\n+    /// `Ok` part.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// #![feature(result_cloned)]\n+    /// let val = 12;\n+    /// let x: Result<&i32, i32> = Ok(&val);\n+    /// assert_eq!(x, Ok(&12));\n+    /// let cloned = x.cloned();\n+    /// assert_eq!(cloned, Ok(12));\n+    /// ```\n+    #[unstable(feature = \"result_cloned\", reason = \"newly added\", issue = \"63168\")]\n+    pub fn cloned(self) -> Result<T, E>\n+    where\n+        T: Clone,\n+    {\n+        self.map(|t| t.clone())\n+    }\n }\n \n impl<T: Copy, E> Result<&mut T, E> {\n@@ -1533,26 +1557,6 @@ impl<T: Copy, E> Result<&mut T, E> {\n     }\n }\n \n-impl<T: Clone, E> Result<&T, E> {\n-    /// Maps a `Result<&T, E>` to a `Result<T, E>` by cloning the contents of the\n-    /// `Ok` part.\n-    ///\n-    /// # Examples\n-    ///\n-    /// ```\n-    /// #![feature(result_cloned)]\n-    /// let val = 12;\n-    /// let x: Result<&i32, i32> = Ok(&val);\n-    /// assert_eq!(x, Ok(&12));\n-    /// let cloned = x.cloned();\n-    /// assert_eq!(cloned, Ok(12));\n-    /// ```\n-    #[unstable(feature = \"result_cloned\", reason = \"newly added\", issue = \"63168\")]\n-    pub fn cloned(self) -> Result<T, E> {\n-        self.map(|t| t.clone())\n-    }\n-}\n-\n impl<T: Clone, E> Result<&mut T, E> {\n     /// Maps a `Result<&mut T, E>` to a `Result<T, E>` by cloning the contents of the\n     /// `Ok` part."}]}