{"sha": "0b3644e1f3cd4756a2353b25b0579853351b4a26", "node_id": "C_kwDOAAsO6NoAKDBiMzY0NGUxZjNjZDQ3NTZhMjM1M2IyNWIwNTc5ODUzMzUxYjRhMjY", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2022-07-13T08:38:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-13T08:38:42Z"}, "message": "Rollup merge of #98848 - flip1995:clippy-book, r=jyn514\n\nBuild the Clippy book as part of x.py doc\n\nr? ``@ehuss`` since you said you would be interested in helping moving this forward.\n\ncc ``@jyn514`` as part of the bootstrap team.", "tree": {"sha": "36ba193683e1f047920d5c110bbc0dff04579a12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36ba193683e1f047920d5c110bbc0dff04579a12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b3644e1f3cd4756a2353b25b0579853351b4a26", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJizoSTCRBK7hj4Ov3rIwAA7noIAKjLWIjlrykrCm4jPrK3wyyu\nAY5IxfrDbluX935bzDp82enQGntR25mjO/Byt5gb6WR58LirQZ3iPgS1EkiG8Hsk\nXprl5hSqDzFvI9PtHEiZCCZXjtBNicVsLgDlhh1leGwl/qlo7SBVq2pYgF+ud5Nr\nMAFHiZ78j8GqLnkRLV0kkjDGw1P588q6JfdL5tiKkzkJ4fEnfiRG2GxRdQQVtLfL\n7jQbYiEhRMaM+klrTOwtnFif07IQm4XumlHvaIeRwdauWFgF8W1thJwaHMSk81op\ntIuyWN0yW4MdPW3UMuSP/4cQpJrsULW3Z/HVChuSvznA1mbE5uyHdvL3CPbwREg=\n=zhvr\n-----END PGP SIGNATURE-----\n", "payload": "tree 36ba193683e1f047920d5c110bbc0dff04579a12\nparent 3dfb224897aa5592f223f5a69ddb9c7cd871398e\nparent 665d707b688008cd4775c945834ad6be2e2f532b\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1657701522 +0200\ncommitter GitHub <noreply@github.com> 1657701522 +0200\n\nRollup merge of #98848 - flip1995:clippy-book, r=jyn514\n\nBuild the Clippy book as part of x.py doc\n\nr? ``@ehuss`` since you said you would be interested in helping moving this forward.\n\ncc ``@jyn514`` as part of the bootstrap team.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b3644e1f3cd4756a2353b25b0579853351b4a26", "html_url": "https://github.com/rust-lang/rust/commit/0b3644e1f3cd4756a2353b25b0579853351b4a26", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b3644e1f3cd4756a2353b25b0579853351b4a26/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3dfb224897aa5592f223f5a69ddb9c7cd871398e", "url": "https://api.github.com/repos/rust-lang/rust/commits/3dfb224897aa5592f223f5a69ddb9c7cd871398e", "html_url": "https://github.com/rust-lang/rust/commit/3dfb224897aa5592f223f5a69ddb9c7cd871398e"}, {"sha": "665d707b688008cd4775c945834ad6be2e2f532b", "url": "https://api.github.com/repos/rust-lang/rust/commits/665d707b688008cd4775c945834ad6be2e2f532b", "html_url": "https://github.com/rust-lang/rust/commit/665d707b688008cd4775c945834ad6be2e2f532b"}], "stats": {"total": 47, "additions": 28, "deletions": 19}, "files": [{"sha": "712454d5048d19171ad57172d003d423d56036e0", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -697,6 +697,7 @@ impl<'a> Builder<'a> {\n                 doc::RustcBook,\n                 doc::CargoBook,\n                 doc::Clippy,\n+                doc::ClippyBook,\n                 doc::Miri,\n                 doc::EmbeddedBook,\n                 doc::EditionGuide,"}, {"sha": "2852442d0be6fbb7986a84f211a84a6494cde744", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -74,6 +74,7 @@ macro_rules! book {\n // and checking against it?).\n book!(\n     CargoBook, \"src/tools/cargo/src/doc\", \"cargo\", submodule = \"src/tools/cargo\";\n+    ClippyBook, \"src/tools/clippy/book\", \"clippy\";\n     EditionGuide, \"src/doc/edition-guide\", \"edition-guide\", submodule;\n     EmbeddedBook, \"src/doc/embedded-book\", \"embedded-book\", submodule;\n     Nomicon, \"src/doc/nomicon\", \"nomicon\", submodule;"}, {"sha": "b77790e33b70af785b9c3444fd87fc344d08c564", "filename": "src/doc/index.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fdoc%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Fdoc%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Findex.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -93,6 +93,10 @@ accomplishing various tasks.\n \n [The Rustdoc Book](rustdoc/index.html) describes our documentation tool, `rustdoc`.\n \n+## The Clippy Book\n+\n+[The Clippy Book](clippy/index.html) describes our static analyzer, Clippy.\n+\n ## Extended Error Listing\n \n Many of Rust's errors come with error codes, and you can request extended"}, {"sha": "6248d588a890b9dc13038eaa051ca56cd46d18b6", "filename": "src/tools/clippy/book/src/README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2FREADME.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -1,7 +1,7 @@\n # Clippy\n \n [![Clippy Test](https://github.com/rust-lang/rust-clippy/workflows/Clippy%20Test/badge.svg?branch=auto&event=push)](https://github.com/rust-lang/rust-clippy/actions?query=workflow%3A%22Clippy+Test%22+event%3Apush+branch%3Aauto)\n-[![License: MIT OR Apache-2.0](https://img.shields.io/crates/l/clippy.svg)](#license)\n+[![License: MIT OR Apache-2.0](https://img.shields.io/crates/l/clippy.svg)](https://github.com/rust-lang/rust-clippy#license)\n \n A collection of lints to catch common mistakes and improve your\n [Rust](https://github.com/rust-lang/rust) code."}, {"sha": "d06297f2e079a23b077f08e5b7bbf5d58f0d0f67", "filename": "src/tools/clippy/book/src/development/adding_lints.md", "status": "modified", "additions": 18, "deletions": 15, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fadding_lints.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fadding_lints.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fadding_lints.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -13,7 +13,6 @@ because that's clearly a non-descriptive name.\n   - [Testing](#testing)\n     - [Cargo lints](#cargo-lints)\n   - [Rustfix tests](#rustfix-tests)\n-  - [Edition 2018 tests](#edition-2018-tests)\n   - [Testing manually](#testing-manually)\n   - [Lint declaration](#lint-declaration)\n   - [Lint registration](#lint-registration)\n@@ -402,9 +401,8 @@ need to ensure that the MSRV configured for the project is >= the MSRV of the\n required Rust feature. If multiple features are required, just use the one with\n a lower MSRV.\n \n-First, add an MSRV alias for the required feature in\n-[`clippy_utils::msrvs`](/clippy_utils/src/msrvs.rs). This can be accessed later\n-as `msrvs::STR_STRIP_PREFIX`, for example.\n+First, add an MSRV alias for the required feature in [`clippy_utils::msrvs`].\n+This can be accessed later as `msrvs::STR_STRIP_PREFIX`, for example.\n \n ```rust\n msrv_aliases! {\n@@ -468,6 +466,8 @@ define_Conf! {\n }\n ```\n \n+[`clippy_utils::msrvs`]: https://doc.rust-lang.org/nightly/nightly-rustc/clippy_utils/msrvs/index.html\n+\n ## Author lint\n \n If you have trouble implementing your lint, there is also the internal `author`\n@@ -583,8 +583,7 @@ the workspace directory. Adding a configuration to a lint can be useful for\n thresholds or to constrain some behavior that can be seen as a false positive\n for some users. Adding a configuration is done in the following steps:\n \n-1. Adding a new configuration entry to\n-   [clippy_lints::utils::conf](/clippy_lints/src/utils/conf.rs) like this:\n+1. Adding a new configuration entry to [`clippy_lints::utils::conf`] like this:\n \n    ```rust\n    /// Lint: LINT_NAME.\n@@ -635,9 +634,9 @@ for some users. Adding a configuration is done in the following steps:\n        ```\n 3. Passing the configuration value to the lint impl struct:\n \n-   First find the struct construction in the [clippy_lints lib\n-   file](/clippy_lints/src/lib.rs). The configuration value is now cloned or\n-   copied into a local value that is then passed to the impl struct like this:\n+   First find the struct construction in the [`clippy_lints` lib file]. The\n+   configuration value is now cloned or copied into a local value that is then\n+   passed to the impl struct like this:\n \n    ```rust\n    // Default generated registration:\n@@ -653,12 +652,16 @@ for some users. Adding a configuration is done in the following steps:\n \n 4. Adding tests:\n     1. The default configured value can be tested like any normal lint in\n-       [`tests/ui`](/tests/ui).\n-    2. The configuration itself will be tested separately in\n-       [`tests/ui-toml`](/tests/ui-toml). Simply add a new subfolder with a\n-       fitting name. This folder contains a `clippy.toml` file with the\n-       configuration value and a rust file that should be linted by Clippy. The\n-       test can otherwise be written as usual.\n+       [`tests/ui`].\n+    2. The configuration itself will be tested separately in [`tests/ui-toml`].\n+       Simply add a new subfolder with a fitting name. This folder contains a\n+       `clippy.toml` file with the configuration value and a rust file that\n+       should be linted by Clippy. The test can otherwise be written as usual.\n+\n+[`clippy_lints::utils::conf`]: https://github.com/rust-lang/rust-clippy/blob/master/clippy_lints/src/utils/conf.rs\n+[`clippy_lints` lib file]: https://github.com/rust-lang/rust-clippy/blob/master/clippy_lints/src/lib.rs\n+[`tests/ui`]: https://github.com/rust-lang/rust-clippy/blob/master/tests/ui\n+[`tests/ui-toml`]: https://github.com/rust-lang/rust-clippy/blob/master/tests/ui-toml\n \n ## Cheat Sheet\n "}, {"sha": "605897ff49cdb4dc42d468e2976cef59e7f8d9d2", "filename": "src/tools/clippy/book/src/development/basics.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fbasics.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fbasics.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fbasics.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -98,7 +98,7 @@ cargo dev setup intellij\n ```\n \n More about intellij command usage and reasons\n-[here](../CONTRIBUTING.md#intellij-rust)\n+[here](https://github.com/rust-lang/rust-clippy/blob/master/CONTRIBUTING.md#intellij-rust)\n \n ## lintcheck\n "}, {"sha": "15e00c7d7ce4c3e56faea6be845039c50dc6f034", "filename": "src/tools/clippy/book/src/development/common_tools_writing_lints.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fcommon_tools_writing_lints.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fcommon_tools_writing_lints.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fdevelopment%2Fcommon_tools_writing_lints.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -276,4 +276,4 @@ functions to deal with macros:\n [LateContext]: https://doc.rust-lang.org/nightly/nightly-rustc/rustc_lint/struct.LateContext.html\n [TyCtxt]: https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html\n [pat_ty]: https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TypeckResults.html#method.pat_ty\n-[paths]: ../clippy_utils/src/paths.rs\n+[paths]: https://doc.rust-lang.org/nightly/nightly-rustc/clippy_utils/paths/index.html"}, {"sha": "5d858e0da46898210058e2e678697b1f56081417", "filename": "src/tools/clippy/book/src/usage.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fusage.md", "raw_url": "https://github.com/rust-lang/rust/raw/0b3644e1f3cd4756a2353b25b0579853351b4a26/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fusage.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fbook%2Fsrc%2Fusage.md?ref=0b3644e1f3cd4756a2353b25b0579853351b4a26", "patch": "@@ -148,4 +148,4 @@ clippy-driver --edition 2018 -Cpanic=abort foo.rs\n > that are not optimized as expected, for example.\n \n [Installation]: installation.md\n-[CI]: continuous_integration\n+[CI]: continuous_integration/index.md"}]}