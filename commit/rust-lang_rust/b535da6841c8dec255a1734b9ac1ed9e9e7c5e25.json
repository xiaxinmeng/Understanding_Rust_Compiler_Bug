{"sha": "b535da6841c8dec255a1734b9ac1ed9e9e7c5e25", "node_id": "C_kwDOAAsO6NoAKGI1MzVkYTY4NDFjOGRlYzI1NWExNzM0YjlhYzFlZDllOWU3YzVlMjU", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2023-03-08T20:57:54Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2023-03-14T13:16:19Z"}, "message": "Get impl defaultness using query", "tree": {"sha": "87343fc675b131343e6c3487df555bad3dd927a8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87343fc675b131343e6c3487df555bad3dd927a8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmQQc6MACgkQgTGiTgx5\n7683wg/9EI3uLGAiUhGlFQgXMzvwwh0eO5eBjRiwyVZ6JsTyZZn5qCJ9zvqY8m6g\nMIXRRx743tAIopMyigSH1C8PdFTcqGNDYyD1Aaof6D7yVV4f54gxVSSMJdHxPgRe\nqVZzwrAYjF4BF97fMdMvlRFWh1Qpw0v6y+ULB2saF9BrIA0wZr5u3pPqlujUrXur\nN7TEXgmNVOrtDNvsvr8fwRDjZhhFgQxRiWrNyEsAnTkiqrXh47e9cfEUmifaWJK/\nyiEEq+Rxow+U71OZbB6t8R3NMN9YKIrUhDVa7C1cFfzgGnAH6ZsBybyZBXFRnvNC\n+M9Sa4++Ah22+daCj1QnUCam/4C/A1UPV0+kQbXoBDgZs5g8BlMmlo/FtUvohuz8\nnpdiY0Hx9M8Z+oA+q+qKgLc8hr0Pga8EBeACb7SR1BL6QNuaQN/EVeXRuqzEVKC/\n5R83KdHq6ukeoSviWYBvShfGvvrmlZxYXx1ZZbdO0Dh4d6xSoURmSU920djY8P7s\naVsQm6kKNwlifcYBzuus4WIpoCkD4YfCPBHB5uov21ZLv4XqNCSSvjTjXc/Q8b7M\noFEifDOfBUaaPVC0mz1TUQyJic2hLDYxBJMpX1hFoEMrGsnRN6rlAPiGSGVR5o6l\nYU60TFrqg+JjzNjHWl4/TNuPF3g9M6+XcfwjQ8Qnuq3M+UQ3mUM=\n=pa40\n-----END PGP SIGNATURE-----", "payload": "tree 87343fc675b131343e6c3487df555bad3dd927a8\nparent 0058748944abb3282aba0e0a74823c6411703565\nauthor Santiago Pastorino <spastorino@gmail.com> 1678309074 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1678799779 -0300\n\nGet impl defaultness using query\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25", "html_url": "https://github.com/rust-lang/rust/commit/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0058748944abb3282aba0e0a74823c6411703565", "url": "https://api.github.com/repos/rust-lang/rust/commits/0058748944abb3282aba0e0a74823c6411703565", "html_url": "https://github.com/rust-lang/rust/commit/0058748944abb3282aba0e0a74823c6411703565"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "59e2e57e6c25a2d6ebf3c0e57247224c15f5b670", "filename": "compiler/rustc_metadata/src/rmeta/encoder.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b535da6841c8dec255a1734b9ac1ed9e9e7c5e25/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs?ref=b535da6841c8dec255a1734b9ac1ed9e9e7c5e25", "patch": "@@ -1356,13 +1356,14 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n         debug!(\"EncodeContext::encode_info_for_impl_item({:?})\", def_id);\n         let tcx = self.tcx;\n \n-        let ast_item = self.tcx.hir().expect_impl_item(def_id.expect_local());\n-        self.tables.impl_defaultness.set_some(def_id.index, ast_item.defaultness);\n+        let defaultness = self.tcx.impl_defaultness(def_id.expect_local());\n+        self.tables.impl_defaultness.set_some(def_id.index, defaultness);\n         let impl_item = self.tcx.associated_item(def_id);\n         self.tables.assoc_container.set_some(def_id.index, impl_item.container);\n \n         match impl_item.kind {\n             ty::AssocKind::Fn => {\n+                let ast_item = self.tcx.hir().expect_impl_item(def_id.expect_local());\n                 let hir::ImplItemKind::Fn(ref sig, body) = ast_item.kind else { bug!() };\n                 self.tables.asyncness.set_some(def_id.index, sig.header.asyncness);\n                 record_array!(self.tables.fn_arg_names[def_id] <- self.tcx.hir().body_param_names(body));"}]}