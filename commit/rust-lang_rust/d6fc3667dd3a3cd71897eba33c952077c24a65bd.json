{"sha": "d6fc3667dd3a3cd71897eba33c952077c24a65bd", "node_id": "C_kwDOAAsO6NoAKGQ2ZmMzNjY3ZGQzYTNjZDcxODk3ZWJhMzNjOTUyMDc3YzI0YTY1YmQ", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-03-04T11:06:33Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-04-19T18:55:15Z"}, "message": "Ignore test on MSVC for now\n\nI can't figure out how to link with the MSVC toolchain", "tree": {"sha": "715b9fce4f76f348a8212a711b479a1b7f909095", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/715b9fce4f76f348a8212a711b479a1b7f909095"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d6fc3667dd3a3cd71897eba33c952077c24a65bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d6fc3667dd3a3cd71897eba33c952077c24a65bd", "html_url": "https://github.com/rust-lang/rust/commit/d6fc3667dd3a3cd71897eba33c952077c24a65bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d6fc3667dd3a3cd71897eba33c952077c24a65bd/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83f96e81423b63af89d04899e4710ca883c716f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/83f96e81423b63af89d04899e4710ca883c716f2", "html_url": "https://github.com/rust-lang/rust/commit/83f96e81423b63af89d04899e4710ca883c716f2"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "c3570a4632774a4eb3ee3fbe13660f6c198bc46a", "filename": "tests/run-make/staticlib-dylib-linkage/Makefile", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d6fc3667dd3a3cd71897eba33c952077c24a65bd/tests%2Frun-make%2Fstaticlib-dylib-linkage%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/d6fc3667dd3a3cd71897eba33c952077c24a65bd/tests%2Frun-make%2Fstaticlib-dylib-linkage%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fstaticlib-dylib-linkage%2FMakefile?ref=d6fc3667dd3a3cd71897eba33c952077c24a65bd", "patch": "@@ -1,5 +1,7 @@\n include ../tools.mk\n \n+# ignore-msvc FIXME(bjorn3) can't figure out how to link with the MSVC toolchain\n+\n all:\n \t$(RUSTC) -C prefer-dynamic bar.rs\n \t$(RUSTC) foo.rs --crate-type staticlib --print native-static-libs \\\n@@ -8,7 +10,8 @@ all:\n \tcat $(TMPDIR)/libs.txt\n \n ifdef IS_MSVC\n-\t$(CC) $(CFLAGS) foo.c $(TMPDIR)/foo.lib $$(cat $(TMPDIR)/libs.txt) $(call OUT_EXE,foo)\n+\t$(CC) $(CFLAGS) /c foo.c /Fo:$(TMPDIR)/foo.o\n+\t$(RUSTC_LINKER) $(TMPDIR)/foo.o $(TMPDIR)/foo.lib $$(cat $(TMPDIR)/libs.txt) $(call OUT_EXE,foo)\n else\n \t$(CC) $(CFLAGS) foo.c -L $(TMPDIR) -lfoo $$(cat $(TMPDIR)/libs.txt) -o $(call RUN_BINFILE,foo)\n endif"}]}