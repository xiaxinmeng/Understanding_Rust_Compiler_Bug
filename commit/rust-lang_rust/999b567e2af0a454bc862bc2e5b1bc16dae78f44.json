{"sha": "999b567e2af0a454bc862bc2e5b1bc16dae78f44", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5OWI1NjdlMmFmMGE0NTRiYzg2MmJjMmU1YjFiYzE2ZGFlNzhmNDQ=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-06-26T21:15:48Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-06-26T21:39:49Z"}, "message": "rustdoc: Work around some more metadata infelicities", "tree": {"sha": "8af28fbb3d69d317fd47db9c54726b22e5c497fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8af28fbb3d69d317fd47db9c54726b22e5c497fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/999b567e2af0a454bc862bc2e5b1bc16dae78f44", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/999b567e2af0a454bc862bc2e5b1bc16dae78f44", "html_url": "https://github.com/rust-lang/rust/commit/999b567e2af0a454bc862bc2e5b1bc16dae78f44", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/999b567e2af0a454bc862bc2e5b1bc16dae78f44/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d4672a078e62ca4c28e459fa541886b5b180cc9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d4672a078e62ca4c28e459fa541886b5b180cc9a", "html_url": "https://github.com/rust-lang/rust/commit/d4672a078e62ca4c28e459fa541886b5b180cc9a"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "f1a702c9df839f6292fe8e689a350e9a556d0e99", "filename": "src/rustdoc/astsrv.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/999b567e2af0a454bc862bc2e5b1bc16dae78f44/src%2Frustdoc%2Fastsrv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/999b567e2af0a454bc862bc2e5b1bc16dae78f44/src%2Frustdoc%2Fastsrv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fastsrv.rs?ref=999b567e2af0a454bc862bc2e5b1bc16dae78f44", "patch": "@@ -9,6 +9,7 @@\n \n import std::map::hashmap;\n import rustc::driver::session;\n+import session::{basic_options, options};\n import session::session;\n import rustc::driver::driver;\n import syntax::diagnostic;\n@@ -37,7 +38,7 @@ type ctxt = {\n \n type srv_owner<T> = fn(srv: srv) -> T;\n type ctxt_handler<T> = fn~(ctxt: ctxt) -> T;\n-type parser = fn~(session::session, str) -> @ast::crate;\n+type parser = fn~(session, str) -> @ast::crate;\n \n enum msg {\n     handle_request(fn~(ctxt)),\n@@ -104,7 +105,8 @@ fn exec<T:send>(\n     comm::recv(po)\n }\n \n-fn build_ctxt(sess: session::session, ast: @ast::crate,\n+fn build_ctxt(sess: session,\n+              ast: @ast::crate,\n               ignore_errors: @mut bool) -> ctxt {\n \n     import rustc::front::config;\n@@ -124,8 +126,8 @@ fn build_ctxt(sess: session::session, ast: @ast::crate,\n     }\n }\n \n-fn build_session() -> (session::session, @mut bool) {\n-    let sopts: @session::options = session::basic_options();\n+fn build_session() -> (session, @mut bool) {\n+    let sopts: @options = basic_options();\n     let codemap = codemap::new_codemap();\n     let error_handlers = build_error_handlers(codemap);\n     let {emitter, span_handler, ignore_errors} = error_handlers;"}]}