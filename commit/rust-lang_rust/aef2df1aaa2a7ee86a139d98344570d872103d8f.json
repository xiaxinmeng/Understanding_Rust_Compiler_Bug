{"sha": "aef2df1aaa2a7ee86a139d98344570d872103d8f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlZjJkZjFhYWEyYTdlZTg2YTEzOWQ5ODM0NDU3MGQ4NzIxMDNkOGY=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-18T18:21:05Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-02-01T17:59:49Z"}, "message": "fix fallout in tests", "tree": {"sha": "a4c09053ecf5321dd79ab4434407d58dccd4e702", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4c09053ecf5321dd79ab4434407d58dccd4e702"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aef2df1aaa2a7ee86a139d98344570d872103d8f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aef2df1aaa2a7ee86a139d98344570d872103d8f", "html_url": "https://github.com/rust-lang/rust/commit/aef2df1aaa2a7ee86a139d98344570d872103d8f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aef2df1aaa2a7ee86a139d98344570d872103d8f/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0838462cf9dc05569ee2759f47928f96f6c4831", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0838462cf9dc05569ee2759f47928f96f6c4831", "html_url": "https://github.com/rust-lang/rust/commit/a0838462cf9dc05569ee2759f47928f96f6c4831"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "49b9a1b1025abdf88b6ed7e15d55f17943baec7f", "filename": "src/librustc_expand/mut_visit/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fmut_visit%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fmut_visit%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fmut_visit%2Ftests.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -1,8 +1,8 @@\n use crate::tests::{matches_codepattern, string_to_crate};\n \n+use rustc_ast_pretty::pprust;\n use syntax::ast::{self, Ident};\n use syntax::mut_visit::{self, MutVisitor};\n-use syntax::print::pprust;\n use syntax::with_default_globals;\n \n // This version doesn't care about getting comments or doc-strings in."}, {"sha": "c486839dad506864c48ffd1c16a465b08b863af8", "filename": "src/librustc_expand/parse/lexer/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fparse%2Flexer%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fparse%2Flexer%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fparse%2Flexer%2Ftests.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -1,10 +1,10 @@\n use rustc_data_structures::sync::Lrc;\n use rustc_errors::{emitter::EmitterWriter, Handler};\n use rustc_parse::lexer::StringReader;\n+use rustc_session::parse::ParseSess;\n use rustc_span::source_map::{FilePathMapping, SourceMap};\n use rustc_span::symbol::Symbol;\n use rustc_span::{BytePos, Span};\n-use syntax::sess::ParseSess;\n use syntax::token::{self, Token, TokenKind};\n use syntax::util::comments::is_doc_comment;\n use syntax::with_default_globals;"}, {"sha": "3641f03cb30c5802c0d6c1719f25e062c1a0b9b8", "filename": "src/librustc_expand/parse/tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fparse%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Fparse%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fparse%2Ftests.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -1,14 +1,14 @@\n use crate::tests::{matches_codepattern, string_to_stream, with_error_checking_parse};\n \n+use rustc_ast_pretty::pprust::item_to_string;\n use rustc_errors::PResult;\n use rustc_parse::new_parser_from_source_str;\n+use rustc_session::parse::ParseSess;\n use rustc_span::source_map::FilePathMapping;\n use rustc_span::symbol::{kw, sym, Symbol};\n use rustc_span::{BytePos, FileName, Pos, Span};\n use syntax::ast::{self, Name, PatKind};\n-use syntax::print::pprust::item_to_string;\n use syntax::ptr::P;\n-use syntax::sess::ParseSess;\n use syntax::token::{self, Token};\n use syntax::tokenstream::{DelimSpan, TokenStream, TokenTree};\n use syntax::visit;"}, {"sha": "4ed60465f24f2832bd891212ff7979ddaf22517e", "filename": "src/librustc_expand/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Flibrustc_expand%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Ftests.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -1,8 +1,8 @@\n use rustc_parse::{new_parser_from_source_str, parser::Parser, source_file_to_stream};\n+use rustc_session::parse::ParseSess;\n use rustc_span::source_map::{FilePathMapping, SourceMap};\n use rustc_span::{BytePos, MultiSpan, Span};\n use syntax::ast;\n-use syntax::sess::ParseSess;\n use syntax::tokenstream::TokenStream;\n use syntax::with_default_globals;\n "}, {"sha": "fbdad29d6494f23e98b933d996463528542c1e68", "filename": "src/test/ui-fulldeps/auxiliary/issue-40001-plugin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Fissue-40001-plugin.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -1,20 +1,21 @@\n #![feature(box_syntax, plugin, plugin_registrar, rustc_private)]\n #![crate_type = \"dylib\"]\n \n+extern crate rustc_ast_pretty;\n extern crate rustc_driver;\n extern crate rustc_hir;\n #[macro_use] extern crate rustc_lint;\n #[macro_use] extern crate rustc_session;\n extern crate rustc_span;\n extern crate syntax;\n \n+use rustc_ast_pretty::pprust;\n use rustc_hir::intravisit;\n use rustc_hir as hir;\n use rustc_hir::Node;\n use rustc_lint::{LateContext, LintPass, LintArray, LateLintPass, LintContext};\n use rustc_driver::plugin::Registry;\n use rustc_span::source_map;\n-use syntax::print::pprust;\n \n #[plugin_registrar]\n pub fn plugin_registrar(reg: &mut Registry) {"}, {"sha": "be4b49ada02c749efa62df4805e740d5b6eafc85", "filename": "src/test/ui-fulldeps/mod_dir_path_canonicalized.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fmod_dir_path_canonicalized.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fmod_dir_path_canonicalized.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fmod_dir_path_canonicalized.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -6,12 +6,13 @@\n \n extern crate syntax;\n extern crate rustc_parse;\n+extern crate rustc_session;\n extern crate rustc_span;\n \n use rustc_parse::new_parser_from_file;\n+use rustc_session::parse::ParseSess;\n use rustc_span::source_map::FilePathMapping;\n use std::path::Path;\n-use syntax::sess::ParseSess;\n \n #[path = \"mod_dir_simple/test.rs\"]\n mod gravy;"}, {"sha": "0f6a88b2691a86fab74ee22bdd9e6b1d38f36f08", "filename": "src/test/ui-fulldeps/pprust-expr-roundtrip.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fpprust-expr-roundtrip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef2df1aaa2a7ee86a139d98344570d872103d8f/src%2Ftest%2Fui-fulldeps%2Fpprust-expr-roundtrip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fpprust-expr-roundtrip.rs?ref=aef2df1aaa2a7ee86a139d98344570d872103d8f", "patch": "@@ -19,19 +19,21 @@\n \n #![feature(rustc_private)]\n \n+extern crate rustc_ast_pretty;\n extern crate rustc_data_structures;\n extern crate syntax;\n extern crate rustc_parse;\n+extern crate rustc_session;\n extern crate rustc_span;\n \n+use rustc_ast_pretty::pprust;\n use rustc_data_structures::thin_vec::ThinVec;\n use rustc_parse::new_parser_from_source_str;\n+use rustc_session::parse::ParseSess;\n use rustc_span::source_map::{Spanned, DUMMY_SP, FileName};\n use rustc_span::source_map::FilePathMapping;\n use syntax::ast::*;\n-use syntax::sess::ParseSess;\n use syntax::mut_visit::{self, MutVisitor, visit_clobber};\n-use syntax::print::pprust;\n use syntax::ptr::P;\n \n fn parse_expr(ps: &ParseSess, src: &str) -> Option<P<Expr>> {"}]}