{"sha": "2e3a8f51595e3af985425520f1cba1bce4423979", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlM2E4ZjUxNTk1ZTNhZjk4NTQyNTUyMGYxY2JhMWJjZTQ0MjM5Nzk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-02T08:29:19Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-02T14:48:45Z"}, "message": "Rollup merge of #47898 - Aaron1011:static-ref-nll, r=nikomatsakis Fix ICE when assigning references to a static mut with NLL is_unsafe_place only filters out statics in the rhs, not the lhs. Since it's possible to reach that 'Place::Static', we handle statics the same way as we do locals. Fixes #47789", "tree": {"sha": "e4ef8c7cd850d6bbb39f3749abbc834bb67f2d74", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4ef8c7cd850d6bbb39f3749abbc834bb67f2d74"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e3a8f51595e3af985425520f1cba1bce4423979", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlp0ek0ACgkQ/vbIBR0O\nATxSHxAAwziBYYixEC+E61lPx0VnJx00KzrZG9I4gf2sSM6wdFrr6yGdlGhov5s8\nGWcmfWXWiyQHD9gicidn1cY06+sb/Y10N5co8oJtR8IRKMqlwLkgcSrxc+ngY04F\nXfyjhVD025EUnoqf6FMWeWC8g7LUBaClxMF49ZK1Zc9GYCerF9U8gpnmRiKVv8/u\nTauGIhVMX9UmVKdWG1o3Q6ixh/khTOq7v1A+84acLLNMzWRB46gEbTrLn+LAN8du\nmkWM9t7Z27FBu4YJ/96zlF6w8pMjYKemSRUJ4q5qR7Hu2lT2fpDzBGA42cGbSsHb\n3j5+eVAnqBZQyQMVDsths9e+3No/Fl1Ibv+YIYfN+p1FnK66puzd0v5VM93Gu4U7\ngUa4bTJJM448g5L8br31WZS9lY9AHaRNkF4m2j9iLKowDyU7Qw5ExZEmhlQip+hW\ndlLeOQnHUSL6ZRGj6I2zcjO2I8qPBIMAmPR545z3n6ocY3wkbqXDSyxRQ5yztsLq\nBseERZIVtmqcaKtervAlwEDM3rL789OOBvLpbx5C/LZfkToTFkapdzVnXIsA+vwe\n+/0Sli6iLluC7X1HzcqC8yuR6zMrojm71mYZ4UvQElHBrCybe5JBCw6wprJJ9Bl3\nbk4Mlox8wcK2l01CLobc25Eoi3YMAXz6ihLBi+iESIJWhZXZII4=\n=zYv9\n-----END PGP SIGNATURE-----", "payload": "tree e4ef8c7cd850d6bbb39f3749abbc834bb67f2d74\nparent a6719446c07281863eefe9dec198cb70e0f8685f\nparent bc8e11b975030c4282f4b76200a104788f8ac5c8\nauthor kennytm <kennytm@gmail.com> 1517560159 +0800\ncommitter kennytm <kennytm@gmail.com> 1517582925 +0800\n\nRollup merge of #47898 - Aaron1011:static-ref-nll, r=nikomatsakis Fix ICE when assigning references to a static mut with NLL is_unsafe_place only filters out statics in the rhs, not the lhs. Since it's possible to reach that 'Place::Static', we handle statics the same way as we do locals. Fixes #47789\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e3a8f51595e3af985425520f1cba1bce4423979", "html_url": "https://github.com/rust-lang/rust/commit/2e3a8f51595e3af985425520f1cba1bce4423979", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e3a8f51595e3af985425520f1cba1bce4423979/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a6719446c07281863eefe9dec198cb70e0f8685f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a6719446c07281863eefe9dec198cb70e0f8685f", "html_url": "https://github.com/rust-lang/rust/commit/a6719446c07281863eefe9dec198cb70e0f8685f"}, {"sha": "bc8e11b975030c4282f4b76200a104788f8ac5c8", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc8e11b975030c4282f4b76200a104788f8ac5c8", "html_url": "https://github.com/rust-lang/rust/commit/bc8e11b975030c4282f4b76200a104788f8ac5c8"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "80990bcc080891ef93478a602019248137560710", "filename": "src/librustc_mir/dataflow/impls/borrows.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2e3a8f51595e3af985425520f1cba1bce4423979/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e3a8f51595e3af985425520f1cba1bce4423979/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrows.rs?ref=2e3a8f51595e3af985425520f1cba1bce4423979", "patch": "@@ -396,8 +396,7 @@ impl<'a, 'gcx, 'tcx> Borrows<'a, 'gcx, 'tcx> {\n                         // Issue #46746: Two-phase borrows handles\n                         // stmts of form `Tmp = &mut Borrow` ...\n                         match lhs {\n-                            Place::Local(..) => {} // okay\n-                            Place::Static(..) => unreachable!(), // (filtered by is_unsafe_place)\n+                            Place::Local(..) | Place::Static(..) => {} // okay\n                             Place::Projection(..) => {\n                                 // ... can assign into projections,\n                                 // e.g. `box (&mut _)`. Current"}, {"sha": "3148939992caf49645dd8ea98518c336b91bb211", "filename": "src/test/run-pass/issue-47789.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/2e3a8f51595e3af985425520f1cba1bce4423979/src%2Ftest%2Frun-pass%2Fissue-47789.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e3a8f51595e3af985425520f1cba1bce4423979/src%2Ftest%2Frun-pass%2Fissue-47789.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-47789.rs?ref=2e3a8f51595e3af985425520f1cba1bce4423979", "patch": "@@ -0,0 +1,20 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+\n+#![feature(nll)]\n+\n+static mut x: &'static u32 = &0;\n+\n+fn foo() {\n+    unsafe { x = &1; }\n+}\n+\n+fn main() { }"}]}