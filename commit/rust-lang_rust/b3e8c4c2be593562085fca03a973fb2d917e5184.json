{"sha": "b3e8c4c2be593562085fca03a973fb2d917e5184", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzZThjNGMyYmU1OTM1NjIwODVmY2EwM2E5NzNmYjJkOTE3ZTUxODQ=", "commit": {"author": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2016-10-25T14:00:16Z"}, "committer": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2016-10-25T14:00:16Z"}, "message": "Print out the error when HeapFree failures do occur", "tree": {"sha": "7a2d43f748d5c81624747281d3ebcbdff5114fe0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a2d43f748d5c81624747281d3ebcbdff5114fe0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3e8c4c2be593562085fca03a973fb2d917e5184", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQEcBAABCAAGBQJYD2V5AAoJEN4E2eJ1WbyKE+MIAIIa4j5GzePPT1CUrcmLdOrz\n+oP3vzLIk2zZHPI531PjlTlp9mRalZ7JaPsKlRDeQoTSyo0hq1UiFEeEnwafmzhY\n2Tkin95B+ER0I3M8CxBqdGDN6bqqHyXAEKSLtcIwEV/JeOfS3WD6vJznEaghUcp6\nZc66vP0fgNQlY36Imdzpp3PkTLYtdsanOdC5zddMAMr8YMvVV/hRbEWfzxTZuGjz\n4ii1ms4exJ2qb6rTLEmkmcP41D2VigkXV/j7lkBCADVhIFjX7yZM7HsYKRTVxgg0\n2PzCopBEk/ed5eRkIHr+6kBrTE4rmQ2HRBmzuQ2BQ1l9//5LEovs6YXEID0O1Kc=\n=9hZG\n-----END PGP SIGNATURE-----", "payload": "tree 7a2d43f748d5c81624747281d3ebcbdff5114fe0\nparent affc3b7552324284ccd7042b5b23f6ecd391babc\nauthor Peter Atashian <retep998@gmail.com> 1477404016 -0400\ncommitter Peter Atashian <retep998@gmail.com> 1477404016 -0400\n\nPrint out the error when HeapFree failures do occur\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3e8c4c2be593562085fca03a973fb2d917e5184", "html_url": "https://github.com/rust-lang/rust/commit/b3e8c4c2be593562085fca03a973fb2d917e5184", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3e8c4c2be593562085fca03a973fb2d917e5184/comments", "author": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "committer": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "affc3b7552324284ccd7042b5b23f6ecd391babc", "url": "https://api.github.com/repos/rust-lang/rust/commits/affc3b7552324284ccd7042b5b23f6ecd391babc", "html_url": "https://github.com/rust-lang/rust/commit/affc3b7552324284ccd7042b5b23f6ecd391babc"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "a4fabb5a2c96dbd69dc39340f1bdfb8ffea8250a", "filename": "src/liballoc_system/lib.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b3e8c4c2be593562085fca03a973fb2d917e5184/src%2Fliballoc_system%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3e8c4c2be593562085fca03a973fb2d917e5184/src%2Fliballoc_system%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc_system%2Flib.rs?ref=b3e8c4c2be593562085fca03a973fb2d917e5184", "patch": "@@ -166,6 +166,7 @@ mod imp {\n         fn HeapAlloc(hHeap: HANDLE, dwFlags: DWORD, dwBytes: SIZE_T) -> LPVOID;\n         fn HeapReAlloc(hHeap: HANDLE, dwFlags: DWORD, lpMem: LPVOID, dwBytes: SIZE_T) -> LPVOID;\n         fn HeapFree(hHeap: HANDLE, dwFlags: DWORD, lpMem: LPVOID) -> BOOL;\n+        fn GetLastError() -> DWORD;\n     }\n \n     #[repr(C)]\n@@ -230,11 +231,11 @@ mod imp {\n     pub unsafe fn deallocate(ptr: *mut u8, _old_size: usize, align: usize) {\n         if align <= MIN_ALIGN {\n             let err = HeapFree(GetProcessHeap(), 0, ptr as LPVOID);\n-            debug_assert!(err != 0);\n+            debug_assert!(err != 0, \"Failed to free heap memory: {}\", GetLastError());\n         } else {\n             let header = get_header(ptr);\n             let err = HeapFree(GetProcessHeap(), 0, header.0 as LPVOID);\n-            debug_assert!(err != 0);\n+            debug_assert!(err != 0, \"Failed to free heap memory: {}\", GetLastError());\n         }\n     }\n "}]}