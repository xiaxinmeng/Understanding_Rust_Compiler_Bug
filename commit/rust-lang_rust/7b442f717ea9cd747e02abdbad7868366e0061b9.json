{"sha": "7b442f717ea9cd747e02abdbad7868366e0061b9", "node_id": "C_kwDOAAsO6NoAKDdiNDQyZjcxN2VhOWNkNzQ3ZTAyYWJkYmFkNzg2ODM2NmUwMDYxYjk", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-06-22T06:16:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-22T06:16:08Z"}, "message": "Rollup merge of #95446 - notseanray:master, r=Mark-Simulacrum\n\nupdate CPU usage script\n\nI've made slight changes to the CPU usage plot script with updated links from the [ci2 aws instance](https://rust-lang-ci2.s3.amazonaws.com/).", "tree": {"sha": "988b490e9d019ece30e57bb4f2412aaa1634a4d5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/988b490e9d019ece30e57bb4f2412aaa1634a4d5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7b442f717ea9cd747e02abdbad7868366e0061b9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJisrOoCRBK7hj4Ov3rIwAAZxoIAEqJWTsl/4QNhEqWSHIO2mB1\nA4zck1SxCIDH0wGGh1THCMUp3IRkPEdRlQPAFdzUc1q5bOBG3ZqNw2Ce6RwQd4GZ\nHbSnSoTWvo1UdyPjdNFqMwsHb0Dy5Ork6KFb1JUntfytldIE/u4V3LAuASFIUI5g\nAQk10rDQQqp3PM/OrHBS5+MzxlbkjG+RF7VJomNVz82v66JHJflAbp+Ncpxa/ih6\nxU/y21hxIElpegwbyy4/Xp5rc3tOlPdEMUYj2v3DT+0WF++zFNR4jH2IGWdJHa5D\nzlz1zY1wfeSS3xP3itKDvTPllv3w9hyK+pv5aNKicpVloOk1Kd4wutPCVrzlD60=\n=Q9pL\n-----END PGP SIGNATURE-----\n", "payload": "tree 988b490e9d019ece30e57bb4f2412aaa1634a4d5\nparent 3d829a0922d865d7a77fb284424fd8ba6afaea3b\nparent 8eb7ddfd17f42bba493e4e86e44236fcba6d8ead\nauthor Yuki Okushi <jtitor@2k36.org> 1655878568 +0900\ncommitter GitHub <noreply@github.com> 1655878568 +0900\n\nRollup merge of #95446 - notseanray:master, r=Mark-Simulacrum\n\nupdate CPU usage script\n\nI've made slight changes to the CPU usage plot script with updated links from the [ci2 aws instance](https://rust-lang-ci2.s3.amazonaws.com/).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7b442f717ea9cd747e02abdbad7868366e0061b9", "html_url": "https://github.com/rust-lang/rust/commit/7b442f717ea9cd747e02abdbad7868366e0061b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7b442f717ea9cd747e02abdbad7868366e0061b9/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d829a0922d865d7a77fb284424fd8ba6afaea3b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d829a0922d865d7a77fb284424fd8ba6afaea3b", "html_url": "https://github.com/rust-lang/rust/commit/3d829a0922d865d7a77fb284424fd8ba6afaea3b"}, {"sha": "8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "url": "https://api.github.com/repos/rust-lang/rust/commits/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead", "html_url": "https://github.com/rust-lang/rust/commit/8eb7ddfd17f42bba493e4e86e44236fcba6d8ead"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "1c34255919434528778692442631789887f6ba58", "filename": "src/etc/cpu-usage-over-time-plot.sh", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/7b442f717ea9cd747e02abdbad7868366e0061b9/src%2Fetc%2Fcpu-usage-over-time-plot.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7b442f717ea9cd747e02abdbad7868366e0061b9/src%2Fetc%2Fcpu-usage-over-time-plot.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcpu-usage-over-time-plot.sh?ref=7b442f717ea9cd747e02abdbad7868366e0061b9", "patch": "@@ -7,13 +7,21 @@\n # commit SHA of the build you're interested in, and the second is the name of\n # the builder. For example:\n #\n-#  ./src/etc/cpu-usage-over-time-plot.sh e699ea096fcc2fc9ce8e8bcf884e11496a31cc9f i686-mingw-1\n+#  ./src/etc/cpu-usage-over-time-plot.sh 7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c x86_64-gnu\n #\n # That will generate `$builder.png` in the current directory which you can open\n # up to see a hopefully pretty graph.\n #\n # Improvements to this script are greatly appreciated!\n \n+if [[ $# != 2 ]]; then\n+    echo \"expected 2 arguments, recieved $#\"\n+    echo \"example usage: './src/etc/cpu-usage-over-time-plot.sh \\\n+7737e0b5c4103216d6fd8cf941b7ab9bdbaace7c \\\n+x86_64-gnu'\"\n+    exit 1\n+fi\n+\n set -ex\n \n bucket=rust-lang-ci2\n@@ -30,7 +38,7 @@ set ylabel \"CPU Usage %\"\n set xlabel \"Time\"\n set datafile sep ','\n set term png size 3000,1000\n-set output \"$builder.png\"\n+set output \"$builder-$commit-cpu-usage-plot.png\"\n set grid\n \n f(x) = mean_y\n@@ -43,7 +51,9 @@ set ytics 10\n set boxwidth 0.5\n \n plot \\\\\n-   mean_y with lines linetype 1 linecolor rgb \"#ff0000\" title \"average\", \\\\\n-   \"cpu-$builder.csv\" using 1:(100-\\$2) with points pointtype 7 pointsize 0.4 title \"$builder\", \\\\\n-   \"\" using 1:(100-\\$2) smooth bezier linewidth 3 title \"bezier\"\n+    mean_y with lines linetype 1 linecolor rgb \"#ff0000\" title \"average\", \"cpu-$builder.csv\" \\\\\n+    using 1:(100-\\$2) with points pointtype 7 pointsize 0.4 title \"$builder\", \"\" \\\\\n+    using 1:(100-\\$2) smooth bezier linewidth 3 title \"bezier\"\n EOF\n+\n+rm \"cpu-$builder.csv\""}]}