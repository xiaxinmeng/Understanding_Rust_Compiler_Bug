{"sha": "2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmODRiZmM1N2RkMGVmMjIyNjliYjg0ZGFlMTBmNzFlNWUyM2U4NWQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-09-24T07:19:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-09-24T07:19:39Z"}, "message": "Auto merge of #1561 - RalfJung:rustup, r=RalfJung\n\nrustup; fix tests", "tree": {"sha": "9c60082f355b97531e865d814bd7eca1f135f1dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c60082f355b97531e865d814bd7eca1f135f1dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "html_url": "https://github.com/rust-lang/rust/commit/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "462243ef5a3cb75fb3bf134d90293a9e8f7facab", "url": "https://api.github.com/repos/rust-lang/rust/commits/462243ef5a3cb75fb3bf134d90293a9e8f7facab", "html_url": "https://github.com/rust-lang/rust/commit/462243ef5a3cb75fb3bf134d90293a9e8f7facab"}, {"sha": "67c5067a2fa80ce5609ec4dbb833460efeacd30a", "url": "https://api.github.com/repos/rust-lang/rust/commits/67c5067a2fa80ce5609ec4dbb833460efeacd30a", "html_url": "https://github.com/rust-lang/rust/commit/67c5067a2fa80ce5609ec4dbb833460efeacd30a"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "835708a42baa88d769ec83e8c95f945ff15a0649", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -1 +1 @@\n-a6008fac97f81a3fc51668b0c7fa0e2e6f2a599b\n+78a089487b5f6d5e4205ac4500410b442857bced"}, {"sha": "852a0660217ee585a773fb61f2b111193c84ab82", "filename": "tests/compile-fail/alloc/deallocate-bad-alignment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-alignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-alignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-alignment.rs?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -1,6 +1,6 @@\n use std::alloc::{alloc, dealloc, Layout};\n \n-// error-pattern: allocation has size 1 and alignment 1, but gave size 1 and alignment 2\n+// error-pattern: has size 1 and alignment 1, but gave size 1 and alignment 2\n \n fn main() {\n     unsafe {"}, {"sha": "167cc015c2da9b1e04097592ba6ad1d4003e00ae", "filename": "tests/compile-fail/alloc/deallocate-bad-size.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Falloc%2Fdeallocate-bad-size.rs?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -1,6 +1,6 @@\n use std::alloc::{alloc, dealloc, Layout};\n \n-// error-pattern: allocation has size 1 and alignment 1, but gave size 2 and alignment 1\n+// error-pattern: has size 1 and alignment 1, but gave size 2 and alignment 1\n \n fn main() {\n     unsafe {"}, {"sha": "80239015dc1d019cbc9e94a4d23cfef19225b45d", "filename": "tests/compile-fail/alloc/reallocate-bad-size.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Freallocate-bad-size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Freallocate-bad-size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Falloc%2Freallocate-bad-size.rs?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -1,6 +1,6 @@\n use std::alloc::{alloc, realloc, Layout};\n \n-// error-pattern: allocation has size 1 and alignment 1, but gave size 2 and alignment 1\n+// error-pattern: has size 1 and alignment 1, but gave size 2 and alignment 1\n \n fn main() {\n     unsafe {"}, {"sha": "d854fa993a79f35ab59f015c3967c990e955384a", "filename": "tests/compile-fail/alloc/stack_free.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fstack_free.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Fcompile-fail%2Falloc%2Fstack_free.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Falloc%2Fstack_free.rs?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -1,7 +1,7 @@\n // Validation/SB changes why we fail\n // compile-flags: -Zmiri-disable-validation -Zmiri-disable-stacked-borrows\n \n-// error-pattern: deallocating stack variable memory using Rust heap deallocation operation\n+// error-pattern: which is stack variable memory, using Rust heap deallocation operation\n \n fn main() {\n     let x = 42;"}, {"sha": "5d89243b86a93048e8c66d624995b2623afdbdf3", "filename": "tests/run-pass/heap_allocator.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Frun-pass%2Fheap_allocator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f84bfc57dd0ef22269bb84dae10f71e5e23e85d/tests%2Frun-pass%2Fheap_allocator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fheap_allocator.rs?ref=2f84bfc57dd0ef22269bb84dae10f71e5e23e85d", "patch": "@@ -4,7 +4,7 @@ use std::ptr::NonNull;\n use std::alloc::{Global, AllocRef, Layout, System};\n use std::slice;\n \n-fn check_alloc<T: AllocRef>(mut allocator: T) { unsafe {\n+fn check_alloc<T: AllocRef>(allocator: T) { unsafe {\n     for &align in &[4, 8, 16, 32] {\n         let layout_20 = Layout::from_size_align(20, align).unwrap();\n         let layout_40 = Layout::from_size_align(40, 4*align).unwrap();\n@@ -42,7 +42,7 @@ fn check_alloc<T: AllocRef>(mut allocator: T) { unsafe {\n     }\n } }\n \n-fn check_align_requests<T: AllocRef>(mut allocator: T) {\n+fn check_align_requests<T: AllocRef>(allocator: T) {\n     for &size in &[2, 8, 64] { // size less than and bigger than alignment\n         for &align in &[4, 8, 16, 32] { // Be sure to cover less than and bigger than `MIN_ALIGN` for all architectures\n             let iterations = 32;"}]}