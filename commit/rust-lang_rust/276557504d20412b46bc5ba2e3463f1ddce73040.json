{"sha": "276557504d20412b46bc5ba2e3463f1ddce73040", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3NjU1NzUwNGQyMDQxMmI0NmJjNWJhMmUzNDYzZjFkZGNlNzMwNDA=", "commit": {"author": {"name": "Christian Poveda", "email": "christianpoveda@protonmail.com", "date": "2018-09-30T17:14:27Z"}, "committer": {"name": "Christian Poveda", "email": "christianpoveda@protonmail.com", "date": "2018-10-01T17:42:20Z"}, "message": "Fix conditions to allow missing tools in CI", "tree": {"sha": "0c9c8c0973606ad95190b04c47b4483bfae1ed96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c9c8c0973606ad95190b04c47b4483bfae1ed96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/276557504d20412b46bc5ba2e3463f1ddce73040", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/276557504d20412b46bc5ba2e3463f1ddce73040", "html_url": "https://github.com/rust-lang/rust/commit/276557504d20412b46bc5ba2e3463f1ddce73040", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/276557504d20412b46bc5ba2e3463f1ddce73040/comments", "author": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0724ed68bb0c6c5be89753f1da13ea27dfe2301d", "url": "https://api.github.com/repos/rust-lang/rust/commits/0724ed68bb0c6c5be89753f1da13ea27dfe2301d", "html_url": "https://github.com/rust-lang/rust/commit/0724ed68bb0c6c5be89753f1da13ea27dfe2301d"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "312270532affc7bbaaaa1001f0effeb1bd229055", "filename": "config.toml.example", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/276557504d20412b46bc5ba2e3463f1ddce73040/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/276557504d20412b46bc5ba2e3463f1ddce73040/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=276557504d20412b46bc5ba2e3463f1ddce73040", "patch": "@@ -481,3 +481,7 @@\n # as the one built on Windows will contain backslashes in paths causing problems\n # on linux\n #src-tarball = true\n+#\n+\n+# Whether to allow failures when building tools\n+#missing-tools = false"}, {"sha": "c3fbc8eeca6ba65ee428f6cff468f05283334219", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=276557504d20412b46bc5ba2e3463f1ddce73040", "patch": "@@ -272,6 +272,7 @@ struct Dist {\n     gpg_password_file: Option<String>,\n     upload_addr: Option<String>,\n     src_tarball: Option<bool>,\n+    missing_tools: Option<bool>,\n }\n \n #[derive(Deserialize)]\n@@ -615,6 +616,7 @@ impl Config {\n             config.dist_gpg_password_file = t.gpg_password_file.clone().map(PathBuf::from);\n             config.dist_upload_addr = t.upload_addr.clone();\n             set(&mut config.rust_dist_src, t.src_tarball);\n+            set(&mut config.missing_tools, t.missing_tools);\n         }\n \n         // Now that we've reached the end of our configuration, infer the"}, {"sha": "d95603190d869e20d911eb1ae243c0d0718d1c5c", "filename": "src/bootstrap/configure.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fbootstrap%2Fconfigure.py", "raw_url": "https://github.com/rust-lang/rust/raw/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fbootstrap%2Fconfigure.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfigure.py?ref=276557504d20412b46bc5ba2e3463f1ddce73040", "patch": "@@ -69,7 +69,7 @@ def v(*args):\n o(\"emscripten\", None, \"compile the emscripten backend as well as LLVM\")\n o(\"full-tools\", None, \"enable all tools\")\n o(\"lldb\", \"rust.lldb\", \"build lldb\")\n-o(\"enable-missing-tools\", \"build.missing-tools\", \"allow failures when building tools\")\n+o(\"missing-tools\", \"dist.missing-tools\", \"allow failures when building tools\")\n \n # Optimization and debugging options. These may be overridden by the release\n # channel, etc."}, {"sha": "a9e506645f189821f270ccb04ceaeacef66e83d4", "filename": "src/ci/run.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/276557504d20412b46bc5ba2e3463f1ddce73040/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=276557504d20412b46bc5ba2e3463f1ddce73040", "patch": "@@ -76,7 +76,7 @@ else\n   fi\n fi\n \n-if [ \"$RUST_RELEASE_CHANNEL\" = \"nightly\" ] or [ \"$DIST_REQUIRE_ALL_TOOLS\" = \"\" ]; then\n+if [ \"$RUST_RELEASE_CHANNEL\" = \"nightly\" ] || [ \"$DIST_REQUIRE_ALL_TOOLS\" = \"\" ]; then\n     RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-missing-tools\"\n fi\n "}]}