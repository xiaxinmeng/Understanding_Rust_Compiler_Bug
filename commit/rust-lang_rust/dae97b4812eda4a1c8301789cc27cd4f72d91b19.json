{"sha": "dae97b4812eda4a1c8301789cc27cd4f72d91b19", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhZTk3YjQ4MTJlZGE0YTFjODMwMTc4OWNjMjdjZDRmNzJkOTFiMTk=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-03-04T03:46:27Z"}, "committer": {"name": "Young-il Choi", "email": "duddlf.choi@samsung.com", "date": "2013-03-04T05:00:55Z"}, "message": "mk: Restore toolchain config for i386 mac/linux, and freebsd\n\nConflicts:\n\tmk/platform.mk", "tree": {"sha": "b2aa9c53186479162ff55ced25197989c6ab7523", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2aa9c53186479162ff55ced25197989c6ab7523"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dae97b4812eda4a1c8301789cc27cd4f72d91b19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dae97b4812eda4a1c8301789cc27cd4f72d91b19", "html_url": "https://github.com/rust-lang/rust/commit/dae97b4812eda4a1c8301789cc27cd4f72d91b19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dae97b4812eda4a1c8301789cc27cd4f72d91b19/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yichoi", "id": 3222276, "node_id": "MDQ6VXNlcjMyMjIyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3222276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yichoi", "html_url": "https://github.com/yichoi", "followers_url": "https://api.github.com/users/yichoi/followers", "following_url": "https://api.github.com/users/yichoi/following{/other_user}", "gists_url": "https://api.github.com/users/yichoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/yichoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yichoi/subscriptions", "organizations_url": "https://api.github.com/users/yichoi/orgs", "repos_url": "https://api.github.com/users/yichoi/repos", "events_url": "https://api.github.com/users/yichoi/events{/privacy}", "received_events_url": "https://api.github.com/users/yichoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e971d0ce9f77120347287db9f2f46ec63a7b5510", "url": "https://api.github.com/repos/rust-lang/rust/commits/e971d0ce9f77120347287db9f2f46ec63a7b5510", "html_url": "https://github.com/rust-lang/rust/commit/e971d0ce9f77120347287db9f2f46ec63a7b5510"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "de8a66a104832af344855e8ed66cf254485e8020", "filename": "mk/platform.mk", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/dae97b4812eda4a1c8301789cc27cd4f72d91b19/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/dae97b4812eda4a1c8301789cc27cd4f72d91b19/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=dae97b4812eda4a1c8301789cc27cd4f72d91b19", "patch": "@@ -59,6 +59,20 @@ CFG_LDPATH_x86_64-unknown-linux-gnu :=\n CFG_RUN_x86_64-unknown-linux-gnu=$(2)\n CFG_RUN_TARG_x86_64-unknown-linux-gnu=$(call CFG_RUN_x86_64-unknown-linux-gnu,,$(2))\n \n+# i686-unknown-linux-gnu configuration\n+CFG_LIB_NAME_i686-unknown-linux-gnu=lib$(1).so\n+CFG_LIB_GLOB_i686-unknown-linux-gnu=lib$(1)-*.so\n+CFG_LIB_DSYM_GLOB_i686-unknown-linux-gnu=lib$(1)-*.dylib.dSYM\n+CFG_GCCISH_CFLAGS_i686-unknown-linux-gnu := -Wall -Werror -g -fPIC -m32\n+CFG_GCCISH_CXXFLAGS_i686-unknown-linux-gnu := -fno-rtti\n+CFG_GCCISH_LINK_FLAGS_i6868-unknown-linux-gnu := -shared -fPIC -ldl -lpthread -lrt -g -m32\n+CFG_GCCISH_DEF_FLAG_i6868-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list=\n+CFG_GCCISH_PRE_LIB_FLAGS_i686-unknown-linux-gnu := -Wl,-whole-archive\n+CFG_GCCISH_POST_LIB_FLAGS_i686-unknown-linux-gnu := -Wl,-no-whole-archive -Wl,-znoexecstack\n+CFG_DEF_SUFFIX_i686-unknown-linux-gnu := .linux.def\n+CFG_INSTALL_NAME_i686-unknown-linux-gnu =\n+CFG_GCCISH_CROSS_i686-unknown-linux-gnu =\n+\n # x86_64-apple-darwin configuration\n CFG_LIB_NAME_x86_64-apple-darwin=lib$(1).dylib\n CFG_LIB_GLOB_x86_64-apple-darwin=lib$(1)-*.dylib\n@@ -80,6 +94,19 @@ CFG_LDPATH_x86_64-apple-darwin :=\n CFG_RUN_x86_64-apple-darwin=$(2)\n CFG_RUN_TARG_x86_64-apple-darwin=$(call CFG_RUN_x86_64-apple-darwin,,$(2))\n \n+# i686-apple-darwin configuration\n+CFG_LIB_NAME_i686-apple-darwin=lib$(1).dylib\n+CFG_LIB_GLOB_i686-apple-darwin=lib$(1)-*.dylib\n+CFG_LIB_DSYM_GLOB_i686-apple-darwin=lib$(1)-*.dylib.dSYM\n+CFG_GCCISH_CFLAGS_i686-apple-darwin := -Wall -Werror -g -fPIC -m32 -arch i386\n+CFG_GCCISH_CXXFLAGS_i686-apple-darwin := -fno-rtti\n+CFG_GCCISH_LINK_FLAGS_i686-apple-darwin := -dynamiclib -lpthread -framework CoreServices -Wl,-no_compact_unwind -m32\n+CFG_GCCISH_DEF_FLAG_i686-apple-darwin := -Wl,-exported_symbols_list,\n+CFG_GCCISH_PRE_LIB_FLAGS_i686-apple-darwin :=\n+CFG_GCCISH_POST_LIB_FLAGS_i686-apple-darwin :=\n+CFG_DEF_SUFFIX_i686-apple-darwin := .darwin.def\n+CFG_INSTALL_NAME_i686-apple-darwin = -Wl,-install_name,@rpath/$(1)\n+\n # arm-unknown-android configuration\n CFG_LIB_NAME_arm-unknown-android=lib$(1).so\n CFG_LIB_GLOB_arm-unknown-android=lib$(1)-*.so\n@@ -148,6 +175,18 @@ CFG_LDPATH_i586-mingw32msvc :=\n CFG_RUN_i586-mingw32msvc=\n CFG_RUN_TARG_i586-mingw32msvc=\n \n+# x86_64-unknown-freebsd configuration\n+CFG_LIB_NAME_x86_64-unknown-freebsd=lib$(1).so\n+CFG_LIB_GLOB_x86_64-unknown-freebsd=lib$(1)-*.so\n+CFG_GCCISH_CFLAGS_x86_64-unknown-freebsd += -fPIC -I/usr/local/include\n+CFG_GCCISH_LINK_FLAGS_x86_64-unknown-freebsd += -shared -fPIC -lpthread -lrt\n+CFG_GCCISH_DEF_FLAG_x86_64-unknown-freebsd := -Wl,--export-dynamic,--dynamic-list=\n+CFG_GCCISH_PRE_LIB_FLAGS_x86_64-unknown-freebsd := -Wl,-whole-archive\n+CFG_GCCISH_POST_LIB_FLAGS_x86_64-unknown-freebsd := -Wl,-no-whole-archive\n+CFG_DEF_SUFFIX_x86_64-unknown-freebsd := .bsd.def\n+CFG_INSTALL_NAME_x86_64-unknown-freebsd =\n+CFG_GCCISH_CROSS_x86_64-unknown-freebsd =\n+\n # Hack: not sure how to test if a file exists in make other than this\n OS_SUPP = $(patsubst %,--suppressions=%,\\\n       $(wildcard $(CFG_SRC_DIR)src/etc/$(CFG_OSTYPE).supp*))"}]}