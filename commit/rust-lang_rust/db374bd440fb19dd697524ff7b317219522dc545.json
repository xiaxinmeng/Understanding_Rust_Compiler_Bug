{"sha": "db374bd440fb19dd697524ff7b317219522dc545", "node_id": "C_kwDOAAsO6NoAKGRiMzc0YmQ0NDBmYjE5ZGQ2OTc1MjRmZjdiMzE3MjE5NTIyZGM1NDU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-03-20T08:14:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-20T08:14:59Z"}, "message": "Rollup merge of #94948 - jhpratt:rustc_deprecated, r=Dylan-DPC\n\nFix diagnostics for `#![feature(deprecated_suggestion)]`\n\nFollow up from #94635, where I missed a couple things.", "tree": {"sha": "560e37062b993992d8a104f38adf17a9c742c1b1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/560e37062b993992d8a104f38adf17a9c742c1b1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/db374bd440fb19dd697524ff7b317219522dc545", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiNuKDCRBK7hj4Ov3rIwAAUMwIAJIUrAX7HtIBn9i6Vfbf0t6Q\nZsyT+y6GYgHhHWZ4rae6VbMKXKqlNtQ7NaYNTTHkRDRXnbNccwrn9Hk4iAT0HDhI\nkkEqrPKxvNcvfIrmL+NuuDbr7/rjdAA6BjnNbRMTvNivk6KfhdVn9VW2E31Ptgdj\n3h7cj6isNcxWlIPG1KHc6olwdZNTTQyOBX2RVtw+LC/S0cBwnleGZDacL3IgSoqz\nXkqjTMAOoBAjCwE3wenFq3hOMAGS3tc784joZJKDvrsZ0Kcdp7kWXtPL9m1Nyw9G\njM65i1RzB+U5eeGaNqZSOBA2Q5WZpbaZAxH+zYHKLfVeJfaxUUpE06av0BAM20E=\n=6sL0\n-----END PGP SIGNATURE-----\n", "payload": "tree 560e37062b993992d8a104f38adf17a9c742c1b1\nparent acb7ed141be1ea5b4c7120708d7a48d9155fb38c\nparent 06a1fc98eb93ca7062b11ec45053db990a4c127f\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1647764099 +0100\ncommitter GitHub <noreply@github.com> 1647764099 +0100\n\nRollup merge of #94948 - jhpratt:rustc_deprecated, r=Dylan-DPC\n\nFix diagnostics for `#![feature(deprecated_suggestion)]`\n\nFollow up from #94635, where I missed a couple things.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/db374bd440fb19dd697524ff7b317219522dc545", "html_url": "https://github.com/rust-lang/rust/commit/db374bd440fb19dd697524ff7b317219522dc545", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/db374bd440fb19dd697524ff7b317219522dc545/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "acb7ed141be1ea5b4c7120708d7a48d9155fb38c", "url": "https://api.github.com/repos/rust-lang/rust/commits/acb7ed141be1ea5b4c7120708d7a48d9155fb38c", "html_url": "https://github.com/rust-lang/rust/commit/acb7ed141be1ea5b4c7120708d7a48d9155fb38c"}, {"sha": "06a1fc98eb93ca7062b11ec45053db990a4c127f", "url": "https://api.github.com/repos/rust-lang/rust/commits/06a1fc98eb93ca7062b11ec45053db990a4c127f", "html_url": "https://github.com/rust-lang/rust/commit/06a1fc98eb93ca7062b11ec45053db990a4c127f"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "8e748aaa58b598bf33f9c0329108406228bb55ec", "filename": "compiler/rustc_attr/src/builtin.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/db374bd440fb19dd697524ff7b317219522dc545/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db374bd440fb19dd697524ff7b317219522dc545/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs?ref=db374bd440fb19dd697524ff7b317219522dc545", "patch": "@@ -758,8 +758,7 @@ where\n                                     if sess.is_nightly_build() {\n                                         diag.help(\"add `#![feature(deprecated_suggestion)]` to the crate root\");\n                                     }\n-                                    // FIXME(jhpratt) change this to an actual tracking issue\n-                                    diag.note(\"see #XXX for more details\").emit();\n+                                    diag.note(\"see #94785 for more details\").emit();\n                                 }\n \n                                 if !get(mi, &mut suggestion) {\n@@ -772,10 +771,10 @@ where\n                                     meta.span(),\n                                     AttrError::UnknownMetaItem(\n                                         pprust::path_to_string(&mi.path),\n-                                        if attr.has_name(sym::deprecated) {\n-                                            &[\"since\", \"note\"]\n-                                        } else {\n+                                        if sess.features_untracked().deprecated_suggestion {\n                                             &[\"since\", \"note\", \"suggestion\"]\n+                                        } else {\n+                                            &[\"since\", \"note\"]\n                                         },\n                                     ),\n                                 );"}, {"sha": "438ce3349d252eec8bc705461c5ab4eb72519795", "filename": "src/test/ui/deprecation/feature-gate-deprecated_suggestion.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/db374bd440fb19dd697524ff7b317219522dc545/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/db374bd440fb19dd697524ff7b317219522dc545/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Ffeature-gate-deprecated_suggestion.stderr?ref=db374bd440fb19dd697524ff7b317219522dc545", "patch": "@@ -5,7 +5,7 @@ LL | #[deprecated(suggestion = \"foo\")]\n    |              ^^^^^^^^^^^^^^^^^^\n    |\n    = help: add `#![feature(deprecated_suggestion)]` to the crate root\n-   = note: see #XXX for more details\n+   = note: see #94785 for more details\n \n error: aborting due to previous error\n "}]}