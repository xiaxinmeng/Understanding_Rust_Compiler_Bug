{"sha": "b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "node_id": "C_kwDOAAsO6NoAKGIyZWY4MzdiNmM1MmQxY2IwOTc3YzdmYzFlNjJhZjVlZTU0NjgyN2U", "commit": {"author": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2023-01-30T05:50:37Z"}, "committer": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2023-01-30T05:50:37Z"}, "message": "Use `expect_{use,fn}` in a couple of places", "tree": {"sha": "20bf00964367447e899d10bb70a1c7678f208d7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/20bf00964367447e899d10bb70a1c7678f208d7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "html_url": "https://github.com/rust-lang/rust/commit/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e/comments", "author": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4aebf030e32d67e72db8b52be74fb6223a3006f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4aebf030e32d67e72db8b52be74fb6223a3006f", "html_url": "https://github.com/rust-lang/rust/commit/a4aebf030e32d67e72db8b52be74fb6223a3006f"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "92a96d713585f67e3768f2a35bc6007526efff3a", "filename": "compiler/rustc_hir_analysis/src/check/compare_impl_item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fcompare_impl_item.rs?ref=b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "patch": "@@ -1504,7 +1504,7 @@ fn compare_synthetic_generics<'tcx>(\n                     let _: Option<_> = try {\n                         let impl_m = impl_m.def_id.as_local()?;\n                         let impl_m = tcx.hir().expect_impl_item(impl_m);\n-                        let hir::ImplItemKind::Fn(sig, _) = &impl_m.kind else { unreachable!() };\n+                        let (sig, _) = impl_m.expect_fn();\n                         let input_tys = sig.decl.inputs;\n \n                         struct Visitor(Option<Span>, hir::def_id::LocalDefId);"}, {"sha": "5716be4f1a95445c5f4db941b7c89123f440c13b", "filename": "compiler/rustc_hir_analysis/src/check_unused.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck_unused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2ef837b6c52d1cb0977c7fc1e62af5ee546827e/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck_unused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck_unused.rs?ref=b2ef837b6c52d1cb0977c7fc1e62af5ee546827e", "patch": "@@ -29,7 +29,7 @@ pub fn check_crate(tcx: TyCtxt<'_>) {\n         if item.span.is_dummy() {\n             continue;\n         }\n-        let hir::ItemKind::Use(path, _) = item.kind else { unreachable!() };\n+        let (path, _) = item.expect_use();\n         let msg = if let Ok(snippet) = tcx.sess.source_map().span_to_snippet(path.span) {\n             format!(\"unused import: `{}`\", snippet)\n         } else {"}]}