{"sha": "3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmMGZjOWIwMzU2OWUwM2RiZGY1ZmRjM2E2N2YyNDZhYWQzYjQwYjg=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-01-21T20:16:46Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-01-21T21:42:54Z"}, "message": "Pluralize error messages.\n\nThis commit pluralizes error messages when more than a single trailing\n`>` character is present.", "tree": {"sha": "c7b17737e5655291daec174928546ece71d8dba5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7b17737e5655291daec174928546ece71d8dba5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAlxGPN4ACgkQAXYLT59T\n8VQFCg/+LfJRFEnhwlfkmwpzi3zbF9MQ4of8Oze2BR9enn/Ykq+4rzV48kQI4W2u\nW2rif/ZpN+6+R556ESCNE7KjKMILRiQA6p/XwIhsu9bbQrxa2WI+2zZOikIf+bFe\n/v0xONZOA9yjVOQDl9+QW++nyw4APsYrk2Ud7iA5IOC19AXmezDGjDCCb//MA5Qb\nEbcvFGBR/geee/yy5akIGeNTQX7WIPYG1VPtnJ390s3TX2dJY0BJORl9dPXXPiJT\nZzi2/V5YOKZS+4sT4bia9LqF7dE1CKfvfd95RhGNs31vQZovpMOv5LlR7k2cKCEo\nbEeIQi/68ccM5+Wgej8HQ5jR8VzOFctVyHtEltKtlICbIloDHXnw994eU9PT7rPa\ncFdLZx8NPtqhSuY7rcl0EDVnoZ/Tjkeq5+Sb1cVwEb6PcSMLralh2uX7nYojZ6lx\nuJcNg0J+55qNZMxR4muQDLPKI0n7suoBv/bVlK+pIk2SH76CIk69d6E3Y4rR5dp5\nh9ttTVzt8alt4AjrH+dRJvv49EvdlxXvXJGADmLDknOSrfQm5oSafINJD7xEXBzO\n31CP0heVdZRvc2veVqPfY8EW2lnIyaKxn+nMJ7t5/CGmt2vVNTWG1LC8d9Q5L5w6\nLZ3bvAabS2HgakU4HlKZp5hdiZplE837hKArZvi354lhc1K9Vrc=\n=F3at\n-----END PGP SIGNATURE-----", "payload": "tree c7b17737e5655291daec174928546ece71d8dba5\nparent 6c399d155c6307563a2022fe98bc2e596af1cfc4\nauthor David Wood <david@davidtw.co> 1548101806 +0100\ncommitter David Wood <david@davidtw.co> 1548106974 +0100\n\nPluralize error messages.\n\nThis commit pluralizes error messages when more than a single trailing\n`>` character is present.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "html_url": "https://github.com/rust-lang/rust/commit/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c399d155c6307563a2022fe98bc2e596af1cfc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c399d155c6307563a2022fe98bc2e596af1cfc4", "html_url": "https://github.com/rust-lang/rust/commit/6c399d155c6307563a2022fe98bc2e596af1cfc4"}], "stats": {"total": 23, "additions": 15, "deletions": 8}, "files": [{"sha": "6a881eb6241965830f28d5e6485f5b8282206eb7", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "patch": "@@ -2869,11 +2869,18 @@ impl<'a> Parser<'a> {\n             self.eat_to_tokens(&[&token::OpenDelim(token::Paren)]);\n             let span = lo.until(self.span);\n \n+            // We needn't check `encountered_gt` to determine if we should pluralize \"bracket\".\n+            // `encountered_gt` can only represent a single `>` character, if `number_of_shr >= 1`\n+            // then there is either `>>` or `>>>` - in either case a plural is warranted.\n+            let plural = number_of_shr >= 1;\n             self.diagnostic()\n-                .struct_span_err(span, \"unmatched angle bracket\")\n+                .struct_span_err(\n+                    span,\n+                    &format!(\"unmatched angle bracket{}\", if plural { \"s\" } else { \"\" }),\n+                )\n                 .span_suggestion_with_applicability(\n                     span,\n-                    \"remove extra angle bracket\",\n+                    &format!(\"remove extra angle bracket{}\", if plural { \"s\" } else { \"\" }),\n                     String::new(),\n                     Applicability::MachineApplicable,\n                 )"}, {"sha": "ffefbfd0348a8d8c1c7c64bcac07e048e92a611a", "filename": "src/test/ui/issues/issue-54521.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8/src%2Ftest%2Fui%2Fissues%2Fissue-54521.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8/src%2Ftest%2Fui%2Fissues%2Fissue-54521.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-54521.stderr?ref=3f0fc9b03569e03dbdf5fdc3a67f246aad3b40b8", "patch": "@@ -1,20 +1,20 @@\n-error: unmatched angle bracket\n+error: unmatched angle brackets\n   --> $DIR/issue-54521.rs:11:60\n    |\n LL |     let _ = vec![1, 2, 3].into_iter().collect::<Vec<usize>>>>>>();\n-   |                                                            ^^^^ help: remove extra angle bracket\n+   |                                                            ^^^^ help: remove extra angle brackets\n \n-error: unmatched angle bracket\n+error: unmatched angle brackets\n   --> $DIR/issue-54521.rs:14:60\n    |\n LL |     let _ = vec![1, 2, 3].into_iter().collect::<Vec<usize>>>>>();\n-   |                                                            ^^^ help: remove extra angle bracket\n+   |                                                            ^^^ help: remove extra angle brackets\n \n-error: unmatched angle bracket\n+error: unmatched angle brackets\n   --> $DIR/issue-54521.rs:17:60\n    |\n LL |     let _ = vec![1, 2, 3].into_iter().collect::<Vec<usize>>>>();\n-   |                                                            ^^ help: remove extra angle bracket\n+   |                                                            ^^ help: remove extra angle brackets\n \n error: unmatched angle bracket\n   --> $DIR/issue-54521.rs:20:60"}]}