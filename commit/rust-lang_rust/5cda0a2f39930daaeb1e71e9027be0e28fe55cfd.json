{"sha": "5cda0a2f39930daaeb1e71e9027be0e28fe55cfd", "node_id": "C_kwDOAAsO6NoAKDVjZGEwYTJmMzk5MzBkYWFlYjFlNzFlOTAyN2JlMGUyOGZlNTVjZmQ", "commit": {"author": {"name": "Matthew Esposito", "email": "matt@matthew.science", "date": "2023-01-06T19:07:12Z"}, "committer": {"name": "Matthew Esposito", "email": "matt@matthew.science", "date": "2023-01-06T19:07:12Z"}, "message": "Add default and latest stable edition to --edition in rustc", "tree": {"sha": "eba9271386b8d7acf7f125f0088bbd80139923f1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eba9271386b8d7acf7f125f0088bbd80139923f1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd", "html_url": "https://github.com/rust-lang/rust/commit/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd/comments", "author": {"login": "sigaloid", "id": 69441971, "node_id": "MDQ6VXNlcjY5NDQxOTcx", "avatar_url": "https://avatars.githubusercontent.com/u/69441971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigaloid", "html_url": "https://github.com/sigaloid", "followers_url": "https://api.github.com/users/sigaloid/followers", "following_url": "https://api.github.com/users/sigaloid/following{/other_user}", "gists_url": "https://api.github.com/users/sigaloid/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigaloid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigaloid/subscriptions", "organizations_url": "https://api.github.com/users/sigaloid/orgs", "repos_url": "https://api.github.com/users/sigaloid/repos", "events_url": "https://api.github.com/users/sigaloid/events{/privacy}", "received_events_url": "https://api.github.com/users/sigaloid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sigaloid", "id": 69441971, "node_id": "MDQ6VXNlcjY5NDQxOTcx", "avatar_url": "https://avatars.githubusercontent.com/u/69441971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sigaloid", "html_url": "https://github.com/sigaloid", "followers_url": "https://api.github.com/users/sigaloid/followers", "following_url": "https://api.github.com/users/sigaloid/following{/other_user}", "gists_url": "https://api.github.com/users/sigaloid/gists{/gist_id}", "starred_url": "https://api.github.com/users/sigaloid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sigaloid/subscriptions", "organizations_url": "https://api.github.com/users/sigaloid/orgs", "repos_url": "https://api.github.com/users/sigaloid/repos", "events_url": "https://api.github.com/users/sigaloid/events{/privacy}", "received_events_url": "https://api.github.com/users/sigaloid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "afe8c4537c9009a251a31e8f022b7795fc305d4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/afe8c4537c9009a251a31e8f022b7795fc305d4f", "html_url": "https://github.com/rust-lang/rust/commit/afe8c4537c9009a251a31e8f022b7795fc305d4f"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "233343febffda53141b4af4f635cd7745583cfd8", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5cda0a2f39930daaeb1e71e9027be0e28fe55cfd/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=5cda0a2f39930daaeb1e71e9027be0e28fe55cfd", "patch": "@@ -35,6 +35,7 @@ use std::hash::Hash;\n use std::iter;\n use std::path::{Path, PathBuf};\n use std::str::{self, FromStr};\n+use std::sync::LazyLock;\n \n pub mod sigpipe;\n \n@@ -1322,7 +1323,12 @@ mod opt {\n         unstable(longer(a, b), move |opts| opts.optmulti(a, b, c, d))\n     }\n }\n-\n+static EDITION_STRING: LazyLock<String> = LazyLock::new(|| {\n+    format!(\n+        \"Specify which edition of the compiler to use when compiling code.\\\n+The default is {DEFAULT_EDITION} and the latest stable edition is {LATEST_STABLE_EDITION}.\"\n+    )\n+});\n /// Returns the \"short\" subset of the rustc command line options,\n /// including metadata for each option, such as whether the option is\n /// part of the stable long-term interface for rustc.\n@@ -1355,7 +1361,7 @@ pub fn rustc_short_optgroups() -> Vec<RustcOptGroup> {\n         opt::opt_s(\n             \"\",\n             \"edition\",\n-            \"Specify which edition of the compiler to use when compiling code.\",\n+            &*EDITION_STRING,\n             EDITION_NAME_LIST,\n         ),\n         opt::multi_s("}]}