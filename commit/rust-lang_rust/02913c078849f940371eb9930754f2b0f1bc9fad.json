{"sha": "02913c078849f940371eb9930754f2b0f1bc9fad", "node_id": "C_kwDOAAsO6NoAKDAyOTEzYzA3ODg0OWY5NDAzNzFlYjk5MzA3NTRmMmIwZjFiYzlmYWQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-21T01:22:59Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-21T01:22:59Z"}, "message": "Auto merge of #91073 - camelid:small-cleanups, r=jyn514\n\nrustdoc: Make two small cleanups", "tree": {"sha": "0a6fd0ef11d252e29d5286c27765ad0da0018b26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0a6fd0ef11d252e29d5286c27765ad0da0018b26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/02913c078849f940371eb9930754f2b0f1bc9fad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/02913c078849f940371eb9930754f2b0f1bc9fad", "html_url": "https://github.com/rust-lang/rust/commit/02913c078849f940371eb9930754f2b0f1bc9fad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/02913c078849f940371eb9930754f2b0f1bc9fad/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5bc98076f37dd8c1476de4bbe0515c55a65332b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/5bc98076f37dd8c1476de4bbe0515c55a65332b7", "html_url": "https://github.com/rust-lang/rust/commit/5bc98076f37dd8c1476de4bbe0515c55a65332b7"}, {"sha": "a65421651adfcd5123153a847c075b5a14465f1d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a65421651adfcd5123153a847c075b5a14465f1d", "html_url": "https://github.com/rust-lang/rust/commit/a65421651adfcd5123153a847c075b5a14465f1d"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "d28f3ce87785bb9f1bd30f403fb3dda91dc5e25b", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=02913c078849f940371eb9930754f2b0f1bc9fad", "patch": "@@ -917,6 +917,10 @@ crate struct DocFragment {\n     crate indent: usize,\n }\n \n+// `DocFragment` is used a lot. Make sure it doesn't unintentionally get bigger.\n+#[cfg(all(target_arch = \"x86_64\", target_pointer_width = \"64\"))]\n+rustc_data_structures::static_assert_size!(DocFragment, 32);\n+\n #[derive(Clone, Copy, PartialEq, Eq, Debug, Hash)]\n crate enum DocFragmentKind {\n     /// A doc fragment created from a `///` or `//!` doc comment.\n@@ -1109,24 +1113,24 @@ impl Attributes {\n         if self.doc_strings.is_empty() { None } else { Some(self.doc_strings.iter().collect()) }\n     }\n \n-    crate fn get_doc_aliases(&self) -> Box<[String]> {\n+    crate fn get_doc_aliases(&self) -> Box<[Symbol]> {\n         let mut aliases = FxHashSet::default();\n \n         for attr in self.other_attrs.lists(sym::doc).filter(|a| a.has_name(sym::alias)) {\n             if let Some(values) = attr.meta_item_list() {\n                 for l in values {\n                     match l.literal().unwrap().kind {\n                         ast::LitKind::Str(s, _) => {\n-                            aliases.insert(s.as_str().to_string());\n+                            aliases.insert(s);\n                         }\n                         _ => unreachable!(),\n                     }\n                 }\n             } else {\n-                aliases.insert(attr.value_str().map(|s| s.to_string()).unwrap());\n+                aliases.insert(attr.value_str().unwrap());\n             }\n         }\n-        aliases.into_iter().collect::<Vec<String>>().into()\n+        aliases.into_iter().collect::<Vec<_>>().into()\n     }\n }\n "}, {"sha": "9aa69d94215ded7281c96f0fb1a33c3dbade33eb", "filename": "src/librustdoc/html/render/cache.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcache.rs?ref=02913c078849f940371eb9930754f2b0f1bc9fad", "patch": "@@ -70,7 +70,7 @@ crate fn build_index<'tcx>(krate: &clean::Crate, cache: &mut Cache, tcx: TyCtxt<\n     // Set up alias indexes.\n     for (i, item) in search_index.iter().enumerate() {\n         for alias in &item.aliases[..] {\n-            aliases.entry(alias.to_lowercase()).or_insert_with(Vec::new).push(i);\n+            aliases.entry(alias.as_str().to_lowercase()).or_default().push(i);\n         }\n     }\n "}, {"sha": "ffd09663f8240700efe2c005ecf64a815700c283", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/02913c078849f940371eb9930754f2b0f1bc9fad/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=02913c078849f940371eb9930754f2b0f1bc9fad", "patch": "@@ -103,7 +103,7 @@ crate struct IndexItem {\n     crate parent: Option<DefId>,\n     crate parent_idx: Option<usize>,\n     crate search_type: Option<IndexItemFunctionType>,\n-    crate aliases: Box<[String]>,\n+    crate aliases: Box<[Symbol]>,\n }\n \n /// A type used for the search index."}]}