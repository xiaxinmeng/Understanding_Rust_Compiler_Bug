{"sha": "c8549a158648db323690fbb42356042f6b5d956b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4NTQ5YTE1ODY0OGRiMzIzNjkwZmJiNDIzNTYwNDJmNmI1ZDk1NmI=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2017-09-28T01:18:38Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2017-10-05T02:50:53Z"}, "message": "Generate Idx in nll using newtype_index!", "tree": {"sha": "50173d30cfa622b1bd95c3a39b32c1171d7afd44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/50173d30cfa622b1bd95c3a39b32c1171d7afd44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8549a158648db323690fbb42356042f6b5d956b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8549a158648db323690fbb42356042f6b5d956b", "html_url": "https://github.com/rust-lang/rust/commit/c8549a158648db323690fbb42356042f6b5d956b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8549a158648db323690fbb42356042f6b5d956b/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d230af80b01ebe62d27de8436832d0e7ab9ed94", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d230af80b01ebe62d27de8436832d0e7ab9ed94", "html_url": "https://github.com/rust-lang/rust/commit/3d230af80b01ebe62d27de8436832d0e7ab9ed94"}], "stats": {"total": 23, "additions": 7, "deletions": 16}, "files": [{"sha": "77e33855f23444acb767b17b12322125b5b15039", "filename": "src/Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8549a158648db323690fbb42356042f6b5d956b/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/c8549a158648db323690fbb42356042f6b5d956b/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=c8549a158648db323690fbb42356042f6b5d956b", "patch": "@@ -1668,6 +1668,7 @@ dependencies = [\n  \"rustc_const_math 0.0.0\",\n  \"rustc_data_structures 0.0.0\",\n  \"rustc_errors 0.0.0\",\n+ \"serialize 0.0.0\",\n  \"syntax 0.0.0\",\n  \"syntax_pos 0.0.0\",\n ]"}, {"sha": "b7a576babeb677c6f35f976e1dfc5eb3f9222746", "filename": "src/librustc_mir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2FCargo.toml?ref=c8549a158648db323690fbb42356042f6b5d956b", "patch": "@@ -17,5 +17,6 @@ rustc_const_eval = { path = \"../librustc_const_eval\" }\n rustc_const_math = { path = \"../librustc_const_math\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }\n+serialize = { path = \"../libserialize\" }\n syntax = { path = \"../libsyntax\" }\n syntax_pos = { path = \"../libsyntax_pos\" }"}, {"sha": "553fec20217bf95d56e492a602ab66b768ab5444", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=c8549a158648db323690fbb42356042f6b5d956b", "patch": "@@ -30,7 +30,8 @@ extern crate bitflags;\n extern crate graphviz as dot;\n #[macro_use]\n extern crate rustc;\n-extern crate rustc_data_structures;\n+#[macro_use] extern crate rustc_data_structures;\n+extern crate serialize as rustc_serialize;\n extern crate rustc_errors;\n #[macro_use]\n extern crate syntax;"}, {"sha": "c6acc53f5fa9e112f68c93f5c484e14bbe54419a", "filename": "src/librustc_mir/transform/nll/mod.rs", "status": "modified", "additions": 3, "deletions": 15, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8549a158648db323690fbb42356042f6b5d956b/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fnll%2Fmod.rs?ref=c8549a158648db323690fbb42356042f6b5d956b", "patch": "@@ -19,6 +19,8 @@ use rustc::util::nodemap::FxHashSet;\n use rustc_data_structures::indexed_vec::{IndexVec, Idx};\n use syntax_pos::DUMMY_SP;\n use std::collections::HashMap;\n+use std::fmt::{self, Debug, Formatter};\n+use std::u32;\n \n #[allow(dead_code)]\n struct NLLVisitor<'a, 'gcx: 'a + 'tcx, 'tcx: 'a> {\n@@ -155,18 +157,4 @@ struct Region {\n     points: FxHashSet<Location>,\n }\n \n-#[derive(Copy, Clone, Hash, Eq, PartialEq, Ord, PartialOrd, Debug)]\n-pub struct RegionIndex(pub u32);\n-\n-impl Idx for RegionIndex {\n-    #[inline]\n-    fn new(idx: usize) -> Self {\n-        assert!(idx <= ::std::u32::MAX as usize);\n-        RegionIndex(idx as u32)\n-    }\n-\n-    #[inline]\n-    fn index(self) -> usize {\n-        self.0 as usize\n-    }\n-}\n+newtype_index!(RegionIndex, \"region_index\");"}]}