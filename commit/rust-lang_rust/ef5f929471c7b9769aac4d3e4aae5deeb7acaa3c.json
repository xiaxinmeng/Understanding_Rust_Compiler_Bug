{"sha": "ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmNWY5Mjk0NzFjN2I5NzY5YWFjNGQzZTRhYWU1ZGVlYjdhY2FhM2M=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-01-13T23:56:11Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-01-21T18:01:56Z"}, "message": "Account for run-make tests in `is_up_to_date`", "tree": {"sha": "1e1c215f1d251abee8df48a7fe6cae4f3affea63", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e1c215f1d251abee8df48a7fe6cae4f3affea63"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c", "html_url": "https://github.com/rust-lang/rust/commit/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce7172da5142e3914f9461f7e968897959cab338", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce7172da5142e3914f9461f7e968897959cab338", "html_url": "https://github.com/rust-lang/rust/commit/ce7172da5142e3914f9461f7e968897959cab338"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "1f0b42d1786c13e03ac9e1566f02d8ac2b849be7", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=ef5f929471c7b9769aac4d3e4aae5deeb7acaa3c", "patch": "@@ -624,7 +624,8 @@ fn is_up_to_date(\n \n     // Check timestamps.\n     let mut inputs = inputs.clone();\n-    inputs.add_path(&testpaths.file);\n+    // Use `add_dir` to account for run-make tests, which use their individual directory\n+    inputs.add_dir(&testpaths.file);\n \n     for aux in &props.aux {\n         let path = testpaths.file.parent().unwrap().join(\"auxiliary\").join(aux);"}]}