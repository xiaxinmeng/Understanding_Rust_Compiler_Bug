{"sha": "b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0YmJlNzg0YTlkYzFmOTdmMDdlMjU0M2M2ZjcyNmNiMWViNGNjODY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-01-14T00:13:51Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-01-16T17:37:24Z"}, "message": "Make `impl Trait` suggestion in E0746 `MachineApplicable`", "tree": {"sha": "08d009bd627ec62be02bdb2891b253a2c5022961", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/08d009bd627ec62be02bdb2891b253a2c5022961"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "html_url": "https://github.com/rust-lang/rust/commit/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea7e885204e1ed6b18406e84708abef748925ec5", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea7e885204e1ed6b18406e84708abef748925ec5", "html_url": "https://github.com/rust-lang/rust/commit/ea7e885204e1ed6b18406e84708abef748925ec5"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "8d0923f571851262fa09eb668d17386d49eb8caf", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "patch": "@@ -1840,7 +1840,7 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n                                 last_ty, trait_obj,\n                             ),\n                             format!(\"impl {}\", trait_obj),\n-                            Applicability::MaybeIncorrect,\n+                            Applicability::MachineApplicable,\n                         );\n                         err.note(impl_trait_msg);\n                     } else {"}, {"sha": "ca8319aa020dceea3f35a462540de4f30b896ec1", "filename": "src/test/ui/error-codes/E0746.fixed", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0746.fixed?ref=b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "patch": "@@ -0,0 +1,18 @@\n+// run-rustfix\n+#![allow(dead_code)]\n+struct Struct;\n+trait Trait {}\n+impl Trait for Struct {}\n+impl Trait for u32 {}\n+\n+fn foo() -> impl Trait { Struct }\n+//~^ ERROR E0746\n+\n+fn bar() -> impl Trait { //~ ERROR E0746\n+    if true {\n+        return 0;\n+    }\n+    42\n+}\n+\n+fn main() {}"}, {"sha": "bf5ba8fff562a81ef091917b380e301f5255cac2", "filename": "src/test/ui/error-codes/E0746.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0746.rs?ref=b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "patch": "@@ -1,3 +1,5 @@\n+// run-rustfix\n+#![allow(dead_code)]\n struct Struct;\n trait Trait {}\n impl Trait for Struct {}"}, {"sha": "0cffd108226d8e7ce1a73eee044cca2ba3846c55", "filename": "src/test/ui/error-codes/E0746.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86/src%2Ftest%2Fui%2Ferror-codes%2FE0746.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0746.stderr?ref=b4bbe784a9dc1f97f07e2543c6f726cb1eb4cc86", "patch": "@@ -1,5 +1,5 @@\n error[E0746]: return type cannot have a bare trait because it must be `Sized`\n-  --> $DIR/E0746.rs:6:13\n+  --> $DIR/E0746.rs:8:13\n    |\n LL | fn foo() -> dyn Trait { Struct }\n    |             ^^^^^^^^^ doesn't have a size known at compile-time\n@@ -11,7 +11,7 @@ LL | fn foo() -> impl Trait { Struct }\n    |             ^^^^^^^^^^\n \n error[E0746]: return type cannot have a bare trait because it must be `Sized`\n-  --> $DIR/E0746.rs:9:13\n+  --> $DIR/E0746.rs:11:13\n    |\n LL | fn bar() -> dyn Trait {\n    |             ^^^^^^^^^ doesn't have a size known at compile-time"}]}