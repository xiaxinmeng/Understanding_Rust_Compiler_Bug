{"sha": "bcd2f2df67ac755b23f540a0657572eade281f12", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJjZDJmMmRmNjdhYzc1NWIyM2Y1NDBhMDY1NzU3MmVhZGUyODFmMTI=", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-11-04T12:48:50Z"}, "committer": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2020-11-04T12:48:50Z"}, "message": "fix a couple of clippy warnings:\n\nfilter_next\nmanual_strip\nredundant_static_lifetimes\nsingle_char_pattern\nunnecessary_cast\nunused_unit\nop_ref\nredundant_closure\nuseless_conversion", "tree": {"sha": "b69870f58968dee7ffb541ab0badc745045d53de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b69870f58968dee7ffb541ab0badc745045d53de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bcd2f2df67ac755b23f540a0657572eade281f12", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bcd2f2df67ac755b23f540a0657572eade281f12", "html_url": "https://github.com/rust-lang/rust/commit/bcd2f2df67ac755b23f540a0657572eade281f12", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bcd2f2df67ac755b23f540a0657572eade281f12/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "56293097f7f877f1350a6cd00f79d03132f16515", "url": "https://api.github.com/repos/rust-lang/rust/commits/56293097f7f877f1350a6cd00f79d03132f16515", "html_url": "https://github.com/rust-lang/rust/commit/56293097f7f877f1350a6cd00f79d03132f16515"}], "stats": {"total": 35, "additions": 14, "deletions": 21}, "files": [{"sha": "ec87a88f4aba79d8f2844d456431fdc0666a6a1a", "filename": "compiler/rustc_ast/src/attr/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_ast%2Fsrc%2Fattr%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_ast%2Fsrc%2Fattr%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Fattr%2Fmod.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -360,7 +360,7 @@ pub fn list_contains_name(items: &[NestedMetaItem], name: Symbol) -> bool {\n impl MetaItem {\n     fn token_trees_and_spacings(&self) -> Vec<TreeAndSpacing> {\n         let mut idents = vec![];\n-        let mut last_pos = BytePos(0 as u32);\n+        let mut last_pos = BytePos(0_u32);\n         for (i, segment) in self.path.segments.iter().enumerate() {\n             let is_first = i == 0;\n             if !is_first {"}, {"sha": "868989539d4fda6dca5a521d351263bf8c1484dd", "filename": "compiler/rustc_infer/src/infer/error_reporting/need_type_info.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fneed_type_info.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -739,7 +739,6 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n                 \"cannot infer {} {} {} `{}`{}\",\n                 kind_str, preposition, descr, type_name, parent_desc\n             )\n-            .into()\n         }\n     }\n }"}, {"sha": "3ed7d20ae4571c8ebdbd24a1522b6365b578500e", "filename": "compiler/rustc_interface/src/util.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_interface%2Fsrc%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Futil.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -246,10 +246,10 @@ pub fn get_codegen_backend(sopts: &config::Options) -> Box<dyn CodegenBackend> {\n \n     INIT.call_once(|| {\n         #[cfg(feature = \"llvm\")]\n-        const DEFAULT_CODEGEN_BACKEND: &'static str = \"llvm\";\n+        const DEFAULT_CODEGEN_BACKEND: &str = \"llvm\";\n \n         #[cfg(not(feature = \"llvm\"))]\n-        const DEFAULT_CODEGEN_BACKEND: &'static str = \"cranelift\";\n+        const DEFAULT_CODEGEN_BACKEND: &str = \"cranelift\";\n \n         let codegen_name = sopts\n             .debugging_opts\n@@ -414,11 +414,10 @@ pub fn get_codegen_sysroot(backend_name: &str) -> fn() -> Box<dyn CodegenBackend\n             let libdir = filesearch::relative_target_lib_path(&sysroot, &target);\n             sysroot.join(libdir).with_file_name(\"codegen-backends\")\n         })\n-        .filter(|f| {\n+        .find(|f| {\n             info!(\"codegen backend candidate: {}\", f.display());\n             f.exists()\n-        })\n-        .next();\n+        });\n     let sysroot = sysroot.unwrap_or_else(|| {\n         let candidates = sysroot_candidates\n             .iter()"}, {"sha": "978f08927c6ef9a7af452fa226f3f0ce3d64f653", "filename": "compiler/rustc_middle/src/middle/stability.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmiddle%2Fstability.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -399,7 +399,7 @@ impl<'tcx> TyCtxt<'tcx> {\n         def_id: DefId,\n         id: Option<HirId>,\n         span: Span,\n-        unmarked: impl FnOnce(Span, DefId) -> (),\n+        unmarked: impl FnOnce(Span, DefId),\n     ) {\n         let soft_handler = |lint, span, msg: &_| {\n             self.struct_span_lint_hir(lint, id.unwrap_or(hir::CRATE_HIR_ID), span, |lint| {"}, {"sha": "709ffc3049ab81fb8d0e500f096cc521f2656e44", "filename": "compiler/rustc_middle/src/mir/terminator.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -46,7 +46,7 @@ impl SwitchTargets {\n     pub fn new(targets: impl Iterator<Item = (u128, BasicBlock)>, otherwise: BasicBlock) -> Self {\n         let (values, mut targets): (SmallVec<_>, SmallVec<_>) = targets.unzip();\n         targets.push(otherwise);\n-        Self { values: values.into(), targets }\n+        Self { values, targets }\n     }\n \n     /// Builds a switch targets definition that jumps to `then` if the tested value equals `value`,"}, {"sha": "1474c7abfadaf0c55435905223f41c9b08901967", "filename": "compiler/rustc_mir/src/borrow_check/diagnostics/conflict_errors.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fdiagnostics%2Fconflict_errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fdiagnostics%2Fconflict_errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fdiagnostics%2Fconflict_errors.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -120,7 +120,7 @@ impl<'cx, 'tcx> MirBorrowckCtxt<'cx, 'tcx> {\n                 let move_out = self.move_data.moves[(*move_site).moi];\n                 let moved_place = &self.move_data.move_paths[move_out.path].place;\n                 // `*(_1)` where `_1` is a `Box` is actually a move out.\n-                let is_box_move = moved_place.as_ref().projection == &[ProjectionElem::Deref]\n+                let is_box_move = moved_place.as_ref().projection == [ProjectionElem::Deref]\n                     && self.body.local_decls[moved_place.local].ty.is_box();\n \n                 !is_box_move"}, {"sha": "82c0b924f287e3330facfed2e52b6bb43d654249", "filename": "compiler/rustc_mir/src/transform/match_branches.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fmatch_branches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fmatch_branches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fmatch_branches.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -63,7 +63,7 @@ impl<'tcx> MirPass<'tcx> for MatchBranchSimplification {\n             };\n \n             // Check that destinations are identical, and if not, then don't optimize this block\n-            if &bbs[first].terminator().kind != &bbs[second].terminator().kind {\n+            if bbs[first].terminator().kind != bbs[second].terminator().kind {\n                 continue;\n             }\n "}, {"sha": "14f8c7b09f8e10b1b58b7c7b8d0597bcbebb87f7", "filename": "compiler/rustc_resolve/src/late/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -1886,9 +1886,8 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n                         if snippet.starts_with('&') && !snippet.starts_with(\"&'\") {\n                             introduce_suggestion\n                                 .push((param.span, format!(\"&'a {}\", &snippet[1..])));\n-                        } else if snippet.starts_with(\"&'_ \") {\n-                            introduce_suggestion\n-                                .push((param.span, format!(\"&'a {}\", &snippet[4..])));\n+                        } else if let Some(stripped) = snippet.strip_prefix(\"&'_ \") {\n+                            introduce_suggestion.push((param.span, format!(\"&'a {}\", &stripped)));\n                         }\n                     }\n                 }"}, {"sha": "f52b64f488345edf1cfde7957f451d9cec3edbc6", "filename": "compiler/rustc_span/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_span%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_span%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Flib.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -1574,7 +1574,7 @@ fn normalize_src(src: &mut String, start_pos: BytePos) -> Vec<NormalizedPos> {\n \n /// Removes UTF-8 BOM, if any.\n fn remove_bom(src: &mut String, normalized_pos: &mut Vec<NormalizedPos>) {\n-    if src.starts_with(\"\\u{feff}\") {\n+    if src.starts_with('\\u{feff}') {\n         src.drain(..3);\n         normalized_pos.push(NormalizedPos { pos: BytePos(0), diff: 3 });\n     }"}, {"sha": "2d57c39f7c7e1ec2a1154d22ef6628a80984bf70", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/mod.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -1388,11 +1388,7 @@ impl<'a, 'tcx> InferCtxtPrivExt<'tcx> for InferCtxt<'a, 'tcx> {\n         trait_ref: &ty::PolyTraitRef<'tcx>,\n     ) {\n         let get_trait_impl = |trait_def_id| {\n-            self.tcx.find_map_relevant_impl(\n-                trait_def_id,\n-                trait_ref.skip_binder().self_ty(),\n-                |impl_def_id| Some(impl_def_id),\n-            )\n+            self.tcx.find_map_relevant_impl(trait_def_id, trait_ref.skip_binder().self_ty(), Some)\n         };\n         let required_trait_path = self.tcx.def_path_str(trait_ref.def_id());\n         let all_traits = self.tcx.all_traits(LOCAL_CRATE);"}, {"sha": "538c14c6b720e99cbd5cdb2cca17075e07721be0", "filename": "compiler/rustc_trait_selection/src/traits/fulfill.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcd2f2df67ac755b23f540a0657572eade281f12/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ffulfill.rs?ref=bcd2f2df67ac755b23f540a0657572eade281f12", "patch": "@@ -499,7 +499,7 @@ impl<'a, 'b, 'tcx> FulfillProcessor<'a, 'b, 'tcx> {\n                         Err(ErrorHandled::TooGeneric) => {\n                             pending_obligation.stalled_on = substs\n                                 .iter()\n-                                .filter_map(|ty| TyOrConstInferVar::maybe_from_generic_arg(ty))\n+                                .filter_map(TyOrConstInferVar::maybe_from_generic_arg)\n                                 .collect();\n                             ProcessResult::Unchanged\n                         }"}]}