{"sha": "d5c907890b0e9e05c66f49dc38318a256812e252", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1YzkwNzg5MGIwZTllMDVjNjZmNDlkYzM4MzE4YTI1NjgxMmUyNTI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-07-10T20:56:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-07-10T20:56:43Z"}, "message": "Rollup merge of #52195 - alexcrichton:no-tmp, r=pnkfelix\n\nrustc: Avoid /tmp/ in graphviz writing\n\nThis issue was reported to security@rust-lang.org by Sebastien Marie following\nour recent [security advisory][1]. Because `/tmp` is typically globally writable\nit's possible for one user to place symlinks in `/tmp` pointing to files in\nanother user's directories, causing `rustc` to overwrite the contents of\ninnocent files by accident.\n\nThis patch instead defaults the output path here to the cwd which should avoid\nthis issue.\n\n[1]: https://blog.rust-lang.org/2018/07/06/security-advisory-for-rustdoc.html", "tree": {"sha": "8b8267daa0ccd6803ff1c902a384932d20c5bee6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b8267daa0ccd6803ff1c902a384932d20c5bee6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5c907890b0e9e05c66f49dc38318a256812e252", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbRR2LCRBK7hj4Ov3rIwAAdHIIADd1fY8eOFYkCgKblccZ4sgk\nG7sBqu+Q63/sdCaY/uYogQBDHtXZOd2CeJcyOGpyxRVuINK5mJ+s3lGddGTEDqFG\nsvZixo7k4d6rsPMyz5bDtBdnIW+urh3EXxQ/Lmfl5WS1BA9eRyvez9Lq1SxZMPGf\nGQTOQNmoka9t/EoOlZY8fyA+oX16WatfIAR6tmRdieoponEZDjHH3ii6q2vh7WnS\nBwFHFAw6VtRnvIBnSwyKhaRbLsP6eva7qR5o63VDiyjxzgG5+Xp0SkUCURAOgo3P\n18+AhhzV5jJ6vqYU7Wtf5aOjZ/jcndxVjvHmMjYNPhXHQGDlT2hvONoroTokLV4=\n=mYYd\n-----END PGP SIGNATURE-----\n", "payload": "tree 8b8267daa0ccd6803ff1c902a384932d20c5bee6\nparent aa9ee687f3b41773e2ea3a3a5574fc213ee2976a\nparent bc09fcb990a7195db540b3dcb9f0f90e52213be2\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1531256203 +0200\ncommitter GitHub <noreply@github.com> 1531256203 +0200\n\nRollup merge of #52195 - alexcrichton:no-tmp, r=pnkfelix\n\nrustc: Avoid /tmp/ in graphviz writing\n\nThis issue was reported to security@rust-lang.org by Sebastien Marie following\nour recent [security advisory][1]. Because `/tmp` is typically globally writable\nit's possible for one user to place symlinks in `/tmp` pointing to files in\nanother user's directories, causing `rustc` to overwrite the contents of\ninnocent files by accident.\n\nThis patch instead defaults the output path here to the cwd which should avoid\nthis issue.\n\n[1]: https://blog.rust-lang.org/2018/07/06/security-advisory-for-rustdoc.html\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5c907890b0e9e05c66f49dc38318a256812e252", "html_url": "https://github.com/rust-lang/rust/commit/d5c907890b0e9e05c66f49dc38318a256812e252", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5c907890b0e9e05c66f49dc38318a256812e252/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa9ee687f3b41773e2ea3a3a5574fc213ee2976a", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa9ee687f3b41773e2ea3a3a5574fc213ee2976a", "html_url": "https://github.com/rust-lang/rust/commit/aa9ee687f3b41773e2ea3a3a5574fc213ee2976a"}, {"sha": "bc09fcb990a7195db540b3dcb9f0f90e52213be2", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc09fcb990a7195db540b3dcb9f0f90e52213be2", "html_url": "https://github.com/rust-lang/rust/commit/bc09fcb990a7195db540b3dcb9f0f90e52213be2"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "d76d33b99022275e3d49b1c2a1cecc46e7fdfa45", "filename": "src/librustc/infer/lexical_region_resolve/graphviz.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d5c907890b0e9e05c66f49dc38318a256812e252/src%2Flibrustc%2Finfer%2Flexical_region_resolve%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5c907890b0e9e05c66f49dc38318a256812e252/src%2Flibrustc%2Finfer%2Flexical_region_resolve%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Flexical_region_resolve%2Fgraphviz.rs?ref=d5c907890b0e9e05c66f49dc38318a256812e252", "patch": "@@ -39,14 +39,14 @@ use std::sync::atomic::{AtomicBool, Ordering};\n fn print_help_message() {\n     println!(\"\\\n -Z print-region-graph by default prints a region constraint graph for every \\n\\\n-function body, to the path `/tmp/constraints.nodeXXX.dot`, where the XXX is \\n\\\n+function body, to the path `constraints.nodeXXX.dot`, where the XXX is \\n\\\n replaced with the node id of the function under analysis.                   \\n\\\n                                                                             \\n\\\n To select one particular function body, set `RUST_REGION_GRAPH_NODE=XXX`,   \\n\\\n where XXX is the node id desired.                                           \\n\\\n                                                                             \\n\\\n To generate output to some path other than the default                      \\n\\\n-`/tmp/constraints.nodeXXX.dot`, set `RUST_REGION_GRAPH=/path/desired.dot`;  \\n\\\n+`constraints.nodeXXX.dot`, set `RUST_REGION_GRAPH=/path/desired.dot`;  \\n\\\n occurrences of the character `%` in the requested path will be replaced with\\n\\\n the node id of the function under analysis.                                 \\n\\\n                                                                             \\n\\\n@@ -90,7 +90,7 @@ pub fn maybe_print_constraints_for<'a, 'gcx, 'tcx>(\n             }\n \n             Ok(other_path) => other_path,\n-            Err(_) => \"/tmp/constraints.node%.dot\".to_string(),\n+            Err(_) => \"constraints.node%.dot\".to_string(),\n         };\n \n         if output_template.is_empty() {"}]}