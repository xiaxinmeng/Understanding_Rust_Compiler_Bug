{"sha": "4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjYmQzOTdjZTg2MWFlMGVlODIzYWI1NmQxZjc5N2RlZTY3ZTBiNjQ=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-09-27T19:38:11Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-10-01T23:16:08Z"}, "message": "Move prelude crate names into `Session`.\n\nAvoid hardcoding and special-casing the `std` crate name in the item\npath logic by moving the prelude crate name logic into the `Session`\ntype so it can be reused in the item path logic and resolve module.", "tree": {"sha": "aa2db63a2f697124b1fcf7ce50ff8eb2cfa8ffd1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa2db63a2f697124b1fcf7ce50ff8eb2cfa8ffd1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAluyqrgACgkQAXYLT59T\n8VRY4Q/8C7mGR3TTJMl2suz/RqBWiZPhWJKUF9VR7mkgOEUGza1APpaz2//LkDey\n3UiCa5ajyF2V/AFixvKRtH3aJSA9Wz5WFwGWC4hjEx7nZ0z4eQPOFJP1N6KjkGcs\n1l00RHRIGD1vkA/rXrRw6KGMboMNuQGnQSh+T+w6/J29ayKGk7+Wz3e0id92PQX8\nLadbFCoZhL+fYhVxGl7QQSpLbtWO0eLl0V7KGqvIwytKoswbVQLGcQ9fytKBBqJr\n1yRtZR8q7KXCdq8PmnhawrAeTO7vAJ4OD0+MO09wSXJZSLEYf3aL2he4rMieyjPG\nYUUOJDaqTzLQ6BeFonbM81uXUCo3PFYfsVQsHN64+nI9+DsCpABp9XTLCxOGq8xP\nctkB4iAywuAPFoFJpDM214UxZQf2xWz9twTGZiyPXalfTf1H30wkjXeR/m0rTZJP\npDTaRg0pHyqT1Ch2f+aVpNM9EJJEHsQODV5IhTxIochneo6UZ+nBlPid3hcH4ngB\nhWNbT5LbyyUk8hWhuHo0JOUyxqWJkSJs+ymBRvxwwVaGj8ffV/0NuwvvLHkDLXsc\nAKh4jmAt7K1iZ05Cvw4spJEBLXOfjmxE2JY0R6nCM6iuKPyshkDwihyv6QrhqopA\nt7X0PM9zYbuC3Bb7Fg6XFWGuw4kt9qZWWOZpUcHDH3CM4pZ7LB4=\n=2e9N\n-----END PGP SIGNATURE-----", "payload": "tree aa2db63a2f697124b1fcf7ce50ff8eb2cfa8ffd1\nparent 9e2d6e1e62802f7a42c900438b97fd3c5316dcb3\nauthor David Wood <david@davidtw.co> 1538077091 +0200\ncommitter David Wood <david@davidtw.co> 1538435768 +0200\n\nMove prelude crate names into `Session`.\n\nAvoid hardcoding and special-casing the `std` crate name in the item\npath logic by moving the prelude crate name logic into the `Session`\ntype so it can be reused in the item path logic and resolve module.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "html_url": "https://github.com/rust-lang/rust/commit/4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cbd397ce861ae0ee823ab56d1f797dee67e0b64/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e2d6e1e62802f7a42c900438b97fd3c5316dcb3", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e2d6e1e62802f7a42c900438b97fd3c5316dcb3", "html_url": "https://github.com/rust-lang/rust/commit/9e2d6e1e62802f7a42c900438b97fd3c5316dcb3"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "3c209a4324675a5b0681375b7f9b75869f0d2ae0", "filename": "src/librustc/session/mod.rs", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4cbd397ce861ae0ee823ab56d1f797dee67e0b64/src%2Flibrustc%2Fsession%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cbd397ce861ae0ee823ab56d1f797dee67e0b64/src%2Flibrustc%2Fsession%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fmod.rs?ref=4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "patch": "@@ -28,17 +28,16 @@ use util::common::ProfileQueriesMsg;\n use rustc_data_structures::base_n;\n use rustc_data_structures::sync::{self, Lrc, Lock, LockCell, OneThread, Once, RwLock};\n \n-use syntax::ast::NodeId;\n use errors::{self, DiagnosticBuilder, DiagnosticId, Applicability};\n use errors::emitter::{Emitter, EmitterWriter};\n+use syntax::ast::{self, NodeId};\n use syntax::edition::Edition;\n+use syntax::feature_gate::{self, AttributeType};\n use syntax::json::JsonEmitter;\n-use syntax::feature_gate;\n-use syntax::parse;\n-use syntax::parse::ParseSess;\n-use syntax::{ast, source_map};\n-use syntax::feature_gate::AttributeType;\n-use syntax_pos::{MultiSpan, Span, symbol::Symbol};\n+use syntax::source_map;\n+use syntax::symbol::Symbol;\n+use syntax::parse::{self, ParseSess};\n+use syntax_pos::{MultiSpan, Span};\n use util::profiling::SelfProfiler;\n \n use rustc_target::spec::PanicStrategy;"}, {"sha": "4e7783a00cb86358d5c391a0e462ce7c257d7de4", "filename": "src/librustc/ty/item_path.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4cbd397ce861ae0ee823ab56d1f797dee67e0b64/src%2Flibrustc%2Fty%2Fitem_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cbd397ce861ae0ee823ab56d1f797dee67e0b64/src%2Flibrustc%2Fty%2Fitem_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fitem_path.rs?ref=4cbd397ce861ae0ee823ab56d1f797dee67e0b64", "patch": "@@ -281,7 +281,9 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n                     // In particular, don't recurse to print the crate root if we\n                     // just printed `std`. In doing this, we are able to add\n                     // `crate::` to trait import suggestions.\n-                    DefPathData::CrateRoot if data.as_interned_str() == \"std\" => {},\n+                    DefPathData::CrateRoot if self.sess.extern_prelude.contains(\n+                        &data.as_interned_str().as_symbol()\n+                    ) => {},\n                     _ => self.push_item_path(buffer, parent_def_id),\n                 }\n "}]}