{"sha": "df1ac7aa63ea89a067c57663eab035f7b83f6933", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRmMWFjN2FhNjNlYTg5YTA2N2M1NzY2M2VhYjAzNWY3YjgzZjY5MzM=", "commit": {"author": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-02-03T09:11:38Z"}, "committer": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-02-03T22:39:40Z"}, "message": "Deprecate in-tree `rand`, `std::rand` and `#[derive(Rand)]`.\n\nUse the crates.io crate `rand` (version 0.1 should be a drop in\nreplacement for `std::rand`) and `rand_macros` (`#[derive_Rand]` should\nbe a drop-in replacement).\n\n[breaking-change]", "tree": {"sha": "f053537b23c43f7e1badcc0409e740202461bb9b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f053537b23c43f7e1badcc0409e740202461bb9b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/df1ac7aa63ea89a067c57663eab035f7b83f6933", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/df1ac7aa63ea89a067c57663eab035f7b83f6933", "html_url": "https://github.com/rust-lang/rust/commit/df1ac7aa63ea89a067c57663eab035f7b83f6933", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/df1ac7aa63ea89a067c57663eab035f7b83f6933/comments", "author": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "url": "https://api.github.com/repos/rust-lang/rust/commits/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "html_url": "https://github.com/rust-lang/rust/commit/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a"}], "stats": {"total": 126, "additions": 26, "deletions": 100}, "files": [{"sha": "a8a62358d3afe41f578c2a7ca2701a7db295f717", "filename": "src/etc/generate-deriving-span-tests.py", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Fetc%2Fgenerate-deriving-span-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Fetc%2Fgenerate-deriving-span-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fgenerate-deriving-span-tests.py?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -114,8 +114,7 @@ def write_file(name, string):\n     'Encodable': (0, [], 0), # FIXME: quoting gives horrible spans\n }\n \n-for (trait, supers, errs) in [('Rand', [], 1),\n-                              ('Clone', [], 1),\n+for (trait, supers, errs) in [('Clone', [], 1),\n                               ('PartialEq', [], 2),\n                               ('PartialOrd', ['PartialEq'], 8),\n                               ('Eq', ['PartialEq'], 1),"}, {"sha": "dea2d509676bfefc942a42f2510e94a5ecdc81d5", "filename": "src/libcollections/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibcollections%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibcollections%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Flib.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -34,6 +34,7 @@\n #![feature(unicode)]\n #![feature(unsafe_destructor, slicing_syntax)]\n #![cfg_attr(test, feature(test))]\n+#![cfg_attr(test, allow(deprecated))] // rand\n \n #![no_std]\n "}, {"sha": "50066ab07f555f2f53864584bfce48e9d7fff010", "filename": "src/libcoretest/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibcoretest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibcoretest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Flib.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -12,6 +12,7 @@\n #![feature(int_uint)]\n #![feature(unboxed_closures)]\n #![feature(unsafe_destructor, slicing_syntax)]\n+#![allow(deprecated)] // rand\n \n extern crate core;\n extern crate test;"}, {"sha": "d42849ed758fc7ef56f3043557e9d5c5958a6071", "filename": "src/libflate/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibflate%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibflate%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibflate%2Flib.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -130,6 +130,7 @@ pub fn inflate_bytes_zlib(bytes: &[u8]) -> Option<Bytes> {\n \n #[cfg(test)]\n mod tests {\n+    #![allow(deprecated)]\n     use super::{inflate_bytes, deflate_bytes};\n     use std::rand;\n     use std::rand::Rng;"}, {"sha": "3b78e5f88ee98ebaa67b796a918cb58a480c865d", "filename": "src/librand/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibrand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibrand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Flib.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -28,6 +28,10 @@\n #![feature(staged_api)]\n #![staged_api]\n #![feature(core)]\n+#![deprecated(reason = \"use the crates.io `rand` library instead\",\n+              since = \"1.0.0-alpha\")]\n+\n+#![allow(deprecated)]\n \n #[macro_use]\n extern crate core;"}, {"sha": "4dc95088e983a17a15976fee01a557f4d83c138f", "filename": "src/librustc_back/sha2.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibrustc_back%2Fsha2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibrustc_back%2Fsha2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_back%2Fsha2.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -528,6 +528,7 @@ static H256: [u32; 8] = [\n \n #[cfg(test)]\n mod tests {\n+    #![allow(deprecated)]\n     extern crate rand;\n \n     use self::rand::Rng;"}, {"sha": "449c8a9e5dc3a4cb2f17d16fa7a7443f2bef3a58", "filename": "src/libstd/collections/hash/map.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -1566,6 +1566,7 @@ pub struct RandomState {\n impl RandomState {\n     /// Construct a new `RandomState` that is initialized with random keys.\n     #[inline]\n+    #[allow(deprecated)]\n     pub fn new() -> RandomState {\n         let mut r = rand::thread_rng();\n         RandomState { k0: r.gen(), k1: r.gen() }"}, {"sha": "21197f639ad725eba6397be1e9ba11c5f58bd777", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -142,7 +142,7 @@ extern crate core;\n #[macro_reexport(vec)]\n extern crate \"collections\" as core_collections;\n \n-extern crate \"rand\" as core_rand;\n+#[allow(deprecated)] extern crate \"rand\" as core_rand;\n extern crate alloc;\n extern crate unicode;\n extern crate libc;"}, {"sha": "9c4741b3ce316f0eefa0e06343eda48fe8f223d5", "filename": "src/libstd/num/strconv.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fnum%2Fstrconv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fnum%2Fstrconv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fstrconv.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -459,6 +459,7 @@ mod tests {\n \n #[cfg(test)]\n mod bench {\n+    #![allow(deprecated)] // rand\n     extern crate test;\n \n     mod uint {"}, {"sha": "82ede30cb91f17ea6e5c176361ddf31136ca7e0e", "filename": "src/libstd/old_io/fs.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fold_io%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fold_io%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fold_io%2Ffs.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -822,6 +822,7 @@ fn access_string(access: FileAccess) -> &'static str {\n #[allow(unused_imports)]\n #[allow(unused_variables)]\n #[allow(unused_mut)]\n+#[allow(deprecated)] // rand\n mod test {\n     use prelude::v1::*;\n     use old_io::{SeekSet, SeekCur, SeekEnd, Read, Open, ReadWrite, FileType};"}, {"sha": "d2c3a8e60ad0b16339edc0ed7ea432c8e5c7d377", "filename": "src/libstd/old_io/tempfile.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fold_io%2Ftempfile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fold_io%2Ftempfile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fold_io%2Ftempfile.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n //! Temporary files and directories\n+#![allow(deprecated)] // rand\n \n use old_io::{fs, IoError, IoErrorKind, IoResult};\n use old_io;"}, {"sha": "7a9f61f1d64c1d2b7657fa6628899528f0cc5a9b", "filename": "src/libstd/os.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fos.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -1425,6 +1425,8 @@ mod arch_consts {\n \n #[cfg(test)]\n mod tests {\n+    #![allow(deprecated)] // rand\n+\n     use prelude::v1::*;\n \n     use iter::repeat;"}, {"sha": "48ff6db43920ddd89326e83aae9ac3cdc35d74f8", "filename": "src/libstd/rand/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Frand%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Frand%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frand%2Fmod.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -220,6 +220,9 @@\n //! ```\n \n #![unstable(feature = \"rand\")]\n+#![deprecated(reason = \"use the crates.io `rand` library instead\",\n+              since = \"1.0.0-alpha\")]\n+#![allow(deprecated)]\n \n use cell::RefCell;\n use clone::Clone;"}, {"sha": "63ca5b5669ac5409cbfc69f43842ec725133b319", "filename": "src/libstd/sync/rwlock.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fsync%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibstd%2Fsync%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Frwlock.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -383,6 +383,8 @@ impl<'a, T> Drop for RwLockWriteGuard<'a, T> {\n \n #[cfg(test)]\n mod tests {\n+    #![allow(deprecated)] // rand\n+\n     use prelude::v1::*;\n \n     use rand::{self, Rng};"}, {"sha": "ec6eb9bee610fd0dcb1365080fb46749c0b1cde1", "filename": "src/libsyntax/ext/deriving/rand.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Frand.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -24,6 +24,10 @@ pub fn expand_deriving_rand<F>(cx: &mut ExtCtxt,\n                                push: F) where\n     F: FnOnce(P<Item>),\n {\n+    cx.span_warn(span,\n+                 \"`#[derive(Rand)]` is deprecated in favour of `#[derive_Rand]` from \\\n+                  `rand_macros` on crates.io\");\n+\n     let trait_def = TraitDef {\n         span: span,\n         attributes: Vec::new(),"}, {"sha": "4d3542c586b0aaa46c032161a2ceb33a7b35819d", "filename": "src/test/compile-fail/deriving-span-Rand-enum-struct-variant.rs", "status": "removed", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum-struct-variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum-struct-variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum-struct-variant.rs?ref=eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "patch": "@@ -1,25 +0,0 @@\n-// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// This file was auto-generated using 'src/etc/generate-deriving-span-tests.py'\n-\n-extern crate rand;\n-\n-\n-struct Error;\n-\n-#[derive(Rand)]\n-enum Enum {\n-   A {\n-     x: Error //~ ERROR\n-   }\n-}\n-\n-fn main() {}"}, {"sha": "dcfdbdc8062ce6f4df1d45e2610fe02b39c4aa17", "filename": "src/test/compile-fail/deriving-span-Rand-enum.rs", "status": "removed", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-enum.rs?ref=eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "patch": "@@ -1,25 +0,0 @@\n-// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// This file was auto-generated using 'src/etc/generate-deriving-span-tests.py'\n-\n-extern crate rand;\n-\n-\n-struct Error;\n-\n-#[derive(Rand)]\n-enum Enum {\n-   A(\n-     Error //~ ERROR\n-     )\n-}\n-\n-fn main() {}"}, {"sha": "73d89693b2bc458d2e84685a36d89a5eec6d91c0", "filename": "src/test/compile-fail/deriving-span-Rand-struct.rs", "status": "removed", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-struct.rs?ref=eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "patch": "@@ -1,23 +0,0 @@\n-// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// This file was auto-generated using 'src/etc/generate-deriving-span-tests.py'\n-\n-extern crate rand;\n-\n-\n-struct Error;\n-\n-#[derive(Rand)]\n-struct Struct {\n-    x: Error //~ ERROR\n-}\n-\n-fn main() {}"}, {"sha": "8038bf3ff092501ba959bf4815cb2d6f1a5487a4", "filename": "src/test/compile-fail/deriving-span-Rand-tuple-struct.rs", "status": "removed", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-tuple-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-tuple-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fderiving-span-Rand-tuple-struct.rs?ref=eaf4c5c784637f3df8bdebc6ec21dbd4bc69420a", "patch": "@@ -1,23 +0,0 @@\n-// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// This file was auto-generated using 'src/etc/generate-deriving-span-tests.py'\n-\n-extern crate rand;\n-\n-\n-struct Error;\n-\n-#[derive(Rand)]\n-struct Struct(\n-    Error //~ ERROR\n-);\n-\n-fn main() {}"}, {"sha": "ada0cd2bc98f82cf035e817aa62697cebecdb9af", "filename": "src/test/compile-fail/lint-unused-extern-crate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Ftest%2Fcompile-fail%2Flint-unused-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Ftest%2Fcompile-fail%2Flint-unused-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-unused-extern-crate.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -12,6 +12,7 @@\n \n #![deny(unused_extern_crates)]\n #![allow(unused_variables)]\n+#![allow(deprecated)]\n #![feature(libc)]\n #![feature(collections)]\n #![feature(rand)]"}, {"sha": "42a0f41dd97c3921ffdc50b02e8e461eac9fae46", "filename": "src/test/compile-fail/macros-nonfatal-errors.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df1ac7aa63ea89a067c57663eab035f7b83f6933/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs?ref=df1ac7aa63ea89a067c57663eab035f7b83f6933", "patch": "@@ -15,7 +15,6 @@\n #![feature(trace_macros, concat_idents)]\n \n #[derive(Default, //~ ERROR\n-           Rand, //~ ERROR\n            Zero)] //~ ERROR\n enum CantDeriveThose {}\n "}]}