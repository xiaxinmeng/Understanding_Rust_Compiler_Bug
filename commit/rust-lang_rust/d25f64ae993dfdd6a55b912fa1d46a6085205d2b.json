{"sha": "d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "node_id": "C_kwDOAAsO6NoAKGQyNWY2NGFlOTkzZGZkZDZhNTViOTEyZmExZDQ2YTYwODUyMDVkMmI", "commit": {"author": {"name": "Raiyan", "email": "raiyan.business@gmail.com", "date": "2022-05-26T02:01:55Z"}, "committer": {"name": "Raiyan", "email": "raiyan.business@gmail.com", "date": "2022-05-26T02:01:55Z"}, "message": "feat: refactored bootstrap files to use stderr consistently", "tree": {"sha": "f1c8b733a59ce0790efc61fed3ffd23765d0ab84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1c8b733a59ce0790efc61fed3ffd23765d0ab84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "html_url": "https://github.com/rust-lang/rust/commit/d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/comments", "author": {"login": "raiyansayeed", "id": 28673104, "node_id": "MDQ6VXNlcjI4NjczMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/28673104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raiyansayeed", "html_url": "https://github.com/raiyansayeed", "followers_url": "https://api.github.com/users/raiyansayeed/followers", "following_url": "https://api.github.com/users/raiyansayeed/following{/other_user}", "gists_url": "https://api.github.com/users/raiyansayeed/gists{/gist_id}", "starred_url": "https://api.github.com/users/raiyansayeed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raiyansayeed/subscriptions", "organizations_url": "https://api.github.com/users/raiyansayeed/orgs", "repos_url": "https://api.github.com/users/raiyansayeed/repos", "events_url": "https://api.github.com/users/raiyansayeed/events{/privacy}", "received_events_url": "https://api.github.com/users/raiyansayeed/received_events", "type": "User", "site_admin": false}, "committer": {"login": "raiyansayeed", "id": 28673104, "node_id": "MDQ6VXNlcjI4NjczMTA0", "avatar_url": "https://avatars.githubusercontent.com/u/28673104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raiyansayeed", "html_url": "https://github.com/raiyansayeed", "followers_url": "https://api.github.com/users/raiyansayeed/followers", "following_url": "https://api.github.com/users/raiyansayeed/following{/other_user}", "gists_url": "https://api.github.com/users/raiyansayeed/gists{/gist_id}", "starred_url": "https://api.github.com/users/raiyansayeed/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raiyansayeed/subscriptions", "organizations_url": "https://api.github.com/users/raiyansayeed/orgs", "repos_url": "https://api.github.com/users/raiyansayeed/repos", "events_url": "https://api.github.com/users/raiyansayeed/events{/privacy}", "received_events_url": "https://api.github.com/users/raiyansayeed/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bdcb6a99e853732f8ec050ae4986aa3af51d44c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdcb6a99e853732f8ec050ae4986aa3af51d44c5", "html_url": "https://github.com/rust-lang/rust/commit/bdcb6a99e853732f8ec050ae4986aa3af51d44c5"}], "stats": {"total": 80, "additions": 40, "deletions": 40}, "files": [{"sha": "0b0e53f39c860e911228e04a02b13dbb7a81f606", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -227,7 +227,7 @@ impl StepDescription {\n \n     fn is_excluded(&self, builder: &Builder<'_>, pathset: &PathSet) -> bool {\n         if builder.config.exclude.iter().any(|e| pathset.has(&e.path, e.kind)) {\n-            eprintln!(\"Skipping {:?} because it is excluded\", pathset);\n+            println!(\"Skipping {:?} because it is excluded\", pathset);\n             return true;\n         }\n "}, {"sha": "a00877b29705151a34e3acc947af1840f695dd53", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -1426,7 +1426,7 @@ pub fn stream_cargo(\n                 cb(msg)\n             }\n             // If this was informational, just print it out and continue\n-            Err(_) => println!(\"{}\", line),\n+            Err(_) => eprintln!(\"{}\", line),\n         }\n     }\n "}, {"sha": "342f1d4d505ea37742ecb914df1af8f112462258", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -766,7 +766,7 @@ impl Config {\n             {\n                 Ok(table) => table,\n                 Err(err) => {\n-                    println!(\"failed to parse TOML configuration '{}': {}\", file.display(), err);\n+                    eprintln!(\"failed to parse TOML configuration '{}': {}\", file.display(), err);\n                     process::exit(2);\n                 }\n             }"}, {"sha": "9684332e6fbb6d4858109bac028adf5a67931a3b", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -37,7 +37,7 @@ pub fn tmpdir(builder: &Builder<'_>) -> PathBuf {\n \n fn missing_tool(tool_name: &str, skip: bool) {\n     if skip {\n-        println!(\"Unable to build {}, skipping dist\", tool_name)\n+        eprintln!(\"Unable to build {}, skipping dist\", tool_name)\n     } else {\n         panic!(\"Unable to build {}\", tool_name)\n     }"}, {"sha": "8ffd559fb89bf2e36879c8be1369d42ad81d2d17", "filename": "src/bootstrap/flags.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fflags.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -365,8 +365,8 @@ To learn more about a subcommand, run `./x.py <subcommand> -h`\",\n             }\n         }\n         if !pass_sanity_check {\n-            println!(\"{}\\n\", subcommand_help);\n-            println!(\n+            eprintln!(\"{}\\n\", subcommand_help);\n+            eprintln!(\n                 \"Sorry, I couldn't figure out which subcommand you were trying to specify.\\n\\\n                  You may need to move some options to after the subcommand.\\n\"\n             );\n@@ -530,7 +530,7 @@ Arguments:\n             Kind::Build => Subcommand::Build { paths },\n             Kind::Check => {\n                 if matches.opt_present(\"all-targets\") {\n-                    eprintln!(\n+                    println!(\n                         \"Warning: --all-targets is now on by default and does not need to be passed explicitly.\"\n                     );\n                 }\n@@ -603,7 +603,7 @@ Arguments:\n             if matches.opt_str(\"keep-stage\").is_some()\n                 || matches.opt_str(\"keep-stage-std\").is_some()\n             {\n-                println!(\"--keep-stage not yet supported for x.py check\");\n+                eprintln!(\"--keep-stage not yet supported for x.py check\");\n                 process::exit(1);\n             }\n         }"}, {"sha": "d1a450f1bff8ed7b8ee2df7775a004573e9150bc", "filename": "src/bootstrap/format.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fformat.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -96,7 +96,7 @@ pub fn format(build: &Build, check: bool, paths: &[PathBuf]) {\n                     entry.split(' ').nth(1).expect(\"every git status entry should list a path\")\n                 });\n             for untracked_path in untracked_paths {\n-                eprintln!(\"skip untracked path {} during rustfmt invocations\", untracked_path);\n+                println!(\"skip untracked path {} during rustfmt invocations\", untracked_path);\n                 // The leading `/` makes it an exact match against the\n                 // repository root, rather than a glob. Without that, if you\n                 // have `foo.rs` in the repository root it will also match\n@@ -105,10 +105,10 @@ pub fn format(build: &Build, check: bool, paths: &[PathBuf]) {\n                 ignore_fmt.add(&format!(\"!/{}\", untracked_path)).expect(&untracked_path);\n             }\n         } else {\n-            eprintln!(\"Not in git tree. Skipping git-aware format checks\");\n+            println!(\"Not in git tree. Skipping git-aware format checks\");\n         }\n     } else {\n-        eprintln!(\"Could not find usable git. Skipping git-aware format checks\");\n+        println!(\"Could not find usable git. Skipping git-aware format checks\");\n     }\n     let ignore_fmt = ignore_fmt.build().unwrap();\n "}, {"sha": "188b80d8b3ae8b92296a7432c515ef71e7cd31c1", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -686,9 +686,9 @@ impl Build {\n         // Check for postponed failures from `test --no-fail-fast`.\n         let failures = self.delayed_failures.borrow();\n         if failures.len() > 0 {\n-            println!(\"\\n{} command(s) did not execute successfully:\\n\", failures.len());\n+            eprintln!(\"\\n{} command(s) did not execute successfully:\\n\", failures.len());\n             for failure in failures.iter() {\n-                println!(\"  - {}\\n\", failure);\n+                eprintln!(\"  - {}\\n\", failure);\n             }\n             process::exit(1);\n         }"}, {"sha": "ab8d36afde7218e2e51d0b324754f05032e4fe35", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -138,10 +138,10 @@ pub(crate) fn maybe_download_ci_llvm(builder: &Builder<'_>) {\n     let llvm_sha = llvm_sha.trim();\n \n     if llvm_sha == \"\" {\n-        println!(\"error: could not find commit hash for downloading LLVM\");\n-        println!(\"help: maybe your repository history is too shallow?\");\n-        println!(\"help: consider disabling `download-ci-llvm`\");\n-        println!(\"help: or fetch enough history to include one upstream commit\");\n+        eprintln!(\"error: could not find commit hash for downloading LLVM\");\n+        eprintln!(\"help: maybe your repository history is too shallow?\");\n+        eprintln!(\"help: consider disabling `download-ci-llvm`\");\n+        eprintln!(\"help: or fetch enough history to include one upstream commit\");\n         panic!();\n     }\n "}, {"sha": "82f55440ce50c4e6f55f586e9f11e360d440812c", "filename": "src/bootstrap/setup.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fsetup.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Fsetup.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsetup.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -85,12 +85,12 @@ pub fn setup(config: &Config, profile: Profile) {\n     let path = &config.config;\n \n     if path.exists() {\n-        println!(\n+        eprintln!(\n             \"error: you asked `x.py` to setup a new config file, but one already exists at `{}`\",\n             path.display()\n         );\n-        println!(\"help: try adding `profile = \\\"{}\\\"` at the top of {}\", profile, path.display());\n-        println!(\n+        eprintln!(\"help: try adding `profile = \\\"{}\\\"` at the top of {}\", profile, path.display());\n+        eprintln!(\n             \"note: this will use the configuration in {}\",\n             profile.include_path(&config.src).display()\n         );\n@@ -115,7 +115,7 @@ pub fn setup(config: &Config, profile: Profile) {\n     println!();\n \n     if !rustup_installed() && profile != Profile::User {\n-        println!(\"`rustup` is not installed; cannot link `stage1` toolchain\");\n+        eprintln!(\"`rustup` is not installed; cannot link `stage1` toolchain\");\n     } else if stage_dir_exists(&stage_path[..]) {\n         attempt_toolchain_link(&stage_path[..]);\n     }\n@@ -173,7 +173,7 @@ fn attempt_toolchain_link(stage_path: &str) {\n     }\n \n     if !ensure_stage1_toolchain_placeholder_exists(stage_path) {\n-        println!(\n+        eprintln!(\n             \"Failed to create a template for stage 1 toolchain or confirm that it already exists\"\n         );\n         return;\n@@ -184,8 +184,8 @@ fn attempt_toolchain_link(stage_path: &str) {\n             \"Added `stage1` rustup toolchain; try `cargo +stage1 build` on a separate rust project to run a newly-built toolchain\"\n         );\n     } else {\n-        println!(\"`rustup` failed to link stage 1 build to `stage1` toolchain\");\n-        println!(\n+        eprintln!(\"`rustup` failed to link stage 1 build to `stage1` toolchain\");\n+        eprintln!(\n             \"To manually link stage 1 build to `stage1` toolchain, run:\\n\n             `rustup toolchain link stage1 {}`\",\n             &stage_path\n@@ -292,8 +292,8 @@ pub fn interactive_path() -> io::Result<Profile> {\n         break match parse_with_abbrev(&input) {\n             Ok(profile) => profile,\n             Err(err) => {\n-                println!(\"error: {}\", err);\n-                println!(\"note: press Ctrl+C to exit\");\n+                eprintln!(\"error: {}\", err);\n+                eprintln!(\"note: press Ctrl+C to exit\");\n                 continue;\n             }\n         };\n@@ -320,8 +320,8 @@ undesirable, simply delete the `pre-push` file from .git/hooks.\"\n             \"y\" | \"yes\" => true,\n             \"n\" | \"no\" | \"\" => false,\n             _ => {\n-                println!(\"error: unrecognized option '{}'\", input.trim());\n-                println!(\"note: press Ctrl+C to exit\");\n+                eprintln!(\"error: unrecognized option '{}'\", input.trim());\n+                eprintln!(\"note: press Ctrl+C to exit\");\n                 continue;\n             }\n         };\n@@ -337,7 +337,7 @@ undesirable, simply delete the `pre-push` file from .git/hooks.\"\n         ));\n         let dst = git.join(\"hooks\").join(\"pre-push\");\n         match fs::hard_link(src, &dst) {\n-            Err(e) => println!(\n+            Err(e) => eprintln!(\n                 \"error: could not create hook {}: do you already have the git hook installed?\\n{}\",\n                 dst.display(),\n                 e"}, {"sha": "9dd4533c6d2d6ff5072c548f7bd9fbb4f2bc01b9", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -152,43 +152,43 @@ impl Step for ToolBuild {\n         });\n \n         if is_expected && !duplicates.is_empty() {\n-            println!(\n+            eprintln!(\n                 \"duplicate artifacts found when compiling a tool, this \\\n                       typically means that something was recompiled because \\\n                       a transitive dependency has different features activated \\\n                       than in a previous build:\\n\"\n             );\n-            println!(\n+            eprintln!(\n                 \"the following dependencies are duplicated although they \\\n                       have the same features enabled:\"\n             );\n             let (same, different): (Vec<_>, Vec<_>) =\n                 duplicates.into_iter().partition(|(_, cur, prev)| cur.2 == prev.2);\n             for (id, cur, prev) in same {\n-                println!(\"  {}\", id);\n+                eprintln!(\"  {}\", id);\n                 // same features\n-                println!(\"    `{}` ({:?})\\n    `{}` ({:?})\", cur.0, cur.1, prev.0, prev.1);\n+                eprintln!(\"    `{}` ({:?})\\n    `{}` ({:?})\", cur.0, cur.1, prev.0, prev.1);\n             }\n-            println!(\"the following dependencies have different features:\");\n+            eprintln!(\"the following dependencies have different features:\");\n             for (id, cur, prev) in different {\n-                println!(\"  {}\", id);\n+                eprintln!(\"  {}\", id);\n                 let cur_features: HashSet<_> = cur.2.into_iter().collect();\n                 let prev_features: HashSet<_> = prev.2.into_iter().collect();\n-                println!(\n+                eprintln!(\n                     \"    `{}` additionally enabled features {:?} at {:?}\",\n                     cur.0,\n                     &cur_features - &prev_features,\n                     cur.1\n                 );\n-                println!(\n+                eprintln!(\n                     \"    `{}` additionally enabled features {:?} at {:?}\",\n                     prev.0,\n                     &prev_features - &cur_features,\n                     prev.1\n                 );\n             }\n-            println!();\n-            println!(\n+            eprintln!();\n+            eprintln!(\n                 \"to fix this you will probably want to edit the local \\\n                       src/tools/rustc-workspace-hack/Cargo.toml crate, as \\\n                       that will update the dependency graph to ensure that \\"}, {"sha": "51d9a83527bffb3da54d9672c6a3f980bea75d10", "filename": "src/bootstrap/util.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d25f64ae993dfdd6a55b912fa1d46a6085205d2b/src%2Fbootstrap%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Futil.rs?ref=d25f64ae993dfdd6a55b912fa1d46a6085205d2b", "patch": "@@ -437,7 +437,7 @@ fn dir_up_to_date(src: &Path, threshold: SystemTime) -> bool {\n }\n \n fn fail(s: &str) -> ! {\n-    println!(\"\\n\\n{}\\n\\n\", s);\n+    eprintln!(\"\\n\\n{}\\n\\n\", s);\n     std::process::exit(1);\n }\n "}]}