{"sha": "cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmNWQ0YTFiNDVkYmZmYWQzM2M1MjM2YmZiOTYyMGJkOWUyMDE0YjM=", "commit": {"author": {"name": "phil", "email": "uniphil@gmail.com", "date": "2019-02-18T03:32:58Z"}, "committer": {"name": "phil", "email": "uniphil@gmail.com", "date": "2019-02-18T16:39:40Z"}, "message": "Add failing test for #3778 write_with_newline\n\nLiteral `\\n` characters (not a newline) in a `r\"raw\"` string should not\nfail the lint.\n\nThis affects both write_with_newline and print_with_newline, so it is added in\nboth places.\n\nI also copied a missing test case from write_with_newline over to\nprint_with_newline and added a note that one of those tests is supposed to\nfail.", "tree": {"sha": "7f9e6cdec5aba57e6f02eb6e9554041cfd810125", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f9e6cdec5aba57e6f02eb6e9554041cfd810125"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "html_url": "https://github.com/rust-lang/rust/commit/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/comments", "author": {"login": "uniphil", "id": 205128, "node_id": "MDQ6VXNlcjIwNTEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/205128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uniphil", "html_url": "https://github.com/uniphil", "followers_url": "https://api.github.com/users/uniphil/followers", "following_url": "https://api.github.com/users/uniphil/following{/other_user}", "gists_url": "https://api.github.com/users/uniphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/uniphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uniphil/subscriptions", "organizations_url": "https://api.github.com/users/uniphil/orgs", "repos_url": "https://api.github.com/users/uniphil/repos", "events_url": "https://api.github.com/users/uniphil/events{/privacy}", "received_events_url": "https://api.github.com/users/uniphil/received_events", "type": "User", "site_admin": false}, "committer": {"login": "uniphil", "id": 205128, "node_id": "MDQ6VXNlcjIwNTEyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/205128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uniphil", "html_url": "https://github.com/uniphil", "followers_url": "https://api.github.com/users/uniphil/followers", "following_url": "https://api.github.com/users/uniphil/following{/other_user}", "gists_url": "https://api.github.com/users/uniphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/uniphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uniphil/subscriptions", "organizations_url": "https://api.github.com/users/uniphil/orgs", "repos_url": "https://api.github.com/users/uniphil/repos", "events_url": "https://api.github.com/users/uniphil/events{/privacy}", "received_events_url": "https://api.github.com/users/uniphil/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d28d9f02a9059eb449521a62fcedd8cca104b3f", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d28d9f02a9059eb449521a62fcedd8cca104b3f", "html_url": "https://github.com/rust-lang/rust/commit/2d28d9f02a9059eb449521a62fcedd8cca104b3f"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "9df4b9052de70925e3d28b2ae7ee1b42f5cc66f7", "filename": "tests/ui/print_with_newline.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fprint_with_newline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fprint_with_newline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprint_with_newline.rs?ref=cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "patch": "@@ -21,4 +21,12 @@ fn main() {\n     print!(\"Hello {} {}\\n\\n\", \"world\", \"#2\");\n     println!(\"\\ndon't\\nwarn\\nfor\\nmultiple\\nnewlines\\n\"); // #3126\n     println!(\"\\nbla\\n\\n\"); // #3126\n+\n+    // Escaping\n+    print!(\"\\\\n\"); // #3514\n+    print!(\"\\\\\\n\"); // should fail\n+    print!(\"\\\\\\\\n\");\n+\n+    // Raw strings\n+    print!(r\"\\n\"); // #3778\n }"}, {"sha": "1d89a16e0904656f155edcb7a8e288fc11328759", "filename": "tests/ui/print_with_newline.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fprint_with_newline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fprint_with_newline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fprint_with_newline.stderr?ref=cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "patch": "@@ -24,5 +24,11 @@ error: using `print!()` with a format string that ends in a single newline, cons\n LL |     print!(\"{}/n\", 1265);\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 4 previous errors\n+error: using `print!()` with a format string that ends in a single newline, consider using `println!()` instead\n+  --> $DIR/print_with_newline.rs:27:5\n+   |\n+LL |     print!(\"//n\"); // should fail\n+   |     ^^^^^^^^^^^^^^\n+\n+error: aborting due to 5 previous errors\n "}, {"sha": "3575dd6da8020d1664e792e406c6dabbaf2e1454", "filename": "tests/ui/write_with_newline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fwrite_with_newline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fwrite_with_newline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fwrite_with_newline.rs?ref=cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "patch": "@@ -29,7 +29,7 @@ fn main() {\n \n     // Escaping\n     write!(&mut v, \"\\\\n\"); // #3514\n-    write!(&mut v, \"\\\\\\n\");\n+    write!(&mut v, \"\\\\\\n\"); // should fail\n     write!(&mut v, \"\\\\\\\\n\");\n \n     // Raw strings"}, {"sha": "b0761f3b081b1872f703ad09a1042773e71252e1", "filename": "tests/ui/write_with_newline.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fwrite_with_newline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3/tests%2Fui%2Fwrite_with_newline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fwrite_with_newline.stderr?ref=cf5d4a1b45dbffad33c5236bfb9620bd9e2014b3", "patch": "@@ -27,7 +27,7 @@ LL |     write!(&mut v, \"{}/n\", 1265);\n error: using `write!()` with a format string that ends in a single newline, consider using `writeln!()` instead\n   --> $DIR/write_with_newline.rs:32:5\n    |\n-LL |     write!(&mut v, \"//n\");\n+LL |     write!(&mut v, \"//n\"); // should fail\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 5 previous errors"}]}