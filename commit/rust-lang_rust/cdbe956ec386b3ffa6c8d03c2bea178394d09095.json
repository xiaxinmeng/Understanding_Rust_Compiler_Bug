{"sha": "cdbe956ec386b3ffa6c8d03c2bea178394d09095", "node_id": "C_kwDOAAsO6NoAKGNkYmU5NTZlYzM4NmIzZmZhNmM4ZDAzYzJiZWExNzgzOTRkMDkwOTU", "commit": {"author": {"name": "Augie Fackler", "email": "augie@google.com", "date": "2022-08-04T15:31:01Z"}, "committer": {"name": "Augie Fackler", "email": "augie@google.com", "date": "2022-08-04T15:31:57Z"}, "message": "RustWrapper: update for TypedPointerType in LLVM\n\nThis is a result of https://reviews.llvm.org/D130592.", "tree": {"sha": "d00122edb92921e6c29eac9f3d0d6f8d0018da87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d00122edb92921e6c29eac9f3d0d6f8d0018da87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cdbe956ec386b3ffa6c8d03c2bea178394d09095", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cdbe956ec386b3ffa6c8d03c2bea178394d09095", "html_url": "https://github.com/rust-lang/rust/commit/cdbe956ec386b3ffa6c8d03c2bea178394d09095", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cdbe956ec386b3ffa6c8d03c2bea178394d09095/comments", "author": {"login": "durin42", "id": 20269, "node_id": "MDQ6VXNlcjIwMjY5", "avatar_url": "https://avatars.githubusercontent.com/u/20269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durin42", "html_url": "https://github.com/durin42", "followers_url": "https://api.github.com/users/durin42/followers", "following_url": "https://api.github.com/users/durin42/following{/other_user}", "gists_url": "https://api.github.com/users/durin42/gists{/gist_id}", "starred_url": "https://api.github.com/users/durin42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durin42/subscriptions", "organizations_url": "https://api.github.com/users/durin42/orgs", "repos_url": "https://api.github.com/users/durin42/repos", "events_url": "https://api.github.com/users/durin42/events{/privacy}", "received_events_url": "https://api.github.com/users/durin42/received_events", "type": "User", "site_admin": false}, "committer": {"login": "durin42", "id": 20269, "node_id": "MDQ6VXNlcjIwMjY5", "avatar_url": "https://avatars.githubusercontent.com/u/20269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durin42", "html_url": "https://github.com/durin42", "followers_url": "https://api.github.com/users/durin42/followers", "following_url": "https://api.github.com/users/durin42/following{/other_user}", "gists_url": "https://api.github.com/users/durin42/gists{/gist_id}", "starred_url": "https://api.github.com/users/durin42/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durin42/subscriptions", "organizations_url": "https://api.github.com/users/durin42/orgs", "repos_url": "https://api.github.com/users/durin42/repos", "events_url": "https://api.github.com/users/durin42/events{/privacy}", "received_events_url": "https://api.github.com/users/durin42/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f18f0a9d4548bc87afff1e4c0fe9081c35002c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f18f0a9d4548bc87afff1e4c0fe9081c35002c2", "html_url": "https://github.com/rust-lang/rust/commit/6f18f0a9d4548bc87afff1e4c0fe9081c35002c2"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "5f5b5de790e430e4e2823c491c0536325638c793", "filename": "compiler/rustc_llvm/llvm-wrapper/RustWrapper.cpp", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/cdbe956ec386b3ffa6c8d03c2bea178394d09095/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/cdbe956ec386b3ffa6c8d03c2bea178394d09095/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp?ref=cdbe956ec386b3ffa6c8d03c2bea178394d09095", "patch": "@@ -1311,10 +1311,15 @@ extern \"C\" LLVMTypeKind LLVMRustGetTypeKind(LLVMTypeRef Ty) {\n     return LLVMBFloatTypeKind;\n   case Type::X86_AMXTyID:\n     return LLVMX86_AMXTypeKind;\n-#if LLVM_VERSION_GE(15, 0)\n+#if LLVM_VERSION_GE(15, 0) && LLVM_VERSION_LT(16, 0)\n   case Type::DXILPointerTyID:\n     report_fatal_error(\"Rust does not support DirectX typed pointers.\");\n     break;\n+#endif\n+#if LLVM_VERSION_GE(16, 0)\n+  case Type::TypedPointerTyID:\n+    report_fatal_error(\"Rust does not support typed pointers.\");\n+    break;\n #endif\n   }\n   report_fatal_error(\"Unhandled TypeID.\");"}]}