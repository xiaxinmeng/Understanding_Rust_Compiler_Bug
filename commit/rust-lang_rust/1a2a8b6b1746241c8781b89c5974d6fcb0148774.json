{"sha": "1a2a8b6b1746241c8781b89c5974d6fcb0148774", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhMmE4YjZiMTc0NjI0MWM4NzgxYjg5YzU5NzRkNmZjYjAxNDg3NzQ=", "commit": {"author": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2011-07-20T03:11:48Z"}, "committer": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2011-07-20T03:11:48Z"}, "message": "Have fn_to_str use proto_to_str.", "tree": {"sha": "6d9f9c21b438e8a4ba2725f638a63ec36c54b2fd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d9f9c21b438e8a4ba2725f638a63ec36c54b2fd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a2a8b6b1746241c8781b89c5974d6fcb0148774", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a2a8b6b1746241c8781b89c5974d6fcb0148774", "html_url": "https://github.com/rust-lang/rust/commit/1a2a8b6b1746241c8781b89c5974d6fcb0148774", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a2a8b6b1746241c8781b89c5974d6fcb0148774/comments", "author": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2eb476293651d31d8e0c7907487760da6d2ce506", "url": "https://api.github.com/repos/rust-lang/rust/commits/2eb476293651d31d8e0c7907487760da6d2ce506", "html_url": "https://github.com/rust-lang/rust/commit/2eb476293651d31d8e0c7907487760da6d2ce506"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "305ef84b85af0934bd61219bef202a975110ca7a", "filename": "src/comp/util/ppaux.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1a2a8b6b1746241c8781b89c5974d6fcb0148774/src%2Fcomp%2Futil%2Fppaux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a2a8b6b1746241c8781b89c5974d6fcb0148774/src%2Fcomp%2Futil%2Fppaux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Futil%2Fppaux.rs?ref=1a2a8b6b1746241c8781b89c5974d6fcb0148774", "patch": "@@ -11,6 +11,7 @@ import syntax::print::pp;\n import syntax::print::pprust;\n import syntax::print::pprust::path_to_str;\n import syntax::print::pprust::constr_args_to_str;\n+import syntax::print::pprust::proto_to_str;\n import pp::word;\n import pp::eof;\n import pp::zerobreak;\n@@ -49,11 +50,7 @@ fn ty_to_str(&ctxt cx, &t typ) -> str {\n     fn fn_to_str(&ctxt cx, ast::proto proto, option::t[ast::ident] ident,\n                  &arg[] inputs, t output, ast::controlflow cf,\n                  &(@constr)[] constrs) -> str {\n-        auto s;\n-        alt (proto) {\n-            case (ast::proto_iter) { s = \"iter\"; }\n-            case (ast::proto_fn) { s = \"fn\"; }\n-        }\n+        auto s = proto_to_str(proto);\n         alt (ident) { case (some(?i)) { s += \" \"; s += i; } case (_) { } }\n         s += \"(\";\n         auto strs = [];"}]}