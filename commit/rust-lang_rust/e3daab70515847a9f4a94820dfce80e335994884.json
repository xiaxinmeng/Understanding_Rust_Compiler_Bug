{"sha": "e3daab70515847a9f4a94820dfce80e335994884", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzZGFhYjcwNTE1ODQ3YTlmNGE5NDgyMGRmY2U4MGUzMzU5OTQ4ODQ=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2013-01-25T05:12:44Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2013-01-25T05:12:44Z"}, "message": "rustc: Address an XXX in middle::mode", "tree": {"sha": "ba90c544ccc83e2847fc7f92eb02a1a716d36e02", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ba90c544ccc83e2847fc7f92eb02a1a716d36e02"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e3daab70515847a9f4a94820dfce80e335994884", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e3daab70515847a9f4a94820dfce80e335994884", "html_url": "https://github.com/rust-lang/rust/commit/e3daab70515847a9f4a94820dfce80e335994884", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e3daab70515847a9f4a94820dfce80e335994884/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cff4f1476ee9b96433d7dfa23afe5d9fdd45b554", "url": "https://api.github.com/repos/rust-lang/rust/commits/cff4f1476ee9b96433d7dfa23afe5d9fdd45b554", "html_url": "https://github.com/rust-lang/rust/commit/cff4f1476ee9b96433d7dfa23afe5d9fdd45b554"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "149821db28938b9b6d28e233306d8f1db37c8362", "filename": "src/librustc/middle/mode.rs", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/e3daab70515847a9f4a94820dfce80e335994884/src%2Flibrustc%2Fmiddle%2Fmode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e3daab70515847a9f4a94820dfce80e335994884/src%2Flibrustc%2Fmiddle%2Fmode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmode.rs?ref=e3daab70515847a9f4a94820dfce80e335994884", "patch": "@@ -22,6 +22,12 @@ use syntax::ast::{deref, expr, expr_addr_of, expr_assign, expr_assign_op};\n use syntax::ast::{expr_binary, expr_call, expr_copy, expr_field, expr_index};\n use syntax::ast::{expr_match, expr_method_call, expr_paren, expr_path};\n use syntax::ast::{expr_swap, expr_unary, neg, node_id, not, pat, pat_ident};\n+use syntax::ast::{expr_vstore, expr_vec, expr_rec, expr_tup, expr_lit};\n+use syntax::ast::{expr_cast, expr_if, expr_while, expr_loop, expr_fn};\n+use syntax::ast::{expr_fn_block, expr_loop_body, expr_do_body, expr_block};\n+use syntax::ast::{expr_unary_move, expr_fail, expr_break, expr_again};\n+use syntax::ast::{expr_ret, expr_log, expr_assert, expr_mac, expr_struct};\n+use syntax::ast::{expr_repeat};\n use syntax::ast::{sty_uniq, sty_value, uniq};\n use syntax::ast::{fn_decl, blk};\n use syntax::visit;\n@@ -225,9 +231,16 @@ fn compute_modes_for_expr(expr: @expr,\n                 compute_modes_for_expr(head, head_cx, v);\n             }\n         }\n-        _ => {\n-            // XXX: Spell out every expression above so when we add them we\n-            // don't forget to update this file.\n+        // Spell out every remaining expression so we don't forget to\n+        // update this code if we add a new variant.\n+        // (Maybe a macro to do this would be nice...)\n+        expr_vstore(*) | expr_vec(*) | expr_rec(*) | expr_tup(*) |\n+            expr_lit(*) | expr_cast(*) | expr_if(*) | expr_while(*) |\n+            expr_loop(*) | expr_fn(*) | expr_fn_block(*) |\n+            expr_loop_body(*) | expr_do_body(*) | expr_block(*) |\n+            expr_unary_move(*) | expr_fail(*) | expr_break(*) |\n+            expr_again(*) | expr_ret(*) | expr_log(*) | expr_assert(*) |\n+            expr_mac(*) | expr_struct(*) | expr_repeat(*) => {\n             visit::visit_expr(expr, cx, v)\n         }\n     }"}]}