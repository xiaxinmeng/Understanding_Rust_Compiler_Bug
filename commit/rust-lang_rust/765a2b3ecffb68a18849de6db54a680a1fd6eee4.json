{"sha": "765a2b3ecffb68a18849de6db54a680a1fd6eee4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc2NWEyYjNlY2ZmYjY4YTE4ODQ5ZGU2ZGI1NGE2ODBhMWZkNmVlZTQ=", "commit": {"author": {"name": "Jeffrey Yasskin", "email": "jyasskin@gmail.com", "date": "2010-07-11T21:51:02Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@pobox.com", "date": "2010-07-16T00:13:08Z"}, "message": "Add a _vec.slice function that'll hold us over until .(a,b) syntax is\nimplemented.  This could actually replace .(a,b) syntax if the language grows\noptional function parameters.", "tree": {"sha": "98f7e50eb0645feba63432e0ea584f876e212b73", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98f7e50eb0645feba63432e0ea584f876e212b73"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/765a2b3ecffb68a18849de6db54a680a1fd6eee4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/765a2b3ecffb68a18849de6db54a680a1fd6eee4", "html_url": "https://github.com/rust-lang/rust/commit/765a2b3ecffb68a18849de6db54a680a1fd6eee4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/765a2b3ecffb68a18849de6db54a680a1fd6eee4/comments", "author": {"login": "jyasskin", "id": 83420, "node_id": "MDQ6VXNlcjgzNDIw", "avatar_url": "https://avatars.githubusercontent.com/u/83420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyasskin", "html_url": "https://github.com/jyasskin", "followers_url": "https://api.github.com/users/jyasskin/followers", "following_url": "https://api.github.com/users/jyasskin/following{/other_user}", "gists_url": "https://api.github.com/users/jyasskin/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyasskin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyasskin/subscriptions", "organizations_url": "https://api.github.com/users/jyasskin/orgs", "repos_url": "https://api.github.com/users/jyasskin/repos", "events_url": "https://api.github.com/users/jyasskin/events{/privacy}", "received_events_url": "https://api.github.com/users/jyasskin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c866672a994267c165bef960d90b0fa8f9677b22", "url": "https://api.github.com/repos/rust-lang/rust/commits/c866672a994267c165bef960d90b0fa8f9677b22", "html_url": "https://github.com/rust-lang/rust/commit/c866672a994267c165bef960d90b0fa8f9677b22"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "1b9f5aaa547b3e972eb1ecbb05eac720a943ae8e", "filename": "src/lib/_vec.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/765a2b3ecffb68a18849de6db54a680a1fd6eee4/src%2Flib%2F_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/765a2b3ecffb68a18849de6db54a680a1fd6eee4/src%2Flib%2F_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2F_vec.rs?ref=765a2b3ecffb68a18849de6db54a680a1fd6eee4", "patch": "@@ -48,6 +48,21 @@ fn buf[T](vec[T] v) -> vbuf {\n   ret rustrt.vec_buf[T](v);\n }\n \n+// Returns elements from [start..end) from v.\n+fn slice[T](vec[T] v, int start, int end) -> vec[T] {\n+  check(0 <= start);\n+  check(start <= end);\n+  // FIXME #108: This doesn't work yet.\n+  //check(end <= int(len[T](v)));\n+  auto result = alloc[T](uint(end - start));\n+  let mutable int i = start;\n+  while (i < end) {\n+    result += vec(v.(i));\n+    i += 1;\n+  }\n+  ret result;\n+}\n+\n // Ought to take mutable &vec[T] v and just mutate it instead of copy\n // and return.  Blocking on issue #89 for this.\n fn grow[T](mutable vec[T] v, int n, T initval) -> vec[T] {"}, {"sha": "11dd2ffd2c573002363f37eef07de632023307d2", "filename": "src/test/run-pass/vec-lib.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/765a2b3ecffb68a18849de6db54a680a1fd6eee4/src%2Ftest%2Frun-pass%2Fvec-lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/765a2b3ecffb68a18849de6db54a680a1fd6eee4/src%2Ftest%2Frun-pass%2Fvec-lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fvec-lib.rs?ref=765a2b3ecffb68a18849de6db54a680a1fd6eee4", "patch": "@@ -24,7 +24,18 @@ fn test_init_fn() {\n   check (v.(4) == uint(4));\n }\n \n+fn test_slice() {\n+  let vec[int] v = vec(1,2,3,4,5);\n+  auto v2 = std._vec.slice[int](v, 2, 4);\n+  // FIXME #108: Can't call templated function twice in the same\n+  // program, at the moment.\n+  //check (std._vec.len[int](v2) == uint(2));\n+  check (v2.(0) == 3);\n+  check (v2.(1) == 4);\n+}\n+\n fn main() {\n   test_init_elt();\n   //XFAIL: test_init_fn();  // Segfaults.\n-}\n\\ No newline at end of file\n+  test_slice();\n+}"}]}