{"sha": "1baa7724ba45b486d3cadea1a5c0e0c948f1ea81", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiYWE3NzI0YmE0NWI0ODZkM2NhZGVhMWE1YzBlMGM5NDhmMWVhODE=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2019-11-15T09:36:26Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-15T09:36:26Z"}, "message": "Rollup merge of #66390 - estebank:parenice, r=Centril\n\nFix ICE when trying to suggest `Type<>` instead of `Type()`\n\nFixes #66286, but the output has no span:\n\n```\nerror[E0214]: parenthesized type parameters may only be used with a `Fn` trait\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0214`.\n```", "tree": {"sha": "d0c1727a6b32c90e7ecf4658529659a7d76c7ba8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0c1727a6b32c90e7ecf4658529659a7d76c7ba8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81", "comment_count": 1, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdznGaCRBK7hj4Ov3rIwAAdHIIADmiIfXrTKXJ37VQuYjrXaL9\nlEKzuABdDQmYfCGlfRj6z+FCnn3W0pxyfqPjN2PjBwWCvMZVdgr1TnAvQ2A1aEXo\nNZA1bzhVzvoy/tpBPFnryUtHYk7tJbKPh3oMC9a/2Y7khrEXEzx+lIxHuBUdeFEm\nch14BTsi4OjHwLi1h5spAgvljmc9Mqkx8TMod1mEwmbaSwtstnCk3c1sQ1ygSqwM\nfhB9q36Zo6dCounufXvFczZWIJgRVKc9iBRM2IDKIaRWud/TXkgb4FQvYb012coa\ne7+pwb09McgukccYZncydPak+5TzwLK3yI7JuOoJdINXjBEIPXi16QL4Ja0+aJ8=\n=EndI\n-----END PGP SIGNATURE-----\n", "payload": "tree d0c1727a6b32c90e7ecf4658529659a7d76c7ba8\nparent c8d8f52b7673687d2ebca6c568262d4634998ba5\nparent 41372631ff7a9dc352c4765b08847757a5f7d590\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1573810586 +0900\ncommitter GitHub <noreply@github.com> 1573810586 +0900\n\nRollup merge of #66390 - estebank:parenice, r=Centril\n\nFix ICE when trying to suggest `Type<>` instead of `Type()`\n\nFixes #66286, but the output has no span:\n\n```\nerror[E0214]: parenthesized type parameters may only be used with a `Fn` trait\n\nerror: aborting due to previous error\n\nFor more information about this error, try `rustc --explain E0214`.\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81", "html_url": "https://github.com/rust-lang/rust/commit/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8d8f52b7673687d2ebca6c568262d4634998ba5", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8d8f52b7673687d2ebca6c568262d4634998ba5", "html_url": "https://github.com/rust-lang/rust/commit/c8d8f52b7673687d2ebca6c568262d4634998ba5"}, {"sha": "41372631ff7a9dc352c4765b08847757a5f7d590", "url": "https://api.github.com/repos/rust-lang/rust/commits/41372631ff7a9dc352c4765b08847757a5f7d590", "html_url": "https://github.com/rust-lang/rust/commit/41372631ff7a9dc352c4765b08847757a5f7d590"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "dbbb7f926bc952c892435a185156721a7b337abf", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1baa7724ba45b486d3cadea1a5c0e0c948f1ea81/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=1baa7724ba45b486d3cadea1a5c0e0c948f1ea81", "patch": "@@ -1862,15 +1862,16 @@ impl<'a> LoweringContext<'a> {\n                         if let Ok(snippet) = self.sess.source_map().span_to_snippet(data.span) {\n                             // Do not suggest going from `Trait()` to `Trait<>`\n                             if data.inputs.len() > 0 {\n-                                let split = snippet.find('(').unwrap();\n-                                let trait_name = &snippet[0..split];\n-                                let args = &snippet[split + 1 .. snippet.len() - 1];\n-                                err.span_suggestion(\n-                                    data.span,\n-                                    \"use angle brackets instead\",\n-                                    format!(\"{}<{}>\", trait_name, args),\n-                                    Applicability::MaybeIncorrect,\n-                                );\n+                                if let Some(split) = snippet.find('(') {\n+                                    let trait_name = &snippet[0..split];\n+                                    let args = &snippet[split + 1 .. snippet.len() - 1];\n+                                    err.span_suggestion(\n+                                        data.span,\n+                                        \"use angle brackets instead\",\n+                                        format!(\"{}<{}>\", trait_name, args),\n+                                        Applicability::MaybeIncorrect,\n+                                    );\n+                                }\n                             }\n                         };\n                         err.emit();"}]}