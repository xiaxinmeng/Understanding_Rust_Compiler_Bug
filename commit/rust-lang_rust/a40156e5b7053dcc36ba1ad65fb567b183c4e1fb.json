{"sha": "a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0MDE1NmU1YjcwNTNkY2MzNmJhMWFkNjVmYjU2N2IxODNjNGUxZmI=", "commit": {"author": {"name": "oddg", "email": "odegevigney@gmail.com", "date": "2020-06-14T22:49:20Z"}, "committer": {"name": "oddg", "email": "odegevigney@gmail.com", "date": "2020-06-14T22:49:20Z"}, "message": "UI test for deprecation warning of casting enum implementing Drop", "tree": {"sha": "06d1605a2deee0a23c799f35a755b274c21dd3a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06d1605a2deee0a23c799f35a755b274c21dd3a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "html_url": "https://github.com/rust-lang/rust/commit/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb/comments", "author": {"login": "oddg", "id": 2709441, "node_id": "MDQ6VXNlcjI3MDk0NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2709441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oddg", "html_url": "https://github.com/oddg", "followers_url": "https://api.github.com/users/oddg/followers", "following_url": "https://api.github.com/users/oddg/following{/other_user}", "gists_url": "https://api.github.com/users/oddg/gists{/gist_id}", "starred_url": "https://api.github.com/users/oddg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oddg/subscriptions", "organizations_url": "https://api.github.com/users/oddg/orgs", "repos_url": "https://api.github.com/users/oddg/repos", "events_url": "https://api.github.com/users/oddg/events{/privacy}", "received_events_url": "https://api.github.com/users/oddg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oddg", "id": 2709441, "node_id": "MDQ6VXNlcjI3MDk0NDE=", "avatar_url": "https://avatars.githubusercontent.com/u/2709441?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oddg", "html_url": "https://github.com/oddg", "followers_url": "https://api.github.com/users/oddg/followers", "following_url": "https://api.github.com/users/oddg/following{/other_user}", "gists_url": "https://api.github.com/users/oddg/gists{/gist_id}", "starred_url": "https://api.github.com/users/oddg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oddg/subscriptions", "organizations_url": "https://api.github.com/users/oddg/orgs", "repos_url": "https://api.github.com/users/oddg/repos", "events_url": "https://api.github.com/users/oddg/events{/privacy}", "received_events_url": "https://api.github.com/users/oddg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5ea0e9f8def9a3ec0eb2dd88f0465d4d1a81c21", "url": "https://api.github.com/repos/rust-lang/rust/commits/d5ea0e9f8def9a3ec0eb2dd88f0465d4d1a81c21", "html_url": "https://github.com/rust-lang/rust/commit/d5ea0e9f8def9a3ec0eb2dd88f0465d4d1a81c21"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "623460673bfa28dd5da45a33255f57915a9f3df2", "filename": "src/test/ui/cenum_impl_drop_cast.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.rs?ref=a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "patch": "@@ -0,0 +1,18 @@\n+#![deny(cenum_impl_drop_cast)]\n+\n+enum E {\n+    A = 0,\n+}\n+\n+impl Drop for E {\n+    fn drop(&mut self) {\n+        println!(\"Drop\");\n+    }\n+}\n+\n+fn main() {\n+    let e = E::A;\n+    let i = e as u32;\n+    //~^ ERROR Cast `enum` implementing `Drop` `E` to integer `u32`\n+    //~| WARN this was previously accepted\n+}"}, {"sha": "5c8f86ffd72ad9760fa7c93a6a8d0d588a3d7e25", "filename": "src/test/ui/cenum_impl_drop_cast.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a40156e5b7053dcc36ba1ad65fb567b183c4e1fb/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcenum_impl_drop_cast.stderr?ref=a40156e5b7053dcc36ba1ad65fb567b183c4e1fb", "patch": "@@ -0,0 +1,16 @@\n+error: Cast `enum` implementing `Drop` `E` to integer `u32`\n+  --> $DIR/cenum_impl_drop_cast.rs:15:13\n+   |\n+LL |     let i = e as u32;\n+   |             ^^^^^^^^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/cenum_impl_drop_cast.rs:1:9\n+   |\n+LL | #![deny(cenum_impl_drop_cast)]\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #73333 <https://github.com/rust-lang/rust/issues/73333>\n+\n+error: aborting due to previous error\n+"}]}