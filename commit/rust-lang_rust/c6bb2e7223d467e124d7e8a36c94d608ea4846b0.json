{"sha": "c6bb2e7223d467e124d7e8a36c94d608ea4846b0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2YmIyZTcyMjNkNDY3ZTEyNGQ3ZThhMzZjOTRkNjA4ZWE0ODQ2YjA=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-18T16:41:41Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-18T16:41:41Z"}, "message": "Improve prepare_libcore.sh", "tree": {"sha": "3cad8fb694f4c047c5a38adc94d8f0cf341631b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3cad8fb694f4c047c5a38adc94d8f0cf341631b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6bb2e7223d467e124d7e8a36c94d608ea4846b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6bb2e7223d467e124d7e8a36c94d608ea4846b0", "html_url": "https://github.com/rust-lang/rust/commit/c6bb2e7223d467e124d7e8a36c94d608ea4846b0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6bb2e7223d467e124d7e8a36c94d608ea4846b0/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1b8e02a881c3b5124dff3b51f20245d146425b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1b8e02a881c3b5124dff3b51f20245d146425b9", "html_url": "https://github.com/rust-lang/rust/commit/a1b8e02a881c3b5124dff3b51f20245d146425b9"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "75b6c8a908452418a021cc860b5f1e62a1df6974", "filename": "prepare_libcore.sh", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/c6bb2e7223d467e124d7e8a36c94d608ea4846b0/prepare_libcore.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c6bb2e7223d467e124d7e8a36c94d608ea4846b0/prepare_libcore.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/prepare_libcore.sh?ref=c6bb2e7223d467e124d7e8a36c94d608ea4846b0", "patch": "@@ -1,11 +1,14 @@\n #!/bin/bash --verbose\n+set -e\n+\n SRC_DIR=\"target/libcore\"\n-rm -rf $SRC_DIR &&\n-mkdir -p $SRC_DIR/src &&\n+rm -rf $SRC_DIR\n+mkdir -p $SRC_DIR/src\n cp -r $(dirname $(rustup which rustc))/../lib/rustlib/src/rust/src/libcore $SRC_DIR/src/libcore || (echo \"Please install rust-src component\"; exit 1)\n-cd $SRC_DIR || exit 1\n-git init || exit 1\n-git add . || exit 1\n-git commit -m \"Initial commit\" -q || exit 1\n-git apply ../../000*.patch || exit 1\n+cd $SRC_DIR\n+git init\n+git add .\n+git commit -m \"Initial commit\" -q\n+git apply ../../000*.patch\n+\n echo \"Successfully prepared libcore for building\""}]}