{"sha": "ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmMmQ1MDZjMmM3NDhiZDIxOGY3NGM2MDE0YWJjNGNlY2M4Yzc0YzQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-03-15T13:16:09Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-03-15T13:16:09Z"}, "message": "Auto merge of #48138 - estebank:issue-45092, r=nikomatsakis\n\nReword E0044 and message for `!Send` types\n\n - Reword E0044 help.\n - Change error message for types that don't implement `Send`\n\nCC #45092, #46678, #24909, #33307.", "tree": {"sha": "aed38048b055954674cf19b081f6e60bd05eb1e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aed38048b055954674cf19b081f6e60bd05eb1e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "html_url": "https://github.com/rust-lang/rust/commit/ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a4af6f089b2836530f31b6b839bde7cea8ae0b8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a4af6f089b2836530f31b6b839bde7cea8ae0b8a", "html_url": "https://github.com/rust-lang/rust/commit/a4af6f089b2836530f31b6b839bde7cea8ae0b8a"}, {"sha": "1bbd4fd395b7b8f5f51f90401665168b19f0b9fd", "url": "https://api.github.com/repos/rust-lang/rust/commits/1bbd4fd395b7b8f5f51f90401665168b19f0b9fd", "html_url": "https://github.com/rust-lang/rust/commit/1bbd4fd395b7b8f5f51f90401665168b19f0b9fd"}], "stats": {"total": 221, "additions": 152, "deletions": 69}, "files": [{"sha": "53b1d1cd12de33f3dfe602f42b9637796e3a24aa", "filename": "src/libcore/marker.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibcore%2Fmarker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibcore%2Fmarker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmarker.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -343,8 +343,21 @@ pub trait Copy : Clone {\n /// [transmute]: ../../std/mem/fn.transmute.html\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[lang = \"sync\"]\n-#[rustc_on_unimplemented = \"`{Self}` cannot be shared between threads safely\"]\n+#[rustc_on_unimplemented(\n+    message=\"`{Self}` cannot be shared between threads safely\",\n+    label=\"`{Self}` cannot be shared between threads safely\"\n+)]\n pub unsafe auto trait Sync {\n+    // FIXME(estebank): once support to add notes in `rustc_on_unimplemented`\n+    // lands in beta, and it has been extended to check whether a closure is\n+    // anywhere in the requirement chain, extend it as such (#48534):\n+    // ```\n+    // on(\n+    //     closure,\n+    //     note=\"`{Self}` cannot be shared safely, consider marking the closure `move`\"\n+    // ),\n+    // ```\n+\n     // Empty\n }\n "}, {"sha": "7e5dc02798dff72ad6ca12d170cc092621aab5f0", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 17, "deletions": 14, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -339,18 +339,15 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n             .unwrap_or(trait_ref.def_id());\n         let trait_ref = *trait_ref.skip_binder();\n \n-        let desugaring;\n-        let method;\n         let mut flags = vec![];\n-        let direct = match obligation.cause.code {\n+        match obligation.cause.code {\n             ObligationCauseCode::BuiltinDerivedObligation(..) |\n-            ObligationCauseCode::ImplDerivedObligation(..) => false,\n-            _ => true\n-        };\n-        if direct {\n-            // this is a \"direct\", user-specified, rather than derived,\n-            // obligation.\n-            flags.push((\"direct\".to_string(), None));\n+            ObligationCauseCode::ImplDerivedObligation(..) => {}\n+            _ => {\n+                // this is a \"direct\", user-specified, rather than derived,\n+                // obligation.\n+                flags.push((\"direct\".to_string(), None));\n+            }\n         }\n \n         if let ObligationCauseCode::ItemObligation(item) = obligation.cause.code {\n@@ -360,21 +357,27 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n             //\n             // Currently I'm leaving it for what I need for `try`.\n             if self.tcx.trait_of_item(item) == Some(trait_ref.def_id) {\n-                method = self.tcx.item_name(item);\n+                let method = self.tcx.item_name(item);\n                 flags.push((\"from_method\".to_string(), None));\n                 flags.push((\"from_method\".to_string(), Some(method.to_string())));\n             }\n         }\n \n         if let Some(k) = obligation.cause.span.compiler_desugaring_kind() {\n-            desugaring = k.as_symbol().as_str();\n+            let desugaring = k.as_symbol().as_str();\n             flags.push((\"from_desugaring\".to_string(), None));\n             flags.push((\"from_desugaring\".to_string(), Some(desugaring.to_string())));\n         }\n         let generics = self.tcx.generics_of(def_id);\n         let self_ty = trait_ref.self_ty();\n-        let self_ty_str = self_ty.to_string();\n-        flags.push((\"_Self\".to_string(), Some(self_ty_str.clone())));\n+        // This is also included through the generics list as `Self`,\n+        // but the parser won't allow you to use it\n+        flags.push((\"_Self\".to_string(), Some(self_ty.to_string())));\n+        if let Some(def) = self_ty.ty_adt_def() {\n+            // We also want to be able to select self's original\n+            // signature with no type arguments resolved\n+            flags.push((\"_Self\".to_string(), Some(self.tcx.type_of(def.did).to_string())));\n+        }\n \n         for param in generics.types.iter() {\n             let name = param.name.as_str().to_string();"}, {"sha": "dc9455487ede708e45edc734b8b4d9c1e5eae476", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -1223,9 +1223,11 @@ pub fn check_item_type<'a,'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>, it: &'tcx hir::Item\n                 if !generics.types.is_empty() {\n                     let mut err = struct_span_err!(tcx.sess, item.span, E0044,\n                         \"foreign items may not have type parameters\");\n-                    span_help!(&mut err, item.span,\n-                        \"consider using specialization instead of \\\n-                        type parameters\");\n+                    err.span_label(item.span, \"can't have type parameters\");\n+                    // FIXME: once we start storing spans for type arguments, turn this into a\n+                    // suggestion.\n+                    err.help(\"use specialization instead of type parameters by replacing them \\\n+                              with concrete types like `u32`\");\n                     err.emit();\n                 }\n "}, {"sha": "261881d880bf9fcd8074f34c6d371cfa86046114", "filename": "src/test/compile-fail/builtin-superkinds-double-superkind.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-double-superkind.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-double-superkind.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbuiltin-superkinds-double-superkind.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -13,9 +13,11 @@\n \n trait Foo : Send+Sync { }\n \n-impl <T: Sync+'static> Foo for (T,) { } //~ ERROR `T: std::marker::Send` is not satisfied\n+impl <T: Sync+'static> Foo for (T,) { }\n+//~^ ERROR the trait bound `T: std::marker::Send` is not satisfied in `(T,)` [E0277]\n \n-impl <T: Send> Foo for (T,T) { } //~ ERROR `T: std::marker::Sync` is not satisfied\n+impl <T: Send> Foo for (T,T) { }\n+//~^ ERROR `T` cannot be shared between threads safely [E0277]\n \n impl <T: Send+Sync> Foo for (T,T,T) { } // (ok)\n "}, {"sha": "db26535b004acdb587276a0ce5798a53237cc28b", "filename": "src/test/compile-fail/closure-bounds-subtype.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fclosure-bounds-subtype.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fclosure-bounds-subtype.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fclosure-bounds-subtype.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -21,7 +21,7 @@ fn give_any<F>(f: F) where F: FnOnce() {\n \n fn give_owned<F>(f: F) where F: FnOnce() + Send {\n     take_any(f);\n-    take_const_owned(f); //~ ERROR `F: std::marker::Sync` is not satisfied\n+    take_const_owned(f); //~ ERROR `F` cannot be shared between threads safely [E0277]\n }\n \n fn main() {}"}, {"sha": "6a7a515ba5fbba41d5f773408bbef7d4f8300b92", "filename": "src/test/compile-fail/extern-types-not-sync-send.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fextern-types-not-sync-send.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fextern-types-not-sync-send.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fextern-types-not-sync-send.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -21,7 +21,7 @@ fn assert_send<T: ?Sized + Send>() { }\n \n fn main() {\n     assert_sync::<A>();\n-    //~^ ERROR the trait bound `A: std::marker::Sync` is not satisfied\n+    //~^ ERROR `A` cannot be shared between threads safely [E0277]\n \n     assert_send::<A>();\n     //~^ ERROR the trait bound `A: std::marker::Send` is not satisfied"}, {"sha": "7df445c676c9cc586b2194511302e63d9b46dcdf", "filename": "src/test/compile-fail/issue-16538.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-16538.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-16538.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-16538.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -21,7 +21,7 @@ mod Y {\n }\n \n static foo: *const Y::X = Y::foo(Y::x as *const Y::X);\n-//~^ ERROR `*const usize: std::marker::Sync` is not satisfied\n+//~^ ERROR `*const usize` cannot be shared between threads safely [E0277]\n //~| ERROR cannot refer to other statics by value, use the address-of operator or a constant instead\n //~| ERROR E0015\n "}, {"sha": "c5349d4e82b4b127b71943bdcbf03676edf8049c", "filename": "src/test/compile-fail/issue-17718-static-sync.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-17718-static-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-17718-static-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-17718-static-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -17,6 +17,6 @@ impl !Sync for Foo {}\n \n static FOO: usize = 3;\n static BAR: Foo = Foo;\n-//~^ ERROR: `Foo: std::marker::Sync` is not satisfied\n+//~^ ERROR: `Foo` cannot be shared between threads safely [E0277]\n \n fn main() {}"}, {"sha": "a5ba9ef9bd35dd844d1ea5d1ca2a30cd6b572823", "filename": "src/test/compile-fail/issue-43733-2.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-43733-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-43733-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-43733-2.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -33,7 +33,7 @@ impl<T> Key<T> {\n use std::thread::__FastLocalKeyInner as Key;\n \n static __KEY: Key<()> = Key::new();\n-//~^ ERROR `std::cell::UnsafeCell<std::option::Option<()>>: std::marker::Sync` is not satisfied\n-//~| ERROR `std::cell::Cell<bool>: std::marker::Sync` is not satisfied\n+//~^ ERROR `std::cell::UnsafeCell<std::option::Option<()>>` cannot be shared between threads\n+//~| ERROR `std::cell::Cell<bool>` cannot be shared between threads safely [E0277]\n \n fn main() {}"}, {"sha": "801a1301ad77496fcdcf6fa9991ec4a95bf5e29f", "filename": "src/test/compile-fail/issue-7364.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-7364.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fissue-7364.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-7364.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -15,6 +15,6 @@ use std::cell::RefCell;\n // Regression test for issue 7364\n static boxed: Box<RefCell<isize>> = box RefCell::new(0);\n //~^ ERROR allocations are not allowed in statics\n-//~| ERROR `std::cell::RefCell<isize>: std::marker::Sync` is not satisfied\n+//~| ERROR `std::cell::RefCell<isize>` cannot be shared between threads safely [E0277]\n \n fn main() { }"}, {"sha": "a84eae0bfdae86c23b76bc403a58953f8ade4b48", "filename": "src/test/compile-fail/kindck-send-object.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fkindck-send-object.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -20,7 +20,7 @@ trait Message : Send { }\n \n fn object_ref_with_static_bound_not_ok() {\n     assert_send::<&'static (Dummy+'static)>();\n-    //~^ ERROR : std::marker::Sync` is not satisfied\n+    //~^ ERROR `Dummy + 'static` cannot be shared between threads safely [E0277]\n }\n \n fn box_object_with_no_bound_not_ok<'a>() {"}, {"sha": "66865bbcc7ee12f162c7529f53bacd385e79b40f", "filename": "src/test/compile-fail/kindck-send-object1.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fkindck-send-object1.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -18,7 +18,7 @@ trait Dummy { }\n // careful with object types, who knows what they close over...\n fn test51<'a>() {\n     assert_send::<&'a Dummy>();\n-    //~^ ERROR : std::marker::Sync` is not satisfied\n+    //~^ ERROR `Dummy + 'a` cannot be shared between threads safely [E0277]\n }\n fn test52<'a>() {\n     assert_send::<&'a (Dummy+Sync)>();"}, {"sha": "51bc587d74ff83e5d84d179886a35fec57fcca2b", "filename": "src/test/compile-fail/kindck-send-object2.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fkindck-send-object2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fkindck-send-object2.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -14,7 +14,8 @@ fn assert_send<T:Send>() { }\n trait Dummy { }\n \n fn test50() {\n-    assert_send::<&'static Dummy>(); //~ ERROR : std::marker::Sync` is not satisfied\n+    assert_send::<&'static Dummy>();\n+    //~^ ERROR `Dummy + 'static` cannot be shared between threads safely [E0277]\n }\n \n fn test53() {"}, {"sha": "9107745b0e9c430d5d5ab5347ddfe2914a1e9975", "filename": "src/test/compile-fail/mutable-enum-indirect.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fmutable-enum-indirect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fmutable-enum-indirect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmutable-enum-indirect.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -24,5 +24,6 @@ fn bar<T: Sync>(_: T) {}\n \n fn main() {\n     let x = Foo::A(NoSync);\n-    bar(&x); //~ ERROR `NoSync: std::marker::Sync` is not satisfied\n+    bar(&x);\n+    //~^ ERROR `NoSync` cannot be shared between threads safely [E0277]\n }"}, {"sha": "2d4b50eb7b23c5aee4bd840c445009d2db1b8ca2", "filename": "src/test/compile-fail/mutexguard-sync.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fmutexguard-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fmutexguard-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmutexguard-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -18,5 +18,6 @@ fn main()\n {\n     let m = Mutex::new(Cell::new(0i32));\n     let guard = m.lock().unwrap();\n-    test_sync(guard); //~ ERROR the trait bound\n+    test_sync(guard);\n+    //~^ ERROR `std::cell::Cell<i32>` cannot be shared between threads safely [E0277]\n }"}, {"sha": "77a7012b3b033cc5e2799f8337ef92691d8bf3fc", "filename": "src/test/compile-fail/no_share-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fno_share-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fno_share-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fno_share-enum.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -22,5 +22,5 @@ fn bar<T: Sync>(_: T) {}\n fn main() {\n     let x = Foo::A(NoSync);\n     bar(x);\n-    //~^ ERROR `NoSync: std::marker::Sync` is not satisfied\n+    //~^ ERROR `NoSync` cannot be shared between threads safely [E0277]\n }"}, {"sha": "34e43e9f2aaec232d71b48a953806fb13bf73dfd", "filename": "src/test/compile-fail/no_share-struct.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fno_share-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fno_share-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fno_share-struct.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -20,5 +20,5 @@ fn bar<T: Sync>(_: T) {}\n fn main() {\n     let x = Foo { a: 5 };\n     bar(x);\n-    //~^ ERROR `Foo: std::marker::Sync` is not satisfied\n+    //~^ ERROR `Foo` cannot be shared between threads safely [E0277]\n }"}, {"sha": "a383244f415c8bf3a3695398bd176bfaaba4f00a", "filename": "src/test/compile-fail/not-sync.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fnot-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fnot-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fnot-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -16,17 +16,17 @@ fn test<T: Sync>() {}\n \n fn main() {\n     test::<Cell<i32>>();\n-    //~^ ERROR `std::cell::Cell<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::Cell<i32>` cannot be shared between threads safely [E0277]\n     test::<RefCell<i32>>();\n-    //~^ ERROR `std::cell::RefCell<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::RefCell<i32>` cannot be shared between threads safely [E0277]\n \n     test::<Rc<i32>>();\n-    //~^ ERROR `std::rc::Rc<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::rc::Rc<i32>` cannot be shared between threads safely [E0277]\n     test::<Weak<i32>>();\n-    //~^ ERROR `std::rc::Weak<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::rc::Weak<i32>` cannot be shared between threads safely [E0277]\n \n     test::<Receiver<i32>>();\n-    //~^ ERROR `std::sync::mpsc::Receiver<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::sync::mpsc::Receiver<i32>` cannot be shared between threads safely [E0277]\n     test::<Sender<i32>>();\n-    //~^ ERROR `std::sync::mpsc::Sender<i32>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::sync::mpsc::Sender<i32>` cannot be shared between threads safely [E0277]\n }"}, {"sha": "51e7d5da98f4bb5c535b6f48e963364799a8674f", "filename": "src/test/compile-fail/phantom-oibit.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fphantom-oibit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Fphantom-oibit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fphantom-oibit.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -28,11 +28,13 @@ struct Nested<T>(T);\n fn is_zen<T: Zen>(_: T) {}\n \n fn not_sync<T>(x: Guard<T>) {\n-    is_zen(x)  //~ error: `T: std::marker::Sync` is not satisfied\n+    is_zen(x)\n+    //~^ ERROR `T` cannot be shared between threads safely [E0277]\n }\n \n fn nested_not_sync<T>(x: Nested<Guard<T>>) {\n-    is_zen(x)  //~ error: `T: std::marker::Sync` is not satisfied\n+    is_zen(x)\n+    //~^ ERROR `T` cannot be shared between threads safely [E0277]\n }\n \n fn main() {}"}, {"sha": "c829ba3dcc357fbd54bcf2ae5a6668550a027316", "filename": "src/test/compile-fail/typeck-default-trait-impl-negation-sync.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Ftypeck-default-trait-impl-negation-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Ftypeck-default-trait-impl-negation-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ftypeck-default-trait-impl-negation-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -43,11 +43,11 @@ fn is_sync<T: Sync>() {}\n fn main() {\n     is_sync::<MySync>();\n     is_sync::<MyNotSync>();\n-    //~^ ERROR `MyNotSync: std::marker::Sync` is not satisfied\n+    //~^ ERROR `MyNotSync` cannot be shared between threads safely [E0277]\n \n     is_sync::<MyTypeWUnsafe>();\n-    //~^ ERROR `std::cell::UnsafeCell<u8>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::UnsafeCell<u8>` cannot be shared between threads safely [E0277]\n \n     is_sync::<MyTypeManaged>();\n-    //~^ ERROR `Managed: std::marker::Sync` is not satisfied\n+    //~^ ERROR `Managed` cannot be shared between threads safely [E0277]\n }"}, {"sha": "fcfc8574b2135a97f37c6b0f20faef0eee61978f", "filename": "src/test/compile-fail/typeck-unsafe-always-share.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Ftypeck-unsafe-always-share.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fcompile-fail%2Ftypeck-unsafe-always-share.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ftypeck-unsafe-always-share.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -27,16 +27,16 @@ fn test<T: Sync>(s: T) {}\n fn main() {\n     let us = UnsafeCell::new(MySync{u: UnsafeCell::new(0)});\n     test(us);\n-    //~^ ERROR `std::cell::UnsafeCell<MySync<{integer}>>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::UnsafeCell<MySync<{integer}>>` cannot be shared between threads safely\n \n     let uns = UnsafeCell::new(NoSync);\n     test(uns);\n-    //~^ ERROR `std::cell::UnsafeCell<NoSync>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::UnsafeCell<NoSync>` cannot be shared between threads safely [E0277]\n \n     let ms = MySync{u: uns};\n     test(ms);\n-    //~^ ERROR `std::cell::UnsafeCell<NoSync>: std::marker::Sync` is not satisfied\n+    //~^ ERROR `std::cell::UnsafeCell<NoSync>` cannot be shared between threads safely [E0277]\n \n     test(NoSync);\n-    //~^ ERROR `NoSync: std::marker::Sync` is not satisfied\n+    //~^ ERROR `NoSync` cannot be shared between threads safely [E0277]\n }"}, {"sha": "e096e7ca3a06bd3ea15c5aa7da3e2f8d890f5122", "filename": "src/test/ui/closure-move-sync.rs", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fclosure-move-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fclosure-move-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosure-move-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -0,0 +1,32 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+use std::thread;\n+use std::sync::mpsc::channel;\n+\n+fn bar() {\n+    let (send, recv) = channel();\n+    let t = thread::spawn(|| {\n+        recv.recv().unwrap();\n+        //~^^ ERROR `std::sync::mpsc::Receiver<()>` cannot be shared between threads safely\n+    });\n+\n+    send.send(());\n+\n+    t.join().unwrap();\n+}\n+\n+fn foo() {\n+    let (tx, _rx) = channel();\n+    thread::spawn(|| tx.send(()).unwrap());\n+    //~^ ERROR `std::sync::mpsc::Sender<()>` cannot be shared between threads safely\n+}\n+\n+fn main() {}"}, {"sha": "076bae8dbd7affcb7ee75a37cce62a10f9f8f2ff", "filename": "src/test/ui/closure-move-sync.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fclosure-move-sync.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fclosure-move-sync.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosure-move-sync.stderr?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -0,0 +1,25 @@\n+error[E0277]: `std::sync::mpsc::Receiver<()>` cannot be shared between threads safely\n+  --> $DIR/closure-move-sync.rs:16:13\n+   |\n+LL |     let t = thread::spawn(|| {\n+   |             ^^^^^^^^^^^^^ `std::sync::mpsc::Receiver<()>` cannot be shared between threads safely\n+   |\n+   = help: the trait `std::marker::Sync` is not implemented for `std::sync::mpsc::Receiver<()>`\n+   = note: required because of the requirements on the impl of `std::marker::Send` for `&std::sync::mpsc::Receiver<()>`\n+   = note: required because it appears within the type `[closure@$DIR/closure-move-sync.rs:16:27: 19:6 recv:&std::sync::mpsc::Receiver<()>]`\n+   = note: required by `std::thread::spawn`\n+\n+error[E0277]: `std::sync::mpsc::Sender<()>` cannot be shared between threads safely\n+  --> $DIR/closure-move-sync.rs:28:5\n+   |\n+LL |     thread::spawn(|| tx.send(()).unwrap());\n+   |     ^^^^^^^^^^^^^ `std::sync::mpsc::Sender<()>` cannot be shared between threads safely\n+   |\n+   = help: the trait `std::marker::Sync` is not implemented for `std::sync::mpsc::Sender<()>`\n+   = note: required because of the requirements on the impl of `std::marker::Send` for `&std::sync::mpsc::Sender<()>`\n+   = note: required because it appears within the type `[closure@$DIR/closure-move-sync.rs:28:19: 28:42 tx:&std::sync::mpsc::Sender<()>]`\n+   = note: required by `std::thread::spawn`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0277`."}, {"sha": "35e3c7685589020b3445ad5ef07a39a1fedaa4bd", "filename": "src/test/ui/error-codes/E0044.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ferror-codes%2FE0044.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ferror-codes%2FE0044.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0044.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -1,4 +1,4 @@\n-// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -8,7 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-extern { fn some_func<T>(x: T); } //~ ERROR E0044\n+extern {\n+    fn sqrt<T>(f: T) -> T;\n+    //~^ ERROR foreign items may not have type parameters [E0044]\n+    //~| HELP use specialization instead of type parameters by replacing them with concrete types\n+    //~| NOTE can't have type parameters\n+}\n \n fn main() {\n }"}, {"sha": "ce966251bf456820883c55f7da340c65a89bab46", "filename": "src/test/ui/error-codes/E0044.stderr", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ferror-codes%2FE0044.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ferror-codes%2FE0044.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0044.stderr?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -1,14 +1,10 @@\n error[E0044]: foreign items may not have type parameters\n-  --> $DIR/E0044.rs:11:10\n+  --> $DIR/E0044.rs:12:5\n    |\n-LL | extern { fn some_func<T>(x: T); } //~ ERROR E0044\n-   |          ^^^^^^^^^^^^^^^^^^^^^^\n+LL |     fn sqrt<T>(f: T) -> T;\n+   |     ^^^^^^^^^^^^^^^^^^^^^^ can't have type parameters\n    |\n-help: consider using specialization instead of type parameters\n-  --> $DIR/E0044.rs:11:10\n-   |\n-LL | extern { fn some_func<T>(x: T); } //~ ERROR E0044\n-   |          ^^^^^^^^^^^^^^^^^^^^^^\n+   = help: use specialization instead of type parameters by replacing them with concrete types like `u32`\n \n error: aborting due to previous error\n "}, {"sha": "424919a0eba678eb6731be695322f92278f4b947", "filename": "src/test/ui/fmt/send-sync.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -15,6 +15,6 @@ fn main() {\n     // `Cell` is not `Sync`, so `&Cell` is neither `Sync` nor `Send`,\n     // `std::fmt::Arguments` used to forget this...\n     let c = std::cell::Cell::new(42);\n-    send(format_args!(\"{:?}\", c)); //~ ERROR Sync` is not satisfied\n-    sync(format_args!(\"{:?}\", c)); //~ ERROR Sync` is not satisfied\n+    send(format_args!(\"{:?}\", c)); //~ ERROR E0277\n+    sync(format_args!(\"{:?}\", c)); //~ ERROR E0277\n }"}, {"sha": "807b499155b855955c11df69b719a14717e25f6e", "filename": "src/test/ui/fmt/send-sync.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fsend-sync.stderr?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -1,7 +1,7 @@\n-error[E0277]: the trait bound `*mut std::ops::Fn() + 'static: std::marker::Sync` is not satisfied in `[std::fmt::ArgumentV1<'_>]`\n+error[E0277]: `*mut std::ops::Fn() + 'static` cannot be shared between threads safely\n   --> $DIR/send-sync.rs:18:5\n    |\n-LL |     send(format_args!(\"{:?}\", c)); //~ ERROR Sync` is not satisfied\n+LL |     send(format_args!(\"{:?}\", c)); //~ ERROR E0277\n    |     ^^^^ `*mut std::ops::Fn() + 'static` cannot be shared between threads safely\n    |\n    = help: within `[std::fmt::ArgumentV1<'_>]`, the trait `std::marker::Sync` is not implemented for `*mut std::ops::Fn() + 'static`\n@@ -18,10 +18,10 @@ note: required by `send`\n LL | fn send<T: Send>(_: T) {}\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `*mut std::ops::Fn() + 'static: std::marker::Sync` is not satisfied in `std::fmt::Arguments<'_>`\n+error[E0277]: `*mut std::ops::Fn() + 'static` cannot be shared between threads safely\n   --> $DIR/send-sync.rs:19:5\n    |\n-LL |     sync(format_args!(\"{:?}\", c)); //~ ERROR Sync` is not satisfied\n+LL |     sync(format_args!(\"{:?}\", c)); //~ ERROR E0277\n    |     ^^^^ `*mut std::ops::Fn() + 'static` cannot be shared between threads safely\n    |\n    = help: within `std::fmt::Arguments<'_>`, the trait `std::marker::Sync` is not implemented for `*mut std::ops::Fn() + 'static`"}, {"sha": "f0df05ebfdf80a8c52c66c7cd9b79aba011885fe", "filename": "src/test/ui/generator/not-send-sync.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.rs?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -17,14 +17,14 @@ fn main() {\n     fn assert_send<T: Send>(_: T) {}\n \n     assert_sync(|| {\n-        //~^ ERROR: Sync` is not satisfied\n+        //~^ ERROR: E0277\n         let a = Cell::new(2);\n         yield;\n     });\n \n     let a = Cell::new(2);\n     assert_send(|| {\n-        //~^ ERROR: Sync` is not satisfied\n+        //~^ ERROR: E0277\n         drop(&a);\n         yield;\n     });"}, {"sha": "edf7151f7c4b7c26c7943d3e047afc925604f039", "filename": "src/test/ui/generator/not-send-sync.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ff2d506c2c748bd218f74c6014abc4cecc8c74c4/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fnot-send-sync.stderr?ref=ff2d506c2c748bd218f74c6014abc4cecc8c74c4", "patch": "@@ -1,4 +1,4 @@\n-error[E0277]: the trait bound `std::cell::Cell<i32>: std::marker::Sync` is not satisfied\n+error[E0277]: `std::cell::Cell<i32>` cannot be shared between threads safely\n   --> $DIR/not-send-sync.rs:26:5\n    |\n LL |     assert_send(|| {\n@@ -13,7 +13,7 @@ note: required by `main::assert_send`\n LL |     fn assert_send<T: Send>(_: T) {}\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `std::cell::Cell<i32>: std::marker::Sync` is not satisfied in `[generator@$DIR/not-send-sync.rs:19:17: 23:6 {std::cell::Cell<i32>, ()}]`\n+error[E0277]: `std::cell::Cell<i32>` cannot be shared between threads safely\n   --> $DIR/not-send-sync.rs:19:5\n    |\n LL |     assert_sync(|| {"}]}