{"sha": "c97aa0911785fc1c1306b38e978093b3153666ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5N2FhMDkxMTc4NWZjMWMxMzA2YjM4ZTk3ODA5M2IzMTUzNjY2ZWM=", "commit": {"author": {"name": "\u0410\u0440\u0442\u0451\u043c \u041f\u0430\u0432\u043b\u043e\u0432 [Artyom Pavlov]", "email": "newpavlov@gmail.com", "date": "2018-02-10T23:36:22Z"}, "committer": {"name": "\u0410\u0440\u0442\u0451\u043c \u041f\u0430\u0432\u043b\u043e\u0432 [Artyom Pavlov]", "email": "newpavlov@gmail.com", "date": "2018-02-10T23:36:22Z"}, "message": "iterator instead loop", "tree": {"sha": "f143310f4d9a37d88607d7cc8bc6c9405abc7263", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f143310f4d9a37d88607d7cc8bc6c9405abc7263"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c97aa0911785fc1c1306b38e978093b3153666ec", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJaf4H2AAoJEBOpOZ+3fjNcXz8QAIrear4SGBW2iGyk4BbHdzx3\nzHS6jaxMiuihJMyKgVZh/m15XkTWzxm4SEJdUSI4rKUIbJUfmtp7hJTi0lYdHHcB\ncxFncyPNEhsSrcKUNzeVI5/1wcNzOm8ymr/Ch4BW4RBgKo4tnIfTVxX5qIWaGDDi\na9+GOkAR0CNyRWMnOTlhKMSiNmW5NdugMsiRlRFp5c2/YR5kYWW4qNN/HGyZfXu9\nFpwgE6OJ/2ft3kRgfFJwhqwLvmu1WiZFTI+SDkudIioWtewNxVlrQww/IsY1oUxx\nv7bTcMVEYH4GpWKRldSBZOsUmu9EOtmhAvjzZkjaMAyrqodHd1x+Uq9PT28KlWCw\nUjPKk8U2wGuBHEUJryQzZtAFLDY+V7JqEIj7ngCpr6Z5qVsU9Ckl6TLhhFz5Ixsk\nAlcYwadl73dKQymw9nzaH7Vo+qG+bZkENyMpFInMkyDy2pY2a8eyFE/aN3x0Nn3O\nsgjPOlmG5QWmJm+FCIXDTlAZyKJHI8vR9VEJkkwDpoA3rjWvwpl1Yd5yT9BxjFLX\nKcFJ5PJEyJQacwvxQpS5adG11oEUuw2WeGbww3KFmGvKFZnwTFHrLeadW2ZtvWH3\nnIy5VhHc6rOkh0ILVa8movZu57RT5R5768+b6LDiAf7gc4IHyF1s0Nu8WvTRtK24\nAe5DTbiT08BRJ07QYlj0\n=VCGQ\n-----END PGP SIGNATURE-----", "payload": "tree f143310f4d9a37d88607d7cc8bc6c9405abc7263\nparent 8be306840f89b92ee49d2c0fae2b189c45706b2a\nauthor \u0410\u0440\u0442\u0451\u043c \u041f\u0430\u0432\u043b\u043e\u0432 [Artyom Pavlov] <newpavlov@gmail.com> 1518305782 +0300\ncommitter \u0410\u0440\u0442\u0451\u043c \u041f\u0430\u0432\u043b\u043e\u0432 [Artyom Pavlov] <newpavlov@gmail.com> 1518305782 +0300\n\niterator instead loop\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c97aa0911785fc1c1306b38e978093b3153666ec", "html_url": "https://github.com/rust-lang/rust/commit/c97aa0911785fc1c1306b38e978093b3153666ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c97aa0911785fc1c1306b38e978093b3153666ec/comments", "author": {"login": "newpavlov", "id": 329626, "node_id": "MDQ6VXNlcjMyOTYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/newpavlov", "html_url": "https://github.com/newpavlov", "followers_url": "https://api.github.com/users/newpavlov/followers", "following_url": "https://api.github.com/users/newpavlov/following{/other_user}", "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions", "organizations_url": "https://api.github.com/users/newpavlov/orgs", "repos_url": "https://api.github.com/users/newpavlov/repos", "events_url": "https://api.github.com/users/newpavlov/events{/privacy}", "received_events_url": "https://api.github.com/users/newpavlov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "newpavlov", "id": 329626, "node_id": "MDQ6VXNlcjMyOTYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/329626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/newpavlov", "html_url": "https://github.com/newpavlov", "followers_url": "https://api.github.com/users/newpavlov/followers", "following_url": "https://api.github.com/users/newpavlov/following{/other_user}", "gists_url": "https://api.github.com/users/newpavlov/gists{/gist_id}", "starred_url": "https://api.github.com/users/newpavlov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/newpavlov/subscriptions", "organizations_url": "https://api.github.com/users/newpavlov/orgs", "repos_url": "https://api.github.com/users/newpavlov/repos", "events_url": "https://api.github.com/users/newpavlov/events{/privacy}", "received_events_url": "https://api.github.com/users/newpavlov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8be306840f89b92ee49d2c0fae2b189c45706b2a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8be306840f89b92ee49d2c0fae2b189c45706b2a", "html_url": "https://github.com/rust-lang/rust/commit/8be306840f89b92ee49d2c0fae2b189c45706b2a"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "8839129f3f88eb1467cdd352a9a180571b9687c2", "filename": "src/librustc_trans/llvm_util.rs", "status": "modified", "additions": 8, "deletions": 10, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c97aa0911785fc1c1306b38e978093b3153666ec/src%2Flibrustc_trans%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c97aa0911785fc1c1306b38e978093b3153666ec/src%2Flibrustc_trans%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fllvm_util.rs?ref=c97aa0911785fc1c1306b38e978093b3153666ec", "patch": "@@ -113,17 +113,15 @@ pub fn to_llvm_feature(s: &str) -> &str {\n }\n \n pub fn target_features(sess: &Session) -> Vec<Symbol> {\n-    let whitelist = target_feature_whitelist(sess);\n     let target_machine = create_target_machine(sess);\n-    let mut features = Vec::new();\n-    for feature in whitelist {\n-        let llvm_feature = to_llvm_feature(feature);\n-        let ptr = CString::new(llvm_feature).as_ptr();\n-        if unsafe { llvm::LLVMRustHasFeature(target_machine, ptr) } {\n-            features.push(Symbol::intern(feature));\n-        }\n-    }\n-    features\n+    target_feature_whitelist(sess)\n+        .iter()\n+        .filter(|feature| {\n+            let llvm_feature = to_llvm_feature(feature);\n+            let ptr = CString::new(llvm_feature).as_ptr();\n+            unsafe { llvm::LLVMRustHasFeature(target_machine, ptr) }\n+        })\n+        .map(Symbol::intern).collect()\n }\n \n pub fn target_feature_whitelist(sess: &Session) -> &'static [&'static str] {"}]}