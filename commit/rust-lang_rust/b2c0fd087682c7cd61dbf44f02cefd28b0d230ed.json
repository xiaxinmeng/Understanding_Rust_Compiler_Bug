{"sha": "b2c0fd087682c7cd61dbf44f02cefd28b0d230ed", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIyYzBmZDA4NzY4MmM3Y2Q2MWRiZjQ0ZjAyY2VmZDI4YjBkMjMwZWQ=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2019-04-21T22:19:53Z"}, "committer": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2019-04-22T21:52:38Z"}, "message": "Remove redundant code in copy_clone_conditions\n\nThis was left over from when closure copy and clone were gated behind\nfeature flags.", "tree": {"sha": "7bb40929d4b6afda7914546f6de8bc6ab86d57a3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7bb40929d4b6afda7914546f6de8bc6ab86d57a3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed", "html_url": "https://github.com/rust-lang/rust/commit/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d599337fa7047307ba72786bbabe6b9c9e4daac", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d599337fa7047307ba72786bbabe6b9c9e4daac", "html_url": "https://github.com/rust-lang/rust/commit/6d599337fa7047307ba72786bbabe6b9c9e4daac"}], "stats": {"total": 14, "additions": 4, "deletions": 10}, "files": [{"sha": "cf69885c3e07c13679fe21bcf7e8a892e94bd6c2", "filename": "src/librustc/traits/select.rs", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed/src%2Flibrustc%2Ftraits%2Fselect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2c0fd087682c7cd61dbf44f02cefd28b0d230ed/src%2Flibrustc%2Ftraits%2Fselect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fselect.rs?ref=b2c0fd087682c7cd61dbf44f02cefd28b0d230ed", "patch": "@@ -2505,16 +2505,10 @@ impl<'cx, 'gcx, 'tcx> SelectionContext<'cx, 'gcx, 'tcx> {\n             }\n \n             ty::Closure(def_id, substs) => {\n-                let trait_id = obligation.predicate.def_id();\n-                let is_copy_trait = Some(trait_id) == self.tcx().lang_items().copy_trait();\n-                let is_clone_trait = Some(trait_id) == self.tcx().lang_items().clone_trait();\n-                if is_copy_trait || is_clone_trait {\n-                    Where(ty::Binder::bind(\n-                        substs.upvar_tys(def_id, self.tcx()).collect(),\n-                    ))\n-                } else {\n-                    None\n-                }\n+                // (*) binder moved here\n+                Where(ty::Binder::bind(\n+                    substs.upvar_tys(def_id, self.tcx()).collect(),\n+                ))\n             }\n \n             ty::Adt(..) | ty::Projection(..) | ty::Param(..) | ty::Opaque(..) => {"}]}