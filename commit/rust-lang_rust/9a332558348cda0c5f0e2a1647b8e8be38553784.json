{"sha": "9a332558348cda0c5f0e2a1647b8e8be38553784", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhMzMyNTU4MzQ4Y2RhMGM1ZjBlMmExNjQ3YjhlOGJlMzg1NTM3ODQ=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T04:35:27Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-27T04:35:27Z"}, "message": "Rename wrap_match_arms to match_arm_blocks", "tree": {"sha": "24eebf5338b244b68b378f14b34e288290af6a39", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/24eebf5338b244b68b378f14b34e288290af6a39"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a332558348cda0c5f0e2a1647b8e8be38553784", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a332558348cda0c5f0e2a1647b8e8be38553784", "html_url": "https://github.com/rust-lang/rust/commit/9a332558348cda0c5f0e2a1647b8e8be38553784", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a332558348cda0c5f0e2a1647b8e8be38553784/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f4d85a9d727440b246aee8f54549c5c72022700", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f4d85a9d727440b246aee8f54549c5c72022700", "html_url": "https://github.com/rust-lang/rust/commit/8f4d85a9d727440b246aee8f54549c5c72022700"}], "stats": {"total": 38, "additions": 18, "deletions": 20}, "files": [{"sha": "50a0c4a1c898d57b96ff477beac8a38115fe92b3", "filename": "Configurations.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1138,7 +1138,7 @@ match lorem {\n }\n ```\n \n-See also: [`trailing_comma`](#trailing_comma), [`wrap_match_arms`](#wrap_match_arms).\n+See also: [`trailing_comma`](#trailing_comma), [`match_arm_blocks`](#match_arm_blocks).\n \n ## `max_width`\n \n@@ -1806,7 +1806,7 @@ Break comments to fit on the line\n // commodo consequat.\n ```\n \n-## `wrap_match_arms`\n+## `match_arm_blocks`\n \n Wrap the body of arms in blocks when it does not fit on the same line with the pattern of arms\n "}, {"sha": "f1ce217a36b186cec0abd2cd08873f727c6106f3", "filename": "src/config.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -618,12 +618,6 @@ create_config! {\n     reorder_imported_names: bool, true, false,\n         \"Reorder lists of names in import statements alphabetically\";\n \n-    // Match\n-    wrap_match_arms: bool, true, false, \"Wrap the body of arms in blocks when it does not fit on \\\n-                                  the same line with the pattern of arms\";\n-    match_block_trailing_comma: bool, false, false,\n-        \"Put a trailing comma after a block based match arm (non-block arms are not affected)\";\n-\n     // Spaces around punctuation\n     binop_separator: SeparatorPlace, SeparatorPlace::Front, false,\n         \"Where to put a binary operator when a binary expression goes multiline.\";\n@@ -643,6 +637,8 @@ create_config! {\n         \"Remove blank lines at start or end of a block\";\n     same_line_attributes: bool, true, false,\n         \"Try to put attributes on the same line as fields and variants.\";\n+    match_arm_blocks: bool, true, false, \"Wrap the body of arms in blocks when it does not fit on \\\n+        the same line with the pattern of arms\";\n     force_multiline_blocks: bool, false, false,\n         \"Force multiline closure bodies and match arms to be wrapped in a block\";\n     fn_args_density: Density, Density::Tall, false, \"Argument density in functions\";\n@@ -653,6 +649,8 @@ create_config! {\n         \"How to handle trailing commas for lists\";\n     trailing_semicolon: bool, true, false,\n         \"Add trailing semicolon after break, continue and return\";\n+    match_block_trailing_comma: bool, false, false,\n+        \"Put a trailing comma after a block based match arm (non-block arms are not affected)\";\n \n     // Options that can change the source code beyond whitespace/blocks (somewhat linty things)\n     merge_derives: bool, true, true, \"Merge multiple `#[derive(...)]` into a single one\";"}, {"sha": "812ebd5cf3a264e634aea12c86391e23507be3c3", "filename": "src/expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1559,7 +1559,7 @@ fn rewrite_match_body(\n \n         let indent_str = shape.indent.to_string(context.config);\n         let nested_indent_str = next_line_indent.to_string(context.config);\n-        let (body_prefix, body_suffix) = if context.config.wrap_match_arms() {\n+        let (body_prefix, body_suffix) = if context.config.match_arm_blocks() {\n             let comma = if context.config.match_block_trailing_comma() {\n                 \",\"\n             } else {"}, {"sha": "53e37e13c4f2bfac9545df94c524a76c32fbd870", "filename": "tests/source/configs-match_arm_blocks-false.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-match_arm_blocks-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-match_arm_blocks-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-match_arm_blocks-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: true\n+// rustfmt-match_arm_blocks: false\n // Wrap match-arms\n \n fn main() {", "previous_filename": "tests/source/configs-wrap_match_arms-true.rs"}, {"sha": "a452b13cd27db3aeb874b074cc4d68846c118f90", "filename": "tests/source/configs-match_arm_blocks-true.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-match_arm_blocks-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fconfigs-match_arm_blocks-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-match_arm_blocks-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: true\n // Wrap match-arms\n \n fn main() {", "previous_filename": "tests/source/configs-wrap_match_arms-false.rs"}, {"sha": "9996c194818796b74575018e80ab99373b9238ea", "filename": "tests/source/issue-1127.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fissue-1127.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fissue-1127.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fissue-1127.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,5 +1,5 @@\n // rustfmt-max_width:120\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // rustfmt-match_block_trailing_comma: true\n \n fn a_very_very_very_very_very_very_very_very_very_very_very_long_function_name() -> i32 {"}, {"sha": "134d2fdf9a4a5bc1f1602936dee01335bb1f7164", "filename": "tests/source/match-nowrap-trailing-comma.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fmatch-nowrap-trailing-comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fmatch-nowrap-trailing-comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fmatch-nowrap-trailing-comma.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // rustfmt-match_block_trailing_comma: true\n // Match expressions, no unwrapping of block arms or wrapping of multiline\n // expressions."}, {"sha": "db22cd9f010662002cfc5bf31f1f9663aa23d6ed", "filename": "tests/source/match-nowrap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fmatch-nowrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Fsource%2Fmatch-nowrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fmatch-nowrap.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // Match expressions, no unwrapping of block arms or wrapping of multiline\n // expressions.\n "}, {"sha": "6619d8b2630369ac8b6c325f821340116548bb7c", "filename": "tests/target/configs-control_style-rfc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-control_style-rfc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-control_style-rfc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-control_style-rfc.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -26,7 +26,7 @@ fn issue1656() {\n             match rewrite {\n                 Some(ref body_str)\n                     if (!body_str.contains('\\n') && body_str.len() <= arm_shape.width)\n-                        || !context.config.wrap_match_arms()\n+                        || !context.config.match_arm_blocks()\n                         || (extend && first_line_width(body_str) <= arm_shape.width)\n                         || is_block =>\n                 {"}, {"sha": "4d53a96a7b7d82b66d21531a5427615f3dc667d6", "filename": "tests/target/configs-match_arm_blocks-false.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-match_arm_blocks-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-match_arm_blocks-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-match_arm_blocks-false.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // Wrap match-arms\n \n fn main() {", "previous_filename": "tests/target/configs-wrap_match_arms-false.rs"}, {"sha": "d75ef03397a44a1694aefbe8120ce2a86a0f6c22", "filename": "tests/target/configs-match_arm_blocks-true.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-match_arm_blocks-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fconfigs-match_arm_blocks-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-match_arm_blocks-true.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: true\n+// rustfmt-match_arm_blocks: true\n // Wrap match-arms\n \n fn main() {", "previous_filename": "tests/target/configs-wrap_match_arms-true.rs"}, {"sha": "dbdd234b8e4bee96c4062e28f2f6af5e470bc551", "filename": "tests/target/issue-1127.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fissue-1127.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fissue-1127.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-1127.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,5 +1,5 @@\n // rustfmt-max_width:120\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // rustfmt-match_block_trailing_comma: true\n \n fn a_very_very_very_very_very_very_very_very_very_very_very_long_function_name() -> i32 {"}, {"sha": "19ef2144822a692727382dc9e49f7702f1aac26b", "filename": "tests/target/match-nowrap-trailing-comma.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fmatch-nowrap-trailing-comma.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fmatch-nowrap-trailing-comma.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fmatch-nowrap-trailing-comma.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // rustfmt-match_block_trailing_comma: true\n // Match expressions, no unwrapping of block arms or wrapping of multiline\n // expressions."}, {"sha": "9e674b1e2f5403eebb6273bab8bfb1d1cb9e61f1", "filename": "tests/target/match-nowrap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fmatch-nowrap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a332558348cda0c5f0e2a1647b8e8be38553784/tests%2Ftarget%2Fmatch-nowrap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fmatch-nowrap.rs?ref=9a332558348cda0c5f0e2a1647b8e8be38553784", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-wrap_match_arms: false\n+// rustfmt-match_arm_blocks: false\n // Match expressions, no unwrapping of block arms or wrapping of multiline\n // expressions.\n "}]}