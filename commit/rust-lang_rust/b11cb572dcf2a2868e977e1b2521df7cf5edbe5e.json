{"sha": "b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxMWNiNTcyZGNmMmEyODY4ZTk3N2UxYjI1MjFkZjdjZjVlZGJlNWU=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-25T16:02:37Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-09-25T16:04:30Z"}, "message": "Use cranelift_frontend::Switch for switchInt", "tree": {"sha": "92a75691e993447999461a6f07a5e1d525a5f9b6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/92a75691e993447999461a6f07a5e1d525a5f9b6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "html_url": "https://github.com/rust-lang/rust/commit/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c37e5ff96d5330b53be3ec45188fd3e60871d923", "url": "https://api.github.com/repos/rust-lang/rust/commits/c37e5ff96d5330b53be3ec45188fd3e60871d923", "html_url": "https://github.com/rust-lang/rust/commit/c37e5ff96d5330b53be3ec45188fd3e60871d923"}], "stats": {"total": 110, "additions": 71, "deletions": 39}, "files": [{"sha": "b751a1a3eae391b9bb84325491a52c1249bfb1f0", "filename": "Cargo.lock", "status": "modified", "additions": 38, "deletions": 25, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "patch": "@@ -90,7 +90,7 @@ dependencies = [\n [[package]]\n name = \"cranelift\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"cranelift-frontend 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n@@ -99,15 +99,15 @@ dependencies = [\n [[package]]\n name = \"cranelift-bforest\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-entity 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n ]\n \n [[package]]\n name = \"cranelift-codegen\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-bforest 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"cranelift-codegen-meta 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n@@ -121,17 +121,17 @@ dependencies = [\n [[package]]\n name = \"cranelift-codegen-meta\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n \n [[package]]\n name = \"cranelift-entity\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n \n [[package]]\n name = \"cranelift-faerie\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"cranelift-module 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n@@ -144,15 +144,16 @@ dependencies = [\n [[package]]\n name = \"cranelift-frontend\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n+ \"log 0.4.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"cranelift-module\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"cranelift-entity 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n@@ -163,7 +164,7 @@ dependencies = [\n [[package]]\n name = \"cranelift-native\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"raw-cpuid 5.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -173,7 +174,7 @@ dependencies = [\n [[package]]\n name = \"cranelift-simplejit\"\n version = \"0.22.0\"\n-source = \"git+https://github.com/CraneStation/cranelift.git#940e2545fd041a766a48316fab0fb079d139da23\"\n+source = \"git+https://github.com/CraneStation/cranelift.git#0157cdabe4f96bf4cb6cf9f7a207cbe38b89dab4\"\n dependencies = [\n  \"cranelift-codegen 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n  \"cranelift-module 0.22.0 (git+https://github.com/CraneStation/cranelift.git)\",\n@@ -226,7 +227,7 @@ dependencies = [\n  \"goblin 0.0.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"indexmap 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"scroll 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scroll 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"string-interner 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"structopt 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"structopt-derive 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -265,7 +266,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"log 0.4.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"plain 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"scroll 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scroll 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -291,7 +292,7 @@ name = \"lazy_static\"\n version = \"1.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"version_check 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -322,7 +323,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"version_check 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -442,20 +443,21 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"scroll\"\n-version = \"0.9.0\"\n+version = \"0.9.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"scroll_derive 0.9.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scroll_derive 0.9.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"scroll_derive\"\n-version = \"0.9.4\"\n+version = \"0.9.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"proc-macro2 0.4.19 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.6.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"syn 0.14.9 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"syn 0.15.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -478,7 +480,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"serde_json\"\n-version = \"1.0.28\"\n+version = \"1.0.30\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"itoa 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -528,6 +530,16 @@ dependencies = [\n  \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"syn\"\n+version = \"0.15.6\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"proc-macro2 0.4.19 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"quote 0.6.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+]\n+\n [[package]]\n name = \"synstructure\"\n version = \"0.9.0\"\n@@ -546,7 +558,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"failure 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"failure_derive 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.30 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -610,7 +622,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"version_check\"\n-version = \"0.1.4\"\n+version = \"0.1.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -700,17 +712,18 @@ dependencies = [\n \"checksum rustc-demangle 0.1.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bcfe5b13211b4d78e5c2cadfebd7769197d95c639c35a50057eb4c05de811395\"\n \"checksum rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n \"checksum ryu 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7153dd96dade874ab973e098cb62fcdbb89a03682e46b144fd09550998d4a4a7\"\n-\"checksum scroll 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"66f024a8cc5e456eb870f688dbd899c84f61190c82c7a911e40f926941969074\"\n-\"checksum scroll_derive 0.9.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f9a353f5dd99e42ff097d5a61db3257aa2c7127d76a3fa8287b642ef9ae0f7c5\"\n+\"checksum scroll 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2f84d114ef17fd144153d608fba7c446b0145d038985e7a8cc5d08bb0ce20383\"\n+\"checksum scroll_derive 0.9.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8f1aa96c45e7f5a91cb7fabe7b279f02fea7126239fc40b732316e8b6a2d0fcb\"\n \"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n \"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n \"checksum serde 1.0.79 (registry+https://github.com/rust-lang/crates.io-index)\" = \"84257ccd054dc351472528c8587b4de2dbf0dc0fe2e634030c1a90bfdacebaa9\"\n-\"checksum serde_json 1.0.28 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d30ec34ac923489285d24688c7a9c0898d16edff27fc1f1bd854edeff6ca3b7f\"\n+\"checksum serde_json 1.0.30 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7f60a296fed15c3edbbe9aa83b646531459e565c525b0ab628deb1a4b28e4180\"\n \"checksum string-interner 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"abb38a0d8fe673c40b10b6b75abcb076a958cc10fb894f14993d9737c4c87000\"\n \"checksum strsim 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bb4f380125926a99e52bc279241539c018323fab05ad6368b56f93d9369ff550\"\n \"checksum structopt 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d8e9ad6a11096cbecdcca0cc6aa403fdfdbaeda2fb3323a39c98e6a166a1e45a\"\n \"checksum structopt-derive 0.2.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4cbce8ccdc62166bd594c14396a3242bf94c337a51dbfa9be1076dd74b3db2af\"\n \"checksum syn 0.14.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"261ae9ecaa397c42b960649561949d69311f08eeaea86a65696e6e46517cf741\"\n+\"checksum syn 0.15.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"854b08a640fc8f54728fb95321e3ec485b365a97fe47609797c671addd1dde69\"\n \"checksum synstructure 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"85bb9b7550d063ea184027c9b8c20ac167cd36d3e06b3a40bceb9d746dc1a7b7\"\n \"checksum target-lexicon 0.0.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a34226bd63b5a26fc909f5f0d7ef4dc55d5851077035e49437e4e14bf567247f\"\n \"checksum termcolor 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4096add70612622289f2fdcdbd5086dc81c1e2675e6ae58d6c4f62a16c6d7f2f\"\n@@ -722,7 +735,7 @@ dependencies = [\n \"checksum unicode-xid 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fc72304796d0818e357ead4e000d19c9c174ab23dc11093ac919054d20a6a7fc\"\n \"checksum utf8-ranges 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fd70f467df6810094968e2fce0ee1bd0e87157aceb026a8c083bcf5e25b9efe4\"\n \"checksum vec_map 0.8.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"05c78687fb1a80548ae3250346c3db86a80a7cdd77bda190189f2d0a0987c81a\"\n-\"checksum version_check 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7716c242968ee87e5542f8021178248f267f295a5c4803beae8b8b7fd9bc6051\"\n+\"checksum version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"914b1a6776c4c929a602fafd8bc742e06365d4bcbe48c30f9cca5824f70dc9dd\"\n \"checksum winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"92c1eb33641e276cfa214a0522acad57be5c56b10cb348b3c5117db75f3ac4b0\"\n \"checksum winapi-i686-pc-windows-gnu 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ac3b87c63620426dd9b991e5ce0329eff545bccbbb34f3be09ff6fb6ab51b7b6\"\n \"checksum winapi-util 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"afc5508759c5bf4285e61feb862b6083c8480aec864fa17a81fdec6f69b461ab\""}, {"sha": "455661bd77e159a2dda878663beb17d858db90ab", "filename": "example/mini_core.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/example%2Fmini_core.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/example%2Fmini_core.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/example%2Fmini_core.rs?ref=b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "patch": "@@ -170,6 +170,21 @@ impl<T: ?Sized> PartialEq for *const T {\n     }\n }\n \n+#[lang = \"neg\"]\n+pub trait Neg {\n+    type Output;\n+\n+    fn neg(self) -> Self::Output;\n+}\n+\n+impl Neg for isize {\n+    type Output = isize;\n+\n+    fn neg(self) -> isize {\n+        -self\n+    }\n+}\n+\n pub enum Option<T> {\n     Some(T),\n     None,"}, {"sha": "3e6d2aa992ad8f97305f34fb00361515ab3fb76d", "filename": "example/mini_core_hello_world.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/example%2Fmini_core_hello_world.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/example%2Fmini_core_hello_world.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/example%2Fmini_core_hello_world.rs?ref=b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "patch": "@@ -74,6 +74,12 @@ impl Drop for NoisyDropInner {\n     }\n }\n \n+enum Ordering {\n+    Less = -1,\n+    Equal = 0,\n+    Greater = 1,\n+}\n+\n #[lang = \"start\"]\n fn start<T: Termination + 'static>(\n     main: fn() -> T,\n@@ -157,4 +163,9 @@ fn main() {\n         Some(_) => {},\n         None => assert!(false),\n     }\n+\n+    match Ordering::Less {\n+        Ordering::Less => {},\n+        _ => assert!(false),\n+    }\n }"}, {"sha": "e3df8769b987b52c9d84bfa0a00ba8aa50ebacf6", "filename": "src/base.rs", "status": "modified", "additions": 7, "deletions": 14, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b11cb572dcf2a2868e977e1b2521df7cf5edbe5e/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=b11cb572dcf2a2868e977e1b2521df7cf5edbe5e", "patch": "@@ -202,21 +202,14 @@ fn codegen_fn_content<'a, 'tcx: 'a>(fx: &mut FunctionCx<'a, 'tcx, impl Backend>)\n                 values,\n                 targets,\n             } => {\n-                // TODO: prevent panics on large and negative disciminants\n-                if should_codegen(fx.tcx.sess) {\n-                    let discr = trans_operand(fx, discr).load_value(fx);\n-                    let mut jt_data = JumpTableData::new();\n-                    for (i, value) in values.iter().enumerate() {\n-                        let ebb = fx.get_ebb(targets[i]);\n-                        jt_data.set_entry(*value as usize, ebb);\n-                    }\n-                    let jump_table = fx.bcx.create_jump_table(jt_data);\n-                    fx.bcx.ins().br_table(discr, jump_table);\n-                    let otherwise_ebb = fx.get_ebb(targets[targets.len() - 1]);\n-                    fx.bcx.ins().jump(otherwise_ebb, &[]);\n-                } else {\n-                    fx.bcx.ins().trap(TrapCode::User(0));\n+                let discr = trans_operand(fx, discr).load_value(fx);\n+                let mut switch = ::cranelift::frontend::Switch::new();\n+                for (i, value) in values.iter().enumerate() {\n+                    let ebb = fx.get_ebb(targets[i]);\n+                    switch.set_entry(*value as u64, ebb);\n                 }\n+                let otherwise_ebb = fx.get_ebb(targets[targets.len() - 1]);\n+                switch.emit(&mut fx.bcx, discr, otherwise_ebb);\n             }\n             TerminatorKind::Call {\n                 func,"}]}