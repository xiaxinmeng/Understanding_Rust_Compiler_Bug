{"sha": "a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwZWQxZmIyMGIzYWEzYjI4NTRiMTgzZjQzMDYwZTU2MmI0NjY0ZWI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-22T22:27:35Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-29T21:42:30Z"}, "message": "build: Introduce rustsyntax crate", "tree": {"sha": "6570d387f82eaf507bced41b4bb8b7adfb0a1206", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6570d387f82eaf507bced41b4bb8b7adfb0a1206"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "html_url": "https://github.com/rust-lang/rust/commit/a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c7082ce8e877af0e1b84a2f3710eb5234ff415fa", "url": "https://api.github.com/repos/rust-lang/rust/commits/c7082ce8e877af0e1b84a2f3710eb5234ff415fa", "html_url": "https://github.com/rust-lang/rust/commit/c7082ce8e877af0e1b84a2f3710eb5234ff415fa"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "50f5d542d126e0f4f9ddd0a424d6ad5afd9db8e4", "filename": "Makefile.in", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -106,13 +106,16 @@ CFG_RUSTLLVM :=$(call CFG_LIB_NAME,rustllvm)\n CFG_CORELIB :=$(call CFG_LIB_NAME,core)\n CFG_STDLIB :=$(call CFG_LIB_NAME,std)\n CFG_LIBRUSTC :=$(call CFG_LIB_NAME,rustc)\n+CFG_LIBRUSTSYNTAX :=$(call CFG_LIB_NAME,rustsyntax)\n \n STDLIB_GLOB :=$(call CFG_LIB_GLOB,std)\n CORELIB_GLOB :=$(call CFG_LIB_GLOB,core)\n LIBRUSTC_GLOB :=$(call CFG_LIB_GLOB,rustc)\n+LIBRUSTSYNTAX_GLOB :=$(call CFG_LIB_GLOB,rustsyntax)\n STDLIB_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,std)\n CORELIB_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,core)\n LIBRUSTC_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,rustc)\n+LIBRUSTSYNTAX_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,rustsyntax)\n \n # version-string calculation\n CFG_GIT_DIR := $(CFG_SRC_DIR).git\n@@ -190,6 +193,10 @@ COMPILER_INPUTS := $(filter-out $(S)src/rustc/driver/rustc.rs,     \\\n                        $(wildcard $(addprefix $(S)src/rustc/,      \\\n                            rustc.rc *.rs */*.rs */*/*.rs)))\n \n+LIBRUSTSYNTAX_CRATE := $(S)src/librustsyntax/rustsyntax.rc\n+LIBRUSTSYNTAX_INPUTS := $(wildcard $(addprefix $(S)src/librustsyntax/, \\\n+                            rustsyntax.rc *.rs))\n+\n RUSTC_INPUTS := $(S)src/rustc/driver/rustc.rs\n \n ######################################################################"}, {"sha": "21669dd6f6985b2a33638fa7daa84a53e7d30ea4", "filename": "mk/clean.mk", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fclean.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fclean.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fclean.mk?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -70,9 +70,11 @@ clean$(1)_H_$(2):\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_CORELIB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_STDLIB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_LIBRUSTC)\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_LIBRUSTSYNTAX)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CORELIB_GLOB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(STDLIB_GLOB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(LIBRUSTC_GLOB)\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(LIBRUSTSYNTAX_GLOB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_RUSTLLVM)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/libstd.rlib\n \n@@ -94,9 +96,11 @@ clean$(1)_T_$(2)_H_$(3):\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_CORELIB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_STDLIB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTC)\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTSYNTAX)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CORELIB_GLOB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(STDLIB_GLOB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(LIBRUSTC_GLOB)\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(LIBRUSTSYNTAX_GLOB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_RUSTLLVM)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/libstd.rlib\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a"}, {"sha": "7ccd7b6690d69933d3968d4e4d3ae49b50be618a", "filename": "mk/dist.mk", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -28,6 +28,7 @@ PKG_FILES := \\\n       etc                                      \\\n       fuzzer                                   \\\n       libcore                                  \\\n+      librustsyntax                            \\\n       libstd                                   \\\n       rt                                       \\\n       rustdoc                                  \\"}, {"sha": "48d920119982bf5e39f308d36e2abe8820a2324a", "filename": "mk/host.mk", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fhost.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Fhost.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fhost.mk?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -21,10 +21,9 @@ $$(HBIN$(2)_H_$(4))/rustc$$(X): \\\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n-# FIXME: The fuzzer depends on this. Remove once it's rpathed to correctly\n-# find it in the appropriate target directory\n $$(HLIB$(2)_H_$(4))/$$(CFG_LIBRUSTC): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$$(CFG_LIBRUSTC) \\\n+\t$$(HLIB$(2)_H_$(4))/$$(CFG_LIBRUSTSYNTAX) \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME) \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUSTLLVM) \\\n \t$$(HCORELIB_DEFAULT$(2)_H_$(3)) \\\n@@ -35,6 +34,18 @@ $$(HLIB$(2)_H_$(4))/$$(CFG_LIBRUSTC): \\\n \t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTC_DSYM_GLOB) \\\n \t        $$(HLIB$(2)_H_$(4))\n \n+$$(HLIB$(2)_H_$(4))/$$(CFG_LIBRUSTSYNTAX): \\\n+\t$$(TLIB$(1)_T_$(4)_H_$(3))/$$(CFG_LIBRUSTSYNTAX) \\\n+\t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME) \\\n+\t$$(HLIB$(2)_H_$(4))/$$(CFG_RUSTLLVM) \\\n+\t$$(HCORELIB_DEFAULT$(2)_H_$(3)) \\\n+\t$$(HSTDLIB_DEFAULT$(2)_H_$(3))\n+\t@$$(call E, cp: $$@)\n+\t$$(Q)cp $$< $$@\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTSYNTAX_GLOB) \\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTSYNTAX_DSYM_GLOB) \\\n+\t        $$(HLIB$(2)_H_$(4))\n+\n $$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)"}, {"sha": "bc8df87c7b2b4a2fdc6cdd305dd29f3fed75ebe0", "filename": "mk/install.mk", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -42,6 +42,8 @@ install-target-$(1)-host-$(2): $$(SREQ$$(ISTAGE)_T_$(1)_H_$(2))\n \t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(STDLIB_GLOB))\n \t$$(Q)$$(call INSTALL_LIB, \\\n \t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTC_GLOB))\n+\t$$(Q)$$(call INSTALL_LIB, \\\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTSYNTAX_GLOB))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),libmorestack.a)\n \n endef\n@@ -75,6 +77,7 @@ install-host: $(SREQ$(ISTAGE)_T_$(CFG_HOST_TRIPLE)_H_$(CFG_HOST_TRIPLE))\n \t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(CORELIB_GLOB))\n \t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(STDLIB_GLOB))\n \t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTC_GLOB))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTSYNTAX_GLOB))\n \t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUSTLLVM))\n \t$(Q)$(call INSTALL,$(S)/man, \\\n \t     $(PREFIX_ROOT)/share/man/man1,rustc.1)\n@@ -95,6 +98,7 @@ uninstall:\n           $(call HOST_LIB_FROM_HL_GLOB,$(CORELIB_GLOB)) \\\n           $(call HOST_LIB_FROM_HL_GLOB,$(STDLIB_GLOB)) \\\n           $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTC_GLOB)) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTSYNTAX_GLOB)) \\\n         ; \\\n         do rm -f $$i ; \\\n         done"}, {"sha": "3d639bdc98c6d9e646085e1899816a44fb11bdd5", "filename": "mk/target.mk", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Ftarget.mk", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/mk%2Ftarget.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftarget.mk?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -38,6 +38,12 @@ $$(TBIN$(1)_T_$(2)_H_$(3))/rustc$$(X):\t\t\t\t\\\n \n $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC):\t\t\\\n \t\t$$(COMPILER_CRATE) $$(COMPILER_INPUTS)\t\t\\\n+                $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTSYNTAX)\n+\t@$$(call E, compile_and_link: $$@)\n+\t$$(STAGE$(1)_T_$(2)_H_$(3)) -o $$@ $$< && touch $$@\n+\n+$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTSYNTAX): \\\n+                $$(LIBRUSTSYNTAX_CRATE) $$(LIBRUSTSYNTAX_INPUTS) \\\n \t\t$$(TSREQ$(1)_T_$(2)_H_$(3))\t\t\t\\\n \t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM)\t\\\n \t\t$$(TCORELIB_DEFAULT$(1)_T_$(2)_H_$(3))      \\"}, {"sha": "ddcc7a5f80e89285ad41b9fb562ea6658d1cbef4", "filename": "src/librustsyntax/rustsyntax.rc", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/src%2Flibrustsyntax%2Frustsyntax.rc", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/src%2Flibrustsyntax%2Frustsyntax.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Frustsyntax.rc?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -0,0 +1,5 @@\n+#[link(name = \"rustsyntax\",\n+       vers = \"0.2\",\n+       uuid = \"c2b79dd0-a437-4ec7-95f9-858d77808c2f\")];\n+\n+#[crate_type = \"lib\"];"}, {"sha": "8bd0a621b0320feb7e0c7be1a568f06752874056", "filename": "src/rustc/rustc.rc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/src%2Frustc%2Frustc.rc", "raw_url": "https://github.com/rust-lang/rust/raw/a0ed1fb20b3aa3b2854b183f43060e562b4664eb/src%2Frustc%2Frustc.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Frustc.rc?ref=a0ed1fb20b3aa3b2854b183f43060e562b4664eb", "patch": "@@ -13,6 +13,8 @@ use std (name = \"std\",\n          vers = \"0.2\",\n          url = \"https://github.com/mozilla/rust/tree/master/src/libstd\");\n \n+use rustsyntax;\n+\n mod middle {\n     mod trans {\n         mod common;"}]}