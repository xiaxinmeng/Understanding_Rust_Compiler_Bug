{"sha": "da1febff1eb29172f8f464360d0358ef66414488", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhMWZlYmZmMWViMjkxNzJmOGY0NjQzNjBkMDM1OGVmNjY0MTQ0ODg=", "commit": {"author": {"name": "memoryleak47", "email": "memoryleak47@protonmail.ch", "date": "2018-03-23T14:31:05Z"}, "committer": {"name": "memoryleak47", "email": "memoryleak47@protonmail.ch", "date": "2018-03-23T14:31:05Z"}, "message": "the expected ui output is now the empty String if the corresponding files are missing", "tree": {"sha": "d15760dd8cd2c319a87b6d01aafceafa323ce1fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d15760dd8cd2c319a87b6d01aafceafa323ce1fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da1febff1eb29172f8f464360d0358ef66414488", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da1febff1eb29172f8f464360d0358ef66414488", "html_url": "https://github.com/rust-lang/rust/commit/da1febff1eb29172f8f464360d0358ef66414488", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da1febff1eb29172f8f464360d0358ef66414488/comments", "author": {"login": "memoryleak47", "id": 5725430, "node_id": "MDQ6VXNlcjU3MjU0MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5725430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memoryleak47", "html_url": "https://github.com/memoryleak47", "followers_url": "https://api.github.com/users/memoryleak47/followers", "following_url": "https://api.github.com/users/memoryleak47/following{/other_user}", "gists_url": "https://api.github.com/users/memoryleak47/gists{/gist_id}", "starred_url": "https://api.github.com/users/memoryleak47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memoryleak47/subscriptions", "organizations_url": "https://api.github.com/users/memoryleak47/orgs", "repos_url": "https://api.github.com/users/memoryleak47/repos", "events_url": "https://api.github.com/users/memoryleak47/events{/privacy}", "received_events_url": "https://api.github.com/users/memoryleak47/received_events", "type": "User", "site_admin": false}, "committer": {"login": "memoryleak47", "id": 5725430, "node_id": "MDQ6VXNlcjU3MjU0MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/5725430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/memoryleak47", "html_url": "https://github.com/memoryleak47", "followers_url": "https://api.github.com/users/memoryleak47/followers", "following_url": "https://api.github.com/users/memoryleak47/following{/other_user}", "gists_url": "https://api.github.com/users/memoryleak47/gists{/gist_id}", "starred_url": "https://api.github.com/users/memoryleak47/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/memoryleak47/subscriptions", "organizations_url": "https://api.github.com/users/memoryleak47/orgs", "repos_url": "https://api.github.com/users/memoryleak47/repos", "events_url": "https://api.github.com/users/memoryleak47/events{/privacy}", "received_events_url": "https://api.github.com/users/memoryleak47/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb7ab5c85db7954f2662e84a88610b8b39b501c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb7ab5c85db7954f2662e84a88610b8b39b501c7", "html_url": "https://github.com/rust-lang/rust/commit/bb7ab5c85db7954f2662e84a88610b8b39b501c7"}], "stats": {"total": 15, "additions": 6, "deletions": 9}, "files": [{"sha": "320bca7bb647318d2a2302b4c359f1c5d30bd371", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/da1febff1eb29172f8f464360d0358ef66414488/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da1febff1eb29172f8f464360d0358ef66414488/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=da1febff1eb29172f8f464360d0358ef66414488", "patch": "@@ -2802,7 +2802,7 @@ impl<'test> TestCx<'test> {\n         normalized\n     }\n \n-    fn expected_output_path(&self, kind: &str) -> Result<PathBuf, String> {\n+    fn load_expected_output(&self, kind: &str) -> String {\n         let mut path = expected_output_path(&self.testpaths,\n                                             self.revision,\n                                             &self.config.compare_mode,\n@@ -2814,18 +2814,15 @@ impl<'test> TestCx<'test> {\n         }\n \n         if path.exists() {\n-            Ok(path)\n+            match self.load_expected_output_from_path(&path) {\n+                Ok(x) => x,\n+                Err(x) => self.fatal(&x),\n+            }\n         } else {\n-            Err(String::from(\"no existing output_path found\"))\n+            String::new()\n         }\n     }\n \n-    fn load_expected_output(&self, kind: &str) -> String {\n-        self.expected_output_path(kind)\n-            .and_then(|x| self.load_expected_output_from_path(&x))\n-            .unwrap_or_else(|x| self.fatal(&x))\n-    }\n-\n     fn load_expected_output_from_path(&self, path: &Path) -> Result<String, String> {\n         let mut result = String::new();\n         match File::open(path).and_then(|mut f| f.read_to_string(&mut result)) {"}]}