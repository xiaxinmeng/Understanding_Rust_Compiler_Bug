{"sha": "7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlZmVlYmExM2EyY2E4NjJmOGQwZjZlMWYwZjZmZDkzNjQ3OGI3OGY=", "commit": {"author": {"name": "Bastian K\u00f6cher", "email": "git@kchr.de", "date": "2017-12-22T20:06:18Z"}, "committer": {"name": "Bastian K\u00f6cher", "email": "git@kchr.de", "date": "2017-12-26T11:26:39Z"}, "message": "Use `start` for the `sepcomp-inlining` test", "tree": {"sha": "955704faccc551b7ab3fdcec079f567dfeabcf09", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/955704faccc551b7ab3fdcec079f567dfeabcf09"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "html_url": "https://github.com/rust-lang/rust/commit/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f/comments", "author": {"login": "bkchr", "id": 5718007, "node_id": "MDQ6VXNlcjU3MTgwMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5718007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkchr", "html_url": "https://github.com/bkchr", "followers_url": "https://api.github.com/users/bkchr/followers", "following_url": "https://api.github.com/users/bkchr/following{/other_user}", "gists_url": "https://api.github.com/users/bkchr/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkchr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkchr/subscriptions", "organizations_url": "https://api.github.com/users/bkchr/orgs", "repos_url": "https://api.github.com/users/bkchr/repos", "events_url": "https://api.github.com/users/bkchr/events{/privacy}", "received_events_url": "https://api.github.com/users/bkchr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bkchr", "id": 5718007, "node_id": "MDQ6VXNlcjU3MTgwMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5718007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkchr", "html_url": "https://github.com/bkchr", "followers_url": "https://api.github.com/users/bkchr/followers", "following_url": "https://api.github.com/users/bkchr/following{/other_user}", "gists_url": "https://api.github.com/users/bkchr/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkchr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkchr/subscriptions", "organizations_url": "https://api.github.com/users/bkchr/orgs", "repos_url": "https://api.github.com/users/bkchr/repos", "events_url": "https://api.github.com/users/bkchr/events{/privacy}", "received_events_url": "https://api.github.com/users/bkchr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "072f3ebd878ad044abedd3324469ae1b01eca67b", "url": "https://api.github.com/repos/rust-lang/rust/commits/072f3ebd878ad044abedd3324469ae1b01eca67b", "html_url": "https://github.com/rust-lang/rust/commit/072f3ebd878ad044abedd3324469ae1b01eca67b"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "1d20d940000f4d4e4f17f18257bff61dd4a040d8", "filename": "src/test/run-make/sepcomp-inlining/Makefile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2FMakefile?ref=7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "patch": "@@ -10,6 +10,6 @@ all:\n \t$(RUSTC) foo.rs --emit=llvm-ir -C codegen-units=3 \\\n \t\t-Z inline-in-all-cgus\n \t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c define\\ i32\\ .*inlined)\" -eq \"0\" ]\n-\t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c define\\ internal\\ i32\\ .*inlined)\" -eq \"1\" ]\n+\t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c define\\ internal\\ i32\\ .*inlined)\" -eq \"2\" ]\n \t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c define\\ hidden\\ i32\\ .*normal)\" -eq \"1\" ]\n-\t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c declare\\ hidden\\ i32\\ .*normal)\" -eq \"1\" ]\n+\t[ \"$$(cat \"$(TMPDIR)\"/foo.*.ll | grep -c declare\\ hidden\\ i32\\ .*normal)\" -eq \"2\" ]"}, {"sha": "5b62c1b062673f648c6f8d7f3ea40e0103f51138", "filename": "src/test/run-make/sepcomp-inlining/foo.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fsepcomp-inlining%2Ffoo.rs?ref=7efeeba13a2ca862f8d0f6e1f0f6fd936478b78f", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![feature(start)]\n+\n #[inline]\n fn inlined() -> u32 {\n     1234\n@@ -29,7 +31,10 @@ mod b {\n     }\n }\n \n-fn main() {\n+#[start]\n+fn start(_: isize, _: *const *const u8) -> isize {\n     a::f();\n     b::f();\n+\n+    0\n }"}]}