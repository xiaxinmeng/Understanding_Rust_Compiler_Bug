{"sha": "6cfd471ffe997c56848d27e688dd8bd30f18412a", "node_id": "C_kwDOAAsO6NoAKDZjZmQ0NzFmZmU5OTdjNTY4NDhkMjdlNjg4ZGQ4YmQzMGYxODQxMmE", "commit": {"author": {"name": "Thom Chiovoloni", "email": "thom@shift.click", "date": "2022-07-24T13:18:34Z"}, "committer": {"name": "Thom Chiovoloni", "email": "thom@shift.click", "date": "2022-07-24T13:37:50Z"}, "message": "Don't overwrite CodegenFnAttrs when adding used compiler/linker", "tree": {"sha": "ab5d66e4bb97d90a2c77032fa44f4dc3c7744ba9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab5d66e4bb97d90a2c77032fa44f4dc3c7744ba9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6cfd471ffe997c56848d27e688dd8bd30f18412a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQQszICQ1r0Zqrp7OLPXcz0dendfCgUCYt1LLgAKCRDXcz0dendf\nCoqIAP9EcxpvcBUadT3w6Ygp6vHHRaOkDMCN8se8zdAiRtfWrwEAvg/yQQSMPj3F\nuJmnCETj2xVd5akb6fehjUKmzQWnrAs=\n=LL/B\n-----END PGP SIGNATURE-----", "payload": "tree ab5d66e4bb97d90a2c77032fa44f4dc3c7744ba9\nparent b4151a41a0b275dee59ffbbc115e7bfc5be8a8c3\nauthor Thom Chiovoloni <thom@shift.click> 1658668714 -0700\ncommitter Thom Chiovoloni <thom@shift.click> 1658669870 -0700\n\nDon't overwrite CodegenFnAttrs when adding used compiler/linker\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6cfd471ffe997c56848d27e688dd8bd30f18412a", "html_url": "https://github.com/rust-lang/rust/commit/6cfd471ffe997c56848d27e688dd8bd30f18412a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6cfd471ffe997c56848d27e688dd8bd30f18412a/comments", "author": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b4151a41a0b275dee59ffbbc115e7bfc5be8a8c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4151a41a0b275dee59ffbbc115e7bfc5be8a8c3", "html_url": "https://github.com/rust-lang/rust/commit/b4151a41a0b275dee59ffbbc115e7bfc5be8a8c3"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "0fcbfa734f8fe93dbb9f9b9d49bf5f21a3a1b99c", "filename": "compiler/rustc_typeck/src/collect.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cfd471ffe997c56848d27e688dd8bd30f18412a/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cfd471ffe997c56848d27e688dd8bd30f18412a/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcollect.rs?ref=6cfd471ffe997c56848d27e688dd8bd30f18412a", "patch": "@@ -2843,7 +2843,7 @@ fn codegen_fn_attrs(tcx: TyCtxt<'_>, did: DefId) -> CodegenFnAttrs {\n                     let is_like_elf = !(tcx.sess.target.is_like_osx\n                         || tcx.sess.target.is_like_windows\n                         || tcx.sess.target.is_like_wasm);\n-                    codegen_fn_attrs.flags = if is_like_elf {\n+                    codegen_fn_attrs.flags |= if is_like_elf {\n                         CodegenFnAttrFlags::USED\n                     } else {\n                         CodegenFnAttrFlags::USED_LINKER"}]}