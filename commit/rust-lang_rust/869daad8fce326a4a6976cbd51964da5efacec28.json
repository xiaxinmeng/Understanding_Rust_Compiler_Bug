{"sha": "869daad8fce326a4a6976cbd51964da5efacec28", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2OWRhYWQ4ZmNlMzI2YTRhNjk3NmNiZDUxOTY0ZGE1ZWZhY2VjMjg=", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-07-26T04:29:18Z"}, "committer": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-08-13T09:28:51Z"}, "message": "Fix tests", "tree": {"sha": "1e7e2f905b34ae6bd8a09cbbd66470990567c0c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e7e2f905b34ae6bd8a09cbbd66470990567c0c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/869daad8fce326a4a6976cbd51964da5efacec28", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEQ7Fl7qPq2YcWF1dqAn35M4hird0FAmEWO1MACgkQAn35M4hi\nrd0BghAAqEktyl78PsLxUQUdDZOqZTKUwEiM6D+xelcRc2XR0j+PSBA6uLgO31Kh\nG1mKblI8v5ZWFzQlrPEqMjJHhbn91jL38gzPSIeXMCxDwOSGeCspFyfAQzYqyTVu\n2P6Jj/4ZTcWFM0dENhNbGvtWRU284lca3NcqVT4u/yDM8IQEEWGHdZ6nowRCSfRv\nkrz56/osRoY7J3hTMuFSTRJDPoY+q2i0prx3I+NGx6DWClPmJ3YZeT9CKpKbWmu7\nJHm3n/J8wW2aK4K+fDN//mDSj9SzdyuyT0Rpm/y6JzZ5tFVwg1RSzW9IJ3wudo+i\nlYsxKmOMXKiLpSN+neVKAnnWAHZVnXm9k9XUpD6XqYndfls3XdVPrpNP1hAPG1gB\nsAOi8+tVF3oPXzjVlD3vnll8+0cBd1tKQGE5iDyRyNekMca0Krv4kPL9y1bM86me\np56Rpg1RNdLXwn8VVs67YoTKCQiZVZq2FjSNQB1qmfCtNRWbly0rkdiI5NeWLIfR\nhDbPHxaqDZ4ilTHyS+Feh5vplqUwzWKrGdGeZ72VT58KZgxQZjmAGPkD+n2rZv35\nrDsqQl8xRq/TdOZ6O6GOKpEJyEJ464f+drPQOBIoHXqNjGHMkPS6ieFpov+Z2M5P\n5YfXy2rU39CggibkHaJNzF9edxE4F5WLS8kFLU4nZOUBFXrupBc=\n=eiWi\n-----END PGP SIGNATURE-----", "payload": "tree 1e7e2f905b34ae6bd8a09cbbd66470990567c0c1\nparent 6b6ad781f8cae57aef80d35b1c5b7f36f239ed62\nauthor Deadbeef <ent3rm4n@gmail.com> 1627273758 +0800\ncommitter Deadbeef <ent3rm4n@gmail.com> 1628846931 +0000\n\nFix tests\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/869daad8fce326a4a6976cbd51964da5efacec28", "html_url": "https://github.com/rust-lang/rust/commit/869daad8fce326a4a6976cbd51964da5efacec28", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/869daad8fce326a4a6976cbd51964da5efacec28/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6b6ad781f8cae57aef80d35b1c5b7f36f239ed62", "url": "https://api.github.com/repos/rust-lang/rust/commits/6b6ad781f8cae57aef80d35b1c5b7f36f239ed62", "html_url": "https://github.com/rust-lang/rust/commit/6b6ad781f8cae57aef80d35b1c5b7f36f239ed62"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "4c7ee5382d0136b5a49ece06d093aede0eab6ca9", "filename": "compiler/rustc_trait_selection/src/traits/select/mod.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/869daad8fce326a4a6976cbd51964da5efacec28/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/869daad8fce326a4a6976cbd51964da5efacec28/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fmod.rs?ref=869daad8fce326a4a6976cbd51964da5efacec28", "patch": "@@ -1063,8 +1063,9 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n                         }) => {}\n                         // auto trait impl\n                         AutoImplCandidate(..) => {}\n-                        // FIXME check if this is right, but this would allow Sized impls\n-                        // BuiltinCandidate { .. } => {}\n+                        // generator, this will raise error in other places\n+                        // or ignore error with const_async_blocks feature\n+                        GeneratorCandidate => {}\n                         _ => {\n                             // reject all other types of candidates\n                             return Err(Unimplemented);"}, {"sha": "bb8113e53f9c19f917d1e5fd4cd694860d02a899", "filename": "src/test/ui/consts/const-eval/issue-49296.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/869daad8fce326a4a6976cbd51964da5efacec28/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.rs", "raw_url": "https://github.com/rust-lang/rust/raw/869daad8fce326a4a6976cbd51964da5efacec28/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.rs?ref=869daad8fce326a4a6976cbd51964da5efacec28", "patch": "@@ -1,8 +1,10 @@\n // issue-49296: Unsafe shenigans in constants can result in missing errors\n \n #![feature(const_fn_trait_bound)]\n+#![feature(const_trait_bound_opt_out)]\n+#![allow(incomplete_features)]\n \n-const unsafe fn transmute<T: Copy, U: Copy>(t: T) -> U {\n+const unsafe fn transmute<T: ?const Copy, U: ?const Copy>(t: T) -> U {\n     #[repr(C)]\n     union Transmute<T: Copy, U: Copy> {\n         from: T,"}, {"sha": "28fdcb7c486371ddb1cdfaf37b0dd789b54733be", "filename": "src/test/ui/consts/const-eval/issue-49296.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/869daad8fce326a4a6976cbd51964da5efacec28/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/869daad8fce326a4a6976cbd51964da5efacec28/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-49296.stderr?ref=869daad8fce326a4a6976cbd51964da5efacec28", "patch": "@@ -1,5 +1,5 @@\n error[E0080]: evaluation of constant value failed\n-  --> $DIR/issue-49296.rs:18:16\n+  --> $DIR/issue-49296.rs:20:16\n    |\n LL | const X: u64 = *wat(42);\n    |                ^^^^^^^^ pointer to alloc2 was dereferenced after this allocation got freed"}]}