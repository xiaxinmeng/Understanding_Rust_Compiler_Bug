{"sha": "51c7e20d539eaed6e765612a02fbf2865e08a1bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxYzdlMjBkNTM5ZWFlZDZlNzY1NjEyYTAyZmJmMjg2NWUwOGExYmM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-12T22:01:25Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-12T22:01:25Z"}, "message": "auto merge of #16433 : aturon/rust/deprecated-in-crate, r=alexcrichton\n\nPreviously the stability lint considered cross-crate items only. That's appropriate for unstable and experimental levels, but not for deprecation.\r\n\r\nIn addition to changing the lint, this PR takes care of the fallout: a number of deprecated items that were being used throughout libstd.\r\n\r\nCloses #16409\r\n\r\nDue to deny(deprecated), this is a:\r\n\r\n[breaking-change]", "tree": {"sha": "5b1dcf1dee9cdc745b0d01c0d26295f05a97d04d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b1dcf1dee9cdc745b0d01c0d26295f05a97d04d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51c7e20d539eaed6e765612a02fbf2865e08a1bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51c7e20d539eaed6e765612a02fbf2865e08a1bc", "html_url": "https://github.com/rust-lang/rust/commit/51c7e20d539eaed6e765612a02fbf2865e08a1bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51c7e20d539eaed6e765612a02fbf2865e08a1bc/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4bb4a43917bf702fb2c6a614786aa1abe6c1014c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4bb4a43917bf702fb2c6a614786aa1abe6c1014c", "html_url": "https://github.com/rust-lang/rust/commit/4bb4a43917bf702fb2c6a614786aa1abe6c1014c"}, {"sha": "d7484b86fc8936d670c168c9838e188e1bc8047a", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7484b86fc8936d670c168c9838e188e1bc8047a", "html_url": "https://github.com/rust-lang/rust/commit/d7484b86fc8936d670c168c9838e188e1bc8047a"}], "stats": {"total": 146, "additions": 78, "deletions": 68}, "files": [{"sha": "7745a0d887ee8ad7281087ea5b14b8dc6fe5e437", "filename": "src/libcollections/bitv.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fbitv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fbitv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbitv.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -264,7 +264,7 @@ impl Bitv {\n         assert!(i < self.nbits);\n         let w = i / uint::BITS;\n         let b = i % uint::BITS;\n-        let x = self.storage.get(w) & (1 << b);\n+        let x = self.storage[w] & (1 << b);\n         x != 0\n     }\n \n@@ -289,8 +289,8 @@ impl Bitv {\n         let w = i / uint::BITS;\n         let b = i % uint::BITS;\n         let flag = 1 << b;\n-        *self.storage.get_mut(w) = if x { *self.storage.get(w) | flag }\n-                          else { *self.storage.get(w) & !flag };\n+        *self.storage.get_mut(w) = if x { self.storage[w] | flag }\n+                          else { self.storage[w] & !flag };\n     }\n \n     /// Set all bits to 1.\n@@ -827,7 +827,7 @@ impl Clone for Bitv {\n     fn clone_from(&mut self, source: &Bitv) {\n         self.nbits = source.nbits;\n         self.storage.reserve(source.storage.len());\n-        for (i, w) in self.storage.mut_iter().enumerate() { *w = *source.storage.get(i); }\n+        for (i, w) in self.storage.mut_iter().enumerate() { *w = source.storage[i]; }\n     }\n }\n \n@@ -1146,7 +1146,7 @@ impl BitvSet {\n         self_bitv.reserve(other_bitv.capacity());\n         // Apply values\n         for (i, w) in other_bitv.mask_words(0) {\n-            let old = *self_bitv.storage.get(i);\n+            let old = self_bitv.storage[i];\n             let new = f(old, w);\n             *self_bitv.storage.get_mut(i) = new;\n         }\n@@ -1573,10 +1573,10 @@ impl<'a> Iterator<uint> for TwoBitPositions<'a> {\n                 // one Bitv might be longer than the other\n                 let word_idx = self.next_idx / uint::BITS;\n                 let w1 = if word_idx < s_bitv.storage.len() {\n-                             *s_bitv.storage.get(word_idx)\n+                             s_bitv.storage[word_idx]\n                          } else { 0 };\n                 let w2 = if word_idx < o_bitv.storage.len() {\n-                             *o_bitv.storage.get(word_idx)\n+                             o_bitv.storage[word_idx]\n                          } else { 0 };\n                 self.current_word = (self.merge)(w1, w2);\n             }"}, {"sha": "4c5f8ef09879e06ee898940db4de26278c771ec4", "filename": "src/libcollections/btree.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fbtree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fbtree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -299,14 +299,14 @@ impl<K: Ord, V> Leaf<K, V> {\n             midpoint = 0;\n         }\n         loop {\n-            let order = self.elts.get(midpoint).key.cmp(&k);\n+            let order = self.elts[midpoint].key.cmp(&k);\n             match order {\n                 Equal => {\n                     return None;\n                 }\n                 Greater => {\n                     if midpoint > 0 {\n-                        if self.elts.get(midpoint - 1).key.cmp(&k) == Less {\n+                        if self.elts[midpoint - 1].key.cmp(&k) == Less {\n                             return Some(midpoint);\n                         }\n                         else {\n@@ -322,7 +322,7 @@ impl<K: Ord, V> Leaf<K, V> {\n                 }\n                 Less => {\n                     if midpoint + 1 < self.elts.len() {\n-                        if self.elts.get(midpoint + 1).key.cmp(&k) == Greater {\n+                        if self.elts[midpoint + 1].key.cmp(&k) == Greater {\n                             return Some(midpoint);\n                         }\n                         else {\n@@ -422,7 +422,7 @@ impl<K: Ord, V: Eq> Ord for Leaf<K, V> {\n         if self.elts.len() < other.elts.len() {\n             return Less;\n         }\n-        self.elts.get(0).cmp(other.elts.get(0))\n+        self.elts[0].cmp(&other.elts[0])\n     }\n }\n \n@@ -457,14 +457,14 @@ impl<K: Ord, V> Branch<K, V> {\n             midpoint = 0u;\n         }\n         loop {\n-            let order = self.elts.get(midpoint).key.cmp(&k);\n+            let order = self.elts[midpoint].key.cmp(&k);\n             match order {\n                 Equal => {\n                     return None;\n                 }\n                 Greater => {\n                     if midpoint > 0 {\n-                        if self.elts.get(midpoint - 1).key.cmp(&k) == Less {\n+                        if self.elts[midpoint - 1].key.cmp(&k) == Less {\n                             return Some(midpoint);\n                         }\n                         else {\n@@ -480,7 +480,7 @@ impl<K: Ord, V> Branch<K, V> {\n                 }\n                 Less => {\n                     if midpoint + 1 < self.elts.len() {\n-                        if self.elts.get(midpoint + 1).key.cmp(&k) == Greater {\n+                        if self.elts[midpoint + 1].key.cmp(&k) == Greater {\n                             return Some(midpoint);\n                         }\n                         else {\n@@ -529,15 +529,15 @@ impl<K: Clone + Ord, V: Clone> Branch<K, V> {\n             Some(i) => {\n                 if i == self.elts.len() {\n                     let new_outcome = self.clone().rightmost_child.insert(k.clone(),\n-                                                                       v.clone(),\n-                                                                       ub.clone());\n+                                                                          v.clone(),\n+                                                                          ub.clone());\n                     new_branch = new_outcome.clone().val0();\n                     outcome = new_outcome.val1();\n                 }\n                 else {\n-                    let new_outcome = self.elts.get(i).left.clone().insert(k.clone(),\n-                                                                                 v.clone(),\n-                                                                                 ub.clone());\n+                    let new_outcome = self.elts[i].left.clone().insert(k.clone(),\n+                                                                       v.clone(),\n+                                                                       ub.clone());\n                     new_branch = new_outcome.clone().val0();\n                     outcome = new_outcome.val1();\n                 }\n@@ -581,7 +581,7 @@ impl<K: Clone + Ord, V: Clone> Branch<K, V> {\n                 //If we have a new branch node, attempt to insert it into the tree\n                 //as with the key-value pair, then check to see if the node is overfull.\n                 BranchNode(branch) => {\n-                    let new_elt = branch.elts.get(0).clone();\n+                    let new_elt = branch.elts[0].clone();\n                     let new_elt_index = self.bsearch_branch(new_elt.clone().key);\n                     match new_elt_index {\n                         None => {\n@@ -652,7 +652,7 @@ impl<K: Ord, V: Eq> Ord for Branch<K, V> {\n         if self.elts.len() < other.elts.len() {\n             return Less;\n         }\n-        self.elts.get(0).cmp(other.elts.get(0))\n+        self.elts[0].cmp(&other.elts[0])\n     }\n }\n "}, {"sha": "8344ad7c79d7b902edb95e2d40ee376aaa1ecd67", "filename": "src/libcollections/dlist.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fdlist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fdlist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fdlist.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -654,7 +654,7 @@ impl<A> Iterator<A> for MoveItems<A> {\n \n impl<A> DoubleEndedIterator<A> for MoveItems<A> {\n     #[inline]\n-    fn next_back(&mut self) -> Option<A> { self.list.pop_back() }\n+    fn next_back(&mut self) -> Option<A> { self.list.pop() }\n }\n \n impl<A> FromIterator<A> for DList<A> {\n@@ -667,7 +667,7 @@ impl<A> FromIterator<A> for DList<A> {\n \n impl<A> Extendable<A> for DList<A> {\n     fn extend<T: Iterator<A>>(&mut self, mut iterator: T) {\n-        for elt in iterator { self.push_back(elt); }\n+        for elt in iterator { self.push(elt); }\n     }\n }\n "}, {"sha": "a88a833c9edcab2b3a1a398cd323ec28ec020a96", "filename": "src/libcollections/priority_queue.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fpriority_queue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fpriority_queue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fpriority_queue.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -261,7 +261,7 @@ impl<T: Ord> PriorityQueue<T> {\n     ///\n     /// ```\n     pub fn top<'a>(&'a self) -> Option<&'a T> {\n-        if self.is_empty() { None } else { Some(self.data.get(0)) }\n+        if self.is_empty() { None } else { Some(&self.data[0]) }\n     }\n \n     #[deprecated=\"renamed to `top`\"]\n@@ -473,7 +473,7 @@ impl<T: Ord> PriorityQueue<T> {\n \n             while pos > start {\n                 let parent = (pos - 1) >> 1;\n-                if new > *self.data.get(parent) {\n+                if new > self.data[parent] {\n                     let x = replace(self.data.get_mut(parent), zeroed());\n                     ptr::write(self.data.get_mut(pos), x);\n                     pos = parent;\n@@ -493,7 +493,7 @@ impl<T: Ord> PriorityQueue<T> {\n             let mut child = 2 * pos + 1;\n             while child < end {\n                 let right = child + 1;\n-                if right < end && !(*self.data.get(child) > *self.data.get(right)) {\n+                if right < end && !(self.data[child] > self.data[right]) {\n                     child = right;\n                 }\n                 let x = replace(self.data.get_mut(child), zeroed());"}, {"sha": "ce08f169366dad8fb0937ad13ae460a12210cf3e", "filename": "src/libcollections/ringbuf.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fringbuf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fringbuf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fringbuf.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -53,7 +53,7 @@ impl<T> Mutable for RingBuf<T> {\n impl<T> Deque<T> for RingBuf<T> {\n     /// Return a reference to the first element in the RingBuf\n     fn front<'a>(&'a self) -> Option<&'a T> {\n-        if self.nelts > 0 { Some(self.get(0)) } else { None }\n+        if self.nelts > 0 { Some(&self[0]) } else { None }\n     }\n \n     /// Return a mutable reference to the first element in the RingBuf\n@@ -63,7 +63,7 @@ impl<T> Deque<T> for RingBuf<T> {\n \n     /// Return a reference to the last element in the RingBuf\n     fn back<'a>(&'a self) -> Option<&'a T> {\n-        if self.nelts > 0 { Some(self.get(self.nelts - 1)) } else { None }\n+        if self.nelts > 0 { Some(&self[self.nelts - 1]) } else { None }\n     }\n \n     /// Return a mutable reference to the last element in the RingBuf\n@@ -152,7 +152,7 @@ impl<T> RingBuf<T> {\n     #[deprecated = \"prefer using indexing, e.g., ringbuf[0]\"]\n     pub fn get<'a>(&'a self, i: uint) -> &'a T {\n         let idx = self.raw_index(i);\n-        match *self.elts.get(idx) {\n+        match self.elts[idx] {\n             None => fail!(),\n             Some(ref v) => v\n         }\n@@ -481,6 +481,7 @@ impl<S: Writer, A: Hash<S>> Hash<S> for RingBuf<A> {\n \n impl<A> Index<uint, A> for RingBuf<A> {\n     #[inline]\n+    #[allow(deprecated)]\n     fn index<'a>(&'a self, i: &uint) -> &'a A {\n         self.get(*i)\n     }\n@@ -506,7 +507,7 @@ impl<A> FromIterator<A> for RingBuf<A> {\n impl<A> Extendable<A> for RingBuf<A> {\n     fn extend<T: Iterator<A>>(&mut self, mut iterator: T) {\n         for elt in iterator {\n-            self.push_back(elt);\n+            self.push(elt);\n         }\n     }\n }"}, {"sha": "4c7c7e3ea74bb1fa8bbd7171ac840798b1f6c1e5", "filename": "src/libcollections/slice.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fslice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fslice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fslice.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -190,7 +190,7 @@ impl Iterator<(uint, uint)> for ElementSwaps {\n         let max = self.sdir.iter().map(|&x| x).enumerate()\n                            .filter(|&(i, sd)|\n                                 new_pos(i, sd.dir) < self.sdir.len() &&\n-                                self.sdir.get(new_pos(i, sd.dir)).size < sd.size)\n+                                self.sdir[new_pos(i, sd.dir)].size < sd.size)\n                            .max_by(|&(_, sd)| sd.size);\n         match max {\n             Some((i, sd)) => {"}, {"sha": "4529c8782a19493c6f30e032ef81294ff7b733b1", "filename": "src/libcollections/smallintmap.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fsmallintmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fsmallintmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fsmallintmap.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -86,7 +86,7 @@ impl<V> Map<uint, V> for SmallIntMap<V> {\n     /// Return a reference to the value corresponding to the key.\n     fn find<'a>(&'a self, key: &uint) -> Option<&'a V> {\n         if *key < self.v.len() {\n-            match *self.v.get(*key) {\n+            match self.v[*key] {\n               Some(ref value) => Some(value),\n               None => None\n             }\n@@ -421,6 +421,7 @@ impl<V> Extendable<(uint, V)> for SmallIntMap<V> {\n \n impl<V> Index<uint, V> for SmallIntMap<V> {\n     #[inline]\n+    #[allow(deprecated)]\n     fn index<'a>(&'a self, i: &uint) -> &'a V {\n         self.get(i)\n     }"}, {"sha": "d911ca6bb14f9824d080449f2729131e6053e8eb", "filename": "src/libcollections/str.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstr.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -251,11 +251,11 @@ impl<'a> Iterator<char> for Decompositions<'a> {\n         match self.buffer.as_slice().head() {\n             Some(&(c, 0)) => {\n                 self.sorted = false;\n-                self.buffer.shift();\n+                self.buffer.remove(0);\n                 return Some(c);\n             }\n             Some(&(c, _)) if self.sorted => {\n-                self.buffer.shift();\n+                self.buffer.remove(0);\n                 return Some(c);\n             }\n             _ => self.sorted = false\n@@ -287,7 +287,7 @@ impl<'a> Iterator<char> for Decompositions<'a> {\n             self.sorted = true;\n         }\n \n-        match self.buffer.shift() {\n+        match self.buffer.remove(0) {\n             Some((c, 0)) => {\n                 self.sorted = false;\n                 Some(c)\n@@ -805,21 +805,21 @@ pub trait StrAllocating: Str {\n \n             for (j, tc) in t.chars().enumerate() {\n \n-                let next = *dcol.get(j + 1);\n+                let next = dcol[j + 1];\n \n                 if sc == tc {\n                     *dcol.get_mut(j + 1) = current;\n                 } else {\n                     *dcol.get_mut(j + 1) = cmp::min(current, next);\n-                    *dcol.get_mut(j + 1) = cmp::min(*dcol.get(j + 1),\n-                                                    *dcol.get(j)) + 1;\n+                    *dcol.get_mut(j + 1) = cmp::min(dcol[j + 1],\n+                                                    dcol[j]) + 1;\n                 }\n \n                 current = next;\n             }\n         }\n \n-        return *dcol.get(tlen);\n+        return dcol[tlen];\n     }\n \n     /// An Iterator over the string in Unicode Normalization Form D"}, {"sha": "952f28da2af891980a6bafc96d723979fdb39b1f", "filename": "src/libcollections/string.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstring.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -669,7 +669,7 @@ impl String {\n     /// }\n     /// ```\n     pub unsafe fn shift_byte(&mut self) -> Option<u8> {\n-        self.vec.shift()\n+        self.vec.remove(0)\n     }\n \n     /// Removes the first character from the string buffer and returns it."}, {"sha": "6bda0eed66dd937c66e3b3ff2d221eed6b2d804f", "filename": "src/libcollections/vec.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibcollections%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -453,6 +453,7 @@ impl<T:Clone> Clone for Vec<T> {\n \n impl<T> Index<uint,T> for Vec<T> {\n     #[inline]\n+    #[allow(deprecated)] // allow use of get\n     fn index<'a>(&'a self, index: &uint) -> &'a T {\n         self.get(*index)\n     }"}, {"sha": "e4d61c47cc20c3a53e3366a73a003ff9f4e33ebb", "filename": "src/libfourcc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibfourcc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibfourcc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibfourcc%2Flib.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -42,6 +42,7 @@ fn main() {\n #![crate_name = \"fourcc\"]\n #![deprecated = \"This is now a cargo package located at: \\\n                  https://github.com/rust-lang/fourcc\"]\n+#![allow(deprecated)]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![license = \"MIT/ASL2\"]"}, {"sha": "936e7cb4403d49b31f379998c03ba99ad62392bb", "filename": "src/libhexfloat/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibhexfloat%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibhexfloat%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibhexfloat%2Flib.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -39,6 +39,7 @@ fn main() {\n #![crate_name = \"hexfloat\"]\n #![deprecated = \"This is now a cargo package located at: \\\n                  https://github.com/rust-lang/hexfloat\"]\n+#![allow(deprecated)]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![license = \"MIT/ASL2\"]"}, {"sha": "f929860c6864bedd969ec832027a7eba64dca114", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -1479,20 +1479,20 @@ impl LintPass for Stability {\n             _ => return\n         };\n \n-        // stability attributes are promises made across crates; do not\n-        // check anything for crate-local usage.\n-        if ast_util::is_local(id) { return }\n-\n         let stability = stability::lookup(cx.tcx, id);\n+        let cross_crate = !ast_util::is_local(id);\n+\n+        // stability attributes are promises made across crates; only\n+        // check DEPRECATED for crate-local usage.\n         let (lint, label) = match stability {\n             // no stability attributes == Unstable\n-            None => (UNSTABLE, \"unmarked\"),\n-            Some(attr::Stability { level: attr::Unstable, .. }) =>\n-                    (UNSTABLE, \"unstable\"),\n-            Some(attr::Stability { level: attr::Experimental, .. }) =>\n-                    (EXPERIMENTAL, \"experimental\"),\n+            None if cross_crate => (UNSTABLE, \"unmarked\"),\n+            Some(attr::Stability { level: attr::Unstable, .. }) if cross_crate =>\n+                (UNSTABLE, \"unstable\"),\n+            Some(attr::Stability { level: attr::Experimental, .. }) if cross_crate =>\n+                (EXPERIMENTAL, \"experimental\"),\n             Some(attr::Stability { level: attr::Deprecated, .. }) =>\n-                    (DEPRECATED, \"deprecated\"),\n+                (DEPRECATED, \"deprecated\"),\n             _ => return\n         };\n "}, {"sha": "56c0f24509b8ed297800ebdd4fa9d36cd772526e", "filename": "src/libsemver/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsemver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsemver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsemver%2Flib.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -31,6 +31,7 @@\n #![crate_name = \"semver\"]\n #![deprecated = \"This is now a cargo package located at: \\\n                  https://github.com/rust-lang/semver\"]\n+#![allow(deprecated)]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![license = \"MIT/ASL2\"]"}, {"sha": "301d444b1b15b83279e3cec9f0671e80be5f0967", "filename": "src/libsync/atomic.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsync%2Fatomic.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -101,6 +101,8 @@\n //! }\n //! ```\n \n+#![allow(deprecated)]\n+\n use core::prelude::*;\n \n use alloc::boxed::Box;"}, {"sha": "587827d2bc576c56e729dc2fc9dab59753ac9e09", "filename": "src/libsync/comm/duplex.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsync%2Fcomm%2Fduplex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibsync%2Fcomm%2Fduplex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsync%2Fcomm%2Fduplex.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -15,6 +15,7 @@ Higher level communication abstractions.\n */\n \n #![allow(missing_doc)]\n+#![allow(deprecated)]\n #![deprecated = \"This type is replaced by having a pair of channels. This type \\\n                  is not fully composable with other channels in terms of \\\n                  or possible semantics on a duplex stream. It will be removed \\"}, {"sha": "8c35424d394f4c357fb15d0d1726b72d4fb2daf8", "filename": "src/liburl/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Fliburl%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Fliburl%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliburl%2Flib.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -12,6 +12,7 @@\n \n #![crate_name = \"url\"]\n #![deprecated=\"This is being removed. Use rust-url instead. http://servo.github.io/rust-url/\"]\n+#![allow(deprecated)]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![license = \"MIT/ASL2\"]"}, {"sha": "78c8fbad959ee458f96370a840c28a8a78b2f193", "filename": "src/libuuid/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibuuid%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Flibuuid%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibuuid%2Flib.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -59,6 +59,7 @@ Examples of string representations:\n #![crate_name = \"uuid\"]\n #![deprecated = \"This is now a cargo package located at: \\\n                  https://github.com/rust-lang/uuid\"]\n+#![allow(deprecated)]\n #![crate_type = \"rlib\"]\n #![crate_type = \"dylib\"]\n #![license = \"MIT/ASL2\"]"}, {"sha": "f5cee22ac2c050c74f1939c26fa2f0d609eef186", "filename": "src/test/compile-fail/lint-stability.rs", "status": "modified", "additions": 17, "deletions": 18, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Ftest%2Fcompile-fail%2Flint-stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c7e20d539eaed6e765612a02fbf2865e08a1bc/src%2Ftest%2Fcompile-fail%2Flint-stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-stability.rs?ref=51c7e20d539eaed6e765612a02fbf2865e08a1bc", "patch": "@@ -329,19 +329,19 @@ mod this_crate {\n     pub struct LockedTupleStruct(int);\n \n     fn test() {\n-        // None of the following should generate errors, because\n-        // stability attributes now have meaning only *across* crates,\n-        // not within a single crate.\n+        // Only the deprecated cases of the following should generate\n+        // errors, because other stability attributes now have meaning\n+        // only *across* crates, not within a single crate.\n \n         let foo = MethodTester;\n \n-        deprecated();\n-        foo.method_deprecated();\n-        foo.trait_deprecated();\n+        deprecated(); //~ ERROR use of deprecated item\n+        foo.method_deprecated(); //~ ERROR use of deprecated item\n+        foo.trait_deprecated(); //~ ERROR use of deprecated item\n \n-        deprecated_text();\n-        foo.method_deprecated_text();\n-        foo.trait_deprecated_text();\n+        deprecated_text(); //~ ERROR use of deprecated item: text\n+        foo.method_deprecated_text(); //~ ERROR use of deprecated item: text\n+        foo.trait_deprecated_text(); //~ ERROR use of deprecated item: text\n \n         experimental();\n         foo.method_experimental();\n@@ -387,32 +387,31 @@ mod this_crate {\n         foo.method_locked_text();\n         foo.trait_locked_text();\n \n-\n-        let _ = DeprecatedStruct { i: 0 };\n+        let _ = DeprecatedStruct { i: 0 }; //~ ERROR use of deprecated item\n         let _ = ExperimentalStruct { i: 0 };\n         let _ = UnstableStruct { i: 0 };\n         let _ = UnmarkedStruct { i: 0 };\n         let _ = StableStruct { i: 0 };\n         let _ = FrozenStruct { i: 0 };\n         let _ = LockedStruct { i: 0 };\n \n-        let _ = DeprecatedUnitStruct;\n+        let _ = DeprecatedUnitStruct; //~ ERROR use of deprecated item\n         let _ = ExperimentalUnitStruct;\n         let _ = UnstableUnitStruct;\n         let _ = UnmarkedUnitStruct;\n         let _ = StableUnitStruct;\n         let _ = FrozenUnitStruct;\n         let _ = LockedUnitStruct;\n \n-        let _ = DeprecatedVariant;\n+        let _ = DeprecatedVariant; //~ ERROR use of deprecated item\n         let _ = ExperimentalVariant;\n         let _ = UnstableVariant;\n         let _ = UnmarkedVariant;\n         let _ = StableVariant;\n         let _ = FrozenVariant;\n         let _ = LockedVariant;\n \n-        let _ = DeprecatedTupleStruct (1);\n+        let _ = DeprecatedTupleStruct (1); //~ ERROR use of deprecated item\n         let _ = ExperimentalTupleStruct (1);\n         let _ = UnstableTupleStruct (1);\n         let _ = UnmarkedTupleStruct (1);\n@@ -422,8 +421,8 @@ mod this_crate {\n     }\n \n     fn test_method_param<F: Trait>(foo: F) {\n-        foo.trait_deprecated();\n-        foo.trait_deprecated_text();\n+        foo.trait_deprecated(); //~ ERROR use of deprecated item\n+        foo.trait_deprecated_text(); //~ ERROR use of deprecated item: text\n         foo.trait_experimental();\n         foo.trait_experimental_text();\n         foo.trait_unstable();\n@@ -433,8 +432,8 @@ mod this_crate {\n     }\n \n     fn test_method_object(foo: &Trait) {\n-        foo.trait_deprecated();\n-        foo.trait_deprecated_text();\n+        foo.trait_deprecated(); //~ ERROR use of deprecated item\n+        foo.trait_deprecated_text(); //~ ERROR use of deprecated item: text\n         foo.trait_experimental();\n         foo.trait_experimental_text();\n         foo.trait_unstable();"}]}