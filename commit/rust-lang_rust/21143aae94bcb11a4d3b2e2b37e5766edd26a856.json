{"sha": "21143aae94bcb11a4d3b2e2b37e5766edd26a856", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxMTQzYWFlOTRiY2IxMWE0ZDNiMmUyYjM3ZTU3NjZlZGQyNmE4NTY=", "commit": {"author": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2015-04-17T04:38:24Z"}, "committer": {"name": "Erick Tryzelaar", "email": "erick.tryzelaar@gmail.com", "date": "2015-04-21T17:08:57Z"}, "message": "syntax: Replace Vec::map_in_place with stable mut iterator", "tree": {"sha": "258acffcc9fb24c91ef42715d59c6211eb39d868", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/258acffcc9fb24c91ef42715d59c6211eb39d868"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/21143aae94bcb11a4d3b2e2b37e5766edd26a856", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/21143aae94bcb11a4d3b2e2b37e5766edd26a856", "html_url": "https://github.com/rust-lang/rust/commit/21143aae94bcb11a4d3b2e2b37e5766edd26a856", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/21143aae94bcb11a4d3b2e2b37e5766edd26a856/comments", "author": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erickt", "id": 84711, "node_id": "MDQ6VXNlcjg0NzEx", "avatar_url": "https://avatars.githubusercontent.com/u/84711?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erickt", "html_url": "https://github.com/erickt", "followers_url": "https://api.github.com/users/erickt/followers", "following_url": "https://api.github.com/users/erickt/following{/other_user}", "gists_url": "https://api.github.com/users/erickt/gists{/gist_id}", "starred_url": "https://api.github.com/users/erickt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erickt/subscriptions", "organizations_url": "https://api.github.com/users/erickt/orgs", "repos_url": "https://api.github.com/users/erickt/repos", "events_url": "https://api.github.com/users/erickt/events{/privacy}", "received_events_url": "https://api.github.com/users/erickt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a2cfe385050503528f13324317e52d944ce75efa", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2cfe385050503528f13324317e52d944ce75efa", "html_url": "https://github.com/rust-lang/rust/commit/a2cfe385050503528f13324317e52d944ce75efa"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "6acc56fb41aa22a3a2c5a23e7f6b9c47a3a2b71a", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 11, "deletions": 9, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/21143aae94bcb11a4d3b2e2b37e5766edd26a856/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21143aae94bcb11a4d3b2e2b37e5766edd26a856/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=21143aae94bcb11a4d3b2e2b37e5766edd26a856", "patch": "@@ -594,8 +594,8 @@ impl CodeMap {\n     pub fn new_imported_filemap(&self,\n                                 filename: FileName,\n                                 source_len: usize,\n-                                file_local_lines: Vec<BytePos>,\n-                                file_local_multibyte_chars: Vec<MultiByteChar>)\n+                                mut file_local_lines: Vec<BytePos>,\n+                                mut file_local_multibyte_chars: Vec<MultiByteChar>)\n                                 -> Rc<FileMap> {\n         let mut files = self.files.borrow_mut();\n         let start_pos = match files.last() {\n@@ -606,19 +606,21 @@ impl CodeMap {\n         let end_pos = Pos::from_usize(start_pos + source_len);\n         let start_pos = Pos::from_usize(start_pos);\n \n-        let lines = file_local_lines.map_in_place(|pos| pos + start_pos);\n-        let multibyte_chars = file_local_multibyte_chars.map_in_place(|mbc| MultiByteChar {\n-            pos: mbc.pos + start_pos,\n-            bytes: mbc.bytes\n-        });\n+        for pos in &mut file_local_lines {\n+            *pos = *pos + start_pos;\n+        }\n+\n+        for mbc in &mut file_local_multibyte_chars {\n+            mbc.pos = mbc.pos + start_pos;\n+        }\n \n         let filemap = Rc::new(FileMap {\n             name: filename,\n             src: None,\n             start_pos: start_pos,\n             end_pos: end_pos,\n-            lines: RefCell::new(lines),\n-            multibyte_chars: RefCell::new(multibyte_chars),\n+            lines: RefCell::new(file_local_lines),\n+            multibyte_chars: RefCell::new(file_local_multibyte_chars),\n         });\n \n         files.push(filemap.clone());"}]}