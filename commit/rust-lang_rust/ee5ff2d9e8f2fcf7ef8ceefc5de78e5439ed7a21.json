{"sha": "ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlNWZmMmQ5ZThmMmZjZjdlZjhjZWVmYzVkZTc4ZTU0MzllZDdhMjE=", "commit": {"author": {"name": "Josh Chase", "email": "josh@jec.pw", "date": "2018-06-19T15:28:58Z"}, "committer": {"name": "Josh Chase", "email": "josh@jec.pw", "date": "2018-06-19T16:13:35Z"}, "message": "Add flag to the ListFormatting struct for nested imports", "tree": {"sha": "4e6cdcbe95ceda0bc3839d69912317fd41288819", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e6cdcbe95ceda0bc3839d69912317fd41288819"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "html_url": "https://github.com/rust-lang/rust/commit/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/comments", "author": {"login": "jrobsonchase", "id": 1553581, "node_id": "MDQ6VXNlcjE1NTM1ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1553581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrobsonchase", "html_url": "https://github.com/jrobsonchase", "followers_url": "https://api.github.com/users/jrobsonchase/followers", "following_url": "https://api.github.com/users/jrobsonchase/following{/other_user}", "gists_url": "https://api.github.com/users/jrobsonchase/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrobsonchase/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrobsonchase/subscriptions", "organizations_url": "https://api.github.com/users/jrobsonchase/orgs", "repos_url": "https://api.github.com/users/jrobsonchase/repos", "events_url": "https://api.github.com/users/jrobsonchase/events{/privacy}", "received_events_url": "https://api.github.com/users/jrobsonchase/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jrobsonchase", "id": 1553581, "node_id": "MDQ6VXNlcjE1NTM1ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/1553581?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jrobsonchase", "html_url": "https://github.com/jrobsonchase", "followers_url": "https://api.github.com/users/jrobsonchase/followers", "following_url": "https://api.github.com/users/jrobsonchase/following{/other_user}", "gists_url": "https://api.github.com/users/jrobsonchase/gists{/gist_id}", "starred_url": "https://api.github.com/users/jrobsonchase/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jrobsonchase/subscriptions", "organizations_url": "https://api.github.com/users/jrobsonchase/orgs", "repos_url": "https://api.github.com/users/jrobsonchase/repos", "events_url": "https://api.github.com/users/jrobsonchase/events{/privacy}", "received_events_url": "https://api.github.com/users/jrobsonchase/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2077855e000210be5c89f4d7e17e495122686b28", "url": "https://api.github.com/repos/rust-lang/rust/commits/2077855e000210be5c89f4d7e17e495122686b28", "html_url": "https://github.com/rust-lang/rust/commit/2077855e000210be5c89f4d7e17e495122686b28"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "efbd4872aae5cbe029f245d875a2e9eb587c284a", "filename": "src/attr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fattr.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -247,6 +247,7 @@ impl Rewrite for ast::MetaItem {\n                     shape: item_shape,\n                     ends_with_newline: false,\n                     preserve_newline: false,\n+                    nested: false,\n                     config: context.config,\n                 };\n                 let item_str = write_list(&item_vec, &fmt)?;"}, {"sha": "257b8729f453d5e0a46c167ccb6dd9c0d201ed5c", "filename": "src/closures.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fclosures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fclosures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fclosures.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -260,6 +260,7 @@ fn rewrite_closure_fn_decl(\n         shape: arg_shape,\n         ends_with_newline: false,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n     let list_str = write_list(&item_vec, &fmt)?;"}, {"sha": "0c2716a2dba72f2a8d55835592107627b19ab6fc", "filename": "src/expr.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -1338,6 +1338,7 @@ pub fn rewrite_multiple_patterns(\n         shape,\n         ends_with_newline: false,\n         preserve_newline: false,\n+        nested: false,\n         config: context.config,\n     };\n     write_list(&items, &fmt)\n@@ -1902,6 +1903,7 @@ where\n         shape,\n         ends_with_newline: false,\n         preserve_newline: false,\n+        nested: false,\n         config: context.config,\n     };\n     let list_str = write_list(&item_vec, &fmt)?;"}, {"sha": "7e45bb55f0d51d03de4b9af5b99f9147f93bd248", "filename": "src/imports.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -727,6 +727,7 @@ fn rewrite_nested_use_tree(\n         shape: nested_shape,\n         ends_with_newline,\n         preserve_newline: true,\n+        nested: has_nested_list,\n         config: context.config,\n     };\n "}, {"sha": "843d5839de93d32b28b6688bed20f10d29fdee8a", "filename": "src/items.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -533,6 +533,7 @@ impl<'a> FmtVisitor<'a> {\n             shape,\n             ends_with_newline: true,\n             preserve_newline: true,\n+            nested: false,\n             config: self.config,\n         };\n \n@@ -2307,6 +2308,7 @@ fn rewrite_args(\n         shape: Shape::legacy(budget, indent),\n         ends_with_newline: tactic.ends_with_newline(context.config.indent_style()),\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n \n@@ -2494,6 +2496,7 @@ fn rewrite_where_clause_rfc_style(\n         shape: clause_shape,\n         ends_with_newline: true,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n     let preds_str = write_list(&items.collect::<Vec<_>>(), &fmt)?;\n@@ -2607,6 +2610,7 @@ fn rewrite_where_clause(\n         shape: Shape::legacy(budget, offset),\n         ends_with_newline: tactic.ends_with_newline(context.config.indent_style()),\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n     let preds_str = write_list(&item_vec, &fmt)?;"}, {"sha": "97dd093b4f9db75dcd996a00905ffbe435bec4c5", "filename": "src/lists.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -34,6 +34,8 @@ pub struct ListFormatting<'a> {\n     pub ends_with_newline: bool,\n     // Remove newlines between list elements for expressions.\n     pub preserve_newline: bool,\n+    // Nested import lists get some special handling for the \"Mixed\" list type\n+    pub nested: bool,\n     pub config: &'a Config,\n }\n \n@@ -288,7 +290,8 @@ where\n                 // 1 is space between separator and item.\n                 if (line_len > 0 && line_len + 1 + total_width > formatting.shape.width)\n                     || prev_item_had_post_comment\n-                    || (prev_item_is_nested_import || (!first && inner_item.contains(\"::\")))\n+                    || (formatting.nested\n+                        && (prev_item_is_nested_import || (!first && inner_item.contains(\"::\"))))\n                 {\n                     result.push('\\n');\n                     result.push_str(indent_str);\n@@ -824,6 +827,7 @@ pub fn struct_lit_formatting<'a>(\n         shape,\n         ends_with_newline,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     }\n }"}, {"sha": "801e04baad0f809f7979684cc852f3fa4e85a2cb", "filename": "src/macros.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -399,6 +399,7 @@ pub fn rewrite_macro_def(\n         shape: arm_shape,\n         ends_with_newline: true,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n "}, {"sha": "c179efc3963e7a42796a623d77ebf7d8539207cf", "filename": "src/matches.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fmatches.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fmatches.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmatches.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -224,6 +224,7 @@ fn rewrite_match_arms(\n         shape: arm_shape,\n         ends_with_newline: true,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n "}, {"sha": "f91ef38e2ee03f06f3b71b2610911ab2b93dd142", "filename": "src/overflow.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Foverflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Foverflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Foverflow.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -388,6 +388,7 @@ impl<'a, T: 'a + Rewrite + ToExpr + Spanned> Context<'a, T> {\n                 _ => false,\n             },\n             preserve_newline: false,\n+            nested: false,\n             config: self.context.config,\n         };\n "}, {"sha": "ed6df1227efe1a1888ae4165ca2397df5aa50e0d", "filename": "src/reorder.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Freorder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Freorder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Freorder.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -77,6 +77,7 @@ fn wrap_reorderable_items(\n         shape,\n         ends_with_newline: true,\n         preserve_newline: false,\n+        nested: false,\n         config: context.config,\n     };\n "}, {"sha": "44fdbee6efdd37c572d29e5b436acf2c2cd08120", "filename": "src/types.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -366,6 +366,7 @@ where\n         shape: list_shape,\n         ends_with_newline: tactic.ends_with_newline(context.config.indent_style()),\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n "}, {"sha": "a8a8ee6cec3c364deeb410c2ed08ff73642fb285", "filename": "src/vertical.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fvertical.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21/src%2Fvertical.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvertical.rs?ref=ee5ff2d9e8f2fcf7ef8ceefc5de78e5439ed7a21", "patch": "@@ -252,6 +252,7 @@ fn rewrite_aligned_items_inner<T: AlignedItem>(\n         shape: item_shape,\n         ends_with_newline: true,\n         preserve_newline: true,\n+        nested: false,\n         config: context.config,\n     };\n     write_list(&items, &fmt)"}]}