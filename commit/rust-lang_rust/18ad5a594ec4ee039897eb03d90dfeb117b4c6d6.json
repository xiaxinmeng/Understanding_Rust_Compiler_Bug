{"sha": "18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4YWQ1YTU5NGVjNGVlMDM5ODk3ZWIwM2Q5MGRmZWIxMTdiNGM2ZDY=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-08-19T08:19:21Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-08-19T08:19:21Z"}, "message": "Add a regression test for issue-72793", "tree": {"sha": "b8dc44e635bda837c4a027ffe3b330d2708fb094", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8dc44e635bda837c4a027ffe3b330d2708fb094"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXmatGLoofN5+9u4rsJhshcDi2qEFAl884IkACgkQsJhshcDi\n2qFr7xAAid4f7ya+3hTlnf8PCG4TCltr8IWRRmQCbiIrCjCbAEXwO3OD+Ul7U8oh\nqdZvIHBUI9qh39e8yHEK8VAN5wnq9ni+oudQPH9z27Wf4WuubqyDSZpEm7iPakIC\nK0yCyaL41SE9bzRlPUaz4qtw/X/3cuhwu/mmvPX2jIbrFjyeKsB/ljoFMzr/GKPO\nRmQWZoaBBhWIGNFgCrPQbcJOGclyAULe1Cs4a3m7ShB8E/yvRbB9vS2w1XJ/nDOM\nsSjzVV74JEaG0Clss4r52Bmc5w06lW9rxshakCQJxsJfyaK+F1YlPdd+tmiass7t\nIccODGRaSmyA/5O+TN9i6/MZXDThVSsWOsPR56Emh061kXYfKe8991kR/URcfFxi\nvW05jlj62rPGnCeak5At20mtk5yJPwZktctSn155R+sO60QL3ziDFZITrYqWTcaQ\ncWBTJ2V2j7Do9wd+K4VqtSehKOksp9cqoKQ5xzFIs139qkhS5aqnwxkr+UOAY/n8\n7cPmZODGveIzOOhGv7QbENYIbWUZgwvAo5ks67fDJTuuhF7ikorEzdhzheJuGrAV\nRAi7j+pR3jem07Rg7fqo3aFOuaME6+kB42UcJYHj8m3kL9dz8VUjhLCFvGdAyf/C\nCnjKQ7/wzxHwfJISxgTR6V4X7HUZ7FG0SwQYohyDnJZhUQDPIiM=\n=vvwi\n-----END PGP SIGNATURE-----", "payload": "tree b8dc44e635bda837c4a027ffe3b330d2708fb094\nparent c03c213daf5fe3b52c768b4f145e45d8994d87ea\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1597825161 +0900\ncommitter Yuki Okushi <huyuumi.dev@gmail.com> 1597825161 +0900\n\nAdd a regression test for issue-72793\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "html_url": "https://github.com/rust-lang/rust/commit/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c03c213daf5fe3b52c768b4f145e45d8994d87ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/c03c213daf5fe3b52c768b4f145e45d8994d87ea", "html_url": "https://github.com/rust-lang/rust/commit/c03c213daf5fe3b52c768b4f145e45d8994d87ea"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "e643a8cab5b027c19e20b131063706f55945a60a", "filename": "src/test/ui/type-alias-impl-trait/issue-72793.rs", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18ad5a594ec4ee039897eb03d90dfeb117b4c6d6/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-72793.rs?ref=18ad5a594ec4ee039897eb03d90dfeb117b4c6d6", "patch": "@@ -0,0 +1,27 @@\n+// build-pass\n+\n+// Regression test for #72793.\n+// FIXME: This still shows ICE with `-Zmir-opt-level=2`.\n+\n+#![feature(type_alias_impl_trait)]\n+\n+trait T { type Item; }\n+\n+type Alias<'a> = impl T<Item = &'a ()>;\n+\n+struct S;\n+impl<'a> T for &'a S {\n+    type Item = &'a ();\n+}\n+\n+fn filter_positive<'a>() -> Alias<'a> {\n+    &S\n+}\n+\n+fn with_positive(fun: impl Fn(Alias<'_>)) {\n+    fun(filter_positive());\n+}\n+\n+fn main() {\n+    with_positive(|_| ());\n+}"}]}