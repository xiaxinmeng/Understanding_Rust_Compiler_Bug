{"sha": "4e2189fe457e246654f6da6152da1609b392aeea", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlMjE4OWZlNDU3ZTI0NjY1NGY2ZGE2MTUyZGExNjA5YjM5MmFlZWE=", "commit": {"author": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2015-10-26T16:32:04Z"}, "committer": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2015-10-26T16:32:04Z"}, "message": "Remove NodeArg", "tree": {"sha": "4e80ec972d973c217e1aa6b9f0c553cbc7b92b8d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e80ec972d973c217e1aa6b9f0c553cbc7b92b8d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e2189fe457e246654f6da6152da1609b392aeea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e2189fe457e246654f6da6152da1609b392aeea", "html_url": "https://github.com/rust-lang/rust/commit/4e2189fe457e246654f6da6152da1609b392aeea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e2189fe457e246654f6da6152da1609b392aeea/comments", "author": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d7944cee1256e8d45789ad49b1e45d640cad6393", "url": "https://api.github.com/repos/rust-lang/rust/commits/d7944cee1256e8d45789ad49b1e45d640cad6393", "html_url": "https://github.com/rust-lang/rust/commit/d7944cee1256e8d45789ad49b1e45d640cad6393"}], "stats": {"total": 33, "additions": 3, "deletions": 30}, "files": [{"sha": "40382d7c771e78f97fc0883d0bffdce16c302e80", "filename": "src/librustc/front/map/collector.rs", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Ffront%2Fmap%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Ffront%2Fmap%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fmap%2Fcollector.rs?ref=4e2189fe457e246654f6da6152da1609b392aeea", "patch": "@@ -104,12 +104,6 @@ impl<'ast> NodeCollector<'ast> {\n         let entry = MapEntry::from_node(self.parent_node, node);\n         self.insert_entry(id, entry);\n     }\n-\n-    fn visit_fn_decl(&mut self, decl: &'ast FnDecl) {\n-        for a in &decl.inputs {\n-            self.insert(a.id, NodeArg(&*a.pat));\n-        }\n-    }\n }\n \n impl<'ast> Visitor<'ast> for NodeCollector<'ast> {\n@@ -295,20 +289,9 @@ impl<'ast> Visitor<'ast> for NodeCollector<'ast> {\n     fn visit_fn(&mut self, fk: visit::FnKind<'ast>, fd: &'ast FnDecl,\n                 b: &'ast Block, s: Span, id: NodeId) {\n         assert_eq!(self.parent_node, id);\n-        self.visit_fn_decl(fd);\n         visit::walk_fn(self, fk, fd, b, s);\n     }\n \n-    fn visit_ty(&mut self, ty: &'ast Ty) {\n-        match ty.node {\n-            TyBareFn(ref fd) => {\n-                self.visit_fn_decl(&*fd.decl);\n-            }\n-            _ => {}\n-        }\n-        visit::walk_ty(self, ty);\n-    }\n-\n     fn visit_block(&mut self, block: &'ast Block) {\n         self.insert(block.id, NodeBlock(block));\n         let parent_node = self.parent_node;"}, {"sha": "94800db184e988b97a0db42e1355c2978e34eb8b", "filename": "src/librustc/front/map/mod.rs", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Ffront%2Fmap%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Ffront%2Fmap%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Fmap%2Fmod.rs?ref=4e2189fe457e246654f6da6152da1609b392aeea", "patch": "@@ -118,7 +118,6 @@ pub enum Node<'ast> {\n     NodeVariant(&'ast Variant),\n     NodeExpr(&'ast Expr),\n     NodeStmt(&'ast Stmt),\n-    NodeArg(&'ast Pat),\n     NodeLocal(&'ast Pat),\n     NodePat(&'ast Pat),\n     NodeBlock(&'ast Block),\n@@ -145,7 +144,6 @@ pub enum MapEntry<'ast> {\n     EntryVariant(NodeId, &'ast Variant),\n     EntryExpr(NodeId, &'ast Expr),\n     EntryStmt(NodeId, &'ast Stmt),\n-    EntryArg(NodeId, &'ast Pat),\n     EntryLocal(NodeId, &'ast Pat),\n     EntryPat(NodeId, &'ast Pat),\n     EntryBlock(NodeId, &'ast Block),\n@@ -180,7 +178,6 @@ impl<'ast> MapEntry<'ast> {\n             NodeVariant(n) => EntryVariant(p, n),\n             NodeExpr(n) => EntryExpr(p, n),\n             NodeStmt(n) => EntryStmt(p, n),\n-            NodeArg(n) => EntryArg(p, n),\n             NodeLocal(n) => EntryLocal(p, n),\n             NodePat(n) => EntryPat(p, n),\n             NodeBlock(n) => EntryBlock(p, n),\n@@ -199,7 +196,6 @@ impl<'ast> MapEntry<'ast> {\n             EntryVariant(id, _) => id,\n             EntryExpr(id, _) => id,\n             EntryStmt(id, _) => id,\n-            EntryArg(id, _) => id,\n             EntryLocal(id, _) => id,\n             EntryPat(id, _) => id,\n             EntryBlock(id, _) => id,\n@@ -219,7 +215,6 @@ impl<'ast> MapEntry<'ast> {\n             EntryVariant(_, n) => NodeVariant(n),\n             EntryExpr(_, n) => NodeExpr(n),\n             EntryStmt(_, n) => NodeStmt(n),\n-            EntryArg(_, n) => NodeArg(n),\n             EntryLocal(_, n) => NodeLocal(n),\n             EntryPat(_, n) => NodePat(n),\n             EntryBlock(_, n) => NodeBlock(n),\n@@ -649,7 +644,7 @@ impl<'ast> Map<'ast> {\n             Some(NodeVariant(variant)) => variant.span,\n             Some(NodeExpr(expr)) => expr.span,\n             Some(NodeStmt(stmt)) => stmt.span,\n-            Some(NodeArg(pat)) | Some(NodeLocal(pat)) => pat.span,\n+            Some(NodeLocal(pat)) => pat.span,\n             Some(NodePat(pat)) => pat.span,\n             Some(NodeBlock(block)) => block.span,\n             Some(NodeStructCtor(_)) => self.expect_item(self.get_parent(id)).span,\n@@ -907,7 +902,6 @@ impl<'a> NodePrinter for pprust::State<'a> {\n             // ast_map to reconstruct their full structure for pretty\n             // printing.\n             NodeLocal(_)       => panic!(\"cannot print isolated Local\"),\n-            NodeArg(_)         => panic!(\"cannot print isolated Arg\"),\n             NodeStructCtor(_)  => panic!(\"cannot print isolated StructCtor\"),\n         }\n     }\n@@ -986,9 +980,6 @@ fn node_id_to_string(map: &Map, id: NodeId, include_id: bool) -> String {\n         Some(NodeStmt(ref stmt)) => {\n             format!(\"stmt {}{}\", pprust::stmt_to_string(&**stmt), id_str)\n         }\n-        Some(NodeArg(ref pat)) => {\n-            format!(\"arg {}{}\", pprust::pat_to_string(&**pat), id_str)\n-        }\n         Some(NodeLocal(ref pat)) => {\n             format!(\"local {}{}\", pprust::pat_to_string(&**pat), id_str)\n         }"}, {"sha": "1fcd6e92305f5f154ce70ff4372c0341413fec0f", "filename": "src/librustc/middle/mem_categorization.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs?ref=4e2189fe457e246654f6da6152da1609b392aeea", "patch": "@@ -305,7 +305,7 @@ impl MutabilityCategory {\n \n     fn from_local(tcx: &ty::ctxt, id: ast::NodeId) -> MutabilityCategory {\n         let ret = match tcx.map.get(id) {\n-            ast_map::NodeLocal(p) | ast_map::NodeArg(p) => match p.node {\n+            ast_map::NodeLocal(p) => match p.node {\n                 hir::PatIdent(bind_mode, _, _) => {\n                     if bind_mode == hir::BindByValue(hir::MutMutable) {\n                         McDeclared"}, {"sha": "2e7b1f31ba9bc8f73935d3ccbda82da1b99092e2", "filename": "src/librustc_trans/trans/debuginfo/metadata.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc_trans%2Ftrans%2Fdebuginfo%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc_trans%2Ftrans%2Fdebuginfo%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fdebuginfo%2Fmetadata.rs?ref=4e2189fe457e246654f6da6152da1609b392aeea", "patch": "@@ -1976,7 +1976,7 @@ pub fn create_captured_var_metadata<'blk, 'tcx>(bcx: Block<'blk, 'tcx>,\n         None => {\n             cx.sess().span_bug(span, \"debuginfo::create_captured_var_metadata: node not found\");\n         }\n-        Some(hir_map::NodeLocal(pat)) | Some(hir_map::NodeArg(pat)) => {\n+        Some(hir_map::NodeLocal(pat)) => {\n             match pat.node {\n                 hir::PatIdent(_, ref path1, _) => {\n                     path1.node.name"}, {"sha": "1f9116f7491d16b4ece898c79418c5dc5bc337cb", "filename": "src/librustc_trans/trans/monomorphize.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc_trans%2Ftrans%2Fmonomorphize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e2189fe457e246654f6da6152da1609b392aeea/src%2Flibrustc_trans%2Ftrans%2Fmonomorphize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fmonomorphize.rs?ref=4e2189fe457e246654f6da6152da1609b392aeea", "patch": "@@ -262,7 +262,6 @@ pub fn monomorphic_fn<'a, 'tcx>(ccx: &CrateContext<'a, 'tcx>,\n         hir_map::NodeTyParam(..) |\n         hir_map::NodeExpr(..) |\n         hir_map::NodeStmt(..) |\n-        hir_map::NodeArg(..) |\n         hir_map::NodeBlock(..) |\n         hir_map::NodePat(..) |\n         hir_map::NodeLocal(..) => {"}]}