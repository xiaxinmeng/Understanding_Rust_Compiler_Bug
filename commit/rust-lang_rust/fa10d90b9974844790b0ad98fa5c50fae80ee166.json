{"sha": "fa10d90b9974844790b0ad98fa5c50fae80ee166", "node_id": "C_kwDOAAsO6NoAKGZhMTBkOTBiOTk3NDg0NDc5MGIwYWQ5OGZhNWM1MGZhZTgwZWUxNjY", "commit": {"author": {"name": "David Koloski", "email": "dkoloski@google.com", "date": "2022-03-02T00:10:39Z"}, "committer": {"name": "David Koloski", "email": "dkoloski@google.com", "date": "2022-03-08T19:09:32Z"}, "message": "Fix docs, fix incorrect lint source in note", "tree": {"sha": "0328b386d1437c8481d43507e7db775b5831638f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0328b386d1437c8481d43507e7db775b5831638f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa10d90b9974844790b0ad98fa5c50fae80ee166", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa10d90b9974844790b0ad98fa5c50fae80ee166", "html_url": "https://github.com/rust-lang/rust/commit/fa10d90b9974844790b0ad98fa5c50fae80ee166", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa10d90b9974844790b0ad98fa5c50fae80ee166/comments", "author": null, "committer": null, "parents": [{"sha": "1593ce8609714f4717a9db964507bf4fdf1e400d", "url": "https://api.github.com/repos/rust-lang/rust/commits/1593ce8609714f4717a9db964507bf4fdf1e400d", "html_url": "https://github.com/rust-lang/rust/commit/1593ce8609714f4717a9db964507bf4fdf1e400d"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "7b018e7f75fa7c3c947ad304983b95add0385891", "filename": "compiler/rustc_lint/src/levels.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/compiler%2Frustc_lint%2Fsrc%2Flevels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/compiler%2Frustc_lint%2Fsrc%2Flevels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Flevels.rs?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -601,10 +601,11 @@ impl<'s> LintLevelsBuilder<'s> {\n     fn check_gated_lint(&self, lint_id: LintId, span: Span) -> bool {\n         if let Some(feature) = lint_id.lint.feature_gate {\n             if !self.sess.features_untracked().enabled(feature) {\n+                let lint = builtin::UNKNOWN_LINTS;\n                 let (level, src) = self.lint_level(builtin::UNKNOWN_LINTS);\n-                struct_lint_level(self.sess, lint_id.lint, level, src, Some(span.into()), |lint| {\n+                struct_lint_level(self.sess, lint, level, src, Some(span.into()), |lint_db| {\n                     let mut db =\n-                        lint.build(&format!(\"unknown lint: `{}`\", lint_id.lint.name_lower()));\n+                        lint_db.build(&format!(\"unknown lint: `{}`\", lint_id.lint.name_lower()));\n                     db.note(&format!(\"the `{}` lint is unstable\", lint_id.lint.name_lower(),));\n                     add_feature_diagnostics(&mut db, &self.sess.parse_sess, feature);\n                     db.emit();"}, {"sha": "62eba796eae5499783f5a13017aaaef1f407b911", "filename": "compiler/rustc_lint_defs/src/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint_defs%2Fsrc%2Fbuiltin.rs?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -3786,7 +3786,7 @@ declare_lint! {\n     ///\n     /// ### Explanation\n     ///\n-    /// In order to test the behavior of unstable traits, a permanently-unstable\n+    /// In order to test the behavior of unstable lints, a permanently-unstable\n     /// lint is required. This lint can be used to trigger warnings and errors\n     /// from the compiler related to unstable lints.\n     pub TEST_UNSTABLE_LINT,"}, {"sha": "7f82fbdea4ebac18893ce1fda89bc651f4e86a13", "filename": "src/test/ui/feature-gates/feature-gate-non_exhaustive_omitted_patterns_lint.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-non_exhaustive_omitted_patterns_lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-non_exhaustive_omitted_patterns_lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-non_exhaustive_omitted_patterns_lint.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -4,7 +4,7 @@ warning: unknown lint: `non_exhaustive_omitted_patterns`\n LL | #![deny(non_exhaustive_omitted_patterns)]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `#[warn(non_exhaustive_omitted_patterns)]` on by default\n+   = note: `#[warn(unknown_lints)]` on by default\n    = note: the `non_exhaustive_omitted_patterns` lint is unstable\n    = note: see issue #89554 <https://github.com/rust-lang/rust/issues/89554> for more information\n    = help: add `#![feature(non_exhaustive_omitted_patterns_lint)]` to the crate attributes to enable"}, {"sha": "a29322443ea983948cbfb8e51267735de5692ff1", "filename": "src/test/ui/feature-gates/feature-gate-test_unstable_lint.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-test_unstable_lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-test_unstable_lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-test_unstable_lint.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -4,7 +4,7 @@ warning: unknown lint: `test_unstable_lint`\n LL | #![allow(test_unstable_lint)]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `#[warn(test_unstable_lint)]` on by default\n+   = note: `#[warn(unknown_lints)]` on by default\n    = note: the `test_unstable_lint` lint is unstable\n    = help: add `#![feature(test_unstable_lint)]` to the crate attributes to enable\n "}, {"sha": "b58ecb55596ab01f4ee49ba81428cc9fed8add0f", "filename": "src/test/ui/lint/must_not_suspend/gated.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fgated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fgated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fgated.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -4,7 +4,7 @@ warning: unknown lint: `must_not_suspend`\n LL | #![deny(must_not_suspend)]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `#[warn(must_not_suspend)]` on by default\n+   = note: `#[warn(unknown_lints)]` on by default\n    = note: the `must_not_suspend` lint is unstable\n    = note: see issue #83310 <https://github.com/rust-lang/rust/issues/83310> for more information\n    = help: add `#![feature(must_not_suspend)]` to the crate attributes to enable"}, {"sha": "7e6885bd70646dd27126d9670286e2146b5f2867", "filename": "src/test/ui/unknown-unstable-lints/deny-unstable-lint-command-line.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-command-line.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-command-line.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-command-line.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -1,6 +1,6 @@\n error: unknown lint: `test_unstable_lint`\n    |\n-   = note: `-D test-unstable-lint` implied by `-D unknown-lints`\n+   = note: requested on the command line with `-D unknown-lints`\n    = note: the `test_unstable_lint` lint is unstable\n    = help: add `#![feature(test_unstable_lint)]` to the crate attributes to enable\n "}, {"sha": "2d1027dd0e05f6d22531cbf3755ba39fd533ee18", "filename": "src/test/ui/unknown-unstable-lints/deny-unstable-lint-inline.stderr", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-inline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-inline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fdeny-unstable-lint-inline.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -9,7 +9,6 @@ note: the lint level is defined here\n    |\n LL | #![deny(unknown_lints)]\n    |         ^^^^^^^^^^^^^\n-   = note: `#[deny(test_unstable_lint)]` implied by `#[deny(unknown_lints)]`\n    = note: the `test_unstable_lint` lint is unstable\n    = help: add `#![feature(test_unstable_lint)]` to the crate attributes to enable\n "}, {"sha": "799d740b00ef22c9ab8d2c45869a8350e214377b", "filename": "src/test/ui/unknown-unstable-lints/warn-unknown-unstable-lint-command-line.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-command-line.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-command-line.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-command-line.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -1,6 +1,6 @@\n warning: unknown lint: `test_unstable_lint`\n    |\n-   = note: `-W test-unstable-lint` implied by `-W unknown-lints`\n+   = note: requested on the command line with `-W unknown-lints`\n    = note: the `test_unstable_lint` lint is unstable\n    = help: add `#![feature(test_unstable_lint)]` to the crate attributes to enable\n "}, {"sha": "142558b471b480785c294b94959b742d1cbeed12", "filename": "src/test/ui/unknown-unstable-lints/warn-unknown-unstable-lint-inline.stderr", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-inline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fa10d90b9974844790b0ad98fa5c50fae80ee166/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-inline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funknown-unstable-lints%2Fwarn-unknown-unstable-lint-inline.stderr?ref=fa10d90b9974844790b0ad98fa5c50fae80ee166", "patch": "@@ -9,7 +9,6 @@ note: the lint level is defined here\n    |\n LL | #![warn(unknown_lints)]\n    |         ^^^^^^^^^^^^^\n-   = note: `#[warn(test_unstable_lint)]` implied by `#[warn(unknown_lints)]`\n    = note: the `test_unstable_lint` lint is unstable\n    = help: add `#![feature(test_unstable_lint)]` to the crate attributes to enable\n "}]}