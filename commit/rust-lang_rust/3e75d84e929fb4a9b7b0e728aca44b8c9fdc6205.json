{"sha": "3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlNzVkODRlOTI5ZmI0YTliN2IwZTcyOGFjYTQ0YjhjOWZkYzYyMDU=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-10-06T09:30:32Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-10-06T09:30:32Z"}, "message": "Fix build", "tree": {"sha": "b396b5b3da6bc284de4135e40dd752337046588a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b396b5b3da6bc284de4135e40dd752337046588a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205", "html_url": "https://github.com/rust-lang/rust/commit/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab57af4e6ac5d307db006a1b1cbd4ab60577eeb2", "url": "https://api.github.com/repos/rust-lang/rust/commits/ab57af4e6ac5d307db006a1b1cbd4ab60577eeb2", "html_url": "https://github.com/rust-lang/rust/commit/ab57af4e6ac5d307db006a1b1cbd4ab60577eeb2"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "561ddf9776398e92d2af28ba389d427ec9604473", "filename": "prepare_libcore.sh", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205/prepare_libcore.sh", "raw_url": "https://github.com/rust-lang/rust/raw/3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205/prepare_libcore.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/prepare_libcore.sh?ref=3e75d84e929fb4a9b7b0e728aca44b8c9fdc6205", "patch": "@@ -1,11 +1,20 @@\n #!/bin/bash --verbose\n set -e\n \n-SRC_DIR=\"target/libcore\"\n-rm -rf $SRC_DIR\n-mkdir -p $SRC_DIR/src\n-cp -r $(dirname $(rustup which rustc))/../lib/rustlib/src/rust/src/libcore $SRC_DIR/src/libcore || (echo \"Please install rust-src component\"; exit 1)\n-cd $SRC_DIR\n+SRC_DIR=$(dirname $(rustup which rustc))\"/../lib/rustlib/src/rust/\"\n+DST_DIR=\"target/libcore\"\n+\n+if [ ! -e $SRC_DIR ]; then\n+    echo \"Please install rust-src component\"\n+    exit 1\n+fi\n+\n+rm -rf $DST_DIR\n+mkdir -p $DST_DIR/src\n+for crate in libcore libstd; do\n+    cp -r $SRC_DIR/src/$crate $DST_DIR/src/\n+done\n+cd $DST_DIR\n git init\n git add .\n git commit -m \"Initial commit\" -q"}]}