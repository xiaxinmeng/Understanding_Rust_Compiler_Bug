{"sha": "b2770393252afaca3c9f31b856040618bcb25736", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIyNzcwMzkzMjUyYWZhY2EzYzlmMzFiODU2MDQwNjE4YmNiMjU3MzY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-10T20:15:47Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-11T17:51:10Z"}, "message": "Introduce ast::proto_bare\n\nIssue #1022", "tree": {"sha": "f0ed99a27e74f306b1536aadc0818d4db3bb58db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f0ed99a27e74f306b1536aadc0818d4db3bb58db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b2770393252afaca3c9f31b856040618bcb25736", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b2770393252afaca3c9f31b856040618bcb25736", "html_url": "https://github.com/rust-lang/rust/commit/b2770393252afaca3c9f31b856040618bcb25736", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b2770393252afaca3c9f31b856040618bcb25736/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c46cc58cb88737968ada45f1aecb3c19aa07541", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c46cc58cb88737968ada45f1aecb3c19aa07541", "html_url": "https://github.com/rust-lang/rust/commit/9c46cc58cb88737968ada45f1aecb3c19aa07541"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "ff21919d14c507c9112dfa125de78515e55f0630", "filename": "src/comp/metadata/tyencode.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fmetadata%2Ftyencode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fmetadata%2Ftyencode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmetadata%2Ftyencode.rs?ref=b2770393252afaca3c9f31b856040618bcb25736", "patch": "@@ -197,6 +197,7 @@ fn enc_proto(w: io::writer, proto: proto) {\n       proto_iter. { w.write_char('W'); }\n       proto_fn. { w.write_char('F'); }\n       proto_block. { w.write_char('B'); }\n+      proto_bare. { w.write_char('R'); }\n     }\n }\n "}, {"sha": "324c9e16b17a7be0e4ea3dd1619e8f4ee283c566", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=b2770393252afaca3c9f31b856040618bcb25736", "patch": "@@ -478,7 +478,7 @@ mod write {\n // has iter type and block has block type. This may end up changing.\n fn proto_to_ty_proto(proto: ast::proto) -> ast::proto {\n     ret alt proto {\n-          ast::proto_iter. | ast::proto_block. { proto }\n+          ast::proto_iter. | ast::proto_block. | ast::proto_bare. { proto }\n           _ { ast::proto_fn }\n         };\n }"}, {"sha": "a5c6e3ebd5c54f862dfc19ccbf659cdd62bfb9a9", "filename": "src/comp/syntax/ast.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fast.rs?ref=b2770393252afaca3c9f31b856040618bcb25736", "patch": "@@ -102,7 +102,15 @@ tag kind { kind_pinned; kind_shared; kind_unique; }\n \n tag _auth { auth_unsafe; }\n \n-tag proto { proto_iter; proto_fn; proto_block; proto_closure; }\n+tag proto {\n+    proto_iter;\n+    proto_fn;\n+    proto_block;\n+    proto_closure;\n+    // Functions without an environment. Eventually, this will\n+    // merge with proto_fn.\n+    proto_bare;\n+}\n \n tag binop {\n     add;"}, {"sha": "c359cc843cc19a8fec067369fb234191ad7d6028", "filename": "src/comp/syntax/parse/parser.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs?ref=b2770393252afaca3c9f31b856040618bcb25736", "patch": "@@ -2129,7 +2129,7 @@ fn parse_auth(p: parser) -> ast::_auth {\n fn parse_fn_proto(p: parser) -> ast::proto {\n     if p.peek() == token::POUND {\n         p.bump();\n-        ast::proto_fn\n+        ast::proto_bare\n     } else {\n         ast::proto_fn\n     }"}, {"sha": "f1b8dc69d1296c4cff337fed935acd24967f52a7", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2770393252afaca3c9f31b856040618bcb25736/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=b2770393252afaca3c9f31b856040618bcb25736", "patch": "@@ -1643,6 +1643,7 @@ fn proto_to_str(p: ast::proto) -> str {\n           ast::proto_iter. { \"iter\" }\n           ast::proto_block. { \"block\" }\n           ast::proto_closure. { \"lambda\" }\n+          ast::proto_bare. { \"fn#\" }\n         };\n }\n "}]}