{"sha": "b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0YWMzZGRhNzhlYmVhMWI0ODNjMDE2NGEzOTkwN2RhYTBjOGNhYWE=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-02-10T09:06:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-10T09:06:01Z"}, "message": "Merge #3075\n\n3075: Migrate u32::from(TextUnit) as usize to .to_usize() r=matklad a=Veetaha\n\n@matklad I see 29 uses of `.to_usize()` cast, wouldn't it be reasonable to change `TextUnit(u32)` to `TextUnit(usize)` ? Or do you have reasons to stick with `u32` here?\n\nCo-authored-by: Veetaha <gerzoh1@gmail.com>", "tree": {"sha": "a4a834a6a9b6f8ab4b0be5a4da77af36f894f588", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4a834a6a9b6f8ab4b0be5a4da77af36f894f588"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "html_url": "https://github.com/rust-lang/rust/commit/b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "abeadb29cea2ecf158bf89eb0da5498dfebbaea9", "url": "https://api.github.com/repos/rust-lang/rust/commits/abeadb29cea2ecf158bf89eb0da5498dfebbaea9", "html_url": "https://github.com/rust-lang/rust/commit/abeadb29cea2ecf158bf89eb0da5498dfebbaea9"}, {"sha": "139479e8a376aecff35db2055b9ebd2311935f98", "url": "https://api.github.com/repos/rust-lang/rust/commits/139479e8a376aecff35db2055b9ebd2311935f98", "html_url": "https://github.com/rust-lang/rust/commit/139479e8a376aecff35db2055b9ebd2311935f98"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "5d0279945084afa13189b3957dcea455af4a154a", "filename": "crates/ra_hir_def/src/body/scope.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fbody%2Fscope.rs?ref=b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "patch": "@@ -194,7 +194,7 @@ mod tests {\n         let (off, code) = extract_offset(code);\n         let code = {\n             let mut buf = String::new();\n-            let off = u32::from(off) as usize;\n+            let off = off.to_usize();\n             buf.push_str(&code[..off]);\n             buf.push_str(\"marker\");\n             buf.push_str(&code[off..]);"}, {"sha": "37f23d04384c5c540efda988bdc88eca32054356", "filename": "crates/ra_text_edit/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_text_edit%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_text_edit%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_text_edit%2Fsrc%2Flib.rs?ref=b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "patch": "@@ -29,8 +29,8 @@ impl AtomTextEdit {\n     }\n \n     pub fn apply(&self, mut text: String) -> String {\n-        let start = u32::from(self.delete.start()) as usize;\n-        let end = u32::from(self.delete.end()) as usize;\n+        let start = self.delete.start().to_usize();\n+        let end = self.delete.end().to_usize();\n         text.replace_range(start..end, &self.insert);\n         text\n     }"}, {"sha": "3291ada4201d13fbd2ec0602818648b133801e6e", "filename": "crates/ra_text_edit/src/text_edit.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_text_edit%2Fsrc%2Ftext_edit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4ac3dda78ebea1b483c0164a39907daa0c8caaa/crates%2Fra_text_edit%2Fsrc%2Ftext_edit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_text_edit%2Fsrc%2Ftext_edit.rs?ref=b4ac3dda78ebea1b483c0164a39907daa0c8caaa", "patch": "@@ -66,13 +66,13 @@ impl TextEdit {\n         let mut total_len = text.len();\n         for atom in self.atoms.iter() {\n             total_len += atom.insert.len();\n-            total_len -= u32::from(atom.delete.end() - atom.delete.start()) as usize;\n+            total_len -= (atom.delete.end() - atom.delete.start()).to_usize();\n         }\n         let mut buf = String::with_capacity(total_len);\n         let mut prev = 0;\n         for atom in self.atoms.iter() {\n-            let start = u32::from(atom.delete.start()) as usize;\n-            let end = u32::from(atom.delete.end()) as usize;\n+            let start = atom.delete.start().to_usize();\n+            let end = atom.delete.end().to_usize();\n             if start > prev {\n                 buf.push_str(&text[prev..start]);\n             }"}]}