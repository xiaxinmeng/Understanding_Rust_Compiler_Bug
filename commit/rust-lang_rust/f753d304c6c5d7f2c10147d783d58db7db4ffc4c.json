{"sha": "f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3NTNkMzA0YzZjNWQ3ZjJjMTAxNDdkNzgzZDU4ZGI3ZGI0ZmZjNGM=", "commit": {"author": {"name": "Igor Sadikov", "email": "igorsadikov@gmail.com", "date": "2019-02-05T20:21:03Z"}, "committer": {"name": "Igor Sadikov", "email": "igorsadikov@gmail.com", "date": "2019-02-07T21:13:19Z"}, "message": "Suggest removing parentheses surrounding lifetimes", "tree": {"sha": "7c8babd0eee8633b80a001c2eac89a1decea5181", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c8babd0eee8633b80a001c2eac89a1decea5181"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "html_url": "https://github.com/rust-lang/rust/commit/f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f753d304c6c5d7f2c10147d783d58db7db4ffc4c/comments", "author": {"login": "igorsdv", "id": 718601, "node_id": "MDQ6VXNlcjcxODYwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igorsdv", "html_url": "https://github.com/igorsdv", "followers_url": "https://api.github.com/users/igorsdv/followers", "following_url": "https://api.github.com/users/igorsdv/following{/other_user}", "gists_url": "https://api.github.com/users/igorsdv/gists{/gist_id}", "starred_url": "https://api.github.com/users/igorsdv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igorsdv/subscriptions", "organizations_url": "https://api.github.com/users/igorsdv/orgs", "repos_url": "https://api.github.com/users/igorsdv/repos", "events_url": "https://api.github.com/users/igorsdv/events{/privacy}", "received_events_url": "https://api.github.com/users/igorsdv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "igorsdv", "id": 718601, "node_id": "MDQ6VXNlcjcxODYwMQ==", "avatar_url": "https://avatars.githubusercontent.com/u/718601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/igorsdv", "html_url": "https://github.com/igorsdv", "followers_url": "https://api.github.com/users/igorsdv/followers", "following_url": "https://api.github.com/users/igorsdv/following{/other_user}", "gists_url": "https://api.github.com/users/igorsdv/gists{/gist_id}", "starred_url": "https://api.github.com/users/igorsdv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/igorsdv/subscriptions", "organizations_url": "https://api.github.com/users/igorsdv/orgs", "repos_url": "https://api.github.com/users/igorsdv/repos", "events_url": "https://api.github.com/users/igorsdv/events{/privacy}", "received_events_url": "https://api.github.com/users/igorsdv/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1731801163df1d3a8d4ddfa68adac2ec833ef7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/d1731801163df1d3a8d4ddfa68adac2ec833ef7f", "html_url": "https://github.com/rust-lang/rust/commit/d1731801163df1d3a8d4ddfa68adac2ec833ef7f"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "1dbe3fb7ea6204bf72f42012f5085f8990f4d296", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/f753d304c6c5d7f2c10147d783d58db7db4ffc4c/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f753d304c6c5d7f2c10147d783d58db7db4ffc4c/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "patch": "@@ -5371,6 +5371,7 @@ impl<'a> Parser<'a> {\n             if is_bound_start {\n                 let lo = self.span;\n                 let has_parens = self.eat(&token::OpenDelim(token::Paren));\n+                let inner_lo = self.span;\n                 let question = if self.eat(&token::Question) { Some(self.prev_span) } else { None };\n                 if self.token.is_lifetime() {\n                     if let Some(question_span) = question {\n@@ -5379,9 +5380,21 @@ impl<'a> Parser<'a> {\n                     }\n                     bounds.push(GenericBound::Outlives(self.expect_lifetime()));\n                     if has_parens {\n+                        let inner_span = inner_lo.to(self.prev_span);\n                         self.expect(&token::CloseDelim(token::Paren))?;\n-                        self.span_err(self.prev_span,\n-                                      \"parenthesized lifetime bounds are not supported\");\n+                        let mut err = self.struct_span_err(\n+                            lo.to(self.prev_span),\n+                            \"parenthesized lifetime bounds are not supported\"\n+                        );\n+                        if let Ok(snippet) = self.sess.source_map().span_to_snippet(inner_span) {\n+                            err.span_suggestion_short(\n+                                lo.to(self.prev_span),\n+                                \"remove the parentheses\",\n+                                snippet.to_owned(),\n+                                Applicability::MachineApplicable\n+                            );\n+                        }\n+                        err.emit();\n                     }\n                 } else {\n                     let lifetime_defs = self.parse_late_bound_lifetime_defs()?;"}, {"sha": "94ca66aef729bf26a1e36bf8707ec60ced7db4b9", "filename": "src/test/ui/parser/trait-object-lifetime-parens.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f753d304c6c5d7f2c10147d783d58db7db4ffc4c/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f753d304c6c5d7f2c10147d783d58db7db4ffc4c/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Ftrait-object-lifetime-parens.stderr?ref=f753d304c6c5d7f2c10147d783d58db7db4ffc4c", "patch": "@@ -1,14 +1,14 @@\n error: parenthesized lifetime bounds are not supported\n-  --> $DIR/trait-object-lifetime-parens.rs:5:24\n+  --> $DIR/trait-object-lifetime-parens.rs:5:21\n    |\n LL | fn f<'a, T: Trait + ('a)>() {} //~ ERROR parenthesized lifetime bounds are not supported\n-   |                        ^\n+   |                     ^^^^ help: remove the parentheses\n \n error: parenthesized lifetime bounds are not supported\n-  --> $DIR/trait-object-lifetime-parens.rs:8:27\n+  --> $DIR/trait-object-lifetime-parens.rs:8:24\n    |\n LL |     let _: Box<Trait + ('a)>; //~ ERROR parenthesized lifetime bounds are not supported\n-   |                           ^\n+   |                        ^^^^ help: remove the parentheses\n \n error: expected type, found `'a`\n   --> $DIR/trait-object-lifetime-parens.rs:9:17"}]}