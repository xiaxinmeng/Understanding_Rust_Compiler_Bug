{"sha": "8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9", "node_id": "C_kwDOAAsO6NoAKDhkYzNiZjcyMjFkNjllNGZiZmI4NDdlZDIwOWMzOWFhZTNmNmM3YTk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-09T12:38:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-09T12:38:28Z"}, "message": "Rollup merge of #92055 - tmandry:relnotes-1.58, r=pietroalbini\n\nAdd release notes for 1.58\n\nr? `@rust-lang/release`", "tree": {"sha": "bc504e1a8c679b7bbabe0ed54664a069714df9c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bc504e1a8c679b7bbabe0ed54664a069714df9c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh2tdECRBK7hj4Ov3rIwAAtT4IAD4+SXZ2oVynp2PB9z1imRsy\nrq6sNpbVLH+8yRsHJnq40Vw8/4oh2BLCC5Bb41Weikq+Nx7YHOCX+n9T4M1n/qGq\nUNgeo6Ry0FqAiB6GhsJrDwcCvtVawy6jObm/KBnntD3JjkTyChzTMwonlS0uns05\nfTNqUESdhdB8jLcRe55IOn/bya+/dsOIoJSAyp28P/uLwd4N45U3B6soSHsbibuM\nTrxsaFIQB6hH/+t+H+u0Xz9yXX3Tl672FKaeLJloIvHLXzgT38vksrs8FJ4GJIJx\nljbSPQ5nwuIyWjH0E4Us4ATri12++sSfByIGqCfiHw/I760O6kzDphH4331gQLI=\n=MX0c\n-----END PGP SIGNATURE-----\n", "payload": "tree bc504e1a8c679b7bbabe0ed54664a069714df9c5\nparent 02fe61b381c2dedc0071e1aacfbe91e0bad1f656\nparent 0e13d0c20e8f64605c13c7ed6a086789e4de25cd\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1641731908 +0100\ncommitter GitHub <noreply@github.com> 1641731908 +0100\n\nRollup merge of #92055 - tmandry:relnotes-1.58, r=pietroalbini\n\nAdd release notes for 1.58\n\nr? `@rust-lang/release`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9", "html_url": "https://github.com/rust-lang/rust/commit/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02fe61b381c2dedc0071e1aacfbe91e0bad1f656", "url": "https://api.github.com/repos/rust-lang/rust/commits/02fe61b381c2dedc0071e1aacfbe91e0bad1f656", "html_url": "https://github.com/rust-lang/rust/commit/02fe61b381c2dedc0071e1aacfbe91e0bad1f656"}, {"sha": "0e13d0c20e8f64605c13c7ed6a086789e4de25cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e13d0c20e8f64605c13c7ed6a086789e4de25cd", "html_url": "https://github.com/rust-lang/rust/commit/0e13d0c20e8f64605c13c7ed6a086789e4de25cd"}], "stats": {"total": 170, "additions": 170, "deletions": 0}, "files": [{"sha": "d6f5909a2ebc016eaf1fb4c354468843207fb3a3", "filename": "RELEASES.md", "status": "modified", "additions": 170, "deletions": 0, "changes": 170, "blob_url": "https://github.com/rust-lang/rust/blob/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9/RELEASES.md", "raw_url": "https://github.com/rust-lang/rust/raw/8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9/RELEASES.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/RELEASES.md?ref=8dc3bf7221d69e4fbfb847ed209c39aae3f6c7a9", "patch": "@@ -1,3 +1,169 @@\n+Version 1.58.0 (2022-01-13)\n+==========================\n+\n+Language\n+--------\n+\n+- [Format strings can now capture arguments simply by writing `{ident}` in the string.][90473] This works in all macros accepting format strings. Support for this in `panic!` (`panic!(\"{ident}\")`) requires the 2021 edition; panic invocations in previous editions that appear to be trying to use this will result in a warning lint about not having the intended effect.\n+- [`*const T` pointers can now be dereferenced in const contexts.][89551]\n+- [The rules for when a generic struct implements `Unsize` have been relaxed.][90417]\n+\n+Compiler\n+--------\n+\n+- [Add LLVM CFI support to the Rust compiler][89652]\n+- [Stabilize -Z strip as -C strip][90058]. Note that while release builds already don't add debug symbols for the code you compile, the compiled standard library that ships with Rust includes debug symbols, so you may want to use the `strip` option to remove these symbols to produce smaller release binaries. Note that this release only includes support in rustc, not directly in cargo.\n+- [Add support for LLVM coverage mapping format versions 5 and 6][91207]\n+- [Emit LLVM optimization remarks when enabled with `-Cremark`][90833]\n+- [Update the minimum external LLVM to 12][90175]\n+- [Add `x86_64-unknown-none` at Tier 3*][89062]\n+- [Build musl dist artifacts with debuginfo enabled][90733]. When building release binaries using musl, you may want to use the newly stabilized strip option to remove these debug symbols, reducing the size of your binaries.\n+- [Don't abort compilation after giving a lint error][87337]\n+- [Error messages point at the source of trait bound obligations in more places][89580]\n+\n+\\* Refer to Rust's [platform support page][platform-support-doc] for more\n+   information on Rust's tiered platform support.\n+\n+Libraries\n+---------\n+\n+- [All remaining functions in the standard library have `#[must_use]` annotations where appropriate][89692], producing a warning when ignoring their return value. This helps catch mistakes such as expecting a function to mutate a value in place rather than return a new value.\n+- [Paths are automatically canonicalized on Windows for operations that support it][89174]\n+- [Re-enable debug checks for `copy` and `copy_nonoverlapping`][90041]\n+- [Implement `RefUnwindSafe` for `Rc<T>`][87467]\n+- [Make RSplit<T, P>: Clone not require T: Clone][90117]\n+- [Implement `Termination` for `Result<Infallible, E>`][88601]. This allows writing `fn main() -> Result<Infallible, ErrorType>`, for a program whose successful exits never involve returning from `main` (for instance, a program that calls `exit`, or that uses `exec` to run another program).\n+\n+Stabilized APIs\n+---------------\n+\n+- [`Metadata::is_symlink`]\n+- [`Path::is_symlink`]\n+- [`{integer}::saturating_div`]\n+- [`Option::unwrap_unchecked`]\n+- [`NonZero{unsigned}::is_power_of_two`]\n+\n+These APIs are now usable in const contexts:\n+\n+- [`Duration::new`]\n+- [`Duration::checked_add`]\n+- [`Duration::saturating_add`]\n+- [`Duration::checked_sub`]\n+- [`Duration::saturating_sub`]\n+- [`Duration::checked_mul`]\n+- [`Duration::saturating_mul`]\n+- [`Duration::checked_div`]\n+- [`MaybeUninit::as_ptr`]\n+- [`MaybeUninit::as_mut_ptr`]\n+- [`MaybeUninit::assume_init`]\n+- [`MaybeUninit::assume_init_ref`]\n+\n+Cargo\n+-----\n+\n+- [Add --message-format for install command][cargo/10107]\n+- [Warn when alias shadows external subcommand][cargo/10082]\n+\n+Rustdoc\n+-------\n+\n+- [Show all Deref implementations recursively in rustdoc][90183]\n+- [Use computed visibility in rustdoc][88447]\n+\n+Compatibility Notes\n+-------------------\n+\n+- [Try all stable method candidates first before trying unstable ones][90329]. This change ensures that adding new nightly-only methods to the Rust standard library will not break code invoking methods of the same name from traits outside the standard library.\n+- Windows: [`std::process::Command` will no longer search the current directory for executables.][87704]\n+- [All proc-macro backward-compatibility lints are now deny-by-default.][88041]\n+- [proc_macro: Append .0 to unsuffixed float if it would otherwise become int token][90297]\n+- [Refactor weak symbols in std::sys::unix][90846]. This optimizes accesses to glibc functions, by avoiding the use of dlopen. This does not increase the [minimum expected version of glibc](https://doc.rust-lang.org/nightly/rustc/platform-support.html). However, software distributions that use symbol versions to detect library dependencies, and which take weak symbols into account in that analysis, may detect rust binaries as requiring newer versions of glibc.\n+- [rustdoc now rejects some unexpected semicolons in doctests][91026]\n+\n+Internal Changes\n+----------------\n+\n+These changes provide no direct user facing benefits, but represent significant\n+improvements to the internals and overall performance of rustc\n+and related tools.\n+\n+- [Implement coherence checks for negative trait impls][90104]\n+- [Add rustc lint, warning when iterating over hashmaps][89558]\n+- [Optimize live point computation][90491]\n+- [Enable verification for 1/32nd of queries loaded from disk][90361]\n+- [Implement version of normalize_erasing_regions that allows for normalization failure][91255]\n+\n+[87337]: https://github.com/rust-lang/rust/pull/87337/\n+[87467]: https://github.com/rust-lang/rust/pull/87467/\n+[87704]: https://github.com/rust-lang/rust/pull/87704/\n+[88041]: https://github.com/rust-lang/rust/pull/88041/\n+[88300]: https://github.com/rust-lang/rust/pull/88300/\n+[88447]: https://github.com/rust-lang/rust/pull/88447/\n+[88601]: https://github.com/rust-lang/rust/pull/88601/\n+[88624]: https://github.com/rust-lang/rust/pull/88624/\n+[89062]: https://github.com/rust-lang/rust/pull/89062/\n+[89174]: https://github.com/rust-lang/rust/pull/89174/\n+[89542]: https://github.com/rust-lang/rust/pull/89542/\n+[89551]: https://github.com/rust-lang/rust/pull/89551/\n+[89558]: https://github.com/rust-lang/rust/pull/89558/\n+[89580]: https://github.com/rust-lang/rust/pull/89580/\n+[89652]: https://github.com/rust-lang/rust/pull/89652/\n+[89677]: https://github.com/rust-lang/rust/pull/89677/\n+[89951]: https://github.com/rust-lang/rust/pull/89951/\n+[90041]: https://github.com/rust-lang/rust/pull/90041/\n+[90058]: https://github.com/rust-lang/rust/pull/90058/\n+[90104]: https://github.com/rust-lang/rust/pull/90104/\n+[90117]: https://github.com/rust-lang/rust/pull/90117/\n+[90175]: https://github.com/rust-lang/rust/pull/90175/\n+[90183]: https://github.com/rust-lang/rust/pull/90183/\n+[90297]: https://github.com/rust-lang/rust/pull/90297/\n+[90329]: https://github.com/rust-lang/rust/pull/90329/\n+[90361]: https://github.com/rust-lang/rust/pull/90361/\n+[90417]: https://github.com/rust-lang/rust/pull/90417/\n+[90473]: https://github.com/rust-lang/rust/pull/90473/\n+[90491]: https://github.com/rust-lang/rust/pull/90491/\n+[90733]: https://github.com/rust-lang/rust/pull/90733/\n+[90833]: https://github.com/rust-lang/rust/pull/90833/\n+[90846]: https://github.com/rust-lang/rust/pull/90846/\n+[90896]: https://github.com/rust-lang/rust/pull/90896/\n+[91026]: https://github.com/rust-lang/rust/pull/91026/\n+[91207]: https://github.com/rust-lang/rust/pull/91207/\n+[91255]: https://github.com/rust-lang/rust/pull/91255/\n+[91301]: https://github.com/rust-lang/rust/pull/91301/\n+[cargo/10082]: https://github.com/rust-lang/cargo/pull/10082/\n+[cargo/10107]: https://github.com/rust-lang/cargo/pull/10107/\n+[`Metadata::is_symlink`]: https://doc.rust-lang.org/stable/std/fs/struct.Metadata.html#method.is_symlink\n+[`Path::is_symlink`]: https://doc.rust-lang.org/stable/std/path/struct.Path.html#method.is_symlink\n+[`{integer}::saturating_div`]: https://doc.rust-lang.org/stable/std/primitive.i8.html#method.saturating_div\n+[`Option::unwrap_unchecked`]: https://doc.rust-lang.org/stable/std/option/enum.Option.html#method.unwrap_unchecked\n+[`NonZero{unsigned}::is_power_of_two`]: https://doc.rust-lang.org/stable/std/num/struct.NonZeroU8.html#method.is_power_of_two\n+[`unix::process::ExitStatusExt::core_dumped`]: https://doc.rust-lang.org/stable/std/os/unix/process/trait.ExitStatusExt.html#tymethod.core_dumped\n+[`unix::process::ExitStatusExt::stopped_signal`]: https://doc.rust-lang.org/stable/std/os/unix/process/trait.ExitStatusExt.html#tymethod.stopped_signal\n+[`unix::process::ExitStatusExt::continued`]: https://doc.rust-lang.org/stable/std/os/unix/process/trait.ExitStatusExt.html#tymethod.continued\n+[`unix::process::ExitStatusExt::into_raw`]: https://doc.rust-lang.org/stable/std/os/unix/process/trait.ExitStatusExt.html#tymethod.into_raw\n+[`Duration::new`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.new\n+[`Duration::checked_add`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.checked_add\n+[`Duration::saturating_add`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.saturating_add\n+[`Duration::checked_sub`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.checked_sub\n+[`Duration::saturating_sub`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.saturating_sub\n+[`Duration::checked_mul`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.checked_mul\n+[`Duration::saturating_mul`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.saturating_mul\n+[`Duration::checked_div`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.checked_div\n+[`Duration::as_secs_f64`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.as_secs_f64\n+[`Duration::as_secs_f32`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.as_secs_f32\n+[`Duration::from_secs_f64`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.from_secs_f64\n+[`Duration::from_secs_f32`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.from_secs_f32\n+[`Duration::mul_f64`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.mul_f64\n+[`Duration::mul_f32`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.mul_f32\n+[`Duration::div_f64`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.div_f64\n+[`Duration::div_f32`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.div_f32\n+[`Duration::div_duration_f64`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.div_duration_f64\n+[`Duration::div_duration_f32`]: https://doc.rust-lang.org/stable/std/time/struct.Duration.html#method.div_duration_f32\n+[`MaybeUninit::as_ptr`]: https://doc.rust-lang.org/stable/std/mem/union.MaybeUninit.html#method.as_ptr\n+[`MaybeUninit::as_mut_ptr`]: https://doc.rust-lang.org/stable/std/mem/union.MaybeUninit.html#method.as_mut_ptr\n+[`MaybeUninit::assume_init`]: https://doc.rust-lang.org/stable/std/mem/union.MaybeUninit.html#method.assume_init\n+[`MaybeUninit::assume_init_ref`]: https://doc.rust-lang.org/stable/std/mem/union.MaybeUninit.html#method.assume_init_ref\n+\n Version 1.57.0 (2021-12-02)\n ==========================\n \n@@ -388,6 +554,10 @@ Compatibility Notes\n   `Command` would cause them to be ASCII-uppercased.\n - [Rustdoc will now warn on using rustdoc lints that aren't prefixed\n   with `rustdoc::`][86849]\n+- `RUSTFLAGS` is no longer set for build scripts. Build scripts\n+  should use `CARGO_ENCODED_RUSTFLAGS` instead. See the\n+  [documentation](https://doc.rust-lang.org/nightly/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts)\n+  for more details.\n \n [86849]: https://github.com/rust-lang/rust/pull/86849\n [86513]: https://github.com/rust-lang/rust/pull/86513"}]}