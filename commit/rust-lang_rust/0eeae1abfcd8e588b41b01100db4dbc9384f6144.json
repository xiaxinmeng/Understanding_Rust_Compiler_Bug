{"sha": "0eeae1abfcd8e588b41b01100db4dbc9384f6144", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlZWFlMWFiZmNkOGU1ODhiNDFiMDExMDBkYjRkYmM5Mzg0ZjYxNDQ=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2021-03-07T22:51:35Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2021-03-07T23:15:19Z"}, "message": "diagnostics: Don't mention external crates when hitting import errors on crate imports in 2018", "tree": {"sha": "8c3b38c869fcd7ae077e8717b47bc32244f51269", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8c3b38c869fcd7ae077e8717b47bc32244f51269"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0eeae1abfcd8e588b41b01100db4dbc9384f6144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0eeae1abfcd8e588b41b01100db4dbc9384f6144", "html_url": "https://github.com/rust-lang/rust/commit/0eeae1abfcd8e588b41b01100db4dbc9384f6144", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0eeae1abfcd8e588b41b01100db4dbc9384f6144/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d5d669b77f8c100f3e01a7bd5924d30c8bad152", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d5d669b77f8c100f3e01a7bd5924d30c8bad152", "html_url": "https://github.com/rust-lang/rust/commit/9d5d669b77f8c100f3e01a7bd5924d30c8bad152"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "2ce54658c0b1074cbce0d07f7430b24aebf904be", "filename": "compiler/rustc_resolve/src/lib.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0eeae1abfcd8e588b41b01100db4dbc9384f6144/compiler%2Frustc_resolve%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0eeae1abfcd8e588b41b01100db4dbc9384f6144/compiler%2Frustc_resolve%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flib.rs?ref=0eeae1abfcd8e588b41b01100db4dbc9384f6144", "patch": "@@ -2433,8 +2433,10 @@ impl<'a> Resolver<'a> {\n                                     Applicability::MaybeIncorrect,\n                                 )),\n                             )\n-                        } else {\n+                        } else if self.session.edition() == Edition::Edition2015 {\n                             (format!(\"maybe a missing crate `{}`?\", ident), None)\n+                        } else {\n+                            (format!(\"could not find `{}` in the crate root\", ident), None)\n                         }\n                     } else if i == 0 {\n                         if ident"}, {"sha": "4c890e3ae69949ece9ee03b83da6caf76d47b143", "filename": "src/test/ui/editions-crate-root-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Feditions-crate-root-2015.rs?ref=0eeae1abfcd8e588b41b01100db4dbc9384f6144", "patch": "@@ -18,4 +18,4 @@ mod inner {\n \n fn main() {\n \n-}\n\\ No newline at end of file\n+}"}, {"sha": "61e4329bbb347aa2686f51040576b091d1660330", "filename": "src/test/ui/editions-crate-root-2018.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Feditions-crate-root-2018.rs?ref=0eeae1abfcd8e588b41b01100db4dbc9384f6144", "patch": "@@ -5,7 +5,7 @@ mod inner {\n         //~^ ERROR failed to resolve: could not find `nonexistant` in the list of imported crates\n     }\n     fn crate_inner(_: crate::nonexistant::Foo) {\n-        //~^ ERROR failed to resolve: maybe a missing crate `nonexistant`?\n+        //~^ ERROR failed to resolve: could not find `nonexistant` in the crate root\n     }\n \n     fn bare_global(_: ::nonexistant) {\n@@ -18,4 +18,4 @@ mod inner {\n \n fn main() {\n \n-}\n\\ No newline at end of file\n+}"}, {"sha": "967a5a2fca155f346d5ab0aedd0f8118e3dad58a", "filename": "src/test/ui/editions-crate-root-2018.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0eeae1abfcd8e588b41b01100db4dbc9384f6144/src%2Ftest%2Fui%2Feditions-crate-root-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Feditions-crate-root-2018.stderr?ref=0eeae1abfcd8e588b41b01100db4dbc9384f6144", "patch": "@@ -4,11 +4,11 @@ error[E0433]: failed to resolve: could not find `nonexistant` in the list of imp\n LL |     fn global_inner(_: ::nonexistant::Foo) {\n    |                          ^^^^^^^^^^^ could not find `nonexistant` in the list of imported crates\n \n-error[E0433]: failed to resolve: maybe a missing crate `nonexistant`?\n+error[E0433]: failed to resolve: could not find `nonexistant` in the crate root\n   --> $DIR/editions-crate-root-2018.rs:7:30\n    |\n LL |     fn crate_inner(_: crate::nonexistant::Foo) {\n-   |                              ^^^^^^^^^^^ maybe a missing crate `nonexistant`?\n+   |                              ^^^^^^^^^^^ could not find `nonexistant` in the crate root\n \n error[E0412]: cannot find crate `nonexistant` in the list of imported crates\n   --> $DIR/editions-crate-root-2018.rs:11:25"}]}