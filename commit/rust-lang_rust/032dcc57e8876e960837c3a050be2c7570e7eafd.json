{"sha": "032dcc57e8876e960837c3a050be2c7570e7eafd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzMmRjYzU3ZTg4NzZlOTYwODM3YzNhMDUwYmUyYzc1NzBlN2VhZmQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-25T17:47:01Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-25T17:47:01Z"}, "message": "auto merge of #7371 : alexcrichton/rust/trying, r=cmr\n\nThis is an attempt at a smaller request than #7113, it's just the first two commits", "tree": {"sha": "0e63580109393a724f823d21c9668eb25466d796", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e63580109393a724f823d21c9668eb25466d796"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/032dcc57e8876e960837c3a050be2c7570e7eafd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/032dcc57e8876e960837c3a050be2c7570e7eafd", "html_url": "https://github.com/rust-lang/rust/commit/032dcc57e8876e960837c3a050be2c7570e7eafd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/032dcc57e8876e960837c3a050be2c7570e7eafd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d161e630d8378e9705987e0b746d8dbf0da48842", "url": "https://api.github.com/repos/rust-lang/rust/commits/d161e630d8378e9705987e0b746d8dbf0da48842", "html_url": "https://github.com/rust-lang/rust/commit/d161e630d8378e9705987e0b746d8dbf0da48842"}, {"sha": "92424f0670723e417a96a96310a6ad871994c6b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/92424f0670723e417a96a96310a6ad871994c6b7", "html_url": "https://github.com/rust-lang/rust/commit/92424f0670723e417a96a96310a6ad871994c6b7"}], "stats": {"total": 74, "additions": 57, "deletions": 17}, "files": [{"sha": "fa6c7806581352fa216bb1d92fae6e5988a78af4", "filename": "Makefile.in", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "patch": "@@ -239,29 +239,29 @@ $(foreach target,$(CFG_TARGET_TRIPLES),\\\n # Standard library variables\n ######################################################################\n \n-STDLIB_CRATE := $(S)src/libstd/core.rc\n+STDLIB_CRATE := $(S)src/libstd/std.rs\n STDLIB_INPUTS := $(wildcard $(addprefix $(S)src/libstd/,        \\\n-                                           core.rc *.rs */*.rs */*/*rs */*/*/*rs))\n+                                           *.rs */*.rs */*/*rs */*/*/*rs))\n \n ######################################################################\n # Extra library variables\n ######################################################################\n \n-EXTRALIB_CRATE := $(S)src/libextra/std.rc\n+EXTRALIB_CRATE := $(S)src/libextra/extra.rs\n EXTRALIB_INPUTS := $(wildcard $(addprefix $(S)src/libextra/,          \\\n-                                          std.rc *.rs */*.rs))\n+                                          *.rs */*.rs))\n \n ######################################################################\n # rustc crate variables\n ######################################################################\n \n-COMPILER_CRATE := $(S)src/librustc/rustc.rc\n+COMPILER_CRATE := $(S)src/librustc/rustc.rs\n COMPILER_INPUTS := $(wildcard $(addprefix $(S)src/librustc/,      \\\n-                           rustc.rc *.rs */*.rs */*/*.rs */*/*/*.rs))\n+                           *.rs */*.rs */*/*.rs */*/*/*.rs))\n \n-LIBSYNTAX_CRATE := $(S)src/libsyntax/syntax.rc\n+LIBSYNTAX_CRATE := $(S)src/libsyntax/syntax.rs\n LIBSYNTAX_INPUTS := $(wildcard $(addprefix $(S)src/libsyntax/, \\\n-                            syntax.rc *.rs */*.rs */*/*.rs))\n+                           *.rs */*.rs */*/*.rs))\n \n DRIVER_CRATE := $(S)src/driver/driver.rs\n "}, {"sha": "7b50441b3c7f2f4a483649f651f031c5aae2c5be", "filename": "mk/tools.mk", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "patch": "@@ -12,23 +12,23 @@\n # and host architectures\n \n # The test runner that runs the cfail/rfail/rpass and bxench tests\n-COMPILETEST_CRATE := $(S)src/compiletest/compiletest.rc\n-COMPILETEST_INPUTS := $(wildcard $(S)src/compiletest/*rs)\n+COMPILETEST_CRATE := $(S)src/compiletest/compiletest.rs\n+COMPILETEST_INPUTS := $(wildcard $(S)src/compiletest/*.rs)\n \n # Rustpkg, the package manager and build system\n-RUSTPKG_LIB := $(S)src/librustpkg/rustpkg.rc\n-RUSTPKG_INPUTS := $(wildcard $(S)src/librustpkg/*rs)\n+RUSTPKG_LIB := $(S)src/librustpkg/rustpkg.rs\n+RUSTPKG_INPUTS := $(wildcard $(S)src/librustpkg/*.rs)\n \n # Rustdoc, the documentation tool\n-RUSTDOC_LIB := $(S)src/librustdoc/rustdoc.rc\n+RUSTDOC_LIB := $(S)src/librustdoc/rustdoc.rs\n RUSTDOC_INPUTS := $(wildcard $(S)src/librustdoc/*.rs)\n \n # Rusti, the JIT REPL\n-RUSTI_LIB := $(S)src/librusti/rusti.rc\n+RUSTI_LIB := $(S)src/librusti/rusti.rs\n RUSTI_INPUTS := $(wildcard $(S)src/librusti/*.rs)\n \n # Rust, the convenience tool\n-RUST_LIB := $(S)src/librust/rust.rc\n+RUST_LIB := $(S)src/librust/rust.rs\n RUST_INPUTS := $(wildcard $(S)src/librust/*.rs)\n \n # FIXME: These are only built for the host arch. Eventually we'll"}, {"sha": "e8876c4851bc71512d5bd7b73422fa8646fc413d", "filename": "src/compiletest/compiletest.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/compiletest/compiletest.rc"}, {"sha": "11aebdf467ff29ac7ba8857d0b26adcb3156f0ac", "filename": "src/libextra/extra.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibextra%2Fextra.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibextra%2Fextra.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Fextra.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/libextra/std.rc"}, {"sha": "68427745ff592d78bc2ea9daffab98ad9e2c1d36", "filename": "src/librust/rust.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrust%2Frust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrust%2Frust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrust%2Frust.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/librust/rust.rc"}, {"sha": "5c36ab7750c8c1f8e25768a922966787d4ff9fb9", "filename": "src/librustc/middle/lint.rs", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustc%2Fmiddle%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustc%2Fmiddle%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flint.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "patch": "@@ -96,6 +96,8 @@ pub enum lint {\n \n     missing_doc,\n     unreachable_code,\n+\n+    warnings,\n }\n \n pub fn level_to_str(lv: level) -> &'static str {\n@@ -280,6 +282,13 @@ static lint_table: &'static [(&'static str, LintSpec)] = &[\n         desc: \"detects unreachable code\",\n         default: warn\n     }),\n+\n+    (\"warnings\",\n+     LintSpec {\n+        lint: warnings,\n+        desc: \"mass-change the level for lints which produce warnings\",\n+        default: warn\n+    }),\n ];\n \n /*\n@@ -362,10 +371,11 @@ impl Context {\n \n     fn span_lint(&self, lint: lint, span: span, msg: &str) {\n         let (level, src) = match self.curr.find(&(lint as uint)) {\n+            None => { return }\n+            Some(&(warn, src)) => (self.get_level(warnings), src),\n             Some(&pair) => pair,\n-            None => { return; }\n         };\n-        if level == allow { return; }\n+        if level == allow { return }\n \n         let mut note = None;\n         let msg = match src {"}, {"sha": "20705b3d7975061e2cdb297c885e18592f1a49a6", "filename": "src/librustc/rustc.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustc%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustc%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Frustc.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/librustc/rustc.rc"}, {"sha": "d02620229f5bea1cf9e16326c87829c1feeda879", "filename": "src/librustdoc/rustdoc.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustdoc%2Frustdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustdoc%2Frustdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Frustdoc.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/librustdoc/rustdoc.rc"}, {"sha": "57a2a48a0f634d8ab2c2c153d993d36cd86120a8", "filename": "src/librusti/rusti.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrusti%2Frusti.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrusti%2Frusti.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrusti%2Frusti.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/librusti/rusti.rc"}, {"sha": "9242e450e24991e4b4254dd19c9c0fb56c4754fb", "filename": "src/librustpkg/rustpkg.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustpkg%2Frustpkg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibrustpkg%2Frustpkg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustpkg%2Frustpkg.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/librustpkg/rustpkg.rc"}, {"sha": "13c54799fac4d75c1b40941b00d34828523a6171", "filename": "src/libstd/std.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibstd%2Fstd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibstd%2Fstd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fstd.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/libstd/core.rc"}, {"sha": "278600bc0394cf4768f6c6b87bbce7824107ed7e", "filename": "src/libsyntax/syntax.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibsyntax%2Fsyntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Flibsyntax%2Fsyntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fsyntax.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "previous_filename": "src/libsyntax/syntax.rc"}, {"sha": "977abc4dc0d12d7edd9622b9160ef3b533539659", "filename": "src/test/compile-fail/lint-change-warnings.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Ftest%2Fcompile-fail%2Flint-change-warnings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/032dcc57e8876e960837c3a050be2c7570e7eafd/src%2Ftest%2Fcompile-fail%2Flint-change-warnings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-change-warnings.rs?ref=032dcc57e8876e960837c3a050be2c7570e7eafd", "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#[deny(warnings)];\n+\n+fn main() {\n+    while true {} //~ ERROR: infinite\n+}\n+\n+#[allow(warnings)]\n+fn foo() {\n+    while true {}\n+}\n+\n+#[warn(warnings)]\n+fn bar() {\n+    while true {} //~ WARNING: infinite\n+}\n+\n+#[forbid(warnings)]\n+fn baz() {\n+    while true {} //~ ERROR: warnings\n+}"}]}