{"sha": "7eed25b200f3cc211738d65405e9213c33cccc5b", "node_id": "C_kwDOAAsO6NoAKDdlZWQyNWIyMDBmM2NjMjExNzM4ZDY1NDA1ZTkyMTNjMzNjY2NjNWI", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-09-03T05:03:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-03T05:03:09Z"}, "message": "Rollup merge of #101348 - GuillaumeGomez:cleanup-css-theme, r=notriddle\n\nCleanup css theme\n\nFollow-up of https://github.com/rust-lang/rust/pull/100494.\n\nThe change for the border color of the search input in the dark mode was actually a weird case: the search input border was unique, it didn't share the same variable with other items with borders. This weird case being unique to the dark theme, I removed it, hence the modification in the GUI test.\n\nLive demo is [here](https://rustdoc.crud.net/imperio/cleanup-css-theme/std/index.html).\n\ncc `@jsha`\nr? `@notriddle`", "tree": {"sha": "20ce0d3c62e794572acfdb86ed2d4441440786f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/20ce0d3c62e794572acfdb86ed2d4441440786f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7eed25b200f3cc211738d65405e9213c33cccc5b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjEuANCRBK7hj4Ov3rIwAAhhgIAGasHF8t6NaWpFCoLPhLiz4C\n5V3nswRuS8Yhz1qJG1gUU2o8bwihNAgAAhRLt8bTja2545ScYkhnfq+mVLjkbfw1\nbsaaAmN49iebcd4BkDTm4fMxOoZesxyMOKAz8zARlAShSsGBlvZFbHIKZSTLRFyD\nM7tSIt5WG9hWuymnW1B60myiGzGNVrecvj+XYFLL0JzJ9K2ca291o+WobICWLAgf\nTgY4dLhjdZ9T5lrqbxZnPhIEkv2FzHbmY9RKRESg4KNMPechOoXjX0Q+QmkJAO5T\nJYhzI6PxkzhtdCTrDzLYn+SXnw8+zeTrdzN/ItHizVQ0ZHLI60Zmzh4nuMkWsL4=\n=fqu8\n-----END PGP SIGNATURE-----\n", "payload": "tree 20ce0d3c62e794572acfdb86ed2d4441440786f7\nparent 9ed2deb0de96bc78fef2e573ee94b13400749141\nparent 30bdf54827703fe76ec3a6718044a2749bb4704d\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1662181389 +0530\ncommitter GitHub <noreply@github.com> 1662181389 +0530\n\nRollup merge of #101348 - GuillaumeGomez:cleanup-css-theme, r=notriddle\n\nCleanup css theme\n\nFollow-up of https://github.com/rust-lang/rust/pull/100494.\n\nThe change for the border color of the search input in the dark mode was actually a weird case: the search input border was unique, it didn't share the same variable with other items with borders. This weird case being unique to the dark theme, I removed it, hence the modification in the GUI test.\n\nLive demo is [here](https://rustdoc.crud.net/imperio/cleanup-css-theme/std/index.html).\n\ncc `@jsha`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7eed25b200f3cc211738d65405e9213c33cccc5b", "html_url": "https://github.com/rust-lang/rust/commit/7eed25b200f3cc211738d65405e9213c33cccc5b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7eed25b200f3cc211738d65405e9213c33cccc5b/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ed2deb0de96bc78fef2e573ee94b13400749141", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ed2deb0de96bc78fef2e573ee94b13400749141", "html_url": "https://github.com/rust-lang/rust/commit/9ed2deb0de96bc78fef2e573ee94b13400749141"}, {"sha": "30bdf54827703fe76ec3a6718044a2749bb4704d", "url": "https://api.github.com/repos/rust-lang/rust/commits/30bdf54827703fe76ec3a6718044a2749bb4704d", "html_url": "https://github.com/rust-lang/rust/commit/30bdf54827703fe76ec3a6718044a2749bb4704d"}], "stats": {"total": 142, "additions": 49, "deletions": 93}, "files": [{"sha": "fc8fde3c8ecdd89261752379fabc66b84b50a7bf", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -987,6 +987,9 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \twidth: 100%;\n \tbackground-color: var(--button-background-color);\n }\n+.search-input:focus {\n+\tborder-color: var(--search-input-focused-border-color);\n+}\n \n .search-results {\n \tdisplay: none;\n@@ -1167,6 +1170,12 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tfloat: right;\n }\n \n+.rightside:not(a),\n+.out-of-band {\n+\tcolor: var(--right-side-color);\n+}\n+\n+\n .impl-items .srclink, .impl .srclink, .methods .srclink {\n \t/* Override header settings otherwise it's too bold */\n \tfont-weight: normal;\n@@ -1205,6 +1214,7 @@ a.test-arrow:hover {\n \n .code-attribute {\n \tfont-weight: 300;\n+\tcolor: var(--code-attribute-color);\n }\n \n .item-spacer {\n@@ -1478,6 +1488,16 @@ pre.rust {\n \tbackground-color: var(--button-background-color);\n }\n \n+#copy-path {\n+\tcolor: var(--copy-path-button-color);\n+}\n+#copy-path > img {\n+\tfilter: var(--copy-path-img-filter);\n+}\n+#copy-path:hover > img {\n+\tfilter: var(--copy-path-img-hover-filter);\n+}\n+\n @keyframes rotating {\n \tfrom {\n \t\ttransform: rotate(0deg);\n@@ -1601,6 +1621,12 @@ details.rustdoc-toggle > summary::before {\n \topacity: .5;\n }\n \n+details.rustdoc-toggle > summary.hideme > span,\n+details.rustdoc-toggle > summary::before,\n+.more-examples-toggle summary, .more-examples-toggle .hide-more {\n+\tcolor: var(--toggles-color);\n+}\n+\n /* Screen readers see the text version at the end the line.\n \tVisual readers see the icon at the start of the line, but small and transparent. */\n details.rustdoc-toggle > summary::after {"}, {"sha": "be359a8e72d25d250631a2f651dfb343454b9f04", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 7, "deletions": 28, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -16,6 +16,13 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--headings-border-bottom-color: #5c6773;\n \t--border-color: #5c6773;\n \t--button-background-color: #141920;\n+\t--right-side-color: grey;\n+\t--code-attribute-color: #999;\n+\t--toggles-color: #999;\n+\t--search-input-focused-border-color: #5c6773; /* Same as `--border-color`. */\n+\t--copy-path-button-color: #fff;\n+\t--copy-path-img-filter: invert(70%);\n+\t--copy-path-img-hover-filter: invert(100%);\n }\n \n .slider {\n@@ -158,11 +165,6 @@ body.source .example-wrap pre.rust a {\n \tbackground: #333;\n }\n \n-details.rustdoc-toggle > summary.hideme > span,\n-details.rustdoc-toggle > summary::before {\n-\tcolor: #999;\n-}\n-\n details.rustdoc-toggle > summary::before {\n \tfilter: invert(100%);\n }\n@@ -197,11 +199,6 @@ details.rustdoc-toggle > summary::before {\n \tbackground: none;\n }\n \n-.rightside:not(a),\n-.out-of-band {\n-\tcolor: grey;\n-}\n-\n .result-name .primitive > i, .result-name .keyword > i {\n \tcolor: #788797;\n }\n@@ -242,10 +239,6 @@ a.test-arrow:hover {\n \tcolor: #c5c5c5;\n }\n \n-.code-attribute {\n-\tcolor: #999;\n-}\n-\n :target {\n \tbackground: rgba(255, 236, 164, 0.06);\n \tborder-right: 3px solid rgba(255, 180, 76, 0.85);\n@@ -341,7 +334,6 @@ individually rather than as a group) */\n /* FIXME: these rules should be at the bottom of the file but currently must be\n above the `@media (max-width: 700px)` rules due to a bug in the css checker */\n /* see https://github.com/rust-lang/rust/pull/71237#issuecomment-618170143 */\n-.search-input:focus {}\n .content span.attr,.content a.attr,.block a.current.attr,.content span.derive,.content a.derive,\n .block a.current.derive,.content span.macro,.content a.macro,.block a.current.macro {}\n .content span.struct,.content a.struct,.block a.current.struct {}\n@@ -428,16 +420,6 @@ kbd {\n \tfilter: invert(100);\n }\n \n-#copy-path {\n-\tcolor: #fff;\n-}\n-#copy-path > img {\n-\tfilter: invert(70%);\n-}\n-#copy-path:hover > img {\n-\tfilter: invert(100%);\n-}\n-\n #settings-menu > a:hover, #settings-menu > a:focus,\n #help-button > button:hover, #help-button > button:focus {\n \tborder-color: #e0e0e0;\n@@ -471,9 +453,6 @@ kbd {\n \tborder-color: white;\n \tcolor: white;\n }\n-.more-examples-toggle summary, .more-examples-toggle .hide-more {\n-\tcolor: #999;\n-}\n .scraped-example .example-wrap .rust span.highlight {\n \tbackground: rgb(91, 59, 1);\n }"}, {"sha": "f633abe94e5af075b6b14973faadc2b88ab71623", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 7, "deletions": 32, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -11,6 +11,13 @@\n \t--headings-border-bottom-color: #d2d2d2;\n \t--border-color: #e0e0e0;\n \t--button-background-color: #f0f0f0;\n+\t--right-side-color: grey;\n+\t--code-attribute-color: #999;\n+\t--toggles-color: #999;\n+\t--search-input-focused-border-color: #008dfd;\n+\t--copy-path-button-color: #999;\n+\t--copy-path-img-filter: invert(50%);\n+\t--copy-path-img-hover-filter: invert(65%);\n }\n \n .slider {\n@@ -129,18 +136,12 @@ body.source .example-wrap pre.rust a {\n \tbackground: #333;\n }\n \n-details.rustdoc-toggle > summary.hideme > span,\n-details.rustdoc-toggle > summary::before {\n-\tcolor: #999;\n-}\n-\n details.rustdoc-toggle > summary::before {\n \tfilter: invert(100%);\n }\n \n .search-input {\n \tcolor: #111;\n-\tborder-color: #f0f0f0;\n }\n \n #crate-search-div::after {\n@@ -154,22 +155,13 @@ details.rustdoc-toggle > summary::before {\n \tfilter: invert(69%) sepia(60%) saturate(6613%) hue-rotate(184deg) brightness(100%) contrast(91%);\n }\n \n-.search-input:focus {\n-\tborder-color: #008dfd;\n-}\n-\n .stab { background: #314559; }\n \n .stab.portability > code {\n \tcolor: #e6e1cf;\n \tbackground: none;\n }\n \n-.rightside:not(a),\n-.out-of-band {\n-\tcolor: grey;\n-}\n-\n .line-numbers :target { background-color: transparent; }\n \n /* Code highlighting */\n@@ -197,10 +189,6 @@ a.test-arrow:hover{\n \tbackground-color: #4e8bca;\n }\n \n-.code-attribute {\n-\tcolor: #999;\n-}\n-\n :target {\n \tbackground-color: #494a3d;\n \tborder-right: 3px solid #bb7410;\n@@ -301,16 +289,6 @@ kbd {\n \tborder-color: #ffb900;\n }\n \n-#copy-path {\n-\tcolor: #999;\n-}\n-#copy-path > img {\n-\tfilter: invert(50%);\n-}\n-#copy-path:hover > img {\n-\tfilter: invert(65%);\n-}\n-\n .search-results .result-name span.alias {\n \tcolor: #fff;\n }\n@@ -334,9 +312,6 @@ kbd {\n \tborder-color: white;\n \tcolor: white;\n }\n-.more-examples-toggle summary, .more-examples-toggle .hide-more {\n-\tcolor: #999;\n-}\n .scraped-example .example-wrap .rust span.highlight {\n \tbackground: rgb(91, 59, 1);\n }"}, {"sha": "875bb79302560f4b1754ab6a5c78470123abf6cb", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 7, "deletions": 31, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -11,6 +11,13 @@\n \t--headings-border-bottom-color: #ddd;\n \t--border-color: #e0e0e0;\n \t--button-background-color: #fff;\n+\t--right-side-color: grey;\n+\t--code-attribute-color: #999;\n+\t--toggles-color: #999;\n+\t--search-input-focused-border-color: #66afe9;\n+\t--copy-path-button-color: #999;\n+\t--copy-path-img-filter: invert(50%);\n+\t--copy-path-img-hover-filter: invert(35%);\n }\n \n .slider {\n@@ -125,11 +132,6 @@ body.source .example-wrap pre.rust a {\n \tbackground: #eee;\n }\n \n-details.rustdoc-toggle > summary.hideme > span,\n-details.rustdoc-toggle > summary::before {\n-\tcolor: #999;\n-}\n-\n #crate-search-div::after {\n \t/* match border-color; uses https://codepen.io/sosuke/pen/Pjoqqp */\n \tfilter: invert(100%) sepia(0%) saturate(4223%) hue-rotate(289deg) brightness(114%) contrast(76%);\n@@ -141,18 +143,9 @@ details.rustdoc-toggle > summary::before {\n \tfilter: invert(44%) sepia(18%) saturate(23%) hue-rotate(317deg) brightness(96%) contrast(93%);\n }\n \n-.search-input:focus {\n-\tborder-color: #66afe9;\n-}\n-\n .stab { background: #FFF5D6; border-color: #FFC600; }\n .stab.portability > code { background: none; }\n \n-.rightside:not(a),\n-.out-of-band {\n-\tcolor: grey;\n-}\n-\n .line-numbers :target { background-color: transparent; }\n \n /* Code highlighting */\n@@ -182,10 +175,6 @@ a.test-arrow:hover{\n \tbackground-color: #4e8bca;\n }\n \n-.code-attribute {\n-\tcolor: #999;\n-}\n-\n :target {\n \tbackground: #FDFFD3;\n \tborder-right: 3px solid #AD7C37;\n@@ -281,16 +270,6 @@ kbd {\n \tborder-color: #717171;\n }\n \n-#copy-path {\n-\tcolor: #999;\n-}\n-#copy-path > img {\n-\tfilter: invert(50%);\n-}\n-#copy-path:hover > img {\n-\tfilter: invert(35%);\n-}\n-\n .search-results .result-name span.alias {\n \tcolor: #000;\n }\n@@ -313,9 +292,6 @@ kbd {\n \tborder-color: black;\n \tcolor: black;\n }\n-.more-examples-toggle summary, .more-examples-toggle .hide-more {\n-\tcolor: #999;\n-}\n .scraped-example .example-wrap .rust span.highlight {\n \tbackground: #fcffd6;\n }"}, {"sha": "1c64974e9162710a3aad4b4790c89a01aa680f6c", "filename": "src/test/rustdoc-gui/search-form-elements.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-form-elements.goml?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -92,7 +92,7 @@ reload:\n assert-css: (\n     \".search-input\",\n     {\n-        \"border-color\": \"rgb(240, 240, 240)\",\n+        \"border-color\": \"rgb(224, 224, 224)\",\n         \"background-color\": \"rgb(240, 240, 240)\",\n         \"color\": \"rgb(17, 17, 17)\",\n     },"}, {"sha": "fd61c4f43d18139e9b5449cde0f10fec82d9ac34", "filename": "src/test/rustdoc-gui/search-input.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Ftest%2Frustdoc-gui%2Fsearch-input.goml", "raw_url": "https://github.com/rust-lang/rust/raw/7eed25b200f3cc211738d65405e9213c33cccc5b/src%2Ftest%2Frustdoc-gui%2Fsearch-input.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-input.goml?ref=7eed25b200f3cc211738d65405e9213c33cccc5b", "patch": "@@ -3,7 +3,7 @@ goto: file://|DOC_PATH|/test_docs/index.html\n local-storage: {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": \"dark\"}\n reload:\n \n-assert-css: (\".search-input\", {\"border-color\": \"rgb(240, 240, 240)\"})\n+assert-css: (\".search-input\", {\"border-color\": \"rgb(224, 224, 224)\"})\n click: \".search-input\"\n assert-css: (\".search-input\", {\"border-color\": \"rgb(0, 141, 253)\"})\n "}]}