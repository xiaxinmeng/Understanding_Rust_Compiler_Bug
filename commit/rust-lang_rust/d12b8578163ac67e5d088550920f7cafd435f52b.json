{"sha": "d12b8578163ac67e5d088550920f7cafd435f52b", "node_id": "C_kwDOAAsO6NoAKGQxMmI4NTc4MTYzYWM2N2U1ZDA4ODU1MDkyMGY3Y2FmZDQzNWY1MmI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-11T00:58:22Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-11T00:58:22Z"}, "message": "Auto merge of #94243 - compiler-errors:compiler-flags-typo, r=Mark-Simulacrum\n\n`s/compiler-flags/compile-flags` in compiletest\n\nAlso make compiletest panic so this doesn't happen in the future! I literally always forget which it's called, so I wanted to make my life easier in the future.\n\nAlso open to the possibility of parsing both.", "tree": {"sha": "3ba6c3893a356c2bca32a39046ae613539d5a270", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ba6c3893a356c2bca32a39046ae613539d5a270"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d12b8578163ac67e5d088550920f7cafd435f52b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d12b8578163ac67e5d088550920f7cafd435f52b", "html_url": "https://github.com/rust-lang/rust/commit/d12b8578163ac67e5d088550920f7cafd435f52b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d12b8578163ac67e5d088550920f7cafd435f52b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f7fb6413d6d6c0c929b223e478e44c3db991b03", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f7fb6413d6d6c0c929b223e478e44c3db991b03", "html_url": "https://github.com/rust-lang/rust/commit/1f7fb6413d6d6c0c929b223e478e44c3db991b03"}, {"sha": "52dd0b6801c571bd9c294fe37436cd1a80b4da80", "url": "https://api.github.com/repos/rust-lang/rust/commits/52dd0b6801c571bd9c294fe37436cd1a80b4da80", "html_url": "https://github.com/rust-lang/rust/commit/52dd0b6801c571bd9c294fe37436cd1a80b4da80"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "f7513b6b8f447e3bfad0fe0fc1820459dbccb34b", "filename": "src/test/ui/ptr_ops/issue-80309-safe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309-safe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309-safe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309-safe.rs?ref=d12b8578163ac67e5d088550920f7cafd435f52b", "patch": "@@ -1,6 +1,6 @@\n // run-pass\n // min-llvm-version: 13.0\n-// compiler-flags: -O\n+// compile-flags: -O\n \n // Regression test for issue #80309\n "}, {"sha": "5c0f4b76ceb3a9871c7792b3c4c428595aa14849", "filename": "src/test/ui/ptr_ops/issue-80309.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fptr_ops%2Fissue-80309.rs?ref=d12b8578163ac67e5d088550920f7cafd435f52b", "patch": "@@ -1,6 +1,6 @@\n // run-pass\n // min-llvm-version: 13.0\n-// compiler-flags: -O\n+// compile-flags: -O\n \n // Regression test for issue #80309\n "}, {"sha": "e8b261545499f1b3189dac58e35e341b158f1955", "filename": "src/test/ui/rfc-2632-const-trait-impl/without-tilde.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fwithout-tilde.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fwithout-tilde.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fwithout-tilde.rs?ref=d12b8578163ac67e5d088550920f7cafd435f52b", "patch": "@@ -1,4 +1,4 @@\n-// compiler-flags: -Z parse-only\n+// compile-flags: -Z parse-only\n \n #![feature(const_trait_impl)]\n "}, {"sha": "858a576dcb4745a1ac37b8fbead9445259ef244a", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d12b8578163ac67e5d088550920f7cafd435f52b/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=d12b8578163ac67e5d088550920f7cafd435f52b", "patch": "@@ -189,6 +189,8 @@ mod directives {\n     pub const STDERR_PER_BITWIDTH: &'static str = \"stderr-per-bitwidth\";\n     pub const INCREMENTAL: &'static str = \"incremental\";\n     pub const KNOWN_BUG: &'static str = \"known-bug\";\n+    // This isn't a real directive, just one that is probably mistyped often\n+    pub const INCORRECT_COMPILER_FLAGS: &'static str = \"compiler-flags\";\n }\n \n impl TestProps {\n@@ -282,6 +284,9 @@ impl TestProps {\n                 if let Some(flags) = config.parse_name_value_directive(ln, COMPILE_FLAGS) {\n                     self.compile_flags.extend(flags.split_whitespace().map(|s| s.to_owned()));\n                 }\n+                if config.parse_name_value_directive(ln, INCORRECT_COMPILER_FLAGS).is_some() {\n+                    panic!(\"`compiler-flags` directive should be spelled `compile-flags`\");\n+                }\n \n                 if let Some(edition) = config.parse_edition(ln) {\n                     self.compile_flags.push(format!(\"--edition={}\", edition));"}]}