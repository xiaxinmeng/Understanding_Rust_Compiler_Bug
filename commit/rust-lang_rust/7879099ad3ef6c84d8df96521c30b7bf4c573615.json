{"sha": "7879099ad3ef6c84d8df96521c30b7bf4c573615", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc4NzkwOTlhZDNlZjZjODRkOGRmOTY1MjFjMzBiN2JmNGM1NzM2MTU=", "commit": {"author": {"name": "Reese Williams", "email": "reese@reesew.io", "date": "2021-02-14T18:14:11Z"}, "committer": {"name": "Reese Williams", "email": "reese@reesew.io", "date": "2021-02-14T18:15:37Z"}, "message": "Clarify error message and remove pretty printing in help suggestions.", "tree": {"sha": "7e0f91902509509f34936b59decac7ea70928d87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e0f91902509509f34936b59decac7ea70928d87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7879099ad3ef6c84d8df96521c30b7bf4c573615", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7879099ad3ef6c84d8df96521c30b7bf4c573615", "html_url": "https://github.com/rust-lang/rust/commit/7879099ad3ef6c84d8df96521c30b7bf4c573615", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7879099ad3ef6c84d8df96521c30b7bf4c573615/comments", "author": {"login": "reese", "id": 26661872, "node_id": "MDQ6VXNlcjI2NjYxODcy", "avatar_url": "https://avatars.githubusercontent.com/u/26661872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reese", "html_url": "https://github.com/reese", "followers_url": "https://api.github.com/users/reese/followers", "following_url": "https://api.github.com/users/reese/following{/other_user}", "gists_url": "https://api.github.com/users/reese/gists{/gist_id}", "starred_url": "https://api.github.com/users/reese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reese/subscriptions", "organizations_url": "https://api.github.com/users/reese/orgs", "repos_url": "https://api.github.com/users/reese/repos", "events_url": "https://api.github.com/users/reese/events{/privacy}", "received_events_url": "https://api.github.com/users/reese/received_events", "type": "User", "site_admin": false}, "committer": {"login": "reese", "id": 26661872, "node_id": "MDQ6VXNlcjI2NjYxODcy", "avatar_url": "https://avatars.githubusercontent.com/u/26661872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reese", "html_url": "https://github.com/reese", "followers_url": "https://api.github.com/users/reese/followers", "following_url": "https://api.github.com/users/reese/following{/other_user}", "gists_url": "https://api.github.com/users/reese/gists{/gist_id}", "starred_url": "https://api.github.com/users/reese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reese/subscriptions", "organizations_url": "https://api.github.com/users/reese/orgs", "repos_url": "https://api.github.com/users/reese/repos", "events_url": "https://api.github.com/users/reese/events{/privacy}", "received_events_url": "https://api.github.com/users/reese/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8a83c8f64f717f7cf569f589b42c6535591f8854", "url": "https://api.github.com/repos/rust-lang/rust/commits/8a83c8f64f717f7cf569f589b42c6535591f8854", "html_url": "https://github.com/rust-lang/rust/commit/8a83c8f64f717f7cf569f589b42c6535591f8854"}], "stats": {"total": 42, "additions": 25, "deletions": 17}, "files": [{"sha": "cfcd0d673d01545928809c6ba66bfb049168e044", "filename": "compiler/rustc_typeck/src/check/pat.rs", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -1253,17 +1253,13 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     self.tcx.sess,\n                     pat.span,\n                     E0769,\n-                    \"tuple variant `{}` uses a bare index in a struct pattern\",\n+                    \"tuple variant `{}` written as struct variant\",\n                     path\n                 );\n                 err.span_suggestion(\n-                    pat.span,\n+                    qpath.span().shrink_to_hi().until(pat.span),\n                     \"use the tuple variant pattern syntax instead\",\n-                    format!(\n-                        \"{}({})\",\n-                        path,\n-                        self.get_suggested_tuple_struct_pattern(fields, variant)\n-                    ),\n+                    format!(\"({})\", self.get_suggested_tuple_struct_pattern(fields, variant)),\n                     Applicability::MaybeIncorrect,\n                 );\n                 return Some(err);\n@@ -1421,9 +1417,9 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 )\n             };\n             err.span_suggestion(\n-                pat.span,\n+                qpath.span().shrink_to_hi().until(pat.span),\n                 \"use the tuple variant pattern syntax instead\",\n-                format!(\"{}({})\", path, sugg),\n+                format!(\"({})\", sugg),\n                 appl,\n             );\n             return Some(err);"}, {"sha": "4f9618232313f579fc770f8c0d25e1dfff1a4226", "filename": "src/test/ui/issues/issue-17800.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -2,7 +2,9 @@ error[E0769]: tuple variant `MyOption::MySome` written as struct variant\n   --> $DIR/issue-17800.rs:8:9\n    |\n LL |         MyOption::MySome { x: 42 } => (),\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `MyOption::MySome(42)`\n+   |         ----------------^^^^^^^^^^\n+   |         |\n+   |         help: use the tuple variant pattern syntax instead: `(42)`\n \n error: aborting due to previous error\n "}, {"sha": "81d208e4bc3f338b76c6d64fb456302df0a5354f", "filename": "src/test/ui/missing/missing-fields-in-struct-pattern.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -2,7 +2,9 @@ error[E0769]: tuple variant `S` written as struct variant\n   --> $DIR/missing-fields-in-struct-pattern.rs:4:12\n    |\n LL |     if let S { a, b, c, d } = S(1, 2, 3, 4) {\n-   |            ^^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `S(a, b, c, d)`\n+   |            -^^^^^^^^^^^^^^^\n+   |            |\n+   |            help: use the tuple variant pattern syntax instead: `(a, b, c, d)`\n \n error: aborting due to previous error\n "}, {"sha": "86086cf97eccea582494205e90fb7bedcf5eeb87", "filename": "src/test/ui/parser/recover-from-bad-variant.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -22,7 +22,9 @@ error[E0769]: tuple variant `Enum::Bar` written as struct variant\n   --> $DIR/recover-from-bad-variant.rs:12:9\n    |\n LL |         Enum::Bar { a, b } => {}\n-   |         ^^^^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `Enum::Bar(a, b)`\n+   |         ---------^^^^^^^^^\n+   |         |\n+   |         help: use the tuple variant pattern syntax instead: `(a, b)`\n \n error: aborting due to 3 previous errors\n "}, {"sha": "7bd54af1dbee53469b0d6d7c93a7dee7cbc61e3a", "filename": "src/test/ui/structs/struct-tuple-field-names.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.rs?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -6,7 +6,7 @@ fn main() {\n     let x = E::S(1, 2.2);\n     match x {\n         E::S { 0, 1 } => {}\n-        //~^ ERROR tuple variant `E::S` uses a bare index in a struct pattern [E0769]\n+        //~^ ERROR tuple variant `E::S` written as struct variant [E0769]\n     }\n     let y = S(1, 2.2);\n     match y {"}, {"sha": "80c6187cbbef4caa0f0be87286c30518955e061f", "filename": "src/test/ui/structs/struct-tuple-field-names.stderr", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -1,14 +1,18 @@\n-error[E0769]: tuple variant `E::S` uses a bare index in a struct pattern\n+error[E0769]: tuple variant `E::S` written as struct variant\n   --> $DIR/struct-tuple-field-names.rs:8:9\n    |\n LL |         E::S { 0, 1 } => {}\n-   |         ^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `E::S(_, _)`\n+   |         ----^^^^^^^^^\n+   |         |\n+   |         help: use the tuple variant pattern syntax instead: `(_, _)`\n \n error[E0769]: tuple variant `S` written as struct variant\n   --> $DIR/struct-tuple-field-names.rs:13:9\n    |\n LL |         S { } => {}\n-   |         ^^^^^ help: use the tuple variant pattern syntax instead: `S(_, _)`\n+   |         -^^^^\n+   |         |\n+   |         help: use the tuple variant pattern syntax instead: `(_, _)`\n \n error: aborting due to 2 previous errors\n "}, {"sha": "78c14d37518c0d24020eea74a7a95b027d81ae95", "filename": "src/test/ui/type/type-check/issue-41314.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7879099ad3ef6c84d8df96521c30b7bf4c573615/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr?ref=7879099ad3ef6c84d8df96521c30b7bf4c573615", "patch": "@@ -2,7 +2,9 @@ error[E0769]: tuple variant `X::Y` written as struct variant\n   --> $DIR/issue-41314.rs:7:9\n    |\n LL |         X::Y { number } => {}\n-   |         ^^^^^^^^^^^^^^^ help: use the tuple variant pattern syntax instead: `X::Y(number)`\n+   |         ----^^^^^^^^^^^\n+   |         |\n+   |         help: use the tuple variant pattern syntax instead: `(number)`\n \n error: aborting due to previous error\n "}]}