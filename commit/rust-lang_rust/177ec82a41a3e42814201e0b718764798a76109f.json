{"sha": "177ec82a41a3e42814201e0b718764798a76109f", "node_id": "C_kwDOAAsO6NoAKDE3N2VjODJhNDFhM2U0MjgxNDIwMWUwYjcxODc2NDc5OGE3NjEwOWY", "commit": {"author": {"name": "OleStrohm", "email": "strohm99@gmail.com", "date": "2022-09-12T20:02:30Z"}, "committer": {"name": "OleStrohm", "email": "strohm99@gmail.com", "date": "2022-09-12T20:02:30Z"}, "message": "Rebased", "tree": {"sha": "2f1f389b78bb1309007ce12d0811f27e9a227b5b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f1f389b78bb1309007ce12d0811f27e9a227b5b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/177ec82a41a3e42814201e0b718764798a76109f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/177ec82a41a3e42814201e0b718764798a76109f", "html_url": "https://github.com/rust-lang/rust/commit/177ec82a41a3e42814201e0b718764798a76109f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/177ec82a41a3e42814201e0b718764798a76109f/comments", "author": {"login": "OleStrohm", "id": 6892524, "node_id": "MDQ6VXNlcjY4OTI1MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6892524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OleStrohm", "html_url": "https://github.com/OleStrohm", "followers_url": "https://api.github.com/users/OleStrohm/followers", "following_url": "https://api.github.com/users/OleStrohm/following{/other_user}", "gists_url": "https://api.github.com/users/OleStrohm/gists{/gist_id}", "starred_url": "https://api.github.com/users/OleStrohm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OleStrohm/subscriptions", "organizations_url": "https://api.github.com/users/OleStrohm/orgs", "repos_url": "https://api.github.com/users/OleStrohm/repos", "events_url": "https://api.github.com/users/OleStrohm/events{/privacy}", "received_events_url": "https://api.github.com/users/OleStrohm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "OleStrohm", "id": 6892524, "node_id": "MDQ6VXNlcjY4OTI1MjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6892524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OleStrohm", "html_url": "https://github.com/OleStrohm", "followers_url": "https://api.github.com/users/OleStrohm/followers", "following_url": "https://api.github.com/users/OleStrohm/following{/other_user}", "gists_url": "https://api.github.com/users/OleStrohm/gists{/gist_id}", "starred_url": "https://api.github.com/users/OleStrohm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OleStrohm/subscriptions", "organizations_url": "https://api.github.com/users/OleStrohm/orgs", "repos_url": "https://api.github.com/users/OleStrohm/repos", "events_url": "https://api.github.com/users/OleStrohm/events{/privacy}", "received_events_url": "https://api.github.com/users/OleStrohm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5313bd19844d6e485c16b06b60a12dc36449688c", "url": "https://api.github.com/repos/rust-lang/rust/commits/5313bd19844d6e485c16b06b60a12dc36449688c", "html_url": "https://github.com/rust-lang/rust/commit/5313bd19844d6e485c16b06b60a12dc36449688c"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "9121fb50fd6302c57313fe18068ad62d471d039e", "filename": "crates/hir-def/src/body/pretty.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fhir-def%2Fsrc%2Fbody%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fhir-def%2Fsrc%2Fbody%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir-def%2Fsrc%2Fbody%2Fpretty.rs?ref=177ec82a41a3e42814201e0b718764798a76109f", "patch": "@@ -2,6 +2,8 @@\n \n use std::fmt::{self, Write};\n \n+use syntax::ast::HasName;\n+\n use crate::{\n     expr::{Array, BindingAnnotation, Literal, Statement},\n     pretty::{print_generic_args, print_path, print_type_ref},\n@@ -32,6 +34,16 @@ pub(super) fn print_body_hir(db: &dyn DefDatabase, body: &Body, owner: DefWithBo\n             };\n             format!(\"const {} = \", name)\n         }\n+        DefWithBodyId::VariantId(it) => {\n+            needs_semi = false;\n+            let src = it.parent.child_source(db);\n+            let variant = &src.value[it.local_id];\n+            let name = match &variant.name() {\n+                Some(name) => name.to_string(),\n+                None => \"_\".to_string(),\n+            };\n+            format!(\"{}\", name)\n+        }\n     };\n \n     let mut p = Printer { body, buf: header, indent_level: 0, needs_indent: false };"}, {"sha": "7d32aef8eb99d3eb661b89bde7862abd05438937", "filename": "crates/hir/src/lib.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fhir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fhir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Flib.rs?ref=177ec82a41a3e42814201e0b718764798a76109f", "patch": "@@ -964,6 +964,12 @@ impl HasVisibility for Enum {\n     }\n }\n \n+impl From<&Variant> for DefWithBodyId {\n+    fn from(&v: &Variant) -> Self {\n+        DefWithBodyId::VariantId(v.into())\n+    }\n+}\n+\n #[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]\n pub struct Variant {\n     pub(crate) parent: Enum,\n@@ -1179,6 +1185,7 @@ impl DefWithBody {\n             DefWithBody::Function(it) => it.id.into(),\n             DefWithBody::Static(it) => it.id.into(),\n             DefWithBody::Const(it) => it.id.into(),\n+            DefWithBody::Variant(it) => it.into(),\n         }\n     }\n "}, {"sha": "8442e101b6f3c7ef9b3457cd6ded429fd5888c25", "filename": "crates/ide/src/hover/render.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fide%2Fsrc%2Fhover%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/177ec82a41a3e42814201e0b718764798a76109f/crates%2Fide%2Fsrc%2Fhover%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fhover%2Frender.rs?ref=177ec82a41a3e42814201e0b718764798a76109f", "patch": "@@ -3,7 +3,8 @@ use std::fmt::Display;\n \n use either::Either;\n use hir::{\n-    db::HirDatabase, AsAssocItem, AttributeTemplate, HasAttrs, HasSource, HirDisplay, Semantics, StructKind, TypeInfo,\n+    db::HirDatabase, AsAssocItem, AttributeTemplate, HasAttrs, HasSource, HirDisplay, Semantics,\n+    StructKind, TypeInfo,\n };\n use ide_db::{\n     base_db::SourceDatabase,"}]}