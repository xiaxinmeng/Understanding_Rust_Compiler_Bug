{"sha": "77be56b691c9a2d9739d9b4e360cae148b0e0972", "node_id": "C_kwDOAAsO6NoAKDc3YmU1NmI2OTFjOWEyZDk3MzlkOWI0ZTM2MGNhZTE0OGIwZTA5NzI", "commit": {"author": {"name": "Weihang Lo", "email": "me@weihanglo.tw", "date": "2023-05-16T12:57:36Z"}, "committer": {"name": "Weihang Lo", "email": "me@weihanglo.tw", "date": "2023-05-16T12:57:36Z"}, "message": "fix(analysis-stats): divided by zero error", "tree": {"sha": "f1eb168fbeee65f5155712645ae0491597c955a4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f1eb168fbeee65f5155712645ae0491597c955a4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77be56b691c9a2d9739d9b4e360cae148b0e0972", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEfYTqB0fBJAwqFtKm19vxiYJegucFAmRjfcAACgkQ19vxiYJe\nguchGA//QaDmRAcQ64uroU2z0M80b6pmcBI3eomK7Af+9ZZs7JNaySZi5K/gIl9R\nuJslLp492jIrSlQVl2E5N5WLaPV4egt1pLHCz6sP8JhvyzPsASia5tVpM7oWuQJX\nVu8OrtXdwygOBcLQrNNrKTw78RYM4Kp/SJnqM9sgQlz0chBw0Gw2vPeabCzZdcW6\nXeYeKJu4XWgdyeNzoilksYyIIHRd7l7ZmcxS0/lfEhootoL4bTSuUMbzzKWHEyLL\nxuN9pPnH+J6T0oJfj4ypnDEuC/p7MlTEZEPvbWv9bULYSc+ogI14XcGuw2MV3wkx\naPnh3/0nk4p14gbJcpTGzGUtBZJZbw+GggFbGehUKbbSzU9Bz5AQFcRoa4MzdwVy\nbElJlHrvXNgjNjDqvC7hLR5EwRgtQY+BdW+5s12j543lOU6iSvYOdk9cCyg3+xsS\njzyyziZm9esYnnTI5gkte6b5Jy5wk/vxm1BMCFk0gKnOAC4E0QET6GGE8To8r9Jp\n7yGo/l0epaO+9By6fHfdBmzipmITgkygILxpPfid7U1eV1mWeCbSZ570ypj2+aRc\np6NopZLzWeKPavlk3yZ+rjOKZ//H0E7i3f8yLlx1ofs5AgiXYfga06FHCGBYjCt4\nW6Bhc17nWlclwU3rVkVG6V0yVOXJDoohpDJ4yYhV3DVGTN/YVwg=\n=rvc/\n-----END PGP SIGNATURE-----", "payload": "tree f1eb168fbeee65f5155712645ae0491597c955a4\nparent 2f8cd66fb4c98026d2bdbdf17270e3472e1ca42a\nauthor Weihang Lo <me@weihanglo.tw> 1684241856 +0100\ncommitter Weihang Lo <me@weihanglo.tw> 1684241856 +0100\n\nfix(analysis-stats): divided by zero error\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77be56b691c9a2d9739d9b4e360cae148b0e0972", "html_url": "https://github.com/rust-lang/rust/commit/77be56b691c9a2d9739d9b4e360cae148b0e0972", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77be56b691c9a2d9739d9b4e360cae148b0e0972/comments", "author": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "weihanglo", "id": 14314532, "node_id": "MDQ6VXNlcjE0MzE0NTMy", "avatar_url": "https://avatars.githubusercontent.com/u/14314532?v=4", "gravatar_id": "", "url": "https://api.github.com/users/weihanglo", "html_url": "https://github.com/weihanglo", "followers_url": "https://api.github.com/users/weihanglo/followers", "following_url": "https://api.github.com/users/weihanglo/following{/other_user}", "gists_url": "https://api.github.com/users/weihanglo/gists{/gist_id}", "starred_url": "https://api.github.com/users/weihanglo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/weihanglo/subscriptions", "organizations_url": "https://api.github.com/users/weihanglo/orgs", "repos_url": "https://api.github.com/users/weihanglo/repos", "events_url": "https://api.github.com/users/weihanglo/events{/privacy}", "received_events_url": "https://api.github.com/users/weihanglo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f8cd66fb4c98026d2bdbdf17270e3472e1ca42a", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f8cd66fb4c98026d2bdbdf17270e3472e1ca42a", "html_url": "https://github.com/rust-lang/rust/commit/2f8cd66fb4c98026d2bdbdf17270e3472e1ca42a"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "f7f49188662a7fa0345fc6f96aad0e9e1f653d77", "filename": "crates/rust-analyzer/src/cli/analysis_stats.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/77be56b691c9a2d9739d9b4e360cae148b0e0972/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77be56b691c9a2d9739d9b4e360cae148b0e0972/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs?ref=77be56b691c9a2d9739d9b4e360cae148b0e0972", "patch": "@@ -227,7 +227,7 @@ impl flags::AnalysisStats {\n             fail += 1;\n         }\n         eprintln!(\"{:<20} {}\", \"Data layouts:\", sw.elapsed());\n-        eprintln!(\"Failed data layouts: {fail} ({}%)\", fail * 100 / all);\n+        eprintln!(\"Failed data layouts: {fail} ({}%)\", percentage(fail, all));\n         report_metric(\"failed data layouts\", fail, \"#\");\n     }\n \n@@ -254,7 +254,7 @@ impl flags::AnalysisStats {\n             fail += 1;\n         }\n         eprintln!(\"{:<20} {}\", \"Const evaluation:\", sw.elapsed());\n-        eprintln!(\"Failed const evals: {fail} ({}%)\", fail * 100 / all);\n+        eprintln!(\"Failed const evals: {fail} ({}%)\", percentage(fail, all));\n         report_metric(\"failed const evals\", fail, \"#\");\n     }\n \n@@ -280,7 +280,7 @@ impl flags::AnalysisStats {\n             fail += 1;\n         }\n         eprintln!(\"{:<20} {}\", \"MIR lowering:\", sw.elapsed());\n-        eprintln!(\"Mir failed bodies: {fail} ({}%)\", fail * 100 / all);\n+        eprintln!(\"Mir failed bodies: {fail} ({}%)\", percentage(fail, all));\n         report_metric(\"mir failed bodies\", fail, \"#\");\n     }\n "}]}