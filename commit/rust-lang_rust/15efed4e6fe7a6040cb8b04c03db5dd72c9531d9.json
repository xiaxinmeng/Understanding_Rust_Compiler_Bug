{"sha": "15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1ZWZlZDRlNmZlN2E2MDQwY2I4YjA0YzAzZGI1ZGQ3MmM5NTMxZDk=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-09-25T00:29:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-25T00:29:22Z"}, "message": "Rollup merge of #75438 - Cldfire:rustdoc/use-adaptive-svg-favicon, r=GuillaumeGomez\n\nUse adaptive SVG favicon for rustdoc like other rust sites\n\nUse the theme-adaptive SVG favicon that was recently introduced [for the Rust site](https://github.com/rust-lang/www.rust-lang.org/pull/1185) (and others).\n\n(This PR is simply copied from the PR linked above, so see that for rationale.)\n\nCloses #72165.\n\nBefore, Firefox on Linux:\n\n![image](https://user-images.githubusercontent.com/13814214/89971811-34c0a900-dc2a-11ea-9aa6-a4aa9d66bed4.png)\n\nAfter, Firefox on Linux (`prefers-color-scheme` set to `dark` by setting `ui.systemUsesDarkTheme` to a number value of `1` in `about:config`):\n\n![image](https://user-images.githubusercontent.com/13814214/89971842-515ce100-dc2a-11ea-92e8-c374aaaf6031.png)", "tree": {"sha": "59a03e56b11117482e8cf08e89989d8b61a46893", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59a03e56b11117482e8cf08e89989d8b61a46893"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfbTnjCRBK7hj4Ov3rIwAAdHIIAJYFhZFCe2aT4rNVH+86gOth\nwHWJa/vq76Ist6nwLEdBXIvVjQiMHxfGxo68eJiibSKd7eLk7YmvKWNkNvMkfrlg\nm9FntbTXcp6SDZiHv3uXRmWW3NTscYesD+lJruGgAUn3Jr6f4IQggWdhFvbe2a71\nZiXQntaCB/2bkm30wbIKjV08t/uRcr6eU3ewbltUjToe1NRnbegVQf1q35lfAvrr\nlUb4N5v8vmKJS2oBkpQdQxVbS2t7yH/D4J8kPlhdnHxTbjqi/sHB6dJRUiEchz7t\nxqCSDs7QnadYJeP6IIOQ5n+dG14l6Sq93V+/GZg0ETJD1SxVqt5PQjV6jbh6vVE=\n=rD5X\n-----END PGP SIGNATURE-----\n", "payload": "tree 59a03e56b11117482e8cf08e89989d8b61a46893\nparent e599b53e67ddd197a09a3d8720eed872df481aa0\nparent 085679c8414fbcd0a832d57134eb6832ea7a1020\nauthor Jonas Schievink <jonasschievink@gmail.com> 1600993762 +0200\ncommitter GitHub <noreply@github.com> 1600993762 +0200\n\nRollup merge of #75438 - Cldfire:rustdoc/use-adaptive-svg-favicon, r=GuillaumeGomez\n\nUse adaptive SVG favicon for rustdoc like other rust sites\n\nUse the theme-adaptive SVG favicon that was recently introduced [for the Rust site](https://github.com/rust-lang/www.rust-lang.org/pull/1185) (and others).\n\n(This PR is simply copied from the PR linked above, so see that for rationale.)\n\nCloses #72165.\n\nBefore, Firefox on Linux:\n\n![image](https://user-images.githubusercontent.com/13814214/89971811-34c0a900-dc2a-11ea-9aa6-a4aa9d66bed4.png)\n\nAfter, Firefox on Linux (`prefers-color-scheme` set to `dark` by setting `ui.systemUsesDarkTheme` to a number value of `1` in `about:config`):\n\n![image](https://user-images.githubusercontent.com/13814214/89971842-515ce100-dc2a-11ea-92e8-c374aaaf6031.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "html_url": "https://github.com/rust-lang/rust/commit/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e599b53e67ddd197a09a3d8720eed872df481aa0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e599b53e67ddd197a09a3d8720eed872df481aa0", "html_url": "https://github.com/rust-lang/rust/commit/e599b53e67ddd197a09a3d8720eed872df481aa0"}, {"sha": "085679c8414fbcd0a832d57134eb6832ea7a1020", "url": "https://api.github.com/repos/rust-lang/rust/commits/085679c8414fbcd0a832d57134eb6832ea7a1020", "html_url": "https://github.com/rust-lang/rust/commit/085679c8414fbcd0a832d57134eb6832ea7a1020"}], "stats": {"total": 38, "additions": 34, "deletions": 4}, "files": [{"sha": "7239b3c5ba2f6aa38e4c1700066d56b08289833c", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "patch": "@@ -158,7 +158,9 @@ pub fn render<T: Print, S: Print>(\n         keywords = page.keywords,\n         favicon = if layout.favicon.is_empty() {\n             format!(\n-                r#\"<link rel=\"shortcut icon\" href=\"{static_root_path}favicon{suffix}.ico\">\"#,\n+                r##\"<link rel=\"icon\" type=\"image/svg+xml\" href=\"{static_root_path}favicon{suffix}.svg\">\n+<link rel=\"alternate icon\" type=\"image/png\" href=\"{static_root_path}favicon-16x16{suffix}.png\">\n+<link rel=\"alternate icon\" type=\"image/png\" href=\"{static_root_path}favicon-32x32{suffix}.png\">\"##,\n                 static_root_path = static_root_path,\n                 suffix = page.resource_suffix\n             )"}, {"sha": "8b5ba7a239c5f75009de02706539db9a8f7021e3", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "patch": "@@ -754,7 +754,9 @@ fn write_shared(\n         write(cx.path(\"rust-logo.png\"), static_files::RUST_LOGO)?;\n     }\n     if (*cx.shared).layout.favicon.is_empty() {\n-        write(cx.path(\"favicon.ico\"), static_files::RUST_FAVICON)?;\n+        write(cx.path(\"favicon.svg\"), static_files::RUST_FAVICON_SVG)?;\n+        write(cx.path(\"favicon-16x16.png\"), static_files::RUST_FAVICON_PNG_16)?;\n+        write(cx.path(\"favicon-32x32.png\"), static_files::RUST_FAVICON_PNG_32)?;\n     }\n     write(cx.path(\"brush.svg\"), static_files::BRUSH_SVG)?;\n     write(cx.path(\"wheel.svg\"), static_files::WHEEL_SVG)?;"}, {"sha": "7cfe6c13550d31bc31355616bbb9cb77fd1b25ef", "filename": "src/librustdoc/html/static/favicon-16x16.png", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-16x16.png", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-16x16.png", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-16x16.png?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9"}, {"sha": "5109c1de8bea744180448b347fb44ddef23b90f4", "filename": "src/librustdoc/html/static/favicon-32x32.png", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-32x32.png", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-32x32.png", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon-32x32.png?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9"}, {"sha": "b8ad23769ac8d06eb5973bfb3d2acbf385240f98", "filename": "src/librustdoc/html/static/favicon.ico", "status": "removed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e599b53e67ddd197a09a3d8720eed872df481aa0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico", "raw_url": "https://github.com/rust-lang/rust/raw/e599b53e67ddd197a09a3d8720eed872df481aa0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.ico?ref=e599b53e67ddd197a09a3d8720eed872df481aa0"}, {"sha": "8b34b511989e1d9f1a5f741b75d3b41698048455", "filename": "src/librustdoc/html/static/favicon.svg", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.svg", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.svg", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Ffavicon.svg?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "patch": "@@ -0,0 +1,24 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"><svg width=\"100%\" height=\"100%\" viewBox=\"0 0 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xml:space=\"preserve\" xmlns:serif=\"http://www.serif.com/\" style=\"fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;\">\n+<defs>\n+  <style type=\"text/css\"><![CDATA[\n+    #logo {\n+      fill-rule: nonzero;\n+    }\n+    #logo-teeth {\n+      stroke: #000000;\n+      stroke-width: 0.92px;\n+    }\n+    @media (prefers-color-scheme: dark) {\n+      #logo {\n+        fill: #FFFFFF;\n+        fill-rule: nonzero;\n+      }\n+      #logo-teeth {\n+        fill: #FFFFFF;\n+        stroke: #FFFFFF;\n+        stroke-width: 0.92px;\n+      }\n+    }\n+  ]]></style>\n+</defs>\n+<path id=\"logo\" d=\"M15.993,1.54c-7.972,0 -14.461,6.492 -14.461,14.462c0,7.969 6.492,14.461 14.461,14.461c7.97,0 14.462,-6.492 14.462,-14.461c0,-7.97 -6.492,-14.462 -14.462,-14.462Zm-0.021,1.285c0.511,0.013 0.924,0.439 0.924,0.951c0,0.522 -0.43,0.952 -0.952,0.952c-0.522,0 -0.951,-0.43 -0.951,-0.952c0,0 0,0 0,0c0,-0.522 0.429,-0.952 0.951,-0.952c0.01,0 0.019,0.001 0.028,0.001Zm2.178,1.566c3.379,0.633 6.313,2.723 8.016,5.709l-1.123,2.533c-0.193,0.438 0.006,0.952 0.44,1.147l2.16,0.958c0.067,0.675 0.076,1.355 0.025,2.031l-1.202,0c-0.12,0 -0.169,0.08 -0.169,0.196l0,0.551c0,1.297 -0.731,1.582 -1.373,1.652c-0.612,0.07 -1.288,-0.257 -1.374,-0.63c-0.361,-2.029 -0.961,-2.46 -1.909,-3.21c1.178,-0.746 2.401,-1.85 2.401,-3.325c0,-1.594 -1.092,-2.597 -1.835,-3.09c-1.046,-0.688 -2.203,-0.826 -2.515,-0.826l-12.421,0c1.717,-1.918 4.02,-3.218 6.55,-3.696l1.466,1.536c0.33,0.346 0.878,0.361 1.223,0.028l1.64,-1.564Zm-13.522,7.043c0.511,0.015 0.924,0.44 0.924,0.951c0,0.522 -0.43,0.952 -0.952,0.952c-0.522,0 -0.951,-0.43 -0.951,-0.952c0,0 0,0 0,0c0,-0.522 0.429,-0.951 0.951,-0.951c0.009,0 0.019,0 0.028,0Zm22.685,0.043c0.511,0.015 0.924,0.44 0.924,0.951c0,0.522 -0.43,0.952 -0.952,0.952c-0.522,0 -0.951,-0.43 -0.951,-0.952c0,0 0,0 0,0c0,-0.522 0.429,-0.952 0.951,-0.952c0.01,0 0.019,0 0.028,0.001Zm-20.892,0.153l1.658,0l0,7.477l-3.347,0c-0.414,-1.452 -0.542,-2.97 -0.38,-4.47l2.05,-0.912c0.438,-0.195 0.637,-0.706 0.441,-1.144l-0.422,-0.951Zm6.92,0.079l3.949,0c0.205,0 1.441,0.236 1.441,1.163c0,0.768 -0.948,1.043 -1.728,1.043l-3.665,0l0.003,-2.206Zm0,5.373l3.026,0c0.275,0 1.477,0.079 1.86,1.615c0.119,0.471 0.385,2.007 0.566,2.499c0.18,0.551 0.911,1.652 1.691,1.652l4.938,0c-0.331,0.444 -0.693,0.863 -1.083,1.255l-2.01,-0.432c-0.468,-0.101 -0.93,0.199 -1.031,0.667l-0.477,2.228c-3.104,1.406 -6.672,1.389 -9.762,-0.046l-0.478,-2.228c-0.101,-0.468 -0.56,-0.767 -1.028,-0.667l-1.967,0.423c-0.365,-0.377 -0.704,-0.778 -1.016,-1.2l9.567,0c0.107,0 0.181,-0.018 0.181,-0.119l0,-3.384c0,-0.097 -0.074,-0.119 -0.181,-0.119l-2.799,0l0.003,-2.144Zm-4.415,7.749c0.512,0.015 0.924,0.44 0.924,0.951c0,0.522 -0.429,0.952 -0.951,0.952c-0.522,0 -0.952,-0.43 -0.952,-0.952c0,0 0,0 0,0c0,-0.522 0.43,-0.952 0.952,-0.952c0.009,0 0.018,0.001 0.027,0.001Zm14.089,0.043c0.511,0.015 0.924,0.439 0.923,0.951c0,0.522 -0.429,0.952 -0.951,0.952c-0.522,0 -0.951,-0.43 -0.951,-0.952c0,0 0,0 0,0c0,-0.522 0.429,-0.952 0.951,-0.952c0.009,0 0.018,0 0.028,0.001Z\"/><path id=\"logo-teeth\" d=\"M29.647,16.002c0,7.49 -6.163,13.653 -13.654,13.653c-7.49,0 -13.654,-6.163 -13.654,-13.653c0,-7.491 6.164,-13.654 13.654,-13.654c7.491,0 13.654,6.163 13.654,13.654Zm-0.257,-1.319l2.13,1.319l-2.13,1.318l1.83,1.71l-2.344,0.878l1.463,2.035l-2.475,0.404l1.04,2.282l-2.506,-0.089l0.575,2.442l-2.441,-0.576l0.089,2.506l-2.283,-1.04l-0.403,2.475l-2.035,-1.462l-0.878,2.343l-1.71,-1.829l-1.319,2.129l-1.318,-2.129l-1.71,1.829l-0.878,-2.343l-2.035,1.462l-0.404,-2.475l-2.282,1.04l0.089,-2.506l-2.442,0.576l0.575,-2.442l-2.505,0.089l1.04,-2.282l-2.475,-0.404l1.462,-2.035l-2.343,-0.878l1.829,-1.71l-2.129,-1.318l2.129,-1.319l-1.829,-1.71l2.343,-0.878l-1.462,-2.035l2.475,-0.404l-1.04,-2.282l2.505,0.089l-0.575,-2.441l2.442,0.575l-0.089,-2.506l2.282,1.04l0.404,-2.475l2.035,1.463l0.878,-2.344l1.71,1.83l1.318,-2.13l1.319,2.13l1.71,-1.83l0.878,2.344l2.035,-1.463l0.403,2.475l2.283,-1.04l-0.089,2.506l2.441,-0.575l-0.575,2.441l2.506,-0.089l-1.04,2.282l2.475,0.404l-1.463,2.035l2.344,0.878l-1.83,1.71Z\"/></svg>"}, {"sha": "213c7f3aab8b65ac46b1e039d4e5eaaa3762d4bc", "filename": "src/librustdoc/html/static_files.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15efed4e6fe7a6040cb8b04c03db5dd72c9531d9/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic_files.rs?ref=15efed4e6fe7a6040cb8b04c03db5dd72c9531d9", "patch": "@@ -53,8 +53,10 @@ pub static LICENSE_MIT: &[u8] = include_bytes!(\"static/LICENSE-MIT.txt\");\n \n /// The contents of `rust-logo.png`, the default icon of the documentation.\n pub static RUST_LOGO: &[u8] = include_bytes!(\"static/rust-logo.png\");\n-/// The contents of `favicon.ico`, the default favicon of the documentation.\n-pub static RUST_FAVICON: &[u8] = include_bytes!(\"static/favicon.ico\");\n+/// The default documentation favicons (SVG and PNG fallbacks)\n+pub static RUST_FAVICON_SVG: &[u8] = include_bytes!(\"static/favicon.svg\");\n+pub static RUST_FAVICON_PNG_16: &[u8] = include_bytes!(\"static/favicon-16x16.png\");\n+pub static RUST_FAVICON_PNG_32: &[u8] = include_bytes!(\"static/favicon-32x32.png\");\n \n /// The built-in themes given to every documentation site.\n pub mod themes {"}]}