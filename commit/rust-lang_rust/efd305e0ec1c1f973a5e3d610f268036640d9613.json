{"sha": "efd305e0ec1c1f973a5e3d610f268036640d9613", "node_id": "C_kwDOAAsO6NoAKGVmZDMwNWUwZWMxYzFmOTczYTVlM2Q2MTBmMjY4MDM2NjQwZDk2MTM", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-08-18T17:34:19Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-08-20T03:15:46Z"}, "message": "Simplify load/store", "tree": {"sha": "c2a54025ea3a153445fd6e080483acfa55a75521", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2a54025ea3a153445fd6e080483acfa55a75521"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/efd305e0ec1c1f973a5e3d610f268036640d9613", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmMAUeMACgkQcTRy8vRW\nJ97lgg/9HTVeR9SzV2c9k5tDm4qs/2G45bG5+45hEZs7Vu2LrQkRxNGXum0zzhHH\nJ8kIdXLgR0GLH1fho336ctLjjm7Fin8zwJ143r5S989BCNoiW0Ndc+e9VyKuQ6Ei\nqQcMzhq//ngLxuDKjDCSVzmK6udP2S9Lb1BAEYwJuSFeyqmx46PCqYCvxHpO3WXz\n660Y1Lb7yI9oOa0/0zQ3jgEnYdb5aC892e4y3jLeQ/9LqDsJKRDFYBNK6QQVfAtn\n+6Pbr7fJkGotV7yUsR3WlHO/8CMpL8EvLzkaOrtZ5gZ2PP/Ak+qNOdGogBdixCXS\na24HyF+7fm/ER4gm/nMx2Db69/rNzcSh0i0T5u78Zo+w1e/v3IsTTVQUxDQdfp8h\n43HpKXvvswiBmd+oUHdNp/HUCxFpDwosMFOkWj+OM14kadDJyh+26GEphguMe4Na\nbX8fgnfHFix83viettpJQ7F1NHPUqPoytQlMjy7OiEMSlZhlyM4gWehhq45yNWFd\n8uK6ac17YkpqGLeVZGfohy3JAbXgJhV5E5+tTku40hDXDvUVv1ZPjj52tU+Iu4cU\noZdZ/Mi7viMgg1pOFhWSmj+Qtzgk+Ik0nlYha1Vj7OIWTwEgag080V2Rl86R/Qxq\nZCVcTvwtFDw+KI7vehALMF6UTPsYXwd55AP4ybnf38Zut4NhkK4=\n=Q2+T\n-----END PGP SIGNATURE-----", "payload": "tree c2a54025ea3a153445fd6e080483acfa55a75521\nparent b631ca0c2fbc69ce7718b50ff34a7c238f28c05f\nauthor Chris Denton <christophersdenton@gmail.com> 1660844059 +0100\ncommitter Chris Denton <christophersdenton@gmail.com> 1660965346 +0100\n\nSimplify load/store\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/efd305e0ec1c1f973a5e3d610f268036640d9613", "html_url": "https://github.com/rust-lang/rust/commit/efd305e0ec1c1f973a5e3d610f268036640d9613", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/efd305e0ec1c1f973a5e3d610f268036640d9613/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b631ca0c2fbc69ce7718b50ff34a7c238f28c05f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b631ca0c2fbc69ce7718b50ff34a7c238f28c05f", "html_url": "https://github.com/rust-lang/rust/commit/b631ca0c2fbc69ce7718b50ff34a7c238f28c05f"}], "stats": {"total": 9, "additions": 3, "deletions": 6}, "files": [{"sha": "e2d5e1e881a87701cbe51019d4aeaea12e761c7a", "filename": "library/std/src/sys/windows/compat.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/efd305e0ec1c1f973a5e3d610f268036640d9613/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/efd305e0ec1c1f973a5e3d610f268036640d9613/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs?ref=efd305e0ec1c1f973a5e3d610f268036640d9613", "patch": "@@ -214,11 +214,8 @@ pub(super) fn load_synch_functions() {\n         Some(())\n     }\n \n-    // Shortcut if we've already tried (and failed) to load the library.\n+    // Try to load the module but skip loading if a previous attempt failed.\n     static LOAD_MODULE: AtomicBool = AtomicBool::new(true);\n-    if LOAD_MODULE.load(Ordering::Acquire) {\n-        if try_load().is_none() {\n-            LOAD_MODULE.store(false, Ordering::Release);\n-        }\n-    }\n+    let module_loaded = LOAD_MODULE.load(Ordering::Acquire) && try_load().is_some();\n+    LOAD_MODULE.store(module_loaded, Ordering::Release)\n }"}]}