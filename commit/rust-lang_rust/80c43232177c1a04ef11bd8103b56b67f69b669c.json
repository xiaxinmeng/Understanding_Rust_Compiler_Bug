{"sha": "80c43232177c1a04ef11bd8103b56b67f69b669c", "node_id": "C_kwDOAAsO6NoAKDgwYzQzMjMyMTc3YzFhMDRlZjExYmQ4MTAzYjU2YjY3ZjY5YjY2OWM", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-04-13T11:19:00Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-04-13T18:35:05Z"}, "message": "Add test to ensure that compiler built-in proc-macro are considered as such", "tree": {"sha": "7f8679062a08fedfb1b0f5950c75e49b5f3ed3af", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f8679062a08fedfb1b0f5950c75e49b5f3ed3af"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/80c43232177c1a04ef11bd8103b56b67f69b669c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/80c43232177c1a04ef11bd8103b56b67f69b669c", "html_url": "https://github.com/rust-lang/rust/commit/80c43232177c1a04ef11bd8103b56b67f69b669c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/80c43232177c1a04ef11bd8103b56b67f69b669c/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e51b2d9688ccdfb082a1b855c9aa8398b86b870", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e51b2d9688ccdfb082a1b855c9aa8398b86b870", "html_url": "https://github.com/rust-lang/rust/commit/5e51b2d9688ccdfb082a1b855c9aa8398b86b870"}], "stats": {"total": 27, "additions": 23, "deletions": 4}, "files": [{"sha": "489ec924c1fcf15e10c6ed7648ee686680e7edee", "filename": "tests/rustdoc/compiler-derive-proc-macro.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/80c43232177c1a04ef11bd8103b56b67f69b669c/tests%2Frustdoc%2Fcompiler-derive-proc-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80c43232177c1a04ef11bd8103b56b67f69b669c/tests%2Frustdoc%2Fcompiler-derive-proc-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fcompiler-derive-proc-macro.rs?ref=80c43232177c1a04ef11bd8103b56b67f69b669c", "patch": "@@ -0,0 +1,15 @@\n+// This test ensures that compiler builtin proc-macros are considered as such.\n+\n+#![crate_name = \"foo\"]\n+\n+// @has 'foo/index.html'\n+// Each compiler builtin proc-macro has a trait equivalent so we should have\n+// a trait section as well.\n+// @count - '//*[@id=\"main-content\"]//*[@class=\"small-section-header\"]' 2\n+// @has - '//*[@id=\"main-content\"]//*[@class=\"small-section-header\"]' 'Traits'\n+// @has - '//*[@id=\"main-content\"]//*[@class=\"small-section-header\"]' 'Derive Macros'\n+\n+// Now checking the correct file is generated as well.\n+// @has 'foo/derive.Clone.html'\n+// @!has 'foo/macro.Clone.html'\n+pub use std::clone::Clone;"}, {"sha": "42f760cff6a7ca574bac16673ddf5b4d65131ef2", "filename": "tests/rustdoc/macro_pub_in_module.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/80c43232177c1a04ef11bd8103b56b67f69b669c/tests%2Frustdoc%2Fmacro_pub_in_module.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80c43232177c1a04ef11bd8103b56b67f69b669c/tests%2Frustdoc%2Fmacro_pub_in_module.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fmacro_pub_in_module.rs?ref=80c43232177c1a04ef11bd8103b56b67f69b669c", "patch": "@@ -7,22 +7,26 @@\n #![crate_name = \"krate\"]\n #![no_core]\n \n- // @has external_crate/some_module/macro.external_macro.html\n-  // @!has external_crate/macro.external_macro.html\n+// @has external_crate/some_module/macro.external_macro.html\n+// @!has external_crate/macro.external_macro.html\n extern crate external_crate;\n \n pub mod inner {\n     // @has krate/inner/macro.raw_const.html\n     // @!has krate/macro.raw_const.html\n     pub macro raw_const() {}\n \n-    // @has krate/inner/macro.test.html\n+    // @has krate/inner/attr.test.html\n     // @!has krate/macro.test.html\n+    // @!has krate/inner/macro.test.html\n+    // @!has krate/attr.test.html\n     #[rustc_builtin_macro]\n     pub macro test($item:item) {}\n \n-    // @has krate/inner/macro.Clone.html\n+    // @has krate/inner/derive.Clone.html\n+    // @!has krate/inner/macro.Clone.html\n     // @!has krate/macro.Clone.html\n+    // @!has krate/derive.Clone.html\n     #[rustc_builtin_macro]\n     pub macro Clone($item:item) {}\n "}]}