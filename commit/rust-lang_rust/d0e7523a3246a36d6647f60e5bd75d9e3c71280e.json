{"sha": "d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwZTc1MjNhMzI0NmEzNmQ2NjQ3ZjYwZTViZDc1ZDllM2M3MTI4MGU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-12-26T13:22:08Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-01-02T18:16:27Z"}, "message": "Remove unused collapse pass", "tree": {"sha": "7833c62c964da5b8f0bd4d0cadbf2a521297cc47", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7833c62c964da5b8f0bd4d0cadbf2a521297cc47"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "html_url": "https://github.com/rust-lang/rust/commit/d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0e7523a3246a36d6647f60e5bd75d9e3c71280e/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ba1928fa2aa73abeb541dad7d72bda94509d113", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ba1928fa2aa73abeb541dad7d72bda94509d113", "html_url": "https://github.com/rust-lang/rust/commit/4ba1928fa2aa73abeb541dad7d72bda94509d113"}], "stats": {"total": 22, "additions": 3, "deletions": 19}, "files": [{"sha": "4aeca0faea76a362350e2ac0a524e962b9b6dcfb", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d0e7523a3246a36d6647f60e5bd75d9e3c71280e/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0e7523a3246a36d6647f60e5bd75d9e3c71280e/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "patch": "@@ -623,6 +623,9 @@ crate fn run_global_ctxt(\n \n     ctxt.sess().abort_if_errors();\n \n+    // The main crate doc comments are always collapsed.\n+    krate.collapsed = true;\n+\n     (krate, ctxt.renderinfo.into_inner(), ctxt.render_options)\n }\n "}, {"sha": "4994765dfe52e06446bb270bf417bc01642d8c9e", "filename": "src/librustdoc/passes/collapse_docs.rs", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4ba1928fa2aa73abeb541dad7d72bda94509d113/src%2Flibrustdoc%2Fpasses%2Fcollapse_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ba1928fa2aa73abeb541dad7d72bda94509d113/src%2Flibrustdoc%2Fpasses%2Fcollapse_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcollapse_docs.rs?ref=4ba1928fa2aa73abeb541dad7d72bda94509d113", "patch": "@@ -1,14 +0,0 @@\n-use crate::clean;\n-use crate::core::DocContext;\n-use crate::passes::Pass;\n-\n-crate const COLLAPSE_DOCS: Pass = Pass {\n-    name: \"collapse-docs\",\n-    run: collapse_docs,\n-    description: \"concatenates all document attributes into one document attribute\",\n-};\n-\n-crate fn collapse_docs(mut krate: clean::Crate, _: &DocContext<'_>) -> clean::Crate {\n-    krate.collapsed = true;\n-    krate\n-}"}, {"sha": "7ac42c759924890a0e5a3d7e8c42f908fe654e31", "filename": "src/librustdoc/passes/mod.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d0e7523a3246a36d6647f60e5bd75d9e3c71280e/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0e7523a3246a36d6647f60e5bd75d9e3c71280e/src%2Flibrustdoc%2Fpasses%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fmod.rs?ref=d0e7523a3246a36d6647f60e5bd75d9e3c71280e", "patch": "@@ -14,9 +14,6 @@ crate use stripper::*;\n mod non_autolinks;\n crate use self::non_autolinks::CHECK_NON_AUTOLINKS;\n \n-mod collapse_docs;\n-crate use self::collapse_docs::COLLAPSE_DOCS;\n-\n mod strip_hidden;\n crate use self::strip_hidden::STRIP_HIDDEN;\n \n@@ -84,7 +81,6 @@ crate const PASSES: &[Pass] = &[\n     CHECK_PRIVATE_ITEMS_DOC_TESTS,\n     STRIP_HIDDEN,\n     UNINDENT_COMMENTS,\n-    COLLAPSE_DOCS,\n     STRIP_PRIVATE,\n     STRIP_PRIV_IMPORTS,\n     PROPAGATE_DOC_CFG,\n@@ -99,7 +95,6 @@ crate const PASSES: &[Pass] = &[\n /// The list of passes run by default.\n crate const DEFAULT_PASSES: &[ConditionalPass] = &[\n     ConditionalPass::always(COLLECT_TRAIT_IMPLS),\n-    ConditionalPass::always(COLLAPSE_DOCS),\n     ConditionalPass::always(UNINDENT_COMMENTS),\n     ConditionalPass::always(CHECK_PRIVATE_ITEMS_DOC_TESTS),\n     ConditionalPass::new(STRIP_HIDDEN, WhenNotDocumentHidden),"}]}