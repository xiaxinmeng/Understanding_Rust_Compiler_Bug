{"sha": "59690f43953b191344b8ba85b10b44595f774921", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5NjkwZjQzOTUzYjE5MTM0NGI4YmE4NWIxMGI0NDU5NWY3NzQ5MjE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-06T11:19:23Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-06T11:19:23Z"}, "message": "Rollup merge of #61556 - phansch:emitter_cleanup, r=estebank\n\nlibrustc_errors: Rename AnnotateRs -> AnnotateSnippet\n\nThe proper name of the library is `annotate-snippet`, not `annotate-rs`,\nthis PR should get rid of any confusing `AnnotateRs` names.\n\n1. Renames `annotate_rs_emitter.rs` to\n   `annotate_snippet_emitter_writer.rs` so that the difference between the\n   `Emitter` trait and the implementers is more clear.\n2. Renames `AnnotateRsEmitterWriter` to `AnnotateSnippetEmitterWriter`\n3. Renames `HumanReadableErrorType::AnnotateRs` to `HumanReadableErrorType::AnnotateSnippet`", "tree": {"sha": "27c60f05cfc9c45473195f6542018f2098f3f2d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27c60f05cfc9c45473195f6542018f2098f3f2d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/59690f43953b191344b8ba85b10b44595f774921", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc+Pa7CRBK7hj4Ov3rIwAAdHIIAGjFxoo1RYg4xp9JSPf4L0vn\nxiHKH2zA/K7IRDWmZQm7MD2hh7gWcDDc5zddD2s+n3zAwWCXjldrkncEM8mUlQ5o\nWtjYnkdyd9c+/DJ5/bZRyTUH5CQsWQcEBor5wG4wPLKVpwWcKqRIheoiaCJjuw1i\naJb2NcczEbeQmkcyA2cYzpwWbNyyq0e0SdhOolxG+Rbzvws7EYhXMZSfH8lMvxUc\n4w5g/Flvhh3u3nYovADU1YUhYeP10HqEAQOAnxFk2GjUjDfGEeZqHQnG9h07wLrw\nAh14qc1Yy8jbGyFWCSUyrhAUWAHgKt0kZuynsYlclkQIDJMkKzQrBBBSXmb7Ghk=\n=IiBG\n-----END PGP SIGNATURE-----\n", "payload": "tree 27c60f05cfc9c45473195f6542018f2098f3f2d4\nparent daf1ed0e98e75c64c3b883fd845b37bfa42358de\nparent df076b2d5e21bd62263efbb1a6345492a7e302ca\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1559819963 +0200\ncommitter GitHub <noreply@github.com> 1559819963 +0200\n\nRollup merge of #61556 - phansch:emitter_cleanup, r=estebank\n\nlibrustc_errors: Rename AnnotateRs -> AnnotateSnippet\n\nThe proper name of the library is `annotate-snippet`, not `annotate-rs`,\nthis PR should get rid of any confusing `AnnotateRs` names.\n\n1. Renames `annotate_rs_emitter.rs` to\n   `annotate_snippet_emitter_writer.rs` so that the difference between the\n   `Emitter` trait and the implementers is more clear.\n2. Renames `AnnotateRsEmitterWriter` to `AnnotateSnippetEmitterWriter`\n3. Renames `HumanReadableErrorType::AnnotateRs` to `HumanReadableErrorType::AnnotateSnippet`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/59690f43953b191344b8ba85b10b44595f774921", "html_url": "https://github.com/rust-lang/rust/commit/59690f43953b191344b8ba85b10b44595f774921", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/59690f43953b191344b8ba85b10b44595f774921/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "daf1ed0e98e75c64c3b883fd845b37bfa42358de", "url": "https://api.github.com/repos/rust-lang/rust/commits/daf1ed0e98e75c64c3b883fd845b37bfa42358de", "html_url": "https://github.com/rust-lang/rust/commit/daf1ed0e98e75c64c3b883fd845b37bfa42358de"}, {"sha": "df076b2d5e21bd62263efbb1a6345492a7e302ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/df076b2d5e21bd62263efbb1a6345492a7e302ca", "html_url": "https://github.com/rust-lang/rust/commit/df076b2d5e21bd62263efbb1a6345492a7e302ca"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "003fdd501a35ab55e5fc04b54f1717b363e3cb46", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=59690f43953b191344b8ba85b10b44595f774921", "patch": "@@ -2003,7 +2003,7 @@ pub fn build_session_options_and_crate_config(\n             None |\n             Some(\"human\") => ErrorOutputType::HumanReadable(HumanReadableErrorType::Default(color)),\n             Some(\"human-annotate-rs\") => {\n-                ErrorOutputType::HumanReadable(HumanReadableErrorType::AnnotateRs(color))\n+                ErrorOutputType::HumanReadable(HumanReadableErrorType::AnnotateSnippet(color))\n             },\n             Some(\"json\") => ErrorOutputType::Json { pretty: false, json_rendered },\n             Some(\"pretty-json\") => ErrorOutputType::Json { pretty: true, json_rendered },\n@@ -2041,7 +2041,7 @@ pub fn build_session_options_and_crate_config(\n                 \"--error-format=pretty-json is unstable\",\n             );\n         }\n-        if let ErrorOutputType::HumanReadable(HumanReadableErrorType::AnnotateRs(_)) =\n+        if let ErrorOutputType::HumanReadable(HumanReadableErrorType::AnnotateSnippet(_)) =\n             error_format {\n             early_error(\n                 ErrorOutputType::Json { pretty: false, json_rendered },"}, {"sha": "d04b9ac083ce5b18d9f14c0b6d349e0c5c5ada81", "filename": "src/librustc/session/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc%2Fsession%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc%2Fsession%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fmod.rs?ref=59690f43953b191344b8ba85b10b44595f774921", "patch": "@@ -24,7 +24,7 @@ use rustc_data_structures::sync::{\n use errors::{DiagnosticBuilder, DiagnosticId, Applicability};\n use errors::emitter::{Emitter, EmitterWriter};\n use errors::emitter::HumanReadableErrorType;\n-use errors::annotate_rs_emitter::{AnnotateRsEmitterWriter};\n+use errors::annotate_snippet_emitter_writer::{AnnotateSnippetEmitterWriter};\n use syntax::ast::{self, NodeId};\n use syntax::edition::Edition;\n use syntax::feature_gate::{self, AttributeType};\n@@ -1034,8 +1034,8 @@ fn default_emitter(\n         (config::ErrorOutputType::HumanReadable(kind), dst) => {\n             let (short, color_config) = kind.unzip();\n \n-            if let HumanReadableErrorType::AnnotateRs(_) = kind {\n-                let emitter = AnnotateRsEmitterWriter::new(\n+            if let HumanReadableErrorType::AnnotateSnippet(_) = kind {\n+                let emitter = AnnotateSnippetEmitterWriter::new(\n                     Some(source_map.clone()),\n                     short,\n                 );"}, {"sha": "9f9c7588d977ba0447d9a50055b79a7cd06208a9", "filename": "src/librustc_errors/annotate_snippet_emitter_writer.rs", "status": "renamed", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Fannotate_snippet_emitter_writer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Fannotate_snippet_emitter_writer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fannotate_snippet_emitter_writer.rs?ref=59690f43953b191344b8ba85b10b44595f774921", "patch": "@@ -1,9 +1,9 @@\n-/// Emit diagnostics using the `annotate-snippets` library\n-///\n-/// This is the equivalent of `./emitter.rs` but making use of the\n-/// [`annotate-snippets`][annotate_snippets] library instead of building the output ourselves.\n-///\n-/// [annotate_snippets]: https://docs.rs/crate/annotate-snippets/\n+//! Emit diagnostics using the `annotate-snippets` library\n+//!\n+//! This is the equivalent of `./emitter.rs` but making use of the\n+//! [`annotate-snippets`][annotate_snippets] library instead of building the output ourselves.\n+//!\n+//! [annotate_snippets]: https://docs.rs/crate/annotate-snippets/\n \n use syntax_pos::{SourceFile, MultiSpan, Loc};\n use crate::{\n@@ -18,16 +18,16 @@ use annotate_snippets::display_list::DisplayList;\n use annotate_snippets::formatter::DisplayListFormatter;\n \n \n-/// Generates diagnostics using annotate-rs\n-pub struct AnnotateRsEmitterWriter {\n+/// Generates diagnostics using annotate-snippet\n+pub struct AnnotateSnippetEmitterWriter {\n     source_map: Option<Lrc<SourceMapperDyn>>,\n     /// If true, hides the longer explanation text\n     short_message: bool,\n     /// If true, will normalize line numbers with LL to prevent noise in UI test diffs.\n     ui_testing: bool,\n }\n \n-impl Emitter for AnnotateRsEmitterWriter {\n+impl Emitter for AnnotateSnippetEmitterWriter {\n     /// The entry point for the diagnostics generation\n     fn emit_diagnostic(&mut self, db: &DiagnosticBuilder<'_>) {\n         let primary_span = db.span.clone();\n@@ -158,7 +158,7 @@ impl<'a>  DiagnosticConverter<'a> {\n     }\n }\n \n-impl AnnotateRsEmitterWriter {\n+impl AnnotateSnippetEmitterWriter {\n     pub fn new(\n         source_map: Option<Lrc<SourceMapperDyn>>,\n         short_message: bool", "previous_filename": "src/librustc_errors/annotate_rs_emitter.rs"}, {"sha": "3bf477efe35f91f05eb08e4bedb02ba8cb596ed9", "filename": "src/librustc_errors/emitter.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Femitter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Femitter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Femitter.rs?ref=59690f43953b191344b8ba85b10b44595f774921", "patch": "@@ -24,7 +24,7 @@ use termcolor::{WriteColor, Color, Buffer};\n #[derive(Clone, Copy, Debug, PartialEq, Eq)]\n pub enum HumanReadableErrorType {\n     Default(ColorConfig),\n-    AnnotateRs(ColorConfig),\n+    AnnotateSnippet(ColorConfig),\n     Short(ColorConfig),\n }\n \n@@ -34,7 +34,7 @@ impl HumanReadableErrorType {\n         match self {\n             HumanReadableErrorType::Default(cc) => (false, cc),\n             HumanReadableErrorType::Short(cc) => (true, cc),\n-            HumanReadableErrorType::AnnotateRs(cc) => (false, cc),\n+            HumanReadableErrorType::AnnotateSnippet(cc) => (false, cc),\n         }\n     }\n     pub fn new_emitter("}, {"sha": "1831d58e736071561604afc393e92d29954331b9", "filename": "src/librustc_errors/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59690f43953b191344b8ba85b10b44595f774921/src%2Flibrustc_errors%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Flib.rs?ref=59690f43953b191344b8ba85b10b44595f774921", "patch": "@@ -33,7 +33,7 @@ use termcolor::{ColorSpec, Color};\n mod diagnostic;\n mod diagnostic_builder;\n pub mod emitter;\n-pub mod annotate_rs_emitter;\n+pub mod annotate_snippet_emitter_writer;\n mod snippet;\n pub mod registry;\n mod styled_buffer;"}]}