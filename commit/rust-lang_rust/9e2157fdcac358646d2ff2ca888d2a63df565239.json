{"sha": "9e2157fdcac358646d2ff2ca888d2a63df565239", "node_id": "MDY6Q29tbWl0NzI0NzEyOjllMjE1N2ZkY2FjMzU4NjQ2ZDJmZjJjYTg4OGQyYTYzZGY1NjUyMzk=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2018-06-05T10:13:28Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2018-07-01T14:30:43Z"}, "message": "don't consider assignments to temporaries \"interesting\"", "tree": {"sha": "e273f2f3b1a48942c94eb30e0bfadf7d7275e571", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e273f2f3b1a48942c94eb30e0bfadf7d7275e571"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9e2157fdcac358646d2ff2ca888d2a63df565239", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEWwgxPGhT5b/6kagXAXYLT59T8VQFAls45ZMACgkQAXYLT59T\n8VSefA//ROewRHj/Y3zzceXnZlc3z/PrownZMC0ZpoDW2x3N6HHKPRJw+HFQXwqE\n9Q5/Eysm7u5ek66gbCaSafCn40vLaZuNPss4Skc4e7eAqSlBB+iIbPh3tgssG9LL\nv2P+zROqulesT68JP7RZMhVvZp2rz/xgx+O47CehRSjiYDBtC+KK34wHUIzvFyEa\nToz9p6uPrsGGzBs7ZTogOqMz5j412HAIddZ7OjarWMuIKm+Tu1NhdUsPYMvwTjXg\necOvvrGLVEuokXoWJqsJQkXp57s84UeNLTH1KDej+NddZStEfvX0jfVzgI+GB29t\n2g6ZNyrwPSlIJtgZsVXBTDPmVEjT8I/wlyMO9V4VQ/jYlhN+3EM/PDnVmH7adWUG\ni2ZfJXbJYth/2Jc9egrQGko3XDFQ5n4SH76n0NiFGTaYEvppP3CGdIx2g90zgZ5O\nl5rYjcyJatV0w8Gv258q1w+aYIf6UjPEAxHvjF1vmM3IGy/CHxV3ZZ4T9YLwKHcT\nBhrDqU85CXn7A+unE36BKAj7jVQi2yH4SNL4kS7W3PVZ144NOz2yK/HK8Gxi+y1p\n8tbaXvIgfGKuoTtydxWo2SyLX1CDQ5FdnDguLnCkD/TTO51roO+Kp4rrabizh/v0\nFRoW8tojXgOtPBsLDYQ49eFLMRIuM0Z21i04In1f/d4FyvGq6jg=\n=diIE\n-----END PGP SIGNATURE-----", "payload": "tree e273f2f3b1a48942c94eb30e0bfadf7d7275e571\nparent 0b620186fdac2a8a671d445ac25ef33d1df44153\nauthor Niko Matsakis <niko@alum.mit.edu> 1528193608 -0400\ncommitter David Wood <david@davidtw.co> 1530455443 +0100\n\ndon't consider assignments to temporaries \"interesting\"\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9e2157fdcac358646d2ff2ca888d2a63df565239", "html_url": "https://github.com/rust-lang/rust/commit/9e2157fdcac358646d2ff2ca888d2a63df565239", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9e2157fdcac358646d2ff2ca888d2a63df565239/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b620186fdac2a8a671d445ac25ef33d1df44153", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b620186fdac2a8a671d445ac25ef33d1df44153", "html_url": "https://github.com/rust-lang/rust/commit/0b620186fdac2a8a671d445ac25ef33d1df44153"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "911e5434259169bb71c3a99daf9d049a7ef4db1b", "filename": "src/librustc_mir/borrow_check/nll/type_check/mod.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9e2157fdcac358646d2ff2ca888d2a63df565239/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e2157fdcac358646d2ff2ca888d2a63df565239/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs?ref=9e2157fdcac358646d2ff2ca888d2a63df565239", "patch": "@@ -798,9 +798,21 @@ impl<'a, 'gcx, 'tcx> TypeChecker<'a, 'gcx, 'tcx> {\n         let tcx = self.tcx();\n         match stmt.kind {\n             StatementKind::Assign(ref place, ref rv) => {\n+                // Assignments to temporaries are not \"interesting\";\n+                // they are not caused by the user, but rather artifacts\n+                // of lowering. Assignments to other sorts of places *are* interesting\n+                // though.\n+                let is_temp = if let Place::Local(l) = place {\n+                    !mir.local_decls[*l].is_user_variable.is_some()\n+                } else {\n+                    false\n+                };\n+\n+                let locations = if is_temp { location.boring() } else { location.interesting() };\n+\n                 let place_ty = place.ty(mir, tcx).to_ty(tcx);\n                 let rv_ty = rv.ty(mir, tcx);\n-                if let Err(terr) = self.sub_types(rv_ty, place_ty, location.interesting()) {\n+                if let Err(terr) = self.sub_types(rv_ty, place_ty, locations) {\n                     span_mirbug!(\n                         self,\n                         stmt,"}]}