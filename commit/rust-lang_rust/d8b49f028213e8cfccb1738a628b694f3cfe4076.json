{"sha": "d8b49f028213e8cfccb1738a628b694f3cfe4076", "node_id": "C_kwDOAAsO6NoAKGQ4YjQ5ZjAyODIxM2U4Y2ZjY2IxNzM4YTYyOGI2OTRmM2NmZTQwNzY", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-02-09T06:28:00Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-02-15T17:17:09Z"}, "message": "add test for issue-93278, bless", "tree": {"sha": "62437daab8da10becee4d52adc6c150ccbe5a03f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62437daab8da10becee4d52adc6c150ccbe5a03f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8b49f028213e8cfccb1738a628b694f3cfe4076", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8b49f028213e8cfccb1738a628b694f3cfe4076", "html_url": "https://github.com/rust-lang/rust/commit/d8b49f028213e8cfccb1738a628b694f3cfe4076", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8b49f028213e8cfccb1738a628b694f3cfe4076/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "477459795d074b8febf9973686f2b134af3ed818", "url": "https://api.github.com/repos/rust-lang/rust/commits/477459795d074b8febf9973686f2b134af3ed818", "html_url": "https://github.com/rust-lang/rust/commit/477459795d074b8febf9973686f2b134af3ed818"}], "stats": {"total": 61, "additions": 44, "deletions": 17}, "files": [{"sha": "b91e72c601972abe3d0ec07fe89fd5db7db57c06", "filename": "src/test/ui/generic-associated-types/self-outlives-lint.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d8b49f028213e8cfccb1738a628b694f3cfe4076/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8b49f028213e8cfccb1738a628b694f3cfe4076/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.rs?ref=d8b49f028213e8cfccb1738a628b694f3cfe4076", "patch": "@@ -1,7 +1,5 @@\n #![feature(generic_associated_types)]\n \n-// check-fail\n-\n use std::fmt::Debug;\n \n // We have a `&'a self`, so we need a `Self: 'a`\n@@ -117,7 +115,6 @@ trait TraitLifetime<'a> {\n }\n \n // Like above, but we have a where clause that can prove what we want\n-// FIXME: we require two bounds (`where Self: 'a, Self: 'b`) when we should only require one\n trait TraitLifetimeWhere<'a> where Self: 'a {\n     type Bar<'b>;\n     //~^ missing required\n@@ -140,11 +137,19 @@ trait NotInReturn {\n // We obviously error for `Iterator`, but we should also error for `Item`\n trait IterableTwo {\n     type Item<'a>;\n+    //~^ missing required\n     type Iterator<'a>: Iterator<Item = Self::Item<'a>>;\n     //~^ missing required\n     fn iter<'a>(&'a self) -> Self::Iterator<'a>;\n }\n \n+trait IterableTwoWhere {\n+    type Item<'a>;\n+    //~^ missing required\n+    type Iterator<'a>: Iterator<Item = Self::Item<'a>> where Self: 'a;\n+    fn iter<'a>(&'a self) -> Self::Iterator<'a>;\n+}\n+\n // We also should report region outlives clauses. Here, we know that `'y: 'x`,\n // because of `&'x &'y`, so we require that `'b: 'a`.\n trait RegionOutlives {"}, {"sha": "ccdfb0c1d794cb73c7e4ac582df5c65c26b286b1", "filename": "src/test/ui/generic-associated-types/self-outlives-lint.stderr", "status": "modified", "additions": 36, "deletions": 14, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/d8b49f028213e8cfccb1738a628b694f3cfe4076/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8b49f028213e8cfccb1738a628b694f3cfe4076/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgeneric-associated-types%2Fself-outlives-lint.stderr?ref=d8b49f028213e8cfccb1738a628b694f3cfe4076", "patch": "@@ -1,5 +1,5 @@\n error: missing required bound on `Item`\n-  --> $DIR/self-outlives-lint.rs:9:5\n+  --> $DIR/self-outlives-lint.rs:7:5\n    |\n LL |     type Item<'x>;\n    |     ^^^^^^^^^^^^^-\n@@ -10,7 +10,7 @@ LL |     type Item<'x>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Out`\n-  --> $DIR/self-outlives-lint.rs:25:5\n+  --> $DIR/self-outlives-lint.rs:23:5\n    |\n LL |     type Out<'x>;\n    |     ^^^^^^^^^^^^-\n@@ -21,7 +21,7 @@ LL |     type Out<'x>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Out`\n-  --> $DIR/self-outlives-lint.rs:39:5\n+  --> $DIR/self-outlives-lint.rs:37:5\n    |\n LL |     type Out<'x>;\n    |     ^^^^^^^^^^^^-\n@@ -32,7 +32,7 @@ LL |     type Out<'x>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bounds on `Out`\n-  --> $DIR/self-outlives-lint.rs:46:5\n+  --> $DIR/self-outlives-lint.rs:44:5\n    |\n LL |     type Out<'x, 'y>;\n    |     ^^^^^^^^^^^^^^^^-\n@@ -43,7 +43,7 @@ LL |     type Out<'x, 'y>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Out`\n-  --> $DIR/self-outlives-lint.rs:61:5\n+  --> $DIR/self-outlives-lint.rs:59:5\n    |\n LL |     type Out<'x, D>;\n    |     ^^^^^^^^^^^^^^^-\n@@ -54,7 +54,7 @@ LL |     type Out<'x, D>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Out`\n-  --> $DIR/self-outlives-lint.rs:77:5\n+  --> $DIR/self-outlives-lint.rs:75:5\n    |\n LL |     type Out<'x, D>;\n    |     ^^^^^^^^^^^^^^^-\n@@ -65,7 +65,7 @@ LL |     type Out<'x, D>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Out`\n-  --> $DIR/self-outlives-lint.rs:92:5\n+  --> $DIR/self-outlives-lint.rs:90:5\n    |\n LL |     type Out<'x, D>;\n    |     ^^^^^^^^^^^^^^^-\n@@ -76,7 +76,7 @@ LL |     type Out<'x, D>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bounds on `Bar`\n-  --> $DIR/self-outlives-lint.rs:114:5\n+  --> $DIR/self-outlives-lint.rs:112:5\n    |\n LL |     type Bar<'b>;\n    |     ^^^^^^^^^^^^-\n@@ -87,7 +87,7 @@ LL |     type Bar<'b>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Bar`\n-  --> $DIR/self-outlives-lint.rs:122:5\n+  --> $DIR/self-outlives-lint.rs:119:5\n    |\n LL |     type Bar<'b>;\n    |     ^^^^^^^^^^^^-\n@@ -98,7 +98,7 @@ LL |     type Bar<'b>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Bar`\n-  --> $DIR/self-outlives-lint.rs:129:5\n+  --> $DIR/self-outlives-lint.rs:126:5\n    |\n LL |     type Bar<'b>;\n    |     ^^^^^^^^^^^^-\n@@ -108,8 +108,19 @@ LL |     type Bar<'b>;\n    = note: this bound is currently required to ensure that impls have maximum flexibility\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n+error: missing required bound on `Item`\n+  --> $DIR/self-outlives-lint.rs:139:5\n+   |\n+LL |     type Item<'a>;\n+   |     ^^^^^^^^^^^^^-\n+   |                  |\n+   |                  help: add the required where clause: `where Self: 'a`\n+   |\n+   = note: this bound is currently required to ensure that impls have maximum flexibility\n+   = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n+\n error: missing required bound on `Iterator`\n-  --> $DIR/self-outlives-lint.rs:143:5\n+  --> $DIR/self-outlives-lint.rs:141:5\n    |\n LL |     type Iterator<'a>: Iterator<Item = Self::Item<'a>>;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^-\n@@ -119,8 +130,19 @@ LL |     type Iterator<'a>: Iterator<Item = Self::Item<'a>>;\n    = note: this bound is currently required to ensure that impls have maximum flexibility\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n+error: missing required bound on `Item`\n+  --> $DIR/self-outlives-lint.rs:147:5\n+   |\n+LL |     type Item<'a>;\n+   |     ^^^^^^^^^^^^^-\n+   |                  |\n+   |                  help: add the required where clause: `where Self: 'a`\n+   |\n+   = note: this bound is currently required to ensure that impls have maximum flexibility\n+   = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n+\n error: missing required bound on `Bar`\n-  --> $DIR/self-outlives-lint.rs:151:5\n+  --> $DIR/self-outlives-lint.rs:156:5\n    |\n LL |     type Bar<'a, 'b>;\n    |     ^^^^^^^^^^^^^^^^-\n@@ -131,7 +153,7 @@ LL |     type Bar<'a, 'b>;\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n error: missing required bound on `Fut`\n-  --> $DIR/self-outlives-lint.rs:167:5\n+  --> $DIR/self-outlives-lint.rs:172:5\n    |\n LL |     type Fut<'out>;\n    |     ^^^^^^^^^^^^^^-\n@@ -141,5 +163,5 @@ LL |     type Fut<'out>;\n    = note: this bound is currently required to ensure that impls have maximum flexibility\n    = note: we are soliciting feedback, see issue #87479 <https://github.com/rust-lang/rust/issues/87479> for more information\n \n-error: aborting due to 13 previous errors\n+error: aborting due to 15 previous errors\n "}]}