{"sha": "c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6", "node_id": "C_kwDOAAsO6NoAKGM2YzE0YTA0MGRjMzM2NjNhM2UxNGYxZThhM2QwOTM4YzY1ZTdjYTY", "commit": {"author": {"name": "Lo\u00efc BRANSTETT", "email": "lolo.branstett@numericable.fr", "date": "2022-03-21T11:59:46Z"}, "committer": {"name": "Lo\u00efc BRANSTETT", "email": "lolo.branstett@numericable.fr", "date": "2022-03-21T11:59:46Z"}, "message": "Update unstable book with the new `values()` form for check-cfg", "tree": {"sha": "170480d7b4c0b9b4d50bda9c36560dbf9c63c77d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/170480d7b4c0b9b4d50bda9c36560dbf9c63c77d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6", "html_url": "https://github.com/rust-lang/rust/commit/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6/comments", "author": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3b84829750cdd74132530642623a8a5f3a7daaa9", "url": "https://api.github.com/repos/rust-lang/rust/commits/3b84829750cdd74132530642623a8a5f3a7daaa9", "html_url": "https://github.com/rust-lang/rust/commit/3b84829750cdd74132530642623a8a5f3a7daaa9"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "486b3d4414f3a3c872f2ae9a871e429e673956c9", "filename": "src/doc/unstable-book/src/compiler-flags/check-cfg.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fcheck-cfg.md", "raw_url": "https://github.com/rust-lang/rust/raw/c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fcheck-cfg.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Fcompiler-flags%2Fcheck-cfg.md?ref=c6c14a040dc33663a3e14f1e8a3d0938c65e7ca6", "patch": "@@ -92,8 +92,6 @@ and `cfg!(name = \"value\")` call. It will check that the `\"value\"` specified is p\n list of expected values. If `\"value\"` is not in it, then `rustc` will report an `unexpected_cfgs`\n lint diagnostic. The default diagnostic level for this lint is `Warn`.\n \n-The form `values()` is an error, because it does not specify a condition name.\n-\n To enable checking of values, but to provide an empty set of valid values, use this form:\n \n ```bash\n@@ -104,13 +102,17 @@ The `--check-cfg values(...)` option can be repeated, both for the same conditio\n different names. If it is repeated for the same condition name, then the sets of values for that\n condition are merged together.\n \n+If `values()` is specified, then `rustc` will enable the checking of well-known values defined\n+by itself. Note that it's necessary to specify the `values()` form to enable the checking of\n+well known values, specifying the other forms doesn't implicitly enable it.\n+\n ## Examples\n \n Consider this command line:\n \n ```bash\n rustc --check-cfg 'names(feature)' \\\n-      --check-cfg 'values(feature,\"lion\",\"zebra\")' \\\n+      --check-cfg 'values(feature, \"lion\", \"zebra\")' \\\n       --cfg 'feature=\"lion\"' -Z unstable-options \\\n       example.rs\n ```"}]}