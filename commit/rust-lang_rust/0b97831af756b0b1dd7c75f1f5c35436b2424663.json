{"sha": "0b97831af756b0b1dd7c75f1f5c35436b2424663", "node_id": "C_kwDOAAsO6NoAKDBiOTc4MzFhZjc1NmIwYjFkZDdjNzVmMWY1YzM1NDM2YjI0MjQ2NjM", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-26T17:50:51Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-26T18:48:03Z"}, "message": "rustdoc: give `.line-number` / `.line-numbers` meaningful names", "tree": {"sha": "c4252ef172c2ae98531c37e4c7dee2bee55e3a3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4252ef172c2ae98531c37e4c7dee2bee55e3a3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b97831af756b0b1dd7c75f1f5c35436b2424663", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b97831af756b0b1dd7c75f1f5c35436b2424663", "html_url": "https://github.com/rust-lang/rust/commit/0b97831af756b0b1dd7c75f1f5c35436b2424663", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b97831af756b0b1dd7c75f1f5c35436b2424663/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1d7dec558d863fb76f98453088b36cb1a926d48", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1d7dec558d863fb76f98453088b36cb1a926d48", "html_url": "https://github.com/rust-lang/rust/commit/e1d7dec558d863fb76f98453088b36cb1a926d48"}], "stats": {"total": 94, "additions": 47, "deletions": 47}, "files": [{"sha": "7ab65bff3469fb0f9e5a2ba44fcfa8101f1f46f8", "filename": "src/librustdoc/html/sources.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fsources.rs?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -274,7 +274,7 @@ pub(crate) fn print_src(\n ) {\n     let lines = s.lines().count();\n     let mut line_numbers = Buffer::empty_from(buf);\n-    line_numbers.write_str(\"<pre class=\\\"line-numbers\\\">\");\n+    line_numbers.write_str(\"<pre class=\\\"src-line-numbers\\\">\");\n     match source_context {\n         SourceContext::Standalone => {\n             for line in 1..=lines {"}, {"sha": "b4c7638b79841ee980877a25068adf1d0cb19c03", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -578,7 +578,7 @@ h2.location a {\n \tposition: relative;\n }\n \n-.example-wrap > pre.line-number {\n+.example-wrap > pre.example-line-numbers {\n \toverflow: initial;\n \tborder: 1px solid;\n \tpadding: 13px 8px;\n@@ -591,15 +591,15 @@ h2.location a {\n \ttext-decoration: underline;\n }\n \n-.line-numbers {\n+.src-line-numbers {\n \ttext-align: right;\n }\n-.rustdoc:not(.source) .example-wrap > pre:not(.line-number) {\n+.rustdoc:not(.source) .example-wrap > pre:not(.example-line-numbers) {\n \twidth: 100%;\n \toverflow-x: auto;\n }\n \n-.rustdoc:not(.source) .example-wrap > pre.line-numbers {\n+.rustdoc:not(.source) .example-wrap > pre.src-line-numbers {\n \twidth: auto;\n \toverflow-x: visible;\n }\n@@ -612,14 +612,14 @@ h2.location a {\n \ttext-align: center;\n }\n \n-.content > .example-wrap pre.line-numbers {\n+.content > .example-wrap pre.src-line-numbers {\n \tposition: relative;\n \t-webkit-user-select: none;\n \t-moz-user-select: none;\n \t-ms-user-select: none;\n \tuser-select: none;\n }\n-.line-numbers span {\n+.src-line-numbers span {\n \tcursor: pointer;\n }\n \n@@ -2067,7 +2067,7 @@ in storage.js plus the media query with (min-width: 701px)\n \tpadding-bottom: 0;\n }\n \n-.scraped-example:not(.expanded) .code-wrapper pre.line-numbers {\n+.scraped-example:not(.expanded) .code-wrapper pre.src-line-numbers {\n \toverflow-x: hidden;\n }\n \n@@ -2113,12 +2113,12 @@ in storage.js plus the media query with (min-width: 701px)\n \tbottom: 0;\n }\n \n-.scraped-example .code-wrapper .line-numbers {\n+.scraped-example .code-wrapper .src-line-numbers {\n \tmargin: 0;\n \tpadding: 14px 0;\n }\n \n-.scraped-example .code-wrapper .line-numbers span {\n+.scraped-example .code-wrapper .src-line-numbers span {\n \tpadding: 0 14px;\n }\n "}, {"sha": "34411ace6fd375134103dc07499cd8e2e08f041a", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -93,8 +93,8 @@ pre, .rustdoc.source .example-wrap {\n \tcolor: #ff7733;\n }\n \n-.line-numbers span { color: #5c6773; }\n-.line-numbers .line-highlighted {\n+.src-line-numbers span { color: #5c6773; }\n+.src-line-numbers .line-highlighted {\n \tcolor: #708090;\n \tbackground-color: rgba(255, 236, 164, 0.06);\n \tpadding-right: 4px;\n@@ -171,7 +171,7 @@ details.rustdoc-toggle > summary::before {\n \tcolor: #788797;\n }\n \n-.line-numbers :target { background-color: transparent; }\n+.src-line-numbers :target { background-color: transparent; }\n \n /* Code highlighting */\n pre.rust .number, pre.rust .string { color: #b8cc52; }\n@@ -190,7 +190,7 @@ pre.rust .attribute {\n \tcolor: #e6e1cf;\n }\n \n-.example-wrap > pre.line-number {\n+.example-wrap > pre.example-line-numbers {\n \tcolor: #5c67736e;\n \tborder: none;\n }"}, {"sha": "9978f5f91874cb7b3b43e80212c61fb64195db8d", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -54,8 +54,8 @@ input:focus + .slider {\n \tbackground: #444;\n }\n \n-.line-numbers span { color: #3B91E2; }\n-.line-numbers .line-highlighted {\n+.src-line-numbers span { color: #3B91E2; }\n+.src-line-numbers .line-highlighted {\n \tbackground-color: #0a042f !important;\n }\n \n@@ -141,7 +141,7 @@ details.rustdoc-toggle > summary::before {\n \tbackground: none;\n }\n \n-.line-numbers :target { background-color: transparent; }\n+.src-line-numbers :target { background-color: transparent; }\n \n /* Code highlighting */\n pre.rust .kw { color: #ab8ac1; }\n@@ -155,7 +155,7 @@ pre.rust .question-mark {\n \tcolor: #ff9011;\n }\n \n-.example-wrap > pre.line-number {\n+.example-wrap > pre.example-line-numbers {\n \tborder-color: #4a4949;\n }\n "}, {"sha": "377aca7b3a79fa9e949a3dbb5847a4f884271b12", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -53,8 +53,8 @@ input:focus + .slider {\n \tbackground-color: #fff;\n }\n \n-.line-numbers span { color: #c67e2d; }\n-.line-numbers .line-highlighted {\n+.src-line-numbers span { color: #c67e2d; }\n+.src-line-numbers .line-highlighted {\n \tbackground-color: #FDFFD3 !important;\n }\n \n@@ -125,7 +125,7 @@ body.source .example-wrap pre.rust a {\n .stab { background: #FFF5D6; border-color: #FFC600; }\n .stab.portability > code { background: none; }\n \n-.line-numbers :target { background-color: transparent; }\n+.src-line-numbers :target { background-color: transparent; }\n \n /* Code highlighting */\n pre.rust .kw { color: #8959A8; }\n@@ -141,7 +141,7 @@ pre.rust .question-mark {\n \tcolor: #ff9011;\n }\n \n-.example-wrap > pre.line-number {\n+.example-wrap > pre.example-line-numbers {\n \tborder-color: #c7c7c7;\n }\n "}, {"sha": "bbaf6d3b507978834532e30c63792949d3401fc2", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -699,7 +699,7 @@ function loadCss(cssFileName) {\n     window.rustdoc_add_line_numbers_to_examples = () => {\n         onEachLazy(document.getElementsByClassName(\"rust-example-rendered\"), x => {\n             const parent = x.parentNode;\n-            const line_numbers = parent.querySelectorAll(\".line-number\");\n+            const line_numbers = parent.querySelectorAll(\".example-line-numbers\");\n             if (line_numbers.length > 0) {\n                 return;\n             }\n@@ -709,7 +709,7 @@ function loadCss(cssFileName) {\n                 elems.push(i + 1);\n             }\n             const node = document.createElement(\"pre\");\n-            addClass(node, \"line-number\");\n+            addClass(node, \"example-line-numbers\");\n             node.innerHTML = elems.join(\"\\n\");\n             parent.insertBefore(node, x);\n         });\n@@ -718,7 +718,7 @@ function loadCss(cssFileName) {\n     window.rustdoc_remove_line_numbers_from_examples = () => {\n         onEachLazy(document.getElementsByClassName(\"rust-example-rendered\"), x => {\n             const parent = x.parentNode;\n-            const line_numbers = parent.querySelectorAll(\".line-number\");\n+            const line_numbers = parent.querySelectorAll(\".example-line-numbers\");\n             for (const node of line_numbers) {\n                 parent.removeChild(node);\n             }"}, {"sha": "d0fd115fd15c6d2fada74ce93e19d9f8bd34b92b", "filename": "src/librustdoc/html/static/js/scrape-examples.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fscrape-examples.js", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fscrape-examples.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fscrape-examples.js?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -8,7 +8,7 @@\n \n     // Scroll code block to the given code location\n     function scrollToLoc(elt, loc) {\n-        const lines = elt.querySelector(\".line-numbers\");\n+        const lines = elt.querySelector(\".src-line-numbers\");\n         let scrollOffset;\n \n         // If the block is greater than the size of the viewer,"}, {"sha": "8286e9201e649f9394829b252561f99292713bb6", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -183,7 +183,7 @@ function highlightSourceLines(match) {\n     if (x) {\n         x.scrollIntoView();\n     }\n-    onEachLazy(document.getElementsByClassName(\"line-numbers\"), e => {\n+    onEachLazy(document.getElementsByClassName(\"src-line-numbers\"), e => {\n         onEachLazy(e.getElementsByTagName(\"span\"), i_e => {\n             removeClass(i_e, \"line-highlighted\");\n         });\n@@ -245,7 +245,7 @@ window.addEventListener(\"hashchange\", () => {\n     }\n });\n \n-onEachLazy(document.getElementsByClassName(\"line-numbers\"), el => {\n+onEachLazy(document.getElementsByClassName(\"src-line-numbers\"), el => {\n     el.addEventListener(\"click\", handleSourceHighlight);\n });\n "}, {"sha": "d8658a0f255771f25ed4e22391af3fc2437518d9", "filename": "src/test/run-make-fulldeps/rustdoc-scrape-examples-macros/src/lib.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-scrape-examples-macros%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-scrape-examples-macros%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-scrape-examples-macros%2Fsrc%2Flib.rs?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -1,8 +1,8 @@\n // Scraped example should only include line numbers for items b and c in ex.rs\n-// @!has foobar/fn.f.html '//*[@class=\"line-numbers\"]' '14'\n-// @has foobar/fn.f.html '//*[@class=\"line-numbers\"]' '15'\n-// @has foobar/fn.f.html '//*[@class=\"line-numbers\"]' '21'\n-// @!has foobar/fn.f.html '//*[@class=\"line-numbers\"]' '22'\n+// @!has foobar/fn.f.html '//*[@class=\"src-line-numbers\"]' '14'\n+// @has foobar/fn.f.html '//*[@class=\"src-line-numbers\"]' '15'\n+// @has foobar/fn.f.html '//*[@class=\"src-line-numbers\"]' '21'\n+// @!has foobar/fn.f.html '//*[@class=\"src-line-numbers\"]' '22'\n \n pub fn f() {}\n "}, {"sha": "79090b499c832496bae34960446b94c47786e7c8", "filename": "src/test/rustdoc-gui/basic-code.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fbasic-code.goml?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -1,3 +1,3 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n click: \".srclink\"\n-assert-count: (\".line-numbers\", 1)\n+assert-count: (\".src-line-numbers\", 1)"}, {"sha": "4e1e83c0fbd73f86e8cb1a47e2056d4814121a8f", "filename": "src/test/rustdoc-gui/docblock-code-block-line-number.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -2,24 +2,24 @@\n goto: file://|DOC_PATH|/test_docs/fn.foo.html\n \n // We check that without this setting, there is no line number displayed.\n-assert-false: \"pre.line-number\"\n+assert-false: \"pre.example-line-numbers\"\n \n // We now set the setting to show the line numbers on code examples.\n local-storage: {\"rustdoc-line-numbers\": \"true\" }\n // We reload to make the line numbers appear.\n reload:\n \n // We wait for them to be added into the DOM by the JS...\n-wait-for: \"pre.line-number\"\n+wait-for: \"pre.example-line-numbers\"\n // If the test didn't fail, it means that it was found!\n // Let's now check some CSS properties...\n-assert-css: (\"pre.line-number\", {\n+assert-css: (\"pre.example-line-numbers\", {\n     \"margin\": \"0px\",\n     \"padding\": \"13px 8px\",\n     \"text-align\": \"right\",\n })\n // The first code block has two lines so let's check its `<pre>` elements lists both of them.\n-assert-text: (\"pre.line-number\", \"1\\n2\")\n+assert-text: (\"pre.example-line-numbers\", \"1\\n2\")\n \n // Now, try changing the setting dynamically. We'll turn it off, using the settings menu,\n // and make sure it goes away.\n@@ -32,8 +32,8 @@ assert-css: (\"#settings\", {\"display\": \"block\"})\n // Then, click the toggle button.\n click: \"input#line-numbers + .slider\"\n wait-for: 100 // wait-for-false does not exist\n-assert-false: \"pre.line-number\"\n+assert-false: \"pre.example-line-numbers\"\n \n // Finally, turn it on again.\n click: \"input#line-numbers + .slider\"\n-wait-for: \"pre.line-number\"\n+wait-for: \"pre.example-line-numbers\""}, {"sha": "5f0bb7f19c05043c61540567ccb1fe456cb009b6", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0b97831af756b0b1dd7c75f1f5c35436b2424663/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=0b97831af756b0b1dd7c75f1f5c35436b2424663", "patch": "@@ -1,30 +1,30 @@\n // Checks that the interactions with the source code pages are working as expected.\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // Check that we can click on the line number.\n-click: \".line-numbers > span:nth-child(4)\" // This is the span for line 4.\n+click: \".src-line-numbers > span:nth-child(4)\" // This is the span for line 4.\n // Ensure that the page URL was updated.\n assert-document-property: ({\"URL\": \"lib.rs.html#4\"}, ENDS_WITH)\n assert-attribute: (\"//*[@id='4']\", {\"class\": \"line-highlighted\"})\n // We now check that the good spans are highlighted\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html#4-6\n-assert-attribute-false: (\".line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n-assert-attribute: (\".line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n-assert-attribute-false: (\".line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".src-line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".src-line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".src-line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})\n // This is to ensure that the content is correctly align with the line numbers.\n compare-elements-position: (\"//*[@id='1']\", \".rust > code > span\", (\"y\"))\n \n // Assert that the line numbers text is aligned to the right.\n-assert-css: (\".line-numbers\", {\"text-align\": \"right\"})\n+assert-css: (\".src-line-numbers\", {\"text-align\": \"right\"})\n \n // Now let's check that clicking on something else than the line number doesn't\n // do anything (and certainly not add a `#NaN` to the URL!).\n show-text: true\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n // We use this assert-position to know where we will click.\n assert-position: (\"//*[@id='1']\", {\"x\": 104, \"y\": 103})\n-// We click on the left of the \"1\" span but still in the \"line-number\" `<pre>`.\n+// We click on the left of the \"1\" span but still in the \"src-line-number\" `<pre>`.\n click: (103, 103)\n assert-document-property: ({\"URL\": \"/lib.rs.html\"}, ENDS_WITH)\n "}]}