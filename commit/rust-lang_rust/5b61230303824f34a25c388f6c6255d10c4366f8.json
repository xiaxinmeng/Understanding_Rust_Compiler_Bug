{"sha": "5b61230303824f34a25c388f6c6255d10c4366f8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViNjEyMzAzMDM4MjRmMzRhMjVjMzg4ZjZjNjI1NWQxMGM0MzY2Zjg=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2020-08-14T21:46:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-14T21:46:44Z"}, "message": "Rollup merge of #74409 - LukasKalbertodt:improve-debug-impl-of-socketaddr-ipaddr, r=Amanieu\n\nChange Debug impl of SocketAddr and IpAddr to match their Display output\n\nThis has already been done for `SocketAddrV4`, `SocketAddrV6`, `IpAddrV4` and `IpAddrV6`. I don't see a point to keep the rather bad to read derived impl, especially so when pretty printing:\n\n    V4(\n        127.0.0.1\n    )\n\nFrom the `Display`, one can easily and unambiguously see if it's V4 or V6. Two examples:\n\n```\n127.0.0.1:443\n[2001:db8:85a3::8a2e:370:7334]:443\n```\n\nLuckily the docs explicitly state that `Debug` output is not stable and that it may be changed at any time.\n\nUsing `Display` as `Debug` is very convenient for configuration structs (e.g. for webservers) that often just have a `derive(Debug)` and are printed that way to the one starting the server.", "tree": {"sha": "854dcbcd20e0c98cceba0603716bdc2c4db075e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/854dcbcd20e0c98cceba0603716bdc2c4db075e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b61230303824f34a25c388f6c6255d10c4366f8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfNwZECRBK7hj4Ov3rIwAAdHIIADi5Jiz0gdnvoQB1oeJZHyYK\ne3bS8FEbMq/pst+S/2aaoz/TYzqqM+CYAApH9L6B7CIX0ZOUQnAZveGwBuMl9lpH\nfGOi6kC+dZwO10sY/sVs2SU2nzLEkSgWbfiJsQIjLWcTpzmpGZUPcO84hF08Tkkv\nqJFRQ8n4SaDvlE6emaBtMCgQUpedB+HTlLn2HGgoXxsDrrUMbgt4iWJMV0KnyPVG\nJ6nY1Igs05rIubq+AEzO9HKU4Rm0pZppYy3drwLgWpR+sg/aDsRsgvTqUvVSE63N\nbxC5FMyiYEAXIASDEhynQiTrbZW791RD6LlW+3p/rDJrLEO5f//XFuK1CU8m1VM=\n=rAZf\n-----END PGP SIGNATURE-----\n", "payload": "tree 854dcbcd20e0c98cceba0603716bdc2c4db075e8\nparent dae020d49116dc684b92b0f7d7c10b29520411f2\nparent 6293dca1e880394d90fe80055216328fe4d9702e\nauthor Tyler Mandry <tmandry@gmail.com> 1597441604 -0700\ncommitter GitHub <noreply@github.com> 1597441604 -0700\n\nRollup merge of #74409 - LukasKalbertodt:improve-debug-impl-of-socketaddr-ipaddr, r=Amanieu\n\nChange Debug impl of SocketAddr and IpAddr to match their Display output\n\nThis has already been done for `SocketAddrV4`, `SocketAddrV6`, `IpAddrV4` and `IpAddrV6`. I don't see a point to keep the rather bad to read derived impl, especially so when pretty printing:\n\n    V4(\n        127.0.0.1\n    )\n\nFrom the `Display`, one can easily and unambiguously see if it's V4 or V6. Two examples:\n\n```\n127.0.0.1:443\n[2001:db8:85a3::8a2e:370:7334]:443\n```\n\nLuckily the docs explicitly state that `Debug` output is not stable and that it may be changed at any time.\n\nUsing `Display` as `Debug` is very convenient for configuration structs (e.g. for webservers) that often just have a `derive(Debug)` and are printed that way to the one starting the server.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b61230303824f34a25c388f6c6255d10c4366f8", "html_url": "https://github.com/rust-lang/rust/commit/5b61230303824f34a25c388f6c6255d10c4366f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b61230303824f34a25c388f6c6255d10c4366f8/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dae020d49116dc684b92b0f7d7c10b29520411f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/dae020d49116dc684b92b0f7d7c10b29520411f2", "html_url": "https://github.com/rust-lang/rust/commit/dae020d49116dc684b92b0f7d7c10b29520411f2"}, {"sha": "6293dca1e880394d90fe80055216328fe4d9702e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6293dca1e880394d90fe80055216328fe4d9702e", "html_url": "https://github.com/rust-lang/rust/commit/6293dca1e880394d90fe80055216328fe4d9702e"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "4f751656e09c82d8d348345840f8ace30006d18d", "filename": "library/std/src/net/addr.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5b61230303824f34a25c388f6c6255d10c4366f8/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b61230303824f34a25c388f6c6255d10c4366f8/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Faddr.rs?ref=5b61230303824f34a25c388f6c6255d10c4366f8", "patch": "@@ -37,7 +37,7 @@ use crate::vec;\n /// assert_eq!(socket.port(), 8080);\n /// assert_eq!(socket.is_ipv4(), true);\n /// ```\n-#[derive(Copy, Clone, PartialEq, Eq, Hash, Debug, PartialOrd, Ord)]\n+#[derive(Copy, Clone, PartialEq, Eq, Hash, PartialOrd, Ord)]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub enum SocketAddr {\n     /// An IPv4 socket address.\n@@ -597,6 +597,13 @@ impl fmt::Display for SocketAddr {\n     }\n }\n \n+#[stable(feature = \"rust1\", since = \"1.0.0\")]\n+impl fmt::Debug for SocketAddr {\n+    fn fmt(&self, fmt: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        fmt::Display::fmt(self, fmt)\n+    }\n+}\n+\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl fmt::Display for SocketAddrV4 {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {"}, {"sha": "9d7b2b807636f9568072dcf3f0397d052b185b68", "filename": "library/std/src/net/ip.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5b61230303824f34a25c388f6c6255d10c4366f8/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b61230303824f34a25c388f6c6255d10c4366f8/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Fip.rs?ref=5b61230303824f34a25c388f6c6255d10c4366f8", "patch": "@@ -40,7 +40,7 @@ use crate::sys_common::{AsInner, FromInner};\n /// assert_eq!(localhost_v4.is_ipv4(), true);\n /// ```\n #[stable(feature = \"ip_addr\", since = \"1.7.0\")]\n-#[derive(Copy, Clone, Eq, PartialEq, Debug, Hash, PartialOrd, Ord)]\n+#[derive(Copy, Clone, Eq, PartialEq, Hash, PartialOrd, Ord)]\n pub enum IpAddr {\n     /// An IPv4 address.\n     #[stable(feature = \"ip_addr\", since = \"1.7.0\")]\n@@ -802,6 +802,13 @@ impl fmt::Display for IpAddr {\n     }\n }\n \n+#[stable(feature = \"ip_addr\", since = \"1.7.0\")]\n+impl fmt::Debug for IpAddr {\n+    fn fmt(&self, fmt: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        fmt::Display::fmt(self, fmt)\n+    }\n+}\n+\n #[stable(feature = \"ip_from_ip\", since = \"1.16.0\")]\n impl From<Ipv4Addr> for IpAddr {\n     /// Copies this address to a new `IpAddr::V4`."}]}