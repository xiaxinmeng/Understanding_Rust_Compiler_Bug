{"sha": "63df2484146a3f2e34aa743ac600eb82620cb70a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzZGYyNDg0MTQ2YTNmMmUzNGFhNzQzYWM2MDBlYjgyNjIwY2I3MGE=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-07-11T22:04:32Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-07-11T22:04:32Z"}, "message": "Revert \"Reorganize lib-glob code to avoid accidentally duplicating lib/ subdirectory.\"\n\nThis reverts commit 2cf6bf87c348f4a1079aa1c17e51eb45d9b89a5f.", "tree": {"sha": "26775722e85a654ae6d5e80056f3e9814aa9762b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/26775722e85a654ae6d5e80056f3e9814aa9762b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63df2484146a3f2e34aa743ac600eb82620cb70a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63df2484146a3f2e34aa743ac600eb82620cb70a", "html_url": "https://github.com/rust-lang/rust/commit/63df2484146a3f2e34aa743ac600eb82620cb70a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63df2484146a3f2e34aa743ac600eb82620cb70a/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cf6bf87c348f4a1079aa1c17e51eb45d9b89a5f", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cf6bf87c348f4a1079aa1c17e51eb45d9b89a5f", "html_url": "https://github.com/rust-lang/rust/commit/2cf6bf87c348f4a1079aa1c17e51eb45d9b89a5f"}], "stats": {"total": 93, "additions": 52, "deletions": 41}, "files": [{"sha": "3a762f1c00ffc6d4913a60e0e885169bf1306126", "filename": "Makefile.in", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/63df2484146a3f2e34aa743ac600eb82620cb70a/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/63df2484146a3f2e34aa743ac600eb82620cb70a/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=63df2484146a3f2e34aa743ac600eb82620cb70a", "patch": "@@ -118,10 +118,14 @@ CFG_STDLIB :=$(call CFG_LIB_NAME,std)\n CFG_LIBRUSTC :=$(call CFG_LIB_NAME,rustc)\n CFG_LIBSYNTAX :=$(call CFG_LIB_NAME,syntax)\n \n-STDLIB_GLOB =$(call CFG_LIB_GLOB,$(1),std)\n-CORELIB_GLOB =$(call CFG_LIB_GLOB,$(1),core)\n-LIBRUSTC_GLOB =$(call CFG_LIB_GLOB,$(1),rustc)\n-LIBSYNTAX_GLOB =$(call CFG_LIB_GLOB,$(1),syntax)\n+STDLIB_GLOB :=$(call CFG_LIB_GLOB,std)\n+CORELIB_GLOB :=$(call CFG_LIB_GLOB,core)\n+LIBRUSTC_GLOB :=$(call CFG_LIB_GLOB,rustc)\n+LIBSYNTAX_GLOB :=$(call CFG_LIB_GLOB,syntax)\n+STDLIB_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,std)\n+CORELIB_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,core)\n+LIBRUSTC_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,rustc)\n+LIBSYNTAX_DSYM_GLOB :=$(call CFG_LIB_DSYM_GLOB,syntax)\n \n # version-string calculation\n CFG_GIT_DIR := $(CFG_SRC_DIR).git"}, {"sha": "d36cbaf7d0bf14ce613b02153fad666766a9be4a", "filename": "mk/clean.mk", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fclean.mk", "raw_url": "https://github.com/rust-lang/rust/raw/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fclean.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fclean.mk?ref=63df2484146a3f2e34aa743ac600eb82620cb70a", "patch": "@@ -62,10 +62,10 @@ clean$(1)_H_$(2):\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_STDLIB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_LIBRUSTC)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_LIBSYNTAX)\n-\t$(Q)rm -f $$(call CORELIB_GLOB,$$(HLIB$(1)_H_$(2)))\n-\t$(Q)rm -f $$(call STDLIB_GLOB,$$(HLIB$(1)_H_$(2))))\n-\t$(Q)rm -f $$(call LIBRUSTC_GLOB,$$(HLIB$(1)_H_$(2)))\n-\t$(Q)rm -f $$(call LIBSYNTAX_GLOB,$$(HLIB$(1)_H_$(2)))\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CORELIB_GLOB)\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(STDLIB_GLOB)\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(LIBRUSTC_GLOB)\n+\t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(LIBSYNTAX_GLOB)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/$(CFG_RUSTLLVM)\n \t$(Q)rm -f $$(HLIB$(1)_H_$(2))/libstd.rlib\n \n@@ -88,10 +88,10 @@ clean$(1)_T_$(2)_H_$(3):\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_STDLIB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTC)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBSYNTAX)\n-\t$(Q)rm -f $$(call CORELIB_GLOB,$$(TLIB$(1)_T_$(2)_H_$(3)))\n-\t$(Q)rm -f $$(call STDLIB_GLOB,$$(TLIB$(1)_T_$(2)_H_$(3)))\n-\t$(Q)rm -f $$(call LIBRUSTC_GLOB,$$(TLIB$(1)_T_$(2)_H_$(3)))\n-\t$(Q)rm -f $$(call LIBSYNTAX_GLOB,$$(TLIB$(1)_T_$(2)_H_$(3)))\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CORELIB_GLOB)\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(STDLIB_GLOB)\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(LIBRUSTC_GLOB)\n+\t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(LIBSYNTAX_GLOB)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_RUSTLLVM)\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/libstd.rlib\n \t$(Q)rm -f $$(TLIB$(1)_T_$(2)_H_$(3))/libmorestack.a"}, {"sha": "c71e48f6f120514c489ca997adcc4073ee8e248d", "filename": "mk/host.mk", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fhost.mk", "raw_url": "https://github.com/rust-lang/rust/raw/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fhost.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fhost.mk?ref=63df2484146a3f2e34aa743ac600eb82620cb70a", "patch": "@@ -30,7 +30,8 @@ $$(HLIB$(2)_H_$(4))/$$(CFG_LIBRUSTC): \\\n \t$$(HSTDLIB_DEFAULT$(2)_H_$(3))\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n-\t$$(Q)cp -R $$(call LIBRUSTC_GLOB,$$(TLIB$(1)_T_$(4)_H_$(3))) \\\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTC_GLOB) \\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBRUSTC_DSYM_GLOB) \\\n \t        $$(HLIB$(2)_H_$(4))\n \n $$(HLIB$(2)_H_$(4))/$$(CFG_LIBSYNTAX): \\\n@@ -41,7 +42,8 @@ $$(HLIB$(2)_H_$(4))/$$(CFG_LIBSYNTAX): \\\n \t$$(HSTDLIB_DEFAULT$(2)_H_$(3))\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n-\t$$(Q)cp -R $$(call LIBSYNTAX_GLOB,$$(TLIB$(1)_T_$(4)_H_$(3))) \\\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBSYNTAX_GLOB) \\\n+\t\t$$(TLIB$(1)_T_$(4)_H_$(3))/$(LIBSYNTAX_DSYM_GLOB) \\\n \t        $$(HLIB$(2)_H_$(4))\n \n $$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME): \\\n@@ -54,7 +56,15 @@ $$(HLIB$(2)_H_$(4))/$$(CFG_CORELIB): \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n-\t$$(Q)cp -R $$(call CORELIB_GLOB,$$(TLIB$(1)_T_$(4)_H_$(3))) \\\n+# Subtle: We do not let the shell expand $(CORELIB_DSYM_GLOB) directly rather\n+# we use Make's $$(wildcard) facility. The reason is that, on mac, when using\n+# USE_SNAPSHOT_CORELIB, we copy the core.dylib file out of the snapshot.\n+# In that case, there is no .dSYM file.  Annoyingly, bash then refuses to expand\n+# glob, and cp reports an error because libcore-*.dylib.dsym does not exist.\n+# Make instead expands the glob to nothing, which gives us the correct behavior.\n+# (Copy .dsym file if it exists, but do nothing otherwise)\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(CORELIB_GLOB) \\\n+\t\t$$(wildcard $$(TLIB$(1)_T_$(4)_H_$(3))/$(CORELIB_DSYM_GLOB)) \\\n \t        $$(HLIB$(2)_H_$(4))\n \n $$(HLIB$(2)_H_$(4))/$$(CFG_STDLIB): \\\n@@ -63,7 +73,8 @@ $$(HLIB$(2)_H_$(4))/$$(CFG_STDLIB): \\\n \t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n-\t$$(Q)cp -R $$(call STDLIB_GLOB,$$(TLIB$(1)_T_$(4)_H_$(3))) \\\n+\t$$(Q)cp -R $$(TLIB$(1)_T_$(4)_H_$(3))/$(STDLIB_GLOB) \\\n+\t\t$$(wildcard $$(TLIB$(1)_T_$(4)_H_$(3))/$(STDLIB_DSYM_GLOB)) \\\n \t        $$(HLIB$(2)_H_$(4))\n \n $$(HLIB$(2)_H_$(4))/libcore.rlib: \\"}, {"sha": "029fa30e7b8fff73847e6a73c461f033f007f1f1", "filename": "mk/install.mk", "status": "modified", "additions": 16, "deletions": 21, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=63df2484146a3f2e34aa743ac600eb82620cb70a", "patch": "@@ -6,12 +6,11 @@\n # destination directory as arg 2, and filename/libname-glob as arg 3\n ifdef VERBOSE\n  INSTALL = install -m755 $(1)/$(3) $(2)/$(3)\n- INSTALL_LIB = install -m644 $(3) $(2)/\n+ INSTALL_LIB = install -m644 `ls -rt1 $(1)/$(3) | tail -1` $(2)/\n else\n  INSTALL = $(Q)$(call E, install: $(2)/$(3)) && install -m755 $(1)/$(3) $(2)/$(3)\n- INSTALL_LIB = $(Q)$(call E, install_lib: \\\n-                   $(addprefix $(2)/,$(basename $(3)))) &&  \\\n-\t               install -m644 $(3) $(2)/\n+ INSTALL_LIB = $(Q)$(call E, install_lib: $(2)/$(3)) &&                    \\\n+\t       install -m644 `ls -rt1 $(1)/$(3) | tail -1` $(2)/\n endif\n \n # The stage we install from\n@@ -38,17 +37,13 @@ install-target-$(1)-host-$(2): $$(SREQ$$(ISTAGE)_T_$(1)_H_$(2))\n \t$$(Q)mkdir -p $$(PTL$(1)$(2))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CFG_RUNTIME))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),\\\n-            $$(call CORELIB_GLOB,$$(TL$(1)$(2))))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CORELIB_GLOB))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),\\\n-            $$(call STDLIB_GLOB,$$(TL$(1)$(2))))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(STDLIB_GLOB))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),\\\n-            $$(call LIBRUSTC_GLOB,$$(TL$(1)$(2))))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTC_GLOB))\n \t$$(Q)$$(call INSTALL_LIB, \\\n-\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),\\\n-            $$(call LIBSYNTAX_GLOB,$$(TL$(1)$(2))))\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBSYNTAX_GLOB))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),libmorestack.a)\n \n endef\n@@ -79,10 +74,10 @@ install-host: $(SREQ$(ISTAGE)_T_$(CFG_HOST_TRIPLE)_H_$(CFG_HOST_TRIPLE))\n \t$(Q)$(call INSTALL,$(HB2),$(PHB),cargo$(X))\n \t$(Q)$(call INSTALL,$(HB2),$(PHB),rustdoc$(X))\n \t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUNTIME))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(call CORELIB_GLOB,$(PHL)))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(call STDLIB_GLOB,$(PHL)))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(call LIBRUSTC_GLOB,$(PHL)))\n-\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(call LIBSYNTAX_GLOB,$(PHL)))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(CORELIB_GLOB))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(STDLIB_GLOB))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTC_GLOB))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBSYNTAX_GLOB))\n \t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUSTLLVM))\n \t$(Q)$(call INSTALL,$(S)/man, \\\n \t     $(PREFIX_ROOT)/share/man/man1,rustc.1)\n@@ -91,7 +86,7 @@ install-targets: $(INSTALL_TARGET_RULES)\n \n \n HOST_LIB_FROM_HL_GLOB = \\\n-  $(patsubst $(HL)/%,$(PHL)/%,$(1))\n+  $(patsubst $(HL)/%,$(PHL)/%,$(wildcard $(HL)/$(1)))\n \n uninstall:\n \t$(Q)rm -f $(PHB)/rustc$(X)\n@@ -100,10 +95,10 @@ uninstall:\n \t$(Q)rm -f $(PHL)/$(CFG_RUSTLLVM)\n \t$(Q)rm -f $(PHL)/$(CFG_RUNTIME)\n \t$(Q)for i in \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(call CORELIB_GLOB,$(HL))) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(call STDLIB_GLOB,$(HL))) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(call LIBRUSTC_GLOB,$(HL))) \\\n-          $(call HOST_LIB_FROM_HL_GLOB,$(call LIBSYNTAX_GLOB,$(HL))) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(CORELIB_GLOB)) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(STDLIB_GLOB)) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBRUSTC_GLOB)) \\\n+          $(call HOST_LIB_FROM_HL_GLOB,$(LIBSYNTAX_GLOB)) \\\n         ; \\\n         do rm -f $$i ; \\\n         done"}, {"sha": "43a943347a573b9ce4123ab769ce7a54e6e6a681", "filename": "mk/platform.mk", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/63df2484146a3f2e34aa743ac600eb82620cb70a/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=63df2484146a3f2e34aa743ac600eb82620cb70a", "patch": "@@ -21,7 +21,7 @@ CFG_DSYMUTIL := true\n \n ifneq ($(findstring freebsd,$(CFG_OSTYPE)),)\n   CFG_LIB_NAME=lib$(1).so\n-  CFG_LIB_GLOB=$(wildcard $(1)/lib$(2)-*.so)\n+  CFG_LIB_GLOB=lib$(1)-*.so\n   CFG_GCCISH_CFLAGS += -fPIC -I/usr/local/include\n   CFG_GCCISH_LINK_FLAGS += -shared -fPIC -lpthread -lrt\n   CFG_GCCISH_DEF_FLAG := -Wl,--export-dynamic,--dynamic-list=\n@@ -40,7 +40,7 @@ endif\n \n ifneq ($(findstring linux,$(CFG_OSTYPE)),)\n   CFG_LIB_NAME=lib$(1).so\n-  CFG_LIB_GLOB=$(wildcard $(1)/lib$(2)-*.so)\n+  CFG_LIB_GLOB=lib$(1)-*.so\n   CFG_GCCISH_CFLAGS += -fPIC\n   CFG_GCCISH_LINK_FLAGS += -shared -fPIC -ldl -lpthread -lrt\n   CFG_GCCISH_DEF_FLAG := -Wl,--export-dynamic,--dynamic-list=\n@@ -76,7 +76,8 @@ endif\n \n ifneq ($(findstring darwin,$(CFG_OSTYPE)),)\n   CFG_LIB_NAME=lib$(1).dylib\n-  CFG_LIB_GLOB=$(wildcard $(1)/lib$(2)-*.dylib $(1)/lib$(2)-*.dylib.dSYM)\n+  CFG_LIB_GLOB=lib$(1)-*.dylib\n+  CFG_LIB_DSYM_GLOB=lib$(1)-*.dylib.dSYM\n   CFG_UNIXY := 1\n   CFG_LDENV := DYLD_LIBRARY_PATH\n   CFG_GCCISH_LINK_FLAGS += -dynamiclib -lpthread -framework CoreServices -Wl,-no_compact_unwind\n@@ -173,7 +174,7 @@ ifdef CFG_WINDOWSY\n \n   CFG_EXE_SUFFIX := .exe\n   CFG_LIB_NAME=$(1).dll\n-  CFG_LIB_GLOB=$(wildcard $(1)/$(2)-*.dll)\n+  CFG_LIB_GLOB=$(1)-*.dll\n   CFG_DEF_SUFFIX := .def\n ifdef MSYSTEM\n   CFG_LDPATH :=$(CFG_LDPATH):$$PATH"}]}