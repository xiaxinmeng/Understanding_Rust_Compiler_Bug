{"sha": "0943b1668d9dcf486a77a97d6c28ccd64ffed609", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA5NDNiMTY2OGQ5ZGNmNDg2YTc3YTk3ZDZjMjhjY2Q2NGZmZWQ2MDk=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-03-15T22:19:11Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-03-15T22:19:11Z"}, "message": "std: Fix overflow when subtracting Instant\n\nThis code was currently only exercised on OSX, but this applies the same method\nof subtraction used on Linux which doesn't have the same overflow issues.\n\nNote that this currently includes no tests, but that's because this is only\nvisible with debug assertions enabled. Soon, however, I'll enable debug\nassertions on all auto builds on the bots so we should get testing for this.\n\nCloses #32268", "tree": {"sha": "ef04d23bc4679a7aac836b12cf2136d31da275c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef04d23bc4679a7aac836b12cf2136d31da275c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0943b1668d9dcf486a77a97d6c28ccd64ffed609", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0943b1668d9dcf486a77a97d6c28ccd64ffed609", "html_url": "https://github.com/rust-lang/rust/commit/0943b1668d9dcf486a77a97d6c28ccd64ffed609", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0943b1668d9dcf486a77a97d6c28ccd64ffed609/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1efa752ea694f7ae125cdaf7911ad44b8e6b0e33", "url": "https://api.github.com/repos/rust-lang/rust/commits/1efa752ea694f7ae125cdaf7911ad44b8e6b0e33", "html_url": "https://github.com/rust-lang/rust/commit/1efa752ea694f7ae125cdaf7911ad44b8e6b0e33"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "1444cf31e853be87a1fe655e42f3cdf73f2540b3", "filename": "src/libstd/sys/unix/time.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0943b1668d9dcf486a77a97d6c28ccd64ffed609/src%2Flibstd%2Fsys%2Funix%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0943b1668d9dcf486a77a97d6c28ccd64ffed609/src%2Flibstd%2Fsys%2Funix%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ftime.rs?ref=0943b1668d9dcf486a77a97d6c28ccd64ffed609", "patch": "@@ -88,11 +88,11 @@ mod inner {\n                         -> Result<Duration, Duration> {\n             if self >= other {\n                 Ok(if self.t.tv_usec >= other.t.tv_usec {\n-                    Duration::new(self.t.tv_sec as u64 - other.t.tv_sec as u64,\n-                                  (self.t.tv_usec as u32 -\n-                                   other.t.tv_usec as u32) * 1000)\n+                    Duration::new((self.t.tv_sec - other.t.tv_sec) as u64,\n+                                  ((self.t.tv_usec -\n+                                    other.t.tv_usec) as u32) * 1000)\n                 } else {\n-                    Duration::new(self.t.tv_sec as u64 - 1 - other.t.tv_sec as u64,\n+                    Duration::new((self.t.tv_sec - 1 - other.t.tv_sec) as u64,\n                                   (self.t.tv_usec as u32 + (USEC_PER_SEC as u32) -\n                                    other.t.tv_usec as u32) * 1000)\n                 })"}]}