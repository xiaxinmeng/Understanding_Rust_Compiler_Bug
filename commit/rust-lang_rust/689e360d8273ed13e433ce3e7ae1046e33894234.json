{"sha": "689e360d8273ed13e433ce3e7ae1046e33894234", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4OWUzNjBkODI3M2VkMTNlNDMzY2UzZTdhZTEwNDZlMzM4OTQyMzQ=", "commit": {"author": {"name": "Dennis Hamester", "email": "dennis.hamester@gmail.com", "date": "2020-07-11T07:26:26Z"}, "committer": {"name": "Dennis Hamester", "email": "dennis.hamester@gmail.com", "date": "2020-07-11T07:26:26Z"}, "message": "test: rustdoc-ui: Add issue-74134, replacing test/rustdoc/issue-74134-*\n\nAs per the discussion in PR #74147, the 4 individual tests are replaced by a\nsingle one.\n\nThe test is expanded to cover all 4 public/private cases, each with and without\n--document-private-items.", "tree": {"sha": "dad4cd132a99b59bfbe086af54fb46fe8ad67099", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dad4cd132a99b59bfbe086af54fb46fe8ad67099"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/689e360d8273ed13e433ce3e7ae1046e33894234", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/689e360d8273ed13e433ce3e7ae1046e33894234", "html_url": "https://github.com/rust-lang/rust/commit/689e360d8273ed13e433ce3e7ae1046e33894234", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/689e360d8273ed13e433ce3e7ae1046e33894234/comments", "author": {"login": "dennis-hamester", "id": 2039492, "node_id": "MDQ6VXNlcjIwMzk0OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2039492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennis-hamester", "html_url": "https://github.com/dennis-hamester", "followers_url": "https://api.github.com/users/dennis-hamester/followers", "following_url": "https://api.github.com/users/dennis-hamester/following{/other_user}", "gists_url": "https://api.github.com/users/dennis-hamester/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennis-hamester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennis-hamester/subscriptions", "organizations_url": "https://api.github.com/users/dennis-hamester/orgs", "repos_url": "https://api.github.com/users/dennis-hamester/repos", "events_url": "https://api.github.com/users/dennis-hamester/events{/privacy}", "received_events_url": "https://api.github.com/users/dennis-hamester/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dennis-hamester", "id": 2039492, "node_id": "MDQ6VXNlcjIwMzk0OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/2039492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dennis-hamester", "html_url": "https://github.com/dennis-hamester", "followers_url": "https://api.github.com/users/dennis-hamester/followers", "following_url": "https://api.github.com/users/dennis-hamester/following{/other_user}", "gists_url": "https://api.github.com/users/dennis-hamester/gists{/gist_id}", "starred_url": "https://api.github.com/users/dennis-hamester/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dennis-hamester/subscriptions", "organizations_url": "https://api.github.com/users/dennis-hamester/orgs", "repos_url": "https://api.github.com/users/dennis-hamester/repos", "events_url": "https://api.github.com/users/dennis-hamester/events{/privacy}", "received_events_url": "https://api.github.com/users/dennis-hamester/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8b16cdbd0f06c66467c082b9d3e190255fa295d", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8b16cdbd0f06c66467c082b9d3e190255fa295d", "html_url": "https://github.com/rust-lang/rust/commit/c8b16cdbd0f06c66467c082b9d3e190255fa295d"}], "stats": {"total": 79, "additions": 36, "deletions": 43}, "files": [{"sha": "03f95f19d326e7b531896f9e2fa56e59de9f6343", "filename": "src/test/rustdoc-ui/issue-74134.public.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/689e360d8273ed13e433ce3e7ae1046e33894234/src%2Ftest%2Frustdoc-ui%2Fissue-74134.public.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/689e360d8273ed13e433ce3e7ae1046e33894234/src%2Ftest%2Frustdoc-ui%2Fissue-74134.public.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fissue-74134.public.stderr?ref=689e360d8273ed13e433ce3e7ae1046e33894234", "patch": "@@ -0,0 +1,10 @@\n+warning: `[PrivateType]` public documentation for `public_item` links to a private item\n+  --> $DIR/issue-74134.rs:19:10\n+   |\n+LL |     /// [`PrivateType`]\n+   |          ^^^^^^^^^^^^^ this item is private\n+   |\n+   = note: `#[warn(intra_doc_link_resolution_failure)]` on by default\n+\n+warning: 1 warning emitted\n+"}, {"sha": "d0747817580da766a8e1d1552b30c90b73058980", "filename": "src/test/rustdoc-ui/issue-74134.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/689e360d8273ed13e433ce3e7ae1046e33894234/src%2Ftest%2Frustdoc-ui%2Fissue-74134.rs", "raw_url": "https://github.com/rust-lang/rust/raw/689e360d8273ed13e433ce3e7ae1046e33894234/src%2Ftest%2Frustdoc-ui%2Fissue-74134.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fissue-74134.rs?ref=689e360d8273ed13e433ce3e7ae1046e33894234", "patch": "@@ -0,0 +1,26 @@\n+// revisions: public private\n+// [private]compile-flags: --document-private-items\n+// check-pass\n+\n+// There are 4 cases here:\n+// 1. public item  -> public type:  no warning\n+// 2. public item  -> private type: warning, if --document-private-items is not passed\n+// 3. private item -> public type:  no warning\n+// 4. private item -> private type: no warning\n+// All 4 cases are tested with and without --document-private-items.\n+//\n+// Case 4 without --document-private-items is the one described in issue #74134.\n+\n+struct PrivateType;\n+pub struct PublicType;\n+\n+pub struct Public {\n+    /// [`PublicType`]\n+    /// [`PrivateType`]\n+    //[public]~^ WARNING `[PrivateType]` public documentation for `public_item` links to a private item\n+    pub public_item: u32,\n+\n+    /// [`PublicType`]\n+    /// [`PrivateType`]\n+    private_item: u32,\n+}"}, {"sha": "72d38638a794c73e4c335792020e3c3728485455", "filename": "src/test/rustdoc/issue-74134-1.rs", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-74134-1.rs?ref=c8b16cdbd0f06c66467c082b9d3e190255fa295d", "patch": "@@ -1,10 +0,0 @@\n-#![deny(intra_doc_link_resolution_failure)]\n-\n-// Linking from a private item to a private type is fine without --document-private-items.\n-\n-struct Private;\n-\n-pub struct Public {\n-    /// [`Private`]\n-    private: Private,\n-}"}, {"sha": "f665e360b498276e67a22e7bc1cc5f97c7209127", "filename": "src/test/rustdoc/issue-74134-2.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-74134-2.rs?ref=c8b16cdbd0f06c66467c082b9d3e190255fa295d", "patch": "@@ -1,11 +0,0 @@\n-// compile-flags: --document-private-items\n-#![deny(intra_doc_link_resolution_failure)]\n-\n-// Linking from a private item to a private type is fine with --document-private-items.\n-\n-struct Private;\n-\n-pub struct Public {\n-    /// [`Private`]\n-    private: Private,\n-}"}, {"sha": "b2709ecdadddacc0c38b27ba6c6bd5f6053d2e67", "filename": "src/test/rustdoc/issue-74134-3.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-74134-3.rs?ref=c8b16cdbd0f06c66467c082b9d3e190255fa295d", "patch": "@@ -1,11 +0,0 @@\n-// should-fail\n-#![deny(intra_doc_link_resolution_failure)]\n-\n-// Linking from a public item to a private type fails without --document-private-items.\n-\n-struct Private;\n-\n-pub struct Public {\n-    /// [`Private`]\n-    pub public: u32,\n-}"}, {"sha": "efff74f279721a28032c191d3c18086d193860a0", "filename": "src/test/rustdoc/issue-74134-4.rs", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-4.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8b16cdbd0f06c66467c082b9d3e190255fa295d/src%2Ftest%2Frustdoc%2Fissue-74134-4.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-74134-4.rs?ref=c8b16cdbd0f06c66467c082b9d3e190255fa295d", "patch": "@@ -1,11 +0,0 @@\n-// compile-flags: --document-private-items\n-#![deny(intra_doc_link_resolution_failure)]\n-\n-// Linking from a public item to a private type is fine with --document-private-items.\n-\n-struct Private;\n-\n-pub struct Public {\n-    /// [`Private`]\n-    pub public: u32,\n-}"}]}