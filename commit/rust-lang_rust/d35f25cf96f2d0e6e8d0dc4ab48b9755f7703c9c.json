{"sha": "d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzNWYyNWNmOTZmMmQwZTZlOGQwZGM0YWI0OGI5NzU1Zjc3MDNjOWM=", "commit": {"author": {"name": "nathanwhit", "email": "nathan.whitaker01@gmail.com", "date": "2019-09-12T02:05:26Z"}, "committer": {"name": "Nathan", "email": "nathan.whitaker01@gmail.com", "date": "2019-09-28T01:06:10Z"}, "message": "Filter out stmts made for the redundant_semicolon lint when pretty-printing", "tree": {"sha": "340b9181dedd50d4abff2af016d4baccd8b25733", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/340b9181dedd50d4abff2af016d4baccd8b25733"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c", "html_url": "https://github.com/rust-lang/rust/commit/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c/comments", "author": {"login": "nathanwhit", "id": 17734409, "node_id": "MDQ6VXNlcjE3NzM0NDA5", "avatar_url": "https://avatars.githubusercontent.com/u/17734409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathanwhit", "html_url": "https://github.com/nathanwhit", "followers_url": "https://api.github.com/users/nathanwhit/followers", "following_url": "https://api.github.com/users/nathanwhit/following{/other_user}", "gists_url": "https://api.github.com/users/nathanwhit/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathanwhit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathanwhit/subscriptions", "organizations_url": "https://api.github.com/users/nathanwhit/orgs", "repos_url": "https://api.github.com/users/nathanwhit/repos", "events_url": "https://api.github.com/users/nathanwhit/events{/privacy}", "received_events_url": "https://api.github.com/users/nathanwhit/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nathanwhit", "id": 17734409, "node_id": "MDQ6VXNlcjE3NzM0NDA5", "avatar_url": "https://avatars.githubusercontent.com/u/17734409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nathanwhit", "html_url": "https://github.com/nathanwhit", "followers_url": "https://api.github.com/users/nathanwhit/followers", "following_url": "https://api.github.com/users/nathanwhit/following{/other_user}", "gists_url": "https://api.github.com/users/nathanwhit/gists{/gist_id}", "starred_url": "https://api.github.com/users/nathanwhit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nathanwhit/subscriptions", "organizations_url": "https://api.github.com/users/nathanwhit/orgs", "repos_url": "https://api.github.com/users/nathanwhit/repos", "events_url": "https://api.github.com/users/nathanwhit/events{/privacy}", "received_events_url": "https://api.github.com/users/nathanwhit/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "084beb83e0e87d673d5fabc844d28e8e8ae2ab4c", "url": "https://api.github.com/repos/rust-lang/rust/commits/084beb83e0e87d673d5fabc844d28e8e8ae2ab4c", "html_url": "https://github.com/rust-lang/rust/commit/084beb83e0e87d673d5fabc844d28e8e8ae2ab4c"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "4b9c2d13f26b95b82d460c498faf7cb3a268125b", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=d35f25cf96f2d0e6e8d0dc4ab48b9755f7703c9c", "patch": "@@ -1657,9 +1657,18 @@ impl<'a> State<'a> {\n                 }\n             }\n             ast::StmtKind::Semi(ref expr) => {\n-                self.space_if_not_bol();\n-                self.print_expr_outer_attr_style(expr, false);\n-                self.s.word(\";\");\n+                match expr.kind {\n+                    // Filter out empty `Tup` exprs created for the `redundant_semicolon`\n+                    // lint, as they shouldn't be visible and interact poorly\n+                    // with proc macros.\n+                    ast::ExprKind::Tup(ref exprs) if exprs.is_empty()\n+                      && expr.attrs.is_empty() => (),\n+                    _ => {\n+                        self.space_if_not_bol();\n+                        self.print_expr_outer_attr_style(expr, false);\n+                        self.s.word(\";\");\n+                    }\n+                }\n             }\n             ast::StmtKind::Mac(ref mac) => {\n                 let (ref mac, style, ref attrs) = **mac;"}]}