{"sha": "90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwZGRmMGRhNmNlOGMyYWEwZWJiOWQ4ZDk2ZGU0MDc3ZWZkNWNhMGM=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-16T18:42:54Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-16T18:42:54Z"}, "message": "Add run-rustfix for bool_comparison lint", "tree": {"sha": "6ab00d07a877ac2e178f74274ecd45cc24ea0fc6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ab00d07a877ac2e178f74274ecd45cc24ea0fc6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAly2IkoQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5tMeEACDCeEB8euN1V0E8BO/SipNMkeVNsIGq+Hr\nOc0KiZGkKYw7ouu432ytK+z0RsoYcVHxVmhi9s1ghvySEuvqM8tjitvNJwQiNxK4\nIEuQ2Jd/z+M3n/hwvhQy8MzXOl4ncgrELNaOKS242m9bDOYjpOLngeYJpJHXB9J4\nNCUzBtt3p6SK4JKV2gMOIYRg4sjayrtDPqOu9u1An+IZVfE9MQHFIlqZoIk4DdCx\nodScuJjwoM0R56HQeflq4+1HccE+hXHxPWO2BJ/Jsum3YnT6yUfQ8e6boUleW2fR\nZTOtsDjSHrMbr1AR4uCiCzI/lZTZKgrKJZyV/WIBnJV0PCNY93I/T+xWax5TZTOE\njxbdzOKBNRkRuA/6kW9HB3Dv88LI7Aw2dWzYGyFVUOrG1xYesZ6P+IWXaomzhOfI\npTFjAWAeKmdYQqNqoZ9C8ADKlY/b+5H2mxa5T0l3waL20uy63JVXo/okZtU4rD1a\nCMAO1DXBkJA0Dw9i1Sd3uyxah6RKlBdrMv33EMA+NV+NckrG8qGZ2fJGlyHE2pKg\n3OuUfQaUE0OrG0qc+HlqxQAxd3wE7y/FglOmkI4k9/T4r5qdo+TxklgCfkxKCrD8\nKhBBV4M3PyvQO2dXMyYcEWNYxFE/QkGP3uI90sxfcO8PBs5RKnfq8EayEHJRsgjC\nuH7H0cVFwQ==\n=riJn\n-----END PGP SIGNATURE-----", "payload": "tree 6ab00d07a877ac2e178f74274ecd45cc24ea0fc6\nparent d516925ec8ff4d39e32830442959fad16407e87e\nauthor Philipp Hansch <dev@phansch.net> 1555440174 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1555440174 +0200\n\nAdd run-rustfix for bool_comparison lint\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "html_url": "https://github.com/rust-lang/rust/commit/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d516925ec8ff4d39e32830442959fad16407e87e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d516925ec8ff4d39e32830442959fad16407e87e", "html_url": "https://github.com/rust-lang/rust/commit/d516925ec8ff4d39e32830442959fad16407e87e"}], "stats": {"total": 143, "additions": 129, "deletions": 14}, "files": [{"sha": "0bd73ec2c104ea437952f660de382ab687b9bd20", "filename": "tests/ui/bool_comparison.fixed", "status": "added", "additions": 113, "deletions": 0, "changes": 113, "blob_url": "https://github.com/rust-lang/rust/blob/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.fixed?ref=90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "patch": "@@ -0,0 +1,113 @@\n+// run-rustfix\n+\n+#[warn(clippy::bool_comparison)]\n+fn main() {\n+    let x = true;\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    let y = true;\n+    if !x & y {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x & !y {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+}\n+\n+#[allow(dead_code)]\n+fn issue3703() {\n+    struct Foo;\n+    impl PartialEq<bool> for Foo {\n+        fn eq(&self, _: &bool) -> bool {\n+            true\n+        }\n+    }\n+    impl PartialEq<Foo> for bool {\n+        fn eq(&self, _: &Foo) -> bool {\n+            true\n+        }\n+    }\n+    impl PartialOrd<bool> for Foo {\n+        fn partial_cmp(&self, _: &bool) -> Option<std::cmp::Ordering> {\n+            None\n+        }\n+    }\n+    impl PartialOrd<Foo> for bool {\n+        fn partial_cmp(&self, _: &Foo) -> Option<std::cmp::Ordering> {\n+            None\n+        }\n+    }\n+\n+    if Foo == true {}\n+    if true == Foo {}\n+    if Foo != true {}\n+    if true != Foo {}\n+    if Foo == false {}\n+    if false == Foo {}\n+    if Foo != false {}\n+    if false != Foo {}\n+    if Foo < false {}\n+    if false < Foo {}\n+}"}, {"sha": "74f504edfd0697054580db65500ea8b62e11c2b7", "filename": "tests/ui/bool_comparison.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.rs?ref=90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "patch": "@@ -1,3 +1,5 @@\n+// run-rustfix\n+\n #[warn(clippy::bool_comparison)]\n fn main() {\n     let x = true;"}, {"sha": "2aa070a00f30914e27a49e4a6a331343574cdb04", "filename": "tests/ui/bool_comparison.stderr", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c/tests%2Fui%2Fbool_comparison.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.stderr?ref=90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "patch": "@@ -1,85 +1,85 @@\n error: equality checks against true are unnecessary\n-  --> $DIR/bool_comparison.rs:4:8\n+  --> $DIR/bool_comparison.rs:6:8\n    |\n LL |     if x == true {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n    |\n    = note: `-D clippy::bool-comparison` implied by `-D warnings`\n \n error: equality checks against false can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:9:8\n+  --> $DIR/bool_comparison.rs:11:8\n    |\n LL |     if x == false {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: equality checks against true are unnecessary\n-  --> $DIR/bool_comparison.rs:14:8\n+  --> $DIR/bool_comparison.rs:16:8\n    |\n LL |     if true == x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: equality checks against false can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:19:8\n+  --> $DIR/bool_comparison.rs:21:8\n    |\n LL |     if false == x {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:24:8\n+  --> $DIR/bool_comparison.rs:26:8\n    |\n LL |     if x != true {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:29:8\n+  --> $DIR/bool_comparison.rs:31:8\n    |\n LL |     if x != false {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: inequality checks against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:34:8\n+  --> $DIR/bool_comparison.rs:36:8\n    |\n LL |     if true != x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:39:8\n+  --> $DIR/bool_comparison.rs:41:8\n    |\n LL |     if false != x {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: less than comparison against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:44:8\n+  --> $DIR/bool_comparison.rs:46:8\n    |\n LL |     if x < true {\n    |        ^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: greater than checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:49:8\n+  --> $DIR/bool_comparison.rs:51:8\n    |\n LL |     if false < x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: greater than checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:54:8\n+  --> $DIR/bool_comparison.rs:56:8\n    |\n LL |     if x > false {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: less than comparison against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:59:8\n+  --> $DIR/bool_comparison.rs:61:8\n    |\n LL |     if true > x {\n    |        ^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: order comparisons between booleans can be simplified\n-  --> $DIR/bool_comparison.rs:65:8\n+  --> $DIR/bool_comparison.rs:67:8\n    |\n LL |     if x < y {\n    |        ^^^^^ help: try simplifying it as shown: `!x & y`\n \n error: order comparisons between booleans can be simplified\n-  --> $DIR/bool_comparison.rs:70:8\n+  --> $DIR/bool_comparison.rs:72:8\n    |\n LL |     if x > y {\n    |        ^^^^^ help: try simplifying it as shown: `x & !y`"}]}