{"sha": "0a988c663080f5c59ccd5a1d1f4e7903495871fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhOTg4YzY2MzA4MGY1YzU5Y2NkNWExZDFmNGU3OTAzNDk1ODcxZmQ=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-06T18:45:36Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-06T18:45:36Z"}, "message": "Don't emit enum_variant_names if remainder starts with a numeric\n\nAs [per the reference](https://doc.rust-lang.org/reference/identifiers.html),\nidentifiers must start with a letter. So we don't suggest a better\nvariant naming in these cases.\n\nFixes #739", "tree": {"sha": "d1c5550d7b34267b7048d68e026850226b6b5d2d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1c5550d7b34267b7048d68e026850226b6b5d2d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a988c663080f5c59ccd5a1d1f4e7903495871fd", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1Jy2QQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5pbPD/9ugHAbPV3t6KSUWA55VUlQMCSc/Myr/Lt3\nsliAlwJPUwg0wj9bnNL18qYapVssLGfmowQPe35gQZugMg4ZOMMVE6i4/kTAkDeF\nGE3jYW8GfgbqEDQ6pgZ0k98BuYSRyLe5kW5Sw6VZavOYve6Gxbcdr/fAEg+dQ8gw\nO4SOUEyXubZMmiWaMGD2Uq1OHMDDpRlnNGuB1M1myaY1iNPV4TfYZ1IWG5mLI7Zd\nSh2V0/MgBh/e/BUBGna5iY/fcJ3CCeWiF2yQoTcjqDXHW2l7msOFMMvTprahAJyo\nImIoFkxbFvsHXdFXlDMHsexfF2ptBQpYXsWNoceNGijAIErsLjPX3oqPmK/OkCWW\nPykc027eoKsu7Lw2Q46LWMLNfGCFNi0NZPzneqKyLYt2hUqN8Js9JaOMso0SfTYN\nSMVO3prXJqWHjw8aINjUr8D/uRS/3Du9hh8LJL23QSGLWCwIUWpToxUd1EV3R1mN\naCshY7P6lWBc6VkyETO2KdaGXOCY4zVZ4dwZg9RCHpf2XiGu8LEnoELAazj7m1Jq\nnN/ef4BV4+SOiq2kl7ZQIeYNmAORsK6z3ZTB0+PHqcdSLEc1+1MrxaWCS5/XdlQR\nfkCmJNUDZ1HzGTXZKbzz4Oz5qAjJrOkLlIdt68RyebJiGZ+DKK8fY4rAUfpXDKoU\nEL/cOrIOsQ==\n=ae+u\n-----END PGP SIGNATURE-----", "payload": "tree d1c5550d7b34267b7048d68e026850226b6b5d2d\nparent ea26a95fc9aa4fc00aa590d68b665339d79a6884\nauthor Philipp Hansch <dev@phansch.net> 1565117136 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1565117136 +0200\n\nDon't emit enum_variant_names if remainder starts with a numeric\n\nAs [per the reference](https://doc.rust-lang.org/reference/identifiers.html),\nidentifiers must start with a letter. So we don't suggest a better\nvariant naming in these cases.\n\nFixes #739\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a988c663080f5c59ccd5a1d1f4e7903495871fd", "html_url": "https://github.com/rust-lang/rust/commit/0a988c663080f5c59ccd5a1d1f4e7903495871fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a988c663080f5c59ccd5a1d1f4e7903495871fd/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea26a95fc9aa4fc00aa590d68b665339d79a6884", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea26a95fc9aa4fc00aa590d68b665339d79a6884", "html_url": "https://github.com/rust-lang/rust/commit/ea26a95fc9aa4fc00aa590d68b665339d79a6884"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "1cc3bda3ba322188d82b0bb9ebdfc7bce6dfcfb0", "filename": "clippy_lints/src/enum_variants.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0a988c663080f5c59ccd5a1d1f4e7903495871fd/clippy_lints%2Fsrc%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a988c663080f5c59ccd5a1d1f4e7903495871fd/clippy_lints%2Fsrc%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_variants.rs?ref=0a988c663080f5c59ccd5a1d1f4e7903495871fd", "patch": "@@ -160,6 +160,7 @@ fn check_variant(\n         let name = var2str(var);\n         if partial_match(item_name, &name) == item_name_chars\n             && name.chars().nth(item_name_chars).map_or(false, |c| !c.is_lowercase())\n+            && name.chars().nth(item_name_chars + 1).map_or(false, |c| !c.is_numeric())\n         {\n             span_lint(cx, lint, var.span, \"Variant name starts with the enum's name\");\n         }\n@@ -178,6 +179,9 @@ fn check_variant(\n         let pre_camel = camel_case::until(pre);\n         pre = &pre[..pre_camel];\n         while let Some((next, last)) = name[pre.len()..].chars().zip(pre.chars().rev()).next() {\n+            if next.is_numeric() {\n+                return;\n+            }\n             if next.is_lowercase() {\n                 let last = pre.len() - last.len_utf8();\n                 let last_camel = camel_case::until(&pre[..last]);"}, {"sha": "01774a2a9845cf26c0a6c70c131e8fed7e71bb1d", "filename": "tests/ui/enum_variants.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/0a988c663080f5c59ccd5a1d1f4e7903495871fd/tests%2Fui%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a988c663080f5c59ccd5a1d1f4e7903495871fd/tests%2Fui%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_variants.rs?ref=0a988c663080f5c59ccd5a1d1f4e7903495871fd", "patch": "@@ -1,5 +1,5 @@\n #![feature(non_ascii_idents)]\n-#![warn(clippy::all, clippy::pub_enum_variant_names)]\n+#![warn(clippy::enum_variant_names, clippy::pub_enum_variant_names)]\n #![allow(non_camel_case_types)]\n \n enum FakeCallType {\n@@ -120,4 +120,17 @@ enum N {\n     Float,\n }\n \n+// should not lint\n+enum Peek {\n+    Peek1,\n+    Peek2,\n+    Peek3,\n+}\n+\n+// should not lint\n+pub enum NetworkLayer {\n+    Layer2,\n+    Layer3,\n+}\n+\n fn main() {}"}]}