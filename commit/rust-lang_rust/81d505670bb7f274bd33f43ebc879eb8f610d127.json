{"sha": "81d505670bb7f274bd33f43ebc879eb8f610d127", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxZDUwNTY3MGJiN2YyNzRiZDMzZjQzZWJjODc5ZWI4ZjYxMGQxMjc=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-03-25T23:11:50Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-03-25T23:11:50Z"}, "message": "rustup; get rid of some try_from that are no longer needed", "tree": {"sha": "078871dae48107db036e9f5f1a639b0e57d41e7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/078871dae48107db036e9f5f1a639b0e57d41e7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81d505670bb7f274bd33f43ebc879eb8f610d127", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81d505670bb7f274bd33f43ebc879eb8f610d127", "html_url": "https://github.com/rust-lang/rust/commit/81d505670bb7f274bd33f43ebc879eb8f610d127", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81d505670bb7f274bd33f43ebc879eb8f610d127/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c6e8838b89739713541382a27b0360c5a9b07fee", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6e8838b89739713541382a27b0360c5a9b07fee", "html_url": "https://github.com/rust-lang/rust/commit/c6e8838b89739713541382a27b0360c5a9b07fee"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "538003d9fbaeaa6dd9eae4bfaaa523dc949693c2", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/81d505670bb7f274bd33f43ebc879eb8f610d127/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/81d505670bb7f274bd33f43ebc879eb8f610d127/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=81d505670bb7f274bd33f43ebc879eb8f610d127", "patch": "@@ -1 +1 @@\n-02046a5d402c789c006d0da7662f800fe3c45faf\n+a5fb9ae5b2ed3cb011ada9dc1e8633aa0927f279"}, {"sha": "8274b52bd085e9d984fdfd47c901d8a7386fe4dc", "filename": "src/eval.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Feval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Feval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Feval.rs?ref=81d505670bb7f274bd33f43ebc879eb8f610d127", "patch": "@@ -114,7 +114,7 @@ pub fn create_ecx<'mir, 'tcx: 'mir>(\n             ecx.layout_of(tcx.mk_array(tcx.mk_imm_ptr(tcx.types.u8), u64::try_from(argvs.len()).unwrap()))?;\n         let argvs_place = ecx.allocate(argvs_layout, MiriMemoryKind::Machine.into());\n         for (idx, arg) in argvs.into_iter().enumerate() {\n-            let place = ecx.mplace_field(argvs_place, u64::try_from(idx).unwrap())?;\n+            let place = ecx.mplace_field(argvs_place, idx)?;\n             ecx.write_scalar(arg, place.into())?;\n         }\n         ecx.memory.mark_immutable(argvs_place.ptr.assert_ptr().alloc_id)?;\n@@ -154,7 +154,7 @@ pub fn create_ecx<'mir, 'tcx: 'mir>(\n             // Store the UTF-16 string. We just allocated so we know the bounds are fine.\n             let char_size = Size::from_bytes(2);\n             for (idx, &c) in cmd_utf16.iter().enumerate() {\n-                let place = ecx.mplace_field(cmd_place, u64::try_from(idx).unwrap())?;\n+                let place = ecx.mplace_field(cmd_place, idx)?;\n                 ecx.write_scalar(Scalar::from_uint(c, char_size), place.into())?;\n             }\n         }"}, {"sha": "11f95f40b909a4f309d1918893451140bbad2b09", "filename": "src/helpers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Fhelpers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Fhelpers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fhelpers.rs?ref=81d505670bb7f274bd33f43ebc879eb8f610d127", "patch": "@@ -598,7 +598,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         // Store the UTF-16 string.\n         let char_size = Size::from_bytes(2);\n         for (idx, c) in u16_vec.into_iter().chain(iter::once(0x0000)).enumerate() {\n-            let place = this.mplace_field(mplace, u64::try_from(idx).unwrap())?; \n+            let place = this.mplace_field(mplace, idx)?;\n             this.write_scalar(Scalar::from_uint(c, char_size), place.into())?;\n         }\n         Ok((true, string_length))"}, {"sha": "34c297248f0dd0e0c80aec785201d0e874b42393", "filename": "src/shims/env.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Fshims%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81d505670bb7f274bd33f43ebc879eb8f610d127/src%2Fshims%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fenv.rs?ref=81d505670bb7f274bd33f43ebc879eb8f610d127", "patch": "@@ -61,7 +61,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n         Ok(match this.machine.env_vars.map.get(name) {\n             // The offset is used to strip the \"{name}=\" part of the string.\n             Some(var_ptr) => {\n-                Scalar::from(var_ptr.offset(Size::from_bytes(u64::try_from(name.len()).unwrap().checked_add(1).unwrap()), this)?)\n+                Scalar::from(var_ptr.offset(Size::from_bytes(name.len()) + Size::from_bytes(1), this)?)\n             }\n             None => Scalar::ptr_null(&*this.tcx),\n         })\n@@ -187,7 +187,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             this.layout_of(tcx.mk_array(tcx.types.usize, u64::try_from(vars.len()).unwrap()))?;\n         let vars_place = this.allocate(vars_layout, MiriMemoryKind::Machine.into());\n         for (idx, var) in vars.into_iter().enumerate() {\n-            let place = this.mplace_field(vars_place, u64::try_from(idx).unwrap())?;\n+            let place = this.mplace_field(vars_place, idx)?;\n             this.write_scalar(var, place.into())?;\n         }\n         this.write_scalar("}]}