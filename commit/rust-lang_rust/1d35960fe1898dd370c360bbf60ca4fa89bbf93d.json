{"sha": "1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFkMzU5NjBmZTE4OThkZDM3MGMzNjBiYmY2MGNhNGZhODliYmY5M2Q=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-02-07T04:44:29Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-02-07T19:13:53Z"}, "message": "Create ui test for -Ztreat-err-as-bug delay_span_bug", "tree": {"sha": "2345f87dade002b76182c38827c7ccabfba885f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2345f87dade002b76182c38827c7ccabfba885f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmAgO/MACgkQgTGiTgx5\n768hwQ/6A4/wkqsCfkPfXXkjsRaNh7C2LJdmZu71Q8zF4mhi1r9dDTw9fYNJsCS1\n36P72ef2PcmCxao7wJbnXbObMGy162jmcDDm9wSghguNaRQS5UX5y5XhJJPCCuqs\npal7yI9VH49WO3NzobMRwGK+sNxxpTGp4Fu5lLCKdNSQlUgWhR02zgDNHjhG0NkT\niyaxLj8n+7cnBxkKR82u24DIQM/cHYzhJA1SnzKyO4gIxJwrK2KPO+n0CaWL4DLM\nkp4mToUrQ+GPHbv37P9j17MowaXDDkXEX3zPd/VbQWHq8BoZEMZyCnIxXeNO1r23\nrN28vAdevKjOOO3KSvUVg7oKom2GBZrmTCUZBsPm1McZVMIaM9p+lpui5CjVlKGt\ncJDlHS2St13O6TPfWkNvZSEJs9NKxgZsfUcnKPgdZWYj9UJxtOqn0c9+a/ui4kYB\n/hbPwGMoxjojLI2WyOH3Hx6xxgqwBQ0psptA1GYViFA6p5c1YKnIHuJJjTH3vzED\nqti28x2oaRAYXuawnt6P3R3/zuXzA28RgV2iJ2jF1dtSn3oY8q+DFnz4M+278yu7\nGPAZ1YsfmPz97+r7tc90eRmBulJCytWPph13ZRqGO2t16iKJisMnkUw3d3rVhC/0\nTvh3I8usspR31bGudBGRwmui035o2hsdEq8f4LtNakAU7HTs+vY=\n=FDCY\n-----END PGP SIGNATURE-----", "payload": "tree 2345f87dade002b76182c38827c7ccabfba885f4\nparent 748b550bf61992c5e4f6a24d7e718912783faec8\nauthor Santiago Pastorino <spastorino@gmail.com> 1612673069 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1612725233 -0300\n\nCreate ui test for -Ztreat-err-as-bug delay_span_bug\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "html_url": "https://github.com/rust-lang/rust/commit/1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1d35960fe1898dd370c360bbf60ca4fa89bbf93d/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "748b550bf61992c5e4f6a24d7e718912783faec8", "url": "https://api.github.com/repos/rust-lang/rust/commits/748b550bf61992c5e4f6a24d7e718912783faec8", "html_url": "https://github.com/rust-lang/rust/commit/748b550bf61992c5e4f6a24d7e718912783faec8"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "67846336acaaf27d337cdea040c668e1216a3216", "filename": "src/test/ui/treat-err-as-bug/delay_span_bug.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1d35960fe1898dd370c360bbf60ca4fa89bbf93d/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d35960fe1898dd370c360bbf60ca4fa89bbf93d/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.rs?ref=1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "patch": "@@ -0,0 +1,11 @@\n+// compile-flags: -Ztreat-err-as-bug\n+// failure-status: 101\n+// error-pattern: aborting due to `-Z treat-err-as-bug=1`\n+// error-pattern: [trigger_delay_span_bug] trigger a delay span bug\n+// normalize-stderr-test \"note: .*\\n\\n\" -> \"\"\n+// normalize-stderr-test \"thread 'rustc' panicked.*\\n\" -> \"\"\n+\n+#![feature(rustc_attrs)]\n+\n+#[rustc_error(delay_span_bug_from_inside_query)]\n+fn main() {}"}, {"sha": "ed65b69ebcab1a6ad0adcdf6fdce0cec78ee6dbd", "filename": "src/test/ui/treat-err-as-bug/delay_span_bug.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1d35960fe1898dd370c360bbf60ca4fa89bbf93d/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1d35960fe1898dd370c360bbf60ca4fa89bbf93d/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr?ref=1d35960fe1898dd370c360bbf60ca4fa89bbf93d", "patch": "@@ -0,0 +1,11 @@\n+error: internal compiler error: delayed span bug triggered by #[rustc_error(delay_span_bug_from_inside_query)]\n+  --> $DIR/delay_span_bug.rs:11:1\n+   |\n+LL | fn main() {}\n+   | ^^^^^^^^^\n+\n+error: internal compiler error: unexpected panic\n+\n+query stack during panic:\n+#0 [trigger_delay_span_bug] trigger a delay span bug\n+end of query stack"}]}