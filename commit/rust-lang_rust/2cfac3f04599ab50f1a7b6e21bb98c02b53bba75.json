{"sha": "2cfac3f04599ab50f1a7b6e21bb98c02b53bba75", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjZmFjM2YwNDU5OWFiNTBmMWE3YjZlMjFiYjk4YzAyYjUzYmJhNzU=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2021-07-23T13:02:12Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2021-07-23T13:08:08Z"}, "message": "don't build extra tools if build.tools is explicitly an empty list", "tree": {"sha": "ece258dd5a86ee4163314927fa3124185244e861", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ece258dd5a86ee4163314927fa3124185244e861"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmD6vzkACgkQzXazX3c0\ndp4X2g//ePMHNiGOfrEHmQLINtsxk1+o5f7Zqh1YnXocCcnZhBM/ShidcEfz9JoG\naS8+laaQqfJ0TEEwiVD5MhGXXF5LjBCSkXrO29aklGHU1fKqW8uIATdl7nI8eA7o\nCtSNUUMoqQ/ENFvFBUwdqYlukjwfMcr2qqC1dpAvgr5n6DxmEDo45leTwUSXQSyh\nH6bYixq/5O4Rx0pvS0X+BiLmr17/RmVObWJVtc5MCz6Pu/qPS7ktv8JvyvVEbNZr\ni/ELdKYjJ68cEJfD2teve3IOjmhwQV0c1Q3OVmodvWDwB3Kdty0JY2GSiZT813sd\nimjwyN5rmnH+BsYhVDR04Tud3qe+oMR7YYZ/3ogV0/lPbiNrHUofkjRIXlj2lVPL\nDtv+2GFBDrSg08kQ7bDza/vZl+0cZz/pj9wOjJNdraoy0QkXRfLbHBz+m+5ymZ5S\nT61BEYXgHYhTHUZbQRqafQXQ+WlDcfoPj96sIvZnhyQrWMqp6GHysOx8VItNfCbN\nbWrOrfoDm+SEHAS1TucLJDKEJcau9mviuWKNRF67CdOWc6z7ypUY1zln3oemL2Pm\nf8mImgco7rv6MU8zRThQ8L53YyGDw6RNT4Ke/FbzL9UW9jg0jIbPLnHpSl1dnFUH\noOKptYVWZhSqfvz9tv9fIpzRqpglhvd2NCM+XDcp5beAWrm9u4Y=\n=2IpA\n-----END PGP SIGNATURE-----", "payload": "tree ece258dd5a86ee4163314927fa3124185244e861\nparent f4c6d8f77c23aef7fc7a2128e99f8801b8176a09\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1627045332 +0200\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1627045688 +0200\n\ndon't build extra tools if build.tools is explicitly an empty list\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75", "html_url": "https://github.com/rust-lang/rust/commit/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4c6d8f77c23aef7fc7a2128e99f8801b8176a09", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4c6d8f77c23aef7fc7a2128e99f8801b8176a09", "html_url": "https://github.com/rust-lang/rust/commit/f4c6d8f77c23aef7fc7a2128e99f8801b8176a09"}], "stats": {"total": 7, "additions": 1, "deletions": 6}, "files": [{"sha": "5290e8453e7bef66b446e580b0e67a90491c2312", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2cfac3f04599ab50f1a7b6e21bb98c02b53bba75/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=2cfac3f04599ab50f1a7b6e21bb98c02b53bba75", "patch": "@@ -50,12 +50,7 @@ fn should_build_extended_tool(builder: &Builder<'_>, tool: &str) -> bool {\n     if !builder.config.extended {\n         return false;\n     }\n-\n-    if let Some(tools) = &builder.config.tools {\n-        tools.is_empty() || tools.contains(tool)\n-    } else {\n-        true\n-    }\n+    builder.config.tools.as_ref().map_or(true, |tools| tools.contains(tool))\n }\n \n #[derive(Debug, PartialOrd, Ord, Copy, Clone, Hash, PartialEq, Eq)]"}]}