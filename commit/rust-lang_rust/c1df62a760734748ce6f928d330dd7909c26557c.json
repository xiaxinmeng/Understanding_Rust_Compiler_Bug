{"sha": "c1df62a760734748ce6f928d330dd7909c26557c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxZGY2MmE3NjA3MzQ3NDhjZTZmOTI4ZDMzMGRkNzkwOWMyNjU1N2M=", "commit": {"author": {"name": "Crazycolorz5", "email": "Crazycolorz5@gmail.com", "date": "2018-06-01T14:05:46Z"}, "committer": {"name": "Crazycolorz5", "email": "Crazycolorz5@gmail.com", "date": "2018-06-01T14:05:46Z"}, "message": "Add closing bracket expectation to sequences, modified appropriate test cases.", "tree": {"sha": "10f007888b7dd79592c488c588c1e40b2be34f95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10f007888b7dd79592c488c588c1e40b2be34f95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1df62a760734748ce6f928d330dd7909c26557c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1df62a760734748ce6f928d330dd7909c26557c", "html_url": "https://github.com/rust-lang/rust/commit/c1df62a760734748ce6f928d330dd7909c26557c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1df62a760734748ce6f928d330dd7909c26557c/comments", "author": {"login": "Crazycolorz5", "id": 1497003, "node_id": "MDQ6VXNlcjE0OTcwMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1497003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crazycolorz5", "html_url": "https://github.com/Crazycolorz5", "followers_url": "https://api.github.com/users/Crazycolorz5/followers", "following_url": "https://api.github.com/users/Crazycolorz5/following{/other_user}", "gists_url": "https://api.github.com/users/Crazycolorz5/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crazycolorz5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crazycolorz5/subscriptions", "organizations_url": "https://api.github.com/users/Crazycolorz5/orgs", "repos_url": "https://api.github.com/users/Crazycolorz5/repos", "events_url": "https://api.github.com/users/Crazycolorz5/events{/privacy}", "received_events_url": "https://api.github.com/users/Crazycolorz5/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Crazycolorz5", "id": 1497003, "node_id": "MDQ6VXNlcjE0OTcwMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1497003?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crazycolorz5", "html_url": "https://github.com/Crazycolorz5", "followers_url": "https://api.github.com/users/Crazycolorz5/followers", "following_url": "https://api.github.com/users/Crazycolorz5/following{/other_user}", "gists_url": "https://api.github.com/users/Crazycolorz5/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crazycolorz5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crazycolorz5/subscriptions", "organizations_url": "https://api.github.com/users/Crazycolorz5/orgs", "repos_url": "https://api.github.com/users/Crazycolorz5/repos", "events_url": "https://api.github.com/users/Crazycolorz5/events{/privacy}", "received_events_url": "https://api.github.com/users/Crazycolorz5/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df40e61382a2cba0be621fdabb9971ce3475e9a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/df40e61382a2cba0be621fdabb9971ce3475e9a7", "html_url": "https://github.com/rust-lang/rust/commit/df40e61382a2cba0be621fdabb9971ce3475e9a7"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "022de0fe4097cabc967fb85faabfb31c65f82357", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c1df62a760734748ce6f928d330dd7909c26557c/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1df62a760734748ce6f928d330dd7909c26557c/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=c1df62a760734748ce6f928d330dd7909c26557c", "patch": "@@ -651,7 +651,7 @@ impl<'a> Parser<'a> {\n                 Err(err)\n             }\n         } else {\n-            self.expect_one_of(unsafe { slice::from_raw_parts(t, 1) }, &[])\n+            self.expect_one_of(slice::from_ref(t), &[])\n         }\n     }\n \n@@ -1107,7 +1107,12 @@ impl<'a> Parser<'a> {\n     {\n         let mut first: bool = true;\n         let mut v = vec![];\n-        while !kets.contains(&&self.token) {\n+        while !kets.iter().any(|k| {\n+                match expect {\n+                    TokenExpectType::Expect => self.check(k),\n+                    TokenExpectType::NoExpect => self.token == **k,\n+                }\n+            }) {\n             match self.token {\n                 token::CloseDelim(..) | token::Eof => break,\n                 _ => {}"}, {"sha": "24186d94acce966c087ce5c3d65b41709d55a3de", "filename": "src/test/ui/resolve/token-error-correct-3.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c1df62a760734748ce6f928d330dd7909c26557c/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c1df62a760734748ce6f928d330dd7909c26557c/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Ftoken-error-correct-3.stderr?ref=c1df62a760734748ce6f928d330dd7909c26557c", "patch": "@@ -10,11 +10,11 @@ note: unclosed delimiter\n LL |             callback(path.as_ref(); //~ ERROR expected one of\n    |                     ^\n \n-error: expected one of `,`, `.`, `?`, or an operator, found `;`\n+error: expected one of `)`, `,`, `.`, `?`, or an operator, found `;`\n   --> $DIR/token-error-correct-3.rs:24:35\n    |\n LL |             callback(path.as_ref(); //~ ERROR expected one of\n-   |                                   ^ expected one of `,`, `.`, `?`, or an operator here\n+   |                                   ^ expected one of `)`, `,`, `.`, `?`, or an operator here\n \n error: expected one of `.`, `;`, `?`, `}`, or an operator, found `)`\n   --> $DIR/token-error-correct-3.rs:30:9"}, {"sha": "e43750b982a35f296a91d6535c49d45fc4a2b028", "filename": "src/test/ui/similar-tokens.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c1df62a760734748ce6f928d330dd7909c26557c/src%2Ftest%2Fui%2Fsimilar-tokens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c1df62a760734748ce6f928d330dd7909c26557c/src%2Ftest%2Fui%2Fsimilar-tokens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsimilar-tokens.stderr?ref=c1df62a760734748ce6f928d330dd7909c26557c", "patch": "@@ -1,8 +1,8 @@\n error: expected one of `,`, `::`, or `as`, found `.`\n   --> $DIR/similar-tokens.rs:17:10\n    |\n-LL | use x::{A. B}; //~ ERROR expected one of `,`, `::`, or `as`, found `.`\n-   |          ^ expected one of `,`, `::`, or `as` here\n+LL | use x::{A. B}; //~ ERROR expected one of `,`, `::`, `as`, or `}`, found `.`\n+   |          ^ expected one of `,`, `::`, `as`, or `}` here\n \n error: aborting due to previous error\n "}]}