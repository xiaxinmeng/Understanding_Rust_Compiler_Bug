{"sha": "89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5YmQzZjM5Y2FkYmJlMGIzNjEzMDNkZGJkYTI3OTZlYTdmMzliYjk=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2017-04-18T08:02:21Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2017-04-21T12:48:35Z"}, "message": "Update #[no_core] users with the \"freeze\" lang item.", "tree": {"sha": "b809a22a401c99d878918570ee1cc2b73ebca1cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b809a22a401c99d878918570ee1cc2b73ebca1cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "html_url": "https://github.com/rust-lang/rust/commit/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0adfd810f8aa16ce9e63f6feae182db0ba4833ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/0adfd810f8aa16ce9e63f6feae182db0ba4833ef", "html_url": "https://github.com/rust-lang/rust/commit/0adfd810f8aa16ce9e63f6feae182db0ba4833ef"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "cd87b27d4f1aa65650ce896b85ecf0411d4f0c08", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "patch": "@@ -151,6 +151,7 @@ pub fn build_startup_objects(build: &Build, for_compiler: &Compiler, target: &st\n         if !up_to_date(src_file, dst_file) {\n             let mut cmd = Command::new(&compiler_path);\n             build.run(cmd.env(\"RUSTC_BOOTSTRAP\", \"1\")\n+                        .arg(\"--cfg\").arg(format!(\"stage{}\", compiler.stage))\n                         .arg(\"--target\").arg(target)\n                         .arg(\"--emit=obj\")\n                         .arg(\"--out-dir\").arg(dst_dir)"}, {"sha": "e8b92aab1da1e556f2518b9f7aac050ace6cd928", "filename": "src/rtstartup/rsbegin.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Frtstartup%2Frsbegin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Frtstartup%2Frsbegin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frtstartup%2Frsbegin.rs?ref=89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "patch": "@@ -22,7 +22,7 @@\n // object (usually called `crtX.o), which then invokes initialization callbacks\n // of other runtime components (registered via yet another special image section).\n \n-#![feature(no_core, lang_items)]\n+#![feature(no_core, lang_items, optin_builtin_traits)]\n #![crate_type=\"rlib\"]\n #![no_core]\n #![allow(non_camel_case_types)]\n@@ -31,9 +31,12 @@\n trait Sized {}\n #[lang = \"sync\"]\n trait Sync {}\n+impl Sync for .. {}\n #[lang = \"copy\"]\n trait Copy {}\n-impl<T> Sync for T {}\n+#[cfg_attr(not(stage0), lang = \"freeze\")]\n+trait Freeze {}\n+impl Freeze for .. {}\n \n #[cfg(all(target_os=\"windows\", target_arch = \"x86\", target_env=\"gnu\"))]\n pub mod eh_frames {"}, {"sha": "8ab8f4715755ddbef149777ab726c29d023afe0f", "filename": "src/test/run-make/simd-ffi/simd.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Ftest%2Frun-make%2Fsimd-ffi%2Fsimd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Ftest%2Frun-make%2Fsimd-ffi%2Fsimd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fsimd-ffi%2Fsimd.rs?ref=89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "patch": "@@ -12,7 +12,7 @@\n #![crate_type = \"lib\"]\n // we can compile to a variety of platforms, because we don't need\n // cross-compiled standard libraries.\n-#![feature(no_core)]\n+#![feature(no_core, optin_builtin_traits)]\n #![no_core]\n \n #![feature(repr_simd, simd_ffi, link_llvm_intrinsics, lang_items)]\n@@ -78,3 +78,7 @@ pub trait Copy { }\n pub mod marker {\n     pub use Copy;\n }\n+\n+#[lang = \"freeze\"]\n+trait Freeze {}\n+impl Freeze for .. {}"}, {"sha": "af24c3b460b2e844d43123eb9aaf9f6725967996", "filename": "src/test/run-make/target-specs/foo.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Ftest%2Frun-make%2Ftarget-specs%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89bd3f39cadbbe0b361303ddbda2796ea7f39bb9/src%2Ftest%2Frun-make%2Ftarget-specs%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftarget-specs%2Ffoo.rs?ref=89bd3f39cadbbe0b361303ddbda2796ea7f39bb9", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(lang_items, no_core)]\n+#![feature(lang_items, no_core, optin_builtin_traits)]\n #![no_core]\n \n #[lang=\"copy\"]\n@@ -17,6 +17,10 @@ trait Copy { }\n #[lang=\"sized\"]\n trait Sized { }\n \n+#[lang = \"freeze\"]\n+trait Freeze {}\n+impl Freeze for .. {}\n+\n #[lang=\"start\"]\n fn start(_main: *const u8, _argc: isize, _argv: *const *const u8) -> isize { 0 }\n "}]}