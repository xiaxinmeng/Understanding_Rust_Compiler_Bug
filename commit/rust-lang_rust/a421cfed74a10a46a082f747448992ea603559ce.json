{"sha": "a421cfed74a10a46a082f747448992ea603559ce", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0MjFjZmVkNzRhMTBhNDZhMDgyZjc0NzQ0ODk5MmVhNjAzNTU5Y2U=", "commit": {"author": {"name": "Yusuke Tanaka", "email": "yusuktan@maguro.dev", "date": "2021-02-06T14:41:42Z"}, "committer": {"name": "Yusuke Tanaka", "email": "yusuktan@maguro.dev", "date": "2021-03-24T14:16:55Z"}, "message": "Add regression test to ensure `#[allow(unstable_name_collisions)]` works", "tree": {"sha": "46c61a1b1742b04f3dca59dbbb8967ae986fe2a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46c61a1b1742b04f3dca59dbbb8967ae986fe2a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a421cfed74a10a46a082f747448992ea603559ce", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJIBAABCAAyFiEEgbkHgdnD1idvtMJ0QJ1+7h56cWoFAmBbSdcUHHl1c3VrdGFu\nQG1hZ3Vyby5kZXYACgkQQJ1+7h56cWrb1g//YDIk6Vz/pAW/PIASZbF/BuyDOGW7\nB98XBnt5LsC8HVITY0OO75FsEmG7QCBbmowJ+EdyElspDXy0S6wND7vsCikodt94\nYtxE3zPp99UFOjaSN2Y2Gnddf3gmtH8LOOpJdXBzjcBLb4RCc0lCCo5pQSFHtuqC\nRqKdLU9ICFr8vz/5TXAgru6RN7c/OH8v4mrWrz/9SwgFZwfkSPtdkmuaHU74GG0i\npLtQy+/YWjAlin53Njv/n47ifyFCHygmEfSxYHOgMElzkqLOqXbDDCnCK29a+r5s\nGTsm0Zh8xd4ZWhK4ADYrWSzs8HTG43pxVoLwxr5DwQU+sOQ2TjiEF274wm8SRga4\nZEA/i+knzLaq3o4KdwVcYpK+JnmhCXNYc4h80/o3aHXg0qB2ynkVBE46aQfsPalP\nKhFOzj5P3nvA2Khg/2RgbyhY8K37tvQj5Q3+N9K6g9GR/rDsEQ3ysoLT6zr3DYEU\nEI5vxYF2QNeDhoug15+UorqSAB838FHRrtgRWPrF6U5FOcVp9Ht7Hl1iQKwRxpRD\nwhLRWHSWN6tdl/s/IZRsai3qBb1uRM12THdPIMzTgHmrk2pn9t40dT/ERE2Ablbr\nPjwN868npOpJflRFNH4BW1swKczyXQRGKT9hPNAqW8ThTBbSjVA0v9AzNNXOJuVU\nskhuAuFQ1JvyqkE=\n=xgw6\n-----END PGP SIGNATURE-----", "payload": "tree 46c61a1b1742b04f3dca59dbbb8967ae986fe2a0\nparent 680d9fcac1dec4b671707e0ffc6bf95ac7115ebe\nauthor Yusuke Tanaka <yusuktan@maguro.dev> 1612622502 +0900\ncommitter Yusuke Tanaka <yusuktan@maguro.dev> 1616595415 +0900\n\nAdd regression test to ensure `#[allow(unstable_name_collisions)]` works\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a421cfed74a10a46a082f747448992ea603559ce", "html_url": "https://github.com/rust-lang/rust/commit/a421cfed74a10a46a082f747448992ea603559ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a421cfed74a10a46a082f747448992ea603559ce/comments", "author": {"login": "magurotuna", "id": 23649474, "node_id": "MDQ6VXNlcjIzNjQ5NDc0", "avatar_url": "https://avatars.githubusercontent.com/u/23649474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magurotuna", "html_url": "https://github.com/magurotuna", "followers_url": "https://api.github.com/users/magurotuna/followers", "following_url": "https://api.github.com/users/magurotuna/following{/other_user}", "gists_url": "https://api.github.com/users/magurotuna/gists{/gist_id}", "starred_url": "https://api.github.com/users/magurotuna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magurotuna/subscriptions", "organizations_url": "https://api.github.com/users/magurotuna/orgs", "repos_url": "https://api.github.com/users/magurotuna/repos", "events_url": "https://api.github.com/users/magurotuna/events{/privacy}", "received_events_url": "https://api.github.com/users/magurotuna/received_events", "type": "User", "site_admin": false}, "committer": {"login": "magurotuna", "id": 23649474, "node_id": "MDQ6VXNlcjIzNjQ5NDc0", "avatar_url": "https://avatars.githubusercontent.com/u/23649474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/magurotuna", "html_url": "https://github.com/magurotuna", "followers_url": "https://api.github.com/users/magurotuna/followers", "following_url": "https://api.github.com/users/magurotuna/following{/other_user}", "gists_url": "https://api.github.com/users/magurotuna/gists{/gist_id}", "starred_url": "https://api.github.com/users/magurotuna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/magurotuna/subscriptions", "organizations_url": "https://api.github.com/users/magurotuna/orgs", "repos_url": "https://api.github.com/users/magurotuna/repos", "events_url": "https://api.github.com/users/magurotuna/events{/privacy}", "received_events_url": "https://api.github.com/users/magurotuna/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "680d9fcac1dec4b671707e0ffc6bf95ac7115ebe", "url": "https://api.github.com/repos/rust-lang/rust/commits/680d9fcac1dec4b671707e0ffc6bf95ac7115ebe", "html_url": "https://github.com/rust-lang/rust/commit/680d9fcac1dec4b671707e0ffc6bf95ac7115ebe"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "902f8fdde58e9c2f80b624603ed1a4b6d081c9c7", "filename": "src/test/ui/inference/issue-81522.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/a421cfed74a10a46a082f747448992ea603559ce/src%2Ftest%2Fui%2Finference%2Fissue-81522.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a421cfed74a10a46a082f747448992ea603559ce/src%2Ftest%2Fui%2Finference%2Fissue-81522.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finference%2Fissue-81522.rs?ref=a421cfed74a10a46a082f747448992ea603559ce", "patch": "@@ -0,0 +1,31 @@\n+// Regression test for #81522.\n+// Ensures that `#[allow(unstable_name_collisions)]` appended to things other than function\n+// suppresses the corresponding diagnostics emitted from inside them.\n+// But note that this attribute doesn't work for macro invocations if it is appended directly.\n+\n+// aux-build:inference_unstable_iterator.rs\n+// aux-build:inference_unstable_itertools.rs\n+// run-pass\n+\n+extern crate inference_unstable_iterator;\n+extern crate inference_unstable_itertools;\n+\n+#[allow(unused_imports)]\n+use inference_unstable_iterator::IpuIterator;\n+use inference_unstable_itertools::IpuItertools;\n+\n+fn main() {\n+    // expression statement\n+    #[allow(unstable_name_collisions)]\n+    'x'.ipu_flatten();\n+\n+    // let statement\n+    #[allow(unstable_name_collisions)]\n+    let _ = 'x'.ipu_flatten();\n+\n+    // block expression\n+    #[allow(unstable_name_collisions)]\n+    {\n+        'x'.ipu_flatten();\n+    }\n+}"}]}