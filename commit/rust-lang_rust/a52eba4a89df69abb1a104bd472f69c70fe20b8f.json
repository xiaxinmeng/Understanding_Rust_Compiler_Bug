{"sha": "a52eba4a89df69abb1a104bd472f69c70fe20b8f", "node_id": "C_kwDOAAsO6NoAKGE1MmViYTRhODlkZjY5YWJiMWExMDRiZDQ3MmY2OWM3MGZlMjBiOGY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-10T18:47:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-10T18:47:34Z"}, "message": "Rollup merge of #102888 - GuillaumeGomez:improve-search-color-check, r=notriddle\n\nImprove rustdoc-gui search-color test\n\nThanks to the add of \"functions\" in `browser-ui-test`, we can start to reduce the size of the scripts. It'll be very useful for all color checks.\n\nr? `@notriddle`", "tree": {"sha": "27c7f49cb9b3e34a986bc80f585cea555a048ade", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27c7f49cb9b3e34a986bc80f585cea555a048ade"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a52eba4a89df69abb1a104bd472f69c70fe20b8f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjRGjGCRBK7hj4Ov3rIwAAF9MIAAN0eWPv/A9cnbJhmK1oDFgg\nT8YZ5n0srzaIEmXhlEfJoJ0x2xSCpRmgiFM2f0ePkgHOZhwXqc+O2uTrbsEPEjcJ\nuIDtTgqxYzgrf7WQDLb5Y3+oeE7glCppEHqgE5KQTCkc1AxEj/UEKIfc7f2kNHsa\n9exP49QABK2Y3JbcEAtB8uBh6eQK/IlONecI3B6Vwbsl2LoeX3SN7UApufVLBfmC\nQs8nAKfXU3wNJ/9/OqeO9IKZ3SVx+2+8Klbk6KhdrhVekN/ujQ7+0IEglPGDo1WT\n8UC0QBzwZJ6qUQgNGJxy1ZLC//bmtA3+SZu9YsW80H9nsc0oIkxFizdfrhkuaZY=\n=fuv3\n-----END PGP SIGNATURE-----\n", "payload": "tree 27c7f49cb9b3e34a986bc80f585cea555a048ade\nparent 0bd1cba98bcee7579ee54e99dbab216d0d58dc6a\nparent 9c5a769119c6177561af7669ad44c4bde43fc4f2\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1665427654 +0200\ncommitter GitHub <noreply@github.com> 1665427654 +0200\n\nRollup merge of #102888 - GuillaumeGomez:improve-search-color-check, r=notriddle\n\nImprove rustdoc-gui search-color test\n\nThanks to the add of \"functions\" in `browser-ui-test`, we can start to reduce the size of the scripts. It'll be very useful for all color checks.\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a52eba4a89df69abb1a104bd472f69c70fe20b8f", "html_url": "https://github.com/rust-lang/rust/commit/a52eba4a89df69abb1a104bd472f69c70fe20b8f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a52eba4a89df69abb1a104bd472f69c70fe20b8f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0bd1cba98bcee7579ee54e99dbab216d0d58dc6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/0bd1cba98bcee7579ee54e99dbab216d0d58dc6a", "html_url": "https://github.com/rust-lang/rust/commit/0bd1cba98bcee7579ee54e99dbab216d0d58dc6a"}, {"sha": "9c5a769119c6177561af7669ad44c4bde43fc4f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c5a769119c6177561af7669ad44c4bde43fc4f2", "html_url": "https://github.com/rust-lang/rust/commit/9c5a769119c6177561af7669ad44c4bde43fc4f2"}], "stats": {"total": 945, "additions": 234, "deletions": 711}, "files": [{"sha": "e96a87111cbbdd7d8aad561744141f5543f33c8d", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a52eba4a89df69abb1a104bd472f69c70fe20b8f/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/a52eba4a89df69abb1a104bd472f69c70fe20b8f/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=a52eba4a89df69abb1a104bd472f69c70fe20b8f", "patch": "@@ -1 +1 @@\n-0.12.0\n\\ No newline at end of file\n+0.12.2\n\\ No newline at end of file"}, {"sha": "69bb30df954bddbe9d0de63e4b1076a23568a97b", "filename": "src/test/rustdoc-gui/search-result-color.goml", "status": "modified", "additions": 233, "deletions": 710, "changes": 943, "blob_url": "https://github.com/rust-lang/rust/blob/a52eba4a89df69abb1a104bd472f69c70fe20b8f/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a52eba4a89df69abb1a104bd472f69c70fe20b8f/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml?ref=a52eba4a89df69abb1a104bd472f69c70fe20b8f", "patch": "@@ -1,4 +1,57 @@\n // The goal of this test is to ensure the color of the text is the one expected.\n+\n+define-function: (\n+    \"check-result-color\",\n+    (result_kind, color, hover_color),\n+    [\n+        (\n+            \"assert-css\",\n+            (\".result-\" + |result_kind| + \" .\" + |result_kind|, {\"color\": |color|}, ALL),\n+        ),\n+        (\n+            \"assert-css\",\n+            (\n+                \".result-\" + |result_kind|,\n+                {\"color\": |entry_color|, \"background-color\": |background_color|},\n+            ),\n+        ),\n+        (\n+            \"move-cursor-to\",\n+            \".result-\" + |result_kind|,\n+        ),\n+        (\n+            \"assert-css\",\n+            (\n+                \".result-\" + |result_kind| + \":hover\",\n+                {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n+            ),\n+        ),\n+        (\n+            \"assert-css\",\n+            (\".result-\" + |result_kind| + \":hover .\" + |result_kind|, {\"color\": |hover_color|}),\n+        ),\n+        (\n+            \"move-cursor-to\",\n+            \".search-input\",\n+        ),\n+        (\n+            \"focus\",\n+            \".result-\" + |result_kind|,\n+        ),\n+        (\n+            \"assert-css\",\n+            (\n+                \".result-\" + |result_kind| + \":focus\",\n+                {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n+            ),\n+        ),\n+        (\n+            \"assert-css\",\n+            (\".result-\" + |result_kind| + \":focus .\" + |result_kind|, {\"color\": |hover_color|}),\n+        ),\n+    ],\n+)\n+\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html?search=coo\"\n \n // This is needed so that the text color is computed.\n@@ -28,240 +81,66 @@ assert-css: (\n     {\"color\": \"rgb(120, 135, 151)\"},\n )\n \n-// Checking the color of \"keyword\".\n-assert-css: (\n-    \".result-keyword .keyword\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-keyword\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-keyword:hover .keyword\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-keyword:focus .keyword\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-)\n-\n-// Check the color of \"struct\".\n-assert-css: (\n-    \".result-struct .struct\",\n-    {\"color\": \"rgb(255, 160, 165)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-struct\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-struct\"\n-assert-css: (\n-    \".result-struct:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-struct:hover .struct\",\n-    {\"color\": \"rgb(255, 160, 165)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-struct\"\n-assert-css: (\n-    \".result-struct:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-struct:focus .struct\",\n-    {\"color\": \"rgb(255, 160, 165)\"},\n-)\n-\n-// Check the color of \"associated type\".\n-assert-css: (\n-    \".result-associatedtype .associatedtype\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-associatedtype\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:hover .associatedtype\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:focus .associatedtype\",\n-    {\"color\": \"rgb(57, 175, 215)\"},\n-)\n-\n-// Check the color of \"type method\".\n-assert-css: (\n-    \".result-tymethod .tymethod\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-tymethod\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-assert-css: (\n-    \".result-tymethod .tymethod\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-)\n-move-cursor-to: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-\n-// Check the color of \"method\".\n-assert-css: (\n-    \".result-method .method\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-method\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-method\"\n-assert-css: (\n-    \".result-method:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-method:hover .method\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-method\"\n-assert-css: (\n-    \".result-method:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-method:focus .method\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-)\n-\n-// Check the color of \"struct field\".\n-assert-css: (\n-    \".result-structfield .structfield\",\n-    {\"color\": \"rgb(0, 150, 207)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-structfield\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-structfield:hover .structfield\",\n-    {\"color\": \"rgb(255, 255, 255)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-structfield:focus .structfield\",\n-    {\"color\": \"rgb(255, 255, 255)\"},\n-)\n-\n-// Check the color of \"macro\".\n-assert-css: (\n-    \".result-macro .macro\",\n-    {\"color\": \"rgb(163, 122, 204)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-macro\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-macro\"\n-assert-css: (\n-    \".result-macro:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-macro:hover .macro\",\n-    {\"color\": \"rgb(163, 122, 204)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-macro\"\n-assert-css: (\n-    \".result-macro:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-macro:focus .macro\",\n-    {\"color\": \"rgb(163, 122, 204)\"},\n-)\n-\n-// Check the color of \"fn\".\n-assert-css: (\n-    \".result-fn .fn\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-fn\",\n-    {\"color\": \"rgb(0, 150, 207)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-fn\"\n-assert-css: (\n-    \".result-fn:hover\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-fn:hover .fn\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-fn\"\n-assert-css: (\n-    \".result-fn:focus\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"background-color\": \"rgb(60, 60, 60)\"},\n-)\n-assert-css: (\n-    \".result-fn:focus .fn\",\n-    {\"color\": \"rgb(253, 214, 135)\"},\n+store-value: (entry_color, \"rgb(0, 150, 207)\") // color of the search entry\n+store-value: (hover_entry_color, \"rgb(255, 255, 255)\") // color of the hovered/focused search entry\n+store-value: (background_color, \"rgba(0, 0, 0, 0)\") // background color\n+store-value: (hover_background_color, \"rgb(60, 60, 60)\") // hover background color\n+\n+call-function: (\n+    \"check-result-color\", (\n+        \"keyword\", // item kind\n+        \"rgb(57, 175, 215)\", // color of item kind\n+        \"rgb(57, 175, 215)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"struct\", // item kind\n+        \"rgb(255, 160, 165)\", // color of item kind\n+        \"rgb(255, 160, 165)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"associatedtype\", // item kind\n+        \"rgb(57, 175, 215)\", // color of item kind\n+        \"rgb(57, 175, 215)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"tymethod\", // item kind\n+        \"rgb(253, 214, 135)\", // color of item kind\n+        \"rgb(253, 214, 135)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"method\", // item kind\n+        \"rgb(253, 214, 135)\", // color of item kind\n+        \"rgb(253, 214, 135)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"structfield\", // item kind\n+        \"rgb(0, 150, 207)\", // color of item kind\n+        \"rgb(255, 255, 255)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"macro\", // item kind\n+        \"rgb(163, 122, 204)\", // color of item kind\n+        \"rgb(163, 122, 204)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"fn\", // item kind\n+        \"rgb(253, 214, 135)\", // color of item kind\n+        \"rgb(253, 214, 135)\", // color of hovered/focused item kind\n+    ),\n )\n \n // Checking the `<a>` container.\n@@ -308,244 +187,66 @@ assert-css: (\n     {\"color\": \"rgb(221, 221, 221)\"},\n )\n \n-// Checking the color of \"keyword\".\n-assert-css: (\n-    \".result-keyword .keyword\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-keyword\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-keyword:hover .keyword\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-keyword:focus .keyword\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-)\n-\n-// Check the color of \"struct\".\n-assert-css: (\n-    \".result-struct .struct\",\n-    {\"color\": \"rgb(45, 191, 184)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-struct\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-struct\"\n-assert-css: (\n-    \".result-struct:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-struct:hover .struct\",\n-    {\"color\": \"rgb(45, 191, 184)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-struct\"\n-assert-css: (\n-    \".result-struct:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-struct:focus .struct\",\n-    {\"color\": \"rgb(45, 191, 184)\"},\n-)\n-\n-// Check the color of \"associated type\".\n-assert-css: (\n-    \".result-associatedtype .associatedtype\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-associatedtype\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:hover .associatedtype\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:focus .associatedtype\",\n-    {\"color\": \"rgb(210, 153, 29)\"},\n-)\n-\n-// Check the color of \"type method\".\n-assert-css: (\n-    \".result-tymethod .tymethod\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-tymethod\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-tymethod:hover .tymethod\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-tymethod:focus .tymethod\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-)\n-\n-// Check the color of \"method\".\n-assert-css: (\n-    \".result-method .method\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-method\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-method\"\n-assert-css: (\n-    \".result-method:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-method:hover .method\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-method\"\n-assert-css: (\n-    \".result-method:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-method:focus .method\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-)\n-\n-// Check the color of \"struct field\".\n-assert-css: (\n-    \".result-structfield .structfield\",\n-    {\"color\": \"rgb(221, 221, 221)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-structfield\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-structfield:hover .structfield\",\n-    {\"color\": \"rgb(221, 221, 221)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-structfield:focus .structfield\",\n-    {\"color\": \"rgb(221, 221, 221)\"},\n-)\n-\n-// Check the color of \"macro\".\n-assert-css: (\n-    \".result-macro .macro\",\n-    {\"color\": \"rgb(9, 189, 0)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-macro\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-macro\"\n-assert-css: (\n-    \".result-macro:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-macro:hover .macro\",\n-    {\"color\": \"rgb(9, 189, 0)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-macro\"\n-assert-css: (\n-    \".result-macro:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-macro:focus .macro\",\n-    {\"color\": \"rgb(9, 189, 0)\"},\n-)\n-\n-// Check the color of \"fn\".\n-assert-css: (\n-    \".result-fn .fn\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-fn\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-fn\"\n-assert-css: (\n-    \".result-fn:hover\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-fn:hover .fn\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-fn\"\n-assert-css: (\n-    \".result-fn:focus\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"background-color\": \"rgb(97, 97, 97)\"},\n-)\n-assert-css: (\n-    \".result-fn:focus .fn\",\n-    {\"color\": \"rgb(43, 171, 99)\"},\n+store-value: (entry_color, \"rgb(221, 221, 221)\") // color of the search entry\n+store-value: (hover_entry_color, \"rgb(221, 221, 221)\") // color of the hovered/focused search entry\n+store-value: (background_color, \"rgba(0, 0, 0, 0)\") // background color\n+store-value: (hover_background_color, \"rgb(97, 97, 97)\") // hover background color\n+\n+call-function: (\n+    \"check-result-color\", (\n+        \"keyword\", // item kind\n+        \"rgb(210, 153, 29)\", // color of item kind\n+        \"rgb(210, 153, 29)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"struct\", // item kind\n+        \"rgb(45, 191, 184)\", // color of item kind\n+        \"rgb(45, 191, 184)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"associatedtype\", // item kind\n+        \"rgb(210, 153, 29)\", // color of item kind\n+        \"rgb(210, 153, 29)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"tymethod\", // item kind\n+        \"rgb(43, 171, 99)\", // color of item kind\n+        \"rgb(43, 171, 99)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"method\", // item kind\n+        \"rgb(43, 171, 99)\", // color of item kind\n+        \"rgb(43, 171, 99)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"structfield\", // item kind\n+        \"rgb(221, 221, 221)\", // color of item kind\n+        \"rgb(221, 221, 221)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"macro\", // item kind\n+        \"rgb(9, 189, 0)\", // color of item kind\n+        \"rgb(9, 189, 0)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"fn\", // item kind\n+        \"rgb(43, 171, 99)\", // color of item kind\n+        \"rgb(43, 171, 99)\", // color of hovered/focused item kind\n+    ),\n )\n \n // Checking the `<a>` container.\n@@ -577,244 +278,66 @@ assert-css: (\n     {\"color\": \"rgb(0, 0, 0)\"},\n )\n \n-// Checking the color of \"keyword\".\n-assert-css: (\n-    \".result-keyword .keyword\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-keyword\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-keyword:hover .keyword\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-keyword\"\n-assert-css: (\n-    \".result-keyword:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-keyword:focus .keyword\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-)\n-\n-// Check the color of \"struct\".\n-assert-css: (\n-    \".result-struct .struct\",\n-    {\"color\": \"rgb(173, 55, 138)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-struct\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-struct\"\n-assert-css: (\n-    \".result-struct:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-struct:hover .struct\",\n-    {\"color\": \"rgb(173, 55, 138)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-struct\"\n-assert-css: (\n-    \".result-struct:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-struct:focus .struct\",\n-    {\"color\": \"rgb(173, 55, 138)\"},\n-)\n-\n-// Check the color of \"associated type\".\n-assert-css: (\n-    \".result-associatedtype .associatedtype\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-associatedtype\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:hover .associatedtype\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-associatedtype\"\n-assert-css: (\n-    \".result-associatedtype:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-associatedtype:focus .associatedtype\",\n-    {\"color\": \"rgb(56, 115, 173)\"},\n-)\n-\n-// Check the color of \"type method\".\n-assert-css: (\n-    \".result-tymethod .tymethod\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-tymethod\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-tymethod:hover .tymethod\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-tymethod\"\n-assert-css: (\n-    \".result-tymethod:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-tymethod:focus .tymethod\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-)\n-\n-// Check the color of \"method\".\n-assert-css: (\n-    \".result-method .method\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-method\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-method\"\n-assert-css: (\n-    \".result-method:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-method:hover .method\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-method\"\n-assert-css: (\n-    \".result-method:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-method:focus .method\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-)\n-\n-// Check the color of \"struct field\".\n-assert-css: (\n-    \".result-structfield .structfield\",\n-    {\"color\": \"rgb(0, 0, 0)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-structfield\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-structfield:hover .structfield\",\n-    {\"color\": \"rgb(0, 0, 0)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-structfield\"\n-assert-css: (\n-    \".result-structfield:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-structfield:focus .structfield\",\n-    {\"color\": \"rgb(0, 0, 0)\"},\n-)\n-\n-// Check the color of \"macro\".\n-assert-css: (\n-    \".result-macro .macro\",\n-    {\"color\": \"rgb(6, 128, 0)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-macro\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-macro\"\n-assert-css: (\n-    \".result-macro:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-macro:hover .macro\",\n-    {\"color\": \"rgb(6, 128, 0)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-macro\"\n-assert-css: (\n-    \".result-macro:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-macro:focus .macro\",\n-    {\"color\": \"rgb(6, 128, 0)\"},\n-)\n-\n-// Check the color of \"fn\".\n-assert-css: (\n-    \".result-fn .fn\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-    ALL,\n-)\n-assert-css: (\n-    \".result-fn\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-)\n-move-cursor-to: \".result-fn\"\n-assert-css: (\n-    \".result-fn:hover\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-fn:hover .fn\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n-)\n-move-cursor-to: \".search-input\"\n-focus: \".result-fn\"\n-assert-css: (\n-    \".result-fn:focus\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"background-color\": \"rgb(204, 204, 204)\"},\n-)\n-assert-css: (\n-    \".result-fn:focus .fn\",\n-    {\"color\": \"rgb(173, 124, 55)\"},\n+store-value: (entry_color, \"rgb(0, 0, 0)\") // color of the search entry\n+store-value: (hover_entry_color, \"rgb(0, 0, 0)\") // color of the hovered/focused search entry\n+store-value: (background_color, \"rgba(0, 0, 0, 0)\") // background color\n+store-value: (hover_background_color, \"rgb(204, 204, 204)\") // hover background color\n+\n+call-function: (\n+    \"check-result-color\", (\n+        \"keyword\", // item kind\n+        \"rgb(56, 115, 173)\", // color of item kind\n+        \"rgb(56, 115, 173)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"struct\", // item kind\n+        \"rgb(173, 55, 138)\", // color of item kind\n+        \"rgb(173, 55, 138)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"associatedtype\", // item kind\n+        \"rgb(56, 115, 173)\", // color of item kind\n+        \"rgb(56, 115, 173)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"tymethod\", // item kind\n+        \"rgb(173, 124, 55)\", // color of item kind\n+        \"rgb(173, 124, 55)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"method\", // item kind\n+        \"rgb(173, 124, 55)\", // color of item kind\n+        \"rgb(173, 124, 55)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"structfield\", // item kind\n+        \"rgb(0, 0, 0)\", // color of item kind\n+        \"rgb(0, 0, 0)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"macro\", // item kind\n+        \"rgb(6, 128, 0)\", // color of item kind\n+        \"rgb(6, 128, 0)\", // color of hovered/focused item kind\n+    ),\n+)\n+call-function: (\n+    \"check-result-color\", (\n+        \"fn\", // item kind\n+        \"rgb(173, 124, 55)\", // color of item kind\n+        \"rgb(173, 124, 55)\", // color of hovered/focused item kind\n+    ),\n )\n \n // Checking the `<a>` container."}]}