{"sha": "41372631ff7a9dc352c4765b08847757a5f7d590", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQxMzcyNjMxZmY3YTlkYzM1MmM0NzY1YjA4ODQ3NzU3YTVmN2Q1OTA=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-11-13T22:45:52Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-11-13T22:45:58Z"}, "message": "Fix ICE when trying to suggest `Type<>` instead of `Type()`", "tree": {"sha": "a2cc874a92cbc279ee5801402d640b3f4586ad6e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2cc874a92cbc279ee5801402d640b3f4586ad6e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41372631ff7a9dc352c4765b08847757a5f7d590", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41372631ff7a9dc352c4765b08847757a5f7d590", "html_url": "https://github.com/rust-lang/rust/commit/41372631ff7a9dc352c4765b08847757a5f7d590", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41372631ff7a9dc352c4765b08847757a5f7d590/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "695fe965173795f9242dfcad6d1c07d7a17b106a", "url": "https://api.github.com/repos/rust-lang/rust/commits/695fe965173795f9242dfcad6d1c07d7a17b106a", "html_url": "https://github.com/rust-lang/rust/commit/695fe965173795f9242dfcad6d1c07d7a17b106a"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "15039cc3cdff266b2cb5fd5492269c82b8c3ec49", "filename": "src/librustc/hir/lowering.rs", "status": "modified", "additions": 10, "deletions": 9, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/41372631ff7a9dc352c4765b08847757a5f7d590/src%2Flibrustc%2Fhir%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41372631ff7a9dc352c4765b08847757a5f7d590/src%2Flibrustc%2Fhir%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Flowering.rs?ref=41372631ff7a9dc352c4765b08847757a5f7d590", "patch": "@@ -1860,15 +1860,16 @@ impl<'a> LoweringContext<'a> {\n                         if let Ok(snippet) = self.sess.source_map().span_to_snippet(data.span) {\n                             // Do not suggest going from `Trait()` to `Trait<>`\n                             if data.inputs.len() > 0 {\n-                                let split = snippet.find('(').unwrap();\n-                                let trait_name = &snippet[0..split];\n-                                let args = &snippet[split + 1 .. snippet.len() - 1];\n-                                err.span_suggestion(\n-                                    data.span,\n-                                    \"use angle brackets instead\",\n-                                    format!(\"{}<{}>\", trait_name, args),\n-                                    Applicability::MaybeIncorrect,\n-                                );\n+                                if let Some(split) = snippet.find('(') {\n+                                    let trait_name = &snippet[0..split];\n+                                    let args = &snippet[split + 1 .. snippet.len() - 1];\n+                                    err.span_suggestion(\n+                                        data.span,\n+                                        \"use angle brackets instead\",\n+                                        format!(\"{}<{}>\", trait_name, args),\n+                                        Applicability::MaybeIncorrect,\n+                                    );\n+                                }\n                             }\n                         };\n                         err.emit();"}]}