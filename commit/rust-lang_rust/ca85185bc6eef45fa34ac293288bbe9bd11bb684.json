{"sha": "ca85185bc6eef45fa34ac293288bbe9bd11bb684", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhODUxODViYzZlZWY0NWZhMzRhYzI5MzI4OGJiZTliZDExYmI2ODQ=", "commit": {"author": {"name": "Alexander Gonzalez", "email": "alexfertel97@gmail.com", "date": "2021-07-26T21:05:59Z"}, "committer": {"name": "Alexander Gonzalez", "email": "alexfertel97@gmail.com", "date": "2021-07-27T22:31:21Z"}, "message": "docs: Update the lsp-extensions.md with the Hover Range capability", "tree": {"sha": "8664cad229aeeafba43e10062e48657180d7bc35", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8664cad229aeeafba43e10062e48657180d7bc35"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca85185bc6eef45fa34ac293288bbe9bd11bb684", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca85185bc6eef45fa34ac293288bbe9bd11bb684", "html_url": "https://github.com/rust-lang/rust/commit/ca85185bc6eef45fa34ac293288bbe9bd11bb684", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca85185bc6eef45fa34ac293288bbe9bd11bb684/comments", "author": {"login": "alexfertel", "id": 22298999, "node_id": "MDQ6VXNlcjIyMjk4OTk5", "avatar_url": "https://avatars.githubusercontent.com/u/22298999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexfertel", "html_url": "https://github.com/alexfertel", "followers_url": "https://api.github.com/users/alexfertel/followers", "following_url": "https://api.github.com/users/alexfertel/following{/other_user}", "gists_url": "https://api.github.com/users/alexfertel/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexfertel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexfertel/subscriptions", "organizations_url": "https://api.github.com/users/alexfertel/orgs", "repos_url": "https://api.github.com/users/alexfertel/repos", "events_url": "https://api.github.com/users/alexfertel/events{/privacy}", "received_events_url": "https://api.github.com/users/alexfertel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexfertel", "id": 22298999, "node_id": "MDQ6VXNlcjIyMjk4OTk5", "avatar_url": "https://avatars.githubusercontent.com/u/22298999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexfertel", "html_url": "https://github.com/alexfertel", "followers_url": "https://api.github.com/users/alexfertel/followers", "following_url": "https://api.github.com/users/alexfertel/following{/other_user}", "gists_url": "https://api.github.com/users/alexfertel/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexfertel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexfertel/subscriptions", "organizations_url": "https://api.github.com/users/alexfertel/orgs", "repos_url": "https://api.github.com/users/alexfertel/repos", "events_url": "https://api.github.com/users/alexfertel/events{/privacy}", "received_events_url": "https://api.github.com/users/alexfertel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "506db1852cb5aafc188d8008ceba7e8e18f6a5cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/506db1852cb5aafc188d8008ceba7e8e18f6a5cf", "html_url": "https://github.com/rust-lang/rust/commit/506db1852cb5aafc188d8008ceba7e8e18f6a5cf"}], "stats": {"total": 35, "additions": 30, "deletions": 5}, "files": [{"sha": "e13f81e1ff0f247bf9aac9c674e7bf91e29d9662", "filename": "docs/dev/lsp-extensions.md", "status": "modified", "additions": 29, "deletions": 4, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/ca85185bc6eef45fa34ac293288bbe9bd11bb684/docs%2Fdev%2Flsp-extensions.md", "raw_url": "https://github.com/rust-lang/rust/raw/ca85185bc6eef45fa34ac293288bbe9bd11bb684/docs%2Fdev%2Flsp-extensions.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Flsp-extensions.md?ref=ca85185bc6eef45fa34ac293288bbe9bd11bb684", "patch": "@@ -13,7 +13,7 @@ need to adjust this doc as well and ping this issue:\n This document describes LSP extensions used by rust-analyzer.\n It's a best effort document, when in doubt, consult the source (and send a PR with clarification ;-) ).\n We aim to upstream all non Rust-specific extensions to the protocol, but this is not a top priority.\n-All capabilities are enabled via `experimental` field of `ClientCapabilities` or `ServerCapabilities`.\n+All capabilities are enabled via the `experimental` field of `ClientCapabilities` or `ServerCapabilities`.\n Requests which we hope to upstream live under `experimental/` namespace.\n Requests, which are likely to always remain specific to `rust-analyzer` are under `rust-analyzer/` namespace.\n \n@@ -29,7 +29,7 @@ https://clangd.llvm.org/extensions.html#utf-8-offsets\n \n **Issue:** https://github.com/microsoft/language-server-protocol/issues/567\n \n-The `initializationOptions` filed of the `InitializeParams` of the initialization request should contain `\"rust-analyzer\"` section of the configuration.\n+The `initializationOptions` field of the `InitializeParams` of the initialization request should contain the `\"rust-analyzer\"` section of the configuration.\n \n `rust-analyzer` normally sends a `\"workspace/configuration\"` request with `{ \"items\": [\"rust-analyzer\"] }` payload.\n However, the server can't do this during initialization.\n@@ -81,7 +81,7 @@ At the moment, rust-analyzer guarantees that only a single edit will have `Inser\n \n **Experimental Client Capability:** `{ \"codeActionGroup\": boolean }`\n \n-If this capability is set, `CodeAction` returned from the server contain an additional field, `group`:\n+If this capability is set, `CodeAction`s returned from the server contain an additional field, `group`:\n \n ```typescript\n interface CodeAction {\n@@ -209,7 +209,7 @@ fn main() {\n \n **Experimental Server Capability:** `{ \"onEnter\": boolean }`\n \n-This request is sent from client to server to handle <kbd>Enter</kbd> keypress.\n+This request is sent from client to server to handle the <kbd>Enter</kbd> key press.\n \n **Method:** `experimental/onEnter`\n \n@@ -658,6 +658,31 @@ interface TestInfo {\n }\n ```\n \n+## Hover Range\n+\n+**Issue:** https://github.com/microsoft/language-server-protocol/issues/377\n+\n+This request build upon the current `textDocument/hover` to show the type of the expression currently selected.\n+\n+```typescript\n+interface HoverParams extends lc.WorkDoneProgressParams {\n+    textDocument: lc.TextDocumentIdentifier;\n+    position: lc.Range | lc.Position;\n+}\n+```\n+\n+Whenever the client sends a `Range`, it is understood as the current selection and any hover included in the range will show the type of the expression if possible.\n+\n+### Example\n+\n+```rust\n+fn main() {\n+    let expression = $01 + 2 * 3$0;\n+}\n+```\n+\n+Triggering a hover inside the selection above will show a result of `i32`.\n+\n ## Move Item\n \n **Issue:** https://github.com/rust-analyzer/rust-analyzer/issues/6823"}, {"sha": "ac632a0156767ac14265c2e2b48479a23ab18b90", "filename": "editors/code/src/lsp_ext.ts", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ca85185bc6eef45fa34ac293288bbe9bd11bb684/editors%2Fcode%2Fsrc%2Flsp_ext.ts", "raw_url": "https://github.com/rust-lang/rust/raw/ca85185bc6eef45fa34ac293288bbe9bd11bb684/editors%2Fcode%2Fsrc%2Flsp_ext.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Flsp_ext.ts?ref=ca85185bc6eef45fa34ac293288bbe9bd11bb684", "patch": "@@ -21,7 +21,7 @@ export const reloadWorkspace = new lc.RequestType0<null, void>(\"rust-analyzer/re\n \n export const hover = new lc.RequestType<HoverParams, lc.Hover | null, void>(\"textDocument/hover\");\n \n-export interface HoverParams extends lc.WorkDoneProgressParams{\n+export interface HoverParams extends lc.WorkDoneProgressParams {\n     textDocument: lc.TextDocumentIdentifier;\n     position: lc.Range | lc.Position;\n }"}]}