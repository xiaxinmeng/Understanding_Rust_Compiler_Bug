{"sha": "306f9e843d5474eb2de6907b3ca6941dc918ea23", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwNmY5ZTg0M2Q1NDc0ZWIyZGU2OTA3YjNjYTY5NDFkYzkxOGVhMjM=", "commit": {"author": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-07-12T01:30:19Z"}, "committer": {"name": "Cameron Steffen", "email": "cam.steffen94@gmail.com", "date": "2021-07-13T13:57:16Z"}, "message": "Split a lint message into help", "tree": {"sha": "80cbc9e7e0e242d8253cd00a9428aab0d6cce902", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/80cbc9e7e0e242d8253cd00a9428aab0d6cce902"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/306f9e843d5474eb2de6907b3ca6941dc918ea23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/306f9e843d5474eb2de6907b3ca6941dc918ea23", "html_url": "https://github.com/rust-lang/rust/commit/306f9e843d5474eb2de6907b3ca6941dc918ea23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/306f9e843d5474eb2de6907b3ca6941dc918ea23/comments", "author": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camsteffen", "id": 5565418, "node_id": "MDQ6VXNlcjU1NjU0MTg=", "avatar_url": "https://avatars.githubusercontent.com/u/5565418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camsteffen", "html_url": "https://github.com/camsteffen", "followers_url": "https://api.github.com/users/camsteffen/followers", "following_url": "https://api.github.com/users/camsteffen/following{/other_user}", "gists_url": "https://api.github.com/users/camsteffen/gists{/gist_id}", "starred_url": "https://api.github.com/users/camsteffen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camsteffen/subscriptions", "organizations_url": "https://api.github.com/users/camsteffen/orgs", "repos_url": "https://api.github.com/users/camsteffen/repos", "events_url": "https://api.github.com/users/camsteffen/events{/privacy}", "received_events_url": "https://api.github.com/users/camsteffen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73ffae6ea1b8639050ca19db9732a7a25daae482", "url": "https://api.github.com/repos/rust-lang/rust/commits/73ffae6ea1b8639050ca19db9732a7a25daae482", "html_url": "https://github.com/rust-lang/rust/commit/73ffae6ea1b8639050ca19db9732a7a25daae482"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "66724294804a8414d1dfbbda3ac5050051fc4349", "filename": "clippy_lints/src/explicit_write.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/306f9e843d5474eb2de6907b3ca6941dc918ea23/clippy_lints%2Fsrc%2Fexplicit_write.rs", "raw_url": "https://github.com/rust-lang/rust/raw/306f9e843d5474eb2de6907b3ca6941dc918ea23/clippy_lints%2Fsrc%2Fexplicit_write.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fexplicit_write.rs?ref=306f9e843d5474eb2de6907b3ca6941dc918ea23", "patch": "@@ -1,4 +1,4 @@\n-use clippy_utils::diagnostics::{span_lint, span_lint_and_sugg};\n+use clippy_utils::diagnostics::{span_lint_and_help, span_lint_and_sugg};\n use clippy_utils::higher::FormatArgsExpn;\n use clippy_utils::{is_expn_of, match_function_call, paths};\n use if_chain::if_chain;\n@@ -97,8 +97,8 @@ impl<'tcx> LateLintPass<'tcx> for ExplicitWrite {\n                     );\n                 } else {\n                     // We don't have a proper suggestion\n-                    let msg = format!(\"{}. Consider using `{}{}!` instead\", msg, prefix, sugg_mac);\n-                    span_lint(cx, EXPLICIT_WRITE, expr.span, &msg);\n+                    let help = format!(\"consider using `{}{}!` instead\", prefix, sugg_mac);\n+                    span_lint_and_help(cx, EXPLICIT_WRITE, expr.span, &msg, None, &help);\n                 }\n             }\n         }"}, {"sha": "b94ec6403ddcea3c63bfd188bbd6914679581c70", "filename": "tests/ui/explicit_write_non_rustfix.stderr", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/306f9e843d5474eb2de6907b3ca6941dc918ea23/tests%2Fui%2Fexplicit_write_non_rustfix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/306f9e843d5474eb2de6907b3ca6941dc918ea23/tests%2Fui%2Fexplicit_write_non_rustfix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fexplicit_write_non_rustfix.stderr?ref=306f9e843d5474eb2de6907b3ca6941dc918ea23", "patch": "@@ -1,10 +1,11 @@\n-error: use of `writeln!(stderr(), ...).unwrap()`. Consider using `eprintln!` instead\n+error: use of `writeln!(stderr(), ...).unwrap()`\n   --> $DIR/explicit_write_non_rustfix.rs:7:5\n    |\n LL |     writeln!(std::io::stderr(), \"foo {}\", bar).unwrap();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::explicit-write` implied by `-D warnings`\n+   = help: consider using `eprintln!` instead\n \n error: aborting due to previous error\n "}]}