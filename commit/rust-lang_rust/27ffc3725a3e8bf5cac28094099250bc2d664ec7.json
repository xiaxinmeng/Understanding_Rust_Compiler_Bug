{"sha": "27ffc3725a3e8bf5cac28094099250bc2d664ec7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3ZmZjMzcyNWEzZThiZjVjYWMyODA5NDA5OTI1MGJjMmQ2NjRlYzc=", "commit": {"author": {"name": "Chris Midgley", "email": "chris.midgley@dunecomputers.co.uk", "date": "2021-07-21T12:22:57Z"}, "committer": {"name": "Chris Midgley", "email": "chris.midgley@dunecomputers.co.uk", "date": "2021-07-21T12:31:47Z"}, "message": "Add long explanation for E0757", "tree": {"sha": "0b3fb01fb6c006ae741b135890303bbef3bedcc8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b3fb01fb6c006ae741b135890303bbef3bedcc8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27ffc3725a3e8bf5cac28094099250bc2d664ec7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27ffc3725a3e8bf5cac28094099250bc2d664ec7", "html_url": "https://github.com/rust-lang/rust/commit/27ffc3725a3e8bf5cac28094099250bc2d664ec7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27ffc3725a3e8bf5cac28094099250bc2d664ec7/comments", "author": {"login": "midgleyc", "id": 25565697, "node_id": "MDQ6VXNlcjI1NTY1Njk3", "avatar_url": "https://avatars.githubusercontent.com/u/25565697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/midgleyc", "html_url": "https://github.com/midgleyc", "followers_url": "https://api.github.com/users/midgleyc/followers", "following_url": "https://api.github.com/users/midgleyc/following{/other_user}", "gists_url": "https://api.github.com/users/midgleyc/gists{/gist_id}", "starred_url": "https://api.github.com/users/midgleyc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/midgleyc/subscriptions", "organizations_url": "https://api.github.com/users/midgleyc/orgs", "repos_url": "https://api.github.com/users/midgleyc/repos", "events_url": "https://api.github.com/users/midgleyc/events{/privacy}", "received_events_url": "https://api.github.com/users/midgleyc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "midgleyc", "id": 25565697, "node_id": "MDQ6VXNlcjI1NTY1Njk3", "avatar_url": "https://avatars.githubusercontent.com/u/25565697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/midgleyc", "html_url": "https://github.com/midgleyc", "followers_url": "https://api.github.com/users/midgleyc/followers", "following_url": "https://api.github.com/users/midgleyc/following{/other_user}", "gists_url": "https://api.github.com/users/midgleyc/gists{/gist_id}", "starred_url": "https://api.github.com/users/midgleyc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/midgleyc/subscriptions", "organizations_url": "https://api.github.com/users/midgleyc/orgs", "repos_url": "https://api.github.com/users/midgleyc/repos", "events_url": "https://api.github.com/users/midgleyc/events{/privacy}", "received_events_url": "https://api.github.com/users/midgleyc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf932aa584f2ba1a1744f3ef0b21f14387276fb6", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf932aa584f2ba1a1744f3ef0b21f14387276fb6", "html_url": "https://github.com/rust-lang/rust/commit/cf932aa584f2ba1a1744f3ef0b21f14387276fb6"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "2eced1fc0fc3c05bf4171591cb89a15bca6a6762", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/27ffc3725a3e8bf5cac28094099250bc2d664ec7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27ffc3725a3e8bf5cac28094099250bc2d664ec7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=27ffc3725a3e8bf5cac28094099250bc2d664ec7", "patch": "@@ -449,6 +449,7 @@ E0753: include_str!(\"./error_codes/E0753.md\"),\n E0754: include_str!(\"./error_codes/E0754.md\"),\n E0755: include_str!(\"./error_codes/E0755.md\"),\n E0756: include_str!(\"./error_codes/E0756.md\"),\n+E0757: include_str!(\"./error_codes/E0757.md\"),\n E0758: include_str!(\"./error_codes/E0758.md\"),\n E0759: include_str!(\"./error_codes/E0759.md\"),\n E0760: include_str!(\"./error_codes/E0760.md\"),\n@@ -638,6 +639,5 @@ E0783: include_str!(\"./error_codes/E0783.md\"),\n //    E0723, unstable feature in `const` context\n     E0726, // non-explicit (not `'_`) elided lifetime in unsupported position\n //  E0738, // Removed; errored on `#[track_caller] fn`s in `extern \"Rust\" { ... }`.\n-    E0757, // `#[ffi_const]` functions cannot be `#[ffi_pure]`\n     E0772, // `'static' obligation coming from `impl dyn Trait {}` or `impl Foo for dyn Bar {}`.\n }"}, {"sha": "03ab4e7699dcdbe029f799b4ec3121b9514ef112", "filename": "compiler/rustc_error_codes/src/error_codes/E0757.md", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/27ffc3725a3e8bf5cac28094099250bc2d664ec7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0757.md", "raw_url": "https://github.com/rust-lang/rust/raw/27ffc3725a3e8bf5cac28094099250bc2d664ec7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0757.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0757.md?ref=27ffc3725a3e8bf5cac28094099250bc2d664ec7", "patch": "@@ -0,0 +1,25 @@\n+A function was given both the `ffi_const` and `ffi_pure` attributes.\n+\n+Erroneous code example:\n+\n+```compile_fail,E0757\n+#![feature(ffi_const, ffi_pure)]\n+\n+extern \"C\" {\n+    #[ffi_const]\n+    #[ffi_pure] // error: `#[ffi_const]` function cannot be `#[ffi_pure]`\n+    pub fn square(num: i32) -> i32;\n+}\n+```\n+\n+As `const` has a stricter set of requirements than `pure`, remove the `ffi_pure`\n+attribute:\n+\n+```\n+#![feature(ffi_const)]\n+\n+extern \"C\" {\n+    #[ffi_const]\n+    pub fn square(num: i32) -> i32;\n+}\n+```"}, {"sha": "0c30c9dc50c0d8ecd206482d9ed766bc57108629", "filename": "src/test/ui/ffi_const2.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/27ffc3725a3e8bf5cac28094099250bc2d664ec7/src%2Ftest%2Fui%2Fffi_const2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/27ffc3725a3e8bf5cac28094099250bc2d664ec7/src%2Ftest%2Fui%2Fffi_const2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fffi_const2.stderr?ref=27ffc3725a3e8bf5cac28094099250bc2d664ec7", "patch": "@@ -6,3 +6,4 @@ LL |     #[ffi_pure]\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0757`."}]}