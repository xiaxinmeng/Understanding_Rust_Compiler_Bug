{"sha": "aef0581513f3fd01068cb423d9c62cb48b3f077a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlZjA1ODE1MTNmM2ZkMDEwNjhjYjQyM2Q5YzYyY2I0OGIzZjA3N2E=", "commit": {"author": {"name": "Lee Jeffery", "email": "leejeffery@gmail.com", "date": "2015-05-13T21:05:01Z"}, "committer": {"name": "Lee Jeffery", "email": "leejeffery@gmail.com", "date": "2015-05-13T21:05:01Z"}, "message": "Fix byte offset and error message inconsistencies", "tree": {"sha": "4fc42c702bd7a7e05573351641de41f92338eec5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4fc42c702bd7a7e05573351641de41f92338eec5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aef0581513f3fd01068cb423d9c62cb48b3f077a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aef0581513f3fd01068cb423d9c62cb48b3f077a", "html_url": "https://github.com/rust-lang/rust/commit/aef0581513f3fd01068cb423d9c62cb48b3f077a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aef0581513f3fd01068cb423d9c62cb48b3f077a/comments", "author": null, "committer": null, "parents": [{"sha": "a76244fcef9e1ae83b6a7631f33c409c156ad3d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/a76244fcef9e1ae83b6a7631f33c409c156ad3d9", "html_url": "https://github.com/rust-lang/rust/commit/a76244fcef9e1ae83b6a7631f33c409c156ad3d9"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "81b283a622ea04e441061a250daa13de32ce5e1e", "filename": "src/libsyntax/parse/lexer/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/aef0581513f3fd01068cb423d9c62cb48b3f077a/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aef0581513f3fd01068cb423d9c62cb48b3f077a/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs?ref=aef0581513f3fd01068cb423d9c62cb48b3f077a", "patch": "@@ -406,7 +406,7 @@ impl<'a> StringReader<'a> {\n \n                     // line comments starting with \"///\" or \"//!\" are doc-comments\n                     let doc_comment = self.curr_is('/') || self.curr_is('!');\n-                    let start_bpos = self.pos - BytePos(3);\n+                    let start_bpos = self.last_pos - BytePos(2);\n \n                     while !self.is_eof() {\n                         match self.curr.unwrap() {\n@@ -415,9 +415,9 @@ impl<'a> StringReader<'a> {\n                                 if self.nextch_is('\\n') {\n                                     // CRLF\n                                     break\n-                                } else {\n+                                } else if doc_comment {\n                                     self.err_span_(self.last_pos, self.pos,\n-                                                   \"bare CR not allowed in comment\");\n+                                                   \"bare CR not allowed in doc-comment\");\n                                 }\n                             }\n                             _ => ()"}]}