{"sha": "10e3d92306ad4022cff547aa1e02b13cdfab816d", "node_id": "C_kwDOAAsO6NoAKDEwZTNkOTIzMDZhZDQwMjJjZmY1NDdhYTFlMDJiMTNjZGZhYjgxNmQ", "commit": {"author": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2021-12-21T19:41:26Z"}, "committer": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-01-03T22:24:10Z"}, "message": "Label more build steps.\n\nCurrently the output of a command like `./x.py build --stage 0 library/std` is this:\n```\nUpdating only changed submodules\nSubmodules updated in 0.02 seconds\nextracting [...]\n   Compiling [...]\n    Finished dev [unoptimized] target(s) in 17.53s\nBuilding stage0 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\n   Compling [...]\n    Finished release [optimized + debuginfo] target(s) in 21.99s\nCopying stage0 std from stage0 (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)\nBuild completed successfully in 0:00:51\n```\nI find the part before the \"Building stage0 std artifacts\" a bit confusing.\n\nAfter this commit, it looks like this:\n```\nUpdating only changed submodules\n  Submodules updated in 0.02 seconds\nextracting [...]\nBuilding rustbuild\n   Compiling [...]\n    Finished dev [unoptimized] target(s) in 17.53s\nBuilding stage0 std artifacts (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu)\n   Compling [...]\n    Finished release [optimized + debuginfo] target(s) in 21.99s\nCopying stage0 std from stage0 (x86_64-unknown-linux-gnu -> x86_64-unknown-linux-gnu / x86_64-unknown-linux-gnu)\nBuild completed successfully in 0:00:51\n```\nThe \"Building rustbuild\" label makes it clear what the first cargo build\ninvocation is for. The indentation of the \"Submodules updated\" line\nindicates it is a sub-step of a parent task.", "tree": {"sha": "cc35fe57b2e9604b3f5580a715162780c1b02a80", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc35fe57b2e9604b3f5580a715162780c1b02a80"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/10e3d92306ad4022cff547aa1e02b13cdfab816d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/10e3d92306ad4022cff547aa1e02b13cdfab816d", "html_url": "https://github.com/rust-lang/rust/commit/10e3d92306ad4022cff547aa1e02b13cdfab816d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/10e3d92306ad4022cff547aa1e02b13cdfab816d/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ddabe0775c5f5b551d5eb54e3c4366fb8bec0c92", "url": "https://api.github.com/repos/rust-lang/rust/commits/ddabe0775c5f5b551d5eb54e3c4366fb8bec0c92", "html_url": "https://github.com/rust-lang/rust/commit/ddabe0775c5f5b551d5eb54e3c4366fb8bec0c92"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "5235a6b8180533ea4269aa35ef423fdeb65637eb", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/10e3d92306ad4022cff547aa1e02b13cdfab816d/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/10e3d92306ad4022cff547aa1e02b13cdfab816d/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=10e3d92306ad4022cff547aa1e02b13cdfab816d", "patch": "@@ -974,6 +974,7 @@ def bootstrap_binary(self):\n \n     def build_bootstrap(self):\n         \"\"\"Build bootstrap\"\"\"\n+        print(\"Building rustbuild\")\n         build_dir = os.path.join(self.build_dir, \"bootstrap\")\n         if self.clean and os.path.exists(build_dir):\n             shutil.rmtree(build_dir)\n@@ -1133,7 +1134,7 @@ def update_submodules(self):\n             recorded_submodules[data[3]] = data[2]\n         for module in filtered_submodules:\n             self.update_submodule(module[0], module[1], recorded_submodules)\n-        print(\"Submodules updated in %.2f seconds\" % (time() - start_time))\n+        print(\"  Submodules updated in %.2f seconds\" % (time() - start_time))\n \n     def set_dist_environment(self, url):\n         \"\"\"Set download URL for normal environment\"\"\""}]}