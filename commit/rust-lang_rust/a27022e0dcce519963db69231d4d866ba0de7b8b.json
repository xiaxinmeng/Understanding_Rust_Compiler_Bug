{"sha": "a27022e0dcce519963db69231d4d866ba0de7b8b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyNzAyMmUwZGNjZTUxOTk2M2RiNjkyMzFkNGQ4NjZiYTBkZTdiOGI=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-02-11T06:35:28Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-02-11T07:34:37Z"}, "message": "Document `declare_clippy_lint` macro\n\nSplit up from my work on updating CONTRIBUTING.md, which is slowly\nmaking progress.\n\ncc #2666", "tree": {"sha": "2c49b46615de2748e21cb674440dd4b2a2b066bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c49b46615de2748e21cb674440dd4b2a2b066bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a27022e0dcce519963db69231d4d866ba0de7b8b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEvUKv4zqIn2RHUgCKtvoGpuDiZlsFAlxhJY0ACgkQtvoGpuDi\nZltYEA/+M4ALqNede/HbxV6utMLqwTxV4xOZ7HJJhEILSD1GxV7onQEspo0ehI2b\ntOA7Wj1C71pZ5ra/uJTHZcKsFQfV9VlqCkvHajUta8hOKVZ/hiTmGegbyyGMFQIE\no6V0uwNDSlIa7s9JltPrsCSfk8l+JhuGmeaGULQcJAi207M08S/NiKtYB+dEOPn4\nMmRhUMX/2HaRRTe5qynn+3s4Zzc5XtLZYD3p09H+V2ruM4XlY7rvmyIIshMPXPmc\n3hQWY4n9cw8aXV/QvWi26HVfA4EfIgwmEIogi5b2dGtmsurWS7PTn2Tjn7lscr2y\npkpt4wL7n5CvJ7QahD2xTu7EuDIqJIMpwAGMTsQMNI+6A9LNUWEYTK/3jf4EvTu/\nwGTxK3avRGIze8wTlcdydWSj+lM9CWVS1IaNZ/Mt/NlkXNzH5JT2+wEpfgYHtpQu\nx3zd1XS4PWMQFbYbwW8eCYQL2PEM7ye18V/NlTeMXJKBnjq0Z90GV8EwC+9LsAgN\nV6m6CbV9cBVOeIJZbtrxWoAdlgyHGE5rttIWf9rEoMXJyHA/jKKLTymmkzyPHnC9\n70BvaLyDxA7nPhIcSebwdrhdYGgR+EAO4ksiPp402dwJeqKMYab5Nxg4lt7TUEs4\nBSPI86jmIXKZoD0g5XxmouaybU2650t5+nurnkNXtM85Nr5/yAA=\n=huLi\n-----END PGP SIGNATURE-----", "payload": "tree 2c49b46615de2748e21cb674440dd4b2a2b066bd\nparent 5725726345039830677a0aeb8389ae78ce01ff97\nauthor Philipp Hansch <dev@phansch.net> 1549866928 +0100\ncommitter Philipp Hansch <dev@phansch.net> 1549870477 +0100\n\nDocument `declare_clippy_lint` macro\n\nSplit up from my work on updating CONTRIBUTING.md, which is slowly\nmaking progress.\n\ncc #2666\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a27022e0dcce519963db69231d4d866ba0de7b8b", "html_url": "https://github.com/rust-lang/rust/commit/a27022e0dcce519963db69231d4d866ba0de7b8b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a27022e0dcce519963db69231d4d866ba0de7b8b/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5725726345039830677a0aeb8389ae78ce01ff97", "url": "https://api.github.com/repos/rust-lang/rust/commits/5725726345039830677a0aeb8389ae78ce01ff97", "html_url": "https://github.com/rust-lang/rust/commit/5725726345039830677a0aeb8389ae78ce01ff97"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "5a5f968a2cf95d6ea98be76e37a10471364800ac", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 47, "deletions": 2, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/a27022e0dcce519963db69231d4d866ba0de7b8b/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a27022e0dcce519963db69231d4d866ba0de7b8b/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=a27022e0dcce519963db69231d4d866ba0de7b8b", "patch": "@@ -37,8 +37,53 @@ extern crate syntax_pos;\n \n use toml;\n \n-// Currently, categories \"style\", \"correctness\", \"complexity\" and \"perf\" are enabled by default,\n-// as said in the README.md of this repository. If this changes, please update README.md.\n+/// Macro used to declare a Clippy lint.\n+///\n+/// Every lint declaration consists of 4 parts:\n+///\n+/// 1. The documentation above the lint, which is used for the website\n+/// 2. The `LINT_NAME`. See [lint naming][lint_naming] on lint naming conventions.\n+/// 3. The `lint_level`, which is a mapping from *one* of our lint groups to `Allow`, `Warn` or\n+///    `Deny`. The lint level here has nothing to do with what lint groups the lint is a part of.\n+/// 4. The `description` that contains a short explanation on what's wrong with code where the\n+///    lint is triggered.\n+///\n+/// Currently the categories `style`, `correctness`, `complexity` and `perf` are enabled by default.\n+/// As said in the README.md of this repository, if the lint level mapping changes, please update\n+/// README.md.\n+///\n+/// # Example\n+///\n+/// ```\n+/// # #![feature(rustc_private)]\n+/// # #[allow(unused_extern_crates)]\n+/// # extern crate rustc;\n+/// # #[macro_use]\n+/// # use clippy_lints::declare_clippy_lint;\n+/// use rustc::declare_tool_lint;\n+///\n+/// /// **What it does:** Checks for ... (describe what the lint matches).\n+/// ///\n+/// /// **Why is this bad?** Supply the reason for linting the code.\n+/// ///\n+/// /// **Known problems:** None. (Or describe where it could go wrong.)\n+/// ///\n+/// /// **Example:**\n+/// ///\n+/// /// ```rust\n+/// /// // Bad\n+/// /// Insert a short example of code that triggers the lint\n+/// ///\n+/// /// // Good\n+/// /// Insert a short example of improved code that doesn't trigger the lint\n+/// /// ```\n+/// declare_clippy_lint! {\n+///     pub LINT_NAME,\n+///     pedantic,\n+///     \"description\"\n+/// }\n+/// ```\n+/// [lint_naming]: https://rust-lang.github.io/rfcs/0344-conventions-galore.html#lints\n #[macro_export]\n macro_rules! declare_clippy_lint {\n     { pub $name:tt, style, $description:tt } => {"}]}