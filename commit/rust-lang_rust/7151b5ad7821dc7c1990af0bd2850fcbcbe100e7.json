{"sha": "7151b5ad7821dc7c1990af0bd2850fcbcbe100e7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxNTFiNWFkNzgyMWRjN2MxOTkwYWYwYmQyODUwZmNiY2JlMTAwZTc=", "commit": {"author": {"name": "Doug Goldstein", "email": "cardoe@cardoe.com", "date": "2016-04-11T03:17:27Z"}, "committer": {"name": "Doug Goldstein", "email": "cardoe@cardoe.com", "date": "2016-12-02T16:07:39Z"}, "message": "rustc: add basic test for --print target-spec\n\nThis is a very basic test of the --print target-spec feature.\n\nSigned-off-by: Doug Goldstein <cardoe@cardoe.com>", "tree": {"sha": "772a09e2e428497ab8010f4628fb8cd1387d96b0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/772a09e2e428497ab8010f4628fb8cd1387d96b0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2.0\n\niQJ8BAABCgBmBQJYQZxLXxSAAAAAAC4AKGlzc3Vlci1mcHJAbm90YXRpb25zLm9w\nZW5wZ3AuZmlmdGhob3JzZW1hbi5uZXRBNTM5MEQ2RTNFMTkyNzlCNzVDMzIwOTVB\nMkJDMDNEQzg3RUQxQkQ0AAoJEKK8A9yH7RvUc7sP/j/P4TQ65Sr6pbJ093jGq05w\nOqjhvn1W8HKYh+ni+4QtsVY1tPXx6o+4Xi5rpDNuFHOCPECc9gTScjYhWL3oHpsY\n4AyMhhFTRXit2hB60hMwi1bpEfY7/Ttq6NTYpgRIyhnqoESJ1O92KqQVdk7pdZfI\nJDRX0vRGclERYv5Brp8xjynD9gC0CcAp7kcz5hkTLuOlNJD/1P9WFGv2tK2mp4vD\nwxRPGm4e/TIQdR+e7eFc2ML+p0SD/dCbNxZcV4axGqhOGTx+JUpSDKEyIvoYGv57\nkBGbNhcQIjEhw0CbkcxoSLT6/+rX34zQRNssbRB4znqyTVmk47G7ne2Gjb2wd0t6\nggLXJ/wMSt/+feKaIw6ur0ZhnQvYnLvIty6l2C2LX2ekPkgpcQ06SyXwNzomc3gI\nWmzvbNn+MeyQKNbh4a6CGwNjBGgqGycQiccnaDGSbFg3JJbJtJxhVGPnl99DKFIg\nPPqTwumwEiUePAajGA54Um9L/LM+RS5K8s3YfZJStmsK+ST/VARtnncgMGxBu0oB\nn4+ttuh38+iMCmi246YW60KkcFfaOxUY/lkzXeMXWcC+ihSAgJsr5eQXskysvIn1\nTzNrSiMjg8tHradEcW4WMiqIGf6OmIn/D3vYhWOAnW8xHKM2or1+ImQotRX0Rijf\nG/h7ZO/I1po+Aesi6q5R\n=UxPT\n-----END PGP SIGNATURE-----", "payload": "tree 772a09e2e428497ab8010f4628fb8cd1387d96b0\nparent ff112644defc6a982bfd6a793afbeb3155173742\nauthor Doug Goldstein <cardoe@cardoe.com> 1460344647 -0500\ncommitter Doug Goldstein <cardoe@cardoe.com> 1480694859 -0600\n\nrustc: add basic test for --print target-spec\n\nThis is a very basic test of the --print target-spec feature.\n\nSigned-off-by: Doug Goldstein <cardoe@cardoe.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7", "html_url": "https://github.com/rust-lang/rust/commit/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7/comments", "author": {"login": "cardoe", "id": 8839, "node_id": "MDQ6VXNlcjg4Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cardoe", "html_url": "https://github.com/cardoe", "followers_url": "https://api.github.com/users/cardoe/followers", "following_url": "https://api.github.com/users/cardoe/following{/other_user}", "gists_url": "https://api.github.com/users/cardoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/cardoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cardoe/subscriptions", "organizations_url": "https://api.github.com/users/cardoe/orgs", "repos_url": "https://api.github.com/users/cardoe/repos", "events_url": "https://api.github.com/users/cardoe/events{/privacy}", "received_events_url": "https://api.github.com/users/cardoe/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cardoe", "id": 8839, "node_id": "MDQ6VXNlcjg4Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cardoe", "html_url": "https://github.com/cardoe", "followers_url": "https://api.github.com/users/cardoe/followers", "following_url": "https://api.github.com/users/cardoe/following{/other_user}", "gists_url": "https://api.github.com/users/cardoe/gists{/gist_id}", "starred_url": "https://api.github.com/users/cardoe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cardoe/subscriptions", "organizations_url": "https://api.github.com/users/cardoe/orgs", "repos_url": "https://api.github.com/users/cardoe/repos", "events_url": "https://api.github.com/users/cardoe/events{/privacy}", "received_events_url": "https://api.github.com/users/cardoe/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff112644defc6a982bfd6a793afbeb3155173742", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff112644defc6a982bfd6a793afbeb3155173742", "html_url": "https://github.com/rust-lang/rust/commit/ff112644defc6a982bfd6a793afbeb3155173742"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "6b58ad7b6dff07b4550f3d644dc2d308b2dd830c", "filename": "src/test/run-make/target-specs/Makefile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7/src%2Ftest%2Frun-make%2Ftarget-specs%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/7151b5ad7821dc7c1990af0bd2850fcbcbe100e7/src%2Ftest%2Frun-make%2Ftarget-specs%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftarget-specs%2FMakefile?ref=7151b5ad7821dc7c1990af0bd2850fcbcbe100e7", "patch": "@@ -6,3 +6,4 @@ all:\n \t$(RUSTC) foo.rs --target=my-incomplete-platform.json 2>&1 | grep 'Field llvm-target'\n \tRUST_TARGET_PATH=. $(RUSTC) foo.rs --target=my-awesome-platform --crate-type=lib --emit=asm\n \tRUST_TARGET_PATH=. $(RUSTC) foo.rs --target=x86_64-unknown-linux-gnu --crate-type=lib --emit=asm\n+\t$(RUSTC) -Z unstable-options --target=my-awesome-platform.json --print target-spec-json > $(TMPDIR)/test-platform.json && $(RUSTC) -Z unstable-options --target=$(TMPDIR)/test-platform.json --print target-spec-json | diff -q $(TMPDIR)/test-platform.json -"}]}