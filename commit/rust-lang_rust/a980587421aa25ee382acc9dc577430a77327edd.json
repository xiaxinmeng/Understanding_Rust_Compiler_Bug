{"sha": "a980587421aa25ee382acc9dc577430a77327edd", "node_id": "C_kwDOAAsO6NoAKGE5ODA1ODc0MjFhYTI1ZWUzODJhY2M5ZGM1Nzc0MzBhNzczMjdlZGQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-10-21T05:11:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-21T05:11:06Z"}, "message": "Rollup merge of #90029 - tgnottingham:incr-debug-logging-test, r=Mark-Simulacrum\n\nAdd test for debug logging during incremental compilation\n\nDebug logging during incremental compilation had been broken for some\ntime, until #89343 fixed it (among other things). Add a test so this is\nless likely to break without being noticed. This test is nearly a copy\nof the `src/test/ui/rustc-rust-log.rs` test, but tests debug logging in\nthe incremental compliation code paths.", "tree": {"sha": "67a717cab850ced181960ae05ca1ac8b501a7cf6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67a717cab850ced181960ae05ca1ac8b501a7cf6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a980587421aa25ee382acc9dc577430a77327edd", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhcPZqCRBK7hj4Ov3rIwAA/DYIADAigOMI/nxIgNCQKZjisBEd\naIKoXO/2eIpg7EmT3knX0zf6rVldyD38P8Qj7CmdJ5nqTSVCGlGx6VVf4P0AQPfx\n3ZvoxY7HtyLM3EdAfcGJT/P9pm2/BTX+Gyw2XhSKIVNCQ8Xk49p6aSo4cpwsmjPE\nZX9AH1ZI3joDf1LXF6xItX7SITXfoJdObqXjstrMBFoWxHLs2FHE6JAd3gTQuv2F\npX4RFMd/NNbNTohg4kU2hdQXz3xNHDQXaANfR699zlEPlPic1iGzTXTR5errsxWQ\nI1h3tsEX8B558LUmcHB+9f2icARI0YPGmnKfEuGhp65RcbXMbBfB3nyHg6lw1tg=\n=QvId\n-----END PGP SIGNATURE-----\n", "payload": "tree 67a717cab850ced181960ae05ca1ac8b501a7cf6\nparent d29e98fe93e60b68cf2bfcd62afa50bedfcc0af3\nparent aefbd401408769fbca1c486546b8dc3fce9e0d9b\nauthor Yuki Okushi <jtitor@2k36.org> 1634793066 +0900\ncommitter GitHub <noreply@github.com> 1634793066 +0900\n\nRollup merge of #90029 - tgnottingham:incr-debug-logging-test, r=Mark-Simulacrum\n\nAdd test for debug logging during incremental compilation\n\nDebug logging during incremental compilation had been broken for some\ntime, until #89343 fixed it (among other things). Add a test so this is\nless likely to break without being noticed. This test is nearly a copy\nof the `src/test/ui/rustc-rust-log.rs` test, but tests debug logging in\nthe incremental compliation code paths.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a980587421aa25ee382acc9dc577430a77327edd", "html_url": "https://github.com/rust-lang/rust/commit/a980587421aa25ee382acc9dc577430a77327edd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a980587421aa25ee382acc9dc577430a77327edd/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d29e98fe93e60b68cf2bfcd62afa50bedfcc0af3", "url": "https://api.github.com/repos/rust-lang/rust/commits/d29e98fe93e60b68cf2bfcd62afa50bedfcc0af3", "html_url": "https://github.com/rust-lang/rust/commit/d29e98fe93e60b68cf2bfcd62afa50bedfcc0af3"}, {"sha": "aefbd401408769fbca1c486546b8dc3fce9e0d9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/aefbd401408769fbca1c486546b8dc3fce9e0d9b", "html_url": "https://github.com/rust-lang/rust/commit/aefbd401408769fbca1c486546b8dc3fce9e0d9b"}], "stats": {"total": 29, "additions": 25, "deletions": 4}, "files": [{"sha": "a361373dc19554289fb877213eb22ce6eb770919", "filename": "src/test/incremental/auxiliary/rustc-rust-log-aux.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fincremental%2Fauxiliary%2Frustc-rust-log-aux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fincremental%2Fauxiliary%2Frustc-rust-log-aux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fauxiliary%2Frustc-rust-log-aux.rs?ref=a980587421aa25ee382acc9dc577430a77327edd", "patch": "@@ -0,0 +1,8 @@\n+// rustc-env:RUSTC_LOG=debug\n+#[cfg(rpass1)]\n+pub fn foo() {}\n+\n+#[cfg(rpass2)]\n+pub fn foo() {\n+    println!();\n+}"}, {"sha": "566f0d96d9732d420821d1cfa0b0970ca74587d2", "filename": "src/test/incremental/rustc-rust-log.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fincremental%2Frustc-rust-log.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fincremental%2Frustc-rust-log.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Frustc-rust-log.rs?ref=a980587421aa25ee382acc9dc577430a77327edd", "patch": "@@ -0,0 +1,16 @@\n+// revisions: rpass1 rpass2\n+// This test is just checking that we won't ICE if logging is turned\n+// on; don't bother trying to compare that (copious) output.\n+//\n+// dont-check-compiler-stdout\n+// dont-check-compiler-stderr\n+// aux-build: rustc-rust-log-aux.rs\n+// rustc-env:RUSTC_LOG=debug\n+\n+#[cfg(rpass1)]\n+fn main() {}\n+\n+#[cfg(rpass2)]\n+fn main() {\n+    println!();\n+}"}, {"sha": "52e7dcf4499a8478d1c12f862e696894cc9ec08f", "filename": "src/test/ui/rustc-rust-log.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fui%2Frustc-rust-log.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a980587421aa25ee382acc9dc577430a77327edd/src%2Ftest%2Fui%2Frustc-rust-log.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustc-rust-log.rs?ref=a980587421aa25ee382acc9dc577430a77327edd", "patch": "@@ -1,9 +1,6 @@\n // run-pass\n // This test is just checking that we won't ICE if logging is turned\n-// on; don't bother trying to compare that (copious) output. (Note\n-// also that this test potentially silly, since we do not build+test\n-// debug versions of rustc as part of our continuous integration\n-// process...)\n+// on; don't bother trying to compare that (copious) output.\n //\n // dont-check-compiler-stdout\n // dont-check-compiler-stderr"}]}