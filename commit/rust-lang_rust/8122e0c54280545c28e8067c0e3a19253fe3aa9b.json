{"sha": "8122e0c54280545c28e8067c0e3a19253fe3aa9b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxMjJlMGM1NDI4MDU0NWMyOGU4MDY3YzBlM2ExOTI1M2ZlM2FhOWI=", "commit": {"author": {"name": "Rafael Avila de Espindola", "email": "espindola@dream.(none)", "date": "2011-02-07T17:46:28Z"}, "committer": {"name": "Rafael Avila de Espindola", "email": "espindola@dream.(none)", "date": "2011-02-07T17:50:04Z"}, "message": "Add support for\nnative mod foo = \"bar\" ...", "tree": {"sha": "e6560391519e60a8c750890af13ea186b91fa91c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e6560391519e60a8c750890af13ea186b91fa91c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8122e0c54280545c28e8067c0e3a19253fe3aa9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8122e0c54280545c28e8067c0e3a19253fe3aa9b", "html_url": "https://github.com/rust-lang/rust/commit/8122e0c54280545c28e8067c0e3a19253fe3aa9b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8122e0c54280545c28e8067c0e3a19253fe3aa9b/comments", "author": null, "committer": null, "parents": [{"sha": "57bb9d809bb029caf7b38042a433153bb965e1fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/57bb9d809bb029caf7b38042a433153bb965e1fb", "html_url": "https://github.com/rust-lang/rust/commit/57bb9d809bb029caf7b38042a433153bb965e1fb"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "8d1309352bb96eba9429a170af8f6ee54e2e2c49", "filename": "src/comp/front/parser.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/8122e0c54280545c28e8067c0e3a19253fe3aa9b/src%2Fcomp%2Ffront%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8122e0c54280545c28e8067c0e3a19253fe3aa9b/src%2Fcomp%2Ffront%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Fparser.rs?ref=8122e0c54280545c28e8067c0e3a19253fe3aa9b", "patch": "@@ -1630,9 +1630,20 @@ impure fn parse_native_mod_items(parser p,\n impure fn parse_item_native_mod(parser p) -> @ast.item {\n     auto lo = p.get_span();\n     expect(p, token.NATIVE);\n-    auto native_name = parse_str_lit(p);\n+    auto has_eq;\n+    auto native_name = \"\";\n+    if (p.peek() == token.MOD) {\n+        has_eq = true;\n+    } else {\n+        native_name = parse_str_lit(p);\n+        has_eq = false;\n+    }\n     expect(p, token.MOD);\n     auto id = parse_ident(p);\n+    if (has_eq) {\n+        expect(p, token.EQ);\n+        native_name = parse_str_lit(p);\n+    }\n     expect(p, token.LBRACE);\n     auto m = parse_native_mod_items(p, native_name);\n     auto hi = p.get_span();"}, {"sha": "4d2f0ad94a8e6e7b363c49023db2b1b7ae81edfb", "filename": "src/test/run-pass/native2.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8122e0c54280545c28e8067c0e3a19253fe3aa9b/src%2Ftest%2Frun-pass%2Fnative2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8122e0c54280545c28e8067c0e3a19253fe3aa9b/src%2Ftest%2Frun-pass%2Fnative2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fnative2.rs?ref=8122e0c54280545c28e8067c0e3a19253fe3aa9b", "patch": "@@ -3,5 +3,9 @@ native \"rust\" mod rustrt {\n     fn vec_buf[T](vec[T] v, uint offset) -> vbuf;\n }\n \n+native mod libc = \"libc.dylib\" {\n+    fn write(int fd, rustrt.vbuf buf, uint count) -> int;\n+}\n+\n fn main(vec[str] args) {\n }"}]}