{"sha": "2a9283914721317564e0d5a6672e4f39767a9311", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhOTI4MzkxNDcyMTMxNzU2NGUwZDVhNjY3MmU0ZjM5NzY3YTkzMTE=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-03-29T16:08:01Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-03-30T05:21:44Z"}, "message": "rustc -> rustc_middle part 5 -- fix tests", "tree": {"sha": "637b0151ddc296b61025dd9b1e5424cb99893a79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/637b0151ddc296b61025dd9b1e5424cb99893a79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2a9283914721317564e0d5a6672e4f39767a9311", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2a9283914721317564e0d5a6672e4f39767a9311", "html_url": "https://github.com/rust-lang/rust/commit/2a9283914721317564e0d5a6672e4f39767a9311", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2a9283914721317564e0d5a6672e4f39767a9311/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39f06255d26aaa394d998feeab7074f18e1c4a0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/39f06255d26aaa394d998feeab7074f18e1c4a0b", "html_url": "https://github.com/rust-lang/rust/commit/39f06255d26aaa394d998feeab7074f18e1c4a0b"}], "stats": {"total": 50, "additions": 25, "deletions": 25}, "files": [{"sha": "4ed03fd21ad18b46ad0bb452f57c0ca5c9fd362c", "filename": "src/librustc_middle/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Flibrustc_middle%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Flibrustc_middle%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Flib.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -92,5 +92,5 @@ pub mod util {\n     pub mod common;\n }\n \n-// Allows macros to refer to this crate as `::rustc`\n+// Allows macros to refer to this crate as `::rustc_middle`\n extern crate self as rustc_middle;"}, {"sha": "7634124071823dd64dbc1ceef5a3c6f7b4ef3575", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/the_backend.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -1,7 +1,7 @@\n #![feature(rustc_private)]\n \n-extern crate rustc;\n extern crate rustc_codegen_ssa;\n+extern crate rustc_middle;\n #[macro_use]\n extern crate rustc_data_structures;\n extern crate rustc_driver;\n@@ -11,14 +11,14 @@ extern crate rustc_span;\n extern crate rustc_symbol_mangling;\n extern crate rustc_target;\n \n-use rustc::dep_graph::DepGraph;\n-use rustc::middle::cstore::{EncodedMetadata, MetadataLoader, MetadataLoaderDyn};\n-use rustc::ty::query::Providers;\n-use rustc::ty::TyCtxt;\n-use rustc::util::common::ErrorReported;\n use rustc_codegen_ssa::traits::CodegenBackend;\n use rustc_data_structures::owning_ref::OwningRef;\n use rustc_data_structures::sync::MetadataRef;\n+use rustc_middle::dep_graph::DepGraph;\n+use rustc_middle::middle::cstore::{EncodedMetadata, MetadataLoader, MetadataLoaderDyn};\n+use rustc_middle::ty::query::Providers;\n+use rustc_middle::ty::TyCtxt;\n+use rustc_middle::util::common::ErrorReported;\n use rustc_session::config::OutputFilenames;\n use rustc_session::Session;\n use rustc_span::symbol::Symbol;"}, {"sha": "5fbb3efabb37bedd7d0f7a4e2615955741614219", "filename": "src/test/ui-fulldeps/auxiliary/lto-syntax-extension-plugin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flto-syntax-extension-plugin.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -3,7 +3,7 @@\n #![feature(plugin_registrar)]\n #![feature(rustc_private)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n extern crate rustc_driver;\n \n use rustc_driver::plugin::Registry;"}, {"sha": "6584b905f5ed359ab4650543cd2aceff9e2f0ce8", "filename": "src/test/ui-fulldeps/auxiliary/outlive-expansion-phase.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Foutlive-expansion-phase.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -3,7 +3,7 @@\n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n extern crate rustc_driver;\n \n use std::any::Any;"}, {"sha": "e8e8ae2985a689e4df5515d27223c681641d4e43", "filename": "src/test/ui-fulldeps/auxiliary/rlib-crate-test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Frlib-crate-test.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -3,7 +3,7 @@\n #![crate_type = \"rlib\"]\n #![feature(plugin_registrar, rustc_private)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n extern crate rustc_driver;\n \n use rustc_driver::plugin::Registry;"}, {"sha": "d93e21cf7916c1c33958f245046fbc7b4cff1e7e", "filename": "src/test/ui-fulldeps/hash-stable-is-unstable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -2,7 +2,7 @@\n \n extern crate rustc_data_structures;\n //~^ use of unstable library feature 'rustc_private'\n-extern crate rustc;\n+extern crate rustc_middle;\n //~^ use of unstable library feature 'rustc_private'\n extern crate rustc_macros;\n //~^ use of unstable library feature 'rustc_private'"}, {"sha": "3c30e0402d96dc86e39661240de7a6b4b4b2f876", "filename": "src/test/ui-fulldeps/hash-stable-is-unstable.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fhash-stable-is-unstable.stderr?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -10,8 +10,8 @@ LL | extern crate rustc_data_structures;\n error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?\n   --> $DIR/hash-stable-is-unstable.rs:5:1\n    |\n-LL | extern crate rustc;\n-   | ^^^^^^^^^^^^^^^^^^^\n+LL | extern crate rustc_middle;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information\n    = help: add `#![feature(rustc_private)]` to the crate attributes to enable"}, {"sha": "f6f0c038536c8d86900fba9aa79697e9dd6e6664", "filename": "src/test/ui-fulldeps/internal-lints/lint_pass_impl_without_macro.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Flint_pass_impl_without_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Flint_pass_impl_without_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Flint_pass_impl_without_macro.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -3,7 +3,7 @@\n #![feature(rustc_private)]\n #![deny(rustc::lint_pass_impl_without_macro)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n extern crate rustc_session;\n \n use rustc_session::lint::{LintArray, LintPass};"}, {"sha": "e0fdbaeac306915a2528d99df611c37f34bb6e34", "filename": "src/test/ui-fulldeps/internal-lints/pass_ty_by_ref.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fpass_ty_by_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fpass_ty_by_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fpass_ty_by_ref.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -4,9 +4,9 @@\n #![deny(rustc::ty_pass_by_reference)]\n #![allow(unused)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n \n-use rustc::ty::{Ty, TyCtxt};\n+use rustc_middle::ty::{Ty, TyCtxt};\n \n fn ty_by_ref(\n     ty_val: Ty<'_>,"}, {"sha": "32b987338c057f1ecabf59fef7e1a40de47cb4cd", "filename": "src/test/ui-fulldeps/internal-lints/qualified_ty_ty_ctxt.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fqualified_ty_ty_ctxt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fqualified_ty_ty_ctxt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fqualified_ty_ty_ctxt.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -4,9 +4,9 @@\n #![deny(rustc::usage_of_qualified_ty)]\n #![allow(unused)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n \n-use rustc::ty::{self, Ty, TyCtxt};\n+use rustc_middle::ty::{self, Ty, TyCtxt};\n \n macro_rules! qualified_macro {\n     ($a:ident) => {"}, {"sha": "66b594a1b095a6b4a0137a25dd2c2641eca65905", "filename": "src/test/ui-fulldeps/internal-lints/ty_tykind_usage.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fty_tykind_usage.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fty_tykind_usage.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Finternal-lints%2Fty_tykind_usage.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -2,9 +2,9 @@\n \n #![feature(rustc_private)]\n \n-extern crate rustc;\n+extern crate rustc_middle;\n \n-use rustc::ty::{self, Ty, TyKind};\n+use rustc_middle::ty::{self, Ty, TyKind};\n \n #[deny(rustc::usage_of_ty_tykind)]\n fn main() {"}, {"sha": "524b0c2f73a5d6af848517197cbb621a56ec5281", "filename": "src/test/ui-fulldeps/pathless-extern-unstable.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.rs?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -1,10 +1,10 @@\n // ignore-stage1\n // edition:2018\n-// compile-flags:--extern rustc\n+// compile-flags:--extern rustc_middle\n \n-// Test that `--extern rustc` fails with `rustc_private`.\n+// Test that `--extern rustc_middle` fails with `rustc_private`.\n \n-pub use rustc;\n+pub use rustc_middle;\n //~^ ERROR use of unstable library feature 'rustc_private'\n \n fn main() {}"}, {"sha": "dcc3cddd32cfd3cd67b01e0fe1d8b843925a57c5", "filename": "src/test/ui-fulldeps/pathless-extern-unstable.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2a9283914721317564e0d5a6672e4f39767a9311/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fpathless-extern-unstable.stderr?ref=2a9283914721317564e0d5a6672e4f39767a9311", "patch": "@@ -1,8 +1,8 @@\n error[E0658]: use of unstable library feature 'rustc_private': this crate is being loaded from the sysroot, an unstable location; did you mean to load this crate from crates.io via `Cargo.toml` instead?\n   --> $DIR/pathless-extern-unstable.rs:7:9\n    |\n-LL | pub use rustc;\n-   |         ^^^^^\n+LL | pub use rustc_middle;\n+   |         ^^^^^^^^^^^^\n    |\n    = note: see issue #27812 <https://github.com/rust-lang/rust/issues/27812> for more information\n    = help: add `#![feature(rustc_private)]` to the crate attributes to enable"}]}