{"sha": "a1303cc81565a019d59be28940a94caf0f9329bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExMzAzY2M4MTU2NWEwMTlkNTliZTI4OTQwYTk0Y2FmMGY5MzI5YmY=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-07-20T08:47:24Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@gmail", "date": "2013-07-20T08:47:24Z"}, "message": "debuginfo: Removed some test relying on data structure sizes hard to predict for all possible platforms and configurations.", "tree": {"sha": "aab1297e2bce2085164b95578dc70261dcc99575", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aab1297e2bce2085164b95578dc70261dcc99575"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1303cc81565a019d59be28940a94caf0f9329bf", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1303cc81565a019d59be28940a94caf0f9329bf", "html_url": "https://github.com/rust-lang/rust/commit/a1303cc81565a019d59be28940a94caf0f9329bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1303cc81565a019d59be28940a94caf0f9329bf/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b52eb4a0ffbb5be156a0d71dc37f74c3f92e315e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b52eb4a0ffbb5be156a0d71dc37f74c3f92e315e", "html_url": "https://github.com/rust-lang/rust/commit/b52eb4a0ffbb5be156a0d71dc37f74c3f92e315e"}], "stats": {"total": 42, "additions": 23, "deletions": 19}, "files": [{"sha": "859166cb023a3a6d424a70edd96e6ceac22c101a", "filename": "src/test/debug-info/packed-struct.rs", "status": "modified", "additions": 3, "deletions": 11, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a1303cc81565a019d59be28940a94caf0f9329bf/src%2Ftest%2Fdebug-info%2Fpacked-struct.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1303cc81565a019d59be28940a94caf0f9329bf/src%2Ftest%2Fdebug-info%2Fpacked-struct.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Fpacked-struct.rs?ref=a1303cc81565a019d59be28940a94caf0f9329bf", "patch": "@@ -34,14 +34,6 @@\n // debugger:print sizeof(packedInPacked)\n // check:$6 = 40\n \n-// debugger:print sizeof(packedInUnpacked)\n-// check:$7 = 48\n-\n-// debugger:print sizeof(unpackedInPacked)\n-// check:$8 = 58\n-\n-\n-\n #[packed]\n struct Packed {\n     x: i16,\n@@ -57,23 +49,23 @@ struct PackedInPacked {\n     d: Packed\n }\n \n-// layout: aaaa bbbb bbbb bbbb bb.. .... cccc cccc dddd dddd dddd dd..\n+// layout (64 bit): aaaa bbbb bbbb bbbb bb.. .... cccc cccc dddd dddd dddd dd..\n struct PackedInUnpacked {\n     a: i32,\n     b: Packed,\n     c: i64,\n     d: Packed\n }\n \n-// layout: xx.. yyyy zz.. .... wwww wwww\n+// layout (64 bit): xx.. yyyy zz.. .... wwww wwww\n struct Unpacked {\n     x: i16,\n     y: i32,\n     z: i16,\n     w: i64\n }\n \n-// layout: aabb bbbb bbbb bbbb bbbb bbbb bbcc cccc cccc cccc cccc cccc ccdd dddd dd\n+// layout (64 bit): aabb bbbb bbbb bbbb bbbb bbbb bbcc cccc cccc cccc cccc cccc ccdd dddd dd\n #[packed]\n struct UnpackedInPacked {\n     a: i16,"}, {"sha": "0719f64b2564f03803e711882c625b554b653307", "filename": "src/test/debug-info/struct-with-destructor.rs", "status": "modified", "additions": 20, "deletions": 8, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/a1303cc81565a019d59be28940a94caf0f9329bf/src%2Ftest%2Fdebug-info%2Fstruct-with-destructor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1303cc81565a019d59be28940a94caf0f9329bf/src%2Ftest%2Fdebug-info%2Fstruct-with-destructor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Fstruct-with-destructor.rs?ref=a1303cc81565a019d59be28940a94caf0f9329bf", "patch": "@@ -26,10 +26,6 @@\n // debugger:print nested\n // check:$4 = {a = {a = {x = 7890, y = 9870}}}\n \n-// debugger:print sizeof(nested)\n-// check:$5 = 32\n-\n-\n struct NoDestructor {\n     x: i32,\n     y: i64\n@@ -84,6 +80,8 @@ fn main() {\n     // then the debugger will have an invalid offset for the field 'guard' and thus should not be\n     // able to read its value correctly (dots are padding bytes, D is the boolean destructor flag):\n     //\n+    // 64 bit\n+    //\n     // NoDestructorGuarded = 0000....00000000FFFFFFFF\n     //                       <--------------><------>\n     //                         NoDestructor   guard\n@@ -96,15 +94,29 @@ fn main() {\n     //                         <----------------------><------>  // How it actually is\n     //                              WithDestructor      guard\n     //\n+    // 32 bit\n+    //\n+    // NoDestructorGuarded = 000000000000FFFFFFFF\n+    //                       <----------><------>\n+    //                       NoDestructor guard\n+    //\n+    //\n+    // withDestructorGuarded = 000000000000D...FFFFFFFF\n+    //                         <----------><------>      // How debug info says it is\n+    //                      WithDestructor  guard\n+    //\n+    //                         <--------------><------>  // How it actually is\n+    //                          WithDestructor  guard\n+    //\n     let withDestructor = WithDestructorGuarded {\n         a: WithDestructor { x: 10, y: 20 },\n         guard: -1\n     };\n \n-    // expected layout = xxxx....yyyyyyyyD.......D...\n-    //                   <--WithDestructor------>\n-    //                   <-------NestedInner-------->\n-    //                   <-------NestedOuter-------->\n+    // expected layout (64 bit) = xxxx....yyyyyyyyD.......D...\n+    //                            <--WithDestructor------>\n+    //                            <-------NestedInner-------->\n+    //                            <-------NestedOuter-------->\n     let nested = NestedOuter { a: NestedInner { a: WithDestructor { x: 7890, y: 9870 } } };\n \n     zzz();"}]}