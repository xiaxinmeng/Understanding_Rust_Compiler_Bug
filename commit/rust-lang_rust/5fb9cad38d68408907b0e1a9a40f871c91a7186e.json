{"sha": "5fb9cad38d68408907b0e1a9a40f871c91a7186e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmYjljYWQzOGQ2ODQwODkwN2IwZTFhOWE0MGY4NzFjOTFhNzE4NmU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-01T06:16:01Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-01T17:43:21Z"}, "message": "Partially restore the fuzzer crate's build rules\n\nRight now the stage1/fuzzer crate will build but it's not linked to librustc\nbecause stage1/librustc won't link.", "tree": {"sha": "8b3422c46046efcaaa6d448478dd519dbe3ac90c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b3422c46046efcaaa6d448478dd519dbe3ac90c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fb9cad38d68408907b0e1a9a40f871c91a7186e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb9cad38d68408907b0e1a9a40f871c91a7186e", "html_url": "https://github.com/rust-lang/rust/commit/5fb9cad38d68408907b0e1a9a40f871c91a7186e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fb9cad38d68408907b0e1a9a40f871c91a7186e/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "77f5d14f14630da997f13de28ea86e8320957180", "url": "https://api.github.com/repos/rust-lang/rust/commits/77f5d14f14630da997f13de28ea86e8320957180", "html_url": "https://github.com/rust-lang/rust/commit/77f5d14f14630da997f13de28ea86e8320957180"}], "stats": {"total": 28, "additions": 10, "deletions": 18}, "files": [{"sha": "2a21feaa12e0fa8b4a01034c772108bece600bfa", "filename": "Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5fb9cad38d68408907b0e1a9a40f871c91a7186e/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/5fb9cad38d68408907b0e1a9a40f871c91a7186e/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=5fb9cad38d68408907b0e1a9a40f871c91a7186e", "patch": "@@ -47,6 +47,7 @@ endif\n CFG_RUNTIME :=$(call CFG_LIB_NAME,rustrt)\n CFG_RUSTLLVM :=$(call CFG_LIB_NAME,rustllvm)\n CFG_STDLIB :=$(call CFG_LIB_NAME,std)\n+CFG_LIBRUSTC :=$(call CFG_LIB_NAME,rustc)\n \n # version-string calculation\n CFG_GIT_DIR := $(CFG_SRC_DIR).git"}, {"sha": "bdab57248d0dc966ab0c856dbaa74f7f2d767ee9", "filename": "mk/fuzzer.mk", "status": "modified", "additions": 4, "deletions": 15, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5fb9cad38d68408907b0e1a9a40f871c91a7186e/mk%2Ffuzzer.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5fb9cad38d68408907b0e1a9a40f871c91a7186e/mk%2Ffuzzer.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ffuzzer.mk?ref=5fb9cad38d68408907b0e1a9a40f871c91a7186e", "patch": "@@ -1,19 +1,8 @@\n-# At the moment the fuzzer only exists in stage2.  That's the first\n-# stage built by the non-snapshot compiler so it seems a convenient\n-# stage to work at.\n+# At the moment the fuzzer only exists in stage1.\n \n FUZZER_CRATE := $(S)src/fuzzer/fuzzer.rc\n FUZZER_INPUTS := $(wildcard $(addprefix $(S)src/fuzzer/, *.rs))\n \n-stage2/fuzzer.o: $(FUZZER_CRATE) $(FUZZER_INPUTS) $(SREQ1)\n-\t@$(call E, compile: $@)\n-\t$(STAGE1) -c -o $@ $<\n-\n-stage2/fuzzer$(X): stage2/fuzzer.o $(SREQ1)\n-\t@$(call E, link [gcc]: $@)\n-\t$(Q)gcc $(CFG_GCCISH_CFLAGS) rt/main.o stage2/glue.o -o $@ $< \\\n-      -Lstage2 -Lrustllvm -Lrt -lrustrt -lrustllvm -lstd -lm -lrustc\n-\t@# dsymutil sometimes fails or prints a warning, but the\n-\t@# program still runs.  Since it simplifies debugging other\n-\t@# programs, I\\'ll live with the noise.\n-\t-$(Q)$(CFG_DSYMUTIL) $@\n+stage1/fuzzer$(X): $(FUZZER_CRATE) $(FUZZER_INPUTS) $(SREQ1)\n+\t@$(call E, compile_and_link: $@)\n+\t$(STAGE1) -o $@ $<"}, {"sha": "883c5e07f54178f56c2fd5ff90e43ec53894ef55", "filename": "mk/stage1.mk", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fb9cad38d68408907b0e1a9a40f871c91a7186e/mk%2Fstage1.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5fb9cad38d68408907b0e1a9a40f871c91a7186e/mk%2Fstage1.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage1.mk?ref=5fb9cad38d68408907b0e1a9a40f871c91a7186e", "patch": "@@ -29,3 +29,8 @@ stage1/%.o: stage1/%.s\n stage1/%$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ0) stage0/intrinsics.bc\n \t@$(call E, compile_and_link: $@)\n \t$(STAGE0) -o $@ $<\n+\n+stage1/lib/$(CFG_LIBRUSTC): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ1) \\\n+                            stage1/intrinsics.bc\n+\t@$(call E, compile_and_link: $@)\n+\t$(STAGE1) --shared -o $@ $<"}, {"sha": "12e6562e702758145aacb841ff72f329f70a2c57", "filename": "src/fuzzer/fuzzer.rc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5fb9cad38d68408907b0e1a9a40f871c91a7186e/src%2Ffuzzer%2Ffuzzer.rc", "raw_url": "https://github.com/rust-lang/rust/raw/5fb9cad38d68408907b0e1a9a40f871c91a7186e/src%2Ffuzzer%2Ffuzzer.rc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ffuzzer%2Ffuzzer.rc?ref=5fb9cad38d68408907b0e1a9a40f871c91a7186e", "patch": "@@ -1,7 +1,6 @@\n // -*- rust -*-\n \n use std;\n-use rustc;\n \n mod fuzzer;\n "}, {"sha": "2de291eac5b4c17b6698c7d8bdf1ac1e64022170", "filename": "src/fuzzer/fuzzer.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5fb9cad38d68408907b0e1a9a40f871c91a7186e/src%2Ffuzzer%2Ffuzzer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb9cad38d68408907b0e1a9a40f871c91a7186e/src%2Ffuzzer%2Ffuzzer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ffuzzer%2Ffuzzer.rs?ref=5fb9cad38d68408907b0e1a9a40f871c91a7186e", "patch": "@@ -6,8 +6,6 @@ import std::getopts::opt_str;\n import std::io;\n import std::vec;\n \n-import rustc::front::ast;\n-\n type src_gen = iter() -> str;\n \n iter dir_src_gen(str dir) -> str {"}]}