{"sha": "b00d6668b7665fbf040e4768030571bb5aa8c6de", "node_id": "C_kwDOAAsO6NoAKGIwMGQ2NjY4Yjc2NjVmYmYwNDBlNDc2ODAzMDU3MWJiNWFhOGM2ZGU", "commit": {"author": {"name": "Dirkjan Ochtman", "email": "dirkjan@ochtman.nl", "date": "2022-01-03T20:16:05Z"}, "committer": {"name": "Dirkjan Ochtman", "email": "dirkjan@ochtman.nl", "date": "2022-01-10T17:40:57Z"}, "message": "Address feedback", "tree": {"sha": "ffffef6c998e29ddbf1062772ee9890b29947235", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ffffef6c998e29ddbf1062772ee9890b29947235"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b00d6668b7665fbf040e4768030571bb5aa8c6de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b00d6668b7665fbf040e4768030571bb5aa8c6de", "html_url": "https://github.com/rust-lang/rust/commit/b00d6668b7665fbf040e4768030571bb5aa8c6de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b00d6668b7665fbf040e4768030571bb5aa8c6de/comments", "author": {"login": "djc", "id": 158471, "node_id": "MDQ6VXNlcjE1ODQ3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/158471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djc", "html_url": "https://github.com/djc", "followers_url": "https://api.github.com/users/djc/followers", "following_url": "https://api.github.com/users/djc/following{/other_user}", "gists_url": "https://api.github.com/users/djc/gists{/gist_id}", "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djc/subscriptions", "organizations_url": "https://api.github.com/users/djc/orgs", "repos_url": "https://api.github.com/users/djc/repos", "events_url": "https://api.github.com/users/djc/events{/privacy}", "received_events_url": "https://api.github.com/users/djc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "djc", "id": 158471, "node_id": "MDQ6VXNlcjE1ODQ3MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/158471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/djc", "html_url": "https://github.com/djc", "followers_url": "https://api.github.com/users/djc/followers", "following_url": "https://api.github.com/users/djc/following{/other_user}", "gists_url": "https://api.github.com/users/djc/gists{/gist_id}", "starred_url": "https://api.github.com/users/djc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/djc/subscriptions", "organizations_url": "https://api.github.com/users/djc/orgs", "repos_url": "https://api.github.com/users/djc/repos", "events_url": "https://api.github.com/users/djc/events{/privacy}", "received_events_url": "https://api.github.com/users/djc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "93a16cb7e2ee415f9b1a46165b297aa16b2a4fa0", "url": "https://api.github.com/repos/rust-lang/rust/commits/93a16cb7e2ee415f9b1a46165b297aa16b2a4fa0", "html_url": "https://github.com/rust-lang/rust/commit/93a16cb7e2ee415f9b1a46165b297aa16b2a4fa0"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "38d333cc983a584778174dc96c9fb1e25afb0d95", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=b00d6668b7665fbf040e4768030571bb5aa8c6de", "patch": "@@ -8,9 +8,8 @@ use crate::html::format::{Buffer, Print};\n use crate::html::render::{ensure_trailing_slash, StylePath};\n \n use askama::Template;\n-use serde::Serialize;\n \n-#[derive(Clone, Serialize)]\n+#[derive(Clone)]\n crate struct Layout {\n     crate logo: String,\n     crate favicon: String,\n@@ -27,7 +26,6 @@ crate struct Layout {\n     crate scrape_examples_extension: bool,\n }\n \n-#[derive(Serialize)]\n crate struct Page<'a> {\n     crate title: &'a str,\n     crate css_class: &'a str,\n@@ -46,7 +44,7 @@ impl<'a> Page<'a> {\n     }\n }\n \n-#[derive(Serialize, Template)]\n+#[derive(Template)]\n #[template(path = \"page.html\")]\n struct PageLayout<'a> {\n     static_root_path: &'a str,"}, {"sha": "52268987a20a2b5c8db605e1324703fe0612b161", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=b00d6668b7665fbf040e4768030571bb5aa8c6de", "patch": "@@ -33,21 +33,19 @@ use crate::html::layout::Page;\n use crate::html::markdown::{HeadingOffset, MarkdownSummaryLine};\n \n use askama::Template;\n-use serde::Serialize;\n \n const ITEM_TABLE_OPEN: &str = \"<div class=\\\"item-table\\\">\";\n const ITEM_TABLE_CLOSE: &str = \"</div>\";\n const ITEM_TABLE_ROW_OPEN: &str = \"<div class=\\\"item-row\\\">\";\n const ITEM_TABLE_ROW_CLOSE: &str = \"</div>\";\n \n // A component in a `use` path, like `string` in std::string::ToString\n-#[derive(Serialize)]\n struct PathComponent<'a> {\n     path: String,\n     name: &'a str,\n }\n \n-#[derive(Serialize, Template)]\n+#[derive(Template)]\n #[template(path = \"print_item.html\")]\n struct ItemVars<'a> {\n     page: &'a Page<'a>,"}, {"sha": "673260ac6d09d1607428c11e1fbe188c782e4eca", "filename": "src/librustdoc/templates/page.html", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/b00d6668b7665fbf040e4768030571bb5aa8c6de/src%2Flibrustdoc%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftemplates%2Fpage.html?ref=b00d6668b7665fbf040e4768030571bb5aa8c6de", "patch": "@@ -49,12 +49,10 @@\n         <link rel=\"stylesheet\" {# -#}\n            href=\"{{static_root_path|safe}}noscript{{page.resource_suffix}}.css\"> {#- -#}\n     </noscript> {#- -#}\n-    {%- match layout.css_file_extension -%}\n-        {%- when Some with (ext) -%}\n-            <link rel=\"stylesheet\" type=\"text/css\" {# -#}\n-                href=\"{{static_root_path|safe}}theme{{page.resource_suffix}}.css\"> {#- -#}\n-        {%- else -%}\n-    {%- endmatch -%}\n+    {%- if layout.css_file_extension.is_some() -%}\n+        <link rel=\"stylesheet\" type=\"text/css\" {# -#}\n+            href=\"{{static_root_path|safe}}theme{{page.resource_suffix}}.css\"> {#- -#}\n+    {%- endif -%}\n     {%- if !layout.favicon.is_empty() -%}\n         <link rel=\"shortcut icon\" href=\"{{layout.favicon}}\"> {#- -#}\n     {%- else -%}"}]}