{"sha": "d0d644b8c41bc0269b8dd45af55ea8cafee0378a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwZDY0NGI4YzQxYmMwMjY5YjhkZDQ1YWY1NWVhOGNhZmVlMDM3OGE=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-03-25T07:17:57Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-03-25T07:17:57Z"}, "message": "Merge #1042\n\n1042: Remove windows from CI r=matklad a=matklad\n\nWe don't actually look at the CI results for windows anyway!\r\n\r\nIn general, rust-analyzer should be written in a completely\r\nOS-independent way. That is, testing on one OS should be enough. If\r\nthis is not the case, that means something is seriously broken.\r\n\r\nNo doubt there are components which actually talk to the outside\r\nworld, and they may be platform dependent. We should extract such\r\ncomponents to a separate repo with an extensive multi platform CI,\r\nlike we did for VFS\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "b3b13ef0709b2100bcf1f70dbcd2d2cc89617bd0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3b13ef0709b2100bcf1f70dbcd2d2cc89617bd0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0d644b8c41bc0269b8dd45af55ea8cafee0378a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0d644b8c41bc0269b8dd45af55ea8cafee0378a", "html_url": "https://github.com/rust-lang/rust/commit/d0d644b8c41bc0269b8dd45af55ea8cafee0378a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0d644b8c41bc0269b8dd45af55ea8cafee0378a/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "965363db15a259929286f80f95c603594366bad6", "url": "https://api.github.com/repos/rust-lang/rust/commits/965363db15a259929286f80f95c603594366bad6", "html_url": "https://github.com/rust-lang/rust/commit/965363db15a259929286f80f95c603594366bad6"}, {"sha": "db9a3cbfb912260a8c572c926e34c7812b0215df", "url": "https://api.github.com/repos/rust-lang/rust/commits/db9a3cbfb912260a8c572c926e34c7812b0215df", "html_url": "https://github.com/rust-lang/rust/commit/db9a3cbfb912260a8c572c926e34c7812b0215df"}], "stats": {"total": 47, "additions": 20, "deletions": 27}, "files": [{"sha": "4dffdea34879f73a311548bd95ae559f64ac9868", "filename": ".travis.yml", "status": "modified", "additions": 20, "deletions": 27, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/d0d644b8c41bc0269b8dd45af55ea8cafee0378a/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/d0d644b8c41bc0269b8dd45af55ea8cafee0378a/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=d0d644b8c41bc0269b8dd45af55ea8cafee0378a", "patch": "@@ -4,43 +4,36 @@ before_cache:\n     - rm -fr ./target/debug/{deps,.fingerprint}/{*ra_*,*test*,*tools*,*gen_lsp*,*thread_worker*}\n     - rm -f  ./target/.rustc_info.json\n \n-build: &rust_build\n-    language: rust\n-    rust: stable\n-    script:\n-        - rustup component add rustfmt\n-        - rustup component add rust-src\n-        - cargo test --no-run  # let's measure compile time separately\n-        - cargo test\n-        - cargo doc --all --no-deps\n-    env:\n-        - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n-\n matrix:\n     include:\n         - os: linux\n-          before_script:\n+          language: rust\n+          rust: stable\n+          script:\n+              - rustup component add rustfmt\n+              - rustup component add rust-src\n+              - cargo test --no-run  # let's measure compile time separately\n+              - cargo test\n+          env:\n+              - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n+\n+        - os: linux\n+          if: branch = master AND type = push\n+          before_stript:\n               - DEPLOY_DOCS=1\n-          <<: *rust_build\n+          language: rust\n+          rust: stable\n+          script:\n+              - cargo doc --all --no-deps\n+          env:\n+              - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n+\n         - language: node_js\n           node_js: node\n           before_script: false\n           script:\n               - cd editors/code && npm ci && npm run travis\n \n-        - os: windows\n-          if: branch = master AND type = push\n-          before_script:\n-              - dos2unix ./crates/ra_syntax/tests/data/parser/**/*.txt\n-              - dos2unix ./crates/ra_syntax/tests/data/parser/**/*.rs\n-          <<: *rust_build\n-\n-    allow_failures:\n-        # Because Travis-Windows-Rust can be flaky\n-        # We still support Windows and want the tests to be succeeding,\n-        # but there are too many spurious failures\n-        - os: windows\n-\n branches:\n     only:\n         - staging"}]}