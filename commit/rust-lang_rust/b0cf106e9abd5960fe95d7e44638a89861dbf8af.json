{"sha": "b0cf106e9abd5960fe95d7e44638a89861dbf8af", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwY2YxMDZlOWFiZDU5NjBmZTk1ZDdlNDQ2MzhhODk4NjFkYmY4YWY=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-08-03T18:38:46Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-08-03T18:39:39Z"}, "message": "Test for issue 2904, which got fixed somewhere along the line", "tree": {"sha": "5b205adee4415f5fecf16507dcdf0ed03b2bbe4d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b205adee4415f5fecf16507dcdf0ed03b2bbe4d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0cf106e9abd5960fe95d7e44638a89861dbf8af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0cf106e9abd5960fe95d7e44638a89861dbf8af", "html_url": "https://github.com/rust-lang/rust/commit/b0cf106e9abd5960fe95d7e44638a89861dbf8af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0cf106e9abd5960fe95d7e44638a89861dbf8af/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cfc78694cba2366b413750db17b54b767792beaf", "url": "https://api.github.com/repos/rust-lang/rust/commits/cfc78694cba2366b413750db17b54b767792beaf", "html_url": "https://github.com/rust-lang/rust/commit/cfc78694cba2366b413750db17b54b767792beaf"}], "stats": {"total": 78, "additions": 78, "deletions": 0}, "files": [{"sha": "4072560a3cf9c8ab3fdd1a9dde3799833967167f", "filename": "src/test/run-pass/issue-2904.rs", "status": "added", "additions": 78, "deletions": 0, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/b0cf106e9abd5960fe95d7e44638a89861dbf8af/src%2Ftest%2Frun-pass%2Fissue-2904.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0cf106e9abd5960fe95d7e44638a89861dbf8af/src%2Ftest%2Frun-pass%2Fissue-2904.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-2904.rs?ref=b0cf106e9abd5960fe95d7e44638a89861dbf8af", "patch": "@@ -0,0 +1,78 @@\n+/// Map representation\n+\n+use std;\n+\n+import io::reader_util;\n+\n+enum square {\n+    bot,\n+    wall,\n+    rock,\n+    lambda,\n+    closed_lift,\n+    open_lift,\n+    earth,\n+    empty\n+}\n+\n+impl of to_str::to_str for square {\n+    fn to_str() -> ~str {\n+        alt self {\n+          bot { ~\"R\" }\n+          wall { ~\"#\" }\n+          rock { ~\"*\" }\n+          lambda { ~\"\\\\\" }\n+          closed_lift { ~\"L\" }\n+          open_lift { ~\"O\" }\n+          earth { ~\".\" }\n+          empty { ~\" \" } \n+        }\n+    }\n+}\n+\n+fn square_from_char(c: char) -> square {\n+    alt c  {\n+      'R'  { bot }\n+      '#'  { wall }\n+      '*'  { rock }\n+      '\\\\' { lambda }\n+      'L'  { closed_lift }\n+      'O'  { open_lift }\n+      '.'  { earth }\n+      ' '  { empty }\n+      _ {\n+        #error(\"invalid square: %?\", c);\n+        fail\n+      }\n+    }\n+}\n+\n+fn read_board_grid<rdr: owned io::reader>(+in: rdr) -> ~[~[square]] {\n+    let in = in as io::reader;\n+    let mut grid = ~[];\n+    for in.each_line |line| {\n+        let mut row = ~[];\n+        for line.each_char |c| {\n+            vec::push(row, square_from_char(c))\n+        }\n+        vec::push(grid, row)\n+    }\n+    let width = grid[0].len();\n+    for grid.each |row| { assert row.len() == width }\n+    grid\n+}\n+\n+mod test {\n+    #[test]\n+    fn trivial_to_str() {\n+        assert lambda.to_str() == \"\\\\\"\n+    }\n+\n+    #[test]\n+    fn read_simple_board() {\n+        let s = #include_str(\"./maps/contest1.map\");\n+        read_board_grid(io::str_reader(s));\n+    }\n+}\n+\n+fn main() {}"}]}