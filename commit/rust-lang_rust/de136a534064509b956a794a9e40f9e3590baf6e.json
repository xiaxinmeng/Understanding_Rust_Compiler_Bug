{"sha": "de136a534064509b956a794a9e40f9e3590baf6e", "node_id": "C_kwDOAAsO6NoAKGRlMTM2YTUzNDA2NDUwOWI5NTZhNzk0YTllNDBmOWUzNTkwYmFmNmU", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-10-09T15:55:50Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-10-09T16:11:04Z"}, "message": "move test", "tree": {"sha": "319e4c6583e90920b367ad7387bd06e95ba1e87b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/319e4c6583e90920b367ad7387bd06e95ba1e87b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de136a534064509b956a794a9e40f9e3590baf6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de136a534064509b956a794a9e40f9e3590baf6e", "html_url": "https://github.com/rust-lang/rust/commit/de136a534064509b956a794a9e40f9e3590baf6e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de136a534064509b956a794a9e40f9e3590baf6e/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e838da18a977ddf38c9f9150553668024a7ec34f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e838da18a977ddf38c9f9150553668024a7ec34f", "html_url": "https://github.com/rust-lang/rust/commit/e838da18a977ddf38c9f9150553668024a7ec34f"}], "stats": {"total": 42, "additions": 20, "deletions": 22}, "files": [{"sha": "7279ff7e33c529ae86f9af8433011e365f523007", "filename": "crates/hir_def/src/macro_expansion_tests/mbe.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/de136a534064509b956a794a9e40f9e3590baf6e/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fmbe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de136a534064509b956a794a9e40f9e3590baf6e/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fmbe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fmacro_expansion_tests%2Fmbe.rs?ref=de136a534064509b956a794a9e40f9e3590baf6e", "patch": "@@ -595,3 +595,23 @@ fn bar() {}\n \"#]],\n     );\n }\n+\n+#[test]\n+fn test_parse_macro_def_rules() {\n+    cov_mark::check!(parse_macro_def_rules);\n+\n+    check(\n+        r#\"\n+macro m {\n+    ($id:ident) => { fn $id() {} }\n+}\n+m!(bar);\n+\"#,\n+        expect![[r#\"\n+macro m {\n+    ($id:ident) => { fn $id() {} }\n+}\n+fn bar() {}\n+\"#]],\n+    );\n+}"}, {"sha": "393c2041d99cc2a2e7c1761ead1b8d4a50e7baaa", "filename": "crates/mbe/src/tests/expand.rs", "status": "modified", "additions": 0, "deletions": 22, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/de136a534064509b956a794a9e40f9e3590baf6e/crates%2Fmbe%2Fsrc%2Ftests%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/de136a534064509b956a794a9e40f9e3590baf6e/crates%2Fmbe%2Fsrc%2Ftests%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Ftests%2Fexpand.rs?ref=de136a534064509b956a794a9e40f9e3590baf6e", "patch": "@@ -77,12 +77,6 @@ fn to_subtree(tt: &tt::TokenTree) -> &tt::Subtree {\n     }\n     unreachable!(\"It is not a subtree\");\n }\n-fn to_literal(tt: &tt::TokenTree) -> &tt::Literal {\n-    if let tt::TokenTree::Leaf(tt::Leaf::Literal(lit)) = tt {\n-        return lit;\n-    }\n-    unreachable!(\"It is not a literal\");\n-}\n \n fn to_punct(tt: &tt::TokenTree) -> &tt::Punct {\n     if let tt::TokenTree::Leaf(tt::Leaf::Punct(lit)) = tt {\n@@ -107,22 +101,6 @@ fn test_attr_to_token_tree() {\n     );\n }\n \n-#[test]\n-fn test_parse_macro_def_rules() {\n-    cov_mark::check!(parse_macro_def_rules);\n-\n-    parse_macro2(\n-        r#\"\n-macro foo {\n-    ($id:ident) => {\n-        fn $id() {}\n-    }\n-}\n-\"#,\n-    )\n-    .assert_expand_items(\"foo!(bar);\", \"fn bar () {}\");\n-}\n-\n #[test]\n fn test_macro_2_0_panic_2015() {\n     parse_macro2("}]}