{"sha": "630d5f355fc85fc2c3bab28a278c517d945d328d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzMGQ1ZjM1NWZjODVmYzJjM2JhYjI4YTI3OGM1MTdkOTQ1ZDMyOGQ=", "commit": {"author": {"name": "Igor Matuszewski", "email": "Xanewok@gmail.com", "date": "2019-06-10T15:32:15Z"}, "committer": {"name": "Igor Matuszewski", "email": "Xanewok@gmail.com", "date": "2019-06-10T15:32:15Z"}, "message": "Don't suggest using \\r in raw strings", "tree": {"sha": "0a03551c5117f67c34eabd1023d875c468ab067e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0a03551c5117f67c34eabd1023d875c468ab067e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/630d5f355fc85fc2c3bab28a278c517d945d328d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/630d5f355fc85fc2c3bab28a278c517d945d328d", "html_url": "https://github.com/rust-lang/rust/commit/630d5f355fc85fc2c3bab28a278c517d945d328d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/630d5f355fc85fc2c3bab28a278c517d945d328d/comments", "author": {"login": "Xanewok", "id": 3093213, "node_id": "MDQ6VXNlcjMwOTMyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/3093213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xanewok", "html_url": "https://github.com/Xanewok", "followers_url": "https://api.github.com/users/Xanewok/followers", "following_url": "https://api.github.com/users/Xanewok/following{/other_user}", "gists_url": "https://api.github.com/users/Xanewok/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xanewok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xanewok/subscriptions", "organizations_url": "https://api.github.com/users/Xanewok/orgs", "repos_url": "https://api.github.com/users/Xanewok/repos", "events_url": "https://api.github.com/users/Xanewok/events{/privacy}", "received_events_url": "https://api.github.com/users/Xanewok/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Xanewok", "id": 3093213, "node_id": "MDQ6VXNlcjMwOTMyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/3093213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xanewok", "html_url": "https://github.com/Xanewok", "followers_url": "https://api.github.com/users/Xanewok/followers", "following_url": "https://api.github.com/users/Xanewok/following{/other_user}", "gists_url": "https://api.github.com/users/Xanewok/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xanewok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xanewok/subscriptions", "organizations_url": "https://api.github.com/users/Xanewok/orgs", "repos_url": "https://api.github.com/users/Xanewok/repos", "events_url": "https://api.github.com/users/Xanewok/events{/privacy}", "received_events_url": "https://api.github.com/users/Xanewok/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "63dc7da703759dd53536dd18a42ff65f39a2f9b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/63dc7da703759dd53536dd18a42ff65f39a2f9b4", "html_url": "https://github.com/rust-lang/rust/commit/63dc7da703759dd53536dd18a42ff65f39a2f9b4"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "22cce67b5eeb7b5202fd5b4ae50fae1bfa832617", "filename": "src/libsyntax/parse/unescape.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Flibsyntax%2Fparse%2Funescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Flibsyntax%2Fparse%2Funescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Funescape.rs?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -12,6 +12,7 @@ pub(crate) enum EscapeError {\n     LoneSlash,\n     InvalidEscape,\n     BareCarriageReturn,\n+    BareCarriageReturnInRawString,\n     EscapeOnlyChar,\n \n     TooShortHexEscape,\n@@ -299,7 +300,7 @@ where\n                 chars.next();\n                 Ok('\\n')\n             },\n-            ('\\r', _) => Err(EscapeError::BareCarriageReturn),\n+            ('\\r', _) => Err(EscapeError::BareCarriageReturnInRawString),\n             (c, _) if mode.is_bytes() && !c.is_ascii() =>\n                 Err(EscapeError::NonAsciiCharInByteString),\n             (c, _) => Ok(c),"}, {"sha": "71b41161ad8c6fd00553ad0f21e526a818e04c42", "filename": "src/libsyntax/parse/unescape_error_reporting.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -80,6 +80,11 @@ pub(crate) fn emit_unescape_error(\n             };\n             handler.span_err(span, msg);\n         }\n+        EscapeError::BareCarriageReturnInRawString => {\n+            assert!(mode.in_double_quotes());\n+            let msg = \"bare CR not allowed in raw string\";\n+            handler.span_err(span, msg);\n+        }\n         EscapeError::InvalidEscape => {\n             let (c, span) = last_char();\n "}, {"sha": "b588b007ae92935ce04fd8676fea471f8e6d1f67", "filename": "src/test/ui/parser/lex-bare-cr-string-literal-doc-comment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.rs?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -21,7 +21,7 @@ fn main() {\n     let _s = \"foo\rbar\"; //~ ERROR: bare CR not allowed in string\n \n     // the following string literal has a bare CR in it\n-    let _s = r\"bar\rfoo\"; //~ ERROR: bare CR not allowed in string\n+    let _s = r\"bar\rfoo\"; //~ ERROR: bare CR not allowed in raw string\n \n     // the following string literal has a bare CR in it\n     let _s = \"foo\\\rbar\"; //~ ERROR: unknown character escape: \\r"}, {"sha": "b0fe4b6acd48443a7d939b0900b69c3f7ed9edf8", "filename": "src/test/ui/parser/lex-bare-cr-string-literal-doc-comment.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Flex-bare-cr-string-literal-doc-comment.stderr?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -28,7 +28,7 @@ error: bare CR not allowed in string, use \\r instead\n LL |     let _s = \"foo\rbar\";\n    |                  ^\n \n-error: bare CR not allowed in string, use \\r instead\n+error: bare CR not allowed in raw string\n   --> $DIR/lex-bare-cr-string-literal-doc-comment.rs:24:19\n    |\n LL |     let _s = r\"bar\rfoo\";"}, {"sha": "534afabdf777e30023b6ebae60771942822d6763", "filename": "src/test/ui/parser/raw-byte-string-literals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.rs?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -1,7 +1,7 @@\n // ignore-tidy-cr\n // compile-flags: -Z continue-parse-after-error\n pub fn main() {\n-    br\"a\r\"; //~ ERROR bare CR not allowed in string\n+    br\"a\r\"; //~ ERROR bare CR not allowed in raw string\n     br\"\u00e9\";  //~ ERROR raw byte string must be ASCII\n     br##~\"a\"~##;  //~ ERROR only `#` is allowed in raw string delimitation\n }"}, {"sha": "4880d1fdbe8a730b9d673174acc711047038b0f1", "filename": "src/test/ui/parser/raw-byte-string-literals.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/630d5f355fc85fc2c3bab28a278c517d945d328d/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fraw-byte-string-literals.stderr?ref=630d5f355fc85fc2c3bab28a278c517d945d328d", "patch": "@@ -1,4 +1,4 @@\n-error: bare CR not allowed in string, use \\r instead\n+error: bare CR not allowed in raw string\n   --> $DIR/raw-byte-string-literals.rs:4:9\n    |\n LL |     br\"a\r\";"}]}