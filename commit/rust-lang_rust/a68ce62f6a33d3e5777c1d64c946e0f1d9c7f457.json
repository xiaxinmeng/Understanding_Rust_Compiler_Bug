{"sha": "a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "node_id": "C_kwDOAAsO6NoAKGE2OGNlNjJmNmEzM2QzZTU3NzdjMWQ2NGM5NDZlMGYxZDljN2Y0NTc", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2021-11-19T15:56:46Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2021-11-19T17:30:11Z"}, "message": "Add toggle to disable cache priming", "tree": {"sha": "04f9a88960fc6eddd187fb69c33a760f19511d44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04f9a88960fc6eddd187fb69c33a760f19511d44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "html_url": "https://github.com/rust-lang/rust/commit/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf2ddb935e12f4bf57aea76b3caee882e14a7d92", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf2ddb935e12f4bf57aea76b3caee882e14a7d92", "html_url": "https://github.com/rust-lang/rust/commit/cf2ddb935e12f4bf57aea76b3caee882e14a7d92"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "5826b6b114c2b455e68eab0d2a08e4b5eacf5f74", "filename": "crates/rust-analyzer/src/config.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fconfig.rs?ref=a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "patch": "@@ -58,6 +58,9 @@ config_data! {\n         /// Whether to allow import insertion to merge new imports into single path glob imports like `use std::fmt::*;`.\n         assist_allowMergingIntoGlobImports: bool           = \"true\",\n \n+        /// Warm up caches on project load.\n+        cache_warmup: bool = \"true\",\n+\n         /// Show function name and docs in parameter hints.\n         callInfo_full: bool                                = \"true\",\n \n@@ -545,6 +548,10 @@ impl Config {\n         )\n     }\n \n+    pub fn prefill_caches(&self) -> bool {\n+        self.data.cache_warmup\n+    }\n+\n     pub fn location_link(&self) -> bool {\n         try_or!(self.caps.text_document.as_ref()?.definition?.link_support?, false)\n     }"}, {"sha": "979b3b1522159679d2c1de1d81e5ca0bf2c9453e", "filename": "crates/rust-analyzer/src/main_loop.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fmain_loop.rs?ref=a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "patch": "@@ -433,7 +433,9 @@ impl GlobalState {\n                 for flycheck in &self.flycheck {\n                     flycheck.update();\n                 }\n-                self.prime_caches_queue.request_op();\n+                if self.config.prefill_caches() {\n+                    self.prime_caches_queue.request_op();\n+                }\n             }\n \n             if !was_quiescent || state_changed {"}, {"sha": "9f6f046014c23bc513afb9a4782950e03c796a9e", "filename": "docs/user/generated_config.adoc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/docs%2Fuser%2Fgenerated_config.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/docs%2Fuser%2Fgenerated_config.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fgenerated_config.adoc?ref=a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "patch": "@@ -23,6 +23,11 @@ Group inserted imports by the https://rust-analyzer.github.io/manual.html#auto-i\n --\n Whether to allow import insertion to merge new imports into single path glob imports like `use std::fmt::*;`.\n --\n+[[rust-analyzer.cache.warmup]]rust-analyzer.cache.warmup (default: `true`)::\n++\n+--\n+Warm up caches on project load.\n+--\n [[rust-analyzer.callInfo.full]]rust-analyzer.callInfo.full (default: `true`)::\n +\n --"}, {"sha": "52ba1327459da29ccbdcec749f07a3b2a98a856b", "filename": "editors/code/package.json", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=a68ce62f6a33d3e5777c1d64c946e0f1d9c7f457", "patch": "@@ -445,6 +445,11 @@\n                     \"default\": true,\n                     \"type\": \"boolean\"\n                 },\n+                \"rust-analyzer.cache.warmup\": {\n+                    \"markdownDescription\": \"Warm up caches on project load.\",\n+                    \"default\": true,\n+                    \"type\": \"boolean\"\n+                },\n                 \"rust-analyzer.callInfo.full\": {\n                     \"markdownDescription\": \"Show function name and docs in parameter hints.\",\n                     \"default\": true,"}]}