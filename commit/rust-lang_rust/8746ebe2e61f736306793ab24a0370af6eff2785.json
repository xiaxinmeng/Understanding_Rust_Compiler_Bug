{"sha": "8746ebe2e61f736306793ab24a0370af6eff2785", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3NDZlYmUyZTYxZjczNjMwNjc5M2FiMjRhMDM3MGFmNmVmZjI3ODU=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-11-23T20:22:44Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-11-23T20:22:56Z"}, "message": "Add some changes that *should* have been in e98286b594\n\nForgot to amend the commit after fixing the failure.", "tree": {"sha": "9a81e5e4a1f19bcb3d7cece4a00e8127a46ac532", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9a81e5e4a1f19bcb3d7cece4a00e8127a46ac532"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8746ebe2e61f736306793ab24a0370af6eff2785", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8746ebe2e61f736306793ab24a0370af6eff2785", "html_url": "https://github.com/rust-lang/rust/commit/8746ebe2e61f736306793ab24a0370af6eff2785", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8746ebe2e61f736306793ab24a0370af6eff2785/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ac63801d2d5b7b681041cac28f6f7571b39f95e", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ac63801d2d5b7b681041cac28f6f7571b39f95e", "html_url": "https://github.com/rust-lang/rust/commit/2ac63801d2d5b7b681041cac28f6f7571b39f95e"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "94d76e46d6cd73d5235eea316311dbcc1a5283d1", "filename": "src/comp/middle/resolve.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8746ebe2e61f736306793ab24a0370af6eff2785/src%2Fcomp%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8746ebe2e61f736306793ab24a0370af6eff2785/src%2Fcomp%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fresolve.rs?ref=8746ebe2e61f736306793ab24a0370af6eff2785", "patch": "@@ -217,17 +217,17 @@ fn map_crate(e: @env, c: @ast::crate) {\n             let imp = follow_import(*e, sc, path, vi.span);\n             if option::is_some(imp) {\n                 let glob = {def: option::get(imp), item: vi};;\n-                alt sc {\n-                  cons(scope_item(i), _) {\n+                alt list::head(sc) {\n+                  scope_item(i) {\n                     e.mod_map.get(i.id).glob_imports += [glob];\n                   }\n-                  cons(scope_block(b, _, _), _) {\n+                  scope_block(b, _, _) {\n                     let globs = alt e.block_map.find(b.node.id) {\n                       some(globs) { globs + [glob] } none. { [glob] }\n                     };\n                     e.block_map.insert(b.node.id, globs);\n                   }\n-                  nil. {\n+                  scope_crate. {\n                     e.mod_map.get(-1).glob_imports += [glob];\n                   }\n                 }"}, {"sha": "6f346f176ef7ce3597a02e81a85ba0b36afca6b3", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8746ebe2e61f736306793ab24a0370af6eff2785/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8746ebe2e61f736306793ab24a0370af6eff2785/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=8746ebe2e61f736306793ab24a0370af6eff2785", "patch": "@@ -562,6 +562,7 @@ fn print_possibly_embedded_block(s: ps, blk: ast::blk, embedded: embed_type,\n       block_normal. { bopen(s); }\n     }\n \n+    for vi in blk.node.view_items { print_view_item(s, vi); }\n     for st: @ast::stmt in blk.node.stmts {\n         print_stmt(s, *st);\n     }"}]}