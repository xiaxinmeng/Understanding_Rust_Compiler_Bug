{"sha": "e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5NjNjZmQ0MWE0YzhhY2JkNDJlODg1MTFmYjBhYjI3ZWExMWY1YjM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-04T23:35:49Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-05T23:21:55Z"}, "message": "Run tests with LD_LIBRARY_PATH set to the target libs, not the host libs\n\nSetting it to the host libs uses those compiled from the previous stage", "tree": {"sha": "1b126f61bc08ac8a7f2b72c382d7701edc7b4cbf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1b126f61bc08ac8a7f2b72c382d7701edc7b4cbf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "html_url": "https://github.com/rust-lang/rust/commit/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "edf2622e218b3492d3379c4fdd1f3a211883f92a", "url": "https://api.github.com/repos/rust-lang/rust/commits/edf2622e218b3492d3379c4fdd1f3a211883f92a", "html_url": "https://github.com/rust-lang/rust/commit/edf2622e218b3492d3379c4fdd1f3a211883f92a"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "75201fabf57799b90eef6bec510db9b7e2e5ef95", "filename": "mk/platform.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "patch": "@@ -89,7 +89,7 @@ CFG_TESTLIB=$(CFG_BUILD_DIR)/$(strip \\\n                stage2/lib, \\\n                $(if $(findstring stage3,$(1)), \\\n                     stage3/lib, \\\n-               )))))\n+               )))))/rustc/$(CFG_HOST_TRIPLE)/lib\n \n ifdef CFG_UNIXY\n   CFG_INFO := $(info cfg: unix-y environment)"}, {"sha": "184ee9b8c2ee7548c1efee76dd80627cb930b728", "filename": "mk/tests.mk", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=e963cfd41a4c8acbd42e88511fb0ab27ea11f5b3", "patch": "@@ -160,7 +160,7 @@ test/rustctest.stage$(1)$$(X): \\\n \n check-stage$(1)-rustc-dummy: test/rustctest.stage$(1)$$(X)\n \t@$$(call E, run: $$<)\n-\t$$(Q)$$(call CFG_RUN,$$(HOST_LIB$(1)),$$(CFG_VALGRIND) $$<) \\\n+\t$$(Q)$$(call CFG_RUN_TEST,$$<) \\\n \t  $$(TESTARGS)\n \n \n@@ -286,11 +286,12 @@ test/$(FT).rc test/$(FT_DRIVER).rs: $(TEST_RPASS_SOURCES_STAGE2) \\\n \t@$(call E, check: building combined stage2 test runner)\n \t$(Q)$(S)src/etc/combine-tests.py\n \n-stage2/lib/$(FT_LIB): test/$(FT).rc $(SREQ2$(CFG_HOST_TRIPLE))\n+$(TARGET_HOST_LIB2)/$(FT_LIB): test/$(FT).rc $(SREQ2$(CFG_HOST_TRIPLE))\n \t@$(call E, compile_and_link: $@)\n \t$(STAGE2) --lib -o $@ $<\n \n-test/$(FT_DRIVER)$(X): test/$(FT_DRIVER).rs $(HOST_LIB2)/$(FT_LIB) $(SREQ2$(CFG_HOST_TRIPLE))\n+test/$(FT_DRIVER)$(X): test/$(FT_DRIVER).rs $(TARGET_HOST_LIB2)/$(FT_LIB) \\\n+\t$(SREQ2$(CFG_HOST_TRIPLE))\n \t@$(call E, compile_and_link: $@)\n \t$(STAGE2) -L $(HOST_LIB2) -o $@ $<\n "}]}