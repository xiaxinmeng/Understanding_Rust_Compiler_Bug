{"sha": "f4ed2d1cca0106eb4aec99b61670ecac378ca087", "node_id": "C_kwDOAAsO6NoAKGY0ZWQyZDFjY2EwMTA2ZWI0YWVjOTliNjE2NzBlY2FjMzc4Y2EwODc", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2022-12-12T19:53:39Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2022-12-12T19:53:39Z"}, "message": "Do not `skip_binder`s", "tree": {"sha": "c479a86d5182e4d804249d844fea4ee45e5018c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c479a86d5182e4d804249d844fea4ee45e5018c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f4ed2d1cca0106eb4aec99b61670ecac378ca087", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f4ed2d1cca0106eb4aec99b61670ecac378ca087", "html_url": "https://github.com/rust-lang/rust/commit/f4ed2d1cca0106eb4aec99b61670ecac378ca087", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f4ed2d1cca0106eb4aec99b61670ecac378ca087/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "348386985d41852829c0785dd84e50c2780b7f78", "url": "https://api.github.com/repos/rust-lang/rust/commits/348386985d41852829c0785dd84e50c2780b7f78", "html_url": "https://github.com/rust-lang/rust/commit/348386985d41852829c0785dd84e50c2780b7f78"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "40c8102547112956468b8c18f39e5dc2ce9a85b3", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f4ed2d1cca0106eb4aec99b61670ecac378ca087/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f4ed2d1cca0106eb4aec99b61670ecac378ca087/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=f4ed2d1cca0106eb4aec99b61670ecac378ca087", "patch": "@@ -3133,18 +3133,21 @@ impl<'tcx> TypeErrCtxtExt<'tcx> for TypeErrCtxt<'_, 'tcx> {\n             if let ObligationCauseCode::ExprBindingObligation(def_id, _, _, idx) = parent_code.deref()\n                 && let predicates = self.tcx.predicates_of(def_id).instantiate_identity(self.tcx)\n                 && let Some(pred) = predicates.predicates.get(*idx)\n-                && let ty::PredicateKind::Clause(ty::Clause::Trait(trait_pred)) = pred.kind().skip_binder()\n+                && let Ok(trait_pred) = pred.kind().try_map_bound(|pred| match pred {\n+                    ty::PredicateKind::Clause(ty::Clause::Trait(trait_pred)) => Ok(trait_pred),\n+                    _ => Err(()),\n+                })\n             {\n                 let mut c = CollectAllMismatches {\n                     infcx: self.infcx,\n                     param_env,\n                     errors: vec![],\n                 };\n-                if let ty::PredicateKind::Clause(ty::Clause::Trait(\n-                        predicate\n-                    )) = predicate.kind().skip_binder()\n-                {\n-                    if let Ok(_) = c.relate(trait_pred, predicate) {\n+                if let Ok(trait_predicate) = predicate.kind().try_map_bound(|pred| match pred {\n+                    ty::PredicateKind::Clause(ty::Clause::Trait(trait_pred)) => Ok(trait_pred),\n+                    _ => Err(()),\n+                }) {\n+                    if let Ok(_) = c.relate(trait_pred, trait_predicate) {\n                         type_diffs = c.errors;\n                     }\n                 }"}]}