{"sha": "db3b01d2bf67e647487320467bde6f7023a8f154", "node_id": "C_kwDOAAsO6NoAKGRiM2IwMWQyYmY2N2U2NDc0ODczMjA0NjdiZGU2ZjcwMjNhOGYxNTQ", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-10-26T16:05:58Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-10-26T16:06:54Z"}, "message": "Process registered region obligation in resolve_regions_with_wf_tys", "tree": {"sha": "973858f08144ddca89629de5087cee3e5bca61fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/973858f08144ddca89629de5087cee3e5bca61fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/db3b01d2bf67e647487320467bde6f7023a8f154", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/db3b01d2bf67e647487320467bde6f7023a8f154", "html_url": "https://github.com/rust-lang/rust/commit/db3b01d2bf67e647487320467bde6f7023a8f154", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/db3b01d2bf67e647487320467bde6f7023a8f154/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43dd3d514b6b11c5195de2fd8e665828801d0972", "url": "https://api.github.com/repos/rust-lang/rust/commits/43dd3d514b6b11c5195de2fd8e665828801d0972", "html_url": "https://github.com/rust-lang/rust/commit/43dd3d514b6b11c5195de2fd8e665828801d0972"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "70a171c02b26b5140b1016244e160920be48a8f5", "filename": "compiler/rustc_hir_analysis/src/check/wfcheck.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/db3b01d2bf67e647487320467bde6f7023a8f154/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db3b01d2bf67e647487320467bde6f7023a8f154/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2Fwfcheck.rs?ref=db3b01d2bf67e647487320467bde6f7023a8f154", "patch": "@@ -713,6 +713,10 @@ fn resolve_regions_with_wf_tys<'tcx>(\n \n     add_constraints(&infcx, region_bound_pairs);\n \n+    infcx.process_registered_region_obligations(\n+        outlives_environment.region_bound_pairs(),\n+        param_env,\n+    );\n     let errors = infcx.resolve_regions(&outlives_environment);\n \n     debug!(?errors, \"errors\");"}, {"sha": "bcbf4f941ecd94922bbd2bc9400539761d3ddc78", "filename": "src/test/ui/wf/issue-103573.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/db3b01d2bf67e647487320467bde6f7023a8f154/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db3b01d2bf67e647487320467bde6f7023a8f154/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwf%2Fissue-103573.rs?ref=db3b01d2bf67e647487320467bde6f7023a8f154", "patch": "@@ -0,0 +1,22 @@\n+trait TraitA {\n+    type TypeA;\n+}\n+\n+trait TraitD {\n+    type TypeD;\n+}\n+\n+pub trait TraitB {\n+    type TypeB: TraitD;\n+\n+    fn f(_: &<Self::TypeB as TraitD>::TypeD);\n+}\n+\n+pub trait TraitC<E> {\n+    type TypeC<'a>: TraitB;\n+\n+    fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA);\n+    //~^ ERROR the trait bound `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA` is not satisfied\n+}\n+\n+fn main() {}"}, {"sha": "fcf3f15e4d3f6f98ecdbadd689a8b3682480a470", "filename": "src/test/ui/wf/issue-103573.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/db3b01d2bf67e647487320467bde6f7023a8f154/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/db3b01d2bf67e647487320467bde6f7023a8f154/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwf%2Fissue-103573.stderr?ref=db3b01d2bf67e647487320467bde6f7023a8f154", "patch": "@@ -0,0 +1,14 @@\n+error[E0277]: the trait bound `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA` is not satisfied\n+  --> $DIR/issue-103573.rs:18:5\n+   |\n+LL |     fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA);\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `TraitA` is not implemented for `<<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB`\n+   |\n+help: consider further restricting the associated type\n+   |\n+LL |     fn g<'a>(_: &<<Self::TypeC<'a> as TraitB>::TypeB as TraitA>::TypeA) where <<Self as TraitC<E>>::TypeC<'a> as TraitB>::TypeB: TraitA;\n+   |                                                                         +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}