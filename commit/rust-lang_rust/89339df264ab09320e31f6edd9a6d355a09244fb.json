{"sha": "89339df264ab09320e31f6edd9a6d355a09244fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5MzM5ZGYyNjRhYjA5MzIwZTMxZjZlZGQ5YTZkMzU1YTA5MjQ0ZmI=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-03-20T17:28:47Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-03-24T14:36:14Z"}, "message": "ci: run the \"bors build finished\" jobs only during try and auto runs", "tree": {"sha": "afc052c14bc0f8387642248f07f21f5135aa05e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/afc052c14bc0f8387642248f07f21f5135aa05e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89339df264ab09320e31f6edd9a6d355a09244fb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl56Gt4ACgkQPgar6Auq\n8ZyI8A/9Ei6aHgmAMeMiO7Ycs/msHTTL1+9kXrptUN5f5spbB5bNHv2Bzh9U8q/v\n5i+hogLzTB5fvANTL+ZaPRKuGH9xYb+RFVpqWvx2c4bYwxALSsdl00NdUZz0skza\nFcXorOVgEUh6BfOV+75sz0qC0aoi0WzDdKmjF/GtnnUMZhnOkys/B7yaTWhhd3J4\nOQXUCqAxB2uUVknZzwRhxmyJPHwEgDuqP5V8YMIrGErU1cp+Lw/GBbllcjYCPd61\nTMlytnW7LifWh8nXT4PbX1Gx8uGdw2dQDJWcTZBGoEweNefqhCg3Fr3I0ikeHnr/\nxyvmWzkMHh834HaVdpD3cH5uu2EyQ1sI56zm6We6bMHNQXGTurNbp4UQa2E5z/ah\nKrlAtzxeP1qliMaAM4HxbJFuUP1gOMLOHWcIfu++4VAJbvW9sDqWzsp+J5Uz9iRn\nAA+gCqdNtUtBpQlJ2nd5c1bL8oZETfxxL3ZxrfMZAPGJQ5QSkL3sdLoKsXu4TE+z\nqJGIz+7uQMo9uEPP6bqS/fOggnYI+ja1gS+KXoeqIeHQa8Kcj5m2EeA4HkoMIE8p\n5NE6XX1pewq9FEwNmsQ5cOJws2aS5J1WbkHilidqkcD79W8DzpjVPFtdStczx3Hu\nL9rJ8D5ZupUwPz2XNsqeE/kt/6ASDvCqHc0SR8zac45LbqACj/o=\n=TYmV\n-----END PGP SIGNATURE-----", "payload": "tree afc052c14bc0f8387642248f07f21f5135aa05e2\nparent ba97ad35097146570508dff455f88a194daca3b6\nauthor Pietro Albini <pietro@pietroalbini.org> 1584725327 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1585060574 +0100\n\nci: run the \"bors build finished\" jobs only during try and auto runs\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89339df264ab09320e31f6edd9a6d355a09244fb", "html_url": "https://github.com/rust-lang/rust/commit/89339df264ab09320e31f6edd9a6d355a09244fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89339df264ab09320e31f6edd9a6d355a09244fb/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba97ad35097146570508dff455f88a194daca3b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba97ad35097146570508dff455f88a194daca3b6", "html_url": "https://github.com/rust-lang/rust/commit/ba97ad35097146570508dff455f88a194daca3b6"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "d1261f04b825586a9590b30b797052ea49803d38", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/89339df264ab09320e31f6edd9a6d355a09244fb/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/89339df264ab09320e31f6edd9a6d355a09244fb/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=89339df264ab09320e31f6edd9a6d355a09244fb", "patch": "@@ -746,7 +746,7 @@ jobs:\n   try-success:\n     needs:\n       - try\n-    if: success()\n+    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a success\n         run: exit 0\n@@ -755,7 +755,7 @@ jobs:\n   try-failure:\n     needs:\n       - try\n-    if: \"!success()\"\n+    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a failure\n         run: exit 1\n@@ -764,7 +764,7 @@ jobs:\n   auto-success:\n     needs:\n       - auto\n-    if: success()\n+    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/auto' && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a success\n         run: exit 0\n@@ -773,7 +773,7 @@ jobs:\n   auto-failure:\n     needs:\n       - auto\n-    if: \"!success()\"\n+    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/auto' && github.repository == 'rust-lang-ci/rust'\"\n     steps:\n       - name: mark the job as a failure\n         run: exit 1"}, {"sha": "81a334cd487c6ef8884453c67330f6695db8c0c4", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89339df264ab09320e31f6edd9a6d355a09244fb/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/89339df264ab09320e31f6edd9a6d355a09244fb/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=89339df264ab09320e31f6edd9a6d355a09244fb", "patch": "@@ -221,14 +221,12 @@ x--expand-yaml-anchors--remove:\n     runs-on: ubuntu-latest\n \n   - &base-success-job\n-    if: success()\n     steps:\n       - name: mark the job as a success\n         run: exit 0\n     <<: *base-outcome-job\n \n   - &base-failure-job\n-    if: \"!success()\"\n     steps:\n       - name: mark the job as a failure\n         run: exit 1\n@@ -695,13 +693,17 @@ jobs:\n   # successful listening to webhooks only.\n   try-success:\n     needs: [try]\n+    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-success-job\n   try-failure:\n     needs: [try]\n+    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/try' && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-failure-job\n   auto-success:\n     needs: [auto]\n+    if: \"success() && github.event_name == 'push' && github.ref == 'refs/heads/auto' && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-success-job\n   auto-failure:\n     needs: [auto]\n+    if: \"!success() && github.event_name == 'push' && github.ref == 'refs/heads/auto' && github.repository == 'rust-lang-ci/rust'\"\n     <<: *base-failure-job"}]}