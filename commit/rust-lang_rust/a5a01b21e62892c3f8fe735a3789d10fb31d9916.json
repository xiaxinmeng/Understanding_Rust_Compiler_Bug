{"sha": "a5a01b21e62892c3f8fe735a3789d10fb31d9916", "node_id": "C_kwDOAAsO6NoAKGE1YTAxYjIxZTYyODkyYzNmOGZlNzM1YTM3ODlkMTBmYjMxZDk5MTY", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2023-03-07T17:51:48Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2023-03-08T14:40:38Z"}, "message": "Fortify clippy tests.", "tree": {"sha": "4b2c2c14e7724c929c6636b496a0b2c612832490", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b2c2c14e7724c929c6636b496a0b2c612832490"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a5a01b21e62892c3f8fe735a3789d10fb31d9916", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a5a01b21e62892c3f8fe735a3789d10fb31d9916", "html_url": "https://github.com/rust-lang/rust/commit/a5a01b21e62892c3f8fe735a3789d10fb31d9916", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a5a01b21e62892c3f8fe735a3789d10fb31d9916/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d56034a25b149ac51ae2b497c3f33ca8c838786", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d56034a25b149ac51ae2b497c3f33ca8c838786", "html_url": "https://github.com/rust-lang/rust/commit/0d56034a25b149ac51ae2b497c3f33ca8c838786"}], "stats": {"total": 45, "additions": 24, "deletions": 21}, "files": [{"sha": "74985029e008a6c998707e3e54b18462cd6b0e43", "filename": "src/tools/clippy/tests/ui/erasing_op.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.rs?ref=a5a01b21e62892c3f8fe735a3789d10fb31d9916", "patch": "@@ -31,13 +31,15 @@ impl core::ops::Mul<i32> for Vec1 {\n \n #[allow(clippy::no_effect)]\n #[warn(clippy::erasing_op)]\n-fn main() {\n-    let x: u8 = 0;\n-\n+fn test(x: u8) {\n     x * 0;\n     0 & x;\n     0 / x;\n     0 * Meter; // no error: Output type is different from the non-zero argument\n     0 * Vec1 { x: 5 };\n     Vec1 { x: 5 } * 0;\n }\n+\n+fn main() {\n+    test(0)\n+}"}, {"sha": "97941252355af1271f8836c7052ccaedbc9f61cc", "filename": "src/tools/clippy/tests/ui/erasing_op.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ferasing_op.stderr?ref=a5a01b21e62892c3f8fe735a3789d10fb31d9916", "patch": "@@ -1,31 +1,31 @@\n error: this operation will always return zero. This is likely not the intended outcome\n-  --> $DIR/erasing_op.rs:37:5\n+  --> $DIR/erasing_op.rs:35:5\n    |\n LL |     x * 0;\n    |     ^^^^^\n    |\n    = note: `-D clippy::erasing-op` implied by `-D warnings`\n \n error: this operation will always return zero. This is likely not the intended outcome\n-  --> $DIR/erasing_op.rs:38:5\n+  --> $DIR/erasing_op.rs:36:5\n    |\n LL |     0 & x;\n    |     ^^^^^\n \n error: this operation will always return zero. This is likely not the intended outcome\n-  --> $DIR/erasing_op.rs:39:5\n+  --> $DIR/erasing_op.rs:37:5\n    |\n LL |     0 / x;\n    |     ^^^^^\n \n error: this operation will always return zero. This is likely not the intended outcome\n-  --> $DIR/erasing_op.rs:41:5\n+  --> $DIR/erasing_op.rs:39:5\n    |\n LL |     0 * Vec1 { x: 5 };\n    |     ^^^^^^^^^^^^^^^^^\n \n error: this operation will always return zero. This is likely not the intended outcome\n-  --> $DIR/erasing_op.rs:42:5\n+  --> $DIR/erasing_op.rs:40:5\n    |\n LL |     Vec1 { x: 5 } * 0;\n    |     ^^^^^^^^^^^^^^^^^"}, {"sha": "8dfdee662b9d7f8e21fd2a8d00a75e602c1b25f6", "filename": "src/tools/clippy/tests/ui/integer_arithmetic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Finteger_arithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Finteger_arithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Finteger_arithmetic.rs?ref=a5a01b21e62892c3f8fe735a3789d10fb31d9916", "patch": "@@ -4,7 +4,7 @@\n #[rustfmt::skip]\n fn main() {\n     let mut i = 1i32;\n-    let mut var1 = 0i32;\n+    let mut var1 = 13i32;\n     let mut var2 = -1i32;\n     1 + i;\n     i * 2;"}, {"sha": "e1e30114081ef0cb27d9caeac6c0eb33a12ac113", "filename": "src/tools/clippy/tests/ui/overflow_check_conditional.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.rs?ref=a5a01b21e62892c3f8fe735a3789d10fb31d9916", "patch": "@@ -1,9 +1,6 @@\n #![warn(clippy::overflow_check_conditional)]\n \n-fn main() {\n-    let a: u32 = 1;\n-    let b: u32 = 2;\n-    let c: u32 = 3;\n+fn test(a: u32, b: u32, c: u32) {\n     if a + b < a {}\n     if a > a + b {}\n     if a + b < b {}\n@@ -23,3 +20,7 @@ fn main() {\n     if i > i + j {}\n     if i - j < i {}\n }\n+\n+fn main() {\n+    test(1, 2, 3)\n+}"}, {"sha": "92d1d8ef911efcad667698a23b39e761001c70a5", "filename": "src/tools/clippy/tests/ui/overflow_check_conditional.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a5a01b21e62892c3f8fe735a3789d10fb31d9916/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Foverflow_check_conditional.stderr?ref=a5a01b21e62892c3f8fe735a3789d10fb31d9916", "patch": "@@ -1,49 +1,49 @@\n error: you are trying to use classic C overflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:7:8\n+  --> $DIR/overflow_check_conditional.rs:4:8\n    |\n LL |     if a + b < a {}\n    |        ^^^^^^^^^\n    |\n    = note: `-D clippy::overflow-check-conditional` implied by `-D warnings`\n \n error: you are trying to use classic C overflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:8:8\n+  --> $DIR/overflow_check_conditional.rs:5:8\n    |\n LL |     if a > a + b {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C overflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:9:8\n+  --> $DIR/overflow_check_conditional.rs:6:8\n    |\n LL |     if a + b < b {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C overflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:10:8\n+  --> $DIR/overflow_check_conditional.rs:7:8\n    |\n LL |     if b > a + b {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C underflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:11:8\n+  --> $DIR/overflow_check_conditional.rs:8:8\n    |\n LL |     if a - b > b {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C underflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:12:8\n+  --> $DIR/overflow_check_conditional.rs:9:8\n    |\n LL |     if b < a - b {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C underflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:13:8\n+  --> $DIR/overflow_check_conditional.rs:10:8\n    |\n LL |     if a - b > a {}\n    |        ^^^^^^^^^\n \n error: you are trying to use classic C underflow conditions that will fail in Rust\n-  --> $DIR/overflow_check_conditional.rs:14:8\n+  --> $DIR/overflow_check_conditional.rs:11:8\n    |\n LL |     if a < a - b {}\n    |        ^^^^^^^^^"}]}