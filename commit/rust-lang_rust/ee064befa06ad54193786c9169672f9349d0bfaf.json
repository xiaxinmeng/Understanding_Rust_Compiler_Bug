{"sha": "ee064befa06ad54193786c9169672f9349d0bfaf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlMDY0YmVmYTA2YWQ1NDE5Mzc4NmM5MTY5NjcyZjkzNDlkMGJmYWY=", "commit": {"author": {"name": "Markus Westerlind", "email": "markus.westerlind@distilnetworks.com", "date": "2020-02-17T15:46:51Z"}, "committer": {"name": "Markus Westerlind", "email": "markus.westerlind@distilnetworks.com", "date": "2020-02-17T15:46:53Z"}, "message": "Ensure diagnostics are printed in the correct order\n\nEven when buffered. Ideally we would flush only when the emitter is\ndone, but that requires larger changes. This gives most of the benefit\nof buffering in any case.", "tree": {"sha": "047db13ab08d762806bd433b35bda40612e1b598", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/047db13ab08d762806bd433b35bda40612e1b598"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee064befa06ad54193786c9169672f9349d0bfaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee064befa06ad54193786c9169672f9349d0bfaf", "html_url": "https://github.com/rust-lang/rust/commit/ee064befa06ad54193786c9169672f9349d0bfaf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee064befa06ad54193786c9169672f9349d0bfaf/comments", "author": null, "committer": null, "parents": [{"sha": "7ac4154643a952fed1d942adcb78e27b17ad41dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ac4154643a952fed1d942adcb78e27b17ad41dd", "html_url": "https://github.com/rust-lang/rust/commit/7ac4154643a952fed1d942adcb78e27b17ad41dd"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "97b9ca924bb7c9460bf4c6703776c8fdf9eca33d", "filename": "src/librustc_errors/json.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ee064befa06ad54193786c9169672f9349d0bfaf/src%2Flibrustc_errors%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee064befa06ad54193786c9169672f9349d0bfaf/src%2Flibrustc_errors%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fjson.rs?ref=ee064befa06ad54193786c9169672f9349d0bfaf", "patch": "@@ -104,7 +104,8 @@ impl Emitter for JsonEmitter {\n             writeln!(&mut self.dst, \"{}\", as_pretty_json(&data))\n         } else {\n             writeln!(&mut self.dst, \"{}\", as_json(&data))\n-        };\n+        }\n+        .and_then(|_| self.dst.flush());\n         if let Err(e) = result {\n             panic!(\"failed to print diagnostics: {:?}\", e);\n         }\n@@ -116,7 +117,8 @@ impl Emitter for JsonEmitter {\n             writeln!(&mut self.dst, \"{}\", as_pretty_json(&data))\n         } else {\n             writeln!(&mut self.dst, \"{}\", as_json(&data))\n-        };\n+        }\n+        .and_then(|_| self.dst.flush());\n         if let Err(e) = result {\n             panic!(\"failed to print notification: {:?}\", e);\n         }"}]}