{"sha": "cff9c676748b719d5333aa7521e4684f3543e4b9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmZjljNjc2NzQ4YjcxOWQ1MzMzYWE3NTIxZTQ2ODRmMzU0M2U0Yjk=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-10-20T12:58:24Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-10-20T13:30:27Z"}, "message": "Output linker errors, when linking fails", "tree": {"sha": "2b688e88a70296501bca3a7426feb50e16131c34", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b688e88a70296501bca3a7426feb50e16131c34"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cff9c676748b719d5333aa7521e4684f3543e4b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cff9c676748b719d5333aa7521e4684f3543e4b9", "html_url": "https://github.com/rust-lang/rust/commit/cff9c676748b719d5333aa7521e4684f3543e4b9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cff9c676748b719d5333aa7521e4684f3543e4b9/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8124846b2c945f661a6bb85e66e22ca987891dc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/8124846b2c945f661a6bb85e66e22ca987891dc4", "html_url": "https://github.com/rust-lang/rust/commit/8124846b2c945f661a6bb85e66e22ca987891dc4"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "562c7f0d6f17ae97c1bf9e0a6ea57fec6aa15698", "filename": "src/comp/back/link.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/cff9c676748b719d5333aa7521e4684f3543e4b9/src%2Fcomp%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cff9c676748b719d5333aa7521e4684f3543e4b9/src%2Fcomp%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fback%2Flink.rs?ref=cff9c676748b719d5333aa7521e4684f3543e4b9", "patch": "@@ -596,10 +596,11 @@ fn link_binary(sess: session::session,\n \n     log #fmt(\"gcc link args: %s\", str::connect(gcc_args, \" \"));\n     // We run 'gcc' here\n-    let err_code = run::run_program(prog, gcc_args);\n-    if 0 != err_code {\n-        sess.err(#fmt[\"linking with gcc failed with code %d\", err_code]);\n+    let prog = run::program_output(prog, gcc_args);\n+    if 0 != prog.status {\n+        sess.err(#fmt[\"linking with gcc failed with code %d\", prog.status]);\n         sess.note(#fmt[\"gcc arguments: %s\", str::connect(gcc_args, \" \")]);\n+        sess.note(prog.err + prog.out);\n         sess.abort_if_errors();\n     }\n     // Clean up on Darwin"}]}