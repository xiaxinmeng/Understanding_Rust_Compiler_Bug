{"sha": "38eb369fa4d06e55869a8fae62796a7b0085a5bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM4ZWIzNjlmYTRkMDZlNTU4NjlhOGZhZTYyNzk2YTdiMDA4NWE1YmQ=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-11-21T12:57:40Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-04-10T13:09:58Z"}, "message": "Enforce Python 3 as much as possible", "tree": {"sha": "a2f010105a6087ba68ff8ca3bf9371633463739d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2f010105a6087ba68ff8ca3bf9371633463739d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/38eb369fa4d06e55869a8fae62796a7b0085a5bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/38eb369fa4d06e55869a8fae62796a7b0085a5bd", "html_url": "https://github.com/rust-lang/rust/commit/38eb369fa4d06e55869a8fae62796a7b0085a5bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/38eb369fa4d06e55869a8fae62796a7b0085a5bd/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42abbd8878d3b67238f3611b0587c704ba94f39c", "url": "https://api.github.com/repos/rust-lang/rust/commits/42abbd8878d3b67238f3611b0587c704ba94f39c", "html_url": "https://github.com/rust-lang/rust/commit/42abbd8878d3b67238f3611b0587c704ba94f39c"}], "stats": {"total": 242, "additions": 131, "deletions": 111}, "files": [{"sha": "00bb501941dd76c5845cd04476c405801855d7fe", "filename": "README.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -27,7 +27,7 @@ or reading the [rustc dev guide][rustcguidebuild].\n 1. Make sure you have installed the dependencies:\n \n    * `g++` 5.1 or later or `clang++` 3.5 or later\n-   * `python` 2.7 (but not 3.x)\n+   * `python` 3 or 2.7\n    * GNU `make` 3.81 or later\n    * `cmake` 3.4.3 or later\n    * `curl`\n@@ -113,7 +113,7 @@ build.\n                make \\\n                diffutils \\\n                tar \\\n-               mingw-w64-x86_64-python2 \\\n+               mingw-w64-x86_64-python \\\n                mingw-w64-x86_64-cmake \\\n                mingw-w64-x86_64-gcc\n    ```"}, {"sha": "d4a77bb29603e4855c1f066374feb56bf3946fe4", "filename": "config.toml.example", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -168,11 +168,9 @@\n \n # Python interpreter to use for various tasks throughout the build, notably\n # rustdoc tests, the lldb python interpreter, and some dist bits and pieces.\n-# Note that Python 2 is currently required.\n #\n-# Defaults to python2.7, then python2. If neither executable can be found, then\n-# it defaults to the Python interpreter used to execute x.py.\n-#python = \"python2.7\"\n+# Defaults to the Python interpreter used to execute x.py.\n+#python = \"python\"\n \n # Force Cargo to check that Cargo.lock describes the precise dependency\n # set that all the Cargo.toml files create, instead of updating it."}, {"sha": "81e2001e4a583ef1f117a46593acd1705995ed85", "filename": "configure", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/configure", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -11,6 +11,7 @@ try() {\n     fi\n }\n \n+try python3 \"$@\"\n try python2.7 \"$@\"\n try python27 \"$@\"\n try python2 \"$@\""}, {"sha": "2fe9b06e42643916d84a2c59f52f34b28cae789a", "filename": "src/bootstrap/job.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fbootstrap%2Fjob.rs", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fbootstrap%2Fjob.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fjob.rs?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -103,7 +103,12 @@ pub unsafe fn setup(build: &mut Build) {\n     };\n \n     let parent = OpenProcess(PROCESS_DUP_HANDLE, FALSE, pid.parse().unwrap());\n-    assert!(!parent.is_null(), \"{}\", io::Error::last_os_error());\n+    assert!(\n+        !parent.is_null(),\n+        \"PID `{}` doesn't seem to exist: {}\",\n+        pid,\n+        io::Error::last_os_error()\n+    );\n     let mut parent_handle = ptr::null_mut();\n     let r = DuplicateHandle(\n         GetCurrentProcess(),"}, {"sha": "1760d655b3b4e8885ed8209f36944e7fccd8ccdb", "filename": "src/bootstrap/sanity.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fbootstrap%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fbootstrap%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsanity.rs?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -132,8 +132,6 @@ pub fn check(build: &mut Build) {\n         .python\n         .take()\n         .map(|p| cmd_finder.must_have(p))\n-        .or_else(|| cmd_finder.maybe_have(\"python2.7\"))\n-        .or_else(|| cmd_finder.maybe_have(\"python2\"))\n         .or_else(|| env::var_os(\"BOOTSTRAP_PYTHON\").map(PathBuf::from)) // set by bootstrap.py\n         .or_else(|| Some(cmd_finder.must_have(\"python\")));\n "}, {"sha": "77514848167067b2187f680130f2584d9278b13a", "filename": "src/ci/docker/arm-android/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Farm-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Farm-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Farm-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -31,7 +31,7 @@ ENV TARGETS=arm-linux-androideabi\n \n ENV RUST_CONFIGURE_ARGS --arm-linux-androideabi-ndk=/android/ndk/arm-14\n \n-ENV SCRIPT python2.7 ../x.py test --target $TARGETS\n+ENV SCRIPT python3 ../x.py test --target $TARGETS\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "d1bc70689e1e7bb97ce2c99f531d37f4f11f8985", "filename": "src/ci/docker/armhf-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Farmhf-gnu%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -14,7 +14,7 @@ RUN apt-get update -y && apt-get install -y --no-install-recommends \\\n       libc6-dev \\\n       libc6-dev-armhf-cross \\\n       make \\\n-      python2.7 \\\n+      python3 \\\n       qemu-system-arm \\\n       xz-utils\n \n@@ -78,6 +78,6 @@ COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n ENV RUST_CONFIGURE_ARGS --qemu-armhf-rootfs=/tmp/rootfs\n-ENV SCRIPT python2.7 ../x.py test --target arm-unknown-linux-gnueabihf\n+ENV SCRIPT python3 ../x.py test --target arm-unknown-linux-gnueabihf\n \n ENV NO_CHANGE_USER=1"}, {"sha": "9dd0435ac4f0c9727988c71d401d9303ac2ae456", "filename": "src/ci/docker/disabled/aarch64-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Faarch64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Faarch64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Faarch64-gnu%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -14,7 +14,7 @@ RUN apt-get update -y && apt-get install -y --no-install-recommends \\\n       libc6-dev \\\n       libc6-dev-arm64-cross \\\n       make \\\n-      python2.7 \\\n+      python3 \\\n       qemu-system-aarch64 \\\n       xz-utils\n \n@@ -75,5 +75,5 @@ RUN sh /scripts/sccache.sh\n \n ENV RUST_CONFIGURE_ARGS \\\n       --qemu-aarch64-rootfs=/tmp/rootfs\n-ENV SCRIPT python2.7 ../x.py test --target aarch64-unknown-linux-gnu\n+ENV SCRIPT python3 ../x.py test --target aarch64-unknown-linux-gnu\n ENV NO_CHANGE_USER=1"}, {"sha": "3fa65511e94f783912f52b7f7d2619b9a7e41cce", "filename": "src/ci/docker/disabled/asmjs/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fasmjs%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fasmjs%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fasmjs%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -33,7 +33,7 @@ ENV EMCC_CFLAGS=-O1\n # Emscripten installation is user-specific\n ENV NO_CHANGE_USER=1\n \n-ENV SCRIPT python2.7 ../x.py test --target $TARGETS\n+ENV SCRIPT python3 ../x.py test --target $TARGETS\n \n # This is almost identical to the wasm32-unknown-emscripten target, so\n # running with assertions again is not useful"}, {"sha": "dea445c295c994263ef8ce7886a8b76b84adbaec", "filename": "src/ci/docker/disabled/dist-aarch64-android/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-aarch64-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-aarch64-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-aarch64-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -19,7 +19,7 @@ ENV RUST_CONFIGURE_ARGS \\\n       --enable-extended \\\n       --enable-cargo-openssl-static\n \n-ENV SCRIPT python2.7 ../x.py dist --target $HOSTS --host $HOSTS\n+ENV SCRIPT python3 ../x.py dist --target $HOSTS --host $HOSTS\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "7227c41ccca9a7dda4f54bcac161c7163a50384a", "filename": "src/ci/docker/disabled/dist-armv7-android/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-armv7-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-armv7-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-armv7-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -33,11 +33,11 @@ ENV RUST_CONFIGURE_ARGS \\\n # build to finish we use --warn-unresolved-symbols. Note that the missing\n # symbols does not affect std, only the compiler (llvm) and cargo (openssl).\n ENV SCRIPT \\\n-  python2.7 ../x.py build src/llvm --host $HOSTS --target $HOSTS && \\\n+  python3 ../x.py build src/llvm --host $HOSTS --target $HOSTS && \\\n   (export RUSTFLAGS=\"\\\"-C link-arg=-Wl,--warn-unresolved-symbols\\\"\"; \\\n     rm /android/ndk/arm && \\\n     ln -s /android/ndk/arm-14 /android/ndk/arm && \\\n-    python2.7 ../x.py dist --host $HOSTS --target $HOSTS)\n+    python3 ../x.py dist --host $HOSTS --target $HOSTS)\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "b74dcefa3516c5566262896a62b18f781cf10b9a", "filename": "src/ci/docker/disabled/dist-i686-android/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-i686-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-i686-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-i686-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -33,11 +33,11 @@ ENV RUST_CONFIGURE_ARGS \\\n # build to finish we use --warn-unresolved-symbols. Note that the missing\n # symbols does not affect std, only the compiler (llvm) and cargo (openssl).\n ENV SCRIPT \\\n-  python2.7 ../x.py build src/llvm --host $HOSTS --target $HOSTS && \\\n+  python3 ../x.py build src/llvm --host $HOSTS --target $HOSTS && \\\n   (export RUSTFLAGS=\"\\\"-C link-arg=-Wl,--warn-unresolved-symbols\\\"\"; \\\n     rm /android/ndk/x86 && \\\n     ln -s /android/ndk/x86-14 /android/ndk/x86 && \\\n-    python2.7 ../x.py dist --host $HOSTS --target $HOSTS)\n+    python3 ../x.py dist --host $HOSTS --target $HOSTS)\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "19df9d6cf6231e4712b79422c22cdf93d295340c", "filename": "src/ci/docker/disabled/dist-powerpcspe-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-powerpcspe-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -23,4 +23,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=powerpc-unknown-linux-gnuspe\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "62d0bfc71b2fa76a0cdf5cb635b9aa366804c703", "filename": "src/ci/docker/disabled/dist-sparc64-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-sparc64-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -23,4 +23,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=sparc64-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "d44779763e5443901234b12dc213594a4def7222", "filename": "src/ci/docker/disabled/dist-x86_64-android/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -19,7 +19,7 @@ ENV RUST_CONFIGURE_ARGS \\\n       --enable-extended \\\n       --enable-cargo-openssl-static\n \n-ENV SCRIPT python2.7 ../x.py dist --target $HOSTS --host $HOSTS\n+ENV SCRIPT python3 ../x.py dist --target $HOSTS --host $HOSTS\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "5b7196c573c8b278cb58c9284c548d64b4fb25bb", "filename": "src/ci/docker/disabled/dist-x86_64-dragonfly/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-dragonfly%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -33,4 +33,4 @@ ENV \\\n ENV HOSTS=x86_64-unknown-dragonfly\n \n ENV RUST_CONFIGURE_ARGS --enable-extended\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "5b65335bfe4e4f635ba58febbe0d6274a1c9ed27", "filename": "src/ci/docker/disabled/dist-x86_64-haiku/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-haiku%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -18,7 +18,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   make \\\n   nasm \\\n   pkg-config \\\n-  python2.7 \\\n+  python3 \\\n   sudo \\\n   texinfo \\\n   wget \\\n@@ -46,4 +46,4 @@ ENV RUST_CONFIGURE_ARGS --disable-jemalloc \\\n   --set=$TARGET.cc=x86_64-unknown-haiku-gcc \\\n   --set=$TARGET.cxx=x86_64-unknown-haiku-g++ \\\n   --set=$TARGET.llvm-config=/bin/llvm-config-haiku\n-ENV SCRIPT python2.7 ../x.py dist --host=$HOST --target=$HOST\n+ENV SCRIPT python3 ../x.py dist --host=$HOST --target=$HOST"}, {"sha": "7b53e73d700ba4cc418efb6b0356a59e70042c6f", "filename": "src/ci/docker/disabled/dist-x86_64-redox/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-redox%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-redox%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdisabled%2Fdist-x86_64-redox%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -19,4 +19,4 @@ ENV \\\n     CXX_x86_64_unknown_redox=x86_64-unknown-redox-g++\n \n ENV RUST_CONFIGURE_ARGS --enable-extended\n-ENV SCRIPT python2.7 ../x.py dist --target x86_64-unknown-redox\n+ENV SCRIPT python3 ../x.py dist --target x86_64-unknown-redox"}, {"sha": "37e81dffc0697c5e6e32e7073c3b2bfb170fb5aa", "filename": "src/ci/docker/dist-aarch64-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-aarch64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-aarch64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-aarch64-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -36,4 +36,4 @@ ENV RUST_CONFIGURE_ARGS \\\n       --enable-extended \\\n       --enable-profiler \\\n       --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "6d38e199564b1d3de503864bbd36847f72031260", "filename": "src/ci/docker/dist-android/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-android%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -32,7 +32,7 @@ ENV RUST_CONFIGURE_ARGS \\\n       --x86_64-linux-android-ndk=/android/ndk/x86_64-21 \\\n       --disable-docs\n \n-ENV SCRIPT python2.7 ../x.py dist --target $TARGETS\n+ENV SCRIPT python3 ../x.py dist --target $TARGETS\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "78f2734ed40ee0585a1024d460308a97ae523490", "filename": "src/ci/docker/dist-arm-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-arm-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-arm-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-arm-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -28,4 +28,4 @@ ENV CC_arm_unknown_linux_gnueabi=arm-unknown-linux-gnueabi-gcc \\\n ENV HOSTS=arm-unknown-linux-gnueabi\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "175dadfd303d751c6b87f08fe4ea499bffefbee3", "filename": "src/ci/docker/dist-armhf-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-armhf-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-armhf-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-armhf-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -28,4 +28,4 @@ ENV CC_arm_unknown_linux_gnueabihf=arm-unknown-linux-gnueabihf-gcc \\\n ENV HOSTS=arm-unknown-linux-gnueabihf\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "faa2ce106068bfcd6dc57c2ce1d1352899542117", "filename": "src/ci/docker/dist-armv7-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-armv7-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-armv7-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-armv7-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -28,4 +28,4 @@ ENV CC_armv7_unknown_linux_gnueabihf=armv7-unknown-linux-gnueabihf-gcc \\\n ENV HOSTS=armv7-unknown-linux-gnueabihf\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "996fffeb871cfc9f7f6fe23e08f7ac33cc7b11ae", "filename": "src/ci/docker/dist-i586-gnu-i586-i686-musl/Dockerfile", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-i586-gnu-i586-i686-musl%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   xz-utils \\\n@@ -46,5 +46,5 @@ ENV CFLAGS_i586_unknown_linux_musl=-Wa,-mrelax-relocations=no\n ENV TARGETS=i586-unknown-linux-gnu,i686-unknown-linux-musl\n \n ENV SCRIPT \\\n-      python2.7 ../x.py test --target $TARGETS && \\\n-      python2.7 ../x.py dist --target $TARGETS,i586-unknown-linux-musl\n+      python3 ../x.py test --target $TARGETS && \\\n+      python3 ../x.py dist --target $TARGETS,i586-unknown-linux-musl"}, {"sha": "7978bb70869652f8e5c39ad66f2bff6a27a9ee5f", "filename": "src/ci/docker/dist-i686-freebsd/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-i686-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-i686-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-i686-freebsd%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -30,4 +30,4 @@ ENV \\\n ENV HOSTS=i686-unknown-freebsd\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "57a7fc25b5c13ead0cf11168a452b053c94dd58c", "filename": "src/ci/docker/dist-mips-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-mips-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -23,4 +23,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=mips-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "63f1028e2be593db9db9c0e533f9ae6c2f0a5f6c", "filename": "src/ci/docker/dist-mips64-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-mips64-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -22,4 +22,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=mips64-unknown-linux-gnuabi64\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "a51edbc9c7923a49d0684efe54e5df4d0096f595", "filename": "src/ci/docker/dist-mips64el-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips64el-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mips64el-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-mips64el-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -23,4 +23,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=mips64el-unknown-linux-gnuabi64\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "908cef90cef6900c801a8fab567b0a1f5e8587c5", "filename": "src/ci/docker/dist-mipsel-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mipsel-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-mipsel-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-mipsel-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -22,4 +22,4 @@ RUN sh /scripts/sccache.sh\n ENV HOSTS=mipsel-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "b8792b0c7fa92711f9fe339b0293dda51751860c", "filename": "src/ci/docker/dist-powerpc-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -35,4 +35,4 @@ ENV \\\n ENV HOSTS=powerpc-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "a790a143ac5e73918269a35c5e147a7aee13d765", "filename": "src/ci/docker/dist-powerpc64-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -36,4 +36,4 @@ ENV \\\n ENV HOSTS=powerpc64-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "5c17bc321c1712d8eb4b5cc7baedb3dd4503c851", "filename": "src/ci/docker/dist-powerpc64le-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64le-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -33,4 +33,4 @@ ENV \\\n ENV HOSTS=powerpc64le-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "76d29a471c3967e14451c71495299bb3857ff65f", "filename": "src/ci/docker/dist-s390x-linux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-s390x-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-s390x-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -35,4 +35,4 @@ ENV \\\n ENV HOSTS=s390x-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "35b598e20f09932d3fc683f8406e90b8bdf60396", "filename": "src/ci/docker/dist-various-1/Dockerfile", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -18,7 +18,6 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n   python3 \\\n   git \\\n   cmake \\\n@@ -209,8 +208,8 @@ ENV RUST_CONFIGURE_ARGS \\\n       --disable-docs\n \n ENV SCRIPT \\\n-      python2.7 ../x.py test --target $RUN_MAKE_TARGETS src/test/run-make && \\\n-      python2.7 ../x.py dist --target $TARGETS\n+      python3 ../x.py test --target $RUN_MAKE_TARGETS src/test/run-make && \\\n+      python3 ../x.py dist --target $TARGETS\n \n # sccache\n COPY scripts/sccache.sh /scripts/"}, {"sha": "5864b5ffab28601bb9e96cb4ab8a24a1345e1a46", "filename": "src/ci/docker/dist-various-2/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -17,7 +17,7 @@ RUN apt-get update && apt-get build-dep -y clang llvm && apt-get install -y --no\n   libmpfr-dev \\\n   ninja-build \\\n   nodejs \\\n-  python2.7-dev \\\n+  python3-dev \\\n   software-properties-common \\\n   unzip \\\n   # Needed for apt-key to work:\n@@ -110,4 +110,4 @@ ENV RUST_CONFIGURE_ARGS --enable-extended --enable-lld --disable-docs \\\n   --set target.wasm32-wasi.wasi-root=/wasm32-wasi \\\n   --musl-root-armv7=/musl-armv7\n \n-ENV SCRIPT python2.7 ../x.py dist --target $TARGETS\n+ENV SCRIPT python3 ../x.py dist --target $TARGETS"}, {"sha": "12170a366148755d884b97eb93cfaeb29e82cc2b", "filename": "src/ci/docker/dist-x86_64-freebsd/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-freebsd%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -30,4 +30,4 @@ ENV \\\n ENV HOSTS=x86_64-unknown-freebsd\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "39316ea4486427427d912aabc60b2ed5d415fc1a", "filename": "src/ci/docker/dist-x86_64-musl/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-musl%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -7,7 +7,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   wget \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   xz-utils \\\n@@ -47,4 +47,4 @@ ENV CFLAGS_x86_64_unknown_linux_musl=\"-Wa,-mrelax-relocations=no -Wa,--compress-\n     -Wl,--compress-debug-sections=none\"\n \n # To run native tests replace `dist` below with `test`\n-ENV SCRIPT python2.7 ../x.py dist --build $HOSTS\n+ENV SCRIPT python3 ../x.py dist --build $HOSTS"}, {"sha": "135bb33cef71728f24cbc1bffc2956ed8e4e4f57", "filename": "src/ci/docker/dist-x86_64-netbsd/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-x86_64-netbsd%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -19,4 +19,4 @@ ENV \\\n ENV HOSTS=x86_64-unknown-netbsd\n \n ENV RUST_CONFIGURE_ARGS --enable-extended --disable-docs\n-ENV SCRIPT python2.7 ../x.py dist --host $HOSTS --target $HOSTS\n+ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "c15b437e6d3157dea376b816c82172a449564a41", "filename": "src/ci/docker/i686-gnu-nopt/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fi686-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fi686-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fi686-gnu-nopt%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -18,7 +18,7 @@ COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n ENV RUST_CONFIGURE_ARGS --build=i686-unknown-linux-gnu --disable-optimize-tests\n-ENV SCRIPT python2.7 ../x.py test\n+ENV SCRIPT python3 ../x.py test\n \n # FIXME(#59637) takes too long on CI right now\n ENV NO_LLVM_ASSERTIONS=1 NO_DEBUG_ASSERTIONS=1"}, {"sha": "377f07cef4e46e7444e7a21eea56d742e2eafa56", "filename": "src/ci/docker/i686-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fi686-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fi686-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fi686-gnu%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -20,7 +20,7 @@ RUN sh /scripts/sccache.sh\n ENV RUST_CONFIGURE_ARGS --build=i686-unknown-linux-gnu\n # Exclude some tests that are unlikely to be platform specific, to speed up\n # this slow job.\n-ENV SCRIPT python2.7 ../x.py test \\\n+ENV SCRIPT python3 ../x.py test \\\n   --exclude src/bootstrap \\\n   --exclude src/test/rustdoc-js \\\n   --exclude src/tools/error_index_generator \\"}, {"sha": "17d844a1f99374537df12f097018c4f28f2ee7bc", "filename": "src/ci/docker/mingw-check/Dockerfile", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fmingw-check%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fmingw-check%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fmingw-check%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -22,9 +22,9 @@ RUN sh /scripts/sccache.sh\n COPY mingw-check/validate-toolstate.sh /scripts/\n \n ENV RUN_CHECK_WITH_PARALLEL_QUERIES 1\n-ENV SCRIPT python2.7 ../x.py test src/tools/expand-yaml-anchors && \\\n-           python2.7 ../x.py check --target=i686-pc-windows-gnu --host=i686-pc-windows-gnu && \\\n-           python2.7 ../x.py build --stage 0 src/tools/build-manifest && \\\n-           python2.7 ../x.py test --stage 0 src/tools/compiletest && \\\n-           python2.7 ../x.py test src/tools/tidy && \\\n+ENV SCRIPT python3 ../x.py test src/tools/expand-yaml-anchors && \\\n+           python3 ../x.py check --target=i686-pc-windows-gnu --host=i686-pc-windows-gnu && \\\n+           python3 ../x.py build --stage 0 src/tools/build-manifest && \\\n+           python3 ../x.py test --stage 0 src/tools/compiletest && \\\n+           python3 ../x.py test src/tools/tidy && \\\n            /scripts/validate-toolstate.sh"}, {"sha": "c6d728eb80dd080377bf0a575b30cd828b49ab26", "filename": "src/ci/docker/mingw-check/validate-toolstate.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fmingw-check%2Fvalidate-toolstate.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fmingw-check%2Fvalidate-toolstate.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fmingw-check%2Fvalidate-toolstate.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -7,12 +7,12 @@ IFS=$'\\n\\t'\n rm -rf rust-toolstate\n git clone --depth=1 https://github.com/rust-lang-nursery/rust-toolstate.git\n cd rust-toolstate\n-python2.7 \"../../src/tools/publish_toolstate.py\" \"$(git rev-parse HEAD)\" \\\n+python3 \"../../src/tools/publish_toolstate.py\" \"$(git rev-parse HEAD)\" \\\n     \"$(git log --format=%s -n1 HEAD)\" \"\" \"\"\n # Only check maintainers if this build is supposed to publish toolstate.\n # Builds that are not supposed to publish don't have the access token.\n if [ -n \"${TOOLSTATE_PUBLISH+is_set}\" ]; then\n-  TOOLSTATE_VALIDATE_MAINTAINERS_REPO=rust-lang/rust python2.7 \\\n+  TOOLSTATE_VALIDATE_MAINTAINERS_REPO=rust-lang/rust python3 \\\n       \"../../src/tools/publish_toolstate.py\"\n fi\n cd .."}, {"sha": "391b68ea637b0e4f4d1162fae217203a7a7ec4cc", "filename": "src/ci/docker/scripts/android-base-apt-get.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-base-apt-get.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -11,7 +11,7 @@ apt-get install -y --no-install-recommends \\\n   libssl-dev \\\n   make \\\n   pkg-config \\\n-  python2.7 \\\n+  python3 \\\n   sudo \\\n   unzip \\\n   xz-utils"}, {"sha": "dafcb3cb7a719a1a11a69bdc86f333a588c03551", "filename": "src/ci/docker/scripts/android-ndk.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -13,7 +13,7 @@ download_ndk() {\n \n make_standalone_toolchain() {\n     # See https://developer.android.com/ndk/guides/standalone_toolchain.htm\n-    python2.7 /android/ndk/ndk/build/tools/make_standalone_toolchain.py \\\n+    python3 /android/ndk/ndk/build/tools/make_standalone_toolchain.py \\\n         --install-dir /android/ndk/$1-$2 \\\n         --arch $1 \\\n         --api $2"}, {"sha": "7030cd74cae232c5e4a2aec35ae8d13ec0261b45", "filename": "src/ci/docker/scripts/cross-apt-packages.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fcross-apt-packages.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -19,7 +19,7 @@ apt-get update && apt-get install -y --no-install-recommends \\\n   make \\\n   patch \\\n   pkg-config \\\n-  python2.7 \\\n+  python3 \\\n   sudo \\\n   texinfo \\\n   unzip \\"}, {"sha": "9276e4ed82d78b2c886980927830b1310b25f4d3", "filename": "src/ci/docker/test-various/Dockerfile", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Ftest-various%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Ftest-various%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Ftest-various%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -40,7 +40,7 @@ ENV RUST_CONFIGURE_ARGS \\\n ENV NO_DEBUG_ASSERTIONS=1\n \n ENV WASM_TARGETS=wasm32-unknown-unknown\n-ENV WASM_SCRIPT python2.7 /checkout/x.py test --target $WASM_TARGETS \\\n+ENV WASM_SCRIPT python3 /checkout/x.py test --target $WASM_TARGETS \\\n   src/test/run-make \\\n   src/test/ui \\\n   src/test/compile-fail \\\n@@ -49,13 +49,13 @@ ENV WASM_SCRIPT python2.7 /checkout/x.py test --target $WASM_TARGETS \\\n   src/libcore\n \n ENV NVPTX_TARGETS=nvptx64-nvidia-cuda\n-ENV NVPTX_SCRIPT python2.7 /checkout/x.py test --target $NVPTX_TARGETS \\\n+ENV NVPTX_SCRIPT python3 /checkout/x.py test --target $NVPTX_TARGETS \\\n   src/test/run-make \\\n   src/test/assembly\n \n ENV MUSL_TARGETS=x86_64-unknown-linux-musl \\\n     CC_x86_64_unknown_linux_musl=x86_64-linux-musl-gcc \\\n     CXX_x86_64_unknown_linux_musl=x86_64-linux-musl-g++\n-ENV MUSL_SCRIPT python2.7 /checkout/x.py test --target $MUSL_TARGETS\n+ENV MUSL_SCRIPT python3 /checkout/x.py test --target $MUSL_TARGETS\n \n ENV SCRIPT $WASM_SCRIPT && $NVPTX_SCRIPT && $MUSL_SCRIPT"}, {"sha": "91c492d03c179dcdc073b1444ea2ad73fcc2e254", "filename": "src/ci/docker/wasm32/Dockerfile", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fwasm32%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fwasm32%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fwasm32%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -20,6 +20,9 @@ RUN bash /scripts/emscripten.sh\n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n+# emcc seems to need python to specifically be \"python\" and not \"python3\"\n+RUN ln `which python3` /usr/bin/python\n+\n ENV PATH=$PATH:/emsdk-portable\n ENV PATH=$PATH:/emsdk-portable/upstream/emscripten/\n ENV PATH=$PATH:/emsdk-portable/node/12.9.1_64bit/bin/\n@@ -35,7 +38,7 @@ ENV NO_CHANGE_USER=1\n \n # FIXME: Re-enable these tests once https://github.com/rust-lang/cargo/pull/7476\n # is picked up by CI\n-ENV SCRIPT python2.7 ../x.py test --target $TARGETS \\\n+ENV SCRIPT python3 ../x.py test --target $TARGETS \\\n     --exclude src/libcore \\\n     --exclude src/liballoc \\\n     --exclude src/libproc_macro \\"}, {"sha": "86ac0256d28201cd90cf9977171adf8e7fc9365f", "filename": "src/ci/docker/x86_64-gnu-aux/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-aux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-aux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-aux%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   libssl-dev \\"}, {"sha": "c5e41b8a75afe506048fa18eba18a27da91ae2d0", "filename": "src/ci/docker/x86_64-gnu-debug/Dockerfile", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-debug%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-debug%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-debug%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,8 +6,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n-  python2.7-dev \\\n+  python3 \\\n+  python3-dev \\\n   libxml2-dev \\\n   libncurses-dev \\\n   libedit-dev \\\n@@ -40,5 +40,5 @@ ENV RUST_CONFIGURE_ARGS \\\n       --set target.x86_64-unknown-linux-gnu.cxx=clang++\n \n ENV SCRIPT \\\n-  python2.7 ../x.py build && \\\n-  python2.7 ../x.py test src/test/run-make-fulldeps --test-args clang\n+  python3 ../x.py build && \\\n+  python3 ../x.py test src/test/run-make-fulldeps --test-args clang"}, {"sha": "cc07a591cc17bec1c7d1d853f8216f75165aa98f", "filename": "src/ci/docker/x86_64-gnu-distcheck/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-distcheck%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-distcheck%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-distcheck%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -19,7 +19,7 @@ COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n ENV RUST_CONFIGURE_ARGS --build=x86_64-unknown-linux-gnu --set rust.ignore-git=false\n-ENV SCRIPT python2.7 ../x.py test distcheck\n+ENV SCRIPT python3 ../x.py test distcheck\n ENV DIST_SRC 1\n \n # The purpose of this builder is to test that we can `./x.py test` successfully"}, {"sha": "de7ee6950b51b26ca00c06b2c32af0bf8b2c51f0", "filename": "src/ci/docker/x86_64-gnu-full-bootstrap/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-full-bootstrap%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-full-bootstrap%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-full-bootstrap%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -21,7 +21,7 @@ RUN sh /scripts/sccache.sh\n ENV RUST_CONFIGURE_ARGS \\\n       --build=x86_64-unknown-linux-gnu \\\n       --enable-full-bootstrap\n-ENV SCRIPT python2.7 ../x.py build\n+ENV SCRIPT python3 ../x.py build\n \n # In general this just slows down the build and we're just a smoke test that\n # a full bootstrap works in general, so there's not much need to take this"}, {"sha": "096f67e13d1e679c0414ca8445c63abece65cb49", "filename": "src/ci/docker/x86_64-gnu-nopt/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-nopt%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -21,4 +21,4 @@ RUN sh /scripts/sccache.sh\n ENV RUST_CONFIGURE_ARGS --build=x86_64-unknown-linux-gnu \\\n   --disable-optimize-tests \\\n   --set rust.test-compare-mode\n-ENV SCRIPT python2.7 ../x.py test\n+ENV SCRIPT python3 ../x.py test"}, {"sha": "148e09f6ad104c17177b126fcbb9339db907ffc1", "filename": "src/ci/docker/x86_64-gnu-tools/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   libssl-dev \\"}, {"sha": "00ac20c08dc6b46fa62a60e253e3a3d57c9c9202", "filename": "src/ci/docker/x86_64-gnu-tools/checktools.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2Fchecktools.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2Fchecktools.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-tools%2Fchecktools.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -7,7 +7,7 @@ X_PY=\"$1\"\n # Try to test all the tools and store the build/test success in the TOOLSTATE_FILE\n \n set +e\n-python2.7 \"$X_PY\" test --no-fail-fast \\\n+python3 \"$X_PY\" test --no-fail-fast \\\n     src/doc/book \\\n     src/doc/nomicon \\\n     src/doc/reference \\\n@@ -22,4 +22,4 @@ python2.7 \"$X_PY\" test --no-fail-fast \\\n \n set -e\n \n-python2.7 \"$X_PY\" test check-tools\n+python3 \"$X_PY\" test check-tools"}, {"sha": "af6e13180627688b881fc9cc49b7bd3715a5ca01", "filename": "src/ci/docker/x86_64-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu%2FDockerfile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -6,7 +6,7 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   file \\\n   curl \\\n   ca-certificates \\\n-  python2.7 \\\n+  python3 \\\n   git \\\n   cmake \\\n   sudo \\\n@@ -23,4 +23,4 @@ ENV RUST_CONFIGURE_ARGS \\\n  --enable-sanitizers \\\n  --enable-profiler \\\n  --enable-compiler-docs\n-ENV SCRIPT python2.7 ../x.py test\n+ENV SCRIPT python3 ../x.py test"}, {"sha": "59f2736cbd406b05e11bfebd35e97dd66218258e", "filename": "src/ci/run.sh", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -23,6 +23,14 @@ fi\n ci_dir=`cd $(dirname $0) && pwd`\n source \"$ci_dir/shared.sh\"\n \n+if command -v python > /dev/null; then\n+    PYTHON=\"python\"\n+elif command -v python3 > /dev/null; then\n+    PYTHON=\"python3\"\n+else\n+    PYTHON=\"python2\"\n+fi\n+\n if ! isCI || isCiBranch auto || isCiBranch beta; then\n     RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set build.print-step-timings --enable-verbose-tests\"\n fi\n@@ -107,7 +115,7 @@ SCCACHE_IDLE_TIMEOUT=10800 sccache --start-server || true\n \n if [ \"$RUN_CHECK_WITH_PARALLEL_QUERIES\" != \"\" ]; then\n   $SRC/configure --enable-parallel-compiler\n-  CARGO_INCREMENTAL=0 python2.7 ../x.py check\n+  CARGO_INCREMENTAL=0 $PYTHON ../x.py check\n   rm -f config.toml\n   rm -rf build\n fi"}, {"sha": "ae85d5cab0122f7fdca22d44c76bf73b03313d6e", "filename": "src/ci/scripts/install-mingw.sh", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fscripts%2Finstall-mingw.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fscripts%2Finstall-mingw.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-mingw.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -50,8 +50,9 @@ if isWindows; then\n     esac\n \n     if [[ \"${CUSTOM_MINGW-0}\" -ne 1 ]]; then\n-        pacman -S --noconfirm --needed mingw-w64-$arch-toolchain \\\n-            mingw-w64-$arch-cmake mingw-w64-$arch-gcc mingw-w64-$arch-python2\n+        pacman -S --noconfirm --needed mingw-w64-$arch-toolchain mingw-w64-$arch-cmake \\\n+            mingw-w64-$arch-gcc \\\n+            mingw-w64-$arch-python # the python package is actually for python3\n         ciCommandAddPath \"$(ciCheckoutPath)/msys2/mingw${bits}/bin\"\n     else\n         mingw_dir=\"mingw${bits}\""}, {"sha": "3874a86e120b18381585ce1ba9fa8320fc1ce5a8", "filename": "src/ci/scripts/install-msys2-packages.sh", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fscripts%2Finstall-msys2-packages.sh", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fci%2Fscripts%2Finstall-msys2-packages.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-msys2-packages.sh?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -13,7 +13,7 @@ if isWindows; then\n     # one way or another. The msys interpreters seem to have weird path conversions\n     # baked in which break LLVM's build system one way or another, so let's use the\n     # native version which keeps everything as native as possible.\n-    python_home=\"C:/hostedtoolcache/windows/Python/2.7.17/x64\"\n-    cp \"${python_home}/python.exe\" \"${python_home}/python2.7.exe\"\n-    ciCommandAddPath \"C:\\\\hostedtoolcache\\\\windows\\\\Python\\\\2.7.17\\\\x64\"\n+    python_home=\"C:/hostedtoolcache/windows/Python/3.7.6/x64\"\n+    cp \"${python_home}/python.exe\" \"${python_home}/python3.exe\"\n+    ciCommandAddPath \"C:\\\\hostedtoolcache\\\\windows\\\\Python\\\\3.7.6\\\\x64\"\n fi"}, {"sha": "9bbcaf7c4cc49fc413c795706b8671007e8ce809", "filename": "src/etc/dec2flt_table.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fetc%2Fdec2flt_table.py", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fetc%2Fdec2flt_table.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fdec2flt_table.py?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -1,4 +1,4 @@\n-#!/usr/bin/env python2.7\n+#!/usr/bin/env python3\n \n \"\"\"\n Generate powers of ten using William Clinger's ``AlgorithmM`` for use in"}, {"sha": "fe6fd45f9a5f8f824f73b340bac489330b4ed172", "filename": "src/etc/test-float-parse/runtests.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fetc%2Ftest-float-parse%2Fruntests.py", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Fetc%2Ftest-float-parse%2Fruntests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftest-float-parse%2Fruntests.py?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -1,4 +1,4 @@\n-#!/usr/bin/env python2.7\n+#!/usr/bin/env python3\n \n \"\"\"\n Testing dec2flt"}, {"sha": "1e267fb9576ba1e923c656775b09958a1f9758f7", "filename": "src/test/run-make-fulldeps/sysroot-crates-are-unstable/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Ftest%2Frun-make-fulldeps%2Fsysroot-crates-are-unstable%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Ftest%2Frun-make-fulldeps%2Fsysroot-crates-are-unstable%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsysroot-crates-are-unstable%2FMakefile?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -1,2 +1,2 @@\n all:\n-\tpython2.7 test.py\n+\t'$(PYTHON)' test.py"}, {"sha": "307239fa4c906626ba0f1c69db758ac14771e0b2", "filename": "src/tools/publish_toolstate.py", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Ftools%2Fpublish_toolstate.py", "raw_url": "https://github.com/rust-lang/rust/raw/38eb369fa4d06e55869a8fae62796a7b0085a5bd/src%2Ftools%2Fpublish_toolstate.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fpublish_toolstate.py?ref=38eb369fa4d06e55869a8fae62796a7b0085a5bd", "patch": "@@ -57,6 +57,13 @@\n     'rustc-dev-guide': 'https://github.com/rust-lang/rustc-dev-guide',\n }\n \n+def load_json_from_response(resp):\n+    content = resp.read()\n+    if isinstance(content, bytes):\n+        content = content.decode('utf-8')\n+    else:\n+        print(\"Refusing to decode \" + str(type(content)) + \" to str\")\n+    return json.loads(content)\n \n def validate_maintainers(repo, github_token):\n     '''Ensure all maintainers are assignable on a GitHub repo'''\n@@ -71,7 +78,7 @@ def validate_maintainers(repo, github_token):\n             # Properly load nested teams.\n             'Accept': 'application/vnd.github.hellcat-preview+json',\n         }))\n-        assignable.extend(user['login'] for user in json.load(response))\n+        assignable.extend(user['login'] for user in load_json_from_response(response))\n         # Load the next page if available\n         url = None\n         link_header = response.headers.get('Link')\n@@ -176,7 +183,7 @@ def update_latest(\n ):\n     '''Updates `_data/latest.json` to match build result of the given commit.\n     '''\n-    with open('_data/latest.json', 'rb+') as f:\n+    with open('_data/latest.json', 'r+') as f:\n         latest = json.load(f, object_pairs_hook=collections.OrderedDict)\n \n         current_status = {"}]}