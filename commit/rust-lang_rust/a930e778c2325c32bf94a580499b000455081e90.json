{"sha": "a930e778c2325c32bf94a580499b000455081e90", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5MzBlNzc4YzIzMjVjMzJiZjk0YTU4MDQ5OWIwMDA0NTUwODFlOTA=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2018-10-01T20:03:07Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2018-10-02T08:02:31Z"}, "message": "Add dummy clippy crate for publishing", "tree": {"sha": "cf0fb6a0f7a0ae315275fd73aedf031484f08df3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf0fb6a0f7a0ae315275fd73aedf031484f08df3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a930e778c2325c32bf94a580499b000455081e90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a930e778c2325c32bf94a580499b000455081e90", "html_url": "https://github.com/rust-lang/rust/commit/a930e778c2325c32bf94a580499b000455081e90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a930e778c2325c32bf94a580499b000455081e90/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f9af5f69c81367e32deae49e5c200826bab0954", "url": "https://api.github.com/repos/rust-lang/rust/commits/5f9af5f69c81367e32deae49e5c200826bab0954", "html_url": "https://github.com/rust-lang/rust/commit/5f9af5f69c81367e32deae49e5c200826bab0954"}], "stats": {"total": 75, "additions": 75, "deletions": 0}, "files": [{"sha": "b9e3aa3bcdc595565f002dd22710ac91b66156d0", "filename": "clippy_dummy/Cargo.toml", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2FCargo.toml?ref=a930e778c2325c32bf94a580499b000455081e90", "patch": "@@ -0,0 +1,17 @@\n+[package]\n+name = \"clippy_dummy\" # rename to clippy before publishing\n+version = \"0.0.301\"\n+authors = [\"Manish Goregaokar <manishsmail@gmail.com>\"]\n+edition = \"2018\"\n+readme = \"crates-readme.md\"\n+description = \"A bunch of helpful lints to avoid common pitfalls in Rust.\"\n+build = 'build.rs'\n+\n+repository = \"https://github.com/rust-lang-nursery/rust-clippy\"\n+\n+license = \"MPL-2.0\"\n+keywords = [\"clippy\", \"lint\", \"plugin\"]\n+categories = [\"development-tools\", \"development-tools::cargo-plugins\"]\n+\n+[build-dependencies]\n+term = \"0.5.1\""}, {"sha": "535f11bd2ee4662ba8785e7f819303e6ad02334a", "filename": "clippy_dummy/PUBLISH.md", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2FPUBLISH.md", "raw_url": "https://github.com/rust-lang/rust/raw/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2FPUBLISH.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2FPUBLISH.md?ref=a930e778c2325c32bf94a580499b000455081e90", "patch": "@@ -0,0 +1,4 @@\n+This is a dummy crate to publish to crates.io. It primarily exists to ensure that folks trying to install clippy from crates.io get redirected to the `rustup` technique.\n+\n+Before publishing, be sure to rename `clippy_dummy` to `clippy` in `Cargo.toml`, it has a different name to avoid workspace issues.\n+ \n\\ No newline at end of file"}, {"sha": "97902feff86835cf7b0ade4468f9771d73e9ac3f", "filename": "clippy_dummy/build.rs", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fbuild.rs?ref=a930e778c2325c32bf94a580499b000455081e90", "patch": "@@ -0,0 +1,42 @@\n+extern crate term;\n+\n+fn main() {\n+    if let Err(_) = foo() {\n+        eprintln!(\"error: Clippy is no longer available via crates.io\\n\");\n+        eprintln!(\"help: please run `rustup component add clippy-preview` instead\");\n+    }\n+    std::process::exit(1);\n+}\n+\n+fn foo() -> Result<(), ()> {\n+    let mut t = term::stderr().ok_or(())?;\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    t.fg(term::color::RED).map_err(|_| ())?;\n+    write!(t, \"\\nerror: \").map_err(|_| ())?;\n+\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    writeln!(t, \"Clippy is no longer available via crates.io\\n\").map_err(|_| ())?;\n+\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    t.fg(term::color::GREEN).map_err(|_| ())?;\n+    write!(t, \"help: \").map_err(|_| ())?;\n+\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    write!(t, \"please run `\").map_err(|_| ())?;\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    write!(t, \"rustup component add clippy-preview\").map_err(|_| ())?;\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    writeln!(t, \"` instead\").map_err(|_| ())?;\n+\n+    t.reset().map_err(|_| ())?;\n+    Ok(())\n+}\n\\ No newline at end of file"}, {"sha": "0035073549c0570b4d55fcfb050797fa91c9ad29", "filename": "clippy_dummy/crates-readme.md", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fcrates-readme.md", "raw_url": "https://github.com/rust-lang/rust/raw/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fcrates-readme.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fcrates-readme.md?ref=a930e778c2325c32bf94a580499b000455081e90", "patch": "@@ -0,0 +1,9 @@\n+Installing clippy via crates.io is deprecated. Please use the following:\n+\n+```terminal\n+rustup component add clippy-preview\n+```\n+\n+on a Rust version 1.29 or later. You may need to run `rustup self update` if it complains about a missing clippy binary.\n+\n+See [the homepage](https://github.com/rust-lang-nursery/rust-clippy/#clippy) for more information\n\\ No newline at end of file"}, {"sha": "a118834f1fd47cb1b44ebac6fcdea1456e76b615", "filename": "clippy_dummy/src/main.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a930e778c2325c32bf94a580499b000455081e90/clippy_dummy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fsrc%2Fmain.rs?ref=a930e778c2325c32bf94a580499b000455081e90", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+    panic!(\"This shouldn't even compile\")\n+}"}]}