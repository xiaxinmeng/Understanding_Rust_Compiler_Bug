{"sha": "0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhNGE4NWU4YWU1ZGM2ODdjZWU1Zjk0MGE1NGNlODQxZGM5YWI3MTc=", "commit": {"author": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2018-04-06T22:12:51Z"}, "committer": {"name": "Inokentiy Babushkin", "email": "twk@twki.de", "date": "2018-04-26T20:13:10Z"}, "message": "Adjusted types and visibility in auto trait machinery.", "tree": {"sha": "83633f73c7d5ac691e66aa1c33187b8ab76c46c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83633f73c7d5ac691e66aa1c33187b8ab76c46c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "comment_count": 0, "verification": {"verified": false, "reason": "unverified_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEXezFNCHL3+3lgSPSfvyOxSJN6OwFAlriMtYACgkQfvyOxSJN\n6OzxSg//Xb1x+rFLZkKmakyJVLSaqGwK6BtF/Ym0whzOzSJ9tD78McEY3X2LnahT\nm7L/0aY6qp/8wH8/zbr3iJ7Bsr+/HMREx6BD2Xt3GuqisvsG0YnyXvvm9QfTwu13\nyFY4XwTbephuvFrWZsvk6d4NZB2QYRMBoXOqOTKiDTvzf0HHvA/ogwO7ezOj1LMn\nIiHA5IzPdn1bLobVSAI/CpxA+GJoMyAhdan50ZQJfs2wNJCRzHzlgMlJIKNnHssq\nD3N4w9Md8Aw39cAMt5xmZ0foLXCKCK4J1w+ebaP8dW18NXz+qWPoXvSCIgwysb/Y\nUTQJHmW50sop80cti4aehpF/OD4srKHxoIFL9n6YiKfmWVbmXj58hg7qZzYwz8OE\ncQuqJ6nEzvvOIn48IvNYN/nGywA8CGu9txZcCkGpwEhE9hcBLj6pJbA03FEeY0q6\nS1mVslyxgW7B3FycbRM5gkYpChnrUD7G/Na7QZok74OKAcUOOKsHPUfTf8DgTqCx\nb+PrOmliJWz4uNEucqftA19LSUloCgObi7JXMUKZBw75rWbnq+Mg/ikwHv5zyPyG\n9UIMh/olRqznB2iLrvMm8q1c3ule99Vu2CLWmqLNEsE16szaWdkTC8AY5QOLUS/+\nJrkmY6C6xnIzvtYnm2MOsdx0oRQycKQBIcrmwECp+itpsu1CxlI=\n=uksG\n-----END PGP SIGNATURE-----", "payload": "tree 83633f73c7d5ac691e66aa1c33187b8ab76c46c7\nparent 67c226aecece6f22d7a25a24cc2cb4654a29c0d1\nauthor Inokentiy Babushkin <twk@twki.de> 1523052771 +0200\ncommitter Inokentiy Babushkin <twk@twki.de> 1524773590 +0200\n\nAdjusted types and visibility in auto trait machinery.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "html_url": "https://github.com/rust-lang/rust/commit/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717/comments", "author": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibabushkin", "id": 10811417, "node_id": "MDQ6VXNlcjEwODExNDE3", "avatar_url": "https://avatars.githubusercontent.com/u/10811417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibabushkin", "html_url": "https://github.com/ibabushkin", "followers_url": "https://api.github.com/users/ibabushkin/followers", "following_url": "https://api.github.com/users/ibabushkin/following{/other_user}", "gists_url": "https://api.github.com/users/ibabushkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibabushkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibabushkin/subscriptions", "organizations_url": "https://api.github.com/users/ibabushkin/orgs", "repos_url": "https://api.github.com/users/ibabushkin/repos", "events_url": "https://api.github.com/users/ibabushkin/events{/privacy}", "received_events_url": "https://api.github.com/users/ibabushkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "67c226aecece6f22d7a25a24cc2cb4654a29c0d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/67c226aecece6f22d7a25a24cc2cb4654a29c0d1", "html_url": "https://github.com/rust-lang/rust/commit/67c226aecece6f22d7a25a24cc2cb4654a29c0d1"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "2ee22d494e1c33e3c659936d4a10f2da20c3b013", "filename": "src/librustc/traits/auto_trait.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fauto_trait.rs?ref=0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "patch": "@@ -57,18 +57,21 @@ pub struct AutoTraitInfo<'cx> {\n }\n \n pub struct AutoTraitFinder<'a, 'tcx: 'a> {\n-    pub tcx: &'a TyCtxt<'a, 'tcx, 'tcx>,\n+    tcx: &'a TyCtxt<'a, 'tcx, 'tcx>,\n }\n \n impl<'a, 'tcx> AutoTraitFinder<'a, 'tcx> {\n-    pub fn find_auto_trait_generics<A, F>(\n+    pub fn new(tcx: &'a TyCtxt<'a, 'tcx, 'tcx>) -> Self {\n+        AutoTraitFinder { tcx }\n+    }\n+\n+    pub fn find_auto_trait_generics<A>(\n         &self,\n         did: DefId,\n         trait_did: DefId,\n         generics: &ty::Generics,\n-        auto_trait_callback: F)\n+        auto_trait_callback: impl for<'i> Fn(&InferCtxt<'_, 'tcx, 'i>, AutoTraitInfo<'i>) -> A)\n         -> AutoTraitResult<A>\n-        where F: for<'b, 'cx, 'cx2> Fn(&InferCtxt<'b, 'cx, 'cx2>, AutoTraitInfo<'cx2>) -> A\n     {\n         let tcx = self.tcx;\n         let ty = self.tcx.type_of(did);"}, {"sha": "58ee42402d51cba9b56374451c6971e0e173ee6a", "filename": "src/librustdoc/clean/auto_trait.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a4a85e8ae5dc687cee5f940a54ce841dc9ab717/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs?ref=0a4a85e8ae5dc687cee5f940a54ce841dc9ab717", "patch": "@@ -21,7 +21,7 @@ pub struct AutoTraitFinder<'a, 'tcx: 'a, 'rcx: 'a> {\n \n impl<'a, 'tcx, 'rcx> AutoTraitFinder<'a, 'tcx, 'rcx> {\n     pub fn new(cx: &'a core::DocContext<'a, 'tcx, 'rcx>) -> Self {\n-        let f = auto::AutoTraitFinder { tcx: &cx.tcx };\n+        let f = auto::AutoTraitFinder::new(&cx.tcx);\n \n         AutoTraitFinder { cx, f }\n     }"}]}