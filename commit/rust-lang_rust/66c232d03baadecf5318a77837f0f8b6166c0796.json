{"sha": "66c232d03baadecf5318a77837f0f8b6166c0796", "node_id": "C_kwDOAAsO6NoAKDY2YzIzMmQwM2JhYWRlY2Y1MzE4YTc3ODM3ZjBmOGI2MTY2YzA3OTY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-16T05:10:17Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-04-16T05:10:17Z"}, "message": "Auto merge of #12006 - lnicola:toggle-inlay-hints, r=lnicola\n\nfix: Remove old inlay hints settings\n\nCloses #11998", "tree": {"sha": "1deb3b365f4cd594e62ab2421bf6c3eb24d960f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1deb3b365f4cd594e62ab2421bf6c3eb24d960f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/66c232d03baadecf5318a77837f0f8b6166c0796", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/66c232d03baadecf5318a77837f0f8b6166c0796", "html_url": "https://github.com/rust-lang/rust/commit/66c232d03baadecf5318a77837f0f8b6166c0796", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/66c232d03baadecf5318a77837f0f8b6166c0796/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c22537b3b7012f76952546ef90b18509a056690", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c22537b3b7012f76952546ef90b18509a056690", "html_url": "https://github.com/rust-lang/rust/commit/1c22537b3b7012f76952546ef90b18509a056690"}, {"sha": "f77adb3a232eb612771436565e21e62ab2cd86e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/f77adb3a232eb612771436565e21e62ab2cd86e1", "html_url": "https://github.com/rust-lang/rust/commit/f77adb3a232eb612771436565e21e62ab2cd86e1"}], "stats": {"total": 29, "additions": 8, "deletions": 21}, "files": [{"sha": "27f10da103260b92522d1b26de49498592208fdf", "filename": "docs/user/manual.adoc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/66c232d03baadecf5318a77837f0f8b6166c0796/docs%2Fuser%2Fmanual.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/66c232d03baadecf5318a77837f0f8b6166c0796/docs%2Fuser%2Fmanual.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fmanual.adoc?ref=66c232d03baadecf5318a77837f0f8b6166c0796", "patch": "@@ -722,7 +722,7 @@ Just add this to your `settings.json`:\n {\n   \"editor.inlayHints.fontFamily\": \"Courier New\",\n   \"editor.inlayHints.fontSize\": 11,\n-  \n+\n   \"workbench.colorCustomizations\": {\n     // Name of the theme you are currently using\n     \"[Default Dark+]\": {\n@@ -797,8 +797,8 @@ For example:\n [source,json]\n ----\n {\n-  \"key\": \"ctrl+i\",\n-  \"command\": \"rust-analyzer.toggleInlayHints\",\n+  \"key\": \"ctrl+alt+d\",\n+  \"command\": \"rust-analyzer.openDocs\",\n   \"when\": \"inRustProject\"\n }\n ----"}, {"sha": "18f5b3aa101dd380de693569f0660ec7140573e7", "filename": "editors/code/src/commands.ts", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/66c232d03baadecf5318a77837f0f8b6166c0796/editors%2Fcode%2Fsrc%2Fcommands.ts", "raw_url": "https://github.com/rust-lang/rust/raw/66c232d03baadecf5318a77837f0f8b6166c0796/editors%2Fcode%2Fsrc%2Fcommands.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands.ts?ref=66c232d03baadecf5318a77837f0f8b6166c0796", "patch": "@@ -298,12 +298,12 @@ export function serverVersion(ctx: Ctx): Cmd {\n     };\n }\n \n-export function toggleInlayHints(ctx: Ctx): Cmd {\n+export function toggleInlayHints(_ctx: Ctx): Cmd {\n     return async () => {\n-        await vscode\n-            .workspace\n-            .getConfiguration(`${ctx.config.rootSection}.inlayHints`)\n-            .update('enable', !ctx.config.inlayHints.enable, vscode.ConfigurationTarget.Global);\n+        const scope = vscode.ConfigurationTarget.Global;\n+        const config = vscode.workspace.getConfiguration(\"editor.inlayHints\");\n+        const value = !config.get(\"enabled\");\n+        await config.update('enabled', value, scope);\n     };\n }\n "}, {"sha": "183521c10c5fc7b27a58705fd99355dd9201fed9", "filename": "editors/code/src/config.ts", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/66c232d03baadecf5318a77837f0f8b6166c0796/editors%2Fcode%2Fsrc%2Fconfig.ts", "raw_url": "https://github.com/rust-lang/rust/raw/66c232d03baadecf5318a77837f0f8b6166c0796/editors%2Fcode%2Fsrc%2Fconfig.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fconfig.ts?ref=66c232d03baadecf5318a77837f0f8b6166c0796", "patch": "@@ -97,19 +97,6 @@ export class Config {\n     get serverExtraEnv() { return this.get<Env | null>(\"server.extraEnv\") ?? {}; }\n     get traceExtension() { return this.get<boolean>(\"trace.extension\"); }\n \n-    get inlayHints() {\n-        return {\n-            enable: this.get<boolean>(\"inlayHints.enable\"),\n-            typeHints: this.get<boolean>(\"inlayHints.typeHints\"),\n-            parameterHints: this.get<boolean>(\"inlayHints.parameterHints\"),\n-            chainingHints: this.get<boolean>(\"inlayHints.chainingHints\"),\n-            closureReturnTypeHints: this.get<boolean>(\"inlayHints.closureReturnTypeHints\"),\n-            hideNamedConstructorHints: this.get<boolean>(\"inlayHints.hideNamedConstructorHints\"),\n-            smallerHints: this.get<boolean>(\"inlayHints.smallerHints\"),\n-            maxLength: this.get<null | number>(\"inlayHints.maxLength\"),\n-        };\n-    }\n-\n     get cargoRunner() {\n         return this.get<string | undefined>(\"cargoRunner\");\n     }"}]}