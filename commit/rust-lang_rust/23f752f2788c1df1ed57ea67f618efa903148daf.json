{"sha": "23f752f2788c1df1ed57ea67f618efa903148daf", "node_id": "C_kwDOAAsO6NoAKDIzZjc1MmYyNzg4YzFkZjFlZDU3ZWE2N2Y2MThlZmE5MDMxNDhkYWY", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-12-03T13:11:21Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-12-03T13:11:21Z"}, "message": "Revert \"Auto merge of #91354 - fee1-dead:const_env, r=spastorino\"\n\nThis reverts commit 18bb8c61a975fff6424cda831ace5b0404277145, reversing\nchanges made to d9baa361902b172be716f96619b909f340802dea.", "tree": {"sha": "00070738301c0a3cf62af9962ee7c146c322dc92", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00070738301c0a3cf62af9962ee7c146c322dc92"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/23f752f2788c1df1ed57ea67f618efa903148daf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/23f752f2788c1df1ed57ea67f618efa903148daf", "html_url": "https://github.com/rust-lang/rust/commit/23f752f2788c1df1ed57ea67f618efa903148daf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/23f752f2788c1df1ed57ea67f618efa903148daf/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd03c0ff3e203aad854004b6c47adcf8c001129d", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd03c0ff3e203aad854004b6c47adcf8c001129d", "html_url": "https://github.com/rust-lang/rust/commit/dd03c0ff3e203aad854004b6c47adcf8c001129d"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "6b2ac985555dc59fc7014b3c0afeb4267ffd9420", "filename": "clippy_lints/src/future_not_send.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/23f752f2788c1df1ed57ea67f618efa903148daf/clippy_lints%2Fsrc%2Ffuture_not_send.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23f752f2788c1df1ed57ea67f618efa903148daf/clippy_lints%2Fsrc%2Ffuture_not_send.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffuture_not_send.rs?ref=23f752f2788c1df1ed57ea67f618efa903148daf", "patch": "@@ -67,8 +67,8 @@ impl<'tcx> LateLintPass<'tcx> for FutureNotSend {\n             let mut is_future = false;\n             for &(p, _span) in preds {\n                 let p = p.subst(cx.tcx, subst);\n-                if let Some(trait_pred) = p.to_opt_poly_trait_pred() {\n-                    if Some(trait_pred.skip_binder().trait_ref.def_id) == cx.tcx.lang_items().future_trait() {\n+                if let Some(trait_ref) = p.to_opt_poly_trait_ref() {\n+                    if Some(trait_ref.value.def_id()) == cx.tcx.lang_items().future_trait() {\n                         is_future = true;\n                         break;\n                     }"}]}