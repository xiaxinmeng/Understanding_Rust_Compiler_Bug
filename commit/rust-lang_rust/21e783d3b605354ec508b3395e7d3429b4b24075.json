{"sha": "21e783d3b605354ec508b3395e7d3429b4b24075", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxZTc4M2QzYjYwNTM1NGVjNTA4YjMzOTVlN2QzNDI5YjRiMjQwNzU=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-05-12T11:41:03Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-05-17T18:47:21Z"}, "message": "Add run-pass tests for SpanlessEq/SpanlessHash ICE", "tree": {"sha": "9c0ab8509c833e0b285553238b9b2c476be8a220", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c0ab8509c833e0b285553238b9b2c476be8a220"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/21e783d3b605354ec508b3395e7d3429b4b24075", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJa/c45AAoJELb6Bqbg4mZb/rMP/1h2H0/EBuBpKc8FWHkm20Pn\nYcuAzNL1QY76YvniWuJpUY0ZTu5Fd/ioQYAqRLGznXnDT4T7K9nteg6JeP2aQKNB\n88buQBeMtrsxZRjiDg9VKLEyUNGEdWZHJeBgo0fCYsSd8BZJMvuUk5Y7le3yReC7\ni8PT61y8V98a3aMKX3WyRm2jCp81l9Gsr77Ur5rPwlW2nuQLntmdp2ReeoKQkkR5\n8hZJSLXeFQ8tjsvAM9ovsaHUdYrUJ0ARY83TPPtsCNf6yayG3bGs+0rWOGTJZlju\nXkrw9n12LbnbnN0Nf9F/VZrZKjAMEpxS2wYWj0lB/RHTQVP42mQchc/TrcGkFg1O\nhl9U4mzixi9/U5T1FKMzNAyyp0iC5GSRLyxreJP+TAzMekfzQSXRAaR7NshUgH5H\nrwsU7/OWnXJkPXK0WVv2VcCo/UvRmAfI3zSgnb+aJP4wl0j5ky+t3Bp5alx+QJA1\nMPamuWve01G1oHGGzIodB7Cy3ztKr+BZE5cbg94NcYSZGzaTOVuSMZ3JpsHkjE7z\nIxxoArLgpEUhB41s7Mw2eL6+Pl3c9SPgF6UR0Td3cSTk121v469NBPCZv3Uh8q70\nOsuhhxq9mVu46vCY0KjgDBhoXISGDfQ55D6mu62HH78PcS8x48c6NAFm+waqIgEJ\nOHd5A4qfFcMZx5kkBpKN\n=0pKI\n-----END PGP SIGNATURE-----", "payload": "tree 9c0ab8509c833e0b285553238b9b2c476be8a220\nparent f19eab94fb4a9a2e10a994d925269aef745cabca\nauthor Philipp Hansch <dev@phansch.net> 1526125263 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1526582841 +0200\n\nAdd run-pass tests for SpanlessEq/SpanlessHash ICE\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/21e783d3b605354ec508b3395e7d3429b4b24075", "html_url": "https://github.com/rust-lang/rust/commit/21e783d3b605354ec508b3395e7d3429b4b24075", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/21e783d3b605354ec508b3395e7d3429b4b24075/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f19eab94fb4a9a2e10a994d925269aef745cabca", "url": "https://api.github.com/repos/rust-lang/rust/commits/f19eab94fb4a9a2e10a994d925269aef745cabca", "html_url": "https://github.com/rust-lang/rust/commit/f19eab94fb4a9a2e10a994d925269aef745cabca"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "fcd3e7cf530c1bf850806e8726ccdc3dc6cb6fa9", "filename": "tests/run-pass/ice-1782.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-1782.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-1782.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-1782.rs?ref=21e783d3b605354ec508b3395e7d3429b4b24075", "patch": "@@ -0,0 +1,17 @@\n+#![allow(dead_code, unused_variables)]\n+\n+/// Should not trigger an ICE in `SpanlessEq` / `consts::constant`\n+///\n+/// Issue: https://github.com/rust-lang-nursery/rust-clippy/issues/1782\n+\n+use std::{mem, ptr};\n+\n+fn spanless_eq_ice() {\n+    let txt = \"something\";\n+    match txt {\n+        \"something\" => unsafe { ptr::write(ptr::null_mut() as *mut u32, mem::transmute::<[u8; 4], _>([0, 0, 0, 255])) },\n+        _ => unsafe { ptr::write(ptr::null_mut() as *mut u32, mem::transmute::<[u8; 4], _>([13, 246, 24, 255])) },\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "d012d548f20bec54e44b3efc8cf549d9bbbde85b", "filename": "tests/run-pass/ice-2499.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-2499.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-2499.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-2499.rs?ref=21e783d3b605354ec508b3395e7d3429b4b24075", "patch": "@@ -0,0 +1,24 @@\n+#![allow(dead_code)]\n+\n+/// Should not trigger an ICE in `SpanlessHash` / `consts::constant`\n+///\n+/// Issue: https://github.com/rust-lang-nursery/rust-clippy/issues/2499\n+\n+fn f(s: &[u8]) -> bool {\n+    let t = s[0] as char;\n+\n+    match t {\n+        'E' | 'W' => {}\n+        'T' => if &s[0..(0 + 4)] != &['0' as u8; 4] {\n+            return false;\n+        } else {\n+            return true;\n+        },\n+        _ => {\n+            return false;\n+        }\n+    }\n+    true\n+}\n+\n+fn main() {}"}, {"sha": "7cd30b6d946ac29550437503e7854a55f99547f5", "filename": "tests/run-pass/ice-2594.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-2594.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21e783d3b605354ec508b3395e7d3429b4b24075/tests%2Frun-pass%2Fice-2594.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fice-2594.rs?ref=21e783d3b605354ec508b3395e7d3429b4b24075", "patch": "@@ -0,0 +1,20 @@\n+#![allow(dead_code, unused_variables)]\n+\n+/// Should not trigger an ICE in `SpanlessHash` / `consts::constant`\n+///\n+/// Issue: https://github.com/rust-lang-nursery/rust-clippy/issues/2594\n+\n+fn spanless_hash_ice() {\n+    let txt = \"something\";\n+    let empty_header: [u8; 1] = [1; 1];\n+\n+    match txt {\n+        \"something\" => {\n+            let mut headers = [empty_header; 1];\n+        }\n+        \"\" => (),\n+        _ => (),\n+    }\n+}\n+\n+fn main() {}"}]}