{"sha": "8841a426e599c8968d9b30b57431333d0b68c592", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4NDFhNDI2ZTU5OWM4OTY4ZDliMzBiNTc0MzEzMzNkMGI2OGM1OTI=", "commit": {"author": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-07-16T03:54:00Z"}, "committer": {"name": "Deadbeef", "email": "ent3rm4n@gmail.com", "date": "2021-07-16T03:54:00Z"}, "message": "Mark `const_trait_impl` as active", "tree": {"sha": "20e27c196bd48909ae30275220e8ea5f783ab291", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/20e27c196bd48909ae30275220e8ea5f783ab291"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8841a426e599c8968d9b30b57431333d0b68c592", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEjbeLZzPb62/vY3smZSV3NIU3bZIFAmDxAt0ACgkQZSV3NIU3\nbZKT2Q/+OQXuhqZDz0yIswTO1rVjW85TuOTAuJ4K1tMw1BIQ/s2f18F4FXazu7qZ\njc+ZwwU/oc8q/acmrZ3/hSe1n2k9142FXer16NXIEVrLGRGKtb1u97mR+MumrQFh\nK8prZYZbyxYbaZSjonw2abIeSOcJQS1UF+6d0iic0ejn6hyusdJK+CMyl9yjbE3T\nan4md3QSfAXRaxLT3/xnMllbPjP5zdqakVoDd0YcIoMy0pom0llUGnzj61heD9hO\nqvIhfqxgqn/hd66H1QxJ2b5qWH4SUDyeG93G+/DSJejhm1DrEqIZBxigbi8WVm0U\n+9xoBvLoAUysaSEaMDYX2b0eKXIHoBdjhwHF9Onovn2g2DmfOlFPP1y0OexdT843\nEAgMkQ0wm9iDpZWiWiyKgLx5PqknEmxrvgbUE0w0XgVSPKzlDFIDwEt0744leoPV\nM8wImXIryd5K6lWCVhwRG+nOxhfR+p1CZhsrXmDs+EYN8JEqea2w7WCrWaZ+uTgB\nGFTgVmNwzTKLMIHrWX/+vsfd59usE4W54gW0+9K8eiIEwREnblRK+2ROl+iNSUJz\nMMY4wqjSmbStztkJZgLI/vDVKeXz8IyOmP+tq+POXsmC18JE9DnZQT4qVkNZFiIW\nDI9JCKYrFNx5NtDvvDp2V4HpP/xgqE9z8QkQaLXxGk70EDx+hMs=\n=1T00\n-----END PGP SIGNATURE-----", "payload": "tree 20e27c196bd48909ae30275220e8ea5f783ab291\nparent b1f8e27b74c541d3d555149c8efa4bfe9385cd56\nauthor Deadbeef <ent3rm4n@gmail.com> 1626407640 +0800\ncommitter Deadbeef <ent3rm4n@gmail.com> 1626407640 +0800\n\nMark `const_trait_impl` as active\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8841a426e599c8968d9b30b57431333d0b68c592", "html_url": "https://github.com/rust-lang/rust/commit/8841a426e599c8968d9b30b57431333d0b68c592", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8841a426e599c8968d9b30b57431333d0b68c592/comments", "author": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fee1-dead", "id": 43851243, "node_id": "MDQ6VXNlcjQzODUxMjQz", "avatar_url": "https://avatars.githubusercontent.com/u/43851243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fee1-dead", "html_url": "https://github.com/fee1-dead", "followers_url": "https://api.github.com/users/fee1-dead/followers", "following_url": "https://api.github.com/users/fee1-dead/following{/other_user}", "gists_url": "https://api.github.com/users/fee1-dead/gists{/gist_id}", "starred_url": "https://api.github.com/users/fee1-dead/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fee1-dead/subscriptions", "organizations_url": "https://api.github.com/users/fee1-dead/orgs", "repos_url": "https://api.github.com/users/fee1-dead/repos", "events_url": "https://api.github.com/users/fee1-dead/events{/privacy}", "received_events_url": "https://api.github.com/users/fee1-dead/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b1f8e27b74c541d3d555149c8efa4bfe9385cd56", "url": "https://api.github.com/repos/rust-lang/rust/commits/b1f8e27b74c541d3d555149c8efa4bfe9385cd56", "html_url": "https://github.com/rust-lang/rust/commit/b1f8e27b74c541d3d555149c8efa4bfe9385cd56"}], "stats": {"total": 71, "additions": 24, "deletions": 47}, "files": [{"sha": "fdb15f6849bc0d3fddbc7e4331a8b6b0de5b5c94", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -534,7 +534,7 @@ declare_features! (\n     (active, bindings_after_at, \"1.41.0\", Some(65490), None),\n \n     /// Allows `impl const Trait for T` syntax.\n-    (incomplete, const_trait_impl, \"1.42.0\", Some(67792), None),\n+    (active, const_trait_impl, \"1.42.0\", Some(67792), None),\n \n     /// Allows `T: ?const Trait` syntax in bounds.\n     (incomplete, const_trait_bound_opt_out, \"1.42.0\", Some(67794), None),"}, {"sha": "5d38e032ac408518ffae53627349156d7856145d", "filename": "src/test/ui/consts/const-float-classify.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Fconsts%2Fconst-float-classify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Fconsts%2Fconst-float-classify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-float-classify.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -5,7 +5,6 @@\n #![feature(const_float_bits_conv)]\n #![feature(const_float_classify)]\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n // Don't promote\n const fn nop<T>(x: T) -> T { x }"}, {"sha": "e3fda57548ea32c3d753a0d38adf2fd02cc55fa8", "filename": "src/test/ui/consts/rustc-impl-const-stability.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Fconsts%2Frustc-impl-const-stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Fconsts%2Frustc-impl-const-stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Frustc-impl-const-stability.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,7 +1,6 @@\n // build-pass\n \n #![crate_type = \"lib\"]\n-#![allow(incomplete_features)]\n #![feature(staged_api)]\n #![feature(const_trait_impl)]\n #![stable(feature = \"foo\", since = \"1.0.0\")]"}, {"sha": "4a1bd5da98b8a403876e778d041c7589f7f05a8d", "filename": "src/test/ui/rfc-2632-const-trait-impl/assoc-type.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fassoc-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fassoc-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fassoc-type.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -3,7 +3,6 @@\n // FIXME: This test should fail since, within a const impl of `Foo`, the bound on `Foo::Bar` should\n // require a const impl of `Add` for the associated type.\n \n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n \n struct NonConstAdd(i32);"}, {"sha": "be73ec09ceb3ba8ea50f807aa4215fdd4a0895f6", "filename": "src/test/ui/rfc-2632-const-trait-impl/attr-misuse.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n #[default_method_body_is_const] //~ ERROR attribute should be applied\n trait A {"}, {"sha": "fcb7e15b205e94535b1499b3d91dc25cccfe1857", "filename": "src/test/ui/rfc-2632-const-trait-impl/attr-misuse.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fattr-misuse.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: attribute should be applied to a trait method with body\n-  --> $DIR/attr-misuse.rs:4:1\n+  --> $DIR/attr-misuse.rs:3:1\n    |\n LL |   #[default_method_body_is_const]\n    |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -13,15 +13,15 @@ LL | | }\n    | |_- not a trait method or missing a body\n \n error: attribute should be applied to a trait method with body\n-  --> $DIR/attr-misuse.rs:13:1\n+  --> $DIR/attr-misuse.rs:12:1\n    |\n LL | #[default_method_body_is_const]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n LL | fn main() {}\n    | ------------ not a trait method or missing a body\n \n error: attribute should be applied to a trait method with body\n-  --> $DIR/attr-misuse.rs:6:5\n+  --> $DIR/attr-misuse.rs:5:5\n    |\n LL |     #[default_method_body_is_const]\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "d8fd7ef3c1f4450ae6c68d6dff6a0ea10997e50f", "filename": "src/test/ui/rfc-2632-const-trait-impl/auxiliary/cross-crate.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fcross-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fcross-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fcross-crate.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n pub trait MyTrait {\n     fn func(self);"}, {"sha": "80e61ab0a9e8bb0ef13dc0c6e32a5407ae78bf0e", "filename": "src/test/ui/rfc-2632-const-trait-impl/auxiliary/staged-api.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fstaged-api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fstaged-api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fauxiliary%2Fstaged-api.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n #![feature(staged_api)]\n #![stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "33e839fd1203d51b5e70e6d9aa0e24e79df29a91", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-const-trait-method-fail.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,4 +1,3 @@\n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n \n pub trait Plus {"}, {"sha": "5a73c4debb481d0bfe1c47bb657c2490c9ed5692", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-const-trait-method-fail.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-fail.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/call-const-trait-method-fail.rs:25:5\n+  --> $DIR/call-const-trait-method-fail.rs:24:5\n    |\n LL |     a.plus(b)\n    |     ^^^^^^^^^"}, {"sha": "cf38bc3c9645321cafbcf9f9e3e279e07e01a3a7", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-const-trait-method-pass.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-const-trait-method-pass.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n \n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n \n struct Int(i32);"}, {"sha": "f3391aa63468cf91580aec8019bdd5bcb5e7a73e", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-generic-method-chain.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-chain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-chain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-chain.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -4,7 +4,6 @@\n \n #![feature(const_trait_impl)]\n #![feature(const_fn_trait_bound)]\n-#![allow(incomplete_features)]\n \n struct S;\n "}, {"sha": "087f8fbdcd1ea85eaca4ce49b197b9d250159742", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-generic-method-nonconst.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-nonconst.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-nonconst.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-nonconst.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -2,7 +2,6 @@\n // ignore-test\n \n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n struct S;\n "}, {"sha": "aee88d6053eee2cee24404f497867fe66abe009e", "filename": "src/test/ui/rfc-2632-const-trait-impl/call-generic-method-pass.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcall-generic-method-pass.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -4,7 +4,6 @@\n \n #![feature(const_trait_impl)]\n #![feature(const_fn_trait_bound)]\n-#![allow(incomplete_features)]\n \n struct S;\n "}, {"sha": "4b2f049b99d9e05063772574e45b0b1f2e34a63c", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-and-non-const-impl.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,4 +1,3 @@\n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n \n pub struct Int(i32);"}, {"sha": "a0960a21d46f87e1c45420e6911e85ba61bce4df", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-and-non-const-impl.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-and-non-const-impl.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0119]: conflicting implementations of trait `std::ops::Add` for type `i32`\n-  --> $DIR/const-and-non-const-impl.rs:6:1\n+  --> $DIR/const-and-non-const-impl.rs:5:1\n    |\n LL | impl const std::ops::Add for i32 {\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -8,7 +8,7 @@ LL | impl const std::ops::Add for i32 {\n            - impl Add for i32;\n \n error[E0119]: conflicting implementations of trait `std::ops::Add` for type `Int`\n-  --> $DIR/const-and-non-const-impl.rs:24:1\n+  --> $DIR/const-and-non-const-impl.rs:23:1\n    |\n LL | impl std::ops::Add for Int {\n    | -------------------------- first implementation here\n@@ -17,7 +17,7 @@ LL | impl const std::ops::Add for Int {\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ conflicting implementation for `Int`\n \n error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n-  --> $DIR/const-and-non-const-impl.rs:6:1\n+  --> $DIR/const-and-non-const-impl.rs:5:1\n    |\n LL | impl const std::ops::Add for i32 {\n    | ^^^^^^^^^^^-------------^^^^^---"}, {"sha": "3a7074163523b0dab00be8a7c79ec3ebf47031d3", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-check-fns-in-const-impl.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,4 +1,3 @@\n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n \n struct S;"}, {"sha": "aaec67161a6afe241b7eaee1a55cc7ec3b7f6f7e", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-check-fns-in-const-impl.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-check-fns-in-const-impl.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/const-check-fns-in-const-impl.rs:12:16\n+  --> $DIR/const-check-fns-in-const-impl.rs:11:16\n    |\n LL |     fn foo() { non_const() }\n    |                ^^^^^^^^^^^"}, {"sha": "7a0db9c98ea61d53d8b7135b3429b114218515a2", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-default-method-bodies.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,6 +1,5 @@\n #![feature(const_trait_impl)]\n #![feature(const_fn_trait_bound)] // FIXME is this needed?\n-#![allow(incomplete_features)]\n \n trait ConstDefaultFn: Sized {\n     fn b(self);"}, {"sha": "63e4095af29437295bb6bc8a63b28326bba2a94b", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-default-method-bodies.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-default-method-bodies.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/const-default-method-bodies.rs:26:5\n+  --> $DIR/const-default-method-bodies.rs:25:5\n    |\n LL |     NonConstImpl.a();\n    |     ^^^^^^^^^^^^^^^^"}, {"sha": "bed4e9fd1e610acf74fe18e2b6aefe0626104ecb", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-impl-norecover.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n struct Foo;\n "}, {"sha": "603f6b7d2835e88b373b31d2a6b2d8b4710d6bed", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-impl-norecover.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-norecover.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: expected identifier, found keyword `impl`\n-  --> $DIR/const-impl-norecover.rs:6:7\n+  --> $DIR/const-impl-norecover.rs:5:7\n    |\n LL | const impl Foo {\n    |       ^^^^ expected identifier, found keyword"}, {"sha": "470c653dd47019b5b1a978c766e37c5303d8f540", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-impl-recovery.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n trait Foo {}\n "}, {"sha": "f815389ff01c3cacfbd480fab870243544426b9a", "filename": "src/test/ui/rfc-2632-const-trait-impl/const-impl-recovery.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fconst-impl-recovery.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: expected identifier, found keyword `impl`\n-  --> $DIR/const-impl-recovery.rs:6:7\n+  --> $DIR/const-impl-recovery.rs:5:7\n    |\n LL | const impl Foo for i32 {}\n    |       ^^^^ expected identifier, found keyword\n@@ -10,7 +10,7 @@ LL | impl const Foo for i32 {}\n    |--    ^^^^^\n \n error: expected identifier, found keyword `impl`\n-  --> $DIR/const-impl-recovery.rs:10:7\n+  --> $DIR/const-impl-recovery.rs:9:7\n    |\n LL | const impl<T: Foo> Bar for T {}\n    |       ^^^^ expected identifier, found keyword"}, {"sha": "3f553a8ee70793d26d3a4f48d1c51fdb1a6974fb", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.gated.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.gated.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate.rs:16:5\n+  --> $DIR/cross-crate.rs:15:5\n    |\n LL |     NonConst.func();\n    |     ^^^^^^^^^^^^^^^"}, {"sha": "4bd3359947d948729c35569d4be29bfc912ad8db", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,6 +1,5 @@\n // revisions: stock gated\n #![cfg_attr(gated, feature(const_trait_impl))]\n-#![allow(incomplete_features)]\n \n // aux-build: cross-crate.rs\n extern crate cross_crate;"}, {"sha": "9908f47a7b28858b0c717963e2cb936f74e35380", "filename": "src/test/ui/rfc-2632-const-trait-impl/cross-crate.stock.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fcross-crate.stock.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,11 +1,11 @@\n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate.rs:16:5\n+  --> $DIR/cross-crate.rs:15:5\n    |\n LL |     NonConst.func();\n    |     ^^^^^^^^^^^^^^^\n \n error[E0015]: calls in constant functions are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/cross-crate.rs:18:5\n+  --> $DIR/cross-crate.rs:17:5\n    |\n LL |     Const.func();\n    |     ^^^^^^^^^^^^"}, {"sha": "af4d3909e40515d083c322f20741e7b8f3256aff", "filename": "src/test/ui/rfc-2632-const-trait-impl/feature-gate.gated.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.gated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.gated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.gated.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: fatal error triggered by #[rustc_error]\n-  --> $DIR/feature-gate.rs:14:1\n+  --> $DIR/feature-gate.rs:13:1\n    |\n LL | fn main() {}\n    | ^^^^^^^^^"}, {"sha": "7bac72e1bb6fb608c2854ac5a3f89f7d391efed4", "filename": "src/test/ui/rfc-2632-const-trait-impl/feature-gate.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -2,7 +2,6 @@\n // gate-test-const_trait_impl\n \n #![cfg_attr(gated, feature(const_trait_impl))]\n-#![allow(incomplete_features)]\n #![feature(rustc_attrs)]\n \n struct S;"}, {"sha": "91a8bb578a829ecdd7f0ec9f8312a745fc5b9acf", "filename": "src/test/ui/rfc-2632-const-trait-impl/feature-gate.stock.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.stock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.stock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Ffeature-gate.stock.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: const trait impls are experimental\n-  --> $DIR/feature-gate.rs:10:6\n+  --> $DIR/feature-gate.rs:9:6\n    |\n LL | impl const T for S {}\n    |      ^^^^^"}, {"sha": "91c3d2d5920bc6675b625f86ace4209f335d169a", "filename": "src/test/ui/rfc-2632-const-trait-impl/generic-bound.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fgeneric-bound.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fgeneric-bound.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fgeneric-bound.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,6 +1,5 @@\n // run-pass\n \n-#![allow(incomplete_features)]\n #![feature(const_trait_impl)]\n #![feature(const_fn_trait_bound)]\n "}, {"sha": "80a4442de2cba7332df2d0d4ce4787f02d9db52f", "filename": "src/test/ui/rfc-2632-const-trait-impl/hir-const-check.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,7 +1,6 @@\n // Regression test for #69615.\n \n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n pub trait MyTrait {\n     fn method(&self) -> Option<()>;"}, {"sha": "3ec329cba1eb2a027bbd07794078ae136b6e5079", "filename": "src/test/ui/rfc-2632-const-trait-impl/hir-const-check.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fhir-const-check.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error[E0744]: `?` is not allowed in a `const fn`\n-  --> $DIR/hir-const-check.rs:12:9\n+  --> $DIR/hir-const-check.rs:11:9\n    |\n LL |         Some(())?;\n    |         ^^^^^^^^^"}, {"sha": "59de9e95719449df6623b7ce10446fdf58a3fe2e", "filename": "src/test/ui/rfc-2632-const-trait-impl/impl-with-default-fn.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,4 @@\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n trait Tr {\n     fn req(&self);"}, {"sha": "5301e0ad12ef1329c8360f8417bf788071117387", "filename": "src/test/ui/rfc-2632-const-trait-impl/impl-with-default-fn.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fimpl-with-default-fn.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: const trait implementations may not use non-const default functions\n-  --> $DIR/impl-with-default-fn.rs:18:1\n+  --> $DIR/impl-with-default-fn.rs:17:1\n    |\n LL | / impl const Tr for S {\n LL | |     fn req(&self) {}\n@@ -9,7 +9,7 @@ LL | | }\n    = note: `prov` not implemented\n \n error: const trait implementations may not use non-const default functions\n-  --> $DIR/impl-with-default-fn.rs:33:1\n+  --> $DIR/impl-with-default-fn.rs:32:1\n    |\n LL | / impl const Tr for u32 {\n LL | |     fn req(&self) {}\n@@ -20,7 +20,7 @@ LL | | }\n    = note: `prov` not implemented\n \n error[E0046]: not all trait items implemented, missing: `req`\n-  --> $DIR/impl-with-default-fn.rs:27:1\n+  --> $DIR/impl-with-default-fn.rs:26:1\n    |\n LL |     fn req(&self);\n    |     -------------- `req` from trait"}, {"sha": "6b54a9eab5205bb904bfb9474b30d7f44f773962", "filename": "src/test/ui/rfc-2632-const-trait-impl/stability.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,4 +1,3 @@\n-#![allow(incomplete_features)]\n #![feature(allow_internal_unstable)]\n #![feature(const_add)]\n #![feature(const_trait_impl)]"}, {"sha": "86b685959a6cbcc77f0239a165cbed1349f82ee8", "filename": "src/test/ui/rfc-2632-const-trait-impl/stability.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fstability.stderr?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -1,5 +1,5 @@\n error: trait methods cannot be stable const fn\n-  --> $DIR/stability.rs:14:5\n+  --> $DIR/stability.rs:13:5\n    |\n LL | /     fn sub(self, rhs: Self) -> Self {\n LL | |\n@@ -8,7 +8,7 @@ LL | |     }\n    | |_____^\n \n error: `<Int as Add>::add` is not yet stable as a const fn\n-  --> $DIR/stability.rs:32:5\n+  --> $DIR/stability.rs:31:5\n    |\n LL |     Int(1i32) + Int(2i32)\n    |     ^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "82a1275bffaedf89ee825a02233a49d1985306f9", "filename": "src/test/ui/rfc-2632-const-trait-impl/syntax.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fsyntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8841a426e599c8968d9b30b57431333d0b68c592/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fsyntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2632-const-trait-impl%2Fsyntax.rs?ref=8841a426e599c8968d9b30b57431333d0b68c592", "patch": "@@ -3,7 +3,6 @@\n \n #![feature(const_trait_bound_opt_out)]\n #![feature(const_trait_impl)]\n-#![allow(incomplete_features)]\n \n // For now, this parses since an error does not occur until AST lowering.\n impl ?const T {}"}]}