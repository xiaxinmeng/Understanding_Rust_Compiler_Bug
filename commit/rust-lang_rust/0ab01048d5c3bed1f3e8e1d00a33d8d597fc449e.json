{"sha": "0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhYjAxMDQ4ZDVjM2JlZDFmM2U4ZTFkMDBhMzNkOGQ1OTdmYzQ0OWU=", "commit": {"author": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2014-11-21T00:31:56Z"}, "committer": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2014-11-21T00:31:56Z"}, "message": "lldb: refactor print_vec_slice_val\n\nBe more idiomatic and rely less on fiddly construction of output", "tree": {"sha": "349d6942e6f34eb4208970ceb1072ed61e838189", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/349d6942e6f34eb4208970ceb1072ed61e838189"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e", "html_url": "https://github.com/rust-lang/rust/commit/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e/comments", "author": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "125677e3f0e24fe753a8f24d2eead9057858b88e", "url": "https://api.github.com/repos/rust-lang/rust/commits/125677e3f0e24fe753a8f24d2eead9057858b88e", "html_url": "https://github.com/rust-lang/rust/commit/125677e3f0e24fe753a8f24d2eead9057858b88e"}], "stats": {"total": 14, "additions": 4, "deletions": 10}, "files": [{"sha": "dba9ca6153f2d16a532a9d4c9a9edc57bcd8423b", "filename": "src/etc/lldb_rust_formatters.py", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e/src%2Fetc%2Flldb_rust_formatters.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e/src%2Fetc%2Flldb_rust_formatters.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Flldb_rust_formatters.py?ref=0ab01048d5c3bed1f3e8e1d00a33d8d597fc449e", "patch": "@@ -43,8 +43,6 @@ def print_struct_val(val, internal_dict):\n     return print_struct_val_starting_from(0, val, internal_dict)\n \n def print_vec_slice_val(val, internal_dict):\n-  output = \"&[\"\n-\n   length = val.GetChildAtIndex(1).GetValueAsUnsigned()\n \n   data_ptr_val = val.GetChildAtIndex(0)\n@@ -56,16 +54,12 @@ def print_vec_slice_val(val, internal_dict):\n \n   start_address = data_ptr_val.GetValueAsUnsigned()\n \n-  for i in range(length):\n+  def render_element(i):\n     address = start_address + i * element_type_size\n-    element_val = val.CreateValueFromAddress( val.GetName() + (\"[%s]\" % i), address, element_type )\n-    output += print_val(element_val, internal_dict)\n-\n-    if i != length - 1:\n-      output += \", \"\n+    element_val = val.CreateValueFromAddress( val.GetName() + (\"[%s]\" % i), address, element_type)\n+    return print_val(element_val, internal_dict)\n \n-  output += \"]\"\n-  return output\n+  return \"&[%s]\" % (', '.join([render_element(i) for i in range(length)]))\n \n def print_struct_val_starting_from(field_start_index, val, internal_dict):\n   '''"}]}