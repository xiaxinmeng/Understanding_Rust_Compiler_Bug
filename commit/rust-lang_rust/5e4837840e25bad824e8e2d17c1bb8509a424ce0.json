{"sha": "5e4837840e25bad824e8e2d17c1bb8509a424ce0", "node_id": "C_kwDOAAsO6NoAKDVlNDgzNzg0MGUyNWJhZDgyNGU4ZTJkMTdjMWJiODUwOWE0MjRjZTA", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2022-01-30T16:37:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-30T16:37:51Z"}, "message": "Rollup merge of #93475 - GuillaumeGomez:theme-in-history, r=jsha\n\nAdd test to ensure that theme is applied correctly when going back in history\n\nFixes #93258.\n\nr? `@jsha`", "tree": {"sha": "a37ec5183435b824a742aa518164571e58a6e9cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a37ec5183435b824a742aa518164571e58a6e9cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e4837840e25bad824e8e2d17c1bb8509a424ce0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh9r7fCRBK7hj4Ov3rIwAAY/sIAH8xho/sT1eOWhRNGwHtSdCQ\nw/rvx33Soe3epQg4HUY5s11G1hmgqZGW+YIAOJMD5+zmAaYCB6ZkO49QnLdeLcD3\n2xfUBsl6nqFpb7666dL9NpgTR4CidvWrBvKTqDAr4aqGTaCLwcc3Bh6nu6wGlqlx\n4sPhjn/OXwlRjm/43oFfMxTKTYj7o+P/rwAhOYgfp9pfumuF4WtOrADLddZqqDLe\nABDPJ8DiBSAfsoGKd5+BF2ndvqI9Tgq6Gq3JJE57lW7uG7aUBVuZW1bjZpkwgGjb\nhYSFZXx2lLyXbFeAq88yhqt65fKjHykGlca5p9kTBzaaIH6L/cBT/Na5hinZ9ag=\n=7REc\n-----END PGP SIGNATURE-----\n", "payload": "tree a37ec5183435b824a742aa518164571e58a6e9cf\nparent cee571e6062a200a84b2fb4e3c216292e6a2ac13\nparent 2604968d03c3b8b21efb17f570fa5a6cff7ec140\nauthor Eric Huss <eric@huss.org> 1643560671 -0800\ncommitter GitHub <noreply@github.com> 1643560671 -0800\n\nRollup merge of #93475 - GuillaumeGomez:theme-in-history, r=jsha\n\nAdd test to ensure that theme is applied correctly when going back in history\n\nFixes #93258.\n\nr? `@jsha`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e4837840e25bad824e8e2d17c1bb8509a424ce0", "html_url": "https://github.com/rust-lang/rust/commit/5e4837840e25bad824e8e2d17c1bb8509a424ce0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e4837840e25bad824e8e2d17c1bb8509a424ce0/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cee571e6062a200a84b2fb4e3c216292e6a2ac13", "url": "https://api.github.com/repos/rust-lang/rust/commits/cee571e6062a200a84b2fb4e3c216292e6a2ac13", "html_url": "https://github.com/rust-lang/rust/commit/cee571e6062a200a84b2fb4e3c216292e6a2ac13"}, {"sha": "2604968d03c3b8b21efb17f570fa5a6cff7ec140", "url": "https://api.github.com/repos/rust-lang/rust/commits/2604968d03c3b8b21efb17f570fa5a6cff7ec140", "html_url": "https://github.com/rust-lang/rust/commit/2604968d03c3b8b21efb17f570fa5a6cff7ec140"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "b53799188ef994047c71071de0fb4d7a9f0f34f1", "filename": "src/test/rustdoc-gui/theme-in-history.goml", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/5e4837840e25bad824e8e2d17c1bb8509a424ce0/src%2Ftest%2Frustdoc-gui%2Ftheme-in-history.goml", "raw_url": "https://github.com/rust-lang/rust/raw/5e4837840e25bad824e8e2d17c1bb8509a424ce0/src%2Ftest%2Frustdoc-gui%2Ftheme-in-history.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftheme-in-history.goml?ref=5e4837840e25bad824e8e2d17c1bb8509a424ce0", "patch": "@@ -0,0 +1,25 @@\n+// Ensures that the theme is working when going back in history.\n+goto: file://|DOC_PATH|/test_docs/index.html\n+// Set the theme to dark.\n+local-storage: {\"rustdoc-theme\": \"dark\", \"rustdoc-preferred-dark-theme\": \"dark\", \"rustdoc-use-system-theme\": \"false\"}\n+// We reload the page so the local storage settings are being used.\n+reload:\n+assert-css: (\"body\", { \"background-color\": \"rgb(53, 53, 53)\" })\n+assert-local-storage: { \"rustdoc-theme\": \"dark\" }\n+\n+// Now we go to the settings page.\n+click: \"#settings-menu\"\n+wait-for: \".settings\"\n+// We change the theme to \"light\".\n+click: \"#theme-light\"\n+wait-for: 250\n+assert-css: (\"body\", { \"background-color\": \"rgb(255, 255, 255)\" })\n+assert-local-storage: { \"rustdoc-theme\": \"light\" }\n+\n+// We go back in history.\n+history-go-back:\n+// Confirm that we're not on the settings page.\n+assert-false: \".settings\"\n+// Check that the current theme is still \"light\".\n+assert-css: (\"body\", { \"background-color\": \"rgb(255, 255, 255)\" })\n+assert-local-storage: { \"rustdoc-theme\": \"light\" }"}]}