{"sha": "6b0440e26d3e51aef9841ac47914b729416b25c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiMDQ0MGUyNmQzZTUxYWVmOTg0MWFjNDc5MTRiNzI5NDE2YjI1Yzk=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-04-09T01:40:52Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-04-09T01:40:52Z"}, "message": "Cleanup argument parsing", "tree": {"sha": "5d9196ad03b01c3070ab0ba05bbe24e141b559b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5d9196ad03b01c3070ab0ba05bbe24e141b559b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b0440e26d3e51aef9841ac47914b729416b25c9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAlyr+CQACgkQtAh+UQ6Y\nsWTYAA/+KFxw4LrGEgw56NjoQSHf4FuIFwPlPOCko/Jo+6UDeJfo11k81OpXgK7L\nBcnfqskArrBFDNk32CeHu665KN6utbDdpsUhQcXAfT5gQyklxMmhyS+QEWUZBeIH\ngMtEjxvQvYWdy0tMKPTj0N3zQrVVNT8KDmqPLTT67q8ORC51SsvEUX5zG6Acr9dI\n6KplVrxGI+xclJYgQNkZWfduEYS1mTsaOMUY5xbkJD1X4qQFnyrhuS9CFdna4mLF\nEH+D4fO6V+k2uEIfIS83l4ZWrPOa23i+d0eVeCV5aOpyl/OBvOi7Xw7DtIKjQuZj\n/tem7pUUNBEZqP8tB2FhD+96e6Z2LLLWvbPBELsUzap5NJTvH8BbMcXld9QTKQoB\nY8a9QrmfigiDNs30PqrxGliBv5dtfbB1Spykg6e12LdEomeAehZ4GxmaoaqQdmNz\nrmdL/3Rn9XRpIQvuyuCdwAHPHmL9zfNqX88gI7GPFPrAK8aGHcDXN/eqbt4wfeV/\n4CUfNAZOeK3E5qFiZ6RDMwieHV3xmCsD1sjDLEY1YvpkIh75SfJm45UmsLzBD0ru\nnTPjoconwlH4AZG7bbhI36wUd83oGAAP/ILQWgmrfZ+u6kA8tBldlHPRhMF4hK4/\nT9e+f5zCa+mJezgndeUoqaiGeTmZW+u763ms6do8id0zFbHOkxE=\n=e8q0\n-----END PGP SIGNATURE-----", "payload": "tree 5d9196ad03b01c3070ab0ba05bbe24e141b559b7\nparent 5530d295ad2c4900c3c8ab80abb5b5258b99446b\nauthor Aaron Hill <aa1ronham@gmail.com> 1554774052 -0400\ncommitter Aaron Hill <aa1ronham@gmail.com> 1554774052 -0400\n\nCleanup argument parsing\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b0440e26d3e51aef9841ac47914b729416b25c9", "html_url": "https://github.com/rust-lang/rust/commit/6b0440e26d3e51aef9841ac47914b729416b25c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b0440e26d3e51aef9841ac47914b729416b25c9/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5530d295ad2c4900c3c8ab80abb5b5258b99446b", "url": "https://api.github.com/repos/rust-lang/rust/commits/5530d295ad2c4900c3c8ab80abb5b5258b99446b", "html_url": "https://github.com/rust-lang/rust/commit/5530d295ad2c4900c3c8ab80abb5b5258b99446b"}], "stats": {"total": 31, "additions": 15, "deletions": 16}, "files": [{"sha": "6e68f803f8584e0a6cd9cffb08d951ed9beea32b", "filename": "src/bin/miri.rs", "status": "modified", "additions": 15, "deletions": 16, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/6b0440e26d3e51aef9841ac47914b729416b25c9/src%2Fbin%2Fmiri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b0440e26d3e51aef9841ac47914b729416b25c9/src%2Fbin%2Fmiri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmiri.rs?ref=6b0440e26d3e51aef9841ac47914b729416b25c9", "patch": "@@ -146,23 +146,22 @@ fn main() {\n                 \"--\" => {\n                     after_dashdash = true;\n                 }\n-                _ => {\n-                    let split: Vec<String> = arg.split(\"-Zmiri-seed=\").map(|s| s.to_owned()).collect();\n-                    if split.len() == 2 {\n-                        if seed.is_some() {\n-                            panic!(\"Cannot specify -Zmiri-seed multiple times!\");\n-                        }\n-                        let seed_raw = hex::decode(&split[1]).unwrap();\n-                        if seed_raw.len() > 8 {\n-                            panic!(format!(\"-Zmiri-seed must be at most 8 bytes, was {}\", seed_raw.len()));\n-                        }\n-\n-                        let mut bytes = [0; 8];\n-                        bytes[..seed_raw.len()].copy_from_slice(&hex::decode(&split[1]).unwrap());\n-                        seed = Some(u64::from_be_bytes(bytes));\n-                    } else {\n-                        rustc_args.push(arg);\n+                arg if arg.starts_with(\"-Zmiri-seed=\") => {\n+                    if seed.is_some() {\n+                        panic!(\"Cannot specify -Zmiri-seed multiple times!\");\n+                    }\n+                    let seed_raw = hex::decode(arg.trim_start_matches(\"-Zmiri-seed=\")).unwrap();\n+                    if seed_raw.len() > 8 {\n+                        panic!(format!(\"-Zmiri-seed must be at most 8 bytes, was {}\", seed_raw.len()));\n                     }\n+\n+                    let mut bytes = [0; 8];\n+                    bytes[..seed_raw.len()].copy_from_slice(&seed_raw);\n+                    seed = Some(u64::from_be_bytes(bytes));\n+\n+                },\n+                _ => {\n+                    rustc_args.push(arg);\n                 }\n             }\n         }"}]}