{"sha": "580df4d99746217aacf1de9717e7f89cfdcc5383", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4MGRmNGQ5OTc0NjIxN2FhY2YxZGU5NzE3ZTdmODljZmRjYzUzODM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-02-26T01:36:40Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-02-26T01:36:40Z"}, "message": "auto merge of #5084 : oncemoreification/rust/issue-4517, r=brson\n\nPatch for #4517\r\n\r\nThis works for fixed vectors, but I am unclear how slices should be printed, simply '&[...]'  or...\r\n\r\ne.i. How should regions be printed?", "tree": {"sha": "1f4c057def2892d5e7ca6025191c336cba0a527f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f4c057def2892d5e7ca6025191c336cba0a527f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/580df4d99746217aacf1de9717e7f89cfdcc5383", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/580df4d99746217aacf1de9717e7f89cfdcc5383", "html_url": "https://github.com/rust-lang/rust/commit/580df4d99746217aacf1de9717e7f89cfdcc5383", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/580df4d99746217aacf1de9717e7f89cfdcc5383/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e5705a87743503232ec927efebd00861f1ce717", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e5705a87743503232ec927efebd00861f1ce717", "html_url": "https://github.com/rust-lang/rust/commit/6e5705a87743503232ec927efebd00861f1ce717"}, {"sha": "c4ef822dc7e4fcd05f9e4663e6f5c2196129d605", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4ef822dc7e4fcd05f9e4663e6f5c2196129d605", "html_url": "https://github.com/rust-lang/rust/commit/c4ef822dc7e4fcd05f9e4663e6f5c2196129d605"}], "stats": {"total": 25, "additions": 15, "deletions": 10}, "files": [{"sha": "b55b45a31834195c93002c5737928fed453eafe7", "filename": "src/librustc/middle/typeck/infer/mod.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fmod.rs?ref=580df4d99746217aacf1de9717e7f89cfdcc5383", "patch": "@@ -734,10 +734,10 @@ impl @mut InferCtxt {\n \n     fn report_mismatched_types(&self, sp: span, e: ty::t, a: ty::t,\n                                err: &ty::type_err) {\n-        // Don't report an error if expected is ty_err\n         let resolved_expected =\n             self.resolve_type_vars_if_possible(e);\n         let mk_msg = match ty::get(resolved_expected).sty {\n+            // Don't report an error if expected is ty_err\n             ty::ty_err => return,\n             _ => {\n                 // if I leave out : ~str, it infers &str and complains\n@@ -780,4 +780,3 @@ impl @mut InferCtxt {\n     }\n \n }\n-"}, {"sha": "a337431cefdb8caca4a0232f9dc2593e452536b3", "filename": "src/librustc/util/ppaux.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Flibrustc%2Futil%2Fppaux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Flibrustc%2Futil%2Fppaux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fppaux.rs?ref=580df4d99746217aacf1de9717e7f89cfdcc5383", "patch": "@@ -238,19 +238,19 @@ pub fn vstore_to_str(cx: ctxt, vs: ty::vstore) -> ~str {\n       ty::vstore_fixed(n) => fmt!(\"%u\", n),\n       ty::vstore_uniq => ~\"~\",\n       ty::vstore_box => ~\"@\",\n-      ty::vstore_slice(r) => region_to_str(cx, r)\n+      ty::vstore_slice(r) => region_to_str_adorned(cx, \"&\", r, \"/\")\n     }\n }\n \n pub fn vstore_ty_to_str(cx: ctxt, ty: ~str, vs: ty::vstore) -> ~str {\n     match vs {\n       ty::vstore_fixed(_) => {\n-        fmt!(\"%s/%s\", ty, vstore_to_str(cx, vs))\n+        fmt!(\"[%s * %s]\", ty, vstore_to_str(cx, vs))\n       }\n       ty::vstore_slice(_) => {\n         fmt!(\"%s/%s\", vstore_to_str(cx, vs), ty)\n       }\n-      _ => fmt!(\"%s%s\", vstore_to_str(cx, vs), ty)\n+      _ => fmt!(\"%s[%s]\", vstore_to_str(cx, vs), ty)\n     }\n }\n \n@@ -453,13 +453,13 @@ pub fn ty_to_str(cx: ctxt, typ: t) -> ~str {\n       ty_trait(did, ref substs, vs) => {\n         let path = ty::item_path(cx, did);\n         let base = ast_map::path_to_str(path, cx.sess.intr());\n-        let result = parameterized(cx, base, substs.self_r, substs.tps);\n-        vstore_ty_to_str(cx, result, vs)\n+        let ty = parameterized(cx, base, substs.self_r, substs.tps);\n+        fmt!(\"%s%s\", vstore_to_str(cx, vs), ty)\n       }\n       ty_evec(mt, vs) => {\n-        vstore_ty_to_str(cx, fmt!(\"[%s]\", mt_to_str(cx, mt)), vs)\n+        vstore_ty_to_str(cx, fmt!(\"%s\", mt_to_str(cx, mt)), vs)\n       }\n-      ty_estr(vs) => vstore_ty_to_str(cx, ~\"str\", vs),\n+      ty_estr(vs) => fmt!(\"%s%s\", vstore_to_str(cx, vs), ~\"str\"),\n       ty_opaque_box => ~\"@?\",\n       ty_opaque_closure_ptr(ast::BorrowedSigil) => ~\"closure&\",\n       ty_opaque_closure_ptr(ast::ManagedSigil) => ~\"closure@\","}, {"sha": "0880cabb2abf9afa39f54e275bb7e911e23ea76e", "filename": "src/test/compile-fail/issue-2149.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Ftest%2Fcompile-fail%2Fissue-2149.rs", "raw_url": "https://github.com/rust-lang/rust/raw/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Ftest%2Fcompile-fail%2Fissue-2149.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-2149.rs?ref=580df4d99746217aacf1de9717e7f89cfdcc5383", "patch": "@@ -22,6 +22,6 @@ impl<A> vec_monad<A> for ~[A] {\n }\n fn main() {\n     [\"hi\"].bind(|x| [x] );\n-    //~^ ERROR type `[&static/str]/1` does not implement any method in scope named `bind`\n+    //~^ ERROR type `[&static/str * 1]` does not implement any method in scope named `bind`\n     //~^^ ERROR Unconstrained region variable\n }"}, {"sha": "18caaa697a17dffd705b7f0ccc3c89318eb53e5b", "filename": "src/test/compile-fail/issue-4517.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Ftest%2Fcompile-fail%2Fissue-4517.rs", "raw_url": "https://github.com/rust-lang/rust/raw/580df4d99746217aacf1de9717e7f89cfdcc5383/src%2Ftest%2Fcompile-fail%2Fissue-4517.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-4517.rs?ref=580df4d99746217aacf1de9717e7f89cfdcc5383", "patch": "@@ -0,0 +1,6 @@\n+fn bar(int_param: int) {}\n+\n+fn main() {\n+     let foo: [u8 * 4] = [1u8, ..4u8];\n+     bar(foo); //~ ERROR mismatched types: expected `int` but found `[u8 * 4]` (expected int but found vector)\n+}"}]}