{"sha": "f08f171530433aa24804dcc235aa62a11b127e24", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwOGYxNzE1MzA0MzNhYTI0ODA0ZGNjMjM1YWE2MmExMWIxMjdlMjQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-09-19T08:50:31Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-09-19T08:50:31Z"}, "message": "Auto merge of #4539 - jolson88:cast-lossless-pedantic, r=flip1995\n\nChanges cast-lossless to a pedantic lint\n\nAs discussed in #4528, this moves the cast-lossless lint from `all` to `pedantic`.\n\nI couldn't tell from description alone if it should also be removed from the complexity category, so I left it as part of complexity for now. I didn't see any impact to the tests from this change, but I could be wrong (as this is my first PR).\n\nfixes #4528\n\nchangelog: Moves cast-lossless from default to checking only as a `pedantic` lint.", "tree": {"sha": "1816a445368b34a654c09ca2a9655661b1d3e18e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1816a445368b34a654c09ca2a9655661b1d3e18e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f08f171530433aa24804dcc235aa62a11b127e24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f08f171530433aa24804dcc235aa62a11b127e24", "html_url": "https://github.com/rust-lang/rust/commit/f08f171530433aa24804dcc235aa62a11b127e24", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f08f171530433aa24804dcc235aa62a11b127e24/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f783ff3d52e1a2877bd61191229244f56cab4c07", "url": "https://api.github.com/repos/rust-lang/rust/commits/f783ff3d52e1a2877bd61191229244f56cab4c07", "html_url": "https://github.com/rust-lang/rust/commit/f783ff3d52e1a2877bd61191229244f56cab4c07"}, {"sha": "6f1f41371789e938e0f1fe1e3dfc879835351989", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f1f41371789e938e0f1fe1e3dfc879835351989", "html_url": "https://github.com/rust-lang/rust/commit/6f1f41371789e938e0f1fe1e3dfc879835351989"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "24b8b14f71770eaec0c7296db0c69202f28253c7", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -667,6 +667,7 @@ pub fn register_plugins(reg: &mut rustc_driver::plugin::Registry<'_>, conf: &Con\n         shadow::SHADOW_UNRELATED,\n         strings::STRING_ADD_ASSIGN,\n         trait_bounds::TYPE_REPETITION_IN_BOUNDS,\n+        types::CAST_LOSSLESS,\n         types::CAST_POSSIBLE_TRUNCATION,\n         types::CAST_POSSIBLE_WRAP,\n         types::CAST_PRECISION_LOSS,\n@@ -891,7 +892,6 @@ pub fn register_plugins(reg: &mut rustc_driver::plugin::Registry<'_>, conf: &Con\n         types::ABSURD_EXTREME_COMPARISONS,\n         types::BORROWED_BOX,\n         types::BOX_VEC,\n-        types::CAST_LOSSLESS,\n         types::CAST_PTR_ALIGNMENT,\n         types::CAST_REF_TO_MUT,\n         types::CHAR_LIT_AS_U8,\n@@ -1074,7 +1074,6 @@ pub fn register_plugins(reg: &mut rustc_driver::plugin::Registry<'_>, conf: &Con\n         transmute::TRANSMUTE_PTR_TO_REF,\n         transmute::USELESS_TRANSMUTE,\n         types::BORROWED_BOX,\n-        types::CAST_LOSSLESS,\n         types::CHAR_LIT_AS_U8,\n         types::OPTION_OPTION,\n         types::TYPE_COMPLEXITY,"}, {"sha": "5696c2be12a8c6bb801d249f68509d48a3794108", "filename": "clippy_lints/src/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/clippy_lints%2Fsrc%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/clippy_lints%2Fsrc%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftypes.rs?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -765,7 +765,7 @@ declare_clippy_lint! {\n     /// }\n     /// ```\n     pub CAST_LOSSLESS,\n-    complexity,\n+    pedantic,\n     \"casts using `as` that are known to be lossless, e.g., `x as u64` where `x: u8`\"\n }\n "}, {"sha": "f430e46ae67011c2adcb2a201d75f0bf7cd6ea47", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -121,7 +121,7 @@ pub const ALL_LINTS: [Lint; 314] = [\n     },\n     Lint {\n         name: \"cast_lossless\",\n-        group: \"complexity\",\n+        group: \"pedantic\",\n         desc: \"casts using `as` that are known to be lossless, e.g., `x as u64` where `x: u8`\",\n         deprecation: None,\n         module: \"types\","}, {"sha": "b1622e45f3b36350bf28fff811232c0b2ecce23e", "filename": "tests/ui/types.fixed", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftypes.fixed?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![allow(dead_code, unused_variables)]\n+#![warn(clippy::all, clippy::pedantic)]\n \n // should not warn on lossy casting in constant types\n // because not supported yet"}, {"sha": "30463f9e2a1739351c098817466aa36c079ee343", "filename": "tests/ui/types.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftypes.rs?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![allow(dead_code, unused_variables)]\n+#![warn(clippy::all, clippy::pedantic)]\n \n // should not warn on lossy casting in constant types\n // because not supported yet"}, {"sha": "daba766856df59b6d78d5e27055a103edc670937", "filename": "tests/ui/types.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f08f171530433aa24804dcc235aa62a11b127e24/tests%2Fui%2Ftypes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftypes.stderr?ref=f08f171530433aa24804dcc235aa62a11b127e24", "patch": "@@ -1,5 +1,5 @@\n error: casting i32 to i64 may become silently lossy if you later change the type\n-  --> $DIR/types.rs:13:22\n+  --> $DIR/types.rs:14:22\n    |\n LL |     let c_i64: i64 = c as i64;\n    |                      ^^^^^^^^ help: try: `i64::from(c)`"}]}