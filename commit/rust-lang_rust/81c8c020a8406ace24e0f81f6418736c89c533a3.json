{"sha": "81c8c020a8406ace24e0f81f6418736c89c533a3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYzhjMDIwYTg0MDZhY2UyNGUwZjgxZjY0MTg3MzZjODljNTMzYTM=", "commit": {"author": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-09-01T18:34:22Z"}, "committer": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-09-01T18:34:22Z"}, "message": "Merge pull request #239 from sinhpham/format_strings_option\n\nFormat strings option https://github.com/nrc/rustfmt/issues/202", "tree": {"sha": "971db576b8f4e97c6a1c30ca127306edebed5804", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/971db576b8f4e97c6a1c30ca127306edebed5804"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81c8c020a8406ace24e0f81f6418736c89c533a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81c8c020a8406ace24e0f81f6418736c89c533a3", "html_url": "https://github.com/rust-lang/rust/commit/81c8c020a8406ace24e0f81f6418736c89c533a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81c8c020a8406ace24e0f81f6418736c89c533a3/comments", "author": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d7bb8fa7eb54819e05083faf161cab19488600f", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d7bb8fa7eb54819e05083faf161cab19488600f", "html_url": "https://github.com/rust-lang/rust/commit/1d7bb8fa7eb54819e05083faf161cab19488600f"}, {"sha": "55fe34a00ff09323035955129ee4b29908664998", "url": "https://api.github.com/repos/rust-lang/rust/commits/55fe34a00ff09323035955129ee4b29908664998", "html_url": "https://github.com/rust-lang/rust/commit/55fe34a00ff09323035955129ee4b29908664998"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "bc420ab2c1cd6c1288df75ddc2025e595a969e02", "filename": "src/config.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/81c8c020a8406ace24e0f81f6418736c89c533a3/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c8c020a8406ace24e0f81f6418736c89c533a3/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=81c8c020a8406ace24e0f81f6418736c89c533a3", "patch": "@@ -80,6 +80,7 @@ create_config! {\n     expr_indent_style: BlockIndentStyle,\n     closure_indent_style: BlockIndentStyle,\n     single_line_if_else: bool,\n+    format_strings: bool,\n }\n \n impl Default for Config {\n@@ -104,6 +105,7 @@ impl Default for Config {\n             expr_indent_style: BlockIndentStyle::Tabbed,\n             closure_indent_style: BlockIndentStyle::Visual,\n             single_line_if_else: false,\n+            format_strings: true,\n         }\n     }\n "}, {"sha": "0945433319c81c79ad52cd458449f16aa341e0a4", "filename": "src/expr.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/81c8c020a8406ace24e0f81f6418736c89c533a3/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c8c020a8406ace24e0f81f6418736c89c533a3/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=81c8c020a8406ace24e0f81f6418736c89c533a3", "patch": "@@ -828,6 +828,9 @@ fn rewrite_string_lit(context: &RewriteContext,\n                       width: usize,\n                       offset: usize)\n                       -> Option<String> {\n+    if context.config.format_strings == false {\n+        return Some(context.snippet(span));\n+    }\n     // Check if there is anything to fix: we always try to fixup multi-line\n     // strings, or if the string is too long for the line.\n     let l_loc = context.codemap.lookup_char_pos(span.lo);"}, {"sha": "386efe171c65b7d2f0680c857ee50f4f3c17074b", "filename": "tests/config/small_tabs.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/81c8c020a8406ace24e0f81f6418736c89c533a3/tests%2Fconfig%2Fsmall_tabs.toml", "raw_url": "https://github.com/rust-lang/rust/raw/81c8c020a8406ace24e0f81f6418736c89c533a3/tests%2Fconfig%2Fsmall_tabs.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fconfig%2Fsmall_tabs.toml?ref=81c8c020a8406ace24e0f81f6418736c89c533a3", "patch": "@@ -16,3 +16,4 @@ reorder_imports = false\n expr_indent_style = \"Tabbed\"\n closure_indent_style = \"Visual\"\n single_line_if_else = false\n+format_strings = true"}, {"sha": "50ebb97491b2a96cfe66c1ef1e1bd68e9d7f353a", "filename": "tests/target/string-lit-custom.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/81c8c020a8406ace24e0f81f6418736c89c533a3/tests%2Ftarget%2Fstring-lit-custom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81c8c020a8406ace24e0f81f6418736c89c533a3/tests%2Ftarget%2Fstring-lit-custom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstring-lit-custom.rs?ref=81c8c020a8406ace24e0f81f6418736c89c533a3", "patch": "@@ -0,0 +1,22 @@\n+// rustfmt-format_strings: false\n+\n+fn main() {\n+    let expected = \"; ModuleID = \\'foo\\'\n+\n+; Function Attrs: nounwind\n+declare void @llvm.memset.p0i8.i32(i8* nocapture, i8, i32, i32, i1) #0\n+\n+declare i32 @write(i32, i8*, i32)\n+\n+declare i32 @putchar(i32)\n+\n+declare i32 @getchar()\n+\n+define i32 @main() {\n+entry:\n+  ret i32 0\n+}\n+\n+attributes #0 = { nounwind }\n+\";\n+}"}]}