{"sha": "8dfc25e05e995c92a6093718198cca4bc2c85b63", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhkZmMyNWUwNWU5OTVjOTJhNjA5MzcxODE5OGNjYTRiYzJjODViNjM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-23T12:03:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-03-23T12:03:39Z"}, "message": "Auto merge of #40605 - alexcrichton:add-stamps, r=brson\n\ntravis: Add timestamps to all build messages\n\nWhen debugging why builds are taking so long it's often useful to get the\ntimestamp of all log messages as we're not always timing every tiny step of the\nbuild. I wrote a [utility] for prepending a relative timestamp from the start of\na process which is now downloaded to the builders and is what we wrap the entire\nbuild invocation in.\n\n[utility]: https://github.com/alexcrichton/stamp-rs\n\nCloses #40577", "tree": {"sha": "fbdff36efdced9c4c912851a7fa488cce1af7c74", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fbdff36efdced9c4c912851a7fa488cce1af7c74"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8dfc25e05e995c92a6093718198cca4bc2c85b63", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8dfc25e05e995c92a6093718198cca4bc2c85b63", "html_url": "https://github.com/rust-lang/rust/commit/8dfc25e05e995c92a6093718198cca4bc2c85b63", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8dfc25e05e995c92a6093718198cca4bc2c85b63/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90346eae18e83887517e096c17678a74838ff995", "url": "https://api.github.com/repos/rust-lang/rust/commits/90346eae18e83887517e096c17678a74838ff995", "html_url": "https://github.com/rust-lang/rust/commit/90346eae18e83887517e096c17678a74838ff995"}, {"sha": "2727866831190406ad13613d55c5846677b7d777", "url": "https://api.github.com/repos/rust-lang/rust/commits/2727866831190406ad13613d55c5846677b7d777", "html_url": "https://github.com/rust-lang/rust/commit/2727866831190406ad13613d55c5846677b7d777"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "b16957344ae1a9628c460d045ac54177965e381b", "filename": ".travis.yml", "status": "modified", "additions": 14, "deletions": 8, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/8dfc25e05e995c92a6093718198cca4bc2c85b63/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/8dfc25e05e995c92a6093718198cca4bc2c85b63/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=8dfc25e05e995c92a6093718198cca4bc2c85b63", "patch": "@@ -53,7 +53,9 @@ matrix:\n       osx_image: xcode8.2\n       install: &osx_install_sccache >\n         travis_retry curl -o /usr/local/bin/sccache https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-16-sccache-x86_64-apple-darwin &&\n-          chmod +x /usr/local/bin/sccache\n+          chmod +x /usr/local/bin/sccache &&\n+        travis_retry curl -o /usr/local/bin/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-apple-darwin &&\n+          chmod +x /usr/local/bin/stamp\n     - env: >\n         RUST_CHECK_TARGET=check\n         RUST_CONFIGURE_ARGS=--build=i686-apple-darwin\n@@ -77,9 +79,7 @@ matrix:\n         MACOSX_STD_DEPLOYMENT_TARGET=10.7\n       os: osx\n       osx_image: xcode8.2\n-      install: >\n-        travis_retry curl -o /usr/local/bin/sccache https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-16-sccache-x86_64-apple-darwin &&\n-          chmod +x /usr/local/bin/sccache\n+      install: *osx_install_sccache\n     - env: >\n         RUST_CHECK_TARGET=dist\n         RUST_CONFIGURE_ARGS=\"--target=aarch64-apple-ios,armv7-apple-ios,armv7s-apple-ios,i386-apple-ios,x86_64-apple-ios --enable-extended\"\n@@ -118,6 +118,12 @@ env:\n     # AWS_SECRET_ACCESS_KEY=...\n     - secure: \"Pixhh0hXDqGCdOyLtGFjli3J2AtDWIpyb2btIrLe956nCBDRutRoMm6rv5DI9sFZN07Mms7VzNNvhc9wCW1y63JAm414d2Co7Ob8kWMZlz9l9t7ACHuktUiis8yr+S4Quq1Vqd6pqi7pf2J++UxC8R/uLeqVrubzr6+X7AbmEFE=\"\n \n+# Note that this is overridden on OSX builders\n+install: >\n+  travis_retry curl -o $HOME/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-unknown-linux-musl &&\n+    chmod +x $HOME/stamp &&\n+    export PATH=$PATH:$HOME\n+\n before_script:\n   - >\n       echo \"#### Disk usage before running script:\";\n@@ -129,11 +135,11 @@ script:\n       if [ \"$ALLOW_PR\" = \"\" ] && [ \"$TRAVIS_BRANCH\" != \"auto\" ]; then\n           echo skipping, not a full build;\n       elif [ \"$TRAVIS_OS_NAME\" = \"osx\" ]; then\n-          travis_retry sh -c 'git submodule deinit -f . && git submodule update --init' &&\n-          src/ci/run.sh;\n+          travis_retry stamp sh -c 'git submodule deinit -f . && git submodule update --init' &&\n+          stamp src/ci/run.sh;\n       else\n-          travis_retry sh -c 'git submodule deinit -f . && git submodule update --init' &&\n-          src/ci/docker/run.sh $IMAGE;\n+          travis_retry stamp sh -c 'git submodule deinit -f . && git submodule update --init' &&\n+          stamp src/ci/docker/run.sh $IMAGE;\n       fi\n \n after_success:"}, {"sha": "6c6a49ada15d9b72fb97eb0015c84bd5dbaea513", "filename": "src/ci/run.sh", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8dfc25e05e995c92a6093718198cca4bc2c85b63/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8dfc25e05e995c92a6093718198cca4bc2c85b63/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=8dfc25e05e995c92a6093718198cca4bc2c85b63", "patch": "@@ -24,7 +24,6 @@ ci_dir=`cd $(dirname $0) && pwd`\n source \"$ci_dir/shared.sh\"\n \n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-sccache\"\n-RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-quiet-tests\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --disable-manage-submodules\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-locked-deps\"\n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-cargo-openssl-static\""}]}