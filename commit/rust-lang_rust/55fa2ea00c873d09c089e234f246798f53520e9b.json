{"sha": "55fa2ea00c873d09c089e234f246798f53520e9b", "node_id": "C_kwDOAAsO6NoAKDU1ZmEyZWEwMGM4NzNkMDljMDg5ZTIzNGYyNDY3OThmNTM1MjBlOWI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-01-17T09:40:29Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-01-17T09:40:29Z"}, "message": "Auto merge of #92816 - tmiasko:rm-llvm-asm, r=Amanieu\n\nRemove deprecated LLVM-style inline assembly\n\nThe `llvm_asm!` was deprecated back in #87590 1.56.0, with intention to remove\nit once `asm!` was stabilized, which already happened in #91728 1.59.0. Now it\nis time to remove `llvm_asm!` to avoid continued maintenance cost.\n\nCloses #70173.\nCloses #92794.\nCloses #87612.\nCloses #82065.\n\ncc `@rust-lang/wg-inline-asm`\n\nr? `@Amanieu`", "tree": {"sha": "a8f264c0598db7c0e7d07f560ccc94bfaf101888", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8f264c0598db7c0e7d07f560ccc94bfaf101888"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55fa2ea00c873d09c089e234f246798f53520e9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55fa2ea00c873d09c089e234f246798f53520e9b", "html_url": "https://github.com/rust-lang/rust/commit/55fa2ea00c873d09c089e234f246798f53520e9b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55fa2ea00c873d09c089e234f246798f53520e9b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4a88f23c1bc796153f92d95b3f1b5660c0eee99", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4a88f23c1bc796153f92d95b3f1b5660c0eee99", "html_url": "https://github.com/rust-lang/rust/commit/f4a88f23c1bc796153f92d95b3f1b5660c0eee99"}, {"sha": "d389cfccb58be6a0be85c9ddd0336ea0c1f6d57b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d389cfccb58be6a0be85c9ddd0336ea0c1f6d57b", "html_url": "https://github.com/rust-lang/rust/commit/d389cfccb58be6a0be85c9ddd0336ea0c1f6d57b"}], "stats": {"total": 32, "additions": 3, "deletions": 29}, "files": [{"sha": "af46e99c6446ef9c487328eb28f77aff18a7f329", "filename": "clippy_lints/src/dereference.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fdereference.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fdereference.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdereference.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -449,7 +449,6 @@ fn is_linted_explicit_deref_position(parent: Option<Node<'_>>, child_id: HirId,\n         | ExprKind::Continue(..)\n         | ExprKind::Ret(..)\n         | ExprKind::InlineAsm(..)\n-        | ExprKind::LlvmInlineAsm(..)\n         | ExprKind::Struct(..)\n         | ExprKind::Repeat(..)\n         | ExprKind::Yield(..) => true,"}, {"sha": "26fa41b1a605df7c7cd342402b422d72661e7ea0", "filename": "clippy_lints/src/entry.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fentry.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -504,7 +504,7 @@ impl<'tcx> Visitor<'tcx> for InsertSearcher<'_, 'tcx> {\n                     self.loops.pop();\n                 },\n                 ExprKind::Block(block, _) => self.visit_block(block),\n-                ExprKind::InlineAsm(_) | ExprKind::LlvmInlineAsm(_) => {\n+                ExprKind::InlineAsm(_) => {\n                     self.can_use_entry = false;\n                 },\n                 _ => {"}, {"sha": "3bfc62b19ef2af85f5a1409e6b0ef3945293e7e1", "filename": "clippy_lints/src/loops/never_loop.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -181,7 +181,6 @@ fn never_loop_expr(expr: &Expr<'_>, main_loop_id: HirId) -> NeverLoopResult {\n         ExprKind::Struct(_, _, None)\n         | ExprKind::Yield(_, _)\n         | ExprKind::Closure(_, _, _, _, _)\n-        | ExprKind::LlvmInlineAsm(_)\n         | ExprKind::Path(_)\n         | ExprKind::ConstBlock(_)\n         | ExprKind::Lit(_)"}, {"sha": "c3d984fb5ae10b3d57314fedc1f4940dacf75e8e", "filename": "clippy_lints/src/suspicious_operation_groupings.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fsuspicious_operation_groupings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Fsuspicious_operation_groupings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fsuspicious_operation_groupings.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -567,7 +567,6 @@ fn ident_difference_expr_with_base_location(\n         | (Repeat(_, _), Repeat(_, _))\n         | (Struct(_), Struct(_))\n         | (MacCall(_), MacCall(_))\n-        | (LlvmInlineAsm(_), LlvmInlineAsm(_))\n         | (InlineAsm(_), InlineAsm(_))\n         | (Ret(_), Ret(_))\n         | (Continue(_), Continue(_))"}, {"sha": "1d7bb24302606aab731c945d6e32b2bee4ab35f8", "filename": "clippy_lints/src/utils/author.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Futils%2Fauthor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fauthor.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -547,10 +547,6 @@ impl<'a, 'tcx> PrintVisitor<'a, 'tcx> {\n                 kind!(\"InlineAsm(_)\");\n                 out!(\"// unimplemented: `ExprKind::InlineAsm` is not further destructured at the moment\");\n             },\n-            ExprKind::LlvmInlineAsm(_) => {\n-                kind!(\"LlvmInlineAsm(_)\");\n-                out!(\"// unimplemented: `ExprKind::LlvmInlineAsm` is not further destructured at the moment\");\n-            },\n             ExprKind::Struct(qpath, fields, base) => {\n                 bind!(self, qpath, fields);\n                 opt_bind!(self, base);"}, {"sha": "89eae06fef79b04a65ca76f986ced2efcc3b4534", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -304,19 +304,6 @@ fn print_expr(cx: &LateContext<'_>, expr: &hir::Expr<'_>, indent: usize) {\n                 }\n             }\n         },\n-        hir::ExprKind::LlvmInlineAsm(asm) => {\n-            let inputs = &asm.inputs_exprs;\n-            let outputs = &asm.outputs_exprs;\n-            println!(\"{}LlvmInlineAsm\", ind);\n-            println!(\"{}inputs:\", ind);\n-            for e in inputs.iter() {\n-                print_expr(cx, e, indent + 1);\n-            }\n-            println!(\"{}outputs:\", ind);\n-            for e in outputs.iter() {\n-                print_expr(cx, e, indent + 1);\n-            }\n-        },\n         hir::ExprKind::Struct(path, fields, ref base) => {\n             println!(\"{}Struct\", ind);\n             println!(\"{}path: {:?}\", ind, path);"}, {"sha": "80ed3c230820fd0b44ea9a1cd5dddcc3c4a1ed6f", "filename": "clippy_utils/src/eager_or_lazy.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Feager_or_lazy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Feager_or_lazy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Feager_or_lazy.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -180,7 +180,6 @@ fn expr_eagerness<'tcx>(cx: &LateContext<'tcx>, e: &'tcx Expr<'_>) -> EagernessS\n                 | ExprKind::Continue(_)\n                 | ExprKind::Ret(_)\n                 | ExprKind::InlineAsm(_)\n-                | ExprKind::LlvmInlineAsm(_)\n                 | ExprKind::Yield(..)\n                 | ExprKind::Err => {\n                     self.eagerness = ForceNoChange;"}, {"sha": "b0fee46f82474a9d893391ffc0dd6246d6060bac", "filename": "clippy_utils/src/hir_utils.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fhir_utils.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -683,7 +683,7 @@ impl<'a, 'tcx> SpanlessHash<'a, 'tcx> {\n                 }\n                 self.hash_pat(pat);\n             },\n-            ExprKind::LlvmInlineAsm(..) | ExprKind::Err => {},\n+            ExprKind::Err => {},\n             ExprKind::Lit(ref l) => {\n                 l.node.hash(&mut self.s);\n             },"}, {"sha": "515915d9abee7a014b1683653ab29cc6ed67fda7", "filename": "clippy_utils/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Flib.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -810,8 +810,7 @@ pub fn can_move_expr_to_closure_no_visit<'tcx>(\n         | ExprKind::Continue(_)\n         | ExprKind::Ret(_)\n         | ExprKind::Yield(..)\n-        | ExprKind::InlineAsm(_)\n-        | ExprKind::LlvmInlineAsm(_) => false,\n+        | ExprKind::InlineAsm(_) => false,\n         // Accessing a field of a local value can only be done if the type isn't\n         // partially moved.\n         ExprKind::Field("}, {"sha": "7512039a480bb95e191d17eed4b34d3708643d42", "filename": "clippy_utils/src/qualify_min_const_fn.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fqualify_min_const_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fqualify_min_const_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fqualify_min_const_fn.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -233,8 +233,6 @@ fn check_statement<'tcx>(\n         // just an assignment\n         StatementKind::SetDiscriminant { place, .. } => check_place(tcx, **place, span, body),\n \n-        StatementKind::LlvmInlineAsm { .. } => Err((span, \"cannot use inline assembly in const fn\".into())),\n-\n         StatementKind::CopyNonOverlapping(box rustc_middle::mir::CopyNonOverlapping { dst, src, count }) => {\n             check_operand(tcx, dst, span, body)?;\n             check_operand(tcx, src, span, body)?;"}, {"sha": "563edd32d25185fb3918e344cfe7680760a64a4d", "filename": "clippy_utils/src/sugg.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fsugg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55fa2ea00c873d09c089e234f246798f53520e9b/clippy_utils%2Fsrc%2Fsugg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fsugg.rs?ref=55fa2ea00c873d09c089e234f246798f53520e9b", "patch": "@@ -147,7 +147,6 @@ impl<'a> Sugg<'a> {\n             | hir::ExprKind::Field(..)\n             | hir::ExprKind::Index(..)\n             | hir::ExprKind::InlineAsm(..)\n-            | hir::ExprKind::LlvmInlineAsm(..)\n             | hir::ExprKind::ConstBlock(..)\n             | hir::ExprKind::Lit(..)\n             | hir::ExprKind::Loop(..)\n@@ -205,7 +204,6 @@ impl<'a> Sugg<'a> {\n             | ast::ExprKind::ForLoop(..)\n             | ast::ExprKind::Index(..)\n             | ast::ExprKind::InlineAsm(..)\n-            | ast::ExprKind::LlvmInlineAsm(..)\n             | ast::ExprKind::ConstBlock(..)\n             | ast::ExprKind::Lit(..)\n             | ast::ExprKind::Loop(..)"}]}