{"sha": "d92a15c1637860a669970142abe37d1daf5f2c73", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5MmExNWMxNjM3ODYwYTY2OTk3MDE0MmFiZTM3ZDFkYWY1ZjJjNzM=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-01-29T15:11:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-29T15:11:38Z"}, "message": "Merge #2943\n\n2943: Re-sync queries for memory usage measurnment r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "5fda93d6c8d3ea7e5e196936408103e5e6b4dd76", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fda93d6c8d3ea7e5e196936408103e5e6b4dd76"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d92a15c1637860a669970142abe37d1daf5f2c73", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeMaCqCRBK7hj4Ov3rIwAAdHIIAGlOgatBHLUboYe3vV4Dqkn0\nwNtMfy4jEt6h3eJpWjIxIlMZ10Zib77787MoCnUS/pq+nh/P3OVTTrMWyGbcd9um\n9Y4vsdTpEAR4lu4+w/FUlCzGh7ukNy2s/dfEZoSZVfaif5paeUs/KqdZXZlP4DJp\nDotdxjjPOTr+MowvdfiZ1NHO14M0dkvcG52bEnYTovuuzTlzdr5egaMJuPAk5uh2\nU+7OHBeDhja5RljJcTIM2Cz5nx7qLAXUtSbjXNewfgjiI1dyzhj/kDasCa0kj276\nKWb55cpGpuOCBgaqhUs0Bm/1XPcg9wAfVtKSzeOEwUJW0Xqji4ZeZ5eVKC9S0iE=\n=CKk9\n-----END PGP SIGNATURE-----\n", "payload": "tree 5fda93d6c8d3ea7e5e196936408103e5e6b4dd76\nparent b67f695956e17314b16f262cce9884f6d99c50dc\nparent f1720d7983b15a404dd3025c90afde9cc3773222\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1580310698 +0000\ncommitter GitHub <noreply@github.com> 1580310698 +0000\n\nMerge #2943\n\n2943: Re-sync queries for memory usage measurnment r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d92a15c1637860a669970142abe37d1daf5f2c73", "html_url": "https://github.com/rust-lang/rust/commit/d92a15c1637860a669970142abe37d1daf5f2c73", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d92a15c1637860a669970142abe37d1daf5f2c73/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b67f695956e17314b16f262cce9884f6d99c50dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/b67f695956e17314b16f262cce9884f6d99c50dc", "html_url": "https://github.com/rust-lang/rust/commit/b67f695956e17314b16f262cce9884f6d99c50dc"}, {"sha": "f1720d7983b15a404dd3025c90afde9cc3773222", "url": "https://api.github.com/repos/rust-lang/rust/commits/f1720d7983b15a404dd3025c90afde9cc3773222", "html_url": "https://github.com/rust-lang/rust/commit/f1720d7983b15a404dd3025c90afde9cc3773222"}], "stats": {"total": 73, "additions": 53, "deletions": 20}, "files": [{"sha": "a77bf6de6c5c16d2687a727ad21e28f242b23adb", "filename": "crates/ra_hir/src/db.rs", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/d92a15c1637860a669970142abe37d1daf5f2c73/crates%2Fra_hir%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d92a15c1637860a669970142abe37d1daf5f2c73/crates%2Fra_hir%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fdb.rs?ref=d92a15c1637860a669970142abe37d1daf5f2c73", "patch": "@@ -1,20 +1,24 @@\n //! FIXME: write short doc here\n \n pub use hir_def::db::{\n-    BodyQuery, BodyWithSourceMapQuery, ComputeCrateDefMapQuery, ConstDataQuery,\n+    AttrsQuery, BodyQuery, BodyWithSourceMapQuery, ComputeCrateDefMapQuery, ConstDataQuery,\n     CrateLangItemsQuery, DefDatabase, DefDatabaseStorage, DocumentationQuery, EnumDataQuery,\n-    ExprScopesQuery, FunctionDataQuery, GenericParamsQuery, ImplDataQuery, InternDatabase,\n-    InternDatabaseStorage, LangItemQuery, ModuleLangItemsQuery, RawItemsQuery, StaticDataQuery,\n-    StructDataQuery, TraitDataQuery, TypeAliasDataQuery,\n+    ExprScopesQuery, FunctionDataQuery, GenericParamsQuery, ImplDataQuery, InternConstQuery,\n+    InternDatabase, InternDatabaseStorage, InternEnumQuery, InternFunctionQuery, InternImplQuery,\n+    InternStaticQuery, InternStructQuery, InternTraitQuery, InternTypeAliasQuery, InternUnionQuery,\n+    LangItemQuery, ModuleLangItemsQuery, RawItemsQuery, StaticDataQuery, StructDataQuery,\n+    TraitDataQuery, TypeAliasDataQuery, UnionDataQuery,\n };\n pub use hir_expand::db::{\n-    AstDatabase, AstDatabaseStorage, AstIdMapQuery, MacroArgQuery, MacroDefQuery, MacroExpandQuery,\n-    ParseMacroQuery,\n+    AstDatabase, AstDatabaseStorage, AstIdMapQuery, InternMacroQuery, MacroArgQuery, MacroDefQuery,\n+    MacroExpandQuery, ParseMacroQuery,\n };\n pub use hir_ty::db::{\n-    AssociatedTyDataQuery, CallableItemSignatureQuery, DoInferQuery, FieldTypesQuery,\n-    GenericDefaultsQuery, GenericPredicatesQuery, HirDatabase, HirDatabaseStorage, ImplDatumQuery,\n-    ImplsForTraitQuery, ImplsInCrateQuery, StructDatumQuery, TraitDatumQuery, TraitSolveQuery,\n+    AssociatedTyDataQuery, AssociatedTyValueQuery, CallableItemSignatureQuery, DoInferQuery,\n+    FieldTypesQuery, GenericDefaultsQuery, GenericPredicatesForParamQuery, GenericPredicatesQuery,\n+    HirDatabase, HirDatabaseStorage, ImplDatumQuery, ImplSelfTyQuery, ImplTraitQuery,\n+    ImplsForTraitQuery, ImplsInCrateQuery, InternAssocTyValueQuery, InternChalkImplQuery,\n+    InternTypeCtorQuery, StructDatumQuery, TraitDatumQuery, TraitSolveQuery, TraitSolverQuery,\n     TyQuery, ValueTyQuery,\n };\n "}, {"sha": "45a58690b453ab2d9c9403d1005e829482b4be6e", "filename": "crates/ra_ide/src/change.rs", "status": "modified", "additions": 40, "deletions": 11, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/d92a15c1637860a669970142abe37d1daf5f2c73/crates%2Fra_ide%2Fsrc%2Fchange.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d92a15c1637860a669970142abe37d1daf5f2c73/crates%2Fra_ide%2Fsrc%2Fchange.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fchange.rs?ref=d92a15c1637860a669970142abe37d1daf5f2c73", "patch": "@@ -301,45 +301,74 @@ impl RootDatabase {\n             )*}\n         }\n         sweep_each_query![\n+            // SourceDatabase\n             ra_db::ParseQuery\n             ra_db::SourceRootCratesQuery\n+\n+            // AstDatabase\n             hir::db::AstIdMapQuery\n-            hir::db::ParseMacroQuery\n-            hir::db::MacroDefQuery\n+            hir::db::InternMacroQuery\n             hir::db::MacroArgQuery\n+            hir::db::MacroDefQuery\n+            hir::db::ParseMacroQuery\n             hir::db::MacroExpandQuery\n+\n+            // DefDatabase\n+            hir::db::RawItemsQuery\n+            hir::db::ComputeCrateDefMapQuery\n             hir::db::StructDataQuery\n+            hir::db::UnionDataQuery\n             hir::db::EnumDataQuery\n+            hir::db::ImplDataQuery\n             hir::db::TraitDataQuery\n-            hir::db::RawItemsQuery\n-            hir::db::ComputeCrateDefMapQuery\n-            hir::db::GenericParamsQuery\n-            hir::db::FunctionDataQuery\n             hir::db::TypeAliasDataQuery\n+            hir::db::FunctionDataQuery\n             hir::db::ConstDataQuery\n             hir::db::StaticDataQuery\n+            hir::db::BodyWithSourceMapQuery\n+            hir::db::BodyQuery\n+            hir::db::ExprScopesQuery\n+            hir::db::GenericParamsQuery\n+            hir::db::AttrsQuery\n             hir::db::ModuleLangItemsQuery\n             hir::db::CrateLangItemsQuery\n             hir::db::LangItemQuery\n             hir::db::DocumentationQuery\n-            hir::db::ExprScopesQuery\n+\n+            // InternDatabase\n+            hir::db::InternFunctionQuery\n+            hir::db::InternStructQuery\n+            hir::db::InternUnionQuery\n+            hir::db::InternEnumQuery\n+            hir::db::InternConstQuery\n+            hir::db::InternStaticQuery\n+            hir::db::InternTraitQuery\n+            hir::db::InternTypeAliasQuery\n+            hir::db::InternImplQuery\n+\n+            // HirDatabase\n             hir::db::DoInferQuery\n             hir::db::TyQuery\n             hir::db::ValueTyQuery\n+            hir::db::ImplSelfTyQuery\n+            hir::db::ImplTraitQuery\n             hir::db::FieldTypesQuery\n             hir::db::CallableItemSignatureQuery\n+            hir::db::GenericPredicatesForParamQuery\n             hir::db::GenericPredicatesQuery\n             hir::db::GenericDefaultsQuery\n-            hir::db::BodyWithSourceMapQuery\n-            hir::db::BodyQuery\n             hir::db::ImplsInCrateQuery\n             hir::db::ImplsForTraitQuery\n+            hir::db::TraitSolverQuery\n+            hir::db::InternTypeCtorQuery\n+            hir::db::InternChalkImplQuery\n+            hir::db::InternAssocTyValueQuery\n             hir::db::AssociatedTyDataQuery\n+            hir::db::AssociatedTyValueQuery\n+            hir::db::TraitSolveQuery\n             hir::db::TraitDatumQuery\n             hir::db::StructDatumQuery\n             hir::db::ImplDatumQuery\n-            hir::db::ImplDataQuery\n-            hir::db::TraitSolveQuery\n         ];\n         acc.sort_by_key(|it| std::cmp::Reverse(it.1));\n         acc"}]}