{"sha": "8873e33806487a0fb12143772b1a3c1544edbe0b", "node_id": "C_kwDOAAsO6NoAKDg4NzNlMzM4MDY0ODdhMGZiMTIxNDM3NzJiMWEzYzE1NDRlZGJlMGI", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@google.com", "date": "2022-08-29T23:43:47Z"}, "committer": {"name": "Tyler Mandry", "email": "tmandry@google.com", "date": "2022-08-29T23:46:51Z"}, "message": "Don't --bless in pre-push hook\n\nRunning with --bless causes the push to succeed if there are fixable\nformatting changes, but the changes don't make it into the push.\n\nWe should have the user rerun with --bless (or x.py fmt) and commit the\nchanges themselves (they might want to amend a particular commit, for\ninstance).", "tree": {"sha": "6a62db0d3b178207be63fc58aebcc060f334ad4a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a62db0d3b178207be63fc58aebcc060f334ad4a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8873e33806487a0fb12143772b1a3c1544edbe0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8873e33806487a0fb12143772b1a3c1544edbe0b", "html_url": "https://github.com/rust-lang/rust/commit/8873e33806487a0fb12143772b1a3c1544edbe0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8873e33806487a0fb12143772b1a3c1544edbe0b/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "03d488b48af9f66b91e9400387f781b82411fa82", "url": "https://api.github.com/repos/rust-lang/rust/commits/03d488b48af9f66b91e9400387f781b82411fa82", "html_url": "https://github.com/rust-lang/rust/commit/03d488b48af9f66b91e9400387f781b82411fa82"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "be7de3ebaf5712979fc6976b8a2edd4b1693d8e4", "filename": "src/etc/pre-push.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8873e33806487a0fb12143772b1a3c1544edbe0b/src%2Fetc%2Fpre-push.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8873e33806487a0fb12143772b1a3c1544edbe0b/src%2Fetc%2Fpre-push.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpre-push.sh?ref=8873e33806487a0fb12143772b1a3c1544edbe0b", "patch": "@@ -10,7 +10,7 @@ set -Eeuo pipefail\n # https://github.com/rust-lang/rust/issues/77620#issuecomment-705144570\n unset GIT_DIR\n ROOT_DIR=\"$(git rev-parse --show-toplevel)\"\n-COMMAND=\"$ROOT_DIR/x.py test tidy --bless\"\n+COMMAND=\"$ROOT_DIR/x.py test tidy\"\n \n if [[ \"$OSTYPE\" == \"msys\" || \"$OSTYPE\" == \"win32\" ]]; then\n   COMMAND=\"python $COMMAND\""}]}