{"sha": "b9c3633847cd74f514ebb3197876e8181a003f10", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5YzM2MzM4NDdjZDc0ZjUxNGViYjMxOTc4NzZlODE4MWEwMDNmMTA=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-12-16T11:38:43Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-03-24T14:36:09Z"}, "message": "ci: don't move the build to C: on GitHub Actions\n\nOn Azure Pipeliones, the C: filesystem is huge with a lot of free space,\nwhile D: is small. By default builds happened in D:, so we added a\nscript to symlink the big directories to C:, granting us more space.\n\n    Filesystem  Size  Used Avail Use%\n    C:          256G  143G  114G  56%\n    D:           14G  2.0G   13G  15%\n\nOn GitHub Actions instead C: is almost full, and we have a lot of free\nspace on D:, where the build happens.\n\n    Filesystem  Size  Used Avail Use%\n    C:          128G  114G   15G  89%\n    D:          56G   4.8G   52G   9%\n\nThis commit stops creating the symlink on GitHub Actions, fixing the out\nof disk space errors we were seeing on some Windows builders.", "tree": {"sha": "7495f96359eccd607421cf1564e52a0d0ebf7985", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7495f96359eccd607421cf1564e52a0d0ebf7985"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9c3633847cd74f514ebb3197876e8181a003f10", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl56GtkACgkQPgar6Auq\n8ZyNqRAAhyfbjpGBoDAvoEkNBs56VbJjTfjcqXfIikDdcYv5esUOZQWIhJgjxQWy\nzlovHoTQ9rX7L3P5D+LgatlHcViTdngK7KnIDxpWH+LEcgQb8imdR2lw6yoRtg4K\nZ9sng7VzdjfPMXcKeSCffYo8X3Nn/zjvm+nN+QksO5LuBM9lPaZj/RHUx4JwF8yI\nB4YW770mJRFTLzHwUgpNTej/+VNsT9mYB31CiZzGwDCo956AaLbkQsCEo3+jDFgs\nCxbuEpfDVZz5nsftwT/6/KgJvHN/w2vPAOhbNcTfTlIpGhLfLg4XVZnld4bA31w5\nw/qOjP1hnCG8UNG4xln9/P7TSWEn8jaabYtr001SUk6cOFCYF0L4cZpyZ+7WNhBB\nY6RqTtTxwhAGNtpjkoAp17wlM4bOsz3zO/Opkk3SYdJIPJMTzd2DwK0yMUd0L6j1\na8gGGvw1O5zgJ5pio2NbAwzK/3JjkfBHb5qn3s0pKNYfVotFPE5muvlZSr5SYONs\n4KyYRWAGk0NMPgAPr0/cRfXZJqbYbaLBpaXinIgavYOj1mfR3FhqW0Gf0T2VynwV\nYJZu7BO0HN3u0niNlzgKBKcNNlD1a3zeEGyn+3DlXe7f8w6uJ5Q8ljEpUnBvd77X\nnIsTnMDG7Qnt9zE9OmrEmkuQesi5rSSUzq8Vn8hZBHbqnwfvOd0=\n=1uLG\n-----END PGP SIGNATURE-----", "payload": "tree 7495f96359eccd607421cf1564e52a0d0ebf7985\nparent 9beb8f54774ca0d41dd2eb7622809f4073676757\nauthor Pietro Albini <pietro@pietroalbini.org> 1576496323 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1585060569 +0100\n\nci: don't move the build to C: on GitHub Actions\n\nOn Azure Pipeliones, the C: filesystem is huge with a lot of free space,\nwhile D: is small. By default builds happened in D:, so we added a\nscript to symlink the big directories to C:, granting us more space.\n\n    Filesystem  Size  Used Avail Use%\n    C:          256G  143G  114G  56%\n    D:           14G  2.0G   13G  15%\n\nOn GitHub Actions instead C: is almost full, and we have a lot of free\nspace on D:, where the build happens.\n\n    Filesystem  Size  Used Avail Use%\n    C:          128G  114G   15G  89%\n    D:          56G   4.8G   52G   9%\n\nThis commit stops creating the symlink on GitHub Actions, fixing the out\nof disk space errors we were seeing on some Windows builders.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9c3633847cd74f514ebb3197876e8181a003f10", "html_url": "https://github.com/rust-lang/rust/commit/b9c3633847cd74f514ebb3197876e8181a003f10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9c3633847cd74f514ebb3197876e8181a003f10/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9beb8f54774ca0d41dd2eb7622809f4073676757", "url": "https://api.github.com/repos/rust-lang/rust/commits/9beb8f54774ca0d41dd2eb7622809f4073676757", "html_url": "https://github.com/rust-lang/rust/commit/9beb8f54774ca0d41dd2eb7622809f4073676757"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "904fd3b60f882acaf7177cdcd9eaf8ca388acdfc", "filename": "src/ci/scripts/symlink-build-dir.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b9c3633847cd74f514ebb3197876e8181a003f10/src%2Fci%2Fscripts%2Fsymlink-build-dir.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b9c3633847cd74f514ebb3197876e8181a003f10/src%2Fci%2Fscripts%2Fsymlink-build-dir.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fsymlink-build-dir.sh?ref=b9c3633847cd74f514ebb3197876e8181a003f10", "patch": "@@ -9,7 +9,7 @@ IFS=$'\\n\\t'\n \n source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n \n-if isWindows; then\n+if isWindows && isAzurePipelines; then\n     cmd //c \"mkdir c:\\\\MORE_SPACE\"\n     cmd //c \"mklink /J build c:\\\\MORE_SPACE\"\n fi"}]}