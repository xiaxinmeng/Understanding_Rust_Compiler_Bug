{"sha": "16202862b2540a5259c6011b27ec5278da71879c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2MjAyODYyYjI1NDBhNTI1OWM2MDExYjI3ZWM1Mjc4ZGE3MTg3OWM=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2017-02-25T12:13:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-25T12:13:21Z"}, "message": "Rollup merge of #39945 - petrochenkov:llvmtarg, r=alexcrichton\n\nUse ARM instead of SystemZ for testing uninstalled targets\n\nThis needs some explanation.\n`config.toml` has section `targets` listing backends that are built during LLVM build:\n```\ntargets = \"X86;ARM;AArch64;Mips;PowerPC;SystemZ;JSBackend;MSP430;Sparc;NVPTX\"\n```\nIt would be reasonable to expect that `targets = \"X86\"` would be enough for doing a local build in typical case (building on x86 and not working on some non-x86 platform-specific functionality).\nHowever, for `x.py test` to pass successfully you have to add ARM and SystemZ to the target list as well (`targets = \"X86;ARM;SystemZ\"`), because two tests (`compile-fail/issue-37131.rs` and `run-make\\target-without-atomics`) require these architectures to be enabled in LLVM.\nThis patch moves `compile-fail/issue-37131.rs` from SystemZ to ARM, so `targets = \"X86;ARM\"` becomes sufficient for running the full test suite without errors.", "tree": {"sha": "c72533fe734324d33bc1e9952acad7e9dcd0d9bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c72533fe734324d33bc1e9952acad7e9dcd0d9bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16202862b2540a5259c6011b27ec5278da71879c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16202862b2540a5259c6011b27ec5278da71879c", "html_url": "https://github.com/rust-lang/rust/commit/16202862b2540a5259c6011b27ec5278da71879c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16202862b2540a5259c6011b27ec5278da71879c/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8ab222fd5b5ee0832f3bd4d0046b724ff51d014", "url": "https://api.github.com/repos/rust-lang/rust/commits/a8ab222fd5b5ee0832f3bd4d0046b724ff51d014", "html_url": "https://github.com/rust-lang/rust/commit/a8ab222fd5b5ee0832f3bd4d0046b724ff51d014"}, {"sha": "9322a38534c9ad4e6c6a048580ffd68e842d1077", "url": "https://api.github.com/repos/rust-lang/rust/commits/9322a38534c9ad4e6c6a048580ffd68e842d1077", "html_url": "https://github.com/rust-lang/rust/commit/9322a38534c9ad4e6c6a048580ffd68e842d1077"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "efb0b249a8a59cbc84795eeebe51de8ef0026885", "filename": "src/test/compile-fail/issue-37131.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/16202862b2540a5259c6011b27ec5278da71879c/src%2Ftest%2Fcompile-fail%2Fissue-37131.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16202862b2540a5259c6011b27ec5278da71879c/src%2Ftest%2Fcompile-fail%2Fissue-37131.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-37131.rs?ref=16202862b2540a5259c6011b27ec5278da71879c", "patch": "@@ -11,8 +11,8 @@\n // Tests that compiling for a target which is not installed will result in a helpful\n // error message.\n \n-// compile-flags: --target=s390x-unknown-linux-gnu\n-// ignore s390x\n+// compile-flags: --target=thumbv6m-none-eabi\n+// ignore-arm\n \n // error-pattern:target may not be installed\n fn main() { }"}]}