{"sha": "fbbe85c6bafce59e1be4a966c1529f396bd546f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiYmU4NWM2YmFmY2U1OWUxYmU0YTk2NmMxNTI5ZjM5NmJkNTQ2ZjA=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-04-15T19:46:44Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-04-15T19:48:05Z"}, "message": "Rollup merge of #32935 - pierzchalski:restore_trait_impl_docs, r=alexcrichton\n\nRestore trait impl docs\n\nCurrently, documentation on methods in trait implementations doesn't get rendered. This changes that;  trait implementations have all documentation associated with impl items displayed (documentation from the trait definition is ignored).\n\nFixes #24838\nFixes #26871", "tree": {"sha": "6c00818acb8f7fa507d81a7b78e191b28e1f46a5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c00818acb8f7fa507d81a7b78e191b28e1f46a5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fbbe85c6bafce59e1be4a966c1529f396bd546f0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXEUV1AAoJEDu/TT4u95+Y9+wP/RSBPubipDqC90+2e3iRTWOn\nt8W4FW9U12XZDvEM3UKimGaXtjLZ0Oty2VCnnUD8n/Hel9OLETXfeT86IROnbse5\ngxYxZ+SJWLy0M89cokHbIynUbOKv5I1Vyf6ud0ev7ZRk/Dm4M8d7iQtdqnUebWVA\nt0scCD3SlEyX+aR481zUhvV/KT/gFcDq4lPBU8d+LxV1+S84L/aviudbifL8oYDT\nnclmKE8PmPnOWlFyl26YQKCPinJqoD1l1kdc/oxoYaO3k3iYLayvV22Yya+LVqtH\nSHjfjuodGaMg37ubXbAtSeF2PKT7OQccaLelRDMrrBKerYY8fOEpqFGv9/DCVj9U\nksw5j4uUsZJ7PbQSL5JKn0nxgYDXyzpfA1arBK67T/HiXjvuiaZL4pqYLvFUhC25\nggZ5pBM+XgZSjGIZSk9RNUYChke/mF2fWpN4KPancOTNDLN6atHUv/mdCyIzFsgf\naSkGACVQBoWAnhtmNLwTuNsUwLOaj5Oc1A62hWoFbODWa54+3QIExWdbhtNJLz+q\nhqibv0zMtPCMqLe5pfTpCvn7temXVrqNI5Nyc31XfJa8bTg4PLxEb+QKeYi7LDNE\npy4p+nT/5mACwUBRwiKGiqFbaf0EMTp9RS1yJdJ0rVKom0Ccm+Yvc/khIluE+k62\nvbEunUa/2ypQFcPXfmEI\n=aQBY\n-----END PGP SIGNATURE-----", "payload": "tree 6c00818acb8f7fa507d81a7b78e191b28e1f46a5\nparent 50932f5c6a358be8c26f48d25ee5be0547072b92\nparent ec5e0f81cf54ca287e6652923e1bf46f4fc1c783\nauthor Manish Goregaokar <manishsmail@gmail.com> 1460749604 +0530\ncommitter Manish Goregaokar <manishsmail@gmail.com> 1460749685 +0530\n\nRollup merge of #32935 - pierzchalski:restore_trait_impl_docs, r=alexcrichton\n\nRestore trait impl docs\n\nCurrently, documentation on methods in trait implementations doesn't get rendered. This changes that;  trait implementations have all documentation associated with impl items displayed (documentation from the trait definition is ignored).\n\nFixes #24838\nFixes #26871\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fbbe85c6bafce59e1be4a966c1529f396bd546f0", "html_url": "https://github.com/rust-lang/rust/commit/fbbe85c6bafce59e1be4a966c1529f396bd546f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fbbe85c6bafce59e1be4a966c1529f396bd546f0/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "50932f5c6a358be8c26f48d25ee5be0547072b92", "url": "https://api.github.com/repos/rust-lang/rust/commits/50932f5c6a358be8c26f48d25ee5be0547072b92", "html_url": "https://github.com/rust-lang/rust/commit/50932f5c6a358be8c26f48d25ee5be0547072b92"}, {"sha": "ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783", "html_url": "https://github.com/rust-lang/rust/commit/ec5e0f81cf54ca287e6652923e1bf46f4fc1c783"}], "stats": {"total": 93, "additions": 85, "deletions": 8}, "files": [{"sha": "ba1fbc75c18a3b3343bac5c448eb4f853e9814e6", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/fbbe85c6bafce59e1be4a966c1529f396bd546f0/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fbbe85c6bafce59e1be4a966c1529f396bd546f0/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=fbbe85c6bafce59e1be4a966c1529f396bd546f0", "patch": "@@ -2489,7 +2489,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n     }\n \n     fn doctraititem(w: &mut fmt::Formatter, cx: &Context, item: &clean::Item,\n-                    link: AssocItemLink, render_static: bool,\n+                    link: AssocItemLink, render_static: bool, is_default_item: bool,\n                     outer_version: Option<&str>) -> fmt::Result {\n         let shortty = shortty(item);\n         let name = item.name.as_ref().unwrap();\n@@ -2540,17 +2540,16 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n             _ => panic!(\"can't make docs for trait item with name {:?}\", item.name)\n         }\n \n-        match link {\n-            AssocItemLink::Anchor if !is_static || render_static => {\n-                document(w, cx, item)\n-            },\n-            _ => Ok(()),\n+        if !is_default_item && (!is_static || render_static) {\n+            document(w, cx, item)\n+        } else {\n+            Ok(())\n         }\n     }\n \n     write!(w, \"<div class='impl-items'>\")?;\n     for trait_item in &i.impl_.items {\n-        doctraititem(w, cx, trait_item, link, render_header, outer_version)?;\n+        doctraititem(w, cx, trait_item, link, render_header, false, outer_version)?;\n     }\n \n     fn render_default_items(w: &mut fmt::Formatter,\n@@ -2567,7 +2566,7 @@ fn render_impl(w: &mut fmt::Formatter, cx: &Context, i: &Impl, link: AssocItemLi\n             let did = i.trait_.as_ref().unwrap().def_id().unwrap();\n             let assoc_link = AssocItemLink::GotoSource(did, &i.provided_trait_methods);\n \n-            doctraititem(w, cx, trait_item, assoc_link, render_static,\n+            doctraititem(w, cx, trait_item, assoc_link, render_static, true,\n                          outer_version)?;\n         }\n         Ok(())"}, {"sha": "5eccf97bb5f6f25fda3d1d43ee6f040358221d2e", "filename": "src/test/rustdoc/manual_impl.rs", "status": "added", "additions": 78, "deletions": 0, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/fbbe85c6bafce59e1be4a966c1529f396bd546f0/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fbbe85c6bafce59e1be4a966c1529f396bd546f0/src%2Ftest%2Frustdoc%2Fmanual_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmanual_impl.rs?ref=fbbe85c6bafce59e1be4a966c1529f396bd546f0", "patch": "@@ -0,0 +1,78 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// @has manual_impl/trait.T.html\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait definition.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n+/// Docs associated with the trait definition.\n+pub trait T {\n+    /// Docs associated with the trait a_method definition.\n+    fn a_method(&self) -> usize;\n+\n+    /// Docs associated with the trait b_method definition.\n+    fn b_method(&self) -> usize {\n+        self.a_method()\n+    }\n+}\n+\n+// @has manual_impl/struct.S1.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S1 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S1 trait a_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n+pub struct S1(usize);\n+\n+/// Docs associated with the S1 trait implementation.\n+impl T for S1 {\n+    /// Docs associated with the S1 trait a_method implementation.\n+    fn a_method(&self) -> usize {\n+        self.0\n+    }\n+}\n+\n+// @has manual_impl/struct.S2.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait a_method implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S2 trait b_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait b_method definition.'\n+pub struct S2(usize);\n+\n+/// Docs associated with the S2 trait implementation.\n+impl T for S2 {\n+    /// Docs associated with the S2 trait a_method implementation.\n+    fn a_method(&self) -> usize {\n+        self.0\n+    }\n+\n+    /// Docs associated with the S2 trait b_method implementation.\n+    fn b_method(&self) -> usize {\n+        5\n+    }\n+}\n+\n+// @has manual_impl/struct.S3.html '//*[@class=\"trait\"]' 'T'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S3 trait implementation.'\n+// @has  - '//*[@class=\"docblock\"]' 'Docs associated with the S3 trait b_method implementation.'\n+// @!has - '//*[@class=\"docblock\"]' 'Docs associated with the trait a_method definition.'\n+pub struct S3(usize);\n+\n+/// Docs associated with the S3 trait implementation.\n+impl T for S3 {\n+    fn a_method(&self) -> usize {\n+        self.0\n+    }\n+\n+    /// Docs associated with the S3 trait b_method implementation.\n+    fn b_method(&self) -> usize {\n+        5\n+    }\n+}"}]}