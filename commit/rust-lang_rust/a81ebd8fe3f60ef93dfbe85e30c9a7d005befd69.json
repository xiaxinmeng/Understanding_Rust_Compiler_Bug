{"sha": "a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4MWViZDhmZTNmNjBlZjkzZGZiZTg1ZTMwYzlhN2QwMDViZWZkNjk=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-12-29T18:27:23Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-12-29T18:27:45Z"}, "message": "rustup; add an interesting alias test case", "tree": {"sha": "fa0c1c7edf9b72a86a69e6fafcb72e3f4ab207ee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa0c1c7edf9b72a86a69e6fafcb72e3f4ab207ee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "html_url": "https://github.com/rust-lang/rust/commit/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e18c681eeac9a447616dbb3035220eabe4d4e2b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/e18c681eeac9a447616dbb3035220eabe4d4e2b1", "html_url": "https://github.com/rust-lang/rust/commit/e18c681eeac9a447616dbb3035220eabe4d4e2b1"}], "stats": {"total": 20, "additions": 19, "deletions": 1}, "files": [{"sha": "e261b13e81830bf15e6d2a096794be212d1278fd", "filename": "rust-version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69/rust-version", "raw_url": "https://github.com/rust-lang/rust/raw/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69/rust-version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rust-version?ref=a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "patch": "@@ -1 +1 @@\n-15d1f811963649c2f18a88c8e0b39958ec02fd70\n+158f8d034b15e65ba8dc0d066358dd0632bfcd6e"}, {"sha": "5d63fc1d44a5b43a9f743f8163615c2970482ede", "filename": "tests/compile-fail/box-cell-alias.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69/tests%2Fcompile-fail%2Fbox-cell-alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69/tests%2Fcompile-fail%2Fbox-cell-alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fbox-cell-alias.rs?ref=a81ebd8fe3f60ef93dfbe85e30c9a7d005befd69", "patch": "@@ -0,0 +1,18 @@\n+// compile-flags: -Zmiri-track-raw-pointers\n+\n+// Taken from <https://github.com/rust-lang/unsafe-code-guidelines/issues/194#issuecomment-520934222>.\n+\n+use std::cell::Cell;\n+\n+fn helper(val: Box<Cell<u8>>, ptr: *const Cell<u8>) -> u8 {\n+    val.set(10);\n+    unsafe { (*ptr).set(20); } //~ ERROR does not have an appropriate item in the borrow stack\n+    val.get()\n+}\n+\n+fn main() {\n+    let val: Box<Cell<u8>> = Box::new(Cell::new(25));\n+    let ptr: *const Cell<u8> = &*val;\n+    let res = helper(val, ptr);\n+    assert_eq!(res, 20);\n+}"}]}