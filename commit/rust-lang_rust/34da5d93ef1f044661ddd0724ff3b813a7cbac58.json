{"sha": "34da5d93ef1f044661ddd0724ff3b813a7cbac58", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0ZGE1ZDkzZWYxZjA0NDY2MWRkZDA3MjRmZjNiODEzYTdjYmFjNTg=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-11-27T10:05:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-27T10:05:37Z"}, "message": "Merge pull request #2246 from lukasstevens/master\n\nCheck for word beginning in stutter lint", "tree": {"sha": "1952897a1f344bed54b1ef713d86732824c2c9e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1952897a1f344bed54b1ef713d86732824c2c9e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/34da5d93ef1f044661ddd0724ff3b813a7cbac58", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaG+NxCRBK7hj4Ov3rIwAAdHIIAC3F1bbauDhBJqxErcKV8Nzt\nhWeEMW1xVc2UBuJeb6VBtNfSGE4mWmAUeoKzzz+1juOuZ0PD7BxqatErw2z0zinT\n37CuHq3XB4U3sOTkwROzwpYkv/YAYcML9GRP7JgwNaC7ojDZI6D9MvloxkeoU6b4\nfS59faILvBjlaRw6UNuUYyJDt8ca1s4PI7kmjXlcnRLjyFy9/+VArt9wy3uiqvbU\nTsvDFGwCW0htU70mzRSTTG4zTkI2p0LsC3xOwkQu+OLytqNsmHFX3Kj8CIEEk24b\nT7g1s+msb7IHjP+nRGxWq8dSazCvzXQ1o8MhJGdzXQX8YEvtQHOJDc86sTvKSHo=\n=2+z4\n-----END PGP SIGNATURE-----\n", "payload": "tree 1952897a1f344bed54b1ef713d86732824c2c9e2\nparent b7a167549c5d6758d32b19bc71fb537369f18232\nparent d55d4e5144602b11544ea5d8047d45d9cf02f98b\nauthor Oliver Schneider <oli-obk@users.noreply.github.com> 1511777137 +0100\ncommitter GitHub <noreply@github.com> 1511777137 +0100\n\nMerge pull request #2246 from lukasstevens/master\n\nCheck for word beginning in stutter lint"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/34da5d93ef1f044661ddd0724ff3b813a7cbac58", "html_url": "https://github.com/rust-lang/rust/commit/34da5d93ef1f044661ddd0724ff3b813a7cbac58", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/34da5d93ef1f044661ddd0724ff3b813a7cbac58/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b7a167549c5d6758d32b19bc71fb537369f18232", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7a167549c5d6758d32b19bc71fb537369f18232", "html_url": "https://github.com/rust-lang/rust/commit/b7a167549c5d6758d32b19bc71fb537369f18232"}, {"sha": "d55d4e5144602b11544ea5d8047d45d9cf02f98b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d55d4e5144602b11544ea5d8047d45d9cf02f98b", "html_url": "https://github.com/rust-lang/rust/commit/d55d4e5144602b11544ea5d8047d45d9cf02f98b"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "b3dd275f6684c73cbd4827536edf91d070cce482", "filename": "clippy_lints/src/enum_variants.rs", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/34da5d93ef1f044661ddd0724ff3b813a7cbac58/clippy_lints%2Fsrc%2Fenum_variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34da5d93ef1f044661ddd0724ff3b813a7cbac58/clippy_lints%2Fsrc%2Fenum_variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_variants.rs?ref=34da5d93ef1f044661ddd0724ff3b813a7cbac58", "patch": "@@ -264,8 +264,17 @@ impl EarlyLintPass for EnumVariantNames {\n                         let matching = partial_match(mod_camel, &item_camel);\n                         let rmatching = partial_rmatch(mod_camel, &item_camel);\n                         let nchars = mod_camel.chars().count();\n+\n+                        let is_word_beginning = |c: char| {\n+                            c == '_' || c.is_uppercase() || c.is_numeric()\n+                        };\n+\n                         if matching == nchars {\n-                            span_lint(cx, STUTTER, item.span, \"item name starts with its containing module's name\");\n+                            match item_camel.chars().nth(nchars) {\n+                                Some(c) if is_word_beginning(c) =>\n+                                    span_lint(cx, STUTTER, item.span, \"item name starts with its containing module's name\"),\n+                                _ => ()\n+                            }\n                         }\n                         if rmatching == nchars {\n                             span_lint(cx, STUTTER, item.span, \"item name ends with its containing module's name\");"}, {"sha": "761339b0a8eabfc53c6873b4edd20cccbe470937", "filename": "tests/ui/stutter.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/34da5d93ef1f044661ddd0724ff3b813a7cbac58/tests%2Fui%2Fstutter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34da5d93ef1f044661ddd0724ff3b813a7cbac58/tests%2Fui%2Fstutter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fstutter.rs?ref=34da5d93ef1f044661ddd0724ff3b813a7cbac58", "patch": "@@ -9,6 +9,10 @@ mod foo {\n     pub fn bar_foo() {}\n     pub struct FooCake {}\n     pub enum CakeFoo {}\n+    pub struct Foo7Bar;\n+\n+    // Should not warn\n+    pub struct Foobar;\n }\n \n fn main() {}"}, {"sha": "e6465a2bce98bb3f9de7b046cf36a8e8db95e6b7", "filename": "tests/ui/stutter.stderr", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/34da5d93ef1f044661ddd0724ff3b813a7cbac58/tests%2Fui%2Fstutter.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/34da5d93ef1f044661ddd0724ff3b813a7cbac58/tests%2Fui%2Fstutter.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fstutter.stderr?ref=34da5d93ef1f044661ddd0724ff3b813a7cbac58", "patch": "@@ -24,3 +24,9 @@ error: item name ends with its containing module's name\n 11 |     pub enum CakeFoo {}\n    |     ^^^^^^^^^^^^^^^^^^^\n \n+error: item name starts with its containing module's name\n+  --> $DIR/stutter.rs:12:5\n+   |\n+12 |     pub struct Foo7Bar;\n+   |     ^^^^^^^^^^^^^^^^^^^\n+"}]}