{"sha": "c3a7d36c6e2da097f705525fc6bf7726360601f5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzYTdkMzZjNmUyZGEwOTdmNzA1NTI1ZmM2YmY3NzI2MzYwNjAxZjU=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-12-10T23:08:34Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-12-14T20:26:40Z"}, "message": "Support regexes in custom normalization in UI tests", "tree": {"sha": "3d8e8f32ada45e6312c5530237d5ec3c3e4842fd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3d8e8f32ada45e6312c5530237d5ec3c3e4842fd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3a7d36c6e2da097f705525fc6bf7726360601f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3a7d36c6e2da097f705525fc6bf7726360601f5", "html_url": "https://github.com/rust-lang/rust/commit/c3a7d36c6e2da097f705525fc6bf7726360601f5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3a7d36c6e2da097f705525fc6bf7726360601f5/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3fe1d9c52445cb5cbb5bd9424ec1f8d6cc65a29f", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fe1d9c52445cb5cbb5bd9424ec1f8d6cc65a29f", "html_url": "https://github.com/rust-lang/rust/commit/3fe1d9c52445cb5cbb5bd9424ec1f8d6cc65a29f"}], "stats": {"total": 83, "additions": 48, "deletions": 35}, "files": [{"sha": "00f556bf0b28f72643a5fb274ea591d3c0eb38bb", "filename": "src/Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -375,6 +375,7 @@ dependencies = [\n  \"libc 0.2.34 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.3.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miow 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-serialize 0.3.24 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]"}, {"sha": "5963a58a2d2f9fc2752a9195ca8b85b3780baec6", "filename": "src/test/ui/changing-crates.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fchanging-crates.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fchanging-crates.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fchanging-crates.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:changing-crates-a1.rs\n // aux-build:changing-crates-b.rs\n // aux-build:changing-crates-a2.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "50287fa3fde9f69bbdd178a4201d4a89a92b6408", "filename": "src/test/ui/changing-crates.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fchanging-crates.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fchanging-crates.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fchanging-crates.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/changing-crates.rs:19:1\n+  --> $DIR/changing-crates.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/changing-crates.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/changing-crates.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "c529873e732849a69d061f3f4641983b7d67284f", "filename": "src/test/ui/svh-change-lit.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-lit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-lit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-lit.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-lit.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "94e845c527c6a475789bbd67119a8b24d42ae631", "filename": "src/test/ui/svh-change-lit.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-lit.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-lit.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-lit.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-lit.rs:19:1\n+  --> $DIR/svh-change-lit.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-lit.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-lit.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "ad51cbc5ec831bc758082cf1a6a8f72b29e0d58b", "filename": "src/test/ui/svh-change-significant-cfg.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-significant-cfg.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "d2744771ec7a33b18930741f7a0f32542a48d548", "filename": "src/test/ui/svh-change-significant-cfg.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-significant-cfg.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-significant-cfg.rs:19:1\n+  --> $DIR/svh-change-significant-cfg.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-significant-cfg.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-significant-cfg.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "ae17ff3feb79de8f5ffc7500ee0554ea383d4c8e", "filename": "src/test/ui/svh-change-trait-bound.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-trait-bound.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-trait-bound.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-trait-bound.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-trait-bound.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "e272f399f797f11440b40ac20d64b387f3f4b8ae", "filename": "src/test/ui/svh-change-trait-bound.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-trait-bound.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-trait-bound.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-trait-bound.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-trait-bound.rs:19:1\n+  --> $DIR/svh-change-trait-bound.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-trait-bound.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-trait-bound.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "5b796a3f5c0bf5eff00ce8fcfb4f45c2b4204bf6", "filename": "src/test/ui/svh-change-type-arg.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-arg.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-type-arg.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "d94dd5e522e1d5ee5bdab9194396d3570d7625ca", "filename": "src/test/ui/svh-change-type-arg.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-arg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-arg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-arg.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-type-arg.rs:19:1\n+  --> $DIR/svh-change-type-arg.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-arg.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-arg.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "88bf146760f9b3f1fc3641f2b4b7d42618ff3539", "filename": "src/test/ui/svh-change-type-ret.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-ret.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-ret.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-ret.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-type-ret.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "4484faabbf45b5611f030ef5975e4e7e4cdb671c", "filename": "src/test/ui/svh-change-type-ret.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-ret.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-ret.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-ret.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-type-ret.rs:19:1\n+  --> $DIR/svh-change-type-ret.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-ret.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-ret.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "c9a167c5a02cfde170a0f0047e3293084dda7d9f", "filename": "src/test/ui/svh-change-type-static.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-static.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-a-base.rs\n // aux-build:svh-b.rs\n // aux-build:svh-a-change-type-static.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n extern crate a;\n extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on"}, {"sha": "24c5acbf6f2aa1481a103f3428a4537976e8211f", "filename": "src/test/ui/svh-change-type-static.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-static.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-change-type-static.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-change-type-static.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `a` which `b` depends on\n-  --> $DIR/svh-change-type-static.rs:19:1\n+  --> $DIR/svh-change-type-static.rs:20:1\n    |\n-19 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n+20 | extern crate b; //~ ERROR: found possibly newer version of crate `a` which `b` depends on\n    | ^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `a`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-static.stage1-x86_64-pc-windows-gnu.aux/a.dll\n-           crate `b`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-change-type-static.stage1-x86_64-pc-windows-gnu.aux/b.dll\n+           crate `a`: $PATH_a\n+           crate `b`: $PATH_b\n \n error: aborting due to previous error\n "}, {"sha": "3a87f6bfc77e47bea7f801c09d5d9b70a8ed7a7b", "filename": "src/test/ui/svh-use-trait.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-use-trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-use-trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-use-trait.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -14,6 +14,7 @@\n // aux-build:svh-uta-base.rs\n // aux-build:svh-utb.rs\n // aux-build:svh-uta-change-use-trait.rs\n+// normalize-stderr-test: \"(crate `(\\w+)`:) .*\" -> \"$1 $$PATH_$2\"\n \n //! \"compile-fail/svh-uta-trait.rs\" is checking that we detect a\n //! change from `use foo::TraitB` to use `foo::TraitB` in the hash"}, {"sha": "e695d60e2a12725dc71826f0e9f14c74567f167f", "filename": "src/test/ui/svh-use-trait.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-use-trait.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Fsvh-use-trait.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh-use-trait.stderr?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -1,13 +1,13 @@\n error[E0460]: found possibly newer version of crate `uta` which `utb` depends on\n-  --> $DIR/svh-use-trait.rs:24:1\n+  --> $DIR/svh-use-trait.rs:25:1\n    |\n-24 | extern crate utb; //~ ERROR: found possibly newer version of crate `uta` which `utb` depends\n+25 | extern crate utb; //~ ERROR: found possibly newer version of crate `uta` which `utb` depends\n    | ^^^^^^^^^^^^^^^^^\n    |\n    = note: perhaps that crate needs to be recompiled?\n    = note: the following crate versions were found:\n-           crate `uta`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-use-trait.stage1-x86_64-pc-windows-gnu.aux/uta.dll\n-           crate `utb`: /?/C:/msys64/home/we/rust/build/x86_64-pc-windows-gnu/test/ui/svh-use-trait.stage1-x86_64-pc-windows-gnu.aux/utb.dll\n+           crate `uta`: $PATH_uta\n+           crate `utb`: $PATH_utb\n \n error: aborting due to previous error\n "}, {"sha": "285b079cf96c80495a5c27925003ddeff4702bc2", "filename": "src/test/ui/transmute/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -8,8 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// normalize-stderr-32bit: \"&str (64 bits)\" -> \"&str ($STR bits)\"\n-// normalize-stderr-64bit: \"&str (128 bits)\" -> \"&str ($STR bits)\"\n+// normalize-stderr-32bit: \"&str \\(64 bits\\)\" -> \"&str ($$STR bits)\"\n+// normalize-stderr-64bit: \"&str \\(128 bits\\)\" -> \"&str ($$STR bits)\"\n \n \n "}, {"sha": "494c57b161fea13e2ef81c4cda67022376086cbe", "filename": "src/tools/compiletest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2FCargo.toml?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -9,6 +9,7 @@ env_logger = { version = \"0.4\", default-features = false }\n filetime = \"0.1\"\n getopts = \"0.2\"\n log = \"0.3\"\n+regex = \"0.2\"\n rustc-serialize = \"0.3\"\n \n [target.'cfg(unix)'.dependencies]"}, {"sha": "8546289fdec09c49ea0aa71852fba4e9e23955fb", "filename": "src/tools/compiletest/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fmain.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -22,6 +22,7 @@ extern crate libc;\n #[macro_use]\n extern crate log;\n extern crate rustc_serialize;\n+extern crate regex;\n extern crate test;\n \n use std::env;"}, {"sha": "06e798554167b9637b591b8b5039a8cc9aed99a8", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3a7d36c6e2da097f705525fc6bf7726360601f5/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=c3a7d36c6e2da097f705525fc6bf7726360601f5", "patch": "@@ -20,6 +20,7 @@ use json;\n use header::TestProps;\n use test::TestPaths;\n use util::logv;\n+use regex::Regex;\n \n use std::collections::HashMap;\n use std::collections::HashSet;\n@@ -2677,7 +2678,8 @@ impl<'test> TestCx<'test> {\n               .replace(\"\\r\\n\", \"\\n\") // normalize for linebreaks on windows\n               .replace(\"\\t\", \"\\\\t\"); // makes tabs visible\n         for rule in custom_rules {\n-            normalized = normalized.replace(&rule.0, &rule.1);\n+            let re = Regex::new(&rule.0).expect(\"bad regex in custom normalization rule\");\n+            normalized = re.replace_all(&normalized, &rule.1[..]).into_owned();\n         }\n         normalized\n     }"}]}