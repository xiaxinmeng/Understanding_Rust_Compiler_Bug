{"sha": "dcf736d7adafc722b2f548cd033f974469543821", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjZjczNmQ3YWRhZmM3MjJiMmY1NDhjZDAzM2Y5NzQ0Njk1NDM4MjE=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2018-11-26T14:28:42Z"}, "committer": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2018-11-30T04:15:20Z"}, "message": "tests: use alloc instead of libc in unnecessary-extern-crate, to make it work on wasm.", "tree": {"sha": "8fa871483a61cc1169030772d62a660704a25b85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8fa871483a61cc1169030772d62a660704a25b85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dcf736d7adafc722b2f548cd033f974469543821", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dcf736d7adafc722b2f548cd033f974469543821", "html_url": "https://github.com/rust-lang/rust/commit/dcf736d7adafc722b2f548cd033f974469543821", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dcf736d7adafc722b2f548cd033f974469543821/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f385589dde6f39ec1deedceacd05f554d625fd50", "url": "https://api.github.com/repos/rust-lang/rust/commits/f385589dde6f39ec1deedceacd05f554d625fd50", "html_url": "https://github.com/rust-lang/rust/commit/f385589dde6f39ec1deedceacd05f554d625fd50"}], "stats": {"total": 62, "additions": 29, "deletions": 33}, "files": [{"sha": "110cfefcd92e597cad757ea3bbdb5e086f75a19f", "filename": "src/test/ui/unnecessary-extern-crate.rs", "status": "modified", "additions": 17, "deletions": 21, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/dcf736d7adafc722b2f548cd033f974469543821/src%2Ftest%2Fui%2Funnecessary-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dcf736d7adafc722b2f548cd033f974469543821/src%2Ftest%2Fui%2Funnecessary-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funnecessary-extern-crate.rs?ref=dcf736d7adafc722b2f548cd033f974469543821", "patch": "@@ -13,10 +13,10 @@\n #![deny(unused_extern_crates)]\n #![feature(alloc, test, libc, crate_visibility_modifier)]\n \n-extern crate alloc;\n+extern crate libc;\n //~^ ERROR unused extern crate\n //~| HELP remove\n-extern crate alloc as x;\n+extern crate libc as x;\n //~^ ERROR unused extern crate\n //~| HELP remove\n \n@@ -27,22 +27,22 @@ extern crate test;\n \n pub extern crate test as y;\n \n-pub extern crate libc;\n+pub extern crate alloc;\n \n-pub(crate) extern crate libc as a;\n+pub(crate) extern crate alloc as a;\n \n-crate extern crate libc as b;\n+crate extern crate alloc as b;\n \n mod foo {\n-    pub(in crate::foo) extern crate libc as c;\n+    pub(in crate::foo) extern crate alloc as c;\n \n-    pub(super) extern crate libc as d;\n+    pub(super) extern crate alloc as d;\n \n-    extern crate alloc;\n+    extern crate libc;\n     //~^ ERROR unused extern crate\n     //~| HELP remove\n \n-    extern crate alloc as x;\n+    extern crate libc as x;\n     //~^ ERROR unused extern crate\n     //~| HELP remove\n \n@@ -51,35 +51,31 @@ mod foo {\n     pub extern crate test as y;\n \n     mod bar {\n-        extern crate alloc;\n+        extern crate libc;\n         //~^ ERROR unused extern crate\n         //~| HELP remove\n \n-        extern crate alloc as x;\n+        extern crate libc as x;\n         //~^ ERROR unused extern crate\n         //~| HELP remove\n \n-        pub(in crate::foo::bar) extern crate libc as e;\n+        pub(in crate::foo::bar) extern crate alloc as e;\n \n         fn dummy() {\n-            unsafe {\n-                e::getpid();\n-            }\n+            e::string::String::new();\n         }\n     }\n \n     fn dummy() {\n-        unsafe {\n-            c::getpid();\n-            d::getpid();\n-        }\n+        c::string::String::new();\n+        d::string::String::new();\n     }\n }\n \n \n fn main() {\n-    unsafe { a::getpid(); }\n-    unsafe { b::getpid(); }\n+    a::string::String::new();\n+    b::string::String::new();\n \n     proc_macro::TokenStream::new();\n }"}, {"sha": "1315bff791deb9062d6623b4a409b3ca6beb3611", "filename": "src/test/ui/unnecessary-extern-crate.stderr", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/dcf736d7adafc722b2f548cd033f974469543821/src%2Ftest%2Fui%2Funnecessary-extern-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dcf736d7adafc722b2f548cd033f974469543821/src%2Ftest%2Fui%2Funnecessary-extern-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funnecessary-extern-crate.stderr?ref=dcf736d7adafc722b2f548cd033f974469543821", "patch": "@@ -1,8 +1,8 @@\n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:16:1\n    |\n-LL | extern crate alloc;\n-   | ^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL | extern crate libc;\n+   | ^^^^^^^^^^^^^^^^^^ help: remove it\n    |\n note: lint level defined here\n   --> $DIR/unnecessary-extern-crate.rs:13:9\n@@ -13,32 +13,32 @@ LL | #![deny(unused_extern_crates)]\n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:19:1\n    |\n-LL | extern crate alloc as x;\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL | extern crate libc as x;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n \n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:41:5\n    |\n-LL |     extern crate alloc;\n-   |     ^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL |     extern crate libc;\n+   |     ^^^^^^^^^^^^^^^^^^ help: remove it\n \n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:45:5\n    |\n-LL |     extern crate alloc as x;\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL |     extern crate libc as x;\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n \n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:54:9\n    |\n-LL |         extern crate alloc;\n-   |         ^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL |         extern crate libc;\n+   |         ^^^^^^^^^^^^^^^^^^ help: remove it\n \n error: unused extern crate\n   --> $DIR/unnecessary-extern-crate.rs:58:9\n    |\n-LL |         extern crate alloc as x;\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n+LL |         extern crate libc as x;\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^ help: remove it\n \n error: aborting due to 6 previous errors\n "}]}