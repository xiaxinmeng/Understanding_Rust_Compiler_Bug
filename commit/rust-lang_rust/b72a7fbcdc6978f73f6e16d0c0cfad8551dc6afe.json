{"sha": "b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe", "node_id": "C_kwDOAAsO6NoAKGI3MmE3ZmJjZGM2OTc4ZjczZjZlMTZkMGMwY2ZhZDg1NTFkYzZhZmU", "commit": {"author": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-04-06T01:09:16Z"}, "committer": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-04-06T01:21:14Z"}, "message": "Improve terse test output.\n\nThe current terse output gives 112 chars per line, which causes\nwraparound for people using 100 char wide terminals, which is very\ncommon.\n\nThis commit changes it to be exactly 100 wide, which makes the output\nlook much nicer.", "tree": {"sha": "73ba044609a6618d376ccabb8db9628ce7fc225a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73ba044609a6618d376ccabb8db9628ce7fc225a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe", "html_url": "https://github.com/rust-lang/rust/commit/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a9080b25e73d26aae94c3f6a13b31de58e66b5a", "url": "https://api.github.com/repos/rust-lang/rust/commits/6a9080b25e73d26aae94c3f6a13b31de58e66b5a", "html_url": "https://github.com/rust-lang/rust/commit/6a9080b25e73d26aae94c3f6a13b31de58e66b5a"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "5dace8baef7f823054d29b93305922b4b8b2c667", "filename": "library/test/src/formatters/terse.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe/library%2Ftest%2Fsrc%2Fformatters%2Fterse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe/library%2Ftest%2Fsrc%2Fformatters%2Fterse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Ftest%2Fsrc%2Fformatters%2Fterse.rs?ref=b72a7fbcdc6978f73f6e16d0c0cfad8551dc6afe", "patch": "@@ -11,8 +11,9 @@ use crate::{\n     types::TestDesc,\n };\n \n-// insert a '\\n' after 100 tests in quiet mode\n-const QUIET_MODE_MAX_COLUMN: usize = 100;\n+// We insert a '\\n' when the output hits 100 columns in quiet mode. 88 test\n+// result chars leaves 12 chars for a progress count like \" 11704/12853\".\n+const QUIET_MODE_MAX_COLUMN: usize = 88;\n \n pub(crate) struct TerseFormatter<T> {\n     out: OutputLocation<T>,\n@@ -65,7 +66,7 @@ impl<T: Write> TerseFormatter<T> {\n     ) -> io::Result<()> {\n         self.write_pretty(result, color)?;\n         if self.test_count % QUIET_MODE_MAX_COLUMN == QUIET_MODE_MAX_COLUMN - 1 {\n-            // we insert a new line every 100 dots in order to flush the\n+            // We insert a new line regularly in order to flush the\n             // screen when dealing with line-buffered output (e.g., piping to\n             // `stamp` in the rust CI).\n             let out = format!(\" {}/{}\\n\", self.test_count + 1, self.total_test_count);"}]}