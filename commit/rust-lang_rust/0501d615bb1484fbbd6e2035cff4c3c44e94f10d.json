{"sha": "0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "node_id": "C_kwDOAAsO6NoAKDA1MDFkNjE1YmIxNDg0ZmJiZDZlMjAzNWNmZjRjM2M0NGU5NGYxMGQ", "commit": {"author": {"name": "Yiming Lei", "email": "yiming.lei@futurewei.com", "date": "2022-10-05T21:00:51Z"}, "committer": {"name": "Yiming Lei", "email": "yiming.lei@futurewei.com", "date": "2022-10-05T21:00:51Z"}, "message": "do not reverse the expected type and found type for ObligationCauseCode of IfExpressionWithNoElse\nthis will fix #102397", "tree": {"sha": "feb4f987b352e738f495366b9557362de4e7c7a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/feb4f987b352e738f495366b9557362de4e7c7a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "html_url": "https://github.com/rust-lang/rust/commit/0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/comments", "author": null, "committer": null, "parents": [{"sha": "8c71b67159e1a3d0863caf28b7cefee0160cb927", "url": "https://api.github.com/repos/rust-lang/rust/commits/8c71b67159e1a3d0863caf28b7cefee0160cb927", "html_url": "https://github.com/rust-lang/rust/commit/8c71b67159e1a3d0863caf28b7cefee0160cb927"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "143508b785f1e55891fbea3ce5be6698c2012c37", "filename": "compiler/rustc_hir_analysis/src/check/_match.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcheck%2F_match.rs?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -259,7 +259,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 err.help(\"consider adding an `else` block that evaluates to the expected type\");\n                 error = true;\n             },\n-            ret_reason.is_none(),\n+            false,\n         );\n         error\n     }"}, {"sha": "8155fcb56b697694f610fb589cb35f2be2da6807", "filename": "src/test/ui/async-await/issue-66387-if-without-else.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fasync-await%2Fissue-66387-if-without-else.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fasync-await%2Fissue-66387-if-without-else.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissue-66387-if-without-else.stderr?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -4,7 +4,7 @@ error[E0317]: `if` may be missing an `else` clause\n LL | /     if true {\n LL | |         return 0;\n LL | |     }\n-   | |_____^ expected `()`, found `i32`\n+   | |_____^ expected `i32`, found `()`\n    |\n    = note: `if` expressions without `else` evaluate to `()`\n    = help: consider adding an `else` block that evaluates to the expected type"}, {"sha": "a931c89f47e72b801baac1eb50888c22314e6318", "filename": "src/test/ui/consts/control-flow/issue-50577.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fconsts%2Fcontrol-flow%2Fissue-50577.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fconsts%2Fcontrol-flow%2Fissue-50577.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fcontrol-flow%2Fissue-50577.stderr?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -2,7 +2,7 @@ error[E0317]: `if` may be missing an `else` clause\n   --> $DIR/issue-50577.rs:3:16\n    |\n LL |         Drop = assert_eq!(1, 1),\n-   |                ^^^^^^^^^^^^^^^^ expected `()`, found `isize`\n+   |                ^^^^^^^^^^^^^^^^ expected `isize`, found `()`\n    |\n    = note: `if` expressions without `else` evaluate to `()`\n    = help: consider adding an `else` block that evaluates to the expected type"}, {"sha": "95604758a6b3e57f4bfbfa87bfe0642103d0928a", "filename": "src/test/ui/expr/if/if-without-else-result.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.rs?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -1,6 +1,6 @@\n fn main() {\n     let a = if true { true };\n     //~^ ERROR `if` may be missing an `else` clause [E0317]\n-    //~| expected `()`, found `bool`\n+    //~| expected `bool`, found `()`\n     println!(\"{}\", a);\n }"}, {"sha": "317faf7c619f679635f00c7dcd33c716ddfb6d1d", "filename": "src/test/ui/expr/if/if-without-else-result.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexpr%2Fif%2Fif-without-else-result.stderr?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -5,7 +5,7 @@ LL |     let a = if true { true };\n    |             ^^^^^^^^^^----^^\n    |             |         |\n    |             |         found here\n-   |             expected `()`, found `bool`\n+   |             expected `bool`, found `()`\n    |\n    = note: `if` expressions without `else` evaluate to `()`\n    = help: consider adding an `else` block that evaluates to the expected type"}, {"sha": "59c465b9e14925ab977a00909a179249fe8bf916", "filename": "src/test/ui/expr/if/issue-4201.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.rs?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -3,7 +3,7 @@ fn main() {\n         0\n     } else if false {\n //~^ ERROR `if` may be missing an `else` clause\n-//~| expected `()`, found integer\n+//~| expected integer, found `()`\n         1\n     };\n }"}, {"sha": "612fe77642ce5f7dcf3bf44f3e713aeb80b566eb", "filename": "src/test/ui/expr/if/issue-4201.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexpr%2Fif%2Fissue-4201.stderr?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -8,7 +8,7 @@ LL | |\n LL | |         1\n    | |         - found here\n LL | |     };\n-   | |_____^ expected `()`, found integer\n+   | |_____^ expected integer, found `()`\n    |\n    = note: `if` expressions without `else` evaluate to `()`\n    = help: consider adding an `else` block that evaluates to the expected type"}, {"sha": "dd0efa972ba3e2753efe820f3c8dfb4691c608b1", "filename": "src/test/ui/issues/issue-19991.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fissues%2Fissue-19991.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fissues%2Fissue-19991.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-19991.rs?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -3,7 +3,7 @@\n \n fn main() {\n     if let Some(homura) = Some(\"madoka\") { //~  ERROR missing an `else` clause\n-                                           //~| expected `()`, found integer\n+                                           //~| expected integer, found `()`\n         765\n     };\n }"}, {"sha": "57b0882b636e3a70e7532ccba5c7232487a5988e", "filename": "src/test/ui/issues/issue-19991.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fissues%2Fissue-19991.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0501d615bb1484fbbd6e2035cff4c3c44e94f10d/src%2Ftest%2Fui%2Fissues%2Fissue-19991.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-19991.stderr?ref=0501d615bb1484fbbd6e2035cff4c3c44e94f10d", "patch": "@@ -6,7 +6,7 @@ LL | |\n LL | |         765\n    | |         --- found here\n LL | |     };\n-   | |_____^ expected `()`, found integer\n+   | |_____^ expected integer, found `()`\n    |\n    = note: `if` expressions without `else` evaluate to `()`\n    = help: consider adding an `else` block that evaluates to the expected type"}]}