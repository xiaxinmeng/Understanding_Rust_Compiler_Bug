{"sha": "f7b48778b1472045bd8b7ee6aacdbf1487efe50b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3YjQ4Nzc4YjE0NzIwNDViZDhiN2VlNmFhY2RiZjE0ODdlZmU1MGI=", "commit": {"author": {"name": "Mikko Rantanen", "email": "jubjub@jubjubnest.net", "date": "2018-01-12T10:37:48Z"}, "committer": {"name": "Mikko Rantanen", "email": "jubjub@jubjubnest.net", "date": "2018-01-12T14:47:58Z"}, "message": "Report errors instead of panic!()", "tree": {"sha": "6fa0db22f80d5f23f7f237265cafa02a0d7667c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fa0db22f80d5f23f7f237265cafa02a0d7667c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7b48778b1472045bd8b7ee6aacdbf1487efe50b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABAgAGBQJaWMqfAAoJELaA6c4QpVeYPhUH/jLfjQXN+pz14skhNggVnMYR\nnH4UimdDY52X6zHQptsoHTN6URo4OudWzIzfWOqfN1PzAODqSauL5QYg8iIrHV5o\nVppNlXELJ6dCjxDUFRLCm1f4Ddk4Wawtg9WLeY+RcswUlpXdyNl9Mmmw4mQuim/8\nQsJjdZB605NeqfFTTrm6EncLzg6dxgmSBArELDVCEiJsHFXSOIGlY4eHUb+GANiJ\nyCK/3hcXP7fq+z4/NIbe7biR/2j74euqDXsbbsQT8+pMCugxxZ/eVGAD56A8ZyB9\nx8uoAwf5xhJ3oIwiFxJ4ZmM0gjRs8xBPrkqj9z21In8kpMKFvq3ebYjXRmlKICE=\n=ZIh1\n-----END PGP SIGNATURE-----", "payload": "tree 6fa0db22f80d5f23f7f237265cafa02a0d7667c3\nparent 0b90e4e8cd068910f604f3e1fb5d03cc01f1658f\nauthor Mikko Rantanen <jubjub@jubjubnest.net> 1515753468 +0200\ncommitter Mikko Rantanen <jubjub@jubjubnest.net> 1515768478 +0200\n\nReport errors instead of panic!()\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7b48778b1472045bd8b7ee6aacdbf1487efe50b", "html_url": "https://github.com/rust-lang/rust/commit/f7b48778b1472045bd8b7ee6aacdbf1487efe50b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7b48778b1472045bd8b7ee6aacdbf1487efe50b/comments", "author": {"login": "Rantanen", "id": 385385, "node_id": "MDQ6VXNlcjM4NTM4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/385385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rantanen", "html_url": "https://github.com/Rantanen", "followers_url": "https://api.github.com/users/Rantanen/followers", "following_url": "https://api.github.com/users/Rantanen/following{/other_user}", "gists_url": "https://api.github.com/users/Rantanen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rantanen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rantanen/subscriptions", "organizations_url": "https://api.github.com/users/Rantanen/orgs", "repos_url": "https://api.github.com/users/Rantanen/repos", "events_url": "https://api.github.com/users/Rantanen/events{/privacy}", "received_events_url": "https://api.github.com/users/Rantanen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Rantanen", "id": 385385, "node_id": "MDQ6VXNlcjM4NTM4NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/385385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rantanen", "html_url": "https://github.com/Rantanen", "followers_url": "https://api.github.com/users/Rantanen/followers", "following_url": "https://api.github.com/users/Rantanen/following{/other_user}", "gists_url": "https://api.github.com/users/Rantanen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rantanen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rantanen/subscriptions", "organizations_url": "https://api.github.com/users/Rantanen/orgs", "repos_url": "https://api.github.com/users/Rantanen/repos", "events_url": "https://api.github.com/users/Rantanen/events{/privacy}", "received_events_url": "https://api.github.com/users/Rantanen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b90e4e8cd068910f604f3e1fb5d03cc01f1658f", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b90e4e8cd068910f604f3e1fb5d03cc01f1658f", "html_url": "https://github.com/rust-lang/rust/commit/0b90e4e8cd068910f604f3e1fb5d03cc01f1658f"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "f6eaa09f55d9937a24ac414906e49cfc52fb1d30", "filename": "src/tools/linkchecker/main.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f7b48778b1472045bd8b7ee6aacdbf1487efe50b/src%2Ftools%2Flinkchecker%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7b48778b1472045bd8b7ee6aacdbf1487efe50b/src%2Ftools%2Flinkchecker%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2Fmain.rs?ref=f7b48778b1472045bd8b7ee6aacdbf1487efe50b", "patch": "@@ -192,7 +192,17 @@ fn check(cache: &mut Cache,\n             for part in Path::new(base).join(url).components() {\n                 match part {\n                     Component::Prefix(_) |\n-                    Component::RootDir => panic!(),\n+                    Component::RootDir => {\n+                        // Avoid absolute paths as they make the docs not\n+                        // relocatable by making assumptions on where the docs\n+                        // are hosted relative to the site root.\n+                        *errors = true;\n+                        println!(\"{}:{}: absolute path - {}\",\n+                                 pretty_file.display(),\n+                                 i + 1,\n+                                 Path::new(base).join(url).display());\n+                        return;\n+                    }\n                     Component::CurDir => {}\n                     Component::ParentDir => { path.pop(); }\n                     Component::Normal(s) => { path.push(s); }"}]}