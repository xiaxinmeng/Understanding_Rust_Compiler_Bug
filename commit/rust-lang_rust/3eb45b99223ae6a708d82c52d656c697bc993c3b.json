{"sha": "3eb45b99223ae6a708d82c52d656c697bc993c3b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlYjQ1Yjk5MjIzYWU2YTcwOGQ4MmM1MmQ2NTZjNjk3YmM5OTNjM2I=", "commit": {"author": {"name": "Tim", "email": "tdhutt@gmail.com", "date": "2020-03-31T09:23:18Z"}, "committer": {"name": "Tim Hutt", "email": "timh@graphcore.ai", "date": "2020-03-31T09:24:01Z"}, "message": "Pass string instread of WorkspaceFolder", "tree": {"sha": "4dfb02c7d39debea0486f96a0fdccb3a288b70b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4dfb02c7d39debea0486f96a0fdccb3a288b70b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3eb45b99223ae6a708d82c52d656c697bc993c3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3eb45b99223ae6a708d82c52d656c697bc993c3b", "html_url": "https://github.com/rust-lang/rust/commit/3eb45b99223ae6a708d82c52d656c697bc993c3b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3eb45b99223ae6a708d82c52d656c697bc993c3b/comments", "author": {"login": "Timmmm", "id": 376842, "node_id": "MDQ6VXNlcjM3Njg0Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/376842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Timmmm", "html_url": "https://github.com/Timmmm", "followers_url": "https://api.github.com/users/Timmmm/followers", "following_url": "https://api.github.com/users/Timmmm/following{/other_user}", "gists_url": "https://api.github.com/users/Timmmm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Timmmm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Timmmm/subscriptions", "organizations_url": "https://api.github.com/users/Timmmm/orgs", "repos_url": "https://api.github.com/users/Timmmm/repos", "events_url": "https://api.github.com/users/Timmmm/events{/privacy}", "received_events_url": "https://api.github.com/users/Timmmm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9ef1e9efc6039c9299cbb866118ff92cb4467202", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ef1e9efc6039c9299cbb866118ff92cb4467202", "html_url": "https://github.com/rust-lang/rust/commit/9ef1e9efc6039c9299cbb866118ff92cb4467202"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "f909f8db26b74d791e57f45e79321879a7c12684", "filename": "editors/code/src/client.ts", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fclient.ts", "raw_url": "https://github.com/rust-lang/rust/raw/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fclient.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fclient.ts?ref=3eb45b99223ae6a708d82c52d656c697bc993c3b", "patch": "@@ -30,14 +30,14 @@ export function configToServerOptions(config: Config) {\n     };\n }\n \n-export async function createClient(config: Config, serverPath: string, workspaceFolder: vscode.WorkspaceFolder): Promise<lc.LanguageClient> {\n+export async function createClient(config: Config, serverPath: string, cwd: string): Promise<lc.LanguageClient> {\n     // '.' Is the fallback if no folder is open\n     // TODO?: Workspace folders support Uri's (eg: file://test.txt).\n     // It might be a good idea to test if the uri points to a file.\n \n     const run: lc.Executable = {\n         command: serverPath,\n-        options: { cwd: workspaceFolder.uri.fsPath },\n+        options: { cwd },\n     };\n     const serverOptions: lc.ServerOptions = {\n         run,"}, {"sha": "86b5f36295468daa13c5bf7bae50256aa40a482d", "filename": "editors/code/src/ctx.ts", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fctx.ts", "raw_url": "https://github.com/rust-lang/rust/raw/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fctx.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fctx.ts?ref=3eb45b99223ae6a708d82c52d656c697bc993c3b", "patch": "@@ -19,9 +19,9 @@ export class Ctx {\n         config: Config,\n         extCtx: vscode.ExtensionContext,\n         serverPath: string,\n-        workspaceFolder: vscode.WorkspaceFolder,\n+        cwd: string,\n     ): Promise<Ctx> {\n-        const client = await createClient(config, serverPath, workspaceFolder);\n+        const client = await createClient(config, serverPath, cwd);\n         const res = new Ctx(config, extCtx, client, serverPath);\n         res.pushCleanup(client.start());\n         await client.onReady();"}, {"sha": "7ba16120c3ace2979d9b920b12eebfa060ebe2f8", "filename": "editors/code/src/main.ts", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fmain.ts", "raw_url": "https://github.com/rust-lang/rust/raw/3eb45b99223ae6a708d82c52d656c697bc993c3b/editors%2Fcode%2Fsrc%2Fmain.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fmain.ts?ref=3eb45b99223ae6a708d82c52d656c697bc993c3b", "patch": "@@ -53,7 +53,7 @@ export async function activate(context: vscode.ExtensionContext) {\n     // registers its `onDidChangeDocument` handler before us.\n     //\n     // This a horribly, horribly wrong way to deal with this problem.\n-    ctx = await Ctx.create(config, context, serverPath, workspaceFolder);\n+    ctx = await Ctx.create(config, context, serverPath, workspaceFolder.uri.fsPath);\n \n     // Commands which invokes manually via command palette, shortcut, etc.\n "}]}