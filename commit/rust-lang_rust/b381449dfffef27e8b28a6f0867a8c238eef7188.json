{"sha": "b381449dfffef27e8b28a6f0867a8c238eef7188", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzODE0NDlkZmZmZWYyN2U4YjI4YTZmMDg2N2E4YzIzOGVlZjcxODg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-04T17:16:51Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-04T17:16:51Z"}, "message": "Auto merge of #26771 - bluss:str-prefix, r=Gankro\n\ncore: Use memcmp in is_prefix_of / is_suffix_of\r\n\r\nThe basic str equality in core::str calls memcmp, re-use the same\r\nfunction in StrSearcher's is_prefix_of, is_suffix_of.", "tree": {"sha": "0362e66914b825136ed1269faa61ebfe623192a3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0362e66914b825136ed1269faa61ebfe623192a3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b381449dfffef27e8b28a6f0867a8c238eef7188", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b381449dfffef27e8b28a6f0867a8c238eef7188", "html_url": "https://github.com/rust-lang/rust/commit/b381449dfffef27e8b28a6f0867a8c238eef7188", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b381449dfffef27e8b28a6f0867a8c238eef7188/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c83f8f9bd90d0f58c0c34520d4909cde138b9f22", "url": "https://api.github.com/repos/rust-lang/rust/commits/c83f8f9bd90d0f58c0c34520d4909cde138b9f22", "html_url": "https://github.com/rust-lang/rust/commit/c83f8f9bd90d0f58c0c34520d4909cde138b9f22"}, {"sha": "c5a0a73253dd5cbd1bde8b05b15b3e644ad2b37a", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5a0a73253dd5cbd1bde8b05b15b3e644ad2b37a", "html_url": "https://github.com/rust-lang/rust/commit/c5a0a73253dd5cbd1bde8b05b15b3e644ad2b37a"}], "stats": {"total": 13, "additions": 5, "deletions": 8}, "files": [{"sha": "7e72ad1569a1f56035e69f3f702a41c91b6d4003", "filename": "src/libcollections/str.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b381449dfffef27e8b28a6f0867a8c238eef7188/src%2Flibcollections%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b381449dfffef27e8b28a6f0867a8c238eef7188/src%2Flibcollections%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstr.rs?ref=b381449dfffef27e8b28a6f0867a8c238eef7188", "patch": "@@ -483,9 +483,7 @@ impl str {\n     /// considered to be\n     /// boundaries.\n     ///\n-    /// # Panics\n-    ///\n-    /// Panics if `index` is greater than `self.len()`.\n+    /// Returns `false` if `index` is greater than `self.len()`.\n     ///\n     /// # Examples\n     ///"}, {"sha": "707f7fcf2abcf9c85de792b22bd3d8232f88d8ec", "filename": "src/libcore/str/pattern.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b381449dfffef27e8b28a6f0867a8c238eef7188/src%2Flibcore%2Fstr%2Fpattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b381449dfffef27e8b28a6f0867a8c238eef7188/src%2Flibcore%2Fstr%2Fpattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr%2Fpattern.rs?ref=b381449dfffef27e8b28a6f0867a8c238eef7188", "patch": "@@ -513,17 +513,16 @@ impl<'a, 'b> Pattern<'a> for &'b str {\n     /// Checks whether the pattern matches at the front of the haystack\n     #[inline]\n     fn is_prefix_of(self, haystack: &'a str) -> bool {\n-        // Use `as_bytes` so that we can slice through a character in the haystack.\n-        // Since self is always valid UTF-8, this can't result in a false positive.\n-        self.len() <= haystack.len() &&\n-            self.as_bytes() == &haystack.as_bytes()[..self.len()]\n+        haystack.is_char_boundary(self.len()) &&\n+            self == &haystack[..self.len()]\n     }\n \n     /// Checks whether the pattern matches at the back of the haystack\n     #[inline]\n     fn is_suffix_of(self, haystack: &'a str) -> bool {\n         self.len() <= haystack.len() &&\n-            self.as_bytes() == &haystack.as_bytes()[haystack.len() - self.len()..]\n+            haystack.is_char_boundary(haystack.len() - self.len()) &&\n+            self == &haystack[haystack.len() - self.len()..]\n     }\n }\n "}]}