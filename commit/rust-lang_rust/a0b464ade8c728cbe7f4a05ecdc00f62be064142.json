{"sha": "a0b464ade8c728cbe7f4a05ecdc00f62be064142", "node_id": "C_kwDOAAsO6NoAKGEwYjQ2NGFkZThjNzI4Y2JlN2Y0YTA1ZWNkYzAwZjYyYmUwNjQxNDI", "commit": {"author": {"name": "Ali MJ Al-Nasrawy", "email": "alimjalnasrawy@gmail.com", "date": "2022-04-23T04:39:11Z"}, "committer": {"name": "Ali MJ Al-Nasrawy", "email": "alimjalnasrawy@gmail.com", "date": "2022-04-23T05:48:05Z"}, "message": "Add a couple tests for #90887 fixes", "tree": {"sha": "5b265d877bba054b15d82a17dde2283fbed48a87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b265d877bba054b15d82a17dde2283fbed48a87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a0b464ade8c728cbe7f4a05ecdc00f62be064142", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a0b464ade8c728cbe7f4a05ecdc00f62be064142", "html_url": "https://github.com/rust-lang/rust/commit/a0b464ade8c728cbe7f4a05ecdc00f62be064142", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a0b464ade8c728cbe7f4a05ecdc00f62be064142/comments", "author": {"login": "aliemjay", "id": 28497461, "node_id": "MDQ6VXNlcjI4NDk3NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/28497461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aliemjay", "html_url": "https://github.com/aliemjay", "followers_url": "https://api.github.com/users/aliemjay/followers", "following_url": "https://api.github.com/users/aliemjay/following{/other_user}", "gists_url": "https://api.github.com/users/aliemjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aliemjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aliemjay/subscriptions", "organizations_url": "https://api.github.com/users/aliemjay/orgs", "repos_url": "https://api.github.com/users/aliemjay/repos", "events_url": "https://api.github.com/users/aliemjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aliemjay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aliemjay", "id": 28497461, "node_id": "MDQ6VXNlcjI4NDk3NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/28497461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aliemjay", "html_url": "https://github.com/aliemjay", "followers_url": "https://api.github.com/users/aliemjay/followers", "following_url": "https://api.github.com/users/aliemjay/following{/other_user}", "gists_url": "https://api.github.com/users/aliemjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aliemjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aliemjay/subscriptions", "organizations_url": "https://api.github.com/users/aliemjay/orgs", "repos_url": "https://api.github.com/users/aliemjay/repos", "events_url": "https://api.github.com/users/aliemjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aliemjay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8834629b861cd182be6b914d4e6bc5958160debc", "url": "https://api.github.com/repos/rust-lang/rust/commits/8834629b861cd182be6b914d4e6bc5958160debc", "html_url": "https://github.com/rust-lang/rust/commit/8834629b861cd182be6b914d4e6bc5958160debc"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "4d38cb19e9bf2e00dc68007899b44a319fbd7ba0", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-56556.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a0b464ade8c728cbe7f4a05ecdc00f62be064142/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a0b464ade8c728cbe7f4a05ecdc00f62be064142/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-56556.rs?ref=a0b464ade8c728cbe7f4a05ecdc00f62be064142", "patch": "@@ -11,3 +11,20 @@ where\n fn main() {\n     foo::<Vec<u32>>(vec![]);\n }\n+\n+mod another {\n+    use std::ops::Deref;\n+\n+    fn test<T, TDeref>()\n+    where\n+        T: Deref<Target = TDeref>,\n+        TDeref: ?Sized,\n+        for<'a> &'a TDeref: IntoIterator,\n+        for<'a> <&'a TDeref as IntoIterator>::IntoIter: Clone,\n+    {\n+    }\n+\n+    fn main() {\n+        test::<Vec<u8>, _>();\n+    }\n+}"}, {"sha": "ffd6857d84a6eeebf3b3fa8795f4e996cee9fdab", "filename": "src/test/ui/higher-rank-trait-bounds/normalize-under-binder/issue-90875.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/a0b464ade8c728cbe7f4a05ecdc00f62be064142/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a0b464ade8c728cbe7f4a05ecdc00f62be064142/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhigher-rank-trait-bounds%2Fnormalize-under-binder%2Fissue-90875.rs?ref=a0b464ade8c728cbe7f4a05ecdc00f62be064142", "patch": "@@ -0,0 +1,31 @@\n+// check-pass\n+\n+trait Variable<'a> {\n+    type Type;\n+}\n+\n+impl Variable<'_> for () {\n+    type Type = ();\n+}\n+\n+fn check<F, T>(_: F)\n+where\n+    F: Fn(T), // <- if removed, all fn_* then require type annotations\n+    F: for<'a> Fn(<T as Variable<'a>>::Type),\n+    T: for<'a> Variable<'a>,\n+{\n+}\n+\n+fn test(arg: impl Fn(())) {\n+    fn fn_1(_: ()) {}\n+    let fn_2 = |_: ()| ();\n+    let fn_3 = |a| fn_1(a);\n+    let fn_4 = arg;\n+\n+    check(fn_1); // Error\n+    check(fn_2); // Ok\n+    check(fn_3); // Ok\n+    check(fn_4); // Error\n+}\n+\n+fn main() {}"}]}