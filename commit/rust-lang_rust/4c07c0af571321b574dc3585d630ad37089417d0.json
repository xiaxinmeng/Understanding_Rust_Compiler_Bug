{"sha": "4c07c0af571321b574dc3585d630ad37089417d0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjMDdjMGFmNTcxMzIxYjU3NGRjMzU4NWQ2MzBhZDM3MDg5NDE3ZDA=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2016-08-17T16:10:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-17T16:10:33Z"}, "message": "Merge pull request #1173 from oli-obk/never_rustup\n\nrustup for the ! type", "tree": {"sha": "ed7a851850c2f01228b71a8a212d2e2d60b89461", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed7a851850c2f01228b71a8a212d2e2d60b89461"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4c07c0af571321b574dc3585d630ad37089417d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4c07c0af571321b574dc3585d630ad37089417d0", "html_url": "https://github.com/rust-lang/rust/commit/4c07c0af571321b574dc3585d630ad37089417d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4c07c0af571321b574dc3585d630ad37089417d0/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4b37236baa4cee424e74c614fc814e7890aa8b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4b37236baa4cee424e74c614fc814e7890aa8b6", "html_url": "https://github.com/rust-lang/rust/commit/c4b37236baa4cee424e74c614fc814e7890aa8b6"}, {"sha": "6daa884e4fddb6d5b04c2f2fe28fde2df950ffc1", "url": "https://api.github.com/repos/rust-lang/rust/commits/6daa884e4fddb6d5b04c2f2fe28fde2df950ffc1", "html_url": "https://github.com/rust-lang/rust/commit/6daa884e4fddb6d5b04c2f2fe28fde2df950ffc1"}], "stats": {"total": 32, "additions": 15, "deletions": 17}, "files": [{"sha": "c92ad5ca14022a7262c1d6a0dec56a4c07b8e980", "filename": "CHANGELOG.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -1,14 +1,17 @@\n # Change Log\n All notable changes to this project will be documented in this file.\n \n-## 0.0.83 \u2014 TBD\n+## 0.0.84 \u2014 TBD\n+\n+## 0.0.83 \u2014 2016-08-17\n+* Rustup to *rustc 1.12.0-nightly (1bf5fa326 2016-08-16)*\n * New lints: [`print_with_newline`], [`useless_attribute`]\n \n ## 0.0.82 \u2014 2016-08-17\n * Rustup to *rustc 1.12.0-nightly (197be89f3 2016-08-15)*\n * New lint: [`module_inception`]\n \n-## 0.0.81 - 2016-08-14\n+## 0.0.81 \u2014 2016-08-14\n * Rustup to *rustc 1.12.0-nightly (1deb02ea6 2016-08-12)*\n * New lints: [`eval_order_dependence`], [`mixed_case_hex_literals`], [`unseparated_literal_suffix`]\n * False positive fix in [`too_many_arguments`]"}, {"sha": "df7301cf2948525a057789a189c630f9ec54a988", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"clippy\"\n-version = \"0.0.82\"\n+version = \"0.0.83\"\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\",\n@@ -25,7 +25,7 @@ test = false\n \n [dependencies]\n # begin automatic update\n-clippy_lints = { version = \"0.0.82\", path = \"clippy_lints\" }\n+clippy_lints = { version = \"0.0.83\", path = \"clippy_lints\" }\n # end automatic update\n \n [dev-dependencies]"}, {"sha": "49fdd2ae714852539724422f158fc58b094aac48", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"clippy_lints\"\n # begin automatic update\n-version = \"0.0.82\"\n+version = \"0.0.83\"\n # end automatic update\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\","}, {"sha": "faa56bccb2280cdec7ee74823a6fcd95f5ae4702", "filename": "clippy_lints/src/cyclomatic_complexity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcyclomatic_complexity.rs?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -142,7 +142,7 @@ impl<'a, 'b, 'tcx, 'gcx> Visitor<'a> for CCHelper<'b, 'gcx, 'tcx> {\n                 let ty = self.tcx.node_id_to_type(callee.id);\n                 match ty.sty {\n                     ty::TyFnDef(_, _, ty) |\n-                    ty::TyFnPtr(ty) if ty.sig.skip_binder().output.diverges() => {\n+                    ty::TyFnPtr(ty) if ty.sig.skip_binder().output.sty == ty::TyNever => {\n                         self.divergence += 1;\n                     }\n                     _ => (),"}, {"sha": "ad7da71eab05c29308ac9c9d1e31ae059d9fd174", "filename": "clippy_lints/src/eta_reduction.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Feta_reduction.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Feta_reduction.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feta_reduction.rs?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -71,7 +71,7 @@ fn check_closure(cx: &LateContext, expr: &Expr) {\n                     ty::TyFnDef(_, _, fn_ty) |\n                     ty::TyFnPtr(fn_ty) => {\n                         if fn_ty.unsafety == Unsafety::Unsafe ||\n-                           fn_ty.sig.skip_binder().output == ty::FnOutput::FnDiverging {\n+                           fn_ty.sig.skip_binder().output.sty == ty::TyNever {\n                             return;\n                         }\n                     }"}, {"sha": "c914d5210ecf3680a00df5b7469a919c9bad9e81", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -590,7 +590,7 @@ impl LateLintPass for Pass {\n \n             let ret_ty = return_ty(cx, implitem.id);\n             if &name.as_str() == &\"new\" &&\n-               !ret_ty.map_or(false, |ret_ty| ret_ty.walk().any(|t| same_tys(cx, t, ty, implitem.id))) {\n+               !ret_ty.walk().any(|t| same_tys(cx, t, ty, implitem.id)) {\n                 span_lint(cx,\n                           NEW_RET_NO_SELF,\n                           explicit_self.span,"}, {"sha": "b1bffb8c2362eb11fae84330b036a7b7cb809da3", "filename": "clippy_lints/src/new_without_default.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fnew_without_default.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Fnew_without_default.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnew_without_default.rs?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -106,8 +106,7 @@ impl LateLintPass for NewWithoutDefault {\n                     .ty;\n                 if_let_chain!{[\n                     self_ty.walk_shallow().next().is_none(), // implements_trait does not work with generics\n-                    let Some(ret_ty) = return_ty(cx, id),\n-                    same_tys(cx, self_ty, ret_ty, id),\n+                    same_tys(cx, self_ty, return_ty(cx, id), id),\n                     let Some(default_trait_id) = get_trait_def_id(cx, &paths::DEFAULT_TRAIT),\n                     !implements_trait(cx, self_ty, default_trait_id, Vec::new())\n                 ], {"}, {"sha": "c458bb1dff3909966d6b3999494bc0248bfbaa14", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4c07c0af571321b574dc3585d630ad37089417d0/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=4c07c0af571321b574dc3585d630ad37089417d0", "patch": "@@ -692,16 +692,12 @@ pub fn camel_case_from(s: &str) -> usize {\n     last_i\n }\n \n-/// Convenience function to get the return type of a function or `None` if the function diverges.\n-pub fn return_ty<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, fn_item: NodeId) -> Option<ty::Ty<'tcx>> {\n+/// Convenience function to get the return type of a function\n+pub fn return_ty<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, fn_item: NodeId) -> ty::Ty<'tcx> {\n     let parameter_env = ty::ParameterEnvironment::for_item(cx.tcx, fn_item);\n     let fn_sig = cx.tcx.node_id_to_type(fn_item).fn_sig().subst(cx.tcx, parameter_env.free_substs);\n     let fn_sig = cx.tcx.liberate_late_bound_regions(parameter_env.free_id_outlive, &fn_sig);\n-    if let ty::FnConverging(ret_ty) = fn_sig.output {\n-        Some(ret_ty)\n-    } else {\n-        None\n-    }\n+    fn_sig.output\n }\n \n /// Check if two types are the same."}]}