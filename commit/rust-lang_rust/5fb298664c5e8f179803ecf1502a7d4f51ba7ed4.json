{"sha": "5fb298664c5e8f179803ecf1502a7d4f51ba7ed4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmYjI5ODY2NGM1ZThmMTc5ODAzZWNmMTUwMmE3ZDRmNTFiYTdlZDQ=", "commit": {"author": {"name": "Ashley Mannix", "email": "kodraus@hey.com", "date": "2020-12-04T05:43:42Z"}, "committer": {"name": "Jakub Duchniewicz", "email": "j.duchniewicz@gmail.com", "date": "2021-06-07T19:18:54Z"}, "message": "format symbols under shared frames", "tree": {"sha": "909b3d9f60e33de1d97fc570e64bb4e78aebf755", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/909b3d9f60e33de1d97fc570e64bb4e78aebf755"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4", "html_url": "https://github.com/rust-lang/rust/commit/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4/comments", "author": {"login": "KodrAus", "id": 6721458, "node_id": "MDQ6VXNlcjY3MjE0NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/6721458?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KodrAus", "html_url": "https://github.com/KodrAus", "followers_url": "https://api.github.com/users/KodrAus/followers", "following_url": "https://api.github.com/users/KodrAus/following{/other_user}", "gists_url": "https://api.github.com/users/KodrAus/gists{/gist_id}", "starred_url": "https://api.github.com/users/KodrAus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KodrAus/subscriptions", "organizations_url": "https://api.github.com/users/KodrAus/orgs", "repos_url": "https://api.github.com/users/KodrAus/repos", "events_url": "https://api.github.com/users/KodrAus/events{/privacy}", "received_events_url": "https://api.github.com/users/KodrAus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JDuchniewicz", "id": 18423461, "node_id": "MDQ6VXNlcjE4NDIzNDYx", "avatar_url": "https://avatars.githubusercontent.com/u/18423461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JDuchniewicz", "html_url": "https://github.com/JDuchniewicz", "followers_url": "https://api.github.com/users/JDuchniewicz/followers", "following_url": "https://api.github.com/users/JDuchniewicz/following{/other_user}", "gists_url": "https://api.github.com/users/JDuchniewicz/gists{/gist_id}", "starred_url": "https://api.github.com/users/JDuchniewicz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JDuchniewicz/subscriptions", "organizations_url": "https://api.github.com/users/JDuchniewicz/orgs", "repos_url": "https://api.github.com/users/JDuchniewicz/repos", "events_url": "https://api.github.com/users/JDuchniewicz/events{/privacy}", "received_events_url": "https://api.github.com/users/JDuchniewicz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4a60327063e82413eed50a10df3b7d19b77bda0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4a60327063e82413eed50a10df3b7d19b77bda0", "html_url": "https://github.com/rust-lang/rust/commit/e4a60327063e82413eed50a10df3b7d19b77bda0"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "5f6318ba5d231245caefd108b6f0f14f9b605217", "filename": "library/std/src/sys_common/backtrace.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb298664c5e8f179803ecf1502a7d4f51ba7ed4/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs?ref=5fb298664c5e8f179803ecf1502a7d4f51ba7ed4", "patch": "@@ -71,6 +71,7 @@ unsafe fn _print_fmt(fmt: &mut fmt::Formatter<'_>, print_fmt: PrintFmt) -> fmt::\n \n         let mut hit = false;\n         let mut stop = false;\n+        let mut frame_fmt = bt_fmt.frame();\n         backtrace_rs::resolve_frame_unsynchronized(frame, |symbol| {\n             hit = true;\n             if print_fmt == PrintFmt::Short {\n@@ -87,15 +88,15 @@ unsafe fn _print_fmt(fmt: &mut fmt::Formatter<'_>, print_fmt: PrintFmt) -> fmt::\n             }\n \n             if start {\n-                res = bt_fmt.frame().symbol(frame, symbol);\n+                res = frame_fmt.symbol(frame, symbol);\n             }\n         });\n         if stop {\n             return false;\n         }\n         if !hit {\n             if start {\n-                res = bt_fmt.frame().print_raw(frame.ip(), None, None, None);\n+                res = frame_fmt.print_raw(frame.ip(), None, None, None);\n             }\n         }\n "}]}