{"sha": "fab3295cba64a8e4245374c5eb8f2478029d13db", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhYjMyOTVjYmE2NGE4ZTQyNDUzNzRjNWViOGYyNDc4MDI5ZDEzZGI=", "commit": {"author": {"name": "Ryan Prichard", "email": "ryan.prichard@gmail.com", "date": "2015-04-06T01:07:11Z"}, "committer": {"name": "Ryan Prichard", "email": "ryan.prichard@gmail.com", "date": "2015-04-11T23:48:31Z"}, "message": "Suppress the macro backtrace for `fileline_note` and `fileline_help`.", "tree": {"sha": "9048a8919137363192a14e9078370229b4e34012", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9048a8919137363192a14e9078370229b4e34012"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fab3295cba64a8e4245374c5eb8f2478029d13db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fab3295cba64a8e4245374c5eb8f2478029d13db", "html_url": "https://github.com/rust-lang/rust/commit/fab3295cba64a8e4245374c5eb8f2478029d13db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fab3295cba64a8e4245374c5eb8f2478029d13db/comments", "author": {"login": "rprichard", "id": 1572855, "node_id": "MDQ6VXNlcjE1NzI4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rprichard", "html_url": "https://github.com/rprichard", "followers_url": "https://api.github.com/users/rprichard/followers", "following_url": "https://api.github.com/users/rprichard/following{/other_user}", "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}", "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions", "organizations_url": "https://api.github.com/users/rprichard/orgs", "repos_url": "https://api.github.com/users/rprichard/repos", "events_url": "https://api.github.com/users/rprichard/events{/privacy}", "received_events_url": "https://api.github.com/users/rprichard/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rprichard", "id": 1572855, "node_id": "MDQ6VXNlcjE1NzI4NTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1572855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rprichard", "html_url": "https://github.com/rprichard", "followers_url": "https://api.github.com/users/rprichard/followers", "following_url": "https://api.github.com/users/rprichard/following{/other_user}", "gists_url": "https://api.github.com/users/rprichard/gists{/gist_id}", "starred_url": "https://api.github.com/users/rprichard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rprichard/subscriptions", "organizations_url": "https://api.github.com/users/rprichard/orgs", "repos_url": "https://api.github.com/users/rprichard/repos", "events_url": "https://api.github.com/users/rprichard/events{/privacy}", "received_events_url": "https://api.github.com/users/rprichard/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5a8f102bf6065901a6115c02dab6fa29b71b2db6", "url": "https://api.github.com/repos/rust-lang/rust/commits/5a8f102bf6065901a6115c02dab6fa29b71b2db6", "html_url": "https://github.com/rust-lang/rust/commit/5a8f102bf6065901a6115c02dab6fa29b71b2db6"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "5bbf79d0477332c0aa253335ba76731c61ab7e8a", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/fab3295cba64a8e4245374c5eb8f2478029d13db/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fab3295cba64a8e4245374c5eb8f2478029d13db/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=fab3295cba64a8e4245374c5eb8f2478029d13db", "patch": "@@ -871,7 +871,7 @@ impl CodeMap {\n         F: FnOnce(Option<&ExpnInfo>) -> T,\n     {\n         match id {\n-            NO_EXPANSION => f(None),\n+            NO_EXPANSION | COMMAND_LINE_EXPN => f(None),\n             ExpnId(i) => f(Some(&(*self.expansions.borrow())[i as usize]))\n         }\n     }"}, {"sha": "f3715d765e391a023008d888bd5cc03e1c907b93", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/fab3295cba64a8e4245374c5eb8f2478029d13db/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fab3295cba64a8e4245374c5eb8f2478029d13db/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=fab3295cba64a8e4245374c5eb8f2478029d13db", "patch": "@@ -465,22 +465,21 @@ fn emit(dst: &mut EmitterWriter, cm: &codemap::CodeMap, rsp: RenderSpan,\n     match rsp {\n         FullSpan(_) => {\n             try!(highlight_lines(dst, cm, sp, lvl, cm.span_to_lines(sp)));\n+            try!(print_macro_backtrace(dst, cm, sp));\n         }\n         EndSpan(_) => {\n             try!(end_highlight_lines(dst, cm, sp, lvl, cm.span_to_lines(sp)));\n+            try!(print_macro_backtrace(dst, cm, sp));\n         }\n         Suggestion(_, ref suggestion) => {\n             try!(highlight_suggestion(dst, cm, sp, suggestion));\n+            try!(print_macro_backtrace(dst, cm, sp));\n         }\n         FileLine(..) => {\n             // no source text in this case!\n         }\n     }\n \n-    if sp != COMMAND_LINE_SP {\n-        try!(print_macro_backtrace(dst, cm, sp));\n-    }\n-\n     match code {\n         Some(code) =>\n             match dst.registry.as_ref().and_then(|registry| registry.find_description(code)) {"}]}