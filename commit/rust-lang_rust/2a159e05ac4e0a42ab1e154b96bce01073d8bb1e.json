{"sha": "2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhMTU5ZTA1YWM0ZTBhNDJhYjFlMTU0Yjk2YmNlMDEwNzNkOGJiMWU=", "commit": {"author": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-11-21T20:04:34Z"}, "committer": {"name": "Marcus Klaas de Vries", "email": "mail@marcusklaas.nl", "date": "2015-11-21T20:04:34Z"}, "message": "Merge pull request #635 from Marwes/long_field_access\n\nFix long field accesses not being broken onto separate lines", "tree": {"sha": "9f4c5d032934e5e507eb745a33e61a9237ac2257", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f4c5d032934e5e507eb745a33e61a9237ac2257"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "html_url": "https://github.com/rust-lang/rust/commit/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/comments", "author": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marcusklaas", "id": 1255413, "node_id": "MDQ6VXNlcjEyNTU0MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1255413?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marcusklaas", "html_url": "https://github.com/marcusklaas", "followers_url": "https://api.github.com/users/marcusklaas/followers", "following_url": "https://api.github.com/users/marcusklaas/following{/other_user}", "gists_url": "https://api.github.com/users/marcusklaas/gists{/gist_id}", "starred_url": "https://api.github.com/users/marcusklaas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marcusklaas/subscriptions", "organizations_url": "https://api.github.com/users/marcusklaas/orgs", "repos_url": "https://api.github.com/users/marcusklaas/repos", "events_url": "https://api.github.com/users/marcusklaas/events{/privacy}", "received_events_url": "https://api.github.com/users/marcusklaas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7809e3bb18b5a1ce6548a34c2559a9f08d3ac74a", "url": "https://api.github.com/repos/rust-lang/rust/commits/7809e3bb18b5a1ce6548a34c2559a9f08d3ac74a", "html_url": "https://github.com/rust-lang/rust/commit/7809e3bb18b5a1ce6548a34c2559a9f08d3ac74a"}, {"sha": "465662a69187f89a48700c746ec63200bbb21942", "url": "https://api.github.com/repos/rust-lang/rust/commits/465662a69187f89a48700c746ec63200bbb21942", "html_url": "https://github.com/rust-lang/rust/commit/465662a69187f89a48700c746ec63200bbb21942"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "9e85b22da022a743a2dcf7ca5e95c03d1b03c24c", "filename": "src/chains.rs", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "patch": "@@ -194,8 +194,22 @@ fn rewrite_chain_expr(expr: &ast::Expr,\n                                 width,\n                                 offset)\n         }\n-        ast::Expr_::ExprField(_, ref field) => Some(format!(\".{}\", field.node)),\n-        ast::Expr_::ExprTupField(_, ref field) => Some(format!(\".{}\", field.node)),\n+        ast::Expr_::ExprField(_, ref field) => {\n+            let s = format!(\".{}\", field.node);\n+            if s.len() <= width {\n+                Some(s)\n+            } else {\n+                None\n+            }\n+        }\n+        ast::Expr_::ExprTupField(_, ref field) => {\n+            let s = format!(\".{}\", field.node);\n+            if s.len() <= width {\n+                Some(s)\n+            } else {\n+                None\n+            }\n+        }\n         _ => unreachable!(),\n     }\n }"}, {"sha": "7aa626221aea5748b64982fec32c811974c9d532", "filename": "tests/source/long_field_access.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/tests%2Fsource%2Flong_field_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/tests%2Fsource%2Flong_field_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Flong_field_access.rs?ref=2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "patch": "@@ -0,0 +1,3 @@\n+fn f() {\n+    block_flow.base.stacking_relative_position_of_display_port = self.base.stacking_relative_position_of_display_port;\n+}"}, {"sha": "349d2c2f639ba3d9dfed1e0fea17f635939924d8", "filename": "tests/target/long_field_access.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/tests%2Ftarget%2Flong_field_access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a159e05ac4e0a42ab1e154b96bce01073d8bb1e/tests%2Ftarget%2Flong_field_access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Flong_field_access.rs?ref=2a159e05ac4e0a42ab1e154b96bce01073d8bb1e", "patch": "@@ -0,0 +1,4 @@\n+fn f() {\n+    block_flow.base.stacking_relative_position_of_display_port =\n+        self.base.stacking_relative_position_of_display_port;\n+}"}]}