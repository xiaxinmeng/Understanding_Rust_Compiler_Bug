{"sha": "e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4YTE2MzUzZWE2OWQ3YWI1ZTMxYWJhZWI0NTlhZGNhZDRiYzdhMzY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-08T00:16:04Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-12T00:31:39Z"}, "message": "Remove the no-valgrind test directive now that unwinding is more worky\n\nIssue #236", "tree": {"sha": "e3f4104765763f6bf348bce82948bfcc8851124c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3f4104765763f6bf348bce82948bfcc8851124c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "html_url": "https://github.com/rust-lang/rust/commit/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a7c9f817bbaa17231f522dba27110c9170d283e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/a7c9f817bbaa17231f522dba27110c9170d283e1", "html_url": "https://github.com/rust-lang/rust/commit/a7c9f817bbaa17231f522dba27110c9170d283e1"}], "stats": {"total": 21, "additions": 5, "deletions": 16}, "files": [{"sha": "1d952a57e99d0171cd9336f1abc79696df64c524", "filename": "src/test/compiletest/header.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Fcompiletest%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Fcompiletest%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompiletest%2Fheader.rs?ref=e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "patch": "@@ -16,18 +16,14 @@ type test_props = {\n     compile_flags: option::t<str>,\n     // If present, the name of a file that this test should match when\n     // pretty-printed\n-    pp_exact: option::t<str>,\n-    // FIXME: no-valgrind is a temporary directive until all of run-fail\n-    // is valgrind-clean\n-    no_valgrind: bool\n+    pp_exact: option::t<str>\n };\n \n // Load any test directives embedded in the file\n fn load_props(testfile: &str) -> test_props {\n     let error_patterns = [];\n     let compile_flags = option::none;\n     let pp_exact = option::none;\n-    let no_valgrind = false;\n     for each ln: str in iter_header(testfile) {\n         alt parse_error_pattern(ln) {\n           option::some(ep) { error_patterns += [ep]; }\n@@ -41,16 +37,11 @@ fn load_props(testfile: &str) -> test_props {\n         if option::is_none(pp_exact) {\n             pp_exact = parse_pp_exact(ln, testfile);\n         }\n-\n-        if no_valgrind == false {\n-            no_valgrind = parse_name_directive(ln, \"no-valgrind\");\n-        }\n     }\n     ret {\n         error_patterns: error_patterns,\n         compile_flags: compile_flags,\n-        pp_exact: pp_exact,\n-        no_valgrind: no_valgrind\n+        pp_exact: pp_exact\n     };\n }\n "}, {"sha": "c98f1deba246870225cba82519fc6e42744b38c3", "filename": "src/test/compiletest/runtest.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompiletest%2Fruntest.rs?ref=e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "patch": "@@ -249,10 +249,9 @@ fn make_exe_name(config: &config, testfile: &str) -> str {\n     output_base_name(config, testfile) + os::exec_suffix()\n }\n \n-fn make_run_args(config: &config, props: &test_props, testfile: &str) ->\n+fn make_run_args(config: &config, _props: &test_props, testfile: &str) ->\n    procargs {\n-    let toolargs =\n-        if !props.no_valgrind {\n+    let toolargs = {\n             // If we've got another tool to run under (valgrind),\n             // then split apart its command\n             let runtool =\n@@ -261,7 +260,7 @@ fn make_run_args(config: &config, props: &test_props, testfile: &str) ->\n                   option::none. { option::none }\n                 };\n             split_maybe_args(runtool)\n-        } else { [] };\n+        };\n \n     let args = toolargs + [make_exe_name(config, testfile)];\n     ret {prog: args[0], args: vec::slice(args, 1u, vec::len(args))};"}, {"sha": "24cfff6edb5c3b3dec8cc3842b13736dd80e5c3b", "filename": "src/test/run-fail/linked-failure.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Frun-fail%2Flinked-failure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8a16353ea69d7ab5e31abaeb459adcad4bc7a36/src%2Ftest%2Frun-fail%2Flinked-failure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Flinked-failure.rs?ref=e8a16353ea69d7ab5e31abaeb459adcad4bc7a36", "patch": "@@ -2,7 +2,6 @@\n \n // error-pattern:1 == 2\n // xfail-test\n-// no-valgrind\n use std;\n import std::task;\n import std::comm::port;"}]}