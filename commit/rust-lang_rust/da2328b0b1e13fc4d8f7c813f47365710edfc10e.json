{"sha": "da2328b0b1e13fc4d8f7c813f47365710edfc10e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhMjMyOGIwYjFlMTNmYzRkOGY3YzgxM2Y0NzM2NTcxMGVkZmMxMGU=", "commit": {"author": {"name": "Eduard-Mihai Burtescu", "email": "edy.burt@gmail.com", "date": "2016-08-14T17:29:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-14T17:29:49Z"}, "message": "Rollup merge of #35577 - japaric:relax, r=alexcrichton\n\nadd -mrelax-relocations=no to i686-musl and i586-gnu\n\nI've been experiencing #34978 with these two targets. This applies the\nhack in #35178 to these targets as well.\n\nr? @alexcrichton", "tree": {"sha": "65c9835c48dc0075c6aef4eb4de1308e5ec3f691", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65c9835c48dc0075c6aef4eb4de1308e5ec3f691"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da2328b0b1e13fc4d8f7c813f47365710edfc10e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da2328b0b1e13fc4d8f7c813f47365710edfc10e", "html_url": "https://github.com/rust-lang/rust/commit/da2328b0b1e13fc4d8f7c813f47365710edfc10e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da2328b0b1e13fc4d8f7c813f47365710edfc10e/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ade28e9a26a27153bda67cd5213411bfbd95ff3", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ade28e9a26a27153bda67cd5213411bfbd95ff3", "html_url": "https://github.com/rust-lang/rust/commit/8ade28e9a26a27153bda67cd5213411bfbd95ff3"}, {"sha": "c0ff3c1070f5983c96ddbfe702bd60679305e7b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0ff3c1070f5983c96ddbfe702bd60679305e7b5", "html_url": "https://github.com/rust-lang/rust/commit/c0ff3c1070f5983c96ddbfe702bd60679305e7b5"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "fa2909196dcf184e5761ffb4e83dbb435c30c56e", "filename": "mk/cfg/i586-unknown-linux-gnu.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/da2328b0b1e13fc4d8f7c813f47365710edfc10e/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/da2328b0b1e13fc4d8f7c813f47365710edfc10e/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi586-unknown-linux-gnu.mk?ref=da2328b0b1e13fc4d8f7c813f47365710edfc10e", "patch": "@@ -7,8 +7,8 @@ CFG_LIB_NAME_i586-unknown-linux-gnu=lib$(1).so\n CFG_STATIC_LIB_NAME_i586-unknown-linux-gnu=lib$(1).a\n CFG_LIB_GLOB_i586-unknown-linux-gnu=lib$(1)-*.so\n CFG_LIB_DSYM_GLOB_i586-unknown-linux-gnu=lib$(1)-*.dylib.dSYM\n-CFG_JEMALLOC_CFLAGS_i586-unknown-linux-gnu := -m32 $(CFLAGS) -march=pentium\n-CFG_GCCISH_CFLAGS_i586-unknown-linux-gnu :=  -g -fPIC -m32 $(CFLAGS) -march=pentium\n+CFG_JEMALLOC_CFLAGS_i586-unknown-linux-gnu := -m32 $(CFLAGS) -march=pentium -Wa,-mrelax-relocations=no\n+CFG_GCCISH_CFLAGS_i586-unknown-linux-gnu :=  -g -fPIC -m32 $(CFLAGS) -march=pentium -Wa,-mrelax-relocations=no\n CFG_GCCISH_CXXFLAGS_i586-unknown-linux-gnu := -fno-rtti $(CXXFLAGS) -march=pentium\n CFG_GCCISH_LINK_FLAGS_i586-unknown-linux-gnu := -shared -fPIC -ldl -pthread  -lrt -g -m32\n CFG_GCCISH_DEF_FLAG_i586-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list="}, {"sha": "d6c1ce8967a20f66fc5823346ee7d64a116dc5d3", "filename": "mk/cfg/i686-unknown-linux-musl.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/da2328b0b1e13fc4d8f7c813f47365710edfc10e/mk%2Fcfg%2Fi686-unknown-linux-musl.mk", "raw_url": "https://github.com/rust-lang/rust/raw/da2328b0b1e13fc4d8f7c813f47365710edfc10e/mk%2Fcfg%2Fi686-unknown-linux-musl.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi686-unknown-linux-musl.mk?ref=da2328b0b1e13fc4d8f7c813f47365710edfc10e", "patch": "@@ -7,8 +7,8 @@ CFG_INSTALL_ONLY_RLIB_i686-unknown-linux-musl = 1\n CFG_LIB_NAME_i686-unknown-linux-musl=lib$(1).so\n CFG_STATIC_LIB_NAME_i686-unknown-linux-musl=lib$(1).a\n CFG_LIB_GLOB_i686-unknown-linux-musl=lib$(1)-*.so\n-CFG_JEMALLOC_CFLAGS_i686-unknown-linux-musl := -m32 -Wl,-melf_i386\n-CFG_GCCISH_CFLAGS_i686-unknown-linux-musl :=  -g -fPIC -m32 -Wl,-melf_i386\n+CFG_JEMALLOC_CFLAGS_i686-unknown-linux-musl := -m32 -Wl,-melf_i386 -Wa,-mrelax-relocations=no\n+CFG_GCCISH_CFLAGS_i686-unknown-linux-musl :=  -g -fPIC -m32 -Wl,-melf_i386 -Wa,-mrelax-relocations=no\n CFG_GCCISH_CXXFLAGS_i686-unknown-linux-musl :=\n CFG_GCCISH_LINK_FLAGS_i686-unknown-linux-musl :=\n CFG_GCCISH_DEF_FLAG_i686-unknown-linux-musl :="}, {"sha": "0f14487c3b9efd310789720445b975c8d9b14143", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/da2328b0b1e13fc4d8f7c813f47365710edfc10e/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da2328b0b1e13fc4d8f7c813f47365710edfc10e/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=da2328b0b1e13fc4d8f7c813f47365710edfc10e", "patch": "@@ -868,8 +868,13 @@ impl Build {\n         // This is a hack, because newer binutils broke things on some vms/distros\n         // (i.e., linking against unknown relocs disabled by the following flag)\n         // See: https://github.com/rust-lang/rust/issues/34978\n-        if target == \"x86_64-unknown-linux-musl\" {\n-            base.push(\"-Wa,-mrelax-relocations=no\".into());\n+        match target {\n+            \"i586-unknown-linux-gnu\" |\n+            \"i686-unknown-linux-musl\" |\n+            \"x86_64-unknown-linux-musl\" => {\n+                base.push(\"-Wa,-mrelax-relocations=no\".into());\n+            },\n+            _ => {},\n         }\n         return base\n     }"}]}