{"sha": "c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0YzlmZjhkM2YxZWVkODVlYzdiYjA4ZTQwMmU2NGY1NDVkNDVlNDI=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-02-14T15:55:30Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-02-24T09:41:15Z"}, "message": "remove memory leak from run-pass test", "tree": {"sha": "43c89a67ccd9ab8a79ecc9b4dbe26c6c9f85a471", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43c89a67ccd9ab8a79ecc9b4dbe26c6c9f85a471"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAliv/7sACgkQpp+NIls6\n19lZjw//b2fFBhKEXRiqf3LvbedHLX2yOduwK1dFumV//qpdRQcQPOyPYl3eQ1hI\nV6DyVYRqiOmQ037D1w4QFOmK5kPfllY4s+kaLGvC0RHBFxYtMJ7ho8NHZTG4b8Cq\nkEij6a0avvCFeDFbUWkzlJxGNgrMFY4ERFXPT4yR+VlgK5zIteVuCwHjtX8jhUk5\nBe2/9eBWppaXrZ3TkbizPwy+bw7zzxoo3NV9i7Mc4Dz4ZkrnKML8XVxHwHd0GGKO\niNGKxhCFZsvD984vnn2qs0knJebcvABVx9ZEoH2jwbKyfCS1fA29ruQxSRvuFGTp\ntH3LBQUUWKyVaFaF4OHiwy9x2PkVOCi6TbJHphNEgrCqNB8Hb+fe3fymPNg7tQev\ndoJSAKG4nDIAvyXYuUNpg9GppmLmkBHlkB+/tpAn8LPbCLpxr3Ue08kZGVYnxOAF\n+i070usyreknuo2XFoZUprYsikcOB8SwFd6GWYhpbdLrd8HAWNYeomGzHzOftBCv\naIQHdE2zogq5lU1fCxLyp9J7FFPs/l0b2wtBrt6VNVCEub8KTIszFdIzUXFP8oVN\nez7hX0gnx57ptlrvJsxmurmMR4mWQQx/DSnr/D86gE6OYpG3kZMxcDpXF3JbhpXJ\n9yhmbPJtTD2KC31wJC1+4IY7cZykHSifrLY2JBxf5x083obD794=\n=4R6T\n-----END PGP SIGNATURE-----", "payload": "tree 43c89a67ccd9ab8a79ecc9b4dbe26c6c9f85a471\nparent 529efc51e817f18b879bf5f03dea21e36617b05f\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1487087730 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1487929275 +0100\n\nremove memory leak from run-pass test"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42", "html_url": "https://github.com/rust-lang/rust/commit/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "529efc51e817f18b879bf5f03dea21e36617b05f", "url": "https://api.github.com/repos/rust-lang/rust/commits/529efc51e817f18b879bf5f03dea21e36617b05f", "html_url": "https://github.com/rust-lang/rust/commit/529efc51e817f18b879bf5f03dea21e36617b05f"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "0786db1ef895a431857758969dc03910e4de1c9b", "filename": "tests/run-pass/option_box_transmute_ptr.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42/tests%2Frun-pass%2Foption_box_transmute_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42/tests%2Frun-pass%2Foption_box_transmute_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Foption_box_transmute_ptr.rs?ref=c4c9ff8d3f1eed85ec7bb08e402e64f545d45e42", "patch": "@@ -3,7 +3,10 @@ fn option_box_deref() -> i32 {\n     let val = Some(Box::new(42));\n     unsafe {\n         let ptr: *const i32 = std::mem::transmute::<Option<Box<i32>>, *const i32>(val);\n-        *ptr\n+        let ret = *ptr;\n+        // unleak memory\n+        std::mem::transmute::<*const i32, Option<Box<i32>>>(ptr);\n+        ret\n     }\n }\n "}]}