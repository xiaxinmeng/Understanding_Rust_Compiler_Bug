{"sha": "5bf739c824c25867811163e05f706ff3d20bd2e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViZjczOWM4MjRjMjU4Njc4MTExNjNlMDVmNzA2ZmYzZDIwYmQyZTY=", "commit": {"author": {"name": "Jeremy Kolb", "email": "kjeremy@gmail.com", "date": "2019-01-12T18:54:08Z"}, "committer": {"name": "Jeremy Kolb", "email": "kjeremy@gmail.com", "date": "2019-01-12T18:54:08Z"}, "message": "Move run_single into runnables", "tree": {"sha": "e52e1eedb5412be01651dcdcb8a280d54d3eff99", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e52e1eedb5412be01651dcdcb8a280d54d3eff99"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bf739c824c25867811163e05f706ff3d20bd2e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bf739c824c25867811163e05f706ff3d20bd2e6", "html_url": "https://github.com/rust-lang/rust/commit/5bf739c824c25867811163e05f706ff3d20bd2e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bf739c824c25867811163e05f706ff3d20bd2e6/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff", "url": "https://api.github.com/repos/rust-lang/rust/commits/72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff", "html_url": "https://github.com/rust-lang/rust/commit/72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff"}], "stats": {"total": 83, "additions": 17, "deletions": 66}, "files": [{"sha": "33e2b34a28c1765f11f5860a359918a08871c995", "filename": "editors/code/src/commands/index.ts", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fcommands%2Findex.ts", "raw_url": "https://github.com/rust-lang/rust/raw/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fcommands%2Findex.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands%2Findex.ts?ref=5bf739c824c25867811163e05f706ff3d20bd2e6", "patch": "@@ -4,7 +4,6 @@ import * as joinLines from './join_lines';\n import * as matchingBrace from './matching_brace';\n import * as onEnter from './on_enter';\n import * as parentModule from './parent_module';\n-import * as runSingle from './run_single';\n import * as runnables from './runnables';\n import * as syntaxTree from './syntaxTree';\n \n@@ -14,7 +13,6 @@ export {\n     joinLines,\n     matchingBrace,\n     parentModule,\n-    runSingle,\n     runnables,\n     syntaxTree,\n     onEnter"}, {"sha": "855bcdb068930ff55ebbd01abb80a636a662b8ce", "filename": "editors/code/src/commands/run_single.ts", "status": "removed", "additions": 0, "deletions": 63, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff/editors%2Fcode%2Fsrc%2Fcommands%2Frun_single.ts", "raw_url": "https://github.com/rust-lang/rust/raw/72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff/editors%2Fcode%2Fsrc%2Fcommands%2Frun_single.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands%2Frun_single.ts?ref=72d48b08fb88624c1e91341b0cd47a9bd0c1d5ff", "patch": "@@ -1,63 +0,0 @@\n-import * as vscode from 'vscode';\n-import * as lc from 'vscode-languageclient';\n-\n-interface Runnable {\n-    range: lc.Range;\n-    label: string;\n-    bin: string;\n-    args: string[];\n-    env: { [index: string]: string };\n-}\n-\n-interface CargoTaskDefinition extends vscode.TaskDefinition {\n-    type: 'cargo';\n-    label: string;\n-    command: string;\n-    args: string[];\n-    env?: { [key: string]: string };\n-}\n-\n-function createTask(spec: Runnable): vscode.Task {\n-    const TASK_SOURCE = 'Rust';\n-    const definition: CargoTaskDefinition = {\n-        type: 'cargo',\n-        label: 'cargo',\n-        command: spec.bin,\n-        args: spec.args,\n-        env: spec.env\n-    };\n-\n-    const execOption: vscode.ShellExecutionOptions = {\n-        cwd: '.',\n-        env: definition.env\n-    };\n-    const exec = new vscode.ShellExecution(definition.command, definition.args, execOption);\n-\n-    const f = vscode.workspace.workspaceFolders![0];\n-    const t = new vscode.Task(\n-        definition,\n-        f,\n-        definition.label,\n-        TASK_SOURCE,\n-        exec,\n-        ['$rustc']\n-    );\n-    t.presentationOptions.clear = true\n-    return t;\n-}\n-\n-export async function handle(runnable: Runnable) {\n-    const editor = vscode.window.activeTextEditor;\n-    if (editor == null || editor.document.languageId !== 'rust') {\n-        return;\n-    }\n-\n-    const task = createTask(runnable);\n-    task.group = vscode.TaskGroup.Build;\n-    task.presentationOptions = {\n-        reveal: vscode.TaskRevealKind.Always,\n-        panel: vscode.TaskPanelKind.Dedicated,\n-    };\n-    \n-    return vscode.tasks.executeTask(task);\n-}\n\\ No newline at end of file"}, {"sha": "f9a4e2fc93b0a4cc1253c49ba3a221ad8cf73873", "filename": "editors/code/src/commands/runnables.ts", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fcommands%2Frunnables.ts", "raw_url": "https://github.com/rust-lang/rust/raw/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fcommands%2Frunnables.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands%2Frunnables.ts?ref=5bf739c824c25867811163e05f706ff3d20bd2e6", "patch": "@@ -103,3 +103,19 @@ export async function handle() {\n         return await vscode.tasks.executeTask(task);\n     }\n }\n+\n+export async function handleSingle(runnable: Runnable) {\n+    const editor = vscode.window.activeTextEditor;\n+    if (editor == null || editor.document.languageId !== 'rust') {\n+        return;\n+    }\n+\n+    const task = createTask(runnable);\n+    task.group = vscode.TaskGroup.Build;\n+    task.presentationOptions = {\n+        reveal: vscode.TaskRevealKind.Always,\n+        panel: vscode.TaskPanelKind.Dedicated,\n+    };\n+    \n+    return vscode.tasks.executeTask(task);\n+}\n\\ No newline at end of file"}, {"sha": "9edfb13b5f7d586b7a30d03b66c1b6c25c23b1ac", "filename": "editors/code/src/extension.ts", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fextension.ts", "raw_url": "https://github.com/rust-lang/rust/raw/5bf739c824c25867811163e05f706ff3d20bd2e6/editors%2Fcode%2Fsrc%2Fextension.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fextension.ts?ref=5bf739c824c25867811163e05f706ff3d20bd2e6", "patch": "@@ -56,7 +56,7 @@ export function activate(context: vscode.ExtensionContext) {\n     overrideCommand('type', commands.onEnter.handle);\n \n     // Unlike the above this does not send requests to the language server\n-    registerCommand('ra-lsp.run-single', commands.runSingle.handle);\n+    registerCommand('ra-lsp.run-single', commands.runnables.handleSingle);\n \n     // Notifications are events triggered by the language server\n     const allNotifications: Iterable<"}]}