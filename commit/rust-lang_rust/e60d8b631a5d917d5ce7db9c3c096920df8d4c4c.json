{"sha": "e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "node_id": "C_kwDOAAsO6NoAKGU2MGQ4YjYzMWE1ZDkxN2Q1Y2U3ZGI5YzNjMDk2OTIwZGY4ZDRjNGM", "commit": {"author": {"name": "Jakob Degen", "email": "jakob.e.degen@gmail.com", "date": "2022-05-30T23:26:02Z"}, "committer": {"name": "Jakob Degen", "email": "jakob.e.degen@gmail.com", "date": "2022-05-30T23:29:36Z"}, "message": "Fix TLS access mir opt test and remove stale files", "tree": {"sha": "902f69230feff1548a8c0a02d96e731f92fb92db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/902f69230feff1548a8c0a02d96e731f92fb92db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "html_url": "https://github.com/rust-lang/rust/commit/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c/comments", "author": {"login": "JakobDegen", "id": 51179609, "node_id": "MDQ6VXNlcjUxMTc5NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/51179609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JakobDegen", "html_url": "https://github.com/JakobDegen", "followers_url": "https://api.github.com/users/JakobDegen/followers", "following_url": "https://api.github.com/users/JakobDegen/following{/other_user}", "gists_url": "https://api.github.com/users/JakobDegen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JakobDegen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JakobDegen/subscriptions", "organizations_url": "https://api.github.com/users/JakobDegen/orgs", "repos_url": "https://api.github.com/users/JakobDegen/repos", "events_url": "https://api.github.com/users/JakobDegen/events{/privacy}", "received_events_url": "https://api.github.com/users/JakobDegen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JakobDegen", "id": 51179609, "node_id": "MDQ6VXNlcjUxMTc5NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/51179609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JakobDegen", "html_url": "https://github.com/JakobDegen", "followers_url": "https://api.github.com/users/JakobDegen/followers", "following_url": "https://api.github.com/users/JakobDegen/following{/other_user}", "gists_url": "https://api.github.com/users/JakobDegen/gists{/gist_id}", "starred_url": "https://api.github.com/users/JakobDegen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JakobDegen/subscriptions", "organizations_url": "https://api.github.com/users/JakobDegen/orgs", "repos_url": "https://api.github.com/users/JakobDegen/repos", "events_url": "https://api.github.com/users/JakobDegen/events{/privacy}", "received_events_url": "https://api.github.com/users/JakobDegen/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "html_url": "https://github.com/rust-lang/rust/commit/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3"}], "stats": {"total": 347, "additions": 21, "deletions": 326}, "files": [{"sha": "1d20e17a8499b95ab830f78ecc389e31ea8841ab", "filename": "src/test/mir-opt/inst_combine_deref.deep_opt.InstCombine.diff", "status": "removed", "additions": 0, "deletions": 92, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.deep_opt.InstCombine.diff", "raw_url": "https://github.com/rust-lang/rust/raw/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.deep_opt.InstCombine.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finst_combine_deref.deep_opt.InstCombine.diff?ref=28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "patch": "@@ -1,92 +0,0 @@\n-- // MIR for `deep_opt` before InstCombine\n-+ // MIR for `deep_opt` after InstCombine\n-  \n-  fn deep_opt() -> (u64, u64, u64) {\n-      let mut _0: (u64, u64, u64);         // return place in scope 0 at $DIR/inst_combine_deref.rs:11:18: 11:33\n-      let _1: u64;                         // in scope 0 at $DIR/inst_combine_deref.rs:12:9: 12:11\n-      let mut _10: u64;                    // in scope 0 at $DIR/inst_combine_deref.rs:21:6: 21:8\n-      let mut _11: u64;                    // in scope 0 at $DIR/inst_combine_deref.rs:21:10: 21:12\n-      let mut _12: u64;                    // in scope 0 at $DIR/inst_combine_deref.rs:21:14: 21:16\n-      scope 1 {\n-          debug x1 => _1;                  // in scope 1 at $DIR/inst_combine_deref.rs:12:9: 12:11\n-          let _2: u64;                     // in scope 1 at $DIR/inst_combine_deref.rs:13:9: 13:11\n-          scope 2 {\n-              debug x2 => _2;              // in scope 2 at $DIR/inst_combine_deref.rs:13:9: 13:11\n-              let _3: u64;                 // in scope 2 at $DIR/inst_combine_deref.rs:14:9: 14:11\n-              scope 3 {\n-                  debug x3 => _3;          // in scope 3 at $DIR/inst_combine_deref.rs:14:9: 14:11\n-                  let _4: &u64;            // in scope 3 at $DIR/inst_combine_deref.rs:15:9: 15:11\n-                  scope 4 {\n-                      debug y1 => _4;      // in scope 4 at $DIR/inst_combine_deref.rs:15:9: 15:11\n-                      let _5: &u64;        // in scope 4 at $DIR/inst_combine_deref.rs:16:9: 16:11\n-                      scope 5 {\n-                          debug y2 => _5;  // in scope 5 at $DIR/inst_combine_deref.rs:16:9: 16:11\n-                          let _6: &u64;    // in scope 5 at $DIR/inst_combine_deref.rs:17:9: 17:11\n-                          scope 6 {\n-                              debug y3 => _6; // in scope 6 at $DIR/inst_combine_deref.rs:17:9: 17:11\n-                              let _7: u64; // in scope 6 at $DIR/inst_combine_deref.rs:18:9: 18:11\n-                              scope 7 {\n-                                  debug z1 => _7; // in scope 7 at $DIR/inst_combine_deref.rs:18:9: 18:11\n-                                  let _8: u64; // in scope 7 at $DIR/inst_combine_deref.rs:19:9: 19:11\n-                                  scope 8 {\n-                                      debug z2 => _8; // in scope 8 at $DIR/inst_combine_deref.rs:19:9: 19:11\n-                                      let _9: u64; // in scope 8 at $DIR/inst_combine_deref.rs:20:9: 20:11\n-                                      scope 9 {\n-                                          debug z3 => _9; // in scope 9 at $DIR/inst_combine_deref.rs:20:9: 20:11\n-                                      }\n-                                  }\n-                              }\n-                          }\n-                      }\n-                  }\n-              }\n-          }\n-      }\n-  \n-      bb0: {\n-          StorageLive(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:12:9: 12:11\n-          _1 = const 1_u64;                // scope 0 at $DIR/inst_combine_deref.rs:12:14: 12:15\n-          StorageLive(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:13:9: 13:11\n-          _2 = const 2_u64;                // scope 1 at $DIR/inst_combine_deref.rs:13:14: 13:15\n-          StorageLive(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:14:9: 14:11\n-          _3 = const 3_u64;                // scope 2 at $DIR/inst_combine_deref.rs:14:14: 14:15\n-          StorageLive(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:15:9: 15:11\n-          _4 = &_1;                        // scope 3 at $DIR/inst_combine_deref.rs:15:14: 15:17\n-          StorageLive(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:16:9: 16:11\n-          _5 = &_2;                        // scope 4 at $DIR/inst_combine_deref.rs:16:14: 16:17\n-          StorageLive(_6);                 // scope 5 at $DIR/inst_combine_deref.rs:17:9: 17:11\n-          _6 = &_3;                        // scope 5 at $DIR/inst_combine_deref.rs:17:14: 17:17\n-          StorageLive(_7);                 // scope 6 at $DIR/inst_combine_deref.rs:18:9: 18:11\n--         _7 = (*_4);                      // scope 6 at $DIR/inst_combine_deref.rs:18:14: 18:17\n-+         _7 = _1;                         // scope 6 at $DIR/inst_combine_deref.rs:18:14: 18:17\n-          StorageLive(_8);                 // scope 7 at $DIR/inst_combine_deref.rs:19:9: 19:11\n--         _8 = (*_5);                      // scope 7 at $DIR/inst_combine_deref.rs:19:14: 19:17\n-+         _8 = _2;                         // scope 7 at $DIR/inst_combine_deref.rs:19:14: 19:17\n-          StorageLive(_9);                 // scope 8 at $DIR/inst_combine_deref.rs:20:9: 20:11\n--         _9 = (*_6);                      // scope 8 at $DIR/inst_combine_deref.rs:20:14: 20:17\n-+         _9 = _3;                         // scope 8 at $DIR/inst_combine_deref.rs:20:14: 20:17\n-          StorageLive(_10);                // scope 9 at $DIR/inst_combine_deref.rs:21:6: 21:8\n-          _10 = _7;                        // scope 9 at $DIR/inst_combine_deref.rs:21:6: 21:8\n-          StorageLive(_11);                // scope 9 at $DIR/inst_combine_deref.rs:21:10: 21:12\n-          _11 = _8;                        // scope 9 at $DIR/inst_combine_deref.rs:21:10: 21:12\n-          StorageLive(_12);                // scope 9 at $DIR/inst_combine_deref.rs:21:14: 21:16\n-          _12 = _9;                        // scope 9 at $DIR/inst_combine_deref.rs:21:14: 21:16\n-          (_0.0: u64) = move _10;          // scope 9 at $DIR/inst_combine_deref.rs:21:5: 21:17\n-          (_0.1: u64) = move _11;          // scope 9 at $DIR/inst_combine_deref.rs:21:5: 21:17\n-          (_0.2: u64) = move _12;          // scope 9 at $DIR/inst_combine_deref.rs:21:5: 21:17\n-          StorageDead(_12);                // scope 9 at $DIR/inst_combine_deref.rs:21:16: 21:17\n-          StorageDead(_11);                // scope 9 at $DIR/inst_combine_deref.rs:21:16: 21:17\n-          StorageDead(_10);                // scope 9 at $DIR/inst_combine_deref.rs:21:16: 21:17\n-          StorageDead(_9);                 // scope 8 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_8);                 // scope 7 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_7);                 // scope 6 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_6);                 // scope 5 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          StorageDead(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:22:1: 22:2\n-          return;                          // scope 0 at $DIR/inst_combine_deref.rs:22:2: 22:2\n-      }\n-  }\n-  "}, {"sha": "ee8fcdcde4095ef23ae91740074dd86d539a4b12", "filename": "src/test/mir-opt/inst_combine_deref.do_not_miscompile.InstCombine.diff", "status": "removed", "additions": 0, "deletions": 85, "changes": 85, "blob_url": "https://github.com/rust-lang/rust/blob/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.do_not_miscompile.InstCombine.diff", "raw_url": "https://github.com/rust-lang/rust/raw/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.do_not_miscompile.InstCombine.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finst_combine_deref.do_not_miscompile.InstCombine.diff?ref=28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "patch": "@@ -1,85 +0,0 @@\n-- // MIR for `do_not_miscompile` before InstCombine\n-+ // MIR for `do_not_miscompile` after InstCombine\n-  \n-  fn do_not_miscompile() -> () {\n-      let mut _0: ();                      // return place in scope 0 at $DIR/inst_combine_deref.rs:54:24: 54:24\n-      let _1: i32;                         // in scope 0 at $DIR/inst_combine_deref.rs:55:9: 55:10\n-      let mut _5: &i32;                    // in scope 0 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-      let _6: &i32;                        // in scope 0 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-      let _7: ();                          // in scope 0 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-      let mut _8: bool;                    // in scope 0 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-      let mut _9: bool;                    // in scope 0 at $DIR/inst_combine_deref.rs:60:13: 60:21\n-      let mut _10: i32;                    // in scope 0 at $DIR/inst_combine_deref.rs:60:13: 60:15\n-      let mut _11: !;                      // in scope 0 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-      scope 1 {\n-          debug x => _1;                   // in scope 1 at $DIR/inst_combine_deref.rs:55:9: 55:10\n-          let _2: i32;                     // in scope 1 at $DIR/inst_combine_deref.rs:56:9: 56:10\n-          scope 2 {\n-              debug a => _2;               // in scope 2 at $DIR/inst_combine_deref.rs:56:9: 56:10\n-              let mut _3: &i32;            // in scope 2 at $DIR/inst_combine_deref.rs:57:9: 57:14\n-              scope 3 {\n-                  debug y => _3;           // in scope 3 at $DIR/inst_combine_deref.rs:57:9: 57:14\n-                  let _4: &mut &i32;       // in scope 3 at $DIR/inst_combine_deref.rs:58:9: 58:10\n-                  scope 4 {\n-                      debug z => _4;       // in scope 4 at $DIR/inst_combine_deref.rs:58:9: 58:10\n-                  }\n-              }\n-          }\n-      }\n-  \n-      bb0: {\n-          StorageLive(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:55:9: 55:10\n-          _1 = const 42_i32;               // scope 0 at $DIR/inst_combine_deref.rs:55:13: 55:15\n-          StorageLive(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:56:9: 56:10\n-          _2 = const 99_i32;               // scope 1 at $DIR/inst_combine_deref.rs:56:13: 56:15\n-          StorageLive(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:57:9: 57:14\n-          _3 = &_1;                        // scope 2 at $DIR/inst_combine_deref.rs:57:17: 57:19\n-          StorageLive(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:58:9: 58:10\n-          _4 = &mut _3;                    // scope 3 at $DIR/inst_combine_deref.rs:58:13: 58:19\n-          StorageLive(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-          StorageLive(_6);                 // scope 4 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-          _6 = &_2;                        // scope 4 at $DIR/inst_combine_deref.rs:59:10: 59:12\n--         _5 = &(*_6);                     // scope 4 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-+         _5 = _6;                         // scope 4 at $DIR/inst_combine_deref.rs:59:10: 59:12\n-          (*_4) = move _5;                 // scope 4 at $DIR/inst_combine_deref.rs:59:5: 59:12\n-          StorageDead(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:59:11: 59:12\n-          StorageDead(_6);                 // scope 4 at $DIR/inst_combine_deref.rs:59:12: 59:13\n-          StorageLive(_7);                 // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-          StorageLive(_8);                 // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-          StorageLive(_9);                 // scope 4 at $DIR/inst_combine_deref.rs:60:13: 60:21\n-          StorageLive(_10);                // scope 4 at $DIR/inst_combine_deref.rs:60:13: 60:15\n-          _10 = (*_3);                     // scope 4 at $DIR/inst_combine_deref.rs:60:13: 60:15\n-          _9 = Eq(move _10, const 99_i32); // scope 4 at $DIR/inst_combine_deref.rs:60:13: 60:21\n-          StorageDead(_10);                // scope 4 at $DIR/inst_combine_deref.rs:60:20: 60:21\n-          _8 = Not(move _9);               // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-          StorageDead(_9);                 // scope 4 at $DIR/inst_combine_deref.rs:60:22: 60:23\n-          switchInt(move _8) -> [false: bb2, otherwise: bb1]; // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-      }\n-  \n-      bb1: {\n-          StorageLive(_11);                // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-          core::panicking::panic(const \"assertion failed: *y == 99\"); // scope 4 at $DIR/inst_combine_deref.rs:60:5: 60:23\n-                                           // mir::Constant\n-                                           // + span: $DIR/inst_combine_deref.rs:60:5: 60:23\n-                                           // + literal: Const { ty: fn(&'static str) -> ! {core::panicking::panic}, val: Value(Scalar(<ZST>)) }\n-                                           // ty::Const\n-                                           // + ty: &str\n-                                           // + val: Value(Slice { data: Allocation { bytes: [97, 115, 115, 101, 114, 116, 105, 111, 110, 32, 102, 97, 105, 108, 101, 100, 58, 32, 42, 121, 32, 61, 61, 32, 57, 57], relocations: Relocations(SortedMap { data: [] }), init_mask: InitMask { blocks: [67108863], len: Size { raw: 26 } }, size: Size { raw: 26 }, align: Align { pow2: 0 }, mutability: Not, extra: () }, start: 0, end: 26 })\n-                                           // mir::Constant\n-                                           // + span: $DIR/inst_combine_deref.rs:1:1: 1:1\n-                                           // + literal: Const { ty: &str, val: Value(Slice { data: Allocation { bytes: [97, 115, 115, 101, 114, 116, 105, 111, 110, 32, 102, 97, 105, 108, 101, 100, 58, 32, 42, 121, 32, 61, 61, 32, 57, 57], relocations: Relocations(SortedMap { data: [] }), init_mask: InitMask { blocks: [67108863], len: Size { raw: 26 } }, size: Size { raw: 26 }, align: Align { pow2: 0 }, mutability: Not, extra: () }, start: 0, end: 26 }) }\n-      }\n-  \n-      bb2: {\n-          _7 = const ();                   // scope 4 at $DIR/inst_combine_deref.rs:60:23: 60:23\n-          StorageDead(_8);                 // scope 4 at $DIR/inst_combine_deref.rs:60:22: 60:23\n-          StorageDead(_7);                 // scope 4 at $DIR/inst_combine_deref.rs:60:22: 60:23\n-          _0 = const ();                   // scope 0 at $DIR/inst_combine_deref.rs:54:24: 61:2\n-          StorageDead(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:61:1: 61:2\n-          StorageDead(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:61:1: 61:2\n-          StorageDead(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:61:1: 61:2\n-          StorageDead(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:61:1: 61:2\n-          return;                          // scope 0 at $DIR/inst_combine_deref.rs:61:2: 61:2\n-      }\n-  }\n-  "}, {"sha": "69036491a10b75f2175d5e2ece3b73bb3bd83338", "filename": "src/test/mir-opt/inst_combine_deref.dont_opt.InstCombine.diff", "status": "removed", "additions": 0, "deletions": 53, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.dont_opt.InstCombine.diff", "raw_url": "https://github.com/rust-lang/rust/raw/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.dont_opt.InstCombine.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finst_combine_deref.dont_opt.InstCombine.diff?ref=28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "patch": "@@ -1,53 +0,0 @@\n-- // MIR for `dont_opt` before InstCombine\n-+ // MIR for `dont_opt` after InstCombine\n-  \n-  fn dont_opt() -> u64 {\n-      let mut _0: u64;                     // return place in scope 0 at $DIR/inst_combine_deref.rs:43:18: 43:21\n-      let _1: i32;                         // in scope 0 at $DIR/inst_combine_deref.rs:44:9: 44:10\n-      let mut _5: &i32;                    // in scope 0 at $DIR/inst_combine_deref.rs:48:10: 48:14\n-      scope 1 {\n-          debug y => _1;                   // in scope 1 at $DIR/inst_combine_deref.rs:44:9: 44:10\n-          let _2: &i32;                    // in scope 1 at $DIR/inst_combine_deref.rs:45:9: 45:13\n-          scope 2 {\n-              debug _ref => _2;            // in scope 2 at $DIR/inst_combine_deref.rs:45:9: 45:13\n-              let _3: i32;                 // in scope 2 at $DIR/inst_combine_deref.rs:46:9: 46:10\n-              scope 3 {\n-                  debug x => _3;           // in scope 3 at $DIR/inst_combine_deref.rs:46:9: 46:10\n-                  let mut _4: &i32;        // in scope 3 at $DIR/inst_combine_deref.rs:47:9: 47:15\n-                  scope 4 {\n-                      debug _1 => _4;      // in scope 4 at $DIR/inst_combine_deref.rs:47:9: 47:15\n-                      let _6: i32;         // in scope 4 at $DIR/inst_combine_deref.rs:49:9: 49:11\n-                      scope 5 {\n-                          debug _4 => _6;  // in scope 5 at $DIR/inst_combine_deref.rs:49:9: 49:11\n-                      }\n-                  }\n-              }\n-          }\n-      }\n-  \n-      bb0: {\n-          StorageLive(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:44:9: 44:10\n-          _1 = const 5_i32;                // scope 0 at $DIR/inst_combine_deref.rs:44:13: 44:14\n-          StorageLive(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:45:9: 45:13\n-          _2 = &_1;                        // scope 1 at $DIR/inst_combine_deref.rs:45:16: 45:18\n-          StorageLive(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:46:9: 46:10\n-          _3 = const 5_i32;                // scope 2 at $DIR/inst_combine_deref.rs:46:13: 46:14\n-          StorageLive(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:47:9: 47:15\n-          _4 = &_3;                        // scope 3 at $DIR/inst_combine_deref.rs:47:18: 47:20\n-          StorageLive(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:48:10: 48:14\n--         _5 = &(*_2);                     // scope 4 at $DIR/inst_combine_deref.rs:48:10: 48:14\n-+         _5 = _2;                         // scope 4 at $DIR/inst_combine_deref.rs:48:10: 48:14\n-          _4 = move _5;                    // scope 4 at $DIR/inst_combine_deref.rs:48:5: 48:14\n-          StorageDead(_5);                 // scope 4 at $DIR/inst_combine_deref.rs:48:13: 48:14\n-          StorageLive(_6);                 // scope 4 at $DIR/inst_combine_deref.rs:49:9: 49:11\n-          _6 = (*_4);                      // scope 4 at $DIR/inst_combine_deref.rs:49:14: 49:17\n-          _0 = const 0_u64;                // scope 5 at $DIR/inst_combine_deref.rs:50:5: 50:6\n-          StorageDead(_6);                 // scope 4 at $DIR/inst_combine_deref.rs:51:1: 51:2\n-          StorageDead(_4);                 // scope 3 at $DIR/inst_combine_deref.rs:51:1: 51:2\n-          StorageDead(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:51:1: 51:2\n-          StorageDead(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:51:1: 51:2\n-          StorageDead(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:51:1: 51:2\n-          return;                          // scope 0 at $DIR/inst_combine_deref.rs:51:2: 51:2\n-      }\n-  }\n-  "}, {"sha": "c867543d05ea315745545664cf90b6a8521c573a", "filename": "src/test/mir-opt/inst_combine_deref.opt_struct.InstCombine.diff", "status": "removed", "additions": 0, "deletions": 44, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.opt_struct.InstCombine.diff", "raw_url": "https://github.com/rust-lang/rust/raw/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.opt_struct.InstCombine.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finst_combine_deref.opt_struct.InstCombine.diff?ref=28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "patch": "@@ -1,44 +0,0 @@\n-- // MIR for `opt_struct` before InstCombine\n-+ // MIR for `opt_struct` after InstCombine\n-  \n-  fn opt_struct(_1: S) -> u64 {\n-      debug s => _1;                       // in scope 0 at $DIR/inst_combine_deref.rs:30:15: 30:16\n-      let mut _0: u64;                     // return place in scope 0 at $DIR/inst_combine_deref.rs:30:24: 30:27\n-      let _2: &u64;                        // in scope 0 at $DIR/inst_combine_deref.rs:31:9: 31:10\n-      let mut _5: u64;                     // in scope 0 at $DIR/inst_combine_deref.rs:34:5: 34:7\n-      let mut _6: u64;                     // in scope 0 at $DIR/inst_combine_deref.rs:34:10: 34:11\n-      scope 1 {\n-          debug a => _2;                   // in scope 1 at $DIR/inst_combine_deref.rs:31:9: 31:10\n-          let _3: &u64;                    // in scope 1 at $DIR/inst_combine_deref.rs:32:9: 32:10\n-          scope 2 {\n-              debug b => _3;               // in scope 2 at $DIR/inst_combine_deref.rs:32:9: 32:10\n-              let _4: u64;                 // in scope 2 at $DIR/inst_combine_deref.rs:33:9: 33:10\n-              scope 3 {\n-                  debug x => _4;           // in scope 3 at $DIR/inst_combine_deref.rs:33:9: 33:10\n-              }\n-          }\n-      }\n-  \n-      bb0: {\n-          StorageLive(_2);                 // scope 0 at $DIR/inst_combine_deref.rs:31:9: 31:10\n-          _2 = &(_1.0: u64);               // scope 0 at $DIR/inst_combine_deref.rs:31:13: 31:17\n-          StorageLive(_3);                 // scope 1 at $DIR/inst_combine_deref.rs:32:9: 32:10\n-          _3 = &(_1.1: u64);               // scope 1 at $DIR/inst_combine_deref.rs:32:13: 32:17\n-          StorageLive(_4);                 // scope 2 at $DIR/inst_combine_deref.rs:33:9: 33:10\n--         _4 = (*_2);                      // scope 2 at $DIR/inst_combine_deref.rs:33:13: 33:15\n-+         _4 = (_1.0: u64);                // scope 2 at $DIR/inst_combine_deref.rs:33:13: 33:15\n-          StorageLive(_5);                 // scope 3 at $DIR/inst_combine_deref.rs:34:5: 34:7\n--         _5 = (*_3);                      // scope 3 at $DIR/inst_combine_deref.rs:34:5: 34:7\n-+         _5 = (_1.1: u64);                // scope 3 at $DIR/inst_combine_deref.rs:34:5: 34:7\n-          StorageLive(_6);                 // scope 3 at $DIR/inst_combine_deref.rs:34:10: 34:11\n-          _6 = _4;                         // scope 3 at $DIR/inst_combine_deref.rs:34:10: 34:11\n-          _0 = Add(move _5, move _6);      // scope 3 at $DIR/inst_combine_deref.rs:34:5: 34:11\n-          StorageDead(_6);                 // scope 3 at $DIR/inst_combine_deref.rs:34:10: 34:11\n-          StorageDead(_5);                 // scope 3 at $DIR/inst_combine_deref.rs:34:10: 34:11\n-          StorageDead(_4);                 // scope 2 at $DIR/inst_combine_deref.rs:35:1: 35:2\n-          StorageDead(_3);                 // scope 1 at $DIR/inst_combine_deref.rs:35:1: 35:2\n-          StorageDead(_2);                 // scope 0 at $DIR/inst_combine_deref.rs:35:1: 35:2\n-          return;                          // scope 0 at $DIR/inst_combine_deref.rs:35:2: 35:2\n-      }\n-  }\n-  "}, {"sha": "f52dfe379ca3045334a7b86adfaf8f1fff1c1e35", "filename": "src/test/mir-opt/inst_combine_deref.simple_opt.InstCombine.diff", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.simple_opt.InstCombine.diff", "raw_url": "https://github.com/rust-lang/rust/raw/28b891916d4c85cd10fb2e9cfa8bc836a2c459f3/src%2Ftest%2Fmir-opt%2Finst_combine_deref.simple_opt.InstCombine.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finst_combine_deref.simple_opt.InstCombine.diff?ref=28b891916d4c85cd10fb2e9cfa8bc836a2c459f3", "patch": "@@ -1,34 +0,0 @@\n-- // MIR for `simple_opt` before InstCombine\n-+ // MIR for `simple_opt` after InstCombine\n-  \n-  fn simple_opt() -> u64 {\n-      let mut _0: u64;                     // return place in scope 0 at $DIR/inst_combine_deref.rs:3:20: 3:23\n-      let _1: u64;                         // in scope 0 at $DIR/inst_combine_deref.rs:4:9: 4:10\n-      scope 1 {\n-          debug x => _1;                   // in scope 1 at $DIR/inst_combine_deref.rs:4:9: 4:10\n-          let _2: &u64;                    // in scope 1 at $DIR/inst_combine_deref.rs:5:9: 5:10\n-          scope 2 {\n-              debug y => _2;               // in scope 2 at $DIR/inst_combine_deref.rs:5:9: 5:10\n-              let _3: u64;                 // in scope 2 at $DIR/inst_combine_deref.rs:6:9: 6:10\n-              scope 3 {\n-                  debug z => _3;           // in scope 3 at $DIR/inst_combine_deref.rs:6:9: 6:10\n-              }\n-          }\n-      }\n-  \n-      bb0: {\n-          StorageLive(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:4:9: 4:10\n-          _1 = const 5_u64;                // scope 0 at $DIR/inst_combine_deref.rs:4:13: 4:14\n-          StorageLive(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:5:9: 5:10\n-          _2 = &_1;                        // scope 1 at $DIR/inst_combine_deref.rs:5:13: 5:15\n-          StorageLive(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:6:9: 6:10\n--         _3 = (*_2);                      // scope 2 at $DIR/inst_combine_deref.rs:6:13: 6:15\n-+         _3 = _1;                         // scope 2 at $DIR/inst_combine_deref.rs:6:13: 6:15\n-          _0 = _3;                         // scope 3 at $DIR/inst_combine_deref.rs:7:5: 7:6\n-          StorageDead(_3);                 // scope 2 at $DIR/inst_combine_deref.rs:8:1: 8:2\n-          StorageDead(_2);                 // scope 1 at $DIR/inst_combine_deref.rs:8:1: 8:2\n-          StorageDead(_1);                 // scope 0 at $DIR/inst_combine_deref.rs:8:1: 8:2\n-          return;                          // scope 0 at $DIR/inst_combine_deref.rs:8:2: 8:2\n-      }\n-  }\n-  "}, {"sha": "19344c868621264154043b78630c4c44837cb560", "filename": "src/test/mir-opt/tls-access.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c/src%2Ftest%2Fmir-opt%2Ftls-access.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c/src%2Ftest%2Fmir-opt%2Ftls-access.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Ftls-access.rs?ref=e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "patch": "@@ -1,3 +1,6 @@\n+// EMIT_MIR tls_access.main.PreCodegen.after.mir\n+// compile-flags: -Zmir-opt-level=0\n+\n #![feature(thread_local)]\n \n #[thread_local]\n@@ -9,6 +12,3 @@ fn main() {\n         FOO = 42;\n     }\n }\n-\n-// EMIT_MIR tls_access.main.SimplifyCfg-final.after.mir\n-// compile-flags: -Zmir-opt-level=0"}, {"sha": "baa77497e3862a5607ddcc853531dc45d6c907d8", "filename": "src/test/mir-opt/tls_access.main.PreCodegen.after.mir", "status": "renamed", "additions": 18, "deletions": 15, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c/src%2Ftest%2Fmir-opt%2Ftls_access.main.PreCodegen.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/e60d8b631a5d917d5ce7db9c3c096920df8d4c4c/src%2Ftest%2Fmir-opt%2Ftls_access.main.PreCodegen.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Ftls_access.main.PreCodegen.after.mir?ref=e60d8b631a5d917d5ce7db9c3c096920df8d4c4c", "patch": "@@ -1,25 +1,28 @@\n-// MIR for `main` after SimplifyCfg-final\n+// MIR for `main` after PreCodegen\n \n fn main() -> () {\n-    let mut _0: ();                      // return place in scope 0 at $DIR/tls-access.rs:6:11: 6:11\n-    let _2: *mut u8;                     // in scope 0 at $DIR/tls-access.rs:8:18: 8:21\n-    let mut _3: *mut u8;                 // in scope 0 at $DIR/tls-access.rs:9:9: 9:12\n+    let mut _0: ();                      // return place in scope 0 at $DIR/tls-access.rs:9:11: 9:11\n+    let _2: *mut u8;                     // in scope 0 at $DIR/tls-access.rs:11:18: 11:21\n+    let mut _3: *mut u8;                 // in scope 0 at $DIR/tls-access.rs:12:9: 12:12\n     scope 1 {\n-        let _1: &u8;                     // in scope 1 at $DIR/tls-access.rs:8:13: 8:14\n+        let _1: &u8;                     // in scope 1 at $DIR/tls-access.rs:11:13: 11:14\n         scope 2 {\n-            debug a => _1;               // in scope 2 at $DIR/tls-access.rs:8:13: 8:14\n+            debug a => _1;               // in scope 2 at $DIR/tls-access.rs:11:13: 11:14\n         }\n     }\n \n     bb0: {\n-        StorageLive(_1);                 // scope 1 at $DIR/tls-access.rs:8:13: 8:14\n-        StorageLive(_2);                 // scope 1 at $DIR/tls-access.rs:8:18: 8:21\n-        StorageLive(_3);                 // scope 2 at $DIR/tls-access.rs:9:9: 9:12\n-        _3 = &/*tls*/ mut FOO;           // scope 2 at $DIR/tls-access.rs:9:9: 9:12\n-        (*_3) = const 42_u8;             // scope 2 at $DIR/tls-access.rs:9:9: 9:17\n-        StorageDead(_3);                 // scope 2 at $DIR/tls-access.rs:9:17: 9:18\n-        StorageDead(_2);                 // scope 1 at $DIR/tls-access.rs:10:5: 10:6\n-        StorageDead(_1);                 // scope 1 at $DIR/tls-access.rs:10:5: 10:6\n-        return;                          // scope 0 at $DIR/tls-access.rs:11:2: 11:2\n+        StorageLive(_1);                 // scope 1 at $DIR/tls-access.rs:11:13: 11:14\n+        StorageLive(_2);                 // scope 1 at $DIR/tls-access.rs:11:18: 11:21\n+        _2 = &/*tls*/ mut FOO;           // scope 1 at $DIR/tls-access.rs:11:18: 11:21\n+        _1 = &(*_2);                     // scope 1 at $DIR/tls-access.rs:11:17: 11:21\n+        StorageLive(_3);                 // scope 2 at $DIR/tls-access.rs:12:9: 12:12\n+        _3 = &/*tls*/ mut FOO;           // scope 2 at $DIR/tls-access.rs:12:9: 12:12\n+        (*_3) = const 42_u8;             // scope 2 at $DIR/tls-access.rs:12:9: 12:17\n+        StorageDead(_3);                 // scope 2 at $DIR/tls-access.rs:12:17: 12:18\n+        _0 = const ();                   // scope 1 at $DIR/tls-access.rs:10:5: 13:6\n+        StorageDead(_2);                 // scope 1 at $DIR/tls-access.rs:13:5: 13:6\n+        StorageDead(_1);                 // scope 1 at $DIR/tls-access.rs:13:5: 13:6\n+        return;                          // scope 0 at $DIR/tls-access.rs:14:2: 14:2\n     }\n }", "previous_filename": "src/test/mir-opt/tls_access.main.SimplifyCfg-final.after.mir"}]}