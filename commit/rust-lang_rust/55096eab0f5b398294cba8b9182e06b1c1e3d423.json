{"sha": "55096eab0f5b398294cba8b9182e06b1c1e3d423", "node_id": "C_kwDOAAsO6NoAKDU1MDk2ZWFiMGY1YjM5ODI5NGNiYThiOTE4MmUwNmIxYzFlM2Q0MjM", "commit": {"author": {"name": "Jason Newcomb", "email": "jsnewcomb@pm.me", "date": "2022-12-01T02:29:48Z"}, "committer": {"name": "Jason Newcomb", "email": "jsnewcomb@pm.me", "date": "2022-12-01T02:29:48Z"}, "message": "Don't suggest removing `mut` from references in `redundant_static_lifetimes`", "tree": {"sha": "e3646f5aef996efee111752af955f4b5bedef1ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3646f5aef996efee111752af955f4b5bedef1ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55096eab0f5b398294cba8b9182e06b1c1e3d423", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55096eab0f5b398294cba8b9182e06b1c1e3d423", "html_url": "https://github.com/rust-lang/rust/commit/55096eab0f5b398294cba8b9182e06b1c1e3d423", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55096eab0f5b398294cba8b9182e06b1c1e3d423/comments", "author": {"login": "Jarcho", "id": 7761774, "node_id": "MDQ6VXNlcjc3NjE3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7761774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jarcho", "html_url": "https://github.com/Jarcho", "followers_url": "https://api.github.com/users/Jarcho/followers", "following_url": "https://api.github.com/users/Jarcho/following{/other_user}", "gists_url": "https://api.github.com/users/Jarcho/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jarcho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jarcho/subscriptions", "organizations_url": "https://api.github.com/users/Jarcho/orgs", "repos_url": "https://api.github.com/users/Jarcho/repos", "events_url": "https://api.github.com/users/Jarcho/events{/privacy}", "received_events_url": "https://api.github.com/users/Jarcho/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Jarcho", "id": 7761774, "node_id": "MDQ6VXNlcjc3NjE3NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7761774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jarcho", "html_url": "https://github.com/Jarcho", "followers_url": "https://api.github.com/users/Jarcho/followers", "following_url": "https://api.github.com/users/Jarcho/following{/other_user}", "gists_url": "https://api.github.com/users/Jarcho/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jarcho/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jarcho/subscriptions", "organizations_url": "https://api.github.com/users/Jarcho/orgs", "repos_url": "https://api.github.com/users/Jarcho/repos", "events_url": "https://api.github.com/users/Jarcho/events{/privacy}", "received_events_url": "https://api.github.com/users/Jarcho/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1cdb06d406181e15a943dab926273013fdefd516", "url": "https://api.github.com/repos/rust-lang/rust/commits/1cdb06d406181e15a943dab926273013fdefd516", "html_url": "https://github.com/rust-lang/rust/commit/1cdb06d406181e15a943dab926273013fdefd516"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "41f991a967bfd9929b025657ef21c8fc0aa573ca", "filename": "clippy_lints/src/redundant_static_lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55096eab0f5b398294cba8b9182e06b1c1e3d423/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55096eab0f5b398294cba8b9182e06b1c1e3d423/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs?ref=55096eab0f5b398294cba8b9182e06b1c1e3d423", "patch": "@@ -66,7 +66,7 @@ impl RedundantStaticLifetimes {\n                         TyKind::Path(..) | TyKind::Slice(..) | TyKind::Array(..) | TyKind::Tup(..) => {\n                             if lifetime.ident.name == rustc_span::symbol::kw::StaticLifetime {\n                                 let snip = snippet(cx, borrow_type.ty.span, \"<type>\");\n-                                let sugg = format!(\"&{snip}\");\n+                                let sugg = format!(\"&{}{snip}\", borrow_type.mutbl.prefix_str());\n                                 span_lint_and_then(\n                                     cx,\n                                     REDUNDANT_STATIC_LIFETIMES,"}, {"sha": "bca777a890c3b249c2f0ae7bbf61c099a2d0705e", "filename": "tests/ui/redundant_static_lifetimes.fixed", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.fixed?ref=55096eab0f5b398294cba8b9182e06b1c1e3d423", "patch": "@@ -39,8 +39,14 @@ static STATIC_VAR_TUPLE: &(u8, u8) = &(1, 2); // ERROR Consider removing 'static\n \n static STATIC_VAR_ARRAY: &[u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n \n+static mut STATIC_MUT_SLICE: &mut [u32] = &mut [0];\n+\n fn main() {\n     let false_positive: &'static str = \"test\";\n+\n+    unsafe {\n+        STATIC_MUT_SLICE[0] = 0;\n+    }\n }\n \n trait Bar {"}, {"sha": "afe7644816d2e4f0420d04d1547c3080f45d984b", "filename": "tests/ui/redundant_static_lifetimes.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.rs?ref=55096eab0f5b398294cba8b9182e06b1c1e3d423", "patch": "@@ -39,8 +39,14 @@ static STATIC_VAR_TUPLE: &'static (u8, u8) = &(1, 2); // ERROR Consider removing\n \n static STATIC_VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n \n+static mut STATIC_MUT_SLICE: &'static mut [u32] = &mut [0];\n+\n fn main() {\n     let false_positive: &'static str = \"test\";\n+\n+    unsafe {\n+        STATIC_MUT_SLICE[0] = 0;\n+    }\n }\n \n trait Bar {"}, {"sha": "b2cbd2d9d01b0350e7f31710c9fdec05f2cfc6ce", "filename": "tests/ui/redundant_static_lifetimes.stderr", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55096eab0f5b398294cba8b9182e06b1c1e3d423/tests%2Fui%2Fredundant_static_lifetimes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.stderr?ref=55096eab0f5b398294cba8b9182e06b1c1e3d423", "patch": "@@ -97,10 +97,16 @@ LL | static STATIC_VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removin\n    |                          -^^^^^^^-------- help: consider removing `'static`: `&[u8; 1]`\n \n error: statics have by default a `'static` lifetime\n-  --> $DIR/redundant_static_lifetimes.rs:65:16\n+  --> $DIR/redundant_static_lifetimes.rs:42:31\n+   |\n+LL | static mut STATIC_MUT_SLICE: &'static mut [u32] = &mut [0];\n+   |                              -^^^^^^^---------- help: consider removing `'static`: `&mut [u32]`\n+\n+error: statics have by default a `'static` lifetime\n+  --> $DIR/redundant_static_lifetimes.rs:71:16\n    |\n LL |     static V: &'static u8 = &17;\n    |               -^^^^^^^--- help: consider removing `'static`: `&u8`\n \n-error: aborting due to 17 previous errors\n+error: aborting due to 18 previous errors\n "}]}