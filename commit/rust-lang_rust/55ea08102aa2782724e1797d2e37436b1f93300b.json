{"sha": "55ea08102aa2782724e1797d2e37436b1f93300b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1ZWEwODEwMmFhMjc4MjcyNGUxNzk3ZDJlMzc0MzZiMWY5MzMwMGI=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-02-21T09:34:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-21T09:34:49Z"}, "message": "Merge pull request #1543 from Manishearth/fix-windows-tests\n\nfix windows tests", "tree": {"sha": "e81008898bc66087a6db766e3912840e52295d7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e81008898bc66087a6db766e3912840e52295d7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55ea08102aa2782724e1797d2e37436b1f93300b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55ea08102aa2782724e1797d2e37436b1f93300b", "html_url": "https://github.com/rust-lang/rust/commit/55ea08102aa2782724e1797d2e37436b1f93300b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55ea08102aa2782724e1797d2e37436b1f93300b/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f07f793fa870b45237269a6266cb9eb85a4c05ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/f07f793fa870b45237269a6266cb9eb85a4c05ec", "html_url": "https://github.com/rust-lang/rust/commit/f07f793fa870b45237269a6266cb9eb85a4c05ec"}, {"sha": "3fa1cd94117faac8162c3cf091c48e014787be1d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3fa1cd94117faac8162c3cf091c48e014787be1d", "html_url": "https://github.com/rust-lang/rust/commit/3fa1cd94117faac8162c3cf091c48e014787be1d"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "74b659b0b0fa7a8f0f91a99c7f0520d4925f6c6d", "filename": "appveyor.yml", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -4,8 +4,10 @@ environment:\n     matrix:\n         - TARGET: i686-pc-windows-gnu\n           MSYS2_BITS: 32\n+          RUN_CARGO_CLIPPY: true\n         - TARGET: i686-pc-windows-msvc\n           MSYS2_BITS: 32\n+          RUN_CARGO_CLIPPY: true\n         - TARGET: x86_64-pc-windows-gnu\n           MSYS2_BITS: 64\n         - TARGET: x86_64-pc-windows-msvc\n@@ -22,11 +24,12 @@ install:\n build: false\n \n test_script:\n+    - set RUST_BACKTRACE=1\n     - cargo build --features debugging\n     - cargo test --features debugging\n     - copy target\\debug\\cargo-clippy.exe C:\\Users\\appveyor\\.cargo\\bin\\\n     - cargo clippy -- -D clippy\n-    - cd clippy_lints && cargo clippy -- -D clippy && cd ..\n+    - if defined RUN_CARGO_CLIPPY cd clippy_lints && cargo clippy -- -D clippy && cd ..\n \n notifications:\n     - provider: Email"}, {"sha": "39a8380bc08633e6272d21ebe8c9b264515b4138", "filename": "tests/compile-test.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-test.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -29,4 +29,8 @@ fn compile_test() {\n     prepare_env();\n     run_mode(\"run-pass\", \"run-pass\");\n     run_mode(\"ui\", \"ui\");\n+    #[cfg(target_os = \"windows\")]\n+    run_mode(\"ui-windows\", \"ui\");\n+    #[cfg(not(target_os = \"windows\"))]\n+    run_mode(\"ui-posix\", \"ui\");\n }"}, {"sha": "b5ea6d96ef58a5be9dafcb54b158bc3b4af272d8", "filename": "tests/ui-posix/conf_bad_toml.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_toml.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_bad_toml.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_toml.stderr"}, {"sha": "823e01a33b96172e13855c6c023599f2852e71f9", "filename": "tests/ui-posix/conf_bad_toml.toml", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.toml", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_toml.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.toml?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_toml.toml"}, {"sha": "8dc3e4ec2e675c61c5c8bffa38b4521db5cdb4a6", "filename": "tests/ui-posix/conf_bad_type.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_type.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_bad_type.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_type.stderr"}, {"sha": "168675394d7f45124940fcfa3433aab378c1fbd8", "filename": "tests/ui-posix/conf_bad_type.toml", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.toml", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_bad_type.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.toml?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_bad_type.toml"}, {"sha": "e287f7e02af932cc5f8ba849aaf8f18c89a9fc7b", "filename": "tests/ui-posix/conf_non_existant.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_non_existant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_non_existant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_non_existant.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_non_existant.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_non_existant.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_non_existant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-posix%2Fconf_non_existant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_non_existant.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "previous_filename": "tests/ui/conf_non_existant.stderr"}, {"sha": "b5ea6d96ef58a5be9dafcb54b158bc3b4af272d8", "filename": "tests/ui-windows/conf_bad_toml.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/compile-fail/conf_bad_toml.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_bad_toml.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}, {"sha": "823e01a33b96172e13855c6c023599f2852e71f9", "filename": "tests/ui-windows/conf_bad_toml.toml", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.toml", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_toml.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.toml?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,2 @@\n+fn this_is_obviously(not: a, toml: file) {\n+}"}, {"sha": "8dc3e4ec2e675c61c5c8bffa38b4521db5cdb4a6", "filename": "tests/ui-windows/conf_bad_type.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file: `blacklisted-names` is expected to be a `Vec < String >` but is a `integer`\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/compile-fail/conf_bad_type.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_bad_type.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}, {"sha": "168675394d7f45124940fcfa3433aab378c1fbd8", "filename": "tests/ui-windows/conf_bad_type.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.toml", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_bad_type.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.toml?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1 @@\n+blacklisted-names = 42"}, {"sha": "e287f7e02af932cc5f8ba849aaf8f18c89a9fc7b", "filename": "tests/ui-windows/conf_non_existant.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_non_existant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_non_existant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_non_existant.rs?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/auxiliary/non_existant_conf.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_non_existant.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_non_existant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/55ea08102aa2782724e1797d2e37436b1f93300b/tests%2Fui-windows%2Fconf_non_existant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_non_existant.stderr?ref=55ea08102aa2782724e1797d2e37436b1f93300b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}]}