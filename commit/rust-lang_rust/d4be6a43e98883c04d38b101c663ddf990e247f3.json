{"sha": "d4be6a43e98883c04d38b101c663ddf990e247f3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0YmU2YTQzZTk4ODgzYzA0ZDM4YjEwMWM2NjNkZGY5OTBlMjQ3ZjM=", "commit": {"author": {"name": "Thorben Kroeger", "email": "thorbenkroeger@gmail.com", "date": "2015-11-14T16:47:59Z"}, "committer": {"name": "Thorben Kroeger", "email": "thorbenkroeger@gmail.com", "date": "2015-11-14T20:50:40Z"}, "message": "new config 'chain_indent'", "tree": {"sha": "b451e37d8b8563e4c848863aa7c60479ce4418c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b451e37d8b8563e4c848863aa7c60479ce4418c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4be6a43e98883c04d38b101c663ddf990e247f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4be6a43e98883c04d38b101c663ddf990e247f3", "html_url": "https://github.com/rust-lang/rust/commit/d4be6a43e98883c04d38b101c663ddf990e247f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4be6a43e98883c04d38b101c663ddf990e247f3/comments", "author": {"login": "thorbenk", "id": 889141, "node_id": "MDQ6VXNlcjg4OTE0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/889141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thorbenk", "html_url": "https://github.com/thorbenk", "followers_url": "https://api.github.com/users/thorbenk/followers", "following_url": "https://api.github.com/users/thorbenk/following{/other_user}", "gists_url": "https://api.github.com/users/thorbenk/gists{/gist_id}", "starred_url": "https://api.github.com/users/thorbenk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thorbenk/subscriptions", "organizations_url": "https://api.github.com/users/thorbenk/orgs", "repos_url": "https://api.github.com/users/thorbenk/repos", "events_url": "https://api.github.com/users/thorbenk/events{/privacy}", "received_events_url": "https://api.github.com/users/thorbenk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thorbenk", "id": 889141, "node_id": "MDQ6VXNlcjg4OTE0MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/889141?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thorbenk", "html_url": "https://github.com/thorbenk", "followers_url": "https://api.github.com/users/thorbenk/followers", "following_url": "https://api.github.com/users/thorbenk/following{/other_user}", "gists_url": "https://api.github.com/users/thorbenk/gists{/gist_id}", "starred_url": "https://api.github.com/users/thorbenk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thorbenk/subscriptions", "organizations_url": "https://api.github.com/users/thorbenk/orgs", "repos_url": "https://api.github.com/users/thorbenk/repos", "events_url": "https://api.github.com/users/thorbenk/events{/privacy}", "received_events_url": "https://api.github.com/users/thorbenk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cf22300028b6480618e16f6b70e38ba37245945", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cf22300028b6480618e16f6b70e38ba37245945", "html_url": "https://github.com/rust-lang/rust/commit/2cf22300028b6480618e16f6b70e38ba37245945"}], "stats": {"total": 56, "additions": 55, "deletions": 1}, "files": [{"sha": "31cd9624016b6b05f3a2e57c84d19bbe127f0c22", "filename": "src/chains.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -56,7 +56,15 @@ pub fn rewrite_chain(mut expr: &ast::Expr,\n     } else if is_block_expr(parent, &parent_rewrite) {\n         (parent_block_indent, false)\n     } else {\n-        (offset + Indent::new(context.config.tab_spaces, 0), false)\n+        match context.config.chain_indent {\n+            BlockIndentStyle::Inherit => (context.block_indent, false),\n+            BlockIndentStyle::Tabbed => {\n+                (context.block_indent.block_indent(context.config), false)\n+            }\n+            BlockIndentStyle::Visual => {\n+                (offset + Indent::new(context.config.tab_spaces, 0), false)\n+            }\n+        }\n     };\n \n     let max_width = try_opt!((width + offset.width()).checked_sub(indent.width()));"}, {"sha": "dcf0816335b3d74bb1f9e41a8015c3fe1b072573", "filename": "src/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -294,6 +294,7 @@ create_config! {\n     report_fixme: ReportTactic, ReportTactic::Never,\n         \"Report all, none or unnumbered occurrences of FIXME in source file comments\";\n     chain_base_indent: BlockIndentStyle, BlockIndentStyle::Visual, \"Indent on chain base\";\n+    chain_indent: BlockIndentStyle, BlockIndentStyle::Visual, \"Indentation of chain\";\n     reorder_imports: bool, false, \"Reorder import statements alphabetically\";\n     single_line_if_else: bool, false, \"Put else on same line as closing brace for if statements\";\n     format_strings: bool, true, \"Format string literals, or leave as is\";"}, {"sha": "67272a656c613453a11ca1ee8fd79c257b2f93d8", "filename": "tests/source/chains-indent-inherit.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-inherit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-inherit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-inherit.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Inherit\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "89bf5bb1a69fdc2ba57e83251d439795aff0785e", "filename": "tests/source/chains-indent-tabbed.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-tabbed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-tabbed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-tabbed.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Tabbed\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "7e7f0558ffe5b95f89807f80a62c5bd773b29c8a", "filename": "tests/source/chains-indent-visual.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Fsource%2Fchains-indent-visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fchains-indent-visual.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,5 @@\n+// rustfmt-chain_indent: Visual\n+\n+fn test() {\n+    let x = my_long_function().my_even_longer_function().my_nested_function().some_random_name().another_function().do_it();\n+}"}, {"sha": "76d3ef8204b19fcfaab159d75e711321ae017cf5", "filename": "tests/target/chains-indent-inherit.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-inherit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-inherit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-inherit.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Inherit\n+\n+fn test() {\n+    let x = my_long_function()\n+    .my_even_longer_function()\n+    .my_nested_function()\n+    .some_random_name()\n+    .another_function()\n+    .do_it();\n+}"}, {"sha": "4611b0587ff7b7e844207d100e018bfdf5e48341", "filename": "tests/target/chains-indent-tabbed.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-tabbed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-tabbed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-tabbed.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Tabbed\n+\n+fn test() {\n+    let x = my_long_function()\n+        .my_even_longer_function()\n+        .my_nested_function()\n+        .some_random_name()\n+        .another_function()\n+        .do_it();\n+}"}, {"sha": "e91317bd5dec29fadbff8dadbea5661406805e30", "filename": "tests/target/chains-indent-visual.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-visual.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4be6a43e98883c04d38b101c663ddf990e247f3/tests%2Ftarget%2Fchains-indent-visual.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fchains-indent-visual.rs?ref=d4be6a43e98883c04d38b101c663ddf990e247f3", "patch": "@@ -0,0 +1,10 @@\n+// rustfmt-chain_indent: Visual\n+\n+fn test() {\n+    let x = my_long_function()\n+                .my_even_longer_function()\n+                .my_nested_function()\n+                .some_random_name()\n+                .another_function()\n+                .do_it();\n+}"}]}