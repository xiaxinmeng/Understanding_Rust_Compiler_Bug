{"sha": "5d2e565bb1f4566bdaab053876bacad72c57f582", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkMmU1NjViYjFmNDU2NmJkYWFiMDUzODc2YmFjYWQ3MmM1N2Y1ODI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-28T21:14:03Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-06-28T21:14:03Z"}, "message": "auto merge of #7437 : brson/rust/winver, r=brson\n\nr? @graydon (or anybody)", "tree": {"sha": "ef1072732e9a4154ce1b3f682ff65c28e2de058f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef1072732e9a4154ce1b3f682ff65c28e2de058f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d2e565bb1f4566bdaab053876bacad72c57f582", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d2e565bb1f4566bdaab053876bacad72c57f582", "html_url": "https://github.com/rust-lang/rust/commit/5d2e565bb1f4566bdaab053876bacad72c57f582", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d2e565bb1f4566bdaab053876bacad72c57f582/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f44b951a1ea40b61508b2d0abb3f239797f885c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/f44b951a1ea40b61508b2d0abb3f239797f885c5", "html_url": "https://github.com/rust-lang/rust/commit/f44b951a1ea40b61508b2d0abb3f239797f885c5"}, {"sha": "6511fe45e2df0328a5267dae9b1dda160edd1861", "url": "https://api.github.com/repos/rust-lang/rust/commits/6511fe45e2df0328a5267dae9b1dda160edd1861", "html_url": "https://github.com/rust-lang/rust/commit/6511fe45e2df0328a5267dae9b1dda160edd1861"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "dfeb735f5f1e6354ede1e634f1a8557cd4e79dee", "filename": "Makefile.in", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5d2e565bb1f4566bdaab053876bacad72c57f582/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/5d2e565bb1f4566bdaab053876bacad72c57f582/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=5d2e565bb1f4566bdaab053876bacad72c57f582", "patch": "@@ -141,6 +141,9 @@ endif\n CFG_GIT_DIR := $(CFG_SRC_DIR).git\n CFG_RELEASE = 0.7-pre\n CFG_VERSION = $(CFG_RELEASE)\n+# windows exe's need numeric versions - don't use anything but\n+# numbers and dots here\n+CFG_VERSION_WIN = 0.7\n \n ifneq ($(wildcard $(CFG_GIT)),)\n ifneq ($(wildcard $(CFG_GIT_DIR)),)\n@@ -311,6 +314,7 @@ $(foreach host,$(CFG_HOST_TRIPLES), \\\n export CFG_SRC_DIR\n export CFG_BUILD_DIR\n export CFG_VERSION\n+export CFG_VERSION_WIN\n export CFG_BUILD_TRIPLE\n export CFG_LLVM_ROOT\n export CFG_ENABLE_MINGW_CROSS"}, {"sha": "cb5b3607fca87c1272aae151ab47ccaeb43b71d7", "filename": "mk/dist.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d2e565bb1f4566bdaab053876bacad72c57f582/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5d2e565bb1f4566bdaab053876bacad72c57f582/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=5d2e565bb1f4566bdaab053876bacad72c57f582", "patch": "@@ -57,7 +57,7 @@ LICENSE.txt: $(S)COPYRIGHT $(S)LICENSE-APACHE $(S)LICENSE-MIT\n \tcp $< $@\n \n $(PKG_EXE): rust.iss modpath.iss LICENSE.txt rust-logo.ico \\\n-            $(PKG_FILES) all rustc-stage3\n+            $(PKG_FILES) $(CSREQ3_T_$(CFG_BUILD_TRIPLE)_H_$(CFG_BUILD_TRIPLE))\n \t@$(call E, ISCC: $@)\n \t$(Q)\"$(CFG_ISCC)\" $<\n endif"}, {"sha": "0a901358ac1f07f91ee42a3d6859fe7721d634d7", "filename": "mk/tools.mk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5d2e565bb1f4566bdaab053876bacad72c57f582/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/5d2e565bb1f4566bdaab053876bacad72c57f582/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=5d2e565bb1f4566bdaab053876bacad72c57f582", "patch": "@@ -191,7 +191,8 @@ $(foreach host,$(CFG_HOST_TRIPLES),\t\t\t\t\\\n $(foreach target,$(CFG_TARGET_TRIPLES),\t\t\t\t\\\n  $(eval $(call TOOLS_STAGE_N_TARGET,0,1,$(host),$(target)))\t\\\n  $(eval $(call TOOLS_STAGE_N_TARGET,1,2,$(host),$(target)))\t\\\n- $(eval $(call TOOLS_STAGE_N_TARGET,2,3,$(host),$(target)))))\n+ $(eval $(call TOOLS_STAGE_N_TARGET,2,3,$(host),$(target)))\t\\\n+ $(eval $(call TOOLS_STAGE_N_TARGET,3,bogus,$(host),$(target)))))\n \n $(foreach host,$(CFG_HOST_TRIPLES),\t\t\t\t\\\n  $(eval $(call TOOLS_STAGE_N_HOST,0,1,$(host),$(host)))\t\\"}, {"sha": "0375a041a39e97ab9a009b35fced5d015b0fd3e3", "filename": "src/etc/pkg/rust.iss", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5d2e565bb1f4566bdaab053876bacad72c57f582/src%2Fetc%2Fpkg%2Frust.iss", "raw_url": "https://github.com/rust-lang/rust/raw/5d2e565bb1f4566bdaab053876bacad72c57f582/src%2Fetc%2Fpkg%2Frust.iss", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpkg%2Frust.iss?ref=5d2e565bb1f4566bdaab053876bacad72c57f582", "patch": "@@ -1,4 +1,5 @@\n #define CFG_VERSION GetEnv(\"CFG_VERSION\")\n+#define CFG_VERSION_WIN GetEnv(\"CFG_VERSION_WIN\")\n \n [Setup]\n \n@@ -8,7 +9,7 @@ AppVersion={#CFG_VERSION}\n AppCopyright=Copyright (C) 2006-2013 Mozilla Foundation, MIT license\n AppPublisher=Mozilla Foundation\n AppPublisherURL=http://www.rust-lang.org\n-VersionInfoVersion={#CFG_VERSION}\n+VersionInfoVersion={#CFG_VERSION_WIN}\n LicenseFile=LICENSE.txt\n \n DisableWelcomePage=true"}]}