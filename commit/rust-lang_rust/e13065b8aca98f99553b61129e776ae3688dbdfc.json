{"sha": "e13065b8aca98f99553b61129e776ae3688dbdfc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxMzA2NWI4YWNhOThmOTk1NTNiNjExMjllNzc2YWUzNjg4ZGJkZmM=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-01-18T10:25:57Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2021-01-18T10:30:12Z"}, "message": "Add profile call", "tree": {"sha": "f6c7a86721334f65e5104b6882028ccdc21eaa20", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f6c7a86721334f65e5104b6882028ccdc21eaa20"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e13065b8aca98f99553b61129e776ae3688dbdfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e13065b8aca98f99553b61129e776ae3688dbdfc", "html_url": "https://github.com/rust-lang/rust/commit/e13065b8aca98f99553b61129e776ae3688dbdfc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e13065b8aca98f99553b61129e776ae3688dbdfc/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fde4a860aea903a0455a05c1def1d07a6573639b", "url": "https://api.github.com/repos/rust-lang/rust/commits/fde4a860aea903a0455a05c1def1d07a6573639b", "html_url": "https://github.com/rust-lang/rust/commit/fde4a860aea903a0455a05c1def1d07a6573639b"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "46f26282e186c2169ad164da49ac460b69179269", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e13065b8aca98f99553b61129e776ae3688dbdfc/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/e13065b8aca98f99553b61129e776ae3688dbdfc/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=e13065b8aca98f99553b61129e776ae3688dbdfc", "patch": "@@ -1231,6 +1231,7 @@ dependencies = [\n  \"log\",\n  \"paths\",\n  \"proc_macro_api\",\n+ \"profile\",\n  \"rustc-hash\",\n  \"serde\",\n  \"serde_json\","}, {"sha": "293cb5bfe1016234996bb0622b8d29c7cb80bc28", "filename": "crates/project_model/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Fproject_model%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Fproject_model%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2FCargo.toml?ref=e13065b8aca98f99553b61129e776ae3688dbdfc", "patch": "@@ -25,3 +25,4 @@ toolchain = { path = \"../toolchain\", version = \"0.0.0\" }\n proc_macro_api =  { path = \"../proc_macro_api\", version = \"0.0.0\" }\n paths =  { path = \"../paths\", version = \"0.0.0\" }\n stdx =  { path = \"../stdx\", version = \"0.0.0\" }\n+profile =  { path = \"../profile\", version = \"0.0.0\" }"}, {"sha": "c511320d70398ee11910cad1344a94d63951a73c", "filename": "crates/project_model/src/workspace.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Fproject_model%2Fsrc%2Fworkspace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Fproject_model%2Fsrc%2Fworkspace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Fworkspace.rs?ref=e13065b8aca98f99553b61129e776ae3688dbdfc", "patch": "@@ -207,6 +207,7 @@ impl ProjectWorkspace {\n         proc_macro_client: Option<&ProcMacroClient>,\n         load: &mut dyn FnMut(&AbsPath) -> Option<FileId>,\n     ) -> CrateGraph {\n+        let _p = profile::span(\"ProjectWorkspace::to_crate_graph\");\n         let proc_macro_loader = |path: &Path| match proc_macro_client {\n             Some(client) => client.by_dylib_path(path),\n             None => Vec::new(),\n@@ -299,6 +300,7 @@ fn cargo_to_crate_graph(\n     sysroot: &Sysroot,\n     rustc: &Option<CargoWorkspace>,\n ) -> CrateGraph {\n+    let _p = profile::span(\"cargo_to_crate_graph\");\n     let mut crate_graph = CrateGraph::default();\n     let (public_deps, libproc_macro) =\n         sysroot_to_crate_graph(&mut crate_graph, sysroot, target, load);\n@@ -493,6 +495,7 @@ fn sysroot_to_crate_graph(\n     target: Option<&str>,\n     load: &mut dyn FnMut(&AbsPath) -> Option<FileId>,\n ) -> (Vec<(CrateName, CrateId)>, Option<CrateId>) {\n+    let _p = profile::span(\"sysroot_to_crate_graph\");\n     let mut cfg_options = CfgOptions::default();\n     cfg_options.extend(get_rustc_cfg_options(target));\n     let sysroot_crates: FxHashMap<SysrootCrate, CrateId> = sysroot"}, {"sha": "34e3cfe682eff12e39429696410fcf2b513113bf", "filename": "crates/rust-analyzer/src/reload.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e13065b8aca98f99553b61129e776ae3688dbdfc/crates%2Frust-analyzer%2Fsrc%2Freload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Freload.rs?ref=e13065b8aca98f99553b61129e776ae3688dbdfc", "patch": "@@ -274,6 +274,7 @@ impl GlobalState {\n     }\n \n     fn reload_flycheck(&mut self) {\n+        let _p = profile::span(\"GlobalState::reload_flycheck\");\n         let config = match self.config.flycheck() {\n             Some(it) => it,\n             None => {"}]}