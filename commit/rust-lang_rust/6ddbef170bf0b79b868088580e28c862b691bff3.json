{"sha": "6ddbef170bf0b79b868088580e28c862b691bff3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkZGJlZjE3MGJmMGI3OWI4NjgwODg1ODBlMjhjODYyYjY5MWJmZjM=", "commit": {"author": {"name": "Stanislav Tkach", "email": "stanislav.tkach@gmail.com", "date": "2020-05-26T20:06:46Z"}, "committer": {"name": "Stanislav Tkach", "email": "stanislav.tkach@gmail.com", "date": "2020-05-26T20:06:46Z"}, "message": "Simplify suggestion", "tree": {"sha": "ad94de25e60b91306da929952f52e398d32c9e66", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ad94de25e60b91306da929952f52e398d32c9e66"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6ddbef170bf0b79b868088580e28c862b691bff3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6ddbef170bf0b79b868088580e28c862b691bff3", "html_url": "https://github.com/rust-lang/rust/commit/6ddbef170bf0b79b868088580e28c862b691bff3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6ddbef170bf0b79b868088580e28c862b691bff3/comments", "author": {"login": "stanislav-tkach", "id": 2997902, "node_id": "MDQ6VXNlcjI5OTc5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2997902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stanislav-tkach", "html_url": "https://github.com/stanislav-tkach", "followers_url": "https://api.github.com/users/stanislav-tkach/followers", "following_url": "https://api.github.com/users/stanislav-tkach/following{/other_user}", "gists_url": "https://api.github.com/users/stanislav-tkach/gists{/gist_id}", "starred_url": "https://api.github.com/users/stanislav-tkach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stanislav-tkach/subscriptions", "organizations_url": "https://api.github.com/users/stanislav-tkach/orgs", "repos_url": "https://api.github.com/users/stanislav-tkach/repos", "events_url": "https://api.github.com/users/stanislav-tkach/events{/privacy}", "received_events_url": "https://api.github.com/users/stanislav-tkach/received_events", "type": "User", "site_admin": false}, "committer": {"login": "stanislav-tkach", "id": 2997902, "node_id": "MDQ6VXNlcjI5OTc5MDI=", "avatar_url": "https://avatars.githubusercontent.com/u/2997902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stanislav-tkach", "html_url": "https://github.com/stanislav-tkach", "followers_url": "https://api.github.com/users/stanislav-tkach/followers", "following_url": "https://api.github.com/users/stanislav-tkach/following{/other_user}", "gists_url": "https://api.github.com/users/stanislav-tkach/gists{/gist_id}", "starred_url": "https://api.github.com/users/stanislav-tkach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stanislav-tkach/subscriptions", "organizations_url": "https://api.github.com/users/stanislav-tkach/orgs", "repos_url": "https://api.github.com/users/stanislav-tkach/repos", "events_url": "https://api.github.com/users/stanislav-tkach/events{/privacy}", "received_events_url": "https://api.github.com/users/stanislav-tkach/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9199de34d0ad78fe1ff0d072f6bd5c01906bdb3", "url": "https://api.github.com/repos/rust-lang/rust/commits/a9199de34d0ad78fe1ff0d072f6bd5c01906bdb3", "html_url": "https://github.com/rust-lang/rust/commit/a9199de34d0ad78fe1ff0d072f6bd5c01906bdb3"}], "stats": {"total": 35, "additions": 16, "deletions": 19}, "files": [{"sha": "f4e46a04931519b95e5386734bcafa02e87614c1", "filename": "src/librustc_typeck/check/callee.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Flibrustc_typeck%2Fcheck%2Fcallee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Flibrustc_typeck%2Fcheck%2Fcallee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fcallee.rs?ref=6ddbef170bf0b79b868088580e28c862b691bff3", "patch": "@@ -38,14 +38,11 @@ pub fn check_legal_trait_for_method_call(\n         let suggestion =\n             if snippet.is_empty() { \"drop\".to_string() } else { format!(\"drop({})\", snippet) };\n \n-        let suggestion_span =\n-            receiver.and_then(|s| tcx.sess.source_map().merge_spans(s, span)).unwrap_or(span);\n-\n         err.span_suggestion(\n-            suggestion_span,\n-            \"consider using `drop` function\",\n-            suggestion,\n-            Applicability::MaybeIncorrect,\n+            span,\n+            &format!(\"consider using `drop` function: `{}`\", suggestion),\n+            String::new(),\n+            Applicability::Unspecified,\n         );\n \n         err.emit();"}, {"sha": "69cf28b29704fafa1452cc6ded0ea23aa75bf480", "filename": "src/test/ui/error-codes/E0040.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Ferror-codes%2FE0040.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Ferror-codes%2FE0040.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0040.stderr?ref=6ddbef170bf0b79b868088580e28c862b691bff3", "patch": "@@ -2,10 +2,10 @@ error[E0040]: explicit use of destructor method\n   --> $DIR/E0040.rs:13:7\n    |\n LL |     x.drop();\n-   |     --^^^^\n-   |     | |\n-   |     | explicit destructor calls not allowed\n-   |     help: consider using `drop` function: `drop(x)`\n+   |       ^^^^\n+   |       |\n+   |       explicit destructor calls not allowed\n+   |       help: consider using `drop` function: `drop(x)`\n \n error: aborting due to previous error\n "}, {"sha": "5ebe4ee4b90f89a146dc7dda6cdc5f914fae7ef6", "filename": "src/test/ui/explicit/explicit-call-to-dtor.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-dtor.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-dtor.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-dtor.stderr?ref=6ddbef170bf0b79b868088580e28c862b691bff3", "patch": "@@ -2,10 +2,10 @@ error[E0040]: explicit use of destructor method\n   --> $DIR/explicit-call-to-dtor.rs:13:7\n    |\n LL |     x.drop();\n-   |     --^^^^\n-   |     | |\n-   |     | explicit destructor calls not allowed\n-   |     help: consider using `drop` function: `drop(x)`\n+   |       ^^^^\n+   |       |\n+   |       explicit destructor calls not allowed\n+   |       help: consider using `drop` function: `drop(x)`\n \n error: aborting due to previous error\n "}, {"sha": "cd3fb3119a5cfae286bbf7b0ad624f18da19374c", "filename": "src/test/ui/explicit/explicit-call-to-supertrait-dtor.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-supertrait-dtor.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6ddbef170bf0b79b868088580e28c862b691bff3/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-supertrait-dtor.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexplicit%2Fexplicit-call-to-supertrait-dtor.stderr?ref=6ddbef170bf0b79b868088580e28c862b691bff3", "patch": "@@ -2,10 +2,10 @@ error[E0040]: explicit use of destructor method\n   --> $DIR/explicit-call-to-supertrait-dtor.rs:17:14\n    |\n LL |         self.drop();\n-   |         -----^^^^\n-   |         |    |\n-   |         |    explicit destructor calls not allowed\n-   |         help: consider using `drop` function: `drop(self)`\n+   |              ^^^^\n+   |              |\n+   |              explicit destructor calls not allowed\n+   |              help: consider using `drop` function: `drop(self)`\n \n error: aborting due to previous error\n "}]}