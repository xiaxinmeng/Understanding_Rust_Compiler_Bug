{"sha": "7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkMjNjM2JmOGE3MmIwNGFmOTM5MjQ3Y2JmMWViNGZlMTAyZWIzN2Q=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-04-22T20:50:31Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2020-04-24T20:18:19Z"}, "message": "adjust tests", "tree": {"sha": "5fc0d980edecc37971bce797a7030eb7d585e484", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fc0d980edecc37971bce797a7030eb7d585e484"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "html_url": "https://github.com/rust-lang/rust/commit/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be0e9c2bdc948b806412c70d5769f8341491543c", "url": "https://api.github.com/repos/rust-lang/rust/commits/be0e9c2bdc948b806412c70d5769f8341491543c", "html_url": "https://github.com/rust-lang/rust/commit/be0e9c2bdc948b806412c70d5769f8341491543c"}], "stats": {"total": 246, "additions": 113, "deletions": 133}, "files": [{"sha": "e514682af9c20276e31dee9a3f01cfbfcad9c479", "filename": "src/test/ui/consts/const-eval/ice-generic-assoc-const.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fice-generic-assoc-const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fice-generic-assoc-const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fice-generic-assoc-const.rs?ref=7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "patch": "@@ -1,4 +1,5 @@\n-// check-pass\n+// build-pass (tests post-monomorphisation failure)\n+#![crate_type = \"lib\"]\n \n pub trait Nullable {\n     const NULL: Self;\n@@ -13,6 +14,3 @@ impl<T> Nullable for *const T {\n         *self == Self::NULL\n     }\n }\n-\n-fn main() {\n-}"}, {"sha": "ce9b02b6d82a781d7bc217dfb712febc569a1781", "filename": "src/test/ui/lint/lint-exceeding-bitshifts.noopt.stderr", "status": "modified", "additions": 28, "deletions": 34, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.noopt.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.noopt.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.noopt.stderr?ref=7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "patch": "@@ -1,152 +1,146 @@\n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:18:20\n+error: this arithmetic operation will overflow\n+  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n    |\n-LL |     const N: i32 = T::N << 42;\n-   |                    ^^^^^^^^^^ attempt to shift left with overflow\n+LL |     let _ = x << 42;\n+   |             ^^^^^^^ attempt to shift left with overflow\n    |\n note: the lint level is defined here\n   --> $DIR/lint-exceeding-bitshifts.rs:9:9\n    |\n-LL | #![warn(arithmetic_overflow, const_err)]\n+LL | #![deny(arithmetic_overflow, const_err)]\n    |         ^^^^^^^^^^^^^^^^^^^\n \n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n-   |\n-LL |     let _ = x << 42;\n-   |             ^^^^^^^ attempt to shift left with overflow\n-\n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:27:15\n    |\n LL |       let n = 1u8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:29:15\n    |\n LL |       let n = 1u16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:31:15\n    |\n LL |       let n = 1u32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:33:15\n    |\n LL |       let n = 1u64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:35:15\n    |\n LL |       let n = 1i8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:37:15\n    |\n LL |       let n = 1i16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:39:15\n    |\n LL |       let n = 1i32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:41:15\n    |\n LL |       let n = 1i64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:44:15\n    |\n LL |       let n = 1u8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:46:15\n    |\n LL |       let n = 1u16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:48:15\n    |\n LL |       let n = 1u32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:50:15\n    |\n LL |       let n = 1u64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:52:15\n    |\n LL |       let n = 1i8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:54:15\n    |\n LL |       let n = 1i16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:56:15\n    |\n LL |       let n = 1i32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:58:15\n    |\n LL |       let n = 1i64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:62:15\n    |\n LL |       let n = n << 8;\n    |               ^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:64:15\n    |\n LL |       let n = 1u8 << -8;\n    |               ^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:69:15\n    |\n LL |       let n = 1u8 << (4+4);\n    |               ^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:71:15\n    |\n LL |       let n = 1i64 >> [64][0];\n    |               ^^^^^^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:77:15\n    |\n LL |       let n = 1_isize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:78:15\n    |\n LL |       let n = 1_usize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: 24 warnings emitted\n+error: aborting due to 23 previous errors\n "}, {"sha": "ce9b02b6d82a781d7bc217dfb712febc569a1781", "filename": "src/test/ui/lint/lint-exceeding-bitshifts.opt.stderr", "status": "modified", "additions": 28, "deletions": 34, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt.stderr?ref=7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "patch": "@@ -1,152 +1,146 @@\n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:18:20\n+error: this arithmetic operation will overflow\n+  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n    |\n-LL |     const N: i32 = T::N << 42;\n-   |                    ^^^^^^^^^^ attempt to shift left with overflow\n+LL |     let _ = x << 42;\n+   |             ^^^^^^^ attempt to shift left with overflow\n    |\n note: the lint level is defined here\n   --> $DIR/lint-exceeding-bitshifts.rs:9:9\n    |\n-LL | #![warn(arithmetic_overflow, const_err)]\n+LL | #![deny(arithmetic_overflow, const_err)]\n    |         ^^^^^^^^^^^^^^^^^^^\n \n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n-   |\n-LL |     let _ = x << 42;\n-   |             ^^^^^^^ attempt to shift left with overflow\n-\n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:27:15\n    |\n LL |       let n = 1u8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:29:15\n    |\n LL |       let n = 1u16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:31:15\n    |\n LL |       let n = 1u32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:33:15\n    |\n LL |       let n = 1u64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:35:15\n    |\n LL |       let n = 1i8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:37:15\n    |\n LL |       let n = 1i16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:39:15\n    |\n LL |       let n = 1i32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:41:15\n    |\n LL |       let n = 1i64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:44:15\n    |\n LL |       let n = 1u8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:46:15\n    |\n LL |       let n = 1u16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:48:15\n    |\n LL |       let n = 1u32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:50:15\n    |\n LL |       let n = 1u64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:52:15\n    |\n LL |       let n = 1i8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:54:15\n    |\n LL |       let n = 1i16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:56:15\n    |\n LL |       let n = 1i32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:58:15\n    |\n LL |       let n = 1i64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:62:15\n    |\n LL |       let n = n << 8;\n    |               ^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:64:15\n    |\n LL |       let n = 1u8 << -8;\n    |               ^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:69:15\n    |\n LL |       let n = 1u8 << (4+4);\n    |               ^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:71:15\n    |\n LL |       let n = 1i64 >> [64][0];\n    |               ^^^^^^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:77:15\n    |\n LL |       let n = 1_isize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:78:15\n    |\n LL |       let n = 1_usize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: 24 warnings emitted\n+error: aborting due to 23 previous errors\n "}, {"sha": "ce9b02b6d82a781d7bc217dfb712febc569a1781", "filename": "src/test/ui/lint/lint-exceeding-bitshifts.opt_with_overflow_checks.stderr", "status": "modified", "additions": 28, "deletions": 34, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt_with_overflow_checks.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt_with_overflow_checks.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.opt_with_overflow_checks.stderr?ref=7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "patch": "@@ -1,152 +1,146 @@\n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:18:20\n+error: this arithmetic operation will overflow\n+  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n    |\n-LL |     const N: i32 = T::N << 42;\n-   |                    ^^^^^^^^^^ attempt to shift left with overflow\n+LL |     let _ = x << 42;\n+   |             ^^^^^^^ attempt to shift left with overflow\n    |\n note: the lint level is defined here\n   --> $DIR/lint-exceeding-bitshifts.rs:9:9\n    |\n-LL | #![warn(arithmetic_overflow, const_err)]\n+LL | #![deny(arithmetic_overflow, const_err)]\n    |         ^^^^^^^^^^^^^^^^^^^\n \n-warning: this arithmetic operation will overflow\n-  --> $DIR/lint-exceeding-bitshifts.rs:22:13\n-   |\n-LL |     let _ = x << 42;\n-   |             ^^^^^^^ attempt to shift left with overflow\n-\n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:27:15\n    |\n LL |       let n = 1u8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:29:15\n    |\n LL |       let n = 1u16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:31:15\n    |\n LL |       let n = 1u32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:33:15\n    |\n LL |       let n = 1u64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:35:15\n    |\n LL |       let n = 1i8 << 8;\n    |               ^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:37:15\n    |\n LL |       let n = 1i16 << 16;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:39:15\n    |\n LL |       let n = 1i32 << 32;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:41:15\n    |\n LL |       let n = 1i64 << 64;\n    |               ^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:44:15\n    |\n LL |       let n = 1u8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:46:15\n    |\n LL |       let n = 1u16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:48:15\n    |\n LL |       let n = 1u32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:50:15\n    |\n LL |       let n = 1u64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:52:15\n    |\n LL |       let n = 1i8 >> 8;\n    |               ^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:54:15\n    |\n LL |       let n = 1i16 >> 16;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:56:15\n    |\n LL |       let n = 1i32 >> 32;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:58:15\n    |\n LL |       let n = 1i64 >> 64;\n    |               ^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:62:15\n    |\n LL |       let n = n << 8;\n    |               ^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:64:15\n    |\n LL |       let n = 1u8 << -8;\n    |               ^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:69:15\n    |\n LL |       let n = 1u8 << (4+4);\n    |               ^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:71:15\n    |\n LL |       let n = 1i64 >> [64][0];\n    |               ^^^^^^^^^^^^^^^ attempt to shift right with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:77:15\n    |\n LL |       let n = 1_isize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: this arithmetic operation will overflow\n+error: this arithmetic operation will overflow\n   --> $DIR/lint-exceeding-bitshifts.rs:78:15\n    |\n LL |       let n = 1_usize << BITS;\n    |               ^^^^^^^^^^^^^^^ attempt to shift left with overflow\n \n-warning: 24 warnings emitted\n+error: aborting due to 23 previous errors\n "}, {"sha": "7deee5320a87880e4adb01de4f649400db40f798", "filename": "src/test/ui/lint/lint-exceeding-bitshifts.rs", "status": "modified", "additions": 27, "deletions": 27, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d23c3bf8a72b04af939247cbf1eb4fe102eb37d/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-exceeding-bitshifts.rs?ref=7d23c3bf8a72b04af939247cbf1eb4fe102eb37d", "patch": "@@ -2,11 +2,11 @@\n //[noopt]compile-flags: -C opt-level=0\n //[opt]compile-flags: -O\n //[opt_with_overflow_checks]compile-flags: -C overflow-checks=on -O\n-// build-pass\n-// ignore-pass (test emits codegen-time warnings and verifies that they are not errors)\n+\n+// build-fail\n \n #![crate_type=\"lib\"]\n-#![warn(arithmetic_overflow, const_err)]\n+#![deny(arithmetic_overflow, const_err)]\n #![allow(unused_variables)]\n #![allow(dead_code)]\n \n@@ -15,65 +15,65 @@ pub trait Foo {\n }\n \n impl<T: Foo> Foo for Vec<T> {\n-    const N: i32 = T::N << 42; //~ WARN: arithmetic operation will overflow\n+    const N: i32 = T::N << 42; // FIXME this should warn\n }\n \n pub fn foo(x: i32) {\n-    let _ = x << 42; //~ WARN: arithmetic operation will overflow\n+    let _ = x << 42; //~ ERROR: arithmetic operation will overflow\n }\n \n pub fn main() {\n       let n = 1u8 << 7;\n-      let n = 1u8 << 8;   //~ WARN: arithmetic operation will overflow\n+      let n = 1u8 << 8;   //~ ERROR: arithmetic operation will overflow\n       let n = 1u16 << 15;\n-      let n = 1u16 << 16; //~ WARN: arithmetic operation will overflow\n+      let n = 1u16 << 16; //~ ERROR: arithmetic operation will overflow\n       let n = 1u32 << 31;\n-      let n = 1u32 << 32; //~ WARN: arithmetic operation will overflow\n+      let n = 1u32 << 32; //~ ERROR: arithmetic operation will overflow\n       let n = 1u64 << 63;\n-      let n = 1u64 << 64; //~ WARN: arithmetic operation will overflow\n+      let n = 1u64 << 64; //~ ERROR: arithmetic operation will overflow\n       let n = 1i8 << 7;\n-      let n = 1i8 << 8;   //~ WARN: arithmetic operation will overflow\n+      let n = 1i8 << 8;   //~ ERROR: arithmetic operation will overflow\n       let n = 1i16 << 15;\n-      let n = 1i16 << 16; //~ WARN: arithmetic operation will overflow\n+      let n = 1i16 << 16; //~ ERROR: arithmetic operation will overflow\n       let n = 1i32 << 31;\n-      let n = 1i32 << 32; //~ WARN: arithmetic operation will overflow\n+      let n = 1i32 << 32; //~ ERROR: arithmetic operation will overflow\n       let n = 1i64 << 63;\n-      let n = 1i64 << 64; //~ WARN: arithmetic operation will overflow\n+      let n = 1i64 << 64; //~ ERROR: arithmetic operation will overflow\n \n       let n = 1u8 >> 7;\n-      let n = 1u8 >> 8;   //~ WARN: arithmetic operation will overflow\n+      let n = 1u8 >> 8;   //~ ERROR: arithmetic operation will overflow\n       let n = 1u16 >> 15;\n-      let n = 1u16 >> 16; //~ WARN: arithmetic operation will overflow\n+      let n = 1u16 >> 16; //~ ERROR: arithmetic operation will overflow\n       let n = 1u32 >> 31;\n-      let n = 1u32 >> 32; //~ WARN: arithmetic operation will overflow\n+      let n = 1u32 >> 32; //~ ERROR: arithmetic operation will overflow\n       let n = 1u64 >> 63;\n-      let n = 1u64 >> 64; //~ WARN: arithmetic operation will overflow\n+      let n = 1u64 >> 64; //~ ERROR: arithmetic operation will overflow\n       let n = 1i8 >> 7;\n-      let n = 1i8 >> 8;   //~ WARN: arithmetic operation will overflow\n+      let n = 1i8 >> 8;   //~ ERROR: arithmetic operation will overflow\n       let n = 1i16 >> 15;\n-      let n = 1i16 >> 16; //~ WARN: arithmetic operation will overflow\n+      let n = 1i16 >> 16; //~ ERROR: arithmetic operation will overflow\n       let n = 1i32 >> 31;\n-      let n = 1i32 >> 32; //~ WARN: arithmetic operation will overflow\n+      let n = 1i32 >> 32; //~ ERROR: arithmetic operation will overflow\n       let n = 1i64 >> 63;\n-      let n = 1i64 >> 64; //~ WARN: arithmetic operation will overflow\n+      let n = 1i64 >> 64; //~ ERROR: arithmetic operation will overflow\n \n       let n = 1u8;\n       let n = n << 7;\n-      let n = n << 8; //~ WARN: arithmetic operation will overflow\n+      let n = n << 8; //~ ERROR: arithmetic operation will overflow\n \n-      let n = 1u8 << -8; //~ WARN: arithmetic operation will overflow\n+      let n = 1u8 << -8; //~ ERROR: arithmetic operation will overflow\n \n       let n = 1i8<<(1isize+-1);\n \n       let n = 1u8 << (4+3);\n-      let n = 1u8 << (4+4); //~ WARN: arithmetic operation will overflow\n+      let n = 1u8 << (4+4); //~ ERROR: arithmetic operation will overflow\n       let n = 1i64 >> [63][0];\n-      let n = 1i64 >> [64][0]; //~ WARN: arithmetic operation will overflow\n+      let n = 1i64 >> [64][0]; //~ ERROR: arithmetic operation will overflow\n \n       #[cfg(target_pointer_width = \"32\")]\n       const BITS: usize = 32;\n       #[cfg(target_pointer_width = \"64\")]\n       const BITS: usize = 64;\n-      let n = 1_isize << BITS; //~ WARN: arithmetic operation will overflow\n-      let n = 1_usize << BITS; //~ WARN: arithmetic operation will overflow\n+      let n = 1_isize << BITS; //~ ERROR: arithmetic operation will overflow\n+      let n = 1_usize << BITS; //~ ERROR: arithmetic operation will overflow\n }"}]}