{"sha": "51e414ff454e35a38d9a47269cd2216a9d4c68da", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxZTQxNGZmNDU0ZTM1YTM4ZDlhNDcyNjljZDIyMTZhOWQ0YzY4ZGE=", "commit": {"author": {"name": "asquared31415", "email": "34665709+asquared31415@users.noreply.github.com", "date": "2021-08-04T21:28:30Z"}, "committer": {"name": "asquared31415", "email": "34665709+asquared31415@users.noreply.github.com", "date": "2021-08-04T21:28:55Z"}, "message": "Combine spans into one error, deduplicate code", "tree": {"sha": "a4548d648dd5c428e8cc7326c3987f0e325ce84c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a4548d648dd5c428e8cc7326c3987f0e325ce84c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51e414ff454e35a38d9a47269cd2216a9d4c68da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51e414ff454e35a38d9a47269cd2216a9d4c68da", "html_url": "https://github.com/rust-lang/rust/commit/51e414ff454e35a38d9a47269cd2216a9d4c68da", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51e414ff454e35a38d9a47269cd2216a9d4c68da/comments", "author": {"login": "asquared31415", "id": 34665709, "node_id": "MDQ6VXNlcjM0NjY1NzA5", "avatar_url": "https://avatars.githubusercontent.com/u/34665709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asquared31415", "html_url": "https://github.com/asquared31415", "followers_url": "https://api.github.com/users/asquared31415/followers", "following_url": "https://api.github.com/users/asquared31415/following{/other_user}", "gists_url": "https://api.github.com/users/asquared31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/asquared31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asquared31415/subscriptions", "organizations_url": "https://api.github.com/users/asquared31415/orgs", "repos_url": "https://api.github.com/users/asquared31415/repos", "events_url": "https://api.github.com/users/asquared31415/events{/privacy}", "received_events_url": "https://api.github.com/users/asquared31415/received_events", "type": "User", "site_admin": false}, "committer": {"login": "asquared31415", "id": 34665709, "node_id": "MDQ6VXNlcjM0NjY1NzA5", "avatar_url": "https://avatars.githubusercontent.com/u/34665709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asquared31415", "html_url": "https://github.com/asquared31415", "followers_url": "https://api.github.com/users/asquared31415/followers", "following_url": "https://api.github.com/users/asquared31415/following{/other_user}", "gists_url": "https://api.github.com/users/asquared31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/asquared31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asquared31415/subscriptions", "organizations_url": "https://api.github.com/users/asquared31415/orgs", "repos_url": "https://api.github.com/users/asquared31415/repos", "events_url": "https://api.github.com/users/asquared31415/events{/privacy}", "received_events_url": "https://api.github.com/users/asquared31415/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae8a1bafc2d29ec17197ae319606026e2c00882c", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae8a1bafc2d29ec17197ae319606026e2c00882c", "html_url": "https://github.com/rust-lang/rust/commit/ae8a1bafc2d29ec17197ae319606026e2c00882c"}], "stats": {"total": 160, "additions": 48, "deletions": 112}, "files": [{"sha": "018a2ce6c2eab578cd40e5554d01c9feab8fe62d", "filename": "compiler/rustc_builtin_macros/src/asm.rs", "status": "modified", "additions": 14, "deletions": 21, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/51e414ff454e35a38d9a47269cd2216a9d4c68da/compiler%2Frustc_builtin_macros%2Fsrc%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51e414ff454e35a38d9a47269cd2216a9d4c68da/compiler%2Frustc_builtin_macros%2Fsrc%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_builtin_macros%2Fsrc%2Fasm.rs?ref=51e414ff454e35a38d9a47269cd2216a9d4c68da", "patch": "@@ -10,7 +10,7 @@ use rustc_parse_format as parse;\n use rustc_session::lint::{self, BuiltinLintDiagnostics};\n use rustc_span::symbol::Ident;\n use rustc_span::symbol::{kw, sym, Symbol};\n-use rustc_span::{InnerSpan, Span};\n+use rustc_span::{InnerSpan, MultiSpan, Span};\n use rustc_target::asm::InlineAsmArch;\n use smallvec::smallvec;\n \n@@ -523,26 +523,19 @@ fn expand_preparsed_asm(\n             if found_labels.len() > 0 {\n                 let spans =\n                     found_labels.into_iter().filter_map(find_label_span).collect::<Vec<Span>>();\n-                if spans.len() > 0 {\n-                    for span in spans.into_iter() {\n-                        ecx.parse_sess().buffer_lint_with_diagnostic(\n-                            lint::builtin::NAMED_ASM_LABELS,\n-                            span,\n-                            ecx.current_expansion.lint_node_id,\n-                            \"avoid using named labels in inline assembly\",\n-                            BuiltinLintDiagnostics::NamedAsmLabel(\"only local labels of the form `<number>:` should be used in inline asm\".to_string()),\n-                        );\n-                    }\n-                } else {\n-                    // If there were labels but we couldn't find a span, combine the warnings and use the template span\n-                    ecx.parse_sess().buffer_lint_with_diagnostic(\n-                        lint::builtin::NAMED_ASM_LABELS,\n-                        template_sp,\n-                        ecx.current_expansion.lint_node_id,\n-                        \"avoid using named labels in inline assembly\",\n-                        BuiltinLintDiagnostics::NamedAsmLabel(\"only local labels of the form `<number>:` should be used in inline asm\".to_string()),\n-                    );\n-                }\n+                // If there were labels but we couldn't find a span, combine the warnings and use the template span\n+                let target_spans: MultiSpan =\n+                    if spans.len() > 0 { spans.into() } else { template_sp.into() };\n+                ecx.parse_sess().buffer_lint_with_diagnostic(\n+                    lint::builtin::NAMED_ASM_LABELS,\n+                    target_spans,\n+                    ecx.current_expansion.lint_node_id,\n+                    \"avoid using named labels in inline assembly\",\n+                    BuiltinLintDiagnostics::NamedAsmLabel(\n+                        \"only local labels of the form `<number>:` should be used in inline asm\"\n+                            .to_string(),\n+                    ),\n+                );\n             }\n         }\n "}, {"sha": "803501b40b68e59d88467682b4b4058256935014", "filename": "src/test/ui/asm/named-asm-labels.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/51e414ff454e35a38d9a47269cd2216a9d4c68da/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51e414ff454e35a38d9a47269cd2216a9d4c68da/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.rs?ref=51e414ff454e35a38d9a47269cd2216a9d4c68da", "patch": "@@ -16,13 +16,11 @@ fn main() {\n         // Multiple labels on one line\n         asm!(\"foo: bar1: nop\");\n         //~^ ERROR avoid using named labels\n-        //~| ERROR avoid using named labels\n \n         // Multiple lines\n         asm!(\"foo1: nop\", \"nop\"); //~ ERROR avoid using named labels\n         asm!(\"foo2: foo3: nop\", \"nop\");\n         //~^ ERROR avoid using named labels\n-        //~| ERROR avoid using named labels\n         asm!(\"nop\", \"foo4: nop\"); //~ ERROR avoid using named labels\n         asm!(\"foo5: nop\", \"foo6: nop\");\n         //~^ ERROR avoid using named labels\n@@ -31,19 +29,16 @@ fn main() {\n         // Statement separator\n         asm!(\"foo7: nop; foo8: nop\");\n         //~^ ERROR avoid using named labels\n-        //~| ERROR avoid using named labels\n         asm!(\"foo9: nop; nop\"); //~ ERROR avoid using named labels\n         asm!(\"nop; foo10: nop\"); //~ ERROR avoid using named labels\n \n         // Escaped newline\n         asm!(\"bar2: nop\\n bar3: nop\");\n         //~^ ERROR avoid using named labels\n-        //~| ERROR avoid using named labels\n         asm!(\"bar4: nop\\n nop\"); //~ ERROR avoid using named labels\n         asm!(\"nop\\n bar5: nop\"); //~ ERROR avoid using named labels\n         asm!(\"nop\\n bar6: bar7: nop\");\n         //~^ ERROR avoid using named labels\n-        //~| ERROR avoid using named labels\n \n         // Raw strings\n         asm!(\n@@ -53,7 +48,7 @@ fn main() {\n             \"\n         );\n         //~^^^^ ERROR avoid using named labels\n-        //~^^^^ ERROR avoid using named labels\n+\n         asm!(\n             r###\"\n             nop"}, {"sha": "3c4a4db75e02de0d28f40c2bf33753ccdfa644a6", "filename": "src/test/ui/asm/named-asm-labels.stderr", "status": "modified", "additions": 33, "deletions": 85, "changes": 118, "blob_url": "https://github.com/rust-lang/rust/blob/51e414ff454e35a38d9a47269cd2216a9d4c68da/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/51e414ff454e35a38d9a47269cd2216a9d4c68da/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fnamed-asm-labels.stderr?ref=51e414ff454e35a38d9a47269cd2216a9d4c68da", "patch": "@@ -21,22 +21,13 @@ error: avoid using named labels in inline assembly\n   --> $DIR/named-asm-labels.rs:17:15\n    |\n LL |         asm!(\"foo: bar1: nop\");\n-   |               ^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:17:20\n-   |\n-LL |         asm!(\"foo: bar1: nop\");\n-   |                    ^^^^\n+   |               ^^^  ^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:22:15\n+  --> $DIR/named-asm-labels.rs:21:15\n    |\n LL |         asm!(\"foo1: nop\", \"nop\");\n    |               ^^^^\n@@ -45,25 +36,16 @@ LL |         asm!(\"foo1: nop\", \"nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:23:15\n-   |\n-LL |         asm!(\"foo2: foo3: nop\", \"nop\");\n-   |               ^^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:23:21\n+  --> $DIR/named-asm-labels.rs:22:15\n    |\n LL |         asm!(\"foo2: foo3: nop\", \"nop\");\n-   |                     ^^^^\n+   |               ^^^^  ^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:26:22\n+  --> $DIR/named-asm-labels.rs:24:22\n    |\n LL |         asm!(\"nop\", \"foo4: nop\");\n    |                      ^^^^\n@@ -72,7 +54,7 @@ LL |         asm!(\"nop\", \"foo4: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:27:15\n+  --> $DIR/named-asm-labels.rs:25:15\n    |\n LL |         asm!(\"foo5: nop\", \"foo6: nop\");\n    |               ^^^^\n@@ -81,7 +63,7 @@ LL |         asm!(\"foo5: nop\", \"foo6: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:27:28\n+  --> $DIR/named-asm-labels.rs:25:28\n    |\n LL |         asm!(\"foo5: nop\", \"foo6: nop\");\n    |                            ^^^^\n@@ -90,25 +72,16 @@ LL |         asm!(\"foo5: nop\", \"foo6: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:32:15\n-   |\n-LL |         asm!(\"foo7: nop; foo8: nop\");\n-   |               ^^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:32:26\n+  --> $DIR/named-asm-labels.rs:30:15\n    |\n LL |         asm!(\"foo7: nop; foo8: nop\");\n-   |                          ^^^^\n+   |               ^^^^       ^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:35:15\n+  --> $DIR/named-asm-labels.rs:32:15\n    |\n LL |         asm!(\"foo9: nop; nop\");\n    |               ^^^^\n@@ -117,7 +90,7 @@ LL |         asm!(\"foo9: nop; nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:36:20\n+  --> $DIR/named-asm-labels.rs:33:20\n    |\n LL |         asm!(\"nop; foo10: nop\");\n    |                    ^^^^^\n@@ -126,25 +99,16 @@ LL |         asm!(\"nop; foo10: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:39:15\n-   |\n-LL |         asm!(\"bar2: nop\\n bar3: nop\");\n-   |               ^^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:39:27\n+  --> $DIR/named-asm-labels.rs:36:15\n    |\n LL |         asm!(\"bar2: nop\\n bar3: nop\");\n-   |                           ^^^^\n+   |               ^^^^        ^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:42:15\n+  --> $DIR/named-asm-labels.rs:38:15\n    |\n LL |         asm!(\"bar4: nop\\n nop\");\n    |               ^^^^\n@@ -153,7 +117,7 @@ LL |         asm!(\"bar4: nop\\n nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:43:21\n+  --> $DIR/named-asm-labels.rs:39:21\n    |\n LL |         asm!(\"nop\\n bar5: nop\");\n    |                     ^^^^\n@@ -162,43 +126,27 @@ LL |         asm!(\"nop\\n bar5: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:44:21\n+  --> $DIR/named-asm-labels.rs:40:21\n    |\n LL |         asm!(\"nop\\n bar6: bar7: nop\");\n-   |                     ^^^^\n+   |                     ^^^^  ^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:44:27\n-   |\n-LL |         asm!(\"nop\\n bar6: bar7: nop\");\n-   |                           ^^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:51:13\n+  --> $DIR/named-asm-labels.rs:46:13\n    |\n LL |             blah2: nop\n    |             ^^^^^\n-   |\n-   = help: only local labels of the form `<number>:` should be used in inline asm\n-   = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n-\n-error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:52:13\n-   |\n LL |             blah3: nop\n    |             ^^^^^\n    |\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:60:19\n+  --> $DIR/named-asm-labels.rs:55:19\n    |\n LL |             nop ; blah4: nop\n    |                   ^^^^^\n@@ -207,7 +155,7 @@ LL |             nop ; blah4: nop\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:74:15\n+  --> $DIR/named-asm-labels.rs:69:15\n    |\n LL |         asm!(\"blah1: 2bar: nop\");\n    |               ^^^^^\n@@ -216,7 +164,7 @@ LL |         asm!(\"blah1: 2bar: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:77:15\n+  --> $DIR/named-asm-labels.rs:72:15\n    |\n LL |         asm!(\"def: def: nop\");\n    |               ^^^\n@@ -225,7 +173,7 @@ LL |         asm!(\"def: def: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:78:15\n+  --> $DIR/named-asm-labels.rs:73:15\n    |\n LL |         asm!(\"def: nop\\ndef: nop\");\n    |               ^^^\n@@ -234,7 +182,7 @@ LL |         asm!(\"def: nop\\ndef: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:79:15\n+  --> $DIR/named-asm-labels.rs:74:15\n    |\n LL |         asm!(\"def: nop; def: nop\");\n    |               ^^^\n@@ -243,7 +191,7 @@ LL |         asm!(\"def: nop; def: nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:87:15\n+  --> $DIR/named-asm-labels.rs:82:15\n    |\n LL |         asm!(\"fooo\\u{003A} nop\");\n    |               ^^^^^^^^^^^^^^^^\n@@ -252,7 +200,7 @@ LL |         asm!(\"fooo\\u{003A} nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:88:15\n+  --> $DIR/named-asm-labels.rs:83:15\n    |\n LL |         asm!(\"foooo\\x3A nop\");\n    |               ^^^^^^^^^^^^^\n@@ -261,7 +209,7 @@ LL |         asm!(\"foooo\\x3A nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:91:15\n+  --> $DIR/named-asm-labels.rs:86:15\n    |\n LL |         asm!(\"fooooo:\\u{000A} nop\");\n    |               ^^^^^^\n@@ -270,7 +218,7 @@ LL |         asm!(\"fooooo:\\u{000A} nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:92:15\n+  --> $DIR/named-asm-labels.rs:87:15\n    |\n LL |         asm!(\"foooooo:\\x0A nop\");\n    |               ^^^^^^^\n@@ -279,7 +227,7 @@ LL |         asm!(\"foooooo:\\x0A nop\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:96:14\n+  --> $DIR/named-asm-labels.rs:91:14\n    |\n LL |         asm!(\"\\x41\\x42\\x43\\x3A\\x20\\x6E\\x6F\\x70\");\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -288,7 +236,7 @@ LL |         asm!(\"\\x41\\x42\\x43\\x3A\\x20\\x6E\\x6F\\x70\");\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:107:13\n+  --> $DIR/named-asm-labels.rs:102:13\n    |\n LL |             ab: nop // ab: does foo\n    |             ^^\n@@ -297,7 +245,7 @@ LL |             ab: nop // ab: does foo\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n error: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:119:14\n+  --> $DIR/named-asm-labels.rs:114:14\n    |\n LL |         asm!(include_str!(\"named-asm-labels.s\"));\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -306,18 +254,18 @@ LL |         asm!(include_str!(\"named-asm-labels.s\"));\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n warning: avoid using named labels in inline assembly\n-  --> $DIR/named-asm-labels.rs:129:19\n+  --> $DIR/named-asm-labels.rs:124:19\n    |\n LL |             asm!(\"warned: nop\");\n    |                   ^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/named-asm-labels.rs:127:16\n+  --> $DIR/named-asm-labels.rs:122:16\n    |\n LL |         #[warn(named_asm_labels)]\n    |                ^^^^^^^^^^^^^^^^\n    = help: only local labels of the form `<number>:` should be used in inline asm\n    = note: see the asm section of the unstable book <https://doc.rust-lang.org/nightly/unstable-book/library-features/asm.html#labels> for more information\n \n-error: aborting due to 34 previous errors; 1 warning emitted\n+error: aborting due to 28 previous errors; 1 warning emitted\n "}]}