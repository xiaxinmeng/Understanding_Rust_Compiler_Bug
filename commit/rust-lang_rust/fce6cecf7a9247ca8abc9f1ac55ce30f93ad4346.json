{"sha": "fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "node_id": "C_kwDOAAsO6NoAKGZjZTZjZWNmN2E5MjQ3Y2E4YWJjOWYxYWM1NWNlMzBmOTNhZDQzNDY", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-03-02T16:58:49Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-03-02T19:06:46Z"}, "message": "Update unused_doc_comments ui test", "tree": {"sha": "7a0875e6a5a55f6b229aecde74d756bb666b322c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a0875e6a5a55f6b229aecde74d756bb666b322c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "html_url": "https://github.com/rust-lang/rust/commit/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "628fbdf9b7a831a35e948abdb97f72f071c79ba5", "url": "https://api.github.com/repos/rust-lang/rust/commits/628fbdf9b7a831a35e948abdb97f72f071c79ba5", "html_url": "https://github.com/rust-lang/rust/commit/628fbdf9b7a831a35e948abdb97f72f071c79ba5"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "54d86c31fb4fbb0e97e3854ae4bebb6be1b779d0", "filename": "src/test/ui/lint/unused/unused-doc-comments-edge-cases.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.rs?ref=fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "patch": "@@ -29,4 +29,18 @@ fn doc_comment_on_expr(num: u8) -> bool {\n fn doc_comment_on_generic<#[doc = \"x\"] T>(val: T) {}\n //~^ ERROR: unused doc comment\n \n+fn doc_comment_on_block() {\n+    /// unused doc comment\n+    //~^ ERROR: unused doc comment\n+    {\n+        let x = 12;\n+    }\n+}\n+\n+/// unused doc comment\n+//~^ ERROR: unused doc comment\n+extern \"C\" {\n+    fn foo();\n+}\n+\n fn main() {}"}, {"sha": "30a96af583af77d3a841b4e5cd2fd91cb1a9c662", "filename": "src/test/ui/lint/unused/unused-doc-comments-edge-cases.stderr", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused%2Funused-doc-comments-edge-cases.stderr?ref=fce6cecf7a9247ca8abc9f1ac55ce30f93ad4346", "patch": "@@ -49,6 +49,32 @@ LL | fn doc_comment_on_generic<#[doc = \"x\"] T>(val: T) {}\n    |\n    = help: use `//` for a plain comment\n \n+error: unused doc comment\n+  --> $DIR/unused-doc-comments-edge-cases.rs:33:5\n+   |\n+LL |       /// unused doc comment\n+   |       ^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL | /     {\n+LL | |         let x = 12;\n+LL | |     }\n+   | |_____- rustdoc does not generate documentation for expressions\n+   |\n+   = help: use `//` for a plain comment\n+\n+error: unused doc comment\n+  --> $DIR/unused-doc-comments-edge-cases.rs:40:1\n+   |\n+LL |   /// unused doc comment\n+   |   ^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL | / extern \"C\" {\n+LL | |     fn foo();\n+LL | | }\n+   | |_- rustdoc does not generate documentation for extern block\n+   |\n+   = help: use `//` for a plain comment\n+\n error[E0308]: mismatched types\n   --> $DIR/unused-doc-comments-edge-cases.rs:14:9\n    |\n@@ -63,7 +89,7 @@ help: you might have meant to return this value\n LL |         return true;\n    |         ++++++     +\n \n-error: aborting due to 6 previous errors\n+error: aborting due to 8 previous errors\n \n Some errors have detailed explanations: E0308, E0658.\n For more information about an error, try `rustc --explain E0308`."}]}