{"sha": "91ef9600db47e4e91a57909077a60ebec1122d1b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxZWY5NjAwZGI0N2U0ZTkxYTU3OTA5MDc3YTYwZWJlYzExMjJkMWI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-10-24T22:35:45Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-10-27T10:42:38Z"}, "message": "reduce size of generated HTML files by moving the popup helper code to the JS", "tree": {"sha": "bcfbd1a9cf38ef4ca8904d27d07921559c22f64d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bcfbd1a9cf38ef4ca8904d27d07921559c22f64d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91ef9600db47e4e91a57909077a60ebec1122d1b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91ef9600db47e4e91a57909077a60ebec1122d1b", "html_url": "https://github.com/rust-lang/rust/commit/91ef9600db47e4e91a57909077a60ebec1122d1b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91ef9600db47e4e91a57909077a60ebec1122d1b/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d2808341a51fe70ea5587b2c111fa4ebf106991", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d2808341a51fe70ea5587b2c111fa4ebf106991", "html_url": "https://github.com/rust-lang/rust/commit/1d2808341a51fe70ea5587b2c111fa4ebf106991"}], "stats": {"total": 102, "additions": 47, "deletions": 55}, "files": [{"sha": "697dee0216e3bfbcc1af550036f18dfb8c194e3a", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 0, "deletions": 55, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/91ef9600db47e4e91a57909077a60ebec1122d1b/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91ef9600db47e4e91a57909077a60ebec1122d1b/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=91ef9600db47e4e91a57909077a60ebec1122d1b", "patch": "@@ -106,61 +106,6 @@ pub fn render<T: Print, S: Print>(\n     <section id=\\\"main\\\" class=\\\"content\\\">{content}</section>\\\n     <section id=\\\"search\\\" class=\\\"content hidden\\\"></section>\\\n     <section class=\\\"footer\\\"></section>\\\n-    <aside id=\\\"help\\\" class=\\\"hidden\\\">\\\n-        <div>\\\n-            <h1 class=\\\"hidden\\\">Help</h1>\\\n-            <div class=\\\"shortcuts\\\">\\\n-                <h2>Keyboard Shortcuts</h2>\\\n-                <dl>\\\n-                    <dt><kbd>?</kbd></dt>\\\n-                    <dd>Show this help dialog</dd>\\\n-                    <dt><kbd>S</kbd></dt>\\\n-                    <dd>Focus the search field</dd>\\\n-                    <dt><kbd>\u2191</kbd></dt>\\\n-                    <dd>Move up in search results</dd>\\\n-                    <dt><kbd>\u2193</kbd></dt>\\\n-                    <dd>Move down in search results</dd>\\\n-                    <dt><kbd>\u21b9</kbd></dt>\\\n-                    <dd>Switch tab</dd>\\\n-                    <dt><kbd>&#9166;</kbd></dt>\\\n-                    <dd>Go to active search result</dd>\\\n-                    <dt><kbd>+</kbd></dt>\\\n-                    <dd>Expand all sections</dd>\\\n-                    <dt><kbd>-</kbd></dt>\\\n-                    <dd>Collapse all sections</dd>\\\n-                </dl>\\\n-            </div>\\\n-            <div class=\\\"infos\\\">\\\n-                <h2>Search Tricks</h2>\\\n-                <p>\\\n-                    Prefix searches with a type followed by a colon (e.g., \\\n-                    <code>fn:</code>) to restrict the search to a given type.\\\n-                </p>\\\n-                <p>\\\n-                    Accepted types are: <code>fn</code>, <code>mod</code>, \\\n-                    <code>struct</code>, <code>enum</code>, \\\n-                    <code>trait</code>, <code>type</code>, <code>macro</code>, \\\n-                    and <code>const</code>.\\\n-                </p>\\\n-                <p>\\\n-                    Search functions by type signature (e.g., \\\n-                    <code>vec -> usize</code> or <code>* -> vec</code>)\\\n-                </p>\\\n-                <p>\\\n-                    Search multiple things at once by splitting your query with comma (e.g., \\\n-                    <code>str,u8</code> or <code>String,struct:Vec,test</code>)\\\n-                </p>\\\n-                <p>\\\n-                    You can look for items with an exact name by putting double quotes around \\\n-                    your request: <code>\\\"string\\\"</code>\\\n-                </p>\\\n-                <p>\\\n-                    Look for items inside another one by searching for a path: \\\n-                    <code>vec::Vec</code>\\\n-                </p>\\\n-            </div>\\\n-        </div>\\\n-    </aside>\\\n     {after_content}\\\n     <script>\\\n         window.rootPath = \\\"{root_path}\\\";\\"}, {"sha": "c896660f5370960e1753d8901df7cfb24133913a", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/91ef9600db47e4e91a57909077a60ebec1122d1b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/91ef9600db47e4e91a57909077a60ebec1122d1b/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=91ef9600db47e4e91a57909077a60ebec1122d1b", "patch": "@@ -2553,6 +2553,53 @@ function getSearchElement() {\n     }\n \n     window.addSearchOptions = addSearchOptions;\n+\n+    function buildHelperPopup() {\n+        var popup = document.createElement(\"aside\");\n+        addClass(popup, \"hidden\");\n+        popup.id = \"help\";\n+\n+        var container = document.createElement(\"div\");\n+        var shortcuts = [\n+            [\"?\", \"Show this help dialog\"],\n+            [\"S\", \"Focus the search field\"],\n+            [\"\u2191\", \"Move up in search results\"],\n+            [\"\u2193\", \"Move down in search results\"],\n+            [\"\u21b9\", \"Switch tab\"],\n+            [\"&#9166;\", \"Go to active search result\"],\n+            [\"+\", \"Expand all sections\"],\n+            [\"-\", \"Collapse all sections\"],\n+        ].map(x => \"<dt><kbd>\" + x[0] + \"</kbd></dt><dd>\" + x[1] + \"</dd>\").join(\"\");\n+        var div_shortcuts = document.createElement(\"div\");\n+        addClass(div_shortcuts, \"shortcuts\");\n+        div_shortcuts.innerHTML = \"<h2>Keyboard Shortcuts</h2><dl>\" + shortcuts + \"</dl></div>\";\n+\n+        var infos = [\n+            \"Prefix searches with a type followed by a colon (e.g., <code>fn:</code>) to \\\n+             restrict the search to a given type.\",\n+            \"Accepted types are: <code>fn</code>, <code>mod</code>, <code>struct</code>, \\\n+             <code>enum</code>, <code>trait</code>, <code>type</code>, <code>macro</code>, \\\n+             and <code>const</code>.\",\n+            \"Search functions by type signature (e.g., <code>vec -> usize</code> or \\\n+             <code>* -> vec</code>)\",\n+            \"Search multiple things at once by splitting your query with comma (e.g., \\\n+             <code>str,u8</code> or <code>String,struct:Vec,test</code>)\",\n+            \"You can look for items with an exact name by putting double quotes around \\\n+             your request: <code>\\\"string\\\"</code>\",\n+            \"Look for items inside another one by searching for a path: <code>vec::Vec</code>\",\n+        ].map(x => \"<p>\" + x + \"</p>\").join(\"\");\n+        var div_infos = document.createElement(\"div\");\n+        addClass(div_infos, \"infos\");\n+        div_infos.innerHTML = \"<h2>Search Tricks</h2>\" + infos;\n+\n+        container.appendChild(div_shortcuts);\n+        container.appendChild(div_infos);\n+\n+        popup.appendChild(container);\n+        insertAfter(popup, getSearchElement());\n+    }\n+\n+    buildHelperPopup();\n }());\n \n // Sets the focus on the search bar at the top of the page"}]}