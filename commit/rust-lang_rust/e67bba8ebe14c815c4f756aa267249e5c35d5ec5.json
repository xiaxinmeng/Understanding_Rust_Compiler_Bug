{"sha": "e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2N2JiYThlYmUxNGM4MTVjNGY3NTZhYTI2NzI0OWU1YzM1ZDVlYzU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-08-20T22:43:02Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-08-21T20:40:55Z"}, "message": "Fix missing impl trait display as ret type", "tree": {"sha": "41cd2571cc17f14b334d76462634aeb9aa6d3c6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41cd2571cc17f14b334d76462634aeb9aa6d3c6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "html_url": "https://github.com/rust-lang/rust/commit/e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e67bba8ebe14c815c4f756aa267249e5c35d5ec5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf1e461173e3936e4014cc951dfbdd7d9ec9190b", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf1e461173e3936e4014cc951dfbdd7d9ec9190b", "html_url": "https://github.com/rust-lang/rust/commit/bf1e461173e3936e4014cc951dfbdd7d9ec9190b"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "57ae2ac3a5b2af829ecc63ff490ae0a641ed0e98", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/e67bba8ebe14c815c4f756aa267249e5c35d5ec5/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e67bba8ebe14c815c4f756aa267249e5c35d5ec5/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "patch": "@@ -2378,6 +2378,7 @@ impl From<ast::FloatTy> for PrimitiveType {\n impl Clean<Type> for hir::Ty {\n     fn clean(&self, cx: &DocContext) -> Type {\n         use rustc::hir::*;\n+\n         match self.node {\n             TyKind::Never => Never,\n             TyKind::Ptr(ref m) => RawPointer(m.mutbl.clean(cx), box m.ty.clean(cx)),\n@@ -2415,6 +2416,14 @@ impl Clean<Type> for hir::Ty {\n                     if let Some(bounds) = cx.impl_trait_bounds.borrow_mut().remove(&did) {\n                         return ImplTrait(bounds);\n                     }\n+                } else if let Def::Existential(did) = path.def {\n+                    // This block is for returned impl trait only.\n+                    if let Some(node_id) = cx.tcx.hir.as_local_node_id(did) {\n+                        let item = cx.tcx.hir.expect_item(node_id);\n+                        if let hir::ItemKind::Existential(ref ty) = item.node {\n+                            return ImplTrait(ty.bounds.clean(cx));\n+                        }\n+                    }\n                 }\n \n                 let mut alias = None;"}, {"sha": "62da6f13942d8f1e225f1b7d10b74300209f78d0", "filename": "src/test/rustdoc/impl-everywhere.rs", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/e67bba8ebe14c815c4f756aa267249e5c35d5ec5/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e67bba8ebe14c815c4f756aa267249e5c35d5ec5/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fimpl-everywhere.rs?ref=e67bba8ebe14c815c4f756aa267249e5c35d5ec5", "patch": "@@ -0,0 +1,40 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![crate_name = \"foo\"]\n+\n+pub trait Foo {}\n+pub trait Foo2 {}\n+\n+pub struct Bar;\n+\n+impl Foo for Bar {}\n+impl Foo2 for Bar {}\n+\n+// @!has foo/fn.foo.html '//section[@id=\"main\"]//pre' \"x: &\\'x impl Foo\"\n+// @!has foo/fn.foo.html '//section[@id=\"main\"]//pre' \"-> &\\'x impl Foo {\"\n+pub fn foo<'x>(x: &'x impl Foo) -> &'x impl Foo {\n+    x\n+}\n+\n+// @!has foo/fn.foo2.html '//section[@id=\"main\"]//pre' \"x: &\\'x impl Foo\"\n+// @!has foo/fn.foo2.html '//section[@id=\"main\"]//pre' '-> impl Foo2 {'\n+pub fn foo2<'x>(_x: &'x impl Foo) -> impl Foo2 {\n+    Bar\n+}\n+\n+// @!has foo/fn.foo_foo.html '//section[@id=\"main\"]//pre' '-> impl Foo + Foo2 {'\n+pub fn foo_foo() -> impl Foo + Foo2 {\n+    Bar\n+}\n+\n+// @!has foo/fn.foo2.html '//section[@id=\"main\"]//pre' \"x: &'x (impl Foo + Foo2)\"\n+pub fn foo_foo_foo<'x>(_x: &'x (impl Foo + Foo2)) {\n+}"}]}