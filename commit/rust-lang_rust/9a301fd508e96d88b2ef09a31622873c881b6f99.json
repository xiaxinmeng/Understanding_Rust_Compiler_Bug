{"sha": "9a301fd508e96d88b2ef09a31622873c881b6f99", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhMzAxZmQ1MDhlOTZkODhiMmVmMDlhMzE2MjI4NzNjODgxYjZmOTk=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2017-01-05T02:01:53Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2017-01-05T02:05:04Z"}, "message": "Bump to 0.0.106; Fix false positive in wrong_self_convention (fix #1420)", "tree": {"sha": "31cf6ff84c8f6f6b4a78fe077d75bd964ed2fd60", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31cf6ff84c8f6f6b4a78fe077d75bd964ed2fd60"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a301fd508e96d88b2ef09a31622873c881b6f99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a301fd508e96d88b2ef09a31622873c881b6f99", "html_url": "https://github.com/rust-lang/rust/commit/9a301fd508e96d88b2ef09a31622873c881b6f99", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a301fd508e96d88b2ef09a31622873c881b6f99/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3baa435b705f1e4c8b5233208320c9907c796b46", "url": "https://api.github.com/repos/rust-lang/rust/commits/3baa435b705f1e4c8b5233208320c9907c796b46", "html_url": "https://github.com/rust-lang/rust/commit/3baa435b705f1e4c8b5233208320c9907c796b46"}], "stats": {"total": 27, "additions": 19, "deletions": 8}, "files": [{"sha": "af28d607478f0d5eedb1de31518d6046f0b582a1", "filename": "CHANGELOG.md", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9a301fd508e96d88b2ef09a31622873c881b6f99/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/9a301fd508e96d88b2ef09a31622873c881b6f99/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=9a301fd508e96d88b2ef09a31622873c881b6f99", "patch": "@@ -1,8 +1,11 @@\n # Change Log\n All notable changes to this project will be documented in this file.\n \n-## 0.0.105 \u2014 2016-12-15\n-* Update to *rustc 1.15.0-nightly (8f02c429a 2016-12-15)*\n+## 0.0.106 \u2014 2017-01-04\n+* Fix FP introduced by rustup in [`wrong_self_convention`]\n+\n+## 0.0.105 \u2014 2017-01-04\n+* Update to *rustc 1.16.0-nightly (468227129 2017-01-03)*\n * New lints: [`deref_addrof`], [`double_parens`], [`pub_enum_variant_names`]\n * Fix suggestion in [`new_without_default`]\n * FP fix in [`absurd_extreme_comparisons`]"}, {"sha": "e0a90c49478c780dcc6813690898f4a13bbc98c3", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9a301fd508e96d88b2ef09a31622873c881b6f99/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9a301fd508e96d88b2ef09a31622873c881b6f99/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=9a301fd508e96d88b2ef09a31622873c881b6f99", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"clippy\"\n-version = \"0.0.105\"\n+version = \"0.0.106\"\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\",\n@@ -25,7 +25,7 @@ test = false\n \n [dependencies]\n # begin automatic update\n-clippy_lints = { version = \"0.0.105\", path = \"clippy_lints\" }\n+clippy_lints = { version = \"0.0.106\", path = \"clippy_lints\" }\n # end automatic update\n \n [dev-dependencies]"}, {"sha": "309340cbc27c0240cb740a1cfe2f0aa393dd98df", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9a301fd508e96d88b2ef09a31622873c881b6f99/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9a301fd508e96d88b2ef09a31622873c881b6f99/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=9a301fd508e96d88b2ef09a31622873c881b6f99", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"clippy_lints\"\n # begin automatic update\n-version = \"0.0.105\"\n+version = \"0.0.106\"\n # end automatic update\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\","}, {"sha": "05336d95a2d191582013435b8729fb948369150c", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9a301fd508e96d88b2ef09a31622873c881b6f99/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a301fd508e96d88b2ef09a31622873c881b6f99/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=9a301fd508e96d88b2ef09a31622873c881b6f99", "patch": "@@ -1342,7 +1342,7 @@ const PATTERN_METHODS: [(&'static str, usize); 17] = [\n ];\n \n \n-#[derive(Clone, Copy, PartialEq)]\n+#[derive(Clone, Copy, PartialEq, Debug)]\n enum SelfKind {\n     Value,\n     Ref,\n@@ -1358,12 +1358,15 @@ impl SelfKind {\n         // Thus, we only need to test equality against the impl self type or if it is an explicit\n         // `Self`. Furthermore, the only possible types for `self: ` are `&Self`, `Self`, `&mut Self`,\n         // and `Box<Self>`, including the equivalent types with `Foo`.\n+\n         let is_actually_self = |ty| is_self_ty(ty) || ty == self_ty;\n         if is_self(arg) {\n             match self {\n                 SelfKind::Value => is_actually_self(ty),\n-                SelfKind::Ref | SelfKind::RefMut if allow_value_for_ref => is_actually_self(ty),\n                 SelfKind::Ref | SelfKind::RefMut => {\n+                    if allow_value_for_ref && is_actually_self(ty) {\n+                        return true;\n+                    }\n                     match ty.node {\n                         hir::TyRptr(_, ref mt_ty) => {\n                             let mutability_match = if self == SelfKind::Ref {\n@@ -1372,7 +1375,6 @@ impl SelfKind {\n                                 mt_ty.mutbl == hir::MutMutable\n                             };\n                             is_actually_self(&mt_ty.ty) && mutability_match\n-\n                         },\n                         _ => false,\n                     }"}, {"sha": "d22648c0cdba93c00f6257c36f50e5ca969c3ea2", "filename": "tests/compile-fail/wrong_self_convention.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9a301fd508e96d88b2ef09a31622873c881b6f99/tests%2Fcompile-fail%2Fwrong_self_convention.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a301fd508e96d88b2ef09a31622873c881b6f99/tests%2Fcompile-fail%2Fwrong_self_convention.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fwrong_self_convention.rs?ref=9a301fd508e96d88b2ef09a31622873c881b6f99", "patch": "@@ -13,8 +13,10 @@ struct Foo;\n impl Foo {\n \n     fn as_i32(self) {}\n+    fn as_u32(&self) {}\n     fn into_i32(self) {}\n     fn is_i32(self) {}\n+    fn is_u32(&self) {}\n     fn to_i32(self) {}\n     fn from_i32(self) {} //~ERROR: methods called `from_*` usually take no self\n \n@@ -34,9 +36,13 @@ struct Bar;\n impl Bar {\n \n     fn as_i32(self) {} //~ERROR: methods called `as_*` usually take self by reference\n+    fn as_u32(&self) {}\n     fn into_i32(&self) {} //~ERROR: methods called `into_*` usually take self by value\n+    fn into_u32(self) {}\n     fn is_i32(self) {} //~ERROR: methods called `is_*` usually take self by reference\n+    fn is_u32(&self) {}\n     fn to_i32(self) {} //~ERROR: methods called `to_*` usually take self by reference\n+    fn to_u32(&self) {}\n     fn from_i32(self) {} //~ERROR: methods called `from_*` usually take no self\n \n     pub fn as_i64(self) {} //~ERROR: methods called `as_*` usually take self by reference"}]}