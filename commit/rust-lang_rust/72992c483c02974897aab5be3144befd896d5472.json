{"sha": "72992c483c02974897aab5be3144befd896d5472", "node_id": "C_kwDOAAsO6NoAKDcyOTkyYzQ4M2MwMjk3NDg5N2FhYjViZTMxNDRiZWZkODk2ZDU0NzI", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2022-09-25T15:49:44Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2022-09-26T16:20:11Z"}, "message": "Update to Cranelift 0.88.0", "tree": {"sha": "1d11dcf90faff4006e44a634e6ef284d42ce8818", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d11dcf90faff4006e44a634e6ef284d42ce8818"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72992c483c02974897aab5be3144befd896d5472", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72992c483c02974897aab5be3144befd896d5472", "html_url": "https://github.com/rust-lang/rust/commit/72992c483c02974897aab5be3144befd896d5472", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72992c483c02974897aab5be3144befd896d5472/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7dccb51fe367a21af01ce9095d4e06082dfba56d", "url": "https://api.github.com/repos/rust-lang/rust/commits/7dccb51fe367a21af01ce9095d4e06082dfba56d", "html_url": "https://github.com/rust-lang/rust/commit/7dccb51fe367a21af01ce9095d4e06082dfba56d"}], "stats": {"total": 78, "additions": 47, "deletions": 31}, "files": [{"sha": "c0f1dfd3e9d936d41e2142314e17148465b6ca34", "filename": "Cargo.lock", "status": "modified", "additions": 36, "deletions": 22, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/72992c483c02974897aab5be3144befd896d5472/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/72992c483c02974897aab5be3144befd896d5472/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=72992c483c02974897aab5be3144befd896d5472", "patch": "@@ -24,6 +24,12 @@ name = \"ar\"\n version = \"0.8.0\"\n source = \"git+https://github.com/bjorn3/rust-ar.git?branch=do_not_remove_cg_clif_ranlib#de9ab0e56bf3a208381d342aa5b60f9ff2891648\"\n \n+[[package]]\n+name = \"arrayvec\"\n+version = \"0.7.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"8da52d66c7071e2e3fa2a1e5c6d088fec47b593032b254f5e980de8ea54454d6\"\n+\n [[package]]\n name = \"autocfg\"\n version = \"1.1.0\"\n@@ -36,6 +42,12 @@ version = \"1.3.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"bef38d45163c2f1dde094a7dfd33ccf595c92905c8f8f4fdc18d06fb1037718a\"\n \n+[[package]]\n+name = \"bumpalo\"\n+version = \"3.11.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"c1ad822118d20d2c234f427000d5acc36eabe1e29a348c89b63dd60b13f28e5d\"\n+\n [[package]]\n name = \"byteorder\"\n version = \"1.4.3\"\n@@ -50,19 +62,21 @@ checksum = \"baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd\"\n \n [[package]]\n name = \"cranelift-bforest\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"93945adbccc8d731503d3038814a51e8317497c9e205411820348132fa01a358\"\n+checksum = \"b27bbd3e6c422cf6282b047bcdd51ecd9ca9f3497a3be0132ffa08e509b824b0\"\n dependencies = [\n  \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2b482acc9d0d0d1ad3288a90a8150ee648be3dce8dc8c8669ff026f72debdc31\"\n+checksum = \"872f5d4557a411b087bd731df6347c142ae1004e6467a144a7e33662e5715a01\"\n dependencies = [\n+ \"arrayvec\",\n+ \"bumpalo\",\n  \"cranelift-bforest\",\n  \"cranelift-codegen-meta\",\n  \"cranelift-codegen-shared\",\n@@ -77,30 +91,30 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-codegen-meta\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f9ec188d71e663192ef9048f204e410a7283b609942efc9fcc77da6d496edbb8\"\n+checksum = \"21b49fdebb29c62c1fc4da1eeebd609e9d530ecde24a9876def546275f73a244\"\n dependencies = [\n  \"cranelift-codegen-shared\",\n ]\n \n [[package]]\n name = \"cranelift-codegen-shared\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3ad794b1b1c2c7bd9f7b76cfe0f084eaf7753e55d56191c3f7d89e8fa4978b99\"\n+checksum = \"5fc0c091e2db055d4d7f6b7cec2d2ead286bcfaea3357c6a52c2a2613a8cb5ac\"\n \n [[package]]\n name = \"cranelift-entity\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"342da0d5056f4119d3c311c4aab2460ceb6ee6e127bb395b76dd2279a09ea7a5\"\n+checksum = \"354a9597be87996c9b278655e68b8447f65dd907256855ad773864edee8d985c\"\n \n [[package]]\n name = \"cranelift-frontend\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"dfff792f775b07d4d9cfe9f1c767ce755c6cbadda1bbd6db18a1c75ff9f7376a\"\n+checksum = \"0cd8dd3fb8b82c772f4172e87ae1677b971676fffa7c4e3398e3047e650a266b\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"log\",\n@@ -110,15 +124,15 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-isle\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"8d51089478849f2ac8ef60a8a2d5346c8d4abfec0e45ac5b24530ef9f9499e1e\"\n+checksum = \"b82527802b1f7d8da288adc28f1dc97ea52943f5871c041213f7b5035ac698a7\"\n \n [[package]]\n name = \"cranelift-jit\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"095936e41720f86004b4c57ce88e6a13af28646bb3a6fb4afbebd5ae90c50029\"\n+checksum = \"54a6d007394ef18312fc6616fb99618844f13dff01edbbbc4a451c2b7cd5c8f4\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n@@ -134,19 +148,19 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-module\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"704a1aea4723d97eafe0fb7af110f6f6868b1ac95f5380bbc9adb2a3b8cf97e8\"\n+checksum = \"a106dd90ab4071f9e16b9fd3c2057d61c37f35af7c8f079c9ec59d6ede5b2cef\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n ]\n \n [[package]]\n name = \"cranelift-native\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"885debe62f2078638d6585f54c9f05f5c2008f22ce5a2a9100ada785fc065dbd\"\n+checksum = \"c30ba8b910f1be023af0c39109cb28a8809734942a6b3eecbf2de8993052ea5e\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"libc\",\n@@ -155,9 +169,9 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-object\"\n-version = \"0.87.0\"\n+version = \"0.88.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"aac1310cf1081ae8eca916c92cd163b977c77cab6e831fa812273c26ff921816\"\n+checksum = \"506ac7a483c765a83795166ffe689f656afc0f4eb57fafa3f9e60b64bfa2caa6\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\","}, {"sha": "46fed4380e5274a7d04f2d6cbaba6690211617f5", "filename": "Cargo.toml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72992c483c02974897aab5be3144befd896d5472/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/72992c483c02974897aab5be3144befd896d5472/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=72992c483c02974897aab5be3144befd896d5472", "patch": "@@ -8,12 +8,12 @@ crate-type = [\"dylib\"]\n \n [dependencies]\n # These have to be in sync with each other\n-cranelift-codegen = { version = \"0.87.0\", features = [\"unwind\", \"all-arch\"] }\n-cranelift-frontend = \"0.87.0\"\n-cranelift-module = \"0.87.0\"\n-cranelift-native = \"0.87.0\"\n-cranelift-jit = { version = \"0.87.0\", optional = true }\n-cranelift-object = \"0.87.0\"\n+cranelift-codegen = { version = \"0.88.0\", features = [\"unwind\", \"all-arch\"] }\n+cranelift-frontend = \"0.88.0\"\n+cranelift-module = \"0.88.0\"\n+cranelift-native = \"0.88.0\"\n+cranelift-jit = { version = \"0.88.0\", optional = true }\n+cranelift-object = \"0.88.0\"\n target-lexicon = \"0.12.0\"\n gimli = { version = \"0.26.0\", default-features = false, features = [\"write\"]}\n object = { version = \"0.29.0\", default-features = false, features = [\"std\", \"read_core\", \"write\", \"archive\", \"coff\", \"elf\", \"macho\", \"pe\"] }"}, {"sha": "491525993fd1e7c60ae6330d5811291fa360d53f", "filename": "src/base.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/72992c483c02974897aab5be3144befd896d5472/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72992c483c02974897aab5be3144befd896d5472/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=72992c483c02974897aab5be3144befd896d5472", "patch": "@@ -6,6 +6,8 @@ use rustc_middle::ty::adjustment::PointerCast;\n use rustc_middle::ty::layout::FnAbiOf;\n use rustc_middle::ty::print::with_no_trimmed_paths;\n \n+use cranelift_codegen::ir::UserFuncName;\n+\n use crate::constant::ConstantCx;\n use crate::debuginfo::FunctionDebugContext;\n use crate::prelude::*;\n@@ -64,7 +66,7 @@ pub(crate) fn codegen_fn<'tcx>(\n     let mut func_ctx = FunctionBuilderContext::new();\n     let mut func = cached_func;\n     func.clear();\n-    func.name = ExternalName::user(0, func_id.as_u32());\n+    func.name = UserFuncName::user(0, func_id.as_u32());\n     func.signature = sig;\n     func.collect_debug_info();\n "}, {"sha": "74bd473653532185aa99bdf780e3c3b6d74faa49", "filename": "src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/72992c483c02974897aab5be3144befd896d5472/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72992c483c02974897aab5be3144befd896d5472/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=72992c483c02974897aab5be3144befd896d5472", "patch": "@@ -96,8 +96,8 @@ mod prelude {\n     pub(crate) use cranelift_codegen::ir::function::Function;\n     pub(crate) use cranelift_codegen::ir::types;\n     pub(crate) use cranelift_codegen::ir::{\n-        AbiParam, Block, ExternalName, FuncRef, Inst, InstBuilder, MemFlags, Signature, SourceLoc,\n-        StackSlot, StackSlotData, StackSlotKind, TrapCode, Type, Value,\n+        AbiParam, Block, FuncRef, Inst, InstBuilder, MemFlags, Signature, SourceLoc, StackSlot,\n+        StackSlotData, StackSlotKind, TrapCode, Type, Value,\n     };\n     pub(crate) use cranelift_codegen::isa::{self, CallConv};\n     pub(crate) use cranelift_codegen::Context;"}]}