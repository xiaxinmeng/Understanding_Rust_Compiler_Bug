{"sha": "29c449e6445757ec4157cba1c01e857d26c692ca", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5YzQ0OWU2NDQ1NzU3ZWM0MTU3Y2JhMWMwMWU4NTdkMjZjNjkyY2E=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2018-03-27T05:07:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-03-27T05:07:01Z"}, "message": "Merge pull request #2578 from mikerite/fix_issue_2397_pr_2\n\nFix enum_glob_use false positives", "tree": {"sha": "3c049c337c6ceb33fb82040e389dc5fd06c0a0c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c049c337c6ceb33fb82040e389dc5fd06c0a0c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/29c449e6445757ec4157cba1c01e857d26c692ca", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaudF1CRBK7hj4Ov3rIwAAdHIIAAipQ86t7mScStO6eVbC2z+9\nv+dKDzlusY9jvL+KKlPvhP75EvTm/LyOfG4VrHlCHv8TP9X3a4Mo5d2B+oZZW7h0\nAR6JQJqw4mHsM/VCNC6tVD7jyPkOparknSgmH2AmAfernEecVY+lUY+GtiXKVNed\navLFb0tNZgN1x4wqK/hp8OGeG1c3VdKu7ye+vLNZCMx5w1poQdNM9CMz/JsB9ztj\ncukLiVWCBY44nOJMgJ1xxyvi50uOl66houvIceD9JrxoPL6PEQpczw8iPtYrnT3L\nzAFmT0Nmv8izPp2yLR19UVNDKoXJjCiNospFSyAXzxWaeVZNZHqioYrbKTenM5c=\n=pDlA\n-----END PGP SIGNATURE-----\n", "payload": "tree 3c049c337c6ceb33fb82040e389dc5fd06c0a0c7\nparent b01b0083baa758b18a3d0aece01e16c38fde2eb1\nparent 546d2fec29c46615686bf2f7e356bc637a410d89\nauthor Oliver Schneider <oli-obk@users.noreply.github.com> 1522127221 +0200\ncommitter GitHub <noreply@github.com> 1522127221 +0200\n\nMerge pull request #2578 from mikerite/fix_issue_2397_pr_2\n\nFix enum_glob_use false positives"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/29c449e6445757ec4157cba1c01e857d26c692ca", "html_url": "https://github.com/rust-lang/rust/commit/29c449e6445757ec4157cba1c01e857d26c692ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/29c449e6445757ec4157cba1c01e857d26c692ca/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b01b0083baa758b18a3d0aece01e16c38fde2eb1", "url": "https://api.github.com/repos/rust-lang/rust/commits/b01b0083baa758b18a3d0aece01e16c38fde2eb1", "html_url": "https://github.com/rust-lang/rust/commit/b01b0083baa758b18a3d0aece01e16c38fde2eb1"}, {"sha": "546d2fec29c46615686bf2f7e356bc637a410d89", "url": "https://api.github.com/repos/rust-lang/rust/commits/546d2fec29c46615686bf2f7e356bc637a410d89", "html_url": "https://github.com/rust-lang/rust/commit/546d2fec29c46615686bf2f7e356bc637a410d89"}], "stats": {"total": 27, "additions": 15, "deletions": 12}, "files": [{"sha": "8a0d03d2ae9935ab3af5c724bb6d32e36e78088f", "filename": "clippy_lints/src/enum_glob_use.rs", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/29c449e6445757ec4157cba1c01e857d26c692ca/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29c449e6445757ec4157cba1c01e857d26c692ca/clippy_lints%2Fsrc%2Fenum_glob_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fenum_glob_use.rs?ref=29c449e6445757ec4157cba1c01e857d26c692ca", "patch": "@@ -1,6 +1,7 @@\n //! lint on `use`ing all variants of an enum\n \n use rustc::hir::*;\n+use rustc::hir::def::Def;\n use rustc::lint::{LateContext, LateLintPass, LintArray, LintPass};\n use syntax::ast::NodeId;\n use syntax::codemap::Span;\n@@ -12,8 +13,7 @@ use utils::span_lint;\n /// an enumeration variant, rather than importing variants.\n ///\n /// **Known problems:** Old-style enumerations that prefix the variants are\n-/// still around. May cause problems with modules that are not snake_case (see\n-/// [#2397](https://github.com/rust-lang-nursery/rust-clippy/issues/2397))\n+/// still around.\n ///\n /// **Example:**\n /// ```rust\n@@ -48,16 +48,13 @@ impl EnumGlobUse {\n             return; // re-exports are fine\n         }\n         if let ItemUse(ref path, UseKind::Glob) = item.node {\n-            // FIXME: ask jseyfried why the qpath.def for `use std::cmp::Ordering::*;`\n-            // extracted through `ItemUse(ref qpath, UseKind::Glob)` is a `Mod` and not an\n-            // `Enum`\n-            // if let Def::Enum(_) = path.def {\n-            if path.segments\n-                .last()\n-                .and_then(|seg| seg.name.as_str().chars().next())\n-                .map_or(false, char::is_uppercase)\n-            {\n-                span_lint(cx, ENUM_GLOB_USE, item.span, \"don't use glob imports for enum variants\");\n+            if let Def::Enum(_) = path.def {\n+                span_lint(\n+                    cx,\n+                    ENUM_GLOB_USE,\n+                    item.span,\n+                    \"don't use glob imports for enum variants\",\n+                );\n             }\n         }\n     }"}, {"sha": "efb37fbe49d2d0ad1e73b0b11b6d773f695ca99b", "filename": "tests/ui/enum_glob_use.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/29c449e6445757ec4157cba1c01e857d26c692ca/tests%2Fui%2Fenum_glob_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29c449e6445757ec4157cba1c01e857d26c692ca/tests%2Fui%2Fenum_glob_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fenum_glob_use.rs?ref=29c449e6445757ec4157cba1c01e857d26c692ca", "patch": "@@ -23,4 +23,10 @@ mod tests {\n     use super::*;\n }\n \n+#[allow(non_snake_case)]\n+mod CamelCaseName {\n+}\n+\n+use CamelCaseName::*;\n+\n fn main() {}"}]}