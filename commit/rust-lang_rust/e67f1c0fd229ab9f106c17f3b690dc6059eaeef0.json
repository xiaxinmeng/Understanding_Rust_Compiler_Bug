{"sha": "e67f1c0fd229ab9f106c17f3b690dc6059eaeef0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2N2YxYzBmZDIyOWFiOWYxMDZjMTdmM2I2OTBkYzYwNTllYWVlZjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-20T05:12:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-20T05:12:52Z"}, "message": "auto merge of #5968 : gifnksm/rust/windowed, r=brson\n\nvec::windowed fails if given window size is greater than vector length + 1.\r\n\r\n```rust\r\nfor vec::windowed(7, &[1,2,3,4,5,6]) |vs| { fail!(); } // => do nothing\r\nfor vec::windowed(8, &[1,2,3,4,5,6]) |vs| { fail!(); } // => assertion failure in vec::slice\r\n```", "tree": {"sha": "7027a88f7b8c7a1064dd36e91c36a4f5b8861b15", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7027a88f7b8c7a1064dd36e91c36a4f5b8861b15"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0", "html_url": "https://github.com/rust-lang/rust/commit/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "047ba2642f39baa60c13aa0318ddcb09d9ca5301", "url": "https://api.github.com/repos/rust-lang/rust/commits/047ba2642f39baa60c13aa0318ddcb09d9ca5301", "html_url": "https://github.com/rust-lang/rust/commit/047ba2642f39baa60c13aa0318ddcb09d9ca5301"}, {"sha": "a1a9326c6d71cb7f3b678f4047a1e958318dd337", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1a9326c6d71cb7f3b678f4047a1e958318dd337", "html_url": "https://github.com/rust-lang/rust/commit/a1a9326c6d71cb7f3b678f4047a1e958318dd337"}], "stats": {"total": 3, "additions": 3, "deletions": 0}, "files": [{"sha": "3f049fc38511ab87c42b30ccea93e3dc18c9a015", "filename": "src/libcore/vec.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0/src%2Flibcore%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e67f1c0fd229ab9f106c17f3b690dc6059eaeef0/src%2Flibcore%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fvec.rs?ref=e67f1c0fd229ab9f106c17f3b690dc6059eaeef0", "patch": "@@ -1542,6 +1542,7 @@ pub fn each_permutation<T:Copy>(v: &[T], put: &fn(ts: &[T]) -> bool) {\n #[cfg(stage0)] // XXX: lifetimes!\n pub fn windowed<T>(n: uint, v: &[T], it: &fn(&[T]) -> bool) {\n     assert!(1u <= n);\n+    if n > v.len() { return; }\n     for uint::range(0, v.len() - n + 1) |i| {\n         if !it(v.slice(i, i+n)) { return }\n     }\n@@ -1551,6 +1552,7 @@ pub fn windowed<T>(n: uint, v: &[T], it: &fn(&[T]) -> bool) {\n #[cfg(stage3)]\n pub fn windowed<'r, T>(n: uint, v: &'r [T], it: &fn(&'r [T]) -> bool) {\n     assert!(1u <= n);\n+    if n > v.len() { return; }\n     for uint::range(0, v.len() - n + 1) |i| {\n         if !it(v.slice(i, i + n)) { return }\n     }\n@@ -3910,6 +3912,7 @@ mod tests {\n         t(3, &[&[1,2,3],&[2,3,4],&[3,4,5],&[4,5,6]]);\n         t(4, &[&[1,2,3,4],&[2,3,4,5],&[3,4,5,6]]);\n         t(7, &[]);\n+        t(8, &[]);\n     }\n \n     #[test]"}]}