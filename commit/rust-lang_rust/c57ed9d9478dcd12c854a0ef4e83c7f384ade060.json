{"sha": "c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM1N2VkOWQ5NDc4ZGNkMTJjODU0YTBlZjRlODNjN2YzODRhZGUwNjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-03T05:40:53Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-06-03T05:40:53Z"}, "message": "Auto merge of #61331 - estebank:fn-arg-parse-recovery, r=varkor\n\nRecover gracefully from argument with missing type or param name", "tree": {"sha": "b36a1449a687bef14dc91e2a547ee88c81ed0e86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b36a1449a687bef14dc91e2a547ee88c81ed0e86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "html_url": "https://github.com/rust-lang/rust/commit/c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d59dcb261ecdc47d8afaac532050dadf86f3c898", "url": "https://api.github.com/repos/rust-lang/rust/commits/d59dcb261ecdc47d8afaac532050dadf86f3c898", "html_url": "https://github.com/rust-lang/rust/commit/d59dcb261ecdc47d8afaac532050dadf86f3c898"}, {"sha": "e275f2caf62b452913b301a31a2877d3f2f0711b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e275f2caf62b452913b301a31a2877d3f2f0711b", "html_url": "https://github.com/rust-lang/rust/commit/e275f2caf62b452913b301a31a2877d3f2f0711b"}], "stats": {"total": 222, "additions": 182, "deletions": 40}, "files": [{"sha": "af9092dd5b05afdb33a96658d3fe173dcb8d02b1", "filename": "src/libsyntax/parse/diagnostics.rs", "status": "modified", "additions": 64, "deletions": 10, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Flibsyntax%2Fparse%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Flibsyntax%2Fparse%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fdiagnostics.rs?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -1,7 +1,6 @@\n-use crate::ast;\n use crate::ast::{\n-    BlockCheckMode, BinOpKind, Expr, ExprKind, Item, ItemKind, Pat, PatKind, PathSegment, QSelf,\n-    Ty, TyKind, VariantData,\n+    self, Arg, BinOpKind, BindingMode, BlockCheckMode, Expr, ExprKind, Ident, Item, ItemKind,\n+    Mutability, Pat, PatKind, PathSegment, QSelf, Ty, TyKind, VariantData,\n };\n use crate::parse::{SeqSep, token, PResult, Parser};\n use crate::parse::parser::{BlockMode, PathStyle, SemiColonMode, TokenType, TokenExpectType};\n@@ -12,9 +11,25 @@ use crate::symbol::{kw, sym};\n use crate::ThinVec;\n use crate::util::parser::AssocOp;\n use errors::{Applicability, DiagnosticBuilder, DiagnosticId};\n+use rustc_data_structures::fx::FxHashSet;\n use syntax_pos::{Span, DUMMY_SP, MultiSpan};\n use log::{debug, trace};\n \n+/// Creates a placeholder argument.\n+crate fn dummy_arg(ident: Ident) -> Arg {\n+    let pat = P(Pat {\n+        id: ast::DUMMY_NODE_ID,\n+        node: PatKind::Ident(BindingMode::ByValue(Mutability::Immutable), ident, None),\n+        span: ident.span,\n+    });\n+    let ty = Ty {\n+        node: TyKind::Err,\n+        span: ident.span,\n+        id: ast::DUMMY_NODE_ID\n+    };\n+    Arg { ty: P(ty), pat: pat, id: ast::DUMMY_NODE_ID, source: ast::ArgSource::Normal }\n+}\n+\n pub enum Error {\n     FileNotFoundForModule {\n         mod_name: String,\n@@ -1092,12 +1107,12 @@ impl<'a> Parser<'a> {\n         pat: P<ast::Pat>,\n         require_name: bool,\n         is_trait_item: bool,\n-    ) {\n+    ) -> Option<Ident> {\n         // If we find a pattern followed by an identifier, it could be an (incorrect)\n         // C-style parameter declaration.\n         if self.check_ident() && self.look_ahead(1, |t| {\n             *t == token::Comma || *t == token::CloseDelim(token::Paren)\n-        }) {\n+        }) { // `fn foo(String s) {}`\n             let ident = self.parse_ident().unwrap();\n             let span = pat.span.with_hi(ident.span.hi());\n \n@@ -1107,18 +1122,30 @@ impl<'a> Parser<'a> {\n                 String::from(\"<identifier>: <type>\"),\n                 Applicability::HasPlaceholders,\n             );\n-        } else if require_name && is_trait_item {\n-            if let PatKind::Ident(_, ident, _) = pat.node {\n+            return Some(ident);\n+        } else if let PatKind::Ident(_, ident, _) = pat.node {\n+            if require_name && (\n+                is_trait_item ||\n+                self.token == token::Comma ||\n+                self.token == token::CloseDelim(token::Paren)\n+            ) { // `fn foo(a, b) {}` or `fn foo(usize, usize) {}`\n                 err.span_suggestion(\n                     pat.span,\n-                    \"explicitly ignore parameter\",\n+                    \"if this was a parameter name, give it a type\",\n+                    format!(\"{}: TypeName\", ident),\n+                    Applicability::HasPlaceholders,\n+                );\n+                err.span_suggestion(\n+                    pat.span,\n+                    \"if this is a type, explicitly ignore the parameter name\",\n                     format!(\"_: {}\", ident),\n                     Applicability::MachineApplicable,\n                 );\n+                err.note(\"anonymous parameters are removed in the 2018 edition (see RFC 1685)\");\n+                return Some(ident);\n             }\n-\n-            err.note(\"anonymous parameters are removed in the 2018 edition (see RFC 1685)\");\n         }\n+        None\n     }\n \n     crate fn recover_arg_parse(&mut self) -> PResult<'a, (P<ast::Pat>, P<ast::Ty>)> {\n@@ -1205,4 +1232,31 @@ impl<'a> Parser<'a> {\n         err.span_label(span, \"expected expression\");\n         err\n     }\n+\n+    /// Replace duplicated recovered arguments with `_` pattern to avoid unecessary errors.\n+    ///\n+    /// This is necessary because at this point we don't know whether we parsed a function with\n+    /// anonymous arguments or a function with names but no types. In order to minimize\n+    /// unecessary errors, we assume the arguments are in the shape of `fn foo(a, b, c)` where\n+    /// the arguments are *names* (so we don't emit errors about not being able to find `b` in\n+    /// the local scope), but if we find the same name multiple times, like in `fn foo(i8, i8)`,\n+    /// we deduplicate them to not complain about duplicated argument names.\n+    crate fn deduplicate_recovered_arg_names(&self, fn_inputs: &mut Vec<Arg>) {\n+        let mut seen_inputs = FxHashSet::default();\n+        for input in fn_inputs.iter_mut() {\n+            let opt_ident = if let (PatKind::Ident(_, ident, _), TyKind::Err) = (\n+                &input.pat.node, &input.ty.node,\n+            ) {\n+                Some(*ident)\n+            } else {\n+                None\n+            };\n+            if let Some(ident) = opt_ident {\n+                if seen_inputs.contains(&ident) {\n+                    input.pat.node = PatKind::Wild;\n+                }\n+                seen_inputs.insert(ident);\n+            }\n+        }\n+    }\n }"}, {"sha": "f200d3ec8d5c17a39463a111a5d953168340ed28", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 17, "deletions": 21, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -47,7 +47,7 @@ use crate::parse::PResult;\n use crate::ThinVec;\n use crate::tokenstream::{self, DelimSpan, TokenTree, TokenStream, TreeAndJoint};\n use crate::symbol::{kw, sym, Symbol};\n-use crate::parse::diagnostics::Error;\n+use crate::parse::diagnostics::{Error, dummy_arg};\n \n use errors::{Applicability, DiagnosticBuilder, DiagnosticId, FatalError};\n use rustc_target::spec::abi::{self, Abi};\n@@ -451,22 +451,6 @@ impl From<P<Expr>> for LhsExpr {\n     }\n }\n \n-/// Creates a placeholder argument.\n-fn dummy_arg(span: Span) -> Arg {\n-    let ident = Ident::new(kw::Invalid, span);\n-    let pat = P(Pat {\n-        id: ast::DUMMY_NODE_ID,\n-        node: PatKind::Ident(BindingMode::ByValue(Mutability::Immutable), ident, None),\n-        span,\n-    });\n-    let ty = Ty {\n-        node: TyKind::Err,\n-        span,\n-        id: ast::DUMMY_NODE_ID\n-    };\n-    Arg { ty: P(ty), pat: pat, id: ast::DUMMY_NODE_ID, source: ast::ArgSource::Normal }\n-}\n-\n #[derive(Copy, Clone, Debug)]\n crate enum TokenExpectType {\n     Expect,\n@@ -1528,8 +1512,17 @@ impl<'a> Parser<'a> {\n             let pat = self.parse_pat(Some(\"argument name\"))?;\n \n             if let Err(mut err) = self.expect(&token::Colon) {\n-                self.argument_without_type(&mut err, pat, require_name, is_trait_item);\n-                return Err(err);\n+                if let Some(ident) = self.argument_without_type(\n+                    &mut err,\n+                    pat,\n+                    require_name,\n+                    is_trait_item,\n+                ) {\n+                    err.emit();\n+                    return Ok(dummy_arg(ident));\n+                } else {\n+                    return Err(err);\n+                }\n             }\n \n             self.eat_incorrect_doc_comment(\"a method argument's type\");\n@@ -5432,7 +5425,7 @@ impl<'a> Parser<'a> {\n                             p.eat_to_tokens(&[&token::Comma, &token::CloseDelim(token::Paren)]);\n                             // Create a placeholder argument for proper arg count (issue #34264).\n                             let span = lo.to(p.prev_span);\n-                            Ok(Some(dummy_arg(span)))\n+                            Ok(Some(dummy_arg(Ident::new(kw::Invalid, span))))\n                         }\n                     }\n                 }\n@@ -5585,7 +5578,7 @@ impl<'a> Parser<'a> {\n \n         // Parse the rest of the function parameter list.\n         let sep = SeqSep::trailing_allowed(token::Comma);\n-        let (fn_inputs, recovered) = if let Some(self_arg) = self_arg {\n+        let (mut fn_inputs, recovered) = if let Some(self_arg) = self_arg {\n             if self.check(&token::CloseDelim(token::Paren)) {\n                 (vec![self_arg], false)\n             } else if self.eat(&token::Comma) {\n@@ -5608,6 +5601,9 @@ impl<'a> Parser<'a> {\n             // Parse closing paren and return type.\n             self.expect(&token::CloseDelim(token::Paren))?;\n         }\n+        // Replace duplicated recovered arguments with `_` pattern to avoid unecessary errors.\n+        self.deduplicate_recovered_arg_names(&mut fn_inputs);\n+\n         Ok(P(FnDecl {\n             inputs: fn_inputs,\n             output: self.parse_ret_ty(true)?,"}, {"sha": "abff8275064e24dfd8d922a003feab905deaa06a", "filename": "src/test/ui/anon-params-denied-2018.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fanon-params-denied-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fanon-params-denied-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fanon-params-denied-2018.rs?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -6,7 +6,13 @@ trait T {\n     fn foo(i32); //~ expected one of `:` or `@`, found `)`\n \n     fn bar_with_default_impl(String, String) {}\n-    //~^ ERROR expected one of `:` or `@`, found `,`\n+    //~^ ERROR expected one of `:`\n+    //~| ERROR expected one of `:`\n+\n+    // do not complain about missing `b`\n+    fn baz(a:usize, b, c: usize) -> usize { //~ ERROR expected one of `:`\n+        a + b + c\n+    }\n }\n \n fn main() {}"}, {"sha": "438bcf4274daaf0ab6e0c1dca14f6633b93ee5ef", "filename": "src/test/ui/anon-params-denied-2018.stderr", "status": "modified", "additions": 51, "deletions": 7, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fanon-params-denied-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fanon-params-denied-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fanon-params-denied-2018.stderr?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -2,21 +2,65 @@ error: expected one of `:` or `@`, found `)`\n   --> $DIR/anon-params-denied-2018.rs:6:15\n    |\n LL |     fn foo(i32);\n-   |            ---^ expected one of `:` or `@` here\n-   |            |\n-   |            help: explicitly ignore parameter: `_: i32`\n+   |               ^ expected one of `:` or `@` here\n    |\n    = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL |     fn foo(i32: TypeName);\n+   |            ^^^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL |     fn foo(_: i32);\n+   |            ^^^^^^\n \n error: expected one of `:` or `@`, found `,`\n   --> $DIR/anon-params-denied-2018.rs:8:36\n    |\n LL |     fn bar_with_default_impl(String, String) {}\n-   |                              ------^ expected one of `:` or `@` here\n-   |                              |\n-   |                              help: explicitly ignore parameter: `_: String`\n+   |                                    ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL |     fn bar_with_default_impl(String: TypeName, String) {}\n+   |                              ^^^^^^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL |     fn bar_with_default_impl(_: String, String) {}\n+   |                              ^^^^^^^^^\n+\n+error: expected one of `:` or `@`, found `)`\n+  --> $DIR/anon-params-denied-2018.rs:8:44\n+   |\n+LL |     fn bar_with_default_impl(String, String) {}\n+   |                                            ^ expected one of `:` or `@` here\n    |\n    = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL |     fn bar_with_default_impl(String, String: TypeName) {}\n+   |                                      ^^^^^^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL |     fn bar_with_default_impl(String, _: String) {}\n+   |                                      ^^^^^^^^^\n+\n+error: expected one of `:` or `@`, found `,`\n+  --> $DIR/anon-params-denied-2018.rs:13:22\n+   |\n+LL |     fn baz(a:usize, b, c: usize) -> usize {\n+   |                      ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL |     fn baz(a:usize, b: TypeName, c: usize) -> usize {\n+   |                     ^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL |     fn baz(a:usize, _: b, c: usize) -> usize {\n+   |                     ^^^^\n \n-error: aborting due to 2 previous errors\n+error: aborting due to 4 previous errors\n "}, {"sha": "f06b9510417310ba616f0651b6986a080ad08900", "filename": "src/test/ui/parser/inverted-parameters.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.rs?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -20,6 +20,8 @@ fn pattern((i32, i32) (a, b)) {}\n \n fn fizz(i32) {}\n //~^ ERROR expected one of `:` or `@`\n+//~| HELP if this was a parameter name, give it a type\n+//~| HELP if this is a type, explicitly ignore the parameter name\n \n fn missing_colon(quux S) {}\n //~^ ERROR expected one of `:` or `@`"}, {"sha": "fb48bd1fe9383625660ab5150f43c7efef6d494d", "filename": "src/test/ui/parser/inverted-parameters.stderr", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Finverted-parameters.stderr?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -33,9 +33,19 @@ error: expected one of `:` or `@`, found `)`\n    |\n LL | fn fizz(i32) {}\n    |            ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL | fn fizz(i32: TypeName) {}\n+   |         ^^^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL | fn fizz(_: i32) {}\n+   |         ^^^^^^\n \n error: expected one of `:` or `@`, found `S`\n-  --> $DIR/inverted-parameters.rs:24:23\n+  --> $DIR/inverted-parameters.rs:26:23\n    |\n LL | fn missing_colon(quux S) {}\n    |                  -----^"}, {"sha": "e501f235d6d3b6fce85d1e2858810e455d9771c6", "filename": "src/test/ui/parser/omitted-arg-in-item-fn.stderr", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Fomitted-arg-in-item-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fparser%2Fomitted-arg-in-item-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fomitted-arg-in-item-fn.stderr?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -3,6 +3,16 @@ error: expected one of `:` or `@`, found `)`\n    |\n LL | fn foo(x) {\n    |         ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL | fn foo(x: TypeName) {\n+   |        ^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL | fn foo(_: x) {\n+   |        ^^^^\n \n error: aborting due to previous error\n "}, {"sha": "5dd9895c6e4f45f141292a27afd0eeaaf78afd42", "filename": "src/test/ui/span/issue-34264.stderr", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fspan%2Fissue-34264.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c57ed9d9478dcd12c854a0ef4e83c7f384ade060/src%2Ftest%2Fui%2Fspan%2Fissue-34264.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Fissue-34264.stderr?ref=c57ed9d9478dcd12c854a0ef4e83c7f384ade060", "patch": "@@ -9,12 +9,32 @@ error: expected one of `:` or `@`, found `)`\n    |\n LL | fn foo(Option<i32>, String) {}\n    |                           ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL | fn foo(Option<i32>, String: TypeName) {}\n+   |                     ^^^^^^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL | fn foo(Option<i32>, _: String) {}\n+   |                     ^^^^^^^^^\n \n error: expected one of `:` or `@`, found `,`\n   --> $DIR/issue-34264.rs:3:9\n    |\n LL | fn bar(x, y: usize) {}\n    |         ^ expected one of `:` or `@` here\n+   |\n+   = note: anonymous parameters are removed in the 2018 edition (see RFC 1685)\n+help: if this was a parameter name, give it a type\n+   |\n+LL | fn bar(x: TypeName, y: usize) {}\n+   |        ^^^^^^^^^^^\n+help: if this is a type, explicitly ignore the parameter name\n+   |\n+LL | fn bar(_: x, y: usize) {}\n+   |        ^^^^\n \n error[E0061]: this function takes 2 parameters but 3 parameters were supplied\n   --> $DIR/issue-34264.rs:7:5"}]}