{"sha": "f0ea2b66f366bd2a4f9442c92552762a355a04c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwZWEyYjY2ZjM2NmJkMmE0Zjk0NDJjOTI1NTI3NjJhMzU1YTA0YzQ=", "commit": {"author": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2015-08-06T21:57:31Z"}, "committer": {"name": "Tim Neumann", "email": "mail@timnn.me", "date": "2015-08-11T11:00:38Z"}, "message": "Fix #27567: remove --crate-type=lib from pretty test", "tree": {"sha": "f140dbba5514d0823c79187f7e776cc05b82b0ab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f140dbba5514d0823c79187f7e776cc05b82b0ab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f0ea2b66f366bd2a4f9442c92552762a355a04c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f0ea2b66f366bd2a4f9442c92552762a355a04c4", "html_url": "https://github.com/rust-lang/rust/commit/f0ea2b66f366bd2a4f9442c92552762a355a04c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f0ea2b66f366bd2a4f9442c92552762a355a04c4/comments", "author": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TimNN", "id": 1178249, "node_id": "MDQ6VXNlcjExNzgyNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1178249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimNN", "html_url": "https://github.com/TimNN", "followers_url": "https://api.github.com/users/TimNN/followers", "following_url": "https://api.github.com/users/TimNN/following{/other_user}", "gists_url": "https://api.github.com/users/TimNN/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimNN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimNN/subscriptions", "organizations_url": "https://api.github.com/users/TimNN/orgs", "repos_url": "https://api.github.com/users/TimNN/repos", "events_url": "https://api.github.com/users/TimNN/events{/privacy}", "received_events_url": "https://api.github.com/users/TimNN/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8f32769b80ca33c4c93f9083202cc2078e806b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8f32769b80ca33c4c93f9083202cc2078e806b1", "html_url": "https://github.com/rust-lang/rust/commit/c8f32769b80ca33c4c93f9083202cc2078e806b1"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "5d9c430beafc0bd5ea3f63ddc8c5cd338226d316", "filename": "src/compiletest/runtest.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fruntest.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -315,7 +315,6 @@ actual:\\n\\\n         // FIXME (#9639): This needs to handle non-utf8 paths\n         let mut args = vec!(\"-\".to_string(),\n                             \"-Zno-trans\".to_string(),\n-                            \"--crate-type=lib\".to_string(),\n                             format!(\"--target={}\", target),\n                             \"-L\".to_string(),\n                             config.build_base.to_str().unwrap().to_string(),"}, {"sha": "e78f8f5fc9f792e1d217d396cc63b47bbf46a47d", "filename": "src/test/pretty/blank-lines.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblank-lines.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblank-lines.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblank-lines.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n fn f() -> [isize; 3] {\n     let picard = 0;"}, {"sha": "fbdafef29d878142e383f35889e13a67b635069c", "filename": "src/test/pretty/block-comment-multiple-asterisks.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-multiple-asterisks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-multiple-asterisks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-comment-multiple-asterisks.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n /***\n More than two asterisks means that it isn't a doc comment."}, {"sha": "50f1b035bb2c49b6a55e879726edf1e811181086", "filename": "src/test/pretty/block-comment-trailing-whitespace.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n fn f() {\n     /*"}, {"sha": "99c6ca43294ae2fd23c1e211d266c8fbfd41618e", "filename": "src/test/pretty/block-comment-trailing-whitespace2.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-comment-trailing-whitespace2.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n fn f() {\n } /*"}, {"sha": "5f88f9036780b98c1c969345b96af17f6ae243aa", "filename": "src/test/pretty/block-disambig.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-disambig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fblock-disambig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fblock-disambig.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // A bunch of tests for syntactic forms involving blocks that were\n // previously ambiguous (e.g. 'if true { } *val;' gets parsed as a\n // binop)"}, {"sha": "62cadd7cc3e73ecb6bffedccc8176e8204b825b1", "filename": "src/test/pretty/doc-comments.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fdoc-comments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fdoc-comments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fdoc-comments.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n \n // some single-line non-doc comment"}, {"sha": "74445c9432d614a09b333cf618f04ee45354e609", "filename": "src/test/pretty/empty-impl.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fempty-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fempty-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fempty-impl.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n trait X { fn dummy(&self) { } }\n impl X for usize { }\n "}, {"sha": "cc5f5a83a467a04ea20badf470b33543975bbc24", "filename": "src/test/pretty/empty-lines.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fempty-lines.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fempty-lines.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fempty-lines.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // Issue #759\n // Whitespace under block opening should not expand forever\n "}, {"sha": "af76c1d9406643ddbf26d58276bd996502e0aee9", "filename": "src/test/pretty/for-comment.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Ffor-comment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Ffor-comment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Ffor-comment.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n \n fn f(v: &[isize]) -> isize {"}, {"sha": "311835eba1b962a4e732b1be6f1a1bab825cd407", "filename": "src/test/pretty/import-renames.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fimport-renames.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Fimport-renames.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fimport-renames.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // pp-exact\n \n use std::io::{self, Error as IoError};"}, {"sha": "133c567a74aa2205130c8e45685a282e30196ba8", "filename": "src/test/pretty/unary-op-disambig.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Funary-op-disambig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0ea2b66f366bd2a4f9442c92552762a355a04c4/src%2Ftest%2Fpretty%2Funary-op-disambig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Funary-op-disambig.rs?ref=f0ea2b66f366bd2a4f9442c92552762a355a04c4", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// compile-flags: --crate-type=lib\n+\n // Preserve semicolons that disambiguate unops\n \n fn f() { }"}]}