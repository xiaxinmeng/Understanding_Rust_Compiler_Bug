{"sha": "d6c7a797fc90847399e5c62122278abbd4af6552", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2YzdhNzk3ZmM5MDg0NzM5OWU1YzYyMTIyMjc4YWJiZDRhZjY1NTI=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-01-21T11:04:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-21T11:04:56Z"}, "message": "Rollup merge of #81219 - joshtriplett:temp_dir-docs, r=sfackler\n\nDocument security implications of std::env::temp_dir\n\nUpdate the sample code to not create an insecure temporary file.", "tree": {"sha": "3f1913705d5da6e3374231bd3838527b936e8968", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f1913705d5da6e3374231bd3838527b936e8968"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d6c7a797fc90847399e5c62122278abbd4af6552", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgCV/ZCRBK7hj4Ov3rIwAAdHIIAC4VZ9l+mOxYkXYOOtB4zTQc\nT2wj4hTWtLnteDfKabGmFLynybXTy3U5LndJP7ijdPDffnTH7E8S/3bP+SBkl8DP\nn77vZodc5mmWjiB8+LxbDjkMTWmDMMreT0DJSAwVlbS2myeDiguLniau3m1QsqWO\nDa/MOm6/RMPJ7DxGkdRspscCRcYXXkkTl2seEeh5X9ocy01S6O149otPih1zhL3k\n0RLuciGEEnKI/Pbf/Mi0aT5IBFd5znAg2Cqr+HhoSjnW7phbLhDBBERHc21I4D3x\njc69oAdtPDrY5JEOYogwsfPBaglhkdmE+S+Yr/8B73nWRvWKno+0ofOFQnJjJWE=\n=Lpdr\n-----END PGP SIGNATURE-----\n", "payload": "tree 3f1913705d5da6e3374231bd3838527b936e8968\nparent 2ebc0362205376c1dbea58a6e9a82fec0668d5b1\nparent 27f376451958d51c1b0b8c8820fb2a85ef7ba4ce\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1611227096 +0900\ncommitter GitHub <noreply@github.com> 1611227096 +0900\n\nRollup merge of #81219 - joshtriplett:temp_dir-docs, r=sfackler\n\nDocument security implications of std::env::temp_dir\n\nUpdate the sample code to not create an insecure temporary file.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d6c7a797fc90847399e5c62122278abbd4af6552", "html_url": "https://github.com/rust-lang/rust/commit/d6c7a797fc90847399e5c62122278abbd4af6552", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d6c7a797fc90847399e5c62122278abbd4af6552/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ebc0362205376c1dbea58a6e9a82fec0668d5b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ebc0362205376c1dbea58a6e9a82fec0668d5b1", "html_url": "https://github.com/rust-lang/rust/commit/2ebc0362205376c1dbea58a6e9a82fec0668d5b1"}, {"sha": "27f376451958d51c1b0b8c8820fb2a85ef7ba4ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/27f376451958d51c1b0b8c8820fb2a85ef7ba4ce", "html_url": "https://github.com/rust-lang/rust/commit/27f376451958d51c1b0b8c8820fb2a85ef7ba4ce"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "9763a2da341510aa3a00701fd6a6cf847ed3fc56", "filename": "library/std/src/env.rs", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/d6c7a797fc90847399e5c62122278abbd4af6552/library%2Fstd%2Fsrc%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d6c7a797fc90847399e5c62122278abbd4af6552/library%2Fstd%2Fsrc%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fenv.rs?ref=d6c7a797fc90847399e5c62122278abbd4af6552", "patch": "@@ -561,6 +561,13 @@ pub fn home_dir() -> Option<PathBuf> {\n \n /// Returns the path of a temporary directory.\n ///\n+/// The temporary directory may be shared among users, or between processes\n+/// with different privileges; thus, the creation of any files or directories\n+/// in the temporary directory must use a secure method to create a uniquely\n+/// named file. Creating a file or directory with a fixed or predictable name\n+/// may result in \"insecure temporary file\" security vulnerabilities. Consider\n+/// using a crate that securely creates temporary files or directories.\n+///\n /// # Unix\n ///\n /// Returns the value of the `TMPDIR` environment variable if it is\n@@ -580,14 +587,10 @@ pub fn home_dir() -> Option<PathBuf> {\n ///\n /// ```no_run\n /// use std::env;\n-/// use std::fs::File;\n ///\n-/// fn main() -> std::io::Result<()> {\n+/// fn main() {\n ///     let mut dir = env::temp_dir();\n-///     dir.push(\"foo.txt\");\n-///\n-///     let f = File::create(dir)?;\n-///     Ok(())\n+///     println!(\"Temporary directory: {}\", dir.display());\n /// }\n /// ```\n #[stable(feature = \"env\", since = \"1.0.0\")]"}]}