{"sha": "3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhODU5ZTU4N2YzYmNmOWY0OTI5M2JkMWYyYjJkMTljZGZkMmJlNGI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-01-17T10:47:07Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-01-17T10:47:07Z"}, "message": "Nest attrs into exprs in function args", "tree": {"sha": "36e66272f2da663034059df83f299e20c84d27de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36e66272f2da663034059df83f299e20c84d27de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "html_url": "https://github.com/rust-lang/rust/commit/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b7c45fba57224a013fbc926abd2e8e9f8f3c77d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7c45fba57224a013fbc926abd2e8e9f8f3c77d4", "html_url": "https://github.com/rust-lang/rust/commit/b7c45fba57224a013fbc926abd2e8e9f8f3c77d4"}], "stats": {"total": 55, "additions": 23, "deletions": 32}, "files": [{"sha": "06c92645e06ef0638d5af244f7e771d4e01d4012", "filename": "crates/ra_parser/src/grammar/expressions.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs?ref=3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "patch": "@@ -564,12 +564,9 @@ fn arg_list(p: &mut Parser) {\n         // fn main() {\n         //     foo(#[attr] 92)\n         // }\n-        attributes::outer_attributes(p);\n-        if !p.at_ts(EXPR_FIRST) {\n-            p.error(\"expected expression\");\n+        if !expr_with_attrs(p) {\n             break;\n         }\n-        expr(p);\n         if !p.at(T![')']) && !p.expect(T![,]) {\n             break;\n         }"}, {"sha": "cb45eb2fc2028aadd036330717eccf3f65f8da73", "filename": "crates/ra_syntax/test_data/parser/err/0022_bad_exprs.txt", "status": "modified", "additions": 12, "deletions": 18, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0022_bad_exprs.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0022_bad_exprs.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0022_bad_exprs.txt?ref=3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "patch": "@@ -54,14 +54,14 @@ SOURCE_FILE@[0; 112)\n       BLOCK@[41; 68)\n         L_CURLY@[41; 42) \"{\"\n         WHITESPACE@[42; 43) \" \"\n-        EXPR_STMT@[43; 52)\n-          CALL_EXPR@[43; 52)\n+        EXPR_STMT@[43; 54)\n+          CALL_EXPR@[43; 54)\n             PATH_EXPR@[43; 46)\n               PATH@[43; 46)\n                 PATH_SEGMENT@[43; 46)\n                   NAME_REF@[43; 46)\n                     IDENT@[43; 46) \"foo\"\n-            ARG_LIST@[46; 52)\n+            ARG_LIST@[46; 54)\n               L_PAREN@[46; 47) \"(\"\n               LITERAL@[47; 48)\n                 INT_NUMBER@[47; 48) \"1\"\n@@ -70,10 +70,9 @@ SOURCE_FILE@[0; 112)\n               LITERAL@[50; 51)\n                 INT_NUMBER@[50; 51) \"2\"\n               COMMA@[51; 52) \",\"\n-        WHITESPACE@[52; 53) \" \"\n-        EXPR_STMT@[53; 54)\n-          ERROR@[53; 54)\n-            AT@[53; 54) \"@\"\n+              WHITESPACE@[52; 53) \" \"\n+              ERROR@[53; 54)\n+                AT@[53; 54) \"@\"\n         EXPR_STMT@[54; 55)\n           ERROR@[54; 55)\n             COMMA@[54; 55) \",\"\n@@ -104,8 +103,8 @@ SOURCE_FILE@[0; 112)\n       BLOCK@[76; 111)\n         L_CURLY@[76; 77) \"{\"\n         WHITESPACE@[77; 78) \" \"\n-        EXPR_STMT@[78; 91)\n-          METHOD_CALL_EXPR@[78; 91)\n+        EXPR_STMT@[78; 93)\n+          METHOD_CALL_EXPR@[78; 93)\n             PATH_EXPR@[78; 81)\n               PATH@[78; 81)\n                 PATH_SEGMENT@[78; 81)\n@@ -114,7 +113,7 @@ SOURCE_FILE@[0; 112)\n             DOT@[81; 82) \".\"\n             NAME_REF@[82; 85)\n               IDENT@[82; 85) \"bar\"\n-            ARG_LIST@[85; 91)\n+            ARG_LIST@[85; 93)\n               L_PAREN@[85; 86) \"(\"\n               LITERAL@[86; 87)\n                 INT_NUMBER@[86; 87) \"1\"\n@@ -123,10 +122,9 @@ SOURCE_FILE@[0; 112)\n               LITERAL@[89; 90)\n                 INT_NUMBER@[89; 90) \"2\"\n               COMMA@[90; 91) \",\"\n-        WHITESPACE@[91; 92) \" \"\n-        EXPR_STMT@[92; 93)\n-          ERROR@[92; 93)\n-            AT@[92; 93) \"@\"\n+              WHITESPACE@[91; 92) \" \"\n+              ERROR@[92; 93)\n+                AT@[92; 93) \"@\"\n         EXPR_STMT@[93; 94)\n           ERROR@[93; 94)\n             COMMA@[93; 94) \",\"\n@@ -159,8 +157,6 @@ error 25: expected a name\n error 26: expected `;`, `{`, or `(`\n error 30: expected pattern\n error 31: expected SEMI\n-error 52: expected expression\n-error 52: expected SEMI\n error 53: expected expression\n error 54: expected SEMI\n error 54: expected expression\n@@ -172,8 +168,6 @@ error 61: expected SEMI\n error 65: expected pattern\n error 65: expected SEMI\n error 65: expected expression\n-error 91: expected expression\n-error 91: expected SEMI\n error 92: expected expression\n error 93: expected SEMI\n error 93: expected expression"}, {"sha": "8092d700991a27a46009ff7bc33e84c1ce30bcae", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0152_arg_with_attr.txt", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_with_attr.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_with_attr.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0152_arg_with_attr.txt?ref=3a859e587f3bcf9f49293bd1f2b2d19cdfd2be4b", "patch": "@@ -20,16 +20,16 @@ SOURCE_FILE@[0; 34)\n                   IDENT@[16; 19) \"foo\"\n           ARG_LIST@[19; 31)\n             L_PAREN@[19; 20) \"(\"\n-            ATTR@[20; 27)\n-              POUND@[20; 21) \"#\"\n-              L_BRACK@[21; 22) \"[\"\n-              PATH@[22; 26)\n-                PATH_SEGMENT@[22; 26)\n-                  NAME_REF@[22; 26)\n-                    IDENT@[22; 26) \"attr\"\n-              R_BRACK@[26; 27) \"]\"\n-            WHITESPACE@[27; 28) \" \"\n-            LITERAL@[28; 30)\n+            LITERAL@[20; 30)\n+              ATTR@[20; 27)\n+                POUND@[20; 21) \"#\"\n+                L_BRACK@[21; 22) \"[\"\n+                PATH@[22; 26)\n+                  PATH_SEGMENT@[22; 26)\n+                    NAME_REF@[22; 26)\n+                      IDENT@[22; 26) \"attr\"\n+                R_BRACK@[26; 27) \"]\"\n+              WHITESPACE@[27; 28) \" \"\n               INT_NUMBER@[28; 30) \"92\"\n             R_PAREN@[30; 31) \")\"\n         WHITESPACE@[31; 32) \"\\n\""}]}