{"sha": "7bd6a92a5a73be334f09791bbc3c83468b10410c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdiZDZhOTJhNWE3M2JlMzM0ZjA5NzkxYmJjM2M4MzQ2OGIxMDQxMGM=", "commit": {"author": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2013-07-28T08:25:33Z"}, "committer": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2013-07-28T08:52:13Z"}, "message": "librust: Stop rust tool from crashing on macos.", "tree": {"sha": "ae40775ed4defe34c2725ed9905f842804572286", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae40775ed4defe34c2725ed9905f842804572286"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7bd6a92a5a73be334f09791bbc3c83468b10410c", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7bd6a92a5a73be334f09791bbc3c83468b10410c", "html_url": "https://github.com/rust-lang/rust/commit/7bd6a92a5a73be334f09791bbc3c83468b10410c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7bd6a92a5a73be334f09791bbc3c83468b10410c/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9325535b41fa5a7cfac697e86ae86bd1384542e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/9325535b41fa5a7cfac697e86ae86bd1384542e6", "html_url": "https://github.com/rust-lang/rust/commit/9325535b41fa5a7cfac697e86ae86bd1384542e6"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "746b75292315aecc52766e843ad45371eccc98cc", "filename": "src/librust/rust.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7bd6a92a5a73be334f09791bbc3c83468b10410c/src%2Flibrust%2Frust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7bd6a92a5a73be334f09791bbc3c83468b10410c/src%2Flibrust%2Frust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrust%2Frust.rs?ref=7bd6a92a5a73be334f09791bbc3c83468b10410c", "patch": "@@ -60,7 +60,13 @@ struct Command<'self> {\n     usage_full: UsageSource<'self>,\n }\n \n-static COMMANDS: &'static [Command<'static>] = &[\n+static NUM_OF_COMMANDS: uint = 7;\n+\n+// FIXME(#7617): should just be &'static [Command<'static>]\n+// but mac os doesn't seem to like that and tries to loop\n+// past the end of COMMANDS in usage thus passing garbage\n+// to str::repeat and eventually malloc and crashing.\n+static COMMANDS: [Command<'static>, .. NUM_OF_COMMANDS] = [\n     Command{\n         cmd: \"build\",\n         action: CallMain(\"rustc\", rustc::main),"}]}