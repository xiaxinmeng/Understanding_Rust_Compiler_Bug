{"sha": "6c20d7e979b967eb20207414c0a0bf875bbcb98d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjMjBkN2U5NzliOTY3ZWIyMDIwNzQxNGMwYTBiZjg3NWJiY2I5OGQ=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2020-03-16T17:46:08Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2020-03-16T17:46:08Z"}, "message": "Small fixes", "tree": {"sha": "55d4c8053534fddf5575b6a1480a964593f1f548", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55d4c8053534fddf5575b6a1480a964593f1f548"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c20d7e979b967eb20207414c0a0bf875bbcb98d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c20d7e979b967eb20207414c0a0bf875bbcb98d", "html_url": "https://github.com/rust-lang/rust/commit/6c20d7e979b967eb20207414c0a0bf875bbcb98d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c20d7e979b967eb20207414c0a0bf875bbcb98d/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "32dce75747271236be0ca8762b338c317bd48204", "url": "https://api.github.com/repos/rust-lang/rust/commits/32dce75747271236be0ca8762b338c317bd48204", "html_url": "https://github.com/rust-lang/rust/commit/32dce75747271236be0ca8762b338c317bd48204"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "b1eacf1242c811470b6b4b937c05e754fe0a9d47", "filename": "crates/ra_mbe/src/mbe_expander.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6c20d7e979b967eb20207414c0a0bf875bbcb98d/crates%2Fra_mbe%2Fsrc%2Fmbe_expander.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6c20d7e979b967eb20207414c0a0bf875bbcb98d/crates%2Fra_mbe%2Fsrc%2Fmbe_expander.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_mbe%2Fsrc%2Fmbe_expander.rs?ref=6c20d7e979b967eb20207414c0a0bf875bbcb98d", "patch": "@@ -34,8 +34,7 @@ fn expand_rules(rules: &[crate::Rule], input: &tt::Subtree) -> ExpandResult<tt::\n                 return ExpandResult::ok(res);\n             }\n         }\n-        // Use the rule if we matched more tokens, or had fewer patterns left,\n-        // or had no error\n+        // Use the rule if we matched more tokens, or had fewer errors\n         if let Some((prev_match, _)) = &match_ {\n             if (new_match.unmatched_tts, new_match.err_count)\n                 < (prev_match.unmatched_tts, prev_match.err_count)\n@@ -176,7 +175,6 @@ mod tests {\n         let (invocation_tt, _) =\n             ast_to_token_tree(&macro_invocation.token_tree().unwrap()).unwrap();\n \n-        let expanded = expand_rules(&rules.rules, &invocation_tt);\n-        expanded\n+        expand_rules(&rules.rules, &invocation_tt)\n     }\n }"}]}