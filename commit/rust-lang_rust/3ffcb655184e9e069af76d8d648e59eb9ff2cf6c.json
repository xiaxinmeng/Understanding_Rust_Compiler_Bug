{"sha": "3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "node_id": "C_kwDOAAsO6NoAKDNmZmNiNjU1MTg0ZTllMDY5YWY3NmQ4ZDY0OGU1OWViOWZmMmNmNmM", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2022-08-26T16:52:08Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2022-09-27T11:31:50Z"}, "message": "Update tests.", "tree": {"sha": "a28a8755459d627caddc0027dec0b990bb6007d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a28a8755459d627caddc0027dec0b990bb6007d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "html_url": "https://github.com/rust-lang/rust/commit/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9bec0de3977e589fb92fc85ce9bc8fa99c3691f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/9bec0de3977e589fb92fc85ce9bc8fa99c3691f6", "html_url": "https://github.com/rust-lang/rust/commit/9bec0de3977e589fb92fc85ce9bc8fa99c3691f6"}], "stats": {"total": 405, "additions": 190, "deletions": 215}, "files": [{"sha": "21a402c7b9da818dc088be00c343beca82dad373", "filename": "src/test/ui-fulldeps/session-diagnostic/diagnostic-derive.stderr", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui-fulldeps%2Fsession-diagnostic%2Fdiagnostic-derive.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui-fulldeps%2Fsession-diagnostic%2Fdiagnostic-derive.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fsession-diagnostic%2Fdiagnostic-derive.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -237,21 +237,19 @@ LL |     #[suggestion(typeck::suggestion, code = \"{name}\")]\n    |                                             ^^^^^^^^\n \n error: invalid format string: expected `'}'` but string was terminated\n-  --> $DIR/diagnostic-derive.rs:175:16\n+  --> $DIR/diagnostic-derive.rs:175:10\n    |\n LL | #[derive(Diagnostic)]\n-   |           -    ^ expected `'}'` in format string\n-   |           |\n-   |           because of this opening brace\n+   |          ^^^^^^^^^^ expected `'}'` in format string\n    |\n    = note: if you intended to print `{`, you can escape it using `{{`\n    = note: this error originates in the derive macro `Diagnostic` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: invalid format string: unmatched `}` found\n-  --> $DIR/diagnostic-derive.rs:185:15\n+  --> $DIR/diagnostic-derive.rs:185:10\n    |\n LL | #[derive(Diagnostic)]\n-   |               ^ unmatched `}` in format string\n+   |          ^^^^^^^^^^ unmatched `}` in format string\n    |\n    = note: if you intended to print `}`, you can escape it using `}}`\n    = note: this error originates in the derive macro `Diagnostic` (in Nightly builds, run with -Z macro-backtrace for more info)"}, {"sha": "9d722a0287a5cf4202ad37149668f96a19c3924d", "filename": "src/test/ui/fmt/format-args-capture-issue-93378.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.rs?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -3,9 +3,9 @@ fn main() {\n     let b = \"b\";\n \n     println!(\"{a} {b} {} {} {c} {}\", c = \"c\");\n-    //~^ ERROR: invalid reference to positional arguments 1 and 2 (there is 1 argument)\n+    //~^ ERROR: 3 positional arguments in format string, but there is 1 argument\n \n     let n = 1;\n     println!(\"{a:.n$} {b:.*}\");\n-    //~^ ERROR: invalid reference to positional argument 0 (no arguments were given)\n+    //~^ ERROR: 1 positional argument in format string, but no arguments were given\n }"}, {"sha": "6429b0d46f6afa4e3ab2f66364bdeb580e2f8101", "filename": "src/test/ui/fmt/format-args-capture-issue-93378.stderr", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fformat-args-capture-issue-93378.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -1,19 +1,14 @@\n-error: invalid reference to positional arguments 1 and 2 (there is 1 argument)\n-  --> $DIR/format-args-capture-issue-93378.rs:5:26\n+error: 3 positional arguments in format string, but there is 1 argument\n+  --> $DIR/format-args-capture-issue-93378.rs:5:23\n    |\n LL |     println!(\"{a} {b} {} {} {c} {}\", c = \"c\");\n-   |                          ^^     ^^\n-   |\n-   = note: positional arguments are zero-based\n+   |                       ^^ ^^     ^^       ---\n \n-error: invalid reference to positional argument 0 (no arguments were given)\n-  --> $DIR/format-args-capture-issue-93378.rs:9:23\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/format-args-capture-issue-93378.rs:9:26\n    |\n LL |     println!(\"{a:.n$} {b:.*}\");\n-   |                   -   ^^^--^\n-   |                   |      |\n-   |                   |      this precision flag adds an extra required argument at position 0, which is why there are 3 arguments expected\n-   |                   this parameter corresponds to the precision flag\n+   |                          ^^ this precision flag adds an extra required argument at position 0, which is why there is 1 argument expected\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html"}, {"sha": "1bd9668de314e0199e461c9774d418089ad47b54", "filename": "src/test/ui/fmt/ifmt-bad-arg.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.rs?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -20,9 +20,9 @@ fn main() {\n     //~^ ERROR: invalid reference to positional argument 2 (there are 2 arguments)\n \n     format!(\"{} {value} {} {}\", 1, value=2);\n-    //~^ ERROR: invalid reference to positional argument 2 (there are 2 arguments)\n+    //~^ ERROR: 3 positional arguments in format string, but there are 2 arguments\n     format!(\"{name} {value} {} {} {} {} {} {}\", 0, name=1, value=2);\n-    //~^ ERROR: invalid reference to positional arguments 3, 4 and 5 (there are 3 arguments)\n+    //~^ ERROR: 6 positional arguments in format string, but there are 3 arguments\n \n     format!(\"{} {foo} {} {bar} {}\", 1, 2, 3);\n     //~^ ERROR: cannot find value `foo` in this scope\n@@ -79,7 +79,7 @@ tenth number: {}\",\n     //~^ ERROR 4 positional arguments in format string, but there are 3 arguments\n     //~| ERROR mismatched types\n     println!(\"{} {:07$.*} {}\", 1, 3.2, 4);\n-    //~^ ERROR 4 positional arguments in format string, but there are 3 arguments\n+    //~^ ERROR invalid reference to positional arguments 3 and 7 (there are 3 arguments)\n     //~| ERROR mismatched types\n     println!(\"{} {:07$} {}\", 1, 3.2, 4);\n     //~^ ERROR invalid reference to positional argument 7 (there are 3 arguments)"}, {"sha": "a71792d1ec91214dfb18322590a5607206bcf4bc", "filename": "src/test/ui/fmt/ifmt-bad-arg.stderr", "status": "modified", "additions": 30, "deletions": 46, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffmt%2Fifmt-bad-arg.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -5,10 +5,10 @@ LL |     format!(\"{}\");\n    |              ^^\n \n error: invalid reference to positional argument 1 (there is 1 argument)\n-  --> $DIR/ifmt-bad-arg.rs:9:14\n+  --> $DIR/ifmt-bad-arg.rs:9:15\n    |\n LL |     format!(\"{1}\", 1);\n-   |              ^^^\n+   |               ^\n    |\n    = note: positional arguments are zero-based\n \n@@ -27,36 +27,32 @@ LL |     format!(\"{} {}\");\n    |              ^^ ^^\n \n error: invalid reference to positional argument 1 (there is 1 argument)\n-  --> $DIR/ifmt-bad-arg.rs:16:18\n+  --> $DIR/ifmt-bad-arg.rs:16:19\n    |\n LL |     format!(\"{0} {1}\", 1);\n-   |                  ^^^\n+   |                   ^\n    |\n    = note: positional arguments are zero-based\n \n error: invalid reference to positional argument 2 (there are 2 arguments)\n-  --> $DIR/ifmt-bad-arg.rs:19:22\n+  --> $DIR/ifmt-bad-arg.rs:19:23\n    |\n LL |     format!(\"{0} {1} {2}\", 1, 2);\n-   |                      ^^^\n+   |                       ^\n    |\n    = note: positional arguments are zero-based\n \n-error: invalid reference to positional argument 2 (there are 2 arguments)\n-  --> $DIR/ifmt-bad-arg.rs:22:28\n+error: 3 positional arguments in format string, but there are 2 arguments\n+  --> $DIR/ifmt-bad-arg.rs:22:14\n    |\n LL |     format!(\"{} {value} {} {}\", 1, value=2);\n-   |                            ^^\n-   |\n-   = note: positional arguments are zero-based\n+   |              ^^         ^^ ^^   -        -\n \n-error: invalid reference to positional arguments 3, 4 and 5 (there are 3 arguments)\n-  --> $DIR/ifmt-bad-arg.rs:24:38\n+error: 6 positional arguments in format string, but there are 3 arguments\n+  --> $DIR/ifmt-bad-arg.rs:24:29\n    |\n LL |     format!(\"{name} {value} {} {} {} {} {} {}\", 0, name=1, value=2);\n-   |                                      ^^ ^^ ^^\n-   |\n-   = note: positional arguments are zero-based\n+   |                             ^^ ^^ ^^ ^^ ^^ ^^   -       -        -\n \n error: multiple unused formatting arguments\n   --> $DIR/ifmt-bad-arg.rs:32:17\n@@ -191,33 +187,26 @@ error: 4 positional arguments in format string, but there are 3 arguments\n    |\n LL |     println!(\"{} {:.*} {}\", 1, 3.2, 4);\n    |               ^^ ^^--^ ^^   -  ---  -\n-   |                    |           |\n-   |                    |           this parameter corresponds to the precision flag\n+   |                    |\n    |                    this precision flag adds an extra required argument at position 1, which is why there are 4 arguments expected\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html\n \n-error: 4 positional arguments in format string, but there are 3 arguments\n-  --> $DIR/ifmt-bad-arg.rs:81:15\n+error: invalid reference to positional arguments 3 and 7 (there are 3 arguments)\n+  --> $DIR/ifmt-bad-arg.rs:81:21\n    |\n LL |     println!(\"{} {:07$.*} {}\", 1, 3.2, 4);\n-   |               ^^ ^^^----^ ^^   -  ---  -\n-   |                     | |           |\n-   |                     | |           this parameter corresponds to the precision flag\n-   |                     | this precision flag adds an extra required argument at position 1, which is why there are 4 arguments expected\n-   |                     this width flag expects an `usize` argument at position 7, but there are 3 arguments\n+   |                     ^^     ^\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html\n \n error: invalid reference to positional argument 7 (there are 3 arguments)\n-  --> $DIR/ifmt-bad-arg.rs:84:18\n+  --> $DIR/ifmt-bad-arg.rs:84:21\n    |\n LL |     println!(\"{} {:07$} {}\", 1, 3.2, 4);\n-   |                  ^^^--^\n-   |                     |\n-   |                     this width flag expects an `usize` argument at position 7, but there are 3 arguments\n+   |                     ^^\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html\n@@ -240,24 +229,19 @@ LL |     println!(\"{:foo}\", 1);\n            - `X`, which uses the `UpperHex` trait\n \n error: invalid reference to positional arguments 4, 5, 6 and 7 (there is 1 argument)\n-  --> $DIR/ifmt-bad-arg.rs:87:15\n+  --> $DIR/ifmt-bad-arg.rs:87:16\n    |\n LL |     println!(\"{5} {:4$} {6:7$}\", 1);\n-   |               ^^^ ^^--^ ^^^--^\n-   |                     |      |\n-   |                     |      this width flag expects an `usize` argument at position 7, but there is 1 argument\n-   |                     this width flag expects an `usize` argument at position 4, but there is 1 argument\n+   |                ^    ^^   ^ ^^\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html\n \n error: invalid reference to positional argument 0 (no arguments were given)\n-  --> $DIR/ifmt-bad-arg.rs:90:15\n+  --> $DIR/ifmt-bad-arg.rs:90:20\n    |\n LL |     println!(\"{foo:0$}\");\n-   |               ^^^^^--^\n-   |                    |\n-   |                    this width flag expects an `usize` argument at position 0, but no arguments were given\n+   |                    ^^\n    |\n    = note: positional arguments are zero-based\n    = note: for information about formatting flags, visit https://doc.rust-lang.org/std/fmt/index.html\n@@ -318,10 +302,10 @@ error[E0308]: mismatched types\n   --> $DIR/ifmt-bad-arg.rs:78:32\n    |\n LL |     println!(\"{} {:.*} {}\", 1, 3.2, 4);\n-   |     ---------------------------^^^----\n-   |     |                          |\n-   |     |                          expected `usize`, found floating-point number\n-   |     arguments to this function are incorrect\n+   |                                ^^^\n+   |                                |\n+   |                                expected `usize`, found floating-point number\n+   |                                arguments to this function are incorrect\n    |\n    = note: expected reference `&usize`\n               found reference `&{float}`\n@@ -336,10 +320,10 @@ error[E0308]: mismatched types\n   --> $DIR/ifmt-bad-arg.rs:81:35\n    |\n LL |     println!(\"{} {:07$.*} {}\", 1, 3.2, 4);\n-   |     ------------------------------^^^----\n-   |     |                             |\n-   |     |                             expected `usize`, found floating-point number\n-   |     arguments to this function are incorrect\n+   |                                   ^^^\n+   |                                   |\n+   |                                   expected `usize`, found floating-point number\n+   |                                   arguments to this function are incorrect\n    |\n    = note: expected reference `&usize`\n               found reference `&{float}`"}, {"sha": "cffa6bea8ed38d825faac06e0513b0fe2b09c50f", "filename": "src/test/ui/issues/issue-75307.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fissues%2Fissue-75307.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fissues%2Fissue-75307.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-75307.rs?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -1,3 +1,3 @@\n fn main() {\n-    format!(r\"{}{}{}\", named_arg=1); //~ ERROR invalid reference to positional arguments 1 and 2\n+    format!(r\"{}{}{}\", named_arg=1); //~ ERROR 3 positional arguments in format string, but there is 1 argument\n }"}, {"sha": "c5b0b11e7d0998cfe891fa3c23bc77a7309ff1f2", "filename": "src/test/ui/issues/issue-75307.stderr", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fissues%2Fissue-75307.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fissues%2Fissue-75307.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-75307.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -1,10 +1,8 @@\n-error: invalid reference to positional arguments 1 and 2 (there is 1 argument)\n-  --> $DIR/issue-75307.rs:2:17\n+error: 3 positional arguments in format string, but there is 1 argument\n+  --> $DIR/issue-75307.rs:2:15\n    |\n LL |     format!(r\"{}{}{}\", named_arg=1);\n-   |                 ^^^^\n-   |\n-   = note: positional arguments are zero-based\n+   |               ^^^^^^             -\n \n error: aborting due to previous error\n "}, {"sha": "9185dbff61ee0beda0f7d50efcdc93bd47a061e4", "filename": "src/test/ui/macros/issue-99265.stderr", "status": "modified", "additions": 139, "deletions": 139, "changes": 278, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99265.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -77,18 +77,18 @@ help: use the named argument by name to avoid ambiguity\n LL |     println!(\"Hello {:width$}!\", \"x\", width = 5);\n    |                       ~~~~~~\n \n-warning: named argument `width` is not used by name\n-  --> $DIR/issue-99265.rs:23:46\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99265.rs:23:33\n    |\n LL |     println!(\"Hello {:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                       --                     ^^^^^ this named argument is referred to by position in formatting string\n-   |                       |\n-   |                       this formatting argument uses named argument `width` by position\n+   |                     --------    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"Hello {:width$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                       ~~~~~~\n+LL |     println!(\"Hello {f:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n+   |                      +\n \n warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:23:57\n@@ -103,31 +103,31 @@ help: use the named argument by name to avoid ambiguity\n LL |     println!(\"Hello {:1$.precision$}!\", f = 0.02f32, width = 5, precision = 2);\n    |                          ~~~~~~~~~~\n \n-warning: named argument `f` is not used by name\n-  --> $DIR/issue-99265.rs:23:33\n+warning: named argument `width` is not used by name\n+  --> $DIR/issue-99265.rs:23:46\n    |\n LL |     println!(\"Hello {:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                     --          ^ this named argument is referred to by position in formatting string\n-   |                     |\n-   |                     this formatting argument uses named argument `f` by position\n+   |                       --                     ^^^^^ this named argument is referred to by position in formatting string\n+   |                       |\n+   |                       this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"Hello {f:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                      +\n+LL |     println!(\"Hello {:width$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n+   |                       ~~~~~~\n \n-warning: named argument `width` is not used by name\n-  --> $DIR/issue-99265.rs:31:47\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99265.rs:31:34\n    |\n LL |     println!(\"Hello {0:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                        --                     ^^^^^ this named argument is referred to by position in formatting string\n-   |                        |\n-   |                        this formatting argument uses named argument `width` by position\n+   |                     ---------    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"Hello {0:width$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                        ~~~~~~\n+LL |     println!(\"Hello {f:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n+   |                      ~\n \n warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:31:58\n@@ -142,32 +142,32 @@ help: use the named argument by name to avoid ambiguity\n LL |     println!(\"Hello {0:1$.precision$}!\", f = 0.02f32, width = 5, precision = 2);\n    |                           ~~~~~~~~~~\n \n-warning: named argument `f` is not used by name\n-  --> $DIR/issue-99265.rs:31:34\n+warning: named argument `width` is not used by name\n+  --> $DIR/issue-99265.rs:31:47\n    |\n LL |     println!(\"Hello {0:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                      -           ^ this named argument is referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `f` by position\n+   |                        --                     ^^^^^ this named argument is referred to by position in formatting string\n+   |                        |\n+   |                        this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"Hello {f:1$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n-   |                      ~\n+LL |     println!(\"Hello {0:width$.2$}!\", f = 0.02f32, width = 5, precision = 2);\n+   |                        ~~~~~~\n \n-warning: named argument `width` is not used by name\n-  --> $DIR/issue-99265.rs:52:9\n+warning: named argument `f` is not used by name\n+  --> $DIR/issue-99265.rs:49:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                       -- this formatting argument uses named argument `width` by position\n+   |                    --------- this formatting argument uses named argument `f` by position\n ...\n-LL |         width = 5,\n-   |         ^^^^^ this named argument is referred to by position in formatting string\n+LL |         f = 0.02f32,\n+   |         ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |         \"{}, Hello {1:width$.3$} {4:5$.6$}! {1}\",\n-   |                       ~~~~~~\n+LL |         \"{}, Hello {f:2$.3$} {4:5$.6$}! {1}\",\n+   |                     ~\n \n warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:54:9\n@@ -183,33 +183,33 @@ help: use the named argument by name to avoid ambiguity\n LL |         \"{}, Hello {1:2$.precision$} {4:5$.6$}! {1}\",\n    |                          ~~~~~~~~~~\n \n-warning: named argument `f` is not used by name\n-  --> $DIR/issue-99265.rs:49:9\n+warning: named argument `width` is not used by name\n+  --> $DIR/issue-99265.rs:52:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                     - this formatting argument uses named argument `f` by position\n+   |                       -- this formatting argument uses named argument `width` by position\n ...\n-LL |         f = 0.02f32,\n-   |         ^ this named argument is referred to by position in formatting string\n+LL |         width = 5,\n+   |         ^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |         \"{}, Hello {f:2$.3$} {4:5$.6$}! {1}\",\n-   |                     ~\n+LL |         \"{}, Hello {1:width$.3$} {4:5$.6$}! {1}\",\n+   |                       ~~~~~~\n \n-warning: named argument `width2` is not used by name\n-  --> $DIR/issue-99265.rs:58:9\n+warning: named argument `g` is not used by name\n+  --> $DIR/issue-99265.rs:56:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                                 -- this formatting argument uses named argument `width2` by position\n+   |                              --------- this formatting argument uses named argument `g` by position\n ...\n-LL |         width2 = 5,\n-   |         ^^^^^^ this named argument is referred to by position in formatting string\n+LL |         g = 0.02f32,\n+   |         ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |         \"{}, Hello {1:2$.3$} {4:width2$.6$}! {1}\",\n-   |                                 ~~~~~~~\n+LL |         \"{}, Hello {1:2$.3$} {g:5$.6$}! {1}\",\n+   |                               ~\n \n warning: named argument `precision2` is not used by name\n   --> $DIR/issue-99265.rs:60:9\n@@ -225,25 +225,25 @@ help: use the named argument by name to avoid ambiguity\n LL |         \"{}, Hello {1:2$.3$} {4:5$.precision2$}! {1}\",\n    |                                    ~~~~~~~~~~~\n \n-warning: named argument `g` is not used by name\n-  --> $DIR/issue-99265.rs:56:9\n+warning: named argument `width2` is not used by name\n+  --> $DIR/issue-99265.rs:58:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                               - this formatting argument uses named argument `g` by position\n+   |                                 -- this formatting argument uses named argument `width2` by position\n ...\n-LL |         g = 0.02f32,\n-   |         ^ this named argument is referred to by position in formatting string\n+LL |         width2 = 5,\n+   |         ^^^^^^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |         \"{}, Hello {1:2$.3$} {g:5$.6$}! {1}\",\n-   |                               ~\n+LL |         \"{}, Hello {1:2$.3$} {4:width2$.6$}! {1}\",\n+   |                                 ~~~~~~~\n \n warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:49:9\n    |\n LL |         \"{}, Hello {1:2$.3$} {4:5$.6$}! {1}\",\n-   |                                          - this formatting argument uses named argument `f` by position\n+   |                                         --- this formatting argument uses named argument `f` by position\n ...\n LL |         f = 0.02f32,\n    |         ^ this named argument is referred to by position in formatting string\n@@ -257,7 +257,7 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:64:31\n    |\n LL |     println!(\"Hello {:0.1}!\", f = 0.02f32);\n-   |                     --        ^ this named argument is referred to by position in formatting string\n+   |                     ------    ^ this named argument is referred to by position in formatting string\n    |                     |\n    |                     this formatting argument uses named argument `f` by position\n    |\n@@ -270,15 +270,28 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99265.rs:68:32\n    |\n LL |     println!(\"Hello {0:0.1}!\", f = 0.02f32);\n-   |                      -         ^ this named argument is referred to by position in formatting string\n-   |                      |\n-   |                      this formatting argument uses named argument `f` by position\n+   |                     -------    ^ this named argument is referred to by position in formatting string\n+   |                     |\n+   |                     this formatting argument uses named argument `f` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n LL |     println!(\"Hello {f:0.1}!\", f = 0.02f32);\n    |                      ~\n \n+warning: named argument `v` is not used by name\n+  --> $DIR/issue-99265.rs:79:23\n+   |\n+LL |     println!(\"{:0$}\", v = val);\n+   |               -----   ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `v` by position\n+   |\n+help: use the named argument by name to avoid ambiguity\n+   |\n+LL |     println!(\"{v:0$}\", v = val);\n+   |                +\n+\n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:79:23\n    |\n@@ -293,17 +306,17 @@ LL |     println!(\"{:v$}\", v = val);\n    |                 ~~\n \n warning: named argument `v` is not used by name\n-  --> $DIR/issue-99265.rs:79:23\n+  --> $DIR/issue-99265.rs:84:24\n    |\n-LL |     println!(\"{:0$}\", v = val);\n-   |               --      ^ this named argument is referred to by position in formatting string\n+LL |     println!(\"{0:0$}\", v = val);\n+   |               ------   ^ this named argument is referred to by position in formatting string\n    |               |\n    |               this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n LL |     println!(\"{v:0$}\", v = val);\n-   |                +\n+   |                ~\n \n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:84:24\n@@ -318,31 +331,18 @@ help: use the named argument by name to avoid ambiguity\n LL |     println!(\"{0:v$}\", v = val);\n    |                  ~~\n \n-warning: named argument `v` is not used by name\n-  --> $DIR/issue-99265.rs:84:24\n-   |\n-LL |     println!(\"{0:0$}\", v = val);\n-   |                -       ^ this named argument is referred to by position in formatting string\n-   |                |\n-   |                this formatting argument uses named argument `v` by position\n-   |\n-help: use the named argument by name to avoid ambiguity\n-   |\n-LL |     println!(\"{v:0$}\", v = val);\n-   |                ~\n-\n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n    |\n LL |     println!(\"{:0$.0$}\", v = val);\n-   |                 --       ^ this named argument is referred to by position in formatting string\n-   |                 |\n-   |                 this formatting argument uses named argument `v` by position\n+   |               --------   ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{:v$.0$}\", v = val);\n-   |                 ~~\n+LL |     println!(\"{v:0$.0$}\", v = val);\n+   |                +\n \n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n@@ -361,27 +361,27 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:89:26\n    |\n LL |     println!(\"{:0$.0$}\", v = val);\n-   |               --         ^ this named argument is referred to by position in formatting string\n-   |               |\n-   |               this formatting argument uses named argument `v` by position\n+   |                 --       ^ this named argument is referred to by position in formatting string\n+   |                 |\n+   |                 this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{v:0$.0$}\", v = val);\n-   |                +\n+LL |     println!(\"{:v$.0$}\", v = val);\n+   |                 ~~\n \n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n    |\n LL |     println!(\"{0:0$.0$}\", v = val);\n-   |                  --       ^ this named argument is referred to by position in formatting string\n-   |                  |\n-   |                  this formatting argument uses named argument `v` by position\n+   |               ---------   ^ this named argument is referred to by position in formatting string\n+   |               |\n+   |               this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{0:v$.0$}\", v = val);\n-   |                  ~~\n+LL |     println!(\"{v:0$.0$}\", v = val);\n+   |                ~\n \n warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n@@ -400,14 +400,14 @@ warning: named argument `v` is not used by name\n   --> $DIR/issue-99265.rs:96:27\n    |\n LL |     println!(\"{0:0$.0$}\", v = val);\n-   |                -          ^ this named argument is referred to by position in formatting string\n-   |                |\n-   |                this formatting argument uses named argument `v` by position\n+   |                  --       ^ this named argument is referred to by position in formatting string\n+   |                  |\n+   |                  this formatting argument uses named argument `v` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{v:0$.0$}\", v = val);\n-   |                ~\n+LL |     println!(\"{0:v$.0$}\", v = val);\n+   |                  ~~\n \n warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:104:28\n@@ -426,28 +426,28 @@ warning: named argument `a` is not used by name\n   --> $DIR/issue-99265.rs:104:28\n    |\n LL |     println!(\"{} {a} {0}\", a = 1);\n-   |                       -    ^ this named argument is referred to by position in formatting string\n-   |                       |\n-   |                       this formatting argument uses named argument `a` by position\n+   |                      ---   ^ this named argument is referred to by position in formatting string\n+   |                      |\n+   |                      this formatting argument uses named argument `a` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n LL |     println!(\"{} {a} {a}\", a = 1);\n    |                       ~\n \n-warning: named argument `b` is not used by name\n-  --> $DIR/issue-99265.rs:115:23\n+warning: named argument `a` is not used by name\n+  --> $DIR/issue-99265.rs:115:14\n    |\n LL |                 {:1$.2$}\",\n-   |                   -- this formatting argument uses named argument `b` by position\n+   |                 -------- this formatting argument uses named argument `a` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                       ^ this named argument is referred to by position in formatting string\n+   |              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |                 {:b$.2$}\",\n-   |                   ~~\n+LL |                 {a:1$.2$}\",\n+   |                  +\n \n warning: named argument `c` is not used by name\n   --> $DIR/issue-99265.rs:115:30\n@@ -463,33 +463,33 @@ help: use the named argument by name to avoid ambiguity\n LL |                 {:1$.c$}\",\n    |                      ~~\n \n-warning: named argument `a` is not used by name\n-  --> $DIR/issue-99265.rs:115:14\n+warning: named argument `b` is not used by name\n+  --> $DIR/issue-99265.rs:115:23\n    |\n LL |                 {:1$.2$}\",\n-   |                 -- this formatting argument uses named argument `a` by position\n+   |                   -- this formatting argument uses named argument `b` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |              ^ this named argument is referred to by position in formatting string\n+   |                       ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |                 {a:1$.2$}\",\n-   |                  +\n+LL |                 {:b$.2$}\",\n+   |                   ~~\n \n-warning: named argument `b` is not used by name\n-  --> $DIR/issue-99265.rs:126:23\n+warning: named argument `a` is not used by name\n+  --> $DIR/issue-99265.rs:126:14\n    |\n LL |                 {0:1$.2$}\",\n-   |                    -- this formatting argument uses named argument `b` by position\n+   |                 --------- this formatting argument uses named argument `a` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |                       ^ this named argument is referred to by position in formatting string\n+   |              ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |                 {0:b$.2$}\",\n-   |                    ~~\n+LL |                 {a:1$.2$}\",\n+   |                  ~\n \n warning: named argument `c` is not used by name\n   --> $DIR/issue-99265.rs:126:30\n@@ -505,32 +505,32 @@ help: use the named argument by name to avoid ambiguity\n LL |                 {0:1$.c$}\",\n    |                       ~~\n \n-warning: named argument `a` is not used by name\n-  --> $DIR/issue-99265.rs:126:14\n+warning: named argument `b` is not used by name\n+  --> $DIR/issue-99265.rs:126:23\n    |\n LL |                 {0:1$.2$}\",\n-   |                  - this formatting argument uses named argument `a` by position\n+   |                    -- this formatting argument uses named argument `b` by position\n ...\n LL |              a = 1.0, b = 1, c = 2,\n-   |              ^ this named argument is referred to by position in formatting string\n+   |                       ^ this named argument is referred to by position in formatting string\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |                 {a:1$.2$}\",\n-   |                  ~\n+LL |                 {0:b$.2$}\",\n+   |                    ~~\n \n-warning: named argument `width` is not used by name\n-  --> $DIR/issue-99265.rs:132:39\n+warning: named argument `x` is not used by name\n+  --> $DIR/issue-99265.rs:132:30\n    |\n LL |     println!(\"{{{:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                   --                  ^^^^^ this named argument is referred to by position in formatting string\n-   |                   |\n-   |                   this formatting argument uses named argument `width` by position\n+   |                 --------     ^ this named argument is referred to by position in formatting string\n+   |                 |\n+   |                 this formatting argument uses named argument `x` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{{{:width$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                   ~~~~~~\n+LL |     println!(\"{{{x:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n+   |                  +\n \n warning: named argument `precision` is not used by name\n   --> $DIR/issue-99265.rs:132:50\n@@ -545,18 +545,18 @@ help: use the named argument by name to avoid ambiguity\n LL |     println!(\"{{{:1$.precision$}}}\", x = 1.0, width = 3, precision = 2);\n    |                      ~~~~~~~~~~\n \n-warning: named argument `x` is not used by name\n-  --> $DIR/issue-99265.rs:132:30\n+warning: named argument `width` is not used by name\n+  --> $DIR/issue-99265.rs:132:39\n    |\n LL |     println!(\"{{{:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                 --           ^ this named argument is referred to by position in formatting string\n-   |                 |\n-   |                 this formatting argument uses named argument `x` by position\n+   |                   --                  ^^^^^ this named argument is referred to by position in formatting string\n+   |                   |\n+   |                   this formatting argument uses named argument `width` by position\n    |\n help: use the named argument by name to avoid ambiguity\n    |\n-LL |     println!(\"{{{x:1$.2$}}}\", x = 1.0, width = 3, precision = 2);\n-   |                  +\n+LL |     println!(\"{{{:width$.2$}}}\", x = 1.0, width = 3, precision = 2);\n+   |                   ~~~~~~\n \n warning: 42 warnings emitted\n "}, {"sha": "eefb28dee35b85527648e11166ee778b52c22124", "filename": "src/test/ui/macros/issue-99907.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3ffcb655184e9e069af76d8d648e59eb9ff2cf6c/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-99907.stderr?ref=3ffcb655184e9e069af76d8d648e59eb9ff2cf6c", "patch": "@@ -2,7 +2,7 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99907.rs:5:30\n    |\n LL |     println!(\"Hello {:.1}!\", f = 0.02f32);\n-   |                     --       ^ this named argument is referred to by position in formatting string\n+   |                     -----    ^ this named argument is referred to by position in formatting string\n    |                     |\n    |                     this formatting argument uses named argument `f` by position\n    |\n@@ -16,7 +16,7 @@ warning: named argument `f` is not used by name\n   --> $DIR/issue-99907.rs:9:31\n    |\n LL |     println!(\"Hello {:1.1}!\", f = 0.02f32);\n-   |                     --        ^ this named argument is referred to by position in formatting string\n+   |                     ------    ^ this named argument is referred to by position in formatting string\n    |                     |\n    |                     this formatting argument uses named argument `f` by position\n    |"}]}