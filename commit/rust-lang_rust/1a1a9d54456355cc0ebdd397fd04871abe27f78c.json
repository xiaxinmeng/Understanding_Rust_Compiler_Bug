{"sha": "1a1a9d54456355cc0ebdd397fd04871abe27f78c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhMWE5ZDU0NDU2MzU1Y2MwZWJkZDM5N2ZkMDQ4NzFhYmUyN2Y3OGM=", "commit": {"author": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-07-14T08:56:52Z"}, "committer": {"name": "Corey Richardson", "email": "corey@octayn.net", "date": "2014-07-21T17:59:57Z"}, "message": "Add raw string literal ambiguity document", "tree": {"sha": "3dbbacbcb547b4488daeed7c32456711d52c808a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3dbbacbcb547b4488daeed7c32456711d52c808a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a1a9d54456355cc0ebdd397fd04871abe27f78c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a1a9d54456355cc0ebdd397fd04871abe27f78c", "html_url": "https://github.com/rust-lang/rust/commit/1a1a9d54456355cc0ebdd397fd04871abe27f78c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a1a9d54456355cc0ebdd397fd04871abe27f78c/comments", "author": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "committer": {"login": "emberian", "id": 704250, "node_id": "MDQ6VXNlcjcwNDI1MA==", "avatar_url": "https://avatars.githubusercontent.com/u/704250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emberian", "html_url": "https://github.com/emberian", "followers_url": "https://api.github.com/users/emberian/followers", "following_url": "https://api.github.com/users/emberian/following{/other_user}", "gists_url": "https://api.github.com/users/emberian/gists{/gist_id}", "starred_url": "https://api.github.com/users/emberian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emberian/subscriptions", "organizations_url": "https://api.github.com/users/emberian/orgs", "repos_url": "https://api.github.com/users/emberian/repos", "events_url": "https://api.github.com/users/emberian/events{/privacy}", "received_events_url": "https://api.github.com/users/emberian/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "19e1f5cdb6a47070fd5f12993e947ea6db0eb5dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/19e1f5cdb6a47070fd5f12993e947ea6db0eb5dd", "html_url": "https://github.com/rust-lang/rust/commit/19e1f5cdb6a47070fd5f12993e947ea6db0eb5dd"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "6b63bbcb4f067c923e43c49c70701c40aa1bc544", "filename": "src/grammar/raw-string-literal-ambiguity.md", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/1a1a9d54456355cc0ebdd397fd04871abe27f78c/src%2Fgrammar%2Fraw-string-literal-ambiguity.md", "raw_url": "https://github.com/rust-lang/rust/raw/1a1a9d54456355cc0ebdd397fd04871abe27f78c/src%2Fgrammar%2Fraw-string-literal-ambiguity.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fgrammar%2Fraw-string-literal-ambiguity.md?ref=1a1a9d54456355cc0ebdd397fd04871abe27f78c", "patch": "@@ -0,0 +1,29 @@\n+Rust's lexical grammar is not context-free. Raw string literals are the source\n+of the problem. Informally, a raw string literal is an `r`, followed by `N`\n+hashes (where N can be zero), a quote, any characters, then a quote followed\n+by `N` hashes. This grammar describes this as best possible:\n+\n+    R -> 'r' S\n+    S -> '\"' B '\"'\n+    S -> '#' S '#'\n+    B -> . B\n+    B -> \u03b5\n+\n+Where `.` represents any character, and `\u03b5` the empty string. Consider the\n+string `r#\"\"#\"#`. This string is not a valid raw string literal, but can be\n+accepted as one by the above grammar, using the derivation:\n+\n+    R : #\"\"#\"#\n+    S : \"\"#\"\n+    S : \"#\n+    B : #\n+    B : \u03b5\n+\n+(Where `T : U` means the rule `T` is applied, and `U` is the remainder of the\n+string.) The difficulty arises from the fact that it is fundamentally\n+context-sensitive. In particular, the context needed is the number of hashes.\n+I know of no way to resolve this, but also have not come up with a proof that\n+it is not context sensitive. Such a proof would probably use the pumping lemma\n+for context-free languages, but I (cmr) could not come up with a proof after\n+spending a few hours on it, and decided my time best spent elsewhere. Pull\n+request welcome!"}]}