{"sha": "cb34138cd02563892fb317a7ed4a9537f18e4371", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiMzQxMzhjZDAyNTYzODkyZmIzMTdhN2VkNGE5NTM3ZjE4ZTQzNzE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-23T21:05:44Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-23T21:05:44Z"}, "message": "Makefile hack to fix snapshotty-cross-compiley problem", "tree": {"sha": "2a57ce9aef17d84b44d4230579f1f5f44a536967", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a57ce9aef17d84b44d4230579f1f5f44a536967"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb34138cd02563892fb317a7ed4a9537f18e4371", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb34138cd02563892fb317a7ed4a9537f18e4371", "html_url": "https://github.com/rust-lang/rust/commit/cb34138cd02563892fb317a7ed4a9537f18e4371", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb34138cd02563892fb317a7ed4a9537f18e4371/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a26edca75a53839d63c0227d62f863dfb717e1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a26edca75a53839d63c0227d62f863dfb717e1b", "html_url": "https://github.com/rust-lang/rust/commit/0a26edca75a53839d63c0227d62f863dfb717e1b"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "9f76fdcd61c1e48a7304f91f0a48d2d8a7a627d9", "filename": "Makefile.in", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/cb34138cd02563892fb317a7ed4a9537f18e4371/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/cb34138cd02563892fb317a7ed4a9537f18e4371/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=cb34138cd02563892fb317a7ed4a9537f18e4371", "patch": "@@ -355,18 +355,30 @@ endif\n # Add RUSTFLAGS_STAGEN values to the build command\n EXTRAFLAGS_STAGE$(1) = $$(RUSTFLAGS_STAGE$(1))\n \n+CFGFLAG$(1)_T_$(2)_H_$(3) = stage$(1)\n+\n+# XXX: Terrible hack. No time to explain! Remove after snapshot.\n+ifeq ($(1),0)\n+ifeq ($(3),i686-unknown-linux-gnu)\n+CFGFLAG$(1)_T_$(2)_H_$(3) = stage1\n+endif\n+ifeq ($(3),i686-apple-darwin)\n+CFGFLAG$(1)_T_$(2)_H_$(3) = stage1\n+endif\n+endif\n+\n STAGE$(1)_T_$(2)_H_$(3) := \t\t\t\t\t\t\\\n \t$$(Q)$$(call CFG_RUN_TARG,$(1),\t\t\t\t\\\n \t\t$$(CFG_VALGRIND_COMPILE$(1)) \t\t\t\\\n \t\t$$(HBIN$(1)_H_$(3))/rustc$$(X)\t\t\t\\\n-\t\t--cfg stage$(1)\t\t\t\t\t\\\n+\t\t--cfg $$(CFGFLAG$(1)_T_$(2)_H_$(3))\t\t\t\\\n \t\t$$(CFG_RUSTC_FLAGS) $$(EXTRAFLAGS_STAGE$(1)) --target=$(2))\n \n PERF_STAGE$(1)_T_$(2)_H_$(3) := \t\t\t\t\\\n \t$$(Q)$$(call CFG_RUN_TARG,$(1),\t\t\t\t\\\n \t\t$$(CFG_PERF_TOOL) \t\t\t\t\t\t\\\n \t\t$$(HBIN$(1)_H_$(3))/rustc$$(X)\t\t\t\\\n-\t\t--cfg stage$(1)\t\t\t\t\t\\\n+\t\t--cfg $$(CFGFLAG$(1)_T_$(2)_H_$(3))\t\t\t\\\n \t\t$$(CFG_RUSTC_FLAGS) $$(EXTRAFLAGS_STAGE$(1)) --target=$(2))\n \n endef"}]}