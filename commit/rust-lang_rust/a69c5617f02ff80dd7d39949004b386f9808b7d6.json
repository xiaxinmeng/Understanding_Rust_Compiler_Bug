{"sha": "a69c5617f02ff80dd7d39949004b386f9808b7d6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2OWM1NjE3ZjAyZmY4MGRkN2QzOTk0OTAwNGIzODZmOTgwOGI3ZDY=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-23T00:11:03Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-11-23T01:16:20Z"}, "message": "stdlib: Use c_ints instead of ints for natives", "tree": {"sha": "78364f27151cfd019eb1b4c7717c391074da1379", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/78364f27151cfd019eb1b4c7717c391074da1379"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a69c5617f02ff80dd7d39949004b386f9808b7d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a69c5617f02ff80dd7d39949004b386f9808b7d6", "html_url": "https://github.com/rust-lang/rust/commit/a69c5617f02ff80dd7d39949004b386f9808b7d6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a69c5617f02ff80dd7d39949004b386f9808b7d6/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bb7750b8d0e9e02f586e4be6883fc2926236dfea", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb7750b8d0e9e02f586e4be6883fc2926236dfea", "html_url": "https://github.com/rust-lang/rust/commit/bb7750b8d0e9e02f586e4be6883fc2926236dfea"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "de5bae0b50b5c29cbd3d494f0ac76daabfa13592", "filename": "src/lib/fs.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ffs.rs?ref=a69c5617f02ff80dd7d39949004b386f9808b7d6", "patch": "@@ -121,11 +121,11 @@ Function: make_dir\n \n Creates a directory at the specified path.\n */\n-fn make_dir(p: path, mode: int) -> bool {\n+fn make_dir(p: path, mode: ctypes::c_int) -> bool {\n     ret mkdir(p, mode);\n \n     #[cfg(target_os = \"win32\")]\n-    fn mkdir(_p: path, _mode: int) -> bool unsafe {\n+    fn mkdir(_p: path, _mode: ctypes::c_int) -> bool unsafe {\n         // FIXME: turn mode into something useful?\n         ret str::as_buf(_p, {|buf|\n             os::kernel32::CreateDirectoryA(\n@@ -135,8 +135,8 @@ fn make_dir(p: path, mode: int) -> bool {\n \n     #[cfg(target_os = \"linux\")]\n     #[cfg(target_os = \"macos\")]\n-    fn mkdir(_p: path, _mode: int) -> bool {\n-        ret str::as_buf(_p, {|buf| os::libc::mkdir(buf, _mode) == 0 });\n+    fn mkdir(_p: path, _mode: ctypes::c_int) -> bool {\n+        ret str::as_buf(_p, {|buf| os::libc::mkdir(buf, _mode) == 0i32 });\n     }\n }\n \n@@ -174,7 +174,7 @@ fn remove_dir(p: path) -> bool {\n     #[cfg(target_os = \"linux\")]\n     #[cfg(target_os = \"macos\")]\n     fn rmdir(_p: path) -> bool {\n-        ret str::as_buf(_p, {|buf| os::libc::rmdir(buf) == 0 });\n+        ret str::as_buf(_p, {|buf| os::libc::rmdir(buf) == 0i32 });\n     }\n }\n "}, {"sha": "de655b5c12ce3370ad3342a681c7a80dec448c84", "filename": "src/lib/linux_os.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Flinux_os.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Flinux_os.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Flinux_os.rs?ref=a69c5617f02ff80dd7d39949004b386f9808b7d6", "patch": "@@ -51,8 +51,8 @@ native mod libc {\n     fn pipe(buf: *mutable fd_t) -> c_int;\n     fn waitpid(pid: pid_t, &status: c_int, options: c_int) -> pid_t;\n     fn readlink(path: str::sbuf, buf: str::sbuf, bufsize: size_t) -> ssize_t;\n-    fn mkdir(path: str::sbuf, mode: int) -> int;\n-    fn rmdir(path: str::sbuf) -> int;\n+    fn mkdir(path: str::sbuf, mode: c_int) -> c_int;\n+    fn rmdir(path: str::sbuf) -> c_int;\n }\n \n mod libc_constants {"}, {"sha": "2bd5eab93ba5cc20ba06f3b1e72d64f4985b2cad", "filename": "src/lib/macos_os.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Fmacos_os.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Fmacos_os.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fmacos_os.rs?ref=a69c5617f02ff80dd7d39949004b386f9808b7d6", "patch": "@@ -43,7 +43,7 @@ native mod libc {\n     fn setenv(n: str::sbuf, v: str::sbuf, overwrite: c_int) -> c_int;\n     fn unsetenv(n: str::sbuf) -> c_int;\n     fn pipe(buf: *mutable c_int) -> c_int;\n-    fn waitpid(pid: int, &status: c_int, options: c_int) -> c_int;\n+    fn waitpid(pid: pid_t, &status: c_int, options: c_int) -> c_int;\n     fn mkdir(s: str::sbuf, mode: c_int) -> c_int;\n     fn rmdir(s: str::sbuf) -> c_int;\n }"}, {"sha": "5f504ba2349474061384e8dc6f9eb67fcafb39cf", "filename": "src/lib/tempfile.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Ftempfile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a69c5617f02ff80dd7d39949004b386f9808b7d6/src%2Flib%2Ftempfile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftempfile.rs?ref=a69c5617f02ff80dd7d39949004b386f9808b7d6", "patch": "@@ -14,7 +14,7 @@ fn mkdtemp(prefix: str, suffix: str) -> option::t<str> {\n     let i = 0u;\n     while (i < 1000u) {\n         let s = prefix + r.gen_str(16u) + suffix;\n-        if fs::make_dir(s, 0x1c0) {  // FIXME: u+rwx\n+        if fs::make_dir(s, 0x1c0i32) {  // FIXME: u+rwx\n             ret some(s);\n         }\n         i += 1u;"}]}