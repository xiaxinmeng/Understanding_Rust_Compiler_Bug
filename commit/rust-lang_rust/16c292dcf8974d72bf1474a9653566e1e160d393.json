{"sha": "16c292dcf8974d72bf1474a9653566e1e160d393", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2YzI5MmRjZjg5NzRkNzJiZjE0NzRhOTY1MzU2NmUxZTE2MGQzOTM=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-12-17T07:52:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-12-17T07:52:18Z"}, "message": "Merge pull request #3249 from andjo403/assert_cli\n\nremove deprecated dependency assert_cli", "tree": {"sha": "a50608bd92dc156f1d2ef56290948afa7cb567dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a50608bd92dc156f1d2ef56290948afa7cb567dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16c292dcf8974d72bf1474a9653566e1e160d393", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcF1WzCRBK7hj4Ov3rIwAAdHIIAKG7ZmgGWo3TRThkFBoTS5dz\nNAerRwzfn4ZCh79bmY0MBddGeVeLwoaW5vsGdNMzOixY0XRx8uMLHMGMQrv3InCX\ntRZd3zkQ7Y+h+z2gF921nqKfHMTvjix/G6uRggwPeMU4/yab17VsPT//1jbYOFsy\nEvc8Hlgrs5zlhYSVoffaCgZSXXRSmGWYvkLSJVqjO7sZdHTkbMzB1Hs62vnCKB0W\nX98cd3vpLPyBz/2Rz67tCWKdkwF2G+PWPCMxXfIBa4sNu/Rms0N5kLOtWuqtiGQd\nGfQB/OmqAhEAyy5heBdTfr929Gdo1BrneozJUok9lAtZjGchvm2tPPshFTZPs/s=\n=lxRE\n-----END PGP SIGNATURE-----\n", "payload": "tree a50608bd92dc156f1d2ef56290948afa7cb567dd\nparent 66c98db50f58aa97be7bdd34af136ad258c6e04c\nparent 653f3ae63690c9a1a37b72a49bfbe1d0384c5919\nauthor Nick Cameron <nrc@ncameron.org> 1545033138 +1300\ncommitter GitHub <noreply@github.com> 1545033138 +1300\n\nMerge pull request #3249 from andjo403/assert_cli\n\nremove deprecated dependency assert_cli"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16c292dcf8974d72bf1474a9653566e1e160d393", "html_url": "https://github.com/rust-lang/rust/commit/16c292dcf8974d72bf1474a9653566e1e160d393", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16c292dcf8974d72bf1474a9653566e1e160d393/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66c98db50f58aa97be7bdd34af136ad258c6e04c", "url": "https://api.github.com/repos/rust-lang/rust/commits/66c98db50f58aa97be7bdd34af136ad258c6e04c", "html_url": "https://github.com/rust-lang/rust/commit/66c98db50f58aa97be7bdd34af136ad258c6e04c"}, {"sha": "653f3ae63690c9a1a37b72a49bfbe1d0384c5919", "url": "https://api.github.com/repos/rust-lang/rust/commits/653f3ae63690c9a1a37b72a49bfbe1d0384c5919", "html_url": "https://github.com/rust-lang/rust/commit/653f3ae63690c9a1a37b72a49bfbe1d0384c5919"}], "stats": {"total": 54, "additions": 7, "deletions": 47}, "files": [{"sha": "6991e6e7b8ff1ecf6837a689040e5a1cdad41ee9", "filename": "Cargo.lock", "status": "modified", "additions": 0, "deletions": 36, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/16c292dcf8974d72bf1474a9653566e1e160d393/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/16c292dcf8974d72bf1474a9653566e1e160d393/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=16c292dcf8974d72bf1474a9653566e1e160d393", "patch": "@@ -14,19 +14,6 @@ dependencies = [\n  \"nodrop 0.1.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n-[[package]]\n-name = \"assert_cli\"\n-version = \"0.6.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-dependencies = [\n- \"colored 1.6.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"difference 2.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"environment 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"failure 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"failure_derive 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.33 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n [[package]]\n name = \"atty\"\n version = \"0.2.11\"\n@@ -106,14 +93,6 @@ dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n-[[package]]\n-name = \"colored\"\n-version = \"1.6.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-dependencies = [\n- \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n-]\n-\n [[package]]\n name = \"crossbeam-deque\"\n version = \"0.2.0\"\n@@ -160,11 +139,6 @@ name = \"diff\"\n version = \"0.1.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n-[[package]]\n-name = \"difference\"\n-version = \"2.0.0\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-\n [[package]]\n name = \"either\"\n version = \"1.5.0\"\n@@ -190,11 +164,6 @@ dependencies = [\n  \"termcolor 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n-[[package]]\n-name = \"environment\"\n-version = \"0.1.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-\n [[package]]\n name = \"error-chain\"\n version = \"0.12.0\"\n@@ -604,7 +573,6 @@ dependencies = [\n name = \"rustfmt-nightly\"\n version = \"1.0.1\"\n dependencies = [\n- \"assert_cli 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"atty 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"bytecount 0.4.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cargo_metadata 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -842,7 +810,6 @@ dependencies = [\n [metadata]\n \"checksum aho-corasick 0.6.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1e9a933f4e58658d7b12defcf96dc5c720f20832deebe3e0a19efd3b6aaeeb9e\"\n \"checksum arrayvec 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f405cc4c21cd8b784f6c8fc2adf9bc00f59558f0049b5ec21517f875963040cc\"\n-\"checksum assert_cli 0.6.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a29ab7c0ed62970beb0534d637a8688842506d0ff9157de83286dacd065c8149\"\n \"checksum atty 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9a7d5b8723950951411ee34d271d99dddcc2035a16ab25310ea2c8cfd4369652\"\n \"checksum backtrace 0.3.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"89a47830402e9981c5c41223151efcced65a0510c13097c769cede7efb34782a\"\n \"checksum backtrace-sys 0.1.24 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c66d56ac8dabd07f6aacdaf633f4b8262f5b3601a810a0dcddffd5c22c69daa0\"\n@@ -853,17 +820,14 @@ dependencies = [\n \"checksum cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f159dfd43363c4d08055a07703eb7a3406b0dac4d0584d96965a3262db3c9d16\"\n \"checksum cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"082bb9b28e00d3c9d39cc03e64ce4cea0f1bb9b3fde493f0cbc008472d22bdf4\"\n \"checksum cloudabi 0.0.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ddfc5b9aa5d4507acaf872de71051dfd0e309860e88966e1051e462a077aac4f\"\n-\"checksum colored 1.6.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dc0a60679001b62fb628c4da80e574b9645ab4646056d7c9018885efffe45533\"\n \"checksum crossbeam-deque 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f739f8c5363aca78cfb059edf753d8f0d36908c348f3d8d1503f03d8b75d9cf3\"\n \"checksum crossbeam-epoch 0.3.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"927121f5407de9956180ff5e936fe3cf4324279280001cd56b669d28ee7e9150\"\n \"checksum crossbeam-utils 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2760899e32a1d58d5abb31129f8fae5de75220bc2176e77ff7c627ae45c918d9\"\n \"checksum derive-new 0.5.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6ca414e896ae072546f4d789f452daaecf60ddee4c9df5dc6d5936d769e3d87c\"\n \"checksum diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a\"\n-\"checksum difference 2.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"524cbf6897b527295dff137cec09ecf3a05f4fddffd7dfcd1585403449e74198\"\n \"checksum either 1.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3be565ca5c557d7f59e7cfcf1844f9e3033650c929c6566f511e8005f205c1d0\"\n \"checksum ena 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f56c93cc076508c549d9bb747f79aa9b4eb098be7b8cad8830c3137ef52d1e00\"\n \"checksum env_logger 0.5.13 (registry+https://github.com/rust-lang/crates.io-index)\" = \"15b0a4d2e39f8420210be8b27eeda28029729e2fd4291019455016c348240c38\"\n-\"checksum environment 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1f4b14e20978669064c33b4c1e0fb4083412e40fe56cbea2eae80fd7591503ee\"\n \"checksum error-chain 0.12.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"07e791d3be96241c77c43846b665ef1384606da2cd2a48730abe606a12906e02\"\n \"checksum failure 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6dd377bcc1b1b7ce911967e3ec24fa19c3224394ec05b54aa7b083d498341ac7\"\n \"checksum failure_derive 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"64c2d913fe8ed3b6c6518eedf4538255b989945c14c2a7d5cbff62a5e2120596\""}, {"sha": "7281ce5efdc556e9df8e9d8bdfad6214f1f5936d", "filename": "Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/16c292dcf8974d72bf1474a9653566e1e160d393/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/16c292dcf8974d72bf1474a9653566e1e160d393/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=16c292dcf8974d72bf1474a9653566e1e160d393", "patch": "@@ -60,5 +60,4 @@ bytecount = \"0.4\"\n rustc-workspace-hack = \"1.0.0\"\n \n [dev-dependencies]\n-assert_cli = \"0.6\"\n lazy_static = \"1.0.0\""}, {"sha": "d54245c78c9219b2f7d99f3bf88ef7e71ec29f6c", "filename": "src/test/mod.rs", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/16c292dcf8974d72bf1474a9653566e1e160d393/src%2Ftest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16c292dcf8974d72bf1474a9653566e1e160d393/src%2Ftest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmod.rs?ref=16c292dcf8974d72bf1474a9653566e1e160d393", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-extern crate assert_cli;\n-\n use std::collections::{HashMap, HashSet};\n use std::env;\n use std::fs;\n@@ -295,7 +293,7 @@ fn stdin_disable_all_formatting_test() {\n         _ => return, // these tests require nightly\n     }\n     let input = String::from(\"fn main() { println!(\\\"This should not be formatted.\\\"); }\");\n-    let mut child = Command::new(\"./target/debug/rustfmt\")\n+    let mut child = Command::new(rustfmt().to_str().unwrap())\n         .stdin(Stdio::piped())\n         .stdout(Stdio::piped())\n         .arg(\"--config-path=./tests/config/disable_all_formatting.toml\")\n@@ -973,11 +971,10 @@ fn rustfmt() -> PathBuf {\n #[test]\n fn verify_check_works() {\n     let temp_file = make_temp_file(\"temp_check.rs\");\n-    assert_cli::Assert::command(&[\n-        rustfmt().to_str().unwrap(),\n-        \"--check\",\n-        temp_file.path.to_str().unwrap(),\n-    ])\n-    .succeeds()\n-    .unwrap();\n+\n+    Command::new(rustfmt().to_str().unwrap())\n+        .arg(\"--check\")\n+        .arg(temp_file.path.to_str().unwrap())\n+        .status()\n+        .expect(\"run with check option failed\");\n }"}]}