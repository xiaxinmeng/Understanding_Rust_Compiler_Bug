{"sha": "3808bc4639468018b1e5c30e1cd2e6905485ce67", "node_id": "C_kwDOAAsO6NoAKDM4MDhiYzQ2Mzk0NjgwMThiMWU1YzMwZTFjZDJlNjkwNTQ4NWNlNjc", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-25T14:56:22Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-25T15:27:28Z"}, "message": "Fix CI", "tree": {"sha": "b56dffca6cff7100b864b2cd5acd245a6338b1dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b56dffca6cff7100b864b2cd5acd245a6338b1dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3808bc4639468018b1e5c30e1cd2e6905485ce67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3808bc4639468018b1e5c30e1cd2e6905485ce67", "html_url": "https://github.com/rust-lang/rust/commit/3808bc4639468018b1e5c30e1cd2e6905485ce67", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3808bc4639468018b1e5c30e1cd2e6905485ce67/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1578b1c73fa2c2ae1b78b5d66f36734f41b968b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/1578b1c73fa2c2ae1b78b5d66f36734f41b968b8", "html_url": "https://github.com/rust-lang/rust/commit/1578b1c73fa2c2ae1b78b5d66f36734f41b968b8"}], "stats": {"total": 28, "additions": 4, "deletions": 24}, "files": [{"sha": "6c4efca442448a700d77e946edb926ab02e8ced9", "filename": "compiler/rustc_codegen_cranelift/src/cranelift_native.rs", "status": "modified", "additions": 4, "deletions": 24, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/3808bc4639468018b1e5c30e1cd2e6905485ce67/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fcranelift_native.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3808bc4639468018b1e5c30e1cd2e6905485ce67/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fcranelift_native.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_cranelift%2Fsrc%2Fcranelift_native.rs?ref=3808bc4639468018b1e5c30e1cd2e6905485ce67", "patch": "@@ -1,34 +1,16 @@\n // Vendored from https://github.com/bytecodealliance/wasmtime/blob/b58a197d33f044193c3d608010f5e6ec394ac07e/cranelift/native/src/lib.rs\n // which is licensed as\n // SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception\n-// unlike rustc_codegen_cranelift itself.\n+// unlike rustc_codegen_cranelift itself. Also applies a small change to remove #![cfg_attr] that\n+// rust's CI complains about and to fix formatting to match rustc.\n // FIXME revert back to the external crate with Cranelift 0.93\n #![allow(warnings)]\n \n //! Performs autodetection of the host for the purposes of running\n //! Cranelift to generate code to run on the same machine.\n \n-#![deny(\n-    missing_docs,\n-    trivial_numeric_casts,\n-    unused_extern_crates,\n-    unstable_features\n-)]\n+#![deny(missing_docs, trivial_numeric_casts, unused_extern_crates, unstable_features)]\n #![warn(unused_import_braces)]\n-#![cfg_attr(feature = \"clippy\", plugin(clippy(conf_file = \"../../clippy.toml\")))]\n-#![cfg_attr(feature = \"cargo-clippy\", allow(clippy::new_without_default))]\n-#![cfg_attr(\n-    feature = \"cargo-clippy\",\n-    warn(\n-        clippy::float_arithmetic,\n-        clippy::mut_mut,\n-        clippy::nonminimal_bool,\n-        clippy::map_unwrap_or,\n-        clippy::clippy::print_stdout,\n-        clippy::unicode_not_nfc,\n-        clippy::use_self\n-    )\n-)]\n \n use cranelift_codegen::isa;\n use target_lexicon::Triple;\n@@ -241,9 +223,7 @@ mod tests {\n     fn test() {\n         if let Ok(isa_builder) = builder() {\n             let flag_builder = settings::builder();\n-            let isa = isa_builder\n-                .finish(settings::Flags::new(flag_builder))\n-                .unwrap();\n+            let isa = isa_builder.finish(settings::Flags::new(flag_builder)).unwrap();\n \n             if cfg!(all(target_os = \"macos\", target_arch = \"aarch64\")) {\n                 assert_eq!(isa.default_call_conv(), CallConv::AppleAarch64);"}]}