{"sha": "12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyYWRhNWNmNGJlYmFiZDdkYzI0MGEzYTk5M2VhZWJiZGYyZWQzZDM=", "commit": {"author": {"name": "est31", "email": "MTest31@outlook.com", "date": "2020-09-24T17:10:34Z"}, "committer": {"name": "est31", "email": "MTest31@outlook.com", "date": "2020-09-24T17:10:34Z"}, "message": "Remove TrustedLen requirement from BuilderMethods::switch\n\nThe main use case of TrustedLen is allowing APIs to specialize on it,\nbut no use of it uses that specialization. Instead, only the .len()\nfunction provided by ExactSizeIterator is used, which is already\nrequired to be accurate.\n\nThus, the TrustedLen requirement on BuilderMethods::switch is redundant.", "tree": {"sha": "020abefeac2912f6a80bd110f96d7a5bb045701e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/020abefeac2912f6a80bd110f96d7a5bb045701e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "html_url": "https://github.com/rust-lang/rust/commit/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/comments", "author": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "893fadd11a52aa26fc19c67ee1b79f03d6a1bed3", "url": "https://api.github.com/repos/rust-lang/rust/commits/893fadd11a52aa26fc19c67ee1b79f03d6a1bed3", "html_url": "https://github.com/rust-lang/rust/commit/893fadd11a52aa26fc19c67ee1b79f03d6a1bed3"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "27061acd5afd4902c9b4e00e5afac1b317cf7da2", "filename": "compiler/rustc_codegen_llvm/src/builder.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fbuilder.rs?ref=12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "patch": "@@ -21,7 +21,6 @@ use rustc_target::abi::{self, Align, Size};\n use rustc_target::spec::{HasTargetSpec, Target};\n use std::borrow::Cow;\n use std::ffi::CStr;\n-use std::iter::TrustedLen;\n use std::ops::{Deref, Range};\n use std::ptr;\n use tracing::debug;\n@@ -179,7 +178,7 @@ impl BuilderMethods<'a, 'tcx> for Builder<'a, 'll, 'tcx> {\n         &mut self,\n         v: &'ll Value,\n         else_llbb: &'ll BasicBlock,\n-        cases: impl ExactSizeIterator<Item = (u128, &'ll BasicBlock)> + TrustedLen,\n+        cases: impl ExactSizeIterator<Item = (u128, &'ll BasicBlock)>,\n     ) {\n         let switch =\n             unsafe { llvm::LLVMBuildSwitch(self.llbuilder, v, else_llbb, cases.len() as c_uint) };"}, {"sha": "2751481535c41e5f2f1bfeaf89e9c2586f541cf0", "filename": "compiler/rustc_codegen_llvm/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs?ref=12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "patch": "@@ -12,7 +12,6 @@\n #![feature(in_band_lifetimes)]\n #![feature(nll)]\n #![feature(or_patterns)]\n-#![feature(trusted_len)]\n #![recursion_limit = \"256\"]\n \n use back::write::{create_informational_target_machine, create_target_machine};"}, {"sha": "ee0778490eeda6aae885ccc66ec9fadfc07de5b9", "filename": "compiler/rustc_codegen_ssa/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs?ref=12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "patch": "@@ -6,7 +6,6 @@\n #![feature(in_band_lifetimes)]\n #![feature(nll)]\n #![feature(or_patterns)]\n-#![feature(trusted_len)]\n #![feature(associated_type_bounds)]\n #![recursion_limit = \"256\"]\n "}, {"sha": "b35b0f24208b267b4957c362fbd0b8e44e122389", "filename": "compiler/rustc_codegen_ssa/src/traits/builder.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftraits%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftraits%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Ftraits%2Fbuilder.rs?ref=12ada5cf4bebabd7dc240a3a993eaebbdf2ed3d3", "patch": "@@ -18,7 +18,6 @@ use rustc_middle::ty::Ty;\n use rustc_target::abi::{Abi, Align, Scalar, Size};\n use rustc_target::spec::HasTargetSpec;\n \n-use std::iter::TrustedLen;\n use std::ops::Range;\n \n #[derive(Copy, Clone)]\n@@ -60,7 +59,7 @@ pub trait BuilderMethods<'a, 'tcx>:\n         &mut self,\n         v: Self::Value,\n         else_llbb: Self::BasicBlock,\n-        cases: impl ExactSizeIterator<Item = (u128, Self::BasicBlock)> + TrustedLen,\n+        cases: impl ExactSizeIterator<Item = (u128, Self::BasicBlock)>,\n     );\n     fn invoke(\n         &mut self,"}]}