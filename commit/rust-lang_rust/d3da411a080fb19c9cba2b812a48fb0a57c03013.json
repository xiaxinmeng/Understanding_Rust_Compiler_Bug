{"sha": "d3da411a080fb19c9cba2b812a48fb0a57c03013", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzZGE0MTFhMDgwZmIxOWM5Y2JhMmI4MTJhNDhmYjBhNTdjMDMwMTM=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-07-31T23:22:34Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-08-02T19:33:58Z"}, "message": "Nicer labels for type layout errors", "tree": {"sha": "58ec5a46b2cb3273eda1de21d22ed3e96706b8a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58ec5a46b2cb3273eda1de21d22ed3e96706b8a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d3da411a080fb19c9cba2b812a48fb0a57c03013", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d3da411a080fb19c9cba2b812a48fb0a57c03013", "html_url": "https://github.com/rust-lang/rust/commit/d3da411a080fb19c9cba2b812a48fb0a57c03013", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d3da411a080fb19c9cba2b812a48fb0a57c03013/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58bd8786e891f69fcb7982938a635d4f8b16496b", "url": "https://api.github.com/repos/rust-lang/rust/commits/58bd8786e891f69fcb7982938a635d4f8b16496b", "html_url": "https://github.com/rust-lang/rust/commit/58bd8786e891f69fcb7982938a635d4f8b16496b"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "05978ae3c6f7ae41a86c99670acfa64a23057504", "filename": "src/librustc/mir/interpret/error.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs?ref=d3da411a080fb19c9cba2b812a48fb0a57c03013", "patch": "@@ -144,7 +144,7 @@ impl<'tcx> ConstEvalErr<'tcx> {\n                 return Err(ErrorHandled::TooGeneric),\n             err_inval!(TypeckError) =>\n                 return Err(ErrorHandled::Reported),\n-            err_inval!(LayoutError::SizeOverflow(_)) => must_error = true,\n+            err_inval!(Layout(LayoutError::SizeOverflow(_))) => must_error = true,\n             _ => {},\n         }\n         trace!(\"reporting const eval failure at {:?}\", self.span);\n@@ -336,7 +336,7 @@ impl fmt::Debug for InvalidProgramInfo<'tcx> {\n             TypeckError =>\n                 write!(f, \"encountered constants with type errors, stopping evaluation\"),\n             Layout(ref err) =>\n-                write!(f, \"rustc layout computation failed: {:?}\", err),\n+                write!(f, \"{}\", err),\n         }\n     }\n }"}, {"sha": "adb272f4bed9c6e20ab8a01b3c1617b6e20176fd", "filename": "src/test/ui/consts/issue-55878.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr?ref=d3da411a080fb19c9cba2b812a48fb0a57c03013", "patch": "@@ -2,7 +2,7 @@ error[E0080]: reaching this expression at runtime will panic or abort\n   --> $SRC_DIR/libcore/mem/mod.rs:LL:COL\n    |\n LL |     intrinsics::size_of::<T>()\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 18446744073709551615])\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ the type `[u8; 18446744073709551615]` is too big for the current architecture\n    | \n   ::: $DIR/issue-55878.rs:3:26\n    |"}, {"sha": "bce95087c5ce401c8871a7a485108b6e4b3cb292", "filename": "src/test/ui/issues/issue-56762.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d3da411a080fb19c9cba2b812a48fb0a57c03013/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr?ref=d3da411a080fb19c9cba2b812a48fb0a57c03013", "patch": "@@ -2,13 +2,13 @@ error[E0080]: could not evaluate static initializer\n   --> $DIR/issue-56762.rs:19:1\n    |\n LL | static MY_TOO_BIG_ARRAY_1: TooBigArray = TooBigArray::new();\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 2305843009213693951])\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the type `[u8; 2305843009213693951]` is too big for the current architecture\n \n error[E0080]: could not evaluate static initializer\n   --> $DIR/issue-56762.rs:21:1\n    |\n LL | static MY_TOO_BIG_ARRAY_2: [u8; HUGE_SIZE] = [0x00; HUGE_SIZE];\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 2305843009213693951])\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the type `[u8; 2305843009213693951]` is too big for the current architecture\n \n error: aborting due to 2 previous errors\n "}]}