{"sha": "041ad1fcfe62615a67461bb2076d0ebff026bf77", "node_id": "C_kwDOAAsO6NoAKDA0MWFkMWZjZmU2MjYxNWE2NzQ2MWJiMjA3NmQwZWJmZjAyNmJmNzc", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-12-28T11:44:41Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-12-28T11:44:41Z"}, "message": "simplify path joining code a bit", "tree": {"sha": "d144e547bd772161bc685fa36af5e9ff87c4883b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d144e547bd772161bc685fa36af5e9ff87c4883b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/041ad1fcfe62615a67461bb2076d0ebff026bf77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/041ad1fcfe62615a67461bb2076d0ebff026bf77", "html_url": "https://github.com/rust-lang/rust/commit/041ad1fcfe62615a67461bb2076d0ebff026bf77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/041ad1fcfe62615a67461bb2076d0ebff026bf77/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbdf926e7010f8bdd9e773831ecf5dbda058bd21", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbdf926e7010f8bdd9e773831ecf5dbda058bd21", "html_url": "https://github.com/rust-lang/rust/commit/fbdf926e7010f8bdd9e773831ecf5dbda058bd21"}], "stats": {"total": 10, "additions": 1, "deletions": 9}, "files": [{"sha": "e51bfa3798f3ecdd0b6a4ed9abf06bc8a8024366", "filename": "src/tools/miri/cargo-miri/src/phases.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/041ad1fcfe62615a67461bb2076d0ebff026bf77/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fphases.rs", "raw_url": "https://github.com/rust-lang/rust/raw/041ad1fcfe62615a67461bb2076d0ebff026bf77/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fphases.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fcargo-miri%2Fsrc%2Fphases.rs?ref=041ad1fcfe62615a67461bb2076d0ebff026bf77", "patch": "@@ -265,15 +265,7 @@ pub fn phase_rustc(mut args: impl Iterator<Item = String>, phase: RustcPhase) {\n             );\n             let output =\n                 String::from_utf8(output.stdout).expect(\"rustc returned non-UTF-8 filename\");\n-            output\n-                .lines()\n-                .filter(|l| !l.is_empty())\n-                .map(|l| {\n-                    let mut p = path.clone();\n-                    p.push(l);\n-                    p\n-                })\n-                .collect()\n+            output.lines().filter(|l| !l.is_empty()).map(|l| path.join(l)).collect()\n         }\n     }\n "}]}