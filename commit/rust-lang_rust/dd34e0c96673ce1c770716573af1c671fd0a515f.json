{"sha": "dd34e0c96673ce1c770716573af1c671fd0a515f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkMzRlMGM5NjY3M2NlMWM3NzA3MTY1NzNhZjFjNjcxZmQwYTUxNWY=", "commit": {"author": {"name": "Andreas Liljeqvist", "email": "bonega@gmail.com", "date": "2021-09-07T18:44:33Z"}, "committer": {"name": "Andreas Liljeqvist", "email": "bonega@gmail.com", "date": "2021-09-09T08:41:19Z"}, "message": "Rename `(un)signed` to `(un)signed_int`", "tree": {"sha": "6c11715a7df24f3dad35b25da90e9ffaf2e0b538", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c11715a7df24f3dad35b25da90e9ffaf2e0b538"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dd34e0c96673ce1c770716573af1c671fd0a515f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dd34e0c96673ce1c770716573af1c671fd0a515f", "html_url": "https://github.com/rust-lang/rust/commit/dd34e0c96673ce1c770716573af1c671fd0a515f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dd34e0c96673ce1c770716573af1c671fd0a515f/comments", "author": {"login": "bonega", "id": 411677, "node_id": "MDQ6VXNlcjQxMTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/411677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonega", "html_url": "https://github.com/bonega", "followers_url": "https://api.github.com/users/bonega/followers", "following_url": "https://api.github.com/users/bonega/following{/other_user}", "gists_url": "https://api.github.com/users/bonega/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonega/subscriptions", "organizations_url": "https://api.github.com/users/bonega/orgs", "repos_url": "https://api.github.com/users/bonega/repos", "events_url": "https://api.github.com/users/bonega/events{/privacy}", "received_events_url": "https://api.github.com/users/bonega/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bonega", "id": 411677, "node_id": "MDQ6VXNlcjQxMTY3Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/411677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonega", "html_url": "https://github.com/bonega", "followers_url": "https://api.github.com/users/bonega/followers", "following_url": "https://api.github.com/users/bonega/following{/other_user}", "gists_url": "https://api.github.com/users/bonega/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonega/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonega/subscriptions", "organizations_url": "https://api.github.com/users/bonega/orgs", "repos_url": "https://api.github.com/users/bonega/repos", "events_url": "https://api.github.com/users/bonega/events{/privacy}", "received_events_url": "https://api.github.com/users/bonega/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9129f4306f4993b2a61287af6e157152bc758815", "url": "https://api.github.com/repos/rust-lang/rust/commits/9129f4306f4993b2a61287af6e157152bc758815", "html_url": "https://github.com/rust-lang/rust/commit/9129f4306f4993b2a61287af6e157152bc758815"}], "stats": {"total": 33, "additions": 17, "deletions": 16}, "files": [{"sha": "1e91ad07ba93ac4a20f38b051cd3e8dc7ba5a34b", "filename": "compiler/rustc_const_eval/src/interpret/intrinsics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -260,7 +260,7 @@ impl<'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> InterpCx<'mir, 'tcx, M> {\n                         // unsigned\n                         if is_add {\n                             // max unsigned\n-                            Scalar::from_uint(size.unsigned_max(), Size::from_bits(num_bits))\n+                            Scalar::from_uint(size.unsigned_int_max(), Size::from_bits(num_bits))\n                         } else {\n                             // underflow to 0\n                             Scalar::from_uint(0u128, Size::from_bits(num_bits))"}, {"sha": "a6375ad0e02cf1e4011a163d6ac5279c7011affb", "filename": "compiler/rustc_const_eval/src/interpret/validity.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fvalidity.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -627,7 +627,7 @@ impl<'rt, 'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> ValidityVisitor<'rt, 'mir, '\n         // At least one value is excluded.\n         let valid_range = scalar_layout.valid_range;\n         let WrappingRange { start, end } = valid_range;\n-        let max_value = op.layout.size.unsigned_max();\n+        let max_value = op.layout.size.unsigned_int_max();\n         assert!(end <= max_value);\n         // Determine the allowed range\n         let value = self.read_scalar(op)?;"}, {"sha": "1bea1cbc3b94be0129bbfa2a31d478547c6b193f", "filename": "compiler/rustc_middle/src/ty/layout.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_middle%2Fsrc%2Fty%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_middle%2Fsrc%2Fty%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Flayout.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -514,7 +514,7 @@ impl<'tcx> LayoutCx<'tcx, TyCtxt<'tcx>> {\n         let scalar_unit = |value: Primitive| {\n             let size = value.size(dl);\n             assert!(size.bits() <= 128);\n-            Scalar { value, valid_range: WrappingRange { start: 0, end: size.unsigned_max() } }\n+            Scalar { value, valid_range: WrappingRange { start: 0, end: size.unsigned_int_max() } }\n         };\n         let scalar = |value: Primitive| tcx.intern_layout(Layout::scalar(self, scalar_unit(value)));\n \n@@ -1266,7 +1266,7 @@ impl<'tcx> LayoutCx<'tcx, TyCtxt<'tcx>> {\n                     }\n                 }\n \n-                let tag_mask = ity.size().unsigned_max();\n+                let tag_mask = ity.size().unsigned_int_max();\n                 let tag = Scalar {\n                     value: Int(ity, signed),\n                     valid_range: WrappingRange {"}, {"sha": "8a2abb037579839342b8b99eb9cb9fc6622c7761", "filename": "compiler/rustc_middle/src/ty/util.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Futil.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -62,8 +62,8 @@ impl<'tcx> Discr<'tcx> {\n     pub fn checked_add(self, tcx: TyCtxt<'tcx>, n: u128) -> (Self, bool) {\n         let (size, signed) = int_size_and_signed(tcx, self.ty);\n         let (val, oflo) = if signed {\n-            let min = size.signed_min();\n-            let max = size.signed_max();\n+            let min = size.signed_int_min();\n+            let max = size.signed_int_max();\n             let val = size.sign_extend(self.val) as i128;\n             assert!(n < (i128::MAX as u128));\n             let n = n as i128;\n@@ -74,7 +74,7 @@ impl<'tcx> Discr<'tcx> {\n             let val = size.truncate(val);\n             (val, oflo)\n         } else {\n-            let max = size.unsigned_max();\n+            let max = size.unsigned_int_max();\n             let val = self.val;\n             let oflo = val > max - n;\n             let val = if oflo { n - (max - val) - 1 } else { val + n };\n@@ -609,7 +609,8 @@ impl<'tcx> ty::TyS<'tcx> {\n         let val = match self.kind() {\n             ty::Int(_) | ty::Uint(_) => {\n                 let (size, signed) = int_size_and_signed(tcx, self);\n-                let val = if signed { size.signed_max() as u128 } else { size.unsigned_max() };\n+                let val =\n+                    if signed { size.signed_int_max() as u128 } else { size.unsigned_int_max() };\n                 Some(val)\n             }\n             ty::Char => Some(std::char::MAX as u128),\n@@ -628,7 +629,7 @@ impl<'tcx> ty::TyS<'tcx> {\n         let val = match self.kind() {\n             ty::Int(_) | ty::Uint(_) => {\n                 let (size, signed) = int_size_and_signed(tcx, self);\n-                let val = if signed { size.truncate(size.signed_min() as u128) } else { 0 };\n+                let val = if signed { size.truncate(size.signed_int_min() as u128) } else { 0 };\n                 Some(val)\n             }\n             ty::Char => Some(0),"}, {"sha": "be0d5d2f1b2af5565a64c4cf4700525da4032c52", "filename": "compiler/rustc_mir_build/src/build/expr/as_rvalue.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fexpr%2Fas_rvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fexpr%2Fas_rvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Fbuild%2Fexpr%2Fas_rvalue.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -495,7 +495,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     fn neg_1_literal(&mut self, span: Span, ty: Ty<'tcx>) -> Operand<'tcx> {\n         let param_ty = ty::ParamEnv::empty().and(ty);\n         let size = self.tcx.layout_of(param_ty).unwrap().size;\n-        let literal = ty::Const::from_bits(self.tcx, size.unsigned_max(), param_ty);\n+        let literal = ty::Const::from_bits(self.tcx, size.unsigned_int_max(), param_ty);\n \n         self.literal_operand(span, literal)\n     }"}, {"sha": "ba609800e113c0e2abccc2a57470f7b835a47fff", "filename": "compiler/rustc_target/src/abi/mod.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_target%2Fsrc%2Fabi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd34e0c96673ce1c770716573af1c671fd0a515f/compiler%2Frustc_target%2Fsrc%2Fabi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fabi%2Fmod.rs?ref=dd34e0c96673ce1c770716573af1c671fd0a515f", "patch": "@@ -394,17 +394,17 @@ impl Size {\n     }\n \n     #[inline]\n-    pub fn signed_min(&self) -> i128 {\n+    pub fn signed_int_min(&self) -> i128 {\n         self.sign_extend(1_u128 << (self.bits() - 1)) as i128\n     }\n \n     #[inline]\n-    pub fn signed_max(&self) -> i128 {\n+    pub fn signed_int_max(&self) -> i128 {\n         i128::MAX >> (128 - self.bits())\n     }\n \n     #[inline]\n-    pub fn unsigned_max(&self) -> u128 {\n+    pub fn unsigned_int_max(&self) -> u128 {\n         u128::MAX >> (128 - self.bits())\n     }\n }\n@@ -790,7 +790,7 @@ impl WrappingRange {\n     /// Returns `true` if `size` completely fills the range.\n     #[inline]\n     pub fn is_full_for(&self, size: Size) -> bool {\n-        let max_value = size.unsigned_max();\n+        let max_value = size.unsigned_int_max();\n         debug_assert!(self.start <= max_value && self.end <= max_value);\n         (self.start == 0 && self.end == max_value) || (self.end + 1 == self.start)\n     }\n@@ -1084,7 +1084,7 @@ impl Niche {\n         let Scalar { value, valid_range: v } = self.scalar;\n         let size = value.size(cx);\n         assert!(size.bits() <= 128);\n-        let max_value = size.unsigned_max();\n+        let max_value = size.unsigned_int_max();\n \n         // Find out how many values are outside the valid range.\n         let niche = v.end.wrapping_add(1)..v.start;\n@@ -1097,7 +1097,7 @@ impl Niche {\n         let Scalar { value, valid_range: v } = self.scalar;\n         let size = value.size(cx);\n         assert!(size.bits() <= 128);\n-        let max_value = size.unsigned_max();\n+        let max_value = size.unsigned_int_max();\n \n         if count > max_value {\n             return None;"}]}