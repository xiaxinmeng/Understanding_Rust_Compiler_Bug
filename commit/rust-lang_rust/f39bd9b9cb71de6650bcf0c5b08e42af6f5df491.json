{"sha": "f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzOWJkOWI5Y2I3MWRlNjY1MGJjZjBjNWIwOGU0MmFmNmY1ZGY0OTE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-31T04:06:14Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-12-31T04:06:14Z"}, "message": "Auto merge of #57044 - varkor:E0512-equal-type, r=matthewjasper\n\nAdd specific diagnostic when attempting to transmute between equal generic types\n\nAlso clarifies the wording of E0512.\n\nFixes https://github.com/rust-lang/rust/issues/49793.", "tree": {"sha": "a02c30cd2bb23460461163511d0a2cc1d74e8d91", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a02c30cd2bb23460461163511d0a2cc1d74e8d91"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "html_url": "https://github.com/rust-lang/rust/commit/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cf7f55662bed29513eb9daecc3e72474ec023f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cf7f55662bed29513eb9daecc3e72474ec023f5", "html_url": "https://github.com/rust-lang/rust/commit/2cf7f55662bed29513eb9daecc3e72474ec023f5"}, {"sha": "7d5f6ceef0e47f9ee129b16d34bab68f4878dbeb", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d5f6ceef0e47f9ee129b16d34bab68f4878dbeb", "html_url": "https://github.com/rust-lang/rust/commit/7d5f6ceef0e47f9ee129b16d34bab68f4878dbeb"}], "stats": {"total": 272, "additions": 149, "deletions": 123}, "files": [{"sha": "4bc52e82f9be177648027ff5aa5efc30c33d478c", "filename": "src/librustc/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Flibrustc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Flibrustc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdiagnostics.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1552,7 +1552,8 @@ fn takes_u8(_: u8) {}\n \n fn main() {\n     unsafe { takes_u8(::std::mem::transmute(0u16)); }\n-    // error: transmute called with types of different sizes\n+    // error: cannot transmute between types of different sizes,\n+    //        or dependently-sized types\n }\n ```\n "}, {"sha": "1716daaa107c4e335ef4f80fefe97644b1b71327", "filename": "src/librustc/middle/intrinsicck.rs", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Flibrustc%2Fmiddle%2Fintrinsicck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Flibrustc%2Fmiddle%2Fintrinsicck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fintrinsicck.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -97,11 +97,11 @@ impl<'a, 'tcx> ExprVisitor<'a, 'tcx> {\n                     format!(\"{} bits\", size.bits())\n                 }\n                 Ok(SizeSkeleton::Pointer { tail, .. }) => {\n-                    format!(\"pointer to {}\", tail)\n+                    format!(\"pointer to `{}`\", tail)\n                 }\n                 Err(LayoutError::Unknown(bad)) => {\n                     if bad == ty {\n-                        \"this type's size can vary\".to_owned()\n+                        \"this type does not have a fixed size\".to_owned()\n                     } else {\n                         format!(\"size can vary because of {}\", bad)\n                     }\n@@ -110,11 +110,16 @@ impl<'a, 'tcx> ExprVisitor<'a, 'tcx> {\n             }\n         };\n \n-        struct_span_err!(self.tcx.sess, span, E0512,\n-                         \"transmute called with types of different sizes\")\n-            .note(&format!(\"source type: {} ({})\", from, skeleton_string(from, sk_from)))\n-            .note(&format!(\"target type: {} ({})\", to, skeleton_string(to, sk_to)))\n-            .emit();\n+        let mut err = struct_span_err!(self.tcx.sess, span, E0512,\n+                                       \"cannot transmute between types of different sizes, \\\n+                                        or dependently-sized types\");\n+        if from == to {\n+            err.note(&format!(\"`{}` does not have a fixed size\", from));\n+        } else {\n+            err.note(&format!(\"source type: `{}` ({})\", from, skeleton_string(from, sk_from)))\n+                .note(&format!(\"target type: `{}` ({})\", to, skeleton_string(to, sk_to)));\n+        }\n+        err.emit()\n     }\n }\n "}, {"sha": "998f6403f0b2949560542bc23059ab1e5996e2aa", "filename": "src/test/ui/error-codes/E0512.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ferror-codes%2FE0512.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ferror-codes%2FE0512.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0512.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/E0512.rs:4:23\n    |\n LL |     unsafe { takes_u8(::std::mem::transmute(0u16)); } //~ ERROR E0512\n    |                       ^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: source type: u16 (16 bits)\n-   = note: target type: u8 (8 bits)\n+   = note: source type: `u16` (16 bits)\n+   = note: target type: `u8` (8 bits)\n \n error: aborting due to previous error\n "}, {"sha": "07827425116af2f42824c2e1753d9e13490f3150", "filename": "src/test/ui/issues/issue-21174.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-21174.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-21174.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-21174.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -5,7 +5,7 @@ trait Trait<'a> {\n \n fn foo<'a, T: Trait<'a>>(value: T::A) {\n     let new: T::B = unsafe { std::mem::transmute(value) };\n-//~^ ERROR: transmute called with types of different sizes\n+//~^ ERROR: cannot transmute between types of different sizes, or dependently-sized types\n }\n \n fn main() { }"}, {"sha": "5ac5a8665bc69e41c2c05fe84648abdc82d01558", "filename": "src/test/ui/issues/issue-21174.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-21174.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-21174.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-21174.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/issue-21174.rs:7:30\n    |\n LL |     let new: T::B = unsafe { std::mem::transmute(value) };\n    |                              ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: source type: <T as Trait<'a>>::A (size can vary because of <T as Trait>::A)\n-   = note: target type: <T as Trait<'a>>::B (size can vary because of <T as Trait>::B)\n+   = note: source type: `<T as Trait<'a>>::A` (size can vary because of <T as Trait>::A)\n+   = note: target type: `<T as Trait<'a>>::B` (size can vary because of <T as Trait>::B)\n \n error: aborting due to previous error\n "}, {"sha": "15a6a63d5ef0ba474eac2f018d5ea330459a6655", "filename": "src/test/ui/issues/issue-28625.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-28625.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-28625.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-28625.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -9,7 +9,7 @@ struct ArrayPeano<T: Bar> {\n }\n \n fn foo<T>(a: &ArrayPeano<T>) -> &[T] where T: Bar {\n-    unsafe { std::mem::transmute(a) } //~ ERROR transmute called with types of different sizes\n+    unsafe { std::mem::transmute(a) } //~ ERROR cannot transmute between types of different sizes\n }\n \n impl Bar for () {"}, {"sha": "36cb47944f234ab5f7725d2d41de639fd94a6805", "filename": "src/test/ui/issues/issue-28625.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-28625.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-28625.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-28625.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/issue-28625.rs:12:14\n    |\n-LL |     unsafe { std::mem::transmute(a) } //~ ERROR transmute called with types of different sizes\n+LL |     unsafe { std::mem::transmute(a) } //~ ERROR cannot transmute between types of different sizes\n    |              ^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: source type: &ArrayPeano<T> (N bits)\n-   = note: target type: &[T] (N bits)\n+   = note: source type: `&ArrayPeano<T>` (N bits)\n+   = note: target type: `&[T]` (N bits)\n \n error: aborting due to previous error\n "}, {"sha": "555f6abd791ac7f25c7f85d2345c77d1a2d1f2a2", "filename": "src/test/ui/issues/issue-32377.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-32377.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-32377.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32377.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -13,7 +13,7 @@ struct Bar<U: Foo> {\n \n fn foo<U: Foo>(x: [usize; 2]) -> Bar<U> {\n     unsafe { mem::transmute(x) }\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n fn main() {}"}, {"sha": "5e870eb3e8d17e76aa0a083f5d4f207181292eae", "filename": "src/test/ui/issues/issue-32377.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-32377.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fissues%2Fissue-32377.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-32377.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/issue-32377.rs:15:14\n    |\n LL |     unsafe { mem::transmute(x) }\n    |              ^^^^^^^^^^^^^^\n    |\n-   = note: source type: [usize; 2] (N bits)\n-   = note: target type: Bar<U> (N bits)\n+   = note: source type: `[usize; 2]` (N bits)\n+   = note: target type: `Bar<U>` (N bits)\n \n error: aborting due to previous error\n "}, {"sha": "c6264b6d2b32e9e576fc4b6ff0f897e8f5cdb6be", "filename": "src/test/ui/packed-struct/packed-struct-generic-transmute.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -3,7 +3,7 @@\n // the error points to the start of the file, not the line with the\n // transmute\n \n-// error-pattern: transmute called with types of different sizes\n+// error-pattern: cannot transmute between types of different sizes, or dependently-sized types\n \n use std::mem;\n "}, {"sha": "744c832dbb40705228dbc2c277fec07b6086b2d3", "filename": "src/test/ui/packed-struct/packed-struct-generic-transmute.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-generic-transmute.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/packed-struct-generic-transmute.rs:24:38\n    |\n LL |         let oof: Oof<[u8; 5], i32> = mem::transmute(foo);\n    |                                      ^^^^^^^^^^^^^^\n    |\n-   = note: source type: Foo<[u8; 5], i32> (72 bits)\n-   = note: target type: Oof<[u8; 5], i32> (96 bits)\n+   = note: source type: `Foo<[u8; 5], i32>` (72 bits)\n+   = note: target type: `Oof<[u8; 5], i32>` (96 bits)\n \n error: aborting due to previous error\n "}, {"sha": "a7d284025d7a04155fcfdbcd65e99b624505f7a3", "filename": "src/test/ui/packed-struct/packed-struct-transmute.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -4,7 +4,7 @@\n // transmute\n \n // normalize-stderr-test \"\\d+ bits\" -> \"N bits\"\n-// error-pattern: transmute called with types of different sizes\n+// error-pattern: cannot transmute between types of different sizes, or dependently-sized types\n \n use std::mem;\n "}, {"sha": "80a8919f77b38656956642de9fe20aea67b69132", "filename": "src/test/ui/packed-struct/packed-struct-transmute.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpacked-struct%2Fpacked-struct-transmute.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/packed-struct-transmute.rs:26:24\n    |\n LL |         let oof: Oof = mem::transmute(foo);\n    |                        ^^^^^^^^^^^^^^\n    |\n-   = note: source type: Foo (N bits)\n-   = note: target type: Oof (N bits)\n+   = note: source type: `Foo` (N bits)\n+   = note: target type: `Oof` (N bits)\n \n error: aborting due to previous error\n "}, {"sha": "6f357543e5c44103705f931543ad6f593156f9f9", "filename": "src/test/ui/transmute-equal-assoc-types.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -0,0 +1,9 @@\n+trait Foo {\n+    type Bar;\n+}\n+\n+unsafe fn noop<F: Foo>(foo: F::Bar) -> F::Bar {\n+    ::std::mem::transmute(foo) //~ ERROR cannot transmute between types of different sizes\n+}\n+\n+fn main() {}"}, {"sha": "46bbf1c185889cb00b340ee9c7019e67530bf2db", "filename": "src/test/ui/transmute-equal-assoc-types.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute-equal-assoc-types.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -0,0 +1,11 @@\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n+  --> $DIR/transmute-equal-assoc-types.rs:6:5\n+   |\n+LL |     ::std::mem::transmute(foo) //~ ERROR cannot transmute between types of different sizes\n+   |     ^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: `<F as Foo>::Bar` does not have a fixed size\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0512`."}, {"sha": "ea233a47a78c107eed7c73d57e78dc8cff2842b0", "filename": "src/test/ui/transmute/main.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Fmain.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,5 +1,5 @@\n-// normalize-stderr-32bit: \"&str \\(64 bits\\)\" -> \"&str ($$STR bits)\"\n-// normalize-stderr-64bit: \"&str \\(128 bits\\)\" -> \"&str ($$STR bits)\"\n+// normalize-stderr-32bit: \"`&str` \\(64 bits\\)\" -> \"`&str` ($$STR bits)\"\n+// normalize-stderr-64bit: \"`&str` \\(128 bits\\)\" -> \"`&str` ($$STR bits)\"\n \n \n \n@@ -13,20 +13,20 @@ pub trait TypeConstructor<'a> {\n unsafe fn transmute_lifetime<'a, 'b, C>(x: <C as TypeConstructor<'a>>::T)\n                                         -> <C as TypeConstructor<'b>>::T\n where for<'z> C: TypeConstructor<'z> {\n-    transmute(x) //~ ERROR transmute called with types of different sizes\n+    transmute(x) //~ ERROR cannot transmute between types of different sizes\n }\n \n unsafe fn sizes() {\n-    let x: u8 = transmute(10u16); //~ ERROR transmute called with types of different sizes\n+    let x: u8 = transmute(10u16); //~ ERROR cannot transmute between types of different sizes\n }\n \n unsafe fn ptrs() {\n-    let x: u8 = transmute(\"test\"); //~ ERROR transmute called with types of different sizes\n+    let x: u8 = transmute(\"test\"); //~ ERROR cannot transmute between types of different sizes\n }\n \n union Foo { x: () }\n unsafe fn vary() {\n-    let x: Foo = transmute(10); //~ ERROR transmute called with types of different sizes\n+    let x: Foo = transmute(10); //~ ERROR cannot transmute between types of different sizes\n }\n \n fn main() {}"}, {"sha": "f4e88fc860acd7802d0e77fc376dfb0812d0386e", "filename": "src/test/ui/transmute/main.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Fmain.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Fmain.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Fmain.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,38 +1,38 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/main.rs:16:5\n    |\n-LL |     transmute(x) //~ ERROR transmute called with types of different sizes\n+LL |     transmute(x) //~ ERROR cannot transmute between types of different sizes\n    |     ^^^^^^^^^\n    |\n-   = note: source type: <C as TypeConstructor<'a>>::T (size can vary because of <C as TypeConstructor>::T)\n-   = note: target type: <C as TypeConstructor<'b>>::T (size can vary because of <C as TypeConstructor>::T)\n+   = note: source type: `<C as TypeConstructor<'a>>::T` (size can vary because of <C as TypeConstructor>::T)\n+   = note: target type: `<C as TypeConstructor<'b>>::T` (size can vary because of <C as TypeConstructor>::T)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/main.rs:20:17\n    |\n-LL |     let x: u8 = transmute(10u16); //~ ERROR transmute called with types of different sizes\n+LL |     let x: u8 = transmute(10u16); //~ ERROR cannot transmute between types of different sizes\n    |                 ^^^^^^^^^\n    |\n-   = note: source type: u16 (16 bits)\n-   = note: target type: u8 (8 bits)\n+   = note: source type: `u16` (16 bits)\n+   = note: target type: `u8` (8 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/main.rs:24:17\n    |\n-LL |     let x: u8 = transmute(\"test\"); //~ ERROR transmute called with types of different sizes\n+LL |     let x: u8 = transmute(\"test\"); //~ ERROR cannot transmute between types of different sizes\n    |                 ^^^^^^^^^\n    |\n-   = note: source type: &str ($STR bits)\n-   = note: target type: u8 (8 bits)\n+   = note: source type: `&str` ($STR bits)\n+   = note: target type: `u8` (8 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/main.rs:29:18\n    |\n-LL |     let x: Foo = transmute(10); //~ ERROR transmute called with types of different sizes\n+LL |     let x: Foo = transmute(10); //~ ERROR cannot transmute between types of different sizes\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: i32 (32 bits)\n-   = note: target type: Foo (0 bits)\n+   = note: source type: `i32` (32 bits)\n+   = note: target type: `Foo` (0 bits)\n \n error: aborting due to 4 previous errors\n "}, {"sha": "690decf63928593dafec45cec65c4a95f798f5d1", "filename": "src/test/ui/transmute/transmute-different-sizes.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -9,12 +9,12 @@ use std::mem::transmute;\n \n unsafe fn f() {\n     let _: i8 = transmute(16i16);\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n unsafe fn g<T>(x: &T) {\n     let _: i8 = transmute(x);\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n trait Specializable { type Output; }\n@@ -25,7 +25,7 @@ impl<T> Specializable for T {\n \n unsafe fn specializable<T>(x: u16) -> <T as Specializable>::Output {\n     transmute(x)\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n fn main() {}"}, {"sha": "07a38df6973a18a19b849b5c20baad82c3fcea19", "filename": "src/test/ui/transmute/transmute-different-sizes.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-different-sizes.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,29 +1,29 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-different-sizes.rs:11:17\n    |\n LL |     let _: i8 = transmute(16i16);\n    |                 ^^^^^^^^^\n    |\n-   = note: source type: i16 (N bits)\n-   = note: target type: i8 (N bits)\n+   = note: source type: `i16` (N bits)\n+   = note: target type: `i8` (N bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-different-sizes.rs:16:17\n    |\n LL |     let _: i8 = transmute(x);\n    |                 ^^^^^^^^^\n    |\n-   = note: source type: &T (N bits)\n-   = note: target type: i8 (N bits)\n+   = note: source type: `&T` (N bits)\n+   = note: target type: `i8` (N bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-different-sizes.rs:27:5\n    |\n LL |     transmute(x)\n    |     ^^^^^^^^^\n    |\n-   = note: source type: u16 (N bits)\n-   = note: target type: <T as Specializable>::Output (this type's size can vary)\n+   = note: source type: `u16` (N bits)\n+   = note: target type: `<T as Specializable>::Output` (this type does not have a fixed size)\n \n error: aborting due to 3 previous errors\n "}, {"sha": "7c1beffd14ed4366edcacf1b8b769c5f698035f6", "filename": "src/test/ui/transmute/transmute-fat-pointers.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -7,11 +7,11 @@\n use std::mem::transmute;\n \n fn a<T, U: ?Sized>(x: &[T]) -> &U {\n-    unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+    unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n }\n \n fn b<T: ?Sized, U: ?Sized>(x: &T) -> &U {\n-    unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+    unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n }\n \n fn c<T, U>(x: &T) -> &U {\n@@ -23,11 +23,11 @@ fn d<T, U>(x: &[T]) -> &[U] {\n }\n \n fn e<T: ?Sized, U>(x: &T) -> &U {\n-    unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+    unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n }\n \n fn f<T, U: ?Sized>(x: &T) -> &U {\n-    unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+    unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n }\n \n fn main() { }"}, {"sha": "4b34950881a486b480f63eff333c8dce42e06396", "filename": "src/test/ui/transmute/transmute-fat-pointers.stderr", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-fat-pointers.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,38 +1,38 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-fat-pointers.rs:10:14\n    |\n-LL |     unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+LL |     unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n    |              ^^^^^^^^^\n    |\n-   = note: source type: &[T] (N bits)\n-   = note: target type: &U (pointer to U)\n+   = note: source type: `&[T]` (N bits)\n+   = note: target type: `&U` (pointer to `U`)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-fat-pointers.rs:14:14\n    |\n-LL |     unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+LL |     unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n    |              ^^^^^^^^^\n    |\n-   = note: source type: &T (pointer to T)\n-   = note: target type: &U (pointer to U)\n+   = note: source type: `&T` (pointer to `T`)\n+   = note: target type: `&U` (pointer to `U`)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-fat-pointers.rs:26:14\n    |\n-LL |     unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+LL |     unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n    |              ^^^^^^^^^\n    |\n-   = note: source type: &T (pointer to T)\n-   = note: target type: &U (N bits)\n+   = note: source type: `&T` (pointer to `T`)\n+   = note: target type: `&U` (N bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-fat-pointers.rs:30:14\n    |\n-LL |     unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+LL |     unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n    |              ^^^^^^^^^\n    |\n-   = note: source type: &T (N bits)\n-   = note: target type: &U (pointer to U)\n+   = note: source type: `&T` (N bits)\n+   = note: target type: `&U` (pointer to `U`)\n \n error: aborting due to 4 previous errors\n "}, {"sha": "f858a199e48e30c9965531bceb00646e08f6bb25", "filename": "src/test/ui/transmute/transmute-from-fn-item-types-error.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -2,7 +2,7 @@ use std::mem;\n \n unsafe fn foo() -> (i8, *const (), Option<fn()>) {\n     let i = mem::transmute(bar);\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n \n \n     let p = mem::transmute(foo);\n@@ -19,7 +19,7 @@ unsafe fn foo() -> (i8, *const (), Option<fn()>) {\n unsafe fn bar() {\n     // Error as usual if the resulting type is not pointer-sized.\n     mem::transmute::<_, u8>(main);\n-    //~^ ERROR transmute called with types of different sizes\n+    //~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n \n \n     mem::transmute::<_, *mut ()>(foo);"}, {"sha": "d08078bcfbaea13d055cc4a5ccc95ff305313e84", "filename": "src/test/ui/transmute/transmute-from-fn-item-types-error.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-from-fn-item-types-error.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-from-fn-item-types-error.rs:4:13\n    |\n LL |     let i = mem::transmute(bar);\n    |             ^^^^^^^^^^^^^^\n    |\n-   = note: source type: unsafe fn() {bar} (0 bits)\n-   = note: target type: i8 (8 bits)\n+   = note: source type: `unsafe fn() {bar}` (0 bits)\n+   = note: target type: `i8` (8 bits)\n \n error[E0591]: can't transmute zero-sized type\n   --> $DIR/transmute-from-fn-item-types-error.rs:8:13\n@@ -27,14 +27,14 @@ LL |     let of = mem::transmute(main);\n    = note: target type: std::option::Option<fn()>\n    = help: cast with `as` to a pointer instead\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-from-fn-item-types-error.rs:21:5\n    |\n LL |     mem::transmute::<_, u8>(main);\n    |     ^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: source type: fn() {main} (0 bits)\n-   = note: target type: u8 (8 bits)\n+   = note: source type: `fn() {main}` (0 bits)\n+   = note: target type: `u8` (8 bits)\n \n error[E0591]: can't transmute zero-sized type\n   --> $DIR/transmute-from-fn-item-types-error.rs:25:5"}, {"sha": "df422bda166c111d20e19590b084811ae9b76ba3", "filename": "src/test/ui/transmute/transmute-impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -18,7 +18,7 @@ impl<T: ?Sized> Foo<T> {\n \n     fn n(x: &T) -> &isize {\n         // Not OK here, because T : Sized is not in scope.\n-        unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+        unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n     }\n }\n "}, {"sha": "8acc0aaf3ab527c4da61e47480ce1488019957f5", "filename": "src/test/ui/transmute/transmute-impl.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-impl.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,11 +1,11 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-impl.rs:21:18\n    |\n-LL |         unsafe { transmute(x) } //~ ERROR transmute called with types of different sizes\n+LL |         unsafe { transmute(x) } //~ ERROR cannot transmute between types of different sizes\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: &T (pointer to T)\n-   = note: target type: &isize (N bits)\n+   = note: source type: `&T` (pointer to `T`)\n+   = note: target type: `&isize` (N bits)\n \n error: aborting due to previous error\n "}, {"sha": "5f44b2d0f01631ecce8b7b95549e137eaeb0b45f", "filename": "src/test/ui/transmute/transmute-type-parameters.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.rs?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -4,17 +4,17 @@ use std::mem::transmute;\n \n unsafe fn f<T>(x: T) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n unsafe fn g<T>(x: (T, i32)) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n unsafe fn h<T>(x: [T; 10]) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n struct Bad<T> {\n@@ -23,7 +23,7 @@ struct Bad<T> {\n \n unsafe fn i<T>(x: Bad<T>) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n enum Worse<T> {\n@@ -33,12 +33,12 @@ enum Worse<T> {\n \n unsafe fn j<T>(x: Worse<T>) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n unsafe fn k<T>(x: Option<T>) {\n     let _: i32 = transmute(x);\n-//~^ ERROR transmute called with types of different sizes\n+//~^ ERROR cannot transmute between types of different sizes, or dependently-sized types\n }\n \n fn main() {}"}, {"sha": "a355a1bf31833ebec651cb54da1c13d8b11fe57f", "filename": "src/test/ui/transmute/transmute-type-parameters.stderr", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f39bd9b9cb71de6650bcf0c5b08e42af6f5df491/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftransmute%2Ftransmute-type-parameters.stderr?ref=f39bd9b9cb71de6650bcf0c5b08e42af6f5df491", "patch": "@@ -1,56 +1,56 @@\n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:6:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: T (this type's size can vary)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `T` (this type does not have a fixed size)\n+   = note: target type: `i32` (32 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:11:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: (T, i32) (size can vary because of T)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `(T, i32)` (size can vary because of T)\n+   = note: target type: `i32` (32 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:16:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: [T; 10] (size can vary because of T)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `[T; 10]` (size can vary because of T)\n+   = note: target type: `i32` (32 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:25:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: Bad<T> (size can vary because of T)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `Bad<T>` (size can vary because of T)\n+   = note: target type: `i32` (32 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:35:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: Worse<T> (size can vary because of T)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `Worse<T>` (size can vary because of T)\n+   = note: target type: `i32` (32 bits)\n \n-error[E0512]: transmute called with types of different sizes\n+error[E0512]: cannot transmute between types of different sizes, or dependently-sized types\n   --> $DIR/transmute-type-parameters.rs:40:18\n    |\n LL |     let _: i32 = transmute(x);\n    |                  ^^^^^^^^^\n    |\n-   = note: source type: std::option::Option<T> (size can vary because of T)\n-   = note: target type: i32 (32 bits)\n+   = note: source type: `std::option::Option<T>` (size can vary because of T)\n+   = note: target type: `i32` (32 bits)\n \n error: aborting due to 6 previous errors\n "}]}