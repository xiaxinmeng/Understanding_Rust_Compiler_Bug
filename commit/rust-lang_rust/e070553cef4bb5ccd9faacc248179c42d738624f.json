{"sha": "e070553cef4bb5ccd9faacc248179c42d738624f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwNzA1NTNjZWY0YmI1Y2NkOWZhYWNjMjQ4MTc5YzQyZDczODYyNGY=", "commit": {"author": {"name": "Christopher Durham", "email": "cad97@cad97.com", "date": "2020-03-03T04:30:14Z"}, "committer": {"name": "CAD97", "email": "cad97@cad97.com", "date": "2020-03-03T04:50:10Z"}, "message": "Clean xtask partial artifacts in `xtask pre-cache`", "tree": {"sha": "7c14e924e679997af03002fc6c02c59b37727596", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c14e924e679997af03002fc6c02c59b37727596"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e070553cef4bb5ccd9faacc248179c42d738624f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e070553cef4bb5ccd9faacc248179c42d738624f", "html_url": "https://github.com/rust-lang/rust/commit/e070553cef4bb5ccd9faacc248179c42d738624f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e070553cef4bb5ccd9faacc248179c42d738624f/comments", "author": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce5684216eda52a6da6a2933a980bd5655da61b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce5684216eda52a6da6a2933a980bd5655da61b8", "html_url": "https://github.com/rust-lang/rust/commit/ce5684216eda52a6da6a2933a980bd5655da61b8"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "50c4265cf905999705bb57e68b0895ca0e6bb748", "filename": ".github/workflows/ci.yaml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e070553cef4bb5ccd9faacc248179c42d738624f/.github%2Fworkflows%2Fci.yaml", "raw_url": "https://github.com/rust-lang/rust/raw/e070553cef4bb5ccd9faacc248179c42d738624f/.github%2Fworkflows%2Fci.yaml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yaml?ref=e070553cef4bb5ccd9faacc248179c42d738624f", "patch": "@@ -87,7 +87,7 @@ jobs:\n \n       - name: Prepare cache 2\n         if: matrix.os == 'windows-latest'\n-        run: Remove-Item ./target/debug/xtask.exe\n+        run: Remove-Item ./target/debug/xtask.exe, ./target/debug/deps/xtask.exe\n \n   typescript:\n     name: TypeScript"}, {"sha": "f48045d17e1e5a86abe7a8d529b43f1b4de0f730", "filename": "xtask/src/lib.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e070553cef4bb5ccd9faacc248179c42d738624f/xtask%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e070553cef4bb5ccd9faacc248179c42d738624f/xtask%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Flib.rs?ref=e070553cef4bb5ccd9faacc248179c42d738624f", "patch": "@@ -139,12 +139,15 @@ pub fn run_pre_cache() -> Result<()> {\n     }\n \n     fs2::remove_file(\"./target/.rustc_info.json\")?;\n-    let to_delete = [\"ra_\", \"heavy_test\"];\n+    let to_delete = [\"ra_\", \"heavy_test\", \"xtask\"];\n     for &dir in [\"./target/debug/deps\", \"target/debug/.fingerprint\"].iter() {\n         for entry in Path::new(dir).read_dir()? {\n             let entry = entry?;\n             if to_delete.iter().any(|&it| entry.path().display().to_string().contains(it)) {\n-                rm_rf(&entry.path())?\n+                // Can't delete yourself on windows :-(\n+                if !entry.path().ends_with(\"xtask.exe\") {\n+                    rm_rf(&entry.path())?\n+                }\n             }\n         }\n     }"}]}