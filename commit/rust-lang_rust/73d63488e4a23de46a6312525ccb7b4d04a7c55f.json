{"sha": "73d63488e4a23de46a6312525ccb7b4d04a7c55f", "node_id": "C_kwDOAAsO6NoAKDczZDYzNDg4ZTRhMjNkZTQ2YTYzMTI1MjVjY2I3YjRkMDRhN2M1NWY", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2022-03-17T11:27:30Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2022-03-23T13:53:59Z"}, "message": "Add futex_wake_all.", "tree": {"sha": "69c2869b3de3835cc02eece443d1b8f8b0e76e7a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69c2869b3de3835cc02eece443d1b8f8b0e76e7a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/73d63488e4a23de46a6312525ccb7b4d04a7c55f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/73d63488e4a23de46a6312525ccb7b4d04a7c55f", "html_url": "https://github.com/rust-lang/rust/commit/73d63488e4a23de46a6312525ccb7b4d04a7c55f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/73d63488e4a23de46a6312525ccb7b4d04a7c55f/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4fbd71c94324965f5a3bcf01845b6da0d51076b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/4fbd71c94324965f5a3bcf01845b6da0d51076b7", "html_url": "https://github.com/rust-lang/rust/commit/4fbd71c94324965f5a3bcf01845b6da0d51076b7"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "cc6da97ec730670d3c7db74be1bec07d3bd42817", "filename": "library/std/src/sys/unix/futex.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/73d63488e4a23de46a6312525ccb7b4d04a7c55f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73d63488e4a23de46a6312525ccb7b4d04a7c55f/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffutex.rs?ref=73d63488e4a23de46a6312525ccb7b4d04a7c55f", "patch": "@@ -66,6 +66,18 @@ pub fn futex_wake(futex: &AtomicI32) {\n     }\n }\n \n+#[cfg(any(target_os = \"linux\", target_os = \"android\"))]\n+pub fn futex_wake_all(futex: &AtomicI32) {\n+    unsafe {\n+        libc::syscall(\n+            libc::SYS_futex,\n+            futex as *const AtomicI32,\n+            libc::FUTEX_WAKE | libc::FUTEX_PRIVATE_FLAG,\n+            i32::MAX,\n+        );\n+    }\n+}\n+\n #[cfg(target_os = \"emscripten\")]\n pub fn futex_wake(futex: &AtomicI32) {\n     extern \"C\" {"}]}