{"sha": "65f889919d23f5050b09ad4b80b0235f3c882cc7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1Zjg4OTkxOWQyM2Y1MDUwYjA5YWQ0YjgwYjAyMzVmM2M4ODJjYzc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-04-23T14:09:10Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-04-23T14:09:10Z"}, "message": "Auto merge of #24694 - liigo:toggle-all-docs-using-one-link, r=alexcrichton\n\nCombine the two links, [-] and [+], at top-right corner of the page, to use a single and the same one, so that:\r\n\r\n- one less link to be created/displayed\r\n- be consistent with other [-]/[+] links in the same page\r\n- people can easily toggle docs without moving their mouse pointer\r\n\r\nI also added tooltips/titles to these links.", "tree": {"sha": "d32cced6d2bbb31f3d762faf7d648b9ae5ea39f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d32cced6d2bbb31f3d762faf7d648b9ae5ea39f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/65f889919d23f5050b09ad4b80b0235f3c882cc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/65f889919d23f5050b09ad4b80b0235f3c882cc7", "html_url": "https://github.com/rust-lang/rust/commit/65f889919d23f5050b09ad4b80b0235f3c882cc7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/65f889919d23f5050b09ad4b80b0235f3c882cc7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1114fcd945f6e979660053aeed561bcfb5da669e", "url": "https://api.github.com/repos/rust-lang/rust/commits/1114fcd945f6e979660053aeed561bcfb5da669e", "html_url": "https://github.com/rust-lang/rust/commit/1114fcd945f6e979660053aeed561bcfb5da669e"}, {"sha": "7a5308152276e5629e4071424367796025d6eac5", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a5308152276e5629e4071424367796025d6eac5", "html_url": "https://github.com/rust-lang/rust/commit/7a5308152276e5629e4071424367796025d6eac5"}], "stats": {"total": 35, "additions": 20, "deletions": 15}, "files": [{"sha": "1993f03efd1fabbc8e7539be2ec4b93f57fe9e55", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/65f889919d23f5050b09ad4b80b0235f3c882cc7/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65f889919d23f5050b09ad4b80b0235f3c882cc7/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=65f889919d23f5050b09ad4b80b0235f3c882cc7", "patch": "@@ -1460,7 +1460,7 @@ impl<'a> fmt::Display for Item<'a> {\n         try!(write!(fmt, \"<span class='out-of-band'>\"));\n         try!(write!(fmt,\n         r##\"<span id='render-detail'>\n-            <a id=\"collapse-all\" href=\"#\">[-]</a>&nbsp;<a id=\"expand-all\" href=\"#\">[+]</a>\n+            <a id=\"toggle-all-docs\" href=\"#\" title=\"collapse all docs\">[-]</a>\n         </span>\"##));\n \n         // Write `src` tag\n@@ -1473,8 +1473,8 @@ impl<'a> fmt::Display for Item<'a> {\n             match self.href(self.cx) {\n                 Some(l) => {\n                     try!(write!(fmt, \"<a id='src-{}' class='srclink' \\\n-                                       href='{}'>[src]</a>\",\n-                                self.item.def_id.node, l));\n+                                       href='{}' title='{}'>[src]</a>\",\n+                                self.item.def_id.node, l, \"goto source code\"));\n                 }\n                 None => {}\n             }"}, {"sha": "9e00a64d3f5a63ce88928851dcffffcbf36b10d1", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/65f889919d23f5050b09ad4b80b0235f3c882cc7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/65f889919d23f5050b09ad4b80b0235f3c882cc7/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=65f889919d23f5050b09ad4b80b0235f3c882cc7", "patch": "@@ -806,18 +806,23 @@\n         window.location = $('.srclink').attr('href');\n     }\n \n-    $(\"#expand-all\").on(\"click\", function() {\n-        $(\".docblock\").show();\n-        $(\".toggle-label\").hide();\n-        $(\".toggle-wrapper\").removeClass(\"collapsed\");\n-        $(\".collapse-toggle\").children(\".inner\").html(\"-\");\n-    });\n-\n-    $(\"#collapse-all\").on(\"click\", function() {\n-        $(\".docblock\").hide();\n-        $(\".toggle-label\").show();\n-        $(\".toggle-wrapper\").addClass(\"collapsed\");\n-        $(\".collapse-toggle\").children(\".inner\").html(\"+\");\n+    $(\"#toggle-all-docs\").on(\"click\", function() {\n+        var toggle = $(\"#toggle-all-docs\");\n+        if (toggle.html() == \"[-]\") {\n+            toggle.html(\"[+]\");\n+            toggle.attr(\"title\", \"expand all docs\");\n+            $(\".docblock\").hide();\n+            $(\".toggle-label\").show();\n+            $(\".toggle-wrapper\").addClass(\"collapsed\");\n+            $(\".collapse-toggle\").children(\".inner\").html(\"+\");\n+        } else {\n+            toggle.html(\"[-]\");\n+            toggle.attr(\"title\", \"collapse all docs\");\n+            $(\".docblock\").show();\n+            $(\".toggle-label\").hide();\n+            $(\".toggle-wrapper\").removeClass(\"collapsed\");\n+            $(\".collapse-toggle\").children(\".inner\").html(\"-\");\n+        }\n     });\n \n     $(document).on(\"click\", \".collapse-toggle\", function() {"}]}