{"sha": "a389521c90c5f63637d9d19e94e6b65d49859c10", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzODk1MjFjOTBjNWY2MzYzN2Q5ZDE5ZTk0ZTZiNjVkNDk4NTljMTA=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-06T13:36:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-06T13:36:30Z"}, "message": "Rollup merge of #62837 - Kinrany:patch-1, r=GuillaumeGomez\n\nFix theme picker blur handler: always hide instead of switching\n\nFixes a minor bug in UI generated by rustdoc.\n\nFor example, this page: https://doc.rust-lang.org/std/\n\nReproduction steps:\n1. Click the theme picker twice\n   * The list of themes will be shown and then hidden\n2. Click anywhere else\n   * The list of themes will be show again, which is unexpected\n\nThe bug was caused by blur event handler toggling the state of the element instead of always hiding it regardless of the current state.", "tree": {"sha": "af5a3d19dade0f7e0756683a553e93f1bf3a5f5d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af5a3d19dade0f7e0756683a553e93f1bf3a5f5d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a389521c90c5f63637d9d19e94e6b65d49859c10", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdSYJeCRBK7hj4Ov3rIwAAdHIIABoNVx2t2gDoQn6k8fywKZHa\nr1ftRbH/Qhg63CnU1y7BfF1s9sEEalEB0EKeYwfCexxboHn4g1yxo7hQOZ/UuhVc\nfAx3F2Sju9JN4ZdDtjHNsC1MeAZY338A/fjBk/O3gO6LvGSUGoHIiPN1zePX64M6\nYI7p+iFEjz5islOHKCsaSaWWOQRzh7t7S0jDRK5ZR+Jgjm27wwbI7KSQPYcWODLL\nBtsiS5gEuH4eE6cDCi/UUQESY+K7+VHzzENjoFwwIPYOTEXoJG98YZnBSr5GKGcE\nA1pTeqYBSvGcpaD42ZMT3R0zjnPUfZYUo5mTvBjIBTuXEYX09Un0F/3lQQxr+WQ=\n=7Xn/\n-----END PGP SIGNATURE-----\n", "payload": "tree af5a3d19dade0f7e0756683a553e93f1bf3a5f5d\nparent e6994714d96eceef35ce6c420acd2fa2a17542e2\nparent 3e39ac718809c147141d4b6ed02b5db4a6779397\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1565098590 +0200\ncommitter GitHub <noreply@github.com> 1565098590 +0200\n\nRollup merge of #62837 - Kinrany:patch-1, r=GuillaumeGomez\n\nFix theme picker blur handler: always hide instead of switching\n\nFixes a minor bug in UI generated by rustdoc.\n\nFor example, this page: https://doc.rust-lang.org/std/\n\nReproduction steps:\n1. Click the theme picker twice\n   * The list of themes will be shown and then hidden\n2. Click anywhere else\n   * The list of themes will be show again, which is unexpected\n\nThe bug was caused by blur event handler toggling the state of the element instead of always hiding it regardless of the current state.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a389521c90c5f63637d9d19e94e6b65d49859c10", "html_url": "https://github.com/rust-lang/rust/commit/a389521c90c5f63637d9d19e94e6b65d49859c10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a389521c90c5f63637d9d19e94e6b65d49859c10/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6994714d96eceef35ce6c420acd2fa2a17542e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6994714d96eceef35ce6c420acd2fa2a17542e2", "html_url": "https://github.com/rust-lang/rust/commit/e6994714d96eceef35ce6c420acd2fa2a17542e2"}, {"sha": "3e39ac718809c147141d4b6ed02b5db4a6779397", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e39ac718809c147141d4b6ed02b5db4a6779397", "html_url": "https://github.com/rust-lang/rust/commit/3e39ac718809c147141d4b6ed02b5db4a6779397"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "b1cee0182052b88a620d32b45a633c9ebcdfde24", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/a389521c90c5f63637d9d19e94e6b65d49859c10/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a389521c90c5f63637d9d19e94e6b65d49859c10/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=a389521c90c5f63637d9d19e94e6b65d49859c10", "patch": "@@ -877,15 +877,23 @@ fn write_shared(\n r#\"var themes = document.getElementById(\"theme-choices\");\n var themePicker = document.getElementById(\"theme-picker\");\n \n+function showThemeButtonState() {{\n+    themes.style.display = \"none\";\n+    themePicker.style.borderBottomRightRadius = \"3px\";\n+    themePicker.style.borderBottomLeftRadius = \"3px\";\n+}}\n+\n+function hideThemeButtonState() {{\n+    themes.style.display = \"block\";\n+    themePicker.style.borderBottomRightRadius = \"0\";\n+    themePicker.style.borderBottomLeftRadius = \"0\";\n+}}\n+\n function switchThemeButtonState() {{\n     if (themes.style.display === \"block\") {{\n-        themes.style.display = \"none\";\n-        themePicker.style.borderBottomRightRadius = \"3px\";\n-        themePicker.style.borderBottomLeftRadius = \"3px\";\n+        showThemeButtonState();\n     }} else {{\n-        themes.style.display = \"block\";\n-        themePicker.style.borderBottomRightRadius = \"0\";\n-        themePicker.style.borderBottomLeftRadius = \"0\";\n+        hideThemeButtonState();\n     }}\n }};\n \n@@ -898,7 +906,7 @@ function handleThemeButtonsBlur(e) {{\n         (!related ||\n          (related.id !== \"themePicker\" &&\n           (!related.parentNode || related.parentNode.id !== \"theme-choices\")))) {{\n-        switchThemeButtonState();\n+        hideThemeButtonState();\n     }}\n }}\n "}]}