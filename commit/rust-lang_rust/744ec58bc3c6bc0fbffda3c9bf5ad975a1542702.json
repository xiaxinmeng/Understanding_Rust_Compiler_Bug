{"sha": "744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0NGVjNThiYzNjNmJjMGZiZmZkYTNjOWJmNWFkOTc1YTE1NDI3MDI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-02-25T12:51:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-25T12:51:36Z"}, "message": "Merge #3303\n\n3303: Simplify r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "eda6e27372d87a84556528ce27602fa0dda2b2cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eda6e27372d87a84556528ce27602fa0dda2b2cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeVRhYCRBK7hj4Ov3rIwAAdHIIAHnOSqbkwt6lrrJpZKmI0Vht\ni8elpm2ZGTtfCKHzYytzyUhrCaws2ysmFovtfdOJAPUJSc4MpzgJLfJrt/PlaWQo\nMSwqxQwh37KXf4plLnFPmATQi2hZ0KBRq5Rj4IJbG5QesGSKgf9dyZKy16OCbQjg\ntGNtyZBAkWTe/GdHAS5jdFz7t4YMfeYU6jvIFtOR05aT89g3LqOqp1z4gORCOyxc\n06jYK6nAF24/aFOTa74/gs80N7s0BQd4d5qLIxDlvjcJAFOFkAeNZlQRMAOmjFrm\n5ThMMDrrzBgLyBd3XEefwTKI7REPIEeuPu+0zwFmtXgTWH3aX5jY+WRPvtLAidI=\n=W/Nh\n-----END PGP SIGNATURE-----\n", "payload": "tree eda6e27372d87a84556528ce27602fa0dda2b2cf\nparent 3853a3b6436e48a7e13dc75bfe6391fa1275f235\nparent 6542ab89ceb32d6ec108a28ad9d938d24762c029\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1582635096 +0000\ncommitter GitHub <noreply@github.com> 1582635096 +0000\n\nMerge #3303\n\n3303: Simplify r=matklad a=matklad\n\n\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "html_url": "https://github.com/rust-lang/rust/commit/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3853a3b6436e48a7e13dc75bfe6391fa1275f235", "url": "https://api.github.com/repos/rust-lang/rust/commits/3853a3b6436e48a7e13dc75bfe6391fa1275f235", "html_url": "https://github.com/rust-lang/rust/commit/3853a3b6436e48a7e13dc75bfe6391fa1275f235"}, {"sha": "6542ab89ceb32d6ec108a28ad9d938d24762c029", "url": "https://api.github.com/repos/rust-lang/rust/commits/6542ab89ceb32d6ec108a28ad9d938d24762c029", "html_url": "https://github.com/rust-lang/rust/commit/6542ab89ceb32d6ec108a28ad9d938d24762c029"}], "stats": {"total": 22, "additions": 7, "deletions": 15}, "files": [{"sha": "51ac59a718b0db75a0712c68e7d6fd34978b8c27", "filename": "crates/ra_ide/src/call_hierarchy.rs", "status": "modified", "additions": 6, "deletions": 14, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702/crates%2Fra_ide%2Fsrc%2Fcall_hierarchy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702/crates%2Fra_ide%2Fsrc%2Fcall_hierarchy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcall_hierarchy.rs?ref=744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "patch": "@@ -4,16 +4,11 @@ use indexmap::IndexMap;\n \n use hir::db::AstDatabase;\n use ra_ide_db::RootDatabase;\n-use ra_syntax::{\n-    ast::{self, DocCommentsOwner},\n-    match_ast, AstNode, TextRange,\n-};\n+use ra_syntax::{ast, match_ast, AstNode, TextRange};\n \n use crate::{\n-    call_info::FnCallNode,\n-    display::{ShortLabel, ToNav},\n-    expand::descend_into_macros,\n-    goto_definition, references, FilePosition, NavigationTarget, RangeInfo,\n+    call_info::FnCallNode, display::ToNav, expand::descend_into_macros, goto_definition,\n+    references, FilePosition, NavigationTarget, RangeInfo,\n };\n \n #[derive(Debug, Clone)]\n@@ -49,6 +44,7 @@ pub(crate) fn incoming_calls(db: &RootDatabase, position: FilePosition) -> Optio\n     let refs = references::find_all_refs(db, position, None)?;\n \n     let mut calls = CallLocations::default();\n+    let mut sb = hir::SourceBinder::new(db);\n \n     for reference in refs.info.references() {\n         let file_id = reference.file_range.file_id;\n@@ -62,12 +58,8 @@ pub(crate) fn incoming_calls(db: &RootDatabase, position: FilePosition) -> Optio\n             match_ast! {\n                 match node {\n                     ast::FnDef(it) => {\n-                        Some(NavigationTarget::from_named(\n-                            db,\n-                            token.with_value(&it),\n-                            it.doc_comment_text(),\n-                            it.short_label(),\n-                        ))\n+                        let def = sb.to_def(token.with_value(it))?;\n+                        Some(def.to_nav(sb.db))\n                     },\n                     _ => { None },\n                 }"}, {"sha": "c9d0058a621795540be5a7987beedc1d3e1be85f", "filename": "crates/ra_ide/src/display/navigation_target.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/744ec58bc3c6bc0fbffda3c9bf5ad975a1542702/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fdisplay%2Fnavigation_target.rs?ref=744ec58bc3c6bc0fbffda3c9bf5ad975a1542702", "patch": "@@ -125,7 +125,7 @@ impl NavigationTarget {\n     }\n \n     /// Allows `NavigationTarget` to be created from a `NameOwner`\n-    pub(crate) fn from_named(\n+    fn from_named(\n         db: &RootDatabase,\n         node: InFile<&dyn ast::NameOwner>,\n         docs: Option<String>,"}]}