{"sha": "c0aa1f78b488e0c99441bd19cb31001d1daab8cf", "node_id": "C_kwDOAAsO6NoAKGMwYWExZjc4YjQ4OGUwYzk5NDQxYmQxOWNiMzEwMDFkMWRhYWI4Y2Y", "commit": {"author": {"name": "Dennis Luxen", "email": "info@project-osrm.org", "date": "2022-06-04T20:08:33Z"}, "committer": {"name": "Dennis Luxen", "email": "info@project-osrm.org", "date": "2022-06-05T20:47:01Z"}, "message": "Implement suggestion generation with snippet_with_applicability(.)", "tree": {"sha": "7a9f28524a9acf1a782d86c01b04b4f526f7dcd4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a9f28524a9acf1a782d86c01b04b4f526f7dcd4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0aa1f78b488e0c99441bd19cb31001d1daab8cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0aa1f78b488e0c99441bd19cb31001d1daab8cf", "html_url": "https://github.com/rust-lang/rust/commit/c0aa1f78b488e0c99441bd19cb31001d1daab8cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0aa1f78b488e0c99441bd19cb31001d1daab8cf/comments", "author": {"login": "DennisOSRM", "id": 1067895, "node_id": "MDQ6VXNlcjEwNjc4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1067895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DennisOSRM", "html_url": "https://github.com/DennisOSRM", "followers_url": "https://api.github.com/users/DennisOSRM/followers", "following_url": "https://api.github.com/users/DennisOSRM/following{/other_user}", "gists_url": "https://api.github.com/users/DennisOSRM/gists{/gist_id}", "starred_url": "https://api.github.com/users/DennisOSRM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DennisOSRM/subscriptions", "organizations_url": "https://api.github.com/users/DennisOSRM/orgs", "repos_url": "https://api.github.com/users/DennisOSRM/repos", "events_url": "https://api.github.com/users/DennisOSRM/events{/privacy}", "received_events_url": "https://api.github.com/users/DennisOSRM/received_events", "type": "User", "site_admin": false}, "committer": {"login": "DennisOSRM", "id": 1067895, "node_id": "MDQ6VXNlcjEwNjc4OTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1067895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DennisOSRM", "html_url": "https://github.com/DennisOSRM", "followers_url": "https://api.github.com/users/DennisOSRM/followers", "following_url": "https://api.github.com/users/DennisOSRM/following{/other_user}", "gists_url": "https://api.github.com/users/DennisOSRM/gists{/gist_id}", "starred_url": "https://api.github.com/users/DennisOSRM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DennisOSRM/subscriptions", "organizations_url": "https://api.github.com/users/DennisOSRM/orgs", "repos_url": "https://api.github.com/users/DennisOSRM/repos", "events_url": "https://api.github.com/users/DennisOSRM/events{/privacy}", "received_events_url": "https://api.github.com/users/DennisOSRM/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0409306bb02a73d9299410b42c9cd774a216090b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0409306bb02a73d9299410b42c9cd774a216090b", "html_url": "https://github.com/rust-lang/rust/commit/0409306bb02a73d9299410b42c9cd774a216090b"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "89cb015b7d4760c746ab7f3a55fab099f051ed0e", "filename": "clippy_lints/src/needless_parens_on_range_literal.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c0aa1f78b488e0c99441bd19cb31001d1daab8cf/clippy_lints%2Fsrc%2Fneedless_parens_on_range_literal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0aa1f78b488e0c99441bd19cb31001d1daab8cf/clippy_lints%2Fsrc%2Fneedless_parens_on_range_literal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_parens_on_range_literal.rs?ref=c0aa1f78b488e0c99441bd19cb31001d1daab8cf", "patch": "@@ -1,7 +1,7 @@\n use clippy_utils::{\n     diagnostics::span_lint_and_then,\n     higher,\n-    source::{snippet, snippet_opt},\n+    source::{snippet, snippet_with_applicability},\n };\n \n use rustc_ast::ast;\n@@ -62,12 +62,12 @@ fn check_for_parens(cx: &LateContext<'_>, e: &Expr<'_>, is_start: bool) {\n         // inspect the source code of the expression for parenthesis\n         if snippet_enclosed_in_parenthesis(&snippet(cx, e.span, \"\"));\n         then {\n+            let mut applicability = Applicability::MachineApplicable;\n             span_lint_and_then(cx, NEEDLESS_PARENS_ON_RANGE_LITERAL, e.span,\n                 \"needless parenthesis on range literal can be removed\",\n                 |diag| {\n-                        if let Some(suggestion) = snippet_opt(cx, literal.span) {\n-                        diag.span_suggestion(e.span, \"try\", suggestion, Applicability::MachineApplicable);\n-                    }\n+                    let suggestion = snippet_with_applicability(cx, literal.span, \"_\", &mut applicability);\n+                    diag.span_suggestion(e.span, \"try\", suggestion, applicability);\n                 });\n         }\n     }"}]}