{"sha": "d4c8a176657fcbeb038f86c470b808145bb62a29", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0YzhhMTc2NjU3ZmNiZWIwMzhmODZjNDcwYjgwODE0NWJiNjJhMjk=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-07-07T12:52:23Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-07-07T12:52:23Z"}, "message": "Update rustfmt for ast::ExprKind::MethodCall changes", "tree": {"sha": "00b52f06bbc3d85deed88b333bf2c364e7c1aff8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00b52f06bbc3d85deed88b333bf2c364e7c1aff8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4c8a176657fcbeb038f86c470b808145bb62a29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4c8a176657fcbeb038f86c470b808145bb62a29", "html_url": "https://github.com/rust-lang/rust/commit/d4c8a176657fcbeb038f86c470b808145bb62a29", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4c8a176657fcbeb038f86c470b808145bb62a29/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9a1938098507e095347318a130c073580d7fd0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9a1938098507e095347318a130c073580d7fd0e", "html_url": "https://github.com/rust-lang/rust/commit/b9a1938098507e095347318a130c073580d7fd0e"}], "stats": {"total": 28, "additions": 23, "deletions": 5}, "files": [{"sha": "c4dbacb04213ea67edd1bc3d5893cd95b0f292db", "filename": "src/chains.rs", "status": "modified", "additions": 23, "deletions": 5, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/d4c8a176657fcbeb038f86c470b808145bb62a29/src%2Fchains.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4c8a176657fcbeb038f86c470b808145bb62a29/src%2Fchains.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fchains.rs?ref=d4c8a176657fcbeb038f86c470b808145bb62a29", "patch": "@@ -437,13 +437,22 @@ fn rewrite_method_call_with_overflow(\n     context: &RewriteContext,\n     shape: Shape,\n ) -> bool {\n-    if let &ast::ExprKind::MethodCall(ref method_name, ref types, ref expressions) = expr_kind {\n+    if let &ast::ExprKind::MethodCall(ref segment, ref expressions) = expr_kind {\n         let shape = match shape.shrink_left(almost_total) {\n             Some(b) => b,\n             None => return false,\n         };\n+        let types = match segment.parameters {\n+            Some(ref params) => {\n+                match **params {\n+                    ast::PathParameters::AngleBracketed(ref data) => &data.types[..],\n+                    _ => &[],\n+                }\n+            }\n+            _ => &[],\n+        };\n         let mut last_rewrite = rewrite_method_call(\n-            method_name.node,\n+            segment.identifier,\n             types,\n             expressions,\n             total_span,\n@@ -466,7 +475,7 @@ fn rewrite_method_call_with_overflow(\n // is a try! macro, we'll convert it to shorthand when the option is set.\n fn pop_expr_chain(expr: &ast::Expr, context: &RewriteContext) -> Option<ast::Expr> {\n     match expr.node {\n-        ast::ExprKind::MethodCall(_, _, ref expressions) => {\n+        ast::ExprKind::MethodCall(_, ref expressions) => {\n             Some(convert_try(&expressions[0], context))\n         }\n         ast::ExprKind::TupField(ref subexpr, _) |\n@@ -504,8 +513,17 @@ fn rewrite_chain_subexpr(\n     };\n \n     match expr.node {\n-        ast::ExprKind::MethodCall(ref method_name, ref types, ref expressions) => {\n-            rewrite_method_call(method_name.node, types, expressions, span, context, shape)\n+        ast::ExprKind::MethodCall(ref segment, ref expressions) => {\n+            let types = match segment.parameters {\n+                Some(ref params) => {\n+                    match **params {\n+                        ast::PathParameters::AngleBracketed(ref data) => &data.types[..],\n+                        _ => &[],\n+                    }\n+                }\n+                _ => &[],\n+            };\n+            rewrite_method_call(segment.identifier, types, expressions, span, context, shape)\n         }\n         ast::ExprKind::Field(_, ref field) => rewrite_element(format!(\".{}\", field.node)),\n         ast::ExprKind::TupField(ref expr, ref field) => {"}]}