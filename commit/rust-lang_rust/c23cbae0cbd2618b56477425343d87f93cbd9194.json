{"sha": "c23cbae0cbd2618b56477425343d87f93cbd9194", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMyM2NiYWUwY2JkMjYxOGI1NjQ3NzQyNTM0M2Q4N2Y5M2NiZDkxOTQ=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-11-18T20:31:19Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-11-18T20:31:19Z"}, "message": "Add long error diagnostics for E0401", "tree": {"sha": "662839c336085c151471b6a9b75d8d99e55896ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/662839c336085c151471b6a9b75d8d99e55896ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c23cbae0cbd2618b56477425343d87f93cbd9194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c23cbae0cbd2618b56477425343d87f93cbd9194", "html_url": "https://github.com/rust-lang/rust/commit/c23cbae0cbd2618b56477425343d87f93cbd9194", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c23cbae0cbd2618b56477425343d87f93cbd9194/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3c68f646e957065fe5fabd4af850abaa8c4ee0af", "url": "https://api.github.com/repos/rust-lang/rust/commits/3c68f646e957065fe5fabd4af850abaa8c4ee0af", "html_url": "https://github.com/rust-lang/rust/commit/3c68f646e957065fe5fabd4af850abaa8c4ee0af"}], "stats": {"total": 72, "additions": 71, "deletions": 1}, "files": [{"sha": "85fb5d9ccf9e5c1f554c7597dc22569811867091", "filename": "src/librustc_resolve/diagnostics.rs", "status": "modified", "additions": 71, "deletions": 1, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/c23cbae0cbd2618b56477425343d87f93cbd9194/src%2Flibrustc_resolve%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c23cbae0cbd2618b56477425343d87f93cbd9194/src%2Flibrustc_resolve%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fdiagnostics.rs?ref=c23cbae0cbd2618b56477425343d87f93cbd9194", "patch": "@@ -273,6 +273,77 @@ on this topic:\n https://doc.rust-lang.org/reference.html#use-declarations\n \"##,\n \n+E0401: r##\"\n+Inner functions do not inherit type parameters from the functions they are\n+embedded in. For example, this will not compile:\n+\n+```\n+fn foo<T>(x: T) {\n+    fn bar(y: T) { // T is defined in the \"outer\" function\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+Functions inside functions are basically just like top-level functions, except\n+that they can only be called from the function they are in.\n+\n+There are a couple of solutions for this.\n+\n+You can use a closure:\n+\n+```\n+fn foo<T>(x: T) {\n+    let bar = |y: T| { // explicit type annotation may not be necessary\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+or copy over the parameters:\n+\n+```\n+fn foo<T>(x: T) {\n+    fn bar<T>(y: T) {\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+Be sure to copy over any bounds as well:\n+\n+```\n+fn foo<T: Copy>(x: T) {\n+    fn bar<T: Copy>(y: T) {\n+        // ..\n+    }\n+    bar(x);\n+}\n+```\n+\n+This may require additional type hints in the function body.\n+\n+In case the function is in an `impl`, defining a private helper function might\n+be easier:\n+\n+```\n+impl<T> Foo<T> {\n+    pub fn foo(&self, x: T) {\n+        self.bar(x);\n+    }\n+    fn bar(&self, y: T) {\n+        // ..\n+    }\n+}\n+```\n+\n+For default impls in traits, the private helper solution won't work, however\n+closures or copying the parameters should still work.\n+\"##,\n+\n E0403: r##\"\n Some type parameters have the same name. Example of erroneous code:\n \n@@ -909,7 +980,6 @@ register_diagnostics! {\n     E0254, // import conflicts with imported crate in this module\n     E0257,\n     E0258,\n-    E0401, // can't use type parameters from outer function\n     E0402, // cannot use an outer type parameter in this context\n     E0406, // undeclared associated type\n     E0408, // variable from pattern #1 is not bound in pattern #"}]}