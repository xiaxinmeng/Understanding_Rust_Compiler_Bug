{"sha": "fa82ef23b800a10209732e1af2558eea87e218e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhODJlZjIzYjgwMGExMDIwOTczMmUxYWYyNTU4ZWVhODdlMjE4ZTg=", "commit": {"author": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2014-05-04T07:44:19Z"}, "committer": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2014-05-08T19:06:22Z"}, "message": "Handle fallout in librustuv\n\nAPI Changes:\n\n- GetAddrInfoRequest::run() returns Result<Vec<..>, ..>\n- Process::spawn() returns Result<(.., Vec<..>), ..>", "tree": {"sha": "ffaff1b3f37784cf8478f9da6b69648cf02591cd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ffaff1b3f37784cf8478f9da6b69648cf02591cd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa82ef23b800a10209732e1af2558eea87e218e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa82ef23b800a10209732e1af2558eea87e218e8", "html_url": "https://github.com/rust-lang/rust/commit/fa82ef23b800a10209732e1af2558eea87e218e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa82ef23b800a10209732e1af2558eea87e218e8/comments", "author": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fac0d4e135540a4cb45b49a018d9c1e86fe7eea2", "url": "https://api.github.com/repos/rust-lang/rust/commits/fac0d4e135540a4cb45b49a018d9c1e86fe7eea2", "html_url": "https://github.com/rust-lang/rust/commit/fac0d4e135540a4cb45b49a018d9c1e86fe7eea2"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "4766630b0f421ecd05024a2377a398fa786c9c6a", "filename": "src/librustuv/addrinfo.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Faddrinfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Faddrinfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustuv%2Faddrinfo.rs?ref=fa82ef23b800a10209732e1af2558eea87e218e8", "patch": "@@ -33,7 +33,7 @@ pub struct GetAddrInfoRequest;\n \n impl GetAddrInfoRequest {\n     pub fn run(loop_: &Loop, node: Option<&str>, service: Option<&str>,\n-               hints: Option<ai::Hint>) -> Result<~[ai::Info], UvError> {\n+               hints: Option<ai::Hint>) -> Result<Vec<ai::Info>, UvError> {\n         assert!(node.is_some() || service.is_some());\n         let (_c_node, c_node_ptr) = match node {\n             Some(n) => {\n@@ -134,7 +134,7 @@ fn each_ai_flag(_f: |c_int, ai::Flag|) {\n }\n \n // Traverse the addrinfo linked list, producing a vector of Rust socket addresses\n-pub fn accum_addrinfo(addr: &Addrinfo) -> ~[ai::Info] {\n+pub fn accum_addrinfo(addr: &Addrinfo) -> Vec<ai::Info> {\n     unsafe {\n         let mut addr = addr.handle;\n \n@@ -180,6 +180,6 @@ pub fn accum_addrinfo(addr: &Addrinfo) -> ~[ai::Info] {\n             }\n         }\n \n-        return addrs.move_iter().collect();\n+        addrs\n     }\n }"}, {"sha": "d671e20868c5c39d64b80193fbad4f416c1f1d57", "filename": "src/librustuv/process.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Fprocess.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Fprocess.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustuv%2Fprocess.rs?ref=fa82ef23b800a10209732e1af2558eea87e218e8", "patch": "@@ -40,7 +40,8 @@ impl Process {\n     /// Returns either the corresponding process object or an error which\n     /// occurred.\n     pub fn spawn(io_loop: &mut UvIoFactory, config: process::ProcessConfig)\n-                -> Result<(Box<Process>, ~[Option<PipeWatcher>]), UvError> {\n+                -> Result<(Box<Process>, Vec<Option<PipeWatcher>>), UvError>\n+    {\n         let cwd = config.cwd.map(|s| s.to_c_str());\n         let mut io = vec![config.stdin, config.stdout, config.stderr];\n         for slot in config.extra_io.iter() {\n@@ -102,7 +103,7 @@ impl Process {\n         });\n \n         match ret {\n-            Ok(p) => Ok((p, ret_io.move_iter().collect())),\n+            Ok(p) => Ok((p, ret_io)),\n             Err(e) => Err(e),\n         }\n     }"}, {"sha": "50258c2583c65c33d169e4e31c36e4df8ff62071", "filename": "src/librustuv/uvio.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Fuvio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa82ef23b800a10209732e1af2558eea87e218e8/src%2Flibrustuv%2Fuvio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustuv%2Fuvio.rs?ref=fa82ef23b800a10209732e1af2558eea87e218e8", "patch": "@@ -178,7 +178,7 @@ impl IoFactory for UvIoFactory {\n     }\n \n     fn get_host_addresses(&mut self, host: Option<&str>, servname: Option<&str>,\n-                          hint: Option<ai::Hint>) -> Result<~[ai::Info], IoError> {\n+                          hint: Option<ai::Hint>) -> Result<Vec<ai::Info>, IoError> {\n         let r = GetAddrInfoRequest::run(&self.loop_, host, servname, hint);\n         r.map_err(uv_error_to_io_error)\n     }\n@@ -272,7 +272,7 @@ impl IoFactory for UvIoFactory {\n \n     fn spawn(&mut self, config: ProcessConfig)\n             -> Result<(Box<rtio::RtioProcess:Send>,\n-                       ~[Option<Box<rtio::RtioPipe:Send>>]),\n+                       Vec<Option<Box<rtio::RtioPipe:Send>>>),\n                       IoError>\n     {\n         match Process::spawn(self, config) {"}]}