{"sha": "32627d5abb8791d2de10199964128ea8238d5c2b", "node_id": "C_kwDOAAsO6NoAKDMyNjI3ZDVhYmI4NzkxZDJkZTEwMTk5OTY0MTI4ZWE4MjM4ZDVjMmI", "commit": {"author": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2022-05-07T00:46:19Z"}, "committer": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2022-06-06T18:15:23Z"}, "message": "Disable weak memory emulation on scheduler-dependent data race tests", "tree": {"sha": "d6efbbcb1dd2332a8f9dd060855f250c46b00e3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d6efbbcb1dd2332a8f9dd060855f250c46b00e3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/32627d5abb8791d2de10199964128ea8238d5c2b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE7dcbcBMl24/h63ldGBtJ+fOPM3QFAmKeRDsACgkQGBtJ+fOP\nM3Q1igv8D2+HCQcmuN5xG3dI8cNq1z/z4tF5FMxTuKCe6ShL4akrLuju9THJ0/d7\nk7DWfHVnWlsBUbQqS/z6eiYQwPmp0klJ0a01kJrgSpa3QOfjpifEF9xmoZCCuC9i\nLlt84NVe/+TQvhdTqbDEoO1azZe2uBvWG2iS2gfJ93b8WS3jFaAdU2NW6Vu0qVFm\nJmTNkALkEaCXk1H22QRzVdA6VoDCGgGTBdN/mMaZtVozTpnvXTIuzl5dTer+uQWo\nAVqBCSVZqqvJ6ubeBp5PBilnh2YZaZSlV0xuk3Y2AV3MREUDjfxAcbtUbNMa0PEn\nXsNSneCQ9mz8kTcLKLr+SSsE5EjB5mEvFAZCgnEdgQkkuHjXjlqDBM3elTY7qn21\ne5qOaUjzzjc+400IwzsIWetIPA+mj0dhScYccWuzXtCwCfmCLiCUO/Qg4PG8lG+t\nOy7SIcfTTZfWl+uDcO49wDJ/VN2fDRB/LlUH9VX8DDAfJTD+cWf4cqOH0fjAt3ID\nnsAlhp/j\n=sGwO\n-----END PGP SIGNATURE-----", "payload": "tree d6efbbcb1dd2332a8f9dd060855f250c46b00e3b\nparent 11ca975cd83351aae3b113ceb754dde4a304a6b5\nauthor Andy Wang <cbeuw.andy@gmail.com> 1651884379 +0100\ncommitter Andy Wang <cbeuw.andy@gmail.com> 1654539323 +0100\n\nDisable weak memory emulation on scheduler-dependent data race tests\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/32627d5abb8791d2de10199964128ea8238d5c2b", "html_url": "https://github.com/rust-lang/rust/commit/32627d5abb8791d2de10199964128ea8238d5c2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/32627d5abb8791d2de10199964128ea8238d5c2b/comments", "author": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11ca975cd83351aae3b113ceb754dde4a304a6b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/11ca975cd83351aae3b113ceb754dde4a304a6b5", "html_url": "https://github.com/rust-lang/rust/commit/11ca975cd83351aae3b113ceb754dde4a304a6b5"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "2ddbb657245a625d723572579f3f25cda1b8a8cc", "filename": "tests/fail/data_race/alloc_read_race.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Falloc_read_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Falloc_read_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Falloc_read_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,4 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n+// compile-flags: -Zmiri-disable-weak-memory-emulation\n #![feature(new_uninit)]\n \n use std::thread::spawn;"}, {"sha": "d32eb55676067588bc8d3784b7eb9b918ddea663", "filename": "tests/fail/data_race/alloc_write_race.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Falloc_write_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Falloc_write_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Falloc_write_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,4 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n+// compile-flags: -Zmiri-disable-weak-memory-emulation\n #![feature(new_uninit)]\n \n use std::thread::spawn;"}, {"sha": "b70db5f4ac4b77920624539516972574ed5c1a61", "filename": "tests/fail/data_race/dealloc_read_race_stack.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fdealloc_read_race_stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fdealloc_read_race_stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Fdealloc_read_race_stack.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation\n+// compile-flags: -Zmiri-disable-isolation -Zmiri-disable-weak-memory-emulation\n \n use std::thread::{spawn, sleep};\n use std::ptr::null_mut;"}, {"sha": "f2b49fc5f344ade90924e139739230695891bc5c", "filename": "tests/fail/data_race/dealloc_write_race_stack.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fdealloc_write_race_stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fdealloc_write_race_stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Fdealloc_write_race_stack.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation\n+// compile-flags: -Zmiri-disable-isolation -Zmiri-disable-weak-memory-emulation\n \n use std::thread::{spawn, sleep};\n use std::ptr::null_mut;"}, {"sha": "9edeed0af6521737684045db762af26bfd207e54", "filename": "tests/fail/data_race/read_write_race_stack.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fread_write_race_stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fread_write_race_stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Fread_write_race_stack.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation -Zmir-opt-level=0\n+// compile-flags: -Zmiri-disable-isolation -Zmir-opt-level=0 -Zmiri-disable-weak-memory-emulation\n \n // Note: mir-opt-level set to 0 to prevent the read of stack_var in thread 1\n // from being optimized away and preventing the detection of the data-race."}, {"sha": "20e63dc4b171a10443f85180195e837e3f10490c", "filename": "tests/fail/data_race/relax_acquire_race.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelax_acquire_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelax_acquire_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Frelax_acquire_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,4 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n+// compile-flags: -Zmiri-disable-weak-memory-emulation\n \n use std::thread::spawn;\n use std::sync::atomic::{AtomicUsize, Ordering};"}, {"sha": "6ff84aa04b2632fe41b6f76ad0ea92f0ca9e68e1", "filename": "tests/fail/data_race/release_seq_race.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelease_seq_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelease_seq_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Frelease_seq_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation\n+// compile-flags: -Zmiri-disable-isolation -Zmiri-disable-weak-memory-emulation\n \n use std::thread::{spawn, sleep};\n use std::sync::atomic::{AtomicUsize, Ordering};"}, {"sha": "1245fb96f497d50e18b46aa4541e43f1a790a774", "filename": "tests/fail/data_race/release_seq_race_same_thread.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelease_seq_race_same_thread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frelease_seq_race_same_thread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Frelease_seq_race_same_thread.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation\n+// compile-flags: -Zmiri-disable-isolation -Zmiri-disable-weak-memory-emulation\n \n use std::thread::spawn;\n use std::sync::atomic::{AtomicUsize, Ordering};"}, {"sha": "c968c83422c06d7feef5d0cd3574ffc83258ecd9", "filename": "tests/fail/data_race/rmw_race.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frmw_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Frmw_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Frmw_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,4 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n+// compile-flags: -Zmiri-disable-weak-memory-emulation\n \n use std::thread::spawn;\n use std::sync::atomic::{AtomicUsize, Ordering};"}, {"sha": "daa3e5f5c478961686e0661fd16b021589b19739", "filename": "tests/fail/data_race/write_write_race_stack.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fwrite_write_race_stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Ffail%2Fdata_race%2Fwrite_write_race_stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ffail%2Fdata_race%2Fwrite_write_race_stack.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,5 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n-// compile-flags: -Zmiri-disable-isolation\n+// compile-flags: -Zmiri-disable-isolation -Zmiri-disable-weak-memory-emulation\n \n use std::thread::{spawn, sleep};\n use std::ptr::null_mut;"}, {"sha": "c51080f474fb137b70f9428bac2841e26f882fbe", "filename": "tests/pass/concurrency/data_race.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Fpass%2Fconcurrency%2Fdata_race.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32627d5abb8791d2de10199964128ea8238d5c2b/tests%2Fpass%2Fconcurrency%2Fdata_race.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fconcurrency%2Fdata_race.rs?ref=32627d5abb8791d2de10199964128ea8238d5c2b", "patch": "@@ -1,4 +1,5 @@\n // ignore-windows: Concurrency on Windows is not supported yet.\n+// compile-flags: -Zmiri-disable-weak-memory-emulation\n \n \n use std::sync::atomic::{AtomicUsize, fence, Ordering};"}]}