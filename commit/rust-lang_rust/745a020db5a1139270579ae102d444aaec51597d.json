{"sha": "745a020db5a1139270579ae102d444aaec51597d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0NWEwMjBkYjVhMTEzOTI3MDU3OWFlMTAyZDQ0NGFhZWM1MTU5N2Q=", "commit": {"author": {"name": "Jed Davis", "email": "jld@panix.com", "date": "2013-01-08T03:10:16Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2013-01-13T22:37:59Z"}, "message": "Make () actually size 0", "tree": {"sha": "8a673639baaec33e7e051e6d8080b3eda6aadba2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a673639baaec33e7e051e6d8080b3eda6aadba2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/745a020db5a1139270579ae102d444aaec51597d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/745a020db5a1139270579ae102d444aaec51597d", "html_url": "https://github.com/rust-lang/rust/commit/745a020db5a1139270579ae102d444aaec51597d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/745a020db5a1139270579ae102d444aaec51597d/comments", "author": {"login": "jld", "id": 254973, "node_id": "MDQ6VXNlcjI1NDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/254973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jld", "html_url": "https://github.com/jld", "followers_url": "https://api.github.com/users/jld/followers", "following_url": "https://api.github.com/users/jld/following{/other_user}", "gists_url": "https://api.github.com/users/jld/gists{/gist_id}", "starred_url": "https://api.github.com/users/jld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jld/subscriptions", "organizations_url": "https://api.github.com/users/jld/orgs", "repos_url": "https://api.github.com/users/jld/repos", "events_url": "https://api.github.com/users/jld/events{/privacy}", "received_events_url": "https://api.github.com/users/jld/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5dc66ad3181ab4fa5fc3ccd806b25f3e5ddbe8f", "url": "https://api.github.com/repos/rust-lang/rust/commits/d5dc66ad3181ab4fa5fc3ccd806b25f3e5ddbe8f", "html_url": "https://github.com/rust-lang/rust/commit/d5dc66ad3181ab4fa5fc3ccd806b25f3e5ddbe8f"}], "stats": {"total": 21, "additions": 2, "deletions": 19}, "files": [{"sha": "5fd36228f7357a4e52e5246f14b46a51bcf0a72f", "filename": "src/librustc/middle/trans/common.rs", "status": "modified", "additions": 2, "deletions": 19, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/745a020db5a1139270579ae102d444aaec51597d/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/745a020db5a1139270579ae102d444aaec51597d/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fcommon.rs?ref=745a020db5a1139270579ae102d444aaec51597d", "patch": "@@ -722,28 +722,13 @@ impl block {\n \n // LLVM type constructors.\n fn T_void() -> TypeRef {\n-    // Note: For the time being llvm is kinda busted here, it has the notion\n-    // of a 'void' type that can only occur as part of the signature of a\n-    // function, but no general unit type of 0-sized value. This is, afaict,\n-    // vestigial from its C heritage, and we'll be attempting to submit a\n-    // patch upstream to fix it. In the mean time we only model function\n-    // outputs (Rust functions and C functions) using T_void, and model the\n-    // Rust general purpose nil type you can construct as 1-bit (always\n-    // zero). This makes the result incorrect for now -- things like a tuple\n-    // of 10 nil values will have 10-bit size -- but it doesn't seem like we\n-    // have any other options until it's fixed upstream.\n-\n     unsafe {\n         return llvm::LLVMVoidType();\n     }\n }\n \n fn T_nil() -> TypeRef {\n-    // NB: See above in T_void().\n-\n-    unsafe {\n-        return llvm::LLVMInt1Type();\n-    }\n+    return T_struct(~[])\n }\n \n fn T_metadata() -> TypeRef { unsafe { return llvm::LLVMMetadataType(); } }\n@@ -1098,9 +1083,7 @@ fn C_floating(s: ~str, t: TypeRef) -> ValueRef {\n }\n \n fn C_nil() -> ValueRef {\n-    // NB: See comment above in T_void().\n-\n-    return C_integral(T_i1(), 0u64, False);\n+    return C_struct(~[]);\n }\n \n fn C_bool(b: bool) -> ValueRef {"}]}