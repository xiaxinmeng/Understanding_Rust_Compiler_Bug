{"sha": "286b62e0da509888fb6cc05b5b174cb4353e6fd5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4NmI2MmUwZGE1MDk4ODhmYjZjYzA1YjViMTc0Y2I0MzUzZTZmZDU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-04T13:07:02Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-04T13:07:02Z"}, "message": "auto merge of #13295 : huonw/rust/gate-concat-idents, r=alexcrichton\n\nrustc: feature-gate `concat_idents!`.\r\n\r\nconcat_idents! is not as useful as it could be, due to macros only being\r\nallowed in limited places, and hygiene, so lets feature gate it until we\r\nmake a decision about it.\r\n\r\ncc #13294", "tree": {"sha": "4891c54aa8138b3caf26d66b29dbf83480e1aeee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4891c54aa8138b3caf26d66b29dbf83480e1aeee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/286b62e0da509888fb6cc05b5b174cb4353e6fd5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/286b62e0da509888fb6cc05b5b174cb4353e6fd5", "html_url": "https://github.com/rust-lang/rust/commit/286b62e0da509888fb6cc05b5b174cb4353e6fd5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/286b62e0da509888fb6cc05b5b174cb4353e6fd5/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37a9885429e8d76baad64877959400a81a2b4528", "url": "https://api.github.com/repos/rust-lang/rust/commits/37a9885429e8d76baad64877959400a81a2b4528", "html_url": "https://github.com/rust-lang/rust/commit/37a9885429e8d76baad64877959400a81a2b4528"}, {"sha": "6c5e1d092573a8c3085ac04a10572685b229a680", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c5e1d092573a8c3085ac04a10572685b229a680", "html_url": "https://github.com/rust-lang/rust/commit/6c5e1d092573a8c3085ac04a10572685b229a680"}], "stats": {"total": 26, "additions": 24, "deletions": 2}, "files": [{"sha": "5c0b9c8956519b0a24eb16cb25531e645935ee31", "filename": "src/librustc/front/feature_gate.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Flibrustc%2Ffront%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Flibrustc%2Ffront%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Ffeature_gate.rs?ref=286b62e0da509888fb6cc05b5b174cb4353e6fd5", "patch": "@@ -49,6 +49,8 @@ static KNOWN_FEATURES: &'static [(&'static str, Status)] = &[\n     (\"macro_registrar\", Active),\n     (\"log_syntax\", Active),\n     (\"trace_macros\", Active),\n+    (\"concat_idents\", Active),\n+\n     (\"simd\", Active),\n     (\"default_type_params\", Active),\n     (\"quote\", Active),\n@@ -229,6 +231,11 @@ impl<'a> Visitor<()> for Context<'a> {\n                 stable enough for use and is subject to change\");\n         }\n \n+        else if id == token::str_to_ident(\"concat_idents\") {\n+            self.gate_feature(\"concat_idents\", path.span, \"`concat_idents` is not \\\n+                stable enough for use and is subject to change\");\n+        }\n+\n         else {\n             for &quote in quotes.iter() {\n                 if id == token::str_to_ident(quote) {"}, {"sha": "f4f5be4d37a46f9e3d5e98701c562a77621a3f98", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=286b62e0da509888fb6cc05b5b174cb4353e6fd5", "patch": "@@ -52,14 +52,15 @@\n        html_favicon_url = \"http://www.rust-lang.org/favicon.ico\",\n        html_root_url = \"http://static.rust-lang.org/doc/master\")]\n #![feature(macro_rules, globs, asm, managed_boxes, thread_local, link_args,\n-           simd, linkage, default_type_params, phase)]\n+           simd, linkage, default_type_params, phase, concat_idents)]\n \n // Don't link to std. We are std.\n #![no_std]\n \n // #![deny(missing_doc)] // NOTE: uncomment after a stage0 snap\n #![allow(missing_doc)] // NOTE: remove after a stage0 snap\n #![allow(visible_private_types)] // NOTE: remove after a stage0 snap\n+#![allow(unknown_features)] // NOTE: remove after a stage0 snap\n \n // When testing libstd, bring in libuv as the I/O backend so tests can print\n // things and all of the std::io tests have an I/O interface to run on top"}, {"sha": "054e70f382268e18ff5d424292f59daf7b790e84", "filename": "src/test/compile-fail/gated-concat_idents.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fgated-concat_idents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fgated-concat_idents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fgated-concat_idents.rs?ref=286b62e0da509888fb6cc05b5b174cb4353e6fd5", "patch": "@@ -0,0 +1,13 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {\n+    concat_idents!(a, b); //~ ERROR `concat_idents` is not stable enough\n+}"}, {"sha": "df2c40657c814bd84108f4d7b60943a1d831ce89", "filename": "src/test/compile-fail/macros-nonfatal-errors.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacros-nonfatal-errors.rs?ref=286b62e0da509888fb6cc05b5b174cb4353e6fd5", "patch": "@@ -12,7 +12,7 @@\n // immediately, so that we get more errors listed at a time.\n \n #![feature(asm)]\n-#![feature(trace_macros)]\n+#![feature(trace_macros, concat_idents)]\n \n #[deriving(Default, //~ ERROR\n            Rand, //~ ERROR"}, {"sha": "2dc24753b0aec3141b085f6f00cdf310d13a9638", "filename": "src/test/compile-fail/syntax-extension-minor.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fsyntax-extension-minor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/286b62e0da509888fb6cc05b5b174cb4353e6fd5/src%2Ftest%2Fcompile-fail%2Fsyntax-extension-minor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fsyntax-extension-minor.rs?ref=286b62e0da509888fb6cc05b5b174cb4353e6fd5", "patch": "@@ -10,6 +10,7 @@\n \n // this now fails (correctly, I claim) because hygiene prevents\n // the assembled identifier from being a reference to the binding.\n+#![feature(concat_idents)]\n \n pub fn main() {\n     let asdf_fdsa = ~\"<.<\";"}]}