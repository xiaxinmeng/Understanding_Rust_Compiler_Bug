{"sha": "6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlNGYxNjE3M2MzMzFjYTNjY2FlMWZmZWNjNWE2OWYxYWQ1NGYzMGM=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-20T00:14:11Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-24T09:29:45Z"}, "message": "Demote template check error to a lint for `#[test]` and `#[bench]`", "tree": {"sha": "684e3e9da343d0dab6191e765935392d516ce692", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/684e3e9da343d0dab6191e765935392d516ce692"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "html_url": "https://github.com/rust-lang/rust/commit/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf8fc8adfc76f31a8fb6a4cb0dee02f262bd766a", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf8fc8adfc76f31a8fb6a4cb0dee02f262bd766a", "html_url": "https://github.com/rust-lang/rust/commit/bf8fc8adfc76f31a8fb6a4cb0dee02f262bd766a"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "dbf31ad0148325a1e3eda47eea8cfb9d1bd2de33", "filename": "src/libsyntax/attr/builtin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Flibsyntax%2Fattr%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Flibsyntax%2Fattr%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fattr%2Fbuiltin.rs?ref=6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "patch": "@@ -942,7 +942,8 @@ crate fn check_builtin_attribute(\n     // Some of previously accepted forms were used in practice,\n     // report them as warnings for now.\n     let should_warn = |name| name == sym::doc || name == sym::ignore ||\n-                             name == sym::inline || name == sym::link;\n+                             name == sym::inline || name == sym::link ||\n+                             name == sym::test || name == sym::bench;\n \n     match attr.parse_meta(sess) {\n         Ok(meta) => if !should_skip(name) && !template.compatible(&meta.node) {"}, {"sha": "37b5e792dc239f6a9ee3eaac800260afe30bea1b", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-bench.stderr", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-bench.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-bench.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-bench.stderr?ref=6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "patch": "@@ -1,13 +1,17 @@\n-error: malformed `bench` attribute input\n+warning: attribute must be of the form `#[bench]`\n   --> $DIR/issue-43106-gating-of-bench.rs:15:1\n    |\n LL | #![bench                   = \"4100\"]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: must be of the form: `#[bench]`\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: `#[warn(ill_formed_attribute_input)]` on by default\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #57571 <https://github.com/rust-lang/rust/issues/57571>\n \n error[E0601]: `main` function not found in crate `issue_43106_gating_of_bench`\n    |\n    = note: consider adding a `main` function to `$DIR/issue-43106-gating-of-bench.rs`\n \n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0601`."}, {"sha": "dbffabf3e02f93045198648d7104c4840a4fee53", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-test.stderr", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-test.stderr?ref=6e4f16173c331ca3ccae1ffecc5a69f1ad54f30c", "patch": "@@ -1,13 +1,17 @@\n-error: malformed `test` attribute input\n+warning: attribute must be of the form `#[test]`\n   --> $DIR/issue-43106-gating-of-test.rs:10:1\n    |\n LL | #![test                    = \"4200\"]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: must be of the form: `#[test]`\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: `#[warn(ill_formed_attribute_input)]` on by default\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n+   = note: for more information, see issue #57571 <https://github.com/rust-lang/rust/issues/57571>\n \n error[E0601]: `main` function not found in crate `issue_43106_gating_of_test`\n    |\n    = note: consider adding a `main` function to `$DIR/issue-43106-gating-of-test.rs`\n \n-error: aborting due to 2 previous errors\n+error: aborting due to previous error\n \n For more information about this error, try `rustc --explain E0601`."}]}