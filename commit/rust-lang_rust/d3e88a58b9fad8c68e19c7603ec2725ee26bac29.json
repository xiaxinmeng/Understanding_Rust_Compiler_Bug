{"sha": "d3e88a58b9fad8c68e19c7603ec2725ee26bac29", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzZTg4YTU4YjlmYWQ4YzY4ZTE5Yzc2MDNlYzI3MjVlZTI2YmFjMjk=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-11-06T17:14:47Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-11-06T17:14:47Z"}, "message": "Fix ICE #4775", "tree": {"sha": "b3e9180ee4c3da069c007b7f48843326a64420ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3e9180ee4c3da069c007b7f48843326a64420ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d3e88a58b9fad8c68e19c7603ec2725ee26bac29", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAl3C/4cACgkQaTCGhp1Q\nZjcRyA//YnVt5AWMeMfgDIiAWnUwhqdUc6lMJfHGlySrpnwyHUEcSSFJaM6qj6Sa\nOCNK+37YuHsfDop+CBjblGnPnca0pdJIDvzFQVmCqD4EOhAEf/K1NFoWibpIy9DJ\nmWC4PEdwX5/PWlr/kug5/JWYLwwlAiOkuEaEpqBsbrLQ7iDll+2ZAIwJlrsvmWNe\nANHa381SE4p5S+rVTzXE1AOIjECgzlRKx2r/N5S1NeqRvyBxsEMDYbo7SXtxYzh+\nPG2wBMgn3PoVNpyJMC0JzNEIsQObEOln724LOBp2JV0fqlXJgkMwBB33eL5kxePT\n90ucuYrV85WlfVI74IzEHrN3N3ercLIaBbFzP5wQMc14g7Jj0fDuRQckZtP+AdtO\n6aqbquOIdMtwnhMjbyNPG7rkGA7UPsoaH/cQqd21baZ1JtO0ZpWaKbmuJddm6shT\nZB/wTrrYbTxF0cu8zrMMKr1anlkJII7MbltDFJoZciF1wHsqz5C5028S6g3kvSdk\nU4dHSp6WeKt1UOlOT10AQGxOOvKtTI9lB/Nnlq0fPGlVwno0CM1hPZHckqJcf0/K\nb36OkcbbMVlbF/POhNVyBuAfA5fzeXXoHk96I0Bg3pC1pVOVukEWtz4FFb5P8R/s\nijM9xtrbcVyPntrxSjNq5EeK5lVu5pxEoyCibUFwjF60oqkAFjU=\n=vNdB\n-----END PGP SIGNATURE-----", "payload": "tree b3e9180ee4c3da069c007b7f48843326a64420ea\nparent 0be213bb79c7c476784e707880b2fae4ce5d5af7\nauthor flip1995 <hello@philkrones.com> 1573060487 +0100\ncommitter flip1995 <hello@philkrones.com> 1573060487 +0100\n\nFix ICE #4775\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d3e88a58b9fad8c68e19c7603ec2725ee26bac29", "html_url": "https://github.com/rust-lang/rust/commit/d3e88a58b9fad8c68e19c7603ec2725ee26bac29", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d3e88a58b9fad8c68e19c7603ec2725ee26bac29/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0be213bb79c7c476784e707880b2fae4ce5d5af7", "url": "https://api.github.com/repos/rust-lang/rust/commits/0be213bb79c7c476784e707880b2fae4ce5d5af7", "html_url": "https://github.com/rust-lang/rust/commit/0be213bb79c7c476784e707880b2fae4ce5d5af7"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "805e609cea6e3c32a1e25cacc62ecf0dd619a7a0", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d3e88a58b9fad8c68e19c7603ec2725ee26bac29/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3e88a58b9fad8c68e19c7603ec2725ee26bac29/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=d3e88a58b9fad8c68e19c7603ec2725ee26bac29", "patch": "@@ -1993,7 +1993,13 @@ fn is_ref_iterable_type(cx: &LateContext<'_, '_>, e: &Expr) -> bool {\n fn is_iterable_array<'tcx>(ty: Ty<'tcx>, cx: &LateContext<'_, 'tcx>) -> bool {\n     // IntoIterator is currently only implemented for array sizes <= 32 in rustc\n     match ty.kind {\n-        ty::Array(_, n) => (0..=32).contains(&n.eval_usize(cx.tcx, cx.param_env)),\n+        ty::Array(_, n) => {\n+            if let Some(val) = n.try_eval_usize(cx.tcx, cx.param_env) {\n+                (0..=32).contains(&val)\n+            } else {\n+                false\n+            }\n+        },\n         _ => false,\n     }\n }"}]}