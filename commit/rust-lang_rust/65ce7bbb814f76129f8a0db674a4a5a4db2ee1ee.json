{"sha": "65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1Y2U3YmJiODE0Zjc2MTI5ZjhhMGRiNjc0YTRhNWE0ZGIyZWUxZWU=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-03-15T18:26:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-03-15T18:26:50Z"}, "message": "Merge pull request #2533 from topecongiro/rustc-ap-syntax\n\nUpdate to the latest rustc-ap-syntax", "tree": {"sha": "571ea989f2678774e0ee5a153f385b65c7ce8f39", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/571ea989f2678774e0ee5a153f385b65c7ce8f39"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaqrrqCRBK7hj4Ov3rIwAAdHIIAKpE5ubC3ZwY44L5lY0AQTUG\nC1jLg6XAFb23fmMMP0IaFjN7epeT3NiFmyIucKYOVqWXJWfJp6bNWnyqYZzeDWPH\nSRIKbU6Wwcs3qCvTRA7LhrrH5oELQ2OGI+UVJqBfKOqvfpEisg9s7KaUjQThkX4X\nUFy2lfV1ZtDJfQ5GoxsybVQ9wjCyY1Gl75gZuHGDCbcwhDm0evar5J0dVtllXt9N\nwabvqa4SO7zhx2SksJdxQkCHvT6mNwzjKR4fZO1D5Aw++bde/EnymXSMFqZQE3ul\nP/BvsxmRuEuPqiZXkDEZ+qz8b/c4f26jo+QfcBM4NCJV5pIM40Zye2OdJ1A1EX8=\n=S4J9\n-----END PGP SIGNATURE-----\n", "payload": "tree 571ea989f2678774e0ee5a153f385b65c7ce8f39\nparent 0dca70f29004d107d3e707b667aca2b8e6f331a6\nparent eda626cfc9659658a89cc28680066f69aef11b0e\nauthor Nick Cameron <nrc@ncameron.org> 1521138410 +1300\ncommitter GitHub <noreply@github.com> 1521138410 +1300\n\nMerge pull request #2533 from topecongiro/rustc-ap-syntax\n\nUpdate to the latest rustc-ap-syntax"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "html_url": "https://github.com/rust-lang/rust/commit/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0dca70f29004d107d3e707b667aca2b8e6f331a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dca70f29004d107d3e707b667aca2b8e6f331a6", "html_url": "https://github.com/rust-lang/rust/commit/0dca70f29004d107d3e707b667aca2b8e6f331a6"}, {"sha": "eda626cfc9659658a89cc28680066f69aef11b0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/eda626cfc9659658a89cc28680066f69aef11b0e", "html_url": "https://github.com/rust-lang/rust/commit/eda626cfc9659658a89cc28680066f69aef11b0e"}], "stats": {"total": 175, "additions": 99, "deletions": 76}, "files": [{"sha": "6d9204881c7ba6fb4e6671f621176ac345c46ec4", "filename": "Cargo.lock", "status": "modified", "additions": 72, "deletions": 62, "changes": 134, "blob_url": "https://github.com/rust-lang/rust/blob/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "patch": "@@ -33,7 +33,7 @@ name = \"backtrace-sys\"\n version = \"0.1.16\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"cc 1.0.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cc 1.0.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.39 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -49,19 +49,19 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"cargo_metadata\"\n-version = \"0.5.1\"\n+version = \"0.5.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"error-chain 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"semver 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_derive 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"cc\"\n-version = \"1.0.5\"\n+version = \"1.0.7\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -104,13 +104,13 @@ dependencies = [\n \n [[package]]\n name = \"env_logger\"\n-version = \"0.5.4\"\n+version = \"0.5.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"atty 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"humantime 1.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"regex 0.2.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 0.2.9 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"termcolor 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -276,27 +276,27 @@ dependencies = [\n \n [[package]]\n name = \"regex\"\n-version = \"0.2.7\"\n+version = \"0.2.9\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"aho-corasick 0.6.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"memchr 2.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"regex-syntax 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex-syntax 0.5.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"thread_local 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"utf8-ranges 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"regex-syntax\"\n-version = \"0.5.0\"\n+version = \"0.5.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"ucd-util 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-rustc_cratesio_shim\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -305,58 +305,62 @@ dependencies = [\n \n [[package]]\n name = \"rustc-ap-rustc_data_structures\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot_core 0.2.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"stable_deref_trait 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-rustc_errors\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rustc-ap-rustc_data_structures 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax_pos 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"atty 0.2.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax_pos 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"termcolor 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-width 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-serialize\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"rustc-ap-syntax\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_cratesio_shim 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_data_structures 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_errors 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax_pos 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_cratesio_shim 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_errors 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax_pos 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scoped-tls 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"rustc-ap-syntax_pos\"\n-version = \"60.0.0\"\n+version = \"67.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rustc-ap-rustc_data_structures 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-serialize 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_data_structures 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-serialize 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"scoped-tls 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-width 0.1.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -370,34 +374,39 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n name = \"rustfmt-nightly\"\n version = \"0.4.0\"\n dependencies = [\n- \"cargo_metadata 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cargo_metadata 0.5.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"derive-new 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"env_logger 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"env_logger 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"itertools 0.7.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.39 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"regex 0.2.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-rustc_errors 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"rustc-ap-syntax 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_derive 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_json 1.0.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"regex 0.2.9 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-rustc_errors 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-ap-syntax 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_json 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"term 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"toml 0.4.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unicode-segmentation 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"scoped-tls\"\n+version = \"0.1.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+\n [[package]]\n name = \"semver\"\n-version = \"0.8.0\"\n+version = \"0.9.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -407,23 +416,23 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"serde\"\n-version = \"1.0.29\"\n+version = \"1.0.32\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"serde_derive\"\n-version = \"1.0.29\"\n+version = \"1.0.32\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"proc-macro2 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"quote 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde_derive_internals 0.20.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde_derive_internals 0.20.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"syn 0.12.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"serde_derive_internals\"\n-version = \"0.20.0\"\n+version = \"0.20.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"proc-macro2 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -432,13 +441,13 @@ dependencies = [\n \n [[package]]\n name = \"serde_json\"\n-version = \"1.0.10\"\n+version = \"1.0.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"itoa 0.3.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num-traits 0.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -511,7 +520,7 @@ name = \"toml\"\n version = \"0.4.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -596,15 +605,15 @@ dependencies = [\n \"checksum backtrace-sys 0.1.16 (registry+https://github.com/rust-lang/crates.io-index)\" = \"44585761d6161b0f57afc49482ab6bd067e4edef48c12a152c237eb0203f7661\"\n \"checksum bitflags 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b3c30d3802dfb7281680d6285f2ccdaa8c2d8fee41f93805dba5c4cf50dc23cf\"\n \"checksum byteorder 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"652805b7e73fada9d85e9a6682a4abd490cb52d96aeecc12e33a0de34dfd0d23\"\n-\"checksum cargo_metadata 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ab46e9ef52c8e10e1a41fe4064c77fb82abe4a1e532d259c1ee67624c984b099\"\n-\"checksum cc 1.0.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9be26b24e988625409b19736d130f0c7d224f01d06454b5f81d8d23d6c1a618f\"\n+\"checksum cargo_metadata 0.5.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b5caae26de3704081ef638f87f05a6891b04f2b7d5ce9429a3de21095528ae22\"\n+\"checksum cc 1.0.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"87f38f122db5615319a985757e526c00161d924d19b71a0f3e80c52bab1adcf6\"\n \"checksum cfg-if 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d4c819a1287eb618df47cc647173c5c4c66ba19d888a6e50d605672aed3140de\"\n \"checksum derive-new 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"92f8b8e1d6c8a5f5ea0849a0e4c55941576115c62d3fc425e96918bbbeb3d3c2\"\n \"checksum diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3c2b69f912779fbb121ceb775d74d51e915af17aaebc38d28a592843a2dd0a3a\"\n \"checksum dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"09c3753c3db574d215cba4ea76018483895d7bff25a31b49ba45db21c48e50ab\"\n \"checksum either 1.4.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"740178ddf48b1a9e878e6d6509a1442a2d42fd2928aae8e7a6f8a36fb01981b3\"\n \"checksum ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f8b449f3b18c89d2dbe40548d2ee4fa58ea0a08b761992da6ecb9788e4688834\"\n-\"checksum env_logger 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f3cc21490995c841d68e00276eba02071ebb269ec24011d5728bd00eabd39e31\"\n+\"checksum env_logger 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f0628f04f7c26ebccf40d7fc2c1cf92236c05ec88cf2132641cc956812312f0f\"\n \"checksum error-chain 0.11.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ff511d5dc435d703f4971bc399647c9bc38e20cb41452e3b9feb4765419ed3f3\"\n \"checksum fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2e9763c69ebaae630ba35f74888db465e49e259ba1bc0eda7d06f4a067615d82\"\n \"checksum fuchsia-zircon-sys 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3dcaa9ae7725d12cdb85b3ad99a434db70b468c09ded17e012d86b5c1010f7a7\"\n@@ -627,21 +636,22 @@ dependencies = [\n \"checksum rand 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"eba5f8cb59cc50ed56be8880a5c7b496bfd9bd26394e176bc67884094145c2c5\"\n \"checksum redox_syscall 0.1.37 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0d92eecebad22b767915e4d529f89f28ee96dbbf5a4810d2b844373f136417fd\"\n \"checksum redox_termios 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7e891cfe48e9100a70a3b6eb652fef28920c117d366339687bd5576160db0f76\"\n-\"checksum regex 0.2.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a62bf8bb734ab90b7f234b681b01af396e5d39b028906c210dc04fa1d5e9e5b3\"\n-\"checksum regex-syntax 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"48d7391e7e90e06eaf3aefbe4652464153ecfec64806f3bf77ffc59638a63e77\"\n-\"checksum rustc-ap-rustc_cratesio_shim 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0cdab515774981bbc3bc25e2100e338d7536ada96a0f8b3b73b95843d2832001\"\n-\"checksum rustc-ap-rustc_data_structures 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"dc20957dcf8cb9a585299fa1428a37b8e64de5f8810060fef22c7079a9de4b01\"\n-\"checksum rustc-ap-rustc_errors 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"765b7063bfd56d7d57b5883b97c1ec381b64d0d7b85d4d131c4b4b319dc61ea2\"\n-\"checksum rustc-ap-serialize 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"733ade6fd9bb57e3cf26c0185af1930c4d2f67c2049b95f99973e143744c4eb6\"\n-\"checksum rustc-ap-syntax 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"0e06967572c333febd3834874cb56d6442b894d9e5a41d28e9a42f09869cc5bc\"\n-\"checksum rustc-ap-syntax_pos 60.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a8aebf406db73579363faa50cd85d8111fe9c17004a89d9c9fe78bb6f5d949e1\"\n+\"checksum regex 0.2.9 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bde64a9b799f85750f6469fd658cff5fce8d910a7d510858a1f9d15ca9f023bf\"\n+\"checksum regex-syntax 0.5.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b2550876c31dc914696a6c2e01cbce8afba79a93c8ae979d2fe051c0230b3756\"\n+\"checksum rustc-ap-rustc_cratesio_shim 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"adc16e4a6e50a4ffbd4633d737aedbdfcb565bdf658159e0544266908180a919\"\n+\"checksum rustc-ap-rustc_data_structures 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5ec5f0a018fbec07f64b689ac20f7343ed77939055ca07d2aceb37c832245b1b\"\n+\"checksum rustc-ap-rustc_errors 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8301221cc07002666eed552a089b15000bc954c94b14a460c0653363a7f42f4c\"\n+\"checksum rustc-ap-serialize 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"5212ee40fc332d791cacf202ae5fb99197341857c0a14bcdf60541fea7dfc5ed\"\n+\"checksum rustc-ap-syntax 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"168571b3878c6c61aef4bacef95c86d30fa61fb1cff04395d9535c80c196e559\"\n+\"checksum rustc-ap-syntax_pos 67.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"cd7a0486f56db583caa665c8b4ff02c4774fe279db1741509437bc8a84c53361\"\n \"checksum rustc-demangle 0.1.7 (registry+https://github.com/rust-lang/crates.io-index)\" = \"11fb43a206a04116ffd7cfcf9bcb941f8eb6cc7ff667272246b0a1c74259a3cb\"\n-\"checksum semver 0.8.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"bee2bc909ab2d8d60dab26e8cad85b25d795b14603a0dcb627b78b9d30b6454b\"\n+\"checksum scoped-tls 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8674d439c964889e2476f474a3bf198cc9e199e77499960893bac5de7e9218a4\"\n+\"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\"\n \"checksum semver-parser 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n-\"checksum serde 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4763b773978e495252615e814d2ad04773b2c1f85421c7913869a537f35cb406\"\n-\"checksum serde_derive 1.0.29 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8ab31f00ae5574bb643c196d5e302961c122da1c768604c6d16a35c5d551948a\"\n-\"checksum serde_derive_internals 0.20.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1fc848d073be32cd982380c06587ea1d433bc1a4c4a111de07ec2286a3ddade8\"\n-\"checksum serde_json 1.0.10 (registry+https://github.com/rust-lang/crates.io-index)\" = \"57781ed845b8e742fc2bf306aba8e3b408fe8c366b900e3769fbc39f49eb8b39\"\n+\"checksum serde 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c73f63e08b33f6e59dfb3365b009897ebc3a3edc4af6e4f3ce8e483cf3d80ce7\"\n+\"checksum serde_derive 1.0.32 (registry+https://github.com/rust-lang/crates.io-index)\" = \"9cd9e89b8be5b611971734eaf887f1da0ce1a5b51491f04b09fe855649a84f3b\"\n+\"checksum serde_derive_internals 0.20.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a79b781fe5c4a7037a10a485249a499ea02927046360afe7e04885aad2f9c10c\"\n+\"checksum serde_json 1.0.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"fab6c4d75bedcf880711c85e39ebf8ccc70d0eba259899047ec5d7436643ee17\"\n \"checksum smallvec 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"44db0ecb22921ef790d17ae13a3f6d15784183ff5f2a01aa32098c7498d2b4b9\"\n \"checksum stable_deref_trait 1.0.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"15132e0e364248108c5e2c02e3ab539be8d6f5d52a01ca9bbf27ed657316f02b\"\n \"checksum syn 0.12.14 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8c5bc2d6ff27891209efa5f63e9de78648d7801f085e4653701a692ce938d6fd\""}, {"sha": "528513fca9217cea43545c8dd293eb4a08097195", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "patch": "@@ -46,8 +46,8 @@ env_logger = \"0.5\"\n getopts = \"0.2\"\n derive-new = \"0.5\"\n cargo_metadata = \"0.5.1\"\n-rustc-ap-syntax = \"60.0.0\"\n-rustc-ap-rustc_errors = \"60.0.0\"\n+rustc-ap-syntax = \"67.0.0\"\n+rustc-ap-rustc_errors = \"67.0.0\"\n \n [dev-dependencies]\n lazy_static = \"1.0.0\""}, {"sha": "37cf29196ace9ce07bd8795546c3cb5361841ec1", "filename": "src/lib.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "patch": "@@ -657,6 +657,14 @@ pub fn format_code_block(code_snippet: &str, config: &Config) -> Option<String>\n }\n \n pub fn format_input<T: Write>(\n+    input: Input,\n+    config: &Config,\n+    out: Option<&mut T>,\n+) -> Result<(Summary, FileMap, FormatReport), (io::Error, Summary)> {\n+    syntax::with_globals(|| format_input_inner(input, config, out))\n+}\n+\n+fn format_input_inner<T: Write>(\n     input: Input,\n     config: &Config,\n     mut out: Option<&mut T>,"}, {"sha": "b260e15501fcfb39cec97c9a9fb1fcf4b20784f1", "filename": "src/macros.rs", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=65ce7bbb814f76129f8a0db674a4a5a4db2ee1ee", "patch": "@@ -962,22 +962,27 @@ fn format_lazy_static(context: &RewriteContext, shape: Shape, ts: &TokenStream)\n #[cfg(test)]\n mod test {\n     use super::*;\n+    use syntax;\n     use syntax::parse::{parse_stream_from_source_str, ParseSess};\n     use syntax::codemap::{FileName, FilePathMapping};\n \n     fn format_macro_args_str(s: &str) -> String {\n-        let input = parse_stream_from_source_str(\n-            FileName::Custom(\"stdin\".to_owned()),\n-            s.to_owned(),\n-            &ParseSess::new(FilePathMapping::empty()),\n-            None,\n-        );\n-        let shape = Shape {\n-            width: 100,\n-            indent: Indent::empty(),\n-            offset: 0,\n-        };\n-        format_macro_args(input.into(), shape).unwrap()\n+        let mut result = String::new();\n+        syntax::with_globals(|| {\n+            let input = parse_stream_from_source_str(\n+                FileName::Custom(\"stdin\".to_owned()),\n+                s.to_owned(),\n+                &ParseSess::new(FilePathMapping::empty()),\n+                None,\n+            );\n+            let shape = Shape {\n+                width: 100,\n+                indent: Indent::empty(),\n+                offset: 0,\n+            };\n+            result = format_macro_args(input.into(), shape).unwrap();\n+        });\n+        result\n     }\n \n     #[test]"}]}