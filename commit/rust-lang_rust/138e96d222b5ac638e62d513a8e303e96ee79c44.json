{"sha": "138e96d222b5ac638e62d513a8e303e96ee79c44", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzOGU5NmQyMjJiNWFjNjM4ZTYyZDUxM2E4ZTMwM2U5NmVlNzljNDQ=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-11-19T22:58:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-19T22:58:33Z"}, "message": "Rollup merge of #79119 - jamesmunns:patch-1, r=Mark-Simulacrum\n\nClarify availability of atomic operations\n\nThis was noticed while we were updating the embedded rust book: https://github.com/rust-embedded/book/pull/273/files\n\nThese targets do natively have atomic load/stores, but do not support CAS operations.", "tree": {"sha": "ca27d029f8bdc6d3ea87acbc012f993d6dbf0e1d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca27d029f8bdc6d3ea87acbc012f993d6dbf0e1d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/138e96d222b5ac638e62d513a8e303e96ee79c44", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJftviZCRBK7hj4Ov3rIwAAdHIIADf1FYYriEcNh22SEe1/3us8\n7uQFkrA1GSWoGrz3iOt1C0qle9P1e0JXxNYC8/tcdhKuZz4Y+uloRGJJc+4LBlPT\nG7AsWNqwG5moerOe5tycdjEN3MA/x6Vi/qA6F5j+ntEqOPCwtO0JshL4NFQCJlTd\ndYgYOs3lZgjOxQsduHKamYnQrfxuKxRtjFcxUZK9J7njHjSaebT/ZxOtm96vaczL\nEq+FOPHZHgol2hJxB7KrgRMmh42PurH/itfh383te9l+7KOlxTS2UvDcp4/SKtPf\ndjvVGS7o5z2yoh//iaMLeQhsH2Zr8zJysITw3cA26sMw7iMlvLteyBCdo+5336g=\n=Cz9C\n-----END PGP SIGNATURE-----\n", "payload": "tree ca27d029f8bdc6d3ea87acbc012f993d6dbf0e1d\nparent fe982319aa0aa5bbfc2795791a753832292bd2ba\nparent 69477f50d86e1e28332ddaa1adb25846087e89ec\nauthor Dylan DPC <dylan.dpc@gmail.com> 1605826713 +0100\ncommitter GitHub <noreply@github.com> 1605826713 +0100\n\nRollup merge of #79119 - jamesmunns:patch-1, r=Mark-Simulacrum\n\nClarify availability of atomic operations\n\nThis was noticed while we were updating the embedded rust book: https://github.com/rust-embedded/book/pull/273/files\n\nThese targets do natively have atomic load/stores, but do not support CAS operations.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/138e96d222b5ac638e62d513a8e303e96ee79c44", "html_url": "https://github.com/rust-lang/rust/commit/138e96d222b5ac638e62d513a8e303e96ee79c44", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/138e96d222b5ac638e62d513a8e303e96ee79c44/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fe982319aa0aa5bbfc2795791a753832292bd2ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/fe982319aa0aa5bbfc2795791a753832292bd2ba", "html_url": "https://github.com/rust-lang/rust/commit/fe982319aa0aa5bbfc2795791a753832292bd2ba"}, {"sha": "69477f50d86e1e28332ddaa1adb25846087e89ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/69477f50d86e1e28332ddaa1adb25846087e89ec", "html_url": "https://github.com/rust-lang/rust/commit/69477f50d86e1e28332ddaa1adb25846087e89ec"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "9d2045990570b5e4a919b27e9435be3aaf5d550e", "filename": "library/core/src/sync/atomic.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/138e96d222b5ac638e62d513a8e303e96ee79c44/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/138e96d222b5ac638e62d513a8e303e96ee79c44/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs?ref=138e96d222b5ac638e62d513a8e303e96ee79c44", "patch": "@@ -47,9 +47,16 @@\n //!\n //! * PowerPC and MIPS platforms with 32-bit pointers do not have `AtomicU64` or\n //!   `AtomicI64` types.\n-//! * ARM platforms like `armv5te` that aren't for Linux do not have any atomics\n-//!   at all.\n-//! * ARM targets with `thumbv6m` do not have atomic operations at all.\n+//! * ARM platforms like `armv5te` that aren't for Linux only provide `load`\n+//!   and `store` operations, and do not support Compare and Swap (CAS)\n+//!   operations, such as `swap`, `fetch_add`, etc. Additionally on Linux,\n+//!   these CAS operations are implemented via [operating system support], which\n+//!   may come with a performance penalty.\n+//! * ARM targets with `thumbv6m` only provide `load` and `store` operations,\n+//!   and do not support Compare and Swap (CAS) operations, such as `swap`,\n+//!   `fetch_add`, etc.\n+//!\n+//! [operating system support]: https://www.kernel.org/doc/Documentation/arm/kernel_user_helpers.txt\n //!\n //! Note that future platforms may be added that also do not have support for\n //! some atomic operations. Maximally portable code will want to be careful"}]}