{"sha": "a9313e9077aa594afe80da8e423de614cada9040", "node_id": "C_kwDOAAsO6NoAKGE5MzEzZTkwNzdhYTU5NGFmZTgwZGE4ZTQyM2RlNjE0Y2FkYTkwNDA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-25T09:44:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-25T09:44:37Z"}, "message": "Rollup merge of #103648 - jyn514:no-preview, r=Mark-Simulacrum\n\nDon't set `is_preview` for clippy and rustfmt\n\nThese have been shipped on stable for many years now and it would be very disruptive to ever remove them.\nRemove the `-preview` suffix from their dist components.\n\nBased on https://github.com/rust-lang/rust/pull/102565.", "tree": {"sha": "0fd5cab2f4c4cc415968cd1506c5c82abaacdb1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0fd5cab2f4c4cc415968cd1506c5c82abaacdb1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a9313e9077aa594afe80da8e423de614cada9040", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjgI6FCRBK7hj4Ov3rIwAASl0IADErzZ6ZKxwcXoS0QlvSiwKv\nbkxMjqjudoyfd7Kj/g2llmuX6jOkVJoZLa84ClR9aKHVSmSmyZ8F3tUkjVVkf6dx\nd9Tc/tFzQ0F5diKfHaI8ufD2KbKwa54G8PnALajecQIIl++GsUxbehyXcmAhJfFI\nhi3e48EHUPORC8RdspQdTmezuOU8/xbUpyQOd5YwTUa5UWr1GR7EzBkGa2WtN0JH\nO4cqhtxdkbvyDf4d3ta0u8padbKGpUrUwMtjTn1wmpfL1hTeu8TI2XAZnMwF70+e\nw+2Ky5xYL6HrZCuIoQcMME8lTCFZrChmXrr6BHTU2cjdWYYVEYCapfBdMTnMCL8=\n=yAya\n-----END PGP SIGNATURE-----\n", "payload": "tree 0fd5cab2f4c4cc415968cd1506c5c82abaacdb1c\nparent 41e0363055ade59584cff667c79f64937e6ef3f9\nparent fb3e724d7602675f147a9b80e70fb6bd6512738c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669369477 +0100\ncommitter GitHub <noreply@github.com> 1669369477 +0100\n\nRollup merge of #103648 - jyn514:no-preview, r=Mark-Simulacrum\n\nDon't set `is_preview` for clippy and rustfmt\n\nThese have been shipped on stable for many years now and it would be very disruptive to ever remove them.\nRemove the `-preview` suffix from their dist components.\n\nBased on https://github.com/rust-lang/rust/pull/102565.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a9313e9077aa594afe80da8e423de614cada9040", "html_url": "https://github.com/rust-lang/rust/commit/a9313e9077aa594afe80da8e423de614cada9040", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a9313e9077aa594afe80da8e423de614cada9040/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41e0363055ade59584cff667c79f64937e6ef3f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/41e0363055ade59584cff667c79f64937e6ef3f9", "html_url": "https://github.com/rust-lang/rust/commit/41e0363055ade59584cff667c79f64937e6ef3f9"}, {"sha": "fb3e724d7602675f147a9b80e70fb6bd6512738c", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb3e724d7602675f147a9b80e70fb6bd6512738c", "html_url": "https://github.com/rust-lang/rust/commit/fb3e724d7602675f147a9b80e70fb6bd6512738c"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "a274d7b9aa1d3df2793feafdde7f9f61dcc4c5f9", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a9313e9077aa594afe80da8e423de614cada9040/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9313e9077aa594afe80da8e423de614cada9040/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=a9313e9077aa594afe80da8e423de614cada9040", "patch": "@@ -1191,7 +1191,6 @@ impl Step for Clippy {\n \n         let mut tarball = Tarball::new(builder, \"clippy\", &target.triple);\n         tarball.set_overlay(OverlayKind::Clippy);\n-        tarball.is_preview(true);\n         tarball.add_file(clippy, \"bin\", 0o755);\n         tarball.add_file(cargoclippy, \"bin\", 0o755);\n         tarball.add_legal_and_readme_to(\"share/doc/clippy\");\n@@ -1289,7 +1288,6 @@ impl Step for Rustfmt {\n             .expect(\"cargo fmt expected to build - essential tool\");\n         let mut tarball = Tarball::new(builder, \"rustfmt\", &target.triple);\n         tarball.set_overlay(OverlayKind::Rustfmt);\n-        tarball.is_preview(true);\n         tarball.add_file(rustfmt, \"bin\", 0o755);\n         tarball.add_file(cargofmt, \"bin\", 0o755);\n         tarball.add_legal_and_readme_to(\"share/doc/rustfmt\");\n@@ -1550,8 +1548,6 @@ impl Step for Extended {\n                     format!(\"{}-{}\", name, target.triple)\n                 } else if name == \"rust-analyzer\" {\n                     \"rust-analyzer-preview\".to_string()\n-                } else if name == \"clippy\" {\n-                    \"clippy-preview\".to_string()\n                 } else if name == \"rust-demangler\" {\n                     \"rust-demangler-preview\".to_string()\n                 } else if name == \"miri\" {"}, {"sha": "430b3496d007c7b0c0cffccacd4fbcfd1b7693a3", "filename": "src/bootstrap/download.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9313e9077aa594afe80da8e423de614cada9040/src%2Fbootstrap%2Fdownload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9313e9077aa594afe80da8e423de614cada9040/src%2Fbootstrap%2Fdownload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdownload.rs?ref=a9313e9077aa594afe80da8e423de614cada9040", "patch": "@@ -326,6 +326,8 @@ impl Config {\n         }\n \n         let filename = format!(\"rustfmt-{version}-{build}.tar.xz\", build = host.triple);\n+        // cfg(bootstrap): will need to be changed from `rustfmt-preview` to `rustfmt` the next time you run `bump-stage0`.\n+        // See <https://github.com/rust-lang/rust/pull/103648>\n         self.download_component(DownloadSource::Dist, filename, \"rustfmt-preview\", &date, \"stage0\");\n \n         self.fix_bin_or_dylib(&bin_root.join(\"bin\").join(\"rustfmt\"));"}, {"sha": "66e6982d6b4d3c9941aef8c6b766e7e4193fd777", "filename": "src/tools/build-manifest/src/versions.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a9313e9077aa594afe80da8e423de614cada9040/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fversions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9313e9077aa594afe80da8e423de614cada9040/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fversions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fversions.rs?ref=a9313e9077aa594afe80da8e423de614cada9040", "patch": "@@ -49,10 +49,10 @@ pkg_type! {\n     Cargo = \"cargo\",\n     HtmlDocs = \"rust-docs\",\n     RustAnalysis = \"rust-analysis\",\n+    Clippy = \"clippy\",\n+    Rustfmt = \"rustfmt\",\n     Rls = \"rls\"; preview = true,\n     RustAnalyzer = \"rust-analyzer\"; preview = true,\n-    Clippy = \"clippy\"; preview = true,\n-    Rustfmt = \"rustfmt\"; preview = true,\n     LlvmTools = \"llvm-tools\"; preview = true,\n     Miri = \"miri\"; preview = true,\n     JsonDocs = \"rust-docs-json\"; preview = true,"}, {"sha": "388203ee4637fb7b36dc0d98630d04f85bc25ae0", "filename": "src/tools/bump-stage0/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9313e9077aa594afe80da8e423de614cada9040/src%2Ftools%2Fbump-stage0%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9313e9077aa594afe80da8e423de614cada9040/src%2Ftools%2Fbump-stage0%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbump-stage0%2Fsrc%2Fmain.rs?ref=a9313e9077aa594afe80da8e423de614cada9040", "patch": "@@ -6,7 +6,7 @@ use std::convert::TryInto;\n \n const PATH: &str = \"src/stage0.json\";\n const COMPILER_COMPONENTS: &[&str] = &[\"rustc\", \"rust-std\", \"cargo\"];\n-const RUSTFMT_COMPONENTS: &[&str] = &[\"rustfmt-preview\"];\n+const RUSTFMT_COMPONENTS: &[&str] = &[\"rustfmt\"];\n \n struct Tool {\n     config: Config,"}]}