{"sha": "6cbcb830221a5525f333da95c93bd8622da00765", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjYmNiODMwMjIxYTU1MjVmMzMzZGE5NWM5M2JkODYyMmRhMDA3NjU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-05T10:11:39Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-01-11T02:30:20Z"}, "message": "{syntax -> rustc_ast_passes}::feature_gate", "tree": {"sha": "804ff416db1eaa8f697d599d7932f2a2783e9e75", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/804ff416db1eaa8f697d599d7932f2a2783e9e75"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6cbcb830221a5525f333da95c93bd8622da00765", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6cbcb830221a5525f333da95c93bd8622da00765", "html_url": "https://github.com/rust-lang/rust/commit/6cbcb830221a5525f333da95c93bd8622da00765", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6cbcb830221a5525f333da95c93bd8622da00765/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed69fbbc44b6e6ba5c41905835deaaae53e6f867", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed69fbbc44b6e6ba5c41905835deaaae53e6f867", "html_url": "https://github.com/rust-lang/rust/commit/ed69fbbc44b6e6ba5c41905835deaaae53e6f867"}], "stats": {"total": 27, "additions": 14, "deletions": 13}, "files": [{"sha": "772470d90c573ab5a7e5f6de6abc020d75eb6e23", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -3378,9 +3378,11 @@ dependencies = [\n name = \"rustc_ast_passes\"\n version = \"0.0.0\"\n dependencies = [\n+ \"log\",\n  \"rustc_data_structures\",\n  \"rustc_error_codes\",\n  \"rustc_errors\",\n+ \"rustc_feature\",\n  \"rustc_parse\",\n  \"rustc_session\",\n  \"rustc_span\",\n@@ -3553,6 +3555,7 @@ name = \"rustc_expand\"\n version = \"0.0.0\"\n dependencies = [\n  \"log\",\n+ \"rustc_ast_passes\",\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n  \"rustc_feature\","}, {"sha": "dced4a0d15b0c6f313602759fdd7b66b1ff2e6d7", "filename": "src/librustc_ast_passes/Cargo.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2FCargo.toml?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -9,9 +9,11 @@ name = \"rustc_ast_passes\"\n path = \"lib.rs\"\n \n [dependencies]\n+log = \"0.4\"\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\", package = \"rustc_errors\" }\n rustc_error_codes = { path = \"../librustc_error_codes\" }\n+rustc_feature = { path = \"../librustc_feature\" }\n rustc_parse = { path = \"../librustc_parse\" }\n rustc_session = { path = \"../librustc_session\" }\n rustc_span = { path = \"../librustc_span\" }"}, {"sha": "1e396d6fe8e47ed1ffe8f697a97f9b4f62978ace", "filename": "src/librustc_ast_passes/feature_gate.rs", "status": "renamed", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Ffeature_gate.rs?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -1,16 +1,15 @@\n-use crate::ast::{self, AssocTyConstraint, AssocTyConstraintKind, NodeId};\n-use crate::ast::{GenericParam, GenericParamKind, PatKind, RangeEnd, VariantData};\n-use crate::attr;\n-use crate::sess::{feature_err, leveled_feature_err, GateStrength, ParseSess};\n-use crate::visit::{self, FnKind, Visitor};\n-\n use rustc_error_codes::*;\n use rustc_errors::{struct_span_err, Handler};\n use rustc_feature::{AttributeGate, BUILTIN_ATTRIBUTE_MAP};\n use rustc_feature::{Features, GateIssue, UnstableFeatures};\n use rustc_span::source_map::Spanned;\n use rustc_span::symbol::sym;\n use rustc_span::Span;\n+use syntax::ast::{self, AssocTyConstraint, AssocTyConstraintKind, NodeId};\n+use syntax::ast::{GenericParam, GenericParamKind, PatKind, RangeEnd, VariantData};\n+use syntax::attr;\n+use syntax::sess::{feature_err, leveled_feature_err, GateStrength, ParseSess};\n+use syntax::visit::{self, FnKind, Visitor};\n \n use log::debug;\n ", "previous_filename": "src/libsyntax/feature_gate/check.rs"}, {"sha": "f8771471e000277aa55a9f0f7cdfd8e72782f1d8", "filename": "src/librustc_ast_passes/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_ast_passes%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Flib.rs?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -5,3 +5,4 @@\n #![feature(slice_patterns)]\n \n pub mod ast_validation;\n+pub mod feature_gate;"}, {"sha": "d04dd079be75dda338d6e3de0a247604c1bb1364", "filename": "src/librustc_expand/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_expand%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_expand%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2FCargo.toml?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -14,6 +14,7 @@ doctest = false\n rustc_serialize = { path = \"../libserialize\", package = \"serialize\" }\n log = \"0.4\"\n rustc_span = { path = \"../librustc_span\" }\n+rustc_ast_passes = { path = \"../librustc_ast_passes\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }\n rustc_feature = { path = \"../librustc_feature\" }"}, {"sha": "3254d0c913da3a2c9305688e3511a6d73531626d", "filename": "src/librustc_expand/expand.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_expand%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_expand%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2Fexpand.rs?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -18,7 +18,6 @@ use rustc_span::{FileName, Span, DUMMY_SP};\n use syntax::ast::{self, AttrItem, Block, Ident, LitKind, NodeId, PatKind, Path};\n use syntax::ast::{ItemKind, MacArgs, MacStmtStyle, StmtKind};\n use syntax::attr::{self, is_builtin_attr, HasAttrs};\n-use syntax::feature_gate;\n use syntax::mut_visit::*;\n use syntax::print::pprust;\n use syntax::ptr::P;\n@@ -1062,7 +1061,7 @@ impl<'a, 'b> InvocationCollector<'a, 'b> {\n     fn check_attributes(&mut self, attrs: &[ast::Attribute]) {\n         let features = self.cx.ecfg.features.unwrap();\n         for attr in attrs.iter() {\n-            feature_gate::check_attribute(attr, self.cx.parse_sess, features);\n+            rustc_ast_passes::feature_gate::check_attribute(attr, self.cx.parse_sess, features);\n             validate_attr::check_meta(self.cx.parse_sess, attr);\n \n             // macros are expanded before any lint passes so this warning has to be hardcoded"}, {"sha": "951fc63fe953c74ef5433cae90c84ab0cbe5c76c", "filename": "src/librustc_interface/passes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_interface%2Fpasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibrustc_interface%2Fpasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fpasses.rs?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -399,7 +399,7 @@ fn configure_and_expand_inner<'a>(\n \n     // Needs to go *after* expansion to be able to check the results of macro expansion.\n     sess.time(\"complete_gated_feature_checking\", || {\n-        syntax::feature_gate::check_crate(\n+        rustc_ast_passes::feature_gate::check_crate(\n             &krate,\n             &sess.parse_sess,\n             &sess.features_untracked(),"}, {"sha": "fcefe3d2a02e4bcaf00e8958dd664cb0c5068a83", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6cbcb830221a5525f333da95c93bd8622da00765/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=6cbcb830221a5525f333da95c93bd8622da00765", "patch": "@@ -75,10 +75,6 @@ pub mod ast;\n pub mod attr;\n pub mod entry;\n pub mod expand;\n-pub mod feature_gate {\n-    mod check;\n-    pub use check::{check_attribute, check_crate};\n-}\n pub mod mut_visit;\n pub mod ptr;\n pub mod show_span;"}]}