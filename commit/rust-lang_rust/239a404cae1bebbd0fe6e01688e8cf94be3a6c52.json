{"sha": "239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzOWE0MDRjYWUxYmViYmQwZmU2ZTAxNjg4ZThjZjk0YmUzYTZjNTI=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-07-01T19:57:08Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-07-01T19:57:08Z"}, "message": "ci: explicitly disable CRLF conversion on Windows\n\nThe Azure image enables CRLF conversion on Windows builders, but that\ncaused regressions both in our test suite (the miri test suite broke)\nand in the ecosystem, since we started shipping install scripts with\nCRLF endings instead of the old LF. The Godbolt Compiler Explorer is one\nsuch case of breakage.\n\nThis adds a step to the build explicitly disabling the conversion before\nthe repository is checked out.", "tree": {"sha": "9a0928295327c29fd177baf99e6577499df612c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9a0928295327c29fd177baf99e6577499df612c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl0aZxUACgkQPgar6Auq\n8ZwrbhAAhifw6TKzx6K7EQBQTlDIQB7nxspEKlMAYzw0vbabBAi70ogtNODH2zdh\ntwqhHtN0m001yhVAh/z6pGtjDo5xkWdVLN6ZONUQvpkOnLs8NFPImqK/4rPY1zTU\nQeYz+tlyOvw5CXbFawKQ6jq3F0DN1rXSZSgFbs2JRM3UmmT8KG9a3wVlI0JbROFP\nYE7G0ph2lGzk774cvkNeYNI7Mpi8ibLvh8bYXOVeEAXDWC7qhMv/EPjHkR2ckBlO\noJ17sYoAKJtiT0GwtvSHg8dT6Fag46YBJNifbT9FkGfVWF2zOFruidGDSamiwFvt\nTgCVdQo62SNZkrq31Fw97TqyGRbxUVT9QPex9tDTbZSa8VXtYASWgNZV9p7yuApN\nS7Du28pef84mqO7Qcepp+kMaydXjobp942XwESVJKVYCTnY+SsySIkCw2EwqxrT5\nGjXVHIorKLuq5PCpmMNSv4LsSwEyJtfLEj7o9ekFwQEeE66a4XDdolmQ41TYv3Eu\n4zHIs2UybU0pi1n+U8/BQ8vzWndc8Vn40lCz1mKmpeSuyqwTQf5gnVTMBYQ2fZU5\nAQ7lmAzFFYJI5PWNqE+qZiCPtGvOKwyt7yl5n8HWhWEiBY+mMeErd6TtZD8lZEYt\nfCzbbJIKSTuwoZnxh9tWHSnHntCRw1woTFj8Rx5aSOsvZ5HVrXU=\n=WDcj\n-----END PGP SIGNATURE-----", "payload": "tree 9a0928295327c29fd177baf99e6577499df612c3\nparent 6ea4036cd20a4b1ab1d56e555108c21735ff6946\nauthor Pietro Albini <pietro@pietroalbini.org> 1562011028 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1562011028 +0200\n\nci: explicitly disable CRLF conversion on Windows\n\nThe Azure image enables CRLF conversion on Windows builders, but that\ncaused regressions both in our test suite (the miri test suite broke)\nand in the ecosystem, since we started shipping install scripts with\nCRLF endings instead of the old LF. The Godbolt Compiler Explorer is one\nsuch case of breakage.\n\nThis adds a step to the build explicitly disabling the conversion before\nthe repository is checked out.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "html_url": "https://github.com/rust-lang/rust/commit/239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/239a404cae1bebbd0fe6e01688e8cf94be3a6c52/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6ea4036cd20a4b1ab1d56e555108c21735ff6946", "url": "https://api.github.com/repos/rust-lang/rust/commits/6ea4036cd20a4b1ab1d56e555108c21735ff6946", "html_url": "https://github.com/rust-lang/rust/commit/6ea4036cd20a4b1ab1d56e555108c21735ff6946"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "1ece3ceb088a0a544030d15af62aa483b2541172", "filename": ".azure-pipelines/steps/run.yml", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/239a404cae1bebbd0fe6e01688e8cf94be3a6c52/.azure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/239a404cae1bebbd0fe6e01688e8cf94be3a6c52/.azure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Fsteps%2Frun.yml?ref=239a404cae1bebbd0fe6e01688e8cf94be3a6c52", "patch": "@@ -8,6 +8,13 @@\n \n steps:\n \n+# Disable automatic line ending conversion, which is enabled by default on\n+# Azure's Windows image. Having the conversion enabled caused regressions both\n+# in our test suite (it broke miri tests) and in the ecosystem, since we\n+# started shipping install scripts with CRLF endings instead of the old LF.\n+- bash: git config --global core.autocrlf false\n+  displayName: \"Disable git automatic line ending conversion\"\n+\n - checkout: self\n   fetchDepth: 2\n "}]}