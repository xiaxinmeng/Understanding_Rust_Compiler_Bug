{"sha": "23f71fe5b518c6136990f79733155b4fa1314d2b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzZjcxZmU1YjUxOGM2MTM2OTkwZjc5NzMzMTU1YjRmYTEzMTRkMmI=", "commit": {"author": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2020-04-22T21:16:21Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2020-04-22T21:16:21Z"}, "message": "Add tests from Cow", "tree": {"sha": "9fcba3d480992ff2988400032626d254589056fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9fcba3d480992ff2988400032626d254589056fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/23f71fe5b518c6136990f79733155b4fa1314d2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/23f71fe5b518c6136990f79733155b4fa1314d2b", "html_url": "https://github.com/rust-lang/rust/commit/23f71fe5b518c6136990f79733155b4fa1314d2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/23f71fe5b518c6136990f79733155b4fa1314d2b/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d40751b37ef453bee5d8a9c47b00ef205d61738", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d40751b37ef453bee5d8a9c47b00ef205d61738", "html_url": "https://github.com/rust-lang/rust/commit/6d40751b37ef453bee5d8a9c47b00ef205d61738"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "8bfcf323f674a74c610038a96cb1ed3beb9b473d", "filename": "src/liballoc/tests/borrow.rs", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/23f71fe5b518c6136990f79733155b4fa1314d2b/src%2Fliballoc%2Ftests%2Fborrow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23f71fe5b518c6136990f79733155b4fa1314d2b/src%2Fliballoc%2Ftests%2Fborrow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Ftests%2Fborrow.rs?ref=23f71fe5b518c6136990f79733155b4fa1314d2b", "patch": "@@ -0,0 +1,47 @@\n+use std::borrow::{Cow, ToOwned};\n+use std::ffi::{CStr, OsStr};\n+use std::path::Path;\n+use std::rc::Rc;\n+use std::sync::Arc;\n+\n+macro_rules! test_from_cow {\n+    ($value:ident => $($ty:ty),+) => {$(\n+        let borrowed = <$ty>::from(Cow::Borrowed($value));\n+        let owned = <$ty>::from(Cow::Owned($value.to_owned()));\n+        assert_eq!($value, &*borrowed);\n+        assert_eq!($value, &*owned);\n+    )+};\n+    ($value:ident : & $ty:ty) => {\n+        test_from_cow!($value => Box<$ty>, Rc<$ty>, Arc<$ty>);\n+    }\n+}\n+\n+#[test]\n+fn test_from_cow_slice() {\n+    let slice: &[i32] = &[1, 2, 3];\n+    test_from_cow!(slice: &[i32]);\n+}\n+\n+#[test]\n+fn test_from_cow_str() {\n+    let string = \"hello\";\n+    test_from_cow!(string: &str);\n+}\n+\n+#[test]\n+fn test_from_cow_c_str() {\n+    let string = CStr::from_bytes_with_nul(b\"hello\\0\").unwrap();\n+    test_from_cow!(string: &CStr);\n+}\n+\n+#[test]\n+fn test_from_cow_os_str() {\n+    let string = OsStr::new(\"hello\");\n+    test_from_cow!(string: &OsStr);\n+}\n+\n+#[test]\n+fn test_from_cow_path() {\n+    let path = Path::new(\"hello\");\n+    test_from_cow!(path: &Path);\n+}"}, {"sha": "cbeceec6d78276b0ecc5ca0dea908eca0065098f", "filename": "src/liballoc/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/23f71fe5b518c6136990f79733155b4fa1314d2b/src%2Fliballoc%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/23f71fe5b518c6136990f79733155b4fa1314d2b/src%2Fliballoc%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Ftests%2Flib.rs?ref=23f71fe5b518c6136990f79733155b4fa1314d2b", "patch": "@@ -20,6 +20,7 @@ use std::hash::{Hash, Hasher};\n \n mod arc;\n mod binary_heap;\n+mod borrow;\n mod boxed;\n mod btree;\n mod cow_str;"}]}