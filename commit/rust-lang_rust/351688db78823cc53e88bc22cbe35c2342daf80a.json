{"sha": "351688db78823cc53e88bc22cbe35c2342daf80a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1MTY4OGRiNzg4MjNjYzUzZTg4YmMyMmNiZTM1YzIzNDJkYWY4MGE=", "commit": {"author": {"name": "Wilco Kusee", "email": "wilcokusee@gmail.com", "date": "2019-01-07T13:11:53Z"}, "committer": {"name": "Wilco Kusee", "email": "wilcokusee@gmail.com", "date": "2019-01-07T13:11:53Z"}, "message": "Improve tests and exclude nested impls", "tree": {"sha": "767b6c8e4cb1508cba50b5e2fb9e2bc851d7c6b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/767b6c8e4cb1508cba50b5e2fb9e2bc851d7c6b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/351688db78823cc53e88bc22cbe35c2342daf80a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQEcBAABAgAGBQJcM1AZAAoJENWyu1zcMzS8dfQIAINi5I9AOAyovUeOFlQJVFwp\n+MzbmoQtqoHuhiMqX0iaAyonkc5YjGfNMRmzfujjHPl69BD4BKcYxjExieJsBBr8\nl40SQPn+d0590y3YSmUA/MfsaUgAb30yYdVcH7OIvgL3FHb6/C01IPnZ2aSt0l72\nhFykhx7YWGF/kVDk0E9IUFuEtUppoZ1Q8UhqvhXpLxGpwIpF/KjC6El0Z9TywLDF\na90cCFIe4yyPnizJ3lAtT98AIXgi6fRgsw5yywpkO1KoRdKm9XFSKTCiMIMHB/Ks\nViLvmrd0Xco3413CtfGmJujnI7qWd0ivyB+VD/k6wELRJ2QkP9yYuBNq9D94PQY=\n=N6w2\n-----END PGP SIGNATURE-----", "payload": "tree 767b6c8e4cb1508cba50b5e2fb9e2bc851d7c6b7\nparent 7230768998b0574836e9a90a36175174c802e76b\nauthor Wilco Kusee <wilcokusee@gmail.com> 1546866713 +0100\ncommitter Wilco Kusee <wilcokusee@gmail.com> 1546866713 +0100\n\nImprove tests and exclude nested impls\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/351688db78823cc53e88bc22cbe35c2342daf80a", "html_url": "https://github.com/rust-lang/rust/commit/351688db78823cc53e88bc22cbe35c2342daf80a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/351688db78823cc53e88bc22cbe35c2342daf80a/comments", "author": {"login": "detrumi", "id": 5758008, "node_id": "MDQ6VXNlcjU3NTgwMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/detrumi", "html_url": "https://github.com/detrumi", "followers_url": "https://api.github.com/users/detrumi/followers", "following_url": "https://api.github.com/users/detrumi/following{/other_user}", "gists_url": "https://api.github.com/users/detrumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/detrumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/detrumi/subscriptions", "organizations_url": "https://api.github.com/users/detrumi/orgs", "repos_url": "https://api.github.com/users/detrumi/repos", "events_url": "https://api.github.com/users/detrumi/events{/privacy}", "received_events_url": "https://api.github.com/users/detrumi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "detrumi", "id": 5758008, "node_id": "MDQ6VXNlcjU3NTgwMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/5758008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/detrumi", "html_url": "https://github.com/detrumi", "followers_url": "https://api.github.com/users/detrumi/followers", "following_url": "https://api.github.com/users/detrumi/following{/other_user}", "gists_url": "https://api.github.com/users/detrumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/detrumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/detrumi/subscriptions", "organizations_url": "https://api.github.com/users/detrumi/orgs", "repos_url": "https://api.github.com/users/detrumi/repos", "events_url": "https://api.github.com/users/detrumi/events{/privacy}", "received_events_url": "https://api.github.com/users/detrumi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7230768998b0574836e9a90a36175174c802e76b", "url": "https://api.github.com/repos/rust-lang/rust/commits/7230768998b0574836e9a90a36175174c802e76b", "html_url": "https://github.com/rust-lang/rust/commit/7230768998b0574836e9a90a36175174c802e76b"}], "stats": {"total": 27, "additions": 24, "deletions": 3}, "files": [{"sha": "5ec809f1b76cdcaa9ae1c0c4140233b12213b22d", "filename": "clippy_lints/src/use_self.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/351688db78823cc53e88bc22cbe35c2342daf80a/clippy_lints%2Fsrc%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/351688db78823cc53e88bc22cbe35c2342daf80a/clippy_lints%2Fsrc%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fuse_self.rs?ref=351688db78823cc53e88bc22cbe35c2342daf80a", "patch": "@@ -246,7 +246,8 @@ impl<'a, 'tcx> Visitor<'tcx> for UseSelfVisitor<'a, 'tcx> {\n             | ItemKind::Static(..)\n             | ItemKind::Enum(..)\n             | ItemKind::Struct(..)\n-            | ItemKind::Union(..) => {\n+            | ItemKind::Union(..)\n+            | ItemKind::Impl(..) => {\n                 // Don't check statements that shadow `Self` or where `Self` can't be used\n             },\n             _ => walk_item(self, item),"}, {"sha": "464dd8143292fb2297f7626639057e725459c219", "filename": "tests/ui/use_self.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/351688db78823cc53e88bc22cbe35c2342daf80a/tests%2Fui%2Fuse_self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/351688db78823cc53e88bc22cbe35c2342daf80a/tests%2Fui%2Fuse_self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuse_self.rs?ref=351688db78823cc53e88bc22cbe35c2342daf80a", "patch": "@@ -250,6 +250,14 @@ mod nesting {\n             struct Bar {\n                 foo: Foo, // Foo != Self\n             }\n+\n+            impl Bar {\n+                fn bar() -> Bar {\n+                    Bar {\n+                        foo: Foo{},\n+                    }\n+                }\n+            }\n         }\n     }\n \n@@ -258,7 +266,7 @@ mod nesting {\n     }\n     impl Enum {\n         fn method() {\n-            use self::Enum::*;\n+            use self::Enum::*; // Issue 3425\n             static STATIC: Enum = Enum::A; // Can't use Self as type\n         }\n     }"}, {"sha": "a388579c9a3a329b1fbcdeed055638e8022dab71", "filename": "tests/ui/use_self.stderr", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/351688db78823cc53e88bc22cbe35c2342daf80a/tests%2Fui%2Fuse_self.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/351688db78823cc53e88bc22cbe35c2342daf80a/tests%2Fui%2Fuse_self.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuse_self.stderr?ref=351688db78823cc53e88bc22cbe35c2342daf80a", "patch": "@@ -150,5 +150,17 @@ LL |                 Foo {}\n LL |         use_self_expand!(); // Should lint in local macros\n    |         ------------------- in this macro invocation\n \n-error: aborting due to 24 previous errors\n+error: unnecessary structure name repetition\n+  --> $DIR/use_self.rs:255:29\n+   |\n+LL |                 fn bar() -> Bar {\n+   |                             ^^^ help: use the applicable keyword: `Self`\n+\n+error: unnecessary structure name repetition\n+  --> $DIR/use_self.rs:256:21\n+   |\n+LL |                     Bar {\n+   |                     ^^^ help: use the applicable keyword: `Self`\n+\n+error: aborting due to 26 previous errors\n "}]}