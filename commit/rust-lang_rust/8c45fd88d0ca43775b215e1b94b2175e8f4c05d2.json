{"sha": "8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "node_id": "C_kwDOAAsO6NoAKDhjNDVmZDg4ZDBjYTQzNzc1YjIxNWUxYjk0YjIxNzVlOGY0YzA1ZDI", "commit": {"author": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-11-11T11:54:53Z"}, "committer": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-11-11T12:03:30Z"}, "message": "New internal lint to make  `clippy::version` attribute mandatory", "tree": {"sha": "21a4089d91a95df3c078ef292d9cc4e738250dad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/21a4089d91a95df3c078ef292d9cc4e738250dad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEsfZNmu/fmIv8KDcv/Ny/Ka9k1gEFAmGNBpIACgkQ/Ny/Ka9k\n1gEKQw//ZSTOZoAHVMSlX92HV/U2zw+EFxZVWt1bqIs8FBJUfP6kmdkXV3cE61Yb\n+i/LGF5KJgEEcLO106b8GtGTWIQ0ZIGTynQ4Uj2n44kjOu6l59Y13GTylF2ZwDRC\nIArQj0Gvn3PX27mIZQeNd+bSzvRphl5L7UBF0mFEKhVhSxlmL/vDL4nMLkQ1FTzi\nXQCqBFMKMUfYEqKhbJ6c4ZtdctJyiwmZ9y0mMxNbbJzitg8KIKyWWKyncJVUBgc5\nxWOWSOrYIc3LfBmcdfJn9esFuzBk1BXLt5W8T0xKYRclttMqEXfXqFhsjayEcaev\nyLgYjABk6PVAFWFKmG5RPEI1eyQ7AcbTvpkJSpmFa8i3545+Lw5ZTT8F39KIBDf9\nxbMuSvP6rJrAyeEKK3FFmeHHvNBxRbJyXK2FHbf5GRV+qG+8iucqCLH6EyKx1Hew\n1JphucDG2C7oPt+2EWSAc4i7GO7aJ6rYCHvh50kHmbmLkOJwBCb+ubOM+7iPkkw5\nQXdKTddh7uN3hoMnBArjyV5UFbDD5ixGo8F5AmglBMYoAPF9W5+l8a/Va7bja926\n9jT4L8XbyXCUKWesdJg3wdfpFz/tiObVKjVVG4KMx5GqtIqcVRbCYnS3IDo2UJNS\nD1L7JfmjBwRJbD4AGRqEGlU0va2CYYpDVmwNHjWYtDZMQM5+nCQ=\n=LHLS\n-----END PGP SIGNATURE-----", "payload": "tree 21a4089d91a95df3c078ef292d9cc4e738250dad\nparent 94bc0a1c78f306186c830f716903e021c8ab7088\nauthor xFrednet <xFrednet@gmail.com> 1636631693 +0100\ncommitter xFrednet <xFrednet@gmail.com> 1636632210 +0100\n\nNew internal lint to make  `clippy::version` attribute mandatory\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "html_url": "https://github.com/rust-lang/rust/commit/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/comments", "author": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94bc0a1c78f306186c830f716903e021c8ab7088", "url": "https://api.github.com/repos/rust-lang/rust/commits/94bc0a1c78f306186c830f716903e021c8ab7088", "html_url": "https://github.com/rust-lang/rust/commit/94bc0a1c78f306186c830f716903e021c8ab7088"}], "stats": {"total": 162, "additions": 130, "deletions": 32}, "files": [{"sha": "7d4c7d2adb5b9e8063e5bdc2307ff8f33d23f42c", "filename": "clippy_lints/src/lib.register_internal.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.register_internal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.register_internal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_internal.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -13,6 +13,7 @@ store.register_group(true, \"clippy::internal\", Some(\"clippy_internal\"), vec![\n     LintId::of(utils::internal_lints::INVALID_PATHS),\n     LintId::of(utils::internal_lints::LINT_WITHOUT_LINT_PASS),\n     LintId::of(utils::internal_lints::MATCH_TYPE_ON_DIAGNOSTIC_ITEM),\n+    LintId::of(utils::internal_lints::MISSING_CLIPPY_VERSION_ATTRIBUTE),\n     LintId::of(utils::internal_lints::OUTER_EXPN_EXPN_DATA),\n     LintId::of(utils::internal_lints::PRODUCE_ICE),\n     LintId::of(utils::internal_lints::UNNECESSARY_SYMBOL_STR),"}, {"sha": "b32c9b060ae070bab63d5b1e23505f2a6aa3903c", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -24,6 +24,8 @@ store.register_lints(&[\n     #[cfg(feature = \"internal-lints\")]\n     utils::internal_lints::MATCH_TYPE_ON_DIAGNOSTIC_ITEM,\n     #[cfg(feature = \"internal-lints\")]\n+    utils::internal_lints::MISSING_CLIPPY_VERSION_ATTRIBUTE,\n+    #[cfg(feature = \"internal-lints\")]\n     utils::internal_lints::OUTER_EXPN_EXPN_DATA,\n     #[cfg(feature = \"internal-lints\")]\n     utils::internal_lints::PRODUCE_ICE,"}, {"sha": "5c436e1b9eb657897afca9f2f2a2ce87ee7baaad", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -153,6 +153,10 @@ macro_rules! declare_clippy_lint {\n \n #[cfg(feature = \"metadata-collector-lint\")]\n mod deprecated_lints;\n+#[cfg_attr(\n+    any(feature = \"internal-lints\", feature = \"metadata-collector-lint\"),\n+    allow(clippy::missing_clippy_version_attribute)\n+)]\n mod utils;\n \n // begin lints modules, do not remove this comment, it\u2019s used in `update_lints`"}, {"sha": "1f97c8ba7e62cbba28398aa3e43624af357e18ba", "filename": "clippy_lints/src/utils/internal_lints.rs", "status": "modified", "additions": 19, "deletions": 1, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finternal_lints.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -328,6 +328,15 @@ declare_clippy_lint! {\n     \"found an invalid `clippy::version` attribute\"\n }\n \n+declare_clippy_lint! {\n+    /// ### What it does\n+    /// Checks for declared clippy lints without the `clippy::version` attribute.\n+    ///\n+    pub MISSING_CLIPPY_VERSION_ATTRIBUTE,\n+    internal,\n+    \"found clippy lint without `clippy::version` attribute\"\n+}\n+\n declare_lint_pass!(ClippyLintsInternal => [CLIPPY_LINTS_INTERNAL]);\n \n impl EarlyLintPass for ClippyLintsInternal {\n@@ -365,7 +374,7 @@ pub struct LintWithoutLintPass {\n     registered_lints: FxHashSet<Symbol>,\n }\n \n-impl_lint_pass!(LintWithoutLintPass => [DEFAULT_LINT, LINT_WITHOUT_LINT_PASS, INVALID_CLIPPY_VERSION_ATTRIBUTE]);\n+impl_lint_pass!(LintWithoutLintPass => [DEFAULT_LINT, LINT_WITHOUT_LINT_PASS, INVALID_CLIPPY_VERSION_ATTRIBUTE, MISSING_CLIPPY_VERSION_ATTRIBUTE]);\n \n impl<'tcx> LateLintPass<'tcx> for LintWithoutLintPass {\n     fn check_item(&mut self, cx: &LateContext<'tcx>, item: &'tcx Item<'_>) {\n@@ -492,6 +501,15 @@ fn check_invalid_clippy_version_attribute(cx: &LateContext<'_>, item: &'_ Item<'\n                 \"please use a valid sematic version, see `doc/adding_lints.md`\",\n             );\n         }\n+    } else {\n+        span_lint_and_help(\n+            cx,\n+            MISSING_CLIPPY_VERSION_ATTRIBUTE,\n+            item.span,\n+            \"this lint is missing the `clippy::version` attribute or version value\",\n+            None,\n+            \"please use a `clippy::version` attribute, see `doc/adding_lints.md`\",\n+        );\n     }\n }\n "}, {"sha": "31acac89cc6351569753e91d6051a0ac59e0ec31", "filename": "tests/ui-internal/check_clippy_version_attribute.rs", "status": "modified", "additions": 22, "deletions": 4, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcheck_clippy_version_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcheck_clippy_version_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcheck_clippy_version_attribute.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -54,16 +54,34 @@ declare_tool_lint! {\n }\n \n ///////////////////////\n-// Ignored attributes\n+// Missing attribute test\n ///////////////////////\n declare_tool_lint! {\n     #[clippy::version]\n-    pub clippy::IGNORED_ONE,\n+    pub clippy::MISSING_ATTRIBUTE_ONE,\n     Warn,\n-    \"ONE\",\n+    \"Two\",\n     report_in_external_macro: true\n }\n \n-declare_lint_pass!(Pass2 => [VALID_ONE, VALID_TWO, VALID_THREE, INVALID_ONE, INVALID_TWO, IGNORED_ONE]);\n+declare_tool_lint! {\n+    pub clippy::MISSING_ATTRIBUTE_TWO,\n+    Warn,\n+    \"Two\",\n+    report_in_external_macro: true\n+}\n+\n+#[allow(clippy::missing_clippy_version_attribute)]\n+mod internal_clippy_lints {\n+    declare_tool_lint! {\n+        pub clippy::ALLOW_MISSING_ATTRIBUTE_ONE,\n+        Warn,\n+        \"Two\",\n+        report_in_external_macro: true\n+    }\n+}\n+\n+use crate::internal_clippy_lints::ALLOW_MISSING_ATTRIBUTE_ONE;\n+declare_lint_pass!(Pass2 => [VALID_ONE, VALID_TWO, VALID_THREE, INVALID_ONE, INVALID_TWO, MISSING_ATTRIBUTE_ONE, MISSING_ATTRIBUTE_TWO, ALLOW_MISSING_ATTRIBUTE_ONE]);\n \n fn main() {}"}, {"sha": "9302e02ccb9c4f1a203dca9d0c4ad19cd430f919", "filename": "tests/ui-internal/check_clippy_version_attribute.stderr", "status": "modified", "additions": 36, "deletions": 1, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcheck_clippy_version_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcheck_clippy_version_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcheck_clippy_version_attribute.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -34,5 +34,40 @@ LL | | }\n    = help: please use a valid sematic version, see `doc/adding_lints.md`\n    = note: this error originates in the macro `$crate::declare_tool_lint` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n-error: aborting due to 2 previous errors\n+error: this lint is missing the `clippy::version` attribute or version value\n+  --> $DIR/check_clippy_version_attribute.rs:59:1\n+   |\n+LL | / declare_tool_lint! {\n+LL | |     #[clippy::version]\n+LL | |     pub clippy::MISSING_ATTRIBUTE_ONE,\n+LL | |     Warn,\n+LL | |     \"Two\",\n+LL | |     report_in_external_macro: true\n+LL | | }\n+   | |_^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/check_clippy_version_attribute.rs:1:9\n+   |\n+LL | #![deny(clippy::internal)]\n+   |         ^^^^^^^^^^^^^^^^\n+   = note: `#[deny(clippy::missing_clippy_version_attribute)]` implied by `#[deny(clippy::internal)]`\n+   = help: please use a `clippy::version` attribute, see `doc/adding_lints.md`\n+   = note: this error originates in the macro `$crate::declare_tool_lint` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: this lint is missing the `clippy::version` attribute or version value\n+  --> $DIR/check_clippy_version_attribute.rs:67:1\n+   |\n+LL | / declare_tool_lint! {\n+LL | |     pub clippy::MISSING_ATTRIBUTE_TWO,\n+LL | |     Warn,\n+LL | |     \"Two\",\n+LL | |     report_in_external_macro: true\n+LL | | }\n+   | |_^\n+   |\n+   = help: please use a `clippy::version` attribute, see `doc/adding_lints.md`\n+   = note: this error originates in the macro `$crate::declare_tool_lint` (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: aborting due to 4 previous errors\n "}, {"sha": "a5a6f20ddd54aeee45784644c2bfe5a0f169a428", "filename": "tests/ui-internal/collapsible_span_lint_calls.fixed", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcollapsible_span_lint_calls.fixed?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,6 @@\n // run-rustfix\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate clippy_utils;"}, {"sha": "6d783aa0786bd3117c8219975971d693cf07a170", "filename": "tests/ui-internal/collapsible_span_lint_calls.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcollapsible_span_lint_calls.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,6 @@\n // run-rustfix\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate clippy_utils;"}, {"sha": "558d129916078b4d4883203ec7f311dc5d41cc11", "filename": "tests/ui-internal/collapsible_span_lint_calls.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcollapsible_span_lint_calls.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcollapsible_span_lint_calls.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: this call is collapsible\n-  --> $DIR/collapsible_span_lint_calls.rs:35:9\n+  --> $DIR/collapsible_span_lint_calls.rs:36:9\n    |\n LL | /         span_lint_and_then(cx, TEST_LINT, expr.span, lint_msg, |db| {\n LL | |             db.span_suggestion(expr.span, help_msg, sugg.to_string(), Applicability::MachineApplicable);\n@@ -14,31 +14,31 @@ LL | #![deny(clippy::internal)]\n    = note: `#[deny(clippy::collapsible_span_lint_calls)]` implied by `#[deny(clippy::internal)]`\n \n error: this call is collapsible\n-  --> $DIR/collapsible_span_lint_calls.rs:38:9\n+  --> $DIR/collapsible_span_lint_calls.rs:39:9\n    |\n LL | /         span_lint_and_then(cx, TEST_LINT, expr.span, lint_msg, |db| {\n LL | |             db.span_help(expr.span, help_msg);\n LL | |         });\n    | |__________^ help: collapse into: `span_lint_and_help(cx, TEST_LINT, expr.span, lint_msg, Some(expr.span), help_msg)`\n \n error: this call is collapsible\n-  --> $DIR/collapsible_span_lint_calls.rs:41:9\n+  --> $DIR/collapsible_span_lint_calls.rs:42:9\n    |\n LL | /         span_lint_and_then(cx, TEST_LINT, expr.span, lint_msg, |db| {\n LL | |             db.help(help_msg);\n LL | |         });\n    | |__________^ help: collapse into: `span_lint_and_help(cx, TEST_LINT, expr.span, lint_msg, None, help_msg)`\n \n error: this call is collspible\n-  --> $DIR/collapsible_span_lint_calls.rs:44:9\n+  --> $DIR/collapsible_span_lint_calls.rs:45:9\n    |\n LL | /         span_lint_and_then(cx, TEST_LINT, expr.span, lint_msg, |db| {\n LL | |             db.span_note(expr.span, note_msg);\n LL | |         });\n    | |__________^ help: collapse into: `span_lint_and_note(cx, TEST_LINT, expr.span, lint_msg, Some(expr.span), note_msg)`\n \n error: this call is collspible\n-  --> $DIR/collapsible_span_lint_calls.rs:47:9\n+  --> $DIR/collapsible_span_lint_calls.rs:48:9\n    |\n LL | /         span_lint_and_then(cx, TEST_LINT, expr.span, lint_msg, |db| {\n LL | |             db.note(note_msg);"}, {"sha": "5057a018300e98519207fed44c21d3e883b79f1c", "filename": "tests/ui-internal/custom_ice_message.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcustom_ice_message.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fcustom_ice_message.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fcustom_ice_message.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -4,6 +4,7 @@\n // normalize-stderr-test: \"', .*clippy_lints\" -> \"', clippy_lints\"\n \n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n \n fn it_looks_like_you_are_trying_to_kill_clippy() {}\n "}, {"sha": "da29aedb2a3aeff5372fc274395fdd4d277a097d", "filename": "tests/ui-internal/default_lint.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fdefault_lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fdefault_lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fdefault_lint.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,4 +1,5 @@\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n #[macro_use]"}, {"sha": "af6735f4e4d822bb4767b5b2293a838fb92ee5a7", "filename": "tests/ui-internal/default_lint.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fdefault_lint.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fdefault_lint.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fdefault_lint.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: the lint `TEST_LINT_DEFAULT` has the default lint description\n-  --> $DIR/default_lint.rs:17:1\n+  --> $DIR/default_lint.rs:18:1\n    |\n LL | / declare_tool_lint! {\n LL | |     pub clippy::TEST_LINT_DEFAULT,"}, {"sha": "b0d89e038aa8b19b95e19b65eb142b203f4ce353", "filename": "tests/ui-internal/if_chain_style.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fif_chain_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fif_chain_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fif_chain_style.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n #![warn(clippy::if_chain_style)]\n-#![allow(clippy::no_effect, clippy::nonminimal_bool)]\n+#![allow(clippy::no_effect, clippy::nonminimal_bool, clippy::missing_clippy_version_attribute)]\n \n extern crate if_chain;\n "}, {"sha": "6b7fd6efe394c0ebdf597fa5a4b6cc740fadfa61", "filename": "tests/ui-internal/interning_defined_symbol.fixed", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Finterning_defined_symbol.fixed?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,6 @@\n // run-rustfix\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate rustc_span;"}, {"sha": "98d7d7adad17037fbdc275cf9500582717b0bd71", "filename": "tests/ui-internal/interning_defined_symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Finterning_defined_symbol.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,6 @@\n // run-rustfix\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate rustc_span;"}, {"sha": "4e99636e6839db1ac8a1d8e2684c60e969ea8667", "filename": "tests/ui-internal/interning_defined_symbol.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finterning_defined_symbol.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Finterning_defined_symbol.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: interning a defined symbol\n-  --> $DIR/interning_defined_symbol.rs:17:13\n+  --> $DIR/interning_defined_symbol.rs:18:13\n    |\n LL |     let _ = Symbol::intern(\"f32\");\n    |             ^^^^^^^^^^^^^^^^^^^^^ help: try: `rustc_span::sym::f32`\n@@ -12,19 +12,19 @@ LL | #![deny(clippy::internal)]\n    = note: `#[deny(clippy::interning_defined_symbol)]` implied by `#[deny(clippy::internal)]`\n \n error: interning a defined symbol\n-  --> $DIR/interning_defined_symbol.rs:20:13\n+  --> $DIR/interning_defined_symbol.rs:21:13\n    |\n LL |     let _ = sym!(f32);\n    |             ^^^^^^^^^ help: try: `rustc_span::sym::f32`\n \n error: interning a defined symbol\n-  --> $DIR/interning_defined_symbol.rs:23:13\n+  --> $DIR/interning_defined_symbol.rs:24:13\n    |\n LL |     let _ = Symbol::intern(\"proc-macro\");\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `rustc_span::sym::proc_dash_macro`\n \n error: interning a defined symbol\n-  --> $DIR/interning_defined_symbol.rs:26:13\n+  --> $DIR/interning_defined_symbol.rs:27:13\n    |\n LL |     let _ = Symbol::intern(\"self\");\n    |             ^^^^^^^^^^^^^^^^^^^^^^ help: try: `rustc_span::symbol::kw::SelfLower`"}, {"sha": "b823ff7fe37f04d2e8763c6495ee4bbf029094c6", "filename": "tests/ui-internal/invalid_paths.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finvalid_paths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finvalid_paths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Finvalid_paths.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,4 +1,5 @@\n #![warn(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n \n mod paths {\n     // Good path"}, {"sha": "0a8e5427978f53d76fef2f88872ced4bb1af6b8a", "filename": "tests/ui-internal/invalid_paths.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finvalid_paths.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Finvalid_paths.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Finvalid_paths.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,13 +1,13 @@\n error: invalid path\n-  --> $DIR/invalid_paths.rs:17:5\n+  --> $DIR/invalid_paths.rs:18:5\n    |\n LL |     pub const BAD_CRATE_PATH: [&str; 2] = [\"bad\", \"path\"];\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::invalid-paths` implied by `-D warnings`\n \n error: invalid path\n-  --> $DIR/invalid_paths.rs:20:5\n+  --> $DIR/invalid_paths.rs:21:5\n    |\n LL |     pub const BAD_MOD_PATH: [&str; 2] = [\"std\", \"xxx\"];\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "1fd03cfe36da43b657e072f5aa31b8cfe026938c", "filename": "tests/ui-internal/lint_without_lint_pass.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Flint_without_lint_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Flint_without_lint_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Flint_without_lint_pass.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,4 +1,5 @@\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n #[macro_use]"}, {"sha": "de04920b8e6f6720363eaef6c7cd87314dfa1a7b", "filename": "tests/ui-internal/lint_without_lint_pass.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Flint_without_lint_pass.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Flint_without_lint_pass.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Flint_without_lint_pass.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: the lint `TEST_LINT` is not added to any `LintPass`\n-  --> $DIR/lint_without_lint_pass.rs:11:1\n+  --> $DIR/lint_without_lint_pass.rs:12:1\n    |\n LL | / declare_tool_lint! {\n LL | |     pub clippy::TEST_LINT,"}, {"sha": "4b41ff15e80f904c907cb5ce02732c5eb34da2a1", "filename": "tests/ui-internal/match_type_on_diag_item.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fmatch_type_on_diag_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fmatch_type_on_diag_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fmatch_type_on_diag_item.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,4 +1,5 @@\n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate clippy_utils;"}, {"sha": "e3cb6b6c22eada7f40fb0edeb61261104385a7a0", "filename": "tests/ui-internal/match_type_on_diag_item.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fmatch_type_on_diag_item.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fmatch_type_on_diag_item.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fmatch_type_on_diag_item.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: usage of `clippy_utils::ty::match_type()` on a type diagnostic item\n-  --> $DIR/match_type_on_diag_item.rs:30:17\n+  --> $DIR/match_type_on_diag_item.rs:31:17\n    |\n LL |         let _ = match_type(cx, ty, &OPTION);\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `clippy_utils::ty::is_type_diagnostic_item(cx, ty, sym::Option)`\n@@ -12,13 +12,13 @@ LL | #![deny(clippy::internal)]\n    = note: `#[deny(clippy::match_type_on_diagnostic_item)]` implied by `#[deny(clippy::internal)]`\n \n error: usage of `clippy_utils::ty::match_type()` on a type diagnostic item\n-  --> $DIR/match_type_on_diag_item.rs:31:17\n+  --> $DIR/match_type_on_diag_item.rs:32:17\n    |\n LL |         let _ = match_type(cx, ty, &[\"core\", \"result\", \"Result\"]);\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `clippy_utils::ty::is_type_diagnostic_item(cx, ty, sym::Result)`\n \n error: usage of `clippy_utils::ty::match_type()` on a type diagnostic item\n-  --> $DIR/match_type_on_diag_item.rs:34:17\n+  --> $DIR/match_type_on_diag_item.rs:35:17\n    |\n LL |         let _ = clippy_utils::ty::match_type(cx, ty, rc_path);\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `clippy_utils::ty::is_type_diagnostic_item(cx, ty, sym::Rc)`"}, {"sha": "bb82faf0c90477b49bfc4f4a97dcb077690a858f", "filename": "tests/ui-internal/outer_expn_data.fixed", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fouter_expn_data.fixed?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate rustc_hir;"}, {"sha": "187d468b39251355fd95d67869de1223fb8add9c", "filename": "tests/ui-internal/outer_expn_data.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fouter_expn_data.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,6 +1,7 @@\n // run-rustfix\n \n #![deny(clippy::internal)]\n+#![allow(clippy::missing_clippy_version_attribute)]\n #![feature(rustc_private)]\n \n extern crate rustc_hir;"}, {"sha": "afef696785e8b02621ffc908df3ff2a9e3108ff8", "filename": "tests/ui-internal/outer_expn_data.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Fouter_expn_data.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Fouter_expn_data.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: usage of `outer_expn().expn_data()`\n-  --> $DIR/outer_expn_data.rs:24:34\n+  --> $DIR/outer_expn_data.rs:25:34\n    |\n LL |         let _ = expr.span.ctxt().outer_expn().expn_data();\n    |                                  ^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `outer_expn_data()`"}, {"sha": "4f5336663a8f72d9119429fc5b7ae7a277ff6c1a", "filename": "tests/ui-internal/unnecessary_symbol_str.fixed", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Funnecessary_symbol_str.fixed?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,7 +1,11 @@\n // run-rustfix\n #![feature(rustc_private)]\n #![deny(clippy::internal)]\n-#![allow(clippy::unnecessary_operation, unused_must_use)]\n+#![allow(\n+    clippy::unnecessary_operation,\n+    unused_must_use,\n+    clippy::missing_clippy_version_attribute\n+)]\n \n extern crate rustc_span;\n "}, {"sha": "894aa1d3bc6ea64932a7d05d51d89352e1c52a86", "filename": "tests/ui-internal/unnecessary_symbol_str.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Funnecessary_symbol_str.rs?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,7 +1,11 @@\n // run-rustfix\n #![feature(rustc_private)]\n #![deny(clippy::internal)]\n-#![allow(clippy::unnecessary_operation, unused_must_use)]\n+#![allow(\n+    clippy::unnecessary_operation,\n+    unused_must_use,\n+    clippy::missing_clippy_version_attribute\n+)]\n \n extern crate rustc_span;\n "}, {"sha": "75367bf4bc51989a43d25b4c35f2114dff83fa7a", "filename": "tests/ui-internal/unnecessary_symbol_str.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/tests%2Fui-internal%2Funnecessary_symbol_str.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-internal%2Funnecessary_symbol_str.stderr?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -1,5 +1,5 @@\n error: unnecessary `Symbol` to string conversion\n-  --> $DIR/unnecessary_symbol_str.rs:11:5\n+  --> $DIR/unnecessary_symbol_str.rs:15:5\n    |\n LL |     Symbol::intern(\"foo\").as_str() == \"clippy\";\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Symbol::intern(\"foo\") == rustc_span::sym::clippy`\n@@ -12,25 +12,25 @@ LL | #![deny(clippy::internal)]\n    = note: `#[deny(clippy::unnecessary_symbol_str)]` implied by `#[deny(clippy::internal)]`\n \n error: unnecessary `Symbol` to string conversion\n-  --> $DIR/unnecessary_symbol_str.rs:12:5\n+  --> $DIR/unnecessary_symbol_str.rs:16:5\n    |\n LL |     Symbol::intern(\"foo\").to_string() == \"self\";\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Symbol::intern(\"foo\") == rustc_span::symbol::kw::SelfLower`\n \n error: unnecessary `Symbol` to string conversion\n-  --> $DIR/unnecessary_symbol_str.rs:13:5\n+  --> $DIR/unnecessary_symbol_str.rs:17:5\n    |\n LL |     Symbol::intern(\"foo\").to_ident_string() != \"Self\";\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Symbol::intern(\"foo\") != rustc_span::symbol::kw::SelfUpper`\n \n error: unnecessary `Symbol` to string conversion\n-  --> $DIR/unnecessary_symbol_str.rs:14:5\n+  --> $DIR/unnecessary_symbol_str.rs:18:5\n    |\n LL |     &*Ident::empty().as_str() == \"clippy\";\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `Ident::empty().name == rustc_span::sym::clippy`\n \n error: unnecessary `Symbol` to string conversion\n-  --> $DIR/unnecessary_symbol_str.rs:15:5\n+  --> $DIR/unnecessary_symbol_str.rs:19:5\n    |\n LL |     \"clippy\" == Ident::empty().to_string();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `rustc_span::sym::clippy == Ident::empty().name`"}, {"sha": "58e8b4f4829fd48d897e8de8d66e6060e3fc26f6", "filename": "util/gh-pages/index.html", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/util%2Fgh-pages%2Findex.html", "raw_url": "https://github.com/rust-lang/rust/raw/8c45fd88d0ca43775b215e1b94b2175e8f4c05d2/util%2Fgh-pages%2Findex.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fgh-pages%2Findex.html?ref=8c45fd88d0ca43775b215e1b94b2175e8f4c05d2", "patch": "@@ -347,7 +347,8 @@ <h2 class=\"panel-title\">\n                         </div>\n                         <!-- Clippy version -->\n                         <div class=\"lint-additional-info-item\">\n-                            Added in: <span class=\"label label-default label-version\">{{lint.version}}</span>\n+                            <span>{{lint.group == \"deprecated\" ? \"Deprecated\" : \"Added\"}} in: </span>\n+                            <span class=\"label label-default label-version\">{{lint.version}}</span>\n                         </div>\n                         <!-- Open related issues -->\n                         <div class=\"lint-additional-info-item\">"}]}