{"sha": "dcaaab3801e095283706dc8d97ff69833aebe732", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjYWFhYjM4MDFlMDk1MjgzNzA2ZGM4ZDk3ZmY2OTgzM2FlYmU3MzI=", "commit": {"author": {"name": "Chris Emerson", "email": "github@mail.nosreme.org", "date": "2017-10-07T22:32:09Z"}, "committer": {"name": "Chris Emerson", "email": "github@mail.nosreme.org", "date": "2017-10-07T22:32:09Z"}, "message": "Add a test with a struct containing a String.", "tree": {"sha": "7f9d448ef64e597e50b65350b17f737e29fc9cad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f9d448ef64e597e50b65350b17f737e29fc9cad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dcaaab3801e095283706dc8d97ff69833aebe732", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dcaaab3801e095283706dc8d97ff69833aebe732", "html_url": "https://github.com/rust-lang/rust/commit/dcaaab3801e095283706dc8d97ff69833aebe732", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dcaaab3801e095283706dc8d97ff69833aebe732/comments", "author": {"login": "jugglerchris", "id": 1644842, "node_id": "MDQ6VXNlcjE2NDQ4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1644842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jugglerchris", "html_url": "https://github.com/jugglerchris", "followers_url": "https://api.github.com/users/jugglerchris/followers", "following_url": "https://api.github.com/users/jugglerchris/following{/other_user}", "gists_url": "https://api.github.com/users/jugglerchris/gists{/gist_id}", "starred_url": "https://api.github.com/users/jugglerchris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jugglerchris/subscriptions", "organizations_url": "https://api.github.com/users/jugglerchris/orgs", "repos_url": "https://api.github.com/users/jugglerchris/repos", "events_url": "https://api.github.com/users/jugglerchris/events{/privacy}", "received_events_url": "https://api.github.com/users/jugglerchris/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jugglerchris", "id": 1644842, "node_id": "MDQ6VXNlcjE2NDQ4NDI=", "avatar_url": "https://avatars.githubusercontent.com/u/1644842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jugglerchris", "html_url": "https://github.com/jugglerchris", "followers_url": "https://api.github.com/users/jugglerchris/followers", "following_url": "https://api.github.com/users/jugglerchris/following{/other_user}", "gists_url": "https://api.github.com/users/jugglerchris/gists{/gist_id}", "starred_url": "https://api.github.com/users/jugglerchris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jugglerchris/subscriptions", "organizations_url": "https://api.github.com/users/jugglerchris/orgs", "repos_url": "https://api.github.com/users/jugglerchris/repos", "events_url": "https://api.github.com/users/jugglerchris/events{/privacy}", "received_events_url": "https://api.github.com/users/jugglerchris/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fcdce8fc1d4891032699554fe64fdcd8e54afe49", "url": "https://api.github.com/repos/rust-lang/rust/commits/fcdce8fc1d4891032699554fe64fdcd8e54afe49", "html_url": "https://github.com/rust-lang/rust/commit/fcdce8fc1d4891032699554fe64fdcd8e54afe49"}], "stats": {"total": 211, "additions": 114, "deletions": 97}, "files": [{"sha": "a037ac3cf0e11cfe2d8c02654b97f5858aeba97f", "filename": "tests/ui/no_effect.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/dcaaab3801e095283706dc8d97ff69833aebe732/tests%2Fui%2Fno_effect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dcaaab3801e095283706dc8d97ff69833aebe732/tests%2Fui%2Fno_effect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fno_effect.rs?ref=dcaaab3801e095283706dc8d97ff69833aebe732", "patch": "@@ -37,7 +37,9 @@ enum DropEnum {\n impl Drop for DropEnum {\n     fn drop(&mut self) {}\n }\n-\n+struct FooString {\n+    s: String,\n+}\n union Union {\n     a: u8,\n     b: f64,\n@@ -79,6 +81,8 @@ fn main() {\n     [42; 55][13];\n     let mut x = 0;\n     || x += 5;\n+    let s: String = \"foo\".into();\n+    FooString { s: s };\n \n     // Do not warn\n     get_number();\n@@ -108,6 +112,7 @@ fn main() {\n     [get_number(); 55];\n     [42; 55][get_number() as usize];\n     {get_number()};\n+    FooString { s: String::from(\"blah\"), };\n \n     // Do not warn\n     DropTuple(get_number());"}, {"sha": "0d8d6624a833d22ffebceff7643dea1b7d2b71d4", "filename": "tests/ui/no_effect.stderr", "status": "modified", "additions": 108, "deletions": 96, "changes": 204, "blob_url": "https://github.com/rust-lang/rust/blob/dcaaab3801e095283706dc8d97ff69833aebe732/tests%2Fui%2Fno_effect.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dcaaab3801e095283706dc8d97ff69833aebe732/tests%2Fui%2Fno_effect.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fno_effect.stderr?ref=dcaaab3801e095283706dc8d97ff69833aebe732", "patch": "@@ -1,268 +1,280 @@\n error: statement with no effect\n-  --> $DIR/no_effect.rs:56:5\n+  --> $DIR/no_effect.rs:58:5\n    |\n-56 |     0;\n+58 |     0;\n    |     ^^\n    |\n    = note: `-D no-effect` implied by `-D warnings`\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:57:5\n+  --> $DIR/no_effect.rs:59:5\n    |\n-57 |     s2;\n+59 |     s2;\n    |     ^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:58:5\n+  --> $DIR/no_effect.rs:60:5\n    |\n-58 |     Unit;\n+60 |     Unit;\n    |     ^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:59:5\n+  --> $DIR/no_effect.rs:61:5\n    |\n-59 |     Tuple(0);\n+61 |     Tuple(0);\n    |     ^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:60:5\n+  --> $DIR/no_effect.rs:62:5\n    |\n-60 |     Struct { field: 0 };\n+62 |     Struct { field: 0 };\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:61:5\n+  --> $DIR/no_effect.rs:63:5\n    |\n-61 |     Struct { ..s };\n+63 |     Struct { ..s };\n    |     ^^^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:62:5\n+  --> $DIR/no_effect.rs:64:5\n    |\n-62 |     Union { a: 0 };\n+64 |     Union { a: 0 };\n    |     ^^^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:63:5\n+  --> $DIR/no_effect.rs:65:5\n    |\n-63 |     Enum::Tuple(0);\n+65 |     Enum::Tuple(0);\n    |     ^^^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:64:5\n+  --> $DIR/no_effect.rs:66:5\n    |\n-64 |     Enum::Struct { field: 0 };\n+66 |     Enum::Struct { field: 0 };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:65:5\n+  --> $DIR/no_effect.rs:67:5\n    |\n-65 |     5 + 6;\n+67 |     5 + 6;\n    |     ^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:66:5\n+  --> $DIR/no_effect.rs:68:5\n    |\n-66 |     *&42;\n+68 |     *&42;\n    |     ^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:67:5\n+  --> $DIR/no_effect.rs:69:5\n    |\n-67 |     &6;\n+69 |     &6;\n    |     ^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:68:5\n+  --> $DIR/no_effect.rs:70:5\n    |\n-68 |     (5, 6, 7);\n+70 |     (5, 6, 7);\n    |     ^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:69:5\n+  --> $DIR/no_effect.rs:71:5\n    |\n-69 |     box 42;\n+71 |     box 42;\n    |     ^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:70:5\n+  --> $DIR/no_effect.rs:72:5\n    |\n-70 |     ..;\n+72 |     ..;\n    |     ^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:71:5\n+  --> $DIR/no_effect.rs:73:5\n    |\n-71 |     5..;\n+73 |     5..;\n    |     ^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:72:5\n+  --> $DIR/no_effect.rs:74:5\n    |\n-72 |     ..5;\n+74 |     ..5;\n    |     ^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:73:5\n+  --> $DIR/no_effect.rs:75:5\n    |\n-73 |     5..6;\n+75 |     5..6;\n    |     ^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:74:5\n+  --> $DIR/no_effect.rs:76:5\n    |\n-74 |     5..=6;\n+76 |     5..=6;\n    |     ^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:75:5\n+  --> $DIR/no_effect.rs:77:5\n    |\n-75 |     [42, 55];\n+77 |     [42, 55];\n    |     ^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:76:5\n+  --> $DIR/no_effect.rs:78:5\n    |\n-76 |     [42, 55][1];\n+78 |     [42, 55][1];\n    |     ^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:77:5\n+  --> $DIR/no_effect.rs:79:5\n    |\n-77 |     (42, 55).1;\n+79 |     (42, 55).1;\n    |     ^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:78:5\n+  --> $DIR/no_effect.rs:80:5\n    |\n-78 |     [42; 55];\n+80 |     [42; 55];\n    |     ^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:79:5\n+  --> $DIR/no_effect.rs:81:5\n    |\n-79 |     [42; 55][13];\n+81 |     [42; 55][13];\n    |     ^^^^^^^^^^^^^\n \n error: statement with no effect\n-  --> $DIR/no_effect.rs:81:5\n+  --> $DIR/no_effect.rs:83:5\n    |\n-81 |     || x += 5;\n+83 |     || x += 5;\n    |     ^^^^^^^^^^\n \n+error: statement with no effect\n+  --> $DIR/no_effect.rs:85:5\n+   |\n+85 |     FooString { s: s };\n+   |     ^^^^^^^^^^^^^^^^^^^\n+\n error: statement can be reduced\n-  --> $DIR/no_effect.rs:92:5\n+  --> $DIR/no_effect.rs:96:5\n    |\n-92 |     Tuple(get_number());\n+96 |     Tuple(get_number());\n    |     ^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n    |\n    = note: `-D unnecessary-operation` implied by `-D warnings`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:93:5\n+  --> $DIR/no_effect.rs:97:5\n    |\n-93 |     Struct { field: get_number() };\n+97 |     Struct { field: get_number() };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:94:5\n+  --> $DIR/no_effect.rs:98:5\n    |\n-94 |     Struct { ..get_struct() };\n+98 |     Struct { ..get_struct() };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_struct();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:95:5\n+  --> $DIR/no_effect.rs:99:5\n    |\n-95 |     Enum::Tuple(get_number());\n+99 |     Enum::Tuple(get_number());\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:96:5\n-   |\n-96 |     Enum::Struct { field: get_number() };\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n+   --> $DIR/no_effect.rs:100:5\n+    |\n+100 |     Enum::Struct { field: get_number() };\n+    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:97:5\n-   |\n-97 |     5 + get_number();\n-   |     ^^^^^^^^^^^^^^^^^ help: replace it with: `5;get_number();`\n+   --> $DIR/no_effect.rs:101:5\n+    |\n+101 |     5 + get_number();\n+    |     ^^^^^^^^^^^^^^^^^ help: replace it with: `5;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:98:5\n-   |\n-98 |     *&get_number();\n-   |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n+   --> $DIR/no_effect.rs:102:5\n+    |\n+102 |     *&get_number();\n+    |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/no_effect.rs:99:5\n-   |\n-99 |     &get_number();\n-   |     ^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n+   --> $DIR/no_effect.rs:103:5\n+    |\n+103 |     &get_number();\n+    |     ^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:100:5\n+   --> $DIR/no_effect.rs:104:5\n     |\n-100 |     (5, 6, get_number());\n+104 |     (5, 6, get_number());\n     |     ^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `5;6;get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:101:5\n+   --> $DIR/no_effect.rs:105:5\n     |\n-101 |     box get_number();\n+105 |     box get_number();\n     |     ^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:102:5\n+   --> $DIR/no_effect.rs:106:5\n     |\n-102 |     get_number()..;\n+106 |     get_number()..;\n     |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:103:5\n+   --> $DIR/no_effect.rs:107:5\n     |\n-103 |     ..get_number();\n+107 |     ..get_number();\n     |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:104:5\n+   --> $DIR/no_effect.rs:108:5\n     |\n-104 |     5..get_number();\n+108 |     5..get_number();\n     |     ^^^^^^^^^^^^^^^^ help: replace it with: `5;get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:105:5\n+   --> $DIR/no_effect.rs:109:5\n     |\n-105 |     [42, get_number()];\n+109 |     [42, get_number()];\n     |     ^^^^^^^^^^^^^^^^^^^ help: replace it with: `42;get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:106:5\n+   --> $DIR/no_effect.rs:110:5\n     |\n-106 |     [42, 55][get_number() as usize];\n+110 |     [42, 55][get_number() as usize];\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42, 55];get_number() as usize;`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:107:5\n+   --> $DIR/no_effect.rs:111:5\n     |\n-107 |     (42, get_number()).1;\n+111 |     (42, get_number()).1;\n     |     ^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `42;get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:108:5\n+   --> $DIR/no_effect.rs:112:5\n     |\n-108 |     [get_number(); 55];\n+112 |     [get_number(); 55];\n     |     ^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:109:5\n+   --> $DIR/no_effect.rs:113:5\n     |\n-109 |     [42; 55][get_number() as usize];\n+113 |     [42; 55][get_number() as usize];\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42; 55];get_number() as usize;`\n \n error: statement can be reduced\n-   --> $DIR/no_effect.rs:110:5\n+   --> $DIR/no_effect.rs:114:5\n     |\n-110 |     {get_number()};\n+114 |     {get_number()};\n     |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n+error: statement can be reduced\n+   --> $DIR/no_effect.rs:115:5\n+    |\n+115 |     FooString { s: String::from(\"blah\"), };\n+    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `String::from(\"blah\");`\n+"}]}