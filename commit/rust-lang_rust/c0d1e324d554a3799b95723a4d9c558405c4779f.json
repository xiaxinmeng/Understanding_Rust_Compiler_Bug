{"sha": "c0d1e324d554a3799b95723a4d9c558405c4779f", "node_id": "C_kwDOAAsO6NoAKGMwZDFlMzI0ZDU1NGEzNzk5Yjk1NzIzYTRkOWM1NTg0MDVjNDc3OWY", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-02-13T05:42:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-13T05:42:49Z"}, "message": "Rollup merge of #107915 - JulianKnodt:array_benches, r=Mark-Simulacrum\n\nAdd `array::map` benchmarks\n\nSince there were no previous benchmarks for `array::map`, and it is known to have mediocre/poor performance, add some simple benchmarks. These benchmarks vary the length of the array and size of each item.", "tree": {"sha": "a946b2d18bb881a700ed61ef082bd405fda9c4d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a946b2d18bb881a700ed61ef082bd405fda9c4d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0d1e324d554a3799b95723a4d9c558405c4779f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj6c3ZCRBK7hj4Ov3rIwAAkmIIAI8POpnRAmELTd8y3uO1LmHk\n19PSWI/N+0aVXDcF6p95utekgGpKtQE4ZyYfOHpKN3+fWa9rTnzaCQZTufXOBrOs\nnSAmS/AL2fu+jvddOMUEGeDMMsrKWBCS2Ol99T+0MY3eY4gjCO+vOpe+VfjWJa2w\nOLy2lyv+UT7FVjYPG8/JrX84doJQGpqT8B3Rw0zOT5SQwlmkfI3MWuNPgWWERPLv\nVws/mXw1qAA0neIa4AAqLWFStUfxEhFJEKSjtJ269DjML2UbwWtlfiPo966FaDFj\nCxPG5YJ1tSsXnvD5OfReuLYydQIRFv6Duz7oyFViFdtMx8VA8TyAbmgscUYoEyQ=\n=+Zm0\n-----END PGP SIGNATURE-----\n", "payload": "tree a946b2d18bb881a700ed61ef082bd405fda9c4d7\nparent 47358298f6069dc7bb6bb11674bf46433ae52bc1\nparent cbd1b81bd2a308b0f8a1734daf3eb30b56c7537c\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1676266969 +0530\ncommitter GitHub <noreply@github.com> 1676266969 +0530\n\nRollup merge of #107915 - JulianKnodt:array_benches, r=Mark-Simulacrum\n\nAdd `array::map` benchmarks\n\nSince there were no previous benchmarks for `array::map`, and it is known to have mediocre/poor performance, add some simple benchmarks. These benchmarks vary the length of the array and size of each item.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0d1e324d554a3799b95723a4d9c558405c4779f", "html_url": "https://github.com/rust-lang/rust/commit/c0d1e324d554a3799b95723a4d9c558405c4779f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0d1e324d554a3799b95723a4d9c558405c4779f/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47358298f6069dc7bb6bb11674bf46433ae52bc1", "url": "https://api.github.com/repos/rust-lang/rust/commits/47358298f6069dc7bb6bb11674bf46433ae52bc1", "html_url": "https://github.com/rust-lang/rust/commit/47358298f6069dc7bb6bb11674bf46433ae52bc1"}, {"sha": "cbd1b81bd2a308b0f8a1734daf3eb30b56c7537c", "url": "https://api.github.com/repos/rust-lang/rust/commits/cbd1b81bd2a308b0f8a1734daf3eb30b56c7537c", "html_url": "https://github.com/rust-lang/rust/commit/cbd1b81bd2a308b0f8a1734daf3eb30b56c7537c"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "845c60762949b00e2b70d63bdcde1ee9da131775", "filename": "library/core/benches/array.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c0d1e324d554a3799b95723a4d9c558405c4779f/library%2Fcore%2Fbenches%2Farray.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0d1e324d554a3799b95723a4d9c558405c4779f/library%2Fcore%2Fbenches%2Farray.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fbenches%2Farray.rs?ref=c0d1e324d554a3799b95723a4d9c558405c4779f", "patch": "@@ -0,0 +1,19 @@\n+use test::black_box;\n+use test::Bencher;\n+\n+macro_rules! map_array {\n+    ($func_name:ident, $start_item: expr, $map_item: expr, $arr_size: expr) => {\n+        #[bench]\n+        fn $func_name(b: &mut Bencher) {\n+            let arr = [$start_item; $arr_size];\n+            b.iter(|| black_box(arr).map(|_| black_box($map_item)));\n+        }\n+    };\n+}\n+\n+map_array!(map_8byte_8byte_8, 0u64, 1u64, 800);\n+map_array!(map_8byte_8byte_64, 0u64, 1u64, 6400);\n+map_array!(map_8byte_8byte_256, 0u64, 1u64, 25600);\n+\n+map_array!(map_8byte_256byte_256, 0u64, [0u64; 4], 25600);\n+map_array!(map_256byte_8byte_256, [0u64; 4], 0u64, 25600);"}, {"sha": "e4100120d825253ff01a8a3d18eee189293856ee", "filename": "library/core/benches/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c0d1e324d554a3799b95723a4d9c558405c4779f/library%2Fcore%2Fbenches%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0d1e324d554a3799b95723a4d9c558405c4779f/library%2Fcore%2Fbenches%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fbenches%2Flib.rs?ref=c0d1e324d554a3799b95723a4d9c558405c4779f", "patch": "@@ -9,6 +9,7 @@\n extern crate test;\n \n mod any;\n+mod array;\n mod ascii;\n mod char;\n mod fmt;"}]}