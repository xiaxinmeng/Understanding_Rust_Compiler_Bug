{"sha": "0ce0cf1c87012dca1f21513566eab8b3210b029b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjZTBjZjFjODcwMTJkY2ExZjIxNTEzNTY2ZWFiOGIzMjEwYjAyOWI=", "commit": {"author": {"name": "Ruud van Asseldonk", "email": "ruuda@google.com", "date": "2016-03-05T15:17:55Z"}, "committer": {"name": "Ruud van Asseldonk", "email": "ruuda@google.com", "date": "2016-03-05T15:35:57Z"}, "message": "Update platform intrinsic generator script\n\nThe file it generates had been modified, but instead the generator\nshould have been modified, and the file regenerated. This merges the\nmodifications into the template in the generator.", "tree": {"sha": "76086766759300c09405fd71933fd91baf6926e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/76086766759300c09405fd71933fd91baf6926e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ce0cf1c87012dca1f21513566eab8b3210b029b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ce0cf1c87012dca1f21513566eab8b3210b029b", "html_url": "https://github.com/rust-lang/rust/commit/0ce0cf1c87012dca1f21513566eab8b3210b029b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ce0cf1c87012dca1f21513566eab8b3210b029b/comments", "author": {"login": "ruuda", "id": 506953, "node_id": "MDQ6VXNlcjUwNjk1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/506953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruuda", "html_url": "https://github.com/ruuda", "followers_url": "https://api.github.com/users/ruuda/followers", "following_url": "https://api.github.com/users/ruuda/following{/other_user}", "gists_url": "https://api.github.com/users/ruuda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruuda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruuda/subscriptions", "organizations_url": "https://api.github.com/users/ruuda/orgs", "repos_url": "https://api.github.com/users/ruuda/repos", "events_url": "https://api.github.com/users/ruuda/events{/privacy}", "received_events_url": "https://api.github.com/users/ruuda/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ruuda", "id": 506953, "node_id": "MDQ6VXNlcjUwNjk1Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/506953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruuda", "html_url": "https://github.com/ruuda", "followers_url": "https://api.github.com/users/ruuda/followers", "following_url": "https://api.github.com/users/ruuda/following{/other_user}", "gists_url": "https://api.github.com/users/ruuda/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruuda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruuda/subscriptions", "organizations_url": "https://api.github.com/users/ruuda/orgs", "repos_url": "https://api.github.com/users/ruuda/repos", "events_url": "https://api.github.com/users/ruuda/events{/privacy}", "received_events_url": "https://api.github.com/users/ruuda/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8872163b32011dd546e69d349d9c5de22cc218b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8872163b32011dd546e69d349d9c5de22cc218b8", "html_url": "https://github.com/rust-lang/rust/commit/8872163b32011dd546e69d349d9c5de22cc218b8"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "0e0d4841063a4ac43c837dbb856379df98eb5931", "filename": "src/etc/platform-intrinsics/generator.py", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0ce0cf1c87012dca1f21513566eab8b3210b029b/src%2Fetc%2Fplatform-intrinsics%2Fgenerator.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ce0cf1c87012dca1f21513566eab8b3210b029b/src%2Fetc%2Fplatform-intrinsics%2Fgenerator.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fplatform-intrinsics%2Fgenerator.py?ref=0ce0cf1c87012dca1f21513566eab8b3210b029b", "patch": "@@ -691,7 +691,7 @@ def parse_args():\n     parser.add_argument('-o', '--out', type=argparse.FileType('w'), default=sys.stdout,\n                         help = 'File to output to (default stdout).')\n     parser.add_argument('-i', '--info', type=argparse.FileType('r'),\n-                        help = 'File containing platform specific information to merge into'\n+                        help = 'File containing platform specific information to merge into '\n                                 'the input files\\' header.')\n     parser.add_argument('in_', metavar=\"FILE\", type=argparse.FileType('r'), nargs='+',\n                         help = 'JSON files to load')\n@@ -735,12 +735,12 @@ def open(self, platform):\n \n use {{Intrinsic, i, i_, u, u_, f, v, v_, agg, p, void}};\n use IntrinsicDef::Named;\n-use rustc::middle::ty;\n+use rustc::middle::ty::TyCtxt;\n \n // The default inlining settings trigger a pathological behaviour in\n // LLVM, which causes makes compilation very slow. See #28273.\n #[inline(never)]\n-pub fn find<'tcx>(_tcx: &ty::ctxt<'tcx>, name: &str) -> Option<Intrinsic> {{\n+pub fn find<'tcx>(_tcx: &TyCtxt<'tcx>, name: &str) -> Option<Intrinsic> {{\n     if !name.starts_with(\"{0}\") {{ return None }}\n     Some(match &name[\"{0}\".len()..] {{'''.format(platform.intrinsic_prefix())\n "}]}