{"sha": "e8ded849ef57a983ff26245f7065dcaf17edc04b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4ZGVkODQ5ZWY1N2E5ODNmZjI2MjQ1ZjcwNjVkY2FmMTdlZGMwNGI=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2019-09-18T17:58:03Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-18T17:58:03Z"}, "message": "Rollup merge of #64207 - sinkuu:pub_dataflow, r=tmandry\n\nMake rustc_mir::dataflow module pub (for clippy)\n\nI'm working on fixing false-positives of a MIR-based clippy lint (https://github.com/rust-lang/rust-clippy/pull/4509), and in need of the dataflow infrastructure.", "tree": {"sha": "00973dbb94f512ec7fe2ef6108db1485fff9105c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00973dbb94f512ec7fe2ef6108db1485fff9105c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e8ded849ef57a983ff26245f7065dcaf17edc04b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdgnArCRBK7hj4Ov3rIwAAdHIIAIzDtXKfWtlte2chtSKkFQ+U\nU544fzLd0WKaUXyUJFrf8PjDW8RW8aBX3Ay8MtqHJuHkWTYP77rKgzsfrPit+4No\nM1AO+C0f5JTyUa9bKR2+DvKvyFHdfaPw9VPu/4K/4vUOyijGAF7Sta2vbr83XuWO\ngpr3/3QmLAeLlx7SUimTx6cvrzoNPWCblMbXzbd8wD9Lfv4eMktIfJm6O2js6Bp+\nKL/yFgSfzmV9v2gy4moJ9d39LMEcYV6nboyG6spQWVcuFzVww7EGlCKIq6TPoOt1\nvdqttqCqyXfx/mjbq1jsjMfvO5dRwa77fBeqphWcjc4qgE7Ah8nY68L004n7afE=\n=vXuL\n-----END PGP SIGNATURE-----\n", "payload": "tree 00973dbb94f512ec7fe2ef6108db1485fff9105c\nparent dece57302a8e6775b34dd6447eb98552e83bdc9d\nparent 867ce769b6a27c8f359eb6573f5da8b34677d055\nauthor Tyler Mandry <tmandry@gmail.com> 1568829483 -0700\ncommitter GitHub <noreply@github.com> 1568829483 -0700\n\nRollup merge of #64207 - sinkuu:pub_dataflow, r=tmandry\n\nMake rustc_mir::dataflow module pub (for clippy)\n\nI'm working on fixing false-positives of a MIR-based clippy lint (https://github.com/rust-lang/rust-clippy/pull/4509), and in need of the dataflow infrastructure.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e8ded849ef57a983ff26245f7065dcaf17edc04b", "html_url": "https://github.com/rust-lang/rust/commit/e8ded849ef57a983ff26245f7065dcaf17edc04b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e8ded849ef57a983ff26245f7065dcaf17edc04b/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dece57302a8e6775b34dd6447eb98552e83bdc9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/dece57302a8e6775b34dd6447eb98552e83bdc9d", "html_url": "https://github.com/rust-lang/rust/commit/dece57302a8e6775b34dd6447eb98552e83bdc9d"}, {"sha": "867ce769b6a27c8f359eb6573f5da8b34677d055", "url": "https://api.github.com/repos/rust-lang/rust/commits/867ce769b6a27c8f359eb6573f5da8b34677d055", "html_url": "https://github.com/rust-lang/rust/commit/867ce769b6a27c8f359eb6573f5da8b34677d055"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "c349cf4a47ba13f3d020b9da7ce3ea9300185e4d", "filename": "src/librustc_mir/dataflow/mod.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/e8ded849ef57a983ff26245f7065dcaf17edc04b/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8ded849ef57a983ff26245f7065dcaf17edc04b/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs?ref=e8ded849ef57a983ff26245f7065dcaf17edc04b", "patch": "@@ -56,7 +56,7 @@ where\n /// string (as well as that of rendering up-front); in exchange, you\n /// don't have to hand over ownership of your value or deal with\n /// borrowing it.\n-pub(crate) struct DebugFormatted(String);\n+pub struct DebugFormatted(String);\n \n impl DebugFormatted {\n     pub fn new(input: &dyn fmt::Debug) -> DebugFormatted {\n@@ -70,7 +70,7 @@ impl fmt::Debug for DebugFormatted {\n     }\n }\n \n-pub(crate) trait Dataflow<'tcx, BD: BitDenotation<'tcx>> {\n+pub trait Dataflow<'tcx, BD: BitDenotation<'tcx>> {\n     /// Sets up and runs the dataflow problem, using `p` to render results if\n     /// implementation so chooses.\n     fn dataflow<P>(&mut self, p: P) where P: Fn(&BD, BD::Idx) -> DebugFormatted {\n@@ -121,7 +121,7 @@ pub struct MoveDataParamEnv<'tcx> {\n     pub(crate) param_env: ty::ParamEnv<'tcx>,\n }\n \n-pub(crate) fn do_dataflow<'a, 'tcx, BD, P>(\n+pub fn do_dataflow<'a, 'tcx, BD, P>(\n     tcx: TyCtxt<'tcx>,\n     body: &'a Body<'tcx>,\n     def_id: DefId,\n@@ -565,7 +565,7 @@ pub struct GenKill<T> {\n     pub(crate) kill_set: T,\n }\n \n-type GenKillSet<T> = GenKill<HybridBitSet<T>>;\n+pub type GenKillSet<T> = GenKill<HybridBitSet<T>>;\n \n impl<T> GenKill<T> {\n     /// Creates a new tuple where `gen_set == kill_set == elem`.\n@@ -580,28 +580,28 @@ impl<T> GenKill<T> {\n }\n \n impl<E:Idx> GenKillSet<E> {\n-    pub(crate) fn clear(&mut self) {\n+    pub fn clear(&mut self) {\n         self.gen_set.clear();\n         self.kill_set.clear();\n     }\n \n-    fn gen(&mut self, e: E) {\n+    pub fn gen(&mut self, e: E) {\n         self.gen_set.insert(e);\n         self.kill_set.remove(e);\n     }\n \n-    fn gen_all(&mut self, i: impl IntoIterator<Item: Borrow<E>>) {\n+    pub fn gen_all(&mut self, i: impl IntoIterator<Item: Borrow<E>>) {\n         for j in i {\n             self.gen(*j.borrow());\n         }\n     }\n \n-    fn kill(&mut self, e: E) {\n+    pub fn kill(&mut self, e: E) {\n         self.gen_set.remove(e);\n         self.kill_set.insert(e);\n     }\n \n-    fn kill_all(&mut self, i: impl IntoIterator<Item: Borrow<E>>) {\n+    pub fn kill_all(&mut self, i: impl IntoIterator<Item: Borrow<E>>) {\n         for j in i {\n             self.kill(*j.borrow());\n         }"}, {"sha": "6a49ed6ed9fa1672339075d093d81685fc58ca4e", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e8ded849ef57a983ff26245f7065dcaf17edc04b/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e8ded849ef57a983ff26245f7065dcaf17edc04b/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=e8ded849ef57a983ff26245f7065dcaf17edc04b", "patch": "@@ -35,7 +35,7 @@ pub mod error_codes;\n \n mod borrow_check;\n mod build;\n-mod dataflow;\n+pub mod dataflow;\n mod hair;\n mod lints;\n mod shim;"}]}