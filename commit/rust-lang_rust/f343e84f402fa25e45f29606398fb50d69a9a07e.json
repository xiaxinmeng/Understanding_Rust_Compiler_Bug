{"sha": "f343e84f402fa25e45f29606398fb50d69a9a07e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYzNDNlODRmNDAyZmEyNWU0NWYyOTYwNjM5OGZiNTBkNjlhOWEwN2U=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-28T08:18:23Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-09-05T06:33:09Z"}, "message": "resolve: add `type IdentMap<T>` alias.", "tree": {"sha": "837af40606ec97437cd3a070413226c490523085", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/837af40606ec97437cd3a070413226c490523085"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f343e84f402fa25e45f29606398fb50d69a9a07e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f343e84f402fa25e45f29606398fb50d69a9a07e", "html_url": "https://github.com/rust-lang/rust/commit/f343e84f402fa25e45f29606398fb50d69a9a07e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f343e84f402fa25e45f29606398fb50d69a9a07e/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "219ddde26b151baf2046cf6d593ffc0dcd858f9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/219ddde26b151baf2046cf6d593ffc0dcd858f9b", "html_url": "https://github.com/rust-lang/rust/commit/219ddde26b151baf2046cf6d593ffc0dcd858f9b"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "29264b3eedce1ea45c5d0bac4bed84178213f5a9", "filename": "src/librustc_resolve/late.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f343e84f402fa25e45f29606398fb50d69a9a07e/src%2Flibrustc_resolve%2Flate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f343e84f402fa25e45f29606398fb50d69a9a07e/src%2Flibrustc_resolve%2Flate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flate.rs?ref=f343e84f402fa25e45f29606398fb50d69a9a07e", "patch": "@@ -35,8 +35,10 @@ mod diagnostics;\n \n type Res = def::Res<NodeId>;\n \n+type IdentMap<T> = FxHashMap<Ident, T>;\n+\n /// Map from the name in a pattern to its binding mode.\n-type BindingMap = FxHashMap<Ident, BindingInfo>;\n+type BindingMap = IdentMap<BindingInfo>;\n \n #[derive(Copy, Clone, Debug)]\n struct BindingInfo {\n@@ -143,7 +145,7 @@ impl RibKind<'_> {\n /// resolving, the name is looked up from inside out.\n #[derive(Debug)]\n crate struct Rib<'a, R = Res> {\n-    pub bindings: FxHashMap<Ident, R>,\n+    pub bindings: IdentMap<R>,\n     pub kind: RibKind<'a>,\n }\n \n@@ -1275,7 +1277,7 @@ impl<'a, 'b> LateResolutionVisitor<'a, '_> {\n                      pat_id: NodeId,\n                      outer_pat_id: NodeId,\n                      pat_src: PatternSource,\n-                     bindings: &mut FxHashMap<Ident, NodeId>)\n+                     bindings: &mut IdentMap<NodeId>)\n                      -> Res {\n         // Add the binding to the local ribs, if it\n         // doesn't already exist in the bindings map. (We\n@@ -1323,7 +1325,7 @@ impl<'a, 'b> LateResolutionVisitor<'a, '_> {\n         res\n     }\n \n-    fn innermost_rib_bindings(&mut self, ns: Namespace) -> &mut FxHashMap<Ident, Res> {\n+    fn innermost_rib_bindings(&mut self, ns: Namespace) -> &mut IdentMap<Res> {\n         &mut self.ribs[ns].last_mut().unwrap().bindings\n     }\n \n@@ -1332,7 +1334,7 @@ impl<'a, 'b> LateResolutionVisitor<'a, '_> {\n         pat: &Pat,\n         pat_src: PatternSource,\n         // Maps idents to the node ID for the outermost pattern that binds them.\n-        bindings: &mut FxHashMap<Ident, NodeId>,\n+        bindings: &mut IdentMap<NodeId>,\n     ) {\n         // Visit all direct subpatterns of this pattern.\n         let outer_pat_id = pat.id;"}]}