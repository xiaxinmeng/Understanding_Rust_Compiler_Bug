{"sha": "dab810b1e623449cf3e9a422cf49d89cac17507f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhYjgxMGIxZTYyMzQ0OWNmM2U5YTQyMmNmNDlkODljYWMxNzUwN2Y=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-08-05T13:53:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-05T13:53:01Z"}, "message": "Merge #5669\n\n5669: Document release process r=jonas-schievink a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "ee84cfe51f903aaf925d8600a4052a60ed29e570", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee84cfe51f903aaf925d8600a4052a60ed29e570"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dab810b1e623449cf3e9a422cf49d89cac17507f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfKrm9CRBK7hj4Ov3rIwAAdHIIABSDgILiY8brgLmz2yDbFLmx\nkBtf388+4IRZqryi53MYIWwoc9keScstc+ZTNUzsRVDA9HD0USP4UYBWds3Kr4Bs\nL6FXCgrqw2N/9HuSf/RG+nG3Die4vFlIEWWeO8tyz8lNc1bR2LtN8sUani90GPWs\n5Mi2tV0R7OMoOv8bBqeyYGEaIien0zZ39H4V6fDancDQejUVJfjyPnFbPmcazQ/6\n60hY3lXUyXemiz4udU3ajKv7Al7br/IDhCI3ba5yYw/Lb3x+S4A2wtm33HqSYkyV\nI4/3M3bYyAa/+2gyqL+GuXZ9XRAt/ckAJp87N4rn3Wit2XKHgZvnvM7GE/98KB8=\n=ZaGF\n-----END PGP SIGNATURE-----\n", "payload": "tree ee84cfe51f903aaf925d8600a4052a60ed29e570\nparent 5721cca2f3a469954a4e778b6a24c0d530f531c3\nparent 33447e285594189aed368ac48f6326b62d2c3806\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1596635581 +0000\ncommitter GitHub <noreply@github.com> 1596635581 +0000\n\nMerge #5669\n\n5669: Document release process r=jonas-schievink a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dab810b1e623449cf3e9a422cf49d89cac17507f", "html_url": "https://github.com/rust-lang/rust/commit/dab810b1e623449cf3e9a422cf49d89cac17507f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dab810b1e623449cf3e9a422cf49d89cac17507f/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5721cca2f3a469954a4e778b6a24c0d530f531c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/5721cca2f3a469954a4e778b6a24c0d530f531c3", "html_url": "https://github.com/rust-lang/rust/commit/5721cca2f3a469954a4e778b6a24c0d530f531c3"}, {"sha": "33447e285594189aed368ac48f6326b62d2c3806", "url": "https://api.github.com/repos/rust-lang/rust/commits/33447e285594189aed368ac48f6326b62d2c3806", "html_url": "https://github.com/rust-lang/rust/commit/33447e285594189aed368ac48f6326b62d2c3806"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "67813a9c07fdbfc1123832df9e88754d18c0845b", "filename": "docs/dev/README.md", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/dab810b1e623449cf3e9a422cf49d89cac17507f/docs%2Fdev%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/dab810b1e623449cf3e9a422cf49d89cac17507f/docs%2Fdev%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2FREADME.md?ref=dab810b1e623449cf3e9a422cf49d89cac17507f", "patch": "@@ -235,3 +235,34 @@ For measuring time of incremental analysis, use either of these:\n $ cargo run --release -p rust-analyzer -- analysis-bench ../chalk/ --highlight ../chalk/chalk-engine/src/logic.rs\n $ cargo run --release -p rust-analyzer -- analysis-bench ../chalk/ --complete ../chalk/chalk-engine/src/logic.rs:94:0\n ```\n+\n+# Release Process\n+\n+Release process is handled by `release`, `dist` and `promote` xtasks, `release` being the main one.\n+\n+`release` assumes that you have checkouts of `rust-analyzer`, `rust-analyzer.github.io`, and `rust-lang/rust` in the same directory:\n+\n+```\n+./rust-analyzer\n+./rust-analyzer.github.io\n+./rust-rust-analyzer  # Note the name!\n+```\n+\n+Additionally, it assumes that remote for `rust-analyzer` is called `upstream` (I use `origin` to point to my fork).\n+\n+Release steps:\n+\n+1. Inside rust-analyzer, run `cargo xtask release`. This will:\n+   * checkout the `release` branch\n+   * reset it to `upstream/nightly`\n+   * push it to `upstream`. This triggers GitHub Actions which:\n+    ** runs `cargo xtask dist` to package binaries and VS Code extension\n+    ** makes a GitHub release\n+    ** pushes VS Code extension to the marketplace\n+   * create new changelog in `rust-analyzer.github.io`\n+   * create `rust-analyzer.github.io/git.log` file with the log of merge commits since last release\n+2. While the release is in progress, fill-in the changelog using `git.log`\n+3. Commit & push the changelog\n+4. Tweet\n+5. Inside `rust-analyzer`, run `cargo xtask promote` -- this will create a PR to rust-lang/rust updating rust-analyzer's submodule.\n+   Self-approve the PR."}]}