{"sha": "7e498005a12548a8fd396312affde05c4d3ca085", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlNDk4MDA1YTEyNTQ4YThmZDM5NjMxMmFmZmRlMDVjNGQzY2EwODU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-17T02:04:49Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-10-17T02:04:49Z"}, "message": "Auto merge of #65234 - GuillaumeGomez:long-err-explanation-E0573, r=kinnison\n\nAdd long error explanation for E0573\n\nPart of #61137.", "tree": {"sha": "76b86a8c037f93c40fcb96c9140bb6f98c90296f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/76b86a8c037f93c40fcb96c9140bb6f98c90296f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e498005a12548a8fd396312affde05c4d3ca085", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e498005a12548a8fd396312affde05c4d3ca085", "html_url": "https://github.com/rust-lang/rust/commit/7e498005a12548a8fd396312affde05c4d3ca085", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e498005a12548a8fd396312affde05c4d3ca085/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8fa82c482f1b6bb0159df87df6678f15122cdd3", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8fa82c482f1b6bb0159df87df6678f15122cdd3", "html_url": "https://github.com/rust-lang/rust/commit/c8fa82c482f1b6bb0159df87df6678f15122cdd3"}, {"sha": "7d357fbffd7338957fe993b8dc28b91ca5c422b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d357fbffd7338957fe993b8dc28b91ca5c422b4", "html_url": "https://github.com/rust-lang/rust/commit/7d357fbffd7338957fe993b8dc28b91ca5c422b4"}], "stats": {"total": 92, "additions": 87, "deletions": 5}, "files": [{"sha": "ab3d95dd8edfe648cd6f72048bad6e0d69b8b53e", "filename": "src/librustc_resolve/error_codes.rs", "status": "modified", "additions": 74, "deletions": 1, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Flibrustc_resolve%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Flibrustc_resolve%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Ferror_codes.rs?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -1611,6 +1611,80 @@ fn print_on_failure(state: &State) {\n ```\n \"##,\n \n+E0573: r##\"\n+Something other than a type has been used when one was expected.\n+\n+Erroneous code examples:\n+\n+```compile_fail,E0573\n+enum Dragon {\n+    Born,\n+}\n+\n+fn oblivion() -> Dragon::Born { // error!\n+    Dragon::Born\n+}\n+\n+const HOBBIT: u32 = 2;\n+impl HOBBIT {} // error!\n+\n+enum Wizard {\n+    Gandalf,\n+    Saruman,\n+}\n+\n+trait Isengard {\n+    fn wizard(_: Wizard::Saruman); // error!\n+}\n+```\n+\n+In all these errors, a type was expected. For example, in the first error, if\n+we want to return the `Born` variant from the `Dragon` enum, we must set the\n+function to return the enum and not its variant:\n+\n+```\n+enum Dragon {\n+    Born,\n+}\n+\n+fn oblivion() -> Dragon { // ok!\n+    Dragon::Born\n+}\n+```\n+\n+In the second error, you can't implement something on an item, only on types.\n+We would need to create a new type if we wanted to do something similar:\n+\n+```\n+struct Hobbit(u32); // we create a new type\n+\n+const HOBBIT: Hobbit = Hobbit(2);\n+impl Hobbit {} // ok!\n+```\n+\n+In the third case, we tried to only expect one variant of the `Wizard` enum,\n+which is not possible. To make this work, we need to using pattern matching\n+over the `Wizard` enum:\n+\n+```\n+enum Wizard {\n+    Gandalf,\n+    Saruman,\n+}\n+\n+trait Isengard {\n+    fn wizard(w: Wizard) { // error!\n+        match w {\n+            Wizard::Saruman => {\n+                // do something\n+            }\n+            _ => {} // ignore everything else\n+        }\n+    }\n+}\n+```\n+\"##,\n+\n E0574: r##\"\n Something other than a struct, variant or union has been used when one was\n expected.\n@@ -1788,7 +1862,6 @@ struct Foo<X = Box<Self>> {\n //  E0427, merged into 530\n //  E0467, removed\n //  E0470, removed\n-    E0573,\n     E0575,\n     E0576,\n     E0577,"}, {"sha": "b3aa35e079aec96f369836e6eb10753848e04a4f", "filename": "src/test/ui/const-generics/struct-with-invalid-const-param.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fconst-generics%2Fstruct-with-invalid-const-param.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fconst-generics%2Fstruct-with-invalid-const-param.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fstruct-with-invalid-const-param.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -14,3 +14,4 @@ LL | #![feature(const_generics)]\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "7e8453c61f62b65858bd4f7f80008c969dbb6d74", "filename": "src/test/ui/enum/enum-variant-type-2.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fenum%2Fenum-variant-type-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fenum%2Fenum-variant-type-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum%2Fenum-variant-type-2.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -9,3 +9,4 @@ LL | fn foo(x: Foo::Bar) {}\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "4a0fb186e49f6c91fec5cc95ebb356216c16e1e1", "filename": "src/test/ui/issues/issue-17546.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-17546.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-17546.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17546.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -62,3 +62,4 @@ LL | fn newer() -> Result<foo::MyEnum, String> {\n \n error: aborting due to 4 previous errors\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "ddee5a9da7a42acd060a119171aedde15482e71a", "filename": "src/test/ui/issues/issue-18119.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-18119.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-18119.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-18119.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -18,3 +18,4 @@ LL | impl foo {}\n \n error: aborting due to 3 previous errors\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "e3692934b62adafc2169692c18788cd63d303c65", "filename": "src/test/ui/issues/issue-30535.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-30535.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-30535.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-30535.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -9,3 +9,4 @@ LL |     _: foo::Foo::FooV\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "91814d94963765690bbb19c96918c1bb3caca716", "filename": "src/test/ui/issues/issue-35675.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-35675.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fissues%2Fissue-35675.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-35675.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -67,5 +67,5 @@ LL | fn qux() -> Some {\n \n error: aborting due to 7 previous errors\n \n-Some errors have detailed explanations: E0412, E0425.\n+Some errors have detailed explanations: E0412, E0425, E0573.\n For more information about an error, try `rustc --explain E0412`."}, {"sha": "8ffc12c31cb66326632b099c4aec8b77bf3dbdd0", "filename": "src/test/ui/privacy/privacy-ns1.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns1.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -72,5 +72,5 @@ LL | use foo3::Bar;\n \n error: aborting due to 4 previous errors\n \n-Some errors have detailed explanations: E0412, E0423, E0425.\n+Some errors have detailed explanations: E0412, E0423, E0425, E0573.\n For more information about an error, try `rustc --explain E0412`."}, {"sha": "13057a899f3c9f2d0992e9eb24080c9f9bd469bf", "filename": "src/test/ui/privacy/privacy-ns2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fprivacy-ns2.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -82,5 +82,5 @@ LL |     use foo3::{Bar,Baz};\n \n error: aborting due to 7 previous errors\n \n-Some errors have detailed explanations: E0423, E0603.\n+Some errors have detailed explanations: E0423, E0573, E0603.\n For more information about an error, try `rustc --explain E0423`."}, {"sha": "b831e624cb6ff4403bf69fc047169f75edace6fe", "filename": "src/test/ui/tool-attributes/tool-attributes-misplaced-1.stderr", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftool-attributes%2Ftool-attributes-misplaced-1.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -42,4 +42,5 @@ LL |     rustfmt::skip;\n \n error: aborting due to 7 previous errors\n \n-For more information about this error, try `rustc --explain E0423`.\n+Some errors have detailed explanations: E0423, E0573.\n+For more information about an error, try `rustc --explain E0423`."}, {"sha": "c62bcfca94de945bda627db8f6d109ffed2b1078", "filename": "src/test/ui/traits/trait-impl-for-module.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftraits%2Ftrait-impl-for-module.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftraits%2Ftrait-impl-for-module.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Ftrait-impl-for-module.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -6,3 +6,4 @@ LL | impl A for a {\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "eeaca5300f9b68d38012f103c17bc93cbf73f9c8", "filename": "src/test/ui/type/type-ascription-with-fn-call.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftype%2Ftype-ascription-with-fn-call.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Ftype%2Ftype-ascription-with-fn-call.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-ascription-with-fn-call.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -11,3 +11,4 @@ LL |     f();\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0573`."}, {"sha": "fdfc044d81f6cbcc24b124e0f975b49b7c5f7b48", "filename": "src/test/ui/variants/variant-used-as-type.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fvariants%2Fvariant-used-as-type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e498005a12548a8fd396312affde05c4d3ca085/src%2Ftest%2Fui%2Fvariants%2Fvariant-used-as-type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fvariants%2Fvariant-used-as-type.stderr?ref=7e498005a12548a8fd396312affde05c4d3ca085", "patch": "@@ -24,3 +24,4 @@ LL | impl Ty {}\n \n error: aborting due to 2 previous errors\n \n+For more information about this error, try `rustc --explain E0573`."}]}