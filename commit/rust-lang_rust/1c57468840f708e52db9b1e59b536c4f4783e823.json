{"sha": "1c57468840f708e52db9b1e59b536c4f4783e823", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjNTc0Njg4NDBmNzA4ZTUyZGI5YjFlNTliNTM2YzRmNDc4M2U4MjM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-12-03T17:03:44Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2017-12-15T15:10:57Z"}, "message": "move `type_check` out of `transform` and into the `nll` module", "tree": {"sha": "aad2930c8ae56c301b23ad9991d1032bc36cd17d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aad2930c8ae56c301b23ad9991d1032bc36cd17d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c57468840f708e52db9b1e59b536c4f4783e823", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c57468840f708e52db9b1e59b536c4f4783e823", "html_url": "https://github.com/rust-lang/rust/commit/1c57468840f708e52db9b1e59b536c4f4783e823", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c57468840f708e52db9b1e59b536c4f4783e823/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fad3d1d7fd16fea674bdafe49649fb52e15ab118", "url": "https://api.github.com/repos/rust-lang/rust/commits/fad3d1d7fd16fea674bdafe49649fb52e15ab118", "html_url": "https://github.com/rust-lang/rust/commit/fad3d1d7fd16fea674bdafe49649fb52e15ab118"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "ffbb3d319174ab46f07a5deac800dc899c646226", "filename": "src/librustc_mir/borrow_check/nll/mod.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fmod.rs?ref=1c57468840f708e52db9b1e59b536c4f4783e823", "patch": "@@ -16,7 +16,6 @@ use rustc::util::nodemap::FxHashMap;\n use std::collections::BTreeSet;\n use std::io;\n use transform::MirSource;\n-use transform::type_check;\n use util::liveness::{self, LivenessMode, LivenessResult, LocalSet};\n use borrow_check::FlowAtLocation;\n use dataflow::MaybeInitializedLvals;\n@@ -27,14 +26,15 @@ use util::pretty::{self, ALIGN};\n use self::mir_util::PassWhere;\n \n mod constraint_generation;\n+pub(crate) mod region_infer;\n+mod renumber;\n mod subtype_constraint_generation;\n+pub(crate) mod type_check;\n mod universal_regions;\n-use self::universal_regions::UniversalRegions;\n \n-pub(crate) mod region_infer;\n use self::region_infer::RegionInferenceContext;\n+use self::universal_regions::UniversalRegions;\n \n-mod renumber;\n \n /// Rewrites the regions in the MIR to use NLL variables, also\n /// scraping out the set of universal regions (e.g., region parameters)"}, {"sha": "e42302761bfa37f577f743d9e44ef617f15ace47", "filename": "src/librustc_mir/borrow_check/nll/subtype_constraint_generation.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fsubtype_constraint_generation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fsubtype_constraint_generation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Fsubtype_constraint_generation.rs?ref=1c57468840f708e52db9b1e59b536c4f4783e823", "patch": "@@ -14,11 +14,11 @@ use rustc::infer::region_constraints::RegionConstraintData;\n use rustc::infer::region_constraints::{Verify, VerifyBound};\n use rustc::ty;\n use syntax::codemap::Span;\n-use transform::type_check::Locations;\n-use transform::type_check::MirTypeckRegionConstraints;\n-use transform::type_check::OutlivesSet;\n \n use super::region_infer::{TypeTest, RegionInferenceContext, RegionTest};\n+use super::type_check::Locations;\n+use super::type_check::MirTypeckRegionConstraints;\n+use super::type_check::OutlivesSet;\n \n /// When the MIR type-checker executes, it validates all the types in\n /// the MIR, and in the process generates a set of constraints that"}, {"sha": "fae911780a1e6ea22d98fdee8f433f624d6f0b13", "filename": "src/librustc_mir/borrow_check/nll/type_check/mod.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs?ref=1c57468840f708e52db9b1e59b536c4f4783e823", "previous_filename": "src/librustc_mir/transform/type_check.rs"}, {"sha": "563405fccc970a3dbd612b9fcc5640cdcab4c22a", "filename": "src/librustc_mir/transform/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Ftransform%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c57468840f708e52db9b1e59b536c4f4783e823/src%2Flibrustc_mir%2Ftransform%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fmod.rs?ref=1c57468840f708e52db9b1e59b536c4f4783e823", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use borrow_check::nll::type_check;\n use build;\n use rustc::hir::def_id::{CrateNum, DefId, LOCAL_CRATE};\n use rustc::mir::{Mir, Promoted};\n@@ -30,7 +31,6 @@ pub mod simplify_branches;\n pub mod simplify;\n pub mod erase_regions;\n pub mod no_landing_pads;\n-pub mod type_check;\n pub mod rustc_peek;\n pub mod elaborate_drops;\n pub mod add_call_guards;"}]}