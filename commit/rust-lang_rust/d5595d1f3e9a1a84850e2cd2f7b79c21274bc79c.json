{"sha": "d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ1NTk1ZDFmM2U5YTFhODQ4NTBlMmNkMmY3Yjc5YzIxMjc0YmM3OWM=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-20T14:09:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-20T14:09:33Z"}, "message": "Rollup merge of #35234 - nrc:rustdoc-macros, r=steveklabnik\n\nrustdoc: remove the `!` from macro URLs and titles\n\nBecause the `!` is part of a macro use, not the macro's name. E.g., you write `macro_rules! foo` not `macro_rules! foo!`, also `#[macro_import(foo)]`.\n\n(Pulled out of #35020).", "tree": {"sha": "bfff9ee7658117094c9498f2b8d55abe20232c95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bfff9ee7658117094c9498f2b8d55abe20232c95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "html_url": "https://github.com/rust-lang/rust/commit/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "99867ee88380062827b63ce547603eea5fd3136c", "url": "https://api.github.com/repos/rust-lang/rust/commits/99867ee88380062827b63ce547603eea5fd3136c", "html_url": "https://github.com/rust-lang/rust/commit/99867ee88380062827b63ce547603eea5fd3136c"}, {"sha": "301401e568e6ed297ab0b06c5cf60d8ba8109750", "url": "https://api.github.com/repos/rust-lang/rust/commits/301401e568e6ed297ab0b06c5cf60d8ba8109750", "html_url": "https://github.com/rust-lang/rust/commit/301401e568e6ed297ab0b06c5cf60d8ba8109750"}], "stats": {"total": 50, "additions": 35, "deletions": 15}, "files": [{"sha": "a62e1b7dfa9c505bfba37e503ad66acee15153b9", "filename": "src/doc/book/error-handling.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Fdoc%2Fbook%2Ferror-handling.md", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Fdoc%2Fbook%2Ferror-handling.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fbook%2Ferror-handling.md?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -59,7 +59,7 @@ handling is reducing the amount of explicit case analysis the programmer has to\n do while keeping code composable.\n \n Keeping code composable is important, because without that requirement, we\n-could [`panic`](../std/macro.panic!.html) whenever we\n+could [`panic`](../std/macro.panic.html) whenever we\n come across something unexpected. (`panic` causes the current task to unwind,\n and in most cases, the entire program aborts.) Here's an example:\n \n@@ -944,7 +944,7 @@ macro_rules! try {\n }\n ```\n \n-(The [real definition](../std/macro.try!.html) is a bit more\n+(The [real definition](../std/macro.try.html) is a bit more\n sophisticated. We will address that later.)\n \n Using the `try!` macro makes it very easy to simplify our last example. Since\n@@ -1271,7 +1271,7 @@ macro_rules! try {\n ```\n \n This is not its real definition. Its real definition is\n-[in the standard library](../std/macro.try!.html):\n+[in the standard library](../std/macro.try.html):\n \n <span id=\"code-try-def\"></span>\n \n@@ -2178,7 +2178,7 @@ heuristics!\n   [`From`](../std/convert/trait.From.html)\n   and\n   [`Error`](../std/error/trait.Error.html)\n-  impls to make the [`try!`](../std/macro.try!.html)\n+  impls to make the [`try!`](../std/macro.try.html)\n   macro more ergonomic.\n * If you're writing a library and your code can produce errors, define your own\n   error type and implement the"}, {"sha": "b7cbfb60ec4e9289ba1f57036afb7236aa1dcd88", "filename": "src/libcollections/fmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibcollections%2Ffmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibcollections%2Ffmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Ffmt.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -530,7 +530,7 @@ use string;\n /// assert_eq!(s, \"Hello, world!\");\n /// ```\n ///\n-/// [format!]: ../macro.format!.html\n+/// [format!]: ../macro.format.html\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub fn format(args: Arguments) -> string::String {\n     let mut output = string::String::new();"}, {"sha": "39b1a04e98e6985a7bdf400a46df9b9bd0ecc4a3", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -2803,7 +2803,7 @@ pub struct Macro {\n \n impl Clean<Item> for doctree::Macro {\n     fn clean(&self, cx: &DocContext) -> Item {\n-        let name = format!(\"{}!\", self.name.clean(cx));\n+        let name = self.name.clean(cx);\n         Item {\n             name: Some(name.clone()),\n             attrs: self.attrs.clean(cx),\n@@ -2814,8 +2814,10 @@ impl Clean<Item> for doctree::Macro {\n             def_id: cx.map.local_def_id(self.id),\n             inner: MacroItem(Macro {\n                 source: format!(\"macro_rules! {} {{\\n{}}}\",\n-                    name.trim_right_matches('!'), self.matchers.iter().map(|span|\n-                        format!(\"    {} => {{ ... }};\\n\", span.to_src(cx))).collect::<String>()),\n+                                name,\n+                                self.matchers.iter().map(|span| {\n+                                    format!(\"    {} => {{ ... }};\\n\", span.to_src(cx))\n+                                }).collect::<String>()),\n                 imported_from: self.imported_from.clean(cx),\n             }),\n         }"}, {"sha": "e02cfb96dddf17a0170f61008e82455f03480f4a", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -1426,6 +1426,16 @@ impl Context {\n                                                                 .open(&redir_dst) {\n                     try_err!(layout::redirect(&mut redirect_out, file_name), &redir_dst);\n                 }\n+\n+                // If the item is a macro, redirect from the old macro URL (with !)\n+                // to the new one (without).\n+                // FIXME(#35705) remove this redirect.\n+                if item_type == ItemType::Macro {\n+                    let redir_name = format!(\"{}.{}!.html\", item_type, name);\n+                    let redir_dst = self.dst.join(redir_name);\n+                    let mut redirect_out = try_err!(File::create(&redir_dst), &redir_dst);\n+                    try_err!(layout::redirect(&mut redirect_out, file_name), &redir_dst);\n+                }\n             }\n         }\n         Ok(())"}, {"sha": "307d014fd68c6a264f748ce6e02721ce0cb0bf41", "filename": "src/libstd/io/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Fio%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Fio%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fmod.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -236,7 +236,7 @@\n //! to read the line and print it, so we use `()`.\n //!\n //! [result]: type.Result.html\n-//! [try]: ../macro.try!.html\n+//! [try]: ../macro.try.html\n //!\n //! ## Platform-specific behavior\n //!\n@@ -957,8 +957,8 @@ pub trait Write {\n     /// explicitly be called. The [`write!`][write] macro should be favored to\n     /// invoke this method instead.\n     ///\n-    /// [formatargs]: ../macro.format_args!.html\n-    /// [write]: ../macro.write!.html\n+    /// [formatargs]: ../macro.format_args.html\n+    /// [write]: ../macro.write.html\n     ///\n     /// This function internally uses the [`write_all`][writeall] method on\n     /// this trait and hence will continuously write data so long as no errors"}, {"sha": "ff3b9c6d041633c6c658a384576197170926695f", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -175,7 +175,7 @@\n //! [`atomic`]: sync/atomic/index.html\n //! [`collections`]: collections/index.html\n //! [`for`]: ../book/loops.html#for\n-//! [`format!`]: macro.format!.html\n+//! [`format!`]: macro.format.html\n //! [`fs`]: fs/index.html\n //! [`io`]: io/index.html\n //! [`iter`]: iter/index.html"}, {"sha": "2b92da6c684a43f2e5680000520583964b7d2bff", "filename": "src/libstd/primitive_docs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Flibstd%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprimitive_docs.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -27,7 +27,7 @@\n /// assert!(!bool_val);\n /// ```\n ///\n-/// [`assert!`]: macro.assert!.html\n+/// [`assert!`]: macro.assert.html\n /// [`if`]: ../book/if.html\n /// [`BitAnd`]: ops/trait.BitAnd.html\n /// [`BitOr`]: ops/trait.BitOr.html"}, {"sha": "12de76654512d3ee2cb3544376e9a13f14297fb9", "filename": "src/test/rustdoc/issue-26606.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftest%2Frustdoc%2Fissue-26606.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftest%2Frustdoc%2Fissue-26606.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-26606.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -12,7 +12,7 @@\n // ignore-cross-compile\n // build-aux-docs\n \n-// @has issue_26606_macro/macro.make_item!.html\n+// @has issue_26606_macro/macro.make_item.html\n #[macro_use]\n extern crate issue_26606_macro;\n "}, {"sha": "9aeeb71707c905f4cbe3094751adbd480ee7c92e", "filename": "src/test/rustdoc/macros.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftest%2Frustdoc%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftest%2Frustdoc%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmacros.rs?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -8,10 +8,12 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// @has macros/macro.my_macro!.html //pre 'macro_rules! my_macro {'\n+// @has macros/macro.my_macro.html //pre 'macro_rules! my_macro {'\n // @has - //pre '() => { ... };'\n // @has - //pre '($a:tt) => { ... };'\n // @has - //pre '($e:expr) => { ... };'\n+// @has macros/macro.my_macro!.html\n+// @has - //a 'macro.my_macro.html'\n #[macro_export]\n macro_rules! my_macro {\n     () => [];"}, {"sha": "d71df6d3f83a860b5d84432c9f05402fdb0eeab1", "filename": "src/tools/linkchecker/Cargo.lock", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftools%2Flinkchecker%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c/src%2Ftools%2Flinkchecker%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flinkchecker%2FCargo.lock?ref=d5595d1f3e9a1a84850e2cd2f7b79c21274bc79c", "patch": "@@ -42,3 +42,9 @@ dependencies = [\n  \"matches 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[metadata]\n+\"checksum idna 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1053236e00ce4f668aeca4a769a09b3bf5a682d802abd6f3cb39374f6b162c11\"\n+\"checksum matches 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"15305656809ce5a4805b1ff2946892810992197ce1270ff79baded852187942e\"\n+\"checksum unicode-bidi 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c1f7ceb96afdfeedee42bade65a0d585a6a0106f681b6749c8ff4daa8df30b3f\"\n+\"checksum unicode-normalization 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"26643a2f83bac55f1976fb716c10234485f9202dcd65cfbdf9da49867b271172\"\n+\"checksum url 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"afe9ec54bc4db14bc8744b7fed060d785ac756791450959b2248443319d5b119\""}]}