{"sha": "6948a2df318d1bc2d668d8b29a653f15db1653d8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5NDhhMmRmMzE4ZDFiYzJkNjY4ZDhiMjlhNjUzZjE1ZGIxNjUzZDg=", "commit": {"author": {"name": "Jared Roesch", "email": "roeschinc@gmail.com", "date": "2014-12-23T09:08:00Z"}, "committer": {"name": "Jared Roesch", "email": "roeschinc@gmail.com", "date": "2014-12-23T21:58:49Z"}, "message": "Support all variants of WherePredicate\n\nAdds support for all variants of ast::WherePredicate in clean/mod.rs. Fixes #20048, but will need modification when EqualityPredicates are fully implemented in #20041.", "tree": {"sha": "a3639e5e2578aa2cec6d7b4bcb3bde1d6863e04c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a3639e5e2578aa2cec6d7b4bcb3bde1d6863e04c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6948a2df318d1bc2d668d8b29a653f15db1653d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6948a2df318d1bc2d668d8b29a653f15db1653d8", "html_url": "https://github.com/rust-lang/rust/commit/6948a2df318d1bc2d668d8b29a653f15db1653d8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6948a2df318d1bc2d668d8b29a653f15db1653d8/comments", "author": {"login": "jroesch", "id": 696509, "node_id": "MDQ6VXNlcjY5NjUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/696509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jroesch", "html_url": "https://github.com/jroesch", "followers_url": "https://api.github.com/users/jroesch/followers", "following_url": "https://api.github.com/users/jroesch/following{/other_user}", "gists_url": "https://api.github.com/users/jroesch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jroesch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jroesch/subscriptions", "organizations_url": "https://api.github.com/users/jroesch/orgs", "repos_url": "https://api.github.com/users/jroesch/repos", "events_url": "https://api.github.com/users/jroesch/events{/privacy}", "received_events_url": "https://api.github.com/users/jroesch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jroesch", "id": 696509, "node_id": "MDQ6VXNlcjY5NjUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/696509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jroesch", "html_url": "https://github.com/jroesch", "followers_url": "https://api.github.com/users/jroesch/followers", "following_url": "https://api.github.com/users/jroesch/following{/other_user}", "gists_url": "https://api.github.com/users/jroesch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jroesch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jroesch/subscriptions", "organizations_url": "https://api.github.com/users/jroesch/orgs", "repos_url": "https://api.github.com/users/jroesch/repos", "events_url": "https://api.github.com/users/jroesch/events{/privacy}", "received_events_url": "https://api.github.com/users/jroesch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62fb41c32bd97c4e9bc286a1db5d7126a06b8b91", "url": "https://api.github.com/repos/rust-lang/rust/commits/62fb41c32bd97c4e9bc286a1db5d7126a06b8b91", "html_url": "https://github.com/rust-lang/rust/commit/62fb41c32bd97c4e9bc286a1db5d7126a06b8b91"}], "stats": {"total": 45, "additions": 36, "deletions": 9}, "files": [{"sha": "a0e4d0a30a0a436dc1a8de29dfefbd352b4f664d", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/6948a2df318d1bc2d668d8b29a653f15db1653d8/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6948a2df318d1bc2d668d8b29a653f15db1653d8/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=6948a2df318d1bc2d668d8b29a653f15db1653d8", "patch": "@@ -683,23 +683,32 @@ impl Clean<Option<Lifetime>> for ty::Region {\n }\n \n #[deriving(Clone, RustcEncodable, RustcDecodable, PartialEq)]\n-pub struct WherePredicate {\n-    pub ty: Type,\n-    pub bounds: Vec<TyParamBound>\n+pub enum WherePredicate {\n+    BoundPredicate { ty: Type, bounds: Vec<TyParamBound> },\n+    RegionPredicate { lifetime: Lifetime, bounds: Vec<Lifetime>},\n+    // FIXME (#20041)\n+    EqPredicate\n }\n \n impl Clean<WherePredicate> for ast::WherePredicate {\n     fn clean(&self, cx: &DocContext) -> WherePredicate {\n         match *self {\n             ast::WherePredicate::BoundPredicate(ref wbp) => {\n-                WherePredicate {\n+                WherePredicate::BoundPredicate {\n                     ty: wbp.bounded_ty.clean(cx),\n                     bounds: wbp.bounds.clean(cx)\n                 }\n             }\n-            // FIXME(#20048)\n-            _ => {\n-                unimplemented!();\n+\n+            ast::WherePredicate::RegionPredicate(ref wrp) => {\n+                WherePredicate::RegionPredicate {\n+                    lifetime: wrp.lifetime.clean(cx),\n+                    bounds: wrp.bounds.clean(cx)\n+                }\n+            }\n+\n+            ast::WherePredicate::EqPredicate(_) => {\n+                WherePredicate::EqPredicate\n             }\n         }\n     }"}, {"sha": "9b39b223f8e40b7bcab6e344fad7d88c04efbf27", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/6948a2df318d1bc2d668d8b29a653f15db1653d8/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6948a2df318d1bc2d668d8b29a653f15db1653d8/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=6948a2df318d1bc2d668d8b29a653f15db1653d8", "patch": "@@ -128,8 +128,26 @@ impl<'a> fmt::Show for WhereClause<'a> {\n             if i > 0 {\n                 try!(f.write(\", \".as_bytes()));\n             }\n-            let bounds = pred.bounds.as_slice();\n-            try!(write!(f, \"{}: {}\", pred.ty, TyParamBounds(bounds)));\n+            match pred {\n+                &clean::WherePredicate::BoundPredicate {ref ty, ref bounds } => {\n+                    let bounds = bounds.as_slice();\n+                    try!(write!(f, \"{}: {}\", ty, TyParamBounds(bounds)));\n+                },\n+                &clean::WherePredicate::RegionPredicate { ref lifetime,\n+                                                          ref bounds } => {\n+                    try!(write!(f, \"{}: \", lifetime));\n+                    for (i, lifetime) in bounds.iter().enumerate() {\n+                        if i > 0 {\n+                            try!(f.write(\" + \".as_bytes()));\n+                        }\n+\n+                        try!(write!(f, \"{}\", lifetime));\n+                    }\n+                },\n+                &clean::WherePredicate::EqPredicate => {\n+                    unimplemented!()\n+                }\n+            }\n         }\n         Ok(())\n     }"}]}