{"sha": "1c75f5aaa177734c8dbdab91612a8d59b519bf07", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjNzVmNWFhYTE3NzczNGM4ZGJkYWI5MTYxMmE4ZDU5YjUxOWJmMDc=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-02-23T12:04:46Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-02-23T23:59:38Z"}, "message": "parse: test bad variants wrt. issue 48137.", "tree": {"sha": "6baaaa0f7f57a4b5b20013878c06e9087b4ee58c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6baaaa0f7f57a4b5b20013878c06e9087b4ee58c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c75f5aaa177734c8dbdab91612a8d59b519bf07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c75f5aaa177734c8dbdab91612a8d59b519bf07", "html_url": "https://github.com/rust-lang/rust/commit/1c75f5aaa177734c8dbdab91612a8d59b519bf07", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c75f5aaa177734c8dbdab91612a8d59b519bf07/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fde5939d1c843c3ede7f6ea0eef704f52854b45d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fde5939d1c843c3ede7f6ea0eef704f52854b45d", "html_url": "https://github.com/rust-lang/rust/commit/fde5939d1c843c3ede7f6ea0eef704f52854b45d"}], "stats": {"total": 97, "additions": 97, "deletions": 0}, "files": [{"sha": "48a679b2d098dd9d561ecee33b4d1af0ecb2ef33", "filename": "src/test/ui/parser/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs", "status": "added", "additions": 44, "deletions": 0, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/1c75f5aaa177734c8dbdab91612a8d59b519bf07/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c75f5aaa177734c8dbdab91612a8d59b519bf07/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs?ref=1c75f5aaa177734c8dbdab91612a8d59b519bf07", "patch": "@@ -0,0 +1,44 @@\n+fn main() {}\n+\n+macro_rules! expand_to_enum {\n+    () => {\n+        enum BadE {}\n+        //~^ ERROR enum is not supported in `trait`s or `impl`s\n+        //~| ERROR enum is not supported in `trait`s or `impl`s\n+        //~| ERROR enum is not supported in `extern` blocks\n+    };\n+}\n+\n+macro_rules! mac_impl {\n+    ($($i:item)*) => {\n+        struct S;\n+        impl S { $($i)* }\n+    }\n+}\n+\n+mac_impl! {\n+    struct BadS; //~ ERROR struct is not supported in `trait`s or `impl`s\n+    expand_to_enum!();\n+}\n+\n+macro_rules! mac_trait {\n+    ($($i:item)*) => {\n+        trait T { $($i)* }\n+    }\n+}\n+\n+mac_trait! {\n+    struct BadS; //~ ERROR struct is not supported in `trait`s or `impl`s\n+    expand_to_enum!();\n+}\n+\n+macro_rules! mac_extern {\n+    ($($i:item)*) => {\n+        extern \"C\" { $($i)* }\n+    }\n+}\n+\n+mac_extern! {\n+    struct BadS; //~ ERROR struct is not supported in `extern` blocks\n+    expand_to_enum!();\n+}"}, {"sha": "bfd27a1a41e13390c0afd53a7808736595bea280", "filename": "src/test/ui/parser/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.stderr", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/1c75f5aaa177734c8dbdab91612a8d59b519bf07/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1c75f5aaa177734c8dbdab91612a8d59b519bf07/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-48137-macros-cannot-interpolate-impl-items-bad-variants.stderr?ref=1c75f5aaa177734c8dbdab91612a8d59b519bf07", "patch": "@@ -0,0 +1,53 @@\n+error: struct is not supported in `trait`s or `impl`s\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:20:5\n+   |\n+LL |     struct BadS;\n+   |     ^^^^^^^^^^^^\n+\n+error: enum is not supported in `trait`s or `impl`s\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:5:9\n+   |\n+LL |         enum BadE {}\n+   |         ^^^^^^^^^\n+...\n+LL |     expand_to_enum!();\n+   |     ------------------ in this macro invocation\n+   |\n+   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: struct is not supported in `trait`s or `impl`s\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:31:5\n+   |\n+LL |     struct BadS;\n+   |     ^^^^^^^^^^^^\n+\n+error: enum is not supported in `trait`s or `impl`s\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:5:9\n+   |\n+LL |         enum BadE {}\n+   |         ^^^^^^^^^\n+...\n+LL |     expand_to_enum!();\n+   |     ------------------ in this macro invocation\n+   |\n+   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: struct is not supported in `extern` blocks\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:42:5\n+   |\n+LL |     struct BadS;\n+   |     ^^^^^^^^^^^^\n+\n+error: enum is not supported in `extern` blocks\n+  --> $DIR/issue-48137-macros-cannot-interpolate-impl-items-bad-variants.rs:5:9\n+   |\n+LL |         enum BadE {}\n+   |         ^^^^^^^^^\n+...\n+LL |     expand_to_enum!();\n+   |     ------------------ in this macro invocation\n+   |\n+   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n+\n+error: aborting due to 6 previous errors\n+"}]}