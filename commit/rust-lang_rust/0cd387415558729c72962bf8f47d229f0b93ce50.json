{"sha": "0cd387415558729c72962bf8f47d229f0b93ce50", "node_id": "C_kwDOAAsO6NoAKDBjZDM4NzQxNTU1ODcyOWM3Mjk2MmJmOGY0N2QyMjlmMGI5M2NlNTA", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-04-21T22:07:52Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-04-21T22:09:09Z"}, "message": "rustdoc: clean up redundant search hiding results code\n\n  * There's no need to call `history.replaceState` right before\n    calling `searchState.hideResults`, which already does it.\n  * There's no need to implement hiding search results when that\n    is already implemented.", "tree": {"sha": "1ec3063913e27f063bfc65027e671fd52115ce3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1ec3063913e27f063bfc65027e671fd52115ce3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0cd387415558729c72962bf8f47d229f0b93ce50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0cd387415558729c72962bf8f47d229f0b93ce50", "html_url": "https://github.com/rust-lang/rust/commit/0cd387415558729c72962bf8f47d229f0b93ce50", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0cd387415558729c72962bf8f47d229f0b93ce50/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d69ee0574b2d315d692af1ad94c211a448101eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d69ee0574b2d315d692af1ad94c211a448101eb", "html_url": "https://github.com/rust-lang/rust/commit/9d69ee0574b2d315d692af1ad94c211a448101eb"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "bccf675c14b5ed9162d58845c52fc2eda9e87a1f", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0cd387415558729c72962bf8f47d229f0b93ce50/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/0cd387415558729c72962bf8f47d229f0b93ce50/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=0cd387415558729c72962bf8f47d229f0b93ce50", "patch": "@@ -375,10 +375,7 @@ function preLoadCss(cssUrl) {\n \n     function handleEscape(ev) {\n         searchState.clearInputTimeout();\n-        switchDisplayedElement(null);\n-        if (browserSupportsHistoryApi()) {\n-            history.replaceState(null, \"\", getNakedUrl() + window.location.hash);\n-        }\n+        searchState.hideResults();\n         ev.preventDefault();\n         searchState.defocus();\n         window.hideAllModals(true); // true = reset focus for tooltips"}, {"sha": "3dc4f2149b8b91e26b8aad247b8287e1c822b889", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0cd387415558729c72962bf8f47d229f0b93ce50/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/0cd387415558729c72962bf8f47d229f0b93ce50/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=0cd387415558729c72962bf8f47d229f0b93ce50", "patch": "@@ -2412,10 +2412,6 @@ function initSearch(rawSearchIndex) {\n         const searchAfter500ms = () => {\n             searchState.clearInputTimeout();\n             if (searchState.input.value.length === 0) {\n-                if (browserSupportsHistoryApi()) {\n-                    history.replaceState(null, window.currentCrate + \" - Rust\",\n-                        getNakedUrl() + window.location.hash);\n-                }\n                 searchState.hideResults();\n             } else {\n                 searchState.timeout = setTimeout(search, 500);"}]}