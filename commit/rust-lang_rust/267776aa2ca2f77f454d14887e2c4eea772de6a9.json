{"sha": "267776aa2ca2f77f454d14887e2c4eea772de6a9", "node_id": "C_kwDOAAsO6NoAKDI2Nzc3NmFhMmNhMmY3N2Y0NTRkMTQ4ODdlMmM0ZWVhNzcyZGU2YTk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-02-08T05:47:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-02-08T05:47:32Z"}, "message": "Rollup merge of #93521 - jsha:sidebar-hover, r=GuillaumeGomez\n\nFix hover effects in sidebar\n\nThe dark and ayu themes have a menu-like highlight on sidebar items. The light theme used to, but it was accidentally lost in the sidebar unification. The change brings back the hover effect in the light theme.\n\nIt also makes the hover effect apply consistently to all links in the sidebar, including headings.\n\nIt also simplifies the \"In _path_\" heading so it's one big link. The breadcrumbs are still readily available at the top of the page.\n\nNote that a small number of headings are not linkified and so don't get the hover effect. That will be fixed with #92957.\n\nDemo: https://rustdoc.crud.net/jsha/sidebar-hover/std/string/trait.ToString.html\n\nr? `@GuillaumeGomez`\n\nFixes #93115", "tree": {"sha": "af84feb4ba616e158845f5e769c2b93eb4d862f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af84feb4ba616e158845f5e769c2b93eb4d862f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/267776aa2ca2f77f454d14887e2c4eea772de6a9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiAgP1CRBK7hj4Ov3rIwAAZaoIACMV07OjarsEsL3TOWJWfqzB\nsSMOkFRuW63Aj691brkES2453j9UK9LTsUr4Z0cd+pgr4mn48GzgrOkexoHkA/Y0\nKgahA0vdO/ev4KWxh7rZebBrsluxSB31yGyegl1x0Z5NuuOUMF4amkBl38W4KPoi\nmCc3QVJGUQ1PsiIZJB15t1x5mxp8dSxiKGMeB6Ku3kDxNs7NiCUYYOJK2Pd7McrL\nlO6L7sfuchjLkLNVloG2f+gyW5iAc3E/QCijyRMiUY2epnUJP5qv8Erimp9u/+G5\n3Cx2NAYKk415qWT1sYXYL5qR5rQWRnFJmQZe4tk7rHYMDls55RbiRM284n2ph4M=\n=sVUJ\n-----END PGP SIGNATURE-----\n", "payload": "tree af84feb4ba616e158845f5e769c2b93eb4d862f3\nparent 6024426e86af6dbe3991901752d886e9d43efa2a\nparent c20e2a9c237cab7b481137f8f34a4b1822c43aae\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1644299252 +0100\ncommitter GitHub <noreply@github.com> 1644299252 +0100\n\nRollup merge of #93521 - jsha:sidebar-hover, r=GuillaumeGomez\n\nFix hover effects in sidebar\n\nThe dark and ayu themes have a menu-like highlight on sidebar items. The light theme used to, but it was accidentally lost in the sidebar unification. The change brings back the hover effect in the light theme.\n\nIt also makes the hover effect apply consistently to all links in the sidebar, including headings.\n\nIt also simplifies the \"In _path_\" heading so it's one big link. The breadcrumbs are still readily available at the top of the page.\n\nNote that a small number of headings are not linkified and so don't get the hover effect. That will be fixed with #92957.\n\nDemo: https://rustdoc.crud.net/jsha/sidebar-hover/std/string/trait.ToString.html\n\nr? `@GuillaumeGomez`\n\nFixes #93115\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/267776aa2ca2f77f454d14887e2c4eea772de6a9", "html_url": "https://github.com/rust-lang/rust/commit/267776aa2ca2f77f454d14887e2c4eea772de6a9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/267776aa2ca2f77f454d14887e2c4eea772de6a9/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6024426e86af6dbe3991901752d886e9d43efa2a", "url": "https://api.github.com/repos/rust-lang/rust/commits/6024426e86af6dbe3991901752d886e9d43efa2a", "html_url": "https://github.com/rust-lang/rust/commit/6024426e86af6dbe3991901752d886e9d43efa2a"}, {"sha": "c20e2a9c237cab7b481137f8f34a4b1822c43aae", "url": "https://api.github.com/repos/rust-lang/rust/commits/c20e2a9c237cab7b481137f8f34a4b1822c43aae", "html_url": "https://github.com/rust-lang/rust/commit/c20e2a9c237cab7b481137f8f34a4b1822c43aae"}], "stats": {"total": 61, "additions": 23, "deletions": 38}, "files": [{"sha": "6d94c70eadee6455d27aa344e8d37439326c8f5a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -463,9 +463,6 @@ nav.sub {\n .location a:first-of-type {\n \tfont-weight: 500;\n }\n-.location a:hover {\n-\ttext-decoration: underline;\n-}\n \n .block {\n \tpadding: 0;\n@@ -476,10 +473,11 @@ nav.sub {\n \tlist-style: none;\n }\n \n-.block a {\n+.block a,\n+h2.location a {\n \tdisplay: block;\n-\tpadding: 0.3em;\n-\tmargin-left: -0.3em;\n+\tpadding: 0.3rem;\n+\tmargin-left: -0.3rem;\n \n \ttext-overflow: ellipsis;\n \toverflow: hidden;\n@@ -494,8 +492,8 @@ nav.sub {\n \tfont-weight: 500;\n \tpadding: 0;\n \tmargin: 0;\n-\tmargin-top: 1rem;\n-\tmargin-bottom: 1rem;\n+\tmargin-top: 0.7rem;\n+\tmargin-bottom: 0.7rem;\n }\n \n .sidebar h3 {\n@@ -1812,10 +1810,7 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n \n \t.mobile-topbar .location {\n \t\tborder: none;\n-\t\tmargin: 0;\n-\t\tmargin-left: auto;\n-\t\tpadding: 0.3em;\n-\t\tpadding-right: 0.6em;\n+\t\tmargin: auto 0.5em auto auto;\n \t\ttext-overflow: ellipsis;\n \t\toverflow: hidden;\n \t\twhite-space: nowrap;"}, {"sha": "e402b3583f3996db04ceac724326a98bc2f2a20d", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -91,7 +91,8 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #5c6773;\n }\n \n-.sidebar .current {\n+.sidebar .current,\n+.sidebar a:hover {\n \tbackground-color: transparent;\n \tcolor: #ffb44c;\n }\n@@ -104,15 +105,6 @@ pre, .rustdoc.source .example-wrap {\n \tcolor: #ff7733;\n }\n \n-.sidebar-elems .location a {\n-\tcolor: #fff;\n-}\n-\n-.block a:hover {\n-\tbackground: transparent;\n-\tcolor: #ffb44c;\n-}\n-\n .line-numbers span { color: #5c6773; }\n .line-numbers .line-highlighted {\n \tcolor: #708090;\n@@ -220,6 +212,10 @@ pre.rust a,\n .in-band a {\n \tcolor: #c5c5c5;\n }\n+.sidebar h2 a,\n+.sidebar h3 a {\n+\tcolor: white;\n+}\n .search-results a {\n \tcolor: #0096cf;\n }"}, {"sha": "0a56055b8cbf67367ff32262c74aefe88b8f29ea", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -61,18 +61,15 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: rgba(32, 34, 37, .6);\n }\n \n-.sidebar .current {\n-\tbackground-color: #333;\n+.sidebar .current,\n+.sidebar a:hover {\n+\tbackground: #444;\n }\n \n .source .sidebar {\n \tbackground-color: #565656;\n }\n \n-.block a:hover {\n-\tbackground: #444;\n-}\n-\n .line-numbers span { color: #3B91E2; }\n .line-numbers .line-highlighted {\n \tbackground-color: #0a042f !important;"}, {"sha": "dc1715b2a78f33116cc183b8fef0b3683d224dd8", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -63,18 +63,15 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: rgba(36, 37, 39, 0.6);\n }\n \n-.sidebar .current {\n+.sidebar .current,\n+.sidebar a:hover {\n \tbackground-color: #fff;\n }\n \n .source .sidebar {\n \tbackground-color: #f1f1f1;\n }\n \n-.block a:hover {\n-\tbackground: #F5F5F5;\n-}\n-\n .line-numbers span { color: #c67e2d; }\n .line-numbers .line-highlighted {\n \tbackground-color: #FDFFD3 !important;"}, {"sha": "2e44dd32d45b4164791938cbad7c0db3f1ecc9a6", "filename": "src/test/rustdoc-gui/mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fmobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fmobile.goml?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -11,7 +11,7 @@ assert-css: (\".main-heading\", {\n   \"flex-direction\": \"column\"\n })\n \n-assert-property: (\".mobile-topbar h2.location\", {\"offsetHeight\": 45})\n+assert-property: (\".mobile-topbar h2.location\", {\"offsetHeight\": 48})\n \n // Note: We can't use assert-text here because the 'Since' is set by CSS and\n // is therefore not part of the DOM."}, {"sha": "9581aa74b0f643eafeaa9c3c3f9bcf2bdf2717e2", "filename": "src/test/rustdoc-gui/sidebar-mobile.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -39,4 +39,4 @@ assert-position: (\"#method\\.must_use\", {\"y\": 45})\n // Check that the bottom-most item on the sidebar menu can be scrolled fully into view.\n click: \".sidebar-menu-toggle\"\n scroll-to: \".block.keyword li:nth-child(1)\"\n-assert-position: (\".block.keyword li:nth-child(1)\", {\"y\": 542.234375})\n+compare-elements-position-near: (\".block.keyword li:nth-child(1)\", \".mobile-topbar\", {\"y\": 543})"}, {"sha": "877cc61b66f24dd65c502d3daf254b60e0321459", "filename": "src/test/rustdoc-gui/sidebar.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -77,7 +77,7 @@ assert-text: (\"#functions + .item-table .item-left > a\", \"foo\")\n \n // Links to trait implementations in the sidebar should not wrap even if they are long.\n goto: file://|DOC_PATH|/lib2/struct.HasALongTraitWithParams.html\n-assert-property: (\".sidebar-links a\", {\"offsetHeight\": 29})\n+assert-property: (\".sidebar-links a\", {\"offsetHeight\": 30})\n \n // Test that clicking on of the \"In <module>\" headings in the sidebar links to the\n // appropriate anchor in index.html."}, {"sha": "d4142511e4373e8a12c252f6cc8bb4d546470851", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/267776aa2ca2f77f454d14887e2c4eea772de6a9/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=267776aa2ca2f77f454d14887e2c4eea772de6a9", "patch": "@@ -32,6 +32,6 @@ assert-property: (\".item-decl pre\", {\"scrollWidth\": \"950\"})\n size: (600, 600)\n goto: file://|DOC_PATH|/lib2/too_long/struct.SuperIncrediblyLongLongLongLongLongLongLongGigaGigaGigaMegaLongLongLongStructName.html\n // It shouldn't have an overflow in the topbar either.\n-assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"986\"})\n-assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"504\"})\n+assert-property: (\".mobile-topbar .location\", {\"scrollWidth\": \"493\"})\n+assert-property: (\".mobile-topbar .location\", {\"clientWidth\": \"493\"})\n assert-css: (\".mobile-topbar .location\", {\"overflow-x\": \"hidden\"})"}]}