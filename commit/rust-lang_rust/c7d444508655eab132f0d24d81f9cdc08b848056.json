{"sha": "c7d444508655eab132f0d24d81f9cdc08b848056", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3ZDQ0NDUwODY1NWVhYjEzMmYwZDI0ZDgxZjljZGMwOGI4NDgwNTY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-19T06:26:01Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-03-19T06:26:01Z"}, "message": "Auto merge of #3888 - phansch:extract_mistyped_literal_suffix_tests_and_rustfix, r=flip1995\n\nAdd rustfix tests for mistyped_literal_suffix lint\n\nThis moves all `mistyped_literal_suffix` tests to their own file and\nenables rustfix tests for them.\n\ncc #3603, #2038\n\nBased on #3887", "tree": {"sha": "72763cd39b0dc24a4ba780f8fa54112608723b52", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72763cd39b0dc24a4ba780f8fa54112608723b52"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7d444508655eab132f0d24d81f9cdc08b848056", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7d444508655eab132f0d24d81f9cdc08b848056", "html_url": "https://github.com/rust-lang/rust/commit/c7d444508655eab132f0d24d81f9cdc08b848056", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7d444508655eab132f0d24d81f9cdc08b848056/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc825a36f234984342a183d03a12d0263f8b72b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dc825a36f234984342a183d03a12d0263f8b72b3", "html_url": "https://github.com/rust-lang/rust/commit/dc825a36f234984342a183d03a12d0263f8b72b3"}, {"sha": "0452704978c15c2ce49927c67e5af5ed38fb8b4e", "url": "https://api.github.com/repos/rust-lang/rust/commits/0452704978c15c2ce49927c67e5af5ed38fb8b4e", "html_url": "https://github.com/rust-lang/rust/commit/0452704978c15c2ce49927c67e5af5ed38fb8b4e"}], "stats": {"total": 284, "additions": 160, "deletions": 124}, "files": [{"sha": "5f3f95bab98057a9d366ed4343afdf27f3e10dea", "filename": "tests/ui/literals.rs", "status": "modified", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fliterals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fliterals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fliterals.rs?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -37,27 +37,9 @@ fn main() {\n     let ok16 = 0xFE_BAFE_ABAB_ABCD;\n     let ok17 = 0x123_4567_8901_usize;\n \n-    let fail9 = 0xabcdef;\n-    let fail10 = 0xBAFEBAFE;\n-    let fail11 = 0xabcdeff;\n-    let fail12 = 0xabcabcabcabcabcabc;\n     let fail13 = 0x1_23456_78901_usize;\n \n-    let fail14 = 2_32;\n-    let fail15 = 4_64;\n-    let fail16 = 7_8;\n-    let fail17 = 23_16;\n-    let ok18 = 23_128;\n     let fail19 = 12_3456_21;\n-    let fail20 = 2__8;\n-    let fail21 = 4___16;\n     let fail22 = 3__4___23;\n     let fail23 = 3__16___23;\n-\n-    let fail24 = 12.34_64;\n-    let fail25 = 1E2_32;\n-    let fail26 = 43E7_64;\n-    let fail27 = 243E17_32;\n-    let fail28 = 241251235E723_64;\n-    let fail29 = 42279.911_32;\n }"}, {"sha": "22692160d73ad16fc386c5cb955c8e0b864ad003", "filename": "tests/ui/literals.stderr", "status": "modified", "additions": 5, "deletions": 105, "changes": 110, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fliterals.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fliterals.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fliterals.stderr?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -86,133 +86,33 @@ help: if you mean to use an octal constant, use `0o`\n LL |     let fail8 = 0o123;\n    |                 ^^^^^\n \n-error: long literal lacking separators\n-  --> $DIR/literals.rs:40:17\n-   |\n-LL |     let fail9 = 0xabcdef;\n-   |                 ^^^^^^^^ help: consider: `0x00ab_cdef`\n-   |\n-   = note: `-D clippy::unreadable-literal` implied by `-D warnings`\n-\n-error: long literal lacking separators\n-  --> $DIR/literals.rs:41:18\n-   |\n-LL |     let fail10 = 0xBAFEBAFE;\n-   |                  ^^^^^^^^^^ help: consider: `0xBAFE_BAFE`\n-\n-error: long literal lacking separators\n-  --> $DIR/literals.rs:42:18\n-   |\n-LL |     let fail11 = 0xabcdeff;\n-   |                  ^^^^^^^^^ help: consider: `0x0abc_deff`\n-\n-error: long literal lacking separators\n-  --> $DIR/literals.rs:43:18\n-   |\n-LL |     let fail12 = 0xabcabcabcabcabcabc;\n-   |                  ^^^^^^^^^^^^^^^^^^^^ help: consider: `0x00ab_cabc_abca_bcab_cabc`\n-\n error: digit groups should be smaller\n-  --> $DIR/literals.rs:44:18\n+  --> $DIR/literals.rs:40:18\n    |\n LL |     let fail13 = 0x1_23456_78901_usize;\n    |                  ^^^^^^^^^^^^^^^^^^^^^ help: consider: `0x0123_4567_8901_usize`\n    |\n    = note: `-D clippy::large-digit-groups` implied by `-D warnings`\n \n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:46:18\n-   |\n-LL |     let fail14 = 2_32;\n-   |                  ^^^^ help: did you mean to write: `2_i32`\n-   |\n-   = note: #[deny(clippy::mistyped_literal_suffixes)] on by default\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:47:18\n-   |\n-LL |     let fail15 = 4_64;\n-   |                  ^^^^ help: did you mean to write: `4_i64`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:48:18\n-   |\n-LL |     let fail16 = 7_8;\n-   |                  ^^^ help: did you mean to write: `7_i8`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:49:18\n-   |\n-LL |     let fail17 = 23_16;\n-   |                  ^^^^^ help: did you mean to write: `23_i16`\n-\n error: digits grouped inconsistently by underscores\n-  --> $DIR/literals.rs:51:18\n+  --> $DIR/literals.rs:42:18\n    |\n LL |     let fail19 = 12_3456_21;\n    |                  ^^^^^^^^^^ help: consider: `12_345_621`\n    |\n    = note: `-D clippy::inconsistent-digit-grouping` implied by `-D warnings`\n \n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:52:18\n-   |\n-LL |     let fail20 = 2__8;\n-   |                  ^^^^ help: did you mean to write: `2_i8`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:53:18\n-   |\n-LL |     let fail21 = 4___16;\n-   |                  ^^^^^^ help: did you mean to write: `4_i16`\n-\n error: digits grouped inconsistently by underscores\n-  --> $DIR/literals.rs:54:18\n+  --> $DIR/literals.rs:43:18\n    |\n LL |     let fail22 = 3__4___23;\n    |                  ^^^^^^^^^ help: consider: `3_423`\n \n error: digits grouped inconsistently by underscores\n-  --> $DIR/literals.rs:55:18\n+  --> $DIR/literals.rs:44:18\n    |\n LL |     let fail23 = 3__16___23;\n    |                  ^^^^^^^^^^ help: consider: `31_623`\n \n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:57:18\n-   |\n-LL |     let fail24 = 12.34_64;\n-   |                  ^^^^^^^^ help: did you mean to write: `12.34_f64`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:58:18\n-   |\n-LL |     let fail25 = 1E2_32;\n-   |                  ^^^^^^ help: did you mean to write: `1E2_f32`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:59:18\n-   |\n-LL |     let fail26 = 43E7_64;\n-   |                  ^^^^^^^ help: did you mean to write: `43E7_f64`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:60:18\n-   |\n-LL |     let fail27 = 243E17_32;\n-   |                  ^^^^^^^^^ help: did you mean to write: `243E17_f32`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:61:18\n-   |\n-LL |     let fail28 = 241251235E723_64;\n-   |                  ^^^^^^^^^^^^^^^^ help: did you mean to write: `241_251_235E723_f64`\n-\n-error: mistyped literal suffix\n-  --> $DIR/literals.rs:62:18\n-   |\n-LL |     let fail29 = 42279.911_32;\n-   |                  ^^^^^^^^^^^^ help: did you mean to write: `42_279.911_f32`\n-\n-error: aborting due to 31 previous errors\n+error: aborting due to 15 previous errors\n "}, {"sha": "531e44a781c254ac4aece6bee2f7d3ae0662bb97", "filename": "tests/ui/mistyped_literal_suffix.fixed", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmistyped_literal_suffix.fixed?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -0,0 +1,22 @@\n+// run-rustfix\n+\n+#![allow(dead_code, unused_variables, clippy::excessive_precision)]\n+\n+fn main() {\n+    let fail14 = 2_i32;\n+    let fail15 = 4_i64;\n+    let fail16 = 7_i8; //\n+    let fail17 = 23_i16; //\n+    let ok18 = 23_128;\n+\n+    let fail20 = 2_i8; //\n+    let fail21 = 4_i16; //\n+\n+    let fail24 = 12.34_f64;\n+    let fail25 = 1E2_f32;\n+    let fail26 = 43E7_f64;\n+    let fail27 = 243E17_f32;\n+    #[allow(overflowing_literals)]\n+    let fail28 = 241_251_235E723_f64;\n+    let fail29 = 42_279.911_f32;\n+}"}, {"sha": "d67c842b4af49d6ca436e3ade09345b1aa5c7ab5", "filename": "tests/ui/mistyped_literal_suffix.rs", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmistyped_literal_suffix.rs?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -0,0 +1,22 @@\n+// run-rustfix\n+\n+#![allow(dead_code, unused_variables, clippy::excessive_precision)]\n+\n+fn main() {\n+    let fail14 = 2_32;\n+    let fail15 = 4_64;\n+    let fail16 = 7_8; //\n+    let fail17 = 23_16; //\n+    let ok18 = 23_128;\n+\n+    let fail20 = 2__8; //\n+    let fail21 = 4___16; //\n+\n+    let fail24 = 12.34_64;\n+    let fail25 = 1E2_32;\n+    let fail26 = 43E7_64;\n+    let fail27 = 243E17_32;\n+    #[allow(overflowing_literals)]\n+    let fail28 = 241251235E723_64;\n+    let fail29 = 42279.911_32;\n+}"}, {"sha": "c3fed6ae8fdc93d2ea33e351266e82116f55b905", "filename": "tests/ui/mistyped_literal_suffix.stderr", "status": "added", "additions": 76, "deletions": 0, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Fmistyped_literal_suffix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmistyped_literal_suffix.stderr?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -0,0 +1,76 @@\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:6:18\n+   |\n+LL |     let fail14 = 2_32;\n+   |                  ^^^^ help: did you mean to write: `2_i32`\n+   |\n+   = note: #[deny(clippy::mistyped_literal_suffixes)] on by default\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:7:18\n+   |\n+LL |     let fail15 = 4_64;\n+   |                  ^^^^ help: did you mean to write: `4_i64`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:8:18\n+   |\n+LL |     let fail16 = 7_8; //\n+   |                  ^^^ help: did you mean to write: `7_i8`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:9:18\n+   |\n+LL |     let fail17 = 23_16; //\n+   |                  ^^^^^ help: did you mean to write: `23_i16`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:12:18\n+   |\n+LL |     let fail20 = 2__8; //\n+   |                  ^^^^ help: did you mean to write: `2_i8`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:13:18\n+   |\n+LL |     let fail21 = 4___16; //\n+   |                  ^^^^^^ help: did you mean to write: `4_i16`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:15:18\n+   |\n+LL |     let fail24 = 12.34_64;\n+   |                  ^^^^^^^^ help: did you mean to write: `12.34_f64`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:16:18\n+   |\n+LL |     let fail25 = 1E2_32;\n+   |                  ^^^^^^ help: did you mean to write: `1E2_f32`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:17:18\n+   |\n+LL |     let fail26 = 43E7_64;\n+   |                  ^^^^^^^ help: did you mean to write: `43E7_f64`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:18:18\n+   |\n+LL |     let fail27 = 243E17_32;\n+   |                  ^^^^^^^^^ help: did you mean to write: `243E17_f32`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:20:18\n+   |\n+LL |     let fail28 = 241251235E723_64;\n+   |                  ^^^^^^^^^^^^^^^^ help: did you mean to write: `241_251_235E723_f64`\n+\n+error: mistyped literal suffix\n+  --> $DIR/mistyped_literal_suffix.rs:21:18\n+   |\n+LL |     let fail29 = 42279.911_32;\n+   |                  ^^^^^^^^^^^^ help: did you mean to write: `42_279.911_f32`\n+\n+error: aborting due to 12 previous errors\n+"}, {"sha": "1fc93b9c3a8b5972910d1204c14121605f3720e5", "filename": "tests/ui/unreadable_literal.fixed", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funreadable_literal.fixed?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -17,4 +17,9 @@ fn main() {\n     let bad = (0b11_0110_i64, 0x0123_4567_8901_usize, 123_456_f32, 1.234_567_f32);\n     let good_sci = 1.1234e1;\n     let bad_sci = 1.123_456e1;\n+\n+    let fail9 = 0x00ab_cdef;\n+    let fail10: u32 = 0xBAFE_BAFE;\n+    let fail11 = 0x0abc_deff;\n+    let fail12: i128 = 0x00ab_cabc_abca_bcab_cabc;\n }"}, {"sha": "ef0ef2b9b9e5216e7cccda3dd5f63ac5a57ef618", "filename": "tests/ui/unreadable_literal.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funreadable_literal.rs?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -17,4 +17,9 @@ fn main() {\n     let bad = (0b110110_i64, 0x12345678901_usize, 123456_f32, 1.234567_f32);\n     let good_sci = 1.1234e1;\n     let bad_sci = 1.123456e1;\n+\n+    let fail9 = 0xabcdef;\n+    let fail10: u32 = 0xBAFEBAFE;\n+    let fail11 = 0xabcdeff;\n+    let fail12: i128 = 0xabcabcabcabcabcabc;\n }"}, {"sha": "2ece537828751ff13a3988548504668b810079d7", "filename": "tests/ui/unreadable_literal.stderr", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c7d444508655eab132f0d24d81f9cdc08b848056/tests%2Fui%2Funreadable_literal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funreadable_literal.stderr?ref=c7d444508655eab132f0d24d81f9cdc08b848056", "patch": "@@ -30,5 +30,29 @@ error: long literal lacking separators\n LL |     let bad_sci = 1.123456e1;\n    |                   ^^^^^^^^^^ help: consider: `1.123_456e1`\n \n-error: aborting due to 5 previous errors\n+error: long literal lacking separators\n+  --> $DIR/unreadable_literal.rs:21:17\n+   |\n+LL |     let fail9 = 0xabcdef;\n+   |                 ^^^^^^^^ help: consider: `0x00ab_cdef`\n+\n+error: long literal lacking separators\n+  --> $DIR/unreadable_literal.rs:22:23\n+   |\n+LL |     let fail10: u32 = 0xBAFEBAFE;\n+   |                       ^^^^^^^^^^ help: consider: `0xBAFE_BAFE`\n+\n+error: long literal lacking separators\n+  --> $DIR/unreadable_literal.rs:23:18\n+   |\n+LL |     let fail11 = 0xabcdeff;\n+   |                  ^^^^^^^^^ help: consider: `0x0abc_deff`\n+\n+error: long literal lacking separators\n+  --> $DIR/unreadable_literal.rs:24:24\n+   |\n+LL |     let fail12: i128 = 0xabcabcabcabcabcabc;\n+   |                        ^^^^^^^^^^^^^^^^^^^^ help: consider: `0x00ab_cabc_abca_bcab_cabc`\n+\n+error: aborting due to 9 previous errors\n "}]}