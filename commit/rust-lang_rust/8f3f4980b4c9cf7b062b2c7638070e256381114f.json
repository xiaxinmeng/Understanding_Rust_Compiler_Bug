{"sha": "8f3f4980b4c9cf7b062b2c7638070e256381114f", "node_id": "C_kwDOAAsO6NoAKDhmM2Y0OTgwYjRjOWNmN2IwNjJiMmM3NjM4MDcwZTI1NjM4MTExNGY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-25T17:35:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-25T17:35:39Z"}, "message": "Rollup merge of #104760 - nnethercote:rm-LegacyDerive, r=petrochenkov\n\nClarify `SyntaxExtensionKind::LegacyDerive`.\n\nIt's always treated the same as `SyntaxExtensionKind::Derive`.", "tree": {"sha": "1404d367da3f6312e260c2b29473f5760630389d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1404d367da3f6312e260c2b29473f5760630389d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8f3f4980b4c9cf7b062b2c7638070e256381114f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjgPzrCRBK7hj4Ov3rIwAAyS4IAEnPjin6AC7hOTh/FJp5yx6V\nyrDWUGvR4rxI35bwuyYMY/Pc6RVYFm+dBvPDnIE197+zCmhKBQmOOwyf+wgB0hS8\nDk7IRAeoPquHn/qL9mUxq1VPbeTa5SJF/7eexX65UVyPCyLJZiz1cYT/v6aPn3xu\npadKbyeQDjNb5W7bcjy7hs57zyPcd5+MIk7s884XZ1148njMzGIa9rv0KCoIz0Ao\n0aes8T2VcujLg3DfF9YPOraLWle12ht6S4N34aawid0P3ellGAr/sufRq9CCXvrV\n0iB7ftE1mmGx0ADuwcd66I/lMfVra3q/O4VrU8XQ+aQYeCrFKp4LTLFJPyxViao=\n=c5v0\n-----END PGP SIGNATURE-----\n", "payload": "tree 1404d367da3f6312e260c2b29473f5760630389d\nparent 9c7dc3e30b6a7c04190ceb96fb9a3f6e9bd1848a\nparent 2c5d3705ecb7ff07f5f47e736489d3abf3b64aa7\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669397739 +0100\ncommitter GitHub <noreply@github.com> 1669397739 +0100\n\nRollup merge of #104760 - nnethercote:rm-LegacyDerive, r=petrochenkov\n\nClarify `SyntaxExtensionKind::LegacyDerive`.\n\nIt's always treated the same as `SyntaxExtensionKind::Derive`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8f3f4980b4c9cf7b062b2c7638070e256381114f", "html_url": "https://github.com/rust-lang/rust/commit/8f3f4980b4c9cf7b062b2c7638070e256381114f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8f3f4980b4c9cf7b062b2c7638070e256381114f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c7dc3e30b6a7c04190ceb96fb9a3f6e9bd1848a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c7dc3e30b6a7c04190ceb96fb9a3f6e9bd1848a", "html_url": "https://github.com/rust-lang/rust/commit/9c7dc3e30b6a7c04190ceb96fb9a3f6e9bd1848a"}, {"sha": "2c5d3705ecb7ff07f5f47e736489d3abf3b64aa7", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c5d3705ecb7ff07f5f47e736489d3abf3b64aa7", "html_url": "https://github.com/rust-lang/rust/commit/2c5d3705ecb7ff07f5f47e736489d3abf3b64aa7"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "8955abebf1e0f0d116d100e84ba1f0b1e9c12e3d", "filename": "compiler/rustc_expand/src/base.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/8f3f4980b4c9cf7b062b2c7638070e256381114f/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8f3f4980b4c9cf7b062b2c7638070e256381114f/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fbase.rs?ref=8f3f4980b4c9cf7b062b2c7638070e256381114f", "patch": "@@ -676,8 +676,13 @@ pub enum SyntaxExtensionKind {\n \n     /// A token-based derive macro.\n     Derive(\n-        /// An expander with signature TokenStream -> TokenStream (not yet).\n+        /// An expander with signature TokenStream -> TokenStream.\n         /// The produced TokenSteam is appended to the input TokenSteam.\n+        ///\n+        /// FIXME: The text above describes how this should work. Currently it\n+        /// is handled identically to `LegacyDerive`. It should be migrated to\n+        /// a token-based representation like `Bang` and `Attr`, instead of\n+        /// using `MultiItemModifier`.\n         Box<dyn MultiItemModifier + sync::Sync + sync::Send>,\n     ),\n "}]}