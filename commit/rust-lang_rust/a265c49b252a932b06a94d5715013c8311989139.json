{"sha": "a265c49b252a932b06a94d5715013c8311989139", "node_id": "C_kwDOAAsO6NoAKGEyNjVjNDliMjUyYTkzMmIwNmE5NGQ1NzE1MDEzYzgzMTE5ODkxMzk", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-05-05T18:49:48Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-02T17:24:32Z"}, "message": "Rebase fallout.", "tree": {"sha": "9b8d02c69f229334a93c1b42800df3ae0dd1065f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9b8d02c69f229334a93c1b42800df3ae0dd1065f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a265c49b252a932b06a94d5715013c8311989139", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a265c49b252a932b06a94d5715013c8311989139", "html_url": "https://github.com/rust-lang/rust/commit/a265c49b252a932b06a94d5715013c8311989139", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a265c49b252a932b06a94d5715013c8311989139/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "be40b588953df73a9e766b644b7eac9e7d287b99", "url": "https://api.github.com/repos/rust-lang/rust/commits/be40b588953df73a9e766b644b7eac9e7d287b99", "html_url": "https://github.com/rust-lang/rust/commit/be40b588953df73a9e766b644b7eac9e7d287b99"}], "stats": {"total": 102, "additions": 7, "deletions": 95}, "files": [{"sha": "ca9d71a7a8b667755682b7a73a83ec74eaf33061", "filename": "src/test/ui/for-loop-while/label_break_value.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.rs?ref=a265c49b252a932b06a94d5715013c8311989139", "patch": "@@ -102,7 +102,7 @@ fn label_break_match(c: u8, xe: u8, ye: i8) {\n             0 => break 'a 0,\n             v if { if v % 2 == 0 { break 'a 1; }; v % 3 == 0 } => { x += 1; },\n             v if { 'b: { break 'b v == 5; } } => { x = 41; },\n-            _ => 'b: { //~ WARNING `'b` shadows a label\n+            _ => 'b: {\n                 break 'b ();\n             },\n         }\n@@ -128,8 +128,8 @@ fn label_break_macro() {\n         0\n     };\n     assert_eq!(x, 0);\n-    let x: u8 = 'a: { //~ WARNING `'a` shadows a label\n-        'b: { //~ WARNING `'b` shadows a label\n+    let x: u8 = 'a: {\n+        'b: {\n             if true {\n                 mac1!('a, 1);\n             }"}, {"sha": "b1eb3204fd5997166ca0eac767e228dac6ea49e2", "filename": "src/test/ui/for-loop-while/label_break_value.stderr", "status": "removed", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value.stderr?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -1,28 +0,0 @@\n-warning: label name `'b` shadows a label name that is already in scope\n-  --> $DIR/label_break_value.rs:105:18\n-   |\n-LL |             v if { 'b: { break 'b v == 5; } } => { x = 41; },\n-   |                    -- first declared here\n-LL |             _ => 'b: {\n-   |                  ^^ label `'b` already in scope\n-\n-warning: label name `'a` shadows a label name that is already in scope\n-  --> $DIR/label_break_value.rs:131:17\n-   |\n-LL |     let x: u8 = 'a: {\n-   |                 -- first declared here\n-...\n-LL |     let x: u8 = 'a: {\n-   |                 ^^ label `'a` already in scope\n-\n-warning: label name `'b` shadows a label name that is already in scope\n-  --> $DIR/label_break_value.rs:132:9\n-   |\n-LL |         'b: {\n-   |         -- first declared here\n-...\n-LL |         'b: {\n-   |         ^^ label `'b` already in scope\n-\n-warning: 3 warnings emitted\n-"}, {"sha": "149bf17b83cba808ffb0c67cf28186d3c1086450", "filename": "src/test/ui/for-loop-while/label_break_value_invalid.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.rs?ref=a265c49b252a932b06a94d5715013c8311989139", "patch": "@@ -20,14 +20,11 @@ fn lbv_macro_test_hygiene_respected() {\n     macro_rules! mac3 {\n         ($val:expr) => {\n             'a: {\n-            //~^ WARNING `'a` shadows a label\n-            //~| WARNING `'a` shadows a label\n-            //~| WARNING `'a` shadows a label\n                 $val\n             }\n         };\n     }\n-    let x: u8 = mac3!('b: { //~ WARNING `'b` shadows a label\n+    let x: u8 = mac3!('b: {\n         if true {\n             break 'a 3; //~ ERROR undeclared label `'a` [E0426]\n         }"}, {"sha": "7182b8f598f193de0a4f822ab1f37e95e72ea950", "filename": "src/test/ui/for-loop-while/label_break_value_invalid.stderr", "status": "modified", "additions": 3, "deletions": 60, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a265c49b252a932b06a94d5715013c8311989139/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffor-loop-while%2Flabel_break_value_invalid.stderr?ref=a265c49b252a932b06a94d5715013c8311989139", "patch": "@@ -10,7 +10,7 @@ LL |                 mac2!(2);\n    = note: this error originates in the macro `mac2` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error[E0426]: use of undeclared label `'a`\n-  --> $DIR/label_break_value_invalid.rs:32:19\n+  --> $DIR/label_break_value_invalid.rs:29:19\n    |\n LL |     let x: u8 = mac3!('b: {\n    |                       -- a label with a similar name is reachable\n@@ -22,68 +22,11 @@ LL |             break 'a 3;\n    |                   help: try using similarly named label: `'b`\n \n error[E0426]: use of undeclared label `'a`\n-  --> $DIR/label_break_value_invalid.rs:37:29\n+  --> $DIR/label_break_value_invalid.rs:34:29\n    |\n LL |     let x: u8 = mac3!(break 'a 4);\n    |                             ^^ undeclared label `'a`\n \n-warning: label name `'a` shadows a label name that is already in scope\n-  --> $DIR/label_break_value_invalid.rs:22:13\n-   |\n-LL |       let x: u8 = 'a: {\n-   |                   -- first declared here\n-...\n-LL |               'a: {\n-   |               ^^ label `'a` already in scope\n-...\n-LL |       let x: u8 = mac3!('b: {\n-   |  _________________-\n-LL | |         if true {\n-LL | |             break 'a 3;\n-LL | |         }\n-LL | |         0\n-LL | |     });\n-   | |______- in this macro invocation\n-   |\n-   = note: this warning originates in the macro `mac3` (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-warning: label name `'b` shadows a label name that is already in scope\n-  --> $DIR/label_break_value_invalid.rs:30:23\n-   |\n-LL |         'b: {\n-   |         -- first declared here\n-...\n-LL |     let x: u8 = mac3!('b: {\n-   |                       ^^ label `'b` already in scope\n-\n-warning: label name `'a` shadows a label name that is already in scope\n-  --> $DIR/label_break_value_invalid.rs:22:13\n-   |\n-LL |     let x: u8 = 'a: {\n-   |                 -- first declared here\n-...\n-LL |             'a: {\n-   |             ^^ label `'a` already in scope\n-...\n-LL |     let x: u8 = mac3!(break 'a 4);\n-   |                 ----------------- in this macro invocation\n-   |\n-   = note: this warning originates in the macro `mac3` (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-warning: label name `'a` shadows a label name that is already in scope\n-  --> $DIR/label_break_value_invalid.rs:22:13\n-   |\n-LL |             'a: {\n-   |             ^^\n-   |             |\n-   |             first declared here\n-   |             label `'a` already in scope\n-...\n-LL |     let x: u8 = mac3!(break 'a 4);\n-   |                 ----------------- in this macro invocation\n-   |\n-   = note: this warning originates in the macro `mac3` (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-error: aborting due to 3 previous errors; 4 warnings emitted\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0426`."}]}