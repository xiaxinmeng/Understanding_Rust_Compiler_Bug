{"sha": "211fa45d18e10f9702a1d9ef529c0f1a867f0712", "node_id": "C_kwDOAAsO6NoAKDIxMWZhNDVkMThlMTBmOTcwMmExZDllZjUyOWMwZjFhODY3ZjA3MTI", "commit": {"author": {"name": "Ali MJ Al-Nasrawy", "email": "alimjalnasrawy@gmail.com", "date": "2023-03-09T08:30:49Z"}, "committer": {"name": "Ali MJ Al-Nasrawy", "email": "alimjalnasrawy@gmail.com", "date": "2023-03-09T09:57:34Z"}, "message": "exhaustive match on implied bounds regions", "tree": {"sha": "1008fb8dd4a9abc519f78c2fb91cfcf72aad4857", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1008fb8dd4a9abc519f78c2fb91cfcf72aad4857"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/211fa45d18e10f9702a1d9ef529c0f1a867f0712", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/211fa45d18e10f9702a1d9ef529c0f1a867f0712", "html_url": "https://github.com/rust-lang/rust/commit/211fa45d18e10f9702a1d9ef529c0f1a867f0712", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/211fa45d18e10f9702a1d9ef529c0f1a867f0712/comments", "author": {"login": "aliemjay", "id": 28497461, "node_id": "MDQ6VXNlcjI4NDk3NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/28497461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aliemjay", "html_url": "https://github.com/aliemjay", "followers_url": "https://api.github.com/users/aliemjay/followers", "following_url": "https://api.github.com/users/aliemjay/following{/other_user}", "gists_url": "https://api.github.com/users/aliemjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aliemjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aliemjay/subscriptions", "organizations_url": "https://api.github.com/users/aliemjay/orgs", "repos_url": "https://api.github.com/users/aliemjay/repos", "events_url": "https://api.github.com/users/aliemjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aliemjay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aliemjay", "id": 28497461, "node_id": "MDQ6VXNlcjI4NDk3NDYx", "avatar_url": "https://avatars.githubusercontent.com/u/28497461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aliemjay", "html_url": "https://github.com/aliemjay", "followers_url": "https://api.github.com/users/aliemjay/followers", "following_url": "https://api.github.com/users/aliemjay/following{/other_user}", "gists_url": "https://api.github.com/users/aliemjay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aliemjay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aliemjay/subscriptions", "organizations_url": "https://api.github.com/users/aliemjay/orgs", "repos_url": "https://api.github.com/users/aliemjay/repos", "events_url": "https://api.github.com/users/aliemjay/events{/privacy}", "received_events_url": "https://api.github.com/users/aliemjay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "183bd97d076fa2d7bd1c4abcad6065abc17af119", "url": "https://api.github.com/repos/rust-lang/rust/commits/183bd97d076fa2d7bd1c4abcad6065abc17af119", "html_url": "https://github.com/rust-lang/rust/commit/183bd97d076fa2d7bd1c4abcad6065abc17af119"}], "stats": {"total": 23, "additions": 8, "deletions": 15}, "files": [{"sha": "a480ee5429eec1af6fd7693def13eb9e00415dcc", "filename": "compiler/rustc_infer/src/infer/outlives/env.rs", "status": "modified", "additions": 8, "deletions": 15, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/211fa45d18e10f9702a1d9ef529c0f1a867f0712/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Fenv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/211fa45d18e10f9702a1d9ef529c0f1a867f0712/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Fenv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Fenv.rs?ref=211fa45d18e10f9702a1d9ef529c0f1a867f0712", "patch": "@@ -136,21 +136,14 @@ impl<'tcx> OutlivesEnvironmentBuilder<'tcx> {\n                     self.region_bound_pairs\n                         .insert(ty::OutlivesPredicate(GenericKind::Alias(alias_b), r_a));\n                 }\n-                OutlivesBound::RegionSubRegion(r_a, r_b) => {\n-                    // In principle, we could record (and take\n-                    // advantage of) every relationship here, but\n-                    // we are also free not to -- it simply means\n-                    // strictly less that we can successfully type\n-                    // check. Right now we only look for things\n-                    // relationships between free regions. (It may\n-                    // also be that we should revise our inference\n-                    // system to be more general and to make use\n-                    // of *every* relationship that arises here,\n-                    // but presently we do not.)\n-                    if r_a.is_free_or_static() && r_b.is_free() {\n-                        self.region_relation.add(r_a, r_b)\n-                    }\n-                }\n+                OutlivesBound::RegionSubRegion(r_a, r_b) => match (*r_a, *r_b) {\n+                    (\n+                        ty::ReStatic | ty::ReEarlyBound(_) | ty::ReFree(_),\n+                        ty::ReStatic | ty::ReEarlyBound(_) | ty::ReFree(_),\n+                    ) => self.region_relation.add(r_a, r_b),\n+                    (ty::ReError(_), _) | (_, ty::ReError(_)) => {}\n+                    _ => bug!(\"add_outlives_bounds: unexpected regions\"),\n+                },\n             }\n         }\n     }"}]}