{"sha": "2885c67d473b4522441f118149945b516d5ca658", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4ODVjNjdkNDczYjQ1MjI0NDFmMTE4MTQ5OTQ1YjUxNmQ1Y2E2NTg=", "commit": {"author": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-18T07:20:39Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2011-08-18T08:02:02Z"}, "message": "Don't warn about unused vars whose name starts with _\n\nCloses #832", "tree": {"sha": "33375eaa2c83866fcdfa74aa12a0e1ab86beb084", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/33375eaa2c83866fcdfa74aa12a0e1ab86beb084"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2885c67d473b4522441f118149945b516d5ca658", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2885c67d473b4522441f118149945b516d5ca658", "html_url": "https://github.com/rust-lang/rust/commit/2885c67d473b4522441f118149945b516d5ca658", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2885c67d473b4522441f118149945b516d5ca658/comments", "author": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "117d21d6c25813a8894bd18170bb75a61e927acc", "url": "https://api.github.com/repos/rust-lang/rust/commits/117d21d6c25813a8894bd18170bb75a61e927acc", "html_url": "https://github.com/rust-lang/rust/commit/117d21d6c25813a8894bd18170bb75a61e927acc"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "4caa5ca071a1f8ef8ba2d0b3209330592ff5a2a7", "filename": "src/comp/middle/tstate/ck.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2885c67d473b4522441f118149945b516d5ca658/src%2Fcomp%2Fmiddle%2Ftstate%2Fck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2885c67d473b4522441f118149945b516d5ca658/src%2Fcomp%2Fmiddle%2Ftstate%2Fck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftstate%2Fck.rs?ref=2885c67d473b4522441f118149945b516d5ca658", "patch": "@@ -52,8 +52,9 @@ fn check_unused_vars(fcx: &fn_ctxt) {\n     for c: norm_constraint in constraints(fcx) {\n         alt c.c.node {\n           ninit(id, v) {\n-            if !vec_contains(fcx.enclosing.used_vars, id) {\n-                fcx.ccx.tcx.sess.span_warn(c.c.span, \"Unused variable \" + v);\n+            if !vec_contains(fcx.enclosing.used_vars, id) &&\n+               v.(0) != ('_' as u8) {\n+                fcx.ccx.tcx.sess.span_warn(c.c.span, \"unused variable \" + v);\n             }\n           }\n           _ {/* ignore pred constraints */ }"}]}