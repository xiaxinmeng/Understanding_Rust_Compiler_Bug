{"sha": "68fd4e098c0629528ba9da81ad752b43d32e7d6c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4ZmQ0ZTA5OGMwNjI5NTI4YmE5ZGE4MWFkNzUyYjQzZDMyZTdkNmM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-05-20T12:21:07Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-05-20T12:21:07Z"}, "message": "Rollup merge of #72275 - marmeladema:fix-issue-71104-2, r=ecstatic-morse\n\nContinue lowering for unsupported async generator instead of returning an error.\n\nThis way the hir is \"valid\" and we can remove one more call to\n`opt_node_id_to_hir_id` but an error is still emitted.\n\nThis is another partial fix for #71104\n\nr? @eddyb", "tree": {"sha": "7d8b767be4d2ca2a8b8c2f0499ea6f02a9294553", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d8b767be4d2ca2a8b8c2f0499ea6f02a9294553"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/68fd4e098c0629528ba9da81ad752b43d32e7d6c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJexSC0CRBK7hj4Ov3rIwAAdHIIALDxhZJo97kpHTa4cVv7pJjH\nDNu7+Z8rMAn2fhE/0tE6UhpY1GgH0X69pJ3UHwYVAuFHlu91eRqbLDxO0bOozceZ\nd0WLUXlwq59mFWcyAqrhOqdXz+qXIx1OJTf/mF9J8Ikvx8E6pX8CJafF/0hWlp6f\n5V9LURmOOLL539yoNCJjRrjgUptJahfKNp6ZfQbeeH4+CY8DFf2VtXq9nUPPPjwh\n/szpO5FSN9yyaoSobqCeh5v11/pEG0VJtU7W95kngbpUnKOPLeES3nUQQtOr6tFG\ngu5fwXRrHZ5ZyL8OXtummrwS2LVjQZ4VvrO3cUcW48NbJzkrVZHEOfdS9e8FJw8=\n=H4Go\n-----END PGP SIGNATURE-----\n", "payload": "tree 7d8b767be4d2ca2a8b8c2f0499ea6f02a9294553\nparent 5c52f9f9167730cf48c387366be289d53a485754\nparent 4af04cb5cbe19cc3658584c005180da9a38c1530\nauthor Dylan DPC <dylan.dpc@gmail.com> 1589977267 +0200\ncommitter GitHub <noreply@github.com> 1589977267 +0200\n\nRollup merge of #72275 - marmeladema:fix-issue-71104-2, r=ecstatic-morse\n\nContinue lowering for unsupported async generator instead of returning an error.\n\nThis way the hir is \"valid\" and we can remove one more call to\n`opt_node_id_to_hir_id` but an error is still emitted.\n\nThis is another partial fix for #71104\n\nr? @eddyb\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/68fd4e098c0629528ba9da81ad752b43d32e7d6c", "html_url": "https://github.com/rust-lang/rust/commit/68fd4e098c0629528ba9da81ad752b43d32e7d6c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/68fd4e098c0629528ba9da81ad752b43d32e7d6c/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5c52f9f9167730cf48c387366be289d53a485754", "url": "https://api.github.com/repos/rust-lang/rust/commits/5c52f9f9167730cf48c387366be289d53a485754", "html_url": "https://github.com/rust-lang/rust/commit/5c52f9f9167730cf48c387366be289d53a485754"}, {"sha": "4af04cb5cbe19cc3658584c005180da9a38c1530", "url": "https://api.github.com/repos/rust-lang/rust/commits/4af04cb5cbe19cc3658584c005180da9a38c1530", "html_url": "https://github.com/rust-lang/rust/commit/4af04cb5cbe19cc3658584c005180da9a38c1530"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "5bcd111706f35704190a2ff8b95f20abe2f627db", "filename": "src/librustc_ast_lowering/expr.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/68fd4e098c0629528ba9da81ad752b43d32e7d6c/src%2Flibrustc_ast_lowering%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68fd4e098c0629528ba9da81ad752b43d32e7d6c/src%2Flibrustc_ast_lowering%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2Fexpr.rs?ref=68fd4e098c0629528ba9da81ad752b43d32e7d6c", "patch": "@@ -1322,7 +1322,6 @@ impl<'hir> LoweringContext<'_, 'hir> {\n                     \"`async` generators are not yet supported\"\n                 )\n                 .emit();\n-                return hir::ExprKind::Err;\n             }\n             None => self.generator_kind = Some(hir::GeneratorKind::Gen),\n         }"}, {"sha": "d2e53facf5e0a997a6462e0a84f3e11d03c16636", "filename": "src/librustc_middle/ty/context.rs", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/68fd4e098c0629528ba9da81ad752b43d32e7d6c/src%2Flibrustc_middle%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68fd4e098c0629528ba9da81ad752b43d32e7d6c/src%2Flibrustc_middle%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2Fty%2Fcontext.rs?ref=68fd4e098c0629528ba9da81ad752b43d32e7d6c", "patch": "@@ -1114,16 +1114,13 @@ impl<'tcx> TyCtxt<'tcx> {\n \n         let mut trait_map: FxHashMap<_, FxHashMap<_, _>> = FxHashMap::default();\n         for (k, v) in resolutions.trait_map {\n-            // FIXME(#71104) Should really be using just `node_id_to_hir_id` but\n-            // some `NodeId` do not seem to have a corresponding HirId.\n-            if let Some(hir_id) = definitions.opt_node_id_to_hir_id(k) {\n-                let map = trait_map.entry(hir_id.owner).or_default();\n-                let v = v\n-                    .into_iter()\n-                    .map(|tc| tc.map_import_ids(|id| definitions.node_id_to_hir_id(id)))\n-                    .collect();\n-                map.insert(hir_id.local_id, StableVec::new(v));\n-            }\n+            let hir_id = definitions.node_id_to_hir_id(k);\n+            let map = trait_map.entry(hir_id.owner).or_default();\n+            let v = v\n+                .into_iter()\n+                .map(|tc| tc.map_import_ids(|id| definitions.node_id_to_hir_id(id)))\n+                .collect();\n+            map.insert(hir_id.local_id, StableVec::new(v));\n         }\n \n         GlobalCtxt {"}]}