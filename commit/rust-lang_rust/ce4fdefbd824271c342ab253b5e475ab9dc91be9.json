{"sha": "ce4fdefbd824271c342ab253b5e475ab9dc91be9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlNGZkZWZiZDgyNDI3MWMzNDJhYjI1M2I1ZTQ3NWFiOWRjOTFiZTk=", "commit": {"author": {"name": "Ariel Ben-Yehuda", "email": "arielb1@mail.tau.ac.il", "date": "2016-06-09T14:23:23Z"}, "committer": {"name": "Ariel Ben-Yehuda", "email": "ariel.byd@gmail.com", "date": "2016-06-09T18:47:58Z"}, "message": "fix issues", "tree": {"sha": "31e99478e98d82661933ac549ca3b1fe143add27", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31e99478e98d82661933ac549ca3b1fe143add27"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce4fdefbd824271c342ab253b5e475ab9dc91be9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce4fdefbd824271c342ab253b5e475ab9dc91be9", "html_url": "https://github.com/rust-lang/rust/commit/ce4fdefbd824271c342ab253b5e475ab9dc91be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce4fdefbd824271c342ab253b5e475ab9dc91be9/comments", "author": null, "committer": {"login": "arielb1", "id": 1830974, "node_id": "MDQ6VXNlcjE4MzA5NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1830974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielb1", "html_url": "https://github.com/arielb1", "followers_url": "https://api.github.com/users/arielb1/followers", "following_url": "https://api.github.com/users/arielb1/following{/other_user}", "gists_url": "https://api.github.com/users/arielb1/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielb1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielb1/subscriptions", "organizations_url": "https://api.github.com/users/arielb1/orgs", "repos_url": "https://api.github.com/users/arielb1/repos", "events_url": "https://api.github.com/users/arielb1/events{/privacy}", "received_events_url": "https://api.github.com/users/arielb1/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5b1ba6e90afe1cd5bc46bae4ee97d989c71adbf", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5b1ba6e90afe1cd5bc46bae4ee97d989c71adbf", "html_url": "https://github.com/rust-lang/rust/commit/f5b1ba6e90afe1cd5bc46bae4ee97d989c71adbf"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "1205d688b85a8e5a76b12802b77b76636c69f62a", "filename": "src/librustc_driver/driver.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_driver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_driver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fdriver.rs?ref=ce4fdefbd824271c342ab253b5e475ab9dc91be9", "patch": "@@ -980,7 +980,8 @@ pub fn phase_3_run_analysis_passes<'tcx, F, R>(sess: &'tcx Session,\n             passes.push_pass(box mir::transform::simplify_cfg::SimplifyCfg::new(\"initial\"));\n             passes.push_pass(box mir::transform::qualify_consts::QualifyAndPromoteConstants);\n             passes.push_pass(box mir::transform::type_check::TypeckMir);\n-            passes.push_pass(box mir::transform::simplify_branches::SimplifyBranches::new(\"initial\"));\n+            passes.push_pass(\n+                box mir::transform::simplify_branches::SimplifyBranches::new(\"initial\"));\n             passes.push_pass(box mir::transform::simplify_cfg::SimplifyCfg::new(\"qualify-consts\"));\n             // And run everything.\n             passes.run_passes(tcx, &mut mir_map);"}, {"sha": "83f8c3b42c850a1eb52d28f78daed875f71a0749", "filename": "src/librustc_mir/build/cfg.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_mir%2Fbuild%2Fcfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_mir%2Fbuild%2Fcfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fcfg.rs?ref=ce4fdefbd824271c342ab253b5e475ab9dc91be9", "patch": "@@ -78,8 +78,11 @@ impl<'tcx> CFG<'tcx> {\n                      block: BasicBlock,\n                      source_info: SourceInfo,\n                      kind: TerminatorKind<'tcx>) {\n+        debug!(\"terminating block {:?} <- {:?}\", block, kind);\n         debug_assert!(self.block_data(block).terminator.is_none(),\n-                      \"terminate: block {:?} already has a terminator set\", block);\n+                      \"terminate: block {:?}={:?} already has a terminator set\",\n+                      block,\n+                      self.block_data(block));\n         self.block_data_mut(block).terminator = Some(Terminator {\n             source_info: source_info,\n             kind: kind,"}, {"sha": "b3315ab7d290f2b5183c19ac56fbd3445e1d6550", "filename": "src/librustc_mir/build/matches/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs?ref=ce4fdefbd824271c342ab253b5e475ab9dc91be9", "patch": "@@ -87,6 +87,9 @@ impl<'a, 'gcx, 'tcx> Builder<'a, 'gcx, 'tcx> {\n             // can't be reached - terminate them with an `unreachable`.\n             let source_info = self.source_info(span);\n \n+            let mut otherwise = otherwise;\n+            otherwise.sort();\n+            otherwise.dedup(); // variant switches can introduce duplicate target blocks\n             for block in otherwise {\n                 self.cfg.terminate(block, source_info, TerminatorKind::Unreachable);\n             }"}, {"sha": "3e8277e28ba73befd71d9946c4ceb46d3d02e8d2", "filename": "src/rustc/Cargo.lock", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Frustc%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/ce4fdefbd824271c342ab253b5e475ab9dc91be9/src%2Frustc%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2FCargo.lock?ref=ce4fdefbd824271c342ab253b5e475ab9dc91be9", "patch": "@@ -87,6 +87,7 @@ dependencies = [\n  \"graphviz 0.0.0\",\n  \"log 0.0.0\",\n  \"rustc 0.0.0\",\n+ \"rustc_data_structures 0.0.0\",\n  \"rustc_mir 0.0.0\",\n  \"syntax 0.0.0\",\n ]"}]}