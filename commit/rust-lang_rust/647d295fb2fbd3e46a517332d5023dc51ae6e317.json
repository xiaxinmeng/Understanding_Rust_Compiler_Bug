{"sha": "647d295fb2fbd3e46a517332d5023dc51ae6e317", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0N2QyOTVmYjJmYmQzZTQ2YTUxNzMzMmQ1MDIzZGM1MWFlNmUzMTc=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-07-27T20:11:48Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-07-27T20:33:38Z"}, "message": "review comments", "tree": {"sha": "84ae1ca201d9a2408232c109e6d04f759fedc180", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84ae1ca201d9a2408232c109e6d04f759fedc180"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/647d295fb2fbd3e46a517332d5023dc51ae6e317", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/647d295fb2fbd3e46a517332d5023dc51ae6e317", "html_url": "https://github.com/rust-lang/rust/commit/647d295fb2fbd3e46a517332d5023dc51ae6e317", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/647d295fb2fbd3e46a517332d5023dc51ae6e317/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3bf27b1db29887b49614934105a105d1b8d09fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3bf27b1db29887b49614934105a105d1b8d09fc", "html_url": "https://github.com/rust-lang/rust/commit/a3bf27b1db29887b49614934105a105d1b8d09fc"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "49debfa43906a923b354e6f07dbdb58b6e3bdf10", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/647d295fb2fbd3e46a517332d5023dc51ae6e317/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/647d295fb2fbd3e46a517332d5023dc51ae6e317/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=647d295fb2fbd3e46a517332d5023dc51ae6e317", "patch": "@@ -6508,11 +6508,10 @@ impl<'a> Parser<'a> {\n         })\n     }\n \n-    fn parse_crate_name_with_dashes(\n-        &mut self,\n-        error_msg: &str,\n-        suggestion_msg: &str,\n-    ) -> PResult<'a, ast::Ident> {\n+    fn parse_crate_name_with_dashes(&mut self) -> PResult<'a, ast::Ident> {\n+        let error_msg = \"crate name using dashes are not valid in `extern crate` statements\";\n+        let suggestion_msg = \"if the original crate name uses dashes you need to use underscores \\\n+                              in the code\";\n         let mut ident = self.parse_ident()?;\n         let mut idents = vec![];\n         let mut replacement = vec![];\n@@ -6554,14 +6553,11 @@ impl<'a> Parser<'a> {\n                                attrs: Vec<Attribute>)\n                                -> PResult<'a, P<Item>> {\n         // Accept `extern crate name-like-this` for better diagnostics\n-        let ident = self.parse_crate_name_with_dashes(\n-            \"crate name using dashes are not valid in `extern crate` statements\",\n-            \"if the original crate name uses dashes you need to use underscores in the code\",\n-        )?;\n+        let orig_name = self.parse_crate_name_with_dashes()?;\n         let (item_name, orig_name) = if let Some(rename) = self.parse_rename()? {\n-            (rename, Some(ident.name))\n+            (rename, Some(orig_name.name))\n         } else {\n-            (ident, None)\n+            (orig_name, None)\n         };\n         self.expect(&token::Semi)?;\n "}]}