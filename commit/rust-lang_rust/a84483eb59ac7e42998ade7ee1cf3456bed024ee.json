{"sha": "a84483eb59ac7e42998ade7ee1cf3456bed024ee", "node_id": "C_kwDOAAsO6NoAKGE4NDQ4M2ViNTlhYzdlNDI5OThhZGU3ZWUxY2YzNDU2YmVkMDI0ZWU", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-12-15T23:29:52Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-12-15T23:29:52Z"}, "message": "rustdoc: name the source page sidebar-toggle `#src-sidebar-toggle`\n\nThe old name doesn't get across where it's really supposed to be used.", "tree": {"sha": "6ad6311ede26049bf29ab7e21d27a1b43d16d3c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ad6311ede26049bf29ab7e21d27a1b43d16d3c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a84483eb59ac7e42998ade7ee1cf3456bed024ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a84483eb59ac7e42998ade7ee1cf3456bed024ee", "html_url": "https://github.com/rust-lang/rust/commit/a84483eb59ac7e42998ade7ee1cf3456bed024ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a84483eb59ac7e42998ade7ee1cf3456bed024ee/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec56537c4325ce5b798fc3628cbdd48ba4949ae5", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec56537c4325ce5b798fc3628cbdd48ba4949ae5", "html_url": "https://github.com/rust-lang/rust/commit/ec56537c4325ce5b798fc3628cbdd48ba4949ae5"}], "stats": {"total": 74, "additions": 37, "deletions": 37}, "files": [{"sha": "8f3d9f8c6e24ac152180933336c6cc5689e11f11", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -396,15 +396,15 @@ img {\n \toverflow-y: hidden;\n }\n \n-.source .sidebar, #sidebar-toggle, #source-sidebar {\n+.source .sidebar, #src-sidebar-toggle, #source-sidebar {\n \tbackground-color: var(--sidebar-background-color);\n }\n \n-#sidebar-toggle > button:hover, #sidebar-toggle > button:focus {\n+#src-sidebar-toggle > button:hover, #src-sidebar-toggle > button:focus {\n \tbackground-color: var(--sidebar-background-color-hover);\n }\n \n-.source .sidebar > *:not(#sidebar-toggle) {\n+.source .sidebar > *:not(#src-sidebar-toggle) {\n \tvisibility: hidden;\n }\n \n@@ -413,7 +413,7 @@ img {\n \tflex-basis: 300px;\n }\n \n-.source-sidebar-expanded .source .sidebar > *:not(#sidebar-toggle) {\n+.source-sidebar-expanded .source .sidebar > *:not(#src-sidebar-toggle) {\n \tvisibility: visible;\n }\n \n@@ -1291,7 +1291,7 @@ a.test-arrow:hover {\n \tfont-size: 1rem;\n }\n \n-#sidebar-toggle {\n+#src-sidebar-toggle {\n \tposition: sticky;\n \ttop: 0;\n \tleft: 0;\n@@ -1320,7 +1320,7 @@ a.test-arrow:hover {\n #source-sidebar div.files > a.selected {\n \tbackground-color: var(--source-sidebar-background-selected);\n }\n-#sidebar-toggle > button {\n+#src-sidebar-toggle > button {\n \tfont-size: inherit;\n \tfont-weight: bold;\n \tbackground: none;\n@@ -1722,7 +1722,7 @@ in storage.js\n \t\tleft: -11px;\n \t}\n \n-\t#sidebar-toggle {\n+\t#src-sidebar-toggle {\n \t\tposition: fixed;\n \t\tleft: 1px;\n \t\ttop: 100px;\n@@ -1736,7 +1736,7 @@ in storage.js\n \t\tborder-left: 0;\n \t}\n \n-\t.source-sidebar-expanded #sidebar-toggle {\n+\t.source-sidebar-expanded #src-sidebar-toggle {\n \t\tleft: unset;\n \t\ttop: unset;\n \t\twidth: unset;\n@@ -1847,10 +1847,10 @@ in storage.js\n \t\twidth: 35px;\n \t}\n \n-\t#sidebar-toggle {\n+\t#src-sidebar-toggle {\n \t\ttop: 10px;\n \t}\n-\t.source-sidebar-expanded #sidebar-toggle {\n+\t.source-sidebar-expanded #src-sidebar-toggle {\n \t\ttop: unset;\n \t}\n }"}, {"sha": "0e1c864e62d84800243b619e83ba490639e76f00", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -83,7 +83,7 @@ function toggleSidebar() {\n \n function createSidebarToggle() {\n     const sidebarToggle = document.createElement(\"div\");\n-    sidebarToggle.id = \"sidebar-toggle\";\n+    sidebarToggle.id = \"src-sidebar-toggle\";\n \n     const inner = document.createElement(\"button\");\n "}, {"sha": "df665bd46c03b7f5cf053afa41c25d94741935e0", "filename": "src/test/rustdoc-gui/code-sidebar-toggle.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-sidebar-toggle.goml?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -1,7 +1,7 @@\n // This test checks that the source code pages sidebar toggle is working as expected.\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n click: \".srclink\"\n-wait-for: \"#sidebar-toggle\"\n-click: \"#sidebar-toggle\"\n+wait-for: \"#src-sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n fail: true\n assert-css: (\"#source-sidebar\", { \"left\": \"-300px\" })"}, {"sha": "cb6716a76f5c0d6ae17511dfcd2617ee0d75d398", "filename": "src/test/rustdoc-gui/cursor.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fcursor.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fcursor.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcursor.goml?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -21,4 +21,4 @@ assert-css: (\".sidebar-menu-toggle\", {\"cursor\": \"pointer\"})\n \n // the sidebar toggle button on the source code pages\n goto: \"file://\" + |DOC_PATH| + \"/src/lib2/lib.rs.html\"\n-assert-css: (\"#sidebar-toggle > button\", {\"cursor\": \"pointer\"})\n+assert-css: (\"#src-sidebar-toggle > button\", {\"cursor\": \"pointer\"})"}, {"sha": "df4506e1119648a7c76f379170da131cab39d51f", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -2,18 +2,18 @@\n javascript: false\n goto: \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html\"\n // Since the javascript is disabled, there shouldn't be a toggle.\n-assert-false: \"#sidebar-toggle\"\n+assert-false: \"#src-sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"display\": \"none\"})\n \n // Let's retry with javascript enabled.\n javascript: true\n reload:\n-wait-for: \"#sidebar-toggle\"\n-assert-css: (\"#sidebar-toggle\", {\"visibility\": \"visible\"})\n-assert-css: (\".sidebar > *:not(#sidebar-toggle)\", {\"visibility\": \"hidden\"})\n+wait-for: \"#src-sidebar-toggle\"\n+assert-css: (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})\n+assert-css: (\".sidebar > *:not(#src-sidebar-toggle)\", {\"visibility\": \"hidden\"})\n // Let's expand the sidebar now.\n-click: \"#sidebar-toggle\"\n-wait-for-css: (\"#sidebar-toggle\", {\"visibility\": \"visible\"})\n+click: \"#src-sidebar-toggle\"\n+wait-for-css: (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})\n \n // We now check that opening the sidebar and clicking a link will leave it open.\n // The behavior here on desktop is different than the behavior on mobile,\n@@ -38,25 +38,25 @@ define-function: (\n     [\n         (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n         (\"reload\"),\n-        (\"wait-for-css\", (\"#sidebar-toggle\", {\"visibility\": \"visible\"})),\n+        (\"wait-for-css\", (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})),\n         (\"assert-css\", (\n             \"#source-sidebar details[open] > .files a.selected\",\n             {\"color\": |color_hover|, \"background-color\": |background|},\n         )),\n \n         // Without hover or focus.\n-        (\"assert-css\", (\"#sidebar-toggle > button\", {\"background-color\": |background_toggle|})),\n+        (\"assert-css\", (\"#src-sidebar-toggle > button\", {\"background-color\": |background_toggle|})),\n         // With focus.\n-        (\"focus\", \"#sidebar-toggle > button\"),\n+        (\"focus\", \"#src-sidebar-toggle > button\"),\n         (\"assert-css\", (\n-            \"#sidebar-toggle > button:focus\",\n+            \"#src-sidebar-toggle > button:focus\",\n             {\"background-color\": |background_toggle_hover|},\n         )),\n         (\"focus\", \".search-input\"),\n         // With hover.\n-        (\"move-cursor-to\", \"#sidebar-toggle > button\"),\n+        (\"move-cursor-to\", \"#src-sidebar-toggle > button\"),\n         (\"assert-css\", (\n-            \"#sidebar-toggle > button:hover\",\n+            \"#src-sidebar-toggle > button:hover\",\n             {\"background-color\": |background_toggle_hover|},\n         )),\n \n@@ -151,16 +151,16 @@ call-function: (\"check-colors\", {\n size: (500, 700)\n reload:\n // Waiting for the sidebar to be displayed...\n-wait-for-css: (\"#sidebar-toggle\", {\"visibility\": \"visible\"})\n+wait-for-css: (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})\n \n // We now check it takes the full size of the display.\n assert-property: (\"body\", {\"clientWidth\": \"500\", \"clientHeight\": \"700\"})\n assert-property: (\".sidebar\", {\"clientWidth\": \"500\", \"clientHeight\": \"700\"})\n \n // We now check the display of the toggle once the sidebar is expanded.\n-assert-property: (\"#sidebar-toggle\", {\"clientWidth\": \"500\", \"clientHeight\": \"39\"})\n+assert-property: (\"#src-sidebar-toggle\", {\"clientWidth\": \"500\", \"clientHeight\": \"39\"})\n assert-css: (\n-    \"#sidebar-toggle\",\n+    \"#src-sidebar-toggle\",\n     {\n         \"border-top-width\": \"0px\",\n         \"border-right-width\": \"0px\",\n@@ -170,36 +170,36 @@ assert-css: (\n )\n \n // We now check that the scroll position is kept when opening the sidebar.\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n // We scroll to line 117 to change the scroll position.\n scroll-to: '//*[@id=\"117\"]'\n assert-window-property: {\"pageYOffset\": \"2542\"}\n // Expanding the sidebar...\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"500px\"})\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n // The \"scrollTop\" property should be the same.\n assert-window-property: {\"pageYOffset\": \"2542\"}\n \n // We now check that the scroll position is restored if the window is resized.\n size: (500, 700)\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"visible\"})\n assert-window-property: {\"pageYOffset\": \"0\"}\n size: (900, 900)\n assert-window-property: {\"pageYOffset\": \"2542\"}\n size: (500, 700)\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"hidden\"})\n \n // We now check that opening the sidebar and clicking a link will close it.\n // The behavior here on mobile is different than the behavior on desktop,\n // but common sense dictates that if you have a list of files that fills the entire screen, and\n // you click one of them, you probably want to actually see the file's contents, and not just\n // make it the current selection.\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"visible\"})\n assert-local-storage: {\"rustdoc-source-sidebar-show\": \"true\"}\n click: \".sidebar a.selected\"\n@@ -210,6 +210,6 @@ assert-local-storage: {\"rustdoc-source-sidebar-show\": \"false\"}\n size: (1000, 1000)\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"hidden\"})\n assert-local-storage: {\"rustdoc-source-sidebar-show\": \"false\"}\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n wait-for-css: (\"#source-sidebar\", {\"visibility\": \"visible\"})\n assert-local-storage: {\"rustdoc-source-sidebar-show\": \"true\"}"}, {"sha": "25da74e5173eba34e77995a5e0ee083e010a8d24", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/a84483eb59ac7e42998ade7ee1cf3456bed024ee/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=a84483eb59ac7e42998ade7ee1cf3456bed024ee", "patch": "@@ -97,7 +97,7 @@ assert-document-property: ({\"URL\": \"/lib.rs.html\"}, ENDS_WITH)\n // Checking the source code sidebar.\n \n // First we \"open\" it.\n-click: \"#sidebar-toggle\"\n+click: \"#src-sidebar-toggle\"\n assert: \".source-sidebar-expanded\"\n \n // We check that the first entry of the sidebar is collapsed"}]}