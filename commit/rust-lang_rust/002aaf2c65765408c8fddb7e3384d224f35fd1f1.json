{"sha": "002aaf2c65765408c8fddb7e3384d224f35fd1f1", "node_id": "C_kwDOAAsO6NoAKDAwMmFhZjJjNjU3NjU0MDhjOGZkZGI3ZTMzODRkMjI0ZjM1ZmQxZjE", "commit": {"author": {"name": "Thom Chiovoloni", "email": "chiovolonit@gmail.com", "date": "2021-10-30T21:04:49Z"}, "committer": {"name": "Thom Chiovoloni", "email": "chiovolonit@gmail.com", "date": "2022-02-05T19:15:18Z"}, "message": "Ensure non-power-of-two sizes are tested in the Chars::count test", "tree": {"sha": "7b57183f4d5eee50bada6b59234152485fba2aeb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b57183f4d5eee50bada6b59234152485fba2aeb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/002aaf2c65765408c8fddb7e3384d224f35fd1f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEh0+qV0hta6XFe2D54u/UMJ4RyKgFAmH+zMYACgkQ4u/UMJ4R\nyKhD/Q//a3vWSL731t15M5UVPFvv0CSowJ2W9rdfAoh8wNSF0SCFEaBveCr/KZ19\n3qopqHikppmtgtYQo1NGcdb8cooLcF6C3o4WD4K+kbAxpuJHw0hZ4sKhUz9JUtip\nd9Wi46EjcGG89c5G/QU0C1Mwh4GE1IBHfy7WLTrAvl7mgZg/bNVPQyNZH0XCjw1m\nH0gbzWTUtf30oQxIE6Tn2cK6IIlBDcCCXI9MiVQq1X6E2lCapHteO5byhws8vXIZ\ngCaLe2f4buNEBq9qL0RI0Xu4b5yRPdv9MY3wPrxbOPV1twEudkn1xanedTJMGqE4\n5w0akltwb7DhNMmDa+bynwARkkLHIi1tfdSOfRekC6Y5kCMFEBt9/fwjzPqdcdme\n72PYCtM0TW7+Q/HOnpBCy6aVzHNEatz7ElMthXpprra+Z3v+5NE5E212/U1Mw6Wc\nuH05wjE282f+w3ebUu+PuyMYvq5sNMrxhJCvaFVpgYJCu0RjFKlbAaDAsq7IosNb\nIstYYujQClNL9J4bXSbJvhbCs6sXKyHtrVa+gUxYDlC57ywUXCXmrLDxzU+Rc2vz\nW539ypQS1FnT2m5j/HiUV8uxbt6QYc4KPmumYSJrfRUdQ1GT0ipedrjykU48p3tQ\nKkfNpmde6rN6vrUra7dyv+fYKAmbh0Tck/L9h22USUzqvTJwGFo=\n=gpF/\n-----END PGP SIGNATURE-----", "payload": "tree 7b57183f4d5eee50bada6b59234152485fba2aeb\nparent ed01324835fd4d2aef53ba0b767562640e2f9c71\nauthor Thom Chiovoloni <chiovolonit@gmail.com> 1635627889 -0700\ncommitter Thom Chiovoloni <chiovolonit@gmail.com> 1644088518 -0800\n\nEnsure non-power-of-two sizes are tested in the Chars::count test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/002aaf2c65765408c8fddb7e3384d224f35fd1f1", "html_url": "https://github.com/rust-lang/rust/commit/002aaf2c65765408c8fddb7e3384d224f35fd1f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/002aaf2c65765408c8fddb7e3384d224f35fd1f1/comments", "author": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thomcc", "id": 860665, "node_id": "MDQ6VXNlcjg2MDY2NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/860665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thomcc", "html_url": "https://github.com/thomcc", "followers_url": "https://api.github.com/users/thomcc/followers", "following_url": "https://api.github.com/users/thomcc/following{/other_user}", "gists_url": "https://api.github.com/users/thomcc/gists{/gist_id}", "starred_url": "https://api.github.com/users/thomcc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thomcc/subscriptions", "organizations_url": "https://api.github.com/users/thomcc/orgs", "repos_url": "https://api.github.com/users/thomcc/repos", "events_url": "https://api.github.com/users/thomcc/events{/privacy}", "received_events_url": "https://api.github.com/users/thomcc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ed01324835fd4d2aef53ba0b767562640e2f9c71", "url": "https://api.github.com/repos/rust-lang/rust/commits/ed01324835fd4d2aef53ba0b767562640e2f9c71", "html_url": "https://github.com/rust-lang/rust/commit/ed01324835fd4d2aef53ba0b767562640e2f9c71"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "7b07821ab1d31de590cb9e38ab45f6bf40bc90f3", "filename": "library/alloc/tests/str.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/002aaf2c65765408c8fddb7e3384d224f35fd1f1/library%2Falloc%2Ftests%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/002aaf2c65765408c8fddb7e3384d224f35fd1f1/library%2Falloc%2Ftests%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Ftests%2Fstr.rs?ref=002aaf2c65765408c8fddb7e3384d224f35fd1f1", "patch": "@@ -2234,9 +2234,11 @@ fn utf8_chars() {\n #[test]\n fn utf8_char_counts() {\n     let strs = [(\"e\", 1), (\"\u00e9\", 1), (\"\u20ac\", 1), (\"\\u{10000}\", 1), (\"e\u00e9\u20ac\\u{10000}\", 4)];\n-    let mut reps = vec![1, 8, 64, 256, 512, 1024];\n+    let mut reps =\n+        [8, 64, 256, 512, 1024].iter().copied().flat_map(|n| n - 8..=n + 8).collect::<Vec<usize>>();\n     if cfg!(not(miri)) {\n-        reps.push(1 << 16);\n+        let big = 1 << 16;\n+        reps.extend(big - 8..=big + 8);\n     }\n     let counts = if cfg!(miri) { 0..1 } else { 0..8 };\n     let padding = counts.map(|len| \" \".repeat(len)).collect::<Vec<String>>();"}]}