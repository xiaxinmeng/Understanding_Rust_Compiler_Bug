{"sha": "062ba22d997918f9903127d2158449a8d49134d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA2MmJhMjJkOTk3OTE4Zjk5MDMxMjdkMjE1ODQ0OWE4ZDQ5MTM0ZDk=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-06T20:11:56Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-06T20:12:11Z"}, "message": "rpathing is based on the target, not host OS", "tree": {"sha": "186f9caf81a89a293da019ac3a7d9546b7090c77", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/186f9caf81a89a293da019ac3a7d9546b7090c77"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/062ba22d997918f9903127d2158449a8d49134d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/062ba22d997918f9903127d2158449a8d49134d9", "html_url": "https://github.com/rust-lang/rust/commit/062ba22d997918f9903127d2158449a8d49134d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/062ba22d997918f9903127d2158449a8d49134d9/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8a85f0758981c8e761c6767992065c4cad2f0aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8a85f0758981c8e761c6767992065c4cad2f0aa", "html_url": "https://github.com/rust-lang/rust/commit/d8a85f0758981c8e761c6767992065c4cad2f0aa"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "6c542a8a1a47b07092be66748518426ec7090cf4", "filename": "src/comp/back/rpath.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/062ba22d997918f9903127d2158449a8d49134d9/src%2Fcomp%2Fback%2Frpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/062ba22d997918f9903127d2158449a8d49134d9/src%2Fcomp%2Fback%2Frpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fback%2Frpath.rs?ref=062ba22d997918f9903127d2158449a8d49134d9", "patch": "@@ -13,9 +13,12 @@ import util::filesearch;\n // to be exported\n export get_rpath_flags, test;\n \n-#[cfg(target_os=\"linux\")]\n-#[cfg(target_os=\"macos\")]\n fn get_rpath_flags(sess: session::session, out_filename: str) -> [str] {\n+    // No rpath on windows\n+    if sess.get_targ_cfg().os == session::os_win32 {\n+        ret [];\n+    }\n+\n     log \"preparing the RPATH!\";\n \n     let cwd = os::getcwd();\n@@ -31,11 +34,6 @@ fn get_rpath_flags(sess: session::session, out_filename: str) -> [str] {\n     rpaths_to_flags(rpaths)\n }\n \n-#[cfg(target_os=\"win32\")]\n-fn get_rpath_flags(_sess: session::session, _out_filename: str) -> [str] {\n-    []\n-}\n-\n fn get_sysroot_absolute_rt_lib(sess: session::session) -> fs::path {\n     let path = [sess.filesearch().sysroot()]\n         + filesearch::relative_target_lib_path("}]}