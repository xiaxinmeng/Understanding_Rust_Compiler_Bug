{"sha": "ad5aa2359d45654953405763090dbc0cd63b0c97", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkNWFhMjM1OWQ0NTY1NDk1MzQwNTc2MzA5MGRiYzBjZDYzYjBjOTc=", "commit": {"author": {"name": "oli", "email": "github35764891676564198441@oli-obk.de", "date": "2021-01-04T23:32:19Z"}, "committer": {"name": "oli", "email": "github35764891676564198441@oli-obk.de", "date": "2021-01-17T13:40:29Z"}, "message": "Remove an unnecessary field from a `NonConstOp`", "tree": {"sha": "59357140b8938513d6179504ba33cb01d801d9b6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59357140b8938513d6179504ba33cb01d801d9b6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad5aa2359d45654953405763090dbc0cd63b0c97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad5aa2359d45654953405763090dbc0cd63b0c97", "html_url": "https://github.com/rust-lang/rust/commit/ad5aa2359d45654953405763090dbc0cd63b0c97", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad5aa2359d45654953405763090dbc0cd63b0c97/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d51cf9601c714a8383aecade7c98559dd4831625", "url": "https://api.github.com/repos/rust-lang/rust/commits/d51cf9601c714a8383aecade7c98559dd4831625", "html_url": "https://github.com/rust-lang/rust/commit/d51cf9601c714a8383aecade7c98559dd4831625"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "99ffb0edce9e180a360f4f6c3e65d9868ab9d63f", "filename": "compiler/rustc_mir/src/transform/check_consts/ops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ad5aa2359d45654953405763090dbc0cd63b0c97/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad5aa2359d45654953405763090dbc0cd63b0c97/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fops.rs?ref=ad5aa2359d45654953405763090dbc0cd63b0c97", "patch": "@@ -72,7 +72,7 @@ impl NonConstOp for FnCallIndirect {\n \n /// A function call where the callee is not marked as `const`.\n #[derive(Debug)]\n-pub struct FnCallNonConst(pub DefId);\n+pub struct FnCallNonConst;\n impl NonConstOp for FnCallNonConst {\n     fn build_error(&self, ccx: &ConstCx<'_, 'tcx>, span: Span) -> DiagnosticBuilder<'tcx> {\n         struct_span_err!("}, {"sha": "ebb4e7e7fa049fe0415688722b44aff167466ab2", "filename": "compiler/rustc_mir/src/transform/check_consts/validation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ad5aa2359d45654953405763090dbc0cd63b0c97/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad5aa2359d45654953405763090dbc0cd63b0c97/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs?ref=ad5aa2359d45654953405763090dbc0cd63b0c97", "patch": "@@ -817,7 +817,7 @@ impl Visitor<'tcx> for Validator<'mir, 'tcx> {\n                 // Attempting to call a trait method?\n                 if let Some(trait_id) = tcx.trait_of_item(callee) {\n                     if !self.tcx.features().const_trait_impl {\n-                        self.check_op(ops::FnCallNonConst(callee));\n+                        self.check_op(ops::FnCallNonConst);\n                         return;\n                     }\n \n@@ -883,7 +883,7 @@ impl Visitor<'tcx> for Validator<'mir, 'tcx> {\n                 }\n \n                 if !tcx.is_const_fn_raw(callee) {\n-                    self.check_op(ops::FnCallNonConst(callee));\n+                    self.check_op(ops::FnCallNonConst);\n                     return;\n                 }\n "}]}