{"sha": "4b068dd657aad9e39be9cac1e8c3dee281c92cd4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiMDY4ZGQ2NTdhYWQ5ZTM5YmU5Y2FjMWU4YzNkZWUyODFjOTJjZDQ=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-08-06T02:21:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-06T02:21:28Z"}, "message": "Rollup merge of #87561 - devnexen:haiku_thread_build_fix, r=yaahc\n\nthread set_name haiku implementation.", "tree": {"sha": "edceabde949977ba9702bc05c9633926deea770c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/edceabde949977ba9702bc05c9633926deea770c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b068dd657aad9e39be9cac1e8c3dee281c92cd4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhDJyoCRBK7hj4Ov3rIwAA/rgIAFtBg3W7tDOmuG4Rg45SXxZ6\nCmUBKvW5SCwBCHu0+UV5BDfh6KR2evt60i1JvNpzj7lS5Hw7HEJ+bfk2Vpw9xWuz\n0gtrXYhvxQesH4phClF+MVmlvyoBlBwpAAsqC6/SLlOyNa2Xl0mw6LqHr1h16KWY\nAIxWBhB2AdmFUMqvwlAuzUfW/m6fmJDFLL84eSebmhMqfvOO6lGcv2OtArOrZG4b\nJT+zYjJ9nEL6drMD/M8tRJmcHipZAInn4xOvmVlYpDXTl+E3z79MpFDmldfk6aA+\nla/FGnnO6QJX0BTwShla9qduBsBUaUKQEiZKG+2UMgif5TaxEM/lnUnZIivNRWI=\n=gTr5\n-----END PGP SIGNATURE-----\n", "payload": "tree edceabde949977ba9702bc05c9633926deea770c\nparent e2f79572fbcbe103346c950d95d7335f6c804d83\nparent 52371f4b16c76001e054761023a6ef4e817d42ad\nauthor Yuki Okushi <jtitor@2k36.org> 1628216488 +0900\ncommitter GitHub <noreply@github.com> 1628216488 +0900\n\nRollup merge of #87561 - devnexen:haiku_thread_build_fix, r=yaahc\n\nthread set_name haiku implementation.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b068dd657aad9e39be9cac1e8c3dee281c92cd4", "html_url": "https://github.com/rust-lang/rust/commit/4b068dd657aad9e39be9cac1e8c3dee281c92cd4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b068dd657aad9e39be9cac1e8c3dee281c92cd4/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e2f79572fbcbe103346c950d95d7335f6c804d83", "url": "https://api.github.com/repos/rust-lang/rust/commits/e2f79572fbcbe103346c950d95d7335f6c804d83", "html_url": "https://github.com/rust-lang/rust/commit/e2f79572fbcbe103346c950d95d7335f6c804d83"}, {"sha": "52371f4b16c76001e054761023a6ef4e817d42ad", "url": "https://api.github.com/repos/rust-lang/rust/commits/52371f4b16c76001e054761023a6ef4e817d42ad", "html_url": "https://github.com/rust-lang/rust/commit/52371f4b16c76001e054761023a6ef4e817d42ad"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "bc61f472a2b0501fcbda5f5e4c01a3a61ed58fee", "filename": "library/std/src/sys/unix/thread.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4b068dd657aad9e39be9cac1e8c3dee281c92cd4/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b068dd657aad9e39be9cac1e8c3dee281c92cd4/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fthread.rs?ref=4b068dd657aad9e39be9cac1e8c3dee281c92cd4", "patch": "@@ -164,16 +164,23 @@ impl Thread {\n         }\n     }\n \n+    #[cfg(target_os = \"haiku\")]\n+    pub fn set_name(name: &CStr) {\n+        unsafe {\n+            let thread_self = libc::find_thread(ptr::null_mut());\n+            libc::rename_thread(thread_self, name.as_ptr());\n+        }\n+    }\n+\n     #[cfg(any(\n         target_env = \"newlib\",\n-        target_os = \"haiku\",\n         target_os = \"l4re\",\n         target_os = \"emscripten\",\n         target_os = \"redox\",\n         target_os = \"vxworks\"\n     ))]\n     pub fn set_name(_name: &CStr) {\n-        // Newlib, Haiku, Emscripten, and VxWorks have no way to set a thread name.\n+        // Newlib, Emscripten, and VxWorks have no way to set a thread name.\n     }\n \n     pub fn sleep(dur: Duration) {"}]}