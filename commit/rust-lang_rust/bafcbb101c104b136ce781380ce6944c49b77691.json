{"sha": "bafcbb101c104b136ce781380ce6944c49b77691", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhZmNiYjEwMWMxMDRiMTM2Y2U3ODEzODBjZTY5NDRjNDliNzc2OTE=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-10T01:34:22Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-10T01:34:22Z"}, "message": "Fold exports.", "tree": {"sha": "17fa6a8d4487faa57effbd1e185388cc114bd0cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17fa6a8d4487faa57effbd1e185388cc114bd0cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bafcbb101c104b136ce781380ce6944c49b77691", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bafcbb101c104b136ce781380ce6944c49b77691", "html_url": "https://github.com/rust-lang/rust/commit/bafcbb101c104b136ce781380ce6944c49b77691", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bafcbb101c104b136ce781380ce6944c49b77691/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11a10c7a7b86c7bf91a8adcd41573f9de9eeaf0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/11a10c7a7b86c7bf91a8adcd41573f9de9eeaf0e", "html_url": "https://github.com/rust-lang/rust/commit/11a10c7a7b86c7bf91a8adcd41573f9de9eeaf0e"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "d08b979ab2f3b3a65aaf694876f5db9e2a36c588", "filename": "src/comp/middle/fold.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/bafcbb101c104b136ce781380ce6944c49b77691/src%2Fcomp%2Fmiddle%2Ffold.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bafcbb101c104b136ce781380ce6944c49b77691/src%2Fcomp%2Fmiddle%2Ffold.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ffold.rs?ref=bafcbb101c104b136ce781380ce6944c49b77691", "patch": "@@ -254,6 +254,8 @@ type ast_fold[ENV] =\n      (fn(&ENV e, &span sp, ident i, vec[ident] idents,\n          def_id id, option.t[def]) -> @view_item) fold_view_item_import,\n \n+     (fn(&ENV e, &span sp, ident i) -> @view_item) fold_view_item_export,\n+\n      // Additional nodes.\n      (fn(&ENV e, &span sp,\n          &ast.block_) -> block)                   fold_block,\n@@ -852,6 +854,10 @@ fn fold_view_item[ENV](&ENV env, ast_fold[ENV] fld, @view_item vi)\n             ret fld.fold_view_item_import(env_, vi.span, def_ident, idents,\n                                           def_id, target_def);\n         }\n+\n+        case (ast.view_item_export(?def_ident)) {\n+            ret fld.fold_view_item_export(env_, vi.span, def_ident);\n+        }\n     }\n \n     fail;\n@@ -1339,6 +1345,11 @@ fn identity_fold_view_item_import[ENV](&ENV e, &span sp, ident i,\n     ret @respan(sp, ast.view_item_import(i, is, id, target_def));\n }\n \n+fn identity_fold_view_item_export[ENV](&ENV e, &span sp, ident i)\n+    -> @view_item {\n+    ret @respan(sp, ast.view_item_export(i));\n+}\n+\n // Additional identities.\n \n fn identity_fold_block[ENV](&ENV e, &span sp, &ast.block_ blk) -> block {\n@@ -1516,6 +1527,8 @@ fn new_identity_fold[ENV]() -> ast_fold[ENV] {\n              bind identity_fold_view_item_use[ENV](_,_,_,_,_),\n          fold_view_item_import =\n              bind identity_fold_view_item_import[ENV](_,_,_,_,_,_),\n+         fold_view_item_export =\n+             bind identity_fold_view_item_export[ENV](_,_,_),\n \n          fold_block = bind identity_fold_block[ENV](_,_,_),\n          fold_fn = bind identity_fold_fn[ENV](_,_,_,_),"}]}