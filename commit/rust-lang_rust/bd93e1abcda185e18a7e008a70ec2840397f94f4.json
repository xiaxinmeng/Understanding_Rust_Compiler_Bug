{"sha": "bd93e1abcda185e18a7e008a70ec2840397f94f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkOTNlMWFiY2RhMTg1ZTE4YTdlMDA4YTcwZWMyODQwMzk3Zjk0ZjQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-18T01:17:15Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-18T01:19:37Z"}, "message": "Register new snapshots. Update location of stage0's libstd", "tree": {"sha": "8e6b40082f80b2e45e6ea3f47719e2f331778bd7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e6b40082f80b2e45e6ea3f47719e2f331778bd7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd93e1abcda185e18a7e008a70ec2840397f94f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd93e1abcda185e18a7e008a70ec2840397f94f4", "html_url": "https://github.com/rust-lang/rust/commit/bd93e1abcda185e18a7e008a70ec2840397f94f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd93e1abcda185e18a7e008a70ec2840397f94f4/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0afcb400b7fcecc777f6ef6758f20d28af62ee3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e0afcb400b7fcecc777f6ef6758f20d28af62ee3", "html_url": "https://github.com/rust-lang/rust/commit/e0afcb400b7fcecc777f6ef6758f20d28af62ee3"}], "stats": {"total": 32, "additions": 15, "deletions": 17}, "files": [{"sha": "d693d7d5100b2dfdf00d0b8466c7e4b20e91770a", "filename": "Makefile.in", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -148,7 +148,8 @@ COMPILER_INPUTS := $(wildcard $(addprefix $(S)src/comp/, \\\n ######################################################################\n \n LREQ := rt/$(CFG_RUNTIME) rustllvm/$(CFG_RUSTLLVM)\n-SREQ0 := stage0/rustc$(X) $(LREQ) rt/main.o stage0/glue.o stage0/$(CFG_STDLIB)\n+SREQ0 := stage0/rustc$(X) $(LREQ) rt/main.o stage0/glue.o \\\n+         stage0/lib/$(CFG_STDLIB)\n SREQ1 := stage1/rustc$(X) $(LREQ) rt/main.o stage1/glue.o \\\n          stage1/lib/$(CFG_STDLIB)\n SREQ2 := stage2/rustc$(X) $(LREQ) rt/main.o stage2/glue.o \\\n@@ -184,7 +185,7 @@ CFG_INFO := $(info cfg:)\n \n all: rt/$(CFG_RUNTIME)          \\\n      rustllvm/$(CFG_RUSTLLVM)   \\\n-     stage0/$(CFG_STDLIB)       \\\n+     stage0/lib/$(CFG_STDLIB)   \\\n      stage0/intrinsics.bc       \\\n      stage0/rustc$(X)           \\\n      $(GENERATED)               \\\n@@ -198,7 +199,7 @@ else\n \n all: rt/$(CFG_RUNTIME)          \\\n      rustllvm/$(CFG_RUSTLLVM)   \\\n-     stage0/$(CFG_STDLIB)       \\\n+     stage0/lib/$(CFG_STDLIB)   \\\n      stage0/intrinsics.bc       \\\n      stage0/rustc$(X)           \\\n      $(GENERATED)               \\"}, {"sha": "13240ed81840df50b92ea872bff02143992789e0", "filename": "mk/clean.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fclean.mk", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fclean.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fclean.mk?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -22,7 +22,7 @@ clean:\n \t$(Q)rm -f $(C_DEPFILES:%.d=%.d.tmp)\n \t$(Q)rm -f $(CRATE_DEPFILES:%.d=%.d.tmp)\n \t$(Q)rm -f $(GENERATED)\n-\t$(Q)rm -f stage0/rustc$(X) stage0/$(CFG_STDLIB)\n+\t$(Q)rm -f stage0/rustc$(X) stage0/lib/$(CFG_STDLIB)\n \t$(Q)rm -f stage1/rustc$(X) stage1/lib/$(CFG_STDLIB) stage1/glue*\n \t$(Q)rm -f stage2/rustc$(X) stage2/lib/$(CFG_STDLIB) stage2/glue*\n \t$(Q)rm -f stage3/rustc$(X) stage3/lib/$(CFG_STDLIB) stage3/glue*"}, {"sha": "5f32e2e7be5760eed60966bd3010d63959b8413a", "filename": "mk/stage0.mk", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fstage0.mk", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fstage0.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage0.mk?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -1,5 +1,6 @@\n stage0/rustc$(X): $(S)src/snapshots.txt $(S)src/etc/get-snapshot.py $(MKFILES)\n \t@$(call E, fetch: $@)\n+\tmkdir -p stage0/lib\n \t$(Q)$(S)src/etc/get-snapshot.py\n \t$(Q)touch $@\n \n@@ -8,7 +9,7 @@ stage0/rustc$(X): $(S)src/snapshots.txt $(S)src/etc/get-snapshot.py $(MKFILES)\n stage0/glue.o: stage0/rustc$(X)\n \t$(Q)touch $@\n \n-stage0/$(CFG_STDLIB): stage0/rustc$(X)\n+stage0/lib/$(CFG_STDLIB): stage0/rustc$(X)\n \t$(Q)touch $@\n \n # TODO: Include as part of the snapshot."}, {"sha": "e83d3ae1747a2beb1f507141b5aab9b913bf2fb3", "filename": "mk/stage1.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fstage1.mk", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/mk%2Fstage1.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage1.mk?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -1,11 +1,11 @@\n stage1/lib/$(CFG_STDLIB): $(STDLIB_CRATE) $(STDLIB_INPUTS) \\\n-              stage1/rustc$(X) stage0/$(CFG_STDLIB) stage1/intrinsics.bc \\\n+              stage1/rustc$(X) stage0/lib/$(CFG_STDLIB) stage1/intrinsics.bc \\\n               stage1/glue.o $(LREQ) $(MKFILES)\n \t@$(call E, compile_and_link: $@)\n \tmkdir -p stage1/lib\n \t$(STAGE1)  --shared -o $@ $<\n \n-stage1/glue.o: stage1/rustc$(X) stage0/$(CFG_STDLIB) stage1/intrinsics.bc \\\n+stage1/glue.o: stage1/rustc$(X) stage0/lib/$(CFG_STDLIB) stage1/intrinsics.bc \\\n                $(LREQ) $(MKFILES)\n \t@$(call E, generate: $@)\n \t$(STAGE1) -c -o $@ --glue"}, {"sha": "98e480defda1d1e91f56395461e25b64d0cc674a", "filename": "src/etc/get-snapshot.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fetc%2Fget-snapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fetc%2Fget-snapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fget-snapshot.py?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -9,7 +9,7 @@ def unpack_snapshot(snap):\n   print(\"opening snapshot \" + dl_path)\n   tar = tarfile.open(dl_path)\n   kernel = get_kernel()\n-  for name in old_snapshot_files[kernel]:\n+  for name in snapshot_files[kernel]:\n     p = \"rust-stage0/\" + name\n     fp = os.path.join(\"stage0\", name)\n     print(\"extracting \" + fp)"}, {"sha": "e567de5ab68c3a2dca8687c2633a2bee86770274", "filename": "src/etc/snapshot.py", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fetc%2Fsnapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fetc%2Fsnapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsnapshot.py?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -21,15 +21,6 @@ def scrub(b):\n     \"winnt\": [\"rustc.exe\", \"glue.o\", \"lib/std.dll\" ]\n     }\n \n-# This is a transitional list of files so that the unpacker knows to\n-# use the old directory layout and the snapshotter knows to use the\n-# new directory layout\n-old_snapshot_files = {\n-    \"linux\": [\"rustc\", \"glue.o\", \"libstd.so\" ],\n-    \"macos\": [\"rustc\", \"glue.o\", \"libstd.dylib\" ],\n-    \"winnt\": [\"rustc.exe\", \"glue.o\", \"std.dll\" ]\n-    }\n-\n def parse_line(n, line):\n   global snapshotfile\n "}, {"sha": "36590a0001cb98daa45e2c55a1b13a6d3a23b9a5", "filename": "src/snapshots.txt", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fsnapshots.txt", "raw_url": "https://github.com/rust-lang/rust/raw/bd93e1abcda185e18a7e008a70ec2840397f94f4/src%2Fsnapshots.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsnapshots.txt?ref=bd93e1abcda185e18a7e008a70ec2840397f94f4", "patch": "@@ -1,3 +1,8 @@\n+S 2011-06-17 175fd8e\n+  linux-i386 ba92b05deee82f2d8f954cf014de1faec1167e36\n+  macos-i386 6bacf4769deda26b614b4ba36bcb46f65649cce0\n+  winnt-i386 057c6ae72ec2059806e33bc3578c71534779eac5\n+\n S 2011-06-16 15f71b3\n   linux-i386 c81ac692140484ee8944ab50ca69347abdca30b4\n   macos-i386 ac27541e4438956cb29bd70c8d353c487a315634"}]}