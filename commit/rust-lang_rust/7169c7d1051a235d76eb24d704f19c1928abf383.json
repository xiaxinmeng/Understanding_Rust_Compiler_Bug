{"sha": "7169c7d1051a235d76eb24d704f19c1928abf383", "node_id": "C_kwDOAAsO6NoAKDcxNjljN2QxMDUxYTIzNWQ3NmViMjRkNzA0ZjE5YzE5MjhhYmYzODM", "commit": {"author": {"name": "Steven Tang", "email": "yc@steventang.net", "date": "2022-11-22T06:09:47Z"}, "committer": {"name": "Steven Tang", "email": "yc@steventang.net", "date": "2022-11-22T06:44:38Z"}, "message": "Tests for bad --extern library path and file", "tree": {"sha": "b4f17192a79e3adc7a5b79d7a2b03e5fc693af45", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4f17192a79e3adc7a5b79d7a2b03e5fc693af45"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7169c7d1051a235d76eb24d704f19c1928abf383", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7cY/kLvbY7XXodRUFZdSDHNLrmYFAmN8b9gACgkQFZdSDHNL\nrmY/qQ/9GWnt8Knsd6wkRdv6K8ceMAUNn7CLSO59Qvy3Is+B7E6Nd1ZnaQk+tXP2\naYtHJndcCX0vKRTDKnZthte23RCO02/JvmFp7kymbUxOcLdB+ePAXAQgoEPc2caN\nuMyRea16tunkTqGrxHS7IYX+z1RIEU0gEzG2sV3XBCfvEuJ9jnr+tj1TzSBihz/U\nrw5of1JYONBZRmeRYYbzEbi1ziCRPU6qjcDo155u0UiX4JSRdFGIGbk2UJ1b3gwZ\npaxAJqmW3OAv+05L9Umo5UuTdde6Oe9s47V6wlE8+cy/9PSaStEn+HoOIdDizoHF\nr1PFa6IkcUPCZP/57csT8Q/sMPjAuyfimPcXPBVk2GYZmnrekRx6zdTtZJ4VgpQW\n4Sgbnus7lWrRmj1QlbP8PnXe6sD9NEjuAs0L7PHOUqR4ltZrub9GGC21tzMXfHz0\neEG+TJBMkPpJZl94dlmhpDhmWSqdVvxQh8RjamHQCR3X1L1vyVkOj9yB0Vy98tN8\nxRwFH8h/iqR0qEKOxtEiG2COeMT6HC4GmOCQ6AmoDz1hRmEELQH/EnKUeeUgUEnW\ngaQv4ahmx6xU/CNoY9NOdD4AvZ8p/rTdx4731/cI5cL45QaKvrNdXEegZ6rkD/84\n/tEZ1kLKYBLjb8EyNFcf0FShDDuKUMT8+HIx/pbuWLB0LSQYtvQ=\n=5HM3\n-----END PGP SIGNATURE-----", "payload": "tree b4f17192a79e3adc7a5b79d7a2b03e5fc693af45\nparent 395f2b84e6fd4be029cb5af5559505cbc2c79983\nauthor Steven Tang <yc@steventang.net> 1669097387 +1100\ncommitter Steven Tang <yc@steventang.net> 1669099478 +1100\n\nTests for bad --extern library path and file\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7169c7d1051a235d76eb24d704f19c1928abf383", "html_url": "https://github.com/rust-lang/rust/commit/7169c7d1051a235d76eb24d704f19c1928abf383", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7169c7d1051a235d76eb24d704f19c1928abf383/comments", "author": {"login": "YC", "id": 5828744, "node_id": "MDQ6VXNlcjU4Mjg3NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5828744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YC", "html_url": "https://github.com/YC", "followers_url": "https://api.github.com/users/YC/followers", "following_url": "https://api.github.com/users/YC/following{/other_user}", "gists_url": "https://api.github.com/users/YC/gists{/gist_id}", "starred_url": "https://api.github.com/users/YC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YC/subscriptions", "organizations_url": "https://api.github.com/users/YC/orgs", "repos_url": "https://api.github.com/users/YC/repos", "events_url": "https://api.github.com/users/YC/events{/privacy}", "received_events_url": "https://api.github.com/users/YC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "YC", "id": 5828744, "node_id": "MDQ6VXNlcjU4Mjg3NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/5828744?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YC", "html_url": "https://github.com/YC", "followers_url": "https://api.github.com/users/YC/followers", "following_url": "https://api.github.com/users/YC/following{/other_user}", "gists_url": "https://api.github.com/users/YC/gists{/gist_id}", "starred_url": "https://api.github.com/users/YC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YC/subscriptions", "organizations_url": "https://api.github.com/users/YC/orgs", "repos_url": "https://api.github.com/users/YC/repos", "events_url": "https://api.github.com/users/YC/events{/privacy}", "received_events_url": "https://api.github.com/users/YC/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "395f2b84e6fd4be029cb5af5559505cbc2c79983", "url": "https://api.github.com/repos/rust-lang/rust/commits/395f2b84e6fd4be029cb5af5559505cbc2c79983", "html_url": "https://github.com/rust-lang/rust/commit/395f2b84e6fd4be029cb5af5559505cbc2c79983"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "15546092e41a2bb37a80663b2b222963252bcb3a", "filename": "compiler/rustc_metadata/src/locator.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7169c7d1051a235d76eb24d704f19c1928abf383/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7169c7d1051a235d76eb24d704f19c1928abf383/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs?ref=7169c7d1051a235d76eb24d704f19c1928abf383", "patch": "@@ -1026,7 +1026,6 @@ impl CrateError {\n                     None => String::new(),\n                     Some(r) => format!(\" which `{}` depends on\", r.name),\n                 };\n-                // FIXME: There are no tests for CrateLocationUnknownType or LibFilenameForm\n                 if !locator.crate_rejections.via_filename.is_empty() {\n                     let mismatches = locator.crate_rejections.via_filename.iter();\n                     for CrateMismatch { path, .. } in mismatches {"}, {"sha": "3f13d605232036ace6a2a913c5e27212c0fc27dc", "filename": "src/test/ui/errors/issue-104621-extern-bad-file.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.rs?ref=7169c7d1051a235d76eb24d704f19c1928abf383", "patch": "@@ -0,0 +1,8 @@\n+// compile-flags: --extern foo={{src-base}}/errors/issue-104621-extern-bad-file.rs\n+// only-linux\n+\n+extern crate foo;\n+//~^ ERROR extern location for foo is of an unknown type\n+//~| ERROR file name should be lib*.rlib or lib*.so\n+//~| ERROR can't find crate for `foo` [E0463]\n+fn main() {}"}, {"sha": "b8500ad0e045b8f154042a8c0c4ff2e28eeb240e", "filename": "src/test/ui/errors/issue-104621-extern-bad-file.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-bad-file.stderr?ref=7169c7d1051a235d76eb24d704f19c1928abf383", "patch": "@@ -0,0 +1,21 @@\n+error: extern location for foo is of an unknown type: $DIR/issue-104621-extern-bad-file.rs\n+  --> $DIR/issue-104621-extern-bad-file.rs:4:1\n+   |\n+LL | extern crate foo;\n+   | ^^^^^^^^^^^^^^^^^\n+\n+error: file name should be lib*.rlib or lib*.so\n+  --> $DIR/issue-104621-extern-bad-file.rs:4:1\n+   |\n+LL | extern crate foo;\n+   | ^^^^^^^^^^^^^^^^^\n+\n+error[E0463]: can't find crate for `foo`\n+  --> $DIR/issue-104621-extern-bad-file.rs:4:1\n+   |\n+LL | extern crate foo;\n+   | ^^^^^^^^^^^^^^^^^ can't find crate\n+\n+error: aborting due to 3 previous errors\n+\n+For more information about this error, try `rustc --explain E0463`."}, {"sha": "899e45a306b052be90ff11c698705cf2d3555a50", "filename": "src/test/ui/errors/issue-104621-extern-not-file.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.rs?ref=7169c7d1051a235d76eb24d704f19c1928abf383", "patch": "@@ -0,0 +1,4 @@\n+// compile-flags: --extern foo=.\n+\n+extern crate foo; //~ ERROR extern location for foo is not a file: .\n+fn main() {}"}, {"sha": "5aaf9741360ef85bb52f03b5f3b6c3a76d931e5a", "filename": "src/test/ui/errors/issue-104621-extern-not-file.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7169c7d1051a235d76eb24d704f19c1928abf383/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferrors%2Fissue-104621-extern-not-file.stderr?ref=7169c7d1051a235d76eb24d704f19c1928abf383", "patch": "@@ -0,0 +1,8 @@\n+error: extern location for foo is not a file: .\n+  --> $DIR/issue-104621-extern-not-file.rs:3:1\n+   |\n+LL | extern crate foo;\n+   | ^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}]}