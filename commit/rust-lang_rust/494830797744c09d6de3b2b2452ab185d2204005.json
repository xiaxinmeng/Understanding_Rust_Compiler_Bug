{"sha": "494830797744c09d6de3b2b2452ab185d2204005", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5NDgzMDc5Nzc0NGMwOWQ2ZGUzYjJiMjQ1MmFiMTg1ZDIyMDQwMDU=", "commit": {"author": {"name": "Vardan Margaryan", "email": "v.t.margaryan@gmail.com", "date": "2020-05-10T15:34:29Z"}, "committer": {"name": "Vardan Margaryan", "email": "v.t.margaryan@gmail.com", "date": "2020-05-14T19:36:46Z"}, "message": "Fix cases of match_wildcard_for_single_variants lint when it is spanned on Option", "tree": {"sha": "31f5c9ebd436c67ca0158ff4f91dbae9ae25603b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31f5c9ebd436c67ca0158ff4f91dbae9ae25603b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/494830797744c09d6de3b2b2452ab185d2204005", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/494830797744c09d6de3b2b2452ab185d2204005", "html_url": "https://github.com/rust-lang/rust/commit/494830797744c09d6de3b2b2452ab185d2204005", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/494830797744c09d6de3b2b2452ab185d2204005/comments", "author": {"login": "vtmargaryan", "id": 8739550, "node_id": "MDQ6VXNlcjg3Mzk1NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8739550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vtmargaryan", "html_url": "https://github.com/vtmargaryan", "followers_url": "https://api.github.com/users/vtmargaryan/followers", "following_url": "https://api.github.com/users/vtmargaryan/following{/other_user}", "gists_url": "https://api.github.com/users/vtmargaryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/vtmargaryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vtmargaryan/subscriptions", "organizations_url": "https://api.github.com/users/vtmargaryan/orgs", "repos_url": "https://api.github.com/users/vtmargaryan/repos", "events_url": "https://api.github.com/users/vtmargaryan/events{/privacy}", "received_events_url": "https://api.github.com/users/vtmargaryan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vtmargaryan", "id": 8739550, "node_id": "MDQ6VXNlcjg3Mzk1NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/8739550?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vtmargaryan", "html_url": "https://github.com/vtmargaryan", "followers_url": "https://api.github.com/users/vtmargaryan/followers", "following_url": "https://api.github.com/users/vtmargaryan/following{/other_user}", "gists_url": "https://api.github.com/users/vtmargaryan/gists{/gist_id}", "starred_url": "https://api.github.com/users/vtmargaryan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vtmargaryan/subscriptions", "organizations_url": "https://api.github.com/users/vtmargaryan/orgs", "repos_url": "https://api.github.com/users/vtmargaryan/repos", "events_url": "https://api.github.com/users/vtmargaryan/events{/privacy}", "received_events_url": "https://api.github.com/users/vtmargaryan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0ad9f7d651b52de4be6384c9b6dc893b389fd557", "url": "https://api.github.com/repos/rust-lang/rust/commits/0ad9f7d651b52de4be6384c9b6dc893b389fd557", "html_url": "https://github.com/rust-lang/rust/commit/0ad9f7d651b52de4be6384c9b6dc893b389fd557"}], "stats": {"total": 22, "additions": 13, "deletions": 9}, "files": [{"sha": "efb424bcb7bf920793fcba8dc965396d0435ba5f", "filename": "clippy_lints/src/consts.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconsts.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -139,6 +139,7 @@ impl Constant {\n                 .find(|r| r.map_or(true, |o| o != Ordering::Equal))\n                 .unwrap_or_else(|| Some(l.len().cmp(&r.len()))),\n             (&Self::Repeat(ref lv, ref ls), &Self::Repeat(ref rv, ref rs)) => {\n+                #[allow(clippy::match_wildcard_for_single_variants)]\n                 match Self::partial_cmp(tcx, cmp_type, lv, rv) {\n                     Some(Equal) => Some(ls.cmp(rs)),\n                     x => x,\n@@ -354,14 +355,14 @@ impl<'c, 'cc> ConstEvalLateContext<'c, 'cc> {\n             (Some(Constant::Vec(vec)), Some(Constant::Int(index))) => match vec.get(index as usize) {\n                 Some(Constant::F32(x)) => Some(Constant::F32(*x)),\n                 Some(Constant::F64(x)) => Some(Constant::F64(*x)),\n-                _ => None,\n+                Some(_) | None => None,\n             },\n             (Some(Constant::Vec(vec)), _) => {\n                 if !vec.is_empty() && vec.iter().all(|x| *x == vec[0]) {\n                     match vec.get(0) {\n                         Some(Constant::F32(x)) => Some(Constant::F32(*x)),\n                         Some(Constant::F64(x)) => Some(Constant::F64(*x)),\n-                        _ => None,\n+                        Some(_) | None => None,\n                     }\n                 } else {\n                     None\n@@ -532,7 +533,7 @@ pub fn miri_to_const(result: &ty::Const<'_>) -> Option<Constant> {\n                         })\n                         .collect::<Option<Vec<Constant>>>()\n                         .map(Constant::Vec),\n-                    _ => None,\n+                    Some(_) | None => None,\n                 },\n                 ty::Float(FloatTy::F64) => match miri_to_const(len) {\n                     Some(Constant::Int(len)) => alloc\n@@ -546,7 +547,7 @@ pub fn miri_to_const(result: &ty::Const<'_>) -> Option<Constant> {\n                         })\n                         .collect::<Option<Vec<Constant>>>()\n                         .map(Constant::Vec),\n-                    _ => None,\n+                    Some(_) | None => None,\n                 },\n                 // FIXME: implement other array type conversions.\n                 _ => None,"}, {"sha": "615afee33ef9588442cab8595bed8607721b95b0", "filename": "clippy_lints/src/escape.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fescape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fescape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fescape.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -95,12 +95,12 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for BoxedLocal {\n fn is_argument(map: rustc_middle::hir::map::Map<'_>, id: HirId) -> bool {\n     match map.find(id) {\n         Some(Node::Binding(_)) => (),\n-        _ => return false,\n+        Some(_) | None => return false,\n     }\n \n     match map.find(map.get_parent_node(id)) {\n         Some(Node::Param(_)) => true,\n-        _ => false,\n+        Some(_) | None => false,\n     }\n }\n "}, {"sha": "8c61b2f86643dfeb4138473f87ea20a9f2465385", "filename": "clippy_lints/src/floating_point_arithmetic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffloating_point_arithmetic.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -410,7 +410,7 @@ fn is_zero(cx: &LateContext<'_, '_>, expr: &Expr<'_>) -> bool {\n         Some(Constant::Int(i)) => i == 0,\n         Some(Constant::F32(f)) => f == 0.0,\n         Some(Constant::F64(f)) => f == 0.0,\n-        _ => false,\n+        Some(_) | None => false,\n     }\n }\n "}, {"sha": "39908bff5ed4891e163a4835ff6b203c7bd89490", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -2154,7 +2154,7 @@ fn is_loop_nested(cx: &LateContext<'_, '_>, loop_expr: &Expr<'_>, iter_expr: &Ex\n                 }\n             },\n             Some(Node::Stmt(_)) => (),\n-            _ => {\n+            Some(_) | None => {\n                 return false;\n             },\n         }"}, {"sha": "38c2645d36e4811d8ea30d8aa46f93497807e5d1", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -509,7 +509,7 @@ fn is_allowed<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr<'_>) -> boo\n             Constant::F64(f) => *f == 0.0 || (*f).is_infinite(),\n             _ => false,\n         }),\n-        _ => false,\n+        Some(_) | None => false,\n     }\n }\n "}, {"sha": "3bb3eb15d9c262ad9e3ee8f4665bf7deb030e18c", "filename": "clippy_lints/src/modulo_arithmetic.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fmodulo_arithmetic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Fmodulo_arithmetic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmodulo_arithmetic.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -37,6 +37,7 @@ struct OperandInfo {\n }\n \n fn analyze_operand(operand: &Expr<'_>, cx: &LateContext<'_, '_>, expr: &Expr<'_>) -> Option<OperandInfo> {\n+    #[allow(clippy::match_wildcard_for_single_variants)]\n     match constant(cx, cx.tables, operand) {\n         Some((Constant::Int(v), _)) => match cx.tables.expr_ty(expr).kind {\n             ty::Int(ity) => {"}, {"sha": "7bc8be492e828f0a36a866e65bcc6a113c93fc4a", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/494830797744c09d6de3b2b2452ab185d2204005/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=494830797744c09d6de3b2b2452ab185d2204005", "patch": "@@ -370,6 +370,7 @@ pub fn trait_ref_of_method<'tcx>(cx: &LateContext<'_, 'tcx>, hir_id: HirId) -> O\n \n /// Checks whether this type implements `Drop`.\n pub fn has_drop<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, ty: Ty<'tcx>) -> bool {\n+    #[allow(clippy::match_wildcard_for_single_variants)]\n     match ty.ty_adt_def() {\n         Some(def) => def.has_dtor(cx.tcx),\n         _ => false,\n@@ -444,6 +445,7 @@ pub fn is_entrypoint_fn(cx: &LateContext<'_, '_>, def_id: DefId) -> bool {\n /// Gets the name of the item the expression is in, if available.\n pub fn get_item_name(cx: &LateContext<'_, '_>, expr: &Expr<'_>) -> Option<Name> {\n     let parent_id = cx.tcx.hir().get_parent_item(expr.hir_id);\n+    #[allow(clippy::match_wildcard_for_single_variants)]\n     match cx.tcx.hir().find(parent_id) {\n         Some(\n             Node::Item(Item { ident, .. })"}]}