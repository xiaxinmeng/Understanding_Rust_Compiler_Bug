{"sha": "e4b18422ad3ee6bf1e749ccd337a25736a78c0bb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0YjE4NDIyYWQzZWU2YmYxZTc0OWNjZDMzN2EyNTczNmE3OGMwYmI=", "commit": {"author": {"name": "Jonathan Turner", "email": "jturner@mozilla.com", "date": "2016-09-20T22:39:05Z"}, "committer": {"name": "Jonathan Turner", "email": "jturner@mozilla.com", "date": "2016-09-20T22:39:05Z"}, "message": "Check for overlapping and simplify unit test", "tree": {"sha": "d9bd85afd222bdc3c6ce5f6612f1fed7ba0446f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9bd85afd222bdc3c6ce5f6612f1fed7ba0446f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb", "html_url": "https://github.com/rust-lang/rust/commit/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb/comments", "author": null, "committer": null, "parents": [{"sha": "2ea3ab3a9022a93e45c4d50a1c43aec5f56ab4dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ea3ab3a9022a93e45c4d50a1c43aec5f56ab4dc", "html_url": "https://github.com/rust-lang/rust/commit/2ea3ab3a9022a93e45c4d50a1c43aec5f56ab4dc"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "6d68ce3646d53b41ba8f3e43fb7013c00ae569dc", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e4b18422ad3ee6bf1e749ccd337a25736a78c0bb/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=e4b18422ad3ee6bf1e749ccd337a25736a78c0bb", "patch": "@@ -392,8 +392,8 @@ impl CodeMap {\n             return None;\n         }\n \n-        // ensure these follow the expected order\n-        if sp_lhs.lo <= sp_rhs.lo {\n+        // ensure these follow the expected order and we don't overlap\n+        if (sp_lhs.lo <= sp_rhs.lo) && (sp_lhs.hi <= sp_rhs.lo) {\n             Some(Span {\n                 lo: cmp::min(sp_lhs.lo, sp_rhs.lo),\n                 hi: cmp::max(sp_lhs.hi, sp_rhs.hi),\n@@ -1146,12 +1146,7 @@ mod tests {\n         let span1 = span_from_selection(inputtext, selection1);\n         let span2 = span_from_selection(inputtext, selection2);\n \n-        if let Some(_) = cm.merge_spans(span1, span2) {\n-            assert!(false);\n-        }\n-        else {\n-            assert!(true);\n-        }\n+        assert!(cm.merge_spans(span1, span2).is_none());\n     }\n \n     /// Returns the span corresponding to the `n`th occurrence of"}]}