{"sha": "7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlZTgxN2U0YzRkOTcyZmQ1MjU1Y2RhYjA0N2FlZjVkNGViOGZlYzQ=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-06-03T05:35:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-03T05:35:36Z"}, "message": "Rollup merge of #85896 - BoxyUwU:remove-fixme-fwd-declared-const-default, r=petrochenkov\n\nAdd test for forward declared const param defaults", "tree": {"sha": "afe2ae60ea50fa3385f0fb6fe50e5d13fcefd14f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/afe2ae60ea50fa3385f0fb6fe50e5d13fcefd14f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJguGooCRBK7hj4Ov3rIwAA6AsIAIC9yS2FnJKJb5QZ21WFDzNV\nV2v3mKk8wEGNCD7L74zQEAhyUdOipbvn1+McHlEVMp/qBDgdsUqulALFlPA/lZMk\nWqgzFdhtFP4V/G8/Llw03q+ndgBgpw22kGV0yoSQyiRJ0ewiDu6zMFqvMmmok/B+\nTn2hyaw/kt1i/jfMRv9aMjyZU8ovZyl5m3XHfYDIeRT350mdNoERACr8iGoaXfZG\nVrQVYRjR6g6/jhG5+P9YLM8L+yk71/BJZB313PPWKy6+CW7QRpqhcZrPVH9KTeU3\nv7qmddhBjI2T/FgrXZ3PrQizLHyGOntM6MtrTCGnhw3tHiRTCzglhwz0WXqj5WE=\n=N2Tp\n-----END PGP SIGNATURE-----\n", "payload": "tree afe2ae60ea50fa3385f0fb6fe50e5d13fcefd14f\nparent 0d4bbc5d2b9c7f4235f4c9a49ac2527335fbabee\nparent ba680aa5f25e1584ef6eb54ed45b35ea6d58f9a7\nauthor Yuki Okushi <jtitor@2k36.org> 1622698536 +0900\ncommitter GitHub <noreply@github.com> 1622698536 +0900\n\nRollup merge of #85896 - BoxyUwU:remove-fixme-fwd-declared-const-default, r=petrochenkov\n\nAdd test for forward declared const param defaults\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "html_url": "https://github.com/rust-lang/rust/commit/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d4bbc5d2b9c7f4235f4c9a49ac2527335fbabee", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d4bbc5d2b9c7f4235f4c9a49ac2527335fbabee", "html_url": "https://github.com/rust-lang/rust/commit/0d4bbc5d2b9c7f4235f4c9a49ac2527335fbabee"}, {"sha": "ba680aa5f25e1584ef6eb54ed45b35ea6d58f9a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba680aa5f25e1584ef6eb54ed45b35ea6d58f9a7", "html_url": "https://github.com/rust-lang/rust/commit/ba680aa5f25e1584ef6eb54ed45b35ea6d58f9a7"}], "stats": {"total": 48, "additions": 45, "deletions": 3}, "files": [{"sha": "03d94f43897ba19fcd472316db990b0b0ec34f7b", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "patch": "@@ -450,7 +450,7 @@ impl<'a> Resolver<'a> {\n                 err.span_label(shadowed_binding_span, msg);\n                 err\n             }\n-            ResolutionError::ForwardDeclaredTyParam => {\n+            ResolutionError::ForwardDeclaredGenericParam => {\n                 let mut err = struct_span_err!(\n                     self.session,\n                     span,"}, {"sha": "41935e7d6dfd59d0b434592724a0c8262c77b94a", "filename": "compiler/rustc_resolve/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/compiler%2Frustc_resolve%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/compiler%2Frustc_resolve%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flib.rs?ref=7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "patch": "@@ -242,7 +242,7 @@ enum ResolutionError<'a> {\n         shadowed_binding_span: Span,\n     },\n     /// Error E0128: generic parameters with a default cannot use forward-declared identifiers.\n-    ForwardDeclaredTyParam, // FIXME(const_generics_defaults)\n+    ForwardDeclaredGenericParam,\n     /// ERROR E0770: the type of const parameters must not depend on other generic parameters.\n     ParamInTyOfConstParam(Symbol),\n     /// generic parameters must not be used inside const evaluations.\n@@ -2608,7 +2608,7 @@ impl<'a> Resolver<'a> {\n                 let res_error = if rib_ident.name == kw::SelfUpper {\n                     ResolutionError::SelfInTyParamDefault\n                 } else {\n-                    ResolutionError::ForwardDeclaredTyParam\n+                    ResolutionError::ForwardDeclaredGenericParam\n                 };\n                 self.report_error(span, res_error);\n             }"}, {"sha": "09fc105320e449fa30a1df7e2361a75746af66a7", "filename": "src/test/ui/const-generics/defaults/forward-declared.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.rs?ref=7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "patch": "@@ -0,0 +1,15 @@\n+#![feature(const_generics_defaults)]\n+\n+struct Foo<const N: usize = M, const M: usize = 10>;\n+//~^ ERROR generic parameters with a default cannot use forward declared identifiers\n+\n+enum Bar<const N: usize = M, const M: usize = 10> {}\n+//~^ ERROR generic parameters with a default cannot use forward declared identifiers\n+\n+struct Foo2<const N: usize = N>;\n+//~^ ERROR generic parameters with a default cannot use forward declared identifiers\n+\n+enum Bar2<const N: usize = N> {}\n+//~^ ERROR generic parameters with a default cannot use forward declared identifiers\n+\n+fn main() {}"}, {"sha": "a6c4a7ae4ef2dcae75547b0f55353ccebefd78e2", "filename": "src/test/ui/const-generics/defaults/forward-declared.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7ee817e4c4d972fd5255cdab047aef5d4eb8fec4/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdefaults%2Fforward-declared.stderr?ref=7ee817e4c4d972fd5255cdab047aef5d4eb8fec4", "patch": "@@ -0,0 +1,27 @@\n+error[E0128]: generic parameters with a default cannot use forward declared identifiers\n+  --> $DIR/forward-declared.rs:3:29\n+   |\n+LL | struct Foo<const N: usize = M, const M: usize = 10>;\n+   |                             ^ defaulted generic parameters cannot be forward declared\n+\n+error[E0128]: generic parameters with a default cannot use forward declared identifiers\n+  --> $DIR/forward-declared.rs:6:27\n+   |\n+LL | enum Bar<const N: usize = M, const M: usize = 10> {}\n+   |                           ^ defaulted generic parameters cannot be forward declared\n+\n+error[E0128]: generic parameters with a default cannot use forward declared identifiers\n+  --> $DIR/forward-declared.rs:9:30\n+   |\n+LL | struct Foo2<const N: usize = N>;\n+   |                              ^ defaulted generic parameters cannot be forward declared\n+\n+error[E0128]: generic parameters with a default cannot use forward declared identifiers\n+  --> $DIR/forward-declared.rs:12:28\n+   |\n+LL | enum Bar2<const N: usize = N> {}\n+   |                            ^ defaulted generic parameters cannot be forward declared\n+\n+error: aborting due to 4 previous errors\n+\n+For more information about this error, try `rustc --explain E0128`."}]}