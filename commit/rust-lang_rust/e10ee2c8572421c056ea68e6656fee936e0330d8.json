{"sha": "e10ee2c8572421c056ea68e6656fee936e0330d8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxMGVlMmM4NTcyNDIxYzA1NmVhNjhlNjY1NmZlZTkzNmUwMzMwZDg=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-03-31T18:27:21Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-03-31T22:53:39Z"}, "message": "rollup merge of #23879: seanmonstar/del-from-error\n\nConflicts:\n\tsrc/libcore/error.rs", "tree": {"sha": "b66a0ecb48f039e3789837fd45d83d4461fb1035", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b66a0ecb48f039e3789837fd45d83d4461fb1035"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e10ee2c8572421c056ea68e6656fee936e0330d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e10ee2c8572421c056ea68e6656fee936e0330d8", "html_url": "https://github.com/rust-lang/rust/commit/e10ee2c8572421c056ea68e6656fee936e0330d8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e10ee2c8572421c056ea68e6656fee936e0330d8/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da04788efca6ec1e421139fb4916a5aacd49a2e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/da04788efca6ec1e421139fb4916a5aacd49a2e2", "html_url": "https://github.com/rust-lang/rust/commit/da04788efca6ec1e421139fb4916a5aacd49a2e2"}, {"sha": "e17f4fc1d4545f5c17b21805c5145b05495484ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/e17f4fc1d4545f5c17b21805c5145b05495484ee", "html_url": "https://github.com/rust-lang/rust/commit/e17f4fc1d4545f5c17b21805c5145b05495484ee"}], "stats": {"total": 104, "additions": 26, "deletions": 78}, "files": [{"sha": "f3c0dd0c3dc828c342a994768c4f9d255632f7a9", "filename": "src/liballoc/boxed.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Fliballoc%2Fboxed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Fliballoc%2Fboxed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fboxed.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -51,7 +51,7 @@ use core::prelude::*;\n use core::any::Any;\n use core::cmp::Ordering;\n use core::default::Default;\n-use core::error::{Error, FromError};\n+use core::error::Error;\n use core::fmt;\n use core::hash::{self, Hash};\n use core::mem;\n@@ -308,8 +308,8 @@ impl<I: DoubleEndedIterator + ?Sized> DoubleEndedIterator for Box<I> {\n impl<I: ExactSizeIterator + ?Sized> ExactSizeIterator for Box<I> {}\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<'a, E: Error + 'a> FromError<E> for Box<Error + 'a> {\n-    fn from_error(err: E) -> Box<Error + 'a> {\n+impl<'a, E: Error + 'a> From<E> for Box<Error + 'a> {\n+    fn from(err: E) -> Box<Error + 'a> {\n         Box::new(err)\n     }\n }"}, {"sha": "62ca8c47ab6a1cdd943c561afbb16f79a6009dcb", "filename": "src/libcore/convert.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Fconvert.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Fconvert.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fconvert.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -95,6 +95,13 @@ impl<'a, T: ?Sized, U: ?Sized> AsMut<U> for &'a mut T where T: AsMut<U> {\n //     }\n // }\n \n+// From itself is always itself\n+impl<T> From<T> for T {\n+    fn from(t: T) -> T {\n+        t\n+    }\n+}\n+\n // From implies Into\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<T, U> Into<U> for T where U: From<T> {"}, {"sha": "24035b7d9a83bdc8ff23a6c687ee58de29461a90", "filename": "src/libcore/error.rs", "status": "modified", "additions": 0, "deletions": 59, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ferror.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -33,49 +33,6 @@\n //! high-level module to provide its own errors that do not commit to any\n //! particular implementation, but also reveal some of its implementation for\n //! debugging via `cause` chains.\n-//!\n-//! # The `FromError` trait\n-//!\n-//! `FromError` is a simple trait that expresses conversions between different\n-//! error types. To provide maximum flexibility, it does not require either of\n-//! the types to actually implement the `Error` trait, although this will be the\n-//! common case.\n-//!\n-//! The main use of this trait is in the `try!` macro, which uses it to\n-//! automatically convert a given error to the error specified in a function's\n-//! return type.\n-//!\n-//! For example,\n-//!\n-//! ```\n-//! #![feature(core)]\n-//! use std::error::FromError;\n-//! use std::{io, str};\n-//! use std::fs::File;\n-//!\n-//! enum MyError {\n-//!     Io(io::Error),\n-//!     Utf8(str::Utf8Error),\n-//! }\n-//!\n-//! impl FromError<io::Error> for MyError {\n-//!     fn from_error(err: io::Error) -> MyError { MyError::Io(err) }\n-//! }\n-//!\n-//! impl FromError<str::Utf8Error> for MyError {\n-//!     fn from_error(err: str::Utf8Error) -> MyError { MyError::Utf8(err) }\n-//! }\n-//!\n-//! #[allow(unused_variables)]\n-//! fn open_and_map() -> Result<(), MyError> {\n-//!     let b = b\"foo.txt\";\n-//!     let s = try!(str::from_utf8(b));\n-//!     let f = try!(File::open(s));\n-//!\n-//!     // do something interesting here...\n-//!     Ok(())\n-//! }\n-//! ```\n \n #![stable(feature = \"rust1\", since = \"1.0.0\")]\n \n@@ -97,19 +54,3 @@ pub trait Error: Debug + Display {\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     fn cause(&self) -> Option<&Error> { None }\n }\n-\n-/// A trait for types that can be converted from a given error type `E`.\n-#[stable(feature = \"rust1\", since = \"1.0.0\")]\n-pub trait FromError<E> {\n-    /// Perform the conversion.\n-    #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-    fn from_error(err: E) -> Self;\n-}\n-\n-// Any type is convertable from itself\n-#[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<E> FromError<E> for E {\n-    fn from_error(err: E) -> E {\n-        err\n-    }\n-}"}, {"sha": "19626aa505620f7261f22d1d3c83a3d51792fc58", "filename": "src/libcore/macros.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibcore%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmacros.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -156,7 +156,7 @@ macro_rules! debug_assert_eq {\n \n /// Short circuiting evaluation on Err\n ///\n-/// `libstd` contains a more general `try!` macro that uses `FromError`.\n+/// `libstd` contains a more general `try!` macro that uses `From<E>`.\n #[macro_export]\n macro_rules! try {\n     ($e:expr) => ({"}, {"sha": "cdfe212bf23ddccd9c0b97cce4e73c0c97b545e2", "filename": "src/libserialize/json.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibserialize%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibserialize%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fjson.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -367,8 +367,8 @@ impl std::error::Error for EncoderError {\n     fn description(&self) -> &str { \"encoder error\" }\n }\n \n-impl std::error::FromError<fmt::Error> for EncoderError {\n-    fn from_error(err: fmt::Error) -> EncoderError { EncoderError::FmtError(err) }\n+impl From<fmt::Error> for EncoderError {\n+    fn from(err: fmt::Error) -> EncoderError { EncoderError::FmtError(err) }\n }\n \n pub type EncodeResult = Result<(), EncoderError>;"}, {"sha": "f5c7d1d18d5f705f7943a679cfbea4db12781f40", "filename": "src/libstd/ffi/c_str.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fffi%2Fc_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fffi%2Fc_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fffi%2Fc_str.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -12,7 +12,7 @@\n \n use convert::Into;\n use cmp::{PartialEq, Eq, PartialOrd, Ord, Ordering};\n-use error::{Error, FromError};\n+use error::Error;\n use fmt;\n use io;\n use iter::Iterator;\n@@ -298,17 +298,17 @@ impl fmt::Display for NulError {\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl FromError<NulError> for io::Error {\n-    fn from_error(_: NulError) -> io::Error {\n+impl From<NulError> for io::Error {\n+    fn from(_: NulError) -> io::Error {\n         io::Error::new(io::ErrorKind::InvalidInput,\n                        \"data provided contains a nul byte\", None)\n     }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[allow(deprecated)]\n-impl FromError<NulError> for old_io::IoError {\n-    fn from_error(_: NulError) -> old_io::IoError {\n+impl From<NulError> for old_io::IoError {\n+    fn from(_: NulError) -> old_io::IoError {\n         old_io::IoError {\n             kind: old_io::IoErrorKind::InvalidInput,\n             desc: \"data provided contains a nul byte\","}, {"sha": "628ad839c16530cf7ee29f1778ee3075b71e1572", "filename": "src/libstd/io/buffered.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fio%2Fbuffered.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fio%2Fbuffered.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fbuffered.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -16,7 +16,7 @@ use prelude::v1::*;\n use io::prelude::*;\n \n use cmp;\n-use error::{self, FromError};\n+use error;\n use fmt;\n use io::{self, DEFAULT_BUF_SIZE, Error, ErrorKind};\n use ptr;\n@@ -264,8 +264,8 @@ impl<W> IntoInnerError<W> {\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n-impl<W> FromError<IntoInnerError<W>> for Error {\n-    fn from_error(iie: IntoInnerError<W>) -> Error { iie.1 }\n+impl<W> From<IntoInnerError<W>> for Error {\n+    fn from(iie: IntoInnerError<W>) -> Error { iie.1 }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "b3d1adb44218a7e302037dd466640ece8a2039e0", "filename": "src/libstd/macros.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmacros.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -101,7 +101,7 @@ macro_rules! try {\n     ($expr:expr) => (match $expr {\n         $crate::result::Result::Ok(val) => val,\n         $crate::result::Result::Err(err) => {\n-            return $crate::result::Result::Err($crate::error::FromError::from_error(err))\n+            return $crate::result::Result::Err($crate::convert::From::from(err))\n         }\n     })\n }"}, {"sha": "4ae3ad29c7363c55e64d4ace2b3acaeed00cb504", "filename": "src/libstd/os.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fos.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -40,7 +40,7 @@ use boxed::Box;\n use clone::Clone;\n use convert::From;\n use env;\n-use error::{FromError, Error};\n+use error::Error;\n use ffi::{OsString, OsStr};\n use fmt;\n use iter::Iterator;"}, {"sha": "cea2def30f1bcf552fca73791439f1c7cda6c2c0", "filename": "src/libstd/sync/poison.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fsync%2Fpoison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e10ee2c8572421c056ea68e6656fee936e0330d8/src%2Flibstd%2Fsync%2Fpoison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fpoison.rs?ref=e10ee2c8572421c056ea68e6656fee936e0330d8", "patch": "@@ -11,7 +11,7 @@\n use prelude::v1::*;\n \n use cell::UnsafeCell;\n-use error::{Error, FromError};\n+use error::{Error};\n use fmt;\n use thread;\n \n@@ -144,8 +144,8 @@ impl<T> PoisonError<T> {\n     pub fn get_mut(&mut self) -> &mut T { &mut self.guard }\n }\n \n-impl<T> FromError<PoisonError<T>> for TryLockError<T> {\n-    fn from_error(err: PoisonError<T>) -> TryLockError<T> {\n+impl<T> From<PoisonError<T>> for TryLockError<T> {\n+    fn from(err: PoisonError<T>) -> TryLockError<T> {\n         TryLockError::Poisoned(err)\n     }\n }"}]}