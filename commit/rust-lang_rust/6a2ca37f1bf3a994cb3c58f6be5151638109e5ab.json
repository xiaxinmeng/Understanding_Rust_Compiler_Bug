{"sha": "6a2ca37f1bf3a994cb3c58f6be5151638109e5ab", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhMmNhMzdmMWJmM2E5OTRjYjNjNThmNmJlNTE1MTYzODEwOWU1YWI=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-08-18T22:00:17Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-09-06T11:27:23Z"}, "message": "add -Z always-build-mir option", "tree": {"sha": "bcd885c3761e93ea6d3dfbe257ff4281049dfc3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bcd885c3761e93ea6d3dfbe257ff4281049dfc3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab", "html_url": "https://github.com/rust-lang/rust/commit/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9bd35c07c2607b93bd889650f42aab4f9e4d5e58", "url": "https://api.github.com/repos/rust-lang/rust/commits/9bd35c07c2607b93bd889650f42aab4f9e4d5e58", "html_url": "https://github.com/rust-lang/rust/commit/9bd35c07c2607b93bd889650f42aab4f9e4d5e58"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "b56283e756723c965fd8c7ccfef15d7bc1755096", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a2ca37f1bf3a994cb3c58f6be5151638109e5ab/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=6a2ca37f1bf3a994cb3c58f6be5151638109e5ab", "patch": "@@ -104,6 +104,7 @@ pub struct Options {\n     pub parse_only: bool,\n     pub no_trans: bool,\n     pub treat_err_as_bug: bool,\n+    pub always_build_mir: bool,\n     pub no_analysis: bool,\n     pub debugging_opts: DebuggingOptions,\n     /// Whether to write dependency files. It's (enabled, optional filename).\n@@ -216,6 +217,7 @@ pub fn basic_options() -> Options {\n         parse_only: false,\n         no_trans: false,\n         treat_err_as_bug: false,\n+        always_build_mir: false,\n         no_analysis: false,\n         debugging_opts: basic_debugging_options(),\n         write_dependency_info: (false, None),\n@@ -583,6 +585,8 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n           \"Run all passes except translation; no output\"),\n     treat_err_as_bug: bool = (false, parse_bool,\n           \"Treat all errors that occur as bugs\"),\n+    always_build_mir: bool = (false, parse_bool,\n+          \"Always build MIR for all fns, even without a #[rustc_mir] annotation\"),\n     no_analysis: bool = (false, parse_bool,\n           \"Parse and expand the source, but run no analysis\"),\n     extra_plugins: Vec<String> = (Vec::new(), parse_list,\n@@ -894,6 +898,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n     let parse_only = debugging_opts.parse_only;\n     let no_trans = debugging_opts.no_trans;\n     let treat_err_as_bug = debugging_opts.treat_err_as_bug;\n+    let always_build_mir = debugging_opts.always_build_mir;\n     let no_analysis = debugging_opts.no_analysis;\n \n     if debugging_opts.debug_llvm {\n@@ -1049,6 +1054,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n         parse_only: parse_only,\n         no_trans: no_trans,\n         treat_err_as_bug: treat_err_as_bug,\n+        always_build_mir: always_build_mir,\n         no_analysis: no_analysis,\n         debugging_opts: debugging_opts,\n         write_dependency_info: write_dependency_info,"}]}