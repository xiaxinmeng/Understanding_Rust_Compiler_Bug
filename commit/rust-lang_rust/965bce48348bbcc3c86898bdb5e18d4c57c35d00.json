{"sha": "965bce48348bbcc3c86898bdb5e18d4c57c35d00", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2NWJjZTQ4MzQ4YmJjYzNjODY4OThiZGI1ZTE4ZDRjNTdjMzVkMDA=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-04-29T19:03:35Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-05-19T18:38:23Z"}, "message": "Add proc macro Literal parse test", "tree": {"sha": "68a9fcb861d8eff1f41c5c037616ec1fef42a2cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/68a9fcb861d8eff1f41c5c037616ec1fef42a2cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/965bce48348bbcc3c86898bdb5e18d4c57c35d00", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmClWx8ACgkQ+boUO5X/\nbYLrfg//VmdAay+TR5K71j1Usg8Sw+56EetsZcILegFsXY7V8Ytgh807XMzn4ZWq\nj/XuciAoP75T64b4VwolrtRLFrGkci8D+pF4UbNhYvNJds+RAqOSP2jVQIfgXTSz\nq+HNJJldfIU5YiPWvOOEvahEh4mlmV4ZlW7ge10yXUkPBTl1QZzYLcS1bjeSm/By\nzSXZJBCnwrfCTPuK/1DkbUq9UkT3qYrcUGcwToaLWMwG+CiFj0Z0l3tCITLQrlTx\nOLOPkDX58svf29mqnspy7J3IeEx2viBmMxNUjd+b9cxwZnpqFSnq4YXOalcvE3Cu\n/X/6DrUhkBrHo8kQ/h8cAU6RXPvjSBBhfFjoUz3kdojSRNoqN5oV4rLi1KL0dqKL\nVBgQYUTydgn+wKjdRPpILGuoYOCTMNgq1BdhDQ8/WLHYvJqNOGBsw4XF4qvRI/5U\nlLp4ZNx/53LszxJAbTh8KXV4muh5AUKLke6+60HW3RRQ1g+LFbclTdWjdv7oH6Ln\nIt2SMYjqDpUSwa9LO+JJZGV9nk23gvvJ5dNAx8Wb8d9Is1svplC584b+chpvdL0K\nPhYhR7sC568sJtRHN9mA1lbBS9+Nnqrs283ng80puK9y9vLOGWDB2Z51njTh9xpN\nw8Ys2HJdXTzPxGIE+E6FBIIrTU5aDZNzJGtuRgQa0F/gM8QyyPY=\n=KSVV\n-----END PGP SIGNATURE-----", "payload": "tree 68a9fcb861d8eff1f41c5c037616ec1fef42a2cb\nparent faad7e209deee6d09d335ca00c06d9f41bc040b5\nauthor David Tolnay <dtolnay@gmail.com> 1619723015 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1621449503 -0700\n\nAdd proc macro Literal parse test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/965bce48348bbcc3c86898bdb5e18d4c57c35d00", "html_url": "https://github.com/rust-lang/rust/commit/965bce48348bbcc3c86898bdb5e18d4c57c35d00", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/965bce48348bbcc3c86898bdb5e18d4c57c35d00/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "faad7e209deee6d09d335ca00c06d9f41bc040b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/faad7e209deee6d09d335ca00c06d9f41bc040b5", "html_url": "https://github.com/rust-lang/rust/commit/faad7e209deee6d09d335ca00c06d9f41bc040b5"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "739c25132e77b6561dad11deb64d17bf1f93c392", "filename": "src/test/ui/proc-macro/auxiliary/api/mod.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/965bce48348bbcc3c86898bdb5e18d4c57c35d00/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/965bce48348bbcc3c86898bdb5e18d4c57c35d00/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fmod.rs?ref=965bce48348bbcc3c86898bdb5e18d4c57c35d00", "patch": "@@ -9,12 +9,16 @@\n extern crate proc_macro;\n \n mod cmp;\n+mod parse;\n \n use proc_macro::TokenStream;\n \n #[proc_macro]\n pub fn run(input: TokenStream) -> TokenStream {\n     assert!(input.is_empty());\n+\n     cmp::test();\n+    parse::test();\n+\n     TokenStream::new()\n }"}, {"sha": "4105236b7f2d35c85ab5b697b765de7478f00d16", "filename": "src/test/ui/proc-macro/auxiliary/api/parse.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/965bce48348bbcc3c86898bdb5e18d4c57c35d00/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/965bce48348bbcc3c86898bdb5e18d4c57c35d00/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fapi%2Fparse.rs?ref=965bce48348bbcc3c86898bdb5e18d4c57c35d00", "patch": "@@ -0,0 +1,23 @@\n+use proc_macro::Literal;\n+\n+pub fn test() {\n+    test_parse_literal();\n+}\n+\n+fn test_parse_literal() {\n+    assert_eq!(\"1\".parse::<Literal>().unwrap().to_string(), \"1\");\n+    assert_eq!(\"1.0\".parse::<Literal>().unwrap().to_string(), \"1.0\");\n+    assert_eq!(\"'a'\".parse::<Literal>().unwrap().to_string(), \"'a'\");\n+    assert_eq!(\"\\\"\\n\\\"\".parse::<Literal>().unwrap().to_string(), \"\\\"\\n\\\"\");\n+    assert_eq!(\"b\\\"\\\"\".parse::<Literal>().unwrap().to_string(), \"b\\\"\\\"\");\n+    assert_eq!(\"r##\\\"\\\"##\".parse::<Literal>().unwrap().to_string(), \"r##\\\"\\\"##\");\n+    assert_eq!(\"10ulong\".parse::<Literal>().unwrap().to_string(), \"10ulong\");\n+\n+    assert!(\"0 1\".parse::<Literal>().is_err());\n+    assert!(\"'a\".parse::<Literal>().is_err());\n+    assert!(\" 0\".parse::<Literal>().is_err());\n+    assert!(\"0 \".parse::<Literal>().is_err());\n+    assert!(\"/* comment */0\".parse::<Literal>().is_err());\n+    assert!(\"0/* comment */\".parse::<Literal>().is_err());\n+    assert!(\"0// comment\".parse::<Literal>().is_err());\n+}"}]}