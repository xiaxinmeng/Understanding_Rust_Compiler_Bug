{"sha": "e9a98d925f8fa3a95e62034954d090e7d142022a", "node_id": "C_kwDOAAsO6NoAKGU5YTk4ZDkyNWY4ZmEzYTk1ZTYyMDM0OTU0ZDA5MGU3ZDE0MjAyMmE", "commit": {"author": {"name": "y21", "email": "30553356+y21@users.noreply.github.com", "date": "2023-05-21T13:07:53Z"}, "committer": {"name": "y21", "email": "30553356+y21@users.noreply.github.com", "date": "2023-05-21T13:07:53Z"}, "message": "add test case for #10741", "tree": {"sha": "1a823ad545488e7ee249fffeb88d656fe72cc956", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1a823ad545488e7ee249fffeb88d656fe72cc956"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e9a98d925f8fa3a95e62034954d090e7d142022a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e9a98d925f8fa3a95e62034954d090e7d142022a", "html_url": "https://github.com/rust-lang/rust/commit/e9a98d925f8fa3a95e62034954d090e7d142022a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e9a98d925f8fa3a95e62034954d090e7d142022a/comments", "author": {"login": "y21", "id": 30553356, "node_id": "MDQ6VXNlcjMwNTUzMzU2", "avatar_url": "https://avatars.githubusercontent.com/u/30553356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y21", "html_url": "https://github.com/y21", "followers_url": "https://api.github.com/users/y21/followers", "following_url": "https://api.github.com/users/y21/following{/other_user}", "gists_url": "https://api.github.com/users/y21/gists{/gist_id}", "starred_url": "https://api.github.com/users/y21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y21/subscriptions", "organizations_url": "https://api.github.com/users/y21/orgs", "repos_url": "https://api.github.com/users/y21/repos", "events_url": "https://api.github.com/users/y21/events{/privacy}", "received_events_url": "https://api.github.com/users/y21/received_events", "type": "User", "site_admin": false}, "committer": {"login": "y21", "id": 30553356, "node_id": "MDQ6VXNlcjMwNTUzMzU2", "avatar_url": "https://avatars.githubusercontent.com/u/30553356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y21", "html_url": "https://github.com/y21", "followers_url": "https://api.github.com/users/y21/followers", "following_url": "https://api.github.com/users/y21/following{/other_user}", "gists_url": "https://api.github.com/users/y21/gists{/gist_id}", "starred_url": "https://api.github.com/users/y21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y21/subscriptions", "organizations_url": "https://api.github.com/users/y21/orgs", "repos_url": "https://api.github.com/users/y21/repos", "events_url": "https://api.github.com/users/y21/events{/privacy}", "received_events_url": "https://api.github.com/users/y21/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "191a901a8d29d292aa20b1161e703f76a4690595", "url": "https://api.github.com/repos/rust-lang/rust/commits/191a901a8d29d292aa20b1161e703f76a4690595", "html_url": "https://github.com/rust-lang/rust/commit/191a901a8d29d292aa20b1161e703f76a4690595"}], "stats": {"total": 43, "additions": 36, "deletions": 7}, "files": [{"sha": "3e9d5e6a4ca320f00ab1fe26bdf07a2554a6031c", "filename": "tests/ui/large_stack_arrays.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e9a98d925f8fa3a95e62034954d090e7d142022a/tests%2Fui%2Flarge_stack_arrays.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e9a98d925f8fa3a95e62034954d090e7d142022a/tests%2Fui%2Flarge_stack_arrays.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flarge_stack_arrays.rs?ref=e9a98d925f8fa3a95e62034954d090e7d142022a", "patch": "@@ -18,6 +18,19 @@ pub static DOESNOTLINT2: [u8; 512_001] = {\n     [x; 512_001]\n };\n \n+fn issue_10741() {\n+    #[derive(Copy, Clone)]\n+    struct Large([u32; 100_000]);\n+\n+    fn build() -> Large {\n+        Large([0; 100_000])\n+    }\n+\n+    let _x = [build(); 3];\n+\n+    let _y = [build(), build(), build()];\n+}\n+\n fn main() {\n     let bad = (\n         [0u32; 20_000_000],"}, {"sha": "118d39566abee36e56fe7589847a2163e801e140", "filename": "tests/ui/large_stack_arrays.stderr", "status": "modified", "additions": 23, "deletions": 7, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/e9a98d925f8fa3a95e62034954d090e7d142022a/tests%2Fui%2Flarge_stack_arrays.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e9a98d925f8fa3a95e62034954d090e7d142022a/tests%2Fui%2Flarge_stack_arrays.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flarge_stack_arrays.stderr?ref=e9a98d925f8fa3a95e62034954d090e7d142022a", "patch": "@@ -1,43 +1,59 @@\n error: allocating a local array larger than 512000 bytes\n-  --> $DIR/large_stack_arrays.rs:23:9\n+  --> $DIR/large_stack_arrays.rs:29:14\n+   |\n+LL |     let _x = [build(); 3];\n+   |              ^^^^^^^^^^^^\n+   |\n+   = help: consider allocating on the heap with `vec![build(); 3].into_boxed_slice()`\n+   = note: `-D clippy::large-stack-arrays` implied by `-D warnings`\n+\n+error: allocating a local array larger than 512000 bytes\n+  --> $DIR/large_stack_arrays.rs:31:14\n+   |\n+LL |     let _y = [build(), build(), build()];\n+   |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = help: consider allocating on the heap with `vec![build(), build(), build()].into_boxed_slice()`\n+\n+error: allocating a local array larger than 512000 bytes\n+  --> $DIR/large_stack_arrays.rs:36:9\n    |\n LL |         [0u32; 20_000_000],\n    |         ^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider allocating on the heap with `vec![0u32; 20_000_000].into_boxed_slice()`\n-   = note: `-D clippy::large-stack-arrays` implied by `-D warnings`\n \n error: allocating a local array larger than 512000 bytes\n-  --> $DIR/large_stack_arrays.rs:24:9\n+  --> $DIR/large_stack_arrays.rs:37:9\n    |\n LL |         [S { data: [0; 32] }; 5000],\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider allocating on the heap with `vec![S { data: [0; 32] }; 5000].into_boxed_slice()`\n \n error: allocating a local array larger than 512000 bytes\n-  --> $DIR/large_stack_arrays.rs:25:9\n+  --> $DIR/large_stack_arrays.rs:38:9\n    |\n LL |         [Some(\"\"); 20_000_000],\n    |         ^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: consider allocating on the heap with `vec![Some(\"\"); 20_000_000].into_boxed_slice()`\n \n error: allocating a local array larger than 512000 bytes\n-  --> $DIR/large_stack_arrays.rs:26:9\n+  --> $DIR/large_stack_arrays.rs:39:9\n    |\n LL |         [E::T(0); 5000],\n    |         ^^^^^^^^^^^^^^^\n    |\n    = help: consider allocating on the heap with `vec![E::T(0); 5000].into_boxed_slice()`\n \n error: allocating a local array larger than 512000 bytes\n-  --> $DIR/large_stack_arrays.rs:27:9\n+  --> $DIR/large_stack_arrays.rs:40:9\n    |\n LL |         [0u8; usize::MAX],\n    |         ^^^^^^^^^^^^^^^^^\n    |\n    = help: consider allocating on the heap with `vec![0u8; usize::MAX].into_boxed_slice()`\n \n-error: aborting due to 5 previous errors\n+error: aborting due to 7 previous errors\n "}]}