{"sha": "a0de6346dec84ca663026e44ef102f4d229bfb38", "node_id": "C_kwDOAAsO6NoAKGEwZGU2MzQ2ZGVjODRjYTY2MzAyNmU0NGVmMTAyZjRkMjI5YmZiMzg", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2021-11-30T03:09:01Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2021-12-03T01:12:59Z"}, "message": "Move instrument coverage config getters to `Options`", "tree": {"sha": "ce631b987d04b4c964bf29f113ea8ecbe670c6ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ce631b987d04b4c964bf29f113ea8ecbe670c6ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a0de6346dec84ca663026e44ef102f4d229bfb38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a0de6346dec84ca663026e44ef102f4d229bfb38", "html_url": "https://github.com/rust-lang/rust/commit/a0de6346dec84ca663026e44ef102f4d229bfb38", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a0de6346dec84ca663026e44ef102f4d229bfb38/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "386b1c5f5760ae35610598969d16382e67160ff2", "url": "https://api.github.com/repos/rust-lang/rust/commits/386b1c5f5760ae35610598969d16382e67160ff2", "html_url": "https://github.com/rust-lang/rust/commit/386b1c5f5760ae35610598969d16382e67160ff2"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "20ef1afaab2be093a54218333adc03e62f21bc2a", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a0de6346dec84ca663026e44ef102f4d229bfb38/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a0de6346dec84ca663026e44ef102f4d229bfb38/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=a0de6346dec84ca663026e44ef102f4d229bfb38", "patch": "@@ -107,6 +107,21 @@ impl Options {\n             .mir_opt_level\n             .unwrap_or_else(|| if self.optimize != OptLevel::No { 2 } else { 1 })\n     }\n+\n+    pub fn instrument_coverage(&self) -> bool {\n+        self.debugging_opts.instrument_coverage.unwrap_or(InstrumentCoverage::Off)\n+            != InstrumentCoverage::Off\n+    }\n+\n+    pub fn instrument_coverage_except_unused_generics(&self) -> bool {\n+        self.debugging_opts.instrument_coverage.unwrap_or(InstrumentCoverage::Off)\n+            == InstrumentCoverage::ExceptUnusedGenerics\n+    }\n+\n+    pub fn instrument_coverage_except_unused_functions(&self) -> bool {\n+        self.debugging_opts.instrument_coverage.unwrap_or(InstrumentCoverage::Off)\n+            == InstrumentCoverage::ExceptUnusedFunctions\n+    }\n }\n \n top_level_options!("}, {"sha": "52a92de842f279523594414ef0d413aae34d4bf0", "filename": "compiler/rustc_session/src/session.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a0de6346dec84ca663026e44ef102f4d229bfb38/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a0de6346dec84ca663026e44ef102f4d229bfb38/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fsession.rs?ref=a0de6346dec84ca663026e44ef102f4d229bfb38", "patch": "@@ -1044,18 +1044,15 @@ impl Session {\n     }\n \n     pub fn instrument_coverage(&self) -> bool {\n-        self.opts.debugging_opts.instrument_coverage.unwrap_or(config::InstrumentCoverage::Off)\n-            != config::InstrumentCoverage::Off\n+        self.opts.instrument_coverage()\n     }\n \n     pub fn instrument_coverage_except_unused_generics(&self) -> bool {\n-        self.opts.debugging_opts.instrument_coverage.unwrap_or(config::InstrumentCoverage::Off)\n-            == config::InstrumentCoverage::ExceptUnusedGenerics\n+        self.opts.instrument_coverage_except_unused_generics()\n     }\n \n     pub fn instrument_coverage_except_unused_functions(&self) -> bool {\n-        self.opts.debugging_opts.instrument_coverage.unwrap_or(config::InstrumentCoverage::Off)\n-            == config::InstrumentCoverage::ExceptUnusedFunctions\n+        self.opts.instrument_coverage_except_unused_functions()\n     }\n \n     pub fn is_proc_macro_attr(&self, attr: &Attribute) -> bool {"}]}