{"sha": "d60214cdf7bea6955d5c3a0bb905022bdae1b232", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ2MDIxNGNkZjdiZWE2OTU1ZDVjM2EwYmI5MDUwMjJiZGFlMWIyMzI=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-01-14T03:29:52Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-02-01T14:43:56Z"}, "message": "Clippy fixes, rename stuff to match RFC", "tree": {"sha": "8efffd67d0c76416ecc92d24b4b7ccd97b62381b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8efffd67d0c76416ecc92d24b4b7ccd97b62381b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d60214cdf7bea6955d5c3a0bb905022bdae1b232", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAlxUWywACgkQtAh+UQ6Y\nsWRs1hAAqXk+iW7UOUlOMRCeQp+XLf+JU5/Z2JOCKkTCVE+tIeESUhEr96o82ohY\ntxSb+xKLT3TX3gTDK2Asw47D3CGyOAUzrq2yJXBPsDaejMC2Yc3I47MFHNs1TI76\n02N1EwdIFTAIxamob4OxiTMGVjlQYQIToLMwhT8g+ID2SQkt8gpmHa7mxNe/HNZh\ne2MPJDLZw+k4libt6dYA0guA5n8I8pDuSEmueJfSiujZvce+Vucjw2ei4yEYtRuz\nj4gvwYQhr4PsjPb5koSyhgB3Cw1AGOOUxN3IkW8ffyp3YnhVpDvvVOU0OdrtPqT7\nbzHXBhm8336zPUSL9bsaDf+ltpYPnyvMRFNEgiGqRIGpjBVCHzJMU22q9jnsbG+4\na8rdrIRvBJjEg4UGpVPYlh+T6ZepK019jV6H1LmROGGuIFVV2aSNSCLPNqPPgHHZ\nSdREBT+X2qi4bGLFTvu3i1Ff0rd8kb1+UFc3In1yn+zn+OzdJQvMJH3Umo+l7uTA\nhRMIJNmrfOU0isELg9fIYB1QzUmQQo9CZtKP3fgIvQwBTJOhcpkjmMarDrsa1Y+r\nEO5esFbKbgVDMuh0Z3E+ZpYrwad3Ryufz3VGF2WGsS6/YjB7g/ReIEtcZsTqOGoT\nrqIoGgW/kHOjP+c9/8X3uRNMTwJbH5zJUvWU7vkZkTOrXMBSDZw=\n=gh31\n-----END PGP SIGNATURE-----", "payload": "tree 8efffd67d0c76416ecc92d24b4b7ccd97b62381b\nparent 12f9b796ff9a551d540390647043f4bcd1728838\nauthor Aaron Hill <aa1ronham@gmail.com> 1547436592 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1549032236 -0500\n\nClippy fixes, rename stuff to match RFC\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d60214cdf7bea6955d5c3a0bb905022bdae1b232", "html_url": "https://github.com/rust-lang/rust/commit/d60214cdf7bea6955d5c3a0bb905022bdae1b232", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d60214cdf7bea6955d5c3a0bb905022bdae1b232/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12f9b796ff9a551d540390647043f4bcd1728838", "url": "https://api.github.com/repos/rust-lang/rust/commits/12f9b796ff9a551d540390647043f4bcd1728838", "html_url": "https://github.com/rust-lang/rust/commit/12f9b796ff9a551d540390647043f4bcd1728838"}], "stats": {"total": 45, "additions": 32, "deletions": 13}, "files": [{"sha": "473214a04c8ed27e396f65636c95422fb070e403", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -126,7 +126,7 @@ declare_lint! {\n }\n \n declare_lint! {\n-    pub LEAKED_PRIVATE_DEPENDENCY,\n+    pub EXTERNAL_PRIVATE_DEPENDENCY,\n     Warn,\n     \"public interface leaks type from a private dependency\"\n }\n@@ -411,7 +411,7 @@ impl LintPass for HardwiredLints {\n             TRIVIAL_CASTS,\n             TRIVIAL_NUMERIC_CASTS,\n             PRIVATE_IN_PUBLIC,\n-            LEAKED_PRIVATE_DEPENDENCY,\n+            EXTERNAL_PRIVATE_DEPENDENCY,\n             PUB_USE_OF_PRIVATE_EXTERN_CRATE,\n             INVALID_TYPE_PARAM_DEFAULT,\n             CONST_ERR,"}, {"sha": "635ac6dcc48f8e646c0605ded61733bc1117277c", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -1928,7 +1928,7 @@ pub fn build_session_options_and_crate_config(\n     let mut extern_public: FxHashSet<String> = matches.opt_strs(\"extern-public\").\n         iter().cloned().collect();\n \n-    // TODO - come up with a better way of handling this\n+    // FIXME - come up with a better way of handling this\n     extern_public.insert(\"core\".to_string());\n     extern_public.insert(\"std\".to_string());\n "}, {"sha": "46e784c4099c8c87b4383dfe3b10b8c71e40a2c9", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -1883,5 +1883,3 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for ExplicitOutlivesRequirements {\n     }\n \n }\n-\n-"}, {"sha": "66e6368e83da0a116e0e21cf94831c42f65dbe78", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -230,7 +230,7 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n             edition: None,\n         },\n         FutureIncompatibleInfo {\n-            id: LintId::of(LEAKED_PRIVATE_DEPENDENCY),\n+            id: LintId::of(EXTERNAL_PRIVATE_DEPENDENCY),\n             reference: \"issue #44663 <https://github.com/rust-lang/rust/issues/44663>\",\n             edition: None,\n         },"}, {"sha": "7b5b06257ce90caf8686977539a288bb96fb91d2", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -1496,7 +1496,7 @@ impl<'a, 'tcx: 'a> SearchInterfaceForPrivateItemsVisitor<'a, 'tcx> {\n \n     fn check_def_id(&mut self, def_id: DefId, kind: &str, descr: &dyn fmt::Display) -> bool {\n         if self.leaks_private_dep(def_id) {\n-            self.tcx.lint_node(lint::builtin::LEAKED_PRIVATE_DEPENDENCY,\n+            self.tcx.lint_node(lint::builtin::EXTERNAL_PRIVATE_DEPENDENCY,\n                                self.item_id,\n                                self.span,\n                                &format!(\"{} `{}` from private dependency '{}' in public \\"}, {"sha": "3ebafd953addfacc20162221d1900dd4b04235b0", "filename": "src/test/ui/feature-gates/auxiliary/pub_dep.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Ffeature-gates%2Fauxiliary%2Fpub_dep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Ffeature-gates%2Fauxiliary%2Fpub_dep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Fauxiliary%2Fpub_dep.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -0,0 +1 @@\n+pub struct PubType;"}, {"sha": "bd27c844fc620042ae902912fe8ccff9910e75ee", "filename": "src/test/ui/feature-gates/feature-gate-public_private_dependencies.rs", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-public_private_dependencies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-public_private_dependencies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-public_private_dependencies.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -0,0 +1,20 @@\n+// This test is different from other feature gate tests.\n+// Instead of checking that an error occurs without the feature gate,\n+// it checks that *no* errors/warnings occurs without the feature gate.\n+// This is due to the fact that 'public_private_dependencies' just enables\n+// a lint, so disabling it shouldn't cause any code to stop compiling.\n+\n+// run-pass\n+// aux-build:pub_dep.rs\n+\n+// Without ![feature(public_private_dependencies)],\n+// this should do nothing/\n+#![deny(external_private_dependency)]\n+\n+extern crate pub_dep;\n+\n+pub struct Foo {\n+    pub field: pub_dep::PubType\n+}\n+\n+fn main() {}"}, {"sha": "16a59dff8780ec44fb1b2dcbba9fec4ff5a952e4", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.rs?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -2,7 +2,7 @@\n  // aux-build:pub_dep.rs\n  // compile-flags: --extern-public=pub_dep\n #![feature(public_private_dependencies)]\n-#![deny(leaked_private_dependency)]\n+#![deny(external_private_dependency)]\n \n // This crate is a private dependency\n extern crate priv_dep;\n@@ -20,15 +20,15 @@ struct PrivateType {\n \n pub struct PublicType {\n     pub field: OtherType,\n-    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n     //~| WARNING this was previously accepted\n     priv_field: OtherType, // Private field - this is fine\n     pub other_field: PubType // Type from public dependency - this is fine\n }\n \n impl PublicType {\n     pub fn pub_fn(param: OtherType) {}\n-    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+    //~^ ERROR type `priv_dep::OtherType` from private dependency 'priv_dep' in public interface\n     //~| WARNING this was previously accepted\n \n     fn priv_fn(param: OtherType) {}\n@@ -37,7 +37,7 @@ impl PublicType {\n pub trait MyPubTrait {\n     type Foo: OtherTrait;\n }\n-//~^^^ ERROR trait `priv_dep::OtherTrait` from private dependency 'priv_dep' in public interface [leaked_private_dependency]\n+//~^^^ ERROR trait `priv_dep::OtherTrait` from private dependency 'priv_dep' in public interface\n //~| WARNING this was previously accepted\n \n "}, {"sha": "9e5bffa6eea3e24bfec543d28ffcdc470618d2ab", "filename": "src/test/ui/privacy/pub-priv-dep/pub-priv1.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d60214cdf7bea6955d5c3a0bb905022bdae1b232/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fprivacy%2Fpub-priv-dep%2Fpub-priv1.stderr?ref=d60214cdf7bea6955d5c3a0bb905022bdae1b232", "patch": "@@ -7,8 +7,8 @@ LL |     pub field: OtherType,\n note: lint level defined here\n   --> $DIR/pub-priv1.rs:5:9\n    |\n-LL | #![deny(leaked_private_dependency)]\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![deny(external_private_dependency)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in a future release!\n    = note: for more information, see issue #44663 <https://github.com/rust-lang/rust/issues/44663>\n "}]}