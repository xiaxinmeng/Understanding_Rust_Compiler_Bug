{"sha": "27db6882038b67d83b8aecf108b18dd350f7e7cc", "node_id": "C_kwDOAAsO6NoAKDI3ZGI2ODgyMDM4YjY3ZDgzYjhhZWNmMTA4YjE4ZGQzNTBmN2U3Y2M", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-02-26T15:26:59Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-02-26T19:58:36Z"}, "message": "Clean up JS files code a bit", "tree": {"sha": "6d3782c8b6eba6c6e03057e262be6613d4a1c718", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6d3782c8b6eba6c6e03057e262be6613d4a1c718"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27db6882038b67d83b8aecf108b18dd350f7e7cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27db6882038b67d83b8aecf108b18dd350f7e7cc", "html_url": "https://github.com/rust-lang/rust/commit/27db6882038b67d83b8aecf108b18dd350f7e7cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27db6882038b67d83b8aecf108b18dd350f7e7cc/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "26c98689f2060ec834dbe8b8e80b24b31ffd48f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/26c98689f2060ec834dbe8b8e80b24b31ffd48f2", "html_url": "https://github.com/rust-lang/rust/commit/26c98689f2060ec834dbe8b8e80b24b31ffd48f2"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "b3fc889431b38ed5fc4f791574697519551f2e81", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/27db6882038b67d83b8aecf108b18dd350f7e7cc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/27db6882038b67d83b8aecf108b18dd350f7e7cc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=27db6882038b67d83b8aecf108b18dd350f7e7cc", "patch": "@@ -463,11 +463,10 @@ function initSearch(rawSearchIndex) {\n      * @param {ParserState} parserState\n      */\n     function parseInput(query, parserState) {\n-        let c, before;\n         let foundStopChar = true;\n \n         while (parserState.pos < parserState.length) {\n-            c = parserState.userQuery[parserState.pos];\n+            const c = parserState.userQuery[parserState.pos];\n             if (isStopCharacter(c)) {\n                 foundStopChar = true;\n                 if (isSeparatorCharacter(c)) {\n@@ -506,7 +505,7 @@ function initSearch(rawSearchIndex) {\n                 }\n                 throw new Error(`Expected \\`,\\`, \\` \\`, \\`:\\` or \\`->\\`, found \\`${c}\\``);\n             }\n-            before = query.elems.length;\n+            const before = query.elems.length;\n             getNextElem(query, parserState, query.elems, false);\n             if (query.elems.length === before) {\n                 // Nothing was added, weird... Let's increase the position to not remain stuck.\n@@ -515,7 +514,6 @@ function initSearch(rawSearchIndex) {\n             foundStopChar = false;\n         }\n         while (parserState.pos < parserState.length) {\n-            c = parserState.userQuery[parserState.pos];\n             if (isReturnArrow(parserState)) {\n                 parserState.pos += 2;\n                 // Get returned elements.\n@@ -1940,7 +1938,6 @@ function initSearch(rawSearchIndex) {\n          */\n         const searchWords = [];\n         const charA = \"A\".charCodeAt(0);\n-        let i, word;\n         let currentIndex = 0;\n         let id = 0;\n \n@@ -2035,7 +2032,7 @@ function initSearch(rawSearchIndex) {\n             // convert `rawPaths` entries into object form\n             // generate normalizedPaths for function search mode\n             let len = paths.length;\n-            for (i = 0; i < len; ++i) {\n+            for (let i = 0; i < len; ++i) {\n                 lowercasePaths.push({ty: paths[i][0], name: paths[i][1].toLowerCase()});\n                 paths[i] = {ty: paths[i][0], name: paths[i][1]};\n             }\n@@ -2049,16 +2046,14 @@ function initSearch(rawSearchIndex) {\n             // faster analysis operations\n             len = itemTypes.length;\n             let lastPath = \"\";\n-            for (i = 0; i < len; ++i) {\n+            for (let i = 0; i < len; ++i) {\n+                let word = \"\";\n                 // This object should have exactly the same set of fields as the \"crateRow\"\n                 // object defined above.\n                 if (typeof itemNames[i] === \"string\") {\n                     word = itemNames[i].toLowerCase();\n-                    searchWords.push(word);\n-                } else {\n-                    word = \"\";\n-                    searchWords.push(\"\");\n                 }\n+                searchWords.push(word);\n                 const row = {\n                     crate: crate,\n                     ty: itemTypes.charCodeAt(i) - charA,"}, {"sha": "6c0f03b5bb07217267dfb0f8cd699c4145a12ef6", "filename": "src/librustdoc/html/static/js/source-script.js", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/27db6882038b67d83b8aecf108b18dd350f7e7cc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "raw_url": "https://github.com/rust-lang/rust/raw/27db6882038b67d83b8aecf108b18dd350f7e7cc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsource-script.js?ref=27db6882038b67d83b8aecf108b18dd350f7e7cc", "patch": "@@ -117,8 +117,7 @@ function createSourceSidebar() {\n     sidebar.appendChild(title);\n     Object.keys(sourcesIndex).forEach(key => {\n         sourcesIndex[key][NAME_OFFSET] = key;\n-        hasFoundFile = createDirEntry(sourcesIndex[key], sidebar, \"\",\n-            hasFoundFile);\n+        hasFoundFile = createDirEntry(sourcesIndex[key], sidebar, \"\", hasFoundFile);\n     });\n \n     container.appendChild(sidebar);"}]}