{"sha": "0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhZWNmM2M3NGI3ZmQwOTQ2MGY0NTNlN2U5NWFlOGNiNjVhOTI0NDA=", "commit": {"author": {"name": "CAD97", "email": "cad97@cad97.com", "date": "2020-06-30T16:42:09Z"}, "committer": {"name": "CAD97", "email": "cad97@cad97.com", "date": "2020-06-30T19:02:21Z"}, "message": "Fix invalid pointer deref in Weak::as_ptr", "tree": {"sha": "c146f4d906331b0eb5242866c1586376fe0ad647", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c146f4d906331b0eb5242866c1586376fe0ad647"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "html_url": "https://github.com/rust-lang/rust/commit/0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0aecf3c74b7fd09460f453e7e95ae8cb65a92440/comments", "author": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc3dc723da8daef495a170e02efb38093e05215e", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc3dc723da8daef495a170e02efb38093e05215e", "html_url": "https://github.com/rust-lang/rust/commit/fc3dc723da8daef495a170e02efb38093e05215e"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "ab64d5330874f12e4639e33aa56286e28083354e", "filename": "src/liballoc/rc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0aecf3c74b7fd09460f453e7e95ae8cb65a92440/src%2Fliballoc%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0aecf3c74b7fd09460f453e7e95ae8cb65a92440/src%2Fliballoc%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Frc.rs?ref=0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "patch": "@@ -1711,7 +1711,7 @@ impl<T> Weak<T> {\n         // because dangling weaks are only created for sized T. wrapping_offset\n         // is used so that we can use the same code path for dangling weak refs.\n         unsafe {\n-            let offset = data_offset(&raw const (*ptr).value);\n+            let offset = data_offset(fake_ptr);\n             set_data_ptr(fake_ptr, (ptr as *mut u8).wrapping_offset(offset))\n         }\n     }"}, {"sha": "e9af80d326f44f3a00f9f1cf28868601dae14eef", "filename": "src/liballoc/sync.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0aecf3c74b7fd09460f453e7e95ae8cb65a92440/src%2Fliballoc%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0aecf3c74b7fd09460f453e7e95ae8cb65a92440/src%2Fliballoc%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fsync.rs?ref=0aecf3c74b7fd09460f453e7e95ae8cb65a92440", "patch": "@@ -1479,7 +1479,7 @@ impl<T> Weak<T> {\n         // because dangling weaks are only created for sized T. wrapping_offset\n         // is used so that we can use the same code path for dangling weak refs.\n         unsafe {\n-            let offset = data_offset(&raw const (*ptr).data);\n+            let offset = data_offset(fake_ptr);\n             set_data_ptr(fake_ptr, (ptr as *mut u8).wrapping_offset(offset))\n         }\n     }"}]}