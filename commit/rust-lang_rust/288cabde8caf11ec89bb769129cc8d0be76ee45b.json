{"sha": "288cabde8caf11ec89bb769129cc8d0be76ee45b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4OGNhYmRlOGNhZjExZWM4OWJiNzY5MTI5Y2M4ZDBiZTc2ZWU0NWI=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-29T09:56:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-29T09:56:31Z"}, "message": "Rollup merge of #68609 - Zoxc:lld-msvc, r=alexcrichton\n\nSet lld flavor for MSVC to link.exe\n\nThis enables linking with LLD on Windows with just `-C linker=rust-lld` instead of needing `-C linker=rust-lld -C linker-flavor=lld-link`.", "tree": {"sha": "1f394f09276b758ef86f06d11513bebd5cd7e282", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f394f09276b758ef86f06d11513bebd5cd7e282"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/288cabde8caf11ec89bb769129cc8d0be76ee45b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeMVbPCRBK7hj4Ov3rIwAAdHIIAE6GygktzlKlm+JCdPvhtZL8\n9bjgMPWEmNKAoegnHpxcLeTCNocEJ0Aa/5GUbyGfi/FsV6jZi3F+KgbaQBibSZV0\nx6sUL/URsxCNAXuw3nQ8500vA2IdQudMUm+VEcvbA3D7Tf4w7EXJTq5va4dvcJ37\nQoUlsIu1iYM9Zw1dSMQPjI+hZL3yxkmHsUNn8vMjnNwdT5CoaWU6B887Twj99BbU\n5YVz24hxf58w5ejIOg4ybeB8xHorDQlJkrtcy3/TUbswCn7ZHOQX+guKIGfrEQ44\nBHAdm8tx0ggdnDh2Fxec/SoSK7D3HZu8IhZsrdeC4YlRSiPL1cZisXIAjx1VB1I=\n=Fp9R\n-----END PGP SIGNATURE-----\n", "payload": "tree 1f394f09276b758ef86f06d11513bebd5cd7e282\nparent 95e7342773e05c7d3e844336dd727bf65da9c046\nparent 9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1580291791 +0900\ncommitter GitHub <noreply@github.com> 1580291791 +0900\n\nRollup merge of #68609 - Zoxc:lld-msvc, r=alexcrichton\n\nSet lld flavor for MSVC to link.exe\n\nThis enables linking with LLD on Windows with just `-C linker=rust-lld` instead of needing `-C linker=rust-lld -C linker-flavor=lld-link`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/288cabde8caf11ec89bb769129cc8d0be76ee45b", "html_url": "https://github.com/rust-lang/rust/commit/288cabde8caf11ec89bb769129cc8d0be76ee45b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/288cabde8caf11ec89bb769129cc8d0be76ee45b/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95e7342773e05c7d3e844336dd727bf65da9c046", "url": "https://api.github.com/repos/rust-lang/rust/commits/95e7342773e05c7d3e844336dd727bf65da9c046", "html_url": "https://github.com/rust-lang/rust/commit/95e7342773e05c7d3e844336dd727bf65da9c046"}, {"sha": "9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8", "html_url": "https://github.com/rust-lang/rust/commit/9150b8ec297483a0b8ff0b8d7c2ef75362c2d5a8"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "52b166df93996c55d470ccc24a4b554be4f96266", "filename": "src/librustc_target/spec/windows_msvc_base.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/288cabde8caf11ec89bb769129cc8d0be76ee45b/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/288cabde8caf11ec89bb769129cc8d0be76ee45b/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs?ref=288cabde8caf11ec89bb769129cc8d0be76ee45b", "patch": "@@ -1,9 +1,11 @@\n-use crate::spec::{LinkArgs, LinkerFlavor, TargetOptions};\n+use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, TargetOptions};\n use std::default::Default;\n \n pub fn opts() -> TargetOptions {\n+    let pre_args = vec![\"/NOLOGO\".to_string(), \"/NXCOMPAT\".to_string()];\n     let mut args = LinkArgs::new();\n-    args.insert(LinkerFlavor::Msvc, vec![\"/NOLOGO\".to_string(), \"/NXCOMPAT\".to_string()]);\n+    args.insert(LinkerFlavor::Msvc, pre_args.clone());\n+    args.insert(LinkerFlavor::Lld(LldFlavor::Link), pre_args);\n \n     TargetOptions {\n         function_sections: true,\n@@ -21,6 +23,7 @@ pub fn opts() -> TargetOptions {\n         // language packs, and avoid generating Non-UTF-8 error\n         // messages if a link error occurred.\n         link_env: vec![(\"VSLANG\".to_string(), \"1033\".to_string())],\n+        lld_flavor: LldFlavor::Link,\n         pre_link_args: args,\n         crt_static_allows_dylibs: true,\n         crt_static_respected: true,"}]}