{"sha": "bee13d18af34ce6056a0b76fb7652cafda52cb69", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlZTEzZDE4YWYzNGNlNjA1NmEwYjc2ZmI3NjUyY2FmZGE1MmNiNjk=", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2021-08-26T10:57:42Z"}, "committer": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2021-08-26T10:57:42Z"}, "message": "add unsized coercion test", "tree": {"sha": "7da5d2ea1d0042962e45b1c81b9171f09f3e82a3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7da5d2ea1d0042962e45b1c81b9171f09f3e82a3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bee13d18af34ce6056a0b76fb7652cafda52cb69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bee13d18af34ce6056a0b76fb7652cafda52cb69", "html_url": "https://github.com/rust-lang/rust/commit/bee13d18af34ce6056a0b76fb7652cafda52cb69", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bee13d18af34ce6056a0b76fb7652cafda52cb69/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76e755cf4afc34af586948e7bc25d2f1c589a884", "url": "https://api.github.com/repos/rust-lang/rust/commits/76e755cf4afc34af586948e7bc25d2f1c589a884", "html_url": "https://github.com/rust-lang/rust/commit/76e755cf4afc34af586948e7bc25d2f1c589a884"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "cda94b306d333e477b9fdd8d46cedf25b93d0eb6", "filename": "src/test/ui/unsized/param-mentioned-by-different-field.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bee13d18af34ce6056a0b76fb7652cafda52cb69/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bee13d18af34ce6056a0b76fb7652cafda52cb69/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.rs?ref=bee13d18af34ce6056a0b76fb7652cafda52cb69", "patch": "@@ -0,0 +1,10 @@\n+// We must not allow this with our current setup as `T`\n+// is mentioned both in the tail of `Foo` and by another\n+// field.\n+struct Foo<T: ?Sized>(Box<T>, T);\n+\n+fn main() {\n+    let x: Foo<[u8; 1]> = Foo(Box::new([2]), [3]);\n+    let y: &Foo<[u8]> = &x; //~ ERROR mismatched types\n+    assert_eq!(y.0.len(), 1);\n+}"}, {"sha": "d18fa6456f3ee41d7a8ccc422f2a69e530b78b53", "filename": "src/test/ui/unsized/param-mentioned-by-different-field.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bee13d18af34ce6056a0b76fb7652cafda52cb69/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bee13d18af34ce6056a0b76fb7652cafda52cb69/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fparam-mentioned-by-different-field.stderr?ref=bee13d18af34ce6056a0b76fb7652cafda52cb69", "patch": "@@ -0,0 +1,14 @@\n+error[E0308]: mismatched types\n+  --> $DIR/param-mentioned-by-different-field.rs:8:25\n+   |\n+LL |     let y: &Foo<[u8]> = &x;\n+   |            ----------   ^^ expected slice `[u8]`, found array `[u8; 1]`\n+   |            |\n+   |            expected due to this\n+   |\n+   = note: expected reference `&Foo<[u8]>`\n+              found reference `&Foo<[u8; 1]>`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0308`."}]}