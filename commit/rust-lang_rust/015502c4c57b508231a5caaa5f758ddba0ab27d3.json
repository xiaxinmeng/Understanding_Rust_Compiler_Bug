{"sha": "015502c4c57b508231a5caaa5f758ddba0ab27d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAxNTUwMmM0YzU3YjUwODIzMWE1Y2FhYTVmNzU4ZGRiYTBhYjI3ZDM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-12-18T22:08:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-12-18T22:08:35Z"}, "message": "Rollup merge of #46802 - estebank:redefined-def-span, r=michaelwoerister\n\nPoint at def span on redefined name diagnostic", "tree": {"sha": "9fc65295f0925af78adaa77619652bb7b377cefb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9fc65295f0925af78adaa77619652bb7b377cefb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/015502c4c57b508231a5caaa5f758ddba0ab27d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/015502c4c57b508231a5caaa5f758ddba0ab27d3", "html_url": "https://github.com/rust-lang/rust/commit/015502c4c57b508231a5caaa5f758ddba0ab27d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/015502c4c57b508231a5caaa5f758ddba0ab27d3/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12cd45286ee37138b34a1ca312a623a890521306", "url": "https://api.github.com/repos/rust-lang/rust/commits/12cd45286ee37138b34a1ca312a623a890521306", "html_url": "https://github.com/rust-lang/rust/commit/12cd45286ee37138b34a1ca312a623a890521306"}, {"sha": "61181aeead9c4c83ff119320760ead6be2d98c2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/61181aeead9c4c83ff119320760ead6be2d98c2d", "html_url": "https://github.com/rust-lang/rust/commit/61181aeead9c4c83ff119320760ead6be2d98c2d"}], "stats": {"total": 55, "additions": 25, "deletions": 30}, "files": [{"sha": "864a61108b1d335f65e08acc980e6f936fdf72a0", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -3840,7 +3840,7 @@ impl<'a> Resolver<'a> {\n             false => \"defined\",\n         };\n \n-        let (name, span) = (ident.name, new_binding.span);\n+        let (name, span) = (ident.name, self.session.codemap().def_span(new_binding.span));\n \n         if let Some(s) = self.name_already_seen.get(&name) {\n             if s == &span {\n@@ -3885,8 +3885,8 @@ impl<'a> Resolver<'a> {\n \n         err.span_label(span, format!(\"`{}` re{} here\", name, new_participle));\n         if old_binding.span != syntax_pos::DUMMY_SP {\n-            err.span_label(old_binding.span, format!(\"previous {} of the {} `{}` here\",\n-                                                      old_noun, old_kind, name));\n+            err.span_label(self.session.codemap().def_span(old_binding.span),\n+                           format!(\"previous {} of the {} `{}` here\", old_noun, old_kind, name));\n         }\n \n         // See https://github.com/rust-lang/rust/issues/32354"}, {"sha": "855b3799eb5db106dc305b2d74a821a9cb091c3d", "filename": "src/test/ui/blind-item-item-shadow.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fblind-item-item-shadow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fblind-item-item-shadow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fblind-item-item-shadow.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -2,7 +2,7 @@ error[E0255]: the name `foo` is defined multiple times\n   --> $DIR/blind-item-item-shadow.rs:13:5\n    |\n 11 | mod foo { pub mod foo {  } }\n-   | ---------------------------- previous definition of the module `foo` here\n+   | ------- previous definition of the module `foo` here\n 12 | \n 13 | use foo::foo;\n    |     ^^^^^^^^ `foo` reimported here"}, {"sha": "ddbee0655e4cdcb74fe1b9aae83c16102bdb64fe", "filename": "src/test/ui/enum-and-module-in-same-scope.stderr", "status": "modified", "additions": 5, "deletions": 10, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fenum-and-module-in-same-scope.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fenum-and-module-in-same-scope.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fenum-and-module-in-same-scope.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -1,16 +1,11 @@\n error[E0428]: the name `Foo` is defined multiple times\n   --> $DIR/enum-and-module-in-same-scope.rs:15:1\n    |\n-11 | / enum Foo {\n-12 | |     X\n-13 | | }\n-   | |_- previous definition of the type `Foo` here\n-14 | \n-15 | / mod Foo { //~ ERROR the name `Foo` is defined multiple times\n-16 | |     pub static X: isize = 42;\n-17 | |     fn f() { f() } // Check that this does not result in a resolution error\n-18 | | }\n-   | |_^ `Foo` redefined here\n+11 | enum Foo {\n+   | -------- previous definition of the type `Foo` here\n+...\n+15 | mod Foo { //~ ERROR the name `Foo` is defined multiple times\n+   | ^^^^^^^ `Foo` redefined here\n    |\n    = note: `Foo` must be defined only once in the type namespace of this module\n "}, {"sha": "489abf715ded9a7c28c46ffe173172bcd3e4d4e1", "filename": "src/test/ui/issue-19498.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-19498.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-19498.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-19498.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -5,7 +5,7 @@ error[E0255]: the name `A` is defined multiple times\n    |     ------- previous import of the module `A` here\n 12 | use self::B;\n 13 | mod A {} //~ ERROR the name `A` is defined multiple times\n-   | ^^^^^^^^ `A` redefined here\n+   | ^^^^^ `A` redefined here\n    |\n    = note: `A` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import\n@@ -20,7 +20,7 @@ error[E0255]: the name `B` is defined multiple times\n    |     ------- previous import of the module `B` here\n ...\n 15 | pub mod B {} //~ ERROR the name `B` is defined multiple times\n-   | ^^^^^^^^^^^^ `B` redefined here\n+   | ^^^^^^^^^ `B` redefined here\n    |\n    = note: `B` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import\n@@ -34,7 +34,7 @@ error[E0255]: the name `D` is defined multiple times\n 18 |     use C::D;\n    |         ---- previous import of the module `D` here\n 19 |     mod D {} //~ ERROR the name `D` is defined multiple times\n-   |     ^^^^^^^^ `D` redefined here\n+   |     ^^^^^ `D` redefined here\n    |\n    = note: `D` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import"}, {"sha": "ec953103a1c5726743d8d59ac83a937418d10a7b", "filename": "src/test/ui/issue-21546.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-21546.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-21546.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-21546.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -2,7 +2,7 @@ error[E0428]: the name `Foo` is defined multiple times\n   --> $DIR/issue-21546.rs:17:1\n    |\n 14 | mod Foo { }\n-   | ----------- previous definition of the module `Foo` here\n+   | ------- previous definition of the module `Foo` here\n ...\n 17 | struct Foo;\n    | ^^^^^^^^^^^ `Foo` redefined here\n@@ -13,7 +13,7 @@ error[E0428]: the name `Bar` is defined multiple times\n   --> $DIR/issue-21546.rs:24:1\n    |\n 21 | mod Bar { }\n-   | ----------- previous definition of the module `Bar` here\n+   | ------- previous definition of the module `Bar` here\n ...\n 24 | struct Bar(i32);\n    | ^^^^^^^^^^^^^^^^ `Bar` redefined here\n@@ -27,18 +27,18 @@ error[E0428]: the name `Baz` is defined multiple times\n    | ---------------- previous definition of the type `Baz` here\n ...\n 32 | mod Baz { }\n-   | ^^^^^^^^^^^ `Baz` redefined here\n+   | ^^^^^^^ `Baz` redefined here\n    |\n    = note: `Baz` must be defined only once in the type namespace of this module\n \n error[E0428]: the name `Qux` is defined multiple times\n   --> $DIR/issue-21546.rs:40:1\n    |\n 37 | struct Qux { x: bool }\n-   | ---------------------- previous definition of the type `Qux` here\n+   | ---------- previous definition of the type `Qux` here\n ...\n 40 | mod Qux { }\n-   | ^^^^^^^^^^^ `Qux` redefined here\n+   | ^^^^^^^ `Qux` redefined here\n    |\n    = note: `Qux` must be defined only once in the type namespace of this module\n \n@@ -49,18 +49,18 @@ error[E0428]: the name `Quux` is defined multiple times\n    | ------------ previous definition of the type `Quux` here\n ...\n 48 | mod Quux { }\n-   | ^^^^^^^^^^^^ `Quux` redefined here\n+   | ^^^^^^^^ `Quux` redefined here\n    |\n    = note: `Quux` must be defined only once in the type namespace of this module\n \n error[E0428]: the name `Corge` is defined multiple times\n   --> $DIR/issue-21546.rs:56:1\n    |\n 53 | enum Corge { A, B }\n-   | ------------------- previous definition of the type `Corge` here\n+   | ---------- previous definition of the type `Corge` here\n ...\n 56 | mod Corge { }\n-   | ^^^^^^^^^^^^^ `Corge` redefined here\n+   | ^^^^^^^^^ `Corge` redefined here\n    |\n    = note: `Corge` must be defined only once in the type namespace of this module\n "}, {"sha": "969cf3577fbc28f28675b6021bac6f12f4cb3ae9", "filename": "src/test/ui/issue-24081.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-24081.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fissue-24081.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-24081.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -20,7 +20,7 @@ error[E0255]: the name `Sub` is defined multiple times\n    |     ------------- previous import of the trait `Sub` here\n ...\n 19 | struct Sub { x: f32 } //~ ERROR the name `Sub` is defined multiple times\n-   | ^^^^^^^^^^^^^^^^^^^^^ `Sub` redefined here\n+   | ^^^^^^^^^^ `Sub` redefined here\n    |\n    = note: `Sub` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import\n@@ -35,7 +35,7 @@ error[E0255]: the name `Mul` is defined multiple times\n    |     ------------- previous import of the trait `Mul` here\n ...\n 21 | enum Mul { A, B } //~ ERROR the name `Mul` is defined multiple times\n-   | ^^^^^^^^^^^^^^^^^ `Mul` redefined here\n+   | ^^^^^^^^ `Mul` redefined here\n    |\n    = note: `Mul` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import\n@@ -50,7 +50,7 @@ error[E0255]: the name `Div` is defined multiple times\n    |     ------------- previous import of the trait `Div` here\n ...\n 23 | mod Div { } //~ ERROR the name `Div` is defined multiple times\n-   | ^^^^^^^^^^^ `Div` redefined here\n+   | ^^^^^^^ `Div` redefined here\n    |\n    = note: `Div` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import\n@@ -65,7 +65,7 @@ error[E0255]: the name `Rem` is defined multiple times\n    |     ------------- previous import of the trait `Rem` here\n ...\n 25 | trait Rem {  } //~ ERROR the name `Rem` is defined multiple times\n-   | ^^^^^^^^^^^^^^ `Rem` redefined here\n+   | ^^^^^^^^^ `Rem` redefined here\n    |\n    = note: `Rem` must be defined only once in the type namespace of this module\n help: You can use `as` to change the binding name of the import"}, {"sha": "03ef66681e4404f35980d00429d34fccc3f241a5", "filename": "src/test/ui/resolve-conflict-item-vs-import.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fresolve-conflict-item-vs-import.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/015502c4c57b508231a5caaa5f758ddba0ab27d3/src%2Ftest%2Fui%2Fresolve-conflict-item-vs-import.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve-conflict-item-vs-import.stderr?ref=015502c4c57b508231a5caaa5f758ddba0ab27d3", "patch": "@@ -5,7 +5,7 @@ error[E0255]: the name `transmute` is defined multiple times\n    |     ------------------- previous import of the value `transmute` here\n 12 | \n 13 | fn transmute() {}\n-   | ^^^^^^^^^^^^^^^^^ `transmute` redefined here\n+   | ^^^^^^^^^^^^^^ `transmute` redefined here\n    |\n    = note: `transmute` must be defined only once in the value namespace of this module\n help: You can use `as` to change the binding name of the import"}]}