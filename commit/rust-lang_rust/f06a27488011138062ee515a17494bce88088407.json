{"sha": "f06a27488011138062ee515a17494bce88088407", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwNmEyNzQ4ODAxMTEzODA2MmVlNTE1YTE3NDk0YmNlODgwODg0MDc=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-07-25T07:11:53Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-08-02T21:04:11Z"}, "message": "bless all the things", "tree": {"sha": "8fb56ea5f8ece338b89ec0b60bd812d45dfdc066", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8fb56ea5f8ece338b89ec0b60bd812d45dfdc066"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f06a27488011138062ee515a17494bce88088407", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f06a27488011138062ee515a17494bce88088407", "html_url": "https://github.com/rust-lang/rust/commit/f06a27488011138062ee515a17494bce88088407", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f06a27488011138062ee515a17494bce88088407/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fa443ddee30bd2489d0368ee553c416ccc48a5b", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fa443ddee30bd2489d0368ee553c416ccc48a5b", "html_url": "https://github.com/rust-lang/rust/commit/5fa443ddee30bd2489d0368ee553c416ccc48a5b"}], "stats": {"total": 16, "additions": 7, "deletions": 9}, "files": [{"sha": "3d34ac42662703fcd4a81a41b469b46b774d6f0b", "filename": "src/test/ui/consts/const-eval/match-test-ptr-null.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fmatch-test-ptr-null.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fmatch-test-ptr-null.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fmatch-test-ptr-null.stderr?ref=f06a27488011138062ee515a17494bce88088407", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: casting pointers to integers in constants is unstable\n-  --> $DIR/match-test-ptr-null.rs:7:15\n+  --> $DIR/match-test-ptr-null.rs:6:15\n    |\n LL |         match &1 as *const i32 as usize {\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -8,19 +8,19 @@ LL |         match &1 as *const i32 as usize {\n    = help: add `#![feature(const_raw_ptr_to_usize_cast)]` to the crate attributes to enable\n \n error[E0019]: constant contains unimplemented expression type\n-  --> $DIR/match-test-ptr-null.rs:7:15\n+  --> $DIR/match-test-ptr-null.rs:6:15\n    |\n LL |         match &1 as *const i32 as usize {\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error[E0019]: constant contains unimplemented expression type\n-  --> $DIR/match-test-ptr-null.rs:11:13\n+  --> $DIR/match-test-ptr-null.rs:10:13\n    |\n LL |             0 => 42,\n    |             ^\n \n error[E0080]: evaluation of constant value failed\n-  --> $DIR/match-test-ptr-null.rs:7:15\n+  --> $DIR/match-test-ptr-null.rs:6:15\n    |\n LL |         match &1 as *const i32 as usize {\n    |               ^^^^^^^^^^^^^^^^^^^^^^^^^ \"pointer-to-integer cast\" needs an rfc before being allowed inside constants"}, {"sha": "d12b483ba44734543f64ebc7c036e09c3cb7fcdc", "filename": "src/test/ui/issues/issue-52023-array-size-pointer-cast.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.rs?ref=f06a27488011138062ee515a17494bce88088407", "patch": "@@ -1,4 +1,4 @@\n fn main() {\n     let _ = [0; (&0 as *const i32) as usize]; //~ ERROR casting pointers to integers in constants\n-    //~^ ERROR it is undefined behavior to use this value\n+    //~^ ERROR evaluation of constant value failed\n }"}, {"sha": "68ee53754161cf2c8bc2b211b0e4e93042d83d10", "filename": "src/test/ui/issues/issue-52023-array-size-pointer-cast.stderr", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f06a27488011138062ee515a17494bce88088407/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-52023-array-size-pointer-cast.stderr?ref=f06a27488011138062ee515a17494bce88088407", "patch": "@@ -7,13 +7,11 @@ LL |     let _ = [0; (&0 as *const i32) as usize];\n    = note: for more information, see https://github.com/rust-lang/rust/issues/51910\n    = help: add `#![feature(const_raw_ptr_to_usize_cast)]` to the crate attributes to enable\n \n-error[E0080]: it is undefined behavior to use this value\n+error[E0080]: evaluation of constant value failed\n   --> $DIR/issue-52023-array-size-pointer-cast.rs:2:17\n    |\n LL |     let _ = [0; (&0 as *const i32) as usize];\n-   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ type validation failed: encountered a pointer, but expected initialized plain (non-pointer) bytes\n-   |\n-   = note: The rules on what exactly is undefined behavior aren't clear, so this check might be overzealous. Please open an issue on the rust compiler repository if you believe it should not be considered undefined behavior\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^ \"pointer-to-integer cast\" needs an rfc before being allowed inside constants\n \n error: aborting due to 2 previous errors\n "}]}