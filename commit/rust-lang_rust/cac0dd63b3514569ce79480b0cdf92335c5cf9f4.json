{"sha": "cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhYzBkZDYzYjM1MTQ1NjljZTc5NDgwYjBjZGY5MjMzNWM1Y2Y5ZjQ=", "commit": {"author": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-14T12:03:00Z"}, "committer": {"name": "Christiaan Dirkx", "email": "christiaan@dirkx.email", "date": "2021-04-14T12:03:00Z"}, "message": "Update documentation", "tree": {"sha": "913d6ab98b2a76837ce979a6e232130269f8faf0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/913d6ab98b2a76837ce979a6e232130269f8faf0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "html_url": "https://github.com/rust-lang/rust/commit/cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/comments", "author": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CDirkx", "id": 11176562, "node_id": "MDQ6VXNlcjExMTc2NTYy", "avatar_url": "https://avatars.githubusercontent.com/u/11176562?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CDirkx", "html_url": "https://github.com/CDirkx", "followers_url": "https://api.github.com/users/CDirkx/followers", "following_url": "https://api.github.com/users/CDirkx/following{/other_user}", "gists_url": "https://api.github.com/users/CDirkx/gists{/gist_id}", "starred_url": "https://api.github.com/users/CDirkx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CDirkx/subscriptions", "organizations_url": "https://api.github.com/users/CDirkx/orgs", "repos_url": "https://api.github.com/users/CDirkx/repos", "events_url": "https://api.github.com/users/CDirkx/events{/privacy}", "received_events_url": "https://api.github.com/users/CDirkx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "905d23b65c07a1da4452f9a20b1891fc46533fb7", "url": "https://api.github.com/repos/rust-lang/rust/commits/905d23b65c07a1da4452f9a20b1891fc46533fb7", "html_url": "https://github.com/rust-lang/rust/commit/905d23b65c07a1da4452f9a20b1891fc46533fb7"}], "stats": {"total": 22, "additions": 17, "deletions": 5}, "files": [{"sha": "2a54e99020e38f1bd673e1a4d2c5106aaf7ba0a9", "filename": "library/std/src/sys/common/alloc.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Falloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Falloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Falloc.rs?ref=cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "patch": "@@ -1,5 +1,3 @@\n-#![allow(dead_code)]\n-\n use crate::alloc::{GlobalAlloc, Layout, System};\n use crate::cmp;\n use crate::ptr;"}, {"sha": "ff64d2aa8251533488276c6f98e82ee009f4dfd6", "filename": "library/std/src/sys/common/mod.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fcommon%2Fmod.rs?ref=cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "patch": "@@ -1 +1,13 @@\n+// This module contains code that is shared between all platforms, mostly utility or fallback code.\n+// This explicitly does not include code that is shared between only a few platforms,\n+// such as when reusing an implementation from `unix` or `unsupported`.\n+// In those cases the desired code should be included directly using the #[path] attribute,\n+// not moved to this module.\n+//\n+// Currently `sys_common` contains a lot of code that should live in this module,\n+// ideally `sys_common` would only contain platform-independent abstractions on top of `sys`.\n+// Progress on this is tracked in #84187.\n+\n+#![allow(dead_code)]\n+\n pub mod alloc;"}, {"sha": "23a3a0e907dcf7ebc5aef1c68b0b83e7e2516cec", "filename": "library/std/src/sys_common/mod.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys_common%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cac0dd63b3514569ce79480b0cdf92335c5cf9f4/library%2Fstd%2Fsrc%2Fsys_common%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys_common%2Fmod.rs?ref=cac0dd63b3514569ce79480b0cdf92335c5cf9f4", "patch": "@@ -8,9 +8,11 @@\n //! rest of `std` is complex, with dependencies going in all\n //! directions: `std` depending on `sys_common`, `sys_common`\n //! depending on `sys`, and `sys` depending on `sys_common` and `std`.\n-//! Ideally `sys_common` would be split into two and the dependencies\n-//! between them all would form a dag, facilitating the extraction of\n-//! `std::sys` from the standard library.\n+//! This is because `sys_common` not only contains platform-independent code,\n+//! but also code that is shared between the different platforms in `sys`.\n+//! Ideally all that shared code should be moved to `sys::common`,\n+//! and the dependencies between `std`, `sys_common` and `sys` all would form a dag.\n+//! Progress on this is tracked in #84187.\n \n #![allow(missing_docs)]\n #![allow(missing_debug_implementations)]"}]}