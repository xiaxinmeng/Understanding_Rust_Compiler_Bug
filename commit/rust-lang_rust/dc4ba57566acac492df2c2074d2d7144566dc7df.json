{"sha": "dc4ba57566acac492df2c2074d2d7144566dc7df", "node_id": "C_kwDOAAsO6NoAKGRjNGJhNTc1NjZhY2FjNDkyZGYyYzIwNzRkMmQ3MTQ0NTY2ZGM3ZGY", "commit": {"author": {"name": "Trevor Gross", "email": "tmgross@umich.edu", "date": "2022-12-12T05:42:45Z"}, "committer": {"name": "Trevor Gross", "email": "tgross@intrepidcs.com", "date": "2023-03-29T22:04:44Z"}, "message": "Stabilize a portion of 'once_cell'\n\nMove items not part of this stabilization to 'lazy_cell' or 'once_cell_try'", "tree": {"sha": "784550d8c54ac2ee205293e407dd0c3a6dc18101", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/784550d8c54ac2ee205293e407dd0c3a6dc18101"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dc4ba57566acac492df2c2074d2d7144566dc7df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dc4ba57566acac492df2c2074d2d7144566dc7df", "html_url": "https://github.com/rust-lang/rust/commit/dc4ba57566acac492df2c2074d2d7144566dc7df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dc4ba57566acac492df2c2074d2d7144566dc7df/comments", "author": {"login": "tgross35", "id": 13724985, "node_id": "MDQ6VXNlcjEzNzI0OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/13724985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgross35", "html_url": "https://github.com/tgross35", "followers_url": "https://api.github.com/users/tgross35/followers", "following_url": "https://api.github.com/users/tgross35/following{/other_user}", "gists_url": "https://api.github.com/users/tgross35/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgross35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgross35/subscriptions", "organizations_url": "https://api.github.com/users/tgross35/orgs", "repos_url": "https://api.github.com/users/tgross35/repos", "events_url": "https://api.github.com/users/tgross35/events{/privacy}", "received_events_url": "https://api.github.com/users/tgross35/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tgross35", "id": 13724985, "node_id": "MDQ6VXNlcjEzNzI0OTg1", "avatar_url": "https://avatars.githubusercontent.com/u/13724985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgross35", "html_url": "https://github.com/tgross35", "followers_url": "https://api.github.com/users/tgross35/followers", "following_url": "https://api.github.com/users/tgross35/following{/other_user}", "gists_url": "https://api.github.com/users/tgross35/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgross35/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgross35/subscriptions", "organizations_url": "https://api.github.com/users/tgross35/orgs", "repos_url": "https://api.github.com/users/tgross35/repos", "events_url": "https://api.github.com/users/tgross35/events{/privacy}", "received_events_url": "https://api.github.com/users/tgross35/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f98598c6cd34947efa9e3977338e9bce62d1997c", "url": "https://api.github.com/repos/rust-lang/rust/commits/f98598c6cd34947efa9e3977338e9bce62d1997c", "html_url": "https://github.com/rust-lang/rust/commit/f98598c6cd34947efa9e3977338e9bce62d1997c"}], "stats": {"total": 215, "additions": 87, "deletions": 128}, "files": [{"sha": "9bd7cff1f336c4cecc23038dbc34e3c3933c30d2", "filename": "compiler/rustc_borrowck/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_borrowck%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_borrowck%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_borrowck%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -5,7 +5,7 @@\n #![feature(let_chains)]\n #![feature(min_specialization)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(rustc_attrs)]\n #![feature(stmt_expr_attributes)]\n #![feature(trusted_step)]"}, {"sha": "3f77ea77effe31a35e283ca90350bc7361a68f2b", "filename": "compiler/rustc_codegen_llvm/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -10,7 +10,6 @@\n #![feature(iter_intersperse)]\n #![feature(let_chains)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![recursion_limit = \"256\"]\n #![allow(rustc::potential_query_instability)]\n #![deny(rustc::untranslatable_diagnostic)]"}, {"sha": "0ab12314b3c88c97526efe3316c77618f3157375", "filename": "compiler/rustc_codegen_ssa/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -5,7 +5,6 @@\n #![feature(int_roundings)]\n #![feature(let_chains)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![feature(strict_provenance)]\n #![feature(try_blocks)]\n #![recursion_limit = \"256\"]"}, {"sha": "9b52638e61249cbdd5076a23dadf27b26eec2e35", "filename": "compiler/rustc_data_structures/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_data_structures%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_data_structures%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_data_structures%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -20,7 +20,7 @@\n #![feature(never_type)]\n #![feature(type_alias_impl_trait)]\n #![feature(new_uninit)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(rustc_attrs)]\n #![feature(negative_impls)]\n #![feature(test)]"}, {"sha": "b96b356f55177ddeb5d48caa62be22ba5f26ab09", "filename": "compiler/rustc_driver_impl/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -6,7 +6,7 @@\n \n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/nightly-rustc/\")]\n #![feature(is_terminal)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(decl_macro)]\n #![recursion_limit = \"256\"]\n #![allow(rustc::potential_query_instability)]"}, {"sha": "6f319b96f2faf56d26b12a9d679dd82102c35ea9", "filename": "compiler/rustc_error_messages/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_messages%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,5 @@\n #![feature(let_chains)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(rustc_attrs)]\n #![feature(type_alias_impl_trait)]\n #![deny(rustc::untranslatable_diagnostic)]"}, {"sha": "3ce16e1566769d163a95b6fcfef68d0077ce2159", "filename": "compiler/rustc_feature/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_feature%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_feature%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -11,7 +11,7 @@\n //! even if it is stabilized or removed, *do not remove it*. Instead, move the\n //! symbol to the `accepted` or `removed` modules respectively.\n \n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![deny(rustc::untranslatable_diagnostic)]\n #![deny(rustc::diagnostic_outside_of_impl)]\n "}, {"sha": "2a9025d60aba7a47e87dc82a855f440a7ed47727", "filename": "compiler/rustc_hir_analysis/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_hir_analysis%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_hir_analysis%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -67,7 +67,7 @@ This API is completely unstable and subject to change.\n #![feature(let_chains)]\n #![feature(min_specialization)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(slice_partition_dedup)]\n #![feature(try_blocks)]\n #![feature(is_some_and)]"}, {"sha": "9664ba8bd8ac671e643a7265765fc4102eea0be6", "filename": "compiler/rustc_interface/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_interface%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_interface%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -2,7 +2,7 @@\n #![feature(decl_macro)]\n #![feature(internal_output_capture)]\n #![feature(thread_spawn_unchecked)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(try_blocks)]\n #![recursion_limit = \"256\"]\n #![allow(rustc::potential_query_instability)]"}, {"sha": "880da5ca5937609d324f03b4090e88846872eec6", "filename": "compiler/rustc_metadata/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_metadata%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_metadata%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -4,7 +4,6 @@\n #![feature(generators)]\n #![feature(iter_from_generator)]\n #![feature(let_chains)]\n-#![feature(once_cell)]\n #![feature(proc_macro_internals)]\n #![feature(macro_metavar_expr)]\n #![feature(min_specialization)]"}, {"sha": "0e883424fd47c90e72b79e5e764a2440df0590f2", "filename": "compiler/rustc_middle/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_middle%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_middle%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -39,7 +39,6 @@\n #![feature(never_type)]\n #![feature(extern_types)]\n #![feature(new_uninit)]\n-#![feature(once_cell)]\n #![feature(let_chains)]\n #![feature(min_specialization)]\n #![feature(trusted_len)]"}, {"sha": "3f9236c9dd94ca4826e160852e9d371d31253f66", "filename": "compiler/rustc_mir_build/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_build%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_build%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -8,7 +8,6 @@\n #![feature(if_let_guard)]\n #![feature(let_chains)]\n #![feature(min_specialization)]\n-#![feature(once_cell)]\n #![feature(try_blocks)]\n #![recursion_limit = \"256\"]\n "}, {"sha": "43caa2ea973923c858b918b75f9d6dcd10c33617", "filename": "compiler/rustc_mir_dataflow/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_dataflow%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_dataflow%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_dataflow%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -3,7 +3,6 @@\n #![feature(exact_size_is_empty)]\n #![feature(let_chains)]\n #![feature(min_specialization)]\n-#![feature(once_cell)]\n #![feature(stmt_expr_attributes)]\n #![feature(trusted_step)]\n #![recursion_limit = \"256\"]"}, {"sha": "6173b446b87c17f8e79cc9e5f810311849867a9a", "filename": "compiler/rustc_mir_transform/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -5,7 +5,6 @@\n #![feature(map_try_insert)]\n #![feature(min_specialization)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![feature(option_get_or_insert_default)]\n #![feature(trusted_step)]\n #![feature(try_blocks)]"}, {"sha": "021a67c9513cddc014bd9be00a12c4cb8e1b8289", "filename": "compiler/rustc_query_impl/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_query_impl%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_query_impl%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_impl%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -5,7 +5,6 @@\n #![feature(const_mut_refs)]\n #![feature(min_specialization)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![feature(rustc_attrs)]\n #![recursion_limit = \"256\"]\n #![allow(rustc::potential_query_instability)]"}, {"sha": "968728905e7e58d2140edcef1fe1d0241c784d89", "filename": "compiler/rustc_session/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_session%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/compiler%2Frustc_session%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -2,7 +2,7 @@\n #![feature(let_chains)]\n #![feature(min_specialization)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(option_get_or_insert_default)]\n #![feature(rustc_attrs)]\n #![feature(map_many_mut)]"}, {"sha": "6387279f4c1008db8fce7e824bfaca65159bb0ed", "filename": "library/alloc/tests/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Falloc%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Falloc%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Ftests%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -43,7 +43,6 @@\n #![feature(slice_flatten)]\n #![feature(thin_box)]\n #![feature(strict_provenance)]\n-#![feature(once_cell)]\n #![feature(drain_keep_rest)]\n #![deny(fuzzy_provenance_casts)]\n #![deny(unsafe_op_in_unsafe_fn)]"}, {"sha": "178927f638540aa70ce0bd13b8601b99b5acf17b", "filename": "library/core/src/cell.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fcell.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -202,9 +202,9 @@ use crate::ptr::{self, NonNull};\n mod lazy;\n mod once;\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n pub use lazy::LazyCell;\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n pub use once::OnceCell;\n \n /// A mutable memory location."}, {"sha": "64a6ce51b2eca5043aa7069863a5297b4ce284e6", "filename": "library/core/src/cell/lazy.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell%2Flazy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell%2Flazy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fcell%2Flazy.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -11,7 +11,7 @@ use crate::ops::Deref;\n /// # Examples\n ///\n /// ```\n-/// #![feature(once_cell)]\n+/// #![feature(lazy_cell)]\n ///\n /// use std::cell::LazyCell;\n ///\n@@ -29,7 +29,7 @@ use crate::ops::Deref;\n /// //   92\n /// //   92\n /// ```\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n pub struct LazyCell<T, F = fn() -> T> {\n     cell: OnceCell<T>,\n     init: Cell<Option<F>>,\n@@ -41,7 +41,7 @@ impl<T, F: FnOnce() -> T> LazyCell<T, F> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n+    /// #![feature(lazy_cell)]\n     ///\n     /// use std::cell::LazyCell;\n     ///\n@@ -52,7 +52,7 @@ impl<T, F: FnOnce() -> T> LazyCell<T, F> {\n     /// assert_eq!(&*lazy, \"HELLO, WORLD!\");\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n     pub const fn new(init: F) -> LazyCell<T, F> {\n         LazyCell { cell: OnceCell::new(), init: Cell::new(Some(init)) }\n     }\n@@ -65,7 +65,7 @@ impl<T, F: FnOnce() -> T> LazyCell<T, F> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n+    /// #![feature(lazy_cell)]\n     ///\n     /// use std::cell::LazyCell;\n     ///\n@@ -75,7 +75,7 @@ impl<T, F: FnOnce() -> T> LazyCell<T, F> {\n     /// assert_eq!(&*lazy, &92);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n     pub fn force(this: &LazyCell<T, F>) -> &T {\n         this.cell.get_or_init(|| match this.init.take() {\n             Some(f) => f(),\n@@ -84,7 +84,7 @@ impl<T, F: FnOnce() -> T> LazyCell<T, F> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T, F: FnOnce() -> T> Deref for LazyCell<T, F> {\n     type Target = T;\n     #[inline]\n@@ -93,7 +93,7 @@ impl<T, F: FnOnce() -> T> Deref for LazyCell<T, F> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: Default> Default for LazyCell<T> {\n     /// Creates a new lazy value using `Default` as the initializing function.\n     #[inline]\n@@ -102,7 +102,7 @@ impl<T: Default> Default for LazyCell<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: fmt::Debug, F> fmt::Debug for LazyCell<T, F> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         f.debug_struct(\"Lazy\").field(\"cell\", &self.cell).field(\"init\", &\"..\").finish()"}, {"sha": "c5bd7a5fa01add97fe99f39ad6a3b71a6980b6f2", "filename": "library/core/src/cell/once.rs", "status": "modified", "additions": 19, "deletions": 27, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell%2Fonce.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Fsrc%2Fcell%2Fonce.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fcell%2Fonce.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -16,8 +16,6 @@ use crate::mem;\n /// # Examples\n ///\n /// ```\n-/// #![feature(once_cell)]\n-///\n /// use std::cell::OnceCell;\n ///\n /// let cell = OnceCell::new();\n@@ -29,7 +27,7 @@ use crate::mem;\n /// assert_eq!(value, \"Hello, World!\");\n /// assert!(cell.get().is_some());\n /// ```\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n pub struct OnceCell<T> {\n     // Invariant: written to at most once.\n     inner: UnsafeCell<Option<T>>,\n@@ -39,7 +37,8 @@ impl<T> OnceCell<T> {\n     /// Creates a new empty cell.\n     #[inline]\n     #[must_use]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n+    #[rustc_const_stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub const fn new() -> OnceCell<T> {\n         OnceCell { inner: UnsafeCell::new(None) }\n     }\n@@ -48,7 +47,7 @@ impl<T> OnceCell<T> {\n     ///\n     /// Returns `None` if the cell is empty.\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get(&self) -> Option<&T> {\n         // SAFETY: Safe due to `inner`'s invariant\n         unsafe { &*self.inner.get() }.as_ref()\n@@ -58,7 +57,7 @@ impl<T> OnceCell<T> {\n     ///\n     /// Returns `None` if the cell is empty.\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get_mut(&mut self) -> Option<&mut T> {\n         self.inner.get_mut().as_mut()\n     }\n@@ -73,8 +72,6 @@ impl<T> OnceCell<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::cell::OnceCell;\n     ///\n     /// let cell = OnceCell::new();\n@@ -86,7 +83,7 @@ impl<T> OnceCell<T> {\n     /// assert!(cell.get().is_some());\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn set(&self, value: T) -> Result<(), T> {\n         // SAFETY: Safe because we cannot have overlapping mutable borrows\n         let slot = unsafe { &*self.inner.get() };\n@@ -117,8 +114,6 @@ impl<T> OnceCell<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::cell::OnceCell;\n     ///\n     /// let cell = OnceCell::new();\n@@ -128,7 +123,7 @@ impl<T> OnceCell<T> {\n     /// assert_eq!(value, &92);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get_or_init<F>(&self, f: F) -> &T\n     where\n         F: FnOnce() -> T,\n@@ -153,7 +148,7 @@ impl<T> OnceCell<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n+    /// #![feature(once_cell_try)]\n     ///\n     /// use std::cell::OnceCell;\n     ///\n@@ -166,7 +161,7 @@ impl<T> OnceCell<T> {\n     /// assert_eq!(value, Ok(&92));\n     /// assert_eq!(cell.get(), Some(&92))\n     /// ```\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"once_cell_try\", issue = \"109737\")]\n     pub fn get_or_try_init<F, E>(&self, f: F) -> Result<&T, E>\n     where\n         F: FnOnce() -> Result<T, E>,\n@@ -199,8 +194,6 @@ impl<T> OnceCell<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::cell::OnceCell;\n     ///\n     /// let cell: OnceCell<String> = OnceCell::new();\n@@ -211,7 +204,7 @@ impl<T> OnceCell<T> {\n     /// assert_eq!(cell.into_inner(), Some(\"hello\".to_string()));\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn into_inner(self) -> Option<T> {\n         // Because `into_inner` takes `self` by value, the compiler statically verifies\n         // that it is not currently borrowed. So it is safe to move out `Option<T>`.\n@@ -227,8 +220,6 @@ impl<T> OnceCell<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::cell::OnceCell;\n     ///\n     /// let mut cell: OnceCell<String> = OnceCell::new();\n@@ -240,21 +231,21 @@ impl<T> OnceCell<T> {\n     /// assert_eq!(cell.get(), None);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn take(&mut self) -> Option<T> {\n         mem::take(self).into_inner()\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T> Default for OnceCell<T> {\n     #[inline]\n     fn default() -> Self {\n         Self::new()\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: fmt::Debug> fmt::Debug for OnceCell<T> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         match self.get() {\n@@ -264,7 +255,7 @@ impl<T: fmt::Debug> fmt::Debug for OnceCell<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: Clone> Clone for OnceCell<T> {\n     #[inline]\n     fn clone(&self) -> OnceCell<T> {\n@@ -279,18 +270,19 @@ impl<T: Clone> Clone for OnceCell<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: PartialEq> PartialEq for OnceCell<T> {\n     #[inline]\n     fn eq(&self, other: &Self) -> bool {\n         self.get() == other.get()\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: Eq> Eq for OnceCell<T> {}\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n+#[rustc_const_unstable(feature = \"const_convert\", issue = \"88674\")]\n impl<T> const From<T> for OnceCell<T> {\n     /// Creates a new `OnceCell<T>` which already contains the given `value`.\n     #[inline]\n@@ -300,5 +292,5 @@ impl<T> const From<T> for OnceCell<T> {\n }\n \n // Just like for `Cell<T>` this isn't needed, but results in nicer error messages.\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T> !Sync for OnceCell<T> {}"}, {"sha": "344f0b61754e3ab92cba4ab88df8ab6c7f077314", "filename": "library/core/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -94,7 +94,7 @@\n #![feature(pointer_is_aligned)]\n #![feature(portable_simd)]\n #![feature(ptr_metadata)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(unsized_tuple_coercion)]\n #![feature(const_option)]\n #![feature(const_option_ext)]"}, {"sha": "8c118b95b0a75b99fd2cb02e2621cf97de9d71b2", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -339,7 +339,7 @@\n #![feature(edition_panic)]\n #![feature(format_args_nl)]\n #![feature(log_syntax)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(saturating_int_impl)]\n #![feature(stdsimd)]\n #![feature(test)]"}, {"sha": "8e9ea293ce4e9247fa4fb79cda88f206ddc8ca2a", "filename": "library/std/src/sync/lazy_lock.rs", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Flazy_lock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Flazy_lock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Flazy_lock.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -26,7 +26,7 @@ union Data<T, F> {\n /// # Examples\n ///\n /// ```\n-/// #![feature(once_cell)]\n+/// #![feature(lazy_cell)]\n ///\n /// use std::collections::HashMap;\n ///\n@@ -54,7 +54,7 @@ union Data<T, F> {\n ///     //   Some(\"Hoyten\")\n /// }\n /// ```\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n pub struct LazyLock<T, F = fn() -> T> {\n     once: Once,\n     data: UnsafeCell<Data<T, F>>,\n@@ -64,7 +64,7 @@ impl<T, F: FnOnce() -> T> LazyLock<T, F> {\n     /// Creates a new lazy value with the given initializing\n     /// function.\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n     pub const fn new(f: F) -> LazyLock<T, F> {\n         LazyLock { once: Once::new(), data: UnsafeCell::new(Data { f: ManuallyDrop::new(f) }) }\n     }\n@@ -76,7 +76,7 @@ impl<T, F: FnOnce() -> T> LazyLock<T, F> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n+    /// #![feature(lazy_cell)]\n     ///\n     /// use std::sync::LazyLock;\n     ///\n@@ -86,7 +86,7 @@ impl<T, F: FnOnce() -> T> LazyLock<T, F> {\n     /// assert_eq!(&*lazy, &92);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n     pub fn force(this: &LazyLock<T, F>) -> &T {\n         this.once.call_once(|| {\n             // SAFETY: `call_once` only runs this closure once, ever.\n@@ -122,7 +122,7 @@ impl<T, F> LazyLock<T, F> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T, F> Drop for LazyLock<T, F> {\n     fn drop(&mut self) {\n         match self.once.state() {\n@@ -135,7 +135,7 @@ impl<T, F> Drop for LazyLock<T, F> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T, F: FnOnce() -> T> Deref for LazyLock<T, F> {\n     type Target = T;\n \n@@ -145,7 +145,7 @@ impl<T, F: FnOnce() -> T> Deref for LazyLock<T, F> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: Default> Default for LazyLock<T> {\n     /// Creates a new lazy value using `Default` as the initializing function.\n     #[inline]\n@@ -154,7 +154,7 @@ impl<T: Default> Default for LazyLock<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: fmt::Debug, F> fmt::Debug for LazyLock<T, F> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         match self.get() {\n@@ -166,13 +166,13 @@ impl<T: fmt::Debug, F> fmt::Debug for LazyLock<T, F> {\n \n // We never create a `&F` from a `&LazyLock<T, F>` so it is fine\n // to not impl `Sync` for `F`\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n unsafe impl<T: Sync + Send, F: Send> Sync for LazyLock<T, F> {}\n // auto-derived `Send` impl is OK.\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: RefUnwindSafe + UnwindSafe, F: UnwindSafe> RefUnwindSafe for LazyLock<T, F> {}\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n impl<T: UnwindSafe, F: UnwindSafe> UnwindSafe for LazyLock<T, F> {}\n \n #[cfg(test)]"}, {"sha": "5dd585b9b3787d86d73e4f5f74356411cb4e2b1d", "filename": "library/std/src/sync/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fmod.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -172,9 +172,9 @@ pub use self::poison::{LockResult, PoisonError, TryLockError, TryLockResult};\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub use self::rwlock::{RwLock, RwLockReadGuard, RwLockWriteGuard};\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[unstable(feature = \"lazy_cell\", issue = \"109736\")]\n pub use self::lazy_lock::LazyLock;\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n pub use self::once_lock::OnceLock;\n \n pub(crate) use self::remutex::{ReentrantMutex, ReentrantMutexGuard};"}, {"sha": "8c34375ea07123b6647e45c1ec3818d1eaa9fe01", "filename": "library/std/src/sync/once_lock.rs", "status": "modified", "additions": 22, "deletions": 37, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Fonce_lock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/library%2Fstd%2Fsrc%2Fsync%2Fonce_lock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fonce_lock.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -14,8 +14,6 @@ use crate::sync::Once;\n /// # Examples\n ///\n /// ```\n-/// #![feature(once_cell)]\n-///\n /// use std::sync::OnceLock;\n ///\n /// static CELL: OnceLock<String> = OnceLock::new();\n@@ -32,16 +30,14 @@ use crate::sync::Once;\n /// assert!(value.is_some());\n /// assert_eq!(value.unwrap().as_str(), \"Hello, World!\");\n /// ```\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n pub struct OnceLock<T> {\n     once: Once,\n     // Whether or not the value is initialized is tracked by `once.is_completed()`.\n     value: UnsafeCell<MaybeUninit<T>>,\n     /// `PhantomData` to make sure dropck understands we're dropping T in our Drop impl.\n     ///\n     /// ```compile_fail,E0597\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// struct A<'a>(&'a str);\n@@ -63,7 +59,8 @@ impl<T> OnceLock<T> {\n     /// Creates a new empty cell.\n     #[inline]\n     #[must_use]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n+    #[rustc_const_stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub const fn new() -> OnceLock<T> {\n         OnceLock {\n             once: Once::new(),\n@@ -77,7 +74,7 @@ impl<T> OnceLock<T> {\n     /// Returns `None` if the cell is empty, or being initialized. This\n     /// method never blocks.\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get(&self) -> Option<&T> {\n         if self.is_initialized() {\n             // Safe b/c checked is_initialized\n@@ -91,7 +88,7 @@ impl<T> OnceLock<T> {\n     ///\n     /// Returns `None` if the cell is empty. This method never blocks.\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get_mut(&mut self) -> Option<&mut T> {\n         if self.is_initialized() {\n             // Safe b/c checked is_initialized and we have a unique access\n@@ -111,8 +108,6 @@ impl<T> OnceLock<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// static CELL: OnceLock<i32> = OnceLock::new();\n@@ -129,7 +124,7 @@ impl<T> OnceLock<T> {\n     /// }\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn set(&self, value: T) -> Result<(), T> {\n         let mut value = Some(value);\n         self.get_or_init(|| value.take().unwrap());\n@@ -158,8 +153,6 @@ impl<T> OnceLock<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// let cell = OnceLock::new();\n@@ -169,7 +162,7 @@ impl<T> OnceLock<T> {\n     /// assert_eq!(value, &92);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn get_or_init<F>(&self, f: F) -> &T\n     where\n         F: FnOnce() -> T,\n@@ -195,7 +188,7 @@ impl<T> OnceLock<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n+    /// #![feature(once_cell_try)]\n     ///\n     /// use std::sync::OnceLock;\n     ///\n@@ -209,7 +202,7 @@ impl<T> OnceLock<T> {\n     /// assert_eq!(cell.get(), Some(&92))\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[unstable(feature = \"once_cell_try\", issue = \"109737\")]\n     pub fn get_or_try_init<F, E>(&self, f: F) -> Result<&T, E>\n     where\n         F: FnOnce() -> Result<T, E>,\n@@ -236,8 +229,6 @@ impl<T> OnceLock<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// let cell: OnceLock<String> = OnceLock::new();\n@@ -248,7 +239,7 @@ impl<T> OnceLock<T> {\n     /// assert_eq!(cell.into_inner(), Some(\"hello\".to_string()));\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn into_inner(mut self) -> Option<T> {\n         self.take()\n     }\n@@ -262,8 +253,6 @@ impl<T> OnceLock<T> {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// let mut cell: OnceLock<String> = OnceLock::new();\n@@ -275,7 +264,7 @@ impl<T> OnceLock<T> {\n     /// assert_eq!(cell.get(), None);\n     /// ```\n     #[inline]\n-    #[unstable(feature = \"once_cell\", issue = \"74465\")]\n+    #[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n     pub fn take(&mut self) -> Option<T> {\n         if self.is_initialized() {\n             self.once = Once::new();\n@@ -344,26 +333,24 @@ impl<T> OnceLock<T> {\n // scoped thread B, which fills the cell, which is\n // then destroyed by A. That is, destructor observes\n // a sent value.\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n unsafe impl<T: Sync + Send> Sync for OnceLock<T> {}\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n unsafe impl<T: Send> Send for OnceLock<T> {}\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: RefUnwindSafe + UnwindSafe> RefUnwindSafe for OnceLock<T> {}\n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: UnwindSafe> UnwindSafe for OnceLock<T> {}\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n #[rustc_const_unstable(feature = \"const_default_impls\", issue = \"87864\")]\n impl<T> const Default for OnceLock<T> {\n     /// Creates a new empty cell.\n     ///\n     /// # Example\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// fn main() {\n@@ -376,7 +363,7 @@ impl<T> const Default for OnceLock<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: fmt::Debug> fmt::Debug for OnceLock<T> {\n     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         match self.get() {\n@@ -386,7 +373,7 @@ impl<T: fmt::Debug> fmt::Debug for OnceLock<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: Clone> Clone for OnceLock<T> {\n     #[inline]\n     fn clone(&self) -> OnceLock<T> {\n@@ -401,15 +388,13 @@ impl<T: Clone> Clone for OnceLock<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T> From<T> for OnceLock<T> {\n     /// Create a new cell with its contents set to `value`.\n     ///\n     /// # Example\n     ///\n     /// ```\n-    /// #![feature(once_cell)]\n-    ///\n     /// use std::sync::OnceLock;\n     ///\n     /// # fn main() -> Result<(), i32> {\n@@ -430,18 +415,18 @@ impl<T> From<T> for OnceLock<T> {\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: PartialEq> PartialEq for OnceLock<T> {\n     #[inline]\n     fn eq(&self, other: &OnceLock<T>) -> bool {\n         self.get() == other.get()\n     }\n }\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n impl<T: Eq> Eq for OnceLock<T> {}\n \n-#[unstable(feature = \"once_cell\", issue = \"74465\")]\n+#[stable(feature = \"once_cell\", since = \"CURRENT_RUSTC_VERSION\")]\n unsafe impl<#[may_dangle] T> Drop for OnceLock<T> {\n     #[inline]\n     fn drop(&mut self) {"}, {"sha": "4c4dbc9864fd99c1f80643c1c70914b20ee1ec54", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -11,7 +11,7 @@\n #![feature(let_chains)]\n #![feature(test)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(type_ascription)]\n #![feature(iter_intersperse)]\n #![feature(type_alias_impl_trait)]"}, {"sha": "8871873c6612f5e27ce1100b7dc6a17b182775ad", "filename": "src/tools/clippy/clippy_dev/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_dev%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_dev%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_dev%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,4 @@\n #![feature(let_chains)]\n-#![feature(once_cell)]\n #![feature(rustc_private)]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]\n // warn on lints, that are included in `rust-lang/rust`s bootstrap"}, {"sha": "3da7f95c1b9fe3c98103a64198a95d075e5a86b6", "filename": "src/tools/clippy/clippy_lints/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_lints%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -7,7 +7,6 @@\n #![feature(let_chains)]\n #![feature(lint_reasons)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![feature(rustc_private)]\n #![feature(stmt_expr_attributes)]\n #![recursion_limit = \"512\"]"}, {"sha": "619aa9f4bf6fab48be3119b28ff5a269b74cab53", "filename": "src/tools/clippy/clippy_utils/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fclippy_utils%2Fsrc%2Flib.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -3,7 +3,6 @@\n #![feature(let_chains)]\n #![feature(lint_reasons)]\n #![feature(never_type)]\n-#![feature(once_cell)]\n #![feature(rustc_private)]\n #![recursion_limit = \"512\"]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]"}, {"sha": "9e0822404b6b8ed227c628d75609ee48418a825e", "filename": "src/tools/clippy/src/driver.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fsrc%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Fsrc%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Fsrc%2Fdriver.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,6 +1,6 @@\n #![feature(rustc_private)]\n #![feature(let_chains)]\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(lint_reasons)]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]\n // warn on lints, that are included in `rust-lang/rust`s bootstrap"}, {"sha": "57890ff31737b5a95256b48f448a60774f0f3bc3", "filename": "src/tools/clippy/tests/compile-test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,5 @@\n #![feature(test)] // compiletest_rs requires this attribute\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![feature(is_sorted)]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]\n #![warn(rust_2018_idioms, unused_lifetimes)]"}, {"sha": "68a878e9a3d310058cc9fd8f473b470ed09eca6c", "filename": "src/tools/clippy/tests/dogfood.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fdogfood.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fdogfood.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fdogfood.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -3,7 +3,7 @@\n //!\n //! See [Eating your own dog food](https://en.wikipedia.org/wiki/Eating_your_own_dog_food) for context\n \n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]\n #![warn(rust_2018_idioms, unused_lifetimes)]\n "}, {"sha": "8feea800fdbe30b7d52d2173c9dcf6c9614b3ea7", "filename": "src/tools/clippy/tests/lint_message_convention.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Flint_message_convention.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Flint_message_convention.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Flint_message_convention.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,4 +1,4 @@\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n #![cfg_attr(feature = \"deny-warnings\", deny(warnings))]\n #![warn(rust_2018_idioms, unused_lifetimes)]\n "}, {"sha": "c9cbc50546cf3949aa0cb82ae9fd57f9fd020ac8", "filename": "src/tools/clippy/tests/workspace.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fworkspace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/src%2Ftools%2Fclippy%2Ftests%2Fworkspace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fworkspace.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,4 +1,4 @@\n-#![feature(once_cell)]\n+#![feature(lazy_cell)]\n \n use std::path::PathBuf;\n use std::process::Command;"}, {"sha": "88e8a498ae995f5e0c5ddfd4366e2dd07cefc51a", "filename": "tests/run-make/libtest-thread-limit/test.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Frun-make%2Flibtest-thread-limit%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Frun-make%2Flibtest-thread-limit%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Flibtest-thread-limit%2Ftest.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,3 @@\n-#![feature(once_cell)]\n-\n use std::{\n     io::ErrorKind,\n     sync::OnceLock,"}, {"sha": "0b423b340226d8258819b2ea82233254c554aebb", "filename": "tests/ui/rfc-2632-const-trait-impl/nested-closure.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Frfc-2632-const-trait-impl%2Fnested-closure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Frfc-2632-const-trait-impl%2Fnested-closure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frfc-2632-const-trait-impl%2Fnested-closure.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,6 +1,6 @@\n // check-pass\n \n-#![feature(const_trait_impl, once_cell)]\n+#![feature(const_trait_impl, lazy_cell)]\n \n use std::sync::LazyLock;\n "}, {"sha": "14f40ad87a3abebac6a9397f87a114b6c1130ddc", "filename": "tests/ui/sync/suggest-once-cell.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-once-cell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-once-cell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsync%2Fsuggest-once-cell.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,3 @@\n-#![feature(once_cell)]\n-\n fn require_sync<T: Sync>() {}\n //~^ NOTE required by this bound in `require_sync`\n //~| NOTE required by a bound in `require_sync`"}, {"sha": "20242f4b61c718727eae10cb7eb03b0fa95178ca", "filename": "tests/ui/sync/suggest-once-cell.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-once-cell.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-once-cell.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsync%2Fsuggest-once-cell.stderr?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,13 +1,13 @@\n error[E0277]: `OnceCell<()>` cannot be shared between threads safely\n-  --> $DIR/suggest-once-cell.rs:8:20\n+  --> $DIR/suggest-once-cell.rs:6:20\n    |\n LL |     require_sync::<std::cell::OnceCell<()>>();\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^ `OnceCell<()>` cannot be shared between threads safely\n    |\n    = help: the trait `Sync` is not implemented for `OnceCell<()>`\n    = note: if you want to do aliasing and mutation between multiple threads, use `std::sync::OnceLock` instead\n note: required by a bound in `require_sync`\n-  --> $DIR/suggest-once-cell.rs:3:20\n+  --> $DIR/suggest-once-cell.rs:1:20\n    |\n LL | fn require_sync<T: Sync>() {}\n    |                    ^^^^ required by this bound in `require_sync`"}, {"sha": "093a4999c6501e89401498967d53f9f95dc9c6e2", "filename": "tests/ui/sync/suggest-ref-cell.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-ref-cell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-ref-cell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsync%2Fsuggest-ref-cell.rs?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,5 +1,3 @@\n-#![feature(once_cell)]\n-\n fn require_sync<T: Sync>() {}\n //~^ NOTE required by this bound in `require_sync`\n //~| NOTE required by a bound in `require_sync`"}, {"sha": "ca3ae77b1a052f5abe1f0553b4a2847846b9632a", "filename": "tests/ui/sync/suggest-ref-cell.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-ref-cell.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dc4ba57566acac492df2c2074d2d7144566dc7df/tests%2Fui%2Fsync%2Fsuggest-ref-cell.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsync%2Fsuggest-ref-cell.stderr?ref=dc4ba57566acac492df2c2074d2d7144566dc7df", "patch": "@@ -1,13 +1,13 @@\n error[E0277]: `RefCell<()>` cannot be shared between threads safely\n-  --> $DIR/suggest-ref-cell.rs:8:20\n+  --> $DIR/suggest-ref-cell.rs:6:20\n    |\n LL |     require_sync::<std::cell::RefCell<()>>();\n    |                    ^^^^^^^^^^^^^^^^^^^^^^ `RefCell<()>` cannot be shared between threads safely\n    |\n    = help: the trait `Sync` is not implemented for `RefCell<()>`\n    = note: if you want to do aliasing and mutation between multiple threads, use `std::sync::RwLock` instead\n note: required by a bound in `require_sync`\n-  --> $DIR/suggest-ref-cell.rs:3:20\n+  --> $DIR/suggest-ref-cell.rs:1:20\n    |\n LL | fn require_sync<T: Sync>() {}\n    |                    ^^^^ required by this bound in `require_sync`"}]}