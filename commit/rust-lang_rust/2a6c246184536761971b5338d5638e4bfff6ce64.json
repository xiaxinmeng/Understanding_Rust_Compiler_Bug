{"sha": "2a6c246184536761971b5338d5638e4bfff6ce64", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhNmMyNDYxODQ1MzY3NjE5NzFiNTMzOGQ1NjM4ZTRiZmZmNmNlNjQ=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-12-06T00:39:52Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-12-06T00:39:52Z"}, "message": "Update expect tests", "tree": {"sha": "683f7affa5004edfac592ce5c9386698b377bdc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/683f7affa5004edfac592ce5c9386698b377bdc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2a6c246184536761971b5338d5638e4bfff6ce64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2a6c246184536761971b5338d5638e4bfff6ce64", "html_url": "https://github.com/rust-lang/rust/commit/2a6c246184536761971b5338d5638e4bfff6ce64", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2a6c246184536761971b5338d5638e4bfff6ce64/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d96a6d7af0bf8f6c2e42c4c20237ed0440f0494", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d96a6d7af0bf8f6c2e42c4c20237ed0440f0494", "html_url": "https://github.com/rust-lang/rust/commit/9d96a6d7af0bf8f6c2e42c4c20237ed0440f0494"}], "stats": {"total": 1023, "additions": 977, "deletions": 46}, "files": [{"sha": "7576097b31f91ea5cb8a69b8fb79fb640988affa", "filename": "crates/rust-analyzer/src/diagnostics/test_data/clippy_pass_by_ref.txt", "status": "modified", "additions": 164, "deletions": 0, "changes": 164, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fclippy_pass_by_ref.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fclippy_pass_by_ref.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fclippy_pass_by_ref.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -104,4 +104,168 @@\n         },\n         fixes: [],\n     },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/compiler/lib.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 0,\n+                    character: 8,\n+                },\n+                end: Position {\n+                    line: 0,\n+                    character: 19,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"trivially_copy_pass_by_ref\",\n+                ),\n+            ),\n+            code_description: Some(\n+                CodeDescription {\n+                    href: Url {\n+                        scheme: \"https\",\n+                        host: Some(\n+                            Domain(\n+                                \"rust-lang.github.io\",\n+                            ),\n+                        ),\n+                        port: None,\n+                        path: \"/rust-clippy/master/index.html\",\n+                        query: None,\n+                        fragment: Some(\n+                            \"trivially_copy_pass_by_ref\",\n+                        ),\n+                    },\n+                },\n+            ),\n+            source: Some(\n+                \"clippy\",\n+            ),\n+            message: \"lint level defined here\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/compiler/mir/tagset.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 41,\n+                                    character: 23,\n+                                },\n+                                end: Position {\n+                                    line: 41,\n+                                    character: 28,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [],\n+    },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/compiler/mir/tagset.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 41,\n+                    character: 23,\n+                },\n+                end: Position {\n+                    line: 41,\n+                    character: 28,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"trivially_copy_pass_by_ref\",\n+                ),\n+            ),\n+            code_description: Some(\n+                CodeDescription {\n+                    href: Url {\n+                        scheme: \"https\",\n+                        host: Some(\n+                            Domain(\n+                                \"rust-lang.github.io\",\n+                            ),\n+                        ),\n+                        port: None,\n+                        path: \"/rust-clippy/master/index.html\",\n+                        query: None,\n+                        fragment: Some(\n+                            \"trivially_copy_pass_by_ref\",\n+                        ),\n+                    },\n+                },\n+            ),\n+            source: Some(\n+                \"clippy\",\n+            ),\n+            message: \"consider passing by value instead\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/compiler/mir/tagset.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 41,\n+                                    character: 23,\n+                                },\n+                                end: Position {\n+                                    line: 41,\n+                                    character: 28,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [],\n+    },\n ]"}, {"sha": "8f8953cd2883e4fda1eaa4e52579b53a89b7edf3", "filename": "crates/rust-analyzer/src/diagnostics/test_data/macro_compiler_error.txt", "status": "modified", "additions": 17, "deletions": 43, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fmacro_compiler_error.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fmacro_compiler_error.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fmacro_compiler_error.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -4,19 +4,19 @@\n             scheme: \"file\",\n             host: None,\n             port: None,\n-            path: \"/test/crates/hir_def/src/data.rs\",\n+            path: \"/test/crates/hir_def/src/path.rs\",\n             query: None,\n             fragment: None,\n         },\n         diagnostic: Diagnostic {\n             range: Range {\n                 start: Position {\n-                    line: 79,\n-                    character: 15,\n+                    line: 264,\n+                    character: 8,\n                 },\n                 end: Position {\n-                    line: 79,\n-                    character: 41,\n+                    line: 264,\n+                    character: 76,\n                 },\n             },\n             severity: Some(\n@@ -36,22 +36,22 @@\n                                 scheme: \"file\",\n                                 host: None,\n                                 port: None,\n-                                path: \"/test/crates/hir_def/src/path.rs\",\n+                                path: \"/test/crates/hir_def/src/data.rs\",\n                                 query: None,\n                                 fragment: None,\n                             },\n                             range: Range {\n                                 start: Position {\n-                                    line: 264,\n-                                    character: 8,\n+                                    line: 79,\n+                                    character: 15,\n                                 },\n                                 end: Position {\n-                                    line: 264,\n-                                    character: 76,\n+                                    line: 79,\n+                                    character: 41,\n                                 },\n                             },\n                         },\n-                        message: \"Error originated from macro here\",\n+                        message: \"Exact error occured here\",\n                     },\n                 ],\n             ),\n@@ -65,19 +65,19 @@\n             scheme: \"file\",\n             host: None,\n             port: None,\n-            path: \"/test/crates/hir_def/src/path.rs\",\n+            path: \"/test/crates/hir_def/src/data.rs\",\n             query: None,\n             fragment: None,\n         },\n         diagnostic: Diagnostic {\n             range: Range {\n                 start: Position {\n-                    line: 264,\n-                    character: 8,\n+                    line: 79,\n+                    character: 15,\n                 },\n                 end: Position {\n-                    line: 264,\n-                    character: 76,\n+                    line: 79,\n+                    character: 41,\n                 },\n             },\n             severity: Some(\n@@ -89,33 +89,7 @@\n                 \"rustc\",\n             ),\n             message: \"Please register your known path in the path module\",\n-            related_information: Some(\n-                [\n-                    DiagnosticRelatedInformation {\n-                        location: Location {\n-                            uri: Url {\n-                                scheme: \"file\",\n-                                host: None,\n-                                port: None,\n-                                path: \"/test/crates/hir_def/src/data.rs\",\n-                                query: None,\n-                                fragment: None,\n-                            },\n-                            range: Range {\n-                                start: Position {\n-                                    line: 79,\n-                                    character: 15,\n-                                },\n-                                end: Position {\n-                                    line: 79,\n-                                    character: 41,\n-                                },\n-                            },\n-                        },\n-                        message: \"Exact error occured here\",\n-                    },\n-                ],\n-            ),\n+            related_information: None,\n             tags: None,\n             data: None,\n         },"}, {"sha": "23d42b4d08b8a057c4ebe2fb60fb40b3acee29e3", "filename": "crates/rust-analyzer/src/diagnostics/test_data/rustc_unused_variable.txt", "status": "modified", "additions": 137, "deletions": 1, "changes": 138, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -32,7 +32,33 @@\n                 \"rustc\",\n             ),\n             message: \"unused variable: `foo`\\n#[warn(unused_variables)] on by default\",\n-            related_information: None,\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"consider prefixing with an underscore\",\n+                    },\n+                ],\n+            ),\n             tags: Some(\n                 [\n                     Unnecessary,\n@@ -87,4 +113,114 @@\n             },\n         ],\n     },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/driver/subcommand/repl.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 290,\n+                    character: 8,\n+                },\n+                end: Position {\n+                    line: 290,\n+                    character: 11,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"unused_variables\",\n+                ),\n+            ),\n+            code_description: None,\n+            source: Some(\n+                \"rustc\",\n+            ),\n+            message: \"consider prefixing with an underscore\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [\n+            CodeAction {\n+                title: \"consider prefixing with an underscore\",\n+                group: None,\n+                kind: Some(\n+                    CodeActionKind(\n+                        \"quickfix\",\n+                    ),\n+                ),\n+                edit: Some(\n+                    SnippetWorkspaceEdit {\n+                        changes: Some(\n+                            {\n+                                Url {\n+                                    scheme: \"file\",\n+                                    host: None,\n+                                    port: None,\n+                                    path: \"/test/driver/subcommand/repl.rs\",\n+                                    query: None,\n+                                    fragment: None,\n+                                }: [\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 290,\n+                                                character: 8,\n+                                            },\n+                                            end: Position {\n+                                                line: 290,\n+                                                character: 11,\n+                                            },\n+                                        },\n+                                        new_text: \"_foo\",\n+                                    },\n+                                ],\n+                            },\n+                        ),\n+                        document_changes: None,\n+                    },\n+                ),\n+                is_preferred: Some(\n+                    true,\n+                ),\n+                data: None,\n+            },\n+        ],\n+    },\n ]"}, {"sha": "4e428bedcbf3d46088f8c480302773d1d8cd32ec", "filename": "crates/rust-analyzer/src/diagnostics/test_data/rustc_unused_variable_as_hint.txt", "status": "modified", "additions": 137, "deletions": 1, "changes": 138, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_hint.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_hint.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_hint.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -32,7 +32,33 @@\n                 \"rustc\",\n             ),\n             message: \"unused variable: `foo`\\n#[warn(unused_variables)] on by default\",\n-            related_information: None,\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"consider prefixing with an underscore\",\n+                    },\n+                ],\n+            ),\n             tags: Some(\n                 [\n                     Unnecessary,\n@@ -87,4 +113,114 @@\n             },\n         ],\n     },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/driver/subcommand/repl.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 290,\n+                    character: 8,\n+                },\n+                end: Position {\n+                    line: 290,\n+                    character: 11,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"unused_variables\",\n+                ),\n+            ),\n+            code_description: None,\n+            source: Some(\n+                \"rustc\",\n+            ),\n+            message: \"consider prefixing with an underscore\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [\n+            CodeAction {\n+                title: \"consider prefixing with an underscore\",\n+                group: None,\n+                kind: Some(\n+                    CodeActionKind(\n+                        \"quickfix\",\n+                    ),\n+                ),\n+                edit: Some(\n+                    SnippetWorkspaceEdit {\n+                        changes: Some(\n+                            {\n+                                Url {\n+                                    scheme: \"file\",\n+                                    host: None,\n+                                    port: None,\n+                                    path: \"/test/driver/subcommand/repl.rs\",\n+                                    query: None,\n+                                    fragment: None,\n+                                }: [\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 290,\n+                                                character: 8,\n+                                            },\n+                                            end: Position {\n+                                                line: 290,\n+                                                character: 11,\n+                                            },\n+                                        },\n+                                        new_text: \"_foo\",\n+                                    },\n+                                ],\n+                            },\n+                        ),\n+                        document_changes: None,\n+                    },\n+                ),\n+                is_preferred: Some(\n+                    true,\n+                ),\n+                data: None,\n+            },\n+        ],\n+    },\n ]"}, {"sha": "4ddd7efae366eb9f7e46f1bd72da8c2e23a71490", "filename": "crates/rust-analyzer/src/diagnostics/test_data/rustc_unused_variable_as_info.txt", "status": "modified", "additions": 137, "deletions": 1, "changes": 138, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_info.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_info.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_unused_variable_as_info.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -32,7 +32,33 @@\n                 \"rustc\",\n             ),\n             message: \"unused variable: `foo`\\n#[warn(unused_variables)] on by default\",\n-            related_information: None,\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"consider prefixing with an underscore\",\n+                    },\n+                ],\n+            ),\n             tags: Some(\n                 [\n                     Unnecessary,\n@@ -87,4 +113,114 @@\n             },\n         ],\n     },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/driver/subcommand/repl.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 290,\n+                    character: 8,\n+                },\n+                end: Position {\n+                    line: 290,\n+                    character: 11,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"unused_variables\",\n+                ),\n+            ),\n+            code_description: None,\n+            source: Some(\n+                \"rustc\",\n+            ),\n+            message: \"consider prefixing with an underscore\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/driver/subcommand/repl.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 290,\n+                                    character: 8,\n+                                },\n+                                end: Position {\n+                                    line: 290,\n+                                    character: 11,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [\n+            CodeAction {\n+                title: \"consider prefixing with an underscore\",\n+                group: None,\n+                kind: Some(\n+                    CodeActionKind(\n+                        \"quickfix\",\n+                    ),\n+                ),\n+                edit: Some(\n+                    SnippetWorkspaceEdit {\n+                        changes: Some(\n+                            {\n+                                Url {\n+                                    scheme: \"file\",\n+                                    host: None,\n+                                    port: None,\n+                                    path: \"/test/driver/subcommand/repl.rs\",\n+                                    query: None,\n+                                    fragment: None,\n+                                }: [\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 290,\n+                                                character: 8,\n+                                            },\n+                                            end: Position {\n+                                                line: 290,\n+                                                character: 11,\n+                                            },\n+                                        },\n+                                        new_text: \"_foo\",\n+                                    },\n+                                ],\n+                            },\n+                        ),\n+                        document_changes: None,\n+                    },\n+                ),\n+                is_preferred: Some(\n+                    true,\n+                ),\n+                data: None,\n+            },\n+        ],\n+    },\n ]"}, {"sha": "f455cf25efbd60dfe9f12f86312d25437e9c9884", "filename": "crates/rust-analyzer/src/diagnostics/test_data/rustc_wrong_number_of_parameters.txt", "status": "modified", "additions": 82, "deletions": 0, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_wrong_number_of_parameters.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_wrong_number_of_parameters.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Frustc_wrong_number_of_parameters.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -81,4 +81,86 @@\n         },\n         fixes: [],\n     },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/compiler/ty/select.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 218,\n+                    character: 4,\n+                },\n+                end: Position {\n+                    line: 230,\n+                    character: 5,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"E0061\",\n+                ),\n+            ),\n+            code_description: Some(\n+                CodeDescription {\n+                    href: Url {\n+                        scheme: \"https\",\n+                        host: Some(\n+                            Domain(\n+                                \"doc.rust-lang.org\",\n+                            ),\n+                        ),\n+                        port: None,\n+                        path: \"/error-index.html\",\n+                        query: None,\n+                        fragment: Some(\n+                            \"E0061\",\n+                        ),\n+                    },\n+                },\n+            ),\n+            source: Some(\n+                \"rustc\",\n+            ),\n+            message: \"defined here\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/compiler/ty/select.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 103,\n+                                    character: 17,\n+                                },\n+                                end: Position {\n+                                    line: 103,\n+                                    character: 29,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [],\n+    },\n ]"}, {"sha": "4cbdb3b922f70c9c49fb001945dd1d089df50916", "filename": "crates/rust-analyzer/src/diagnostics/test_data/snap_multi_line_fix.txt", "status": "modified", "additions": 303, "deletions": 0, "changes": 303, "blob_url": "https://github.com/rust-lang/rust/blob/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fsnap_multi_line_fix.txt", "raw_url": "https://github.com/rust-lang/rust/raw/2a6c246184536761971b5338d5638e4bfff6ce64/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fsnap_multi_line_fix.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fdiagnostics%2Ftest_data%2Fsnap_multi_line_fix.txt?ref=2a6c246184536761971b5338d5638e4bfff6ce64", "patch": "@@ -74,6 +74,309 @@\n                         },\n                         message: \"unnecessary let binding\",\n                     },\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/src/main.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 2,\n+                                    character: 4,\n+                                },\n+                                end: Position {\n+                                    line: 2,\n+                                    character: 30,\n+                                },\n+                            },\n+                        },\n+                        message: \"return the expression directly\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [\n+            CodeAction {\n+                title: \"return the expression directly\",\n+                group: None,\n+                kind: Some(\n+                    CodeActionKind(\n+                        \"quickfix\",\n+                    ),\n+                ),\n+                edit: Some(\n+                    SnippetWorkspaceEdit {\n+                        changes: Some(\n+                            {\n+                                Url {\n+                                    scheme: \"file\",\n+                                    host: None,\n+                                    port: None,\n+                                    path: \"/test/src/main.rs\",\n+                                    query: None,\n+                                    fragment: None,\n+                                }: [\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 2,\n+                                                character: 4,\n+                                            },\n+                                            end: Position {\n+                                                line: 2,\n+                                                character: 30,\n+                                            },\n+                                        },\n+                                        new_text: \"\",\n+                                    },\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 3,\n+                                                character: 4,\n+                                            },\n+                                            end: Position {\n+                                                line: 3,\n+                                                character: 5,\n+                                            },\n+                                        },\n+                                        new_text: \"(0..10).collect()\",\n+                                    },\n+                                ],\n+                            },\n+                        ),\n+                        document_changes: None,\n+                    },\n+                ),\n+                is_preferred: Some(\n+                    true,\n+                ),\n+                data: None,\n+            },\n+        ],\n+    },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/src/main.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 2,\n+                    character: 4,\n+                },\n+                end: Position {\n+                    line: 2,\n+                    character: 30,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"let_and_return\",\n+                ),\n+            ),\n+            code_description: Some(\n+                CodeDescription {\n+                    href: Url {\n+                        scheme: \"https\",\n+                        host: Some(\n+                            Domain(\n+                                \"rust-lang.github.io\",\n+                            ),\n+                        ),\n+                        port: None,\n+                        path: \"/rust-clippy/master/index.html\",\n+                        query: None,\n+                        fragment: Some(\n+                            \"let_and_return\",\n+                        ),\n+                    },\n+                },\n+            ),\n+            source: Some(\n+                \"clippy\",\n+            ),\n+            message: \"unnecessary let binding\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/src/main.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 3,\n+                                    character: 4,\n+                                },\n+                                end: Position {\n+                                    line: 3,\n+                                    character: 5,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n+                ],\n+            ),\n+            tags: None,\n+            data: None,\n+        },\n+        fixes: [\n+            CodeAction {\n+                title: \"return the expression directly\",\n+                group: None,\n+                kind: Some(\n+                    CodeActionKind(\n+                        \"quickfix\",\n+                    ),\n+                ),\n+                edit: Some(\n+                    SnippetWorkspaceEdit {\n+                        changes: Some(\n+                            {\n+                                Url {\n+                                    scheme: \"file\",\n+                                    host: None,\n+                                    port: None,\n+                                    path: \"/test/src/main.rs\",\n+                                    query: None,\n+                                    fragment: None,\n+                                }: [\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 2,\n+                                                character: 4,\n+                                            },\n+                                            end: Position {\n+                                                line: 2,\n+                                                character: 30,\n+                                            },\n+                                        },\n+                                        new_text: \"\",\n+                                    },\n+                                    TextEdit {\n+                                        range: Range {\n+                                            start: Position {\n+                                                line: 3,\n+                                                character: 4,\n+                                            },\n+                                            end: Position {\n+                                                line: 3,\n+                                                character: 5,\n+                                            },\n+                                        },\n+                                        new_text: \"(0..10).collect()\",\n+                                    },\n+                                ],\n+                            },\n+                        ),\n+                        document_changes: None,\n+                    },\n+                ),\n+                is_preferred: Some(\n+                    true,\n+                ),\n+                data: None,\n+            },\n+        ],\n+    },\n+    MappedRustDiagnostic {\n+        url: Url {\n+            scheme: \"file\",\n+            host: None,\n+            port: None,\n+            path: \"/test/src/main.rs\",\n+            query: None,\n+            fragment: None,\n+        },\n+        diagnostic: Diagnostic {\n+            range: Range {\n+                start: Position {\n+                    line: 2,\n+                    character: 4,\n+                },\n+                end: Position {\n+                    line: 2,\n+                    character: 30,\n+                },\n+            },\n+            severity: Some(\n+                Hint,\n+            ),\n+            code: Some(\n+                String(\n+                    \"let_and_return\",\n+                ),\n+            ),\n+            code_description: Some(\n+                CodeDescription {\n+                    href: Url {\n+                        scheme: \"https\",\n+                        host: Some(\n+                            Domain(\n+                                \"rust-lang.github.io\",\n+                            ),\n+                        ),\n+                        port: None,\n+                        path: \"/rust-clippy/master/index.html\",\n+                        query: None,\n+                        fragment: Some(\n+                            \"let_and_return\",\n+                        ),\n+                    },\n+                },\n+            ),\n+            source: Some(\n+                \"clippy\",\n+            ),\n+            message: \"return the expression directly\",\n+            related_information: Some(\n+                [\n+                    DiagnosticRelatedInformation {\n+                        location: Location {\n+                            uri: Url {\n+                                scheme: \"file\",\n+                                host: None,\n+                                port: None,\n+                                path: \"/test/src/main.rs\",\n+                                query: None,\n+                                fragment: None,\n+                            },\n+                            range: Range {\n+                                start: Position {\n+                                    line: 3,\n+                                    character: 4,\n+                                },\n+                                end: Position {\n+                                    line: 3,\n+                                    character: 5,\n+                                },\n+                            },\n+                        },\n+                        message: \"original diagnostic\",\n+                    },\n                 ],\n             ),\n             tags: None,"}]}