{"sha": "502ae0e8988c1fa3ffc109c0d924e20c85f9426d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwMmFlMGU4OTg4YzFmYTNmZmMxMDljMGQ5MjRlMjBjODVmOTQyNmQ=", "commit": {"author": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-04-12T19:57:43Z"}, "committer": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-04-12T20:01:55Z"}, "message": "Remove usage of `DUMMY_HIR_ID` in `CheckAttrVisitor::check_inline`", "tree": {"sha": "dadd45ecec5f66d158c3c10ee4fbc0d661045408", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dadd45ecec5f66d158c3c10ee4fbc0d661045408"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/502ae0e8988c1fa3ffc109c0d924e20c85f9426d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/502ae0e8988c1fa3ffc109c0d924e20c85f9426d", "html_url": "https://github.com/rust-lang/rust/commit/502ae0e8988c1fa3ffc109c0d924e20c85f9426d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/502ae0e8988c1fa3ffc109c0d924e20c85f9426d/comments", "author": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b4edda98495a672e472d9510399d6a2f680a0f26", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4edda98495a672e472d9510399d6a2f680a0f26", "html_url": "https://github.com/rust-lang/rust/commit/b4edda98495a672e472d9510399d6a2f680a0f26"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "6c9d25cfaa54b850503f14f853611b170a46248e", "filename": "src/librustc_passes/check_attr.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/502ae0e8988c1fa3ffc109c0d924e20c85f9426d/src%2Flibrustc_passes%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/502ae0e8988c1fa3ffc109c0d924e20c85f9426d/src%2Flibrustc_passes%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fcheck_attr.rs?ref=502ae0e8988c1fa3ffc109c0d924e20c85f9426d", "patch": "@@ -14,7 +14,6 @@ use rustc_errors::struct_span_err;\n use rustc_hir as hir;\n use rustc_hir::def_id::DefId;\n use rustc_hir::intravisit::{self, NestedVisitorMap, Visitor};\n-use rustc_hir::DUMMY_HIR_ID;\n use rustc_hir::{self, HirId, Item, ItemKind, TraitItem};\n use rustc_hir::{MethodKind, Target};\n use rustc_session::lint::builtin::{CONFLICTING_REPR_HINTS, UNUSED_ATTRIBUTES};\n@@ -360,7 +359,7 @@ impl CheckAttrVisitor<'tcx> {\n         if let hir::StmtKind::Local(ref l) = stmt.kind {\n             for attr in l.attrs.iter() {\n                 if attr.check_name(sym::inline) {\n-                    self.check_inline(DUMMY_HIR_ID, attr, &stmt.span, Target::Statement);\n+                    self.check_inline(l.hir_id, attr, &stmt.span, Target::Statement);\n                 }\n                 if attr.check_name(sym::repr) {\n                     self.emit_repr_error(\n@@ -381,7 +380,7 @@ impl CheckAttrVisitor<'tcx> {\n         };\n         for attr in expr.attrs.iter() {\n             if attr.check_name(sym::inline) {\n-                self.check_inline(DUMMY_HIR_ID, attr, &expr.span, target);\n+                self.check_inline(expr.hir_id, attr, &expr.span, target);\n             }\n             if attr.check_name(sym::repr) {\n                 self.emit_repr_error("}]}