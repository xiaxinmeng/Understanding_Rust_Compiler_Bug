{"sha": "b9535c0b7d64290b27c4a116262402cd12f77833", "node_id": "C_kwDOAAsO6NoAKGI5NTM1YzBiN2Q2NDI5MGIyN2M0YTExNjI2MjQwMmNkMTJmNzc4MzM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-01T04:29:53Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-01T04:29:53Z"}, "message": "Auto merge of #109801 - aliemjay:test-implied-normalization, r=petrochenkov\n\nadd test for normalization in implied bounds query\n\nSee https://github.com/rust-lang/rust/issues/109799.", "tree": {"sha": "c2c7d1f440a1292cd57f7dd568bcf504508531b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2c7d1f440a1292cd57f7dd568bcf504508531b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9535c0b7d64290b27c4a116262402cd12f77833", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9535c0b7d64290b27c4a116262402cd12f77833", "html_url": "https://github.com/rust-lang/rust/commit/b9535c0b7d64290b27c4a116262402cd12f77833", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9535c0b7d64290b27c4a116262402cd12f77833/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "87e6b621a29351be64c6d2066ce7a5177c6e0ff8", "url": "https://api.github.com/repos/rust-lang/rust/commits/87e6b621a29351be64c6d2066ce7a5177c6e0ff8", "html_url": "https://github.com/rust-lang/rust/commit/87e6b621a29351be64c6d2066ce7a5177c6e0ff8"}, {"sha": "1a54144349cf461e6cb6767607e90cc7e73a6e1c", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a54144349cf461e6cb6767607e90cc7e73a6e1c", "html_url": "https://github.com/rust-lang/rust/commit/1a54144349cf461e6cb6767607e90cc7e73a6e1c"}], "stats": {"total": 57, "additions": 57, "deletions": 0}, "files": [{"sha": "898e5e9511e71c442e03920c7913a5992fde02c8", "filename": "tests/ui/implied-bounds/normalization-nested.lifetime.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/b9535c0b7d64290b27c4a116262402cd12f77833/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.lifetime.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b9535c0b7d64290b27c4a116262402cd12f77833/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.lifetime.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.lifetime.stderr?ref=b9535c0b7d64290b27c4a116262402cd12f77833", "patch": "@@ -0,0 +1,18 @@\n+error[E0759]: `fn` parameter has lifetime `'x` but it needs to satisfy a `'static` lifetime requirement\n+  --> $DIR/normalization-nested.rs:35:20\n+   |\n+LL | pub fn test<'x>(_: Map<Vec<&'x ()>>, s: &'x str) -> &'static str {\n+   |                    ^^^^^^^^^^^^^^^^\n+   |                    |\n+   |                    this data with lifetime `'x`...\n+   |                    ...is used and required to live as long as `'static` here\n+   |\n+note: `'static` lifetime requirement introduced by this bound\n+  --> $DIR/normalization-nested.rs:33:14\n+   |\n+LL |     I::Item: 'static;\n+   |              ^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0759`."}, {"sha": "5f1cbb3f697793626b8c953f90dc01a21f56bad1", "filename": "tests/ui/implied-bounds/normalization-nested.rs", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/rust-lang/rust/blob/b9535c0b7d64290b27c4a116262402cd12f77833/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b9535c0b7d64290b27c4a116262402cd12f77833/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimplied-bounds%2Fnormalization-nested.rs?ref=b9535c0b7d64290b27c4a116262402cd12f77833", "patch": "@@ -0,0 +1,39 @@\n+// Test for normalization of projections that appear in the item bounds\n+// (versus those that appear directly in the input types).\n+// Both revisions should pass. `lifetime` revision is a bug.\n+//\n+// revisions: param_ty lifetime\n+// [param_ty] check-pass\n+// [lifetime] check-fail\n+// [lifetime] known-bug: #109799\n+\n+pub trait Iter {\n+    type Item;\n+}\n+\n+#[cfg(param_ty)]\n+impl<X, I> Iter for I\n+where\n+    I: IntoIterator<Item = X>,\n+{\n+    type Item = X;\n+}\n+\n+#[cfg(lifetime)]\n+impl<'x, I> Iter for I\n+where\n+    I: IntoIterator<Item = &'x ()>,\n+{\n+    type Item = &'x ();\n+}\n+\n+pub struct Map<I>(I)\n+where\n+    I: Iter,\n+    I::Item: 'static;\n+\n+pub fn test<'x>(_: Map<Vec<&'x ()>>, s: &'x str) -> &'static str {\n+    s\n+}\n+\n+fn main() {}"}]}