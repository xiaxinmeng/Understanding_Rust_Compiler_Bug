{"sha": "dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkOWY5YjRiOWRjNzgyZjMwN2U5ODczZjdhOTk4MjhjNGY1ODM5OGU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-04-19T04:03:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-04-19T04:03:20Z"}, "message": "Rollup merge of #60060 - mtak-:rtm-x86-feature, r=petrochenkov\n\nwhitelist RTM x86 target cpu feature\n\nThis PR adds support for intels restricted transactional memory cpu feature. I mostly copied what was done for the [movbe](https://github.com/rust-lang/rust/pull/57999) feature.\n\nhttps://github.com/rust-lang-nursery/stdsimd/issues/718", "tree": {"sha": "65e0bdb24b7cec32bbfbbf0403c85de5b8690094", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65e0bdb24b7cec32bbfbbf0403c85de5b8690094"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcuUiICRBK7hj4Ov3rIwAAdHIIADaj/t+DE34icusskw9IkzUy\n3yCkzPYRkGgzG3KM8tUldwgGvusR63MiNV6ENGjXqTJOXEBeS2GbAAX9ysjOWPhg\niSXCWZKSt6lysm1t4WiRxJpWc/aGUX41pGU9z9xBzGXgOrzS2ajbMbvQ0yu6bVBm\n0h0PIhW1TDz2Pz7YZam3wJAU415XDYtovx1wEo4oWwonISxwPO+d/JTYEAJKvshL\nVsL/oanv6qNFQ0yk1wewKWvdFH7SafAP/yE8ha1+Df7RX/5aXzfOM3d+xytNfIrw\nwp5uuvZxDVaV20sz7Oljm/AS922Sd+W6rBnLrBc28pxoEE3JzXk32fOB2LXPkaA=\n=FwFU\n-----END PGP SIGNATURE-----\n", "payload": "tree 65e0bdb24b7cec32bbfbbf0403c85de5b8690094\nparent 34f1c1fff13f9d9959e39ae97dc2cf394c8e6537\nparent 365a48a8bf0d4dbb343889c53f773adad74ef965\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1555646600 +0200\ncommitter GitHub <noreply@github.com> 1555646600 +0200\n\nRollup merge of #60060 - mtak-:rtm-x86-feature, r=petrochenkov\n\nwhitelist RTM x86 target cpu feature\n\nThis PR adds support for intels restricted transactional memory cpu feature. I mostly copied what was done for the [movbe](https://github.com/rust-lang/rust/pull/57999) feature.\n\nhttps://github.com/rust-lang-nursery/stdsimd/issues/718\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "html_url": "https://github.com/rust-lang/rust/commit/dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34f1c1fff13f9d9959e39ae97dc2cf394c8e6537", "url": "https://api.github.com/repos/rust-lang/rust/commits/34f1c1fff13f9d9959e39ae97dc2cf394c8e6537", "html_url": "https://github.com/rust-lang/rust/commit/34f1c1fff13f9d9959e39ae97dc2cf394c8e6537"}, {"sha": "365a48a8bf0d4dbb343889c53f773adad74ef965", "url": "https://api.github.com/repos/rust-lang/rust/commits/365a48a8bf0d4dbb343889c53f773adad74ef965", "html_url": "https://github.com/rust-lang/rust/commit/365a48a8bf0d4dbb343889c53f773adad74ef965"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "0cba15b31668f468deddb100716a408e37afa6c7", "filename": "src/librustc_codegen_llvm/llvm_util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs?ref=dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "patch": "@@ -154,6 +154,7 @@ const X86_WHITELIST: &[(&str, Option<&str>)] = &[\n     (\"popcnt\", None),\n     (\"rdrand\", None),\n     (\"rdseed\", None),\n+    (\"rtm\", Some(\"rtm_target_feature\")),\n     (\"sha\", None),\n     (\"sse\", None),\n     (\"sse2\", None),"}, {"sha": "d601c962fc6afd22c753cb6ab049dcba0b7c9793", "filename": "src/librustc_typeck/collect.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibrustc_typeck%2Fcollect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibrustc_typeck%2Fcollect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcollect.rs?ref=dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "patch": "@@ -2432,6 +2432,7 @@ fn from_target_feature(\n                 Some(\"cmpxchg16b_target_feature\") => rust_features.cmpxchg16b_target_feature,\n                 Some(\"adx_target_feature\") => rust_features.adx_target_feature,\n                 Some(\"movbe_target_feature\") => rust_features.movbe_target_feature,\n+                Some(\"rtm_target_feature\") => rust_features.rtm_target_feature,\n                 Some(name) => bug!(\"unknown target feature gate {}\", name),\n                 None => true,\n             };"}, {"sha": "7bae5ba75719a0544b0faf789fbbd91ec67854bb", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "patch": "@@ -402,6 +402,7 @@ declare_features! (\n     (active, adx_target_feature, \"1.32.0\", Some(44839), None),\n     (active, cmpxchg16b_target_feature, \"1.32.0\", Some(44839), None),\n     (active, movbe_target_feature, \"1.34.0\", Some(44839), None),\n+    (active, rtm_target_feature, \"1.35.0\", Some(44839), None),\n \n     // Allows macro invocations on modules expressions and statements and\n     // procedural macros to expand to non-items."}, {"sha": "8f3a52ba5d677a8c46c83955734f2c1197c51805", "filename": "src/test/ui/target-feature-gate.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Ftest%2Fui%2Ftarget-feature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Ftest%2Fui%2Ftarget-feature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftarget-feature-gate.rs?ref=dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "patch": "@@ -23,6 +23,7 @@\n // gate-test-adx_target_feature\n // gate-test-cmpxchg16b_target_feature\n // gate-test-movbe_target_feature\n+// gate-test-rtm_target_feature\n // min-llvm-version 6.0\n \n #[target_feature(enable = \"avx512bw\")]"}, {"sha": "e142125225fb4830d68d5520fe3b5c9d36d4d9a9", "filename": "src/test/ui/target-feature-gate.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dd9f9b4b9dc782f307e9873f7a99828c4f58398e/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftarget-feature-gate.stderr?ref=dd9f9b4b9dc782f307e9873f7a99828c4f58398e", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: the target feature `avx512bw` is currently unstable\n-  --> $DIR/target-feature-gate.rs:28:18\n+  --> $DIR/target-feature-gate.rs:29:18\n    |\n LL | #[target_feature(enable = \"avx512bw\")]\n    |                  ^^^^^^^^^^^^^^^^^^^"}]}