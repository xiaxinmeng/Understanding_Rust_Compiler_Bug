{"sha": "ff9c5bef7b198cde4358610c565cd0b6dc466de5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmOWM1YmVmN2IxOThjZGU0MzU4NjEwYzU2NWNkMGI2ZGM0NjZkZTU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-24T22:32:47Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-01-24T22:32:47Z"}, "message": "ModuleDef is Def-free", "tree": {"sha": "826b309ec9210c03c99534931ba70e6fc715d69e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/826b309ec9210c03c99534931ba70e6fc715d69e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff9c5bef7b198cde4358610c565cd0b6dc466de5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff9c5bef7b198cde4358610c565cd0b6dc466de5", "html_url": "https://github.com/rust-lang/rust/commit/ff9c5bef7b198cde4358610c565cd0b6dc466de5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff9c5bef7b198cde4358610c565cd0b6dc466de5/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0f2f3a21e7e624f920d182869896347af309e909", "url": "https://api.github.com/repos/rust-lang/rust/commits/0f2f3a21e7e624f920d182869896347af309e909", "html_url": "https://github.com/rust-lang/rust/commit/0f2f3a21e7e624f920d182869896347af309e909"}], "stats": {"total": 14, "additions": 2, "deletions": 12}, "files": [{"sha": "6739627b4ed3c194b2df4178e68efe63c760a8a1", "filename": "crates/ra_hir/src/code_model_api.rs", "status": "modified", "additions": 2, "deletions": 9, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fcode_model_api.rs?ref=ff9c5bef7b198cde4358610c565cd0b6dc466de5", "patch": "@@ -5,7 +5,7 @@ use ra_db::{CrateId, FileId};\n use ra_syntax::{ast::self, TreeArc, SyntaxNode};\n \n use crate::{\n-    Name, DefId, Path, PerNs, ScopesWithSyntaxMapping, Ty, HirFileId,\n+    Name, Path, PerNs, ScopesWithSyntaxMapping, Ty, HirFileId,\n     type_ref::TypeRef,\n     nameres::{ModuleScope, lower::ImportId},\n     db::HirDatabase,\n@@ -62,13 +62,12 @@ pub enum ModuleDef {\n     Function(Function),\n     Struct(Struct),\n     Enum(Enum),\n+    // Can't be directly declared, but can be imported.\n     EnumVariant(EnumVariant),\n     Const(Const),\n     Static(Static),\n     Trait(Trait),\n     Type(Type),\n-    // Can't be directly declared, but can be imported.\n-    Def(DefId),\n }\n impl_froms!(\n     ModuleDef: Module,\n@@ -82,12 +81,6 @@ impl_froms!(\n     Type\n );\n \n-impl From<DefId> for ModuleDef {\n-    fn from(it: DefId) -> ModuleDef {\n-        ModuleDef::Def(it)\n-    }\n-}\n-\n pub enum ModuleSource {\n     SourceFile(TreeArc<ast::SourceFile>),\n     Module(TreeArc<ast::Module>),"}, {"sha": "1d5624f8fcad9f5b0b4b16ab93636f9618998c40", "filename": "crates/ra_hir/src/ty.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_hir%2Fsrc%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_hir%2Fsrc%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty.rs?ref=ff9c5bef7b198cde4358610c565cd0b6dc466de5", "patch": "@@ -695,7 +695,6 @@ impl From<ModuleDef> for Option<TypableDef> {\n             ModuleDef::EnumVariant(v) => v.into(),\n             ModuleDef::Const(_)\n             | ModuleDef::Static(_)\n-            | ModuleDef::Def(_)\n             | ModuleDef::Module(_)\n             | ModuleDef::Trait(_)\n             | ModuleDef::Type(_) => return None,"}, {"sha": "3ba6c33ee606f2e0cd4c07f20ae12eae7ef51b46", "filename": "crates/ra_ide_api/src/completion/completion_item.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fcompletion_item.rs?ref=ff9c5bef7b198cde4358610c565cd0b6dc466de5", "patch": "@@ -227,7 +227,6 @@ impl Builder {\n             hir::ModuleDef::Static(it) => (CompletionItemKind::Static, it.docs(ctx.db)),\n             hir::ModuleDef::Trait(it) => (CompletionItemKind::Trait, it.docs(ctx.db)),\n             hir::ModuleDef::Type(it) => (CompletionItemKind::TypeAlias, it.docs(ctx.db)),\n-            hir::ModuleDef::Def(_) => return self,\n         };\n         self.kind = Some(kind);\n         self.documentation = docs;"}, {"sha": "c5be8e01be3995d847b9db9b1352b4b04fe0ad6d", "filename": "crates/ra_ide_api/src/navigation_target.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_ide_api%2Fsrc%2Fnavigation_target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff9c5bef7b198cde4358610c565cd0b6dc466de5/crates%2Fra_ide_api%2Fsrc%2Fnavigation_target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fnavigation_target.rs?ref=ff9c5bef7b198cde4358610c565cd0b6dc466de5", "patch": "@@ -107,7 +107,6 @@ impl NavigationTarget {\n         module_def: hir::ModuleDef,\n     ) -> Option<NavigationTarget> {\n         match module_def {\n-            hir::ModuleDef::Def(_) => return None,\n             hir::ModuleDef::Module(module) => Some(NavigationTarget::from_module(db, module)),\n             hir::ModuleDef::Function(func) => Some(NavigationTarget::from_function(db, func)),\n             hir::ModuleDef::Struct(s) => {"}]}