{"sha": "31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "node_id": "C_kwDOAAsO6NoAKDMxYWQzNDdiMGVmN2YyZTk4NDk2YjFjZjdhOTliZmY1ZTU5ZDg3YzQ", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-03-07T10:05:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-07T10:05:31Z"}, "message": "Merge #11644\n\n11644: Emit more detailed highlighting for `%`, `>>`, `<<` r=Veykril a=arzg\n\nThese are currently just given `operator`, when `%` can be grouped under `arithmetic`, and `>>` and `<<` can be grouped under `bitwise`.\n\nCo-authored-by: Luna Razzaghipour <aramisnoah@gmail.com>", "tree": {"sha": "3f236a3a321d923b2965faf0890bcfc41be6646c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f236a3a321d923b2965faf0890bcfc41be6646c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiJdjrCRBK7hj4Ov3rIwAAud4IADTYu5b+IvV7oaH4z0Kn6vFR\nZgEpYNev0e4Fa9ZfT8E40F85l3CG5pYpy92nuXnLrxBqLf9PFgRrD2Sb3Ha4jP9h\nQgqnhlOezKcXDHpumi2XjyBhkYcjGt0YeIanOaY57BNwID6JJh187enJDjZ4wtvn\n2lCErWcK5tXrHLk0RsgKDjB9WtwQXJYMnasn52Q4Psxd52HyHGBckCwdvui2KTsU\nlfMoYxs5+mu9e/orOkssPfxVWvHhj1pEyAmUqPnBmJl5hHWW7U7RnjTfUaecZ8u6\n6BZjKOGB2dqVIuQDw+s9gKaZB8Rd+qPsxxDhwlmnq55q8TOLOnmAM6a932i0BBc=\n=oxKs\n-----END PGP SIGNATURE-----\n", "payload": "tree 3f236a3a321d923b2965faf0890bcfc41be6646c\nparent 5fae65dd28b450a437ebc800a410164c3af1d516\nparent 6da122889856f40bd165c68c6daf58de23def98e\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1646647531 +0000\ncommitter GitHub <noreply@github.com> 1646647531 +0000\n\nMerge #11644\n\n11644: Emit more detailed highlighting for `%`, `>>`, `<<` r=Veykril a=arzg\n\nThese are currently just given `operator`, when `%` can be grouped under `arithmetic`, and `>>` and `<<` can be grouped under `bitwise`.\n\nCo-authored-by: Luna Razzaghipour <aramisnoah@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "html_url": "https://github.com/rust-lang/rust/commit/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fae65dd28b450a437ebc800a410164c3af1d516", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fae65dd28b450a437ebc800a410164c3af1d516", "html_url": "https://github.com/rust-lang/rust/commit/5fae65dd28b450a437ebc800a410164c3af1d516"}, {"sha": "6da122889856f40bd165c68c6daf58de23def98e", "url": "https://api.github.com/repos/rust-lang/rust/commits/6da122889856f40bd165c68c6daf58de23def98e", "html_url": "https://github.com/rust-lang/rust/commit/6da122889856f40bd165c68c6daf58de23def98e"}], "stats": {"total": 89, "additions": 85, "deletions": 4}, "files": [{"sha": "eeec8dcba8c42a274ed0f2540f0f6832a4850d41", "filename": "crates/ide/src/syntax_highlighting/highlight.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs?ref=31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "patch": "@@ -123,12 +123,12 @@ fn punctuation(sema: &Semantics<RootDatabase>, token: SyntaxToken, kind: SyntaxK\n             }\n             .into()\n         }\n-        (T![+] | T![-] | T![*] | T![/], BIN_EXPR) => HlOperator::Arithmetic.into(),\n-        (T![+=] | T![-=] | T![*=] | T![/=], BIN_EXPR) => {\n+        (T![+] | T![-] | T![*] | T![/] | T![%], BIN_EXPR) => HlOperator::Arithmetic.into(),\n+        (T![+=] | T![-=] | T![*=] | T![/=] | T![%=], BIN_EXPR) => {\n             Highlight::from(HlOperator::Arithmetic) | HlMod::Mutable\n         }\n-        (T![|] | T![&] | T![!] | T![^], BIN_EXPR) => HlOperator::Bitwise.into(),\n-        (T![|=] | T![&=] | T![^=], BIN_EXPR) => {\n+        (T![|] | T![&] | T![!] | T![^] | T![>>] | T![<<], BIN_EXPR) => HlOperator::Bitwise.into(),\n+        (T![|=] | T![&=] | T![^=] | T![>>=] | T![<<=], BIN_EXPR) => {\n             Highlight::from(HlOperator::Bitwise) | HlMod::Mutable\n         }\n         (T![&&] | T![||], BIN_EXPR) => HlOperator::Logical.into(),"}, {"sha": "46220993e6864ba4dcdac110f0bae20ca6c28c0c", "filename": "crates/ide/src/syntax_highlighting/test_data/highlight_operators.html", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/rust-lang/rust/blob/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html", "raw_url": "https://github.com/rust-lang/rust/raw/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html?ref=31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "patch": "@@ -0,0 +1,57 @@\n+\n+<style>\n+body                { margin: 0; }\n+pre                 { color: #DCDCCC; background: #3F3F3F; font-size: 22px; padding: 0.4em; }\n+\n+.lifetime           { color: #DFAF8F; font-style: italic; }\n+.label              { color: #DFAF8F; font-style: italic; }\n+.comment            { color: #7F9F7F; }\n+.documentation      { color: #629755; }\n+.intra_doc_link     { font-style: italic; }\n+.injected           { opacity: 0.65 ; }\n+.struct, .enum      { color: #7CB8BB; }\n+.enum_variant       { color: #BDE0F3; }\n+.string_literal     { color: #CC9393; }\n+.field              { color: #94BFF3; }\n+.function           { color: #93E0E3; }\n+.function.unsafe    { color: #BC8383; }\n+.trait.unsafe       { color: #BC8383; }\n+.operator.unsafe    { color: #BC8383; }\n+.mutable.unsafe     { color: #BC8383; text-decoration: underline; }\n+.keyword.unsafe     { color: #BC8383; font-weight: bold; }\n+.parameter          { color: #94BFF3; }\n+.text               { color: #DCDCCC; }\n+.type               { color: #7CB8BB; }\n+.builtin_type       { color: #8CD0D3; }\n+.type_param         { color: #DFAF8F; }\n+.attribute          { color: #94BFF3; }\n+.numeric_literal    { color: #BFEBBF; }\n+.bool_literal       { color: #BFE6EB; }\n+.macro              { color: #94BFF3; }\n+.derive             { color: #94BFF3; font-style: italic; }\n+.module             { color: #AFD8AF; }\n+.value_param        { color: #DCDCCC; }\n+.variable           { color: #DCDCCC; }\n+.format_specifier   { color: #CC696B; }\n+.mutable            { text-decoration: underline; }\n+.escape_sequence    { color: #94BFF3; }\n+.keyword            { color: #F0DFAF; font-weight: bold; }\n+.control            { font-style: italic; }\n+.reference          { font-style: italic; font-weight: bold; }\n+\n+.unresolved_reference { color: #FC5555; text-decoration: wavy underline; }\n+</style>\n+<pre><code><span class=\"keyword\">fn</span> <span class=\"function declaration\">main</span><span class=\"parenthesis\">(</span><span class=\"parenthesis\">)</span> <span class=\"brace\">{</span>\n+    <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">+</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">-</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">*</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">/</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">%</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">|</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&</span> <span class=\"numeric_literal\">1</span> <span class=\"logical\">!</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">^</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&gt;&gt;</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&lt;&lt;</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"keyword\">let</span> <span class=\"keyword\">mut</span> <span class=\"variable declaration mutable\">a</span> <span class=\"operator\">=</span> <span class=\"numeric_literal\">0</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">+=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">-=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">*=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">/=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">%=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">|=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">^=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&gt;&gt;=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&lt;&lt;=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+<span class=\"brace\">}</span></code></pre>\n\\ No newline at end of file"}, {"sha": "efd03c28237c10779fed6c71bdfc9bcd45ef829f", "filename": "crates/ide/src/syntax_highlighting/tests.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs?ref=31ad347b0ef7f2e98496b1cf7a99bff5e59d87c4", "patch": "@@ -841,6 +841,30 @@ fn foo() {\n     );\n }\n \n+#[test]\n+fn test_operators() {\n+    check_highlighting(\n+        r##\"\n+fn main() {\n+    1 + 1 - 1 * 1 / 1 % 1 | 1 & 1 ! 1 ^ 1 >> 1 << 1;\n+    let mut a = 0;\n+    a += 1;\n+    a -= 1;\n+    a *= 1;\n+    a /= 1;\n+    a %= 1;\n+    a |= 1;\n+    a &= 1;\n+    a ^= 1;\n+    a >>= 1;\n+    a <<= 1;\n+}\n+\"##,\n+        expect_file![\"./test_data/highlight_operators.html\"],\n+        false,\n+    );\n+}\n+\n #[test]\n fn test_rainbow_highlighting() {\n     check_highlighting("}]}