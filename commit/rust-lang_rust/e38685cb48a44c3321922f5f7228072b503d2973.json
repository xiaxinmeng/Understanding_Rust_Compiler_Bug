{"sha": "e38685cb48a44c3321922f5f7228072b503d2973", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzODY4NWNiNDhhNDRjMzMyMTkyMmY1ZjcyMjgwNzJiNTAzZDI5NzM=", "commit": {"author": {"name": "Avi Dessauer", "email": "avi.the.coder@gmail.com", "date": "2020-06-08T21:49:06Z"}, "committer": {"name": "Avi Dessauer", "email": "avi.the.coder@gmail.com", "date": "2020-06-08T21:49:06Z"}, "message": "Parse default unsafe fn", "tree": {"sha": "d28fcef77c6db5adf8d1943c163cc2c961aa00a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d28fcef77c6db5adf8d1943c163cc2c961aa00a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e38685cb48a44c3321922f5f7228072b503d2973", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e38685cb48a44c3321922f5f7228072b503d2973", "html_url": "https://github.com/rust-lang/rust/commit/e38685cb48a44c3321922f5f7228072b503d2973", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e38685cb48a44c3321922f5f7228072b503d2973/comments", "author": {"login": "Avi-D-coder", "id": 29133776, "node_id": "MDQ6VXNlcjI5MTMzNzc2", "avatar_url": "https://avatars.githubusercontent.com/u/29133776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Avi-D-coder", "html_url": "https://github.com/Avi-D-coder", "followers_url": "https://api.github.com/users/Avi-D-coder/followers", "following_url": "https://api.github.com/users/Avi-D-coder/following{/other_user}", "gists_url": "https://api.github.com/users/Avi-D-coder/gists{/gist_id}", "starred_url": "https://api.github.com/users/Avi-D-coder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Avi-D-coder/subscriptions", "organizations_url": "https://api.github.com/users/Avi-D-coder/orgs", "repos_url": "https://api.github.com/users/Avi-D-coder/repos", "events_url": "https://api.github.com/users/Avi-D-coder/events{/privacy}", "received_events_url": "https://api.github.com/users/Avi-D-coder/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Avi-D-coder", "id": 29133776, "node_id": "MDQ6VXNlcjI5MTMzNzc2", "avatar_url": "https://avatars.githubusercontent.com/u/29133776?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Avi-D-coder", "html_url": "https://github.com/Avi-D-coder", "followers_url": "https://api.github.com/users/Avi-D-coder/followers", "following_url": "https://api.github.com/users/Avi-D-coder/following{/other_user}", "gists_url": "https://api.github.com/users/Avi-D-coder/gists{/gist_id}", "starred_url": "https://api.github.com/users/Avi-D-coder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Avi-D-coder/subscriptions", "organizations_url": "https://api.github.com/users/Avi-D-coder/orgs", "repos_url": "https://api.github.com/users/Avi-D-coder/repos", "events_url": "https://api.github.com/users/Avi-D-coder/events{/privacy}", "received_events_url": "https://api.github.com/users/Avi-D-coder/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3999bbba1bba45ae9d577506c6414f741e1fe80a", "url": "https://api.github.com/repos/rust-lang/rust/commits/3999bbba1bba45ae9d577506c6414f741e1fe80a", "html_url": "https://github.com/rust-lang/rust/commit/3999bbba1bba45ae9d577506c6414f741e1fe80a"}], "stats": {"total": 51, "additions": 50, "deletions": 1}, "files": [{"sha": "56cfb509da0f65105caafe379e63c6ef2872e80d", "filename": "crates/ra_parser/src/grammar/items.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fitems.rs?ref=e38685cb48a44c3321922f5f7228072b503d2973", "patch": "@@ -121,7 +121,13 @@ pub(super) fn maybe_item(p: &mut Parser, m: Marker, flavor: ItemFlavor) -> Resul\n             T![unsafe] => {\n                 // test default_unsafe_impl\n                 // default unsafe impl Foo {}\n-                if p.nth(2) == T![impl] {\n+\n+                // test default_unsafe_fn\n+                // impl T for Foo {\n+                //     default unsafe fn foo() {}\n+                // }\n+                let sk = p.nth(2);\n+                if sk == T![impl] || sk == T![fn] {\n                     p.bump_remap(T![default]);\n                     p.bump(T![unsafe]);\n                     has_mods = true;"}, {"sha": "adb6159f4725d6b747cfb667a43d882cf11d773d", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0163_default_unsafe_fn.rast", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast", "raw_url": "https://github.com/rust-lang/rust/raw/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rast?ref=e38685cb48a44c3321922f5f7228072b503d2973", "patch": "@@ -0,0 +1,40 @@\n+SOURCE_FILE@0..50\n+  IMPL_DEF@0..49\n+    IMPL_KW@0..4 \"impl\"\n+    WHITESPACE@4..5 \" \"\n+    PATH_TYPE@5..6\n+      PATH@5..6\n+        PATH_SEGMENT@5..6\n+          NAME_REF@5..6\n+            IDENT@5..6 \"T\"\n+    WHITESPACE@6..7 \" \"\n+    FOR_KW@7..10 \"for\"\n+    WHITESPACE@10..11 \" \"\n+    PATH_TYPE@11..14\n+      PATH@11..14\n+        PATH_SEGMENT@11..14\n+          NAME_REF@11..14\n+            IDENT@11..14 \"Foo\"\n+    WHITESPACE@14..15 \" \"\n+    ITEM_LIST@15..49\n+      L_CURLY@15..16 \"{\"\n+      WHITESPACE@16..21 \"\\n    \"\n+      FN_DEF@21..47\n+        DEFAULT_KW@21..28 \"default\"\n+        WHITESPACE@28..29 \" \"\n+        UNSAFE_KW@29..35 \"unsafe\"\n+        WHITESPACE@35..36 \" \"\n+        FN_KW@36..38 \"fn\"\n+        WHITESPACE@38..39 \" \"\n+        NAME@39..42\n+          IDENT@39..42 \"foo\"\n+        PARAM_LIST@42..44\n+          L_PAREN@42..43 \"(\"\n+          R_PAREN@43..44 \")\"\n+        WHITESPACE@44..45 \" \"\n+        BLOCK_EXPR@45..47\n+          L_CURLY@45..46 \"{\"\n+          R_CURLY@46..47 \"}\"\n+      WHITESPACE@47..48 \"\\n\"\n+      R_CURLY@48..49 \"}\"\n+  WHITESPACE@49..50 \"\\n\""}, {"sha": "12926cd8a1b408b365566265f66b170ba194b0de", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0163_default_unsafe_fn.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e38685cb48a44c3321922f5f7228072b503d2973/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0163_default_unsafe_fn.rs?ref=e38685cb48a44c3321922f5f7228072b503d2973", "patch": "@@ -0,0 +1,3 @@\n+impl T for Foo {\n+    default unsafe fn foo() {}\n+}"}]}