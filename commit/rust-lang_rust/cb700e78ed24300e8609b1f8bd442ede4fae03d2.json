{"sha": "cb700e78ed24300e8609b1f8bd442ede4fae03d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNiNzAwZTc4ZWQyNDMwMGU4NjA5YjFmOGJkNDQyZWRlNGZhZTAzZDI=", "commit": {"author": {"name": "ParkHanbum", "email": "kese111@gmail.com", "date": "2016-09-29T07:24:14Z"}, "committer": {"name": "ParkHanbum", "email": "kese111@gmail.com", "date": "2016-10-06T06:52:09Z"}, "message": "Add testcase for issue-32948\nref : https://github.com/rust-lang/rust/issue/32948", "tree": {"sha": "c73706ac89c3daedb0de129b4bc4f545619564a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c73706ac89c3daedb0de129b4bc4f545619564a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb700e78ed24300e8609b1f8bd442ede4fae03d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb700e78ed24300e8609b1f8bd442ede4fae03d2", "html_url": "https://github.com/rust-lang/rust/commit/cb700e78ed24300e8609b1f8bd442ede4fae03d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb700e78ed24300e8609b1f8bd442ede4fae03d2/comments", "author": {"login": "ParkHanbum", "id": 1003760, "node_id": "MDQ6VXNlcjEwMDM3NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1003760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ParkHanbum", "html_url": "https://github.com/ParkHanbum", "followers_url": "https://api.github.com/users/ParkHanbum/followers", "following_url": "https://api.github.com/users/ParkHanbum/following{/other_user}", "gists_url": "https://api.github.com/users/ParkHanbum/gists{/gist_id}", "starred_url": "https://api.github.com/users/ParkHanbum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ParkHanbum/subscriptions", "organizations_url": "https://api.github.com/users/ParkHanbum/orgs", "repos_url": "https://api.github.com/users/ParkHanbum/repos", "events_url": "https://api.github.com/users/ParkHanbum/events{/privacy}", "received_events_url": "https://api.github.com/users/ParkHanbum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ParkHanbum", "id": 1003760, "node_id": "MDQ6VXNlcjEwMDM3NjA=", "avatar_url": "https://avatars.githubusercontent.com/u/1003760?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ParkHanbum", "html_url": "https://github.com/ParkHanbum", "followers_url": "https://api.github.com/users/ParkHanbum/followers", "following_url": "https://api.github.com/users/ParkHanbum/following{/other_user}", "gists_url": "https://api.github.com/users/ParkHanbum/gists{/gist_id}", "starred_url": "https://api.github.com/users/ParkHanbum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ParkHanbum/subscriptions", "organizations_url": "https://api.github.com/users/ParkHanbum/orgs", "repos_url": "https://api.github.com/users/ParkHanbum/repos", "events_url": "https://api.github.com/users/ParkHanbum/events{/privacy}", "received_events_url": "https://api.github.com/users/ParkHanbum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b543f3a4b29f15d6db7fb0ccab8bdc9900cbf84e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b543f3a4b29f15d6db7fb0ccab8bdc9900cbf84e", "html_url": "https://github.com/rust-lang/rust/commit/b543f3a4b29f15d6db7fb0ccab8bdc9900cbf84e"}], "stats": {"total": 34, "additions": 29, "deletions": 5}, "files": [{"sha": "c1b14440faab6609bbf5f32c7d45adcc06d16d8b", "filename": "src/test/run-make/stable-symbol-names/Makefile", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fstable-symbol-names%2FMakefile?ref=cb700e78ed24300e8609b1f8bd442ede4fae03d2", "patch": "@@ -1,12 +1,16 @@\n -include ../tools.mk\n \n-# This test case makes sure that monomorphizations of the same function with the\n-# same set of generic arguments will have the same symbol names when\n-# instantiated in different crates.\n+# The following command will:\n+#  1. dump the symbols of a library using `nm`\n+#  2. extract only those lines that we are interested in via `grep`\n+#  3. from those lines, extract just the symbol name via `sed`\n+#     (symbol names always start with \"_ZN\" and end with \"E\")\n+#  4. sort those symbol names for deterministic comparison\n+#  5. write the result into a file\n \n dump-symbols = nm \"$(TMPDIR)/lib$(1).rlib\" \\\n-             |  grep \"some_test_function\" \\\n-             | sed \"s/^[0-9a-f]\\{8,16\\}/00000000/\" \\\n+             | grep -E \"some_test_function|Bar|bar\" \\\n+             | sed \"s/.*\\(_ZN.*E\\).*/\\1/\" \\\n              | sort \\\n              > \"$(TMPDIR)/$(1).nm\"\n "}, {"sha": "5c73ff0fab6d0ea16c608d0430b2ab20ee6a0c0d", "filename": "src/test/run-make/stable-symbol-names/stable-symbol-names1.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names1.rs?ref=cb700e78ed24300e8609b1f8bd442ede4fae03d2", "patch": "@@ -10,6 +10,20 @@\n \n #![crate_type=\"rlib\"]\n \n+pub trait Foo {\n+  fn foo<T>();\n+}\n+\n+pub struct Bar;\n+\n+impl Foo for Bar {\n+  fn foo<T>() {}\n+}\n+\n+pub fn bar() {\n+  Bar::foo::<Bar>();\n+}\n+\n pub fn some_test_function<T>(t: T) -> T {\n   t\n }"}, {"sha": "097dce876affc4428bf7c031b19532d40b513ef4", "filename": "src/test/run-make/stable-symbol-names/stable-symbol-names2.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb700e78ed24300e8609b1f8bd442ede4fae03d2/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fstable-symbol-names%2Fstable-symbol-names2.rs?ref=cb700e78ed24300e8609b1f8bd442ede4fae03d2", "patch": "@@ -18,3 +18,9 @@ pub fn user() {\n   let x = 2u64;\n   stable_symbol_names1::some_test_function(&x);\n }\n+\n+pub fn trait_impl_test_function() {\n+  use stable_symbol_names1::*;\n+  Bar::foo::<Bar>();\n+  bar();\n+}"}]}