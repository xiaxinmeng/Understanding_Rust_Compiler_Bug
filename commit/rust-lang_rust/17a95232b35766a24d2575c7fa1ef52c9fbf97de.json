{"sha": "17a95232b35766a24d2575c7fa1ef52c9fbf97de", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3YTk1MjMyYjM1NzY2YTI0ZDI1NzVjN2ZhMWVmNTJjOWZiZjk3ZGU=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-04-06T00:02:44Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-04-06T00:03:20Z"}, "message": "Reduce the visual clutter\n\nUsing a single label for constraints and generic arguments.", "tree": {"sha": "a2ca830b6c86864fbdc52f12315300a39fe91aa1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a2ca830b6c86864fbdc52f12315300a39fe91aa1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/17a95232b35766a24d2575c7fa1ef52c9fbf97de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/17a95232b35766a24d2575c7fa1ef52c9fbf97de", "html_url": "https://github.com/rust-lang/rust/commit/17a95232b35766a24d2575c7fa1ef52c9fbf97de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/17a95232b35766a24d2575c7fa1ef52c9fbf97de/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9f55ea689e7e582cd146dc1b06850843530a8af", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9f55ea689e7e582cd146dc1b06850843530a8af", "html_url": "https://github.com/rust-lang/rust/commit/c9f55ea689e7e582cd146dc1b06850843530a8af"}], "stats": {"total": 83, "additions": 27, "deletions": 56}, "files": [{"sha": "9563325fe329e8af41be1145bebb285ca0d9be20", "filename": "src/librustc_ast_passes/ast_validation.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/17a95232b35766a24d2575c7fa1ef52c9fbf97de/src%2Flibrustc_ast_passes%2Fast_validation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/17a95232b35766a24d2575c7fa1ef52c9fbf97de/src%2Flibrustc_ast_passes%2Fast_validation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2Fast_validation.rs?ref=17a95232b35766a24d2575c7fa1ef52c9fbf97de", "patch": "@@ -688,8 +688,13 @@ impl<'a> AstValidator<'a> {\n                 arg_spans.clone(),\n                 \"generic arguments must come before the first constraint\",\n             )\n-            .span_labels(constraint_spans, \"constraint\")\n-            .span_labels(arg_spans, \"generic argument\")\n+            .span_label(constraint_spans[0], &format!(\"constraint{}\", pluralize!(constraint_len)))\n+            .span_label(\n+                *arg_spans.iter().last().unwrap(),\n+                &format!(\"generic argument{}\", pluralize!(args_len)),\n+            )\n+            .span_labels(constraint_spans, \"\")\n+            .span_labels(arg_spans, \"\")\n             .span_suggestion_verbose(\n                 data.span,\n                 &format!("}, {"sha": "3bb6fd6e4f423587337a3b60fb28cb1169da9320", "filename": "src/test/ui/suggestions/suggest-move-types.stderr", "status": "modified", "additions": 20, "deletions": 54, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/17a95232b35766a24d2575c7fa1ef52c9fbf97de/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-move-types.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/17a95232b35766a24d2575c7fa1ef52c9fbf97de/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-move-types.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fsuggest-move-types.stderr?ref=17a95232b35766a24d2575c7fa1ef52c9fbf97de", "patch": "@@ -15,9 +15,8 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:33:43\n    |\n LL | struct Al<'a, T, M: OneWithLifetime<A=(), T, 'a>> {\n-   |                                     ----  ^  ^^ generic argument\n-   |                                     |     |\n-   |                                     |     generic argument\n+   |                                     ----  ^  ^^ generic arguments\n+   |                                     |\n    |                                     constraint\n    |\n help: move the constraint after the generic arguments\n@@ -29,13 +28,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:40:46\n    |\n LL | struct B<T, U, V, M: Three<A=(), B=(), C=(), T, U, V>> {\n-   |                            ----  ----  ----  ^  ^  ^ generic argument\n-   |                            |     |     |     |  |\n-   |                            |     |     |     |  generic argument\n-   |                            |     |     |     generic argument\n-   |                            |     |     constraint\n-   |                            |     constraint\n-   |                            constraint\n+   |                            ----  ----  ----  ^  ^  ^ generic arguments\n+   |                            |\n+   |                            constraints\n    |\n help: move the constraints after the generic arguments\n    |\n@@ -46,16 +41,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:48:71\n    |\n LL | struct Bl<'a, 'b, 'c, T, U, V, M: ThreeWithLifetime<A=(), B=(), C=(), T, U, V, 'a, 'b, 'c>> {\n-   |                                                     ----  ----  ----  ^  ^  ^  ^^  ^^  ^^ generic argument\n-   |                                                     |     |     |     |  |  |  |   |\n-   |                                                     |     |     |     |  |  |  |   generic argument\n-   |                                                     |     |     |     |  |  |  generic argument\n-   |                                                     |     |     |     |  |  generic argument\n-   |                                                     |     |     |     |  generic argument\n-   |                                                     |     |     |     generic argument\n-   |                                                     |     |     constraint\n-   |                                                     |     constraint\n-   |                                                     constraint\n+   |                                                     ----  ----  ----  ^  ^  ^  ^^  ^^  ^^ generic arguments\n+   |                                                     |\n+   |                                                     constraints\n    |\n help: move the constraints after the generic arguments\n    |\n@@ -66,13 +54,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:57:28\n    |\n LL | struct C<T, U, V, M: Three<T, A=(), B=(), C=(), U, V>> {\n-   |                            ^  ----  ----  ----  ^  ^ generic argument\n-   |                            |  |     |     |     |\n-   |                            |  |     |     |     generic argument\n-   |                            |  |     |     constraint\n-   |                            |  |     constraint\n-   |                            |  constraint\n-   |                            generic argument\n+   |                            ^  ----  ----  ----  ^  ^ generic arguments\n+   |                               |\n+   |                               constraints\n    |\n help: move the constraints after the generic arguments\n    |\n@@ -83,16 +67,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:65:53\n    |\n LL | struct Cl<'a, 'b, 'c, T, U, V, M: ThreeWithLifetime<T, 'a, A=(), B=(), C=(), U, 'b, V, 'c>> {\n-   |                                                     ^  ^^  ----  ----  ----  ^  ^^  ^  ^^ generic argument\n-   |                                                     |  |   |     |     |     |  |   |\n-   |                                                     |  |   |     |     |     |  |   generic argument\n-   |                                                     |  |   |     |     |     |  generic argument\n-   |                                                     |  |   |     |     |     generic argument\n-   |                                                     |  |   |     |     constraint\n-   |                                                     |  |   |     constraint\n-   |                                                     |  |   constraint\n-   |                                                     |  generic argument\n-   |                                                     generic argument\n+   |                                                     ^  ^^  ----  ----  ----  ^  ^^  ^  ^^ generic arguments\n+   |                                                            |\n+   |                                                            constraints\n    |\n help: move the constraints after the generic arguments\n    |\n@@ -103,13 +80,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:74:28\n    |\n LL | struct D<T, U, V, M: Three<T, A=(), B=(), U, C=(), V>> {\n-   |                            ^  ----  ----  ^  ----  ^ generic argument\n-   |                            |  |     |     |  |\n-   |                            |  |     |     |  constraint\n-   |                            |  |     |     generic argument\n-   |                            |  |     constraint\n-   |                            |  constraint\n-   |                            generic argument\n+   |                            ^  ----  ----  ^  ----  ^ generic arguments\n+   |                               |\n+   |                               constraints\n    |\n help: move the constraints after the generic arguments\n    |\n@@ -120,16 +93,9 @@ error: generic arguments must come before the first constraint\n   --> $DIR/suggest-move-types.rs:82:53\n    |\n LL | struct Dl<'a, 'b, 'c, T, U, V, M: ThreeWithLifetime<T, 'a, A=(), B=(), U, 'b, C=(), V, 'c>> {\n-   |                                                     ^  ^^  ----  ----  ^  ^^  ----  ^  ^^ generic argument\n-   |                                                     |  |   |     |     |  |   |     |\n-   |                                                     |  |   |     |     |  |   |     generic argument\n-   |                                                     |  |   |     |     |  |   constraint\n-   |                                                     |  |   |     |     |  generic argument\n-   |                                                     |  |   |     |     generic argument\n-   |                                                     |  |   |     constraint\n-   |                                                     |  |   constraint\n-   |                                                     |  generic argument\n-   |                                                     generic argument\n+   |                                                     ^  ^^  ----  ----  ^  ^^  ----  ^  ^^ generic arguments\n+   |                                                            |\n+   |                                                            constraints\n    |\n help: move the constraints after the generic arguments\n    |"}]}