{"sha": "ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "node_id": "C_kwDOAAsO6NoAKGZmY2NmYTFlZWRkMDQ5Yzg3YjFhZDgyODI5N2FlNGM0MTIxYjJlNDA", "commit": {"author": {"name": "BlackHoleFox", "email": "blackholefoxdev@gmail.com", "date": "2022-10-23T20:41:07Z"}, "committer": {"name": "BlackHoleFox", "email": "blackholefoxdev@gmail.com", "date": "2022-10-23T21:39:30Z"}, "message": "Fix x86_64-apple-watchos-sim target to use the correct target_abi", "tree": {"sha": "8d0f752c593cf56ed64abfc987ce9a6dc62558a7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d0f752c593cf56ed64abfc987ce9a6dc62558a7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "html_url": "https://github.com/rust-lang/rust/commit/ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/comments", "author": {"login": "BlackHoleFox", "id": 20936452, "node_id": "MDQ6VXNlcjIwOTM2NDUy", "avatar_url": "https://avatars.githubusercontent.com/u/20936452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlackHoleFox", "html_url": "https://github.com/BlackHoleFox", "followers_url": "https://api.github.com/users/BlackHoleFox/followers", "following_url": "https://api.github.com/users/BlackHoleFox/following{/other_user}", "gists_url": "https://api.github.com/users/BlackHoleFox/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlackHoleFox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlackHoleFox/subscriptions", "organizations_url": "https://api.github.com/users/BlackHoleFox/orgs", "repos_url": "https://api.github.com/users/BlackHoleFox/repos", "events_url": "https://api.github.com/users/BlackHoleFox/events{/privacy}", "received_events_url": "https://api.github.com/users/BlackHoleFox/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BlackHoleFox", "id": 20936452, "node_id": "MDQ6VXNlcjIwOTM2NDUy", "avatar_url": "https://avatars.githubusercontent.com/u/20936452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BlackHoleFox", "html_url": "https://github.com/BlackHoleFox", "followers_url": "https://api.github.com/users/BlackHoleFox/followers", "following_url": "https://api.github.com/users/BlackHoleFox/following{/other_user}", "gists_url": "https://api.github.com/users/BlackHoleFox/gists{/gist_id}", "starred_url": "https://api.github.com/users/BlackHoleFox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BlackHoleFox/subscriptions", "organizations_url": "https://api.github.com/users/BlackHoleFox/orgs", "repos_url": "https://api.github.com/users/BlackHoleFox/repos", "events_url": "https://api.github.com/users/BlackHoleFox/events{/privacy}", "received_events_url": "https://api.github.com/users/BlackHoleFox/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2a37847809bc3df86afb4c65b5fe5f06d99ce20", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2a37847809bc3df86afb4c65b5fe5f06d99ce20", "html_url": "https://github.com/rust-lang/rust/commit/d2a37847809bc3df86afb4c65b5fe5f06d99ce20"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "d062b36742d60550d1c639ee2ee54de642053800", "filename": "compiler/rustc_target/src/spec/apple/tests.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple%2Ftests.rs?ref=ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "patch": "@@ -1,16 +1,17 @@\n use crate::spec::{\n     aarch64_apple_ios_sim, aarch64_apple_watchos_sim, x86_64_apple_ios, x86_64_apple_tvos,\n+    x86_64_apple_watchos_sim,\n };\n \n #[test]\n fn simulator_targets_set_abi() {\n     let all_sim_targets = [\n         x86_64_apple_ios::target(),\n         x86_64_apple_tvos::target(),\n+        x86_64_apple_watchos_sim::target(),\n         aarch64_apple_ios_sim::target(),\n         // Note: There is currently no ARM64 tvOS simulator target\n         aarch64_apple_watchos_sim::target(),\n-        // TODO: x86_64-apple-watchos-sim\n     ];\n \n     for target in all_sim_targets {"}, {"sha": "148031b1569768eca63e872d67ae5f0ff00906da", "filename": "compiler/rustc_target/src/spec/apple_sdk_base.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_sdk_base.rs?ref=ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "patch": "@@ -15,6 +15,7 @@ pub enum Arch {\n     Arm64,\n     Arm64_32,\n     I386,\n+    #[allow(dead_code)] // Some targets don't use this enum...\n     X86_64,\n     X86_64_sim,\n     X86_64_macabi,"}, {"sha": "550566b2aa754dc48c295e9ac1e673e3e16f4cf9", "filename": "compiler/rustc_target/src/spec/x86_64_apple_watchos_sim.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_watchos_sim.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffccfa1eedd049c87b1ad828297ae4c4121b2e40/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_watchos_sim.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_watchos_sim.rs?ref=ffccfa1eedd049c87b1ad828297ae4c4121b2e40", "patch": "@@ -2,7 +2,7 @@ use super::apple_sdk_base::{opts, Arch};\n use crate::spec::{StackProbeType, Target, TargetOptions};\n \n pub fn target() -> Target {\n-    let base = opts(\"watchos\", Arch::X86_64);\n+    let base = opts(\"watchos\", Arch::X86_64_sim);\n \n     let arch = \"x86_64\";\n     let llvm_target = super::apple_base::watchos_sim_llvm_target(arch);"}]}