{"sha": "7a5b1d7939a39c38d3c644a9211b969319496be5", "node_id": "C_kwDOAAsO6NoAKDdhNWIxZDc5MzlhMzljMzhkM2M2NDRhOTIxMWI5NjkzMTk0OTZiZTU", "commit": {"author": {"name": "est31", "email": "MTest31@outlook.com", "date": "2022-08-15T15:28:43Z"}, "committer": {"name": "est31", "email": "MTest31@outlook.com", "date": "2022-08-27T15:08:52Z"}, "message": "Expand the version placeholder to the current version in stability attribute parsing\n\nThat way, the current version is shown in rustdoc etc.", "tree": {"sha": "a22989f62e161e7ef0a2001b0f2ee6b30d47fa7d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a22989f62e161e7ef0a2001b0f2ee6b30d47fa7d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7a5b1d7939a39c38d3c644a9211b969319496be5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7a5b1d7939a39c38d3c644a9211b969319496be5", "html_url": "https://github.com/rust-lang/rust/commit/7a5b1d7939a39c38d3c644a9211b969319496be5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7a5b1d7939a39c38d3c644a9211b969319496be5/comments", "author": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "est31", "id": 8872119, "node_id": "MDQ6VXNlcjg4NzIxMTk=", "avatar_url": "https://avatars.githubusercontent.com/u/8872119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/est31", "html_url": "https://github.com/est31", "followers_url": "https://api.github.com/users/est31/followers", "following_url": "https://api.github.com/users/est31/following{/other_user}", "gists_url": "https://api.github.com/users/est31/gists{/gist_id}", "starred_url": "https://api.github.com/users/est31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/est31/subscriptions", "organizations_url": "https://api.github.com/users/est31/orgs", "repos_url": "https://api.github.com/users/est31/repos", "events_url": "https://api.github.com/users/est31/events{/privacy}", "received_events_url": "https://api.github.com/users/est31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d06e0e53eb083895c0a98b918699e7047f7c87d7", "url": "https://api.github.com/repos/rust-lang/rust/commits/d06e0e53eb083895c0a98b918699e7047f7c87d7", "html_url": "https://github.com/rust-lang/rust/commit/d06e0e53eb083895c0a98b918699e7047f7c87d7"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "70b6bfd1e582d1422eb92148c145fe4725bb4016", "filename": "compiler/rustc_passes/src/lib_features.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7a5b1d7939a39c38d3c644a9211b969319496be5/compiler%2Frustc_passes%2Fsrc%2Flib_features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7a5b1d7939a39c38d3c644a9211b969319496be5/compiler%2Frustc_passes%2Fsrc%2Flib_features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Flib_features.rs?ref=7a5b1d7939a39c38d3c644a9211b969319496be5", "patch": "@@ -54,6 +54,14 @@ impl<'tcx> LibFeatureCollector<'tcx> {\n                         }\n                     }\n                 }\n+                const VERSION_PLACEHOLDER: &str = \"CURRENT_RUSTC_VERSION\";\n+\n+                if let Some(s) = since && s.as_str() == VERSION_PLACEHOLDER {\n+                    let version = option_env!(\"CFG_VERSION\").unwrap_or(\"<current>\");\n+                    let version = version.split(' ').next().unwrap();\n+                    since = Some(Symbol::intern(&version));\n+                }\n+\n                 if let Some(feature) = feature {\n                     // This additional check for stability is to make sure we\n                     // don't emit additional, irrelevant errors for malformed"}]}