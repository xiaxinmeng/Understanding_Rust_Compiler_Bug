{"sha": "5056a43752a34ec633fb71ff395f518bfc7ce52c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUwNTZhNDM3NTJhMzRlYzYzM2ZiNzFmZjM5NWY1MThiZmM3Y2U1MmM=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2016-11-12T12:33:16Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2017-01-24T22:41:11Z"}, "message": "Stabilize Self and associated types in struct expressions and patterns", "tree": {"sha": "2a1fb5201c6584a3e12029e1c1697a0863a9307d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a1fb5201c6584a3e12029e1c1697a0863a9307d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5056a43752a34ec633fb71ff395f518bfc7ce52c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5056a43752a34ec633fb71ff395f518bfc7ce52c", "html_url": "https://github.com/rust-lang/rust/commit/5056a43752a34ec633fb71ff395f518bfc7ce52c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5056a43752a34ec633fb71ff395f518bfc7ce52c/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "249b444efa356c252b264c56ba5041d70d0b9734", "url": "https://api.github.com/repos/rust-lang/rust/commits/249b444efa356c252b264c56ba5041d70d0b9734", "html_url": "https://github.com/rust-lang/rust/commit/249b444efa356c252b264c56ba5041d70d0b9734"}], "stats": {"total": 57, "additions": 2, "deletions": 55}, "files": [{"sha": "265f76417685938537783b6abe90515646f54c68", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -3328,16 +3328,6 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n             }\n             Def::Struct(..) | Def::Union(..) | Def::TyAlias(..) |\n             Def::AssociatedTy(..) | Def::SelfTy(..) => {\n-                match def {\n-                    Def::AssociatedTy(..) | Def::SelfTy(..)\n-                            if !self.tcx.sess.features.borrow().more_struct_aliases => {\n-                        emit_feature_err(&self.tcx.sess.parse_sess,\n-                                         \"more_struct_aliases\", path_span, GateIssue::Language,\n-                                         \"`Self` and associated types in struct \\\n-                                          expressions and patterns are unstable\");\n-                    }\n-                    _ => {}\n-                }\n                 match ty.sty {\n                     ty::TyAdt(adt, substs) if !adt.is_enum() => {\n                         Some((adt.struct_variant(), adt.did, substs))"}, {"sha": "b99300f6195a8f91ec1d21cbc4138c9b199c2f71", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -295,10 +295,6 @@ declare_features! (\n     // The #![windows_subsystem] attribute\n     (active, windows_subsystem, \"1.14.0\", Some(37499)),\n \n-    // Allows using `Self` and associated types in struct expressions and patterns.\n-    (active, more_struct_aliases, \"1.14.0\", Some(37544)),\n-\n-\n     // Allows #[link(..., cfg(..))]\n     (active, link_cfg, \"1.14.0\", Some(37406)),\n \n@@ -378,6 +374,8 @@ declare_features! (\n     // Allows `..` in tuple (struct) patterns\n     (accepted, dotdot_in_tuple_patterns, \"1.14.0\", Some(33627)),\n     (accepted, item_like_imports, \"1.14.0\", Some(35120)),\n+    // Allows using `Self` and associated types in struct expressions and patterns.\n+    (accepted, more_struct_aliases, \"1.14.0\", Some(37544)),\n );\n // (changing above list without updating src/doc/reference.md makes @cmr sad)\n "}, {"sha": "660ac44ce0b53c07130fa71b89f73afac155d9d7", "filename": "src/test/compile-fail/struct-path-associated-type.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-associated-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-associated-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-path-associated-type.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(more_struct_aliases)]\n-\n struct S;\n \n trait Tr {"}, {"sha": "c40d0574955919351ab47a6747376751514b7997", "filename": "src/test/compile-fail/struct-path-self-feature-gate.rs", "status": "removed", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/249b444efa356c252b264c56ba5041d70d0b9734/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-feature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/249b444efa356c252b264c56ba5041d70d0b9734/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-feature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-feature-gate.rs?ref=249b444efa356c252b264c56ba5041d70d0b9734", "patch": "@@ -1,31 +0,0 @@\n-// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// gate-test-more_struct_aliases\n-\n-struct S;\n-\n-trait Tr {\n-    type A;\n-}\n-\n-fn f<T: Tr<A = S>>() {\n-    let _ = T::A {};\n-    //~^ ERROR `Self` and associated types in struct expressions and patterns are unstable\n-}\n-\n-impl S {\n-    fn f() {\n-        let _ = Self {};\n-        //~^ ERROR `Self` and associated types in struct expressions and patterns are unstable\n-    }\n-}\n-\n-fn main() {}"}, {"sha": "f694e7d277c7fec094e70b30b191f17605845340", "filename": "src/test/compile-fail/struct-path-self-type-mismatch.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-type-mismatch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-type-mismatch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-path-self-type-mismatch.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(more_struct_aliases)]\n-\n struct Foo<A> { inner: A }\n \n trait Bar { fn bar(); }"}, {"sha": "067d6ac22dc6fb35a3a7e06fdb98c6be84487de7", "filename": "src/test/compile-fail/struct-path-self.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Fcompile-fail%2Fstruct-path-self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-path-self.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(more_struct_aliases)]\n-\n struct S;\n \n trait Tr {"}, {"sha": "b033ed5c802100f51c53096bbccdb43e5c00d84a", "filename": "src/test/run-pass/struct-path-associated-type.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Frun-pass%2Fstruct-path-associated-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Frun-pass%2Fstruct-path-associated-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstruct-path-associated-type.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(more_struct_aliases)]\n-\n struct S<T, U = u16> {\n     a: T,\n     b: U,"}, {"sha": "c7a282c2a2fa02c289cfdf87028c4439ff57b45f", "filename": "src/test/run-pass/struct-path-self.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Frun-pass%2Fstruct-path-self.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5056a43752a34ec633fb71ff395f518bfc7ce52c/src%2Ftest%2Frun-pass%2Fstruct-path-self.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fstruct-path-self.rs?ref=5056a43752a34ec633fb71ff395f518bfc7ce52c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(more_struct_aliases)]\n-\n use std::ops::Add;\n \n struct S<T, U = u16> {"}]}