{"sha": "a9b02af62b07d20e3e86ad3ee39434e62401bbff", "node_id": "C_kwDOAAsO6NoAKGE5YjAyYWY2MmIwN2QyMGUzZTg2YWQzZWUzOTQzNGU2MjQwMWJiZmY", "commit": {"author": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-12-01T02:22:08Z"}, "committer": {"name": "Nicholas Nethercote", "email": "n.nethercote@gmail.com", "date": "2022-12-02T04:23:28Z"}, "message": "Merge `builtins` into `EarlyLintPassObjects`.\n\nThis avoids calling `early_lint_node` twice.\n\nNote: one `early_lint_node` call had `!pre_expansion` for the second\nargument and the other had `false`. The new single call just has\n`!pre_expansion`. This results in a reduction of duplicate error\nmessages in some `ui-fulldeps` tests. The order of some `ui-fulldeps`\noutput also changes, but that doesn't matter.", "tree": {"sha": "c04539c0f6d07199c9f4905b426beee974493893", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c04539c0f6d07199c9f4905b426beee974493893"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a9b02af62b07d20e3e86ad3ee39434e62401bbff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a9b02af62b07d20e3e86ad3ee39434e62401bbff", "html_url": "https://github.com/rust-lang/rust/commit/a9b02af62b07d20e3e86ad3ee39434e62401bbff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a9b02af62b07d20e3e86ad3ee39434e62401bbff/comments", "author": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nnethercote", "id": 1940286, "node_id": "MDQ6VXNlcjE5NDAyODY=", "avatar_url": "https://avatars.githubusercontent.com/u/1940286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nnethercote", "html_url": "https://github.com/nnethercote", "followers_url": "https://api.github.com/users/nnethercote/followers", "following_url": "https://api.github.com/users/nnethercote/following{/other_user}", "gists_url": "https://api.github.com/users/nnethercote/gists{/gist_id}", "starred_url": "https://api.github.com/users/nnethercote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nnethercote/subscriptions", "organizations_url": "https://api.github.com/users/nnethercote/orgs", "repos_url": "https://api.github.com/users/nnethercote/repos", "events_url": "https://api.github.com/users/nnethercote/events{/privacy}", "received_events_url": "https://api.github.com/users/nnethercote/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "44cb4f70a8c06abe99ea164166ecc38abdde359b", "url": "https://api.github.com/repos/rust-lang/rust/commits/44cb4f70a8c06abe99ea164166ecc38abdde359b", "html_url": "https://github.com/rust-lang/rust/commit/44cb4f70a8c06abe99ea164166ecc38abdde359b"}], "stats": {"total": 234, "additions": 90, "deletions": 144}, "files": [{"sha": "f198aada9b298565f5bb01fab271915c2e6b1924", "filename": "compiler/rustc_lint/src/early.rs", "status": "modified", "additions": 4, "deletions": 15, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/compiler%2Frustc_lint%2Fsrc%2Fearly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/compiler%2Frustc_lint%2Fsrc%2Fearly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fearly.rs?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -393,36 +393,25 @@ pub fn check_ast_node<'a>(\n     lint_store: &LintStore,\n     registered_tools: &RegisteredTools,\n     lint_buffer: Option<LintBuffer>,\n-    builtin_lints: impl EarlyLintPass,\n+    builtin_lints: impl EarlyLintPass + 'static,\n     check_node: impl EarlyCheckNode<'a>,\n ) {\n     let passes =\n         if pre_expansion { &lint_store.pre_expansion_passes } else { &lint_store.early_passes };\n     let mut passes: Vec<_> = passes.iter().map(|p| (p)()).collect();\n-    let mut buffered = lint_buffer.unwrap_or_default();\n+    passes.push(Box::new(builtin_lints));\n \n+    let mut buffered = lint_buffer.unwrap_or_default();\n     buffered = early_lint_node(\n         sess,\n         !pre_expansion,\n         lint_store,\n         registered_tools,\n         buffered,\n-        builtin_lints,\n+        EarlyLintPassObjects { lints: &mut passes[..] },\n         check_node,\n     );\n \n-    if !passes.is_empty() {\n-        buffered = early_lint_node(\n-            sess,\n-            false,\n-            lint_store,\n-            registered_tools,\n-            buffered,\n-            EarlyLintPassObjects { lints: &mut passes[..] },\n-            check_node,\n-        );\n-    }\n-\n     // All of the buffered lints should have been emitted at this point.\n     // If not, that means that we somehow buffered a lint for a node id\n     // that was not lint-checked (perhaps it doesn't exist?). This is a bug."}, {"sha": "82679c9e10a100b0ec5241092ed43abc2f8ed7c4", "filename": "src/test/ui-fulldeps/lint-plugin-cmdline-load.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-load.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-load.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-cmdline-load.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -1,11 +1,3 @@\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> <crate attribute>:1:1\n-   |\n-LL | plugin(lint_plugin_test)\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n warning: item is named 'lintme'\n   --> $DIR/lint-plugin-cmdline-load.rs:8:1\n    |\n@@ -14,5 +6,13 @@ LL | fn lintme() { }\n    |\n    = note: `#[warn(test_lint)]` on by default\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> <crate attribute>:1:1\n+   |\n+LL | plugin(lint_plugin_test)\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n warning: 2 warnings emitted\n "}, {"sha": "5e8891bf1f1ac224eb860bf78abf98263a39f2a3", "filename": "src/test/ui-fulldeps/lint-plugin-deny-attr.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-attr.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -1,11 +1,3 @@\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-plugin-deny-attr.rs:5:1\n-   |\n-LL | #![plugin(lint_plugin_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n error: item is named 'lintme'\n   --> $DIR/lint-plugin-deny-attr.rs:9:1\n    |\n@@ -18,5 +10,13 @@ note: the lint level is defined here\n LL | #![deny(test_lint)]\n    |         ^^^^^^^^^\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-plugin-deny-attr.rs:5:1\n+   |\n+LL | #![plugin(lint_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error; 1 warning emitted\n "}, {"sha": "d5d6b5352145c531ac081fc9e38279117c55bc1a", "filename": "src/test/ui-fulldeps/lint-plugin-deny-cmdline.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-cmdline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-cmdline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-deny-cmdline.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -1,11 +1,3 @@\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-plugin-deny-cmdline.rs:6:1\n-   |\n-LL | #![plugin(lint_plugin_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n error: item is named 'lintme'\n   --> $DIR/lint-plugin-deny-cmdline.rs:9:1\n    |\n@@ -14,5 +6,13 @@ LL | fn lintme() { }\n    |\n    = note: requested on the command line with `-D test-lint`\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-plugin-deny-cmdline.rs:6:1\n+   |\n+LL | #![plugin(lint_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n error: aborting due to previous error; 1 warning emitted\n "}, {"sha": "cf31b3ec1587e788d6a1c748c8ed2c55f1ce4d41", "filename": "src/test/ui-fulldeps/lint-plugin-forbid-attrs.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.rs?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -11,7 +11,6 @@ fn lintme() {} //~ ERROR item is named 'lintme'\n #[allow(test_lint)]\n //~^ ERROR allow(test_lint) incompatible\n //~| ERROR allow(test_lint) incompatible\n-//~| ERROR allow(test_lint) incompatible\n pub fn main() {\n     lintme();\n }"}, {"sha": "ae34b25cc2f808002972340723ac46c7eda961db", "filename": "src/test/ui-fulldeps/lint-plugin-forbid-attrs.stderr", "status": "modified", "additions": 9, "deletions": 18, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-attrs.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -7,23 +7,6 @@ LL | #![forbid(test_lint)]\n LL | #[allow(test_lint)]\n    |         ^^^^^^^^^ overruled by previous forbid\n \n-error[E0453]: allow(test_lint) incompatible with previous forbid\n-  --> $DIR/lint-plugin-forbid-attrs.rs:11:9\n-   |\n-LL | #![forbid(test_lint)]\n-   |           --------- `forbid` level set here\n-...\n-LL | #[allow(test_lint)]\n-   |         ^^^^^^^^^ overruled by previous forbid\n-\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-plugin-forbid-attrs.rs:5:1\n-   |\n-LL | #![plugin(lint_plugin_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n error: item is named 'lintme'\n   --> $DIR/lint-plugin-forbid-attrs.rs:9:1\n    |\n@@ -45,6 +28,14 @@ LL | #![forbid(test_lint)]\n LL | #[allow(test_lint)]\n    |         ^^^^^^^^^ overruled by previous forbid\n \n-error: aborting due to 4 previous errors; 1 warning emitted\n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-plugin-forbid-attrs.rs:5:1\n+   |\n+LL | #![plugin(lint_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n+error: aborting due to 3 previous errors; 1 warning emitted\n \n For more information about this error, try `rustc --explain E0453`."}, {"sha": "b9d1aa85a69308694fae84a4baabb14c86518989", "filename": "src/test/ui-fulldeps/lint-plugin-forbid-cmdline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.rs?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -9,7 +9,7 @@ fn lintme() { } //~ ERROR item is named 'lintme'\n \n #[allow(test_lint)] //~ ERROR allow(test_lint) incompatible\n                     //~| ERROR allow(test_lint) incompatible\n-                    //~| ERROR allow(test_lint)\n+\n pub fn main() {\n     lintme();\n }"}, {"sha": "491c4d2064681e9ae467a2f5b8a8399160cc253b", "filename": "src/test/ui-fulldeps/lint-plugin-forbid-cmdline.stderr", "status": "modified", "additions": 9, "deletions": 17, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin-forbid-cmdline.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -6,22 +6,6 @@ LL | #[allow(test_lint)]\n    |\n    = note: `forbid` lint level was set on command line\n \n-error[E0453]: allow(test_lint) incompatible with previous forbid\n-  --> $DIR/lint-plugin-forbid-cmdline.rs:10:9\n-   |\n-LL | #[allow(test_lint)]\n-   |         ^^^^^^^^^ overruled by previous forbid\n-   |\n-   = note: `forbid` lint level was set on command line\n-\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-plugin-forbid-cmdline.rs:6:1\n-   |\n-LL | #![plugin(lint_plugin_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n error: item is named 'lintme'\n   --> $DIR/lint-plugin-forbid-cmdline.rs:8:1\n    |\n@@ -38,6 +22,14 @@ LL | #[allow(test_lint)]\n    |\n    = note: `forbid` lint level was set on command line\n \n-error: aborting due to 4 previous errors; 1 warning emitted\n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-plugin-forbid-cmdline.rs:6:1\n+   |\n+LL | #![plugin(lint_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n+error: aborting due to 3 previous errors; 1 warning emitted\n \n For more information about this error, try `rustc --explain E0453`."}, {"sha": "dd5d3d72ecf39baff81953fceebedeec5c48deee", "filename": "src/test/ui-fulldeps/lint-plugin.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-plugin.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-plugin.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -1,11 +1,3 @@\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-plugin.rs:5:1\n-   |\n-LL | #![plugin(lint_plugin_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n warning: item is named 'lintme'\n   --> $DIR/lint-plugin.rs:8:1\n    |\n@@ -14,5 +6,13 @@ LL | fn lintme() { }\n    |\n    = note: `#[warn(test_lint)]` on by default\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-plugin.rs:5:1\n+   |\n+LL | #![plugin(lint_plugin_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n warning: 2 warnings emitted\n "}, {"sha": "b060e3a3e38b4c10eaac0a881b39258628a46961", "filename": "src/test/ui-fulldeps/lint-tool-cmdline-allow.stderr", "status": "modified", "additions": 9, "deletions": 13, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-tool-cmdline-allow.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -6,18 +6,6 @@ warning: lint name `test_lint` is deprecated and does not have an effect anymore\n    |\n    = note: requested on the command line with `-A test_lint`\n \n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-tool-cmdline-allow.rs:7:1\n-   |\n-LL | #![plugin(lint_tool_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n-warning: lint name `test_lint` is deprecated and does not have an effect anymore. Use: clippy::test_lint\n-   |\n-   = note: requested on the command line with `-A test_lint`\n-\n warning: item is named 'lintme'\n   --> $DIR/lint-tool-cmdline-allow.rs:9:1\n    |\n@@ -26,9 +14,17 @@ LL | fn lintme() {}\n    |\n    = note: `#[warn(clippy::test_lint)]` on by default\n \n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-tool-cmdline-allow.rs:7:1\n+   |\n+LL | #![plugin(lint_tool_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n warning: lint name `test_lint` is deprecated and does not have an effect anymore. Use: clippy::test_lint\n    |\n    = note: requested on the command line with `-A test_lint`\n \n-warning: 6 warnings emitted\n+warning: 5 warnings emitted\n "}, {"sha": "f92bcd213b844a272914c36cf2ceea10bb58ab0f", "filename": "src/test/ui-fulldeps/lint-tool-test.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.rs?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -10,12 +10,10 @@\n //~^ WARNING lint name `test_lint` is deprecated and may not have an effect in the future\n //~| WARNING lint name `test_lint` is deprecated and may not have an effect in the future\n //~| WARNING lint name `test_lint` is deprecated and may not have an effect in the future\n-//~| WARNING lint name `test_lint` is deprecated and may not have an effect in the future\n #![deny(clippy_group)]\n //~^ WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n //~| WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n //~| WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n-//~| WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n \n fn lintme() { } //~ ERROR item is named 'lintme'\n \n@@ -32,7 +30,6 @@ pub fn main() {\n //~^ WARNING lint name `test_group` is deprecated and may not have an effect in the future\n //~| WARNING lint name `test_group` is deprecated and may not have an effect in the future\n //~| WARNING lint name `test_group` is deprecated and may not have an effect in the future\n-//~| WARNING lint name `test_group` is deprecated and may not have an effect in the future\n #[deny(this_lint_does_not_exist)] //~ WARNING unknown lint: `this_lint_does_not_exist`\n fn hello() {\n     fn lintmetoo() { }"}, {"sha": "027cf8f80cff28b2c1ed539c9b1230dabde0e9c0", "filename": "src/test/ui-fulldeps/lint-tool-test.stderr", "status": "modified", "additions": 26, "deletions": 44, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9b02af62b07d20e3e86ad3ee39434e62401bbff/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint-tool-test.stderr?ref=a9b02af62b07d20e3e86ad3ee39434e62401bbff", "patch": "@@ -7,13 +7,13 @@ LL | #![cfg_attr(foo, warn(test_lint))]\n    = note: `#[warn(renamed_and_removed_lints)]` on by default\n \n warning: lint name `clippy_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:14:9\n+  --> $DIR/lint-tool-test.rs:13:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n \n warning: lint name `test_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:31:9\n+  --> $DIR/lint-tool-test.rs:29:9\n    |\n LL | #[allow(test_group)]\n    |         ^^^^^^^^^^ help: change it to: `clippy::test_group`\n@@ -25,89 +25,71 @@ LL | #![cfg_attr(foo, warn(test_lint))]\n    |                       ^^^^^^^^^ help: change it to: `clippy::test_lint`\n \n warning: lint name `clippy_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:14:9\n-   |\n-LL | #![deny(clippy_group)]\n-   |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n-\n-warning: lint name `test_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:31:9\n-   |\n-LL | #[allow(test_group)]\n-   |         ^^^^^^^^^^ help: change it to: `clippy::test_group`\n-\n-warning: unknown lint: `this_lint_does_not_exist`\n-  --> $DIR/lint-tool-test.rs:36:8\n-   |\n-LL | #[deny(this_lint_does_not_exist)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: `#[warn(unknown_lints)]` on by default\n-\n-warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n-  --> $DIR/lint-tool-test.rs:6:1\n-   |\n-LL | #![plugin(lint_tool_test)]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n-   |\n-   = note: `#[warn(deprecated)]` on by default\n-\n-warning: lint name `test_lint` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:9:23\n-   |\n-LL | #![cfg_attr(foo, warn(test_lint))]\n-   |                       ^^^^^^^^^ help: change it to: `clippy::test_lint`\n-\n-warning: lint name `clippy_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:14:9\n+  --> $DIR/lint-tool-test.rs:13:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n \n error: item is named 'lintme'\n-  --> $DIR/lint-tool-test.rs:20:1\n+  --> $DIR/lint-tool-test.rs:18:1\n    |\n LL | fn lintme() { }\n    | ^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/lint-tool-test.rs:14:9\n+  --> $DIR/lint-tool-test.rs:13:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^\n    = note: `#[deny(clippy::test_lint)]` implied by `#[deny(clippy::group)]`\n \n error: item is named 'lintmetoo'\n-  --> $DIR/lint-tool-test.rs:28:5\n+  --> $DIR/lint-tool-test.rs:26:5\n    |\n LL |     fn lintmetoo() { }\n    |     ^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[deny(clippy::test_group)]` implied by `#[deny(clippy::group)]`\n \n warning: lint name `test_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:31:9\n+  --> $DIR/lint-tool-test.rs:29:9\n    |\n LL | #[allow(test_group)]\n    |         ^^^^^^^^^^ help: change it to: `clippy::test_group`\n \n+warning: unknown lint: `this_lint_does_not_exist`\n+  --> $DIR/lint-tool-test.rs:33:8\n+   |\n+LL | #[deny(this_lint_does_not_exist)]\n+   |        ^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: `#[warn(unknown_lints)]` on by default\n+\n+warning: use of deprecated attribute `plugin`: compiler plugins are deprecated. See https://github.com/rust-lang/rust/pull/64675\n+  --> $DIR/lint-tool-test.rs:6:1\n+   |\n+LL | #![plugin(lint_tool_test)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: may be removed in a future compiler version\n+   |\n+   = note: `#[warn(deprecated)]` on by default\n+\n warning: lint name `test_lint` is deprecated and may not have an effect in the future.\n   --> $DIR/lint-tool-test.rs:9:23\n    |\n LL | #![cfg_attr(foo, warn(test_lint))]\n    |                       ^^^^^^^^^ help: change it to: `clippy::test_lint`\n \n warning: lint name `clippy_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:14:9\n+  --> $DIR/lint-tool-test.rs:13:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n \n warning: lint name `test_group` is deprecated and may not have an effect in the future.\n-  --> $DIR/lint-tool-test.rs:31:9\n+  --> $DIR/lint-tool-test.rs:29:9\n    |\n LL | #[allow(test_group)]\n    |         ^^^^^^^^^^ help: change it to: `clippy::test_group`\n \n-error: aborting due to 2 previous errors; 14 warnings emitted\n+error: aborting due to 2 previous errors; 11 warnings emitted\n "}]}