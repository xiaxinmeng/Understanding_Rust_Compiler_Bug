{"sha": "37069f1a0894f22509af758644eb158b81f10c96", "node_id": "C_kwDOAAsO6NoAKDM3MDY5ZjFhMDg5NGYyMjUwOWFmNzU4NjQ0ZWIxNThiODFmMTBjOTY", "commit": {"author": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2021-10-21T12:57:14Z"}, "committer": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2022-01-01T23:53:11Z"}, "message": "Update references to `-Z symbol-mangling-version` to use `-C`\n\nReplace `-Z symbol-mangling-version=v0` with `-C symbol-mangling-version=v0`.\n\nReplace `-Z symbol-mangling-version=legacy` with\n`-Z unstable-options -C symbol-mangling-version=legacy`.", "tree": {"sha": "d005a3445bf5ae22d141d3b139a459aafb41191e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d005a3445bf5ae22d141d3b139a459aafb41191e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/37069f1a0894f22509af758644eb158b81f10c96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/37069f1a0894f22509af758644eb158b81f10c96", "html_url": "https://github.com/rust-lang/rust/commit/37069f1a0894f22509af758644eb158b81f10c96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/37069f1a0894f22509af758644eb158b81f10c96/comments", "author": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da4a39264beea6305720100448cccd78c4eba737", "url": "https://api.github.com/repos/rust-lang/rust/commits/da4a39264beea6305720100448cccd78c4eba737", "html_url": "https://github.com/rust-lang/rust/commit/da4a39264beea6305720100448cccd78c4eba737"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a932c1c8372b488dc479bbba4d8fd85f864d14f5", "filename": "config.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/37069f1a0894f22509af758644eb158b81f10c96/config.sh", "raw_url": "https://github.com/rust-lang/rust/raw/37069f1a0894f22509af758644eb158b81f10c96/config.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.sh?ref=37069f1a0894f22509af758644eb158b81f10c96", "patch": "@@ -38,7 +38,7 @@ if [[ \"$HOST_TRIPLE\" != \"$TARGET_TRIPLE\" ]]; then\n    fi\n fi\n \n-export RUSTFLAGS=\"$linker -Cpanic=abort -Zsymbol-mangling-version=v0 -Cdebuginfo=2 -Clto=off -Zpanic-abort-tests -Zcodegen-backend=$(pwd)/target/${CHANNEL:-debug}/librustc_codegen_gcc.$dylib_ext --sysroot $(pwd)/build_sysroot/sysroot\"\n+export RUSTFLAGS=\"$linker -Cpanic=abort -Csymbol-mangling-version=v0 -Cdebuginfo=2 -Clto=off -Zpanic-abort-tests -Zcodegen-backend=$(pwd)/target/${CHANNEL:-debug}/librustc_codegen_gcc.$dylib_ext --sysroot $(pwd)/build_sysroot/sysroot\"\n \n # FIXME(antoyo): remove once the atomic shim is gone\n if [[ `uname` == 'Darwin' ]]; then"}, {"sha": "b9aeee795504780d4a1355019eeee0bfa5832243", "filename": "test.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/37069f1a0894f22509af758644eb158b81f10c96/test.sh", "raw_url": "https://github.com/rust-lang/rust/raw/37069f1a0894f22509af758644eb158b81f10c96/test.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test.sh?ref=37069f1a0894f22509af758644eb158b81f10c96", "patch": "@@ -183,7 +183,7 @@ EOF\n     git checkout src/test/ui/type-alias-impl-trait/auxiliary/cross_crate_ice2.rs\n     rm src/test/ui/llvm-asm/llvm-asm-in-out-operand.rs || true # TODO(antoyo): Enable back this test if I ever implement the llvm_asm! macro.\n \n-    RUSTC_ARGS=\"-Zpanic-abort-tests -Zsymbol-mangling-version=v0 -Zcodegen-backend=\"$(pwd)\"/../target/\"$CHANNEL\"/librustc_codegen_gcc.\"$dylib_ext\" --sysroot \"$(pwd)\"/../build_sysroot/sysroot -Cpanic=abort\"\n+    RUSTC_ARGS=\"-Zpanic-abort-tests -Csymbol-mangling-version=v0 -Zcodegen-backend=\"$(pwd)\"/../target/\"$CHANNEL\"/librustc_codegen_gcc.\"$dylib_ext\" --sysroot \"$(pwd)\"/../build_sysroot/sysroot -Cpanic=abort\"\n \n     echo \"[TEST] rustc test suite\"\n     COMPILETEST_FORCE_STAGE0=1 ./x.py test --run always --stage 0 src/test/ui/ --rustc-args \"$RUSTC_ARGS\""}]}