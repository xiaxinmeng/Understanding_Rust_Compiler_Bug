{"sha": "6342aa62efd1b3aa7e1bc8f834f317290b11c519", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzNDJhYTYyZWZkMWIzYWE3ZTFiYzhmODM0ZjMxNzI5MGIxMWM1MTk=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-01-08T12:52:43Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2015-01-08T14:50:31Z"}, "message": "Ignore extra error from test for now", "tree": {"sha": "6e5d849c7d216f72fc995220e7db0a408b09a60c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e5d849c7d216f72fc995220e7db0a408b09a60c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6342aa62efd1b3aa7e1bc8f834f317290b11c519", "comment_count": 7, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6342aa62efd1b3aa7e1bc8f834f317290b11c519", "html_url": "https://github.com/rust-lang/rust/commit/6342aa62efd1b3aa7e1bc8f834f317290b11c519", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6342aa62efd1b3aa7e1bc8f834f317290b11c519/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4a26726000d2b2144b2f929ad0555868d85f32f", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4a26726000d2b2144b2f929ad0555868d85f32f", "html_url": "https://github.com/rust-lang/rust/commit/f4a26726000d2b2144b2f929ad0555868d85f32f"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "374fd2e3ef02bfb3919e29faf78dea82b067cf99", "filename": "src/compiletest/header.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Fcompiletest%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Fcompiletest%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fheader.rs?ref=6342aa62efd1b3aa7e1bc8f834f317290b11c519", "patch": "@@ -42,6 +42,8 @@ pub struct TestProps {\n     pub pretty_compare_only: bool,\n     // Patterns which must not appear in the output of a cfail test.\n     pub forbid_output: Vec<String>,\n+    // Ignore errors which originate from a command line span\n+    pub ignore_command_line: bool,\n }\n \n // Load any test directives embedded in the file\n@@ -60,6 +62,8 @@ pub fn load_props(testfile: &Path) -> TestProps {\n     let mut pretty_mode = None;\n     let mut pretty_compare_only = false;\n     let mut forbid_output = Vec::new();\n+    let mut ignore_command_line = false;\n+\n     iter_header(testfile, |ln| {\n         match parse_error_pattern(ln) {\n           Some(ep) => error_patterns.push(ep),\n@@ -102,6 +106,10 @@ pub fn load_props(testfile: &Path) -> TestProps {\n             pretty_compare_only = parse_pretty_compare_only(ln);\n         }\n \n+        if !ignore_command_line {\n+            ignore_command_line = parse_ignore_command_line(ln);\n+        }\n+\n         match parse_aux_build(ln) {\n             Some(ab) => { aux_builds.push(ab); }\n             None => {}\n@@ -140,6 +148,7 @@ pub fn load_props(testfile: &Path) -> TestProps {\n         pretty_mode: pretty_mode.unwrap_or(\"normal\".to_string()),\n         pretty_compare_only: pretty_compare_only,\n         forbid_output: forbid_output,\n+        ignore_command_line: ignore_command_line,\n     }\n }\n \n@@ -291,6 +300,10 @@ fn parse_pretty_compare_only(line: &str) -> bool {\n     parse_name_directive(line, \"pretty-compare-only\")\n }\n \n+fn parse_ignore_command_line(line: &str) -> bool {\n+    parse_name_directive(line, \"ignore-command-line\")\n+}\n+\n fn parse_exec_env(line: &str) -> Option<(String, String)> {\n     parse_name_value_directive(line, \"exec-env\").map(|nv| {\n         // nv is either FOO or FOO=BAR"}, {"sha": "a97d49134407dd3b7591237cf06bf5eaffb328b7", "filename": "src/compiletest/runtest.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fruntest.rs?ref=6342aa62efd1b3aa7e1bc8f834f317290b11c519", "patch": "@@ -104,7 +104,7 @@ fn run_cfail_test(config: &Config, props: &TestProps, testfile: &Path) {\n         if !props.error_patterns.is_empty() {\n             fatal(\"both error pattern and expected errors specified\");\n         }\n-        check_expected_errors(expected_errors, testfile, &proc_res);\n+        check_expected_errors(props, expected_errors, testfile, &proc_res);\n     } else {\n         check_error_patterns(props, testfile, output_to_check.as_slice(), &proc_res);\n     }\n@@ -941,7 +941,8 @@ fn check_forbid_output(props: &TestProps,\n     }\n }\n \n-fn check_expected_errors(expected_errors: Vec<errors::ExpectedError> ,\n+fn check_expected_errors(props: &TestProps,\n+                         expected_errors: Vec<errors::ExpectedError> ,\n                          testfile: &Path,\n                          proc_res: &ProcRes) {\n \n@@ -996,6 +997,11 @@ fn check_expected_errors(expected_errors: Vec<errors::ExpectedError> ,\n             was_expected = true;\n         }\n \n+        if line.starts_with(\"<command line option>\") &&\n+           props.ignore_command_line {\n+            was_expected = true;\n+        }\n+\n         if !was_expected && is_compiler_error_or_warning(line) {\n             fatal_proc_rec(format!(\"unexpected compiler error or warning: '{}'\",\n                                   line).as_slice(),"}, {"sha": "de326677c868d17b1756c9238f40536b1cfba32e", "filename": "src/test/compile-fail/recursion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Ftest%2Fcompile-fail%2Frecursion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6342aa62efd1b3aa7e1bc8f834f317290b11c519/src%2Ftest%2Fcompile-fail%2Frecursion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frecursion.rs?ref=6342aa62efd1b3aa7e1bc8f834f317290b11c519", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-//~^^^^^^^^^^ ERROR overflow\n+// ignore-command-line: See https://github.com/rust-lang/rust/issues/20747\n //\n // We also get a second error message at the top of file (dummy\n // span). This is not helpful, but also kind of annoying to prevent,"}]}