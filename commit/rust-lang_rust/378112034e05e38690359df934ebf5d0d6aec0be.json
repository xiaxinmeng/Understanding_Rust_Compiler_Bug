{"sha": "378112034e05e38690359df934ebf5d0d6aec0be", "node_id": "C_kwDOAAsO6NoAKDM3ODExMjAzNGUwNWUzODY5MDM1OWRmOTM0ZWJmNWQwZDZhZWMwYmU", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-11-11T15:21:42Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-11T15:21:42Z"}, "message": "Rollup merge of #104245 - kubycsolutions:master, r=jyn514\n\nReduce default configuration's dependency upon static libstdcpp library (#103606)\n\nFixes #103606\n\nRemove default dependency on static libstdcpp except during dist llvm builds (where we want static libraries so `libLLVM.so` is self-contained).", "tree": {"sha": "85e16ba8096442ee8c7428eca8be7f9daabd75f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/85e16ba8096442ee8c7428eca8be7f9daabd75f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/378112034e05e38690359df934ebf5d0d6aec0be", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjbmiGCRBK7hj4Ov3rIwAA/hkIAHUhT6gzaZqdfxkqic1J9uFq\nUYHNm5MvLscmd4xXvftXozmyV4MuuujMRmvxhEXkOQ0jlE3gi9JyfddjdBOt+Zo3\n4vYYV3ykyJRDjWkf0Ut2oX071mb5r8WYdE8TxT9SWGVMI8SYYw4M+oTrqH0Urqpk\nDS+FNU/6YH+y3N2SXassiIzABn/bIVhioKh06TYrsCRdCIztGxqNEU8QR9hQjpln\nWRPl+WIKghNeMQW2cwt3f6j/zAbfnYxlrZ4DVQtpQzmapy/G/LIEZ9r/98gGTdEU\nwPVDW8YrZMD0n026cfaz1/+1ay6Q5b9ZHd1NZyaStidKtU+vKadVcJKKjLdeVOE=\n=t0pC\n-----END PGP SIGNATURE-----\n", "payload": "tree 85e16ba8096442ee8c7428eca8be7f9daabd75f4\nparent 6026785b7a78abbf2f262b575d5dd0bbc65786e2\nparent b8edf0213e794a8bd58206bf66aee3fe81be4e60\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1668180102 +0530\ncommitter GitHub <noreply@github.com> 1668180102 +0530\n\nRollup merge of #104245 - kubycsolutions:master, r=jyn514\n\nReduce default configuration's dependency upon static libstdcpp library (#103606)\n\nFixes #103606\n\nRemove default dependency on static libstdcpp except during dist llvm builds (where we want static libraries so `libLLVM.so` is self-contained).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/378112034e05e38690359df934ebf5d0d6aec0be", "html_url": "https://github.com/rust-lang/rust/commit/378112034e05e38690359df934ebf5d0d6aec0be", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/378112034e05e38690359df934ebf5d0d6aec0be/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6026785b7a78abbf2f262b575d5dd0bbc65786e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6026785b7a78abbf2f262b575d5dd0bbc65786e2", "html_url": "https://github.com/rust-lang/rust/commit/6026785b7a78abbf2f262b575d5dd0bbc65786e2"}, {"sha": "b8edf0213e794a8bd58206bf66aee3fe81be4e60", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8edf0213e794a8bd58206bf66aee3fe81be4e60", "html_url": "https://github.com/rust-lang/rust/commit/b8edf0213e794a8bd58206bf66aee3fe81be4e60"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "c94a27b12a3a73661f7295f57a79f152ba3b9c3c", "filename": "config.toml.example", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/378112034e05e38690359df934ebf5d0d6aec0be/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/378112034e05e38690359df934ebf5d0d6aec0be/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=378112034e05e38690359df934ebf5d0d6aec0be", "patch": "@@ -87,9 +87,10 @@ changelog-seen = 2\n # this flag will indicate that this version check should not be done.\n #version-check = true\n \n-# Link libstdc++ statically into the rustc_llvm instead of relying on a\n-# dynamic version to be available.\n-#static-libstdcpp = true\n+# When true, link libstdc++ statically into the rustc_llvm.\n+# This is useful if you don't want to use the dynamic version of that\n+# library provided by LLVM.\n+#static-libstdcpp = false\n \n # Whether to use Ninja to build LLVM. This runs much faster than make.\n #ninja = true"}, {"sha": "2afce4fac42f898b7a2808e8b2936731cb4e7f8a", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/378112034e05e38690359df934ebf5d0d6aec0be/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/378112034e05e38690359df934ebf5d0d6aec0be/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=378112034e05e38690359df934ebf5d0d6aec0be", "patch": "@@ -781,7 +781,7 @@ impl Config {\n         config.llvm_optimize = true;\n         config.ninja_in_file = true;\n         config.llvm_version_check = true;\n-        config.llvm_static_stdcpp = true;\n+        config.llvm_static_stdcpp = false;\n         config.backtrace = true;\n         config.rust_optimize = true;\n         config.rust_optimize_tests = true;"}, {"sha": "7de06ec35c36bba75da44543d567f7603835341b", "filename": "src/ci/run.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/378112034e05e38690359df934ebf5d0d6aec0be/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/378112034e05e38690359df934ebf5d0d6aec0be/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=378112034e05e38690359df934ebf5d0d6aec0be", "patch": "@@ -123,6 +123,10 @@ else\n   # (And PGO is its own can of worms).\n   if [ \"$NO_DOWNLOAD_CI_LLVM\" = \"\" ]; then\n     RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set llvm.download-ci-llvm=if-available\"\n+  else\n+    # When building for CI we want to use the static C++ Standard library\n+    # included with LLVM, since a dynamic libstdcpp may not be available.\n+    RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set llvm.static-libstdcpp\"\n   fi\n fi\n "}]}