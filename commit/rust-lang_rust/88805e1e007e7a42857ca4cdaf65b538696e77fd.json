{"sha": "88805e1e007e7a42857ca4cdaf65b538696e77fd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4ODA1ZTFlMDA3ZTdhNDI4NTdjYTRjZGFmNjViNTM4Njk2ZTc3ZmQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-17T00:51:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-04-17T00:51:28Z"}, "message": "auto merge of #13485 : adrientetar/rust/newrustdoc, r=brson\n\n- Cherry-pick from #12996\r\n- Use Fira Sans for headlines and sidebar (Light), Heuristica for the body (Adobe Utopia derivative). Both are licensed under the SIL OFL license.\r\n- A few tweaks\r\n\r\nTwo examples: [modified `std`](http://adrientetar.legtux.org/cached/rust-docs/std.htm) and [modified `std::io`](http://adrientetar.legtux.org/cached/rust-docs/io.htm).\r\n\r\ncc #13484\r\n**Blocked on graydon/rust-www#25 (for hosting of the fonts), that's showcased [here](http://adrientetar.github.io/rust-www/).**\r\n\r\ncc @brson, @TheHydroImpulse", "tree": {"sha": "b4ff779865ac0196f0d2d63f9b4db5aa540067e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4ff779865ac0196f0d2d63f9b4db5aa540067e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88805e1e007e7a42857ca4cdaf65b538696e77fd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88805e1e007e7a42857ca4cdaf65b538696e77fd", "html_url": "https://github.com/rust-lang/rust/commit/88805e1e007e7a42857ca4cdaf65b538696e77fd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88805e1e007e7a42857ca4cdaf65b538696e77fd/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ccccbd23680f317509a14ed7a4abb7f1969e78ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/ccccbd23680f317509a14ed7a4abb7f1969e78ae", "html_url": "https://github.com/rust-lang/rust/commit/ccccbd23680f317509a14ed7a4abb7f1969e78ae"}, {"sha": "84bf922b696e235c18c9b7b1b7ecb7b8481bfe34", "url": "https://api.github.com/repos/rust-lang/rust/commits/84bf922b696e235c18c9b7b1b7ecb7b8481bfe34", "html_url": "https://github.com/rust-lang/rust/commit/84bf922b696e235c18c9b7b1b7ecb7b8481bfe34"}], "stats": {"total": 248, "additions": 164, "deletions": 84}, "files": [{"sha": "0b5ca604cc30660a6e52ec419c2567d93dd646ed", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=88805e1e007e7a42857ca4cdaf65b538696e77fd", "patch": "@@ -33,9 +33,12 @@ r##\"<!DOCTYPE html>\n <html lang=\"en\">\n <head>\n     <meta charset=\"utf-8\" />\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n+    <meta name=\"description\" content=\"The {krate} library documentation.\">\n+\n     <title>{title}</title>\n \n-    <link href='http://fonts.googleapis.com/css?family=Oswald:700|Inconsolata:400,700'\n+    <link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700'\n           rel='stylesheet' type='text/css'>\n     <link rel=\"stylesheet\" type=\"text/css\" href=\"{root_path}main.css\">\n \n@@ -51,15 +54,14 @@ r##\"<!DOCTYPE html>\n \n     <section class=\"sidebar\">\n         {logo, select, none{} other{\n-            <a href='{root_path}{krate}/index.html'><img src='#' alt=''/></a>\n+            <a href='{root_path}{krate}/index.html'><img src='#' alt='' width='100px' /></a>\n         }}\n \n         {sidebar}\n     </section>\n \n     <nav class=\"sub\">\n         <form class=\"search-form js-only\">\n-            <button class=\"do-search\">Search</button>\n             <div class=\"search-container\">\n                 <input class=\"search-input\" name=\"search\"\n                        autocomplete=\"off\""}, {"sha": "f842c44dec88c25e4be18750ef479399c9418fd5", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 23, "deletions": 22, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=88805e1e007e7a42857ca4cdaf65b538696e77fd", "patch": "@@ -938,28 +938,8 @@ impl<'a> fmt::Show for Item<'a> {\n             None => {}\n         }\n \n-        if self.cx.include_sources {\n-            let mut path = Vec::new();\n-            clean_srcpath(self.item.source.filename.as_bytes(), |component| {\n-                path.push(component.to_owned());\n-            });\n-            let href = if self.item.source.loline == self.item.source.hiline {\n-                format!(\"{}\", self.item.source.loline)\n-            } else {\n-                format!(\"{}-{}\", self.item.source.loline, self.item.source.hiline)\n-            };\n-            try!(write!(fmt.buf,\n-                          \"<a class='source'\n-                              href='{root}src/{krate}/{path}.html\\\\#{href}'>\\\n-                              [src]</a>\",\n-                          root = self.cx.root_path,\n-                          krate = self.cx.layout.krate,\n-                          path = path.connect(\"/\"),\n-                          href = href));\n-        }\n-\n         // Write the breadcrumb trail header for the top\n-        try!(write!(fmt.buf, \"<h1 class='fqn'>\"));\n+        try!(write!(fmt.buf, \"\\n<h1 class='fqn'>\"));\n         match self.item.inner {\n             clean::ModuleItem(ref m) => if m.is_crate {\n                     try!(write!(fmt.buf, \"Crate \"));\n@@ -982,9 +962,30 @@ impl<'a> fmt::Show for Item<'a> {\n             try!(write!(fmt.buf, \"<a href='{}index.html'>{}</a>::\",\n                           trail, component.as_slice()));\n         }\n-        try!(write!(fmt.buf, \"<a class='{}' href=''>{}</a></h1>\",\n+        try!(write!(fmt.buf, \"<a class='{}' href=''>{}</a>\",\n                       shortty(self.item), self.item.name.get_ref().as_slice()));\n \n+        if self.cx.include_sources {\n+            let mut path = Vec::new();\n+            clean_srcpath(self.item.source.filename.as_bytes(), |component| {\n+                path.push(component.to_owned());\n+            });\n+            let href = if self.item.source.loline == self.item.source.hiline {\n+                format!(\"{}\", self.item.source.loline)\n+            } else {\n+                format!(\"{}-{}\", self.item.source.loline, self.item.source.hiline)\n+            };\n+            try!(write!(fmt.buf,\n+                          \"<a class='source'\\\n+                              href='{root}src/{krate}/{path}.html\\\\#{href}'>\\\n+                              [src]</a>\",\n+                          root = self.cx.root_path,\n+                          krate = self.cx.layout.krate,\n+                          path = path.connect(\"/\"),\n+                          href = href));\n+        }\n+        try!(write!(fmt.buf, \"</h1>\\n\"));\n+\n         match self.item.inner {\n             clean::ModuleItem(ref m) => {\n                 item_module(fmt.buf, self.cx, self.item, m.items.as_slice())"}, {"sha": "9a9b00e7d5d42076895333ff3c87fa074e0c3efa", "filename": "src/librustdoc/html/static/main.css", "status": "modified", "additions": 136, "deletions": 59, "changes": 195, "blob_url": "https://github.com/rust-lang/rust/blob/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "raw_url": "https://github.com/rust-lang/rust/raw/88805e1e007e7a42857ca4cdaf65b538696e77fd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css?ref=88805e1e007e7a42857ca4cdaf65b538696e77fd", "patch": "@@ -9,6 +9,37 @@\n  * option. This file may not be copied, modified, or distributed\n  * except according to those terms.\n  */\n+@font-face {\n+    font-family: 'Fira Sans';\n+    font-style: normal;\n+    font-weight: 400;\n+    src: local('Fira Sans'), url(\"http://rust-lang.org/fonts/FiraSans-Regular.woff\") format('woff');\n+}\n+@font-face {\n+    font-family: 'Fira Sans';\n+    font-style: normal;\n+    font-weight: 500;\n+    src: local('Fira Sans Medium'), url(\"http://rust-lang.org/fonts/FiraSans-Medium.woff\") format('woff');\n+}\n+@font-face {\n+    font-family: 'Heuristica';\n+    font-style: normal;\n+    font-weight: 400;\n+    src: local('Heuristica Regular'), url(\"http://rust-lang.org/fonts/Heuristica-Regular.woff\") format('woff');\n+}\n+@font-face {\n+    font-family: 'Heuristica';\n+    font-style: italic;\n+    font-weight: 400;\n+    src: local('Heuristica Italic'), url(\"http://rust-lang.org/fonts/Heuristica-Italic.woff\") format('woff');\n+}\n+@font-face {\n+    font-family: 'Heuristica';\n+    font-style: normal;\n+    font-weight: 700;\n+    src: local('Heuristica Bold'), url(\"http://rust-lang.org/fonts/Heuristica-Bold.woff\") format('woff');\n+}\n+\n @import \"normalize.css\";\n \n * {\n@@ -20,46 +51,51 @@\n /* General structure and fonts */\n \n body {\n-    min-height: 100%;\n+    color: #333;\n     min-width: 500px;\n-    height: 100%;\n-    font: 13px \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n-    line-height: 165%;\n+    font: 18px \"Heuristica\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n+    line-height: 1.4;\n+    margin: 0;\n     position: relative;\n-    height: auto;\n+    padding: 10px 15px 20px 15px;\n     padding-bottom: 20px;\n }\n \n-h1, .sidebar .location {\n-    font: 700 22px \"Oswald\", Arial, sans-serif;\n+h1, h2, h3, h4 {\n+    color: black;\n+    font-weight: 500;\n+    margin: 30px 0 20px 0;\n+    padding-bottom: 15px;\n+}\n+h1.fqn {\n+    border-bottom: 1px dashed #D5D5D5;\n+    margin-top: 0;\n }\n h2, h3, h4 {\n-    font: 700 16px \"Oswald\", Arial, sans-serif;\n-    text-transform: uppercase;\n+    border-bottom: 1px solid #DDDDDD;\n }\n-h2 code, h3 code, h4 code {\n-    text-transform: none;\n+h2 code, h3 code, h4 code, .block a {\n     font-size: 1.2em;\n }\n+h1, h2, h3, h4, section.sidebar, a.source, .content a, .search-input {\n+    font-family: \"Fira Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n+}\n+\n+ul {\n+    padding-left: 25px;\n+}\n \n-code, pre, h1.fqn {\n-    font-family: \"Inconsolata\", Menlo, Monaco, Consolas, \"DejaVu Sans Mono\", monospace;\n+p {\n+    margin: 0 0 1em 0;\n }\n+\n code, pre {\n-    color: #333;\n+    font-family: Menlo, Monaco, Consolas, Inconsolata, \"DejaVu Sans Mono\", monospace;\n }\n pre {\n     font-size: 15px;\n }\n-h1.fqn {\n-    font-size: 26px;\n-    font-weight: normal;\n-}\n \n-nav {\n-    font: 700 26px \"Oswald\", \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n-    text-transform: uppercase;\n-}\n nav.sub {\n     padding-top: 10px;\n     font-size: 16px;\n@@ -81,42 +117,46 @@ nav.sub {\n .js-only, .hidden { display: none; }\n \n .sidebar {\n-    background: #e9e9e9;\n     padding: 10px;\n }\n .sidebar img {\n     margin: 20px auto;\n     display: block;\n }\n \n-.sidebar .location { margin-bottom: 10px; }\n-.sidebar .block, pre { background: #fff; }\n-.sidebar .block, pre, .content { border-bottom: 2px solid black; }\n-.trait { border-color: #fcae2b !important; }\n-.mod { border-color: #809fc7 !important; }\n-.enum { border-color: #93bc99 !important; }\n-.struct { border-color: #e53700 !important; }\n-.fn { border-color: #a2777f !important; }\n+.sidebar .location {\n+    font-size: 17px;\n+    margin: 30px 0 20px 0;\n+    background: #e1e1e1;\n+    text-align: center;\n+    color: #333;\n+}\n \n .block {\n     padding: 10px;\n     margin-bottom: 10px;\n }\n-.block h2 { margin-top: 0; }\n+.block h2 { \n+    margin-top: 0;\n+    text-align: center;\n+}\n+\n .block a {\n     display: inline-block;\n-    width: 100%;\n     text-overflow: ellipsis;\n     overflow: hidden;\n     line-height: 15px;\n+    padding-left: 5px;\n+    padding-bottom: 6px;\n+    font-size: 14px;\n+    font-weight: 300;\n+    transition: border 500ms ease-out;\n }\n \n .content {\n-    background: #f3f3f3;\n-    padding: 20px 20px 20px 40px;\n+    padding: 20px 0;\n }\n-.content h1 { margin-top: 0; }\n-.content h1, .content h2 { margin-left: -20px; }\n+\n .content pre { padding: 20px; }\n .content.source pre.rust {\n     white-space: pre;\n@@ -155,12 +195,20 @@ nav.sub {\n \n .docblock h1, .docblock h2, .docblock h3, .docblock h4, .docblock h5 {\n     margin-left: 0;\n+    margin: 40px 0 10px 0;\n+    padding-bottom: 10px;\n+    border-bottom: 1px solid #DDD;\n }\n-.docblock h1 { font-size: 1.1em; }\n-.docblock h2 { font-size: 1.05em; }\n+\n+.docblock h1 { font-size: 1.3em; }\n+.docblock h2 { font-size: 1.15em; }\n .docblock h3, .docblock h4, .docblock h5 { font-size: 1em; }\n \n-.content .source { float: right; }\n+.content .source {\n+    float: right;\n+    font-size: 23px;\n+}\n+\n .content table {\n     border-spacing: 0 5px;\n     border-collapse: separate;\n@@ -214,8 +262,7 @@ nav.sum { text-align: right; }\n nav.sub form { display: inline; }\n \n nav, .content {\n-    margin-left: 220px;\n-    margin-right: 20px;\n+    margin-left: 230px;\n }\n \n a {\n@@ -224,28 +271,41 @@ a {\n     background: transparent;\n }\n \n-.content a, .block a.current { font-weight: bold; }\n-\n .content a.trait, .block a.current.trait { color: #ed9603; }\n .content a.mod, .block a.current.mod { color: #4d76ae; }\n .content a.enum, .block a.current.enum { color: #5e9766; }\n .content a.struct, .block a.current.struct { color: #e53700; }\n .content a.fn, .block a.current.fn { color: #8c6067; }\n .content .fnname { color: #8c6067; }\n \n-.search-container {\n-    padding-right: 10px;\n-    overflow: hidden;\n-}\n .search-input {\n-    border: 2px solid #e9e9e9;\n-    border-radius: 2px;\n     width: 100%;\n+    /* Override Normalize.css: we have margins and do\n+     not want to overflow - the `moz` attribute is necessary\n+     until Firefox 29, too early to drop at this point */\n+    -moz-box-sizing: border-box !important;\n+    box-sizing: border-box !important;\n+    outline: none;\n+    border: none;\n+    border-radius: 1px;\n+    color: #555;\n+    margin-top: 5px;\n+    padding: 10px 16px;\n+    font-size: 17px;\n+    box-shadow: 0 0 0 1px #e0e0e0, 0 0 0 2px transparent;\n+    transition: border-color 300ms ease;\n+    transition: border-radius 300ms ease-in-out;\n+    transition: box-shadow 300ms ease-in-out;\n+}\n+\n+.search-input:focus {\n+    border-color: #66afe9;\n+    border-radius: 2px;\n+    border: 0;\n+    outline: 0;\n+    box-shadow: 0 0 8px #078dd8;\n }\n-.do-search {\n-    float: right;\n-    width: 62px;\n-}\n+\n .search-results .desc {\n     white-space: nowrap;\n     text-overflow: ellipsis;\n@@ -288,13 +348,14 @@ a {\n }\n \n .stability {\n-    border-left: 5px solid #000;\n+    border-left: 6px solid #000;\n     border-radius: 3px;\n-    padding: 0 3px;\n-    float: right;\n-    background: #fff;\n+    padding: 8px 3px 8px 10px;\n     text-transform: lowercase;\n+    display: block;\n+    margin-bottom: 20px;\n }\n+\n .stability.Deprecated { border-color: #D60027; color: #880017; }\n .stability.Experimental { border-color: #EC5315; color: #a53c0e; }\n .stability.Unstable { border-color: #FFD700; color: #b39800; }\n@@ -304,7 +365,7 @@ a {\n \n :target { background: #FDFFD3; }\n \n-pre.rust, pre.line-numbers { background-color: #FDFDFD; }\n+pre.rust, pre.line-numbers { background-color: #F5F5F5; }\n \n /* Code highlighting */\n pre.rust .kw { color: #8959A8; }\n@@ -325,3 +386,19 @@ h5.section-link:hover a:after,\n h6.section-link:hover a:after {\n   content: '\u2002\u00a7\u2002';\n }\n+\n+/** Media Queries **/\n+\n+@media (max-width: 700px) {\n+    .sidebar {\n+        display: none;\n+    }\n+\n+    .content {\n+        margin-left: 0px;\n+    }\n+\n+    nav.sub {\n+        margin: 0 auto;\n+    }\n+}\n\\ No newline at end of file"}]}