{"sha": "ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "node_id": "C_kwDOAAsO6NoAKGRkYzVkMmM5ZDJjMGQxMDA3MDc2NjZkNWYyMTY4Y2NjMGRhYjQwZWQ", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-06-02T09:13:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-02T09:13:21Z"}, "message": "Rollup merge of #96894 - JohnTitor:expect-non-local-track-caller, r=petrochenkov\n\nApply track_caller to closure on `expect_non_local()`\n\nr? `@petrochenkov`\n\nAlternatively we could remove the closure by replicating the same logic of `map_id()`. I'm happy to switch to it if you'd like.", "tree": {"sha": "9c98ef8da4bebc5523f390519c4dedb6b4d2af79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c98ef8da4bebc5523f390519c4dedb6b4d2af79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJimH8xCRBK7hj4Ov3rIwAAysEIAFCyD1HdyN3NoqjwDQmkdLvM\nqGWuo6CyQMhQasgAlDuCxCcBSCwJtK0wm5SaDXQOGvZ2yQgPIFj+eHZnEe6eue9Z\n1UsdCvlowccoLbi6IPZ7YdDu2Jy/eMoZPsll8ueySEqETIyWDUXvH2HuO7x1Xx4y\nIkFXN+I/cAD01mVGou3CD54WVyW+fJNPJ/g3T4XruPZB1pEzN/sCn5HAh8gLhkh8\nr3ZOeJZD+JBozs9Iitnbtr1aQeaHHaqnDqcYtc3TMrN3fSJ4JT1qp38h7lrO5EPy\nEBu1ZlmqPzr3X0EXYswJ8c3LD+ZpvUWvm9gLgjmG8DAnIngY6VURPdL8r+Cotsc=\n=NVJb\n-----END PGP SIGNATURE-----\n", "payload": "tree 9c98ef8da4bebc5523f390519c4dedb6b4d2af79\nparent fb1976011e3df96b5d3eccd6b2f4e51ef7dc8f16\nparent c7db4b08fff9591adb2c7a66d5f81ce685655622\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1654161201 +0200\ncommitter GitHub <noreply@github.com> 1654161201 +0200\n\nRollup merge of #96894 - JohnTitor:expect-non-local-track-caller, r=petrochenkov\n\nApply track_caller to closure on `expect_non_local()`\n\nr? `@petrochenkov`\n\nAlternatively we could remove the closure by replicating the same logic of `map_id()`. I'm happy to switch to it if you'd like.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "html_url": "https://github.com/rust-lang/rust/commit/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb1976011e3df96b5d3eccd6b2f4e51ef7dc8f16", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb1976011e3df96b5d3eccd6b2f4e51ef7dc8f16", "html_url": "https://github.com/rust-lang/rust/commit/fb1976011e3df96b5d3eccd6b2f4e51ef7dc8f16"}, {"sha": "c7db4b08fff9591adb2c7a66d5f81ce685655622", "url": "https://api.github.com/repos/rust-lang/rust/commits/c7db4b08fff9591adb2c7a66d5f81ce685655622", "html_url": "https://github.com/rust-lang/rust/commit/c7db4b08fff9591adb2c7a66d5f81ce685655622"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "414f6272591966b60d9fdb49e21e6473ca1f92b6", "filename": "compiler/rustc_hir/src/def.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed/compiler%2Frustc_hir%2Fsrc%2Fdef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed/compiler%2Frustc_hir%2Fsrc%2Fdef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir%2Fsrc%2Fdef.rs?ref=ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "patch": "@@ -671,7 +671,10 @@ impl<Id> Res<Id> {\n \n     #[track_caller]\n     pub fn expect_non_local<OtherId>(self) -> Res<OtherId> {\n-        self.map_id(|_| panic!(\"unexpected `Res::Local`\"))\n+        self.map_id(\n+            #[track_caller]\n+            |_| panic!(\"unexpected `Res::Local`\"),\n+        )\n     }\n \n     pub fn macro_kind(self) -> Option<MacroKind> {"}, {"sha": "d845c433d8c5f6874f7ff8e739a3582afca9579d", "filename": "compiler/rustc_hir/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed/compiler%2Frustc_hir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed/compiler%2Frustc_hir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir%2Fsrc%2Flib.rs?ref=ddc5d2c9d2c0d100707666d5f2168ccc0dab40ed", "patch": "@@ -3,6 +3,7 @@\n //! [rustc dev guide]: https://rustc-dev-guide.rust-lang.org/hir.html\n \n #![feature(associated_type_defaults)]\n+#![feature(closure_track_caller)]\n #![feature(const_btree_new)]\n #![feature(let_else)]\n #![feature(once_cell)]"}]}