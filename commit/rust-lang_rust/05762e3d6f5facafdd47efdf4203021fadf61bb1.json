{"sha": "05762e3d6f5facafdd47efdf4203021fadf61bb1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1NzYyZTNkNmY1ZmFjYWZkZDQ3ZWZkZjQyMDMwMjFmYWRmNjFiYjE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-01T20:43:12Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-08-01T20:43:12Z"}, "message": "Auto merge of #74726 - oli-obk:tracing, r=Mark-Simulacrum\n\nMove from `log` to `tracing`\n\nThe only visible change is that we now get timestamps in our logs:\n\n```\nJul 24 18:41:01.065 TRACE rustc_mir::transform::const_prop: skipping replace of Rvalue::Use(const () because it is already a const\nJul 24 18:41:01.065 TRACE rustc_mir::transform::const_prop: propagated into _2\nJul 24 18:41:01.065 TRACE rustc_mir::transform::const_prop: visit_constant: const ()\n```\n\nThis PR was explicitly designed to be as low-impact as possible. We can now move to using the name `tracing` insteads of `log` on a crate-by-crate basis and use any of the other tracing features where desirable.\n\nAs far as I can tell this will allow tools to seamlessly keep working (since they are using `rustc_driver::init_log...`).\n\nThis is the first half of step 1 of the accepted `tracing` MCP (https://github.com/rust-lang/compiler-team/issues/331)", "tree": {"sha": "f0540876cd3aa3701a30b234c7c9be1c2523ab5f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f0540876cd3aa3701a30b234c7c9be1c2523ab5f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05762e3d6f5facafdd47efdf4203021fadf61bb1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05762e3d6f5facafdd47efdf4203021fadf61bb1", "html_url": "https://github.com/rust-lang/rust/commit/05762e3d6f5facafdd47efdf4203021fadf61bb1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05762e3d6f5facafdd47efdf4203021fadf61bb1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "de10abf50c514ca648eb3bdcbc912d46b7eb32a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/de10abf50c514ca648eb3bdcbc912d46b7eb32a6", "html_url": "https://github.com/rust-lang/rust/commit/de10abf50c514ca648eb3bdcbc912d46b7eb32a6"}, {"sha": "c7290379be40f930802f0deea87cdb313332e5cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/c7290379be40f930802f0deea87cdb313332e5cc", "html_url": "https://github.com/rust-lang/rust/commit/c7290379be40f930802f0deea87cdb313332e5cc"}], "stats": {"total": 250, "additions": 161, "deletions": 89}, "files": [{"sha": "7e90b7e6fba1c8b79c358eeeb73d938f3a6d8c70", "filename": "Cargo.lock", "status": "modified", "additions": 98, "deletions": 45, "changes": 143, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -61,7 +61,7 @@ version = \"0.6.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"c7021ce4924a3f25f802b2cccd1af585e39ea1a363a1aa2e72afe54b67a3a7a7\"\n dependencies = [\n- \"ansi_term\",\n+ \"ansi_term 0.11.0\",\n ]\n \n [[package]]\n@@ -79,6 +79,15 @@ dependencies = [\n  \"winapi 0.3.8\",\n ]\n \n+[[package]]\n+name = \"ansi_term\"\n+version = \"0.12.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"d52a9bb7ec0cf484c551830a7ce27bd20d67eac647e1befb56b0be4ee39a55d2\"\n+dependencies = [\n+ \"winapi 0.3.8\",\n+]\n+\n [[package]]\n name = \"anyhow\"\n version = \"1.0.31\"\n@@ -496,7 +505,7 @@ version = \"2.33.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"5067f5bb2d80ef5d68b4c87db81601f0b75bca627bc2ef76b141d7b846a3c6d9\"\n dependencies = [\n- \"ansi_term\",\n+ \"ansi_term 0.11.0\",\n  \"atty\",\n  \"bitflags\",\n  \"strsim\",\n@@ -616,12 +625,12 @@ dependencies = [\n  \"glob\",\n  \"lazy_static\",\n  \"libc\",\n- \"log\",\n  \"miow 0.3.3\",\n  \"regex\",\n  \"rustfix\",\n  \"serde\",\n  \"serde_json\",\n+ \"tracing\",\n  \"walkdir\",\n  \"winapi 0.3.8\",\n ]\n@@ -1741,6 +1750,15 @@ dependencies = [\n  \"tendril\",\n ]\n \n+[[package]]\n+name = \"matchers\"\n+version = \"0.0.1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"f099785f7595cc4b4553a174ce30dd7589ef93391ff414dbb67f62392b9e0ce1\"\n+dependencies = [\n+ \"regex-automata\",\n+]\n+\n [[package]]\n name = \"matches\"\n version = \"0.1.8\"\n@@ -2314,7 +2332,7 @@ version = \"0.6.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"3f81e1644e1b54f5a68959a29aa86cde704219254669da328ecfdf6a1f09d427\"\n dependencies = [\n- \"ansi_term\",\n+ \"ansi_term 0.11.0\",\n  \"ctor\",\n  \"difference\",\n  \"output_vt100\",\n@@ -2678,6 +2696,16 @@ dependencies = [\n  \"thread_local\",\n ]\n \n+[[package]]\n+name = \"regex-automata\"\n+version = \"0.1.9\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"ae1ded71d66a4a97f5e961fd0cb25a5f366a42a41570d16a763a69c092c26ae4\"\n+dependencies = [\n+ \"byteorder\",\n+ \"regex-syntax\",\n+]\n+\n [[package]]\n name = \"regex-syntax\"\n version = \"0.6.17\"\n@@ -3228,7 +3256,6 @@ name = \"rustc_ast\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n- \"log\",\n  \"rustc_data_structures\",\n  \"rustc_index\",\n  \"rustc_lexer\",\n@@ -3237,13 +3264,13 @@ dependencies = [\n  \"rustc_span\",\n  \"scoped-tls\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_ast_lowering\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_arena\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n@@ -3255,14 +3282,14 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_ast_passes\"\n version = \"0.0.0\"\n dependencies = [\n  \"itertools 0.8.0\",\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_attr\",\n@@ -3272,16 +3299,17 @@ dependencies = [\n  \"rustc_parse\",\n  \"rustc_session\",\n  \"rustc_span\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_ast_pretty\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_span\",\n  \"rustc_target\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3304,7 +3332,6 @@ dependencies = [\n name = \"rustc_builtin_macros\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_attr\",\n@@ -3318,6 +3345,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3327,7 +3355,6 @@ dependencies = [\n  \"bitflags\",\n  \"flate2\",\n  \"libc\",\n- \"log\",\n  \"measureme\",\n  \"rustc-demangle\",\n  \"rustc_ast\",\n@@ -3347,6 +3374,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3357,7 +3385,6 @@ dependencies = [\n  \"cc\",\n  \"jobserver\",\n  \"libc\",\n- \"log\",\n  \"memmap\",\n  \"num_cpus\",\n  \"pathdiff\",\n@@ -3377,6 +3404,7 @@ dependencies = [\n  \"rustc_symbol_mangling\",\n  \"rustc_target\",\n  \"tempfile\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3391,7 +3419,6 @@ dependencies = [\n  \"jobserver\",\n  \"lazy_static\",\n  \"libc\",\n- \"log\",\n  \"measureme\",\n  \"once_cell\",\n  \"parking_lot 0.10.2\",\n@@ -3404,17 +3431,16 @@ dependencies = [\n  \"smallvec 1.4.0\",\n  \"stable_deref_trait\",\n  \"stacker\",\n+ \"tracing\",\n  \"winapi 0.3.8\",\n ]\n \n [[package]]\n name = \"rustc_driver\"\n version = \"0.0.0\"\n dependencies = [\n- \"env_logger 0.7.1\",\n  \"lazy_static\",\n  \"libc\",\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_codegen_ssa\",\n@@ -3436,6 +3462,8 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n+ \"tracing\",\n+ \"tracing-subscriber\",\n  \"winapi 0.3.8\",\n ]\n \n@@ -3449,12 +3477,12 @@ version = \"0.0.0\"\n dependencies = [\n  \"annotate-snippets 0.8.0\",\n  \"atty\",\n- \"log\",\n  \"rustc_data_structures\",\n  \"rustc_serialize\",\n  \"rustc_span\",\n  \"termcolor\",\n  \"termize\",\n+ \"tracing\",\n  \"unicode-width\",\n  \"winapi 0.3.8\",\n ]\n@@ -3463,7 +3491,6 @@ dependencies = [\n name = \"rustc_expand\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_passes\",\n  \"rustc_ast_pretty\",\n@@ -3477,6 +3504,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3501,7 +3529,6 @@ name = \"rustc_hir\"\n version = \"0.0.0\"\n dependencies = [\n  \"lazy_static\",\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n  \"rustc_index\",\n@@ -3510,6 +3537,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3527,7 +3555,6 @@ dependencies = [\n name = \"rustc_incremental\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rand 0.7.3\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n@@ -3538,6 +3565,7 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_session\",\n  \"rustc_span\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3552,7 +3580,6 @@ dependencies = [\n name = \"rustc_infer\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n@@ -3566,14 +3593,14 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_interface\"\n version = \"0.0.0\"\n dependencies = [\n  \"libc\",\n- \"log\",\n  \"once_cell\",\n  \"rustc-rayon\",\n  \"rustc_ast\",\n@@ -3609,6 +3636,7 @@ dependencies = [\n  \"rustc_typeck\",\n  \"smallvec 1.4.0\",\n  \"tempfile\",\n+ \"tracing\",\n  \"winapi 0.3.8\",\n ]\n \n@@ -3623,7 +3651,6 @@ dependencies = [\n name = \"rustc_lint\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_attr\",\n@@ -3637,6 +3664,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n+ \"tracing\",\n  \"unicode-security\",\n ]\n \n@@ -3665,7 +3693,6 @@ version = \"0.0.0\"\n dependencies = [\n  \"flate2\",\n  \"libc\",\n- \"log\",\n  \"memmap\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n@@ -3682,6 +3709,7 @@ dependencies = [\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n  \"stable_deref_trait\",\n+ \"tracing\",\n  \"winapi 0.3.8\",\n ]\n \n@@ -3692,7 +3720,6 @@ dependencies = [\n  \"bitflags\",\n  \"byteorder\",\n  \"chalk-ir\",\n- \"log\",\n  \"measureme\",\n  \"polonius-engine\",\n  \"rustc-rayon-core\",\n@@ -3713,6 +3740,7 @@ dependencies = [\n  \"rustc_target\",\n  \"scoped-tls\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3721,7 +3749,6 @@ version = \"0.0.0\"\n dependencies = [\n  \"either\",\n  \"itertools 0.8.0\",\n- \"log\",\n  \"log_settings\",\n  \"polonius-engine\",\n  \"rustc_apfloat\",\n@@ -3742,13 +3769,13 @@ dependencies = [\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_mir_build\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_apfloat\",\n  \"rustc_arena\",\n  \"rustc_ast\",\n@@ -3765,14 +3792,14 @@ dependencies = [\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_parse\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_data_structures\",\n@@ -3781,6 +3808,7 @@ dependencies = [\n  \"rustc_lexer\",\n  \"rustc_session\",\n  \"rustc_span\",\n+ \"tracing\",\n  \"unicode-normalization\",\n ]\n \n@@ -3796,7 +3824,6 @@ dependencies = [\n name = \"rustc_passes\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n  \"rustc_data_structures\",\n@@ -3808,6 +3835,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3828,7 +3856,6 @@ dependencies = [\n name = \"rustc_privacy\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_attr\",\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n@@ -3837,13 +3864,13 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_typeck\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_query_system\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"parking_lot 0.10.2\",\n  \"rustc-rayon-core\",\n  \"rustc_arena\",\n@@ -3853,14 +3880,14 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_span\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_resolve\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n- \"log\",\n  \"rustc_arena\",\n  \"rustc_ast\",\n  \"rustc_ast_lowering\",\n@@ -3877,13 +3904,13 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_save_analysis\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rls-data\",\n  \"rls-span\",\n  \"rustc_ast\",\n@@ -3896,6 +3923,7 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"serde_json\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3912,7 +3940,6 @@ version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n  \"getopts\",\n- \"log\",\n  \"num_cpus\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n@@ -3922,14 +3949,14 @@ dependencies = [\n  \"rustc_serialize\",\n  \"rustc_span\",\n  \"rustc_target\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_span\"\n version = \"0.0.0\"\n dependencies = [\n  \"cfg-if\",\n- \"log\",\n  \"md-5\",\n  \"rustc_arena\",\n  \"rustc_data_structures\",\n@@ -3938,14 +3965,14 @@ dependencies = [\n  \"rustc_serialize\",\n  \"scoped-tls\",\n  \"sha-1\",\n+ \"tracing\",\n  \"unicode-width\",\n ]\n \n [[package]]\n name = \"rustc_symbol_mangling\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"punycode\",\n  \"rustc-demangle\",\n  \"rustc_ast\",\n@@ -3955,19 +3982,20 @@ dependencies = [\n  \"rustc_session\",\n  \"rustc_span\",\n  \"rustc_target\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_target\"\n version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n- \"log\",\n  \"rustc_data_structures\",\n  \"rustc_index\",\n  \"rustc_macros\",\n  \"rustc_serialize\",\n  \"rustc_span\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -3984,7 +4012,6 @@ checksum = \"b725dadae9fabc488df69a287f5a99c5eaf5d10853842a8a3dfac52476f544ee\"\n name = \"rustc_trait_selection\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n  \"rustc_data_structures\",\n@@ -3999,6 +4026,7 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -4007,7 +4035,6 @@ version = \"0.0.0\"\n dependencies = [\n  \"chalk-ir\",\n  \"chalk-solve\",\n- \"log\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n  \"rustc_hir\",\n@@ -4017,13 +4044,13 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_trait_selection\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_ty\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n  \"rustc_hir\",\n@@ -4033,13 +4060,13 @@ dependencies = [\n  \"rustc_span\",\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n+ \"tracing\",\n ]\n \n [[package]]\n name = \"rustc_typeck\"\n version = \"0.0.0\"\n dependencies = [\n- \"log\",\n  \"rustc_arena\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n@@ -4055,6 +4082,7 @@ dependencies = [\n  \"rustc_target\",\n  \"rustc_trait_selection\",\n  \"smallvec 1.4.0\",\n+ \"tracing\",\n ]\n \n [[package]]\n@@ -4284,6 +4312,15 @@ dependencies = [\n  \"opaque-debug\",\n ]\n \n+[[package]]\n+name = \"sharded-slab\"\n+version = \"0.0.9\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"06d5a3f5166fb5b42a5439f2eee8b9de149e235961e3eb21c5808fc3ea17ff3e\"\n+dependencies = [\n+ \"lazy_static\",\n+]\n+\n [[package]]\n name = \"shell-escape\"\n version = \"0.1.4\"\n@@ -4931,9 +4968,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing\"\n-version = \"0.1.15\"\n+version = \"0.1.18\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a41f40ed0e162c911ac6fcb53ecdc8134c46905fdbbae8c50add462a538b495f\"\n+checksum = \"f0aae59226cf195d8e74d4b34beae1859257efb4e5fed3f147d2dc2c7d372178\"\n dependencies = [\n  \"cfg-if\",\n  \"tracing-attributes\",\n@@ -4942,9 +4979,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing-attributes\"\n-version = \"0.1.8\"\n+version = \"0.1.9\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"99bbad0de3fd923c9c3232ead88510b783e5a4d16a6154adffa3d53308de984c\"\n+checksum = \"f0693bf8d6f2bf22c690fc61a9d21ac69efdbb894a17ed596b9af0f01e64b84b\"\n dependencies = [\n  \"proc-macro2 1.0.3\",\n  \"quote 1.0.2\",\n@@ -4953,11 +4990,27 @@ dependencies = [\n \n [[package]]\n name = \"tracing-core\"\n-version = \"0.1.10\"\n+version = \"0.1.12\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"b2734b5a028fa697686f16c6d18c2c6a3c7e41513f9a213abb6754c4acb3c8d7\"\n+dependencies = [\n+ \"lazy_static\",\n+]\n+\n+[[package]]\n+name = \"tracing-subscriber\"\n+version = \"0.2.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"0aa83a9a47081cd522c09c81b31aec2c9273424976f922ad61c053b58350b715\"\n+checksum = \"f7b33f8b2ef2ab0c3778c12646d9c42a24f7772bee4cdafc72199644a9f58fdc\"\n dependencies = [\n+ \"ansi_term 0.12.1\",\n  \"lazy_static\",\n+ \"matchers\",\n+ \"parking_lot 0.9.0\",\n+ \"regex\",\n+ \"sharded-slab\",\n+ \"smallvec 1.4.0\",\n+ \"tracing-core\",\n ]\n \n [[package]]"}, {"sha": "a36f49bd4146b60b82ddd07a1603eb7754f632c8", "filename": "src/librustc_ast/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_serialize = { path = \"../librustc_serialize\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n scoped-tls = \"1.0\"\n rustc_span = { path = \"../librustc_span\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "51f34a1b78e97753565327d42c69569aeb55982d", "filename": "src/librustc_ast_lowering/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_lowering%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_lowering%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_arena = { path = \"../librustc_arena\" }\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_hir = { path = \"../librustc_hir\" }\n rustc_target = { path = \"../librustc_target\" }"}, {"sha": "c53089a4afc5c03ab1dc969a8e1173bf0a0acf6f", "filename": "src/librustc_ast_passes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_passes%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n \n [dependencies]\n itertools = \"0.8\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_attr = { path = \"../librustc_attr\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "4035346d35446aa916c2146780821781e9c1013b", "filename": "src/librustc_ast_pretty/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_pretty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ast_pretty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_pretty%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n doctest = false\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_span = { path = \"../librustc_span\" }\n rustc_ast = { path = \"../librustc_ast\" }\n rustc_target = { path = \"../librustc_target\" }"}, {"sha": "c612781153e8fa5476e9f30eeee8fc944ba61b77", "filename": "src/librustc_builtin_macros/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_builtin_macros%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_builtin_macros%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_builtin_macros%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_parse_format = { path = \"../librustc_parse_format\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_attr = { path = \"../librustc_attr\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "ec4dfabdcc2f04bd5d9676af0417e5ba9837089a", "filename": "src/librustc_codegen_llvm/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_codegen_llvm%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_codegen_llvm%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -15,7 +15,7 @@ bitflags = \"1.0\"\n flate2 = \"1.0\"\n libc = \"0.2\"\n measureme = \"0.7.1\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc-demangle = \"0.1\"\n rustc_attr = { path = \"../librustc_attr\" }"}, {"sha": "8fa0de37648f3649ec68f15a2068804b2c1b52f6", "filename": "src/librustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -14,7 +14,7 @@ bitflags = \"1.2.1\"\n cc = \"1.0.1\"\n num_cpus = \"1.0\"\n memmap = \"0.7\"\n-log = \"0.4.5\"\n+log = { package = \"tracing\", version = \"0.1\" }\n libc = \"0.2.50\"\n jobserver = \"0.1.11\"\n tempfile = \"3.1\""}, {"sha": "811d1e49626c4879d3249d5f9ec109eb17f413bb", "filename": "src/librustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,7 +12,7 @@ doctest = false\n [dependencies]\n ena = \"0.14\"\n indexmap = \"1\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n jobserver_crate = { version = \"0.1.13\", package = \"jobserver\" }\n lazy_static = \"1\"\n once_cell = { version = \"1\", features = [\"parking_lot\"] }"}, {"sha": "6474a69b216a91e98e784614b766752b485211ad", "filename": "src/librustc_driver/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_driver%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_driver%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,8 +12,8 @@ crate-type = [\"dylib\"]\n [dependencies]\n lazy_static = \"1.0\"\n libc = \"0.2\"\n-log = \"0.4\"\n-env_logger = { version = \"0.7\", default-features = false }\n+log = { package = \"tracing\", version = \"0.1.18\", features = [\"release_max_level_info\"]  }\n+tracing-subscriber = { version = \"0.2.10\", default-features = false, features = [\"fmt\", \"env-filter\", \"smallvec\", \"parking_lot\", \"ansi\"] }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_target = { path = \"../librustc_target\" }"}, {"sha": "7af640c109ed57dbfa134e42159a3fa0f1266d1f", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -1224,9 +1224,26 @@ pub fn install_ice_hook() {\n }\n \n /// This allows tools to enable rust logging without having to magically match rustc's\n-/// log crate version\n+/// log crate version.\n pub fn init_rustc_env_logger() {\n-    env_logger::init_from_env(\"RUSTC_LOG\");\n+    init_env_logger(\"RUSTC_LOG\")\n+}\n+\n+/// This allows tools to enable rust logging without having to magically match rustc's\n+/// log crate version. In contrast to `init_rustc_env_logger` it allows you to choose an env var\n+/// other than `RUSTC_LOG`.\n+pub fn init_env_logger(env: &str) {\n+    // Don't register a dispatcher if there's no filter to print anything\n+    match std::env::var(env) {\n+        Err(_) => return,\n+        Ok(s) if s.is_empty() => return,\n+        Ok(_) => {}\n+    }\n+    let builder = tracing_subscriber::FmtSubscriber::builder();\n+\n+    let builder = builder.with_env_filter(tracing_subscriber::EnvFilter::from_env(env));\n+\n+    builder.init()\n }\n \n pub fn main() -> ! {"}, {"sha": "d0f04c3fe7647187ade03a61f40bee27e06ec084", "filename": "src/librustc_errors/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_errors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_errors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n doctest = false\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_serialize = { path = \"../librustc_serialize\" }\n rustc_span = { path = \"../librustc_span\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "bdf039c36abf6c60e610a1f56db80cfeaac0b9f6", "filename": "src/librustc_expand/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_expand%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_expand%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_expand%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,7 +12,7 @@ doctest = false\n \n [dependencies]\n rustc_serialize = { path = \"../librustc_serialize\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_span = { path = \"../librustc_span\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_ast_passes = { path = \"../librustc_ast_passes\" }"}, {"sha": "4a404e176e148de43a4c580a186901d794064a9b", "filename": "src/librustc_hir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_hir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_hir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_hir%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -18,5 +18,5 @@ rustc_span = { path = \"../librustc_span\" }\n rustc_serialize = { path = \"../librustc_serialize\" }\n rustc_ast = { path = \"../librustc_ast\" }\n lazy_static = \"1\"\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }"}, {"sha": "60a87078d63cfdad911cdced0cb076e3e8ed64f7", "filename": "src/librustc_incremental/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_incremental%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_incremental%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_graphviz = { path = \"../librustc_graphviz\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rand = \"0.7\"\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "9d56fa223a9cb83dbe558715efe5b7539c72dbf0", "filename": "src/librustc_infer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_infer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_infer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_infer%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_graphviz = { path = \"../librustc_graphviz\" }\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }"}, {"sha": "5c7edc10dd5c79a596893fba36eee084ab462e32", "filename": "src/librustc_interface/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_interface%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_interface%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n libc = \"0.2\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rayon = { version = \"0.3.0\", package = \"rustc-rayon\" }\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n rustc_ast = { path = \"../librustc_ast\" }"}, {"sha": "3ba1566023d2842a376971a4bdd4fef03abbcbc9", "filename": "src/librustc_lint/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_lint%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_lint%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -9,7 +9,7 @@ name = \"rustc_lint\"\n path = \"lib.rs\"\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n unicode-security = \"0.0.5\"\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }"}, {"sha": "2c0e2aa39fd595dcedf398ae40acb5803591258f", "filename": "src/librustc_metadata/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_metadata%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_metadata%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,7 +12,7 @@ doctest = false\n [dependencies]\n flate2 = \"1.0\"\n libc = \"0.2\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n memmap = \"0.7\"\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n rustc_middle = { path = \"../librustc_middle\" }"}, {"sha": "678fcfe65394b969a943dff049be2a963f72e17a", "filename": "src/librustc_middle/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_middle%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_middle%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -13,7 +13,7 @@ doctest = false\n rustc_arena = { path = \"../librustc_arena\" }\n bitflags = \"1.2.1\"\n scoped-tls = \"1.0\"\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc-rayon-core = \"0.3.0\"\n polonius-engine = \"0.12.0\"\n rustc_apfloat = { path = \"../librustc_apfloat\" }"}, {"sha": "f05c47e0ed62655656c4f330ca095cbc49e9d793", "filename": "src/librustc_mir/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -13,7 +13,7 @@ doctest = false\n either = \"1.5.0\"\n rustc_graphviz = { path = \"../librustc_graphviz\" }\n itertools = \"0.8\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n log_settings = \"0.1.1\"\n polonius-engine = \"0.12.0\"\n rustc_middle = { path = \"../librustc_middle\" }"}, {"sha": "1e9be097815080b2bcce1f38ca566453e95a55bc", "filename": "src/librustc_mir/interpret/eval_context.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -822,11 +822,10 @@ impl<'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> InterpCx<'mir, 'tcx, M> {\n     ) -> InterpResult<'tcx> {\n         // FIXME: should we tell the user that there was a local which was never written to?\n         if let LocalValue::Live(Operand::Indirect(MemPlace { ptr, .. })) = local {\n-            trace!(\"deallocating local\");\n             // All locals have a backing allocation, even if the allocation is empty\n             // due to the local having ZST type.\n             let ptr = ptr.assert_ptr();\n-            trace!(\"{:?}\", self.memory.dump_alloc(ptr.alloc_id));\n+            trace!(\"deallocating local: {:?}\", self.memory.dump_alloc(ptr.alloc_id));\n             self.memory.deallocate_local(ptr)?;\n         };\n         Ok(())"}, {"sha": "96059fa43e52124f3f2e1d3959e595ea1e16962a", "filename": "src/librustc_mir_build/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir_build%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_mir_build%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir_build%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_arena = { path = \"../librustc_arena\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_apfloat = { path = \"../librustc_apfloat\" }\n rustc_attr = { path = \"../librustc_attr\" }"}, {"sha": "f214ec020cbecafb43283f237d543513dac857c0", "filename": "src/librustc_parse/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_parse%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_parse%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n bitflags = \"1.0\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_feature = { path = \"../librustc_feature\" }"}, {"sha": "d9fa435e3ad680e002780a08b968c5cdb39e9adb", "filename": "src/librustc_passes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -9,7 +9,7 @@ name = \"rustc_passes\"\n path = \"lib.rs\"\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_attr = { path = \"../librustc_attr\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "6f543e71b428137a0f1455bfcc9e6e55f31dff96", "filename": "src/librustc_privacy/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_privacy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_privacy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -17,4 +17,4 @@ rustc_typeck = { path = \"../librustc_typeck\" }\n rustc_session = { path = \"../librustc_session\" }\n rustc_span = { path = \"../librustc_span\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }"}, {"sha": "64af9c5f1a15244a1c9b74704e552973a5f0235a", "filename": "src/librustc_query_system/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_query_system%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_query_system%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_query_system%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_arena = { path = \"../librustc_arena\" }\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc-rayon-core = \"0.3.0\"\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }"}, {"sha": "1cb49132ead9cf7f103ed057b25792d0abbdc789", "filename": "src/librustc_resolve/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_resolve%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_resolve%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,7 +12,7 @@ doctest = false\n \n [dependencies]\n bitflags = \"1.2.1\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_ast = { path = \"../librustc_ast\" }\n rustc_arena = { path = \"../librustc_arena\" }\n rustc_middle = { path = \"../librustc_middle\" }"}, {"sha": "7a5ae0ace3ae67e4f4500054d22c1f3a6dc0ac81", "filename": "src/librustc_save_analysis/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_save_analysis%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_save_analysis%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -9,7 +9,7 @@ name = \"rustc_save_analysis\"\n path = \"lib.rs\"\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_ast = { path = \"../librustc_ast\" }\n rustc_ast_pretty = { path = \"../librustc_ast_pretty\" }"}, {"sha": "35c227df8500a98832284eae2e53009f0b704ab9", "filename": "src/librustc_session/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_session%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_session%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_session%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ path = \"lib.rs\"\n [dependencies]\n bitflags = \"1.2.1\"\n getopts = \"0.2\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_errors = { path = \"../librustc_errors\" }\n rustc_feature = { path = \"../librustc_feature\" }\n rustc_target = { path = \"../librustc_target\" }"}, {"sha": "2db417ce0e12953ed44fb532cc71bde91fcc6507", "filename": "src/librustc_span/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_span%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_span%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_span%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -18,6 +18,6 @@ rustc_arena = { path = \"../librustc_arena\" }\n scoped-tls = \"1.0\"\n unicode-width = \"0.1.4\"\n cfg-if = \"0.1.2\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n sha-1 = \"0.8\"\n md-5 = \"0.8\""}, {"sha": "757d86bd95afdbdf3b5b0c3c7803c1aca91c14d8", "filename": "src/librustc_symbol_mangling/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_symbol_mangling%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_symbol_mangling%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_symbol_mangling%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n doctest = false\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n punycode = \"0.4.0\"\n rustc-demangle = \"0.1.16\"\n "}, {"sha": "21796e8498568436fa5bab7129cfdfd547c8f146", "filename": "src/librustc_target/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_target%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_target%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -10,7 +10,7 @@ path = \"lib.rs\"\n \n [dependencies]\n bitflags = \"1.2.1\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_macros = { path = \"../librustc_macros\" }\n rustc_serialize = { path = \"../librustc_serialize\" }"}, {"sha": "c43fe3f2c0c89db989228afd0516ab6ed882f105", "filename": "src/librustc_trait_selection/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_trait_selection%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_trait_selection%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trait_selection%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -11,7 +11,7 @@ doctest = false\n \n [dependencies]\n rustc_parse_format = { path = \"../librustc_parse_format\" }\n-log = { version = \"0.4\", features = [\"release_max_level_info\", \"std\"] }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_attr = { path = \"../librustc_attr\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_ast = { path = \"../librustc_ast\" }"}, {"sha": "f8487982e3d49e0057d0263e7e6c41d7ccc36cf8", "filename": "src/librustc_traits/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_traits%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_traits%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_traits%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -9,7 +9,7 @@ name = \"rustc_traits\"\n path = \"lib.rs\"\n \n [dependencies]\n-log = { version = \"0.4\" }\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_hir = { path = \"../librustc_hir\" }"}, {"sha": "6cdb3530002783ce4e61c47673d174ecd8853d6d", "filename": "src/librustc_ty/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_ty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ty%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -9,7 +9,7 @@ name = \"rustc_ty\"\n path = \"lib.rs\"\n \n [dependencies]\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }\n rustc_errors = { path = \"../librustc_errors\" }"}, {"sha": "963deda162d62e61e3b3a35e9c1480f80a47f531", "filename": "src/librustc_typeck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_typeck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustc_typeck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -12,7 +12,7 @@ doctest = false\n \n [dependencies]\n rustc_arena = { path = \"../librustc_arena\" }\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n rustc_middle = { path = \"../librustc_middle\" }\n rustc_attr = { path = \"../librustc_attr\" }\n rustc_data_structures = { path = \"../librustc_data_structures\" }"}, {"sha": "002c5f967105d2a6fa8d2bafd6ae04d6a69387f3", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -14,7 +14,6 @@\n #![feature(never_type)]\n #![recursion_limit = \"256\"]\n \n-extern crate env_logger;\n #[macro_use]\n extern crate lazy_static;\n extern crate rustc_ast;\n@@ -90,7 +89,8 @@ pub fn main() {\n     };\n     rustc_driver::set_sigpipe_handler();\n     rustc_driver::install_ice_hook();\n-    env_logger::init_from_env(\"RUSTDOC_LOG\");\n+    rustc_driver::init_env_logger(\"RUSTDOC_LOG\");\n+\n     let res = std::thread::Builder::new()\n         .stack_size(thread_stack_size)\n         .spawn(move || get_args().map(|args| main_args(&args)).unwrap_or(1))"}, {"sha": "bd4c5949800f698dbcbc282841b195fc0eb53ebc", "filename": "src/tools/compiletest/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Fcompiletest%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Fcompiletest%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2FCargo.toml?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -8,7 +8,7 @@ edition = \"2018\"\n diff = \"0.1.10\"\n env_logger = { version = \"0.7\", default-features = false }\n getopts = \"0.2\"\n-log = \"0.4\"\n+log = { package = \"tracing\", version = \"0.1\" }\n regex = \"1.0\"\n serde = { version = \"1.0\", features = [\"derive\"] }\n serde_json = \"1.0\""}, {"sha": "bd9f8fb0450254d4a7deee97684a3f869c18b190", "filename": "src/tools/error_index_generator/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Ferror_index_generator%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Ferror_index_generator%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ferror_index_generator%2Fmain.rs?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -1,7 +1,7 @@\n #![feature(rustc_private)]\n \n-extern crate env_logger;\n extern crate rustc_ast;\n+extern crate rustc_driver;\n extern crate rustc_span;\n \n use std::cell::RefCell;\n@@ -282,7 +282,7 @@ fn parse_args() -> (OutputFormat, PathBuf) {\n }\n \n fn main() {\n-    env_logger::init();\n+    rustc_driver::init_env_logger(\"RUST_LOG\");\n     let (format, dst) = parse_args();\n     let result = rustc_ast::with_default_session_globals(move || main_with_result(format, &dst));\n     if let Err(e) = result {"}, {"sha": "55e17466a881e52ba7f1d20fef18c1808c384a9e", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05762e3d6f5facafdd47efdf4203021fadf61bb1/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=05762e3d6f5facafdd47efdf4203021fadf61bb1", "patch": "@@ -166,6 +166,9 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"termcolor\",\n     \"termize\",\n     \"thread_local\",\n+    \"tracing\",\n+    \"tracing-attributes\",\n+    \"tracing-core\",\n     \"typenum\",\n     \"unicode-normalization\",\n     \"unicode-script\","}]}