{"sha": "b4ea47d23e88b6bd9859b10daf3f482290379a90", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0ZWE0N2QyM2U4OGI2YmQ5ODU5YjEwZGFmM2Y0ODIyOTAzNzlhOTA=", "commit": {"author": {"name": "sinkuu", "email": "sinkuu@sinkuu.xyz", "date": "2017-10-17T22:29:47Z"}, "committer": {"name": "sinkuu", "email": "sinkuu@sinkuu.xyz", "date": "2017-10-17T22:33:22Z"}, "message": "Detect proc-macro in needless_pass_by_value\n\nFixes #1876", "tree": {"sha": "7301be8de44cdcb934d23f983b4921a6a561c50a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7301be8de44cdcb934d23f983b4921a6a561c50a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4ea47d23e88b6bd9859b10daf3f482290379a90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4ea47d23e88b6bd9859b10daf3f482290379a90", "html_url": "https://github.com/rust-lang/rust/commit/b4ea47d23e88b6bd9859b10daf3f482290379a90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4ea47d23e88b6bd9859b10daf3f482290379a90/comments", "author": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sinkuu", "id": 7091080, "node_id": "MDQ6VXNlcjcwOTEwODA=", "avatar_url": "https://avatars.githubusercontent.com/u/7091080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sinkuu", "html_url": "https://github.com/sinkuu", "followers_url": "https://api.github.com/users/sinkuu/followers", "following_url": "https://api.github.com/users/sinkuu/following{/other_user}", "gists_url": "https://api.github.com/users/sinkuu/gists{/gist_id}", "starred_url": "https://api.github.com/users/sinkuu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sinkuu/subscriptions", "organizations_url": "https://api.github.com/users/sinkuu/orgs", "repos_url": "https://api.github.com/users/sinkuu/repos", "events_url": "https://api.github.com/users/sinkuu/events{/privacy}", "received_events_url": "https://api.github.com/users/sinkuu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d9ed8beefe36610b07ab6ea3e77046ed6705d68", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d9ed8beefe36610b07ab6ea3e77046ed6705d68", "html_url": "https://github.com/rust-lang/rust/commit/4d9ed8beefe36610b07ab6ea3e77046ed6705d68"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "bc54d4ebe5fb80de1eeee6355d5430d570215a13", "filename": "clippy_lints/src/needless_pass_by_value.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b4ea47d23e88b6bd9859b10daf3f482290379a90/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4ea47d23e88b6bd9859b10daf3f482290379a90/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs?ref=b4ea47d23e88b6bd9859b10daf3f482290379a90", "patch": "@@ -121,6 +121,11 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NeedlessPassByValue {\n             .zip(&body.arguments)\n             .enumerate()\n         {\n+            // All spans generated from a proc-macro invocation are the same...\n+            if span == input.span {\n+                return;\n+            }\n+\n             // * Exclude a type that is specifically bounded by `Borrow`.\n             // * Exclude a type whose reference also fulfills its bound.\n             //   (e.g. `std::convert::AsRef`, `serde::Serialize`)"}]}