{"sha": "710dcdc2ebf7adfa95bde406c75795a16fdde30b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcxMGRjZGMyZWJmN2FkZmE5NWJkZTQwNmM3NTc5NWExNmZkZGUzMGI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-01-21T03:54:21Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-01-21T03:54:21Z"}, "message": "Auto merge of #21065 - ColonelJ:master, r=brson\n\nRemoved use of unused LDPATH variable on Windows as is done for other platforms, and added GCC flag to ensure MINGW's ANSI compatible STDIO functions are used wherever available (required by jemalloc).\r\n\r\nWithout these changes it ends up setting the PATH twice, and the second time the PATH begins with `:` which is invalid.  Also the regular msvcrt printf-like functions would be used which don't understand stuff like %hhd and %z which jemalloc uses.\r\n\r\nThis change ought not to make any difference to the output but it fixes the build process for me since at least my build environment couldn't handle that broken path caused by LDPATH being empty.", "tree": {"sha": "6535d01f306f6211c2c3e59bf1fc88036abd3df7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6535d01f306f6211c2c3e59bf1fc88036abd3df7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/710dcdc2ebf7adfa95bde406c75795a16fdde30b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/710dcdc2ebf7adfa95bde406c75795a16fdde30b", "html_url": "https://github.com/rust-lang/rust/commit/710dcdc2ebf7adfa95bde406c75795a16fdde30b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/710dcdc2ebf7adfa95bde406c75795a16fdde30b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "29bd9a06efd2f8c8a7b1102e2203cc0e6ae2dcba", "url": "https://api.github.com/repos/rust-lang/rust/commits/29bd9a06efd2f8c8a7b1102e2203cc0e6ae2dcba", "html_url": "https://github.com/rust-lang/rust/commit/29bd9a06efd2f8c8a7b1102e2203cc0e6ae2dcba"}, {"sha": "f071f3b18551ae93dc2d28d8035b3e0a81697399", "url": "https://api.github.com/repos/rust-lang/rust/commits/f071f3b18551ae93dc2d28d8035b3e0a81697399", "html_url": "https://github.com/rust-lang/rust/commit/f071f3b18551ae93dc2d28d8035b3e0a81697399"}], "stats": {"total": 20, "additions": 10, "deletions": 10}, "files": [{"sha": "357a321688bcace7c9ac062e4b1a65ba0297fbba", "filename": "mk/cfg/i686-pc-windows-gnu.mk", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/710dcdc2ebf7adfa95bde406c75795a16fdde30b/mk%2Fcfg%2Fi686-pc-windows-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/710dcdc2ebf7adfa95bde406c75795a16fdde30b/mk%2Fcfg%2Fi686-pc-windows-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi686-pc-windows-gnu.mk?ref=710dcdc2ebf7adfa95bde406c75795a16fdde30b", "patch": "@@ -8,8 +8,8 @@ CFG_LIB_NAME_i686-pc-windows-gnu=$(1).dll\n CFG_STATIC_LIB_NAME_i686-pc-windows-gnu=$(1).lib\n CFG_LIB_GLOB_i686-pc-windows-gnu=$(1)-*.dll\n CFG_LIB_DSYM_GLOB_i686-pc-windows-gnu=$(1)-*.dylib.dSYM\n-CFG_JEMALLOC_CFLAGS_i686-pc-windows-gnu := -march=i686 -m32 -D_WIN32_WINNT=0x0600 $(CFLAGS)\n-CFG_GCCISH_CFLAGS_i686-pc-windows-gnu := -Wall -Werror -g -m32 -D_WIN32_WINNT=0x0600 $(CFLAGS)\n+CFG_JEMALLOC_CFLAGS_i686-pc-windows-gnu := -march=i686 -m32 -D_WIN32_WINNT=0x0600 -D__USE_MINGW_ANSI_STDIO=1 $(CFLAGS)\n+CFG_GCCISH_CFLAGS_i686-pc-windows-gnu := -Wall -Werror -g -m32 -D_WIN32_WINNT=0x0600 -D__USE_MINGW_ANSI_STDIO=1 $(CFLAGS)\n CFG_GCCISH_CXXFLAGS_i686-pc-windows-gnu := -fno-rtti $(CXXFLAGS)\n CFG_GCCISH_LINK_FLAGS_i686-pc-windows-gnu := -shared -g -m32\n CFG_GCCISH_DEF_FLAG_i686-pc-windows-gnu :=\n@@ -22,7 +22,7 @@ CFG_EXE_SUFFIX_i686-pc-windows-gnu := .exe\n CFG_WINDOWSY_i686-pc-windows-gnu := 1\n CFG_UNIXY_i686-pc-windows-gnu :=\n CFG_PATH_MUNGE_i686-pc-windows-gnu :=\n-CFG_LDPATH_i686-pc-windows-gnu :=$(CFG_LDPATH_i686-pc-windows-gnu):$(PATH)\n-CFG_RUN_i686-pc-windows-gnu=PATH=\"$(CFG_LDPATH_i686-pc-windows-gnu):$(1)\" $(2)\n-CFG_RUN_TARG_i686-pc-windows-gnu=$(call CFG_RUN_i686-pc-windows-gnu,$(HLIB$(1)_H_$(CFG_BUILD)),$(2))\n+CFG_LDPATH_i686-pc-windows-gnu :=\n+CFG_RUN_i686-pc-windows-gnu=$(2)\n+CFG_RUN_TARG_i686-pc-windows-gnu=$(call CFG_RUN_i686-pc-windows-gnu,,$(2))\n CFG_GNU_TRIPLE_i686-pc-windows-gnu := i686-w64-mingw32"}, {"sha": "e9e5f04ea54336a3a2737c80f65b850a0ed24773", "filename": "mk/cfg/x86_64-pc-windows-gnu.mk", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/710dcdc2ebf7adfa95bde406c75795a16fdde30b/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/710dcdc2ebf7adfa95bde406c75795a16fdde30b/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fx86_64-pc-windows-gnu.mk?ref=710dcdc2ebf7adfa95bde406c75795a16fdde30b", "patch": "@@ -8,8 +8,8 @@ CFG_LIB_NAME_x86_64-pc-windows-gnu=$(1).dll\n CFG_STATIC_LIB_NAME_x86_64-pc-windows-gnu=$(1).lib\n CFG_LIB_GLOB_x86_64-pc-windows-gnu=$(1)-*.dll\n CFG_LIB_DSYM_GLOB_x86_64-pc-windows-gnu=$(1)-*.dylib.dSYM\n-CFG_JEMALLOC_CFLAGS_x86_64-pc-windows-gnu := -m64 -D_WIN32_WINNT=0x0600 $(CFLAGS)\n-CFG_GCCISH_CFLAGS_x86_64-pc-windows-gnu := -Wall -Werror -g -m64 -D_WIN32_WINNT=0x0600 $(CFLAGS)\n+CFG_JEMALLOC_CFLAGS_x86_64-pc-windows-gnu := -m64 -D_WIN32_WINNT=0x0600 -D__USE_MINGW_ANSI_STDIO=1 $(CFLAGS)\n+CFG_GCCISH_CFLAGS_x86_64-pc-windows-gnu := -Wall -Werror -g -m64 -D_WIN32_WINNT=0x0600 -D__USE_MINGW_ANSI_STDIO=1 $(CFLAGS)\n CFG_GCCISH_CXXFLAGS_x86_64-pc-windows-gnu := -fno-rtti $(CXXFLAGS)\n CFG_GCCISH_LINK_FLAGS_x86_64-pc-windows-gnu := -shared -g -m64\n CFG_GCCISH_DEF_FLAG_x86_64-pc-windows-gnu :=\n@@ -22,7 +22,7 @@ CFG_EXE_SUFFIX_x86_64-pc-windows-gnu := .exe\n CFG_WINDOWSY_x86_64-pc-windows-gnu := 1\n CFG_UNIXY_x86_64-pc-windows-gnu :=\n CFG_PATH_MUNGE_x86_64-pc-windows-gnu :=\n-CFG_LDPATH_x86_64-pc-windows-gnu :=$(CFG_LDPATH_x86_64-pc-windows-gnu):$(PATH)\n-CFG_RUN_x86_64-pc-windows-gnu=PATH=\"$(CFG_LDPATH_x86_64-pc-windows-gnu):$(1)\" $(2)\n-CFG_RUN_TARG_x86_64-pc-windows-gnu=$(call CFG_RUN_x86_64-pc-windows-gnu,$(HLIB$(1)_H_$(CFG_BUILD)),$(2))\n+CFG_LDPATH_x86_64-pc-windows-gnu :=\n+CFG_RUN_x86_64-pc-windows-gnu=$(2)\n+CFG_RUN_TARG_x86_64-pc-windows-gnu=$(call CFG_RUN_x86_64-pc-windows-gnu,,$(2))\n CFG_GNU_TRIPLE_x86_64-pc-windows-gnu := x86_64-w64-mingw32"}]}