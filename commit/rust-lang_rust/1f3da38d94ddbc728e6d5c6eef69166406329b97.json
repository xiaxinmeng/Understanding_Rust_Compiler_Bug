{"sha": "1f3da38d94ddbc728e6d5c6eef69166406329b97", "node_id": "C_kwDOAAsO6NoAKDFmM2RhMzhkOTRkZGJjNzI4ZTZkNWM2ZWVmNjkxNjY0MDYzMjliOTc", "commit": {"author": {"name": "rainy-me", "email": "github@yue.coffee", "date": "2021-11-14T11:56:28Z"}, "committer": {"name": "rainy-me", "email": "github@yue.coffee", "date": "2021-11-14T11:56:28Z"}, "message": "adjust test case and stop deleting newline", "tree": {"sha": "4b280141bdb92021647b84441b41bb0227f74e7d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b280141bdb92021647b84441b41bb0227f74e7d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f3da38d94ddbc728e6d5c6eef69166406329b97", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f3da38d94ddbc728e6d5c6eef69166406329b97", "html_url": "https://github.com/rust-lang/rust/commit/1f3da38d94ddbc728e6d5c6eef69166406329b97", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f3da38d94ddbc728e6d5c6eef69166406329b97/comments", "author": {"login": "yue4u", "id": 26110087, "node_id": "MDQ6VXNlcjI2MTEwMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/26110087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yue4u", "html_url": "https://github.com/yue4u", "followers_url": "https://api.github.com/users/yue4u/followers", "following_url": "https://api.github.com/users/yue4u/following{/other_user}", "gists_url": "https://api.github.com/users/yue4u/gists{/gist_id}", "starred_url": "https://api.github.com/users/yue4u/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yue4u/subscriptions", "organizations_url": "https://api.github.com/users/yue4u/orgs", "repos_url": "https://api.github.com/users/yue4u/repos", "events_url": "https://api.github.com/users/yue4u/events{/privacy}", "received_events_url": "https://api.github.com/users/yue4u/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yue4u", "id": 26110087, "node_id": "MDQ6VXNlcjI2MTEwMDg3", "avatar_url": "https://avatars.githubusercontent.com/u/26110087?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yue4u", "html_url": "https://github.com/yue4u", "followers_url": "https://api.github.com/users/yue4u/followers", "following_url": "https://api.github.com/users/yue4u/following{/other_user}", "gists_url": "https://api.github.com/users/yue4u/gists{/gist_id}", "starred_url": "https://api.github.com/users/yue4u/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yue4u/subscriptions", "organizations_url": "https://api.github.com/users/yue4u/orgs", "repos_url": "https://api.github.com/users/yue4u/repos", "events_url": "https://api.github.com/users/yue4u/events{/privacy}", "received_events_url": "https://api.github.com/users/yue4u/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c9949c040c53534344c5efbd437d169e6dba2a47", "url": "https://api.github.com/repos/rust-lang/rust/commits/c9949c040c53534344c5efbd437d169e6dba2a47", "html_url": "https://github.com/rust-lang/rust/commit/c9949c040c53534344c5efbd437d169e6dba2a47"}], "stats": {"total": 16, "additions": 1, "deletions": 15}, "files": [{"sha": "eeed0386ad6ada083c3882fb091762619b6fea58", "filename": "crates/ide_assists/src/handlers/add_missing_match_arms.rs", "status": "modified", "additions": 1, "deletions": 15, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1f3da38d94ddbc728e6d5c6eef69166406329b97/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fadd_missing_match_arms.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f3da38d94ddbc728e6d5c6eef69166406329b97/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fadd_missing_match_arms.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fadd_missing_match_arms.rs?ref=1f3da38d94ddbc728e6d5c6eef69166406329b97", "patch": "@@ -178,19 +178,6 @@ pub(crate) fn add_missing_match_arms(acc: &mut Assists, ctx: &AssistContext) ->\n                             None => Cursor::Before(first_new_arm.syntax()),\n                         };\n                     let snippet = render_snippet(cap, new_match_arm_list.syntax(), cursor);\n-                    // remove the second last line if it only contains trailing whitespace\n-                    let lines = snippet.lines().collect_vec();\n-                    let snippet = lines\n-                        .iter()\n-                        .enumerate()\n-                        .filter_map(|(index, &line)| {\n-                            if index + 2 == lines.len() && line.trim().is_empty() {\n-                                return None;\n-                            }\n-                            return Some(line);\n-                        })\n-                        .join(\"\\n\");\n-\n                     builder.replace_snippet(cap, old_range, snippet);\n                 }\n                 _ => builder.replace(old_range, new_match_arm_list.to_string()),\n@@ -715,8 +702,7 @@ fn main() {\n     let a = A::One;\n     let b = B::One;\n     match (a, b) {\n-        (A::Two, B::One) => {},\n-        $0\n+        (A::Two, B::One) => {},$0\n     }\n }\n \"#,"}]}