{"sha": "90e01ee2089700026fd3fbd68d1dc26f2540a648", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwZTAxZWUyMDg5NzAwMDI2ZmQzZmJkNjhkMWRjMjZmMjU0MGE2NDg=", "commit": {"author": {"name": "Jack Huey", "email": "jack.huey@umassmed.edu", "date": "2020-05-27T23:27:53Z"}, "committer": {"name": "Jack Huey", "email": "jack.huey@umassmed.edu", "date": "2020-06-19T18:05:14Z"}, "message": "Update Chalk", "tree": {"sha": "1e57368ac3d1bc1daccf31a58eed77f39f11641b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e57368ac3d1bc1daccf31a58eed77f39f11641b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/90e01ee2089700026fd3fbd68d1dc26f2540a648", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/90e01ee2089700026fd3fbd68d1dc26f2540a648", "html_url": "https://github.com/rust-lang/rust/commit/90e01ee2089700026fd3fbd68d1dc26f2540a648", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/90e01ee2089700026fd3fbd68d1dc26f2540a648/comments", "author": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jackh726", "id": 31162821, "node_id": "MDQ6VXNlcjMxMTYyODIx", "avatar_url": "https://avatars.githubusercontent.com/u/31162821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackh726", "html_url": "https://github.com/jackh726", "followers_url": "https://api.github.com/users/jackh726/followers", "following_url": "https://api.github.com/users/jackh726/following{/other_user}", "gists_url": "https://api.github.com/users/jackh726/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackh726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackh726/subscriptions", "organizations_url": "https://api.github.com/users/jackh726/orgs", "repos_url": "https://api.github.com/users/jackh726/repos", "events_url": "https://api.github.com/users/jackh726/events{/privacy}", "received_events_url": "https://api.github.com/users/jackh726/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e997375934757a3d5cd22eea5fe8648de006599f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e997375934757a3d5cd22eea5fe8648de006599f", "html_url": "https://github.com/rust-lang/rust/commit/e997375934757a3d5cd22eea5fe8648de006599f"}], "stats": {"total": 27, "additions": 16, "deletions": 11}, "files": [{"sha": "f3c139c32cb5eec9daae2ed5a729cd70bc07488b", "filename": "Cargo.lock", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/90e01ee2089700026fd3fbd68d1dc26f2540a648/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/90e01ee2089700026fd3fbd68d1dc26f2540a648/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=90e01ee2089700026fd3fbd68d1dc26f2540a648", "patch": "@@ -435,15 +435,15 @@ dependencies = [\n [[package]]\n name = \"chalk-base\"\n version = \"0.10.1-dev\"\n-source = \"git+https://github.com/jackh726/chalk.git?rev=58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b#58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\"\n+source = \"git+https://github.com/jackh726/chalk.git?rev=c8f342bf5e48051333d0b2c7fab81347fc21c474#c8f342bf5e48051333d0b2c7fab81347fc21c474\"\n dependencies = [\n  \"lazy_static\",\n ]\n \n [[package]]\n name = \"chalk-derive\"\n version = \"0.10.1-dev\"\n-source = \"git+https://github.com/jackh726/chalk.git?rev=58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b#58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\"\n+source = \"git+https://github.com/jackh726/chalk.git?rev=c8f342bf5e48051333d0b2c7fab81347fc21c474#c8f342bf5e48051333d0b2c7fab81347fc21c474\"\n dependencies = [\n  \"proc-macro2 1.0.3\",\n  \"quote 1.0.2\",\n@@ -454,7 +454,7 @@ dependencies = [\n [[package]]\n name = \"chalk-engine\"\n version = \"0.10.1-dev\"\n-source = \"git+https://github.com/jackh726/chalk.git?rev=58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b#58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\"\n+source = \"git+https://github.com/jackh726/chalk.git?rev=c8f342bf5e48051333d0b2c7fab81347fc21c474#c8f342bf5e48051333d0b2c7fab81347fc21c474\"\n dependencies = [\n  \"chalk-base\",\n  \"chalk-derive\",\n@@ -465,7 +465,7 @@ dependencies = [\n [[package]]\n name = \"chalk-ir\"\n version = \"0.10.1-dev\"\n-source = \"git+https://github.com/jackh726/chalk.git?rev=58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b#58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\"\n+source = \"git+https://github.com/jackh726/chalk.git?rev=c8f342bf5e48051333d0b2c7fab81347fc21c474#c8f342bf5e48051333d0b2c7fab81347fc21c474\"\n dependencies = [\n  \"chalk-base\",\n  \"chalk-derive\",\n@@ -474,7 +474,7 @@ dependencies = [\n [[package]]\n name = \"chalk-solve\"\n version = \"0.10.1-dev\"\n-source = \"git+https://github.com/jackh726/chalk.git?rev=58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b#58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\"\n+source = \"git+https://github.com/jackh726/chalk.git?rev=c8f342bf5e48051333d0b2c7fab81347fc21c474#c8f342bf5e48051333d0b2c7fab81347fc21c474\"\n dependencies = [\n  \"chalk-base\",\n  \"chalk-derive\","}, {"sha": "121491c8cc4bf1ba3577fa4bce088f67001f187d", "filename": "src/librustc_middle/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_middle%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_middle%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_middle%2FCargo.toml?ref=90e01ee2089700026fd3fbd68d1dc26f2540a648", "patch": "@@ -30,7 +30,7 @@ rustc_serialize = { path = \"../librustc_serialize\" }\n rustc_ast = { path = \"../librustc_ast\" }\n rustc_span = { path = \"../librustc_span\" }\n byteorder = { version = \"1.3\" }\n-chalk-ir =      { git = \"https://github.com/jackh726/chalk.git\", rev = \"58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\" }\n+chalk-ir =      { git = \"https://github.com/jackh726/chalk.git\", rev = \"c8f342bf5e48051333d0b2c7fab81347fc21c474\" }\n #chalk-ir = \"0.10.0\"\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n measureme = \"0.7.1\""}, {"sha": "6bfebecf04cbe34768aa1030e3f2be8b5e6ab504", "filename": "src/librustc_traits/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_traits%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_traits%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_traits%2FCargo.toml?ref=90e01ee2089700026fd3fbd68d1dc26f2540a648", "patch": "@@ -19,8 +19,8 @@ rustc_span = { path = \"../librustc_span\" }\n #chalk-ir = \"0.10.0\"\n #chalk-rust-ir = \"0.10.0\"\n #chalk-solve = \"0.10.0\"\n-chalk-solve =   { git = \"https://github.com/jackh726/chalk.git\", rev = \"58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\" }\n-chalk-ir =      { git = \"https://github.com/jackh726/chalk.git\", rev = \"58e5a31f48ddd4b940c682e7079d3e79e6ffaa1b\" }\n+chalk-solve =   { git = \"https://github.com/jackh726/chalk.git\", rev = \"c8f342bf5e48051333d0b2c7fab81347fc21c474\" }\n+chalk-ir =      { git = \"https://github.com/jackh726/chalk.git\", rev = \"c8f342bf5e48051333d0b2c7fab81347fc21c474\" }\n smallvec = { version = \"1.0\", features = [\"union\", \"may_dangle\"] }\n rustc_infer = { path = \"../librustc_infer\" }\n rustc_trait_selection = { path = \"../librustc_trait_selection\" }"}, {"sha": "5b00d322768317f7bc2ec6fac7d93ffecb8590e7", "filename": "src/librustc_traits/chalk/db.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_traits%2Fchalk%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90e01ee2089700026fd3fbd68d1dc26f2540a648/src%2Flibrustc_traits%2Fchalk%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_traits%2Fchalk%2Fdb.rs?ref=90e01ee2089700026fd3fbd68d1dc26f2540a648", "patch": "@@ -321,10 +321,7 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n         opaque_ty_id: chalk_ir::OpaqueTyId<RustInterner<'tcx>>,\n     ) -> Arc<chalk_solve::rust_ir::OpaqueTyDatum<RustInterner<'tcx>>> {\n         // FIXME(chalk): actually lower opaque ty\n-        let hidden_ty =\n-            self.tcx.mk_ty(ty::Tuple(self.tcx.intern_substs(&[]))).lower_into(&self.interner);\n         let value = chalk_solve::rust_ir::OpaqueTyDatumBound {\n-            hidden_ty,\n             bounds: chalk_ir::Binders::new(chalk_ir::VariableKinds::new(&self.interner), vec![]),\n         };\n         Arc::new(chalk_solve::rust_ir::OpaqueTyDatum {\n@@ -418,6 +415,14 @@ impl<'tcx> chalk_solve::RustIrDatabase<RustInterner<'tcx>> for RustIrDatabase<'t\n     fn is_object_safe(&self, trait_id: chalk_ir::TraitId<RustInterner<'tcx>>) -> bool {\n         self.tcx.is_object_safe(trait_id.0)\n     }\n+\n+    fn hidden_opaque_type(\n+        &self,\n+        _id: chalk_ir::OpaqueTyId<RustInterner<'tcx>>,\n+    ) -> chalk_ir::Ty<RustInterner<'tcx>> {\n+        // FIXME(chalk): actually get hidden ty\n+        self.tcx.mk_ty(ty::Tuple(self.tcx.intern_substs(&[]))).lower_into(&self.interner)\n+    }\n }\n \n /// Creates a `InternalSubsts` that maps each generic parameter to a higher-ranked"}]}