{"sha": "5b1316f78152a9c066b357ea9addf803d48e114a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMTMxNmY3ODE1MmE5YzA2NmIzNTdlYTlhZGRmODAzZDQ4ZTExNGE=", "commit": {"author": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2020-12-12T21:31:54Z"}, "committer": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-01-13T12:50:29Z"}, "message": "unix ExitStatus: Do not treat WIFSTOPPED as WIFSIGNALED\n\nA unix wait status can contain, at least, exit statuses, termination\nsignals, and stop signals.\n\nWTERMSIG is only valid if WIFSIGNALED.\n\nhttps://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html\n\nIt will not be easy to experience this bug with `Command`, because\nthat doesn't pass WUNTRACED.  But you could make an ExitStatus\ncontaining, say, a WIFSTOPPED, from a call to one of the libc wait\nfunctions.\n\n(In the WIFSTOPPED case, there is WSTOPSIG.  But a stop signal is\nencoded differently to a termination signal, so WTERMSIG and WSTOPSIG\nare by no means the same.)\n\nSigned-off-by: Ian Jackson <ijackson@chiark.greenend.org.uk>", "tree": {"sha": "b4f75026cdd7096c8bcf055f63466606c18faab5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4f75026cdd7096c8bcf055f63466606c18faab5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b1316f78152a9c066b357ea9addf803d48e114a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b1316f78152a9c066b357ea9addf803d48e114a", "html_url": "https://github.com/rust-lang/rust/commit/5b1316f78152a9c066b357ea9addf803d48e114a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b1316f78152a9c066b357ea9addf803d48e114a/comments", "author": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f3998b4aa9d0eea3249fdd48b8b719185673d16", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f3998b4aa9d0eea3249fdd48b8b719185673d16", "html_url": "https://github.com/rust-lang/rust/commit/9f3998b4aa9d0eea3249fdd48b8b719185673d16"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "629180fd71231c9dbda2b8ad79fcff952088c17f", "filename": "library/std/src/sys/unix/process/process_unix.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5b1316f78152a9c066b357ea9addf803d48e114a/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b1316f78152a9c066b357ea9addf803d48e114a/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fprocess%2Fprocess_unix.rs?ref=5b1316f78152a9c066b357ea9addf803d48e114a", "patch": "@@ -479,7 +479,7 @@ impl ExitStatus {\n     }\n \n     pub fn signal(&self) -> Option<i32> {\n-        if !self.exited() { Some(libc::WTERMSIG(self.0)) } else { None }\n+        if libc::WIFSIGNALED(self.0) { Some(libc::WTERMSIG(self.0)) } else { None }\n     }\n }\n "}]}