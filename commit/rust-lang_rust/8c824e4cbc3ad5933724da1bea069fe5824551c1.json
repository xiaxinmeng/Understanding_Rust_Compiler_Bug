{"sha": "8c824e4cbc3ad5933724da1bea069fe5824551c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjODI0ZTRjYmMzYWQ1OTMzNzI0ZGExYmVhMDY5ZmU1ODI0NTUxYzE=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-09-05T09:25:20Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2017-09-05T19:12:44Z"}, "message": "Also ignore `continue` statements in `is_unit_expr`", "tree": {"sha": "5caa7955ba011cf40f0373c279ce883d4fc48570", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5caa7955ba011cf40f0373c279ce883d4fc48570"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c824e4cbc3ad5933724da1bea069fe5824551c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c824e4cbc3ad5933724da1bea069fe5824551c1", "html_url": "https://github.com/rust-lang/rust/commit/8c824e4cbc3ad5933724da1bea069fe5824551c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c824e4cbc3ad5933724da1bea069fe5824551c1/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7e9ba81297936a20f0894749243073d38e2eb657", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e9ba81297936a20f0894749243073d38e2eb657", "html_url": "https://github.com/rust-lang/rust/commit/7e9ba81297936a20f0894749243073d38e2eb657"}], "stats": {"total": 36, "additions": 33, "deletions": 3}, "files": [{"sha": "58df45ad89a015a01fc75fd3ee96a95d1f08dbf5", "filename": "clippy_lints/src/is_unit_expr.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8c824e4cbc3ad5933724da1bea069fe5824551c1/clippy_lints%2Fsrc%2Fis_unit_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c824e4cbc3ad5933724da1bea069fe5824551c1/clippy_lints%2Fsrc%2Fis_unit_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fis_unit_expr.rs?ref=8c824e4cbc3ad5933724da1bea069fe5824551c1", "patch": "@@ -98,6 +98,7 @@ impl EarlyLintPass for UnitExpr {\n         }\n     }\n }\n+\n fn is_unit_expr(expr: &Expr) -> Option<Span> {\n     match expr.node {\n         ExprKind::Block(ref block) => if check_last_stmt_in_block(block) {\n@@ -139,9 +140,13 @@ fn check_last_stmt_in_block(block: &Block) -> bool {\n     // like `panic!()`\n     match final_stmt.node {\n         StmtKind::Expr(_) => false,\n-        StmtKind::Semi(ref expr) => match expr.node {\n-            ExprKind::Break(_, _) | ExprKind::Ret(_) => false,\n-            _ => true,\n+        StmtKind::Semi(ref expr) => {\n+            match expr.node {\n+                ExprKind::Break(_, _) |\n+                ExprKind::Continue(_) |\n+                ExprKind::Ret(_) => false,\n+                _ => true,\n+            }\n         },\n         _ => true,\n     }"}, {"sha": "164e391ff242bc7f2174e6d55bdd306356ee0f53", "filename": "tests/ui/is_unit_expr.rs", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/8c824e4cbc3ad5933724da1bea069fe5824551c1/tests%2Fui%2Fis_unit_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c824e4cbc3ad5933724da1bea069fe5824551c1/tests%2Fui%2Fis_unit_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fis_unit_expr.rs?ref=8c824e4cbc3ad5933724da1bea069fe5824551c1", "patch": "@@ -45,4 +45,29 @@ fn main() {\n             0;\n         },\n     };\n+    \n+    loop {\n+        let a2 = match a1 {\n+            Some(x) => x,\n+            _ => {\n+                break;\n+            },\n+        };\n+        let a2 = match a1 {\n+            Some(x) => x,\n+            _ => {\n+                continue;\n+            },\n+        };\n+    }\n+}\n+\n+pub fn foo() -> i32 {\n+    let a2 = match None {\n+        Some(x) => x,\n+        _ => {\n+            return 42;\n+        },\n+    };\n+    55\n }"}]}