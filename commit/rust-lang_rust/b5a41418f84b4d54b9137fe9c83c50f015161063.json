{"sha": "b5a41418f84b4d54b9137fe9c83c50f015161063", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1YTQxNDE4Zjg0YjRkNTRiOTEzN2ZlOWM4M2M1MGYwMTUxNjEwNjM=", "commit": {"author": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2021-08-06T05:09:25Z"}, "committer": {"name": "inquisitivecrystal", "email": "22333129+inquisitivecrystal@users.noreply.github.com", "date": "2021-08-28T07:24:39Z"}, "message": "Update tests", "tree": {"sha": "69cf4d765bbee1441e441f3d54e26c634a53ecfa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69cf4d765bbee1441e441f3d54e26c634a53ecfa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5a41418f84b4d54b9137fe9c83c50f015161063", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5a41418f84b4d54b9137fe9c83c50f015161063", "html_url": "https://github.com/rust-lang/rust/commit/b5a41418f84b4d54b9137fe9c83c50f015161063", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5a41418f84b4d54b9137fe9c83c50f015161063/comments", "author": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "committer": {"login": "inquisitivecrystal", "id": 22333129, "node_id": "MDQ6VXNlcjIyMzMzMTI5", "avatar_url": "https://avatars.githubusercontent.com/u/22333129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inquisitivecrystal", "html_url": "https://github.com/inquisitivecrystal", "followers_url": "https://api.github.com/users/inquisitivecrystal/followers", "following_url": "https://api.github.com/users/inquisitivecrystal/following{/other_user}", "gists_url": "https://api.github.com/users/inquisitivecrystal/gists{/gist_id}", "starred_url": "https://api.github.com/users/inquisitivecrystal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inquisitivecrystal/subscriptions", "organizations_url": "https://api.github.com/users/inquisitivecrystal/orgs", "repos_url": "https://api.github.com/users/inquisitivecrystal/repos", "events_url": "https://api.github.com/users/inquisitivecrystal/events{/privacy}", "received_events_url": "https://api.github.com/users/inquisitivecrystal/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f7bce012d7df14e3e5d8e595fb6f557b677bd92", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f7bce012d7df14e3e5d8e595fb6f557b677bd92", "html_url": "https://github.com/rust-lang/rust/commit/1f7bce012d7df14e3e5d8e595fb6f557b677bd92"}], "stats": {"total": 105, "additions": 99, "deletions": 6}, "files": [{"sha": "0867b08183e2de20eaa7af23ce9f43ce2c6e8b53", "filename": "src/test/rustdoc-ui/deny-missing-docs-macro.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc-ui%2Fdeny-missing-docs-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc-ui%2Fdeny-missing-docs-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdeny-missing-docs-macro.stderr?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -1,4 +1,4 @@\n-error: missing documentation for macro\n+error: missing documentation for a macro\n   --> $DIR/deny-missing-docs-macro.rs:6:1\n    |\n LL | macro_rules! foo {"}, {"sha": "460785ed979de3d6b24d40b1a7a360bbbd35155f", "filename": "src/test/rustdoc/macro-document-private-duplicate.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-document-private-duplicate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-document-private-duplicate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmacro-document-private-duplicate.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -0,0 +1,23 @@\n+// FIXME: If two macros in the same module have the same name\n+// (yes, that's a thing), rustdoc lists both of them on the index page,\n+// but only documents the first one on the page for the macro.\n+// Fortunately, this can only happen in document private items mode,\n+// but it still isn't ideal beahvior.\n+//\n+// See https://github.com/rust-lang/rust/pull/88019#discussion_r693920453\n+//\n+// compile-flags: --document-private-items\n+\n+// @has macro_document_private_duplicate/index.html 'Doc 1.'\n+// @has macro_document_private_duplicate/macro.a_macro.html 'Doc 1.'\n+/// Doc 1.\n+macro_rules! a_macro {\n+    () => ()\n+}\n+\n+// @has macro_document_private_duplicate/index.html 'Doc 2.'\n+// @!has macro_document_private_duplicate/macro.a_macro.html 'Doc 2.'\n+/// Doc 2.\n+macro_rules! a_macro {\n+    () => ()\n+}"}, {"sha": "d2496913ffcf2a4574b0dd4d77c54e4961b45845", "filename": "src/test/rustdoc/macro-document-private.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-document-private.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-document-private.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmacro-document-private.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -0,0 +1,19 @@\n+// Checks that private macros are documented when `--document-private-items`\n+// is present.\n+//\n+// This is a regression test for issue #73754.\n+//\n+// compile-flags: --document-private-items\n+\n+#![feature(decl_macro)]\n+\n+\n+// @has macro_document_private/macro.some_macro.html\n+macro some_macro {\n+    (a: tt) => {}\n+}\n+\n+// @has macro_document_private/macro.another_macro.html\n+macro_rules! another_macro {\n+    (a: tt) => {}\n+}"}, {"sha": "b2d9336cffc815ef234fa8350c245232e6064ad8", "filename": "src/test/rustdoc/macro-indirect-use.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-indirect-use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Frustdoc%2Fmacro-indirect-use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fmacro-indirect-use.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -0,0 +1,16 @@\n+// Checks that it is possible to make a macro public through a `pub use` of its\n+// parent module.\n+//\n+// This is a regression test for issue #87257.\n+\n+#![feature(decl_macro)]\n+\n+mod outer {\n+    pub mod inner {\n+        pub macro some_macro() {}\n+    }\n+}\n+\n+// @has macro_indirect_use/inner/index.html\n+// @has macro_indirect_use/inner/macro.some_macro.html\n+pub use outer::inner;"}, {"sha": "79f7d1206df202bd0248b618fa9e635bdac3c68d", "filename": "src/test/ui/lint/lint-level-macro-def-mod.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def-mod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def-mod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def-mod.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -0,0 +1,17 @@\n+// This checks that exported macros lint as part of their module of origin, not\n+// the root module.\n+//\n+// check-pass\n+\n+//! Top level documentation\n+#![deny(missing_docs)]\n+\n+#[allow(missing_docs)]\n+mod module {\n+    #[macro_export]\n+    macro_rules! hello {\n+        () => ()\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "720f4b453abf55d54cf2e1d92babda2f4213732c", "filename": "src/test/ui/lint/lint-level-macro-def.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-level-macro-def.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -0,0 +1,17 @@\n+// Checks that you can set a lint level specficially for a macro definition.\n+//\n+// This is a regression test for issue #59306.\n+//\n+// check-pass\n+\n+\n+#[deny(missing_docs)]\n+mod module {\n+    #[allow(missing_docs)]\n+    #[macro_export]\n+    macro_rules! hello {\n+        () => ()\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "0d4332ed08b26955b0eb119561c344e709ee2a3c", "filename": "src/test/ui/lint/missing-doc-private-macro.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -29,13 +29,13 @@ mod submodule {\n \n     #[macro_export]\n     macro_rules! exported_to_top_level {\n-        //~^ ERROR missing documentation for macro\n+        //~^ ERROR missing documentation for a macro\n         () => ()\n     }\n }\n \n pub macro top_level_pub_macro {\n-    //~^ ERROR missing documentation for macro\n+    //~^ ERROR missing documentation for a macro\n     () => ()\n }\n "}, {"sha": "979b007d0ecd69c1c08f89c5d45f9feefbb49124", "filename": "src/test/ui/lint/missing-doc-private-macro.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fmissing-doc-private-macro.stderr?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -1,4 +1,4 @@\n-error: missing documentation for macro\n+error: missing documentation for a macro\n   --> $DIR/missing-doc-private-macro.rs:31:5\n    |\n LL |     macro_rules! exported_to_top_level {\n@@ -10,7 +10,7 @@ note: the lint level is defined here\n LL | #![deny(missing_docs)]\n    |         ^^^^^^^^^^^^\n \n-error: missing documentation for macro\n+error: missing documentation for a macro\n   --> $DIR/missing-doc-private-macro.rs:37:1\n    |\n LL | pub macro top_level_pub_macro {"}, {"sha": "2d02b95288df45e7fc0b8121de4ce838de3e2f41", "filename": "src/test/ui/macros/macro-stability-rpass.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability-rpass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5a41418f84b4d54b9137fe9c83c50f015161063/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability-rpass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-stability-rpass.rs?ref=b5a41418f84b4d54b9137fe9c83c50f015161063", "patch": "@@ -1,7 +1,8 @@\n // run-pass\n // aux-build:unstable-macros.rs\n \n-#![feature(unstable_macros, local_unstable)]\n+#![unstable(feature = \"one_two_three_testing\", issue = \"none\")]\n+#![feature(staged_api, unstable_macros, local_unstable)]\n \n #[macro_use] extern crate unstable_macros;\n "}]}