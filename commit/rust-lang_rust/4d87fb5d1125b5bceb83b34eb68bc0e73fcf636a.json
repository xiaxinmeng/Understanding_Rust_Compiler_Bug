{"sha": "4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a", "node_id": "C_kwDOAAsO6NoAKDRkODdmYjVkMTEyNWI1YmNlYjgzYjM0ZWI2OGJjMGU3M2ZjZjYzNmE", "commit": {"author": {"name": "akida31", "email": "akida3@protonmail.com", "date": "2022-10-11T15:48:46Z"}, "committer": {"name": "akida31", "email": "akida3@protonmail.com", "date": "2022-12-13T15:29:13Z"}, "message": "remove manual `fn_decl` extraction", "tree": {"sha": "cc0c2a1a4a65b073093a0a7ce36f9a71f10d3e08", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc0c2a1a4a65b073093a0a7ce36f9a71f10d3e08"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ20GAFrM+jef+hIIAuGvLD2ft8kFAmOYmkkACgkQAuGvLD2f\nt8lpgBAAjPEctyGv5bHHV9Os9ZsvtSmHYiO2CawZiWmmluMoKEENwvNdWPrUDa1w\n1YZCjyEdhIDQl3LpGJb3eaasF+bBNgu0iKV9pbPYexULA+qy/UzRnnfRY7J7SGNK\nBsmtAxlUs/3eFbQL7kW8b3aDi84nv+tnzBmsoy45QD9I5sDLgX9oEAd3WKQioRqt\nOkku9h5Xo2S3/pS/fBj6/8PCrN82Sd3jtg2z4NvrELoAyCJ4n1O5qEglyN2PCG70\n6q2bJf3XcORodEZn0fs7pKgqQfD/jtKl9jzDvYXoU0hPUupKTh8I42vEdMaF6/NV\nRHkp+OYKcoP48UikY2IenYO6D5YZGdhWUWJxCgkQU43VithB4cVkrsLYIBKFUP02\ncMiKXvWXfb5nrt0lzS24jMXWgGN+DrPzxVP6EsP/+phpMRN62p9fxQvpix04Tp9y\nBPHXeW5NNqqO0Thwv3YvPovgyvCRdD1OFMfGFpltXJ/XJg/IpvucHiVF5bR9/NIX\nM257HfM9e5vInh5XbPMY9ol3m001Oa/pHojxy2RHKyhU9mOxYqhE7fE1vvrb4WVU\nv/F1nw4vTgzn2jkOtXvpsqLNsK6V/3aBaI84balJQ1KKZfRe1uLsMoHW09znSExr\nLE09aVt/l3I55gvALi6tWmM0aJ0oBSEx9xblQ2yUWLm5hu4vDqQ=\n=v/PF\n-----END PGP SIGNATURE-----", "payload": "tree cc0c2a1a4a65b073093a0a7ce36f9a71f10d3e08\nparent 7822822d51ecde145747c19a8cf57444666e9a3b\nauthor akida31 <akida3@protonmail.com> 1665503326 +0200\ncommitter akida31 <akida3@protonmail.com> 1670945353 +0100\n\nremove manual `fn_decl` extraction\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a", "html_url": "https://github.com/rust-lang/rust/commit/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a/comments", "author": {"login": "Akida31", "id": 47895118, "node_id": "MDQ6VXNlcjQ3ODk1MTE4", "avatar_url": "https://avatars.githubusercontent.com/u/47895118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akida31", "html_url": "https://github.com/Akida31", "followers_url": "https://api.github.com/users/Akida31/followers", "following_url": "https://api.github.com/users/Akida31/following{/other_user}", "gists_url": "https://api.github.com/users/Akida31/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akida31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akida31/subscriptions", "organizations_url": "https://api.github.com/users/Akida31/orgs", "repos_url": "https://api.github.com/users/Akida31/repos", "events_url": "https://api.github.com/users/Akida31/events{/privacy}", "received_events_url": "https://api.github.com/users/Akida31/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Akida31", "id": 47895118, "node_id": "MDQ6VXNlcjQ3ODk1MTE4", "avatar_url": "https://avatars.githubusercontent.com/u/47895118?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Akida31", "html_url": "https://github.com/Akida31", "followers_url": "https://api.github.com/users/Akida31/followers", "following_url": "https://api.github.com/users/Akida31/following{/other_user}", "gists_url": "https://api.github.com/users/Akida31/gists{/gist_id}", "starred_url": "https://api.github.com/users/Akida31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Akida31/subscriptions", "organizations_url": "https://api.github.com/users/Akida31/orgs", "repos_url": "https://api.github.com/users/Akida31/repos", "events_url": "https://api.github.com/users/Akida31/events{/privacy}", "received_events_url": "https://api.github.com/users/Akida31/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7822822d51ecde145747c19a8cf57444666e9a3b", "url": "https://api.github.com/repos/rust-lang/rust/commits/7822822d51ecde145747c19a8cf57444666e9a3b", "html_url": "https://github.com/rust-lang/rust/commit/7822822d51ecde145747c19a8cf57444666e9a3b"}], "stats": {"total": 20, "additions": 3, "deletions": 17}, "files": [{"sha": "17206b21af0ca4a1da21eb8e8136149628bd8281", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/suggestions.rs", "status": "modified", "additions": 3, "deletions": 17, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fsuggestions.rs?ref=4d87fb5d1125b5bceb83b34eb68bc0e73fcf636a", "patch": "@@ -3412,23 +3412,9 @@ fn hint_missing_borrow<'tcx>(\n         }\n     };\n \n-    let fn_decl = match found_node {\n-        Node::Expr(expr) => match &expr.kind {\n-            hir::ExprKind::Closure(hir::Closure { fn_decl, .. }) => fn_decl,\n-            kind => {\n-                span_bug!(found_span, \"expression must be a closure but is {:?}\", kind)\n-            }\n-        },\n-        Node::Item(item) => match &item.kind {\n-            hir::ItemKind::Fn(signature, _generics, _body) => signature.decl,\n-            kind => {\n-                span_bug!(found_span, \"item must be a function but is {:?}\", kind)\n-            }\n-        },\n-        node => {\n-            span_bug!(found_span, \"node must be a expr or item but is {:?}\", node)\n-        }\n-    };\n+    let fn_decl = found_node\n+        .fn_decl()\n+        .unwrap_or_else(|| span_bug!(found_span, \"found node must be a function\"));\n \n     let arg_spans = fn_decl.inputs.iter().map(|ty| ty.span);\n "}]}