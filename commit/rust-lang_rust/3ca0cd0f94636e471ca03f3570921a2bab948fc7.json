{"sha": "3ca0cd0f94636e471ca03f3570921a2bab948fc7", "node_id": "C_kwDOAAsO6NoAKDNjYTBjZDBmOTQ2MzZlNDcxY2EwM2YzNTcwOTIxYTJiYWI5NDhmYzc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-09-27T19:42:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-27T19:42:24Z"}, "message": "Rollup merge of #102356 - davidtwco:translation-bootstrap-bump-allow-lint, r=lcnr\n\nsession: remove now-unnecessary lint `#[allow]`s\n\nIn #101230, the internal diagnostic migration lints - `diagnostic_outside_of_impl` and `untranslatable_diagnostic` - were modified so that they wouldn't trigger on functions annotated with `#[rustc_lint_diagnostics]`. However, this change has to make it into the bootstrap compiler before the `#[allow]` annotations that it aims to remove can be removed, which is possible now that #102051 has landed.", "tree": {"sha": "2f27bf9e0decf586aa3b0d59fe49d79242793f29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f27bf9e0decf586aa3b0d59fe49d79242793f29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ca0cd0f94636e471ca03f3570921a2bab948fc7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjM1IgCRBK7hj4Ov3rIwAAlRwIAErP/WA46zJoUuI5fgjEg/06\nRxeDern91s8Nya2sh9pDKvNn8LgZOPlrPDTsv7d32yXK3jYAXRYzoJUFgJQ7kqNJ\n5x/TVIN6J+BdnHDwIVMIoTndBSyHQMWVhrmaKV3W4qJvQ1Y+9PrGFzBpCKbOpmLH\nSnxMMZBfVgzsjNgK0lcDs7vUB+xD3e5/PebFiM5M4ty2p/DzLpdmUWn3gNMQY8fO\nrIhWgvOonhtFVW0TPGg21mLECEaNwP4dBfXxh6GiLvnOUBGupT/+pGHCw910H2gx\nGW3AasT4H85JwSXClnu3aaWxXHjPgYTqfJt/jKRoj4TGqA9mrZh8m4A2O9aCCAI=\n=FZN2\n-----END PGP SIGNATURE-----\n", "payload": "tree 2f27bf9e0decf586aa3b0d59fe49d79242793f29\nparent e1fb698c44d3c14d7eea1013a3a456bce95d1393\nparent 2286888ef9441d1efe4d912f2d2d7e8ccc8abd11\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1664307744 +0200\ncommitter GitHub <noreply@github.com> 1664307744 +0200\n\nRollup merge of #102356 - davidtwco:translation-bootstrap-bump-allow-lint, r=lcnr\n\nsession: remove now-unnecessary lint `#[allow]`s\n\nIn #101230, the internal diagnostic migration lints - `diagnostic_outside_of_impl` and `untranslatable_diagnostic` - were modified so that they wouldn't trigger on functions annotated with `#[rustc_lint_diagnostics]`. However, this change has to make it into the bootstrap compiler before the `#[allow]` annotations that it aims to remove can be removed, which is possible now that #102051 has landed.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ca0cd0f94636e471ca03f3570921a2bab948fc7", "html_url": "https://github.com/rust-lang/rust/commit/3ca0cd0f94636e471ca03f3570921a2bab948fc7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ca0cd0f94636e471ca03f3570921a2bab948fc7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1fb698c44d3c14d7eea1013a3a456bce95d1393", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1fb698c44d3c14d7eea1013a3a456bce95d1393", "html_url": "https://github.com/rust-lang/rust/commit/e1fb698c44d3c14d7eea1013a3a456bce95d1393"}, {"sha": "2286888ef9441d1efe4d912f2d2d7e8ccc8abd11", "url": "https://api.github.com/repos/rust-lang/rust/commits/2286888ef9441d1efe4d912f2d2d7e8ccc8abd11", "html_url": "https://github.com/rust-lang/rust/commit/2286888ef9441d1efe4d912f2d2d7e8ccc8abd11"}], "stats": {"total": 52, "additions": 0, "deletions": 52}, "files": [{"sha": "aaf265ad7c336222be085dda70128938307c488d", "filename": "compiler/rustc_session/src/parse.rs", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3ca0cd0f94636e471ca03f3570921a2bab948fc7/compiler%2Frustc_session%2Fsrc%2Fparse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ca0cd0f94636e471ca03f3570921a2bab948fc7/compiler%2Frustc_session%2Fsrc%2Fparse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fparse.rs?ref=3ca0cd0f94636e471ca03f3570921a2bab948fc7", "patch": "@@ -376,8 +376,6 @@ impl ParseSess {\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n-    #[allow(rustc::untranslatable_diagnostic)]\n     pub fn struct_err(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n@@ -386,22 +384,16 @@ impl ParseSess {\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n-    #[allow(rustc::untranslatable_diagnostic)]\n     pub fn struct_warn(&self, msg: impl Into<DiagnosticMessage>) -> DiagnosticBuilder<'_, ()> {\n         self.span_diagnostic.struct_warn(msg)\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n-    #[allow(rustc::untranslatable_diagnostic)]\n     pub fn struct_fatal(&self, msg: impl Into<DiagnosticMessage>) -> DiagnosticBuilder<'_, !> {\n         self.span_diagnostic.struct_fatal(msg)\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n-    #[allow(rustc::untranslatable_diagnostic)]\n     pub fn struct_diagnostic<G: EmissionGuarantee>(\n         &self,\n         msg: impl Into<DiagnosticMessage>,"}, {"sha": "59b544ce9eb832266c836573788db0be232c737d", "filename": "compiler/rustc_session/src/session.rs", "status": "modified", "additions": 0, "deletions": 44, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/3ca0cd0f94636e471ca03f3570921a2bab948fc7/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3ca0cd0f94636e471ca03f3570921a2bab948fc7/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fsession.rs?ref=3ca0cd0f94636e471ca03f3570921a2bab948fc7", "patch": "@@ -288,8 +288,6 @@ impl Session {\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_warn<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -298,8 +296,6 @@ impl Session {\n         self.diagnostic().struct_span_warn(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_warn_with_expectation<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -309,8 +305,6 @@ impl Session {\n         self.diagnostic().struct_span_warn_with_expectation(sp, msg, id)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_warn_with_code<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -320,14 +314,10 @@ impl Session {\n         self.diagnostic().struct_span_warn_with_code(sp, msg, code)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_warn(&self, msg: impl Into<DiagnosticMessage>) -> DiagnosticBuilder<'_, ()> {\n         self.diagnostic().struct_warn(msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_warn_with_expectation(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n@@ -336,8 +326,6 @@ impl Session {\n         self.diagnostic().struct_warn_with_expectation(msg, id)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_allow<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -346,14 +334,10 @@ impl Session {\n         self.diagnostic().struct_span_allow(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_allow(&self, msg: impl Into<DiagnosticMessage>) -> DiagnosticBuilder<'_, ()> {\n         self.diagnostic().struct_allow(msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_expect(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n@@ -362,8 +346,6 @@ impl Session {\n         self.diagnostic().struct_expect(msg, id)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_err<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -372,8 +354,6 @@ impl Session {\n         self.diagnostic().struct_span_err(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_err_with_code<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -384,17 +364,13 @@ impl Session {\n     }\n     // FIXME: This method should be removed (every error should have an associated error code).\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_err(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n     ) -> DiagnosticBuilder<'_, ErrorGuaranteed> {\n         self.parse_sess.struct_err(msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_err_with_code(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n@@ -403,8 +379,6 @@ impl Session {\n         self.diagnostic().struct_err_with_code(msg, code)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_warn_with_code(\n         &self,\n         msg: impl Into<DiagnosticMessage>,\n@@ -413,8 +387,6 @@ impl Session {\n         self.diagnostic().struct_warn_with_code(msg, code)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_fatal<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -423,8 +395,6 @@ impl Session {\n         self.diagnostic().struct_span_fatal(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_span_fatal_with_code<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -434,21 +404,15 @@ impl Session {\n         self.diagnostic().struct_span_fatal_with_code(sp, msg, code)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn struct_fatal(&self, msg: impl Into<DiagnosticMessage>) -> DiagnosticBuilder<'_, !> {\n         self.diagnostic().struct_fatal(msg)\n     }\n \n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn span_fatal<S: Into<MultiSpan>>(&self, sp: S, msg: impl Into<DiagnosticMessage>) -> ! {\n         self.diagnostic().span_fatal(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn span_fatal_with_code<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -458,14 +422,10 @@ impl Session {\n         self.diagnostic().span_fatal_with_code(sp, msg, code)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn fatal(&self, msg: impl Into<DiagnosticMessage>) -> ! {\n         self.diagnostic().fatal(msg).raise()\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn span_err_or_warn<S: Into<MultiSpan>>(\n         &self,\n         is_warning: bool,\n@@ -479,8 +439,6 @@ impl Session {\n         }\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn span_err<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -489,8 +447,6 @@ impl Session {\n         self.diagnostic().span_err(sp, msg)\n     }\n     #[rustc_lint_diagnostics]\n-    #[allow(rustc::untranslatable_diagnostic)]\n-    #[allow(rustc::diagnostic_outside_of_impl)]\n     pub fn span_err_with_code<S: Into<MultiSpan>>(\n         &self,\n         sp: S,"}]}