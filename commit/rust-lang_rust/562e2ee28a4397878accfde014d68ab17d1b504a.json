{"sha": "562e2ee28a4397878accfde014d68ab17d1b504a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2MmUyZWUyOGE0Mzk3ODc4YWNjZmRlMDE0ZDY4YWIxN2QxYjUwNGE=", "commit": {"author": {"name": "Nick Spain", "email": "nicholas.spain@stileeducation.com", "date": "2021-01-01T03:38:23Z"}, "committer": {"name": "Nick Spain", "email": "nicholas.spain@stileeducation.com", "date": "2021-01-02T10:53:52Z"}, "message": "Only log path and syntax range when processing function if source exists", "tree": {"sha": "ef8b8040bd20ee82cd75a6004ddf4284b1aa23b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef8b8040bd20ee82cd75a6004ddf4284b1aa23b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/562e2ee28a4397878accfde014d68ab17d1b504a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/562e2ee28a4397878accfde014d68ab17d1b504a", "html_url": "https://github.com/rust-lang/rust/commit/562e2ee28a4397878accfde014d68ab17d1b504a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/562e2ee28a4397878accfde014d68ab17d1b504a/comments", "author": {"login": "nick96", "id": 9591268, "node_id": "MDQ6VXNlcjk1OTEyNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/9591268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nick96", "html_url": "https://github.com/nick96", "followers_url": "https://api.github.com/users/nick96/followers", "following_url": "https://api.github.com/users/nick96/following{/other_user}", "gists_url": "https://api.github.com/users/nick96/gists{/gist_id}", "starred_url": "https://api.github.com/users/nick96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nick96/subscriptions", "organizations_url": "https://api.github.com/users/nick96/orgs", "repos_url": "https://api.github.com/users/nick96/repos", "events_url": "https://api.github.com/users/nick96/events{/privacy}", "received_events_url": "https://api.github.com/users/nick96/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nick96", "id": 9591268, "node_id": "MDQ6VXNlcjk1OTEyNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/9591268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nick96", "html_url": "https://github.com/nick96", "followers_url": "https://api.github.com/users/nick96/followers", "following_url": "https://api.github.com/users/nick96/following{/other_user}", "gists_url": "https://api.github.com/users/nick96/gists{/gist_id}", "starred_url": "https://api.github.com/users/nick96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nick96/subscriptions", "organizations_url": "https://api.github.com/users/nick96/orgs", "repos_url": "https://api.github.com/users/nick96/repos", "events_url": "https://api.github.com/users/nick96/events{/privacy}", "received_events_url": "https://api.github.com/users/nick96/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14d0db0759c5b8e1d085ebab03a8b944a8921f2e", "url": "https://api.github.com/repos/rust-lang/rust/commits/14d0db0759c5b8e1d085ebab03a8b944a8921f2e", "html_url": "https://github.com/rust-lang/rust/commit/14d0db0759c5b8e1d085ebab03a8b944a8921f2e"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "9445aec074d411294abde492eb5589e526d2a511", "filename": "crates/rust-analyzer/src/cli/analysis_stats.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/562e2ee28a4397878accfde014d68ab17d1b504a/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs", "raw_url": "https://github.com/rust-lang/rust/raw/562e2ee28a4397878accfde014d68ab17d1b504a/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fcli%2Fanalysis_stats.rs?ref=562e2ee28a4397878accfde014d68ab17d1b504a", "patch": "@@ -161,12 +161,12 @@ impl AnalysisStatsCmd {\n             }\n             let mut msg = format!(\"processing: {}\", full_name);\n             if verbosity.is_verbose() {\n-                #[allow(deprecated)]\n-                let src = f.source_old(db);\n-                let original_file = src.file_id.original_file(db);\n-                let path = vfs.file_path(original_file);\n-                let syntax_range = src.value.syntax().text_range();\n-                format_to!(msg, \" ({} {:?})\", path, syntax_range);\n+                if let Some(src) = f.source(db) {\n+                    let original_file = src.file_id.original_file(db);\n+                    let path = vfs.file_path(original_file);\n+                    let syntax_range = src.value.syntax().text_range();\n+                    format_to!(msg, \" ({} {:?})\", path, syntax_range);\n+                }\n             }\n             if verbosity.is_spammy() {\n                 bar.println(msg.to_string());"}]}