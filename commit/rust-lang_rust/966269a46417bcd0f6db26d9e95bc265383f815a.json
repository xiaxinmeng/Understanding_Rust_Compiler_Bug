{"sha": "966269a46417bcd0f6db26d9e95bc265383f815a", "node_id": "C_kwDOAAsO6NoAKDk2NjI2OWE0NjQxN2JjZDBmNmRiMjZkOWU5NWJjMjY1MzgzZjgxNWE", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-03T20:16:33Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-04T14:26:58Z"}, "message": "Document generics_def_id_map field and record/get methods on it", "tree": {"sha": "72c843d4ca0c9ef21ff2b6ac40bc6f1117e37986", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72c843d4ca0c9ef21ff2b6ac40bc6f1117e37986"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/966269a46417bcd0f6db26d9e95bc265383f815a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmLr1zIACgkQgTGiTgx5\n76+JeA/+Iac5apRzZz47gWw4CAEvHEIvJAuytSElDBbzwqnnz8820wGP6UM4qP2r\nY+tDdB5Y3Vu2o3GFMkEhuBI6P9eprb9R/i1a9P/PmneaqYxryfEYsGBGaeueWUSK\nssD3jzMm+9C+KZeBm411p36f5JUPyjm9MDvlkzKk5uOHLPx2dq2fenfoXi1vvbwq\njxJhQxcCvxPIUt29lGB/C+8v4y1pGr6PR8Wc1YYjeL4zAlsWLZ5n8N0rFYDoBOEO\nUc1lhCD0CjTU5K7aaeOQ+bAXH5RcgTwQDUVlWA35RevEWK/ZMxuxahUwcF/hjebT\n3vN860LcdsAF5EwErxWZ/YxSyaTPiQTCYM+qCooGRar0zG9Sn/xWTFdP6mx2DBLH\n9KrxbZcIVx7ihmQNO/4mP30DvxJBxVDmyb6NgsHVIsDYBZUvuNmBOBUPxYbdHF2B\nqhKXeGX2kNeP7+NdF5kQ0clRnw0dOkpHfy4IC4YlHyCz8zDyxottgsjmMXPl03xW\nnoTjCj7bgLgIg/wWJD0Abllv2orPAUlI0YU/0b7WQlcMHlEQMXaV1gSPQ4OA9pYZ\nF7d8E7ngQ5kyLEpUTYK/he09G5GFzuIXa2IT10/5mYecjzpjB+AvC5cgrPWp/lTX\n4nTtSmY8rMuG2As9rfiehV5ekpsyQD3UP5xscTlXRZjrPYBLvoE=\n=WhqA\n-----END PGP SIGNATURE-----", "payload": "tree 72c843d4ca0c9ef21ff2b6ac40bc6f1117e37986\nparent 78585098b5914a978b1c11d770e13541b97bd11f\nauthor Santiago Pastorino <spastorino@gmail.com> 1659557793 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1659623218 -0300\n\nDocument generics_def_id_map field and record/get methods on it\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/966269a46417bcd0f6db26d9e95bc265383f815a", "html_url": "https://github.com/rust-lang/rust/commit/966269a46417bcd0f6db26d9e95bc265383f815a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/966269a46417bcd0f6db26d9e95bc265383f815a/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78585098b5914a978b1c11d770e13541b97bd11f", "url": "https://api.github.com/repos/rust-lang/rust/commits/78585098b5914a978b1c11d770e13541b97bd11f", "html_url": "https://github.com/rust-lang/rust/commit/78585098b5914a978b1c11d770e13541b97bd11f"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "52beb812f789138ccc33842169f3ff34c1fa3e59", "filename": "compiler/rustc_ast_lowering/src/lib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/966269a46417bcd0f6db26d9e95bc265383f815a/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/966269a46417bcd0f6db26d9e95bc265383f815a/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs?ref=966269a46417bcd0f6db26d9e95bc265383f815a", "patch": "@@ -135,7 +135,11 @@ trait ResolverAstLoweringExt {\n     fn get_lifetime_res(&self, id: NodeId) -> Option<LifetimeRes>;\n     fn take_extra_lifetime_params(&mut self, id: NodeId) -> Vec<(Ident, NodeId, LifetimeRes)>;\n     fn decl_macro_kind(&self, def_id: LocalDefId) -> MacroKind;\n+    /// Record the map from `from` local def id to `to` local def id, on `generics_def_id_map`\n+    /// field.\n     fn record_def_id_remap(&mut self, from: LocalDefId, to: LocalDefId);\n+    /// Get the previously recorded `to` local def id given the `from` local def id, obtained using\n+    /// `generics_def_id_map` field.\n     fn get_remapped_def_id(&self, local_def_id: LocalDefId) -> LocalDefId;\n }\n "}, {"sha": "02da02568d7e525d535445eecbc5f52401ecbdba", "filename": "compiler/rustc_middle/src/ty/mod.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/966269a46417bcd0f6db26d9e95bc265383f815a/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/966269a46417bcd0f6db26d9e95bc265383f815a/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fmod.rs?ref=966269a46417bcd0f6db26d9e95bc265383f815a", "patch": "@@ -177,7 +177,10 @@ pub struct ResolverAstLowering {\n     pub label_res_map: NodeMap<ast::NodeId>,\n     /// Resolutions for lifetimes.\n     pub lifetimes_res_map: NodeMap<LifetimeRes>,\n-    /// Mapping from generics def-id to RPIT copied generic def-id\n+    /// Mapping from generics `def_id`s to TAIT generics `def_id`s.\n+    /// For each captured lifetime (e.g., 'a), we create a new lifetime parameter that is a generic\n+    /// defined on the TAIT, so we have type Foo<'a1> = ... and we establish a mapping in this\n+    /// field from the original parameter 'a to the new parameter 'a1.\n     pub generics_def_id_map: Vec<FxHashMap<LocalDefId, LocalDefId>>,\n     /// Lifetime parameters that lowering will have to introduce.\n     pub extra_lifetime_params_map: NodeMap<Vec<(Ident, ast::NodeId, LifetimeRes)>>,"}]}