{"sha": "b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1NWM4MzMzY2JjNDRjM2RkMjFiNmRlOGM2NjQ3YzNjMWE4ZjljODc=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-30T00:33:33Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-03-30T00:33:39Z"}, "message": "Beef up the SREQ variables in Makefile.in, make tests depend on libstd.so", "tree": {"sha": "ab1ff40c0131afbc48416770af2cc5b1b6843b6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab1ff40c0131afbc48416770af2cc5b1b6843b6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87", "html_url": "https://github.com/rust-lang/rust/commit/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "601cf8c97fcc4ba444015fc4fc122b1648ae8230", "url": "https://api.github.com/repos/rust-lang/rust/commits/601cf8c97fcc4ba444015fc4fc122b1648ae8230", "html_url": "https://github.com/rust-lang/rust/commit/601cf8c97fcc4ba444015fc4fc122b1648ae8230"}], "stats": {"total": 20, "additions": 9, "deletions": 11}, "files": [{"sha": "6b5d44b42806dd2c916e8697594b6cd25ccb8390", "filename": "Makefile.in", "status": "modified", "additions": 9, "deletions": 11, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=b55c8333cbc44c3dd21b6de8c6647c3c1a8f9c87", "patch": "@@ -388,8 +388,9 @@ COMPILER_INPUTS := $(wildcard $(addprefix $(S)src/comp/, \\\n \n LREQ := rt/$(CFG_RUNTIME) rustllvm/$(CFG_RUSTLLVM)\n BREQ := boot/rustboot$(X) boot/$(CFG_STDLIB)\n-SREQ0 := stage0/rustc$(X) $(LREQ)\n-SREQ1 := stage1/rustc$(X) $(LREQ)\n+SREQ0 := stage0/rustc$(X) $(LREQ) stage0/glue.o stage0/$(CFG_STDLIB)\n+SREQ1 := stage1/rustc$(X) $(LREQ) stage1/glue.o stage1/$(CFG_STDLIB)\n+SREQ2 := stage2/rustc$(X) $(LREQ) stage2/glue.o stage2/$(CFG_STDLIB)\n \n \n ######################################################################\n@@ -468,20 +469,17 @@ stage2/$(CFG_STDLIB): stage2/std.o stage2/glue.o\n \n \n \n-stage0/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) \\\n-                  $(BREQ)\n+stage0/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(BREQ)\n \t@$(call E, compile: $@)\n \t$(BOOT) -minimal -o $@ $<\n \t$(Q)chmod 0755 $@\n \n-stage1/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) \\\n-                  $(SREQ0) stage0/$(CFG_STDLIB)\n+stage1/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ0)\n \t@$(call E, compile: $@)\n \t$(STAGE0) -o $@ $<\n \t$(Q)chmod 0755 $@\n \n-stage2/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) \\\n-                  $(SREQ1) stage1/$(CFG_STDLIB)\n+stage2/rustc$(X): $(COMPILER_CRATE) $(COMPILER_INPUTS) $(SREQ1)\n \t@$(call E, compile: $@)\n \t$(STAGE1) -o $@ $<\n \t$(Q)chmod 0755 $@\n@@ -714,7 +712,7 @@ compile-check: tidy \\\n # Testing rules\n ######################################################################\n \n-%.stage0$(X): %.stage0.o rt/$(CFG_RUNTIME) stage0/glue.o\n+%.stage0$(X): %.stage0.o  $(SREQ0)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCC_CFLAGS) stage0/glue.o -o $@ $< \\\n       -Lstage0 -Lrt -lrustrt -lstd\n@@ -723,7 +721,7 @@ compile-check: tidy \\\n \t@# programs, I\\'ll live with the noise.\n \t-$(Q)$(CFG_DSYMUTIL) $@\n \n-%.stage1(X): %.stage1.o rt/$(CFG_RUNTIME) stage1/glue.o\n+%.stage1(X): %.stage1.o $(SREQ1)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCC_CFLAGS) stage1/glue.o -o $@ $< \\\n       -Lstage1 -Lrt -lrustrt -lstd\n@@ -732,7 +730,7 @@ compile-check: tidy \\\n \t@# programs, I\\'ll live with the noise.\n \t-$(Q)$(CFG_DSYMUTIL) $@\n \n-%.stage2$(X): %.stage2.o rt/$(CFG_RUNTIME) stage2/glue.o\n+%.stage2$(X): %.stage2.o $(SREQ2)\n \t@$(call E, link [gcc]: $@)\n \t$(Q)gcc $(CFG_GCC_CFLAGS) stage2/glue.o -o $@ $< \\\n       -Lstage2 -Lrt -lrustrt -lstd"}]}