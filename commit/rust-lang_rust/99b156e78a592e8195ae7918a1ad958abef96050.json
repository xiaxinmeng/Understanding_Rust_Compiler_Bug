{"sha": "99b156e78a592e8195ae7918a1ad958abef96050", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5YjE1NmU3OGE1OTJlODE5NWFlNzkxOGExYWQ5NThhYmVmOTYwNTA=", "commit": {"author": {"name": "Jyun-Yan You", "email": "jyyou@cs.nctu.edu.tw", "date": "2013-03-19T05:32:03Z"}, "committer": {"name": "Jyun-Yan You", "email": "jyyou.tw@gmail.com", "date": "2013-04-04T10:52:24Z"}, "message": "mk: mips toolchain config", "tree": {"sha": "ef3a4e5116171bc62e78bfccf9506f46be91853c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef3a4e5116171bc62e78bfccf9506f46be91853c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99b156e78a592e8195ae7918a1ad958abef96050", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99b156e78a592e8195ae7918a1ad958abef96050", "html_url": "https://github.com/rust-lang/rust/commit/99b156e78a592e8195ae7918a1ad958abef96050", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99b156e78a592e8195ae7918a1ad958abef96050/comments", "author": {"login": "crabtw", "id": 36015, "node_id": "MDQ6VXNlcjM2MDE1", "avatar_url": "https://avatars.githubusercontent.com/u/36015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crabtw", "html_url": "https://github.com/crabtw", "followers_url": "https://api.github.com/users/crabtw/followers", "following_url": "https://api.github.com/users/crabtw/following{/other_user}", "gists_url": "https://api.github.com/users/crabtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/crabtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crabtw/subscriptions", "organizations_url": "https://api.github.com/users/crabtw/orgs", "repos_url": "https://api.github.com/users/crabtw/repos", "events_url": "https://api.github.com/users/crabtw/events{/privacy}", "received_events_url": "https://api.github.com/users/crabtw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "crabtw", "id": 36015, "node_id": "MDQ6VXNlcjM2MDE1", "avatar_url": "https://avatars.githubusercontent.com/u/36015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crabtw", "html_url": "https://github.com/crabtw", "followers_url": "https://api.github.com/users/crabtw/followers", "following_url": "https://api.github.com/users/crabtw/following{/other_user}", "gists_url": "https://api.github.com/users/crabtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/crabtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crabtw/subscriptions", "organizations_url": "https://api.github.com/users/crabtw/orgs", "repos_url": "https://api.github.com/users/crabtw/repos", "events_url": "https://api.github.com/users/crabtw/events{/privacy}", "received_events_url": "https://api.github.com/users/crabtw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b5d82242124a153801f571bcfcb786a8872aa46e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b5d82242124a153801f571bcfcb786a8872aa46e", "html_url": "https://github.com/rust-lang/rust/commit/b5d82242124a153801f571bcfcb786a8872aa46e"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "1e102587bf4a0813baff6ac87e94fe9db11fcecc", "filename": "mk/platform.mk", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/99b156e78a592e8195ae7918a1ad958abef96050/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/99b156e78a592e8195ae7918a1ad958abef96050/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=99b156e78a592e8195ae7918a1ad958abef96050", "patch": "@@ -239,6 +239,31 @@ CFG_RUN_arm-linux-androideabi=\n CFG_RUN_TARG_arm-linux-androideabi=\n RUSTC_FLAGS_arm-linux-androideabi :=--android-cross-path=$(CFG_ANDROID_CROSS_PATH)\n \n+# mips-unknown-linux-gnu configuration\n+CC_mips-unknown-linux-gnu=mips-linux-gnu-gcc\n+CXX_mips-unknown-linux-gnu=mips-linux-gnu-g++\n+CPP_mips-unknown-linux-gnu=mips-linux-gnu-gcc -E\n+AR_mips-unknown-linux-gnu=mips-linux-gnu-ar\n+CFG_LIB_NAME_mips-unknown-linux-gnu=lib$(1).so\n+CFG_LIB_GLOB_mips-unknown-linux-gnu=lib$(1)-*.so\n+CFG_LIB_DSYM_GLOB_mips-unknown-linux-gnu=lib$(1)-*.dylib.dSYM\n+CFG_GCCISH_CFLAGS_mips-unknown-linux-gnu := -Wall -g -fPIC -mips32r2 -msoft-float -mabi=32\n+CFG_GCCISH_CXXFLAGS_mips-unknown-linux-gnu := -fno-rtti\n+CFG_GCCISH_LINK_FLAGS_mips-unknown-linux-gnu := -shared -fPIC -g -mips32r2 -msoft-float -mabi=32\n+CFG_GCCISH_DEF_FLAG_mips-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list=\n+CFG_GCCISH_PRE_LIB_FLAGS_mips-unknown-linux-gnu := -Wl,-whole-archive\n+CFG_GCCISH_POST_LIB_FLAGS_mips-unknown-linux-gnu := -Wl,-no-whole-archive -Wl,-znoexecstack\n+CFG_DEF_SUFFIX_mips-unknown-linux-gnu := .linux.def\n+CFG_INSTALL_NAME_mips-unknown-linux-gnu =\n+CFG_LIBUV_LINK_FLAGS_mips-unknown-linux-gnu =\n+CFG_EXE_SUFFIX_mips-unknown-linux-gnu :=\n+CFG_WINDOWSY_mips-unknown-linux-gnu :=\n+CFG_UNIXY_mips-unknown-linux-gnu := 1\n+CFG_PATH_MUNGE_mips-unknown-linux-gnu := true\n+CFG_LDPATH_mips-unknown-linux-gnu :=\n+CFG_RUN_mips-unknown-linux-gnu=\n+CFG_RUN_TARG_mips-unknown-linux-gnu=\n+\n # i686-pc-mingw32 configuration\n CC_i686-pc-mingw32=$(CC)\n CXX_i686-pc-mingw32=$(CXX)"}, {"sha": "b2c282e207fbc04de9c8df8c5d94808804ef8915", "filename": "mk/rt.mk", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/99b156e78a592e8195ae7918a1ad958abef96050/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/99b156e78a592e8195ae7918a1ad958abef96050/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=99b156e78a592e8195ae7918a1ad958abef96050", "patch": "@@ -27,6 +27,7 @@\n LIBUV_FLAGS_i386 = -m32 -fPIC\n LIBUV_FLAGS_x86_64 = -m64 -fPIC\n LIBUV_FLAGS_arm = -fPIC -DANDROID -std=gnu99\n+LIBUV_FLAGS_mips = -fPIC -mips32r2 -msoft-float -mabi=32\n \n # when we're doing a snapshot build, we intentionally degrade as many\n # features in libuv and the runtime as possible, to ease portability.\n@@ -180,6 +181,10 @@ else\n $$(LIBUV_LIB_$(1)): $$(LIBUV_DEPS)\n \t$$(Q)$$(MAKE) -C $$(S)src/libuv/ \\\n \t\tCFLAGS=\"$$(LIBUV_FLAGS_$$(HOST_$(1))) $$(SNAP_DEFINES)\" \\\n+\t\tLDFLAGS=\"$$(LIBUV_FLAGS_$$(HOST_$(1)))\" \\\n+\t\tCC=\"$$(CC_$(1))\" \\\n+\t\tCXX=\"$$(CXX_$(1))\" \\\n+\t\tAR=\"$$(AR_$(1))\" \\\n \t\tbuilddir_name=\"$$(CFG_BUILD_DIR)/rt/$(1)/libuv\" \\\n \t\tV=$$(VERBOSE)\n endif"}]}