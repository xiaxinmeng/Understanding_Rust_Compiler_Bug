{"sha": "df18642b1ad80369cefc0cbe626e5b0096654938", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRmMTg2NDJiMWFkODAzNjljZWZjMGNiZTYyNmU1YjAwOTY2NTQ5Mzg=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-05-02T14:52:48Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-05-02T15:56:58Z"}, "message": "Revise @ in patterns section\n\nFixes #25008", "tree": {"sha": "219dfd13959219416cce42691e1816644f2225a0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/219dfd13959219416cce42691e1816644f2225a0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/df18642b1ad80369cefc0cbe626e5b0096654938", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/df18642b1ad80369cefc0cbe626e5b0096654938", "html_url": "https://github.com/rust-lang/rust/commit/df18642b1ad80369cefc0cbe626e5b0096654938", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/df18642b1ad80369cefc0cbe626e5b0096654938/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "354d16bd72ed002d6d8abe9896f89a445a60c21f", "url": "https://api.github.com/repos/rust-lang/rust/commits/354d16bd72ed002d6d8abe9896f89a445a60c21f", "html_url": "https://github.com/rust-lang/rust/commit/354d16bd72ed002d6d8abe9896f89a445a60c21f"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "266c1cafdee57035e9920785e79f1b54107a9cd7", "filename": "src/doc/trpl/patterns.md", "status": "modified", "additions": 31, "deletions": 3, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/df18642b1ad80369cefc0cbe626e5b0096654938/src%2Fdoc%2Ftrpl%2Fpatterns.md", "raw_url": "https://github.com/rust-lang/rust/raw/df18642b1ad80369cefc0cbe626e5b0096654938/src%2Fdoc%2Ftrpl%2Fpatterns.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ftrpl%2Fpatterns.md?ref=df18642b1ad80369cefc0cbe626e5b0096654938", "patch": "@@ -70,8 +70,7 @@ This prints `something else`\n \n # Bindings\n \n-If you\u2019re matching multiple things, via a `|` or a `...`, you can bind\n-the value to a name with `@`:\n+You can bind values to names with `@`:\n \n ```rust\n let x = 1;\n@@ -82,7 +81,36 @@ match x {\n }\n ```\n \n-This prints `got a range element 1`.\n+This prints `got a range element 1`. This is useful when you want to\n+do a complicated match of part of a data structure:\n+\n+```rust\n+#[derive(Debug)]\n+struct Person {\n+    name: Option<String>,\n+}\n+\n+let name = \"Steve\".to_string();\n+let mut x: Option<Person> = Some(Person { name: Some(name) });\n+match x {\n+    Some(Person { name: ref a @ Some(_), .. }) => println!(\"{:?}\", a),\n+    _ => {}\n+}\n+```\n+\n+This prints `Some(\"Steve\")`: We\u2019ve bound the inner `name` to `a`.\n+\n+If you use `@` with `|`, you need to make sure the name is bound in each part\n+of the pattern:\n+\n+```rust\n+let x = 5;\n+\n+match x {\n+    e @ 1 ... 5 | e @ 8 ... 10 => println!(\"got a range element {}\", e),\n+    _ => println!(\"anything\"),\n+}\n+```\n \n # Ignoring variants\n "}]}