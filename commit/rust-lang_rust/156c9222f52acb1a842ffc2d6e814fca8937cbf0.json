{"sha": "156c9222f52acb1a842ffc2d6e814fca8937cbf0", "node_id": "C_kwDOAAsO6NoAKDE1NmM5MjIyZjUyYWNiMWE4NDJmZmMyZDZlODE0ZmNhODkzN2NiZjA", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2021-09-30T01:29:24Z"}, "committer": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2021-10-13T23:26:00Z"}, "message": "Move misplaced comment", "tree": {"sha": "79cf3d4ba095f68fc3a43ada27b80a771ea8c7de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/79cf3d4ba095f68fc3a43ada27b80a771ea8c7de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/156c9222f52acb1a842ffc2d6e814fca8937cbf0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/156c9222f52acb1a842ffc2d6e814fca8937cbf0", "html_url": "https://github.com/rust-lang/rust/commit/156c9222f52acb1a842ffc2d6e814fca8937cbf0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/156c9222f52acb1a842ffc2d6e814fca8937cbf0/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "485ae9f2c077511f7e2838919c948f9b9b0f0f4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/485ae9f2c077511f7e2838919c948f9b9b0f0f4f", "html_url": "https://github.com/rust-lang/rust/commit/485ae9f2c077511f7e2838919c948f9b9b0f0f4f"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "89a36e89b0acf513c92f6588b5e4323aae4b4d79", "filename": "src/test/ui/suggestions/expected-boxed-future-isnt-pinned.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/156c9222f52acb1a842ffc2d6e814fca8937cbf0/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/156c9222f52acb1a842ffc2d6e814fca8937cbf0/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.rs?ref=156c9222f52acb1a842ffc2d6e814fca8937cbf0", "patch": "@@ -11,13 +11,13 @@ fn foo<F: Future<Output=i32> + Send + 'static>(x: F) -> BoxFuture<'static, i32>\n     x //~ ERROR mismatched types\n }\n \n-// This case is still subpar:\n-// `Pin::new(x)`: store this in the heap by calling `Box::new`: `Box::new(x)`\n-// Should suggest changing the code from `Pin::new` to `Box::pin`.\n fn bar<F: Future<Output=i32> + Send + 'static>(x: F) -> BoxFuture<'static, i32> {\n     Box::new(x) //~ ERROR mismatched types\n }\n \n+// This case is still subpar:\n+// `Pin::new(x)`: store this in the heap by calling `Box::new`: `Box::new(x)`\n+// Should suggest changing the code from `Pin::new` to `Box::pin`.\n fn baz<F: Future<Output=i32> + Send + 'static>(x: F) -> BoxFuture<'static, i32> {\n     Pin::new(x) //~ ERROR mismatched types\n     //~^ ERROR E0277"}, {"sha": "f0af37e0cbe8af7e47f7b276e0ceb804c04a9dcf", "filename": "src/test/ui/suggestions/expected-boxed-future-isnt-pinned.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/156c9222f52acb1a842ffc2d6e814fca8937cbf0/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/156c9222f52acb1a842ffc2d6e814fca8937cbf0/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fexpected-boxed-future-isnt-pinned.stderr?ref=156c9222f52acb1a842ffc2d6e814fca8937cbf0", "patch": "@@ -15,7 +15,7 @@ LL |     Box::pin(x)\n    |     +++++++++ +\n \n error[E0308]: mismatched types\n-  --> $DIR/expected-boxed-future-isnt-pinned.rs:18:5\n+  --> $DIR/expected-boxed-future-isnt-pinned.rs:15:5\n    |\n LL | fn bar<F: Future<Output=i32> + Send + 'static>(x: F) -> BoxFuture<'static, i32> {\n    |                                                         ----------------------- expected `Pin<Box<(dyn Future<Output = i32> + Send + 'static)>>` because of return type"}]}