{"sha": "0ebe112b3bd137ec0363d47caad4ea80ad328717", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlYmUxMTJiM2JkMTM3ZWMwMzYzZDQ3Y2FhZDRlYTgwYWQzMjg3MTc=", "commit": {"author": {"name": "Adrien T\u00e9tar", "email": "adri-from-59@hotmail.fr", "date": "2014-02-02T10:47:02Z"}, "committer": {"name": "Adrien T\u00e9tar", "email": "adri-from-59@hotmail.fr", "date": "2014-02-05T18:53:53Z"}, "message": "etc: add missing license boilerplates", "tree": {"sha": "9c64acbafde92f0a30d5f6d1341bbe8058ef7cba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9c64acbafde92f0a30d5f6d1341bbe8058ef7cba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ebe112b3bd137ec0363d47caad4ea80ad328717", "comment_count": 2, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ebe112b3bd137ec0363d47caad4ea80ad328717", "html_url": "https://github.com/rust-lang/rust/commit/0ebe112b3bd137ec0363d47caad4ea80ad328717", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ebe112b3bd137ec0363d47caad4ea80ad328717/comments", "author": {"login": "adrientetar", "id": 1250894, "node_id": "MDQ6VXNlcjEyNTA4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1250894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrientetar", "html_url": "https://github.com/adrientetar", "followers_url": "https://api.github.com/users/adrientetar/followers", "following_url": "https://api.github.com/users/adrientetar/following{/other_user}", "gists_url": "https://api.github.com/users/adrientetar/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrientetar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrientetar/subscriptions", "organizations_url": "https://api.github.com/users/adrientetar/orgs", "repos_url": "https://api.github.com/users/adrientetar/repos", "events_url": "https://api.github.com/users/adrientetar/events{/privacy}", "received_events_url": "https://api.github.com/users/adrientetar/received_events", "type": "User", "site_admin": false}, "committer": {"login": "adrientetar", "id": 1250894, "node_id": "MDQ6VXNlcjEyNTA4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1250894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adrientetar", "html_url": "https://github.com/adrientetar", "followers_url": "https://api.github.com/users/adrientetar/followers", "following_url": "https://api.github.com/users/adrientetar/following{/other_user}", "gists_url": "https://api.github.com/users/adrientetar/gists{/gist_id}", "starred_url": "https://api.github.com/users/adrientetar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adrientetar/subscriptions", "organizations_url": "https://api.github.com/users/adrientetar/orgs", "repos_url": "https://api.github.com/users/adrientetar/repos", "events_url": "https://api.github.com/users/adrientetar/events{/privacy}", "received_events_url": "https://api.github.com/users/adrientetar/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc1d655ed29a6ead06dfccece1b585e2c4212e16", "url": "https://api.github.com/repos/rust-lang/rust/commits/fc1d655ed29a6ead06dfccece1b585e2c4212e16", "html_url": "https://github.com/rust-lang/rust/commit/fc1d655ed29a6ead06dfccece1b585e2c4212e16"}], "stats": {"total": 412, "additions": 268, "deletions": 144}, "files": [{"sha": "c86e926003ff62ed7c7f9b5eafd1aca0f97b3639", "filename": "src/etc/check-summary.py", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcheck-summary.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcheck-summary.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcheck-summary.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,12 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import glob\n import sys"}, {"sha": "f1ac3e89846af58e359e8a7f58d8abee3c3d2da5", "filename": "src/etc/combine-tests.py", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcombine-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcombine-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcombine-tests.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,7 +1,14 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2011-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n-# this combines all the working run-pass tests into a single large crate so we\n+# This combines all the working run-pass tests into a single large crate so we\n # can run it \"fast\": spawning zillions of windows processes is our major build\n # bottleneck (and it doesn't hurt to run faster on other platforms as well).\n "}, {"sha": "8aab3f18bdad016c0734809cb4bee4d5873dbe8f", "filename": "src/etc/copy-runtime-deps.py", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcopy-runtime-deps.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fcopy-runtime-deps.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcopy-runtime-deps.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,7 +1,14 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2013-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n-# Copies Rust runtime dependencies to the specified directory\n+# Copies Rust runtime dependencies to the specified directory.\n \n import snapshot, sys, os, shutil\n "}, {"sha": "06cdf66a9189ba17547a4d455e888de05339d78e", "filename": "src/etc/extract-tests.py", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fextract-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fextract-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fextract-tests.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,13 @@\n-# xfail-license\n-# -*- coding: utf-8 -*-\n+# Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n \"\"\"\n Script for extracting compilable fragments from markdown documentation. See\n prep.js for a description of the format recognized by this tool. Expects"}, {"sha": "4e0fbe944988cfff90abbc20f31e4835aa504d17", "filename": "src/etc/extract_grammar.py", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fextract_grammar.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fextract_grammar.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fextract_grammar.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,12 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n # This script is for extracting the grammar from the rust docs.\n "}, {"sha": "a3f057c04b0a1030c7c43ceb483754a385aec337", "filename": "src/etc/generate-deriving-span-tests.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fgenerate-deriving-span-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fgenerate-deriving-span-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fgenerate-deriving-span-tests.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,5 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n # Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n # file at the top-level directory of this distribution and at\n # http://rust-lang.org/COPYRIGHT."}, {"sha": "de148f3cfabdf30faed7f001a9f99ef0eff8b98b", "filename": "src/etc/generate-keyword-tests.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fgenerate-keyword-tests.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fgenerate-keyword-tests.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fgenerate-keyword-tests.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,5 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n # Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n # file at the top-level directory of this distribution and at\n # http://rust-lang.org/COPYRIGHT."}, {"sha": "fd97affd9ad5883d56d6acd0c182486e68eedcb5", "filename": "src/etc/get-snapshot.py", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fget-snapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fget-snapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fget-snapshot.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,12 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2011-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import os, tarfile, re, shutil, sys\n from snapshot import *"}, {"sha": "32e9691f8153bf5ac33c7cc977791b8aae791598", "filename": "src/etc/latest-unix-snaps.py", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Flatest-unix-snaps.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Flatest-unix-snaps.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Flatest-unix-snaps.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,14 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n+# Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import os, tarfile, hashlib, re, shutil, sys\n from snapshot import *"}, {"sha": "fec78fc1aafdf733706edfa417f8d4280dfcdeb6", "filename": "src/etc/make-snapshot.py", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmake-snapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmake-snapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmake-snapshot.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,12 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2011-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import snapshot, sys\n "}, {"sha": "fb886f30bd64df9cd71605d0dc1f342c7a28b13b", "filename": "src/etc/maketest.py", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmaketest.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmaketest.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmaketest.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,4 +1,12 @@\n-# xfail-license\n+# Copyright 2013-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import subprocess\n import os"}, {"sha": "3934c235e8c1e5d7224a9df273b038e5e66a0379", "filename": "src/etc/mirror-all-snapshots.py", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmirror-all-snapshots.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmirror-all-snapshots.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmirror-all-snapshots.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,14 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n+# Copyright 2011-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import os, tarfile, hashlib, re, shutil\n from snapshot import *"}, {"sha": "0fdeb23d2e3a821906934e65354096c87e12c25d", "filename": "src/etc/mklldeps.py", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmklldeps.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fmklldeps.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmklldeps.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,4 +1,12 @@\n-# xfail-license\n+# Copyright 2013-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import os\n import sys"}, {"sha": "ba193db1eda5c072cbeb341fd7ff96be34951b97", "filename": "src/etc/snapshot.py", "status": "modified", "additions": 122, "deletions": 116, "changes": 238, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fsnapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fsnapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsnapshot.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,23 +1,31 @@\n-# xfail-license\n+# Copyright 2011-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import re, os, sys, glob, tarfile, shutil, subprocess, tempfile, distutils.spawn\n \n try:\n-  import hashlib\n-  sha_func = hashlib.sha1\n+    import hashlib\n+    sha_func = hashlib.sha1\n except ImportError:\n-  import sha\n-  sha_func = sha.new\n+    import sha\n+    sha_func = sha.new\n \n def scrub(b):\n-  if sys.version_info >= (3,) and type(b) == bytes:\n-    return b.decode('ascii')\n-  else:\n-    return b\n+    if sys.version_info >= (3,) and type(b) == bytes:\n+        return b.decode('ascii')\n+    else:\n+        return b\n \n src_dir = scrub(os.getenv(\"CFG_SRC_DIR\"))\n if not src_dir:\n-  raise Exception(\"missing env var CFG_SRC_DIR\")\n+    raise Exception(\"missing env var CFG_SRC_DIR\")\n \n snapshotfile = os.path.join(src_dir, \"src\", \"snapshots.txt\")\n download_url_base = \"http://static.rust-lang.org/stage0-snapshots\"\n@@ -31,37 +39,36 @@ def scrub(b):\n     \"freebsd\": [\"bin/rustc\"],\n     }\n \n-winnt_runtime_deps = [\"libgcc_s_dw2-1.dll\",\n-                      \"libstdc++-6.dll\"]\n+winnt_runtime_deps = [\"libgcc_s_dw2-1.dll\", \"libstdc++-6.dll\"]\n \n def parse_line(n, line):\n-  global snapshotfile\n+    global snapshotfile\n \n-  if re.match(r\"\\s*$\", line): return None\n+    if re.match(r\"\\s*$\", line): return None\n \n-  if re.match(r\"^T\\s*$\", line): return None\n+    if re.match(r\"^T\\s*$\", line): return None\n \n-  match = re.match(r\"\\s+([\\w_-]+) ([a-fA-F\\d]{40})\\s*$\", line)\n-  if match:\n-    return { \"type\": \"file\",\n-             \"platform\": match.group(1),\n-             \"hash\": match.group(2).lower() }\n+    match = re.match(r\"\\s+([\\w_-]+) ([a-fA-F\\d]{40})\\s*$\", line)\n+    if match:\n+        return { \"type\": \"file\",\n+                 \"platform\": match.group(1),\n+                 \"hash\": match.group(2).lower() }\n \n-  match = re.match(r\"([ST]) (\\d{4}-\\d{2}-\\d{2}) ([a-fA-F\\d]+)\\s*$\", line);\n-  if (not match):\n-    raise Exception(\"%s:%d:E syntax error: \" % (snapshotfile, n))\n-  return {\"type\": \"snapshot\",\n-          \"date\": match.group(2),\n-          \"rev\": match.group(3)}\n+    match = re.match(r\"([ST]) (\\d{4}-\\d{2}-\\d{2}) ([a-fA-F\\d]+)\\s*$\", line);\n+    if not match:\n+        raise Exception(\"%s:%d:E syntax error: \" % (snapshotfile, n))\n+    return { \"type\": \"snapshot\",\n+             \"date\": match.group(2),\n+             \"rev\": match.group(3) }\n \n \n def partial_snapshot_name(date, rev, platform):\n-  return (\"rust-stage0-%s-%s-%s.tar.bz2\"\n-          % (date, rev, platform))\n+    return (\"rust-stage0-%s-%s-%s.tar.bz2\"\n+                    % (date, rev, platform))\n \n def full_snapshot_name(date, rev, platform, hsh):\n-  return (\"rust-stage0-%s-%s-%s-%s.tar.bz2\"\n-          % (date, rev, platform, hsh))\n+    return (\"rust-stage0-%s-%s-%s-%s.tar.bz2\"\n+                    % (date, rev, platform, hsh))\n \n \n def get_kernel(triple):\n@@ -78,23 +85,22 @@ def get_kernel(triple):\n def get_cpu(triple):\n     arch = triple.split('-')[0]\n     if arch == \"i686\":\n-      return \"i386\"\n+        return \"i386\"\n     return arch\n \n def get_platform(triple):\n-  return \"%s-%s\" % (get_kernel(triple), get_cpu(triple))\n+    return \"%s-%s\" % (get_kernel(triple), get_cpu(triple))\n \n \n def cmd_out(cmdline):\n-    p = subprocess.Popen(cmdline,\n-                         stdout=subprocess.PIPE)\n+    p = subprocess.Popen(cmdline, stdout=subprocess.PIPE)\n     return scrub(p.communicate()[0].strip())\n \n \n def local_rev_info(field):\n     return cmd_out([\"git\", \"--git-dir=\" + os.path.join(src_dir, \".git\"),\n-                    \"log\", \"-n\", \"1\",\n-                    \"--format=%%%s\" % field, \"HEAD\"])\n+                            \"log\", \"-n\", \"1\",\n+                            \"--format=%%%s\" % field, \"HEAD\"])\n \n \n def local_rev_full_sha():\n@@ -127,10 +133,10 @@ def get_url_to_file(u,f):\n     os.rename(tmpf, f)\n \n def snap_filename_hash_part(snap):\n-  match = re.match(r\".*([a-fA-F\\d]{40}).tar.bz2$\", snap)\n-  if not match:\n-    raise Exception(\"unable to find hash in filename: \" + snap)\n-  return match.group(1)\n+    match = re.match(r\".*([a-fA-F\\d]{40}).tar.bz2$\", snap)\n+    if not match:\n+        raise Exception(\"unable to find hash in filename: \" + snap)\n+    return match.group(1)\n \n def hash_file(x):\n     h = sha_func()\n@@ -142,13 +148,13 @@ def get_winnt_runtime_deps():\n     runtime_deps = []\n     path_dirs = os.environ[\"PATH\"].split(';')\n     for name in winnt_runtime_deps:\n-      for dir in path_dirs:\n-        matches = glob.glob(os.path.join(dir, name))\n-        if matches:\n-          runtime_deps.append(matches[0])\n-          break\n-      else:\n-        raise Exception(\"Could not find runtime dependency: %s\" % name)\n+        for dir in path_dirs:\n+            matches = glob.glob(os.path.join(dir, name))\n+            if matches:\n+                runtime_deps.append(matches[0])\n+                break\n+            else:\n+                raise Exception(\"Could not find runtime dependency: %s\" % name)\n     return runtime_deps\n \n def make_snapshot(stage, triple):\n@@ -160,31 +166,31 @@ def make_snapshot(stage, triple):\n     file0 = partial_snapshot_name(date, rev, platform)\n \n     def in_tar_name(fn):\n-      cs = re.split(r\"[\\\\/]\", fn)\n-      if len(cs) >= 2:\n-        return os.sep.join(cs[-2:])\n+        cs = re.split(r\"[\\\\/]\", fn)\n+        if len(cs) >= 2:\n+            return os.sep.join(cs[-2:])\n \n     tar = tarfile.open(file0, \"w:bz2\")\n \n     for name in snapshot_files[kernel]:\n-      dir = stage\n-      if stage == \"stage1\" and re.match(r\"^lib/(lib)?std.*\", name):\n-        dir = \"stage0\"\n-      fn_glob = os.path.join(triple, dir, name)\n-      matches = glob.glob(fn_glob)\n-      if not matches:\n-        raise Exception(\"Not found file with name like \" + fn_glob)\n-      if len(matches) == 1:\n-        tar.add(matches[0], \"rust-stage0/\" + in_tar_name(matches[0]))\n-      else:\n-        raise Exception(\"Found stale files: \\n  %s\\n\"\n-                        \"Please make a clean build.\" % \"\\n  \".join(matches))\n+        dir = stage\n+        if stage == \"stage1\" and re.match(r\"^lib/(lib)?std.*\", name):\n+            dir = \"stage0\"\n+        fn_glob = os.path.join(triple, dir, name)\n+        matches = glob.glob(fn_glob)\n+        if not matches:\n+            raise Exception(\"Not found file with name like \" + fn_glob)\n+        if len(matches) == 1:\n+            tar.add(matches[0], \"rust-stage0/\" + in_tar_name(matches[0]))\n+        else:\n+            raise Exception(\"Found stale files: \\n  %s\\n\"\n+                    \"Please make a clean build.\" % \"\\n  \".join(matches))\n \n     if kernel==\"winnt\":\n-      for path in get_winnt_runtime_deps():\n-        tar.add(path, \"rust-stage0/bin/\" + os.path.basename(path))\n-      tar.add(os.path.join(os.path.dirname(__file__), \"third-party\"),\n-              \"rust-stage0/bin/third-party\")\n+        for path in get_winnt_runtime_deps():\n+            tar.add(path, \"rust-stage0/bin/\" + os.path.basename(path))\n+        tar.add(os.path.join(os.path.dirname(__file__), \"third-party\"),\n+                        \"rust-stage0/bin/third-party\")\n \n     tar.close()\n \n@@ -196,59 +202,59 @@ def in_tar_name(fn):\n     return file1\n \n def curr_snapshot_rev():\n-  i = 0\n-  found_snap = False\n-  date = None\n-  rev = None\n+    i = 0\n+    found_snap = False\n+    date = None\n+    rev = None\n \n-  f = open(snapshotfile)\n-  for line in f.readlines():\n-    i += 1\n-    parsed = parse_line(i, line)\n-    if (not parsed): continue\n+    f = open(snapshotfile)\n+    for line in f.readlines():\n+        i += 1\n+        parsed = parse_line(i, line)\n+        if (not parsed): continue\n \n-    if parsed[\"type\"] == \"snapshot\":\n-      date = parsed[\"date\"]\n-      rev = parsed[\"rev\"]\n-      found_snap = True\n-      break\n+        if parsed[\"type\"] == \"snapshot\":\n+            date = parsed[\"date\"]\n+            rev = parsed[\"rev\"]\n+            found_snap = True\n+            break\n \n-  if not found_snap:\n-    raise Exception(\"no snapshot entries in file\")\n+    if not found_snap:\n+        raise Exception(\"no snapshot entries in file\")\n \n-  return (date, rev)\n+    return (date, rev)\n \n def determine_curr_snapshot(triple):\n-  i = 0\n-  platform = get_platform(triple)\n-\n-  found_file = False\n-  found_snap = False\n-  hsh = None\n-  date = None\n-  rev = None\n-\n-  f = open(snapshotfile)\n-  for line in f.readlines():\n-    i += 1\n-    parsed = parse_line(i, line)\n-    if (not parsed): continue\n-\n-    if found_snap and parsed[\"type\"] == \"file\":\n-      if parsed[\"platform\"] == platform:\n-        hsh = parsed[\"hash\"]\n-        found_file = True\n-        break;\n-    elif parsed[\"type\"] == \"snapshot\":\n-      date = parsed[\"date\"]\n-      rev = parsed[\"rev\"]\n-      found_snap = True\n-\n-  if not found_snap:\n-    raise Exception(\"no snapshot entries in file\")\n-\n-  if not found_file:\n-    raise Exception(\"no snapshot file found for platform %s, rev %s\" %\n-                    (platform, rev))\n-\n-  return full_snapshot_name(date, rev, platform, hsh)\n+    i = 0\n+    platform = get_platform(triple)\n+\n+    found_file = False\n+    found_snap = False\n+    hsh = None\n+    date = None\n+    rev = None\n+\n+    f = open(snapshotfile)\n+    for line in f.readlines():\n+        i += 1\n+        parsed = parse_line(i, line)\n+        if (not parsed): continue\n+\n+        if found_snap and parsed[\"type\"] == \"file\":\n+            if parsed[\"platform\"] == platform:\n+                hsh = parsed[\"hash\"]\n+                found_file = True\n+                break;\n+        elif parsed[\"type\"] == \"snapshot\":\n+            date = parsed[\"date\"]\n+            rev = parsed[\"rev\"]\n+            found_snap = True\n+\n+    if not found_snap:\n+        raise Exception(\"no snapshot entries in file\")\n+\n+    if not found_file:\n+        raise Exception(\"no snapshot file found for platform %s, rev %s\" %\n+                                        (platform, rev))\n+\n+    return full_snapshot_name(date, rev, platform, hsh)"}, {"sha": "7d4ad749fe3fb456fba6a6f6b745b0de9ebdd234", "filename": "src/etc/sugarise-doc-comments.py", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fsugarise-doc-comments.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fsugarise-doc-comments.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsugarise-doc-comments.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,14 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n+# Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n #\n # this script attempts to turn doc comment attributes (#[doc = \"...\"])"}, {"sha": "b342b9602ae89c35a940b3968613f7dd2b961643", "filename": "src/etc/tidy.py", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Ftidy.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Ftidy.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftidy.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,12 @@\n-#!/usr/bin/env python\n-# xfail-license\n+# Copyright 2010-2014 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n import sys, fileinput, subprocess, re\n from licenseck import *\n@@ -59,7 +66,7 @@ def do_license_check(name, contents):\n                 hsh = match.group(1)\n                 date, rev = snapshot.curr_snapshot_rev()\n                 if not hsh.startswith(rev):\n-                    report_err(\"snapshot out of date (\" + date \n+                    report_err(\"snapshot out of date (\" + date\n                       + \"): \" + line)\n             else:\n                 if \"SNAP\" in line:"}, {"sha": "71c5c8f8a9527642ad181f7ce606a22bb9c25d36", "filename": "src/etc/unicode.py", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Funicode.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Funicode.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Funicode.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,14 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n+# Copyright 2011-2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n # This digests UnicodeData.txt and DerivedCoreProperties.txt and emits rust\n # code covering the core properties. Since this is a pretty rare event we"}, {"sha": "d1980cec2ed3aa9bbb3dd82e7403da64faa7d0a2", "filename": "src/etc/ziggurat_tables.py", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fziggurat_tables.py", "raw_url": "https://github.com/rust-lang/rust/raw/0ebe112b3bd137ec0363d47caad4ea80ad328717/src%2Fetc%2Fziggurat_tables.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fziggurat_tables.py?ref=0ebe112b3bd137ec0363d47caad4ea80ad328717", "patch": "@@ -1,5 +1,14 @@\n #!/usr/bin/env python\n-# xfail-license\n+#\n+# Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n \n # This creates the tables used for distributions implemented using the\n # ziggurat algorithm in `std::rand::distributions;`. They are"}]}