{"sha": "96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2ZjI3YzczY2ZiOTQzZTExYWZhZmYxNmRiZTg0MTVlNmEzYWU1YTU=", "commit": {"author": {"name": "mibac138", "email": "5672750+mibac138@users.noreply.github.com", "date": "2020-04-28T14:07:11Z"}, "committer": {"name": "mibac138", "email": "5672750+mibac138@users.noreply.github.com", "date": "2020-05-03T00:42:10Z"}, "message": "Change cfg(version) error message wording", "tree": {"sha": "e2233a9a80b160af27ac6b9b764665515b1f27e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e2233a9a80b160af27ac6b9b764665515b1f27e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "html_url": "https://github.com/rust-lang/rust/commit/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/comments", "author": {"login": "mibac138", "id": 5672750, "node_id": "MDQ6VXNlcjU2NzI3NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5672750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mibac138", "html_url": "https://github.com/mibac138", "followers_url": "https://api.github.com/users/mibac138/followers", "following_url": "https://api.github.com/users/mibac138/following{/other_user}", "gists_url": "https://api.github.com/users/mibac138/gists{/gist_id}", "starred_url": "https://api.github.com/users/mibac138/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mibac138/subscriptions", "organizations_url": "https://api.github.com/users/mibac138/orgs", "repos_url": "https://api.github.com/users/mibac138/repos", "events_url": "https://api.github.com/users/mibac138/events{/privacy}", "received_events_url": "https://api.github.com/users/mibac138/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mibac138", "id": 5672750, "node_id": "MDQ6VXNlcjU2NzI3NTA=", "avatar_url": "https://avatars.githubusercontent.com/u/5672750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mibac138", "html_url": "https://github.com/mibac138", "followers_url": "https://api.github.com/users/mibac138/followers", "following_url": "https://api.github.com/users/mibac138/following{/other_user}", "gists_url": "https://api.github.com/users/mibac138/gists{/gist_id}", "starred_url": "https://api.github.com/users/mibac138/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mibac138/subscriptions", "organizations_url": "https://api.github.com/users/mibac138/orgs", "repos_url": "https://api.github.com/users/mibac138/repos", "events_url": "https://api.github.com/users/mibac138/events{/privacy}", "received_events_url": "https://api.github.com/users/mibac138/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90aa62a1bf00c555abc834a21e84d9e7e20dcf86", "url": "https://api.github.com/repos/rust-lang/rust/commits/90aa62a1bf00c555abc834a21e84d9e7e20dcf86", "html_url": "https://github.com/rust-lang/rust/commit/90aa62a1bf00c555abc834a21e84d9e7e20dcf86"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "fedc29d268fd04a5464cf3dace9bfacd90fd83ef", "filename": "src/librustc_attr/builtin.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Flibrustc_attr%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Flibrustc_attr%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_attr%2Fbuiltin.rs?ref=96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "patch": "@@ -634,21 +634,21 @@ pub fn eval_condition(\n                 [NestedMetaItem::Literal(Lit { span, .. })\n                 | NestedMetaItem::MetaItem(MetaItem { span, .. })] => {\n                     sess.span_diagnostic\n-                        .struct_span_err(*span, &*format!(\"expected string literal\"))\n+                        .struct_span_err(*span, &*format!(\"expected a version literal\"))\n                         .emit();\n                     return false;\n                 }\n                 [..] => {\n                     sess.span_diagnostic\n-                        .struct_span_err(cfg.span, \"expected single string literal\")\n+                        .struct_span_err(cfg.span, \"expected single version literal\")\n                         .emit();\n                     return false;\n                 }\n             };\n             let min_version = match Version::parse(&min_version.as_str()) {\n                 Some(ver) => ver,\n                 None => {\n-                    sess.span_diagnostic.struct_span_err(*span, \"invalid version string\").emit();\n+                    sess.span_diagnostic.struct_span_err(*span, \"invalid version literal\").emit();\n                     return false;\n                 }\n             };"}, {"sha": "ffb08dedc8f54d15e109059d3a37178701cb8cee", "filename": "src/test/ui/feature-gates/feature-gate-cfg-version.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.rs?ref=96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "patch": "@@ -5,13 +5,16 @@ fn foo() -> bool { true }\n //~^ ERROR `cfg(version)` is experimental and subject to change\n fn foo() -> bool { false }\n \n-#[cfg(version(\"1.43\", \"1.44\", \"1.45\"))] //~ ERROR: expected single string literal\n+#[cfg(version(\"1.43\", \"1.44\", \"1.45\"))] //~ ERROR: expected single version literal\n //~^ ERROR `cfg(version)` is experimental and subject to change\n fn bar() -> bool  { false }\n-#[cfg(version(false))] //~ ERROR: expected string literal\n+#[cfg(version(false))] //~ ERROR: expected a version literal\n //~^ ERROR `cfg(version)` is experimental and subject to change\n fn bar() -> bool  { false }\n-#[cfg(version(\"foo\"))] //~ ERROR: invalid version string\n+#[cfg(version(\"foo\"))] //~ ERROR: invalid version literal\n+//~^ ERROR `cfg(version)` is experimental and subject to change\n+fn bar() -> bool  { false }\n+#[cfg(version(\"999\"))]\n //~^ ERROR `cfg(version)` is experimental and subject to change\n fn bar() -> bool  { false }\n #[cfg(version(\"999\"))]"}, {"sha": "ffc0b4d4914225a613faa463ea3b3819024e03ce", "filename": "src/test/ui/feature-gates/feature-gate-cfg-version.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96f27c73cfb943e11afaff16dbe8415e6a3ae5a5/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-cfg-version.stderr?ref=96f27c73cfb943e11afaff16dbe8415e6a3ae5a5", "patch": "@@ -25,7 +25,7 @@ LL | #[cfg(version(\"1.43\", \"1.44\", \"1.45\"))]\n    = note: see issue #64796 <https://github.com/rust-lang/rust/issues/64796> for more information\n    = help: add `#![feature(cfg_version)]` to the crate attributes to enable\n \n-error: expected single string literal\n+error: expected single version literal\n   --> $DIR/feature-gate-cfg-version.rs:8:7\n    |\n LL | #[cfg(version(\"1.43\", \"1.44\", \"1.45\"))]\n@@ -40,7 +40,7 @@ LL | #[cfg(version(false))]\n    = note: see issue #64796 <https://github.com/rust-lang/rust/issues/64796> for more information\n    = help: add `#![feature(cfg_version)]` to the crate attributes to enable\n \n-error: expected string literal\n+error: expected a version literal\n   --> $DIR/feature-gate-cfg-version.rs:11:15\n    |\n LL | #[cfg(version(false))]\n@@ -55,7 +55,7 @@ LL | #[cfg(version(\"foo\"))]\n    = note: see issue #64796 <https://github.com/rust-lang/rust/issues/64796> for more information\n    = help: add `#![feature(cfg_version)]` to the crate attributes to enable\n \n-error: invalid version string\n+error: invalid version literal\n   --> $DIR/feature-gate-cfg-version.rs:14:15\n    |\n LL | #[cfg(version(\"foo\"))]"}]}