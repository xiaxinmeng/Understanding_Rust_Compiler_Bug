{"sha": "0c0478d57a5bc3a85fb695b84c06d38494f70529", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjMDQ3OGQ1N2E1YmMzYTg1ZmI2OTViODRjMDZkMzg0OTRmNzA1Mjk=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-16T17:38:28Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2018-11-16T21:04:14Z"}, "message": "adjust remaining tests", "tree": {"sha": "63370285edaa32c6e2ad44c90119b721b1e6b7a1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/63370285edaa32c6e2ad44c90119b721b1e6b7a1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c0478d57a5bc3a85fb695b84c06d38494f70529", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c0478d57a5bc3a85fb695b84c06d38494f70529", "html_url": "https://github.com/rust-lang/rust/commit/0c0478d57a5bc3a85fb695b84c06d38494f70529", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c0478d57a5bc3a85fb695b84c06d38494f70529/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "303dbccf040de2f61434dc7d716c5feed817fbdc", "url": "https://api.github.com/repos/rust-lang/rust/commits/303dbccf040de2f61434dc7d716c5feed817fbdc", "html_url": "https://github.com/rust-lang/rust/commit/303dbccf040de2f61434dc7d716c5feed817fbdc"}], "stats": {"total": 43, "additions": 39, "deletions": 4}, "files": [{"sha": "17dc9f94fe19c80c4ed26e877e121b5b34e43c3e", "filename": "src/test/compile-fail/const-fn-error.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fconst-fn-error.rs?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -19,6 +19,7 @@ const fn f(x: usize) -> usize {\n     for i in 0..x {\n         //~^ ERROR E0015\n         //~| ERROR E0019\n+        //~| ERROR E0080\n         sum += i;\n     }\n     sum"}, {"sha": "1ed513033fd5d34f34644abd70d560d0fb750d02", "filename": "src/test/compile-fail/issue-52443.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fcompile-fail%2Fissue-52443.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fcompile-fail%2Fissue-52443.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-52443.rs?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -14,4 +14,5 @@ fn main() {\n     [(); {while true {break}; 0}]; //~ ERROR constant contains unimplemented expression type\n     [(); { for _ in 0usize.. {}; 0}]; //~ ERROR calls in constants are limited to constant functions\n     //~^ ERROR constant contains unimplemented expression type\n+    //~| ERROR evaluation of constant value failed\n }"}, {"sha": "f01fd1fd8f1442571c9a7cfa6f9005f647b335a2", "filename": "src/test/ui/issues/issue-39559-2.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.rs?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -23,6 +23,8 @@ impl Dim for Dim3 {\n fn main() {\n     let array: [usize; Dim3::dim()]\n     //~^ ERROR E0015\n+    //~| ERROR E0080\n         = [0; Dim3::dim()];\n         //~^ ERROR E0015\n+        //~| ERROR E0080\n }"}, {"sha": "57e9f23e0b33c311ba0492a00c0a130d74137661", "filename": "src/test/ui/issues/issue-39559-2.stderr", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-39559-2.stderr?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -4,12 +4,25 @@ error[E0015]: calls in constants are limited to constant functions, tuple struct\n LL |     let array: [usize; Dim3::dim()]\n    |                        ^^^^^^^^^^^\n \n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/issue-39559-2.rs:24:24\n+   |\n+LL |     let array: [usize; Dim3::dim()]\n+   |                        ^^^^^^^^^^^ calling non-const function `<Dim3 as Dim>::dim`\n+\n error[E0015]: calls in constants are limited to constant functions, tuple structs and tuple variants\n-  --> $DIR/issue-39559-2.rs:26:15\n+  --> $DIR/issue-39559-2.rs:27:15\n    |\n LL |         = [0; Dim3::dim()];\n    |               ^^^^^^^^^^^\n \n-error: aborting due to 2 previous errors\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/issue-39559-2.rs:27:15\n+   |\n+LL |         = [0; Dim3::dim()];\n+   |               ^^^^^^^^^^^ calling non-const function `<Dim3 as Dim>::dim`\n+\n+error: aborting due to 4 previous errors\n \n-For more information about this error, try `rustc --explain E0015`.\n+Some errors occurred: E0015, E0080.\n+For more information about an error, try `rustc --explain E0015`."}, {"sha": "60b18a66f1a384c02b5664356a7182d70849836a", "filename": "src/test/ui/issues/issue-43105.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-43105.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-43105.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-43105.rs?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -12,10 +12,12 @@ fn xyz() -> u8 { 42 }\n \n const NUM: u8 = xyz();\n //~^ ERROR calls in constants are limited to constant functions, tuple structs and tuple variants\n+//~| ERROR any use of this value will cause an error [const_err]\n \n fn main() {\n     match 1 {\n         NUM => unimplemented!(),\n+        //~^ ERROR could not evaluate constant pattern\n         _ => unimplemented!(),\n     }\n }"}, {"sha": "f26447ed2b9f0a860a9f7d29cbbb2f50c68a54ac", "filename": "src/test/ui/issues/issue-43105.stderr", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-43105.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0c0478d57a5bc3a85fb695b84c06d38494f70529/src%2Ftest%2Fui%2Fissues%2Fissue-43105.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-43105.stderr?ref=0c0478d57a5bc3a85fb695b84c06d38494f70529", "patch": "@@ -4,6 +4,22 @@ error[E0015]: calls in constants are limited to constant functions, tuple struct\n LL | const NUM: u8 = xyz();\n    |                 ^^^^^\n \n-error: aborting due to previous error\n+error: any use of this value will cause an error\n+  --> $DIR/issue-43105.rs:13:1\n+   |\n+LL | const NUM: u8 = xyz();\n+   | ^^^^^^^^^^^^^^^^-----^\n+   |                 |\n+   |                 calling non-const function `xyz`\n+   |\n+   = note: #[deny(const_err)] on by default\n+\n+error: could not evaluate constant pattern\n+  --> $DIR/issue-43105.rs:19:9\n+   |\n+LL |         NUM => unimplemented!(),\n+   |         ^^^\n+\n+error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0015`."}]}