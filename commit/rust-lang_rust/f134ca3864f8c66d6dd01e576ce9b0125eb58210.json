{"sha": "f134ca3864f8c66d6dd01e576ce9b0125eb58210", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxMzRjYTM4NjRmOGM2NmQ2ZGQwMWU1NzZjZTliMDEyNWViNTgyMTA=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-03-24T00:52:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-24T00:52:27Z"}, "message": "Rollup merge of #83051 - GuillaumeGomez:sidebar-trait-items-order, r=CraftSpider,jyn514\n\nSidebar trait items order\n\nWe were actually sorting `Symbol` and not `String`, creating a completely invalid sort result. I added a test to prevent regressions.\n\nr? ``@jyn514``", "tree": {"sha": "7b59a4188767172dee1f54fc8d91aabeabf37203", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b59a4188767172dee1f54fc8d91aabeabf37203"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f134ca3864f8c66d6dd01e576ce9b0125eb58210", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgWo1LCRBK7hj4Ov3rIwAAdHIIAITxZKXZ/kshHkUKM3PermLd\nLveQARxxyqygFoic2AXQgUOAXyB6QxGU87gGtpsuYDw4D91RRIollKRw+1lIk0Zr\nFtCYYnd0+z+Yb9BJj4ZhRT6b5EF2ua1IHTyyjV/pIJKCw5S5MWr0i51a+Ki6/wNY\n1IjGTQxMlziZpOsXTpvEZVmo9QIOVSi/cFKAYADcPwAqhobW+0zVEdrrHQ8L4hAn\nX5rCUBSKZTfj9si3K8IfjkOBQtv+2UgrxRMiSWxc3qzkXIOHeq7YISARqlz5Lubf\nkC63ghihc9slQUL7peXxFKuVsgutVkpYP4AKr0mwTovePK+OWE17WxjFbN/dygc=\n=jQwn\n-----END PGP SIGNATURE-----\n", "payload": "tree 7b59a4188767172dee1f54fc8d91aabeabf37203\nparent 673d0db5e393e9c64897005b470bfeb6d5aec61b\nparent 801ee834654c2c30e27b4e37da6c7bcab05de6a3\nauthor Dylan DPC <dylan.dpc@gmail.com> 1616547147 +0100\ncommitter GitHub <noreply@github.com> 1616547147 +0100\n\nRollup merge of #83051 - GuillaumeGomez:sidebar-trait-items-order, r=CraftSpider,jyn514\n\nSidebar trait items order\n\nWe were actually sorting `Symbol` and not `String`, creating a completely invalid sort result. I added a test to prevent regressions.\n\nr? ``@jyn514``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f134ca3864f8c66d6dd01e576ce9b0125eb58210", "html_url": "https://github.com/rust-lang/rust/commit/f134ca3864f8c66d6dd01e576ce9b0125eb58210", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f134ca3864f8c66d6dd01e576ce9b0125eb58210/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "673d0db5e393e9c64897005b470bfeb6d5aec61b", "url": "https://api.github.com/repos/rust-lang/rust/commits/673d0db5e393e9c64897005b470bfeb6d5aec61b", "html_url": "https://github.com/rust-lang/rust/commit/673d0db5e393e9c64897005b470bfeb6d5aec61b"}, {"sha": "801ee834654c2c30e27b4e37da6c7bcab05de6a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/801ee834654c2c30e27b4e37da6c7bcab05de6a3", "html_url": "https://github.com/rust-lang/rust/commit/801ee834654c2c30e27b4e37da6c7bcab05de6a3"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "05d30187aa85356a39293a26612b99c9e551811f", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=f134ca3864f8c66d6dd01e576ce9b0125eb58210", "patch": "@@ -2122,22 +2122,22 @@ fn sidebar_trait(cx: &Context<'_>, buf: &mut Buffer, it: &clean::Item, t: &clean\n         items: &[clean::Item],\n         before: &str,\n         filter: impl Fn(&clean::Item) -> bool,\n-        write: impl Fn(&mut Buffer, &Symbol),\n+        write: impl Fn(&mut Buffer, &str),\n         after: &str,\n     ) {\n         let mut items = items\n             .iter()\n             .filter_map(|m| match m.name {\n-                Some(ref name) if filter(m) => Some(name),\n+                Some(ref name) if filter(m) => Some(name.as_str()),\n                 _ => None,\n             })\n             .collect::<Vec<_>>();\n \n         if !items.is_empty() {\n-            items.sort();\n+            items.sort_unstable();\n             out.push_str(before);\n             for item in items.into_iter() {\n-                write(out, item);\n+                write(out, &item);\n             }\n             out.push_str(after);\n         }"}, {"sha": "c5d9f0c5a680643a2eb87491a1808f52432df61a", "filename": "src/test/rustdoc-gui/lib.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Ftest%2Frustdoc-gui%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Ftest%2Frustdoc-gui%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Flib.rs?ref=f134ca3864f8c66d6dd01e576ce9b0125eb58210", "patch": "@@ -47,14 +47,19 @@ pub fn some_more_function<T: fmt::Debug>(t: &T) -> String {\n \n /// Woohoo! A trait!\n pub trait AnotherOne {\n+    /// Some func 3.\n+    fn func3();\n+\n     /// Some func 1.\n     fn func1();\n \n+    fn another();\n+    fn why_not();\n+\n     /// Some func 2.\n     fn func2();\n \n-    /// Some func 3.\n-    fn func3();\n+    fn hello();\n }\n \n /// Check for \"i\" signs in lists!"}, {"sha": "914486e1c281d52bdf5f39b89047ab55196383b6", "filename": "src/test/rustdoc-gui/trait-sidebar-item-order.goml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "raw_url": "https://github.com/rust-lang/rust/raw/f134ca3864f8c66d6dd01e576ce9b0125eb58210/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml?ref=f134ca3864f8c66d6dd01e576ce9b0125eb58210", "patch": "@@ -0,0 +1,7 @@\n+goto: file://|DOC_PATH|/trait.AnotherOne.html\n+assert: (\".sidebar-links a:nth-of-type(1)\", \"another\")\n+assert: (\".sidebar-links a:nth-of-type(2)\", \"func1\")\n+assert: (\".sidebar-links a:nth-of-type(3)\", \"func2\")\n+assert: (\".sidebar-links a:nth-of-type(4)\", \"func3\")\n+assert: (\".sidebar-links a:nth-of-type(5)\", \"hello\")\n+assert: (\".sidebar-links a:nth-of-type(6)\", \"why_not\")"}]}