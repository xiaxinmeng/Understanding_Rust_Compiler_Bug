{"sha": "cf8b191852ba63e0c1c645cfb1af9d832fc613ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNmOGIxOTE4NTJiYTYzZTBjMWM2NDVjZmIxYWY5ZDgzMmZjNjEzZWU=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-07-19T15:09:03Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-07-19T15:42:00Z"}, "message": "Put the brace of match on the next line if condition is multi-lined", "tree": {"sha": "2c0a22f010a9424e037594a7e7a9bc86e465e083", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c0a22f010a9424e037594a7e7a9bc86e465e083"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cf8b191852ba63e0c1c645cfb1af9d832fc613ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cf8b191852ba63e0c1c645cfb1af9d832fc613ee", "html_url": "https://github.com/rust-lang/rust/commit/cf8b191852ba63e0c1c645cfb1af9d832fc613ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cf8b191852ba63e0c1c645cfb1af9d832fc613ee/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b78b6e8b09179adde64780a22ce5b9d4a575967f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b78b6e8b09179adde64780a22ce5b9d4a575967f", "html_url": "https://github.com/rust-lang/rust/commit/b78b6e8b09179adde64780a22ce5b9d4a575967f"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "14bf46e966f37dbebddd513404375d82596db9a6", "filename": "src/expr.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/cf8b191852ba63e0c1c645cfb1af9d832fc613ee/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf8b191852ba63e0c1c645cfb1af9d832fc613ee/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=cf8b191852ba63e0c1c645cfb1af9d832fc613ee", "patch": "@@ -1514,15 +1514,17 @@ fn rewrite_match(\n         return None;\n     }\n \n-    // `match `cond` {`\n+    // 6 = `match `, 2 = ` {`\n     let cond_shape = match context.config.control_style() {\n         Style::Legacy => try_opt!(shape.shrink_left(6).and_then(|s| s.sub_width(2))),\n-        Style::Rfc => try_opt!(shape.offset_left(8)),\n+        Style::Rfc => try_opt!(shape.offset_left(6).and_then(|s| s.sub_width(2))),\n     };\n     let cond_str = try_opt!(cond.rewrite(context, cond_shape));\n     let alt_block_sep = String::from(\"\\n\") + &shape.indent.block_only().to_string(context.config);\n     let block_sep = match context.config.control_brace_style() {\n-        ControlBraceStyle::AlwaysNextLine => alt_block_sep.as_str(),\n+        ControlBraceStyle::AlwaysNextLine => &alt_block_sep,\n+        _ if last_line_extendable(&cond_str) => \" \",\n+        _ if cond_str.contains('\\n') => &alt_block_sep,\n         _ => \" \",\n     };\n "}]}