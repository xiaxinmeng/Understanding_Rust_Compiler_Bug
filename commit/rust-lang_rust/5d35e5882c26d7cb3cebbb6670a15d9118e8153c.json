{"sha": "5d35e5882c26d7cb3cebbb6670a15d9118e8153c", "node_id": "C_kwDOAAsO6NoAKDVkMzVlNTg4MmMyNmQ3Y2IzY2ViYmI2NjcwYTE1ZDkxMThlODE1M2M", "commit": {"author": {"name": "Jeroen Vannevel", "email": "jer_vannevel@outlook.com", "date": "2022-01-22T11:32:26Z"}, "committer": {"name": "Jeroen Vannevel", "email": "jer_vannevel@outlook.com", "date": "2022-01-22T12:08:32Z"}, "message": "removed unwrapping from indent", "tree": {"sha": "3c2d7f9339e840d62ceee9269a4597a2925a5b24", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c2d7f9339e840d62ceee9269a4597a2925a5b24"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d35e5882c26d7cb3cebbb6670a15d9118e8153c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d35e5882c26d7cb3cebbb6670a15d9118e8153c", "html_url": "https://github.com/rust-lang/rust/commit/5d35e5882c26d7cb3cebbb6670a15d9118e8153c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d35e5882c26d7cb3cebbb6670a15d9118e8153c/comments", "author": {"login": "Vannevelj", "id": 2777107, "node_id": "MDQ6VXNlcjI3NzcxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2777107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vannevelj", "html_url": "https://github.com/Vannevelj", "followers_url": "https://api.github.com/users/Vannevelj/followers", "following_url": "https://api.github.com/users/Vannevelj/following{/other_user}", "gists_url": "https://api.github.com/users/Vannevelj/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vannevelj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vannevelj/subscriptions", "organizations_url": "https://api.github.com/users/Vannevelj/orgs", "repos_url": "https://api.github.com/users/Vannevelj/repos", "events_url": "https://api.github.com/users/Vannevelj/events{/privacy}", "received_events_url": "https://api.github.com/users/Vannevelj/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Vannevelj", "id": 2777107, "node_id": "MDQ6VXNlcjI3NzcxMDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2777107?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vannevelj", "html_url": "https://github.com/Vannevelj", "followers_url": "https://api.github.com/users/Vannevelj/followers", "following_url": "https://api.github.com/users/Vannevelj/following{/other_user}", "gists_url": "https://api.github.com/users/Vannevelj/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vannevelj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vannevelj/subscriptions", "organizations_url": "https://api.github.com/users/Vannevelj/orgs", "repos_url": "https://api.github.com/users/Vannevelj/repos", "events_url": "https://api.github.com/users/Vannevelj/events{/privacy}", "received_events_url": "https://api.github.com/users/Vannevelj/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee862cec1045fdd38c59c7d724a1404a2ccce09a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ee862cec1045fdd38c59c7d724a1404a2ccce09a", "html_url": "https://github.com/rust-lang/rust/commit/ee862cec1045fdd38c59c7d724a1404a2ccce09a"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "06195624ed0f7d79cd57236617d3487f1f2e29d1", "filename": "crates/ide_assists/src/handlers/extract_function.rs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/5d35e5882c26d7cb3cebbb6670a15d9118e8153c/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fextract_function.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d35e5882c26d7cb3cebbb6670a15d9118e8153c/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fextract_function.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fextract_function.rs?ref=5d35e5882c26d7cb3cebbb6670a15d9118e8153c", "patch": "@@ -1506,14 +1506,16 @@ fn make_body(\n             let body_indent = IndentLevel(1);\n             let elements: Vec<SyntaxElement> = elements\n                 .into_iter()\n-                .map(|stmt| match stmt {\n-                    syntax::NodeOrToken::Node(n) => {\n-                        let ast_element = ast::Stmt::cast(n).unwrap();\n-                        let indented = ast_element.dedent(old_indent).indent(body_indent);\n-                        let ast_node = indented.syntax().clone_subtree();\n-                        syntax::NodeOrToken::try_from(ast_node).unwrap()\n-                    }\n-                    syntax::NodeOrToken::Token(t) => syntax::NodeOrToken::try_from(t).unwrap(),\n+                .map(|node_or_token| match &node_or_token {\n+                    syntax::NodeOrToken::Node(node) => match ast::Stmt::cast(node.clone()) {\n+                        Some(stmt) => {\n+                            let indented = stmt.dedent(old_indent).indent(body_indent);\n+                            let ast_node = indented.syntax().clone_subtree();\n+                            syntax::NodeOrToken::Node(ast_node)\n+                        }\n+                        None => node_or_token,\n+                    },\n+                    _ => node_or_token,\n                 })\n                 .collect::<Vec<SyntaxElement>>();\n             let tail_expr = tail_expr.map(|expr| expr.dedent(old_indent).indent(body_indent));"}]}