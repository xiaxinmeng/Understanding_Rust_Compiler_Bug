{"sha": "5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU5OTc4MDZhNmE0ZjFlNTc0OTFiZDlmMjRjN2FjMDc2MTliZjM4ZDI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-04-16T22:24:36Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-04-16T22:24:36Z"}, "message": "Auto merge of #41157 - aidanhs:aphs-debug-appveyor-cache, r=TimNN\n\nAdd a comment for disabling errexit, try to debug appveyor cache\n\nComments added as requested.\n\nAlso, lets add some cache debugging to appveyor. I *think* this is how to ignore errors in cmd.exe (and I did try it on my own machine), but I'm not 100% sure how appveyor runs them. In the worst case it'll fail but I guess that isn't the end of the world since the build has already failed by this point.\n\nr? @TimNN", "tree": {"sha": "133831cdea3c720c7dba4a06d1eee18d23d521bb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/133831cdea3c720c7dba4a06d1eee18d23d521bb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "html_url": "https://github.com/rust-lang/rust/commit/5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5997806a6a4f1e57491bd9f24c7ac07619bf38d2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7627e3d31dd641ae9042675e9032857f58d0c5d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/7627e3d31dd641ae9042675e9032857f58d0c5d1", "html_url": "https://github.com/rust-lang/rust/commit/7627e3d31dd641ae9042675e9032857f58d0c5d1"}, {"sha": "bb843582cac721b1a478c6dc12dafee1edbd73e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/bb843582cac721b1a478c6dc12dafee1edbd73e4", "html_url": "https://github.com/rust-lang/rust/commit/bb843582cac721b1a478c6dc12dafee1edbd73e4"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "978ca0d9739b13cb0cd60f25f6520ae1d9537a5b", "filename": "appveyor.yml", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5997806a6a4f1e57491bd9f24c7ac07619bf38d2/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5997806a6a4f1e57491bd9f24c7ac07619bf38d2/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "patch": "@@ -148,8 +148,7 @@ test_script:\n   - sh src/ci/run.sh\n \n on_failure:\n-  - cat %CD%\\sccache.log\n-  - cat C:\\Users\\appveyor\\AppData\\Local\\Temp\\1\\build-cache-logs\\*.log\n+  - cat %CD%\\sccache.log || exit 0\n \n cache:\n   - C:\\cache\\rustsrc"}, {"sha": "1db2135eb6d868bbf25d45a2b02fe6cb11c6056a", "filename": "src/ci/init_repo.sh", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5997806a6a4f1e57491bd9f24c7ac07619bf38d2/src%2Fci%2Finit_repo.sh", "raw_url": "https://github.com/rust-lang/rust/raw/5997806a6a4f1e57491bd9f24c7ac07619bf38d2/src%2Fci%2Finit_repo.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Finit_repo.sh?ref=5997806a6a4f1e57491bd9f24c7ac07619bf38d2", "patch": "@@ -41,6 +41,8 @@ if [ ! -f \"$cache_valid_file\" ]; then\n     rm -rf \"$CACHE_DIR\"\n     mkdir \"$CACHE_DIR\"\n else\n+    # Ignore errors while gathering information about the possible brokenness\n+    # of the git repo since our gathered info will tell us something is wrong\n     set +o errexit\n     stat_lines=$(cd \"$cache_src_dir\" && git status --porcelain | wc -l)\n     stat_ec=$(cd \"$cache_src_dir\" && git status >/dev/null 2>&1; echo $?)"}]}