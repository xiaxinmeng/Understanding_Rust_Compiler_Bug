{"sha": "2ce74b0bc09cef713ad27a700d5ecaaa676c4eba", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjZTc0YjBiYzA5Y2VmNzEzYWQyN2E3MDBkNWVjYWFhNjc2YzRlYmE=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-09-03T11:30:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-09-03T11:30:51Z"}, "message": "Rollup merge of #88613 - m-ou-se:array-docs-2021, r=Amanieu\n\nUpdate primitive docs for rust 2021.\n\nFixes https://github.com/rust-lang/rust/issues/87701", "tree": {"sha": "b4edb77bf48af0dcb9c7ddf8ce1bfe45a8ec0546", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4edb77bf48af0dcb9c7ddf8ce1bfe45a8ec0546"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhMgdsCRBK7hj4Ov3rIwAAGlsIAJ093EymhBlNvx/8GQR3PNKX\nDV2PAoUN9tPHNfeBZbLUwm5kvpIm5thcUaptquGyvhYhu6pPh23mjI1P9yWKYSOY\nKdxZks0fN7H3l/FE6chck80xvRxLv8csZy1u4BnqAstjXJA753nJgv19hFgT5dSB\nktBScuxqW8bQeivxuYMfdLIBu7E4N1DrKKYw5Uzu851tpyS0plJozQgfxDnWvvJb\nGoSIaZqwTi56sWocwIyav8iUbhSa+rqum4oA8HWtvgyl5fh6DG2dRjLpJpjcT4BA\nXnIPuRGNUvF2GXiQ3WqQyOAf1dAVzuIavEYuo3xWanxfc8hQJ5lZHNFkpDhGHq0=\n=fqMW\n-----END PGP SIGNATURE-----\n", "payload": "tree b4edb77bf48af0dcb9c7ddf8ce1bfe45a8ec0546\nparent e13b9c90c9b797210e85130b8aa9c8bd4370cc3b\nparent 00c8da145cb013e3ead0dba457a09404665feca9\nauthor Mara Bos <m-ou.se@m-ou.se> 1630668651 +0200\ncommitter GitHub <noreply@github.com> 1630668651 +0200\n\nRollup merge of #88613 - m-ou-se:array-docs-2021, r=Amanieu\n\nUpdate primitive docs for rust 2021.\n\nFixes https://github.com/rust-lang/rust/issues/87701\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba", "html_url": "https://github.com/rust-lang/rust/commit/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e13b9c90c9b797210e85130b8aa9c8bd4370cc3b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e13b9c90c9b797210e85130b8aa9c8bd4370cc3b", "html_url": "https://github.com/rust-lang/rust/commit/e13b9c90c9b797210e85130b8aa9c8bd4370cc3b"}, {"sha": "00c8da145cb013e3ead0dba457a09404665feca9", "url": "https://api.github.com/repos/rust-lang/rust/commits/00c8da145cb013e3ead0dba457a09404665feca9", "html_url": "https://github.com/rust-lang/rust/commit/00c8da145cb013e3ead0dba457a09404665feca9"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "261d0e648e2ef3df066bcecb92c7c7cf9cb1aa9e", "filename": "library/std/src/primitive_docs.rs", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2ce74b0bc09cef713ad27a700d5ecaaa676c4eba/library%2Fstd%2Fsrc%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fprimitive_docs.rs?ref=2ce74b0bc09cef713ad27a700d5ecaaa676c4eba", "patch": "@@ -581,6 +581,8 @@ mod prim_pointer {}\n /// might be made consistent to the behavior of later editions.\n ///\n /// ```rust,edition2018\n+/// // Rust 2015 and 2018:\n+///\n /// # #![allow(array_into_iter)] // override our `deny(warnings)`\n /// let array: [i32; 3] = [0; 3];\n ///\n@@ -604,11 +606,13 @@ mod prim_pointer {}\n /// }\n /// ```\n ///\n-/// Starting in the 2021 edition, `array.into_iter()` will use `IntoIterator` normally to iterate\n+/// Starting in the 2021 edition, `array.into_iter()` uses `IntoIterator` normally to iterate\n /// by value, and `iter()` should be used to iterate by reference like previous editions.\n ///\n-/// ```rust,edition2021,ignore\n-/// # // FIXME: ignored because 2021 testing is still unstable\n+#[cfg_attr(bootstrap, doc = \"```rust,edition2021,ignore\")]\n+#[cfg_attr(not(bootstrap), doc = \"```rust,edition2021\")]\n+/// // Rust 2021:\n+///\n /// let array: [i32; 3] = [0; 3];\n ///\n /// // This iterates by reference:\n@@ -631,12 +635,12 @@ mod prim_pointer {}\n /// avoid the `into_iter` syntax on those editions. If an edition update is not\n /// viable/desired, there are multiple alternatives:\n /// * use `iter`, equivalent to the old behavior, creating references\n-/// * use [`array::IntoIter`], equivalent to the post-2021 behavior (Rust 1.51+)\n+/// * use [`IntoIterator::into_iter`], equivalent to the post-2021 behavior (Rust 1.53+)\n /// * replace `for ... in array.into_iter() {` with `for ... in array {`,\n ///   equivalent to the post-2021 behavior (Rust 1.53+)\n ///\n /// ```rust,edition2018\n-/// use std::array::IntoIter;\n+/// // Rust 2015 and 2018:\n ///\n /// let array: [i32; 3] = [0; 3];\n ///\n@@ -647,7 +651,7 @@ mod prim_pointer {}\n /// }\n ///\n /// // This iterates by value:\n-/// for item in IntoIter::new(array) {\n+/// for item in IntoIterator::into_iter(array) {\n ///     let x: i32 = item;\n ///     println!(\"{}\", x);\n /// }\n@@ -660,7 +664,7 @@ mod prim_pointer {}\n ///\n /// // IntoIter can also start a chain.\n /// // This iterates by value:\n-/// for item in IntoIter::new(array).enumerate() {\n+/// for item in IntoIterator::into_iter(array).enumerate() {\n ///     let (i, x): (usize, i32) = item;\n ///     println!(\"array[{}] = {}\", i, x);\n /// }"}]}