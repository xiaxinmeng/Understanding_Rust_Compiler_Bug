{"sha": "f853f0b2d65aef97fb88d569d5636eaeae6bb369", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY4NTNmMGIyZDY1YWVmOTdmYjg4ZDU2OWQ1NjM2ZWFlYWU2YmIzNjk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-14T09:30:59Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-14T09:30:59Z"}, "message": "auto merge of #9160 : alexcrichton/rust/local-data-docs, r=huonw\n\nRemove references to local_data::Key and only mention the macro for how to\r\nconstruct new keys into local data.", "tree": {"sha": "6ad74e9a9ae9b6303331e656231767c41e7865f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6ad74e9a9ae9b6303331e656231767c41e7865f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f853f0b2d65aef97fb88d569d5636eaeae6bb369", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f853f0b2d65aef97fb88d569d5636eaeae6bb369", "html_url": "https://github.com/rust-lang/rust/commit/f853f0b2d65aef97fb88d569d5636eaeae6bb369", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f853f0b2d65aef97fb88d569d5636eaeae6bb369/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbafb41fff33cf9a7709ef50f7525fa5f9930d2b", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbafb41fff33cf9a7709ef50f7525fa5f9930d2b", "html_url": "https://github.com/rust-lang/rust/commit/fbafb41fff33cf9a7709ef50f7525fa5f9930d2b"}, {"sha": "d0462f070cf2a94a8720e6d5b939f32ba330c4eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0462f070cf2a94a8720e6d5b939f32ba330c4eb", "html_url": "https://github.com/rust-lang/rust/commit/d0462f070cf2a94a8720e6d5b939f32ba330c4eb"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "89bdb57e2bdb80fe5945971d6c8661b805319067", "filename": "src/libstd/local_data.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f853f0b2d65aef97fb88d569d5636eaeae6bb369/src%2Flibstd%2Flocal_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f853f0b2d65aef97fb88d569d5636eaeae6bb369/src%2Flibstd%2Flocal_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flocal_data.rs?ref=f853f0b2d65aef97fb88d569d5636eaeae6bb369", "patch": "@@ -17,9 +17,10 @@ anywhere within a task, keyed by a global pointer parameterized over the type of\n the TLS slot.  Useful for dynamic variables, singletons, and interfacing with\n foreign code with bad callback interfaces.\n \n-To use, declare a static variable of the type you wish to store. The\n-initialization should be `&local_data::Key`. This is then the key to what you\n-wish to store.\n+To declare a new key for storing local data of a particular type, use the\n+`local_data_key!` macro. This macro will expand to a `static` item apppriately\n+named and annotated. This name is then passed to the functions in this module to\n+modify/read the slot specified by the key.\n \n ~~~{.rust}\n use std::local_data;\n@@ -31,14 +32,14 @@ local_data::set(key_int, 3);\n local_data::get(key_int, |opt| assert_eq!(opt, Some(&3)));\n \n local_data::set(key_vector, ~[4]);\n-local_data::get(key_int, |opt| assert_eq!(opt, Some(&~[4])));\n+local_data::get(key_vector, |opt| assert_eq!(opt, Some(&~[4])));\n ~~~\n \n-Casting 'Arcane Sight' reveals an overwhelming aura of Transmutation\n-magic.\n-\n */\n \n+// Casting 'Arcane Sight' reveals an overwhelming aura of Transmutation\n+// magic.\n+\n use cast;\n use libc;\n use prelude::*;"}]}