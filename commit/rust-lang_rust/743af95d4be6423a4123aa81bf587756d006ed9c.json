{"sha": "743af95d4be6423a4123aa81bf587756d006ed9c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0M2FmOTVkNGJlNjQyM2E0MTIzYWE4MWJmNTg3NzU2ZDAwNmVkOWM=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-06-27T19:24:37Z"}, "committer": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-07-04T13:31:56Z"}, "message": "Update a few comments.", "tree": {"sha": "d891be077b27669b889247c34c3c5bfad266ee69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d891be077b27669b889247c34c3c5bfad266ee69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/743af95d4be6423a4123aa81bf587756d006ed9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/743af95d4be6423a4123aa81bf587756d006ed9c", "html_url": "https://github.com/rust-lang/rust/commit/743af95d4be6423a4123aa81bf587756d006ed9c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/743af95d4be6423a4123aa81bf587756d006ed9c/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6766abbfa9959581ebfdba32131125e2b3b624f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/6766abbfa9959581ebfdba32131125e2b3b624f3", "html_url": "https://github.com/rust-lang/rust/commit/6766abbfa9959581ebfdba32131125e2b3b624f3"}], "stats": {"total": 29, "additions": 11, "deletions": 18}, "files": [{"sha": "7232208b52234d278caf2a5d001ca04ee8261d8a", "filename": "src/bootstrap/bin/rustc.rs", "status": "modified", "additions": 5, "deletions": 10, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/743af95d4be6423a4123aa81bf587756d006ed9c/src%2Fbootstrap%2Fbin%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/743af95d4be6423a4123aa81bf587756d006ed9c/src%2Fbootstrap%2Fbin%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbin%2Frustc.rs?ref=743af95d4be6423a4123aa81bf587756d006ed9c", "patch": "@@ -75,16 +75,11 @@ fn main() {\n         Err(_) => 0,\n     };\n \n-    // Build scripts always use the snapshot compiler which is guaranteed to be\n-    // able to produce an executable, whereas intermediate compilers may not\n-    // have the standard library built yet and may not be able to produce an\n-    // executable. Otherwise we just use the standard compiler we're\n-    // bootstrapping with.\n-    //\n-    // Also note that cargo will detect the version of the compiler to trigger\n-    // a rebuild when the compiler changes. If this happens, we want to make\n-    // sure to use the actual compiler instead of the snapshot compiler becase\n-    // that's the one that's actually changing.\n+    // Use a different compiler for build scripts, since there may not yet be a\n+    // libstd for the real compiler to use. However, if Cargo is attempting to\n+    // determine the version of the compiler, the real compiler needs to be\n+    // used. Currently, these two states are differentiated based on whether\n+    // --target and -vV is/isn't passed.\n     let (rustc, libdir) = if target.is_none() && version.is_none() {\n         (\"RUSTC_SNAPSHOT\", \"RUSTC_SNAPSHOT_LIBDIR\")\n     } else {"}, {"sha": "91ace0805e43e378a891f56da3ccbf00c9d2a4c5", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/743af95d4be6423a4123aa81bf587756d006ed9c/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/743af95d4be6423a4123aa81bf587756d006ed9c/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=743af95d4be6423a4123aa81bf587756d006ed9c", "patch": "@@ -175,7 +175,9 @@ pub struct Build {\n     lldb_python_dir: Option<String>,\n \n     // Runtime state filled in later on\n+    // target -> (cc, ar)\n     cc: HashMap<String, (gcc::Tool, Option<PathBuf>)>,\n+    // host -> (cc, ar)\n     cxx: HashMap<String, gcc::Tool>,\n     crates: HashMap<String, Crate>,\n     is_sudo: bool,\n@@ -202,20 +204,16 @@ struct Crate {\n /// build system, with each mod generating output in a different directory.\n #[derive(Clone, Copy, PartialEq, Eq)]\n pub enum Mode {\n-    /// This cargo is going to build the standard library, placing output in the\n-    /// \"stageN-std\" directory.\n+    /// Build the standard library, placing output in the \"stageN-std\" directory.\n     Libstd,\n \n-    /// This cargo is going to build libtest, placing output in the\n-    /// \"stageN-test\" directory.\n+    /// Build libtest, placing output in the \"stageN-test\" directory.\n     Libtest,\n \n-    /// This cargo is going to build librustc and compiler libraries, placing\n-    /// output in the \"stageN-rustc\" directory.\n+    /// Build librustc and compiler libraries, placing output in the \"stageN-rustc\" directory.\n     Librustc,\n \n-    /// This cargo is going to build some tool, placing output in the\n-    /// \"stageN-tools\" directory.\n+    /// Build some tool, placing output in the \"stageN-tools\" directory.\n     Tool,\n }\n "}]}