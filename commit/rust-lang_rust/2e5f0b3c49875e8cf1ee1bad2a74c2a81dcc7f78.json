{"sha": "2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlNWYwYjNjNDk4NzVlOGNmMWVlMWJhZDJhNzRjMmE4MWRjYzdmNzg=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-04-28T19:13:33Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2019-04-28T20:17:15Z"}, "message": "Remove unused TyCtxt argument from allow_two_phase_borrow function", "tree": {"sha": "00f63ea8e174115dc61b1b102f05ab940dd88778", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00f63ea8e174115dc61b1b102f05ab940dd88778"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZxoS6lESXlRGMHWcaTCGhp1QZjcFAlzGClEACgkQaTCGhp1Q\nZjdXjw//RY4dBJ6Kek6Pmuo03eiBZNKuLN8X1NRI0GeOZTCBpDfRRhYhPpBqk6jq\nOpgPr3rjmPQSXR0slNAEeA58Uyp+kgWx3e6RrOQegti7flK2GQEtfqISzRhQEony\nkKOZP/tK5mggBpwmF9Fefs+8JA8wUtmabH4p3Gc2y+Ll/qdMvGC6fi8QR/Zot1YP\nxu77wjUg2qPw9DFcVdwlwLE+iU7HTpc8V+hKWpFEQjbFFJCkET6aRAf2xGWHBjZ1\nPTgxLTvc57Yx1CJzHJmCHjEj3J/furZEMGsJOnzjfjrVbmpmdWw8JOOXdh7wQu98\n3SKPPLQVBS6Vd5jNmMFPDkhZvkuUBpWk57t/fo/iudqsCgZrF3tm+izJCHIXOI0I\nhRvLvOwolTl2AMQa/TfteYuewNnxkjlj2OMJ5mmkPSOwkRa51ZEh00ATG3Q8X8Wa\nN6Fb/JscB0q4Rrf5vGBhyaj+Ueti8EZNWkYDtuE6aCFXX1Oi0JvhxpFlbTNgLZ+z\nhNXnK09flYWxyLymV05csQQ5jQxSfNLGEwgASzfdqB4MYusBniwJKF9zyJz+CBFe\nfE2ztYYfdFC45XUg3LajfSesNAM0U7xK8O8IQvrTrLOSgz3hFgaMed3jTavVsIgo\nuq/6zrvoeZ32FxPJqCF6V4PKpAE136n8YJ5hbps6gnwSgFx/tQw=\n=T/Bg\n-----END PGP SIGNATURE-----", "payload": "tree 00f63ea8e174115dc61b1b102f05ab940dd88778\nparent 86ed3116ba6156b45b4e5c22c2d0227ffab70dff\nauthor flip1995 <hello@philkrones.com> 1556478813 +0200\ncommitter flip1995 <hello@philkrones.com> 1556482635 +0200\n\nRemove unused TyCtxt argument from allow_two_phase_borrow function\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "html_url": "https://github.com/rust-lang/rust/commit/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86ed3116ba6156b45b4e5c22c2d0227ffab70dff", "url": "https://api.github.com/repos/rust-lang/rust/commits/86ed3116ba6156b45b4e5c22c2d0227ffab70dff", "html_url": "https://github.com/rust-lang/rust/commit/86ed3116ba6156b45b4e5c22c2d0227ffab70dff"}], "stats": {"total": 15, "additions": 6, "deletions": 9}, "files": [{"sha": "90f23f78fec23ff4924eaa8b9de29260400f693c", "filename": "src/librustc_mir/borrow_check/borrow_set.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fborrow_set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fborrow_set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fborrow_set.rs?ref=2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "patch": "@@ -315,7 +315,7 @@ impl<'a, 'gcx, 'tcx> GatherBorrows<'a, 'gcx, 'tcx> {\n             start_location, assigned_place, borrow_index,\n         );\n \n-        if !allow_two_phase_borrow(self.tcx, kind) {\n+        if !allow_two_phase_borrow(kind) {\n             debug!(\"  -> {:?}\", start_location);\n             return;\n         }"}, {"sha": "169d56523591d3e44a854405429e1d4b228d75d2", "filename": "src/librustc_mir/borrow_check/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs?ref=2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "patch": "@@ -1076,7 +1076,7 @@ impl<'cx, 'gcx, 'tcx> MirBorrowckCtxt<'cx, 'gcx, 'tcx> {\n                 (Read(kind), BorrowKind::Unique) | (Read(kind), BorrowKind::Mut { .. }) => {\n                     // Reading from mere reservations of mutable-borrows is OK.\n                     if !is_active(&this.dominators, borrow, context.loc) {\n-                        assert!(allow_two_phase_borrow(tcx, borrow.kind));\n+                        assert!(allow_two_phase_borrow(borrow.kind));\n                         return Control::Continue;\n                     }\n \n@@ -1233,7 +1233,7 @@ impl<'cx, 'gcx, 'tcx> MirBorrowckCtxt<'cx, 'gcx, 'tcx> {\n                     BorrowKind::Shared => (Deep, Read(ReadKind::Borrow(bk))),\n                     BorrowKind::Unique | BorrowKind::Mut { .. } => {\n                         let wk = WriteKind::MutableBorrow(bk);\n-                        if allow_two_phase_borrow(self.infcx.tcx, bk) {\n+                        if allow_two_phase_borrow(bk) {\n                             (Deep, Reservation(wk))\n                         } else {\n                             (Deep, Write(wk))"}, {"sha": "3a368ea8c8d59acc703ce7b70d0799d93dc0bd07", "filename": "src/librustc_mir/borrow_check/nll/invalidation.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs?ref=2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "patch": "@@ -321,7 +321,7 @@ impl<'cg, 'cx, 'tcx, 'gcx> InvalidationGenerator<'cx, 'tcx, 'gcx> {\n                     BorrowKind::Shared => (Deep, Read(ReadKind::Borrow(bk))),\n                     BorrowKind::Unique | BorrowKind::Mut { .. } => {\n                         let wk = WriteKind::MutableBorrow(bk);\n-                        if allow_two_phase_borrow(self.tcx, bk) {\n+                        if allow_two_phase_borrow(bk) {\n                             (Deep, Reservation(wk))\n                         } else {\n                             (Deep, Write(wk))\n@@ -439,7 +439,7 @@ impl<'cg, 'cx, 'tcx, 'gcx> InvalidationGenerator<'cx, 'tcx, 'gcx> {\n                         // Reading from mere reservations of mutable-borrows is OK.\n                         if !is_active(&this.dominators, borrow, context.loc) {\n                             // If the borrow isn't active yet, reads don't invalidate it\n-                            assert!(allow_two_phase_borrow(this.tcx, borrow.kind));\n+                            assert!(allow_two_phase_borrow(borrow.kind));\n                             return Control::Continue;\n                         }\n "}, {"sha": "86af2490408aac755bd02c3e41216a042f3c92b7", "filename": "src/librustc_mir/borrow_check/path_utils.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fpath_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78/src%2Flibrustc_mir%2Fborrow_check%2Fpath_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fpath_utils.rs?ref=2e5f0b3c49875e8cf1ee1bad2a74c2a81dcc7f78", "patch": "@@ -11,10 +11,7 @@ use rustc_data_structures::graph::dominators::Dominators;\n /// Returns `true` if the borrow represented by `kind` is\n /// allowed to be split into separate Reservation and\n /// Activation phases.\n-pub(super) fn allow_two_phase_borrow<'a, 'tcx, 'gcx: 'tcx>(\n-    _tcx: TyCtxt<'a, 'gcx, 'tcx>,\n-    kind: BorrowKind\n-) -> bool {\n+pub(super) fn allow_two_phase_borrow<'a, 'tcx, 'gcx: 'tcx>(kind: BorrowKind) -> bool {\n     kind.allows_two_phase_borrow()\n }\n "}]}