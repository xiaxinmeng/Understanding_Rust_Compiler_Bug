{"sha": "e32e81c9da5adcc77bd12192d45d2d4af54d0ee9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUzMmU4MWM5ZGE1YWRjYzc3YmQxMjE5MmQ0NWQyZDRhZjU0ZDBlZTk=", "commit": {"author": {"name": "Basile Desloges", "email": "basile.desloges@gmail.com", "date": "2017-10-06T16:23:53Z"}, "committer": {"name": "Basile Desloges", "email": "basile.desloges@gmail.com", "date": "2017-10-06T16:23:53Z"}, "message": "mir-borrowck: Implement end-user output for field of subslice and slice type", "tree": {"sha": "65480ddcb32c0344b34496268cd806d9a3894b4a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/65480ddcb32c0344b34496268cd806d9a3894b4a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9", "html_url": "https://github.com/rust-lang/rust/commit/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9/comments", "author": {"login": "zilbuz", "id": 434964, "node_id": "MDQ6VXNlcjQzNDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zilbuz", "html_url": "https://github.com/zilbuz", "followers_url": "https://api.github.com/users/zilbuz/followers", "following_url": "https://api.github.com/users/zilbuz/following{/other_user}", "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions", "organizations_url": "https://api.github.com/users/zilbuz/orgs", "repos_url": "https://api.github.com/users/zilbuz/repos", "events_url": "https://api.github.com/users/zilbuz/events{/privacy}", "received_events_url": "https://api.github.com/users/zilbuz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zilbuz", "id": 434964, "node_id": "MDQ6VXNlcjQzNDk2NA==", "avatar_url": "https://avatars.githubusercontent.com/u/434964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zilbuz", "html_url": "https://github.com/zilbuz", "followers_url": "https://api.github.com/users/zilbuz/followers", "following_url": "https://api.github.com/users/zilbuz/following{/other_user}", "gists_url": "https://api.github.com/users/zilbuz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zilbuz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zilbuz/subscriptions", "organizations_url": "https://api.github.com/users/zilbuz/orgs", "repos_url": "https://api.github.com/users/zilbuz/repos", "events_url": "https://api.github.com/users/zilbuz/events{/privacy}", "received_events_url": "https://api.github.com/users/zilbuz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8b8cdd984aa31eebccea2a9fb5c1f7931dd01c27", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b8cdd984aa31eebccea2a9fb5c1f7931dd01c27", "html_url": "https://github.com/rust-lang/rust/commit/8b8cdd984aa31eebccea2a9fb5c1f7931dd01c27"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "14e6f59782651d6f10706c034cd6686379f48c01", "filename": "src/librustc_mir/borrow_check.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9/src%2Flibrustc_mir%2Fborrow_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e32e81c9da5adcc77bd12192d45d2d4af54d0ee9/src%2Flibrustc_mir%2Fborrow_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check.rs?ref=e32e81c9da5adcc77bd12192d45d2d4af54d0ee9", "patch": "@@ -1135,13 +1135,10 @@ impl<'c, 'b, 'a: 'b+'c, 'gcx, 'tcx: 'a> MirBorrowckCtxt<'c, 'b, 'a, 'gcx, 'tcx>\n                         format!(\"{}\", def.variants[variant_index].fields[field_index].name),\n                     ProjectionElem::Field(_, field_type) =>\n                         self.describe_field_from_ty(&field_type, field_index),\n-                    ProjectionElem::Index(..) | ProjectionElem::ConstantIndex { .. } =>\n+                    ProjectionElem::Index(..)\n+                    | ProjectionElem::ConstantIndex { .. }\n+                    | ProjectionElem::Subslice { .. } =>\n                         format!(\"{}\", self.describe_field(&proj.base, field_index)),\n-                    ProjectionElem::Subslice { .. } => {\n-                        debug!(\"End-user description not implemented for field of projection {:?}\",\n-                               proj);\n-                        format!(\"<subslice>{}\", field_index)\n-                    }\n                 }\n             }\n         }\n@@ -1169,7 +1166,7 @@ impl<'c, 'b, 'a: 'b+'c, 'gcx, 'tcx: 'a> MirBorrowckCtxt<'c, 'b, 'a, 'gcx, 'tcx>\n                 ty::TyRef(_, tnm) | ty::TyRawPtr(tnm) => {\n                     self.describe_field_from_ty(&tnm.ty, field_index)\n                 },\n-                ty::TyArray(ty, _) => {\n+                ty::TyArray(ty, _) | ty::TySlice(ty) => {\n                     self.describe_field_from_ty(&ty, field_index)\n                 }\n                 _ => {"}]}