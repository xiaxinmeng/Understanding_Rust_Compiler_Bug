{"sha": "54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "node_id": "C_kwDOAAsO6NoAKDU0ZmM5ODkyMGIxZjI4YjVhOWJhNDJhNjdmY2QyODY4Y2MwYjYxNGE", "commit": {"author": {"name": "Jake Heinz", "email": "jh@discordapp.com", "date": "2021-11-30T03:21:17Z"}, "committer": {"name": "Jake Heinz", "email": "jh@discordapp.com", "date": "2021-11-30T03:21:17Z"}, "message": "consts with inners??", "tree": {"sha": "8ca91f0abe703012f6d7e2c5ea3b2d5a62002b69", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ca91f0abe703012f6d7e2c5ea3b2d5a62002b69"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "html_url": "https://github.com/rust-lang/rust/commit/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a/comments", "author": {"login": "jhgg", "id": 5489149, "node_id": "MDQ6VXNlcjU0ODkxNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5489149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhgg", "html_url": "https://github.com/jhgg", "followers_url": "https://api.github.com/users/jhgg/followers", "following_url": "https://api.github.com/users/jhgg/following{/other_user}", "gists_url": "https://api.github.com/users/jhgg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhgg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhgg/subscriptions", "organizations_url": "https://api.github.com/users/jhgg/orgs", "repos_url": "https://api.github.com/users/jhgg/repos", "events_url": "https://api.github.com/users/jhgg/events{/privacy}", "received_events_url": "https://api.github.com/users/jhgg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jhgg", "id": 5489149, "node_id": "MDQ6VXNlcjU0ODkxNDk=", "avatar_url": "https://avatars.githubusercontent.com/u/5489149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhgg", "html_url": "https://github.com/jhgg", "followers_url": "https://api.github.com/users/jhgg/followers", "following_url": "https://api.github.com/users/jhgg/following{/other_user}", "gists_url": "https://api.github.com/users/jhgg/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhgg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhgg/subscriptions", "organizations_url": "https://api.github.com/users/jhgg/orgs", "repos_url": "https://api.github.com/users/jhgg/repos", "events_url": "https://api.github.com/users/jhgg/events{/privacy}", "received_events_url": "https://api.github.com/users/jhgg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "492b169224fae427294abca7710776e2c3784b27", "url": "https://api.github.com/repos/rust-lang/rust/commits/492b169224fae427294abca7710776e2c3784b27", "html_url": "https://github.com/rust-lang/rust/commit/492b169224fae427294abca7710776e2c3784b27"}], "stats": {"total": 84, "additions": 82, "deletions": 2}, "files": [{"sha": "52c90a37444b727a40df8a9bd67c446e75c37392", "filename": "crates/ide_db/src/symbol_index.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs", "raw_url": "https://github.com/rust-lang/rust/raw/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_db%2Fsrc%2Fsymbol_index.rs?ref=54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "patch": "@@ -765,6 +765,18 @@ mod a_mod {\n     struct StructInModA;\n }\n \n+const _: () = {\n+    struct StructInUnnamedConst;\n+\n+    ()\n+};\n+\n+const CONST_WITH_INNER: () = {\n+    struct StructInNamedConst;\n+\n+    ()\n+};\n+\n mod b_mod;\n \n //- /b_mod.rs"}, {"sha": "fe6eebc4f01d060098e4b211804aa57b79351c6e", "filename": "crates/ide_db/src/test_data/test_symbol_index_collection.txt", "status": "modified", "additions": 70, "deletions": 2, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt", "raw_url": "https://github.com/rust-lang/rust/raw/54fc98920b1f28b5a9ba42a67fcd2868cc0b614a/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_db%2Fsrc%2Ftest_data%2Ftest_symbol_index_collection.txt?ref=54fc98920b1f28b5a9ba42a67fcd2868cc0b614a", "patch": "@@ -254,6 +254,28 @@\n                 kind: Module,\n                 container_name: None,\n             },\n+            FileSymbol {\n+                name: \"CONST_WITH_INNER\",\n+                loc: DeclarationLocation {\n+                    hir_file_id: HirFileId(\n+                        FileId(\n+                            FileId(\n+                                0,\n+                            ),\n+                        ),\n+                    ),\n+                    ptr: SyntaxNodePtr {\n+                        range: 520..592,\n+                        kind: CONST,\n+                    },\n+                    name_ptr: SyntaxNodePtr {\n+                        range: 526..542,\n+                        kind: NAME,\n+                    },\n+                },\n+                kind: Const,\n+                container_name: None,\n+            },\n             FileSymbol {\n                 name: \"b_mod\",\n                 loc: DeclarationLocation {\n@@ -265,11 +287,11 @@\n                         ),\n                     ),\n                     ptr: SyntaxNodePtr {\n-                        range: 459..469,\n+                        range: 594..604,\n                         kind: MODULE,\n                     },\n                     name_ptr: SyntaxNodePtr {\n-                        range: 463..468,\n+                        range: 598..603,\n                         kind: NAME,\n                     },\n                 },\n@@ -364,6 +386,52 @@\n                 kind: Macro,\n                 container_name: None,\n             },\n+            FileSymbol {\n+                name: \"StructInUnnamedConst\",\n+                loc: DeclarationLocation {\n+                    hir_file_id: HirFileId(\n+                        FileId(\n+                            FileId(\n+                                0,\n+                            ),\n+                        ),\n+                    ),\n+                    ptr: SyntaxNodePtr {\n+                        range: 479..507,\n+                        kind: STRUCT,\n+                    },\n+                    name_ptr: SyntaxNodePtr {\n+                        range: 486..506,\n+                        kind: NAME,\n+                    },\n+                },\n+                kind: Struct,\n+                container_name: None,\n+            },\n+            FileSymbol {\n+                name: \"StructInNamedConst\",\n+                loc: DeclarationLocation {\n+                    hir_file_id: HirFileId(\n+                        FileId(\n+                            FileId(\n+                                0,\n+                            ),\n+                        ),\n+                    ),\n+                    ptr: SyntaxNodePtr {\n+                        range: 555..581,\n+                        kind: STRUCT,\n+                    },\n+                    name_ptr: SyntaxNodePtr {\n+                        range: 562..580,\n+                        kind: NAME,\n+                    },\n+                },\n+                kind: Struct,\n+                container_name: Some(\n+                    \"CONST_WITH_INNER\",\n+                ),\n+            },\n             FileSymbol {\n                 name: \"StructInFn\",\n                 loc: DeclarationLocation {"}]}