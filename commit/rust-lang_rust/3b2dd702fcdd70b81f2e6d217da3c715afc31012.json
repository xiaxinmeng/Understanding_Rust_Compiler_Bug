{"sha": "3b2dd702fcdd70b81f2e6d217da3c715afc31012", "node_id": "C_kwDOAAsO6NoAKDNiMmRkNzAyZmNkZDcwYjgxZjJlNmQyMTdkYTNjNzE1YWZjMzEwMTI", "commit": {"author": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-10-21T11:23:34Z"}, "committer": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-10-21T11:25:45Z"}, "message": "Do not mention a reexported item if it's private", "tree": {"sha": "965018020c73b89f1a828ad98ad64a903fb0b395", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/965018020c73b89f1a828ad98ad64a903fb0b395"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3b2dd702fcdd70b81f2e6d217da3c715afc31012", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEx6scKn6IIf/+FpBu2rpbBylhwYoFAmFxTjkACgkQ2rpbBylh\nwYoN9w//Uneb/0cXTCyOy81eRjeMbm47lV7FqFeGdlvzwJOe6T0XGPjqftbdSf6s\n/MtMSJ52ljw1DHMcwcuprnLsZyl0NaB4Vua9qDecrsqpwMRqmtctiurP+/c18Ml9\nQfzYCzhqJC7tVe2Ha99J51BHBIt/nKpaG1jBhrgD+uNRfngHybIgoYlBsne0O/1c\nj798GFTZB3yOoFUwT3mhJ9SPnuwljVOQz2zNSALeJFPj2GEqHJsk5D6NcjKeLgXY\nTC76LjvVNk3t5sGTXYO/vrQ7wj69PZYmX1hLn4MgQXU0DU9xF08FU3jpoNrF307A\nN2zAeCLvBCWmj5CDJ0xaxoz/ilFluvkHylKGVPaiAF+2W5rN4BzdKhgazbqXi9KJ\nsYF/RNx7kI667wSoyos0ejqgNRyGeiuf//fRAVGMmicldH/PIgm/r4jxHfRhHw6O\n246v+5yElkZXA7DZUaehmwXZ0rHvbBp8cltQqOF5ks6SrvurZ2sDmD61SdFBt3IB\naEeyDRRssAWkYMCOQzZt4RLkjAfSf5reFIOgySccvpqKpohGQtGlmX1k2mRHWa8b\nXvSO28bYTn9GoZb/ecxeNadfRNZXI+9A7vlXCBNcNW6kRTZNXHZSLyK9sYUxu1Hn\n7dJQh1Q0F6iMBTFIfFhsqbD8SSmVfy974BZo+GjWTZAXWpdavDc=\n=hJfm\n-----END PGP SIGNATURE-----", "payload": "tree 965018020c73b89f1a828ad98ad64a903fb0b395\nparent 4626184cafa827e13cc7a71b183a704ee0ec5930\nauthor Yuki Okushi <yuki.okushi@huawei.com> 1634815414 +0900\ncommitter Yuki Okushi <yuki.okushi@huawei.com> 1634815545 +0900\n\nDo not mention a reexported item if it's private\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3b2dd702fcdd70b81f2e6d217da3c715afc31012", "html_url": "https://github.com/rust-lang/rust/commit/3b2dd702fcdd70b81f2e6d217da3c715afc31012", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3b2dd702fcdd70b81f2e6d217da3c715afc31012/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4626184cafa827e13cc7a71b183a704ee0ec5930", "url": "https://api.github.com/repos/rust-lang/rust/commits/4626184cafa827e13cc7a71b183a704ee0ec5930", "html_url": "https://github.com/rust-lang/rust/commit/4626184cafa827e13cc7a71b183a704ee0ec5930"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "e599bf4cab0093226c7fe65d33468ef68d214135", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/3b2dd702fcdd70b81f2e6d217da3c715afc31012/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b2dd702fcdd70b81f2e6d217da3c715afc31012/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=3b2dd702fcdd70b81f2e6d217da3c715afc31012", "patch": "@@ -829,6 +829,15 @@ impl<'a> Resolver<'a> {\n                     return;\n                 }\n \n+                // #90113: Do not count an inaccessible reexported item as a candidate.\n+                if let NameBindingKind::Import { binding, .. } = name_binding.kind {\n+                    if this.is_accessible_from(binding.vis, parent_scope.module)\n+                        && !this.is_accessible_from(name_binding.vis, parent_scope.module)\n+                    {\n+                        return;\n+                    }\n+                }\n+\n                 // collect results based on the filter function\n                 // avoid suggesting anything from the same module in which we are resolving\n                 if ident.name == lookup_ident.name"}, {"sha": "f6658b45ed1a62629fb8d293100c63cc5a645a67", "filename": "src/test/ui/resolve/issue-90113.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/3b2dd702fcdd70b81f2e6d217da3c715afc31012/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b2dd702fcdd70b81f2e6d217da3c715afc31012/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.rs?ref=3b2dd702fcdd70b81f2e6d217da3c715afc31012", "patch": "@@ -0,0 +1,21 @@\n+mod list {\n+    pub use self::List::Cons;\n+\n+    pub enum List<T> {\n+        Cons(T, Box<List<T>>),\n+    }\n+}\n+\n+mod alias {\n+    use crate::list::List;\n+\n+    pub type Foo = List<String>;\n+}\n+\n+fn foo(l: crate::alias::Foo) {\n+    match l {\n+        Cons(..) => {} //~ ERROR: cannot find tuple struct or tuple variant `Cons` in this scope\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "1b78720571c652e4821cd0c3820e53da42225953", "filename": "src/test/ui/resolve/issue-90113.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3b2dd702fcdd70b81f2e6d217da3c715afc31012/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3b2dd702fcdd70b81f2e6d217da3c715afc31012/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fresolve%2Fissue-90113.stderr?ref=3b2dd702fcdd70b81f2e6d217da3c715afc31012", "patch": "@@ -0,0 +1,14 @@\n+error[E0531]: cannot find tuple struct or tuple variant `Cons` in this scope\n+  --> $DIR/issue-90113.rs:17:9\n+   |\n+LL |         Cons(..) => {}\n+   |         ^^^^ not found in this scope\n+   |\n+help: consider importing this tuple variant\n+   |\n+LL | use list::List::Cons;\n+   |\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0531`."}]}