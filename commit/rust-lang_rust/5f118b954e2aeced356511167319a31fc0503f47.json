{"sha": "5f118b954e2aeced356511167319a31fc0503f47", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmMTE4Yjk1NGUyYWVjZWQzNTY1MTExNjczMTlhMzFmYzA1MDNmNDc=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo.net", "date": "2017-01-05T14:02:14Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo.net", "date": "2017-01-18T17:06:22Z"}, "message": "travis: Gate on some minimal support for incremental compilation.\n\nThis commit adds a travis job that builds a stage2 compiler in\nincremental mode (but with empty incremental compilation cache).\nBuilding incrementally with an empty cache makes sure that the\ncompiler doesn't crash in dependency tracking during bootstrapping.", "tree": {"sha": "30cf4a7785d86b65739b96e0e63d1fa5e8384a3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/30cf4a7785d86b65739b96e0e63d1fa5e8384a3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5f118b954e2aeced356511167319a31fc0503f47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5f118b954e2aeced356511167319a31fc0503f47", "html_url": "https://github.com/rust-lang/rust/commit/5f118b954e2aeced356511167319a31fc0503f47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5f118b954e2aeced356511167319a31fc0503f47/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8af93f0901c336e873ce18274026d0fd9bc7c1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8af93f0901c336e873ce18274026d0fd9bc7c1f", "html_url": "https://github.com/rust-lang/rust/commit/c8af93f0901c336e873ce18274026d0fd9bc7c1f"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "b6656bec6052d63ab8bfdeb46ed5a2c0402acb79", "filename": ".travis.yml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5f118b954e2aeced356511167319a31fc0503f47/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5f118b954e2aeced356511167319a31fc0503f47/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=5f118b954e2aeced356511167319a31fc0503f47", "patch": "@@ -34,6 +34,7 @@ matrix:\n     - env: IMAGE=x86_64-gnu-llvm-3.7 ALLOW_PR=1 RUST_BACKTRACE=1\n     - env: IMAGE=x86_64-musl DEPLOY=1\n     - env: IMAGE=x86_64-gnu-distcheck\n+    - env: IMAGE=x86_64-gnu-incremental\n \n     # OSX builders\n     - env: >"}, {"sha": "3e084f4a3c30289384b4affe22c0e84e8385713f", "filename": "src/ci/docker/x86_64-gnu-incremental/Dockerfile", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/5f118b954e2aeced356511167319a31fc0503f47/src%2Fci%2Fdocker%2Fx86_64-gnu-incremental%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/5f118b954e2aeced356511167319a31fc0503f47/src%2Fci%2Fdocker%2Fx86_64-gnu-incremental%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fx86_64-gnu-incremental%2FDockerfile?ref=5f118b954e2aeced356511167319a31fc0503f47", "patch": "@@ -0,0 +1,27 @@\n+FROM ubuntu:16.04\n+\n+RUN apt-get update && apt-get install -y --no-install-recommends \\\n+  g++ \\\n+  make \\\n+  file \\\n+  curl \\\n+  ca-certificates \\\n+  python2.7 \\\n+  git \\\n+  cmake \\\n+  sudo \\\n+  gdb \\\n+  xz-utils\n+\n+ENV SCCACHE_DIGEST=7237e38e029342fa27b7ac25412cb9d52554008b12389727320bd533fd7f05b6a96d55485f305caf95e5c8f5f97c3313e10012ccad3e752aba2518f3522ba783\n+RUN curl -L https://api.pub.build.mozilla.org/tooltool/sha512/$SCCACHE_DIGEST | \\\n+      tar xJf - -C /usr/local/bin --strip-components=1\n+\n+RUN curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64.deb && \\\n+    dpkg -i dumb-init_*.deb && \\\n+    rm dumb-init_*.deb\n+ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n+\n+ENV RUST_CONFIGURE_ARGS --build=x86_64-unknown-linux-gnu\n+ENV RUSTFLAGS -Zincremental=/tmp/rust-incr-cache\n+ENV RUST_CHECK_TARGET check"}]}