{"sha": "e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1OThhYzk4NzJiMGExN2RjZGNmMWU1YjYyNTllMGFhNjc2MmZkNGM=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-10-15T06:21:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-10-15T06:21:53Z"}, "message": "Rollup merge of #45255 - bgermann:master, r=alexcrichton\n\nMake Solaris builder compatible with Solaris 10\n\nWould it be possible to get this in the next 1.22.0 beta?", "tree": {"sha": "28f40fc255c14f0330f6872dc0200f55665ba862", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/28f40fc255c14f0330f6872dc0200f55665ba862"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "html_url": "https://github.com/rust-lang/rust/commit/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6f4cea79d392378e9b457a4dea6c28ed22ad160", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6f4cea79d392378e9b457a4dea6c28ed22ad160", "html_url": "https://github.com/rust-lang/rust/commit/b6f4cea79d392378e9b457a4dea6c28ed22ad160"}, {"sha": "8f4ff6307f0a4c8be9b9c0ec57b57a354cbba005", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f4ff6307f0a4c8be9b9c0ec57b57a354cbba005", "html_url": "https://github.com/rust-lang/rust/commit/8f4ff6307f0a4c8be9b9c0ec57b57a354cbba005"}], "stats": {"total": 34, "additions": 19, "deletions": 15}, "files": [{"sha": "029d2c18d4a4ce7f9c0d386118ec885216cd8567", "filename": "src/ci/docker/cross2/Dockerfile", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c/src%2Fci%2Fdocker%2Fcross2%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c/src%2Fci%2Fdocker%2Fcross2%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fcross2%2FDockerfile?ref=e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "patch": "@@ -36,12 +36,12 @@ ENV \\\n     AR_aarch64_unknown_fuchsia=aarch64-unknown-fuchsia-ar \\\n     CC_aarch64_unknown_fuchsia=aarch64-unknown-fuchsia-clang \\\n     CXX_aarch64_unknown_fuchsia=aarch64-unknown-fuchsia-clang++ \\\n-    AR_sparcv9_sun_solaris=sparcv9-sun-solaris2.11-ar \\\n-    CC_sparcv9_sun_solaris=sparcv9-sun-solaris2.11-gcc \\\n-    CXX_sparcv9_sun_solaris=sparcv9-sun-solaris2.11-g++ \\\n-    AR_x86_64_sun_solaris=x86_64-sun-solaris2.11-ar \\\n-    CC_x86_64_sun_solaris=x86_64-sun-solaris2.11-gcc \\\n-    CXX_x86_64_sun_solaris=x86_64-sun-solaris2.11-g++\n+    AR_sparcv9_sun_solaris=sparcv9-sun-solaris2.10-ar \\\n+    CC_sparcv9_sun_solaris=sparcv9-sun-solaris2.10-gcc \\\n+    CXX_sparcv9_sun_solaris=sparcv9-sun-solaris2.10-g++ \\\n+    AR_x86_64_sun_solaris=x86_64-sun-solaris2.10-ar \\\n+    CC_x86_64_sun_solaris=x86_64-sun-solaris2.10-gcc \\\n+    CXX_x86_64_sun_solaris=x86_64-sun-solaris2.10-g++\n \n ENV TARGETS=x86_64-unknown-fuchsia\n ENV TARGETS=$TARGETS,aarch64-unknown-fuchsia"}, {"sha": "935cbe5d61b58eff77992c5df1cee66d300425c8", "filename": "src/ci/docker/cross2/build-solaris-toolchain.sh", "status": "modified", "additions": 13, "deletions": 9, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c/src%2Fci%2Fdocker%2Fcross2%2Fbuild-solaris-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c/src%2Fci%2Fdocker%2Fcross2%2Fbuild-solaris-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fcross2%2Fbuild-solaris-toolchain.sh?ref=e598ac9872b0a17dcdcf1e5b6259e0aa6762fd4c", "patch": "@@ -25,7 +25,7 @@ cd binutils\n curl https://ftp.gnu.org/gnu/binutils/binutils-$BINUTILS.tar.xz | tar xJf -\n mkdir binutils-build\n cd binutils-build\n-hide_output ../binutils-$BINUTILS/configure --target=$ARCH-sun-solaris2.11\n+hide_output ../binutils-$BINUTILS/configure --target=$ARCH-sun-solaris2.10\n hide_output make -j10\n hide_output make install\n \n@@ -58,13 +58,17 @@ for deb in *$APT_ARCH.deb; do\n   dpkg -x $deb .\n done\n \n-mkdir                  /usr/local/$ARCH-sun-solaris2.11/usr\n-mv usr/include         /usr/local/$ARCH-sun-solaris2.11/usr/include\n-mv usr/lib/$LIB_ARCH/* /usr/local/$ARCH-sun-solaris2.11/lib\n-mv     lib/$LIB_ARCH/* /usr/local/$ARCH-sun-solaris2.11/lib\n+# Strip Solaris 11 functions that are optionally used by libbacktrace.\n+# This is for Solaris 10 compatibility.\n+$ARCH-sun-solaris2.10-strip -N dl_iterate_phdr -N strnlen lib/$LIB_ARCH/libc.so\n \n-ln -s /usr/local/$ARCH-sun-solaris2.11/usr/include /usr/local/$ARCH-sun-solaris2.11/sys-include\n-ln -s /usr/local/$ARCH-sun-solaris2.11/usr/include /usr/local/$ARCH-sun-solaris2.11/include\n+mkdir                  /usr/local/$ARCH-sun-solaris2.10/usr\n+mv usr/include         /usr/local/$ARCH-sun-solaris2.10/usr/include\n+mv usr/lib/$LIB_ARCH/* /usr/local/$ARCH-sun-solaris2.10/lib\n+mv     lib/$LIB_ARCH/* /usr/local/$ARCH-sun-solaris2.10/lib\n+\n+ln -s /usr/local/$ARCH-sun-solaris2.10/usr/include /usr/local/$ARCH-sun-solaris2.10/sys-include\n+ln -s /usr/local/$ARCH-sun-solaris2.10/usr/include /usr/local/$ARCH-sun-solaris2.10/include\n \n cd ..\n rm -rf solaris\n@@ -80,7 +84,7 @@ mkdir ../gcc-build\n cd ../gcc-build\n hide_output ../gcc-$GCC/configure \\\n   --enable-languages=c,c++        \\\n-  --target=$ARCH-sun-solaris2.11  \\\n+  --target=$ARCH-sun-solaris2.10  \\\n   --with-gnu-as                   \\\n   --with-gnu-ld                   \\\n   --disable-multilib              \\\n@@ -94,7 +98,7 @@ hide_output ../gcc-$GCC/configure \\\n   --disable-libsanitizer          \\\n   --disable-libquadmath-support   \\\n   --disable-lto                   \\\n-  --with-sysroot=/usr/local/$ARCH-sun-solaris2.11\n+  --with-sysroot=/usr/local/$ARCH-sun-solaris2.10\n \n hide_output make -j10\n hide_output make install"}]}