{"sha": "4332a27c2d582d05157fca4b0de593d146e774c5", "node_id": "C_kwDOAAsO6NoAKDQzMzJhMjdjMmQ1ODJkMDUxNTdmY2E0YjBkZTU5M2QxNDZlNzc0YzU", "commit": {"author": {"name": "clubby789", "email": "jamie@hill-daniel.co.uk", "date": "2023-02-23T00:39:51Z"}, "committer": {"name": "clubby789", "email": "jamie@hill-daniel.co.uk", "date": "2023-02-23T14:58:48Z"}, "message": "Fix ICE in 'duplicate diagnostic item' diagnostic", "tree": {"sha": "df3f3893dfeda67c93c7d34c0653f1b5fdecfdd7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/df3f3893dfeda67c93c7d34c0653f1b5fdecfdd7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4332a27c2d582d05157fca4b0de593d146e774c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4332a27c2d582d05157fca4b0de593d146e774c5", "html_url": "https://github.com/rust-lang/rust/commit/4332a27c2d582d05157fca4b0de593d146e774c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4332a27c2d582d05157fca4b0de593d146e774c5/comments", "author": {"login": "clubby789", "id": 13556931, "node_id": "MDQ6VXNlcjEzNTU2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clubby789", "html_url": "https://github.com/clubby789", "followers_url": "https://api.github.com/users/clubby789/followers", "following_url": "https://api.github.com/users/clubby789/following{/other_user}", "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}", "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions", "organizations_url": "https://api.github.com/users/clubby789/orgs", "repos_url": "https://api.github.com/users/clubby789/repos", "events_url": "https://api.github.com/users/clubby789/events{/privacy}", "received_events_url": "https://api.github.com/users/clubby789/received_events", "type": "User", "site_admin": false}, "committer": {"login": "clubby789", "id": 13556931, "node_id": "MDQ6VXNlcjEzNTU2OTMx", "avatar_url": "https://avatars.githubusercontent.com/u/13556931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clubby789", "html_url": "https://github.com/clubby789", "followers_url": "https://api.github.com/users/clubby789/followers", "following_url": "https://api.github.com/users/clubby789/following{/other_user}", "gists_url": "https://api.github.com/users/clubby789/gists{/gist_id}", "starred_url": "https://api.github.com/users/clubby789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clubby789/subscriptions", "organizations_url": "https://api.github.com/users/clubby789/orgs", "repos_url": "https://api.github.com/users/clubby789/repos", "events_url": "https://api.github.com/users/clubby789/events{/privacy}", "received_events_url": "https://api.github.com/users/clubby789/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da439d98749e7c94f3ecf355fdd616253ee08359", "url": "https://api.github.com/repos/rust-lang/rust/commits/da439d98749e7c94f3ecf355fdd616253ee08359", "html_url": "https://github.com/rust-lang/rust/commit/da439d98749e7c94f3ecf355fdd616253ee08359"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "8fe8472b21630c424d8331306041aac3a328bdc7", "filename": "compiler/rustc_passes/locales/en-US.ftl", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4332a27c2d582d05157fca4b0de593d146e774c5/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl", "raw_url": "https://github.com/rust-lang/rust/raw/4332a27c2d582d05157fca4b0de593d146e774c5/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Flocales%2Fen-US.ftl?ref=4332a27c2d582d05157fca4b0de593d146e774c5", "patch": "@@ -407,10 +407,10 @@ passes_duplicate_diagnostic_item =\n \n passes_duplicate_diagnostic_item_in_crate =\n     duplicate diagnostic item in crate `{$crate_name}`: `{$name}`.\n+    .note = the diagnostic item is first defined in crate `{$orig_crate_name}`.\n \n passes_diagnostic_item_first_defined =\n     the diagnostic item is first defined here\n-    .note = the diagnostic item is first defined in crate `{$orig_crate_name}`.\n \n passes_abi =\n     abi: {$abi}"}, {"sha": "47195c7e9d658f5bd790c6dddbd1d66834fdc21e", "filename": "tests/ui/tool-attributes/auxiliary/p1.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp1.rs?ref=4332a27c2d582d05157fca4b0de593d146e774c5", "patch": "@@ -0,0 +1,3 @@\n+#![feature(rustc_attrs)]\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {}"}, {"sha": "47195c7e9d658f5bd790c6dddbd1d66834fdc21e", "filename": "tests/ui/tool-attributes/auxiliary/p2.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fauxiliary%2Fp2.rs?ref=4332a27c2d582d05157fca4b0de593d146e774c5", "patch": "@@ -0,0 +1,3 @@\n+#![feature(rustc_attrs)]\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {}"}, {"sha": "39c2ca1cb860cb10b59aadc94fb9427f7e96d3d3", "filename": "tests/ui/tool-attributes/duplicate-diagnostic.rs", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.rs?ref=4332a27c2d582d05157fca4b0de593d146e774c5", "patch": "@@ -0,0 +1,13 @@\n+// aux-build: p1.rs\n+// aux-build: p2.rs\n+\n+// error-pattern: duplicate diagnostic item in crate `p2`\n+// error-pattern: note: the diagnostic item is first defined in crate `p1`\n+\n+#![feature(rustc_attrs)]\n+extern crate p1;\n+extern crate p2;\n+\n+#[rustc_diagnostic_item = \"Foo\"]\n+pub struct Foo {} //~ ERROR duplicate diagnostic item found\n+fn main() {}"}, {"sha": "e315fdc7d84bc4ec1de913a492a994fb2df08b75", "filename": "tests/ui/tool-attributes/duplicate-diagnostic.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4332a27c2d582d05157fca4b0de593d146e774c5/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftool-attributes%2Fduplicate-diagnostic.stderr?ref=4332a27c2d582d05157fca4b0de593d146e774c5", "patch": "@@ -0,0 +1,12 @@\n+error: duplicate diagnostic item in crate `p2`: `Foo`.\n+   |\n+   = note: the diagnostic item is first defined in crate `p1`.\n+\n+error: duplicate diagnostic item found: `Foo`.\n+  --> $DIR/duplicate-diagnostic.rs:12:1\n+   |\n+LL | pub struct Foo {}\n+   | ^^^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+"}]}