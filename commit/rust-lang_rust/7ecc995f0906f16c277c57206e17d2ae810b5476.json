{"sha": "7ecc995f0906f16c277c57206e17d2ae810b5476", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlY2M5OTVmMDkwNmYxNmMyNzdjNTcyMDZlMTdkMmFlODEwYjU0NzY=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-12-29T20:18:40Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2021-02-09T15:02:19Z"}, "message": "ci: allow unstable features in some PGO benchmarks", "tree": {"sha": "601199d4f20dc9ecede246edc5c2d0ad4b6cc004", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/601199d4f20dc9ecede246edc5c2d0ad4b6cc004"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ecc995f0906f16c277c57206e17d2ae810b5476", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAmAio/wACgkQPgar6Auq\n8Zz0OQ/+O0JAVRuIauZ+xMZw8nEURZI2xyQAJST0oi8sUOhh6VgXIcqQXO2f8FZL\niPs2DtnLlTHfjgHn5tiRXTwmG0W/55kk6O+OED/ogfnMuOYgI7uT8GTIvwoD7jrV\n5gKv4DLVWLFZF021XFVgTxuVv1g5RCg+yN7EKmzGwfOtEM6hbsPVWuAM/6xGi0pL\ngDPueN6Dk57RYF0zUzoQBWUTPZo2twLozeXFqJvCWG/ABcg0zXC8xigO89v5POTz\n7J3awbtDHDAaUa/g8tmBDb/Xpj0xJgvRs8LxMKbcjqfWqBoEGZDnMxjP4RZQUbk6\n+xMVg25FBJzcypnixVnl643inYXb3AmHn//8GywyoaD8MXyiZWN69Jpa6BAdB/Ta\nXWPgOHVi8wXmqqbL8Q6EjN2dOt1yevbB1CKZSNGCy+4xjzAPyGqxK8vlOXufB7fL\n7OkXHrYD6dFitYVYj9cDzrh1KJuV+BCQuSW57eBZKKiMXlpmpyGV3TURY1tUZw18\ntqYhfBPha5NZQrGzJFiInX0Xv55ilrJLqWvgaFFw+tX6CwbpE3LijjTtGVPUv85F\n0YLGG55A8FSssb9D596cxug2MoHvOJ6Ytotu/ELXufayU6iiG9x5f1yUyB+ZGQt2\nX5b9K3BJ5cP6loSNcD+cbdKDA9pQd2vhiLPU5WyHbDVO+To8KX0=\n=ZtQQ\n-----END PGP SIGNATURE-----", "payload": "tree 601199d4f20dc9ecede246edc5c2d0ad4b6cc004\nparent ea098255f74923d69ea234ee526df6b9cecc3b9b\nauthor Pietro Albini <pietro@pietroalbini.org> 1609273120 -0500\ncommitter Pietro Albini <pietro@pietroalbini.org> 1612882939 +0100\n\nci: allow unstable features in some PGO benchmarks\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ecc995f0906f16c277c57206e17d2ae810b5476", "html_url": "https://github.com/rust-lang/rust/commit/7ecc995f0906f16c277c57206e17d2ae810b5476", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ecc995f0906f16c277c57206e17d2ae810b5476/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea098255f74923d69ea234ee526df6b9cecc3b9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea098255f74923d69ea234ee526df6b9cecc3b9b", "html_url": "https://github.com/rust-lang/rust/commit/ea098255f74923d69ea234ee526df6b9cecc3b9b"}], "stats": {"total": 6, "additions": 4, "deletions": 2}, "files": [{"sha": "95cf1183fc17a0a52300fbfbc40ed9c7ef8385d7", "filename": "src/ci/pgo.sh", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7ecc995f0906f16c277c57206e17d2ae810b5476/src%2Fci%2Fpgo.sh", "raw_url": "https://github.com/rust-lang/rust/raw/7ecc995f0906f16c277c57206e17d2ae810b5476/src%2Fci%2Fpgo.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fpgo.sh?ref=7ecc995f0906f16c277c57206e17d2ae810b5476", "patch": "@@ -7,7 +7,7 @@ rm -rf /tmp/rustc-pgo\n python2.7 ../x.py build --target=$PGO_HOST --host=$PGO_HOST \\\n     --stage 2 library/std --rust-profile-generate=/tmp/rustc-pgo\n \n-./build/$PGO_HOST/stage2/bin/rustc --edition=2018 \\\n+RUSTC_BOOTSTRAP=1 ./build/$PGO_HOST/stage2/bin/rustc --edition=2018 \\\n     --crate-type=lib ../library/core/src/lib.rs\n \n # Download and build a single-file stress test benchmark on perf.rust-lang.org.\n@@ -16,7 +16,9 @@ function pgo_perf_benchmark {\n     local github_prefix=https://raw.githubusercontent.com/rust-lang/rustc-perf/$PERF\n     local name=$1\n     curl -o /tmp/$name.rs $github_prefix/collector/benchmarks/$name/src/lib.rs\n-    ./build/$PGO_HOST/stage2/bin/rustc --edition=2018 --crate-type=lib /tmp/$name.rs\n+\n+    RUSTC_BOOTSTRAP=1 ./build/$PGO_HOST/stage2/bin/rustc --edition=2018 \\\n+        --crate-type=lib /tmp/$name.rs\n }\n \n pgo_perf_benchmark externs"}]}