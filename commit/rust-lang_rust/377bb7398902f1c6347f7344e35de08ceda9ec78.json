{"sha": "377bb7398902f1c6347f7344e35de08ceda9ec78", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM3N2JiNzM5ODkwMmYxYzYzNDdmNzM0NGUzNWRlMDhjZWRhOWVjNzg=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-07-23T10:27:45Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-23T10:27:45Z"}, "message": "Rollup merge of #87332 - camelid:dont-hide-fields, r=GuillaumeGomez\n\nDon't hide fields of enum struct variants\n\n* The toggle adds visual clutter\n* It's easy to miss that there are fields\n* Tuple variant fields are always shown, so it is inconsistent to hide\n  struct variant fields\n* It's annoying to have to click the toggle every time", "tree": {"sha": "5c9f4524103a4582d8ccff34717920db9618d666", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c9f4524103a4582d8ccff34717920db9618d666"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/377bb7398902f1c6347f7344e35de08ceda9ec78", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg+pmiCRBK7hj4Ov3rIwAA8ZAIAGIs79eDh/4LqlkkND4+/zvA\ntMMPhQa74OwBgAa1x6I59/9pPZZTrlL6qMT3bDy5L7mkYbt2lg/kp0Xzpq6Ysm+e\nlKf3N525nNigM0QfKayDaeVyjCEw1gjfVk5itdlWcwSbi4sv38LjgPr22sNpLWxZ\n6i+os9DTGA2H/sKIxjeERvv2cBrnzq5jlzh58Z6MZjaGvjCLgsRO/RvuyYtXCxe/\nJwbJVedbjCg+Xx1kheeDJOTb2QEoZ7PULsk3MFG+Z/0qVvvZ2IKRJG9q/HhnNRMI\n7v3XD5dBLEA2gUuJINI1JBr4znLSAQQuXMJ7Bg7U6b/zrfnFaHLbhDoX5Q69PPw=\n=6e4s\n-----END PGP SIGNATURE-----\n", "payload": "tree 5c9f4524103a4582d8ccff34717920db9618d666\nparent 0faf5e0451e8eefd00e21c383c528a5f827d5e42\nparent 97623bf0516f9f852a18017d02af08011bea1da9\nauthor Yuki Okushi <jtitor@2k36.org> 1627036065 +0900\ncommitter GitHub <noreply@github.com> 1627036065 +0900\n\nRollup merge of #87332 - camelid:dont-hide-fields, r=GuillaumeGomez\n\nDon't hide fields of enum struct variants\n\n* The toggle adds visual clutter\n* It's easy to miss that there are fields\n* Tuple variant fields are always shown, so it is inconsistent to hide\n  struct variant fields\n* It's annoying to have to click the toggle every time\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/377bb7398902f1c6347f7344e35de08ceda9ec78", "html_url": "https://github.com/rust-lang/rust/commit/377bb7398902f1c6347f7344e35de08ceda9ec78", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/377bb7398902f1c6347f7344e35de08ceda9ec78/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0faf5e0451e8eefd00e21c383c528a5f827d5e42", "url": "https://api.github.com/repos/rust-lang/rust/commits/0faf5e0451e8eefd00e21c383c528a5f827d5e42", "html_url": "https://github.com/rust-lang/rust/commit/0faf5e0451e8eefd00e21c383c528a5f827d5e42"}, {"sha": "97623bf0516f9f852a18017d02af08011bea1da9", "url": "https://api.github.com/repos/rust-lang/rust/commits/97623bf0516f9f852a18017d02af08011bea1da9", "html_url": "https://github.com/rust-lang/rust/commit/97623bf0516f9f852a18017d02af08011bea1da9"}], "stats": {"total": 13, "additions": 4, "deletions": 9}, "files": [{"sha": "2dfbaff1cc9954448152437f92a79ca44e66f17c", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=377bb7398902f1c6347f7344e35de08ceda9ec78", "patch": "@@ -1029,14 +1029,12 @@ fn item_enum(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, e: &clean::Enum\n \n             use crate::clean::Variant;\n             if let clean::VariantItem(Variant::Struct(ref s)) = *variant.kind {\n-                let count_fields = s.fields.len();\n-                toggle_open(w, format_args!(\"{} field{}\", count_fields, pluralize(count_fields)));\n                 let variant_id = cx.derive_id(format!(\n                     \"{}.{}.fields\",\n                     ItemType::Variant,\n                     variant.name.as_ref().unwrap()\n                 ));\n-                write!(w, \"<div class=\\\"autohide sub-variant\\\" id=\\\"{id}\\\">\", id = variant_id);\n+                write!(w, \"<div class=\\\"sub-variant\\\" id=\\\"{id}\\\">\", id = variant_id);\n                 write!(\n                     w,\n                     \"<h3>Fields of <b>{name}</b></h3><div>\",\n@@ -1064,7 +1062,6 @@ fn item_enum(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, e: &clean::Enum\n                     }\n                 }\n                 w.write_str(\"</div></div>\");\n-                toggle_close(w);\n             }\n         }\n     }"}, {"sha": "f86aa06a1aad76b1cc8b06e5795ab59a547d3bc6", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=377bb7398902f1c6347f7344e35de08ceda9ec78", "patch": "@@ -1072,7 +1072,7 @@ a.test-arrow:hover{\n \tpadding-top: 1px;\n }\n \n-#main > details > .sub-variant > h3 {\n+#main .sub-variant > h3 {\n \tfont-size: 15px;\n \tmargin-left: 25px;\n \tmargin-bottom: 5px;"}, {"sha": "8d2046591d08ac42244212c68e20a691d754a17c", "filename": "src/test/rustdoc/toggle-item-contents.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/377bb7398902f1c6347f7344e35de08ceda9ec78/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs?ref=377bb7398902f1c6347f7344e35de08ceda9ec78", "patch": "@@ -62,8 +62,7 @@ pub struct PrivStruct {\n }\n \n // @has 'toggle_item_contents/enum.Enum.html'\n-// @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 1\n-// @has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 'Show 2 fields'\n+// @!has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]'\n pub enum Enum {\n     A, B, C,\n     D {\n@@ -73,8 +72,7 @@ pub enum Enum {\n }\n \n // @has 'toggle_item_contents/enum.EnumStructVariant.html'\n-// @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 1\n-// @has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 'Show 1 field'\n+// @!has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]'\n pub enum EnumStructVariant {\n     A, B, C,\n     D {"}]}