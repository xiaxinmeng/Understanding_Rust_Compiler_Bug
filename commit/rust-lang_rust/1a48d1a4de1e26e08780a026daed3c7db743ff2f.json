{"sha": "1a48d1a4de1e26e08780a026daed3c7db743ff2f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhNDhkMWE0ZGUxZTI2ZTA4NzgwYTAyNmRhZWQzYzdkYjc0M2ZmMmY=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-05-20T08:42:18Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-08-05T21:08:29Z"}, "message": "Add documentation and FIXME", "tree": {"sha": "83b0f6024f96e0541d7738153c6daf9375c37266", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83b0f6024f96e0541d7738153c6daf9375c37266"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a48d1a4de1e26e08780a026daed3c7db743ff2f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a48d1a4de1e26e08780a026daed3c7db743ff2f", "html_url": "https://github.com/rust-lang/rust/commit/1a48d1a4de1e26e08780a026daed3c7db743ff2f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a48d1a4de1e26e08780a026daed3c7db743ff2f/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b336f2801c1d458990b7122bc4eba126beea37f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/b336f2801c1d458990b7122bc4eba126beea37f9", "html_url": "https://github.com/rust-lang/rust/commit/b336f2801c1d458990b7122bc4eba126beea37f9"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "e168e41b832a667380e08a2fded197c56fa13389", "filename": "src/librustdoc/html/render/span_map.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1a48d1a4de1e26e08780a026daed3c7db743ff2f/src%2Flibrustdoc%2Fhtml%2Frender%2Fspan_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a48d1a4de1e26e08780a026daed3c7db743ff2f/src%2Flibrustdoc%2Fhtml%2Frender%2Fspan_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fspan_map.rs?ref=1a48d1a4de1e26e08780a026daed3c7db743ff2f", "patch": "@@ -97,16 +97,20 @@ struct SpanMapVisitor<'tcx> {\n }\n \n impl<'tcx> SpanMapVisitor<'tcx> {\n-    fn handle_path(&mut self, path: &rustc_hir::Path<'_>, path_span: Option<Span>) -> bool {\n+    /// This function is where we handle `hir::Path` elements and add them into the \"span map\".\n+    fn handle_path(&mut self, path: &rustc_hir::Path<'_>, path_span: Option<Span>) {\n         let info = match path.res {\n+            // FIXME: For now, we only handle `DefKind` if it's not `DefKind::TyParam` or\n+            // `DefKind::Macro`. Would be nice to support them too alongside the other `DefKind`\n+            // (such as primitive types!).\n             Res::Def(kind, def_id) if kind != DefKind::TyParam => {\n                 if matches!(kind, DefKind::Macro(_)) {\n-                    return false;\n+                    return;\n                 }\n                 Some(def_id)\n             }\n             Res::Local(_) => None,\n-            _ => return true,\n+            _ => return,\n         };\n         if let Some(span) = self.tcx.hir().res_span(path.res) {\n             self.matches.insert(\n@@ -123,7 +127,6 @@ impl<'tcx> SpanMapVisitor<'tcx> {\n                 LinkFromSrc::External(def_id),\n             );\n         }\n-        true\n     }\n }\n "}]}