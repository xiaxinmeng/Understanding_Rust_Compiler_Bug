{"sha": "73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczZGQ4NzBkYTJkY2M5OTFiMGZkY2RkZThiZWU5MWYwNWNiOWUxODI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-10-20T15:43:02Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-10-20T15:43:02Z"}, "message": "update salsa", "tree": {"sha": "611f4bb8433c733a3e6c3c74779d79366a2ccc81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/611f4bb8433c733a3e6c3c74779d79366a2ccc81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "html_url": "https://github.com/rust-lang/rust/commit/73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ded93a78a108c1f7e0dd0a9036c88c786f21dce", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ded93a78a108c1f7e0dd0a9036c88c786f21dce", "html_url": "https://github.com/rust-lang/rust/commit/2ded93a78a108c1f7e0dd0a9036c88c786f21dce"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "bb0feec2edfdbce91594821da79a3bf0f2f87e5b", "filename": "Cargo.lock", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "patch": "@@ -620,7 +620,7 @@ dependencies = [\n  \"rayon 1.0.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"relative-path 0.3.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-hash 1.0.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"salsa 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"salsa 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"test_utils 0.1.0\",\n ]\n \n@@ -845,7 +845,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"salsa\"\n-version = \"0.5.0\"\n+version = \"0.6.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"derive-new 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1361,7 +1361,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"138e3e0acb6c9fb258b19b67cb8abd63c00679d2851805ea151465464fe9030a\"\n \"checksum ryu 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7153dd96dade874ab973e098cb62fcdbb89a03682e46b144fd09550998d4a4a7\"\n \"checksum safemem 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8dca453248a96cb0749e36ccdfe2b0b4e54a61bfef89fb97ec621eb8e0a93dd9\"\n-\"checksum salsa 0.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"8301c563959d6d50fe0a34817f0d9ff08fe12eda7456e01e2bbde1588ea30602\"\n+\"checksum salsa 0.6.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"6c8f8b59428c040fbac0f6a2e698ae892e33d23d7519713ba8b243edb3082dad\"\n \"checksum same-file 1.0.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"10f7794e2fda7f594866840e95f5c5962e886e228e68b6505885811a94dd728c\"\n \"checksum scopeguard 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"94258f53601af11e6a49f722422f6e3425c52b06245a5cf9bc09908b174f5e27\"\n \"checksum semver 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"1d7eb9ef2c18661902cc47e535f9bc51b78acd254da71d375c2f6720d9a40403\""}, {"sha": "dd4ec83752d035e61b76889643431ffcd01245f7", "filename": "crates/ra_analysis/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2FCargo.toml?ref=73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "patch": "@@ -15,7 +15,7 @@ fst = \"0.3.1\"\n im = \"12.0.0\"\n ra_syntax = { path = \"../ra_syntax\" }\n ra_editor = { path = \"../ra_editor\" }\n-salsa = \"0.5.0\"\n+salsa = \"0.6.0\"\n rustc-hash = \"1.0\"\n \n [dev-dependencies]"}, {"sha": "cce9596696cb8599374e695c8e4f7ddfa2465e51", "filename": "crates/ra_analysis/src/db.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fdb.rs?ref=73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "patch": "@@ -16,7 +16,7 @@ use std::{\n \n #[derive(Default)]\n pub(crate) struct RootDatabase {\n-    runtime: salsa::runtime::Runtime<RootDatabase>,\n+    runtime: salsa::Runtime<RootDatabase>,\n }\n \n impl fmt::Debug for RootDatabase {\n@@ -26,7 +26,7 @@ impl fmt::Debug for RootDatabase {\n }\n \n impl salsa::Database for RootDatabase {\n-    fn salsa_runtime(&self) -> &salsa::runtime::Runtime<RootDatabase> {\n+    fn salsa_runtime(&self) -> &salsa::Runtime<RootDatabase> {\n         &self.runtime\n     }\n }\n@@ -69,7 +69,7 @@ salsa::query_group! {\n             type FileTextQuery;\n             storage input;\n         }\n-        fn file_set(key: ()) -> Arc<FileSet> {\n+        fn file_set() -> Arc<FileSet> {\n             type FileSetQuery;\n             storage input;\n         }"}, {"sha": "b15432498caafef98cb2e49722536a1acea77fbe", "filename": "crates/ra_analysis/src/module_map.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Fmodule_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Fmodule_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fmodule_map.rs?ref=73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "patch": "@@ -8,7 +8,7 @@ use std::sync::Arc;\n \n salsa::query_group! {\n     pub(crate) trait ModulesDatabase: SyntaxDatabase {\n-        fn module_tree(key: ()) -> Arc<ModuleTreeDescriptor> {\n+        fn module_tree() -> Arc<ModuleTreeDescriptor> {\n             type ModuleTreeQuery;\n         }\n         fn module_descriptor(file_id: FileId) -> Arc<ModuleDescriptor> {\n@@ -22,8 +22,8 @@ fn module_descriptor(db: &impl ModulesDatabase, file_id: FileId) -> Arc<ModuleDe\n     Arc::new(ModuleDescriptor::new(file.ast()))\n }\n \n-fn module_tree(db: &impl ModulesDatabase, (): ()) -> Arc<ModuleTreeDescriptor> {\n-    let file_set = db.file_set(());\n+fn module_tree(db: &impl ModulesDatabase) -> Arc<ModuleTreeDescriptor> {\n+    let file_set = db.file_set();\n     let mut files = Vec::new();\n     for &file_id in file_set.files.iter() {\n         let module_descr = db.module_descriptor(file_id);"}, {"sha": "19c84df65a3e60ee6304c4c8c3743238b7f7fca4", "filename": "crates/ra_analysis/src/roots.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Froots.rs", "raw_url": "https://github.com/rust-lang/rust/raw/73dd870da2dcc991b0fdcdde8bee91f05cb9e182/crates%2Fra_analysis%2Fsrc%2Froots.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Froots.rs?ref=73dd870da2dcc991b0fdcdde8bee91f05cb9e182", "patch": "@@ -50,7 +50,7 @@ impl WritableSourceRoot {\n                 }\n             }\n         }\n-        let file_set = self.db.file_set(());\n+        let file_set = self.db.file_set();\n         let mut files: FxHashSet<FileId> = file_set.files.clone();\n         for file_id in removed {\n             files.remove(&file_id);\n@@ -65,10 +65,10 @@ impl WritableSourceRoot {\n \n impl SourceRoot for WritableSourceRoot {\n     fn module_tree(&self) -> Arc<ModuleTreeDescriptor> {\n-        self.db.module_tree(())\n+        self.db.module_tree()\n     }\n     fn contains(&self, file_id: FileId) -> bool {\n-        self.db.file_set(()).files.contains(&file_id)\n+        self.db.file_set().files.contains(&file_id)\n     }\n     fn lines(&self, file_id: FileId) -> Arc<LineIndex> {\n         self.db.file_lines(file_id)\n@@ -78,7 +78,7 @@ impl SourceRoot for WritableSourceRoot {\n     }\n     fn symbols<'a>(&'a self, acc: &mut Vec<Arc<SymbolIndex>>) {\n         let db = &self.db;\n-        let symbols = db.file_set(());\n+        let symbols = db.file_set();\n         let symbols = symbols\n             .files\n             .iter()"}]}