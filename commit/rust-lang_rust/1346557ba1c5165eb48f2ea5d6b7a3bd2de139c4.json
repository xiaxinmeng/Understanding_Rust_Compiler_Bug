{"sha": "1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzNDY1NTdiYTFjNTE2NWViNDhmMmVhNWQ2YjdhM2JkMmRlMTM5YzQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-20T11:58:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-20T11:58:32Z"}, "message": "Rollup merge of #66532 - cuviper:dwarf-aranges, r=michaelwoerister\n\nGenerate DWARF address ranges for faster lookups\n\nThis adds a new option `-Zgenerate-arange-section`, enabled by default,\ncorresponding to LLVM's `-generate-arange-section`. This creates a\n`.debug_aranges` section with DWARF address ranges, which some tools\ndepend on to optimize address lookups (elfutils [22288], [25173]).\n\nThis only has effect when debuginfo is enabled, and the additional data\nis small compared to the other debug sections. For example, libstd.so\nwith full debuginfo is about 11MB, with just 61kB in aranges.\n\n[22288]: https://sourceware.org/bugzilla/show_bug.cgi?id=22288\n[25173]: https://sourceware.org/bugzilla/show_bug.cgi?id=25173\n\nCloses #45246.\nr? @michaelwoerister", "tree": {"sha": "61ffbb074b39ff659b13147eb8cd3dafa937b9ad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/61ffbb074b39ff659b13147eb8cd3dafa937b9ad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJd1SpoCRBK7hj4Ov3rIwAAdHIIAH1rflbNGMS+CL+HhjhevnEJ\nyS4B12ujdPVUo+wSIybaoYPp/gEoJzgbSBHNm/6NkAe9hdaM5DnGCHb1MQ0KWsIh\nAkMM0GmjpeaurWEEk44vPbqNXJPOC1NR763chhf3/BNyA6Ele/L7CHQnuiyCZ1d5\nHFU2+s8GTm9p1tfZTJ6W2n++dmQXZTtl6Zr2bBdR9/PD0+IiDQPDeC2vJtInQVae\n4R04D2PNlE3PiSiF3kvbvwD8hkxc9KDaPHZfM8153AjGLTWejbgIAOenkDQJKUKc\n7oU+I6oMoNvXjU5XW5w8tsn/aBFc63B1JLDpAhhX5sEP3r3ExS6hOqXfPFwpJ5Y=\n=+aqe\n-----END PGP SIGNATURE-----\n", "payload": "tree 61ffbb074b39ff659b13147eb8cd3dafa937b9ad\nparent 0a0d07a1fc712241ea9215a621d3f4fa9162ee20\nparent 4c2f1c802c4d582891a8e079949889d2462bbfd2\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1574251112 +0100\ncommitter GitHub <noreply@github.com> 1574251112 +0100\n\nRollup merge of #66532 - cuviper:dwarf-aranges, r=michaelwoerister\n\nGenerate DWARF address ranges for faster lookups\n\nThis adds a new option `-Zgenerate-arange-section`, enabled by default,\ncorresponding to LLVM's `-generate-arange-section`. This creates a\n`.debug_aranges` section with DWARF address ranges, which some tools\ndepend on to optimize address lookups (elfutils [22288], [25173]).\n\nThis only has effect when debuginfo is enabled, and the additional data\nis small compared to the other debug sections. For example, libstd.so\nwith full debuginfo is about 11MB, with just 61kB in aranges.\n\n[22288]: https://sourceware.org/bugzilla/show_bug.cgi?id=22288\n[25173]: https://sourceware.org/bugzilla/show_bug.cgi?id=25173\n\nCloses #45246.\nr? @michaelwoerister\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "html_url": "https://github.com/rust-lang/rust/commit/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a0d07a1fc712241ea9215a621d3f4fa9162ee20", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a0d07a1fc712241ea9215a621d3f4fa9162ee20", "html_url": "https://github.com/rust-lang/rust/commit/0a0d07a1fc712241ea9215a621d3f4fa9162ee20"}, {"sha": "4c2f1c802c4d582891a8e079949889d2462bbfd2", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c2f1c802c4d582891a8e079949889d2462bbfd2", "html_url": "https://github.com/rust-lang/rust/commit/4c2f1c802c4d582891a8e079949889d2462bbfd2"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "b9b6a5f2342e25ed46564966b02b50264397e6e2", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "patch": "@@ -1331,6 +1331,8 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         \"for every macro invocation, print its name and arguments\"),\n     debug_macros: bool = (false, parse_bool, [TRACKED],\n         \"emit line numbers debug info inside macros\"),\n+    generate_arange_section: bool = (true, parse_bool, [TRACKED],\n+        \"generate DWARF address ranges for faster lookups\"),\n     keep_hygiene_data: bool = (false, parse_bool, [UNTRACKED],\n         \"don't clear the hygiene data after analysis\"),\n     keep_ast: bool = (false, parse_bool, [UNTRACKED],"}, {"sha": "290ca40926104c5cc2a2635bf4f0f595cfbbc2b2", "filename": "src/librustc_codegen_llvm/llvm_util.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fllvm_util.rs?ref=1346557ba1c5165eb48f2ea5d6b7a3bd2de139c4", "patch": "@@ -62,6 +62,9 @@ unsafe fn configure_llvm(sess: &Session) {\n         if sess.opts.debugging_opts.disable_instrumentation_preinliner {\n             add(\"-disable-preinline\");\n         }\n+        if sess.opts.debugging_opts.generate_arange_section {\n+            add(\"-generate-arange-section\");\n+        }\n         if get_major_version() >= 8 {\n             match sess.opts.debugging_opts.merge_functions\n                   .unwrap_or(sess.target.target.options.merge_functions) {"}]}