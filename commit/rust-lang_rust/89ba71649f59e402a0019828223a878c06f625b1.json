{"sha": "89ba71649f59e402a0019828223a878c06f625b1", "node_id": "C_kwDOAAsO6NoAKDg5YmE3MTY0OWY1OWU0MDJhMDAxOTgyODIyM2E4NzhjMDZmNjI1YjE", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-09T01:00:22Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-12T00:27:03Z"}, "message": "rustdoc: use consistent \"popover\" styling for notable traits", "tree": {"sha": "835306a9d4c20d0768e10b949e25006519e96a95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/835306a9d4c20d0768e10b949e25006519e96a95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89ba71649f59e402a0019828223a878c06f625b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89ba71649f59e402a0019828223a878c06f625b1", "html_url": "https://github.com/rust-lang/rust/commit/89ba71649f59e402a0019828223a878c06f625b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89ba71649f59e402a0019828223a878c06f625b1/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42325c525b9d3885847a3f803abe53c562d289da", "url": "https://api.github.com/repos/rust-lang/rust/commits/42325c525b9d3885847a3f803abe53c562d289da", "html_url": "https://github.com/rust-lang/rust/commit/42325c525b9d3885847a3f803abe53c562d289da"}], "stats": {"total": 204, "additions": 89, "deletions": 115}, "files": [{"sha": "75fdd6ade235f43336274df6b526ac1586edef04", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -1312,9 +1312,7 @@ pub(crate) fn notable_traits_button(ty: &clean::Type, cx: &mut Context<'_>) -> O\n     if has_notable_trait {\n         cx.types_with_notable_traits.insert(ty.clone());\n         Some(format!(\n-            \"<span class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\\\n-                <span class=\\\"notable-traits-tooltip\\\">\u24d8</span>\\\n-            </span>\",\n+            \" <a href=\\\"#\\\" class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\u24d8</a>\",\n             ty = Escape(&format!(\"{:#}\", ty.print(cx))),\n         ))\n     } else {\n@@ -1343,7 +1341,7 @@ fn notable_traits_decl(ty: &clean::Type, cx: &Context<'_>) -> (String, String) {\n                 if out.is_empty() {\n                     write!(\n                         &mut out,\n-                        \"<h3 class=\\\"notable\\\">Notable traits for <code>{}</code></h3>\\\n+                        \"<h3>Notable traits for <code>{}</code></h3>\\\n                      <pre class=\\\"content\\\"><code>\",\n                         impl_.for_.print(cx)\n                     );"}, {"sha": "1209187dc48174a9df08521233d9f1e424f5d35f", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 19, "deletions": 54, "changes": 73, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -183,8 +183,6 @@ h4.code-header {\n \tfont-weight: 600;\n \tmargin: 0;\n \tpadding: 0;\n-\t/* position notable traits in mobile mode within the header */\n-\tposition: relative;\n }\n \n #crate-search,\n@@ -930,13 +928,14 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tborder-radius: 3px;\n \tborder: 1px solid var(--border-color);\n \tfont-size: 1rem;\n+\t--popover-arrow-offset: 11px;\n }\n \n /* This rule is to draw the little arrow connecting the settings menu to the gear icon. */\n .popover::before {\n \tcontent: '';\n \tposition: absolute;\n-\tright: 11px;\n+\tright: var(--popover-arrow-offset);\n \tborder: solid var(--border-color);\n \tborder-width: 1px 1px 0 0;\n \tdisplay: inline-block;\n@@ -953,10 +952,7 @@ so that we can apply CSS-filters to change the arrow color in themes */\n /* use larger max-width for help popover, but not for help.html */\n #help.popover {\n \tmax-width: 600px;\n-}\n-\n-#help.popover::before {\n-\tright: 48px;\n+\t--popover-arrow-offset: 48px;\n }\n \n #help dt {\n@@ -1275,54 +1271,34 @@ h3.variant {\n \tborder-right: 3px solid var(--target-border-color);\n }\n \n-.notable-traits-tooltip {\n-\tdisplay: inline-block;\n-\tcursor: pointer;\n-}\n-\n-.notable-traits .notable-traits-tooltiptext {\n-\tdisplay: inline-block;\n-\tvisibility: hidden;\n+.notable-traits {\n+\tcolor: inherit;\n+\tmargin-right: 15px;\n+\tposition: relative;\n }\n \n-.notable-traits-tooltiptext {\n-\tpadding: 5px 3px 3px 3px;\n-\tborder-radius: 6px;\n-\tmargin-left: 5px;\n-\tz-index: 10;\n-\tfont-size: 1rem;\n-\tcursor: default;\n+/* placeholder thunk so that the mouse can easily travel from \"(i)\" to popover\n+\tthe resulting \"hover tunnel\" is a stepped triangle, approximating\n+\thttps://bjk5.com/post/44698559168/breaking-down-amazons-mega-dropdown */\n+.notable-traits:hover::after {\n \tposition: absolute;\n-\tborder: 1px solid;\n-}\n-\n-.notable-traits-tooltip::after {\n-\t/* The margin on the tooltip does not capture hover events,\n-\t   this extends the area of hover enough so that mouse hover is not\n-\t   lost when moving the mouse to the tooltip */\n-\tcontent: \"\\00a0\\00a0\\00a0\";\n-}\n-\n-.notable-traits-tooltiptext .docblock {\n-\tmargin: 0;\n+\ttop: calc(100% - 10px);\n+\tleft: -15px;\n+\tright: -15px;\n+\theight: 20px;\n+\tcontent: \"\\00a0\";\n }\n \n-.notable-traits-tooltiptext .notable {\n-\tfont-size: 1.1875rem;\n-\tfont-weight: 600;\n-\tdisplay: block;\n+.notable .docblock {\n+\tmargin: 0.25em 0.5em;\n }\n \n-.notable-traits-tooltiptext pre, .notable-traits-tooltiptext code {\n+.notable .docblock pre, .notable .docblock code {\n \tbackground: transparent;\n-}\n-\n-.notable-traits-tooltiptext .docblock pre.content {\n \tmargin: 0;\n \tpadding: 0;\n \tfont-size: 1.25rem;\n \twhite-space: pre-wrap;\n-\toverflow: hidden;\n }\n \n .search-failed {\n@@ -1365,12 +1341,6 @@ h3.variant {\n \tfont-size: 1rem;\n }\n \n-.notable-traits {\n-\tcursor: pointer;\n-\tz-index: 2;\n-\tmargin-left: 5px;\n-}\n-\n #sidebar-toggle {\n \tposition: sticky;\n \ttop: 0;\n@@ -1855,11 +1825,6 @@ in storage.js\n \t\tborder-bottom: 1px solid;\n \t}\n \n-\t.notable-traits .notable-traits-tooltiptext {\n-\t\tleft: 0;\n-\t\ttop: 100%;\n-\t}\n-\n \t/* We don't display the help button on mobile devices. */\n \t#help-button {\n \t\tdisplay: none;"}, {"sha": "eec3ce55e22f9e52e9cd7a42c1bc73cdf707ecd2", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -183,10 +183,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent #314559 transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #314559;\n-}\n-\n #titles > button.selected {\n \tbackground-color: #141920 !important;\n \tborder-bottom: 1px solid #ffb44c !important;"}, {"sha": "a93d9d6790a173c46d5819f8db60eeb7b6b3df23", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -106,10 +106,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #111;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #252525;\n \tborder-top-color: #252525;"}, {"sha": "e69ae5abbc393047d02695f8c780809d56678fa4", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -98,10 +98,6 @@ body.source .example-wrap pre.rust a {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #eee;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #e6e6e6;\n \tborder-top-color: #e6e6e6;"}, {"sha": "b670ea3f0201d2ae669e172fb8ffdcf3efc8f32c", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 43, "deletions": 9, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -850,18 +850,33 @@ function loadCss(cssUrl) {\n         }\n         hideNotable();\n         const ty = e.getAttribute(\"data-ty\");\n-        const tooltip = e.getElementsByClassName(\"notable-traits-tooltip\")[0];\n         const wrapper = document.createElement(\"div\");\n         wrapper.innerHTML = \"<div class=\\\"docblock\\\">\" + window.NOTABLE_TRAITS[ty] + \"</div>\";\n-        wrapper.className = \"notable-traits-tooltiptext\";\n-        tooltip.appendChild(wrapper);\n-        const pos = wrapper.getBoundingClientRect();\n-        tooltip.removeChild(wrapper);\n-        wrapper.style.top = (pos.top + window.scrollY) + \"px\";\n-        wrapper.style.left = (pos.left + window.scrollX) + \"px\";\n-        wrapper.style.width = pos.width + \"px\";\n+        wrapper.className = \"notable popover\";\n+        const focusCatcher = document.createElement(\"div\");\n+        focusCatcher.setAttribute(\"tabindex\", \"0\");\n+        focusCatcher.onfocus = hideNotable;\n+        wrapper.appendChild(focusCatcher);\n+        const pos = e.getBoundingClientRect();\n+        // 5px overlap so that the mouse can easily travel from place to place\n+        wrapper.style.top = (pos.top + window.scrollY + pos.height) + \"px\";\n+        wrapper.style.left = 0;\n+        wrapper.style.right = \"auto\";\n+        wrapper.style.visibility = \"hidden\";\n         const body = document.getElementsByTagName(\"body\")[0];\n         body.appendChild(wrapper);\n+        const wrapperPos = wrapper.getBoundingClientRect();\n+        // offset so that the arrow points at the center of the \"(i)\"\n+        const finalPos = pos.left + window.scrollX - wrapperPos.width + 24;\n+        if (finalPos > 0) {\n+            wrapper.style.left = finalPos + \"px\";\n+        } else {\n+            wrapper.style.setProperty(\n+                \"--popover-arrow-offset\",\n+                (wrapperPos.right - pos.right + 4) + \"px\"\n+            );\n+        }\n+        wrapper.style.visibility = \"\";\n         window.CURRENT_NOTABLE_ELEMENT = wrapper;\n         window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE = e;\n         wrapper.onpointerleave = function(ev) {\n@@ -875,9 +890,23 @@ function loadCss(cssUrl) {\n         };\n     }\n \n+    function notableBlurHandler(event) {\n+        if (window.CURRENT_NOTABLE_ELEMENT &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE)\n+        ) {\n+            hideNotable();\n+        }\n+    }\n+\n     function hideNotable() {\n         if (window.CURRENT_NOTABLE_ELEMENT) {\n-            window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            if (window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE) {\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            }\n             const body = document.getElementsByTagName(\"body\")[0];\n             body.removeChild(window.CURRENT_NOTABLE_ELEMENT);\n             window.CURRENT_NOTABLE_ELEMENT = null;\n@@ -891,7 +920,11 @@ function loadCss(cssUrl) {\n                 hideNotable();\n             } else {\n                 showNotable(this);\n+                window.CURRENT_NOTABLE_ELEMENT.setAttribute(\"tabindex\", \"0\");\n+                window.CURRENT_NOTABLE_ELEMENT.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.onblur = notableBlurHandler;\n             }\n+            return false;\n         };\n         e.onpointerenter = function(ev) {\n             // If this is a synthetic touch event, ignore it. A click event will be along shortly.\n@@ -1018,6 +1051,7 @@ function loadCss(cssUrl) {\n         onEachLazy(document.querySelectorAll(\".search-form .popover\"), elem => {\n             elem.style.display = \"none\";\n         });\n+        hideNotable();\n     };\n \n     /**"}, {"sha": "3bc1c5365e9e1dd793db1f1434cc4f72a72067b0", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 25, "deletions": 36, "changes": 61, "blob_url": "https://github.com/rust-lang/rust/blob/89ba71649f59e402a0019828223a878c06f625b1/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/89ba71649f59e402a0019828223a878c06f625b1/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=89ba71649f59e402a0019828223a878c06f625b1", "patch": "@@ -22,31 +22,26 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 951},\n+    {\"x\": 955},\n )\n-// The tooltip should be beside the `i`\n+// The tooltip should be below the `i`\n // Also, clicking the tooltip should bring its text into the DOM\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n+assert-count: (\"//*[@class='notable popover']\", 1)\n compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n-)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Now only the `i` should be on the next line.\n size: (1055, 600)\n@@ -77,7 +72,7 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 519},\n+    {\"x\": 523},\n )\n \n // Checking on mobile now.\n@@ -101,34 +96,28 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 289},\n+    {\"x\": 293},\n )\n-// The tooltip should be below `i`\n+// The tooltip should STILL be below `i`\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n-compare-elements-position-near-false: (\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-compare-elements-position-near: (\n-    \"//*[@id='method.create_an_iterator_from_read']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"x\": 10}\n-)\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n+assert-position: (\n+    \"//*[@class='notable popover']\",\n+    {\"x\": 0}\n )\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Checking on very small mobile. The `i` should be on its own line.\n size: (365, 600)\n@@ -153,25 +142,25 @@ define-function: (\n         (\"reload\"),\n \n         (\"move-cursor-to\", \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"),\n-        (\"assert-count\", (\".notable-traits-tooltiptext\", 1)),\n+        (\"assert-count\", (\".notable.popover\", 1)),\n \n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext h3.notable\",\n+             \".notable.popover h3\",\n              {\"color\": |header_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content\",\n+             \".notable.popover pre\",\n              {\"color\": |content_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.struct\",\n+             \".notable.popover pre a.struct\",\n              {\"color\": |type_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.trait\",\n+             \".notable.popover pre a.trait\",\n              {\"color\": |trait_color|},\n              ALL,\n         )),"}]}