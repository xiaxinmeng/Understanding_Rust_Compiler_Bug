{"sha": "4029e4410245eeb2e1f58adefad1d4cc24898579", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwMjllNDQxMDI0NWVlYjJlMWY1OGFkZWZhZDFkNGNjMjQ4OTg1Nzk=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-01-22T14:44:05Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-01-22T14:55:09Z"}, "message": "Omit default parameters for reference types", "tree": {"sha": "96de0273a72ddf6a434a82e9db72df942cf1c51c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96de0273a72ddf6a434a82e9db72df942cf1c51c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4029e4410245eeb2e1f58adefad1d4cc24898579", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4029e4410245eeb2e1f58adefad1d4cc24898579", "html_url": "https://github.com/rust-lang/rust/commit/4029e4410245eeb2e1f58adefad1d4cc24898579", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4029e4410245eeb2e1f58adefad1d4cc24898579/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a5407ddc05826b208ed8a0026b2ae566bf0a8b70", "url": "https://api.github.com/repos/rust-lang/rust/commits/a5407ddc05826b208ed8a0026b2ae566bf0a8b70", "html_url": "https://github.com/rust-lang/rust/commit/a5407ddc05826b208ed8a0026b2ae566bf0a8b70"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "d1ff85f0f2e7c6b6ce96035651a266646d833ba2", "filename": "crates/ra_hir_ty/src/display.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Fdisplay.rs?ref=4029e4410245eeb2e1f58adefad1d4cc24898579", "patch": "@@ -9,7 +9,7 @@ pub struct HirFormatter<'a, 'b, DB> {\n     fmt: &'a mut fmt::Formatter<'b>,\n     buf: String,\n     curr_size: usize,\n-    max_size: Option<usize>,\n+    pub(crate) max_size: Option<usize>,\n     omit_verbose_types: bool,\n }\n "}, {"sha": "908e4862d62ce81fb1394535807ba69bec4418fa", "filename": "crates/ra_hir_ty/src/lib.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_hir_ty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Flib.rs?ref=4029e4410245eeb2e1f58adefad1d4cc24898579", "patch": "@@ -855,7 +855,12 @@ impl HirDisplay for ApplicationTy {\n             }\n             TypeCtor::Ref(m) => {\n                 let t = self.parameters.as_single();\n-                write!(f, \"&{}{}\", m.as_keyword_for_ref(), t.display(f.db))?;\n+                let ty_display = if f.omit_verbose_types() {\n+                    t.display_truncated(f.db, f.max_size)\n+                } else {\n+                    t.display(f.db)\n+                };\n+                write!(f, \"&{}{}\", m.as_keyword_for_ref(), ty_display)?;\n             }\n             TypeCtor::Never => write!(f, \"!\")?,\n             TypeCtor::Tuple { .. } => {"}, {"sha": "393ca9447d6824f6de53bcb5639de9a482ec87e7", "filename": "crates/ra_ide/src/inlay_hints.rs", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4029e4410245eeb2e1f58adefad1d4cc24898579/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Finlay_hints.rs?ref=4029e4410245eeb2e1f58adefad1d4cc24898579", "patch": "@@ -245,6 +245,7 @@ struct Test<K, T = u8> {\n \n fn main() {\n     let zz = Test { t: 23, k: 33 };\n+    let zz_ref = &zz;\n }\"#,\n         );\n \n@@ -255,6 +256,11 @@ fn main() {\n                 kind: TypeHint,\n                 label: \"Test<i32>\",\n             },\n+            InlayHint {\n+                range: [105; 111),\n+                kind: TypeHint,\n+                label: \"&Test<i32>\",\n+            },\n         ]\n         \"###\n         );\n@@ -374,6 +380,7 @@ fn main() {\n \n     let multiply = |a, b, c, d| a * b * c * d;\n     let _: i32 = multiply(1, 2, 3, 4);\n+    let multiply_ref = &multiply;\n \n     let return_42 = || 42;\n }\"#,\n@@ -417,7 +424,12 @@ fn main() {\n                 label: \"i32\",\n             },\n             InlayHint {\n-                range: [201; 210),\n+                range: [200; 212),\n+                kind: TypeHint,\n+                label: \"&|\u2026| -> i32\",\n+            },\n+            InlayHint {\n+                range: [235; 244),\n                 kind: TypeHint,\n                 label: \"|| -> i32\",\n             },"}]}