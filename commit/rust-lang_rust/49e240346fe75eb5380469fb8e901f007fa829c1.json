{"sha": "49e240346fe75eb5380469fb8e901f007fa829c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5ZTI0MDM0NmZlNzVlYjUzODA0NjlmYjhlOTAxZjAwN2ZhODI5YzE=", "commit": {"author": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-11-05T13:17:05Z"}, "committer": {"name": "David Wood", "email": "david@davidtw.co", "date": "2019-11-05T13:17:05Z"}, "message": "libstd: allow `improper_ctypes` in `sys/sgx`\n\nSigned-off-by: David Wood <david@davidtw.co>", "tree": {"sha": "825c7524647d3b027b07a93c698ac31a5320296c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/825c7524647d3b027b07a93c698ac31a5320296c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49e240346fe75eb5380469fb8e901f007fa829c1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEfgm2/wUjk9OnjxlyJZLnbIc4H9kFAl3BdmkACgkQJZLnbIc4\nH9k05Q/+LB8dsk5rcen/vRlpDc4XHUqj/aBd/XIG8aaHhousX5OtmncJbReB08in\naP/4PcwwofNOHCAln5rG97J2Dz0q0YNzM5+cPM8iY5voKpAsVfHa2+09k3YRkRPX\npJ+xH59FmKNCaMc9sh6jHGD33k6ZSp4VmAljzDcyAEr0kIQNil4DC8nY/r5BAo7e\nTsdabuEyOJffn0VtwDDo4FX7safQJBEiU6NRJfFPrZI9jbAf8nftDSF1v+etu3hI\nXGl0394Xn8/lxF2HvRxucI+wt05AMHtMFfQUi6rS/S7tSfQseC/ujzmiXktDebQ0\nGuDjfwloDFuPTq6cmXHSrXFCJi9nygcxG8Vbjw7Ytp7l6gkRr6ui129rIST7Ek+w\nnm6n+y2WiTNxA0dVraEjDQ5FFIN9vP89ts+cXRmI313N2dUF6Ame9xDndDQm2lg2\njz/MjzegjVPgcM0Lsqr2XRHb2N9S1OrxRYigca5Zj36uvdEX7/BWTEZpDmv6dKx/\nZE6TP8Cy3GVtmzw0BCIg2446HM42d5ycoUKqg4XONAfzj/VlM5XaRT68kmIsePFN\nO2sjGfqgc1qQ5HvBn2TnfuR+acAUgzl0GWdsJ54CElZPOcWzov+EKohyiqVfTaWg\nnDR4AKOx3OpD63O7vzEKf5VyM4ndcP3PSjimIxPVGpfn2VmFPw4=\n=mVWb\n-----END PGP SIGNATURE-----", "payload": "tree 825c7524647d3b027b07a93c698ac31a5320296c\nparent 95c505d92a64ff86a081d108e33b4e4f1e70ebfb\nauthor David Wood <david@davidtw.co> 1572959825 +0000\ncommitter David Wood <david@davidtw.co> 1572959825 +0000\n\nlibstd: allow `improper_ctypes` in `sys/sgx`\n\nSigned-off-by: David Wood <david@davidtw.co>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49e240346fe75eb5380469fb8e901f007fa829c1", "html_url": "https://github.com/rust-lang/rust/commit/49e240346fe75eb5380469fb8e901f007fa829c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49e240346fe75eb5380469fb8e901f007fa829c1/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95c505d92a64ff86a081d108e33b4e4f1e70ebfb", "url": "https://api.github.com/repos/rust-lang/rust/commits/95c505d92a64ff86a081d108e33b4e4f1e70ebfb", "html_url": "https://github.com/rust-lang/rust/commit/95c505d92a64ff86a081d108e33b4e4f1e70ebfb"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "3a9b1fc86840c1c5fcb18fb0e59ee3e470bd902b", "filename": "src/libstd/sys/sgx/abi/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/49e240346fe75eb5380469fb8e901f007fa829c1/src%2Flibstd%2Fsys%2Fsgx%2Fabi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49e240346fe75eb5380469fb8e901f007fa829c1/src%2Flibstd%2Fsys%2Fsgx%2Fabi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fabi%2Fmod.rs?ref=49e240346fe75eb5380469fb8e901f007fa829c1", "patch": "@@ -53,6 +53,7 @@ unsafe extern \"C\" fn tcs_init(secondary: bool) {\n // (main function exists). If this is a library, the crate author should be\n // able to specify this\n #[cfg(not(test))]\n+#[allow(improper_ctypes)]\n #[no_mangle]\n extern \"C\" fn entry(p1: u64, p2: u64, p3: u64, secondary: bool, p4: u64, p5: u64) -> (u64, u64) {\n     // FIXME: how to support TLS in library mode?"}, {"sha": "c32e6dd3786692086003c743a9c968a3933e290c", "filename": "src/libstd/sys/sgx/rwlock.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49e240346fe75eb5380469fb8e901f007fa829c1/src%2Flibstd%2Fsys%2Fsgx%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49e240346fe75eb5380469fb8e901f007fa829c1/src%2Flibstd%2Fsys%2Fsgx%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Frwlock.rs?ref=49e240346fe75eb5380469fb8e901f007fa829c1", "patch": "@@ -172,6 +172,7 @@ const EINVAL: i32 = 22;\n \n #[cfg(not(test))]\n #[no_mangle]\n+#[allow(improper_ctypes)]\n pub unsafe extern \"C\" fn __rust_rwlock_rdlock(p: *mut RWLock) -> i32 {\n     if p.is_null() {\n         return EINVAL;\n@@ -181,6 +182,7 @@ pub unsafe extern \"C\" fn __rust_rwlock_rdlock(p: *mut RWLock) -> i32 {\n }\n \n #[cfg(not(test))]\n+#[allow(improper_ctypes)]\n #[no_mangle]\n pub unsafe extern \"C\" fn __rust_rwlock_wrlock(p: *mut RWLock) -> i32 {\n     if p.is_null() {\n@@ -190,6 +192,7 @@ pub unsafe extern \"C\" fn __rust_rwlock_wrlock(p: *mut RWLock) -> i32 {\n     return 0;\n }\n #[cfg(not(test))]\n+#[allow(improper_ctypes)]\n #[no_mangle]\n pub unsafe extern \"C\" fn __rust_rwlock_unlock(p: *mut RWLock) -> i32 {\n     if p.is_null() {"}]}