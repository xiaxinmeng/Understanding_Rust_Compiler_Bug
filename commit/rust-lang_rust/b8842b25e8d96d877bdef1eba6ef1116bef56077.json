{"sha": "b8842b25e8d96d877bdef1eba6ef1116bef56077", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI4ODQyYjI1ZThkOTZkODc3YmRlZjFlYmE2ZWYxMTE2YmVmNTYwNzc=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-10-21T08:44:48Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-10-21T08:44:48Z"}, "message": "yield a miri error instead of panicking on uninitialized statics", "tree": {"sha": "52aef1dd96b082119c1dbb9d6d58155b05187778", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/52aef1dd96b082119c1dbb9d6d58155b05187778"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b8842b25e8d96d877bdef1eba6ef1116bef56077", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJYCdWAAAoJEFbW7qD8Z6xG5k8P/jsQefNHMGJvfWKizGNtj/5F\n4oFf7NGKrO+quLRh7iHNcb+fDPZT/WOTHBGofPQc2QM0T48KdUorfe2+C5baZZax\n1pVdtSeV3vqGRHrLAyLDKAR8aSbbWU1y6Qsm//RpOW4y+6+KtN20JQFrCO2NKCxF\npuQmAhInYz1DCmQCDP1ztA89vhPVYEV59FHIWfxbk3WxDFdv46C62BrTa6IMr+VF\nQOnGXkwueN03Ziu3k9/brHancRHVWsw+sKQfHKZALDje+SmE3+yXxxzJbnKQ4kfi\nk4uQeqVtPs6Pig/iRg2UTF+UesejMxHKrErupvvwwJHFeyFhQWzHidCWtzU7HlW8\nr8/8PUIubrPu0sxNdUzZTbV+f4SlWHI4epQqNtwUt9e6Lpq7cyZ90jpMrQ/weQvj\n6J3JF+yyOw5f1Cosh/tlbErHjXCY52PKOlmMar62u//cfTKYBJG+QqSkSEfXBTUv\nKn2riISGXTyWue1+G4YKIYjQN/RfTjecfiq8swdbXwulPlFIjhoXGvW/C7aW/Ocj\nc61OGtNsAE7wCq0KAh5SNykbV2wUXGjWkwLK9FJmyxZ1eYb3wOmS+cvfM0/XxYAr\nYp9gjGAHuu6iI4GpvHKTUWXRjVfNCgNQ0VM0noofKkf7IclNJwNsr7PDUNr3tPYp\nOuz4BiFSvZ2QqW8+L/Xg\n=t9aA\n-----END PGP SIGNATURE-----", "payload": "tree 52aef1dd96b082119c1dbb9d6d58155b05187778\nparent a75e7f76865b5359b72bd8400a30083364ef180d\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1477039488 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1477039488 +0200\n\nyield a miri error instead of panicking on uninitialized statics"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b8842b25e8d96d877bdef1eba6ef1116bef56077", "html_url": "https://github.com/rust-lang/rust/commit/b8842b25e8d96d877bdef1eba6ef1116bef56077", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b8842b25e8d96d877bdef1eba6ef1116bef56077/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a75e7f76865b5359b72bd8400a30083364ef180d", "url": "https://api.github.com/repos/rust-lang/rust/commits/a75e7f76865b5359b72bd8400a30083364ef180d", "html_url": "https://github.com/rust-lang/rust/commit/a75e7f76865b5359b72bd8400a30083364ef180d"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "46b4c1c6d6f210221ad4ba6f84c5e9eea5847e94", "filename": "src/interpreter/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b8842b25e8d96d877bdef1eba6ef1116bef56077/src%2Finterpreter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b8842b25e8d96d877bdef1eba6ef1116bef56077/src%2Finterpreter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Finterpreter%2Fmod.rs?ref=b8842b25e8d96d877bdef1eba6ef1116bef56077", "patch": "@@ -890,11 +890,11 @@ impl<'a, 'tcx> EvalContext<'a, 'tcx> {\n             Lvalue::Local { frame, local } => {\n                 self.stack[frame].get_local(local).ok_or(EvalError::ReadUndefBytes)\n             }\n-            Lvalue::Static(cid) => Ok(self.statics\n-                                          .get(&cid)\n-                                          .expect(\"static not cached\")\n-                                          .data\n-                                          .expect(\"static not initialized\")),\n+            Lvalue::Static(cid) => self.statics\n+                                       .get(&cid)\n+                                       .expect(\"static not cached\")\n+                                       .data\n+                                       .ok_or(EvalError::ReadUndefBytes),\n         }\n     }\n "}]}