{"sha": "4d8113725db67185f0a67003e41caa5d39db8409", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkODExMzcyNWRiNjcxODVmMGE2NzAwM2U0MWNhYTVkMzlkYjg0MDk=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-07-09T18:04:24Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-07-09T18:05:48Z"}, "message": "rustc: Add some changes I missed", "tree": {"sha": "c58d87f6efef31f2e132c84ca0fbe40c9d520960", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c58d87f6efef31f2e132c84ca0fbe40c9d520960"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d8113725db67185f0a67003e41caa5d39db8409", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d8113725db67185f0a67003e41caa5d39db8409", "html_url": "https://github.com/rust-lang/rust/commit/4d8113725db67185f0a67003e41caa5d39db8409", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d8113725db67185f0a67003e41caa5d39db8409/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ffab392ab286ac4e8028adcdae78e512c6409eb", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ffab392ab286ac4e8028adcdae78e512c6409eb", "html_url": "https://github.com/rust-lang/rust/commit/8ffab392ab286ac4e8028adcdae78e512c6409eb"}], "stats": {"total": 35, "additions": 26, "deletions": 9}, "files": [{"sha": "ba31a610f27ed2ef7c111a3cfb0702b94664685c", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4d8113725db67185f0a67003e41caa5d39db8409/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d8113725db67185f0a67003e41caa5d39db8409/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=4d8113725db67185f0a67003e41caa5d39db8409", "patch": "@@ -21,9 +21,9 @@ import ast::{_mod, add, alt_check, alt_exhaustive, arg, arm, attribute,\n              class_member, class_method, class_mutable, constr, constr_arg,\n              constr_general, crate, crate_cfg, crate_directive, decl,\n              decl_item, decl_local, default_blk, deref, div, expl, expr,\n-             expr_, expr_addr_of, expr_alt, expr_assert, expr_assign,\n-             expr_assign_op, expr_binary, expr_block, expr_break, expr_call,\n-             expr_cast, expr_check, expr_cont, expr_copy, expr_do_body,\n+             expr_, expr_addr_of, expr_alt, expr_again, expr_assert,\n+             expr_assign, expr_assign_op, expr_binary, expr_block, expr_break,\n+             expr_call, expr_cast, expr_check, expr_copy, expr_do_body,\n              expr_fail, expr_field, expr_fn, expr_fn_block, expr_if,\n              expr_if_check, expr_index, expr_lit, expr_log, expr_loop,\n              expr_loop_body, expr_mac, expr_move, expr_new, expr_path,\n@@ -32,9 +32,9 @@ import ast::{_mod, add, alt_check, alt_exhaustive, arg, arm, attribute,\n              foreign_item_fn, foreign_mod, ident, impure_fn, infer,\n              init_assign, init_move, initializer, instance_var, item, item_,\n              item_class, item_const, item_enum, item_fn, item_foreign_mod,\n-             item_impl, item_mod, item_trait, item_ty, lit, lit_, lit_bool,\n-             lit_float, lit_int, lit_int_unsuffixed, lit_nil, lit_str,\n-             lit_uint, local, m_const, m_imm, m_mutbl, mac_, mac_aq,\n+             item_impl, item_mac, item_mod, item_trait, item_ty, lit, lit_,\n+             lit_bool, lit_float, lit_int, lit_int_unsuffixed, lit_nil,\n+             lit_str, lit_uint, local, m_const, m_imm, m_mutbl, mac_, mac_aq,\n              mac_ellipsis, mac_embed_block, mac_embed_type, mac_invoc,\n              mac_invoc_tt, mac_var, matcher, method, mode, mt, mtc_bb,\n              mtc_rep, mtc_tok, mul, mutability, neg, noreturn, not, pat,"}, {"sha": "799f34377ede4955bb503fd7982f8f6a5f97ba74", "filename": "src/rustc/driver/driver.rs", "status": "modified", "additions": 20, "deletions": 3, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/4d8113725db67185f0a67003e41caa5d39db8409/src%2Frustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d8113725db67185f0a67003e41caa5d39db8409/src%2Frustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fdriver%2Fdriver.rs?ref=4d8113725db67185f0a67003e41caa5d39db8409", "patch": "@@ -168,9 +168,26 @@ fn compile_upto(sess: session, cfg: ast::crate_cfg,\n                              session::sess_os_to_meta_os(sess.targ_cfg.os),\n                              sess.opts.static));\n \n-    let { def_map: def_map, exp_map: exp_map, impl_map: impl_map } =\n-        time(time_passes, \"fast resolution\", ||\n-             middle::resolve3::resolve_crate(sess, ast_map, crate));\n+    let mut def_map;\n+    let mut impl_map;\n+    let mut exp_map;\n+    if sess.fast_resolve() {\n+        let { def_map: fast_dm, exp_map: fast_em, impl_map: fast_im } =\n+            time(time_passes, \"fast resolution\", ||\n+                 middle::resolve3::resolve_crate(sess, ast_map, crate));\n+\n+        def_map = fast_dm;\n+        impl_map = fast_im;\n+        exp_map = fast_em;\n+    } else {\n+        let { def_map: normal_dm, exp_map: normal_em, impl_map: normal_im } =\n+            time(time_passes, \"resolution\", ||\n+                 resolve::resolve_crate(sess, ast_map, crate));\n+\n+        def_map = normal_dm;\n+        impl_map = normal_im;\n+        exp_map = normal_em;\n+    }\n \n     let freevars = time(time_passes, \"freevar finding\", ||\n         freevars::annotate_freevars(def_map, crate));"}]}