{"sha": "3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMyODdkZGY5MzdkODczZjhhNGU1ZGJiZDBmZTI5Mzc5MDRkZmRkODg=", "commit": {"author": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2019-05-23T18:10:11Z"}, "committer": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2019-06-03T03:50:03Z"}, "message": "remove reexports of mir::mono::{MonoItem,CodegenUnit}", "tree": {"sha": "05c700ad0e92c6617c11951b494d800db15cc689", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/05c700ad0e92c6617c11951b494d800db15cc689"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "html_url": "https://github.com/rust-lang/rust/commit/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/comments", "author": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "594068955399264cd8f12b9abfa18c35662bc07f", "url": "https://api.github.com/repos/rust-lang/rust/commits/594068955399264cd8f12b9abfa18c35662bc07f", "html_url": "https://github.com/rust-lang/rust/commit/594068955399264cd8f12b9abfa18c35662bc07f"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "c05a7a35665d5a34dcff13cc97fb301e62bf1b41", "filename": "src/librustc_codegen_llvm/consts.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_llvm%2Fconsts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_llvm%2Fconsts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fconsts.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -10,6 +10,7 @@ use libc::c_uint;\n use rustc::hir::def_id::DefId;\n use rustc::mir::interpret::{ConstValue, Allocation, read_target_uint,\n     Pointer, ErrorHandled, GlobalId};\n+use rustc::mir::mono::MonoItem;\n use rustc::hir::Node;\n use syntax_pos::Span;\n use rustc_target::abi::HasDataLayout;"}, {"sha": "ead9bad656db5605d2138cdcc8ae2ba97bc1bcca", "filename": "src/librustc_codegen_llvm/context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_llvm%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_llvm%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fcontext.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -5,12 +5,12 @@ use crate::value::Value;\n use rustc::dep_graph::DepGraphSafe;\n use rustc::hir;\n \n-use crate::monomorphize::partitioning::CodegenUnit;\n use crate::type_::Type;\n use rustc_codegen_ssa::traits::*;\n \n use rustc_data_structures::base_n;\n use rustc_data_structures::small_c_str::SmallCStr;\n+use rustc::mir::mono::CodegenUnit;\n use rustc::session::config::{self, DebugInfo};\n use rustc::session::Session;\n use rustc::ty::layout::{"}, {"sha": "2f134e6e358b6d3499777a06e1157abddb0d5d68", "filename": "src/librustc_codegen_ssa/base.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_ssa%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_ssa%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fbase.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -20,15 +20,15 @@ use rustc::hir::def_id::{DefId, LOCAL_CRATE};\n use rustc::middle::cstore::EncodedMetadata;\n use rustc::middle::lang_items::StartFnLangItem;\n use rustc::middle::weak_lang_items;\n-use rustc::mir::mono::CodegenUnitNameBuilder;\n+use rustc::mir::mono::{CodegenUnitNameBuilder, CodegenUnit};\n use rustc::ty::{self, Ty, TyCtxt, Instance};\n use rustc::ty::layout::{self, Align, TyLayout, LayoutOf, VariantIdx, HasTyCtxt};\n use rustc::ty::query::Providers;\n use rustc::middle::cstore::{self, LinkagePreference};\n use rustc::util::common::{time, print_time_passes_entry};\n use rustc::session::config::{self, EntryFnType, Lto};\n use rustc::session::Session;\n-use rustc_mir::monomorphize::partitioning::{CodegenUnit, CodegenUnitExt};\n+use rustc_mir::monomorphize::partitioning::CodegenUnitExt;\n use rustc::util::nodemap::FxHashMap;\n use rustc_data_structures::indexed_vec::Idx;\n use rustc_codegen_utils::{symbol_names_test, check_for_rustc_errors_attr};"}, {"sha": "46c88a6113ebe486e853728ea09fefd6605749cd", "filename": "src/librustc_codegen_ssa/traits/misc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_ssa%2Ftraits%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_ssa%2Ftraits%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Ftraits%2Fmisc.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -1,8 +1,8 @@\n use super::BackendTypes;\n+use rustc::mir::mono::CodegenUnit;\n use rustc::session::Session;\n use rustc::ty::{self, Instance, Ty};\n use rustc::util::nodemap::FxHashMap;\n-use rustc_mir::monomorphize::partitioning::CodegenUnit;\n use std::cell::RefCell;\n use std::sync::Arc;\n "}, {"sha": "9f710d7932dcfbbcca405ad72010f3ec9f317415", "filename": "src/librustc_codegen_utils/symbol_names.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_utils%2Fsymbol_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_codegen_utils%2Fsymbol_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_utils%2Fsymbol_names.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -93,7 +93,8 @@ use rustc::hir::CodegenFnAttrFlags;\n use rustc::session::config::SymbolManglingVersion;\n use rustc::ty::query::Providers;\n use rustc::ty::{self, TyCtxt, Instance};\n-use rustc_mir::monomorphize::item::{InstantiationMode, MonoItem, MonoItemExt};\n+use rustc::mir::mono::MonoItem;\n+use rustc_mir::monomorphize::item::{InstantiationMode, MonoItemExt};\n \n use syntax_pos::symbol::InternedString;\n "}, {"sha": "c685283b3dc0a084fc2cf46bfa99b9c76547db20", "filename": "src/librustc_mir/monomorphize/item.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -1,9 +1,9 @@\n-use crate::monomorphize::Instance;\n use rustc::hir;\n use rustc::hir::def_id::{DefId, LOCAL_CRATE};\n use rustc::mir::interpret::ConstValue;\n+use rustc::mir::mono::MonoItem;\n use rustc::session::config::OptLevel;\n-use rustc::ty::{self, Ty, TyCtxt, Const, ClosureSubsts, GeneratorSubsts};\n+use rustc::ty::{self, Ty, TyCtxt, Const, ClosureSubsts, GeneratorSubsts, Instance};\n use rustc::ty::subst::{SubstsRef, InternalSubsts};\n use syntax::ast;\n use syntax::attr::InlineAttr;\n@@ -12,7 +12,6 @@ use std::iter;\n use rustc::mir::mono::Linkage;\n use syntax_pos::symbol::InternedString;\n use syntax::source_map::Span;\n-pub use rustc::mir::mono::MonoItem;\n \n /// Describes how a monomorphization will be instantiated in object files.\n #[derive(PartialEq, Eq, Clone, Copy, Debug, Hash)]"}, {"sha": "f7b32dc84bdd5b47b0943159a063cec29100e01b", "filename": "src/librustc_mir/monomorphize/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fmod.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -1,8 +1,8 @@\n use rustc::traits;\n use rustc::ty::adjustment::CustomCoerceUnsized;\n-use rustc::ty::{self, Ty, TyCtxt, Instance};\n+use rustc::ty::{self, Ty, TyCtxt};\n \n-pub use self::item::{MonoItem, MonoItemExt};\n+pub use self::item::MonoItemExt;\n \n pub mod collector;\n pub mod item;"}, {"sha": "cc90d6c95c9155196b714e2db21e19f4b83a3f0c", "filename": "src/librustc_mir/monomorphize/partitioning.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3287ddf937d873f8a4e5dbbd0fe2937904dfdd88/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs?ref=3287ddf937d873f8a4e5dbbd0fe2937904dfdd88", "patch": "@@ -101,7 +101,7 @@ use rustc::dep_graph::{WorkProductId, WorkProduct, DepNode, DepConstructor};\n use rustc::hir::{CodegenFnAttrFlags, HirId};\n use rustc::hir::def::DefKind;\n use rustc::hir::def_id::{CrateNum, DefId, LOCAL_CRATE, CRATE_DEF_INDEX};\n-use rustc::mir::mono::{Linkage, Visibility, CodegenUnitNameBuilder};\n+use rustc::mir::mono::{Linkage, Visibility, CodegenUnitNameBuilder, CodegenUnit};\n use rustc::middle::exported_symbols::SymbolExportLevel;\n use rustc::ty::{self, DefIdTree, TyCtxt, InstanceDef};\n use rustc::ty::print::characteristic_def_id_of_type;\n@@ -114,8 +114,6 @@ use crate::monomorphize::collector::InliningMap;\n use crate::monomorphize::collector::{self, MonoItemCollectionMode};\n use crate::monomorphize::item::{MonoItemExt, InstantiationMode};\n \n-pub use rustc::mir::mono::CodegenUnit;\n-\n pub enum PartitioningStrategy {\n     /// Generates one codegen unit per source-level module.\n     PerModule,"}]}