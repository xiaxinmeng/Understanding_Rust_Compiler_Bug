{"sha": "4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiNDY2ZWU0Zjk0ZDdjMTdiMDYzNDQ5NWRjOTU5ZTZmNWRkNGNjNWE=", "commit": {"author": {"name": "flip1995", "email": "9744647+flip1995@users.noreply.github.com", "date": "2018-07-30T09:20:11Z"}, "committer": {"name": "flip1995", "email": "9744647+flip1995@users.noreply.github.com", "date": "2018-07-30T09:20:11Z"}, "message": "Introduce the declare_tool_lint macro", "tree": {"sha": "98a5a28e0412b9af8229a8ec071d7af8902b1104", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98a5a28e0412b9af8229a8ec071d7af8902b1104"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE8rLaPclMjvVJWRZHnxhOEWSDEYEFAlte2EwACgkQnxhOEWSD\nEYHHlQ/+JmNFLcYfKEWpfMOyfG64160gztyXzshus1t4UvIUFhp7nvDO5bjZx3W1\nH2E6n+rOUb+6QWqCvffZNW6KHlHfB/m+bCsyqM9rGt8PRgaq2tvUhtaCRqxxVzO2\nmdduQnLshIu8ndaH6il99BNFQq20nVB6QkW84mvN8gB4p39fVfda5VpSTixj+gAz\nXuZcvN2A7NDNFW8ILKa74Ya3I2muuPF22Ka7oKRxX0xEMWwnemoV9AOKJ4eF0SaH\nWYVWehkJKMihPSbP2xsrFBbnUG86FpkMEoGBrYlnw5hP8Uq7tTY3bWc8u23H+q0W\nluoR+Ie1kPN0c/OAHuhVRrOiDDUB1YkjOUIJSsEUv2weDp82zwdGEB4bhEIfobg4\nXU2/ePLEpMEtcnYi447wny78ZotDSRG9+2/hoRwT0xq0jTFVqgq9NIBJBhb8IzWe\nyKVomRpaDRs8vF40dPL2mcwLP8ys87zDgMwyMm8CLRkUDE/KqTdgdawvV/ifCHCQ\nhKtrfmfFDG4PDasq+Bw2upAxiRL68Cen/rWMU2Io42/diRVl14PGi67lU4U6c1V9\nSMc9xflOvC4ptnFPPzDAKlJpccZuR0r8YxPonzyvE2a027Kl14U165GCAQIqCq3J\nwJA8AmRdnDp2cJu/zDZFH7Q+0eiqaoSqj0zCRQXWu73NvLa1ajg=\n=aWsJ\n-----END PGP SIGNATURE-----", "payload": "tree 98a5a28e0412b9af8229a8ec071d7af8902b1104\nparent 4234adf0d4fa56e8a8b8d790fb4992d160ab2188\nauthor flip1995 <9744647+flip1995@users.noreply.github.com> 1532942411 +0200\ncommitter flip1995 <9744647+flip1995@users.noreply.github.com> 1532942411 +0200\n\nIntroduce the declare_tool_lint macro\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a", "html_url": "https://github.com/rust-lang/rust/commit/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4234adf0d4fa56e8a8b8d790fb4992d160ab2188", "url": "https://api.github.com/repos/rust-lang/rust/commits/4234adf0d4fa56e8a8b8d790fb4992d160ab2188", "html_url": "https://github.com/rust-lang/rust/commit/4234adf0d4fa56e8a8b8d790fb4992d160ab2188"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "6940826ba86536ef1001032e1c6e30eca5e833c8", "filename": "src/librustc/lint/mod.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a/src%2Flibrustc%2Flint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a/src%2Flibrustc%2Flint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fmod.rs?ref=4b466ee4f94d7c17b0634495dc959e6f5dd4cc5a", "patch": "@@ -139,6 +139,26 @@ macro_rules! declare_lint {\n     );\n }\n \n+#[macro_export]\n+macro_rules! declare_tool_lint {\n+    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr) => (\n+        declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, false}\n+    );\n+    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr,\n+     report_in_external_macro: $rep: expr) => (\n+         declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, $rep}\n+    );\n+    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr, $external: expr) => (\n+        $vis static $NAME: &$crate::lint::Lint = &$crate::lint::Lint {\n+            name: &concat!(stringify!($tool), \"::\", stringify!($NAME)),\n+            default_level: $crate::lint::$Level,\n+            desc: $desc,\n+            edition_lint_opts: None,\n+            report_in_external_macro: $external,\n+        };\n+    );\n+}\n+\n /// Declare a static `LintArray` and return it as an expression.\n #[macro_export]\n macro_rules! lint_array {"}]}