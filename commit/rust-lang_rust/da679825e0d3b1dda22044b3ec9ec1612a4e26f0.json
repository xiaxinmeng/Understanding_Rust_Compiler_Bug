{"sha": "da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhNjc5ODI1ZTBkM2IxZGRhMjIwNDRiM2VjOWVjMTYxMmE0ZTI2ZjA=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-04-02T16:31:32Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-04-03T19:19:32Z"}, "message": "Get rid of Lint::is_internal method", "tree": {"sha": "14abba5514841267fb83b55610b6815263488ef9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14abba5514841267fb83b55610b6815263488ef9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl6HjEQACgkQLO/Nsn7Q\nvnn2TRAAhb2eQvJuTn9+/W0pmar14x44zOkZxFw8Oh8RBQRNXwSM2Yv0covFatVW\nc7nis+xCWi8WezWafnHR7JR8SSH3bvLur8CNO7MxrjOf6F5o9S3kJX5gcxtAVBWA\n5h22IuLUN0IQ2Y1Bi10RfB1SoVDtmc3wEVPHA6dQwxOJ5Tojq9ETJfLV8bawKKsu\nE9k1uCkuYSFlJctBfr42mSVuz/XOzMQlgDVZChll3vhjus/xRNiSfbZbzXZh9xQk\nzUtefB56JoRvOkv0r8JLYYL05o2dxOZCSkcjXc/eoOukmq07JYp4BUQbUiL8Oq41\ndzOmoTZu2eiXD1loDNcP+id0+qhc+cjhakm7C4XcEOWTAGzXsMfNOPLsGGf8s/WF\nxqSN3kSmNviLUYuTArHJxndwOslbr0NPgy2IYugIabRd6BVKyVcz6uTEpayMZq9y\n2XV039YL5tYdoJuRZMymtxOif5Les8WPBZEo1e24WMAxz48NIjFwpSSUDrcd5oSq\ncJIjbHdDf9ZIypJnvSwdsODsQ5cMUjB9nznXz5LBlJ0KuJjg1A5DLwKQ9Bvv1STe\ngf6f57apEEHQ30WnG47NZYAvspTrxPU15EgLFWmzj0MgNFH697cm3qnx2bwLLXpS\n84r+0JAMyJK/LAmnqIO9JzlUlTQ6c7WCE+pvl2BtdyRapD9fAq8=\n=XCq6\n-----END PGP SIGNATURE-----", "payload": "tree 14abba5514841267fb83b55610b6815263488ef9\nparent ffb2e4123458e50202c02e63b9e044583c0fe79a\nauthor flip1995 <hello@philkrones.com> 1585845092 +0200\ncommitter flip1995 <hello@philkrones.com> 1585941572 +0200\n\nGet rid of Lint::is_internal method\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "html_url": "https://github.com/rust-lang/rust/commit/da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da679825e0d3b1dda22044b3ec9ec1612a4e26f0/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ffb2e4123458e50202c02e63b9e044583c0fe79a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ffb2e4123458e50202c02e63b9e044583c0fe79a", "html_url": "https://github.com/rust-lang/rust/commit/ffb2e4123458e50202c02e63b9e044583c0fe79a"}], "stats": {"total": 31, "additions": 7, "deletions": 24}, "files": [{"sha": "4531d9b39c0e08532001f64426fbcccdcafc0286", "filename": "clippy_dev/src/lib.rs", "status": "modified", "additions": 5, "deletions": 22, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/da679825e0d3b1dda22044b3ec9ec1612a4e26f0/clippy_dev%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da679825e0d3b1dda22044b3ec9ec1612a4e26f0/clippy_dev%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Flib.rs?ref=da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "patch": "@@ -63,7 +63,7 @@ impl Lint {\n \n     /// Returns all non-deprecated lints and non-internal lints\n     pub fn usable_lints(lints: impl Iterator<Item = Self>) -> impl Iterator<Item = Self> {\n-        lints.filter(|l| l.deprecation.is_none() && !l.is_internal())\n+        lints.filter(|l| l.deprecation.is_none() && !l.group.starts_with(\"internal\"))\n     }\n \n     /// Returns all internal lints (not `internal_warn` lints)\n@@ -76,11 +76,6 @@ impl Lint {\n     pub fn by_lint_group(lints: impl Iterator<Item = Self>) -> HashMap<String, Vec<Self>> {\n         lints.map(|lint| (lint.group.to_string(), lint)).into_group_map()\n     }\n-\n-    #[must_use]\n-    pub fn is_internal(&self) -> bool {\n-        self.group.starts_with(\"internal\")\n-    }\n }\n \n /// Generates the Vec items for `register_lint_group` calls in `clippy_lints/src/lib.rs`.\n@@ -103,14 +98,8 @@ pub fn gen_lint_group_list(lints: &[Lint]) -> Vec<String> {\n #[must_use]\n pub fn gen_modules_list(lints: &[Lint]) -> Vec<String> {\n     lints\n-        .into_iter()\n-        .filter_map(|l| {\n-            if l.is_internal() || l.deprecation.is_some() {\n-                None\n-            } else {\n-                Some(l.module.clone())\n-            }\n-        })\n+        .iter()\n+        .map(|l| &l.module)\n         .unique()\n         .map(|module| format!(\"pub mod {};\", module))\n         .sorted()\n@@ -124,7 +113,7 @@ pub fn gen_changelog_lint_list(lints: &[Lint]) -> Vec<String> {\n         .iter()\n         .sorted_by_key(|l| l.name.clone())\n         .filter_map(|l| {\n-            if l.is_internal() {\n+            if l.group.starts_with(\"internal\") {\n                 None\n             } else {\n                 Some(format!(\"[`{}`]: {}#{}\", l.name, DOCS_LINK, l.name))\n@@ -158,13 +147,7 @@ pub fn gen_register_lint_list(lints: &[Lint]) -> Vec<String> {\n     let post = \"    ]);\".to_string();\n     let mut inner = lints\n         .iter()\n-        .filter_map(|l| {\n-            if !l.is_internal() && l.deprecation.is_none() {\n-                Some(format!(\"        &{}::{},\", l.module, l.name.to_uppercase()))\n-            } else {\n-                None\n-            }\n-        })\n+        .map(|l| format!(\"        &{}::{},\", l.module, l.name.to_uppercase()))\n         .sorted()\n         .collect::<Vec<String>>();\n     inner.insert(0, pre);"}, {"sha": "be565700b012d52d27dc4b265ee6fc365567b40f", "filename": "clippy_dev/src/update_lints.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/da679825e0d3b1dda22044b3ec9ec1612a4e26f0/clippy_dev%2Fsrc%2Fupdate_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da679825e0d3b1dda22044b3ec9ec1612a4e26f0/clippy_dev%2Fsrc%2Fupdate_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fupdate_lints.rs?ref=da679825e0d3b1dda22044b3ec9ec1612a4e26f0", "patch": "@@ -81,7 +81,7 @@ pub fn run(update_mode: UpdateMode) {\n         \"end register lints\",\n         false,\n         update_mode == UpdateMode::Change,\n-        || gen_register_lint_list(&lint_list),\n+        || gen_register_lint_list(&usable_lints),\n     )\n     .changed;\n \n@@ -91,7 +91,7 @@ pub fn run(update_mode: UpdateMode) {\n         \"end lints modules\",\n         false,\n         update_mode == UpdateMode::Change,\n-        || gen_modules_list(&lint_list),\n+        || gen_modules_list(&usable_lints),\n     )\n     .changed;\n "}]}