{"sha": "a0efafbd85e2e0965746adba7e899ce904d324dc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwZWZhZmJkODVlMmUwOTY1NzQ2YWRiYTdlODk5Y2U5MDRkMzI0ZGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-10-27T07:52:39Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-10-27T07:52:39Z"}, "message": "auto merge of #18348 : michaelwoerister/rust/lldb-test-versioning, r=alexcrichton\n\nLet's try if not running LLDB tests in parallel solves the sporadic deadlocks we've seen since enabling the LLDB test suite. Running the tests in parallel has lead to unstable behaviour in the past (with LLDB versions below 310.x.x). Maybe our new minimum LLDB version isn't quite up to it either.\r\n\r\ncc @alexcrichton", "tree": {"sha": "7d9b6046d66eaa1f330e5410c00a6d9572685d49", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d9b6046d66eaa1f330e5410c00a6d9572685d49"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a0efafbd85e2e0965746adba7e899ce904d324dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a0efafbd85e2e0965746adba7e899ce904d324dc", "html_url": "https://github.com/rust-lang/rust/commit/a0efafbd85e2e0965746adba7e899ce904d324dc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a0efafbd85e2e0965746adba7e899ce904d324dc/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a93e9c20f2a79eacad21592d0eb58e1a89648629", "url": "https://api.github.com/repos/rust-lang/rust/commits/a93e9c20f2a79eacad21592d0eb58e1a89648629", "html_url": "https://github.com/rust-lang/rust/commit/a93e9c20f2a79eacad21592d0eb58e1a89648629"}, {"sha": "ca0446d10795691e3fc206794ac7fbd441442b34", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca0446d10795691e3fc206794ac7fbd441442b34", "html_url": "https://github.com/rust-lang/rust/commit/ca0446d10795691e3fc206794ac7fbd441442b34"}], "stats": {"total": 12, "additions": 11, "deletions": 1}, "files": [{"sha": "018d77b67cdd6b8d95bfc608ace968a2b7455590", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a0efafbd85e2e0965746adba7e899ce904d324dc/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a0efafbd85e2e0965746adba7e899ce904d324dc/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=a0efafbd85e2e0965746adba7e899ce904d324dc", "patch": "@@ -25,7 +25,7 @@ use std::io::fs;\n use std::from_str::FromStr;\n use getopts::{optopt, optflag, reqopt};\n use common::Config;\n-use common::{Pretty, DebugInfoGdb, Codegen};\n+use common::{Pretty, DebugInfoGdb, DebugInfoLldb, Codegen};\n use util::logv;\n use regex::Regex;\n \n@@ -244,6 +244,16 @@ pub fn run_tests(config: &Config) {\n         os::setenv(\"RUST_TEST_TASKS\",\"1\");\n     }\n \n+    match config.mode {\n+        DebugInfoLldb => {\n+            // Some older versions of LLDB seem to have problems with multiple\n+            // instances running in parallel, so only run one test task at a\n+            // time.\n+            os::setenv(\"RUST_TEST_TASKS\", \"1\");\n+        }\n+        _ => { /* proceed */ }\n+    }\n+\n     let opts = test_opts(config);\n     let tests = make_tests(config);\n     // sadly osx needs some file descriptor limits raised for running tests in"}]}