{"sha": "7e8d19b24de6d06e4962c5959d00603c3239ac8c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlOGQxOWIyNGRlNmQwNmU0OTYyYzU5NTlkMDA2MDNjMzIzOWFjOGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-09-21T20:06:50Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-09-21T20:06:50Z"}, "message": "Auto merge of #28566 - Ms2ger:AsmDialect, r=sanxiyn", "tree": {"sha": "e86517740346e9a49051da8861d80e36b3e8a829", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e86517740346e9a49051da8861d80e36b3e8a829"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e8d19b24de6d06e4962c5959d00603c3239ac8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e8d19b24de6d06e4962c5959d00603c3239ac8c", "html_url": "https://github.com/rust-lang/rust/commit/7e8d19b24de6d06e4962c5959d00603c3239ac8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e8d19b24de6d06e4962c5959d00603c3239ac8c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5120f4a3f95f6695c711839b3cc8551303bee0e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/5120f4a3f95f6695c711839b3cc8551303bee0e3", "html_url": "https://github.com/rust-lang/rust/commit/5120f4a3f95f6695c711839b3cc8551303bee0e3"}, {"sha": "184c8a99ed279c7ca8d5f8d202184915b645ab1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/184c8a99ed279c7ca8d5f8d202184915b645ab1f", "html_url": "https://github.com/rust-lang/rust/commit/184c8a99ed279c7ca8d5f8d202184915b645ab1f"}], "stats": {"total": 37, "additions": 12, "deletions": 25}, "files": [{"sha": "8d40a34ef08a879cf0f8dc35760732acd132f680", "filename": "src/librustc_front/hir.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Fhir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Fhir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_front%2Fhir.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -10,7 +10,6 @@\n \n // The Rust HIR.\n \n-pub use self::AsmDialect::*;\n pub use self::BindingMode::*;\n pub use self::BinOp_::*;\n pub use self::BlockCheckMode::*;\n@@ -41,7 +40,7 @@ pub use self::PathParameters::*;\n \n use syntax::codemap::{self, Span, Spanned, DUMMY_SP, ExpnId};\n use syntax::abi::Abi;\n-use syntax::ast::{Name, Ident, NodeId, DUMMY_NODE_ID, TokenTree};\n+use syntax::ast::{Name, Ident, NodeId, DUMMY_NODE_ID, TokenTree, AsmDialect};\n use syntax::ast::{Attribute, Lit, StrStyle, FloatTy, IntTy, UintTy, CrateConfig};\n use syntax::owned_slice::OwnedSlice;\n use syntax::parse::token::InternedString;\n@@ -876,12 +875,6 @@ pub enum Ty_ {\n     TyInfer,\n }\n \n-#[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Debug, Copy)]\n-pub enum AsmDialect {\n-    AsmAtt,\n-    AsmIntel\n-}\n-\n #[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Debug)]\n pub struct InlineAsm {\n     pub asm: InternedString,"}, {"sha": "36d375a3a1a2b05c6bedd891e5332c41e6444941", "filename": "src/librustc_front/lowering.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_front%2Flowering.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -801,7 +801,7 @@ pub fn lower_expr(e: &Expr) -> P<hir::Expr> {\n                     clobbers: clobbers.clone(),\n                     volatile: volatile,\n                     alignstack: alignstack,\n-                    dialect: lower_asm_dialect(dialect),\n+                    dialect: dialect,\n                     expn_id: expn_id,\n                 }),\n                 ExprStruct(ref path, ref fields, ref maybe_expr) => {\n@@ -863,13 +863,6 @@ pub fn lower_capture_clause(c: CaptureClause) -> hir::CaptureClause {\n     }\n }\n \n-pub fn lower_asm_dialect(a: AsmDialect) -> hir::AsmDialect {\n-    match a {\n-        AsmAtt => hir::AsmAtt,\n-        AsmIntel => hir::AsmIntel,\n-    }\n-}\n-\n pub fn lower_visibility(v: Visibility) -> hir::Visibility {\n     match v {\n         Public => hir::Public,"}, {"sha": "0ddbbdc392a4a3c0fa6f75a69507ea194efeec20", "filename": "src/librustc_front/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_front%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_front%2Fprint%2Fpprust.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -1539,7 +1539,7 @@ impl<'a> State<'a> {\n                 if a.alignstack {\n                     options.push(\"alignstack\");\n                 }\n-                if a.dialect == hir::AsmDialect::AsmIntel {\n+                if a.dialect == ast::AsmDialect::Intel {\n                     options.push(\"intel\");\n                 }\n "}, {"sha": "c59237e307849a30c701c0c229314f4b1fb30cde", "filename": "src/librustc_trans/trans/asm.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_trans%2Ftrans%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibrustc_trans%2Ftrans%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fasm.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -22,6 +22,7 @@ use trans::type_::Type;\n \n use rustc_front::hir as ast;\n use std::ffi::CString;\n+use syntax::ast::AsmDialect;\n use libc::{c_uint, c_char};\n \n // Take an inline assembly expression and splat it out via LLVM\n@@ -105,8 +106,8 @@ pub fn trans_inline_asm<'blk, 'tcx>(bcx: Block<'blk, 'tcx>, ia: &ast::InlineAsm)\n     };\n \n     let dialect = match ia.dialect {\n-        ast::AsmAtt   => llvm::AD_ATT,\n-        ast::AsmIntel => llvm::AD_Intel\n+        AsmDialect::Att   => llvm::AD_ATT,\n+        AsmDialect::Intel => llvm::AD_Intel\n     };\n \n     let asm = CString::new(ia.asm.as_bytes()).unwrap();"}, {"sha": "5b04fc0e6977b3ece9c9f1d26f31702b70ca088b", "filename": "src/libsyntax/ast.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -10,7 +10,6 @@\n \n // The Rust abstract syntax tree.\n \n-pub use self::AsmDialect::*;\n pub use self::AttrStyle::*;\n pub use self::BindingMode::*;\n pub use self::BinOp_::*;\n@@ -1440,8 +1439,8 @@ pub enum Ty_ {\n \n #[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Debug, Copy)]\n pub enum AsmDialect {\n-    AsmAtt,\n-    AsmIntel\n+    Att,\n+    Intel,\n }\n \n #[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Debug)]"}, {"sha": "d2b416f54157332b030a4bc94b43ec3305c39094", "filename": "src/libsyntax/ext/asm.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fext%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fext%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fasm.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -22,6 +22,7 @@ use feature_gate;\n use parse::token::{intern, InternedString};\n use parse::token;\n use ptr::P;\n+use syntax::ast::AsmDialect;\n \n enum State {\n     Asm,\n@@ -65,7 +66,7 @@ pub fn expand_asm<'cx>(cx: &'cx mut ExtCtxt, sp: Span, tts: &[ast::TokenTree])\n     let mut clobs = Vec::new();\n     let mut volatile = false;\n     let mut alignstack = false;\n-    let mut dialect = ast::AsmAtt;\n+    let mut dialect = AsmDialect::Att;\n \n     let mut state = Asm;\n \n@@ -178,7 +179,7 @@ pub fn expand_asm<'cx>(cx: &'cx mut ExtCtxt, sp: Span, tts: &[ast::TokenTree])\n                 } else if option == \"alignstack\" {\n                     alignstack = true;\n                 } else if option == \"intel\" {\n-                    dialect = ast::AsmIntel;\n+                    dialect = AsmDialect::Intel;\n                 } else {\n                     cx.span_warn(p.last_span, \"unrecognized option\");\n                 }"}, {"sha": "df72645f97d9b22023e0fc993e360cbe8a8d5078", "filename": "src/libsyntax/print/pprust.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e8d19b24de6d06e4962c5959d00603c3239ac8c/src%2Flibsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fprint%2Fpprust.rs?ref=7e8d19b24de6d06e4962c5959d00603c3239ac8c", "patch": "@@ -2209,7 +2209,7 @@ impl<'a> State<'a> {\n                 if a.alignstack {\n                     options.push(\"alignstack\");\n                 }\n-                if a.dialect == ast::AsmDialect::AsmIntel {\n+                if a.dialect == ast::AsmDialect::Intel {\n                     options.push(\"intel\");\n                 }\n "}]}