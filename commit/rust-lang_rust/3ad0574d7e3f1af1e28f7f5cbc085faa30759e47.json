{"sha": "3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhZDA1NzRkN2UzZjFhZjFlMjhmN2Y1Y2JjMDg1ZmFhMzA3NTllNDc=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-28T22:26:22Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-28T22:26:22Z"}, "message": "vscode: add equality assertion", "tree": {"sha": "de0192925c1b4bcdad592401771fe4344b11a3e7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de0192925c1b4bcdad592401771fe4344b11a3e7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "html_url": "https://github.com/rust-lang/rust/commit/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47/comments", "author": null, "committer": null, "parents": [{"sha": "9cf25770542dfbf35c710f7c214f65ecaad39100", "url": "https://api.github.com/repos/rust-lang/rust/commits/9cf25770542dfbf35c710f7c214f65ecaad39100", "html_url": "https://github.com/rust-lang/rust/commit/9cf25770542dfbf35c710f7c214f65ecaad39100"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "c60014c8c4e96f675a912b281d522045b9472c39", "filename": "editors/code/src/installation/download_artifact.ts", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts", "raw_url": "https://github.com/rust-lang/rust/raw/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts?ref=3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "patch": "@@ -1,10 +1,10 @@\n import * as vscode from \"vscode\";\n import * as path from \"path\";\n import { promises as fs } from \"fs\";\n-import { strict as assert } from \"assert\";\n \n import { ArtifactReleaseInfo } from \"./interfaces\";\n import { downloadFile } from \"./download_file\";\n+import { assert } from \"../util\";\n \n /**\n  * Downloads artifact from given `downloadUrl`.\n@@ -19,7 +19,7 @@ export async function downloadArtifact(\n     installationDir: string,\n     displayName: string,\n ) {\n-    await fs.mkdir(installationDir).catch(err => assert.strictEqual(\n+    await fs.mkdir(installationDir).catch(err => assert.eq(\n         err?.code,\n         \"EEXIST\",\n         `Couldn't create directory \"${installationDir}\" to download ` +"}, {"sha": "5a5f11a108531beb5418932ae519e20a6bfb848a", "filename": "editors/code/src/util.ts", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47/editors%2Fcode%2Fsrc%2Futil.ts", "raw_url": "https://github.com/rust-lang/rust/raw/3ad0574d7e3f1af1e28f7f5cbc085faa30759e47/editors%2Fcode%2Fsrc%2Futil.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futil.ts?ref=3ad0574d7e3f1af1e28f7f5cbc085faa30759e47", "patch": "@@ -11,6 +11,16 @@ export function assert(condition: unknown, explanation: string): asserts conditi\n     }\n }\n \n+assert.eq = <T>(bibba: unknown, bobba: T, explanation: string): asserts bibba is T => {\n+    try {\n+        nativeAssert.strictEqual(bibba, bobba, explanation);\n+    } catch (err) {\n+        log.error(`Equality assertion failed:`, explanation);\n+        throw err;\n+    }\n+}\n+\n+\n export const log = {\n     enabled: true,\n     debug(message?: any, ...optionalParams: any[]): void {"}]}