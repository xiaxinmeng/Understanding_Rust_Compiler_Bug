{"sha": "b9f82d85f91169619064faf159cd33b4d7b3f353", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5ZjgyZDg1ZjkxMTY5NjE5MDY0ZmFmMTU5Y2QzM2I0ZDdiM2YzNTM=", "commit": {"author": {"name": "Roy Frostig", "email": "rfrostig@mozilla.com", "date": "2010-07-26T05:05:39Z"}, "committer": {"name": "Roy Frostig", "email": "rfrostig@mozilla.com", "date": "2010-07-26T05:05:39Z"}, "message": "Attempt number 1 at extinguishing the windows tree remotely (apologies to those hacking on Sunday evening PST).", "tree": {"sha": "7354fdeb708cbb4ab7a307286b4b89e17c1d6a8b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7354fdeb708cbb4ab7a307286b4b89e17c1d6a8b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b9f82d85f91169619064faf159cd33b4d7b3f353", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b9f82d85f91169619064faf159cd33b4d7b3f353", "html_url": "https://github.com/rust-lang/rust/commit/b9f82d85f91169619064faf159cd33b4d7b3f353", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b9f82d85f91169619064faf159cd33b4d7b3f353/comments", "author": {"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, "committer": {"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5b6e714d05a0c96ade618256a67a9cb7f337f196", "url": "https://api.github.com/repos/rust-lang/rust/commits/5b6e714d05a0c96ade618256a67a9cb7f337f196", "html_url": "https://github.com/rust-lang/rust/commit/5b6e714d05a0c96ade618256a67a9cb7f337f196"}], "stats": {"total": 25, "additions": 3, "deletions": 22}, "files": [{"sha": "81751a867e8f62c459cf2b161539b3d4c05dd6a0", "filename": "src/rt/rust_dom.cpp", "status": "modified", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/b9f82d85f91169619064faf159cd33b4d7b3f353/src%2Frt%2Frust_dom.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/b9f82d85f91169619064faf159cd33b4d7b3f353/src%2Frt%2Frust_dom.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_dom.cpp?ref=b9f82d85f91169619064faf159cd33b4d7b3f353", "patch": "@@ -154,25 +154,6 @@ rust_dom::free(void *p) {\n     srv->free(p);\n }\n \n-#ifdef __WIN32__\n-void\n-rust_dom::win32_require(LPCTSTR fn, BOOL ok) {\n-    if (!ok) {\n-        LPTSTR buf;\n-        DWORD err = GetLastError();\n-        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER |\n-                      FORMAT_MESSAGE_FROM_SYSTEM |\n-                      FORMAT_MESSAGE_IGNORE_INSERTS,\n-                      NULL, err,\n-                      MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),\n-                      (LPTSTR) &buf, 0, NULL );\n-        log(rust_log::ERR, \"%s failed with error %ld: %s\", fn, err, buf);\n-        LocalFree((HLOCAL)buf);\n-        I(this, ok);\n-    }\n-}\n-#endif\n-\n size_t\n rust_dom::n_live_tasks()\n {"}, {"sha": "420821194c93c640f6d60f6ceb0495401445b7b8", "filename": "src/rt/rust_util.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b9f82d85f91169619064faf159cd33b4d7b3f353/src%2Frt%2Frust_util.h", "raw_url": "https://github.com/rust-lang/rust/raw/b9f82d85f91169619064faf159cd33b4d7b3f353/src%2Frt%2Frust_util.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_util.h?ref=b9f82d85f91169619064faf159cd33b4d7b3f353", "patch": "@@ -127,15 +127,15 @@ isaac_init(rust_dom *dom, randctx *rctx)\n #ifdef __WIN32__\n         {\n             HCRYPTPROV hProv;\n-            win32_require\n+            dom->win32_require\n                 (_T(\"CryptAcquireContext\"),\n                  CryptAcquireContext(&hProv, NULL, NULL, PROV_RSA_FULL,\n                                      CRYPT_VERIFYCONTEXT|CRYPT_SILENT));\n-            win32_require\n+            dom->win32_require\n                 (_T(\"CryptGenRandom\"),\n                  CryptGenRandom(hProv, sizeof(rctx->randrsl),\n                                 (BYTE*)(&rctx->randrsl)));\n-            win32_require\n+            dom->win32_require\n                 (_T(\"CryptReleaseContext\"),\n                  CryptReleaseContext(hProv, 0));\n         }"}]}