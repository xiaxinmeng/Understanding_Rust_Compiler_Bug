{"sha": "7effe633b0a729b641c7b8f1f8a21b97f9154b14", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlZmZlNjMzYjBhNzI5YjY0MWM3YjhmMWY4YTIxYjk3ZjkxNTRiMTQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-10-08T08:59:05Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-10-13T04:20:03Z"}, "message": "simplify integer_lit", "tree": {"sha": "8683e4c317342ea546075250742bfa44e36e949e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8683e4c317342ea546075250742bfa44e36e949e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7effe633b0a729b641c7b8f1f8a21b97f9154b14", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7effe633b0a729b641c7b8f1f8a21b97f9154b14", "html_url": "https://github.com/rust-lang/rust/commit/7effe633b0a729b641c7b8f1f8a21b97f9154b14", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7effe633b0a729b641c7b8f1f8a21b97f9154b14/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1721c9685b1ee69f1e17b3a8b09145b10fdfbe4a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1721c9685b1ee69f1e17b3a8b09145b10fdfbe4a", "html_url": "https://github.com/rust-lang/rust/commit/1721c9685b1ee69f1e17b3a8b09145b10fdfbe4a"}], "stats": {"total": 16, "additions": 7, "deletions": 9}, "files": [{"sha": "09a47795a822a89a96ee8a0181ce7d68821e003d", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7effe633b0a729b641c7b8f1f8a21b97f9154b14/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7effe633b0a729b641c7b8f1f8a21b97f9154b14/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=7effe633b0a729b641c7b8f1f8a21b97f9154b14", "patch": "@@ -17,6 +17,7 @@\n #![feature(proc_macro_internals)]\n #![feature(proc_macro_span)]\n #![feature(try_trait)]\n+#![feature(slice_patterns)]\n #![feature(unicode_internals)]\n \n #![recursion_limit=\"256\"]"}, {"sha": "56a79bfe5d51cc24e525805cac1a5b953daa737c", "filename": "src/libsyntax/parse/literal.rs", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7effe633b0a729b641c7b8f1f8a21b97f9154b14/src%2Flibsyntax%2Fparse%2Fliteral.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7effe633b0a729b641c7b8f1f8a21b97f9154b14/src%2Flibsyntax%2Fparse%2Fliteral.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fliteral.rs?ref=7effe633b0a729b641c7b8f1f8a21b97f9154b14", "patch": "@@ -426,15 +426,12 @@ fn integer_lit(symbol: Symbol, suffix: Option<Symbol>) -> Result<LitKind, LitErr\n     let symbol = strip_underscores(symbol);\n     let s = symbol.as_str();\n \n-    let mut base = 10;\n-    if s.len() > 1 && s.as_bytes()[0] == b'0' {\n-        match s.as_bytes()[1] {\n-            b'x' => base = 16,\n-            b'o' => base = 8,\n-            b'b' => base = 2,\n-            _ => {}\n-        }\n-    }\n+    let base = match s.as_bytes() {\n+        [b'0', b'x', ..] => 16,\n+        [b'0', b'o', ..] => 8,\n+        [b'0', b'b', ..] => 2,\n+        _ => 10,\n+    };\n \n     let ty = match suffix {\n         Some(suf) => match suf {"}]}