{"sha": "05cdf8dc3d490fbec2519de90b254f47ec7373e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1Y2RmOGRjM2Q0OTBmYmVjMjUxOWRlOTBiMjU0ZjQ3ZWM3MzczZTg=", "commit": {"author": {"name": "Bruno Dutra", "email": "brunocodutra@gmail.com", "date": "2018-09-03T18:03:14Z"}, "committer": {"name": "Bruno Dutra", "email": "brunocodutra@gmail.com", "date": "2018-09-03T18:03:14Z"}, "message": "Document snapshot.rs", "tree": {"sha": "153fcc2d7845009a285eb63705fdc7434df98e80", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/153fcc2d7845009a285eb63705fdc7434df98e80"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05cdf8dc3d490fbec2519de90b254f47ec7373e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05cdf8dc3d490fbec2519de90b254f47ec7373e8", "html_url": "https://github.com/rust-lang/rust/commit/05cdf8dc3d490fbec2519de90b254f47ec7373e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05cdf8dc3d490fbec2519de90b254f47ec7373e8/comments", "author": {"login": "brunocodutra", "id": 4043663, "node_id": "MDQ6VXNlcjQwNDM2NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/4043663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brunocodutra", "html_url": "https://github.com/brunocodutra", "followers_url": "https://api.github.com/users/brunocodutra/followers", "following_url": "https://api.github.com/users/brunocodutra/following{/other_user}", "gists_url": "https://api.github.com/users/brunocodutra/gists{/gist_id}", "starred_url": "https://api.github.com/users/brunocodutra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brunocodutra/subscriptions", "organizations_url": "https://api.github.com/users/brunocodutra/orgs", "repos_url": "https://api.github.com/users/brunocodutra/repos", "events_url": "https://api.github.com/users/brunocodutra/events{/privacy}", "received_events_url": "https://api.github.com/users/brunocodutra/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brunocodutra", "id": 4043663, "node_id": "MDQ6VXNlcjQwNDM2NjM=", "avatar_url": "https://avatars.githubusercontent.com/u/4043663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brunocodutra", "html_url": "https://github.com/brunocodutra", "followers_url": "https://api.github.com/users/brunocodutra/followers", "following_url": "https://api.github.com/users/brunocodutra/following{/other_user}", "gists_url": "https://api.github.com/users/brunocodutra/gists{/gist_id}", "starred_url": "https://api.github.com/users/brunocodutra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brunocodutra/subscriptions", "organizations_url": "https://api.github.com/users/brunocodutra/orgs", "repos_url": "https://api.github.com/users/brunocodutra/repos", "events_url": "https://api.github.com/users/brunocodutra/events{/privacy}", "received_events_url": "https://api.github.com/users/brunocodutra/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61a999a531d03c73626716e2b48d259e13f3b6af", "url": "https://api.github.com/repos/rust-lang/rust/commits/61a999a531d03c73626716e2b48d259e13f3b6af", "html_url": "https://github.com/rust-lang/rust/commit/61a999a531d03c73626716e2b48d259e13f3b6af"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "ccc5bba1ad61170e592665f3857073852191861e", "filename": "src/librustc/mir/interpret/mod.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/05cdf8dc3d490fbec2519de90b254f47ec7373e8/src%2Flibrustc%2Fmir%2Finterpret%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05cdf8dc3d490fbec2519de90b254f47ec7373e8/src%2Flibrustc%2Fmir%2Finterpret%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Fmod.rs?ref=05cdf8dc3d490fbec2519de90b254f47ec7373e8", "patch": "@@ -133,6 +133,11 @@ pub trait PointerArithmetic: layout::HasDataLayout {\n impl<T: layout::HasDataLayout> PointerArithmetic for T {}\n \n \n+/// Pointer is generic over the type that represents a reference to Allocations,\n+/// thus making it possible for the most convenient representation to be used in\n+/// each context.\n+///\n+/// Defaults to the index based and loosely coupled AllocId.\n #[derive(Copy, Clone, Debug, Eq, PartialEq, Ord, PartialOrd, RustcEncodable, RustcDecodable, Hash)]\n pub struct Pointer<Id=AllocId> {\n     pub alloc_id: Id,"}, {"sha": "8aa053baae9f017afd022673b04bf5c5fe92d0c2", "filename": "src/librustc_mir/interpret/snapshot.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05cdf8dc3d490fbec2519de90b254f47ec7373e8/src%2Flibrustc_mir%2Finterpret%2Fsnapshot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05cdf8dc3d490fbec2519de90b254f47ec7373e8/src%2Flibrustc_mir%2Finterpret%2Fsnapshot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fsnapshot.rs?ref=05cdf8dc3d490fbec2519de90b254f47ec7373e8", "patch": "@@ -1,3 +1,7 @@\n+//! This module contains the machinery necessary to detect infinite loops\n+//! during const-evaluation by taking snapshots of the state of the interpreter\n+//! at regular intervals.\n+\n use std::hash::{Hash, Hasher};\n \n use rustc::ich::{StableHashingContext, StableHashingContextProvider};\n@@ -89,6 +93,8 @@ trait SnapshotContext<'a> {\n     fn resolve(&'a self, id: &AllocId) -> Option<&'a Allocation>;\n }\n \n+/// Taking a snapshot of the evaluation context produces a view of\n+/// the state of the interpreter that is invariant to `AllocId`s.\n trait Snapshot<'a, Ctx: SnapshotContext<'a>> {\n     type Item;\n     fn snapshot(&self, ctx: &'a Ctx) -> Self::Item;"}]}