{"sha": "bd5d236724ff1418b3d3e70fd946374db67479d7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkNWQyMzY3MjRmZjE0MThiM2QzZTcwZmQ5NDYzNzRkYjY3NDc5ZDc=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-07-29T21:51:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-07-29T21:51:49Z"}, "message": "Merge #5563\n\n5563: Check all targets for package-level tasks r=matklad a=SomeoneToIgnore\n\nWhen invoking \"Select Runnable\" with the caret on a runnable with a specific target (test, bench, binary), append the corresponding argument for the `cargo check -p` module runnable.\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>", "tree": {"sha": "1680e94c544070a5170b8f133d2897f4cfeb75a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1680e94c544070a5170b8f133d2897f4cfeb75a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd5d236724ff1418b3d3e70fd946374db67479d7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfIe91CRBK7hj4Ov3rIwAAdHIIACXpvKcXnick4GDIHICL++XA\nMJXQBRXbOzVuPcl6WsxEbC/dttddNVrAICEPOAuUvAwYKAKYQvSaaKEGTu7lEiUU\n9uaC38xA++7wKHMgzUDXx9+9c+OyLZpZEwNsQQT61AKfUlZwsGZNa1DTc309zkf8\nFsmtO3zLL3PRWxWN9nuB8CbQmKcaMyOkcCJIGjq+pGDoe0pKnl1crRji4eF17129\nghbbdIW5PksvbwzB9mdPLZonthwfzwSMnh9bkkZxsyXAwcIg69aRKox+0m294Cgh\ndweHXYM+9VKgmy4ek98yO1Gzp0r+p0/daaqCllHabWpnAEhmhRnXmN5uHxX3HO4=\n=mhd2\n-----END PGP SIGNATURE-----\n", "payload": "tree 1680e94c544070a5170b8f133d2897f4cfeb75a2\nparent 16caadb404de465d8ea1cb6a107740ef004f232b\nparent 85d71f4dff6d96678eeb195249fd340dc8cf4912\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1596059509 +0000\ncommitter GitHub <noreply@github.com> 1596059509 +0000\n\nMerge #5563\n\n5563: Check all targets for package-level tasks r=matklad a=SomeoneToIgnore\n\nWhen invoking \"Select Runnable\" with the caret on a runnable with a specific target (test, bench, binary), append the corresponding argument for the `cargo check -p` module runnable.\n\nCo-authored-by: Kirill Bulatov <mail4score@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd5d236724ff1418b3d3e70fd946374db67479d7", "html_url": "https://github.com/rust-lang/rust/commit/bd5d236724ff1418b3d3e70fd946374db67479d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd5d236724ff1418b3d3e70fd946374db67479d7/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16caadb404de465d8ea1cb6a107740ef004f232b", "url": "https://api.github.com/repos/rust-lang/rust/commits/16caadb404de465d8ea1cb6a107740ef004f232b", "html_url": "https://github.com/rust-lang/rust/commit/16caadb404de465d8ea1cb6a107740ef004f232b"}, {"sha": "85d71f4dff6d96678eeb195249fd340dc8cf4912", "url": "https://api.github.com/repos/rust-lang/rust/commits/85d71f4dff6d96678eeb195249fd340dc8cf4912", "html_url": "https://github.com/rust-lang/rust/commit/85d71f4dff6d96678eeb195249fd340dc8cf4912"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "87a1367ac2e89b62ec0b134ad639a15d8938d01b", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bd5d236724ff1418b3d3e70fd946374db67479d7/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd5d236724ff1418b3d3e70fd946374db67479d7/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=bd5d236724ff1418b3d3e70fd946374db67479d7", "patch": "@@ -469,12 +469,12 @@ pub(crate) fn handle_runnables(\n         res.push(runnable);\n     }\n \n-    // Add `cargo check` and `cargo test` for the whole package\n+    // Add `cargo check` and `cargo test` for all targets of the whole package\n     match cargo_spec {\n         Some(spec) => {\n             for &cmd in [\"check\", \"test\"].iter() {\n                 res.push(lsp_ext::Runnable {\n-                    label: format!(\"cargo {} -p {}\", cmd, spec.package),\n+                    label: format!(\"cargo {} -p {} --all-targets\", cmd, spec.package),\n                     location: None,\n                     kind: lsp_ext::RunnableKind::Cargo,\n                     args: lsp_ext::CargoRunnable {\n@@ -483,6 +483,7 @@ pub(crate) fn handle_runnables(\n                             cmd.to_string(),\n                             \"--package\".to_string(),\n                             spec.package.clone(),\n+                            \"--all-targets\".to_string(),\n                         ],\n                         executable_args: Vec::new(),\n                         expect_test: None,"}, {"sha": "7370505f8bfb2514aee27e5fe20029fbd8e6282b", "filename": "crates/rust-analyzer/tests/heavy_tests/main.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bd5d236724ff1418b3d3e70fd946374db67479d7/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd5d236724ff1418b3d3e70fd946374db67479d7/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs?ref=bd5d236724ff1418b3d3e70fd946374db67479d7", "patch": "@@ -115,21 +115,21 @@ fn main() {}\n           },\n           {\n             \"args\": {\n-              \"cargoArgs\": [\"check\", \"--package\", \"foo\"],\n+              \"cargoArgs\": [\"check\", \"--package\", \"foo\", \"--all-targets\"],\n               \"executableArgs\": [],\n               \"workspaceRoot\": server.path().join(\"foo\")\n             },\n             \"kind\": \"cargo\",\n-            \"label\": \"cargo check -p foo\"\n+            \"label\": \"cargo check -p foo --all-targets\"\n           },\n           {\n             \"args\": {\n-              \"cargoArgs\": [\"test\", \"--package\", \"foo\"],\n+              \"cargoArgs\": [\"test\", \"--package\", \"foo\", \"--all-targets\"],\n               \"executableArgs\": [],\n               \"workspaceRoot\": server.path().join(\"foo\")\n             },\n             \"kind\": \"cargo\",\n-            \"label\": \"cargo test -p foo\"\n+            \"label\": \"cargo test -p foo --all-targets\"\n           }\n         ]),\n     );"}]}