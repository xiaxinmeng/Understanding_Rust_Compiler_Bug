{"sha": "04f2972d14b955a821ef0a76d0b9e64106abef57", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0ZjI5NzJkMTRiOTU1YTgyMWVmMGE3NmQwYjllNjQxMDZhYmVmNTc=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2016-05-07T19:35:17Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2016-05-07T19:35:17Z"}, "message": "Rollup merge of #33384 - cramertj:E0506, r=arielb1\n\nAdd detailed error explanation for E0506\n\nPart of #32777", "tree": {"sha": "74a879df7e2272ff287cfa08279826b6ed2c22ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74a879df7e2272ff287cfa08279826b6ed2c22ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04f2972d14b955a821ef0a76d0b9e64106abef57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04f2972d14b955a821ef0a76d0b9e64106abef57", "html_url": "https://github.com/rust-lang/rust/commit/04f2972d14b955a821ef0a76d0b9e64106abef57", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04f2972d14b955a821ef0a76d0b9e64106abef57/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76d6030e80910a9de4c2919e141ee3b8c5171c7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/76d6030e80910a9de4c2919e141ee3b8c5171c7a", "html_url": "https://github.com/rust-lang/rust/commit/76d6030e80910a9de4c2919e141ee3b8c5171c7a"}, {"sha": "8facc977114dd80be031d2de94d66d87126aab5f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8facc977114dd80be031d2de94d66d87126aab5f", "html_url": "https://github.com/rust-lang/rust/commit/8facc977114dd80be031d2de94d66d87126aab5f"}], "stats": {"total": 85, "additions": 84, "deletions": 1}, "files": [{"sha": "ba8ea024c26a8ac0ccb27afe6ddede2050da9c57", "filename": "src/librustc_borrowck/diagnostics.rs", "status": "modified", "additions": 84, "deletions": 1, "changes": 85, "blob_url": "https://github.com/rust-lang/rust/blob/04f2972d14b955a821ef0a76d0b9e64106abef57/src%2Flibrustc_borrowck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04f2972d14b955a821ef0a76d0b9e64106abef57/src%2Flibrustc_borrowck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_borrowck%2Fdiagnostics.rs?ref=04f2972d14b955a821ef0a76d0b9e64106abef57", "patch": "@@ -390,6 +390,90 @@ fn foo(a: &mut i32) {\n ```\n \"##,\n \n+E0506: r##\"\n+This error occurs when an attempt is made to assign to a borrowed value.\n+\n+Example of erroneous code:\n+\n+```compile_fail\n+struct FancyNum {\n+    num: u8\n+}\n+\n+fn main() {\n+    let mut fancy_num = FancyNum { num: 5 };\n+    let fancy_ref = &fancy_num;\n+    fancy_num = FancyNum { num: 6 };\n+    // error: cannot assign to `fancy_num` because it is borrowed\n+\n+    println!(\"Num: {}, Ref: {}\", fancy_num.num, fancy_ref.num);\n+}\n+```\n+\n+Because `fancy_ref` still holds a reference to `fancy_num`, `fancy_num` can't\n+be assigned to a new value as it would invalidate the reference.\n+\n+Alternatively, we can move out of `fancy_num` into a second `fancy_num`:\n+\n+```\n+struct FancyNum {\n+    num: u8\n+}\n+\n+fn main() {\n+    let mut fancy_num = FancyNum { num: 5 };\n+    let moved_num = fancy_num;\n+    fancy_num = FancyNum { num: 6 };\n+\n+    println!(\"Num: {}, Moved num: {}\", fancy_num.num, moved_num.num);\n+}\n+```\n+\n+If the value has to be borrowed, try limiting the lifetime of the borrow using\n+a scoped block:\n+\n+```\n+struct FancyNum {\n+    num: u8\n+}\n+\n+fn main() {\n+    let mut fancy_num = FancyNum { num: 5 };\n+\n+    {\n+        let fancy_ref = &fancy_num;\n+        println!(\"Ref: {}\", fancy_ref.num);\n+    }\n+\n+    // Works because `fancy_ref` is no longer in scope\n+    fancy_num = FancyNum { num: 6 };\n+    println!(\"Num: {}\", fancy_num.num);\n+}\n+```\n+\n+Or by moving the reference into a function:\n+\n+```\n+struct FancyNum {\n+    num: u8\n+}\n+\n+fn main() {\n+    let mut fancy_num = FancyNum { num: 5 };\n+\n+    print_fancy_ref(&fancy_num);\n+\n+    // Works because function borrow has ended\n+    fancy_num = FancyNum { num: 6 };\n+    println!(\"Num: {}\", fancy_num.num);\n+}\n+\n+fn print_fancy_ref(fancy_ref: &FancyNum){\n+    println!(\"Ref: {}\", fancy_ref.num);\n+}\n+```\n+\"##,\n+\n E0507: r##\"\n You tried to move out of a value which was borrowed. Erroneous code example:\n \n@@ -516,7 +600,6 @@ register_diagnostics! {\n     E0503, // cannot use `..` because it was mutably borrowed\n     E0504, // cannot move `..` into closure because it is borrowed\n     E0505, // cannot move out of `..` because it is borrowed\n-    E0506, // cannot assign to `..` because it is borrowed\n     E0508, // cannot move out of type `..`, a non-copy fixed-size array\n     E0509, // cannot move out of type `..`, which defines the `Drop` trait\n     E0524, // two closures require unique access to `..` at the same time"}]}