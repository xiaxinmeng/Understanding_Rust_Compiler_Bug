{"sha": "34ba1850b94ba4047f3b8acdc8f41862ed861447", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0YmExODUwYjk0YmE0MDQ3ZjNiOGFjZGM4ZjQxODYyZWQ4NjE0NDc=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-15T11:19:52Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-04-15T11:19:52Z"}, "message": "syntax: Some minor lexer refactoring", "tree": {"sha": "bebc70688eff5d693dbc422f7618a7ea401c8972", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bebc70688eff5d693dbc422f7618a7ea401c8972"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/34ba1850b94ba4047f3b8acdc8f41862ed861447", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/34ba1850b94ba4047f3b8acdc8f41862ed861447", "html_url": "https://github.com/rust-lang/rust/commit/34ba1850b94ba4047f3b8acdc8f41862ed861447", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/34ba1850b94ba4047f3b8acdc8f41862ed861447/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b4f0643157f6eda24ebaad3bdcf06ef2a3cad93", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b4f0643157f6eda24ebaad3bdcf06ef2a3cad93", "html_url": "https://github.com/rust-lang/rust/commit/4b4f0643157f6eda24ebaad3bdcf06ef2a3cad93"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "8ea7faf51915e2af099f705c300b6e618a2ab2ba", "filename": "src/librustsyntax/codemap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/34ba1850b94ba4047f3b8acdc8f41862ed861447/src%2Flibrustsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34ba1850b94ba4047f3b8acdc8f41862ed861447/src%2Flibrustsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fcodemap.rs?ref=34ba1850b94ba4047f3b8acdc8f41862ed861447", "patch": "@@ -47,7 +47,7 @@ fn mk_substr_filename(cm: codemap, sp: span) -> str\n }\n \n fn next_line(file: filemap, chpos: uint, byte_pos: uint) {\n-    file.lines += [{ch: chpos, byte: byte_pos}];\n+    file.lines += [{ch: chpos, byte: byte_pos + file.start_pos.byte}];\n }\n \n type lookup_fn = fn@(file_pos) -> uint;"}, {"sha": "7d0a573a44804410432f24a60e4e9f92f7b64833", "filename": "src/librustsyntax/parse/lexer.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/34ba1850b94ba4047f3b8acdc8f41862ed861447/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/34ba1850b94ba4047f3b8acdc8f41862ed861447/src%2Flibrustsyntax%2Fparse%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fparse%2Flexer.rs?ref=34ba1850b94ba4047f3b8acdc8f41862ed861447", "patch": "@@ -33,8 +33,7 @@ impl reader for reader {\n             self.col += 1u;\n             self.chpos += 1u;\n             if self.curr == '\\n' {\n-                codemap::next_line(self.filemap, self.chpos, self.pos +\n-                                   self.filemap.start_pos.byte);\n+                codemap::next_line(self.filemap, self.chpos, self.pos);\n                 self.col = 0u;\n             }\n             let next = str::char_range_at(*self.src, self.pos);"}]}