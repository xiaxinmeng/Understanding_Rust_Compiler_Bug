{"sha": "301f9001c01ffbca89241dcd8c0c2f1ae6928dfd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwMWY5MDAxYzAxZmZiY2E4OTI0MWRjZDhjMGMyZjFhZTY5MjhkZmQ=", "commit": {"author": {"name": "Ron Dahlgren", "email": "ronald.dahlgren@gmail.com", "date": "2013-06-11T17:11:49Z"}, "committer": {"name": "Ron Dahlgren", "email": "ronald.dahlgren@gmail.com", "date": "2013-06-11T17:11:49Z"}, "message": "Assert stk rather than checking null\n\nGiven that a big stack is never requested before allocating an initial\nstack segment, having a non-null stk member here is an invariant.", "tree": {"sha": "09be1d932d6396bc3fe365ab686048ea9f4bc70e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/09be1d932d6396bc3fe365ab686048ea9f4bc70e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd", "html_url": "https://github.com/rust-lang/rust/commit/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd/comments", "author": null, "committer": null, "parents": [{"sha": "12203a76c22cebff394a2b157a0d1f4cec3d46f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/12203a76c22cebff394a2b157a0d1f4cec3d46f8", "html_url": "https://github.com/rust-lang/rust/commit/12203a76c22cebff394a2b157a0d1f4cec3d46f8"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "befcf1499363f57ad2840b0f8d31a78ea1e913b1", "filename": "src/rt/rust_task.cpp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd/src%2Frt%2Frust_task.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/301f9001c01ffbca89241dcd8c0c2f1ae6928dfd/src%2Frt%2Frust_task.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_task.cpp?ref=301f9001c01ffbca89241dcd8c0c2f1ae6928dfd", "patch": "@@ -587,6 +587,7 @@ rust_task::cleanup_after_turn() {\n // stack and false otherwise.\n bool\n rust_task::new_big_stack() {\n+\t\tassert(stk);\n     // If we have a cached big stack segment, use it.\n     if (big_stack) {\n         // Check to see if we're already on the big stack.\n@@ -612,12 +613,11 @@ rust_task::new_big_stack() {\n     }\n \n     big_stack->task = this;\n-    big_stack->next = stk ? stk->next : NULL;\n+    big_stack->next = stk->next;\n     if (big_stack->next)\n         big_stack->next->prev = big_stack;\n     big_stack->prev = stk;\n-    if (stk)\n-        stk->next = big_stack;\n+\t\tstk->next = big_stack;\n \n     stk = big_stack;\n "}]}