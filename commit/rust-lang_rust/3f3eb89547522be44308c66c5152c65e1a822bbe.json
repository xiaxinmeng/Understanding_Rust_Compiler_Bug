{"sha": "3f3eb89547522be44308c66c5152c65e1a822bbe", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmM2ViODk1NDc1MjJiZTQ0MzA4YzY2YzUxNTJjNjVlMWE4MjJiYmU=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-02-02T19:24:42Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-02-03T22:15:51Z"}, "message": "Fix/allow non_fmt_panic in clippy tests.", "tree": {"sha": "bf4b34ec089f2f608b41361a734b0bf2317ae47c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bf4b34ec089f2f608b41361a734b0bf2317ae47c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f3eb89547522be44308c66c5152c65e1a822bbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f3eb89547522be44308c66c5152c65e1a822bbe", "html_url": "https://github.com/rust-lang/rust/commit/3f3eb89547522be44308c66c5152c65e1a822bbe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f3eb89547522be44308c66c5152c65e1a822bbe/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "753b0b0b80238a24da87137b67040286dfb82c4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/753b0b0b80238a24da87137b67040286dfb82c4d", "html_url": "https://github.com/rust-lang/rust/commit/753b0b0b80238a24da87137b67040286dfb82c4d"}], "stats": {"total": 40, "additions": 20, "deletions": 20}, "files": [{"sha": "9cef7438d225cbc51cdedd1b471ece46bbb89e78", "filename": "src/tools/clippy/tests/missing-test-files.rs", "status": "modified", "additions": 6, "deletions": 8, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fmissing-test-files.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fmissing-test-files.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fmissing-test-files.rs?ref=3f3eb89547522be44308c66c5152c65e1a822bbe", "patch": "@@ -9,14 +9,12 @@ fn test_missing_tests() {\n     if !missing_files.is_empty() {\n         assert!(\n             false,\n-            format!(\n-                \"Didn't see a test file for the following files:\\n\\n{}\\n\",\n-                missing_files\n-                    .iter()\n-                    .map(|s| format!(\"\\t{}\", s))\n-                    .collect::<Vec<_>>()\n-                    .join(\"\\n\")\n-            )\n+            \"Didn't see a test file for the following files:\\n\\n{}\\n\",\n+            missing_files\n+                .iter()\n+                .map(|s| format!(\"\\t{}\", s))\n+                .collect::<Vec<_>>()\n+                .join(\"\\n\")\n         );\n     }\n }"}, {"sha": "e989de654045632a1a496859c9cff7640742492a", "filename": "src/tools/clippy/tests/ui/assertions_on_constants.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.rs?ref=3f3eb89547522be44308c66c5152c65e1a822bbe", "patch": "@@ -1,3 +1,5 @@\n+#![allow(non_fmt_panic)]\n+\n macro_rules! assert_const {\n     ($len:expr) => {\n         assert!($len > 0);"}, {"sha": "c66fdf093f5148a9a6aa660bea88dd23c6d9f61d", "filename": "src/tools/clippy/tests/ui/assertions_on_constants.stderr", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fassertions_on_constants.stderr?ref=3f3eb89547522be44308c66c5152c65e1a822bbe", "patch": "@@ -1,5 +1,5 @@\n error: `assert!(true)` will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:9:5\n+  --> $DIR/assertions_on_constants.rs:11:5\n    |\n LL |     assert!(true);\n    |     ^^^^^^^^^^^^^^\n@@ -9,7 +9,7 @@ LL |     assert!(true);\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(false)` should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:10:5\n+  --> $DIR/assertions_on_constants.rs:12:5\n    |\n LL |     assert!(false);\n    |     ^^^^^^^^^^^^^^^\n@@ -18,7 +18,7 @@ LL |     assert!(false);\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(true)` will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:11:5\n+  --> $DIR/assertions_on_constants.rs:13:5\n    |\n LL |     assert!(true, \"true message\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -27,7 +27,7 @@ LL |     assert!(true, \"true message\");\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(false, \"false message\")` should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:12:5\n+  --> $DIR/assertions_on_constants.rs:14:5\n    |\n LL |     assert!(false, \"false message\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -36,7 +36,7 @@ LL |     assert!(false, \"false message\");\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(false, msg.to_uppercase())` should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:15:5\n+  --> $DIR/assertions_on_constants.rs:17:5\n    |\n LL |     assert!(false, msg.to_uppercase());\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -45,7 +45,7 @@ LL |     assert!(false, msg.to_uppercase());\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(true)` will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:18:5\n+  --> $DIR/assertions_on_constants.rs:20:5\n    |\n LL |     assert!(B);\n    |     ^^^^^^^^^^^\n@@ -54,7 +54,7 @@ LL |     assert!(B);\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(false)` should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:21:5\n+  --> $DIR/assertions_on_constants.rs:23:5\n    |\n LL |     assert!(C);\n    |     ^^^^^^^^^^^\n@@ -63,7 +63,7 @@ LL |     assert!(C);\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `assert!(false, \"C message\")` should probably be replaced\n-  --> $DIR/assertions_on_constants.rs:22:5\n+  --> $DIR/assertions_on_constants.rs:24:5\n    |\n LL |     assert!(C, \"C message\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -72,7 +72,7 @@ LL |     assert!(C, \"C message\");\n    = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: `debug_assert!(true)` will be optimized out by the compiler\n-  --> $DIR/assertions_on_constants.rs:24:5\n+  --> $DIR/assertions_on_constants.rs:26:5\n    |\n LL |     debug_assert!(true);\n    |     ^^^^^^^^^^^^^^^^^^^^"}, {"sha": "5d5af4e4632970afe821f9b42b82eae5bd445e08", "filename": "src/tools/clippy/tests/ui/fallible_impl_from.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.rs?ref=3f3eb89547522be44308c66c5152c65e1a822bbe", "patch": "@@ -36,7 +36,7 @@ impl From<Option<String>> for Invalid {\n     fn from(s: Option<String>) -> Invalid {\n         let s = s.unwrap();\n         if !s.is_empty() {\n-            panic!(42);\n+            panic!(\"42\");\n         } else if s.parse::<u32>().unwrap() != 42 {\n             panic!(\"{:?}\", s);\n         }"}, {"sha": "f787b30bdabc557641a968518485a53abcb72b7a", "filename": "src/tools/clippy/tests/ui/fallible_impl_from.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3f3eb89547522be44308c66c5152c65e1a822bbe/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Ffallible_impl_from.stderr?ref=3f3eb89547522be44308c66c5152c65e1a822bbe", "patch": "@@ -59,8 +59,8 @@ note: potential failure(s)\n LL |         let s = s.unwrap();\n    |                 ^^^^^^^^^^\n LL |         if !s.is_empty() {\n-LL |             panic!(42);\n-   |             ^^^^^^^^^^^\n+LL |             panic!(\"42\");\n+   |             ^^^^^^^^^^^^^\n LL |         } else if s.parse::<u32>().unwrap() != 42 {\n    |                   ^^^^^^^^^^^^^^^^^^^^^^^^^\n LL |             panic!(\"{:?}\", s);"}]}