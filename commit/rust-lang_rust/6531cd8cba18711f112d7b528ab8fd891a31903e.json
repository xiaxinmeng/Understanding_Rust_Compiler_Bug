{"sha": "6531cd8cba18711f112d7b528ab8fd891a31903e", "node_id": "C_kwDOAAsO6NoAKDY1MzFjZDhjYmExODcxMWYxMTJkN2I1MjhhYjhmZDg5MWEzMTkwM2U", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-10-11T15:20:45Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2021-10-11T15:20:45Z"}, "message": "Fix function-names test for GDB 10.1", "tree": {"sha": "afc915351d23066476041a2c6383d32d2baa90ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/afc915351d23066476041a2c6383d32d2baa90ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6531cd8cba18711f112d7b528ab8fd891a31903e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6531cd8cba18711f112d7b528ab8fd891a31903e", "html_url": "https://github.com/rust-lang/rust/commit/6531cd8cba18711f112d7b528ab8fd891a31903e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6531cd8cba18711f112d7b528ab8fd891a31903e/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a757817c352801de8b0593728f8aee21e23cd53", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a757817c352801de8b0593728f8aee21e23cd53", "html_url": "https://github.com/rust-lang/rust/commit/9a757817c352801de8b0593728f8aee21e23cd53"}], "stats": {"total": 31, "additions": 16, "deletions": 15}, "files": [{"sha": "61d5fc93cd2ad5b7b985d15c07dbcecff0568fa4", "filename": "src/test/debuginfo/function-names.rs", "status": "modified", "additions": 16, "deletions": 15, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/6531cd8cba18711f112d7b528ab8fd891a31903e/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6531cd8cba18711f112d7b528ab8fd891a31903e/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs?ref=6531cd8cba18711f112d7b528ab8fd891a31903e", "patch": "@@ -9,36 +9,37 @@\n // gdb-command:info functions -q function_names::main\n // gdb-check:[...]static fn function_names::main();\n // gdb-command:info functions -q function_names::generic_func<*\n-// gdb-check:[...]static fn function_names::generic_func(i32) -> i32;\n+// gdb-check:[...]static fn function_names::generic_func<i32>(i32) -> i32;\n \n // Implementations\n // gdb-command:info functions -q function_names::.*::impl_function.*\n-// gdb-check:[...]static fn function_names::GenericStruct<T1,T2>::impl_function();\n+// gdb-check:[...]static fn function_names::GenericStruct<i32, i32>::impl_function<i32, i32>();\n // gdb-check:[...]static fn function_names::Mod1::TestStruct2::impl_function();\n // gdb-check:[...]static fn function_names::TestStruct1::impl_function();\n \n // Trait implementations\n // gdb-command:info functions -q function_names::.*::trait_function.*\n-// gdb-check:[...]static fn <function_names::GenericStruct<T,i32> as function_names::TestTrait1>::trait_function();\n-// gdb-check:[...]static fn <function_names::GenericStruct<[T; N],f32> as function_names::TestTrait1>::trait_function();\n-// gdb-check:[...]static fn <function_names::Mod1::TestStruct2 as function_names::Mod1::TestTrait2>::trait_function();\n-// gdb-check:[...]static fn <function_names::TestStruct1 as function_names::TestTrait1>::trait_function();\n+// gdb-check:[...]static fn function_names::Mod1::{impl#1}::trait_function();\n+// gdb-check:[...]static fn function_names::{impl#1}::trait_function();\n+// gdb-check:[...]static fn function_names::{impl#3}::trait_function<i32>();\n+// gdb-check:[...]static fn function_names::{impl#5}::trait_function3<function_names::TestStruct1>();\n+// gdb-check:[...]static fn function_names::{impl#6}::trait_function<i32, 1>();\n \n // Closure\n-// gdb-command:info functions -q function_names::.*::{{closure.*\n-// gdb-check:[...]static fn function_names::GenericStruct<T1,T2>::impl_function::{{closure}}(*mut function_names::{impl#2}::impl_function::{closure#0});\n-// gdb-check:[...]static fn function_names::generic_func::{{closure}}(*mut function_names::generic_func::{closure#0});\n-// gdb-check:[...]static fn function_names::main::{{closure}}(*mut function_names::main::{closure#0});\n+// gdb-command:info functions -q function_names::.*::{closure.*\n+// gdb-check:[...]static fn function_names::generic_func::{closure#0}<i32>(*mut function_names::generic_func::{closure#0});\n+// gdb-check:[...]static fn function_names::main::{closure#0}(*mut function_names::main::{closure#0});\n+// gdb-check:[...]static fn function_names::{impl#2}::impl_function::{closure#0}<i32, i32>(*mut function_names::{impl#2}::impl_function::{closure#0});\n \n // Generator\n // Generators don't seem to appear in GDB's symbol table.\n \n // Const generic parameter\n // gdb-command:info functions -q function_names::const_generic_fn.*\n-// gdb-check:[...]static fn function_names::const_generic_fn_bool();\n-// gdb-check:[...]static fn function_names::const_generic_fn_non_int();\n-// gdb-check:[...]static fn function_names::const_generic_fn_signed_int();\n-// gdb-check:[...]static fn function_names::const_generic_fn_unsigned_int();\n+// gdb-check:[...]static fn function_names::const_generic_fn_bool<false>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_non_int<{CONST#fe3cfa0214ac55c7}>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_signed_int<-7>();\n+// gdb-check:[...]static fn function_names::const_generic_fn_unsigned_int<14>();\n \n // === CDB TESTS ===================================================================================\n \n@@ -103,7 +104,7 @@ fn main() {\n     GenericStruct::<TestStruct1, usize>::trait_function3();\n \n     // Generic function\n-    let _ = generic_func(42);\n+    let _ = generic_func(42i32);\n \n     // Closure\n     let closure = || { TestStruct1 };"}]}