{"sha": "171e656f64daf2384b97e4db1d2bcefd3ebe9950", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3MWU2NTZmNjRkYWYyMzg0Yjk3ZTRkYjFkMmJjZWZkM2ViZTk5NTA=", "commit": {"author": {"name": "Re\u0301my Rakic", "email": "remy.rakic@gmail.com", "date": "2018-09-12T23:10:57Z"}, "committer": {"name": "Re\u0301my Rakic", "email": "remy.rakic@gmail.com", "date": "2018-09-12T23:10:57Z"}, "message": "add non-regression test to existing attributes\n\nwhen `normalize_doc_attributes` is on, they shouldn't be affected", "tree": {"sha": "3890354ebdb8d1657b1d2233d888c02f12ede98d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3890354ebdb8d1657b1d2233d888c02f12ede98d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/171e656f64daf2384b97e4db1d2bcefd3ebe9950", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/171e656f64daf2384b97e4db1d2bcefd3ebe9950", "html_url": "https://github.com/rust-lang/rust/commit/171e656f64daf2384b97e4db1d2bcefd3ebe9950", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/171e656f64daf2384b97e4db1d2bcefd3ebe9950/comments", "author": {"login": "lqd", "id": 247183, "node_id": "MDQ6VXNlcjI0NzE4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/247183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lqd", "html_url": "https://github.com/lqd", "followers_url": "https://api.github.com/users/lqd/followers", "following_url": "https://api.github.com/users/lqd/following{/other_user}", "gists_url": "https://api.github.com/users/lqd/gists{/gist_id}", "starred_url": "https://api.github.com/users/lqd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lqd/subscriptions", "organizations_url": "https://api.github.com/users/lqd/orgs", "repos_url": "https://api.github.com/users/lqd/repos", "events_url": "https://api.github.com/users/lqd/events{/privacy}", "received_events_url": "https://api.github.com/users/lqd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lqd", "id": 247183, "node_id": "MDQ6VXNlcjI0NzE4Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/247183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lqd", "html_url": "https://github.com/lqd", "followers_url": "https://api.github.com/users/lqd/followers", "following_url": "https://api.github.com/users/lqd/following{/other_user}", "gists_url": "https://api.github.com/users/lqd/gists{/gist_id}", "starred_url": "https://api.github.com/users/lqd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lqd/subscriptions", "organizations_url": "https://api.github.com/users/lqd/orgs", "repos_url": "https://api.github.com/users/lqd/repos", "events_url": "https://api.github.com/users/lqd/events{/privacy}", "received_events_url": "https://api.github.com/users/lqd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4af0888648d58a0641d8f928fdf757bdd16f23c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/4af0888648d58a0641d8f928fdf757bdd16f23c2", "html_url": "https://github.com/rust-lang/rust/commit/4af0888648d58a0641d8f928fdf757bdd16f23c2"}], "stats": {"total": 108, "additions": 108, "deletions": 0}, "files": [{"sha": "5f78acdbcf5459fcd1f4ac3531cbb84ef32b3d1d", "filename": "tests/source/doc-attrib.rs", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/171e656f64daf2384b97e4db1d2bcefd3ebe9950/tests%2Fsource%2Fdoc-attrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/171e656f64daf2384b97e4db1d2bcefd3ebe9950/tests%2Fsource%2Fdoc-attrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fdoc-attrib.rs?ref=171e656f64daf2384b97e4db1d2bcefd3ebe9950", "patch": "@@ -23,3 +23,53 @@ mod tests {\n         }\n     }\n }\n+\n+// non-regression test for regular attributes, from #2647\n+#[cfg(feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")]\n+pub fn foo() {}\n+\n+// path attrs\n+#[clippy::bar]\n+#[clippy::bar=foo]\n+#[clippy::bar(a, b, c)]\n+pub fn foo() {}\n+\n+mod issue_2620 {\n+    #[derive(Debug, StructOpt)]\n+#[structopt(about = \"Display information about the character on FF Logs\")]\n+pub struct Params {\n+  #[structopt(help = \"The server the character is on\")]\n+  server: String,\n+  #[structopt(help = \"The character's first name\")]\n+  first_name: String,\n+  #[structopt(help = \"The character's last name\")]\n+  last_name: String,\n+  #[structopt(\n+    short = \"j\",\n+    long = \"job\",\n+    help = \"The job to look at\",\n+    parse(try_from_str)\n+  )]\n+  job: Option<Job>\n+}\n+}\n+\n+// non-regression test for regular attributes, from #2969\n+#[cfg(not(all(feature=\"std\",\n+              any(target_os = \"linux\", target_os = \"android\",\n+                  target_os = \"netbsd\",\n+                  target_os = \"dragonfly\",\n+                  target_os = \"haiku\",\n+                  target_os = \"emscripten\",\n+                  target_os = \"solaris\",\n+                  target_os = \"cloudabi\",\n+                  target_os = \"macos\", target_os = \"ios\",\n+                  target_os = \"freebsd\",\n+                  target_os = \"openbsd\", target_os = \"bitrig\",\n+                  target_os = \"redox\",\n+                  target_os = \"fuchsia\",\n+                  windows,\n+                  all(target_arch = \"wasm32\", feature = \"stdweb\"),\n+                  all(target_arch = \"wasm32\", feature = \"wasm-bindgen\"),\n+              ))))]\n+type Os = NoSource;"}, {"sha": "5b565223eff4d5281feab9dae7975ca863f2b3e0", "filename": "tests/target/doc-attrib.rs", "status": "modified", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/171e656f64daf2384b97e4db1d2bcefd3ebe9950/tests%2Ftarget%2Fdoc-attrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/171e656f64daf2384b97e4db1d2bcefd3ebe9950/tests%2Ftarget%2Fdoc-attrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fdoc-attrib.rs?ref=171e656f64daf2384b97e4db1d2bcefd3ebe9950", "patch": "@@ -27,3 +27,61 @@ mod tests {\n         }\n     }\n }\n+\n+// non-regression test for regular attributes, from #2647\n+#[cfg(\n+    feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n+)]\n+pub fn foo() {}\n+\n+// path attrs\n+#[clippy::bar]\n+#[clippy::bar=foo]\n+#[clippy::bar(a, b, c)]\n+pub fn foo() {}\n+\n+mod issue_2620 {\n+    #[derive(Debug, StructOpt)]\n+    #[structopt(about = \"Display information about the character on FF Logs\")]\n+    pub struct Params {\n+        #[structopt(help = \"The server the character is on\")]\n+        server: String,\n+        #[structopt(help = \"The character's first name\")]\n+        first_name: String,\n+        #[structopt(help = \"The character's last name\")]\n+        last_name: String,\n+        #[structopt(\n+            short = \"j\",\n+            long = \"job\",\n+            help = \"The job to look at\",\n+            parse(try_from_str)\n+        )]\n+        job: Option<Job>,\n+    }\n+}\n+\n+// non-regression test for regular attributes, from #2969\n+#[cfg(not(all(\n+    feature = \"std\",\n+    any(\n+        target_os = \"linux\",\n+        target_os = \"android\",\n+        target_os = \"netbsd\",\n+        target_os = \"dragonfly\",\n+        target_os = \"haiku\",\n+        target_os = \"emscripten\",\n+        target_os = \"solaris\",\n+        target_os = \"cloudabi\",\n+        target_os = \"macos\",\n+        target_os = \"ios\",\n+        target_os = \"freebsd\",\n+        target_os = \"openbsd\",\n+        target_os = \"bitrig\",\n+        target_os = \"redox\",\n+        target_os = \"fuchsia\",\n+        windows,\n+        all(target_arch = \"wasm32\", feature = \"stdweb\"),\n+        all(target_arch = \"wasm32\", feature = \"wasm-bindgen\"),\n+    )\n+)))]\n+type Os = NoSource;"}]}