{"sha": "4e901be57d23d1da21ad2e516a831ad3c16bfd85", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlOTAxYmU1N2QyM2QxZGEyMWFkMmU1MTZhODMxYWQzYzE2YmZkODU=", "commit": {"author": {"name": "Simon Vandel Sillesen", "email": "simon.vandel@gmail.com", "date": "2020-12-29T22:32:31Z"}, "committer": {"name": "Erik Desjardins", "email": "erikdesjardins@users.noreply.github.com", "date": "2021-03-13T22:58:11Z"}, "message": "Extend SimplifyLocals to remove ZST writes", "tree": {"sha": "378761c46c828149cca73d19f367a5abdd81ac56", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/378761c46c828149cca73d19f367a5abdd81ac56"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e901be57d23d1da21ad2e516a831ad3c16bfd85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e901be57d23d1da21ad2e516a831ad3c16bfd85", "html_url": "https://github.com/rust-lang/rust/commit/4e901be57d23d1da21ad2e516a831ad3c16bfd85", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e901be57d23d1da21ad2e516a831ad3c16bfd85/comments", "author": {"login": "simonvandel", "id": 2770647, "node_id": "MDQ6VXNlcjI3NzA2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2770647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonvandel", "html_url": "https://github.com/simonvandel", "followers_url": "https://api.github.com/users/simonvandel/followers", "following_url": "https://api.github.com/users/simonvandel/following{/other_user}", "gists_url": "https://api.github.com/users/simonvandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonvandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonvandel/subscriptions", "organizations_url": "https://api.github.com/users/simonvandel/orgs", "repos_url": "https://api.github.com/users/simonvandel/repos", "events_url": "https://api.github.com/users/simonvandel/events{/privacy}", "received_events_url": "https://api.github.com/users/simonvandel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erikdesjardins", "id": 7673145, "node_id": "MDQ6VXNlcjc2NzMxNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7673145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikdesjardins", "html_url": "https://github.com/erikdesjardins", "followers_url": "https://api.github.com/users/erikdesjardins/followers", "following_url": "https://api.github.com/users/erikdesjardins/following{/other_user}", "gists_url": "https://api.github.com/users/erikdesjardins/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikdesjardins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikdesjardins/subscriptions", "organizations_url": "https://api.github.com/users/erikdesjardins/orgs", "repos_url": "https://api.github.com/users/erikdesjardins/repos", "events_url": "https://api.github.com/users/erikdesjardins/events{/privacy}", "received_events_url": "https://api.github.com/users/erikdesjardins/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7e1dc158c3de232750b568163f6941a184ee8be", "url": "https://api.github.com/repos/rust-lang/rust/commits/e7e1dc158c3de232750b568163f6941a184ee8be", "html_url": "https://github.com/rust-lang/rust/commit/e7e1dc158c3de232750b568163f6941a184ee8be"}], "stats": {"total": 80, "additions": 40, "deletions": 40}, "files": [{"sha": "44e53cfa65984086a023d31fa178c639b6ba85d6", "filename": "compiler/rustc_mir/src/transform/simplify.rs", "status": "modified", "additions": 27, "deletions": 3, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fsimplify.rs?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -333,7 +333,7 @@ pub fn simplify_locals<'tcx>(body: &mut Body<'tcx>, tcx: TyCtxt<'tcx>) {\n     // count. For example, if we removed `_2 = discriminant(_1)`, then we'll subtract one from\n     // `use_counts[_1]`. That in turn might make `_1` unused, so we loop until we hit a\n     // fixedpoint where there are no more unused locals.\n-    remove_unused_definitions(&mut used_locals, body);\n+    remove_unused_definitions(&mut used_locals, body, tcx);\n \n     // Finally, we'll actually do the work of shrinking `body.local_decls` and remapping the `Local`s.\n     let map = make_local_map(&mut body.local_decls, &used_locals);\n@@ -462,12 +462,22 @@ impl Visitor<'_> for UsedLocals {\n }\n \n /// Removes unused definitions. Updates the used locals to reflect the changes made.\n-fn remove_unused_definitions<'a, 'tcx>(used_locals: &'a mut UsedLocals, body: &mut Body<'tcx>) {\n+fn remove_unused_definitions<'a, 'tcx>(\n+    used_locals: &'a mut UsedLocals,\n+    body: &mut Body<'tcx>,\n+    tcx: TyCtxt<'tcx>,\n+) {\n     // The use counts are updated as we remove the statements. A local might become unused\n     // during the retain operation, leading to a temporary inconsistency (storage statements or\n     // definitions referencing the local might remain). For correctness it is crucial that this\n     // computation reaches a fixed point.\n \n+    let def_id = body.source.def_id();\n+    let is_static = tcx.is_static(def_id);\n+    let param_env = tcx.param_env(def_id);\n+\n+    let local_decls = body.local_decls.clone();\n+\n     let mut modified = true;\n     while modified {\n         modified = false;\n@@ -479,7 +489,21 @@ fn remove_unused_definitions<'a, 'tcx>(used_locals: &'a mut UsedLocals, body: &m\n                     StatementKind::StorageLive(local) | StatementKind::StorageDead(local) => {\n                         used_locals.is_used(*local)\n                     }\n-                    StatementKind::Assign(box (place, _)) => used_locals.is_used(place.local),\n+                    StatementKind::Assign(box (place, _)) => {\n+                        let used = used_locals.is_used(place.local);\n+                        let mut is_zst = false;\n+\n+                        // ZST locals can be removed\n+                        if used && !is_static {\n+                            let ty = local_decls[place.local].ty;\n+                            let param_env_and = param_env.and(ty);\n+                            if let Ok(layout) = tcx.layout_of(param_env_and) {\n+                                is_zst = layout.is_zst();\n+                            }\n+                        }\n+\n+                        used && !is_zst\n+                    }\n \n                     StatementKind::SetDiscriminant { ref place, .. } => {\n                         used_locals.is_used(place.local)"}, {"sha": "974f174de8272f0f6fb359d387dcde8068633224", "filename": "src/test/codegen/naked-functions.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fcodegen%2Fnaked-functions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fcodegen%2Fnaked-functions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnaked-functions.rs?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -9,6 +9,7 @@\n #[naked]\n pub fn naked_empty() {\n     // CHECK-NEXT: {{.+}}:\n+    // CHECK-NEXT: %0 = alloca {}, align 1\n     // CHECK-NEXT: ret void\n }\n \n@@ -18,6 +19,7 @@ pub fn naked_empty() {\n // CHECK-NEXT: define void @naked_with_args(i{{[0-9]+( %a)?}})\n pub fn naked_with_args(a: isize) {\n     // CHECK-NEXT: {{.+}}:\n+    // CHECK-NEXT: %0 = alloca {}, align 1\n     // CHECK: ret void\n }\n "}, {"sha": "30512d0bbe8747db0e327e055e8179044d7d571c", "filename": "src/test/mir-opt/const_prop/control_flow_simplification.hello.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Fcontrol_flow_simplification.hello.PreCodegen.before.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -4,7 +4,6 @@ fn hello() -> () {\n     let mut _0: ();                      // return place in scope 0 at $DIR/control-flow-simplification.rs:11:14: 11:14\n \n     bb0: {\n-        _0 = const ();                   // scope 0 at $DIR/control-flow-simplification.rs:14:6: 14:6\n         return;                          // scope 0 at $DIR/control-flow-simplification.rs:15:2: 15:2\n     }\n }"}, {"sha": "c6f1d86ae3a0743f43a68963f72d064e97736363", "filename": "src/test/mir-opt/const_prop/optimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.32bit.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -22,7 +22,6 @@ fn main() -> () {\n         _2 = const 3_i32;                // scope 1 at $DIR/optimizes_into_variable.rs:13:13: 13:34\n         StorageLive(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:14:9: 14:10\n         _3 = const 42_u32;               // scope 2 at $DIR/optimizes_into_variable.rs:14:13: 14:38\n-        _0 = const ();                   // scope 0 at $DIR/optimizes_into_variable.rs:11:11: 15:2\n         StorageDead(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_2);                 // scope 1 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_1);                 // scope 0 at $DIR/optimizes_into_variable.rs:15:1: 15:2"}, {"sha": "c6f1d86ae3a0743f43a68963f72d064e97736363", "filename": "src/test/mir-opt/const_prop/optimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fconst_prop%2Foptimizes_into_variable.main.SimplifyLocals.after.64bit.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -22,7 +22,6 @@ fn main() -> () {\n         _2 = const 3_i32;                // scope 1 at $DIR/optimizes_into_variable.rs:13:13: 13:34\n         StorageLive(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:14:9: 14:10\n         _3 = const 42_u32;               // scope 2 at $DIR/optimizes_into_variable.rs:14:13: 14:38\n-        _0 = const ();                   // scope 0 at $DIR/optimizes_into_variable.rs:11:11: 15:2\n         StorageDead(_3);                 // scope 2 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_2);                 // scope 1 at $DIR/optimizes_into_variable.rs:15:1: 15:2\n         StorageDead(_1);                 // scope 0 at $DIR/optimizes_into_variable.rs:15:1: 15:2"}, {"sha": "621a747e131ddb9d7f58d24ed78b7e73b29a1fc9", "filename": "src/test/mir-opt/dest-prop/cycle.main.DestinationPropagation.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fdest-prop%2Fcycle.main.DestinationPropagation.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -56,7 +56,6 @@\n           StorageLive(_6);                 // scope 3 at $DIR/cycle.rs:14:10: 14:11\n -         _6 = _1;                         // scope 3 at $DIR/cycle.rs:14:10: 14:11\n +         _6 = _4;                         // scope 3 at $DIR/cycle.rs:14:10: 14:11\n-          _5 = const ();                   // scope 4 at $DIR/cycle.rs:14:5: 14:12\n           StorageDead(_6);                 // scope 3 at $DIR/cycle.rs:14:11: 14:12\n           StorageDead(_5);                 // scope 3 at $DIR/cycle.rs:14:12: 14:13\n           _0 = const ();                   // scope 0 at $DIR/cycle.rs:8:11: 15:2"}, {"sha": "a3368dcfcc6c77aba6f993cf6151fb6c1162491c", "filename": "src/test/mir-opt/dest-prop/union.main.DestinationPropagation.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fdest-prop%2Funion.main.DestinationPropagation.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -31,7 +31,6 @@\n           StorageLive(_3);                 // scope 1 at $DIR/union.rs:15:5: 15:27\n           StorageLive(_4);                 // scope 1 at $DIR/union.rs:15:10: 15:26\n           _4 = (_1.0: u32);                // scope 2 at $DIR/union.rs:15:19: 15:24\n-          _3 = const ();                   // scope 3 at $DIR/union.rs:15:5: 15:27\n           StorageDead(_4);                 // scope 1 at $DIR/union.rs:15:26: 15:27\n           StorageDead(_3);                 // scope 1 at $DIR/union.rs:15:27: 15:28\n           _0 = const ();                   // scope 0 at $DIR/union.rs:8:11: 16:2"}, {"sha": "77eb326cd82637ed6bd8308d4385da1db692129b", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_no_sanitize.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_no_sanitize.Inline.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -16,7 +16,6 @@\n -     }\n - \n -     bb1: {\n-+         _1 = const ();                   // scope 1 at $DIR/inline-compatibility.rs:24:5: 24:18\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:24:18: 24:19\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:23:37: 25:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:25:2: 25:2"}, {"sha": "a32db48715c230c41005e66b8000c6d807a2db5e", "filename": "src/test/mir-opt/inline/inline_compatibility.inlined_target_feature.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_compatibility.inlined_target_feature.Inline.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -16,7 +16,6 @@\n -     }\n - \n -     bb1: {\n-+         _1 = const ();                   // scope 1 at $DIR/inline-compatibility.rs:13:5: 13:21\n           StorageDead(_1);                 // scope 0 at $DIR/inline-compatibility.rs:13:21: 13:22\n           _0 = const ();                   // scope 0 at $DIR/inline-compatibility.rs:12:40: 14:2\n           return;                          // scope 0 at $DIR/inline-compatibility.rs:14:2: 14:2"}, {"sha": "aaf65c5d0a5f330eecd2e342247a3cd287fd7555", "filename": "src/test/mir-opt/inline/inline_cycle.two.Inline.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_cycle.two.Inline.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -37,7 +37,6 @@\n +         StorageDead(_5);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_4);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_3);                 // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n-+         _1 = const ();                   // scope 1 at $DIR/inline-cycle.rs:49:5: 49:12\n +         StorageDead(_2);                 // scope 0 at $DIR/inline-cycle.rs:49:5: 49:12\n           StorageDead(_1);                 // scope 0 at $DIR/inline-cycle.rs:49:12: 49:13\n           _0 = const ();                   // scope 0 at $DIR/inline-cycle.rs:48:10: 50:2"}, {"sha": "865cf25863fdc33afa9cfc21902cc2c54ff4f56a", "filename": "src/test/mir-opt/inline/inline_options.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline_options.main.Inline.after.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -48,7 +48,6 @@ fn main() -> () {\n \n     bb4: {\n         StorageDead(_5);                 // scope 1 at $DIR/inline-options.rs:10:5: 10:21\n-        _2 = const ();                   // scope 1 at $DIR/inline-options.rs:10:5: 10:21\n         StorageDead(_2);                 // scope 0 at $DIR/inline-options.rs:10:21: 10:22\n         _0 = const ();                   // scope 0 at $DIR/inline-options.rs:8:11: 11:2\n         return;                          // scope 0 at $DIR/inline-options.rs:11:2: 11:2"}, {"sha": "d62f78eaa322b7d62ee14f48031853dcc3d0f0e7", "filename": "src/test/mir-opt/inline/issue_76997_inline_scopes_parenting.main.Inline.after.mir", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Fissue_76997_inline_scopes_parenting.main.Inline.after.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -28,8 +28,6 @@ fn main() -> () {\n         StorageLive(_5);                 // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         _5 = move (_3.0: ());            // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageLive(_6);                 // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n-        _6 = const ();                   // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n-        _0 = const ();                   // scope 3 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_6);                 // scope 2 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_5);                 // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:5: 6:10\n         StorageDead(_4);                 // scope 1 at $DIR/issue-76997-inline-scopes-parenting.rs:6:9: 6:10"}, {"sha": "f6e6614bb6eceea25cbeda7585439102d9d1bf92", "filename": "src/test/mir-opt/issue_73223.main.PreCodegen.32bit.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.32bit.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -117,7 +117,6 @@\n           StorageDead(_10);                // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_9);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_6);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-          _0 = const ();                   // scope 0 at $DIR/issue-73223.rs:1:11: 9:2\n           StorageDead(_4);                 // scope 1 at $DIR/issue-73223.rs:9:1: 9:2\n           StorageDead(_1);                 // scope 0 at $DIR/issue-73223.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/issue-73223.rs:9:2: 9:2"}, {"sha": "f6e6614bb6eceea25cbeda7585439102d9d1bf92", "filename": "src/test/mir-opt/issue_73223.main.PreCodegen.64bit.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue_73223.main.PreCodegen.64bit.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -117,7 +117,6 @@\n           StorageDead(_10);                // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_9);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n           StorageDead(_6);                 // scope 3 at $SRC_DIR/core/src/macros/mod.rs:LL:COL\n-          _0 = const ();                   // scope 0 at $DIR/issue-73223.rs:1:11: 9:2\n           StorageDead(_4);                 // scope 1 at $DIR/issue-73223.rs:9:1: 9:2\n           StorageDead(_1);                 // scope 0 at $DIR/issue-73223.rs:9:1: 9:2\n           return;                          // scope 0 at $DIR/issue-73223.rs:9:2: 9:2"}, {"sha": "380f6ce9ba73ed6ddbf25e400260200ae489e441", "filename": "src/test/mir-opt/lower_intrinsics.f_u64.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_u64.PreCodegen.before.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -27,7 +27,6 @@ fn f_u64() -> () {\n         StorageDead(_3);                 // scope 1 at $DIR/lower_intrinsics.rs:35:5: 35:21\n         StorageDead(_2);                 // scope 1 at $DIR/lower_intrinsics.rs:35:5: 35:21\n         StorageDead(_1);                 // scope 0 at $DIR/lower_intrinsics.rs:35:5: 35:21\n-        _0 = const ();                   // scope 0 at $DIR/lower_intrinsics.rs:34:16: 36:2\n         return;                          // scope 0 at $DIR/lower_intrinsics.rs:36:2: 36:2\n     }\n }"}, {"sha": "2b9ffaaf971087b52fdb34606170765885862268", "filename": "src/test/mir-opt/lower_intrinsics.f_unit.PreCodegen.before.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Flower_intrinsics.f_unit.PreCodegen.before.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -22,7 +22,6 @@ fn f_unit() -> () {\n     bb1: {\n         StorageDead(_2);                 // scope 1 at $DIR/lower_intrinsics.rs:29:5: 29:19\n         StorageDead(_1);                 // scope 0 at $DIR/lower_intrinsics.rs:29:18: 29:19\n-        _0 = const ();                   // scope 0 at $DIR/lower_intrinsics.rs:28:17: 30:2\n         return;                          // scope 0 at $DIR/lower_intrinsics.rs:30:2: 30:2\n     }\n }"}, {"sha": "3dd526cfbc5e29b6d374ef14ebba4ea3c17a076e", "filename": "src/test/mir-opt/multiple_return_terminators.test.MultipleReturnTerminators.diff", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmultiple_return_terminators.test.MultipleReturnTerminators.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -13,12 +13,10 @@\n       }\n   \n       bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/multiple_return_terminators.rs:5:10: 7:6\n           goto -> bb3;                     // scope 0 at $DIR/multiple_return_terminators.rs:5:5: 9:6\n       }\n   \n       bb2: {\n-          _0 = const ();                   // scope 0 at $DIR/multiple_return_terminators.rs:7:12: 9:6\n           goto -> bb3;                     // scope 0 at $DIR/multiple_return_terminators.rs:5:5: 9:6\n       }\n   "}, {"sha": "2fc64fa8f524dda55c48f2341772a10099a46ac0", "filename": "src/test/mir-opt/remove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n           _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n       }\n   "}, {"sha": "18fdac1bc00442f4362e5dd5d53ebae48aa3fd9b", "filename": "src/test/mir-opt/remove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n           _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n       }\n   "}, {"sha": "1eb3d736765ede4814c4c240977eabeb020ee91a", "filename": "src/test/mir-opt/remove_unneeded_drops.opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n           _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n -         drop(_3) -> bb1;                 // scope 1 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n -     }\n - "}, {"sha": "9b8a50e85416b5047cadc25459ef6cee8a73ec74", "filename": "src/test/mir-opt/remove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -14,7 +14,6 @@\n           StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n           StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n           _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n-          _2 = const ();                   // scope 1 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n -         drop(_3) -> bb1;                 // scope 1 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n -     }\n - "}, {"sha": "ff9e2671adc7b2cae87546c2117a992016bd5454", "filename": "src/test/mir-opt/simplify_locals.c.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.c.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -25,7 +25,7 @@\n -         StorageDead(_3);                 // scope 1 at $DIR/simplify-locals.rs:16:25: 16:26\n -         StorageDead(_4);                 // scope 1 at $DIR/simplify-locals.rs:16:26: 16:27\n -         StorageDead(_2);                 // scope 1 at $DIR/simplify-locals.rs:16:26: 16:27\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:13:8: 17:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:13:8: 17:2\n           StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:17:1: 17:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:17:2: 17:2\n       }"}, {"sha": "caa2a17700bcc6130b84f7705432dbd44a1d68be", "filename": "src/test/mir-opt/simplify_locals.d1.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d1.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -11,7 +11,7 @@\n -         StorageLive(_1);                 // scope 0 at $DIR/simplify-locals.rs:22:13: 22:17\n -         discriminant(_1) = 0;            // scope 0 at $DIR/simplify-locals.rs:22:13: 22:17\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:22:17: 22:18\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:20:9: 23:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:20:9: 23:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:23:2: 23:2\n       }\n   }"}, {"sha": "80496d9a42ab35622454c7ed51ac49e96fe3d6c0", "filename": "src/test/mir-opt/simplify_locals.d2.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.d2.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -31,7 +31,7 @@\n -                                          // + literal: Const { ty: E, val: Value(Scalar(0x01)) }\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:28:25: 28:26\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:28:26: 28:27\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:26:9: 29:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:26:9: 29:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:29:2: 29:2\n       }\n   }"}, {"sha": "7d36e1a992855db853a9889c482372a50769f2ea", "filename": "src/test/mir-opt/simplify_locals.r.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.r.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -23,7 +23,7 @@\n -         StorageLive(_3);                 // scope 2 at $DIR/simplify-locals.rs:36:13: 36:19\n -         _3 = &mut _1;                    // scope 2 at $DIR/simplify-locals.rs:36:13: 36:19\n -         StorageDead(_3);                 // scope 2 at $DIR/simplify-locals.rs:36:19: 36:20\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:32:8: 37:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:32:8: 37:2\n           StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:37:1: 37:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:37:2: 37:2\n       }"}, {"sha": "89275418d68f066488ffa88cc6eb4de64ff11d60", "filename": "src/test/mir-opt/simplify_locals.t1.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t1.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -15,7 +15,7 @@\n -         _1 = (*_2);                      // scope 1 at $DIR/simplify-locals.rs:44:14: 44:15\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:44:17: 44:18\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:44:17: 44:18\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:42:9: 45:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:42:9: 45:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:45:2: 45:2\n       }\n   }"}, {"sha": "b2344c871e423953f73db254f639e0d37271908b", "filename": "src/test/mir-opt/simplify_locals.t2.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t2.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -15,7 +15,7 @@\n -         _1 = &mut (*_2);                 // scope 1 at $DIR/simplify-locals.rs:50:14: 50:20\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:50:22: 50:23\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:50:22: 50:23\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:48:9: 51:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:48:9: 51:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:51:2: 51:2\n       }\n   }"}, {"sha": "95982f0a9cffe08406d56caab35cee3b4506d206", "filename": "src/test/mir-opt/simplify_locals.t3.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals.t3.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -19,7 +19,7 @@\n -         StorageDead(_3);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n -         StorageDead(_2);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n -         StorageDead(_1);                 // scope 0 at $DIR/simplify-locals.rs:56:23: 56:24\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:54:9: 57:2\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals.rs:54:9: 57:2\n           return;                          // scope 0 at $DIR/simplify-locals.rs:57:2: 57:2\n       }\n   }"}, {"sha": "69da1c7be88425974e61e6f9735a919571fd3fdb", "filename": "src/test/mir-opt/simplify_locals_fixedpoint.foo.SimplifyLocals.diff", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals_fixedpoint.foo.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -30,7 +30,7 @@\n       }\n   \n       bb1: {\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals-fixedpoint.rs:8:6: 8:6\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals-fixedpoint.rs:8:6: 8:6\n           goto -> bb7;                     // scope 0 at $DIR/simplify-locals-fixedpoint.rs:4:5: 8:6\n       }\n   \n@@ -51,12 +51,12 @@\n       }\n   \n       bb4: {\n-          _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:21: 7:10\n+-         _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:21: 7:10\n           goto -> bb6;                     // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:9: 7:10\n       }\n   \n       bb5: {\n-          _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:7:10: 7:10\n+-         _0 = const ();                   // scope 1 at $DIR/simplify-locals-fixedpoint.rs:7:10: 7:10\n           goto -> bb6;                     // scope 1 at $DIR/simplify-locals-fixedpoint.rs:5:9: 7:10\n       }\n   "}, {"sha": "8d6d531bd34e0f58ca018020d940dca93dc5910d", "filename": "src/test/mir-opt/simplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fsimplify_locals_removes_unused_consts.main.SimplifyLocals.diff?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -71,8 +71,8 @@\n -         StorageDead(_9);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:34: 16:35\n -         StorageDead(_11);                // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n -         StorageDead(_8);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n+-         _0 = const ();                   // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:12:11: 17:2\n +         StorageDead(_2);                 // scope 1 at $DIR/simplify-locals-removes-unused-consts.rs:16:35: 16:36\n-          _0 = const ();                   // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:12:11: 17:2\n           return;                          // scope 0 at $DIR/simplify-locals-removes-unused-consts.rs:17:2: 17:2\n       }\n   }"}, {"sha": "eeaabb7b9884eb16812f8f5a1cb174051e21e510", "filename": "src/test/mir-opt/uninhabited_enum.process_void.SimplifyLocals.after.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funinhabited_enum.process_void.SimplifyLocals.after.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -13,7 +13,6 @@ fn process_void(_1: *const Void) -> () {\n     bb0: {\n         StorageLive(_2);                 // scope 0 at $DIR/uninhabited-enum.rs:14:8: 14:14\n         _2 = &(*_1);                     // scope 2 at $DIR/uninhabited-enum.rs:14:26: 14:33\n-        _0 = const ();                   // scope 0 at $DIR/uninhabited-enum.rs:13:41: 17:2\n         StorageDead(_2);                 // scope 0 at $DIR/uninhabited-enum.rs:17:1: 17:2\n         return;                          // scope 0 at $DIR/uninhabited-enum.rs:17:2: 17:2\n     }"}, {"sha": "b6767077d429a1a1940cfd6e7205798638e3dbb0", "filename": "src/test/mir-opt/while_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.32bit.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -10,7 +10,6 @@ fn change_loop_body() -> () {\n     bb0: {\n         StorageLive(_1);                 // scope 0 at $DIR/while_let_loops.rs:6:9: 6:15\n         _1 = const 0_i32;                // scope 0 at $DIR/while_let_loops.rs:6:18: 6:19\n-        _0 = const ();                   // scope 1 at $DIR/while_let_loops.rs:7:5: 10:6\n         StorageDead(_1);                 // scope 0 at $DIR/while_let_loops.rs:11:1: 11:2\n         return;                          // scope 0 at $DIR/while_let_loops.rs:11:2: 11:2\n     }"}, {"sha": "b6767077d429a1a1940cfd6e7205798638e3dbb0", "filename": "src/test/mir-opt/while_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_let_loops.change_loop_body.PreCodegen.after.64bit.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -10,7 +10,6 @@ fn change_loop_body() -> () {\n     bb0: {\n         StorageLive(_1);                 // scope 0 at $DIR/while_let_loops.rs:6:9: 6:15\n         _1 = const 0_i32;                // scope 0 at $DIR/while_let_loops.rs:6:18: 6:19\n-        _0 = const ();                   // scope 1 at $DIR/while_let_loops.rs:7:5: 10:6\n         StorageDead(_1);                 // scope 0 at $DIR/while_let_loops.rs:11:1: 11:2\n         return;                          // scope 0 at $DIR/while_let_loops.rs:11:2: 11:2\n     }"}, {"sha": "eb3ab1c31e36c8e138a2f23e1343cc580a59e0af", "filename": "src/test/mir-opt/while_storage.while_loop.PreCodegen.after.mir", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/4e901be57d23d1da21ad2e516a831ad3c16bfd85/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fwhile_storage.while_loop.PreCodegen.after.mir?ref=4e901be57d23d1da21ad2e516a831ad3c16bfd85", "patch": "@@ -24,7 +24,6 @@ fn while_loop(_1: bool) -> () {\n     }\n \n     bb2: {\n-        _0 = const ();                   // scope 0 at $DIR/while-storage.rs:10:5: 14:6\n         goto -> bb7;                     // scope 0 at $DIR/while-storage.rs:10:5: 14:6\n     }\n \n@@ -44,7 +43,6 @@ fn while_loop(_1: bool) -> () {\n     }\n \n     bb5: {\n-        _0 = const ();                   // scope 0 at $DIR/while-storage.rs:12:13: 12:18\n         StorageDead(_4);                 // scope 0 at $DIR/while-storage.rs:13:9: 13:10\n         goto -> bb7;                     // scope 0 at $DIR/while-storage.rs:1:1: 1:1\n     }"}]}