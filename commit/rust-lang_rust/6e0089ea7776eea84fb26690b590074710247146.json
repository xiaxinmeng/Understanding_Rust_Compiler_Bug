{"sha": "6e0089ea7776eea84fb26690b590074710247146", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlMDA4OWVhNzc3NmVlYTg0ZmIyNjY5MGI1OTAwNzQ3MTAyNDcxNDY=", "commit": {"author": {"name": "varkor", "email": "github@varkor.com", "date": "2018-04-10T21:30:23Z"}, "committer": {"name": "varkor", "email": "github@varkor.com", "date": "2018-04-10T21:30:23Z"}, "message": "Do not uppercase-lint no_mangle statics", "tree": {"sha": "57292589496696e1b92d8079a7c595e01585e3ee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57292589496696e1b92d8079a7c595e01585e3ee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e0089ea7776eea84fb26690b590074710247146", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e0089ea7776eea84fb26690b590074710247146", "html_url": "https://github.com/rust-lang/rust/commit/6e0089ea7776eea84fb26690b590074710247146", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e0089ea7776eea84fb26690b590074710247146/comments", "author": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b9b70c394e7f341b4016fce4cbf763d404b26f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b9b70c394e7f341b4016fce4cbf763d404b26f9", "html_url": "https://github.com/rust-lang/rust/commit/4b9b70c394e7f341b4016fce4cbf763d404b26f9"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "463ec4796e8b628e37a76d96b4f90dcba1ee93bb", "filename": "src/librustc_lint/bad_style.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6e0089ea7776eea84fb26690b590074710247146/src%2Flibrustc_lint%2Fbad_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e0089ea7776eea84fb26690b590074710247146/src%2Flibrustc_lint%2Fbad_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbad_style.rs?ref=6e0089ea7776eea84fb26690b590074710247146", "patch": "@@ -368,6 +368,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NonUpperCaseGlobals {\n     fn check_item(&mut self, cx: &LateContext, it: &hir::Item) {\n         match it.node {\n             hir::ItemStatic(..) => {\n+                if attr::find_by_name(&it.attrs, \"no_mangle\").is_some() {\n+                    return;\n+                }\n                 NonUpperCaseGlobals::check_upper_case(cx, \"static variable\", it.name, it.span);\n             }\n             hir::ItemConst(..) => {"}, {"sha": "84cc24a00109f5eb7dadbd3dc5ddf770fe0b3fcd", "filename": "src/test/compile-fail/lint-non-uppercase-statics.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6e0089ea7776eea84fb26690b590074710247146/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e0089ea7776eea84fb26690b590074710247146/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs?ref=6e0089ea7776eea84fb26690b590074710247146", "patch": "@@ -16,4 +16,7 @@ static foo: isize = 1; //~ ERROR static variable `foo` should have an upper case\n static mut bar: isize = 1;\n         //~^ ERROR static variable `bar` should have an upper case name such as `BAR`\n \n+#[no_mangle]\n+pub static extern_foo: isize = 1; // OK, because #[no_mangle] supersedes the warning\n+\n fn main() { }"}]}