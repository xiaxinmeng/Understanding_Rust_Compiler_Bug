{"sha": "f52066726dd24ae07b1991b53f48ffa25c2b716d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY1MjA2NjcyNmRkMjRhZTA3YjE5OTFiNTNmNDhmZmEyNWMyYjcxNmQ=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-01-26T15:21:00Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-01-26T16:16:58Z"}, "message": "Fix assertion in `MaybeUninit::array_assume_init()` for zero-length arrays", "tree": {"sha": "4f877a70e4bff9f0cbae723f050eece8faae92e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f877a70e4bff9f0cbae723f050eece8faae92e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f52066726dd24ae07b1991b53f48ffa25c2b716d", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYBBAehUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLgKCAD/QPIV6ZJTvaTbo2oY3onzvE+lb6xo\nrAc+9Wqe/55jmzQBAP/NyGqzMETiXMTBIHtoyimzDAtqzQp/gz+jesPvuQEI\n=Uhej\n-----END PGP SIGNATURE-----", "payload": "tree 4f877a70e4bff9f0cbae723f050eece8faae92e0\nparent 1483e67addd37d9bd20ba3b4613b678ee9ad4d68\nauthor hyd-dev <yd-huang@outlook.com> 1611674460 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1611677818 +0800\n\nFix assertion in `MaybeUninit::array_assume_init()` for zero-length arrays\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f52066726dd24ae07b1991b53f48ffa25c2b716d", "html_url": "https://github.com/rust-lang/rust/commit/f52066726dd24ae07b1991b53f48ffa25c2b716d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f52066726dd24ae07b1991b53f48ffa25c2b716d/comments", "author": null, "committer": null, "parents": [{"sha": "1483e67addd37d9bd20ba3b4613b678ee9ad4d68", "url": "https://api.github.com/repos/rust-lang/rust/commits/1483e67addd37d9bd20ba3b4613b678ee9ad4d68", "html_url": "https://github.com/rust-lang/rust/commit/1483e67addd37d9bd20ba3b4613b678ee9ad4d68"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "05bcd90d3ca76d67ba6119bf89377f53facf4abe", "filename": "library/core/src/mem/maybe_uninit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f52066726dd24ae07b1991b53f48ffa25c2b716d/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f52066726dd24ae07b1991b53f48ffa25c2b716d/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fmem%2Fmaybe_uninit.rs?ref=f52066726dd24ae07b1991b53f48ffa25c2b716d", "patch": "@@ -839,7 +839,7 @@ impl<T> MaybeUninit<T> {\n         // * MaybeUnint does not drop, so there are no double-frees\n         // And thus the conversion is safe\n         unsafe {\n-            intrinsics::assert_inhabited::<T>();\n+            intrinsics::assert_inhabited::<[T; N]>();\n             (&array as *const _ as *const [T; N]).read()\n         }\n     }"}, {"sha": "38084f401bce68d6e406b16905dc3cbbea6db2d4", "filename": "library/core/tests/mem.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f52066726dd24ae07b1991b53f48ffa25c2b716d/library%2Fcore%2Ftests%2Fmem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f52066726dd24ae07b1991b53f48ffa25c2b716d/library%2Fcore%2Ftests%2Fmem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Fmem.rs?ref=f52066726dd24ae07b1991b53f48ffa25c2b716d", "patch": "@@ -152,6 +152,8 @@ fn uninit_array_assume_init() {\n     let array = unsafe { MaybeUninit::array_assume_init(array) };\n \n     assert_eq!(array, [3, 1, 4, 1, 5]);\n+\n+    let [] = unsafe { MaybeUninit::<!>::array_assume_init([]) };\n }\n \n #[test]"}]}