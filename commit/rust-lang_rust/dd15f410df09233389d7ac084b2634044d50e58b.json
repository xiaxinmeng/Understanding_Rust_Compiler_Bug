{"sha": "dd15f410df09233389d7ac084b2634044d50e58b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRkMTVmNDEwZGYwOTIzMzM4OWQ3YWMwODRiMjYzNDA0NGQ1MGU1OGI=", "commit": {"author": {"name": "Daniel Henry-Mantilla", "email": "daniel.henry.mantilla@gmail.com", "date": "2020-12-27T20:15:01Z"}, "committer": {"name": "Daniel Henry-Mantilla", "email": "daniel.henry.mantilla@gmail.com", "date": "2021-01-06T14:13:39Z"}, "message": "WIP: attempt to fix the undocument re-export issue", "tree": {"sha": "6db3636cf81f2d1c2f6273e98e4e295d08f3ae4f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6db3636cf81f2d1c2f6273e98e4e295d08f3ae4f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dd15f410df09233389d7ac084b2634044d50e58b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dd15f410df09233389d7ac084b2634044d50e58b", "html_url": "https://github.com/rust-lang/rust/commit/dd15f410df09233389d7ac084b2634044d50e58b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dd15f410df09233389d7ac084b2634044d50e58b/comments", "author": {"login": "danielhenrymantilla", "id": 9920355, "node_id": "MDQ6VXNlcjk5MjAzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9920355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielhenrymantilla", "html_url": "https://github.com/danielhenrymantilla", "followers_url": "https://api.github.com/users/danielhenrymantilla/followers", "following_url": "https://api.github.com/users/danielhenrymantilla/following{/other_user}", "gists_url": "https://api.github.com/users/danielhenrymantilla/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielhenrymantilla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielhenrymantilla/subscriptions", "organizations_url": "https://api.github.com/users/danielhenrymantilla/orgs", "repos_url": "https://api.github.com/users/danielhenrymantilla/repos", "events_url": "https://api.github.com/users/danielhenrymantilla/events{/privacy}", "received_events_url": "https://api.github.com/users/danielhenrymantilla/received_events", "type": "User", "site_admin": false}, "committer": {"login": "danielhenrymantilla", "id": 9920355, "node_id": "MDQ6VXNlcjk5MjAzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/9920355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielhenrymantilla", "html_url": "https://github.com/danielhenrymantilla", "followers_url": "https://api.github.com/users/danielhenrymantilla/followers", "following_url": "https://api.github.com/users/danielhenrymantilla/following{/other_user}", "gists_url": "https://api.github.com/users/danielhenrymantilla/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielhenrymantilla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielhenrymantilla/subscriptions", "organizations_url": "https://api.github.com/users/danielhenrymantilla/orgs", "repos_url": "https://api.github.com/users/danielhenrymantilla/repos", "events_url": "https://api.github.com/users/danielhenrymantilla/events{/privacy}", "received_events_url": "https://api.github.com/users/danielhenrymantilla/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28e9c6723a9111b649384ca909eded20c18c76a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/28e9c6723a9111b649384ca909eded20c18c76a3", "html_url": "https://github.com/rust-lang/rust/commit/28e9c6723a9111b649384ca909eded20c18c76a3"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "6332130f80e8c5e7daf7ba6fc5b31224b0bf6b7f", "filename": "compiler/rustc_privacy/src/lib.rs", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/dd15f410df09233389d7ac084b2634044d50e58b/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dd15f410df09233389d7ac084b2634044d50e58b/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_privacy%2Fsrc%2Flib.rs?ref=dd15f410df09233389d7ac084b2634044d50e58b", "patch": "@@ -832,8 +832,19 @@ impl Visitor<'tcx> for EmbargoVisitor<'tcx> {\n     }\n \n     fn visit_macro_def(&mut self, md: &'tcx hir::MacroDef<'tcx>) {\n-        if attr::find_transparency(&self.tcx.sess, &md.attrs, md.ast.macro_rules).0\n-            != Transparency::Opaque\n+        // HACK (or fix?): a\n+        // ```rust,ignore (dummy example)\n+        // mod private {\n+        //     #[rustc_macro_transparency(semitransparent)]\n+        //     pub macro m { \u2026 }\n+        // }\n+        // ```\n+        // is *not* `Public`ly reachable and yet this shortcut would express\n+        // that.\n+        // FIXME!\n+        if md.ast.macro_rules\n+            && attr::find_transparency(&self.tcx.sess, &md.attrs, md.ast.macro_rules).0\n+                != Transparency::Opaque\n         {\n             self.update(md.hir_id, Some(AccessLevel::Public));\n             return;"}]}