{"sha": "89cc0467a2a5af872f05830be68b60adf4669e01", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5Y2MwNDY3YTJhNWFmODcyZjA1ODMwYmU2OGI2MGFkZjQ2NjllMDE=", "commit": {"author": {"name": "ben", "email": "benlewisj@gmail.com", "date": "2019-10-09T19:11:31Z"}, "committer": {"name": "ben", "email": "benlewisj@gmail.com", "date": "2019-10-09T19:11:31Z"}, "message": "Pretty print raw pointers in consts as '{pointer}'.", "tree": {"sha": "9f9c51a08389a3bce1506285e8ef72f270dd19f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f9c51a08389a3bce1506285e8ef72f270dd19f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89cc0467a2a5af872f05830be68b60adf4669e01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89cc0467a2a5af872f05830be68b60adf4669e01", "html_url": "https://github.com/rust-lang/rust/commit/89cc0467a2a5af872f05830be68b60adf4669e01", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89cc0467a2a5af872f05830be68b60adf4669e01/comments", "author": {"login": "BenLewis-Seequent", "id": 7391596, "node_id": "MDQ6VXNlcjczOTE1OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7391596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenLewis-Seequent", "html_url": "https://github.com/BenLewis-Seequent", "followers_url": "https://api.github.com/users/BenLewis-Seequent/followers", "following_url": "https://api.github.com/users/BenLewis-Seequent/following{/other_user}", "gists_url": "https://api.github.com/users/BenLewis-Seequent/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenLewis-Seequent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenLewis-Seequent/subscriptions", "organizations_url": "https://api.github.com/users/BenLewis-Seequent/orgs", "repos_url": "https://api.github.com/users/BenLewis-Seequent/repos", "events_url": "https://api.github.com/users/BenLewis-Seequent/events{/privacy}", "received_events_url": "https://api.github.com/users/BenLewis-Seequent/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BenLewis-Seequent", "id": 7391596, "node_id": "MDQ6VXNlcjczOTE1OTY=", "avatar_url": "https://avatars.githubusercontent.com/u/7391596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BenLewis-Seequent", "html_url": "https://github.com/BenLewis-Seequent", "followers_url": "https://api.github.com/users/BenLewis-Seequent/followers", "following_url": "https://api.github.com/users/BenLewis-Seequent/following{/other_user}", "gists_url": "https://api.github.com/users/BenLewis-Seequent/gists{/gist_id}", "starred_url": "https://api.github.com/users/BenLewis-Seequent/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BenLewis-Seequent/subscriptions", "organizations_url": "https://api.github.com/users/BenLewis-Seequent/orgs", "repos_url": "https://api.github.com/users/BenLewis-Seequent/repos", "events_url": "https://api.github.com/users/BenLewis-Seequent/events{/privacy}", "received_events_url": "https://api.github.com/users/BenLewis-Seequent/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5986fe24bd40162f11aca0327d2ecd62973c354d", "url": "https://api.github.com/repos/rust-lang/rust/commits/5986fe24bd40162f11aca0327d2ecd62973c354d", "html_url": "https://github.com/rust-lang/rust/commit/5986fe24bd40162f11aca0327d2ecd62973c354d"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "c4967f8d66da20a74a3bd3ed375b21b1df741226", "filename": "src/librustc/ty/print/pretty.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/89cc0467a2a5af872f05830be68b60adf4669e01/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89cc0467a2a5af872f05830be68b60adf4669e01/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs?ref=89cc0467a2a5af872f05830be68b60adf4669e01", "patch": "@@ -919,6 +919,7 @@ pub trait PrettyPrinter<'tcx>:\n             },\n             (ConstValue::Scalar(Scalar::Raw { data, .. }), ty::Char) =>\n                 p!(write(\"{:?}\", ::std::char::from_u32(data as u32).unwrap())),\n+            (ConstValue::Scalar(_), ty::RawPtr(_)) => p!(write(\"{{pointer}}\")),\n             (ConstValue::Scalar(Scalar::Ptr(ptr)), ty::FnPtr(_)) => {\n                 let instance = {\n                     let alloc_map = self.tcx().alloc_map.lock();"}, {"sha": "75b4c0a0a3de30623e7c1885692205cda9871075", "filename": "src/test/ui/const-generics/raw-ptr-const-param.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/89cc0467a2a5af872f05830be68b60adf4669e01/src%2Ftest%2Fui%2Fconst-generics%2Fraw-ptr-const-param.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/89cc0467a2a5af872f05830be68b60adf4669e01/src%2Ftest%2Fui%2Fconst-generics%2Fraw-ptr-const-param.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fraw-ptr-const-param.stderr?ref=89cc0467a2a5af872f05830be68b60adf4669e01", "patch": "@@ -10,10 +10,10 @@ error[E0308]: mismatched types\n   --> $DIR/raw-ptr-const-param.rs:7:38\n    |\n LL |     let _: Const<{15 as *const _}> = Const::<{10 as *const _}>;\n-   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Scalar(0x000000000000000f) : *const u32`, found `Scalar(0x000000000000000a) : *const u32`\n+   |                                      ^^^^^^^^^^^^^^^^^^^^^^^^^ expected `{pointer}`, found `{pointer}`\n    |\n-   = note: expected type `Const<Scalar(0x000000000000000f) : *const u32>`\n-              found type `Const<Scalar(0x000000000000000a) : *const u32>`\n+   = note: expected type `Const<{pointer}>`\n+              found type `Const<{pointer}>`\n \n error: aborting due to previous error\n "}]}