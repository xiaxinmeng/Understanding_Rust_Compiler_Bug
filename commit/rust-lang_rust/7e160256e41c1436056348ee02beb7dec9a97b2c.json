{"sha": "7e160256e41c1436056348ee02beb7dec9a97b2c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlMTYwMjU2ZTQxYzE0MzYwNTYzNDhlZTAyYmViN2RlYzlhOTdiMmM=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-01-11T22:59:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-11T22:59:15Z"}, "message": "Rollup merge of #80885 - camelid:intra-doc-str-ref, r=jyn514\n\nrustdoc: Resolve `&str` as `str`\n\nPeople almost always are referring to `&str`, not `str`, so this will\nsave a manual link resolve in many cases.\n\nNote that we already accept `&` (resolves to `reference`) in intra-doc\nlinks, so this shouldn't cause breakage.\n\nr? `@jyn514`", "tree": {"sha": "8338a1c69544303f0aa968e0263e67e45a317db4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8338a1c69544303f0aa968e0263e67e45a317db4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e160256e41c1436056348ee02beb7dec9a97b2c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf/NhDCRBK7hj4Ov3rIwAAdHIIAGPnBogJaYnLj3IOfKImYl8N\n6Lap+jhTALmLli+8raNaUKhIslPvI0Zz2or68NtEGWWRA7kHSKFBKeB02WDoR6iq\nLFCJdAC1y/G+ZYXQhQwqQ9tIMrRXg43hwEpmVNFdgWnv2ztndxwEGiYFSUQKaPDT\nBMHEsp+Bn1FdN3itylcORuEuSTOh2dq75M+ILyUvDuPNprJ67jBDhIthouDF/q1k\n0pLiZrFzk7rYdgQTDfPgh73mKrpDhogBriikESD7fxR487HwsFTwcdTjyTwFceHW\nOmw7lM9mQ13vi4XRyZGjgZvyItLRAFacLlXvAytx0lhMxFAilfeCNYc1DYu69dQ=\n=Y3Ty\n-----END PGP SIGNATURE-----\n", "payload": "tree 8338a1c69544303f0aa968e0263e67e45a317db4\nparent fd02c83bfe01a9f71e187538d72947644b30c7d4\nparent 2750e362092b690494f408d5cde9436c3ccc5ae3\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1610405955 +0900\ncommitter GitHub <noreply@github.com> 1610405955 +0900\n\nRollup merge of #80885 - camelid:intra-doc-str-ref, r=jyn514\n\nrustdoc: Resolve `&str` as `str`\n\nPeople almost always are referring to `&str`, not `str`, so this will\nsave a manual link resolve in many cases.\n\nNote that we already accept `&` (resolves to `reference`) in intra-doc\nlinks, so this shouldn't cause breakage.\n\nr? `@jyn514`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e160256e41c1436056348ee02beb7dec9a97b2c", "html_url": "https://github.com/rust-lang/rust/commit/7e160256e41c1436056348ee02beb7dec9a97b2c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e160256e41c1436056348ee02beb7dec9a97b2c/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd02c83bfe01a9f71e187538d72947644b30c7d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd02c83bfe01a9f71e187538d72947644b30c7d4", "html_url": "https://github.com/rust-lang/rust/commit/fd02c83bfe01a9f71e187538d72947644b30c7d4"}, {"sha": "2750e362092b690494f408d5cde9436c3ccc5ae3", "url": "https://api.github.com/repos/rust-lang/rust/commits/2750e362092b690494f408d5cde9436c3ccc5ae3", "html_url": "https://github.com/rust-lang/rust/commit/2750e362092b690494f408d5cde9436c3ccc5ae3"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "708d7710058d5e19c745c7f8ec409b6ba924c9fa", "filename": "src/librustdoc/passes/collect_intra_doc_links.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7e160256e41c1436056348ee02beb7dec9a97b2c/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e160256e41c1436056348ee02beb7dec9a97b2c/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links.rs?ref=7e160256e41c1436056348ee02beb7dec9a97b2c", "patch": "@@ -2085,7 +2085,7 @@ fn resolve_primitive(path_str: &str, ns: Namespace) -> Option<Res> {\n         \"f64\" => F64,\n         \"char\" => Char,\n         \"bool\" | \"true\" | \"false\" => Bool,\n-        \"str\" => Str,\n+        \"str\" | \"&str\" => Str,\n         // See #80181 for why these don't have symbols associated.\n         \"slice\" => Slice,\n         \"array\" => Array,"}, {"sha": "2c7e7b5c48c59f4afe1518d125ff316faa4e5a30", "filename": "src/test/rustdoc/intra-doc/non-path-primitives.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7e160256e41c1436056348ee02beb7dec9a97b2c/src%2Ftest%2Frustdoc%2Fintra-doc%2Fnon-path-primitives.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e160256e41c1436056348ee02beb7dec9a97b2c/src%2Ftest%2Frustdoc%2Fintra-doc%2Fnon-path-primitives.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-doc%2Fnon-path-primitives.rs?ref=7e160256e41c1436056348ee02beb7dec9a97b2c", "patch": "@@ -8,6 +8,15 @@\n // @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.array.html#method.map\"]' 'array::map'\n //! [array::map]\n \n+// @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.str.html\"]' 'owned str'\n+// @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.str.html\"]' 'str ref'\n+// @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.str.html#method.is_empty\"]' 'str::is_empty'\n+// @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.str.html#method.len\"]' '&str::len'\n+//! [owned str][str]\n+//! [str ref][&str]\n+//! [str::is_empty]\n+//! [&str::len]\n+\n // @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.pointer.html#method.is_null\"]' 'pointer::is_null'\n // @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.pointer.html#method.is_null\"]' '*const::is_null'\n // @has - '//a[@href=\"https://doc.rust-lang.org/nightly/std/primitive.pointer.html#method.is_null\"]' '*mut::is_null'"}]}