{"sha": "e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "node_id": "C_kwDOAAsO6NoAKGUxZjRkZGZkZDkyY2ZlNDBmNjU2NWYwZjZjOTk5ZGM3NzYxMmU1NWY", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2023-03-30T12:07:02Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-30T12:07:02Z"}, "message": "Rollup merge of #109749 - compiler-errors:new-solver-float-var, r=lcnr\n\nCanonicalize float var as float in new solver\n\nTypo in new canonicalizer -- we should be canonicalizing float vars as `CanonicalTyVarKind::Float`, not `CanonicalTyVarKind::Int`.\n\nFixes compiler-errors/next-solver-hir-issues#9", "tree": {"sha": "a0d45a34004f5800897848375fbea5804a8a7694", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0d45a34004f5800897848375fbea5804a8a7694"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkJXtmCRBK7hj4Ov3rIwAAlpoIAAVvYSWqQd+wim4Oq0aXGl9N\nMhNQBdH4N/D53XBjO/p9FDFCM8sFIwUoLMsr/VwpDGnJ5QZr5zG0YJ14XOUtVx20\nhg9EoR100dPJ2xQvk0jQffWEKMGLPj6vIUk0ES7PmaqeFACogLQ93EjQ4EyBwzwO\nBMRp8kAvLmDEUNUP9Nt30eMcD2jXFDTI02SnX4kVqLuITzyiEqHOwYe3KgwMtQ0f\nXtIAmPka7ULwETDqDv+Ja9+/ZgaRr+VFzpET2grtAUdBXjSZ1F+8K8fTFZBeBSrT\niFzKWddjefIazhQ2YpzreF3RNQ1x6jjVKfuEHqLTmgYWSNJQ9BEKaGX0ps/4heM=\n=7Gmu\n-----END PGP SIGNATURE-----\n", "payload": "tree a0d45a34004f5800897848375fbea5804a8a7694\nparent c1b28c3435e6ae5297f4c888c9c3ac494fe8e26f\nparent 977694aaec6dce9b03979cbe1b146352502c2e33\nauthor Yuki Okushi <jtitor@2k36.org> 1680178022 +0900\ncommitter GitHub <noreply@github.com> 1680178022 +0900\n\nRollup merge of #109749 - compiler-errors:new-solver-float-var, r=lcnr\n\nCanonicalize float var as float in new solver\n\nTypo in new canonicalizer -- we should be canonicalizing float vars as `CanonicalTyVarKind::Float`, not `CanonicalTyVarKind::Int`.\n\nFixes compiler-errors/next-solver-hir-issues#9\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "html_url": "https://github.com/rust-lang/rust/commit/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1b28c3435e6ae5297f4c888c9c3ac494fe8e26f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1b28c3435e6ae5297f4c888c9c3ac494fe8e26f", "html_url": "https://github.com/rust-lang/rust/commit/c1b28c3435e6ae5297f4c888c9c3ac494fe8e26f"}, {"sha": "977694aaec6dce9b03979cbe1b146352502c2e33", "url": "https://api.github.com/repos/rust-lang/rust/commits/977694aaec6dce9b03979cbe1b146352502c2e33", "html_url": "https://github.com/rust-lang/rust/commit/977694aaec6dce9b03979cbe1b146352502c2e33"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "2e5a8b7debc511b50eda684573f07380fd8d8b68", "filename": "compiler/rustc_trait_selection/src/solve/canonicalize.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fcanonicalize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fcanonicalize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Fsolve%2Fcanonicalize.rs?ref=e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "patch": "@@ -291,7 +291,7 @@ impl<'tcx> TypeFolder<TyCtxt<'tcx>> for Canonicalizer<'_, 'tcx> {\n                 if nt != t {\n                     return self.fold_ty(nt);\n                 } else {\n-                    CanonicalVarKind::Ty(CanonicalTyVarKind::Int)\n+                    CanonicalVarKind::Ty(CanonicalTyVarKind::Float)\n                 }\n             }\n             ty::Infer(ty::FreshTy(_) | ty::FreshIntTy(_) | ty::FreshFloatTy(_)) => {"}, {"sha": "b8748cd433b18f13db4550fadd1415eab81ad304", "filename": "tests/ui/traits/new-solver/float-canonical.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f/tests%2Fui%2Ftraits%2Fnew-solver%2Ffloat-canonical.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f/tests%2Fui%2Ftraits%2Fnew-solver%2Ffloat-canonical.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftraits%2Fnew-solver%2Ffloat-canonical.rs?ref=e1f4ddfdd92cfe40f6565f0f6c999dc77612e55f", "patch": "@@ -0,0 +1,8 @@\n+// compile-flags: -Ztrait-solver=next\n+// check-pass\n+\n+fn foo(x: f64) {\n+    let y = x + 1.0;\n+}\n+\n+fn main() {}"}]}