{"sha": "e436260d7ab81b4d0f61f5d27a967d8b8341d587", "node_id": "C_kwDOAAsO6NoAKGU0MzYyNjBkN2FiODFiNGQwZjYxZjVkMjdhOTY3ZDhiODM0MWQ1ODc", "commit": {"author": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-24T13:55:20Z"}, "committer": {"name": "Amos Wenger", "email": "amoswenger@gmail.com", "date": "2022-07-24T13:55:26Z"}, "message": "hir-def tests: sort results before comparing, since FxHashSet iteration order isn't guaranteed\n\n(And, in fact, it failed on i686)", "tree": {"sha": "e9c6fc30b7b227aef6f83297f282ed9a4ceaf21c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9c6fc30b7b227aef6f83297f282ed9a4ceaf21c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e436260d7ab81b4d0f61f5d27a967d8b8341d587", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e436260d7ab81b4d0f61f5d27a967d8b8341d587", "html_url": "https://github.com/rust-lang/rust/commit/e436260d7ab81b4d0f61f5d27a967d8b8341d587", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e436260d7ab81b4d0f61f5d27a967d8b8341d587/comments", "author": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "committer": {"login": "fasterthanlime", "id": 7998310, "node_id": "MDQ6VXNlcjc5OTgzMTA=", "avatar_url": "https://avatars.githubusercontent.com/u/7998310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fasterthanlime", "html_url": "https://github.com/fasterthanlime", "followers_url": "https://api.github.com/users/fasterthanlime/followers", "following_url": "https://api.github.com/users/fasterthanlime/following{/other_user}", "gists_url": "https://api.github.com/users/fasterthanlime/gists{/gist_id}", "starred_url": "https://api.github.com/users/fasterthanlime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fasterthanlime/subscriptions", "organizations_url": "https://api.github.com/users/fasterthanlime/orgs", "repos_url": "https://api.github.com/users/fasterthanlime/repos", "events_url": "https://api.github.com/users/fasterthanlime/events{/privacy}", "received_events_url": "https://api.github.com/users/fasterthanlime/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1bb63df1fdd40cbb0f3b1c9d5a838f9195142a07", "url": "https://api.github.com/repos/rust-lang/rust/commits/1bb63df1fdd40cbb0f3b1c9d5a838f9195142a07", "html_url": "https://github.com/rust-lang/rust/commit/1bb63df1fdd40cbb0f3b1c9d5a838f9195142a07"}], "stats": {"total": 53, "additions": 28, "deletions": 25}, "files": [{"sha": "252d669324382a3ddb92a88f82c6c5f7fc1a60fb", "filename": "src/tools/rust-analyzer/crates/hir-def/src/import_map.rs", "status": "modified", "additions": 28, "deletions": 25, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/e436260d7ab81b4d0f61f5d27a967d8b8341d587/src%2Ftools%2Frust-analyzer%2Fcrates%2Fhir-def%2Fsrc%2Fimport_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e436260d7ab81b4d0f61f5d27a967d8b8341d587/src%2Ftools%2Frust-analyzer%2Fcrates%2Fhir-def%2Fsrc%2Fimport_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frust-analyzer%2Fcrates%2Fhir-def%2Fsrc%2Fimport_map.rs?ref=e436260d7ab81b4d0f61f5d27a967d8b8341d587", "patch": "@@ -516,6 +516,9 @@ mod tests {\n                     mark\n                 ))\n             })\n+            // HashSet iteration order isn't defined - it's different on\n+            // x86_64 and i686 at the very least\n+            .sorted()\n             .collect::<String>();\n         expect.assert_eq(&actual)\n     }\n@@ -831,10 +834,10 @@ mod tests {\n             Query::new(\"fmt\".to_string()).search_mode(SearchMode::Fuzzy),\n             expect![[r#\"\n                 dep::fmt (t)\n-                dep::fmt::Display::format_method (a)\n                 dep::fmt::Display (t)\n                 dep::fmt::Display::FMT_CONST (a)\n                 dep::fmt::Display::format_function (a)\n+                dep::fmt::Display::format_method (a)\n             \"#]],\n         );\n     }\n@@ -860,10 +863,10 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()).search_mode(SearchMode::Fuzzy).assoc_items_only(),\n             expect![[r#\"\n-            dep::fmt::Display::format_method (a)\n-            dep::fmt::Display::FMT_CONST (a)\n-            dep::fmt::Display::format_function (a)\n-        \"#]],\n+                dep::fmt::Display::FMT_CONST (a)\n+                dep::fmt::Display::format_function (a)\n+                dep::fmt::Display::format_method (a)\n+            \"#]],\n         );\n \n         check_search(\n@@ -920,13 +923,13 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()).search_mode(SearchMode::Fuzzy),\n             expect![[r#\"\n-                dep::fmt (t)\n-                dep::format (f)\n-                dep::Fmt (v)\n                 dep::Fmt (m)\n                 dep::Fmt (t)\n-                dep::fmt::Display::fmt (a)\n+                dep::Fmt (v)\n+                dep::fmt (t)\n                 dep::fmt::Display (t)\n+                dep::fmt::Display::fmt (a)\n+                dep::format (f)\n             \"#]],\n         );\n \n@@ -935,10 +938,10 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()).search_mode(SearchMode::Equals),\n             expect![[r#\"\n-                dep::fmt (t)\n-                dep::Fmt (v)\n                 dep::Fmt (m)\n                 dep::Fmt (t)\n+                dep::Fmt (v)\n+                dep::fmt (t)\n                 dep::fmt::Display::fmt (a)\n             \"#]],\n         );\n@@ -948,12 +951,12 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()).search_mode(SearchMode::Contains),\n             expect![[r#\"\n-                dep::fmt (t)\n-                dep::Fmt (v)\n                 dep::Fmt (m)\n                 dep::Fmt (t)\n-                dep::fmt::Display::fmt (a)\n+                dep::Fmt (v)\n+                dep::fmt (t)\n                 dep::fmt::Display (t)\n+                dep::fmt::Display::fmt (a)\n             \"#]],\n         );\n     }\n@@ -989,12 +992,12 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()),\n             expect![[r#\"\n-                dep::fmt (t)\n-                dep::Fmt (v)\n                 dep::Fmt (m)\n                 dep::Fmt (t)\n-                dep::fmt::Display::fmt (a)\n+                dep::Fmt (v)\n+                dep::fmt (t)\n                 dep::fmt::Display (t)\n+                dep::fmt::Display::fmt (a)\n             \"#]],\n         );\n \n@@ -1003,10 +1006,10 @@ mod tests {\n             \"main\",\n             Query::new(\"fmt\".to_string()).name_only(),\n             expect![[r#\"\n-                dep::fmt (t)\n-                dep::Fmt (v)\n                 dep::Fmt (m)\n                 dep::Fmt (t)\n+                dep::Fmt (v)\n+                dep::fmt (t)\n                 dep::fmt::Display::fmt (a)\n             \"#]],\n         );\n@@ -1027,10 +1030,10 @@ mod tests {\n             \"main\",\n             Query::new(\"FMT\".to_string()),\n             expect![[r#\"\n-                dep::fmt (t)\n+                dep::FMT (t)\n                 dep::FMT (v)\n+                dep::fmt (t)\n                 dep::fmt (v)\n-                dep::FMT (t)\n             \"#]],\n         );\n \n@@ -1068,10 +1071,10 @@ mod tests {\n             \"main\",\n             Query::new(\"\".to_string()).limit(2),\n             expect![[r#\"\n-                dep::fmt (t)\n+                dep::Fmt (m)\n                 dep::Fmt (t)\n                 dep::Fmt (v)\n-                dep::Fmt (m)\n+                dep::fmt (t)\n             \"#]],\n         );\n     }\n@@ -1091,10 +1094,10 @@ mod tests {\n             \"main\",\n             Query::new(\"FMT\".to_string()),\n             expect![[r#\"\n-                dep::fmt (t)\n+                dep::FMT (t)\n                 dep::FMT (v)\n+                dep::fmt (t)\n                 dep::fmt (v)\n-                dep::FMT (t)\n             \"#]],\n         );\n "}]}