{"sha": "398225842cbff0cdd45021bfe91712d407a900b8", "node_id": "C_kwDOAAsO6NoAKDM5ODIyNTg0MmNiZmYwY2RkNDUwMjFiZmU5MTcxMmQ0MDdhOTAwYjg", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2023-01-25T19:29:19Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2023-01-25T19:39:29Z"}, "message": "rustdoc: Don't put non rustdoc-reachable impls into `all_trait_impls`", "tree": {"sha": "c7c45fc6e6344848e802710e7a5cbe010e315a87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7c45fc6e6344848e802710e7a5cbe010e315a87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/398225842cbff0cdd45021bfe91712d407a900b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/398225842cbff0cdd45021bfe91712d407a900b8", "html_url": "https://github.com/rust-lang/rust/commit/398225842cbff0cdd45021bfe91712d407a900b8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/398225842cbff0cdd45021bfe91712d407a900b8/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca93310eb7b18eb34ca743fad530ae4a0e34c5c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca93310eb7b18eb34ca743fad530ae4a0e34c5c7", "html_url": "https://github.com/rust-lang/rust/commit/ca93310eb7b18eb34ca743fad530ae4a0e34c5c7"}], "stats": {"total": 4, "additions": 1, "deletions": 3}, "files": [{"sha": "f690c49005d9c70e455805f791d2d6bef49757aa", "filename": "src/librustdoc/passes/collect_intra_doc_links/early.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/398225842cbff0cdd45021bfe91712d407a900b8/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links%2Fearly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/398225842cbff0cdd45021bfe91712d407a900b8/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links%2Fearly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcollect_intra_doc_links%2Fearly.rs?ref=398225842cbff0cdd45021bfe91712d407a900b8", "patch": "@@ -162,6 +162,7 @@ impl<'ra> EarlyDocLinkResolver<'_, 'ra> {\n                         }\n                         self.resolve_doc_links_extern_impl(impl_def_id, false);\n                     }\n+                    self.all_trait_impls.push(impl_def_id);\n                 }\n                 for (ty_def_id, impl_def_id) in all_inherent_impls {\n                     if self.is_doc_reachable(ty_def_id) {\n@@ -171,9 +172,6 @@ impl<'ra> EarlyDocLinkResolver<'_, 'ra> {\n                 for impl_def_id in all_incoherent_impls {\n                     self.resolve_doc_links_extern_impl(impl_def_id, true);\n                 }\n-\n-                self.all_trait_impls\n-                    .extend(all_trait_impls.into_iter().map(|(_, def_id, _)| def_id));\n             }\n \n             if crates.len() > start_cnum {"}]}