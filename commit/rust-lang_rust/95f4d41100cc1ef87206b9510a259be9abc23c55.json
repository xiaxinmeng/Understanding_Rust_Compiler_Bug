{"sha": "95f4d41100cc1ef87206b9510a259be9abc23c55", "node_id": "C_kwDOAAsO6NoAKDk1ZjRkNDExMDBjYzFlZjg3MjA2Yjk1MTBhMjU5YmU5YWJjMjNjNTU", "commit": {"author": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2022-06-20T16:45:08Z"}, "committer": {"name": "Ryan Levick", "email": "me@ryanlevick.com", "date": "2022-08-04T08:39:35Z"}, "message": "Turn CDB test back on and all clarifying test", "tree": {"sha": "2c21f62e128516168161fe21c13edd57ca4c9150", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c21f62e128516168161fe21c13edd57ca4c9150"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/95f4d41100cc1ef87206b9510a259be9abc23c55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/95f4d41100cc1ef87206b9510a259be9abc23c55", "html_url": "https://github.com/rust-lang/rust/commit/95f4d41100cc1ef87206b9510a259be9abc23c55", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/95f4d41100cc1ef87206b9510a259be9abc23c55/comments", "author": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rylev", "id": 1327285, "node_id": "MDQ6VXNlcjEzMjcyODU=", "avatar_url": "https://avatars.githubusercontent.com/u/1327285?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rylev", "html_url": "https://github.com/rylev", "followers_url": "https://api.github.com/users/rylev/followers", "following_url": "https://api.github.com/users/rylev/following{/other_user}", "gists_url": "https://api.github.com/users/rylev/gists{/gist_id}", "starred_url": "https://api.github.com/users/rylev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rylev/subscriptions", "organizations_url": "https://api.github.com/users/rylev/orgs", "repos_url": "https://api.github.com/users/rylev/repos", "events_url": "https://api.github.com/users/rylev/events{/privacy}", "received_events_url": "https://api.github.com/users/rylev/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2ee1242b114e77d688f0839e3b0653aa04fb6c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2ee1242b114e77d688f0839e3b0653aa04fb6c1", "html_url": "https://github.com/rust-lang/rust/commit/f2ee1242b114e77d688f0839e3b0653aa04fb6c1"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "1e182eb7cc06f6d761bf51c0592e426a6615f27a", "filename": "src/test/debuginfo/no_mangle-info.rs", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/95f4d41100cc1ef87206b9510a259be9abc23c55/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs", "raw_url": "https://github.com/rust-lang/rust/raw/95f4d41100cc1ef87206b9510a259be9abc23c55/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs?ref=95f4d41100cc1ef87206b9510a259be9abc23c55", "patch": "@@ -4,22 +4,34 @@\n // gdb-command:run\n // gdb-command:whatis TEST\n // gdb-check:type = u64\n+// gdb-command:whatis no_mangle_info::namespace::OTHER_TEST\n+// gdb-check:type = u64\n \n // === LLDB TESTS ==================================================================================\n // lldb-command:run\n // lldb-command:expr TEST\n // lldb-check: (unsigned long) $0 = 3735928559\n+// lldb-command:expr no_mangle_test::namespace::OTHER_TEST\n+// lldb-check: (unsigned long) $0 = 42\n \n // === CDB TESTS ==================================================================================\n-// FIXME: This does not currently work due to a bug in LLVM\n-// The fix for this is being tracked in rust-lang/rust#98295\n-// // cdb-command: g\n-// // cdb-command: dx a!no_mangle_info::TEST\n-// // cdb-check: a!no_mangle_info::TEST : 0xdeadbeef [Type: unsigned __int64]\n+// cdb-command: g\n+// Note: LLDB and GDB allow referring to items that are in the same namespace of the symbol\n+// we currently have a breakpoint on in an unqualified way. CDB does not, and thus we need to\n+// refer to it in a fully qualified way.\n+// cdb-command: dx a!no_mangle_info::TEST\n+// cdb-check: a!no_mangle_info::TEST : 0xdeadbeef [Type: unsigned __int64]\n+// cdb-command: dx a!no_mangle_info::namespace::OTHER_TEST\n+// cdb-check: a!no_mangle_info::namespace::OTHER_TEST : 0x2a [Type: unsigned __int64]\n \n #[no_mangle]\n pub static TEST: u64 = 0xdeadbeef;\n \n+pub mod namespace {\n+    pub static OTHER_TEST: u64 = 42;\n+}\n+\n pub fn main() {\n-    println!(\"TEST: {}\", TEST); // #break\n+    println!(\"TEST: {}\", TEST);\n+    println!(\"OTHER TEST: {}\", namespace::OTHER_TEST); // #break\n }"}]}