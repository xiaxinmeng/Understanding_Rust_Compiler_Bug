{"sha": "3155eedb68b4aaefe89731b3e1c788453cee1f80", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxNTVlZWRiNjhiNGFhZWZlODk3MzFiM2UxYzc4ODQ1M2NlZTFmODA=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-03-31T15:23:14Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-03-31T15:24:09Z"}, "message": "Don't use an exact lint counter anymore", "tree": {"sha": "e350183624465cb76c096255a932c229baef052e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e350183624465cb76c096255a932c229baef052e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3155eedb68b4aaefe89731b3e1c788453cee1f80", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl6DYJkACgkQLO/Nsn7Q\nvnmSbBAAikomtYRdgJsCvHBuV+qXpa7agNPziVL4TYUVanuGzEQSiEV7aJaGlhVi\nFbdt9UnyXcSqHPqUH5DkP2Wq22s7V9YV65TbWlsVjAkf1AhNzfryJDayWc6auPT/\nTvxHdmYagXwdyfxYIJgM34Fciz318qTTb8zvyMGseQovfKM5yyR+yCulGK7B5TsU\nqSgOgh8t/owfHW8ZZuZKYUgi5IWoqwNbizv5Td9mV9/VLFxkuMx7bLQecfqmWSGN\nR9FX6+qGbad0D10sbad08aj4xHoo90nNVq5XPiWRwO24Pq7WiErE1JBHJGUqxBDm\nl4lIwlBZB8JO7zNr/REtEK8uwIdXYtS9eFwvpNbI21Wpzl9sziTKl85VgeoIjtJE\nuQmjzAuttUP9qyT0E/vnpotj80nvZfATjxuq+GpMhr9th/RxU0U9S8pWRf1tfqm3\nUEq2D1LST7I7ycr+Ov9q/kNfYHbNZwnd1TYqwlq6QtNClA9/qgEiMwYZRsBPPv2x\nawFIMbgY1K6r08FnIGFjdBwuriCe0WPJSj8/NEDJrfS7EhH8Aj7djlMhOLmUJMwq\nPfJb7WGF/cO+5TRPmp8zHRO7s4zhBXiYaX6FY84SI6B7HLvm1eYjTYc1DuqQvrLE\nq7f+gNJApN07LKubM99wiT5RiGxis3X+SbvKn5a1dTPIhxX7aYY=\n=0buz\n-----END PGP SIGNATURE-----", "payload": "tree e350183624465cb76c096255a932c229baef052e\nparent 5de019074b08d4625ab9e24280071a270e9b8eef\nauthor flip1995 <hello@philkrones.com> 1585668194 +0200\ncommitter flip1995 <hello@philkrones.com> 1585668249 +0200\n\nDon't use an exact lint counter anymore\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3155eedb68b4aaefe89731b3e1c788453cee1f80", "html_url": "https://github.com/rust-lang/rust/commit/3155eedb68b4aaefe89731b3e1c788453cee1f80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3155eedb68b4aaefe89731b3e1c788453cee1f80/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5de019074b08d4625ab9e24280071a270e9b8eef", "url": "https://api.github.com/repos/rust-lang/rust/commits/5de019074b08d4625ab9e24280071a270e9b8eef", "html_url": "https://github.com/rust-lang/rust/commit/5de019074b08d4625ab9e24280071a270e9b8eef"}], "stats": {"total": 33, "additions": 20, "deletions": 13}, "files": [{"sha": "eaa42aa6962a825456aa763669b2fc7b42fe9202", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3155eedb68b4aaefe89731b3e1c788453cee1f80/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/3155eedb68b4aaefe89731b3e1c788453cee1f80/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=3155eedb68b4aaefe89731b3e1c788453cee1f80", "patch": "@@ -5,7 +5,7 @@\n \n A collection of lints to catch common mistakes and improve your [Rust](https://github.com/rust-lang/rust) code.\n \n-[There are 363 lints included in this crate!](https://rust-lang.github.io/rust-clippy/master/index.html)\n+[There are over 363 lints included in this crate!](https://rust-lang.github.io/rust-clippy/master/index.html)\n \n We have a bunch of lint categories to allow you to choose how much Clippy is supposed to ~~annoy~~ help you:\n "}, {"sha": "d30d6f97a2f75b88c7a14427d19a98e588bbd64d", "filename": "clippy_dev/src/update_lints.rs", "status": "modified", "additions": 14, "deletions": 11, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/3155eedb68b4aaefe89731b3e1c788453cee1f80/clippy_dev%2Fsrc%2Fupdate_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3155eedb68b4aaefe89731b3e1c788453cee1f80/clippy_dev%2Fsrc%2Fupdate_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fupdate_lints.rs?ref=3155eedb68b4aaefe89731b3e1c788453cee1f80", "patch": "@@ -17,7 +17,7 @@ pub fn run(update_mode: UpdateMode) {\n     let internal_lints = Lint::internal_lints(lint_list.clone().into_iter());\n \n     let usable_lints: Vec<Lint> = Lint::usable_lints(lint_list.clone().into_iter()).collect();\n-    let usable_lint_count = usable_lints.len();\n+    let usable_lint_count = round_to_fifty(usable_lints.len());\n \n     let mut sorted_usable_lints = usable_lints.clone();\n     sorted_usable_lints.sort_by_key(|lint| lint.name.clone());\n@@ -29,27 +29,26 @@ pub fn run(update_mode: UpdateMode) {\n         false,\n         update_mode == UpdateMode::Change,\n         || {\n-            format!(\n-                \"pub const ALL_LINTS: [Lint; {}] = {:#?};\",\n-                sorted_usable_lints.len(),\n-                sorted_usable_lints\n-            )\n-            .lines()\n-            .map(ToString::to_string)\n-            .collect::<Vec<_>>()\n+            format!(\"pub static ref ALL_LINTS: Vec<Lint> = vec!{:#?};\", sorted_usable_lints)\n+                .lines()\n+                .map(ToString::to_string)\n+                .collect::<Vec<_>>()\n         },\n     )\n     .changed;\n \n     file_change |= replace_region_in_file(\n         Path::new(\"README.md\"),\n-        &format!(r#\"\\[There are \\d+ lints included in this crate!\\]\\({}\\)\"#, DOCS_LINK),\n+        &format!(\n+            r#\"\\[There are over \\d+ lints included in this crate!\\]\\({}\\)\"#,\n+            DOCS_LINK\n+        ),\n         \"\",\n         true,\n         update_mode == UpdateMode::Change,\n         || {\n             vec![format!(\n-                \"[There are {} lints included in this crate!]({})\",\n+                \"[There are over {} lints included in this crate!]({})\",\n                 usable_lint_count, DOCS_LINK\n             )]\n         },\n@@ -161,3 +160,7 @@ pub fn print_lints() {\n \n     println!(\"there are {} lints\", usable_lint_count);\n }\n+\n+fn round_to_fifty(count: usize) -> usize {\n+    count / 50 * 50\n+}"}, {"sha": "3b89f5d1947771e95ca5d0ccef2e5175b5b02cb6", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3155eedb68b4aaefe89731b3e1c788453cee1f80/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3155eedb68b4aaefe89731b3e1c788453cee1f80/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=3155eedb68b4aaefe89731b3e1c788453cee1f80", "patch": "@@ -1,12 +1,15 @@\n //! This file is managed by `cargo dev update_lints`. Do not edit.\n \n+use lazy_static::lazy_static;\n+\n pub mod lint;\n pub use lint::Level;\n pub use lint::Lint;\n pub use lint::LINT_LEVELS;\n \n+lazy_static! {\n // begin lint list, do not remove this comment, it\u2019s used in `update_lints`\n-pub const ALL_LINTS: [Lint; 363] = [\n+pub static ref ALL_LINTS: Vec<Lint> = vec![\n     Lint {\n         name: \"absurd_extreme_comparisons\",\n         group: \"correctness\",\n@@ -2550,3 +2553,4 @@ pub const ALL_LINTS: [Lint; 363] = [\n     },\n ];\n // end lint list, do not remove this comment, it\u2019s used in `update_lints`\n+}"}]}