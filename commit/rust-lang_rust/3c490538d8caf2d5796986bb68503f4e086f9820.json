{"sha": "3c490538d8caf2d5796986bb68503f4e086f9820", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjNDkwNTM4ZDhjYWYyZDU3OTY5ODZiYjY4NTAzZjRlMDg2Zjk4MjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-01-16T05:04:44Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-01-16T05:04:44Z"}, "message": "Auto merge of #30908 - petrochenkov:backtrace, r=alexcrichton\n\n@dhuseby @semarie Please, confirm that all Rust-specific changes in the second commit are still required.\n(It would be ideal to have an unpatched copy of libbacktrace straight from the gcc repo.)\n\nFixes https://github.com/rust-lang/rust/issues/28447\n\nr? @alexcrichton", "tree": {"sha": "fcf5bab318c927bb5151fa3472183f967026e432", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fcf5bab318c927bb5151fa3472183f967026e432"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3c490538d8caf2d5796986bb68503f4e086f9820", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3c490538d8caf2d5796986bb68503f4e086f9820", "html_url": "https://github.com/rust-lang/rust/commit/3c490538d8caf2d5796986bb68503f4e086f9820", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3c490538d8caf2d5796986bb68503f4e086f9820/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c42ccb8b49e7a43bba9a62960cac6f29f7e932ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba", "html_url": "https://github.com/rust-lang/rust/commit/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba"}, {"sha": "55e2b7e1b4606ae0bc684293f011b7006d1f1258", "url": "https://api.github.com/repos/rust-lang/rust/commits/55e2b7e1b4606ae0bc684293f011b7006d1f1258", "html_url": "https://github.com/rust-lang/rust/commit/55e2b7e1b4606ae0bc684293f011b7006d1f1258"}], "stats": {"total": 2398, "additions": 473, "deletions": 1925}, "files": [{"sha": "2afa4705539aa88dd4c28ce42e208fa2b8cb49a5", "filename": "src/libbacktrace/ChangeLog", "status": "modified", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FChangeLog", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2FChangeLog?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,3 +1,70 @@\n+2016-01-04  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tUpdate copyright years.\n+\n+2015-12-18  Andris Pavenis  <andris.pavenis@iki.fi>\n+\n+\t* configure.ac: Specify that DJGPP do not have mmap even when sys/mman.h exists\n+\t* configure: Regenerate\n+\n+2015-12-09  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\tPR 68115/libfortran\n+\t* configure.ac: Set libbacktrace_cv_sys_sync to no on hppa*-*-hpux*.\n+\t* configure: Regenerate.\n+\t* elf.c (backtrace_initialize): Cast __sync_bool_compare_and_swap call\n+\tto void.\n+\n+2015-09-17  Ian Lance Taylor  <iant@google.com>\n+\n+\t* posix.c (backtrace_open): Cast second argument of open() to int.\n+\n+2015-09-11  Ian Lance Taylor  <iant@google.com>\n+\n+\t* Makefile.am (backtrace.lo): Depend on internal.h.\n+\t(sort.lo, stest.lo): Add explicit dependencies.\n+\t* Makefile.in: Rebuild.\n+\n+2015-09-09  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\t* backtrace.c: #include <sys/types.h>.\n+\n+2015-09-08  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR other/67457\n+\t* backtrace.c: #include \"internal.h\".\n+\t(struct backtrace_data): Add can_alloc field.\n+\t(unwind): If can_alloc is false, don't try to get file/line\n+\tinformation.\n+\t(backtrace_full): Set can_alloc field in bdata.\n+\t* alloc.c (backtrace_alloc): Don't call error_callback if it is\n+\tNULL.\n+\t* mmap.c (backtrace_alloc): Likewise.\n+\t* internal.h: Update comments for backtrace_alloc and\n+\tbacktrace_free.\n+\n+2015-09-08  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR other/67457\n+\t* mmap.c (backtrace_alloc): Correct test for mmap failure.\n+\n+2015-08-31  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* configure.ac: For spu-*-* targets, set have_fcntl to no.\n+\t* configure: Regenerate.\n+\n+2015-08-27  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* configure.ac: Remove [disable-shared] argument to LT_INIT.\n+\tRemove setting PIC_FLAG when building as target library.\n+\t* configure: Regenerate.\n+\n+2015-08-26  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\t* configure.ac: Only compile with -fPIC if the target\n+\tsupports it.\n+\t* configure: Regenerate.\n+\n 2015-08-24  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* configure.ac: Set have_mmap to no on spu-*-* targets.\n@@ -497,3 +564,9 @@\n 2012-09-17  Ian Lance Taylor  <iant@google.com>\n \n \t* Initial implementation.\n+\f\n+Copyright (C) 2012-2016 Free Software Foundation, Inc.\n+\n+Copying and distribution of this file, with or without modification,\n+are permitted in any medium without royalty provided the copyright\n+notice and this notice are preserved."}, {"sha": "a7df02590982255a96166a4be552f07e6f42cabb", "filename": "src/libbacktrace/Makefile.am", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FMakefile.am", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FMakefile.am", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2FMakefile.am?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n # Makefile.am -- Backtrace Makefile.\n-# Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+# Copyright (C) 2012-2016 Free Software Foundation, Inc.\n \n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions are\n@@ -116,7 +116,7 @@ endif NATIVE\n \n INCDIR = $(top_srcdir)/../include\n alloc.lo: config.h backtrace.h internal.h\n-backtrace.lo: config.h backtrace.h\n+backtrace.lo: config.h backtrace.h internal.h\n btest.lo: (INCDIR)/filenames.h backtrace.h backtrace-supported.h\n dwarf.lo: config.h $(INCDIR)/dwarf2.h $(INCDIR)/dwarf2.def \\\n \t$(INCDIR)/filenames.h backtrace.h internal.h\n@@ -130,5 +130,7 @@ posix.lo: config.h backtrace.h internal.h\n print.lo: config.h backtrace.h internal.h\n read.lo: config.h backtrace.h internal.h\n simple.lo: config.h backtrace.h internal.h\n+sort.lo: config.h backtrace.h internal.h\n+stest.lo: config.h backtrace.h internal.h\n state.lo: config.h backtrace.h backtrace-supported.h internal.h\n unknown.lo: config.h backtrace.h internal.h"}, {"sha": "586b6a6eaa10e94d4bf4deb478e063f2653088ac", "filename": "src/libbacktrace/Makefile.in", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FMakefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2FMakefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2FMakefile.in?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -162,6 +162,7 @@ AUTOMAKE = @AUTOMAKE@\n AWK = @AWK@\n BACKTRACE_FILE = @BACKTRACE_FILE@\n BACKTRACE_SUPPORTED = @BACKTRACE_SUPPORTED@\n+BACKTRACE_SUPPORTS_DATA = @BACKTRACE_SUPPORTS_DATA@\n BACKTRACE_SUPPORTS_THREADS = @BACKTRACE_SUPPORTS_THREADS@\n BACKTRACE_USES_MALLOC = @BACKTRACE_USES_MALLOC@\n CC = @CC@\n@@ -745,7 +746,7 @@ uninstall-am:\n \tuninstall-am\n \n alloc.lo: config.h backtrace.h internal.h\n-backtrace.lo: config.h backtrace.h\n+backtrace.lo: config.h backtrace.h internal.h\n btest.lo: (INCDIR)/filenames.h backtrace.h backtrace-supported.h\n dwarf.lo: config.h $(INCDIR)/dwarf2.h $(INCDIR)/dwarf2.def \\\n \t$(INCDIR)/filenames.h backtrace.h internal.h\n@@ -759,6 +760,8 @@ posix.lo: config.h backtrace.h internal.h\n print.lo: config.h backtrace.h internal.h\n read.lo: config.h backtrace.h internal.h\n simple.lo: config.h backtrace.h internal.h\n+sort.lo: config.h backtrace.h internal.h\n+stest.lo: config.h backtrace.h internal.h\n state.lo: config.h backtrace.h backtrace-supported.h internal.h\n unknown.lo: config.h backtrace.h internal.h\n "}, {"sha": "a9f07a013f8feec7a4508b7fc7189fb188c90031", "filename": "src/libbacktrace/alloc.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Falloc.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Falloc.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Falloc.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* alloc.c -- Memory allocation without mmap.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -44,7 +44,8 @@ POSSIBILITY OF SUCH DAMAGE.  */\n    backtrace functions may not be safely invoked from a signal\n    handler.  */\n \n-/* Allocate memory like malloc.  */\n+/* Allocate memory like malloc.  If ERROR_CALLBACK is NULL, don't\n+   report an error.  */\n \n void *\n backtrace_alloc (struct backtrace_state *state ATTRIBUTE_UNUSED,\n@@ -55,7 +56,10 @@ backtrace_alloc (struct backtrace_state *state ATTRIBUTE_UNUSED,\n \n   ret = malloc (size);\n   if (ret == NULL)\n-    error_callback (data, \"malloc\", errno);\n+    {\n+      if (error_callback)\n+\terror_callback (data, \"malloc\", errno);\n+    }\n   return ret;\n }\n "}, {"sha": "6e4bfc21f25fba689eeb896486328f45cdc537b4", "filename": "src/libbacktrace/ansidecl.h", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fansidecl.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fansidecl.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fansidecl.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,7 +1,5 @@\n /* ANSI and traditional C compatability macros\n-   Copyright 1991, 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,\n-   2002, 2003, 2004, 2005, 2006, 2007, 2009, 2010, 2013\n-   Free Software Foundation, Inc.\n+   Copyright (C) 1991-2015 Free Software Foundation, Inc.\n    This file is part of the GNU C Library.\n \n This program is free software; you can redistribute it and/or modify\n@@ -276,6 +274,15 @@ So instead we use the macro below and test it against specific values.  */\n # endif /* GNUC >= 4.3 */\n #endif /* ATTRIBUTE_HOT */\n \n+/* Attribute 'no_sanitize_undefined' was valid as of gcc 4.9.  */\n+#ifndef ATTRIBUTE_NO_SANITIZE_UNDEFINED\n+# if (GCC_VERSION >= 4009)\n+#  define ATTRIBUTE_NO_SANITIZE_UNDEFINED __attribute__ ((no_sanitize_undefined))\n+# else\n+#  define ATTRIBUTE_NO_SANITIZE_UNDEFINED\n+# endif /* GNUC >= 4.9 */\n+#endif /* ATTRIBUTE_NO_SANITIZE_UNDEFINED */\n+\n /* We use __extension__ in some places to suppress -pedantic warnings\n    about GCC extensions.  This feature didn't work properly before\n    gcc 2.8.  */\n@@ -304,6 +311,15 @@ So instead we use the macro below and test it against specific values.  */\n #define ENUM_BITFIELD(TYPE) __extension__ enum TYPE\n #else\n #define ENUM_BITFIELD(TYPE) unsigned int\n+#endif\n+\n+    /* This is used to mark a class or virtual function as final.  */\n+#if __cplusplus >= 201103L\n+#define GCC_FINAL final\n+#elif GCC_VERSION >= 4007\n+#define GCC_FINAL __final\n+#else\n+#define GCC_FINAL\n #endif\n \n #ifdef __cplusplus"}, {"sha": "cb0ad0298e68a4bd3fc92ca20efadde0d1a0a8ca", "filename": "src/libbacktrace/atomic.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fatomic.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fatomic.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fatomic.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* atomic.c -- Support for atomic functions if not present.\n-   Copyright (C) 2013-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2013-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "ab34199fcd362cceefb43d28f2c28daad07cc1f8", "filename": "src/libbacktrace/backtrace-supported.h.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace-supported.h.in", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace-supported.h.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fbacktrace-supported.h.in?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* backtrace-supported.h.in -- Whether stack backtrace is supported.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "b89bf554ac548d2ab2a88fe65aa3907ac354e4a8", "filename": "src/libbacktrace/backtrace.c", "status": "modified", "additions": 24, "deletions": 3, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fbacktrace.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* backtrace.c -- Entry point for stack backtrace library.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -32,8 +32,11 @@ POSSIBILITY OF SUCH DAMAGE.  */\n \n #include \"config.h\"\n \n+#include <sys/types.h>\n+\n #include \"unwind.h\"\n #include \"backtrace.h\"\n+#include \"internal.h\"\n \n /* The main backtrace_full routine.  */\n \n@@ -53,6 +56,8 @@ struct backtrace_data\n   void *data;\n   /* Value to return from backtrace_full.  */\n   int ret;\n+  /* Whether there is any memory available.  */\n+  int can_alloc;\n };\n \n /* Unwind library callback routine.  This is passed to\n@@ -80,8 +85,11 @@ unwind (struct _Unwind_Context *context, void *vdata)\n   if (!ip_before_insn)\n     --pc;\n \n-  bdata->ret = backtrace_pcinfo (bdata->state, pc, bdata->callback,\n-\t\t\t\t bdata->error_callback, bdata->data);\n+  if (!bdata->can_alloc)\n+    bdata->ret = bdata->callback (bdata->data, pc, NULL, 0, NULL);\n+  else\n+    bdata->ret = backtrace_pcinfo (bdata->state, pc, bdata->callback,\n+\t\t\t\t   bdata->error_callback, bdata->data);\n   if (bdata->ret != 0)\n     return _URC_END_OF_STACK;\n \n@@ -96,13 +104,26 @@ backtrace_full (struct backtrace_state *state, int skip,\n \t\tbacktrace_error_callback error_callback, void *data)\n {\n   struct backtrace_data bdata;\n+  void *p;\n \n   bdata.skip = skip + 1;\n   bdata.state = state;\n   bdata.callback = callback;\n   bdata.error_callback = error_callback;\n   bdata.data = data;\n   bdata.ret = 0;\n+\n+  /* If we can't allocate any memory at all, don't try to produce\n+     file/line information.  */\n+  p = backtrace_alloc (state, 4096, NULL, NULL);\n+  if (p == NULL)\n+    bdata.can_alloc = 0;\n+  else\n+    {\n+      backtrace_free (state, p, 4096, NULL, NULL);\n+      bdata.can_alloc = 1;\n+    }\n+\n   _Unwind_Backtrace (unwind, &bdata);\n   return bdata.ret;\n }"}, {"sha": "d209219d9a419ea82a723d4a4bf4282a7a900a83", "filename": "src/libbacktrace/backtrace.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbacktrace.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fbacktrace.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* backtrace.h -- Public header file for stack backtrace library.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "0506d2b112186b7b61fa89b3e2ec20b7286a699b", "filename": "src/libbacktrace/btest.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbtest.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fbtest.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fbtest.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* btest.c -- Test for libbacktrace library\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "b79252d6b1034cbcce18ed21d4ed21a405f987e9", "filename": "src/libbacktrace/config.guess", "status": "removed", "additions": 0, "deletions": 1558, "changes": 1558, "blob_url": "https://github.com/rust-lang/rust/blob/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba/src%2Flibbacktrace%2Fconfig.guess", "raw_url": "https://github.com/rust-lang/rust/raw/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba/src%2Flibbacktrace%2Fconfig.guess", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fconfig.guess?ref=c42ccb8b49e7a43bba9a62960cac6f29f7e932ba", "patch": "@@ -1,1558 +0,0 @@\n-#! /bin/sh\n-# Attempt to guess a canonical system name.\n-#   Copyright 1992-2013 Free Software Foundation, Inc.\n-\n-timestamp='2013-06-10'\n-\n-# This file is free software; you can redistribute it and/or modify it\n-# under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 3 of the License, or\n-# (at your option) any later version.\n-#\n-# This program is distributed in the hope that it will be useful, but\n-# WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n-# General Public License for more details.\n-#\n-# You should have received a copy of the GNU General Public License\n-# along with this program; if not, see <http://www.gnu.org/licenses/>.\n-#\n-# As a special exception to the GNU General Public License, if you\n-# distribute this file as part of a program that contains a\n-# configuration script generated by Autoconf, you may include it under\n-# the same distribution terms that you use for the rest of that\n-# program.  This Exception is an additional permission under section 7\n-# of the GNU General Public License, version 3 (\"GPLv3\").\n-#\n-# Originally written by Per Bothner.\n-#\n-# You can get the latest version of this script from:\n-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\n-#\n-# Please send patches with a ChangeLog entry to config-patches@gnu.org.\n-\n-\n-me=`echo \"$0\" | sed -e 's,.*/,,'`\n-\n-usage=\"\\\n-Usage: $0 [OPTION]\n-\n-Output the configuration name of the system \\`$me' is run on.\n-\n-Operation modes:\n-  -h, --help         print this help, then exit\n-  -t, --time-stamp   print date of last modification, then exit\n-  -v, --version      print version number, then exit\n-\n-Report bugs and patches to <config-patches@gnu.org>.\"\n-\n-version=\"\\\n-GNU config.guess ($timestamp)\n-\n-Originally written by Per Bothner.\n-Copyright 1992-2013 Free Software Foundation, Inc.\n-\n-This is free software; see the source for copying conditions.  There is NO\n-warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n-\n-help=\"\n-Try \\`$me --help' for more information.\"\n-\n-# Parse command line\n-while test $# -gt 0 ; do\n-  case $1 in\n-    --time-stamp | --time* | -t )\n-       echo \"$timestamp\" ; exit ;;\n-    --version | -v )\n-       echo \"$version\" ; exit ;;\n-    --help | --h* | -h )\n-       echo \"$usage\"; exit ;;\n-    -- )     # Stop option processing\n-       shift; break ;;\n-    - )\t# Use stdin as input.\n-       break ;;\n-    -* )\n-       echo \"$me: invalid option $1$help\" >&2\n-       exit 1 ;;\n-    * )\n-       break ;;\n-  esac\n-done\n-\n-if test $# != 0; then\n-  echo \"$me: too many arguments$help\" >&2\n-  exit 1\n-fi\n-\n-trap 'exit 1' 1 2 15\n-\n-# CC_FOR_BUILD -- compiler used by this script. Note that the use of a\n-# compiler to aid in system detection is discouraged as it requires\n-# temporary files to be created and, as you can see below, it is a\n-# headache to deal with in a portable fashion.\n-\n-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still\n-# use `HOST_CC' if defined, but it is deprecated.\n-\n-# Portable tmp directory creation inspired by the Autoconf team.\n-\n-set_cc_for_build='\n-trap \"exitcode=\\$?; (rm -f \\$tmpfiles 2>/dev/null; rmdir \\$tmp 2>/dev/null) && exit \\$exitcode\" 0 ;\n-trap \"rm -f \\$tmpfiles 2>/dev/null; rmdir \\$tmp 2>/dev/null; exit 1\" 1 2 13 15 ;\n-: ${TMPDIR=/tmp} ;\n- { tmp=`(umask 077 && mktemp -d \"$TMPDIR/cgXXXXXX\") 2>/dev/null` && test -n \"$tmp\" && test -d \"$tmp\" ; } ||\n- { test -n \"$RANDOM\" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||\n- { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo \"Warning: creating insecure temp directory\" >&2 ; } ||\n- { echo \"$me: cannot create a temporary directory in $TMPDIR\" >&2 ; exit 1 ; } ;\n-dummy=$tmp/dummy ;\n-tmpfiles=\"$dummy.c $dummy.o $dummy.rel $dummy\" ;\n-case $CC_FOR_BUILD,$HOST_CC,$CC in\n- ,,)    echo \"int x;\" > $dummy.c ;\n-\tfor c in cc gcc c89 c99 ; do\n-\t  if ($c -c -o $dummy.o $dummy.c) >/dev/null 2>&1 ; then\n-\t     CC_FOR_BUILD=\"$c\"; break ;\n-\t  fi ;\n-\tdone ;\n-\tif test x\"$CC_FOR_BUILD\" = x ; then\n-\t  CC_FOR_BUILD=no_compiler_found ;\n-\tfi\n-\t;;\n- ,,*)   CC_FOR_BUILD=$CC ;;\n- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;\n-esac ; set_cc_for_build= ;'\n-\n-# This is needed to find uname on a Pyramid OSx when run in the BSD universe.\n-# (ghazi@noc.rutgers.edu 1994-08-24)\n-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then\n-\tPATH=$PATH:/.attbin ; export PATH\n-fi\n-\n-UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown\n-UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown\n-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown\n-UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown\n-\n-case \"${UNAME_SYSTEM}\" in\n-Linux|GNU|GNU/*)\n-\t# If the system lacks a compiler, then just pick glibc.\n-\t# We could probably try harder.\n-\tLIBC=gnu\n-\n-\teval $set_cc_for_build\n-\tcat <<-EOF > $dummy.c\n-\t#include <features.h>\n-\t#if defined(__UCLIBC__)\n-\tLIBC=uclibc\n-\t#elif defined(__dietlibc__)\n-\tLIBC=dietlibc\n-\t#else\n-\tLIBC=gnu\n-\t#endif\n-\tEOF\n-\teval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`\n-\t;;\n-esac\n-\n-# Note: order is significant - the case branches are not exclusive.\n-\n-case \"${UNAME_MACHINE}:${UNAME_SYSTEM}:${UNAME_RELEASE}:${UNAME_VERSION}\" in\n-    *:NetBSD:*:*)\n-\t# NetBSD (nbsd) targets should (where applicable) match one or\n-\t# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,\n-\t# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently\n-\t# switched to ELF, *-*-netbsd* would select the old\n-\t# object file format.  This provides both forward\n-\t# compatibility and a consistent mechanism for selecting the\n-\t# object file format.\n-\t#\n-\t# Note: NetBSD doesn't particularly care about the vendor\n-\t# portion of the name.  We always set it to \"unknown\".\n-\tsysctl=\"sysctl -n hw.machine_arch\"\n-\tUNAME_MACHINE_ARCH=`(/sbin/$sysctl 2>/dev/null || \\\n-\t    /usr/sbin/$sysctl 2>/dev/null || echo unknown)`\n-\tcase \"${UNAME_MACHINE_ARCH}\" in\n-\t    armeb) machine=armeb-unknown ;;\n-\t    arm*) machine=arm-unknown ;;\n-\t    sh3el) machine=shl-unknown ;;\n-\t    sh3eb) machine=sh-unknown ;;\n-\t    sh5el) machine=sh5le-unknown ;;\n-\t    *) machine=${UNAME_MACHINE_ARCH}-unknown ;;\n-\tesac\n-\t# The Operating System including object format, if it has switched\n-\t# to ELF recently, or will in the future.\n-\tcase \"${UNAME_MACHINE_ARCH}\" in\n-\t    arm*|i386|m68k|ns32k|sh3*|sparc|vax)\n-\t\teval $set_cc_for_build\n-\t\tif echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \\\n-\t\t\t| grep -q __ELF__\n-\t\tthen\n-\t\t    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).\n-\t\t    # Return netbsd for either.  FIX?\n-\t\t    os=netbsd\n-\t\telse\n-\t\t    os=netbsdelf\n-\t\tfi\n-\t\t;;\n-\t    *)\n-\t\tos=netbsd\n-\t\t;;\n-\tesac\n-\t# The OS release\n-\t# Debian GNU/NetBSD machines have a different userland, and\n-\t# thus, need a distinct triplet. However, they do not need\n-\t# kernel version information, so it can be replaced with a\n-\t# suitable tag, in the style of linux-gnu.\n-\tcase \"${UNAME_VERSION}\" in\n-\t    Debian*)\n-\t\trelease='-gnu'\n-\t\t;;\n-\t    *)\n-\t\trelease=`echo ${UNAME_RELEASE}|sed -e 's/[-_].*/\\./'`\n-\t\t;;\n-\tesac\n-\t# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:\n-\t# contains redundant information, the shorter form:\n-\t# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.\n-\techo \"${machine}-${os}${release}\"\n-\texit ;;\n-    *:Bitrig:*:*)\n-\tUNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`\n-\techo ${UNAME_MACHINE_ARCH}-unknown-bitrig${UNAME_RELEASE}\n-\texit ;;\n-    *:OpenBSD:*:*)\n-\tUNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`\n-\techo ${UNAME_MACHINE_ARCH}-unknown-openbsd${UNAME_RELEASE}\n-\texit ;;\n-    *:ekkoBSD:*:*)\n-\techo ${UNAME_MACHINE}-unknown-ekkobsd${UNAME_RELEASE}\n-\texit ;;\n-    *:SolidBSD:*:*)\n-\techo ${UNAME_MACHINE}-unknown-solidbsd${UNAME_RELEASE}\n-\texit ;;\n-    macppc:MirBSD:*:*)\n-\techo powerpc-unknown-mirbsd${UNAME_RELEASE}\n-\texit ;;\n-    *:MirBSD:*:*)\n-\techo ${UNAME_MACHINE}-unknown-mirbsd${UNAME_RELEASE}\n-\texit ;;\n-    alpha:OSF1:*:*)\n-\tcase $UNAME_RELEASE in\n-\t*4.0)\n-\t\tUNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`\n-\t\t;;\n-\t*5.*)\n-\t\tUNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`\n-\t\t;;\n-\tesac\n-\t# According to Compaq, /usr/sbin/psrinfo has been available on\n-\t# OSF/1 and Tru64 systems produced since 1995.  I hope that\n-\t# covers most systems running today.  This code pipes the CPU\n-\t# types through head -n 1, so we only detect the type of CPU 0.\n-\tALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \\(.*\\) processor.*$/\\1/p' | head -n 1`\n-\tcase \"$ALPHA_CPU_TYPE\" in\n-\t    \"EV4 (21064)\")\n-\t\tUNAME_MACHINE=\"alpha\" ;;\n-\t    \"EV4.5 (21064)\")\n-\t\tUNAME_MACHINE=\"alpha\" ;;\n-\t    \"LCA4 (21066/21068)\")\n-\t\tUNAME_MACHINE=\"alpha\" ;;\n-\t    \"EV5 (21164)\")\n-\t\tUNAME_MACHINE=\"alphaev5\" ;;\n-\t    \"EV5.6 (21164A)\")\n-\t\tUNAME_MACHINE=\"alphaev56\" ;;\n-\t    \"EV5.6 (21164PC)\")\n-\t\tUNAME_MACHINE=\"alphapca56\" ;;\n-\t    \"EV5.7 (21164PC)\")\n-\t\tUNAME_MACHINE=\"alphapca57\" ;;\n-\t    \"EV6 (21264)\")\n-\t\tUNAME_MACHINE=\"alphaev6\" ;;\n-\t    \"EV6.7 (21264A)\")\n-\t\tUNAME_MACHINE=\"alphaev67\" ;;\n-\t    \"EV6.8CB (21264C)\")\n-\t\tUNAME_MACHINE=\"alphaev68\" ;;\n-\t    \"EV6.8AL (21264B)\")\n-\t\tUNAME_MACHINE=\"alphaev68\" ;;\n-\t    \"EV6.8CX (21264D)\")\n-\t\tUNAME_MACHINE=\"alphaev68\" ;;\n-\t    \"EV6.9A (21264/EV69A)\")\n-\t\tUNAME_MACHINE=\"alphaev69\" ;;\n-\t    \"EV7 (21364)\")\n-\t\tUNAME_MACHINE=\"alphaev7\" ;;\n-\t    \"EV7.9 (21364A)\")\n-\t\tUNAME_MACHINE=\"alphaev79\" ;;\n-\tesac\n-\t# A Pn.n version is a patched version.\n-\t# A Vn.n version is a released version.\n-\t# A Tn.n version is a released field test version.\n-\t# A Xn.n version is an unreleased experimental baselevel.\n-\t# 1.2 uses \"1.2\" for uname -r.\n-\techo ${UNAME_MACHINE}-dec-osf`echo ${UNAME_RELEASE} | sed -e 's/^[PVTX]//' | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n-\t# Reset EXIT trap before exiting to avoid spurious non-zero exit code.\n-\texitcode=$?\n-\ttrap '' 0\n-\texit $exitcode ;;\n-    Alpha\\ *:Windows_NT*:*)\n-\t# How do we know it's Interix rather than the generic POSIX subsystem?\n-\t# Should we change UNAME_MACHINE based on the output of uname instead\n-\t# of the specific Alpha model?\n-\techo alpha-pc-interix\n-\texit ;;\n-    21064:Windows_NT:50:3)\n-\techo alpha-dec-winnt3.5\n-\texit ;;\n-    Amiga*:UNIX_System_V:4.0:*)\n-\techo m68k-unknown-sysv4\n-\texit ;;\n-    *:[Aa]miga[Oo][Ss]:*:*)\n-\techo ${UNAME_MACHINE}-unknown-amigaos\n-\texit ;;\n-    *:[Mm]orph[Oo][Ss]:*:*)\n-\techo ${UNAME_MACHINE}-unknown-morphos\n-\texit ;;\n-    *:OS/390:*:*)\n-\techo i370-ibm-openedition\n-\texit ;;\n-    *:z/VM:*:*)\n-\techo s390-ibm-zvmoe\n-\texit ;;\n-    *:OS400:*:*)\n-\techo powerpc-ibm-os400\n-\texit ;;\n-    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)\n-\techo arm-acorn-riscix${UNAME_RELEASE}\n-\texit ;;\n-    arm*:riscos:*:*|arm*:RISCOS:*:*)\n-\techo arm-unknown-riscos\n-\texit ;;\n-    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)\n-\techo hppa1.1-hitachi-hiuxmpp\n-\texit ;;\n-    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)\n-\t# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.\n-\tif test \"`(/bin/universe) 2>/dev/null`\" = att ; then\n-\t\techo pyramid-pyramid-sysv3\n-\telse\n-\t\techo pyramid-pyramid-bsd\n-\tfi\n-\texit ;;\n-    NILE*:*:*:dcosx)\n-\techo pyramid-pyramid-svr4\n-\texit ;;\n-    DRS?6000:unix:4.0:6*)\n-\techo sparc-icl-nx6\n-\texit ;;\n-    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)\n-\tcase `/usr/bin/uname -p` in\n-\t    sparc) echo sparc-icl-nx7; exit ;;\n-\tesac ;;\n-    s390x:SunOS:*:*)\n-\techo ${UNAME_MACHINE}-ibm-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    sun4H:SunOS:5.*:*)\n-\techo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)\n-\techo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)\n-\techo i386-pc-auroraux${UNAME_RELEASE}\n-\texit ;;\n-    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)\n-\teval $set_cc_for_build\n-\tSUN_ARCH=\"i386\"\n-\t# If there is a compiler, see if it is configured for 64-bit objects.\n-\t# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.\n-\t# This test works for both compilers.\n-\tif [ \"$CC_FOR_BUILD\" != 'no_compiler_found' ]; then\n-\t    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \\\n-\t\t(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \\\n-\t\tgrep IS_64BIT_ARCH >/dev/null\n-\t    then\n-\t\tSUN_ARCH=\"x86_64\"\n-\t    fi\n-\tfi\n-\techo ${SUN_ARCH}-pc-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    sun4*:SunOS:6*:*)\n-\t# According to config.sub, this is the proper way to canonicalize\n-\t# SunOS6.  Hard to guess exactly what SunOS6 will be like, but\n-\t# it's likely to be more like Solaris than SunOS4.\n-\techo sparc-sun-solaris3`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    sun4*:SunOS:*:*)\n-\tcase \"`/usr/bin/arch -k`\" in\n-\t    Series*|S4*)\n-\t\tUNAME_RELEASE=`uname -v`\n-\t\t;;\n-\tesac\n-\t# Japanese Language versions have a version number like `4.1.3-JL'.\n-\techo sparc-sun-sunos`echo ${UNAME_RELEASE}|sed -e 's/-/_/'`\n-\texit ;;\n-    sun3*:SunOS:*:*)\n-\techo m68k-sun-sunos${UNAME_RELEASE}\n-\texit ;;\n-    sun*:*:4.2BSD:*)\n-\tUNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`\n-\ttest \"x${UNAME_RELEASE}\" = \"x\" && UNAME_RELEASE=3\n-\tcase \"`/bin/arch`\" in\n-\t    sun3)\n-\t\techo m68k-sun-sunos${UNAME_RELEASE}\n-\t\t;;\n-\t    sun4)\n-\t\techo sparc-sun-sunos${UNAME_RELEASE}\n-\t\t;;\n-\tesac\n-\texit ;;\n-    aushp:SunOS:*:*)\n-\techo sparc-auspex-sunos${UNAME_RELEASE}\n-\texit ;;\n-    # The situation for MiNT is a little confusing.  The machine name\n-    # can be virtually everything (everything which is not\n-    # \"atarist\" or \"atariste\" at least should have a processor\n-    # > m68000).  The system name ranges from \"MiNT\" over \"FreeMiNT\"\n-    # to the lowercase version \"mint\" (or \"freemint\").  Finally\n-    # the system name \"TOS\" denotes a system which is actually not\n-    # MiNT.  But MiNT is downward compatible to TOS, so this should\n-    # be no problem.\n-    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)\n-\techo m68k-atari-mint${UNAME_RELEASE}\n-\texit ;;\n-    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)\n-\techo m68k-atari-mint${UNAME_RELEASE}\n-\texit ;;\n-    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)\n-\techo m68k-atari-mint${UNAME_RELEASE}\n-\texit ;;\n-    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)\n-\techo m68k-milan-mint${UNAME_RELEASE}\n-\texit ;;\n-    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)\n-\techo m68k-hades-mint${UNAME_RELEASE}\n-\texit ;;\n-    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)\n-\techo m68k-unknown-mint${UNAME_RELEASE}\n-\texit ;;\n-    m68k:machten:*:*)\n-\techo m68k-apple-machten${UNAME_RELEASE}\n-\texit ;;\n-    powerpc:machten:*:*)\n-\techo powerpc-apple-machten${UNAME_RELEASE}\n-\texit ;;\n-    RISC*:Mach:*:*)\n-\techo mips-dec-mach_bsd4.3\n-\texit ;;\n-    RISC*:ULTRIX:*:*)\n-\techo mips-dec-ultrix${UNAME_RELEASE}\n-\texit ;;\n-    VAX*:ULTRIX*:*:*)\n-\techo vax-dec-ultrix${UNAME_RELEASE}\n-\texit ;;\n-    2020:CLIX:*:* | 2430:CLIX:*:*)\n-\techo clipper-intergraph-clix${UNAME_RELEASE}\n-\texit ;;\n-    mips:*:*:UMIPS | mips:*:*:RISCos)\n-\teval $set_cc_for_build\n-\tsed 's/^\t//' << EOF >$dummy.c\n-#ifdef __cplusplus\n-#include <stdio.h>  /* for printf() prototype */\n-\tint main (int argc, char *argv[]) {\n-#else\n-\tint main (argc, argv) int argc; char *argv[]; {\n-#endif\n-\t#if defined (host_mips) && defined (MIPSEB)\n-\t#if defined (SYSTYPE_SYSV)\n-\t  printf (\"mips-mips-riscos%ssysv\\n\", argv[1]); exit (0);\n-\t#endif\n-\t#if defined (SYSTYPE_SVR4)\n-\t  printf (\"mips-mips-riscos%ssvr4\\n\", argv[1]); exit (0);\n-\t#endif\n-\t#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)\n-\t  printf (\"mips-mips-riscos%sbsd\\n\", argv[1]); exit (0);\n-\t#endif\n-\t#endif\n-\t  exit (-1);\n-\t}\n-EOF\n-\t$CC_FOR_BUILD -o $dummy $dummy.c &&\n-\t  dummyarg=`echo \"${UNAME_RELEASE}\" | sed -n 's/\\([0-9]*\\).*/\\1/p'` &&\n-\t  SYSTEM_NAME=`$dummy $dummyarg` &&\n-\t    { echo \"$SYSTEM_NAME\"; exit; }\n-\techo mips-mips-riscos${UNAME_RELEASE}\n-\texit ;;\n-    Motorola:PowerMAX_OS:*:*)\n-\techo powerpc-motorola-powermax\n-\texit ;;\n-    Motorola:*:4.3:PL8-*)\n-\techo powerpc-harris-powermax\n-\texit ;;\n-    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)\n-\techo powerpc-harris-powermax\n-\texit ;;\n-    Night_Hawk:Power_UNIX:*:*)\n-\techo powerpc-harris-powerunix\n-\texit ;;\n-    m88k:CX/UX:7*:*)\n-\techo m88k-harris-cxux7\n-\texit ;;\n-    m88k:*:4*:R4*)\n-\techo m88k-motorola-sysv4\n-\texit ;;\n-    m88k:*:3*:R3*)\n-\techo m88k-motorola-sysv3\n-\texit ;;\n-    AViiON:dgux:*:*)\n-\t# DG/UX returns AViiON for all architectures\n-\tUNAME_PROCESSOR=`/usr/bin/uname -p`\n-\tif [ $UNAME_PROCESSOR = mc88100 ] || [ $UNAME_PROCESSOR = mc88110 ]\n-\tthen\n-\t    if [ ${TARGET_BINARY_INTERFACE}x = m88kdguxelfx ] || \\\n-\t       [ ${TARGET_BINARY_INTERFACE}x = x ]\n-\t    then\n-\t\techo m88k-dg-dgux${UNAME_RELEASE}\n-\t    else\n-\t\techo m88k-dg-dguxbcs${UNAME_RELEASE}\n-\t    fi\n-\telse\n-\t    echo i586-dg-dgux${UNAME_RELEASE}\n-\tfi\n-\texit ;;\n-    M88*:DolphinOS:*:*)\t# DolphinOS (SVR3)\n-\techo m88k-dolphin-sysv3\n-\texit ;;\n-    M88*:*:R3*:*)\n-\t# Delta 88k system running SVR3\n-\techo m88k-motorola-sysv3\n-\texit ;;\n-    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)\n-\techo m88k-tektronix-sysv3\n-\texit ;;\n-    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)\n-\techo m68k-tektronix-bsd\n-\texit ;;\n-    *:IRIX*:*:*)\n-\techo mips-sgi-irix`echo ${UNAME_RELEASE}|sed -e 's/-/_/g'`\n-\texit ;;\n-    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.\n-\techo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id\n-\texit ;;               # Note that: echo \"'`uname -s`'\" gives 'AIX '\n-    i*86:AIX:*:*)\n-\techo i386-ibm-aix\n-\texit ;;\n-    ia64:AIX:*:*)\n-\tif [ -x /usr/bin/oslevel ] ; then\n-\t\tIBM_REV=`/usr/bin/oslevel`\n-\telse\n-\t\tIBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}\n-\tfi\n-\techo ${UNAME_MACHINE}-ibm-aix${IBM_REV}\n-\texit ;;\n-    *:AIX:2:3)\n-\tif grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then\n-\t\teval $set_cc_for_build\n-\t\tsed 's/^\t\t//' << EOF >$dummy.c\n-\t\t#include <sys/systemcfg.h>\n-\n-\t\tmain()\n-\t\t\t{\n-\t\t\tif (!__power_pc())\n-\t\t\t\texit(1);\n-\t\t\tputs(\"powerpc-ibm-aix3.2.5\");\n-\t\t\texit(0);\n-\t\t\t}\n-EOF\n-\t\tif $CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy`\n-\t\tthen\n-\t\t\techo \"$SYSTEM_NAME\"\n-\t\telse\n-\t\t\techo rs6000-ibm-aix3.2.5\n-\t\tfi\n-\telif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then\n-\t\techo rs6000-ibm-aix3.2.4\n-\telse\n-\t\techo rs6000-ibm-aix3.2\n-\tfi\n-\texit ;;\n-    *:AIX:*:[4567])\n-\tIBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`\n-\tif /usr/sbin/lsattr -El ${IBM_CPU_ID} | grep ' POWER' >/dev/null 2>&1; then\n-\t\tIBM_ARCH=rs6000\n-\telse\n-\t\tIBM_ARCH=powerpc\n-\tfi\n-\tif [ -x /usr/bin/oslevel ] ; then\n-\t\tIBM_REV=`/usr/bin/oslevel`\n-\telse\n-\t\tIBM_REV=${UNAME_VERSION}.${UNAME_RELEASE}\n-\tfi\n-\techo ${IBM_ARCH}-ibm-aix${IBM_REV}\n-\texit ;;\n-    *:AIX:*:*)\n-\techo rs6000-ibm-aix\n-\texit ;;\n-    ibmrt:4.4BSD:*|romp-ibm:BSD:*)\n-\techo romp-ibm-bsd4.4\n-\texit ;;\n-    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and\n-\techo romp-ibm-bsd${UNAME_RELEASE}   # 4.3 with uname added to\n-\texit ;;                             # report: romp-ibm BSD 4.3\n-    *:BOSX:*:*)\n-\techo rs6000-bull-bosx\n-\texit ;;\n-    DPX/2?00:B.O.S.:*:*)\n-\techo m68k-bull-sysv3\n-\texit ;;\n-    9000/[34]??:4.3bsd:1.*:*)\n-\techo m68k-hp-bsd\n-\texit ;;\n-    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)\n-\techo m68k-hp-bsd4.4\n-\texit ;;\n-    9000/[34678]??:HP-UX:*:*)\n-\tHPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`\n-\tcase \"${UNAME_MACHINE}\" in\n-\t    9000/31? )            HP_ARCH=m68000 ;;\n-\t    9000/[34]?? )         HP_ARCH=m68k ;;\n-\t    9000/[678][0-9][0-9])\n-\t\tif [ -x /usr/bin/getconf ]; then\n-\t\t    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`\n-\t\t    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`\n-\t\t    case \"${sc_cpu_version}\" in\n-\t\t      523) HP_ARCH=\"hppa1.0\" ;; # CPU_PA_RISC1_0\n-\t\t      528) HP_ARCH=\"hppa1.1\" ;; # CPU_PA_RISC1_1\n-\t\t      532)                      # CPU_PA_RISC2_0\n-\t\t\tcase \"${sc_kernel_bits}\" in\n-\t\t\t  32) HP_ARCH=\"hppa2.0n\" ;;\n-\t\t\t  64) HP_ARCH=\"hppa2.0w\" ;;\n-\t\t\t  '') HP_ARCH=\"hppa2.0\" ;;   # HP-UX 10.20\n-\t\t\tesac ;;\n-\t\t    esac\n-\t\tfi\n-\t\tif [ \"${HP_ARCH}\" = \"\" ]; then\n-\t\t    eval $set_cc_for_build\n-\t\t    sed 's/^\t\t//' << EOF >$dummy.c\n-\n-\t\t#define _HPUX_SOURCE\n-\t\t#include <stdlib.h>\n-\t\t#include <unistd.h>\n-\n-\t\tint main ()\n-\t\t{\n-\t\t#if defined(_SC_KERNEL_BITS)\n-\t\t    long bits = sysconf(_SC_KERNEL_BITS);\n-\t\t#endif\n-\t\t    long cpu  = sysconf (_SC_CPU_VERSION);\n-\n-\t\t    switch (cpu)\n-\t\t\t{\n-\t\t\tcase CPU_PA_RISC1_0: puts (\"hppa1.0\"); break;\n-\t\t\tcase CPU_PA_RISC1_1: puts (\"hppa1.1\"); break;\n-\t\t\tcase CPU_PA_RISC2_0:\n-\t\t#if defined(_SC_KERNEL_BITS)\n-\t\t\t    switch (bits)\n-\t\t\t\t{\n-\t\t\t\tcase 64: puts (\"hppa2.0w\"); break;\n-\t\t\t\tcase 32: puts (\"hppa2.0n\"); break;\n-\t\t\t\tdefault: puts (\"hppa2.0\"); break;\n-\t\t\t\t} break;\n-\t\t#else  /* !defined(_SC_KERNEL_BITS) */\n-\t\t\t    puts (\"hppa2.0\"); break;\n-\t\t#endif\n-\t\t\tdefault: puts (\"hppa1.0\"); break;\n-\t\t\t}\n-\t\t    exit (0);\n-\t\t}\n-EOF\n-\t\t    (CCOPTS= $CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null) && HP_ARCH=`$dummy`\n-\t\t    test -z \"$HP_ARCH\" && HP_ARCH=hppa\n-\t\tfi ;;\n-\tesac\n-\tif [ ${HP_ARCH} = \"hppa2.0w\" ]\n-\tthen\n-\t    eval $set_cc_for_build\n-\n-\t    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating\n-\t    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler\n-\t    # generating 64-bit code.  GNU and HP use different nomenclature:\n-\t    #\n-\t    # $ CC_FOR_BUILD=cc ./config.guess\n-\t    # => hppa2.0w-hp-hpux11.23\n-\t    # $ CC_FOR_BUILD=\"cc +DA2.0w\" ./config.guess\n-\t    # => hppa64-hp-hpux11.23\n-\n-\t    if echo __LP64__ | (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) |\n-\t\tgrep -q __LP64__\n-\t    then\n-\t\tHP_ARCH=\"hppa2.0w\"\n-\t    else\n-\t\tHP_ARCH=\"hppa64\"\n-\t    fi\n-\tfi\n-\techo ${HP_ARCH}-hp-hpux${HPUX_REV}\n-\texit ;;\n-    ia64:HP-UX:*:*)\n-\tHPUX_REV=`echo ${UNAME_RELEASE}|sed -e 's/[^.]*.[0B]*//'`\n-\techo ia64-hp-hpux${HPUX_REV}\n-\texit ;;\n-    3050*:HI-UX:*:*)\n-\teval $set_cc_for_build\n-\tsed 's/^\t//' << EOF >$dummy.c\n-\t#include <unistd.h>\n-\tint\n-\tmain ()\n-\t{\n-\t  long cpu = sysconf (_SC_CPU_VERSION);\n-\t  /* The order matters, because CPU_IS_HP_MC68K erroneously returns\n-\t     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct\n-\t     results, however.  */\n-\t  if (CPU_IS_PA_RISC (cpu))\n-\t    {\n-\t      switch (cpu)\n-\t\t{\n-\t\t  case CPU_PA_RISC1_0: puts (\"hppa1.0-hitachi-hiuxwe2\"); break;\n-\t\t  case CPU_PA_RISC1_1: puts (\"hppa1.1-hitachi-hiuxwe2\"); break;\n-\t\t  case CPU_PA_RISC2_0: puts (\"hppa2.0-hitachi-hiuxwe2\"); break;\n-\t\t  default: puts (\"hppa-hitachi-hiuxwe2\"); break;\n-\t\t}\n-\t    }\n-\t  else if (CPU_IS_HP_MC68K (cpu))\n-\t    puts (\"m68k-hitachi-hiuxwe2\");\n-\t  else puts (\"unknown-hitachi-hiuxwe2\");\n-\t  exit (0);\n-\t}\n-EOF\n-\t$CC_FOR_BUILD -o $dummy $dummy.c && SYSTEM_NAME=`$dummy` &&\n-\t\t{ echo \"$SYSTEM_NAME\"; exit; }\n-\techo unknown-hitachi-hiuxwe2\n-\texit ;;\n-    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:* )\n-\techo hppa1.1-hp-bsd\n-\texit ;;\n-    9000/8??:4.3bsd:*:*)\n-\techo hppa1.0-hp-bsd\n-\texit ;;\n-    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)\n-\techo hppa1.0-hp-mpeix\n-\texit ;;\n-    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:* )\n-\techo hppa1.1-hp-osf\n-\texit ;;\n-    hp8??:OSF1:*:*)\n-\techo hppa1.0-hp-osf\n-\texit ;;\n-    i*86:OSF1:*:*)\n-\tif [ -x /usr/sbin/sysversion ] ; then\n-\t    echo ${UNAME_MACHINE}-unknown-osf1mk\n-\telse\n-\t    echo ${UNAME_MACHINE}-unknown-osf1\n-\tfi\n-\texit ;;\n-    parisc*:Lites*:*:*)\n-\techo hppa1.1-hp-lites\n-\texit ;;\n-    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)\n-\techo c1-convex-bsd\n-\texit ;;\n-    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)\n-\tif getsysinfo -f scalar_acc\n-\tthen echo c32-convex-bsd\n-\telse echo c2-convex-bsd\n-\tfi\n-\texit ;;\n-    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)\n-\techo c34-convex-bsd\n-\texit ;;\n-    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)\n-\techo c38-convex-bsd\n-\texit ;;\n-    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)\n-\techo c4-convex-bsd\n-\texit ;;\n-    CRAY*Y-MP:*:*:*)\n-\techo ymp-cray-unicos${UNAME_RELEASE} | sed -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    CRAY*[A-Z]90:*:*:*)\n-\techo ${UNAME_MACHINE}-cray-unicos${UNAME_RELEASE} \\\n-\t| sed -e 's/CRAY.*\\([A-Z]90\\)/\\1/' \\\n-\t      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \\\n-\t      -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    CRAY*TS:*:*:*)\n-\techo t90-cray-unicos${UNAME_RELEASE} | sed -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    CRAY*T3E:*:*:*)\n-\techo alphaev5-cray-unicosmk${UNAME_RELEASE} | sed -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    CRAY*SV1:*:*:*)\n-\techo sv1-cray-unicos${UNAME_RELEASE} | sed -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    *:UNICOS/mp:*:*)\n-\techo craynv-cray-unicosmp${UNAME_RELEASE} | sed -e 's/\\.[^.]*$/.X/'\n-\texit ;;\n-    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)\n-\tFUJITSU_PROC=`uname -m | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz'`\n-\tFUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\\///'`\n-\tFUJITSU_REL=`echo ${UNAME_RELEASE} | sed -e 's/ /_/'`\n-\techo \"${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}\"\n-\texit ;;\n-    5000:UNIX_System_V:4.*:*)\n-\tFUJITSU_SYS=`uname -p | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/\\///'`\n-\tFUJITSU_REL=`echo ${UNAME_RELEASE} | tr 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' 'abcdefghijklmnopqrstuvwxyz' | sed -e 's/ /_/'`\n-\techo \"sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}\"\n-\texit ;;\n-    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\\ Embedded/OS:*:*)\n-\techo ${UNAME_MACHINE}-pc-bsdi${UNAME_RELEASE}\n-\texit ;;\n-    sparc*:BSD/OS:*:*)\n-\techo sparc-unknown-bsdi${UNAME_RELEASE}\n-\texit ;;\n-    *:BSD/OS:*:*)\n-\techo ${UNAME_MACHINE}-unknown-bsdi${UNAME_RELEASE}\n-\texit ;;\n-    *:FreeBSD:*:*)\n-\tUNAME_PROCESSOR=`/usr/bin/uname -p`\n-\tcase ${UNAME_PROCESSOR} in\n-\t    amd64)\n-\t\techo x86_64-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n-\t    *)\n-\t\techo ${UNAME_PROCESSOR}-unknown-freebsd`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'` ;;\n-\tesac\n-\texit ;;\n-    i*:CYGWIN*:*)\n-\techo ${UNAME_MACHINE}-pc-cygwin\n-\texit ;;\n-    *:MINGW64*:*)\n-\techo ${UNAME_MACHINE}-pc-mingw64\n-\texit ;;\n-    *:MINGW*:*)\n-\techo ${UNAME_MACHINE}-pc-mingw32\n-\texit ;;\n-    i*:MSYS*:*)\n-\techo ${UNAME_MACHINE}-pc-msys\n-\texit ;;\n-    i*:windows32*:*)\n-\t# uname -m includes \"-pc\" on this system.\n-\techo ${UNAME_MACHINE}-mingw32\n-\texit ;;\n-    i*:PW*:*)\n-\techo ${UNAME_MACHINE}-pc-pw32\n-\texit ;;\n-    *:Interix*:*)\n-\tcase ${UNAME_MACHINE} in\n-\t    x86)\n-\t\techo i586-pc-interix${UNAME_RELEASE}\n-\t\texit ;;\n-\t    authenticamd | genuineintel | EM64T)\n-\t\techo x86_64-unknown-interix${UNAME_RELEASE}\n-\t\texit ;;\n-\t    IA64)\n-\t\techo ia64-unknown-interix${UNAME_RELEASE}\n-\t\texit ;;\n-\tesac ;;\n-    [345]86:Windows_95:* | [345]86:Windows_98:* | [345]86:Windows_NT:*)\n-\techo i${UNAME_MACHINE}-pc-mks\n-\texit ;;\n-    8664:Windows_NT:*)\n-\techo x86_64-pc-mks\n-\texit ;;\n-    i*:Windows_NT*:* | Pentium*:Windows_NT*:*)\n-\t# How do we know it's Interix rather than the generic POSIX subsystem?\n-\t# It also conflicts with pre-2.0 versions of AT&T UWIN. Should we\n-\t# UNAME_MACHINE based on the output of uname instead of i386?\n-\techo i586-pc-interix\n-\texit ;;\n-    i*:UWIN*:*)\n-\techo ${UNAME_MACHINE}-pc-uwin\n-\texit ;;\n-    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)\n-\techo x86_64-unknown-cygwin\n-\texit ;;\n-    p*:CYGWIN*:*)\n-\techo powerpcle-unknown-cygwin\n-\texit ;;\n-    prep*:SunOS:5.*:*)\n-\techo powerpcle-unknown-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`\n-\texit ;;\n-    *:GNU:*:*)\n-\t# the GNU system\n-\techo `echo ${UNAME_MACHINE}|sed -e 's,[-/].*$,,'`-unknown-${LIBC}`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`\n-\texit ;;\n-    *:GNU/*:*:*)\n-\t# other systems with GNU libc and userland\n-\techo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-${LIBC}\n-\texit ;;\n-    i*86:Minix:*:*)\n-\techo ${UNAME_MACHINE}-pc-minix\n-\texit ;;\n-    aarch64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    aarch64_be:Linux:*:*)\n-\tUNAME_MACHINE=aarch64_be\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    alpha:Linux:*:*)\n-\tcase `sed -n '/^cpu model/s/^.*: \\(.*\\)/\\1/p' < /proc/cpuinfo` in\n-\t  EV5)   UNAME_MACHINE=alphaev5 ;;\n-\t  EV56)  UNAME_MACHINE=alphaev56 ;;\n-\t  PCA56) UNAME_MACHINE=alphapca56 ;;\n-\t  PCA57) UNAME_MACHINE=alphapca56 ;;\n-\t  EV6)   UNAME_MACHINE=alphaev6 ;;\n-\t  EV67)  UNAME_MACHINE=alphaev67 ;;\n-\t  EV68*) UNAME_MACHINE=alphaev68 ;;\n-\tesac\n-\tobjdump --private-headers /bin/sh | grep -q ld.so.1\n-\tif test \"$?\" = 0 ; then LIBC=\"gnulibc1\" ; fi\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    arc:Linux:*:* | arceb:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    arm*:Linux:*:*)\n-\teval $set_cc_for_build\n-\tif echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \\\n-\t    | grep -q __ARM_EABI__\n-\tthen\n-\t    echo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\telse\n-\t    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \\\n-\t\t| grep -q __ARM_PCS_VFP\n-\t    then\n-\t\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabi\n-\t    else\n-\t\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}eabihf\n-\t    fi\n-\tfi\n-\texit ;;\n-    avr32*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    cris:Linux:*:*)\n-\techo ${UNAME_MACHINE}-axis-linux-${LIBC}\n-\texit ;;\n-    crisv32:Linux:*:*)\n-\techo ${UNAME_MACHINE}-axis-linux-${LIBC}\n-\texit ;;\n-    frv:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    hexagon:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    i*86:Linux:*:*)\n-\techo ${UNAME_MACHINE}-pc-linux-${LIBC}\n-\texit ;;\n-    ia64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    m32r*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    m68*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    mips:Linux:*:* | mips64:Linux:*:*)\n-\teval $set_cc_for_build\n-\tsed 's/^\t//' << EOF >$dummy.c\n-\t#undef CPU\n-\t#undef ${UNAME_MACHINE}\n-\t#undef ${UNAME_MACHINE}el\n-\t#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)\n-\tCPU=${UNAME_MACHINE}el\n-\t#else\n-\t#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)\n-\tCPU=${UNAME_MACHINE}\n-\t#else\n-\tCPU=\n-\t#endif\n-\t#endif\n-EOF\n-\teval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`\n-\ttest x\"${CPU}\" != x && { echo \"${CPU}-unknown-linux-${LIBC}\"; exit; }\n-\t;;\n-    or1k:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    or32:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    padre:Linux:*:*)\n-\techo sparc-unknown-linux-${LIBC}\n-\texit ;;\n-    parisc64:Linux:*:* | hppa64:Linux:*:*)\n-\techo hppa64-unknown-linux-${LIBC}\n-\texit ;;\n-    parisc:Linux:*:* | hppa:Linux:*:*)\n-\t# Look for CPU level\n-\tcase `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in\n-\t  PA7*) echo hppa1.1-unknown-linux-${LIBC} ;;\n-\t  PA8*) echo hppa2.0-unknown-linux-${LIBC} ;;\n-\t  *)    echo hppa-unknown-linux-${LIBC} ;;\n-\tesac\n-\texit ;;\n-    ppc64:Linux:*:*)\n-\techo powerpc64-unknown-linux-${LIBC}\n-\texit ;;\n-    ppc:Linux:*:*)\n-\techo powerpc-unknown-linux-${LIBC}\n-\texit ;;\n-    ppc64le:Linux:*:*)\n-\techo powerpc64le-unknown-linux-${LIBC}\n-\texit ;;\n-    ppcle:Linux:*:*)\n-\techo powerpcle-unknown-linux-${LIBC}\n-\texit ;;\n-    s390:Linux:*:* | s390x:Linux:*:*)\n-\techo ${UNAME_MACHINE}-ibm-linux-${LIBC}\n-\texit ;;\n-    sh64*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    sh*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    sparc:Linux:*:* | sparc64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    tile*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    vax:Linux:*:*)\n-\techo ${UNAME_MACHINE}-dec-linux-${LIBC}\n-\texit ;;\n-    x86_64:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    xtensa*:Linux:*:*)\n-\techo ${UNAME_MACHINE}-unknown-linux-${LIBC}\n-\texit ;;\n-    i*86:DYNIX/ptx:4*:*)\n-\t# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.\n-\t# earlier versions are messed up and put the nodename in both\n-\t# sysname and nodename.\n-\techo i386-sequent-sysv4\n-\texit ;;\n-    i*86:UNIX_SV:4.2MP:2.*)\n-\t# Unixware is an offshoot of SVR4, but it has its own version\n-\t# number series starting with 2...\n-\t# I am not positive that other SVR4 systems won't match this,\n-\t# I just have to hope.  -- rms.\n-\t# Use sysv4.2uw... so that sysv4* matches it.\n-\techo ${UNAME_MACHINE}-pc-sysv4.2uw${UNAME_VERSION}\n-\texit ;;\n-    i*86:OS/2:*:*)\n-\t# If we were able to find `uname', then EMX Unix compatibility\n-\t# is probably installed.\n-\techo ${UNAME_MACHINE}-pc-os2-emx\n-\texit ;;\n-    i*86:XTS-300:*:STOP)\n-\techo ${UNAME_MACHINE}-unknown-stop\n-\texit ;;\n-    i*86:atheos:*:*)\n-\techo ${UNAME_MACHINE}-unknown-atheos\n-\texit ;;\n-    i*86:syllable:*:*)\n-\techo ${UNAME_MACHINE}-pc-syllable\n-\texit ;;\n-    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)\n-\techo i386-unknown-lynxos${UNAME_RELEASE}\n-\texit ;;\n-    i*86:*DOS:*:*)\n-\techo ${UNAME_MACHINE}-pc-msdosdjgpp\n-\texit ;;\n-    i*86:*:4.*:* | i*86:SYSTEM_V:4.*:*)\n-\tUNAME_REL=`echo ${UNAME_RELEASE} | sed 's/\\/MP$//'`\n-\tif grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then\n-\t\techo ${UNAME_MACHINE}-univel-sysv${UNAME_REL}\n-\telse\n-\t\techo ${UNAME_MACHINE}-pc-sysv${UNAME_REL}\n-\tfi\n-\texit ;;\n-    i*86:*:5:[678]*)\n-\t# UnixWare 7.x, OpenUNIX and OpenServer 6.\n-\tcase `/bin/uname -X | grep \"^Machine\"` in\n-\t    *486*)\t     UNAME_MACHINE=i486 ;;\n-\t    *Pentium)\t     UNAME_MACHINE=i586 ;;\n-\t    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;\n-\tesac\n-\techo ${UNAME_MACHINE}-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}\n-\texit ;;\n-    i*86:*:3.2:*)\n-\tif test -f /usr/options/cb.name; then\n-\t\tUNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`\n-\t\techo ${UNAME_MACHINE}-pc-isc$UNAME_REL\n-\telif /bin/uname -X 2>/dev/null >/dev/null ; then\n-\t\tUNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`\n-\t\t(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486\n-\t\t(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \\\n-\t\t\t&& UNAME_MACHINE=i586\n-\t\t(/bin/uname -X|grep '^Machine.*Pent *II' >/dev/null) \\\n-\t\t\t&& UNAME_MACHINE=i686\n-\t\t(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \\\n-\t\t\t&& UNAME_MACHINE=i686\n-\t\techo ${UNAME_MACHINE}-pc-sco$UNAME_REL\n-\telse\n-\t\techo ${UNAME_MACHINE}-pc-sysv32\n-\tfi\n-\texit ;;\n-    pc:*:*:*)\n-\t# Left here for compatibility:\n-\t# uname -m prints for DJGPP always 'pc', but it prints nothing about\n-\t# the processor, so we play safe by assuming i586.\n-\t# Note: whatever this is, it MUST be the same as what config.sub\n-\t# prints for the \"djgpp\" host, or else GDB configury will decide that\n-\t# this is a cross-build.\n-\techo i586-pc-msdosdjgpp\n-\texit ;;\n-    Intel:Mach:3*:*)\n-\techo i386-pc-mach3\n-\texit ;;\n-    paragon:*:*:*)\n-\techo i860-intel-osf1\n-\texit ;;\n-    i860:*:4.*:*) # i860-SVR4\n-\tif grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then\n-\t  echo i860-stardent-sysv${UNAME_RELEASE} # Stardent Vistra i860-SVR4\n-\telse # Add other i860-SVR4 vendors below as they are discovered.\n-\t  echo i860-unknown-sysv${UNAME_RELEASE}  # Unknown i860-SVR4\n-\tfi\n-\texit ;;\n-    mini*:CTIX:SYS*5:*)\n-\t# \"miniframe\"\n-\techo m68010-convergent-sysv\n-\texit ;;\n-    mc68k:UNIX:SYSTEM5:3.51m)\n-\techo m68k-convergent-sysv\n-\texit ;;\n-    M680?0:D-NIX:5.3:*)\n-\techo m68k-diab-dnix\n-\texit ;;\n-    M68*:*:R3V[5678]*:*)\n-\ttest -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;\n-    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)\n-\tOS_REL=''\n-\ttest -r /etc/.relid \\\n-\t&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid`\n-\t/bin/uname -p 2>/dev/null | grep 86 >/dev/null \\\n-\t  && { echo i486-ncr-sysv4.3${OS_REL}; exit; }\n-\t/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \\\n-\t  && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;\n-    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)\n-\t/bin/uname -p 2>/dev/null | grep 86 >/dev/null \\\n-\t  && { echo i486-ncr-sysv4; exit; } ;;\n-    NCR*:*:4.2:* | MPRAS*:*:4.2:*)\n-\tOS_REL='.3'\n-\ttest -r /etc/.relid \\\n-\t    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \\([0-9][0-9]\\).*/\\1/p' < /etc/.relid`\n-\t/bin/uname -p 2>/dev/null | grep 86 >/dev/null \\\n-\t    && { echo i486-ncr-sysv4.3${OS_REL}; exit; }\n-\t/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \\\n-\t    && { echo i586-ncr-sysv4.3${OS_REL}; exit; }\n-\t/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \\\n-\t    && { echo i586-ncr-sysv4.3${OS_REL}; exit; } ;;\n-    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)\n-\techo m68k-unknown-lynxos${UNAME_RELEASE}\n-\texit ;;\n-    mc68030:UNIX_System_V:4.*:*)\n-\techo m68k-atari-sysv4\n-\texit ;;\n-    TSUNAMI:LynxOS:2.*:*)\n-\techo sparc-unknown-lynxos${UNAME_RELEASE}\n-\texit ;;\n-    rs6000:LynxOS:2.*:*)\n-\techo rs6000-unknown-lynxos${UNAME_RELEASE}\n-\texit ;;\n-    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)\n-\techo powerpc-unknown-lynxos${UNAME_RELEASE}\n-\texit ;;\n-    SM[BE]S:UNIX_SV:*:*)\n-\techo mips-dde-sysv${UNAME_RELEASE}\n-\texit ;;\n-    RM*:ReliantUNIX-*:*:*)\n-\techo mips-sni-sysv4\n-\texit ;;\n-    RM*:SINIX-*:*:*)\n-\techo mips-sni-sysv4\n-\texit ;;\n-    *:SINIX-*:*:*)\n-\tif uname -p 2>/dev/null >/dev/null ; then\n-\t\tUNAME_MACHINE=`(uname -p) 2>/dev/null`\n-\t\techo ${UNAME_MACHINE}-sni-sysv4\n-\telse\n-\t\techo ns32k-sni-sysv\n-\tfi\n-\texit ;;\n-    PENTIUM:*:4.0*:*)\t# Unisys `ClearPath HMP IX 4000' SVR4/MP effort\n-\t\t\t# says <Richard.M.Bartel@ccMail.Census.GOV>\n-\techo i586-unisys-sysv4\n-\texit ;;\n-    *:UNIX_System_V:4*:FTX*)\n-\t# From Gerald Hewes <hewes@openmarket.com>.\n-\t# How about differentiating between stratus architectures? -djm\n-\techo hppa1.1-stratus-sysv4\n-\texit ;;\n-    *:*:*:FTX*)\n-\t# From seanf@swdc.stratus.com.\n-\techo i860-stratus-sysv4\n-\texit ;;\n-    i*86:VOS:*:*)\n-\t# From Paul.Green@stratus.com.\n-\techo ${UNAME_MACHINE}-stratus-vos\n-\texit ;;\n-    *:VOS:*:*)\n-\t# From Paul.Green@stratus.com.\n-\techo hppa1.1-stratus-vos\n-\texit ;;\n-    mc68*:A/UX:*:*)\n-\techo m68k-apple-aux${UNAME_RELEASE}\n-\texit ;;\n-    news*:NEWS-OS:6*:*)\n-\techo mips-sony-newsos6\n-\texit ;;\n-    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)\n-\tif [ -d /usr/nec ]; then\n-\t\techo mips-nec-sysv${UNAME_RELEASE}\n-\telse\n-\t\techo mips-unknown-sysv${UNAME_RELEASE}\n-\tfi\n-\texit ;;\n-    BeBox:BeOS:*:*)\t# BeOS running on hardware made by Be, PPC only.\n-\techo powerpc-be-beos\n-\texit ;;\n-    BeMac:BeOS:*:*)\t# BeOS running on Mac or Mac clone, PPC only.\n-\techo powerpc-apple-beos\n-\texit ;;\n-    BePC:BeOS:*:*)\t# BeOS running on Intel PC compatible.\n-\techo i586-pc-beos\n-\texit ;;\n-    BePC:Haiku:*:*)\t# Haiku running on Intel PC compatible.\n-\techo i586-pc-haiku\n-\texit ;;\n-    x86_64:Haiku:*:*)\n-\techo x86_64-unknown-haiku\n-\texit ;;\n-    SX-4:SUPER-UX:*:*)\n-\techo sx4-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    SX-5:SUPER-UX:*:*)\n-\techo sx5-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    SX-6:SUPER-UX:*:*)\n-\techo sx6-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    SX-7:SUPER-UX:*:*)\n-\techo sx7-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    SX-8:SUPER-UX:*:*)\n-\techo sx8-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    SX-8R:SUPER-UX:*:*)\n-\techo sx8r-nec-superux${UNAME_RELEASE}\n-\texit ;;\n-    Power*:Rhapsody:*:*)\n-\techo powerpc-apple-rhapsody${UNAME_RELEASE}\n-\texit ;;\n-    *:Rhapsody:*:*)\n-\techo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}\n-\texit ;;\n-    *:Darwin:*:*)\n-\tUNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown\n-\teval $set_cc_for_build\n-\tif test \"$UNAME_PROCESSOR\" = unknown ; then\n-\t    UNAME_PROCESSOR=powerpc\n-\tfi\n-\tif [ \"$CC_FOR_BUILD\" != 'no_compiler_found' ]; then\n-\t    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \\\n-\t\t(CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \\\n-\t\tgrep IS_64BIT_ARCH >/dev/null\n-\t    then\n-\t\tcase $UNAME_PROCESSOR in\n-\t\t    i386) UNAME_PROCESSOR=x86_64 ;;\n-\t\t    powerpc) UNAME_PROCESSOR=powerpc64 ;;\n-\t\tesac\n-\t    fi\n-\tfi\n-\techo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}\n-\texit ;;\n-    *:procnto*:*:* | *:QNX:[0123456789]*:*)\n-\tUNAME_PROCESSOR=`uname -p`\n-\tif test \"$UNAME_PROCESSOR\" = \"x86\"; then\n-\t\tUNAME_PROCESSOR=i386\n-\t\tUNAME_MACHINE=pc\n-\tfi\n-\techo ${UNAME_PROCESSOR}-${UNAME_MACHINE}-nto-qnx${UNAME_RELEASE}\n-\texit ;;\n-    *:QNX:*:4*)\n-\techo i386-pc-qnx\n-\texit ;;\n-    NEO-?:NONSTOP_KERNEL:*:*)\n-\techo neo-tandem-nsk${UNAME_RELEASE}\n-\texit ;;\n-    NSE-*:NONSTOP_KERNEL:*:*)\n-\techo nse-tandem-nsk${UNAME_RELEASE}\n-\texit ;;\n-    NSR-?:NONSTOP_KERNEL:*:*)\n-\techo nsr-tandem-nsk${UNAME_RELEASE}\n-\texit ;;\n-    *:NonStop-UX:*:*)\n-\techo mips-compaq-nonstopux\n-\texit ;;\n-    BS2000:POSIX*:*:*)\n-\techo bs2000-siemens-sysv\n-\texit ;;\n-    DS/*:UNIX_System_V:*:*)\n-\techo ${UNAME_MACHINE}-${UNAME_SYSTEM}-${UNAME_RELEASE}\n-\texit ;;\n-    *:Plan9:*:*)\n-\t# \"uname -m\" is not consistent, so use $cputype instead. 386\n-\t# is converted to i386 for consistency with other x86\n-\t# operating systems.\n-\tif test \"$cputype\" = \"386\"; then\n-\t    UNAME_MACHINE=i386\n-\telse\n-\t    UNAME_MACHINE=\"$cputype\"\n-\tfi\n-\techo ${UNAME_MACHINE}-unknown-plan9\n-\texit ;;\n-    *:TOPS-10:*:*)\n-\techo pdp10-unknown-tops10\n-\texit ;;\n-    *:TENEX:*:*)\n-\techo pdp10-unknown-tenex\n-\texit ;;\n-    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)\n-\techo pdp10-dec-tops20\n-\texit ;;\n-    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)\n-\techo pdp10-xkl-tops20\n-\texit ;;\n-    *:TOPS-20:*:*)\n-\techo pdp10-unknown-tops20\n-\texit ;;\n-    *:ITS:*:*)\n-\techo pdp10-unknown-its\n-\texit ;;\n-    SEI:*:*:SEIUX)\n-\techo mips-sei-seiux${UNAME_RELEASE}\n-\texit ;;\n-    *:DragonFly:*:*)\n-\techo ${UNAME_MACHINE}-unknown-dragonfly`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`\n-\texit ;;\n-    *:*VMS:*:*)\n-\tUNAME_MACHINE=`(uname -p) 2>/dev/null`\n-\tcase \"${UNAME_MACHINE}\" in\n-\t    A*) echo alpha-dec-vms ; exit ;;\n-\t    I*) echo ia64-dec-vms ; exit ;;\n-\t    V*) echo vax-dec-vms ; exit ;;\n-\tesac ;;\n-    *:XENIX:*:SysV)\n-\techo i386-pc-xenix\n-\texit ;;\n-    i*86:skyos:*:*)\n-\techo ${UNAME_MACHINE}-pc-skyos`echo ${UNAME_RELEASE}` | sed -e 's/ .*$//'\n-\texit ;;\n-    i*86:rdos:*:*)\n-\techo ${UNAME_MACHINE}-pc-rdos\n-\texit ;;\n-    i*86:AROS:*:*)\n-\techo ${UNAME_MACHINE}-pc-aros\n-\texit ;;\n-    x86_64:VMkernel:*:*)\n-\techo ${UNAME_MACHINE}-unknown-esx\n-\texit ;;\n-esac\n-\n-eval $set_cc_for_build\n-cat >$dummy.c <<EOF\n-#ifdef _SEQUENT_\n-# include <sys/types.h>\n-# include <sys/utsname.h>\n-#endif\n-main ()\n-{\n-#if defined (sony)\n-#if defined (MIPSEB)\n-  /* BFD wants \"bsd\" instead of \"newsos\".  Perhaps BFD should be changed,\n-     I don't know....  */\n-  printf (\"mips-sony-bsd\\n\"); exit (0);\n-#else\n-#include <sys/param.h>\n-  printf (\"m68k-sony-newsos%s\\n\",\n-#ifdef NEWSOS4\n-\t\"4\"\n-#else\n-\t\"\"\n-#endif\n-\t); exit (0);\n-#endif\n-#endif\n-\n-#if defined (__arm) && defined (__acorn) && defined (__unix)\n-  printf (\"arm-acorn-riscix\\n\"); exit (0);\n-#endif\n-\n-#if defined (hp300) && !defined (hpux)\n-  printf (\"m68k-hp-bsd\\n\"); exit (0);\n-#endif\n-\n-#if defined (NeXT)\n-#if !defined (__ARCHITECTURE__)\n-#define __ARCHITECTURE__ \"m68k\"\n-#endif\n-  int version;\n-  version=`(hostinfo | sed -n 's/.*NeXT Mach \\([0-9]*\\).*/\\1/p') 2>/dev/null`;\n-  if (version < 4)\n-    printf (\"%s-next-nextstep%d\\n\", __ARCHITECTURE__, version);\n-  else\n-    printf (\"%s-next-openstep%d\\n\", __ARCHITECTURE__, version);\n-  exit (0);\n-#endif\n-\n-#if defined (MULTIMAX) || defined (n16)\n-#if defined (UMAXV)\n-  printf (\"ns32k-encore-sysv\\n\"); exit (0);\n-#else\n-#if defined (CMU)\n-  printf (\"ns32k-encore-mach\\n\"); exit (0);\n-#else\n-  printf (\"ns32k-encore-bsd\\n\"); exit (0);\n-#endif\n-#endif\n-#endif\n-\n-#if defined (__386BSD__)\n-  printf (\"i386-pc-bsd\\n\"); exit (0);\n-#endif\n-\n-#if defined (sequent)\n-#if defined (i386)\n-  printf (\"i386-sequent-dynix\\n\"); exit (0);\n-#endif\n-#if defined (ns32000)\n-  printf (\"ns32k-sequent-dynix\\n\"); exit (0);\n-#endif\n-#endif\n-\n-#if defined (_SEQUENT_)\n-    struct utsname un;\n-\n-    uname(&un);\n-\n-    if (strncmp(un.version, \"V2\", 2) == 0) {\n-\tprintf (\"i386-sequent-ptx2\\n\"); exit (0);\n-    }\n-    if (strncmp(un.version, \"V1\", 2) == 0) { /* XXX is V1 correct? */\n-\tprintf (\"i386-sequent-ptx1\\n\"); exit (0);\n-    }\n-    printf (\"i386-sequent-ptx\\n\"); exit (0);\n-\n-#endif\n-\n-#if defined (vax)\n-# if !defined (ultrix)\n-#  include <sys/param.h>\n-#  if defined (BSD)\n-#   if BSD == 43\n-      printf (\"vax-dec-bsd4.3\\n\"); exit (0);\n-#   else\n-#    if BSD == 199006\n-      printf (\"vax-dec-bsd4.3reno\\n\"); exit (0);\n-#    else\n-      printf (\"vax-dec-bsd\\n\"); exit (0);\n-#    endif\n-#   endif\n-#  else\n-    printf (\"vax-dec-bsd\\n\"); exit (0);\n-#  endif\n-# else\n-    printf (\"vax-dec-ultrix\\n\"); exit (0);\n-# endif\n-#endif\n-\n-#if defined (alliant) && defined (i860)\n-  printf (\"i860-alliant-bsd\\n\"); exit (0);\n-#endif\n-\n-  exit (1);\n-}\n-EOF\n-\n-$CC_FOR_BUILD -o $dummy $dummy.c 2>/dev/null && SYSTEM_NAME=`$dummy` &&\n-\t{ echo \"$SYSTEM_NAME\"; exit; }\n-\n-# Apollos put the system type in the environment.\n-\n-test -d /usr/apollo && { echo ${ISP}-apollo-${SYSTYPE}; exit; }\n-\n-# Convex versions that predate uname can use getsysinfo(1)\n-\n-if [ -x /usr/convex/getsysinfo ]\n-then\n-    case `getsysinfo -f cpu_type` in\n-    c1*)\n-\techo c1-convex-bsd\n-\texit ;;\n-    c2*)\n-\tif getsysinfo -f scalar_acc\n-\tthen echo c32-convex-bsd\n-\telse echo c2-convex-bsd\n-\tfi\n-\texit ;;\n-    c34*)\n-\techo c34-convex-bsd\n-\texit ;;\n-    c38*)\n-\techo c38-convex-bsd\n-\texit ;;\n-    c4*)\n-\techo c4-convex-bsd\n-\texit ;;\n-    esac\n-fi\n-\n-cat >&2 <<EOF\n-$0: unable to guess system type\n-\n-This script, last modified $timestamp, has failed to recognize\n-the operating system you are using. It is advised that you\n-download the most up to date version of the config scripts from\n-\n-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD\n-and\n-  http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\n-\n-If the version you run ($0) is already up to date, please\n-send the following data and any information you think might be\n-pertinent to <config-patches@gnu.org> in order to provide the needed\n-information to handle your system.\n-\n-config.guess timestamp = $timestamp\n-\n-uname -m = `(uname -m) 2>/dev/null || echo unknown`\n-uname -r = `(uname -r) 2>/dev/null || echo unknown`\n-uname -s = `(uname -s) 2>/dev/null || echo unknown`\n-uname -v = `(uname -v) 2>/dev/null || echo unknown`\n-\n-/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`\n-/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`\n-\n-hostinfo               = `(hostinfo) 2>/dev/null`\n-/bin/universe          = `(/bin/universe) 2>/dev/null`\n-/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`\n-/bin/arch              = `(/bin/arch) 2>/dev/null`\n-/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`\n-/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`\n-\n-UNAME_MACHINE = ${UNAME_MACHINE}\n-UNAME_RELEASE = ${UNAME_RELEASE}\n-UNAME_SYSTEM  = ${UNAME_SYSTEM}\n-UNAME_VERSION = ${UNAME_VERSION}\n-EOF\n-\n-exit 1\n-\n-# Local variables:\n-# eval: (add-hook 'write-file-hooks 'time-stamp)\n-# time-stamp-start: \"timestamp='\"\n-# time-stamp-format: \"%:y-%02m-%02d\"\n-# time-stamp-end: \"'\"\n-# End:"}, {"sha": "da6d1b6826a280f37182772f982ebff1498708ee", "filename": "src/libbacktrace/config.sub", "status": "modified", "additions": 41, "deletions": 21, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfig.sub", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfig.sub", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fconfig.sub?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,8 +1,8 @@\n #! /bin/sh\n # Configuration validation subroutine script.\n-#   Copyright 1992-2013 Free Software Foundation, Inc.\n+#   Copyright 1992-2016 Free Software Foundation, Inc.\n \n-timestamp='2013-10-01'\n+timestamp='2016-01-01'\n \n # This file is free software; you can redistribute it and/or modify it\n # under the terms of the GNU General Public License as published by\n@@ -25,15 +25,15 @@ timestamp='2013-10-01'\n # of the GNU General Public License, version 3 (\"GPLv3\").\n \n \n-# Please send patches with a ChangeLog entry to config-patches@gnu.org.\n+# Please send patches to <config-patches@gnu.org>.\n #\n # Configuration subroutine to validate and canonicalize a configuration type.\n # Supply the specified configuration type as an argument.\n # If it is invalid, we print an error message on stderr and exit with code 1.\n # Otherwise, we print the canonical config type on stdout and succeed.\n \n # You can get the latest version of this script from:\n-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD\n+# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub\n \n # This file is supposed to be the same for all GNU packages\n # and recognize all the CPU types, system types and aliases\n@@ -53,8 +53,7 @@ timestamp='2013-10-01'\n me=`echo \"$0\" | sed -e 's,.*/,,'`\n \n usage=\"\\\n-Usage: $0 [OPTION] CPU-MFR-OPSYS\n-       $0 [OPTION] ALIAS\n+Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS\n \n Canonicalize a configuration name.\n \n@@ -68,7 +67,7 @@ Report bugs and patches to <config-patches@gnu.org>.\"\n version=\"\\\n GNU config.sub ($timestamp)\n \n-Copyright 1992-2013 Free Software Foundation, Inc.\n+Copyright 1992-2016 Free Software Foundation, Inc.\n \n This is free software; see the source for copying conditions.  There is NO\n warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\"\n@@ -117,7 +116,7 @@ maybe_os=`echo $1 | sed 's/^\\(.*\\)-\\([^-]*-[^-]*\\)$/\\2/'`\n case $maybe_os in\n   nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc | linux-newlib* | \\\n   linux-musl* | linux-uclibc* | uclinux-uclibc* | uclinux-gnu* | kfreebsd*-gnu* | \\\n-  knetbsd*-gnu* | netbsd*-gnu* | \\\n+  knetbsd*-gnu* | netbsd*-gnu* | netbsd*-eabi* | \\\n   kopensolaris*-gnu* | \\\n   storm-chaos* | os2-emx* | rtmk-nova*)\n     os=-$maybe_os\n@@ -255,12 +254,13 @@ case $basic_machine in\n \t| arc | arceb \\\n \t| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv7[arm] \\\n \t| avr | avr32 \\\n+\t| ba \\\n \t| be32 | be64 \\\n \t| bfin \\\n \t| c4x | c8051 | clipper \\\n \t| d10v | d30v | dlx | dsp16xx \\\n-\t| epiphany \\\n-\t| fido | fr30 | frv \\\n+\t| e2k | epiphany \\\n+\t| fido | fr30 | frv | ft32 \\\n \t| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \\\n \t| hexagon \\\n \t| i370 | i860 | i960 | ia64 \\\n@@ -283,8 +283,10 @@ case $basic_machine in\n \t| mips64vr5900 | mips64vr5900el \\\n \t| mipsisa32 | mipsisa32el \\\n \t| mipsisa32r2 | mipsisa32r2el \\\n+\t| mipsisa32r6 | mipsisa32r6el \\\n \t| mipsisa64 | mipsisa64el \\\n \t| mipsisa64r2 | mipsisa64r2el \\\n+\t| mipsisa64r6 | mipsisa64r6el \\\n \t| mipsisa64sb1 | mipsisa64sb1el \\\n \t| mipsisa64sr71k | mipsisa64sr71kel \\\n \t| mipsr5900 | mipsr5900el \\\n@@ -296,21 +298,22 @@ case $basic_machine in\n \t| nds32 | nds32le | nds32be \\\n \t| nios | nios2 | nios2eb | nios2el \\\n \t| ns16k | ns32k \\\n-\t| open8 \\\n-\t| or1k | or32 \\\n+\t| open8 | or1k | or1knd | or32 \\\n \t| pdp10 | pdp11 | pj | pjl \\\n \t| powerpc | powerpc64 | powerpc64le | powerpcle \\\n \t| pyramid \\\n+\t| riscv32 | riscv64 \\\n \t| rl78 | rx \\\n \t| score \\\n-\t| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \\\n+\t| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[234]eb | sheb | shbe | shle | sh[1234]le | sh3ele \\\n \t| sh64 | sh64le \\\n \t| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \\\n \t| sparcv8 | sparcv9 | sparcv9b | sparcv9v \\\n \t| spu \\\n \t| tahoe | tic4x | tic54x | tic55x | tic6x | tic80 | tron \\\n \t| ubicom32 \\\n \t| v850 | v850e | v850e1 | v850e2 | v850es | v850e2v3 \\\n+\t| visium \\\n \t| we32k \\\n \t| x86 | xc16x | xstormy16 | xtensa \\\n \t| z8k | z80)\n@@ -325,6 +328,9 @@ case $basic_machine in\n \tc6x)\n \t\tbasic_machine=tic6x-unknown\n \t\t;;\n+\tleon|leon[3-9])\n+\t\tbasic_machine=sparc-$basic_machine\n+\t\t;;\n \tm6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)\n \t\tbasic_machine=$basic_machine-unknown\n \t\tos=-none\n@@ -370,12 +376,13 @@ case $basic_machine in\n \t| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \\\n \t| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \\\n \t| avr-* | avr32-* \\\n+\t| ba-* \\\n \t| be32-* | be64-* \\\n \t| bfin-* | bs2000-* \\\n \t| c[123]* | c30-* | [cjt]90-* | c4x-* \\\n \t| c8051-* | clipper-* | craynv-* | cydra-* \\\n \t| d10v-* | d30v-* | dlx-* \\\n-\t| elxsi-* \\\n+\t| e2k-* | elxsi-* \\\n \t| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \\\n \t| h8300-* | h8500-* \\\n \t| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \\\n@@ -402,8 +409,10 @@ case $basic_machine in\n \t| mips64vr5900-* | mips64vr5900el-* \\\n \t| mipsisa32-* | mipsisa32el-* \\\n \t| mipsisa32r2-* | mipsisa32r2el-* \\\n+\t| mipsisa32r6-* | mipsisa32r6el-* \\\n \t| mipsisa64-* | mipsisa64el-* \\\n \t| mipsisa64r2-* | mipsisa64r2el-* \\\n+\t| mipsisa64r6-* | mipsisa64r6el-* \\\n \t| mipsisa64sb1-* | mipsisa64sb1el-* \\\n \t| mipsisa64sr71k-* | mipsisa64sr71kel-* \\\n \t| mipsr5900-* | mipsr5900el-* \\\n@@ -415,23 +424,26 @@ case $basic_machine in\n \t| nios-* | nios2-* | nios2eb-* | nios2el-* \\\n \t| none-* | np1-* | ns16k-* | ns32k-* \\\n \t| open8-* \\\n+\t| or1k*-* \\\n \t| orion-* \\\n \t| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \\\n \t| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \\\n \t| pyramid-* \\\n+\t| riscv32-* | riscv64-* \\\n \t| rl78-* | romp-* | rs6000-* | rx-* \\\n \t| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \\\n \t| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \\\n \t| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \\\n \t| sparclite-* \\\n-\t| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx?-* \\\n+\t| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx*-* \\\n \t| tahoe-* \\\n \t| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \\\n \t| tile*-* \\\n \t| tron-* \\\n \t| ubicom32-* \\\n \t| v850-* | v850e-* | v850e1-* | v850es-* | v850e2-* | v850e2v3-* \\\n \t| vax-* \\\n+\t| visium-* \\\n \t| we32k-* \\\n \t| x86-* | x86_64-* | xc16x-* | xps100-* \\\n \t| xstormy16-* | xtensa*-* \\\n@@ -508,6 +520,9 @@ case $basic_machine in\n \t\tbasic_machine=i386-pc\n \t\tos=-aros\n \t\t;;\n+\tasmjs)\n+\t\tbasic_machine=asmjs-unknown\n+\t\t;;\n \taux)\n \t\tbasic_machine=m68k-apple\n \t\tos=-aux\n@@ -769,6 +784,9 @@ case $basic_machine in\n \t\tbasic_machine=m68k-isi\n \t\tos=-sysv\n \t\t;;\n+\tleon-*|leon[3-9]-*)\n+\t\tbasic_machine=sparc-`echo $basic_machine | sed 's/-.*//'`\n+\t\t;;\n \tm68knommu)\n \t\tbasic_machine=m68k-unknown\n \t\tos=-linux\n@@ -824,6 +842,10 @@ case $basic_machine in\n \t\tbasic_machine=powerpc-unknown\n \t\tos=-morphos\n \t\t;;\n+\tmoxiebox)\n+\t\tbasic_machine=moxie-unknown\n+\t\tos=-moxiebox\n+\t\t;;\n \tmsdos)\n \t\tbasic_machine=i386-pc\n \t\tos=-msdos\n@@ -1356,7 +1378,7 @@ case $os in\n \t      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \\\n \t      | -sym* | -kopensolaris* | -plan9* \\\n \t      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \\\n-\t      | -aos* | -aros* \\\n+\t      | -aos* | -aros* | -cloudabi* | -sortix* \\\n \t      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \\\n \t      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \\\n \t      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \\\n@@ -1369,14 +1391,15 @@ case $os in\n \t      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \\\n \t      | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \\\n \t      | -linux-newlib* | -linux-musl* | -linux-uclibc* \\\n-\t      | -uxpv* | -beos* | -mpeix* | -udk* \\\n+\t      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \\\n \t      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \\\n \t      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \\\n \t      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \\\n \t      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \\\n \t      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \\\n \t      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \\\n-\t      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)\n+\t      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* \\\n+\t      | -onefs* | -tirtos*)\n \t# Remember, each alternative MUST END IN *, to match a version number.\n \t\t;;\n \t-qnx*)\n@@ -1594,9 +1617,6 @@ case $basic_machine in\n \tmips*-*)\n \t\tos=-elf\n \t\t;;\n-\tor1k-*)\n-\t\tos=-elf\n-\t\t;;\n \tor32-*)\n \t\tos=-coff\n \t\t;;"}, {"sha": "47df55c22d67f26749fe13cc70d432998f273431", "filename": "src/libbacktrace/configure", "status": "modified", "additions": 27, "deletions": 26, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfigure", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfigure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fconfigure?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1366,7 +1366,7 @@ Optional Features:\n   --enable-multilib       build many library versions (default)\n   --enable-maintainer-mode  enable make rules and dependencies not useful\n \t\t\t  (and sometimes confusing) to the casual installer\n-  --enable-shared[=PKGS]  build shared libraries [default=no]\n+  --enable-shared[=PKGS]  build shared libraries [default=yes]\n   --enable-static[=PKGS]  build static libraries [default=yes]\n   --enable-fast-install[=PKGS]\n                           optimize for fast installation [default=yes]\n@@ -3974,7 +3974,7 @@ am_lf='\n '\n case `pwd` in\n   *[\\\\\\\"\\#\\$\\&\\'\\`$am_lf]*)\n-    as_fn_error \"unsafe absolute working directory name: \\``pwd`'\" \"$LINENO\" 5;;\n+    as_fn_error \"unsafe absolute working directory name\" \"$LINENO\" 5;;\n esac\n case $srcdir in\n   *[\\\\\\\"\\#\\$\\&\\'\\`$am_lf\\ \\\t]*)\n@@ -7658,7 +7658,16 @@ done\n \n \n # Set options\n-# Check whether --enable-shared was given.\n+\n+\n+\n+        enable_dlopen=no\n+\n+\n+  enable_win32_dll=no\n+\n+\n+            # Check whether --enable-shared was given.\n if test \"${enable_shared+set}\" = set; then :\n   enableval=$enable_shared; p=${PACKAGE-default}\n     case $enableval in\n@@ -7678,7 +7687,7 @@ if test \"${enable_shared+set}\" = set; then :\n       ;;\n     esac\n else\n-  enable_shared=no\n+  enable_shared=yes\n fi\n \n \n@@ -7689,14 +7698,6 @@ fi\n \n \n \n-\n-        enable_dlopen=no\n-\n-\n-  enable_win32_dll=no\n-\n-\n-\n   # Check whether --enable-static was given.\n if test \"${enable_static+set}\" = set; then :\n   enableval=$enable_static; p=${PACKAGE-default}\n@@ -9102,7 +9103,7 @@ _LT_EOF\n \tif $NM -V 2>&1 | $GREP 'GNU' > /dev/null; then\n \t  export_symbols_cmds='$NM -Bpg $libobjs $convenience | awk '\\''{ if (((\\$ 2 == \"T\") || (\\$ 2 == \"D\") || (\\$ 2 == \"B\") || (\\$ 2 == \"W\")) && (substr(\\$ 3,1,1) != \".\")) { print \\$ 3 } }'\\'' | sort -u > $export_symbols'\n \telse\n-\t  export_symbols_cmds='$NM -BCpg $libobjs $convenience | awk '\\''{ if (((\\$ 2 == \"T\") || (\\$ 2 == \"D\") || (\\$ 2 == \"B\")) && (substr(\\$ 3,1,1) != \".\")) { print \\$ 3 } }'\\'' | sort -u > $export_symbols'\n+\t  export_symbols_cmds='$NM -BCpg $libobjs $convenience | awk '\\''{ if (((\\$ 2 == \"T\") || (\\$ 2 == \"D\") || (\\$ 2 == \"B\") || (\\$ 2 == \"L\")) && (substr(\\$ 3,1,1) != \".\")) { print \\$ 3 } }'\\'' | sort -u > $export_symbols'\n \tfi\n \taix_use_runtimelinking=no\n \n@@ -9373,7 +9374,7 @@ if test -z \"$aix_libpath\"; then aix_libpath=\"/usr/lib:/lib\"; fi\n       ;;\n \n     # FreeBSD 3 and greater uses gcc -shared to do shared libraries.\n-    freebsd* | dragonfly* | bitrig* | openbsd*)\n+    freebsd* | dragonfly* | openbsd* | bitrig*)\n       archive_cmds='$CC -shared -o $lib $libobjs $deplibs $compiler_flags'\n       hardcode_libdir_flag_spec='-R$libdir'\n       hardcode_direct=yes\n@@ -11130,7 +11131,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11133 \"configure\"\n+#line 11134 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11236,7 +11237,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11239 \"configure\"\n+#line 11240 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11708,17 +11709,12 @@ $as_echo \"#define HAVE_GETIPINFO 1\" >>confdefs.h\n   fi\n fi\n \n-# When building as a target library, shared libraries may want to link\n-# this in.  We don't want to provide another shared library to\n-# complicate dependencies.  Instead, we just compile with -fPIC.\n-PIC_FLAG=\n-if test -n \"${with_target_subdir}\"; then\n-  PIC_FLAG=-fPIC\n-fi\n-# Similarly, use -fPIC with --enable-host-shared:\n+# Enable --enable-host-shared.\n # Check whether --enable-host-shared was given.\n if test \"${enable_host_shared+set}\" = set; then :\n   enableval=$enable_host_shared; PIC_FLAG=-fPIC\n+else\n+  PIC_FLAG=\n fi\n \n \n@@ -11730,7 +11726,10 @@ if test \"${libbacktrace_cv_sys_sync+set}\" = set; then :\n   $as_echo_n \"(cached) \" >&6\n else\n   if test -n \"${with_target_subdir}\"; then\n-   libbacktrace_cv_sys_sync=yes\n+   case \"${host}\" in\n+   hppa*-*-hpux*) libbacktrace_cv_sys_sync=no ;;\n+   *) libbacktrace_cv_sys_sync=yes ;;\n+   esac\n  else\n    cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n@@ -12305,9 +12304,10 @@ else\n     # simply assume that if we have mman.h, we have mmap.\n     have_mmap=yes\n     case \"${host}\" in\n-    spu-*-*)\n+    spu-*-*|*-*-msdosdjgpp)\n         # The SPU does not have mmap, but it has a sys/mman.h header file\n         # containing \"mmap_eaddr\" and the mmap flags, confusing the test.\n+        # DJGPP also has sys/man.h, but no mmap\n \thave_mmap=no ;;\n     esac\n   else\n@@ -12407,6 +12407,7 @@ fi\n if test -n \"${with_target_subdir}\"; then\n    case \"${host}\" in\n    *-*-mingw*) have_fcntl=no ;;\n+   spu-*-*) have_fcntl=no ;;\n    *) have_fcntl=yes ;;\n    esac\n else"}, {"sha": "71e85187ef55a00b29e809c68357bdf331dc7135", "filename": "src/libbacktrace/configure.ac", "status": "modified", "additions": 11, "deletions": 13, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfigure.ac", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fconfigure.ac?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n # configure.ac -- Backtrace configure script.\n-# Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+# Copyright (C) 2012-2016 Free Software Foundation, Inc.\n \n # Redistribution and use in source and binary forms, with or without\n # modification, are permitted provided that the following conditions are\n@@ -79,7 +79,7 @@ case \"$AWK\" in\n \"\") AC_MSG_ERROR([can't build without awk]) ;;\n esac\n \n-LT_INIT([disable-shared])\n+LT_INIT\n AM_PROG_LIBTOOL\n \n backtrace_supported=yes\n@@ -161,25 +161,21 @@ else\n   fi\n fi\n \n-# When building as a target library, shared libraries may want to link\n-# this in.  We don't want to provide another shared library to\n-# complicate dependencies.  Instead, we just compile with -fPIC.\n-PIC_FLAG=\n-if test -n \"${with_target_subdir}\"; then\n-  PIC_FLAG=-fPIC\n-fi\n-# Similarly, use -fPIC with --enable-host-shared:\n+# Enable --enable-host-shared.\n AC_ARG_ENABLE(host-shared,\n [AS_HELP_STRING([--enable-host-shared],\n \t\t[build host code as shared libraries])],\n-[PIC_FLAG=-fPIC], [])\n+[PIC_FLAG=-fPIC], [PIC_FLAG=])\n AC_SUBST(PIC_FLAG)\n \n # Test for __sync support.\n AC_CACHE_CHECK([__sync extensions],\n [libbacktrace_cv_sys_sync],\n [if test -n \"${with_target_subdir}\"; then\n-   libbacktrace_cv_sys_sync=yes\n+   case \"${host}\" in\n+   hppa*-*-hpux*) libbacktrace_cv_sys_sync=no ;;\n+   *) libbacktrace_cv_sys_sync=yes ;;\n+   esac\n  else\n    AC_LINK_IFELSE(\n      [AC_LANG_PROGRAM([int i;],\n@@ -274,9 +270,10 @@ else\n     # simply assume that if we have mman.h, we have mmap.\n     have_mmap=yes\n     case \"${host}\" in\n-    spu-*-*)\n+    spu-*-*|*-*-msdosdjgpp)\n         # The SPU does not have mmap, but it has a sys/mman.h header file\n         # containing \"mmap_eaddr\" and the mmap flags, confusing the test.\n+        # DJGPP also has sys/man.h, but no mmap\n \thave_mmap=no ;;\n     esac\n   else\n@@ -332,6 +329,7 @@ fi\n if test -n \"${with_target_subdir}\"; then\n    case \"${host}\" in\n    *-*-mingw*) have_fcntl=no ;;\n+   spu-*-*) have_fcntl=no ;;\n    *) have_fcntl=yes ;;\n    esac\n else"}, {"sha": "55b8d7dc2a56d96e69df0a1be6728bad212754c7", "filename": "src/libbacktrace/dwarf.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fdwarf.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* dwarf.c -- Get file/line information from DWARF for backtraces.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "2dfee5666dea68d8292f04c5100c93e1f1fcf4f4", "filename": "src/libbacktrace/dwarf2.def", "status": "modified", "additions": 28, "deletions": 3, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf2.def", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf2.def", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fdwarf2.def?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,9 +1,7 @@\n /* -*- c -*-\n    Declarations and definitions of codes relating to the DWARF2 and\n    DWARF3 symbolic debugging information formats.\n-   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1999, 2000, 2001, 2002,\n-   2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012\n-   Free Software Foundation, Inc.\n+   Copyright (C) 1992-2015 Free Software Foundation, Inc.\n \n    Written by Gary Funck (gary@intrepid.com) The Ada Joint Program\n    Office (AJPO), Florida State University and Silicon Graphics Inc.\n@@ -133,6 +131,8 @@ DW_TAG (DW_TAG_shared_type, 0x40)\n DW_TAG (DW_TAG_type_unit, 0x41)\n DW_TAG (DW_TAG_rvalue_reference_type, 0x42)\n DW_TAG (DW_TAG_template_alias, 0x43)\n+/* DWARF 5.  */\n+DW_TAG (DW_TAG_atomic_type, 0x47)\n \n DW_TAG_DUP (DW_TAG_lo_user, 0x4080)\n DW_TAG_DUP (DW_TAG_hi_user, 0xffff)\n@@ -308,6 +308,8 @@ DW_AT (DW_AT_data_bit_offset, 0x6b)\n DW_AT (DW_AT_const_expr, 0x6c)\n DW_AT (DW_AT_enum_class, 0x6d)\n DW_AT (DW_AT_linkage_name, 0x6e)\n+/* DWARF 5.  */\n+DW_AT (DW_AT_noreturn, 0x87)\n \n DW_AT_DUP (DW_AT_lo_user, 0x2000) /* Implementation-defined range start.  */\n DW_AT_DUP (DW_AT_hi_user, 0x3fff) /* Implementation-defined range end.  */\n@@ -383,6 +385,8 @@ DW_AT (DW_AT_GNU_all_call_sites, 0x2117)\n DW_AT (DW_AT_GNU_all_source_call_sites, 0x2118)\n /* Section offset into .debug_macro section.  */\n DW_AT (DW_AT_GNU_macros, 0x2119)\n+/* Attribute for C++ deleted special member functions (= delete;).  */\n+DW_AT (DW_AT_GNU_deleted, 0x211a)\n /* Extensions for Fission.  See http://gcc.gnu.org/wiki/DebugFission.  */\n DW_AT (DW_AT_GNU_dwo_name, 0x2130)\n DW_AT (DW_AT_GNU_dwo_id, 0x2131)\n@@ -400,12 +404,33 @@ DW_AT (DW_AT_VMS_rtnbeg_pd_address, 0x2201)\n    See http://gcc.gnu.org/wiki/DW_AT_GNAT_descriptive_type .  */\n DW_AT (DW_AT_use_GNAT_descriptive_type, 0x2301)\n DW_AT (DW_AT_GNAT_descriptive_type, 0x2302)\n+/* Rational constant extension.\n+   See https://gcc.gnu.org/wiki/DW_AT_GNU_numerator_denominator .  */\n+DW_TAG (DW_AT_GNU_numerator, 0x2303)\n+DW_TAG (DW_AT_GNU_denominator, 0x2304)\n+/* Biased integer extension.\n+   See https://gcc.gnu.org/wiki/DW_AT_GNU_bias .  */\n+DW_TAG (DW_AT_GNU_bias, 0x2305)\n /* UPC extension.  */\n DW_AT (DW_AT_upc_threads_scaled, 0x3210)\n /* PGI (STMicroelectronics) extensions.  */\n DW_AT (DW_AT_PGI_lbase, 0x3a00)\n DW_AT (DW_AT_PGI_soffset, 0x3a01)\n DW_AT (DW_AT_PGI_lstride, 0x3a02)\n+/* Apple extensions.  */\n+DW_AT (DW_AT_APPLE_optimized, 0x3fe1)\n+DW_AT (DW_AT_APPLE_flags, 0x3fe2)\n+DW_AT (DW_AT_APPLE_isa, 0x3fe3)\n+DW_AT (DW_AT_APPLE_block, 0x3fe4)\n+DW_AT (DW_AT_APPLE_major_runtime_vers, 0x3fe5)\n+DW_AT (DW_AT_APPLE_runtime_class, 0x3fe6)\n+DW_AT (DW_AT_APPLE_omit_frame_ptr, 0x3fe7)\n+DW_AT (DW_AT_APPLE_property_name, 0x3fe8)\n+DW_AT (DW_AT_APPLE_property_getter, 0x3fe9)\n+DW_AT (DW_AT_APPLE_property_setter, 0x3fea)\n+DW_AT (DW_AT_APPLE_property_attribute, 0x3feb)\n+DW_AT (DW_AT_APPLE_objc_complete_type, 0x3fec)\n+DW_AT (DW_AT_APPLE_property, 0x3fed)\n DW_END_AT\n \n DW_FIRST_OP (DW_OP_addr, 0x03)"}, {"sha": "4ada87162fa868eb80c6994e1877c6d9897ae732", "filename": "src/libbacktrace/dwarf2.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf2.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fdwarf2.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fdwarf2.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,8 +1,6 @@\n /* Declarations and definitions of codes relating to the DWARF2 and\n    DWARF3 symbolic debugging information formats.\n-   Copyright (C) 1992, 1993, 1995, 1996, 1997, 1999, 2000, 2001, 2002,\n-   2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012\n-   Free Software Foundation, Inc.\n+   Copyright (C) 1992-2015 Free Software Foundation, Inc.\n \n    Written by Gary Funck (gary@intrepid.com) The Ada Joint Program\n    Office (AJPO), Florida State University and Silicon Graphics Inc.\n@@ -309,6 +307,12 @@ enum dwarf_source_language\n     /* DWARF 5.  */\n     DW_LANG_Go = 0x0016,\n \n+    DW_LANG_C_plus_plus_11 = 0x001a, /* dwarf5.20141029.pdf DRAFT */\n+    DW_LANG_C11 = 0x001d,\n+    DW_LANG_C_plus_plus_14 = 0x0021,\n+    DW_LANG_Fortran03 = 0x0022,\n+    DW_LANG_Fortran08 = 0x0023,\n+\n     DW_LANG_lo_user = 0x8000,\t/* Implementation-defined range start.  */\n     DW_LANG_hi_user = 0xffff,\t/* Implementation-defined range start.  */\n "}, {"sha": "05cc5c04734b71cae3ca4d9ca56f22085a566a80", "filename": "src/libbacktrace/elf.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Felf.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Felf.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Felf.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* elf.c -- Get debug data from an ELF file for backtraces.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -955,7 +955,8 @@ backtrace_initialize (struct backtrace_state *state, int descriptor,\n       if (found_sym)\n \tbacktrace_atomic_store_pointer (&state->syminfo_fn, elf_syminfo);\n       else\n-\t__sync_bool_compare_and_swap (&state->syminfo_fn, NULL, elf_nosyms);\n+\t(void) __sync_bool_compare_and_swap (&state->syminfo_fn, NULL,\n+\t\t\t\t\t     elf_nosyms);\n     }\n \n   if (!state->threaded)"}, {"sha": "27ebbedc21ccf39f86f439138c2e418b556ccbd8", "filename": "src/libbacktrace/fileline.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Ffileline.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Ffileline.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Ffileline.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* fileline.c -- Get file and line number information in a backtrace.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "1161daaa4f3581c81c4842509aa7c7298d3bbd7b", "filename": "src/libbacktrace/filenames.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Ffilenames.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Ffilenames.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Ffilenames.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -5,7 +5,7 @@\n    use forward- and back-slash in path names interchangeably, and\n    some of them have case-insensitive file names.\n \n-   Copyright 2000, 2001, 2007, 2010 Free Software Foundation, Inc.\n+   Copyright (C) 2000-2015 Free Software Foundation, Inc.\n \n This file is part of BFD, the Binary File Descriptor library.\n \n@@ -90,6 +90,8 @@ extern hashval_t filename_hash (const void *s);\n \n extern int filename_eq (const void *s1, const void *s2);\n \n+extern int canonical_filename_eq (const char *a, const char *b);\n+\n #ifdef __cplusplus\n }\n #endif"}, {"sha": "f6bb8975223a9f9f11514e76c5e1e427f15d6b76", "filename": "src/libbacktrace/gstdint.h", "status": "removed", "additions": 0, "deletions": 47, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba/src%2Flibbacktrace%2Fgstdint.h", "raw_url": "https://github.com/rust-lang/rust/raw/c42ccb8b49e7a43bba9a62960cac6f29f7e932ba/src%2Flibbacktrace%2Fgstdint.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fgstdint.h?ref=c42ccb8b49e7a43bba9a62960cac6f29f7e932ba", "patch": "@@ -1,47 +0,0 @@\n-/* generated for  gcc (GCC) 4.8.2 20140206 (prerelease) */\n-\n-#ifndef GCC_GENERATED_STDINT_H\n-#define GCC_GENERATED_STDINT_H 1\n-\n-#include <sys/types.h>\n-#include <stdint.h>\n-/* glibc uses these symbols as guards to prevent redefinitions.  */\n-#ifdef __int8_t_defined\n-#define _INT8_T\n-#define _INT16_T\n-#define _INT32_T\n-#endif\n-#ifdef __uint32_t_defined\n-#define _UINT32_T\n-#endif\n-\n-\n-/* Some systems have guard macros to prevent redefinitions, define them.  */\n-#ifndef _INT8_T\n-#define _INT8_T\n-#endif\n-#ifndef _INT16_T\n-#define _INT16_T\n-#endif\n-#ifndef _INT32_T\n-#define _INT32_T\n-#endif\n-#ifndef _UINT8_T\n-#define _UINT8_T\n-#endif\n-#ifndef _UINT16_T\n-#define _UINT16_T\n-#endif\n-#ifndef _UINT32_T\n-#define _UINT32_T\n-#endif\n-\n-/* system headers have good uint64_t and int64_t */\n-#ifndef _INT64_T\n-#define _INT64_T\n-#endif\n-#ifndef _UINT64_T\n-#define _UINT64_T\n-#endif\n-\n-#endif /* GCC_GENERATED_STDINT_H */"}, {"sha": "b1b5877aae7ca83dd2f04cc050c352b82e4a8d35", "filename": "src/libbacktrace/hashtab.h", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fhashtab.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fhashtab.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fhashtab.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,6 +1,5 @@\n-/* An expandable hash tables datatype.\n-   Copyright (C) 1999, 2000, 2002, 2003, 2004, 2005, 2009, 2010\n-   Free Software Foundation, Inc.\n+/* An expandable hash tables datatype.  \n+   Copyright (C) 1999-2015 Free Software Foundation, Inc.\n    Contributed by Vladimir Makarov (vmakarov@cygnus.com).\n \n This program is free software; you can redistribute it and/or modify\n@@ -39,10 +38,6 @@ extern \"C\" {\n \n #include \"ansidecl.h\"\n \n-#ifndef GTY\n-#define GTY(X)\n-#endif\n-\n /* The type for a hash code.  */\n typedef unsigned int hashval_t;\n \n@@ -61,7 +56,7 @@ typedef int (*htab_eq) (const void *, const void *);\n /* Cleanup function called whenever a live element is removed from\n    the hash table.  */\n typedef void (*htab_del) (void *);\n-\n+  \n /* Function called by htab_traverse for each live element.  The first\n    arg is the slot of the element (which can be passed to htab_clear_slot\n    if desired), the second arg is the auxiliary pointer handed to\n@@ -97,7 +92,7 @@ typedef void (*htab_free_with_arg) (void *, void *);\n    functions mentioned below.  The size of this structure is subject to\n    change.  */\n \n-struct GTY(()) htab {\n+struct htab {\n   /* Pointer to hash function.  */\n   htab_hash hash_f;\n \n@@ -108,7 +103,7 @@ struct GTY(()) htab {\n   htab_del del_f;\n \n   /* Table itself.  */\n-  void ** GTY ((use_param, length (\"%h.size\"))) entries;\n+  void **entries;\n \n   /* Current size (in entries) of the hash table.  */\n   size_t size;\n@@ -132,7 +127,7 @@ struct GTY(()) htab {\n   htab_free free_f;\n \n   /* Alternate allocate/free functions, which take an extra argument.  */\n-  void * GTY((skip)) alloc_arg;\n+  void *alloc_arg;\n   htab_alloc_with_arg alloc_with_arg_f;\n   htab_free_with_arg free_with_arg_f;\n "}, {"sha": "0b0fdcbba69ab6dd05ca162a5328828d46ab1d54", "filename": "src/libbacktrace/install-sh", "status": "modified", "additions": 183, "deletions": 202, "changes": 385, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Finstall-sh", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Finstall-sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Finstall-sh?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,7 +1,7 @@\n #!/bin/sh\n # install - install a program, script, or datafile\n \n-scriptversion=2009-04-28.21; # UTC\n+scriptversion=2013-12-25.23; # UTC\n \n # This originates from X11R5 (mit/util/scripts/install.sh), which was\n # later released in X11R6 (xc/config/util/install.sh) with the\n@@ -35,25 +35,21 @@ scriptversion=2009-04-28.21; # UTC\n # FSF changes to this file are in the public domain.\n #\n # Calling this script install-sh is preferred over install.sh, to prevent\n-# `make' implicit rules from creating a file called install from it\n+# 'make' implicit rules from creating a file called install from it\n # when there is no Makefile.\n #\n # This script is compatible with the BSD install script, but was written\n # from scratch.\n \n+tab='\t'\n nl='\n '\n-IFS=\" \"\"\t$nl\"\n+IFS=\" $tab$nl\"\n \n-# set DOITPROG to echo to test this script\n+# Set DOITPROG to \"echo\" to test this script.\n \n-# Don't use :- since 4.3BSD and earlier shells don't like it.\n doit=${DOITPROG-}\n-if test -z \"$doit\"; then\n-  doit_exec=exec\n-else\n-  doit_exec=$doit\n-fi\n+doit_exec=${doit:-exec}\n \n # Put in absolute file names if you don't have them in your path;\n # or use environment vars.\n@@ -68,17 +64,6 @@ mvprog=${MVPROG-mv}\n rmprog=${RMPROG-rm}\n stripprog=${STRIPPROG-strip}\n \n-posix_glob='?'\n-initialize_posix_glob='\n-  test \"$posix_glob\" != \"?\" || {\n-    if (set -f) 2>/dev/null; then\n-      posix_glob=\n-    else\n-      posix_glob=:\n-    fi\n-  }\n-'\n-\n posix_mkdir=\n \n # Desired mode of installed file.\n@@ -97,7 +82,7 @@ dir_arg=\n dst_arg=\n \n copy_on_change=false\n-no_target_directory=\n+is_target_a_directory=possibly\n \n usage=\"\\\n Usage: $0 [OPTION]... [-T] SRCFILE DSTFILE\n@@ -137,42 +122,57 @@ while test $# -ne 0; do\n     -d) dir_arg=true;;\n \n     -g) chgrpcmd=\"$chgrpprog $2\"\n-\tshift;;\n+        shift;;\n \n     --help) echo \"$usage\"; exit $?;;\n \n     -m) mode=$2\n-\tcase $mode in\n-\t  *' '* | *'\t'* | *'\n-'*\t  | *'*'* | *'?'* | *'['*)\n-\t    echo \"$0: invalid mode: $mode\" >&2\n-\t    exit 1;;\n-\tesac\n-\tshift;;\n+        case $mode in\n+          *' '* | *\"$tab\"* | *\"$nl\"* | *'*'* | *'?'* | *'['*)\n+            echo \"$0: invalid mode: $mode\" >&2\n+            exit 1;;\n+        esac\n+        shift;;\n \n     -o) chowncmd=\"$chownprog $2\"\n-\tshift;;\n+        shift;;\n \n     -s) stripcmd=$stripprog;;\n \n-    -t) dst_arg=$2\n-\tshift;;\n+    -t)\n+        is_target_a_directory=always\n+        dst_arg=$2\n+        # Protect names problematic for 'test' and other utilities.\n+        case $dst_arg in\n+          -* | [=\\(\\)!]) dst_arg=./$dst_arg;;\n+        esac\n+        shift;;\n \n-    -T) no_target_directory=true;;\n+    -T) is_target_a_directory=never;;\n \n     --version) echo \"$0 $scriptversion\"; exit $?;;\n \n-    --)\tshift\n-\tbreak;;\n+    --) shift\n+        break;;\n \n-    -*)\techo \"$0: invalid option: $1\" >&2\n-\texit 1;;\n+    -*) echo \"$0: invalid option: $1\" >&2\n+        exit 1;;\n \n     *)  break;;\n   esac\n   shift\n done\n \n+# We allow the use of options -d and -T together, by making -d\n+# take the precedence; this is for compatibility with GNU install.\n+\n+if test -n \"$dir_arg\"; then\n+  if test -n \"$dst_arg\"; then\n+    echo \"$0: target directory not allowed when installing a directory.\" >&2\n+    exit 1\n+  fi\n+fi\n+\n if test $# -ne 0 && test -z \"$dir_arg$dst_arg\"; then\n   # When -d is used, all remaining arguments are directories to create.\n   # When -t is used, the destination is already specified.\n@@ -186,6 +186,10 @@ if test $# -ne 0 && test -z \"$dir_arg$dst_arg\"; then\n     fi\n     shift # arg\n     dst_arg=$arg\n+    # Protect names problematic for 'test' and other utilities.\n+    case $dst_arg in\n+      -* | [=\\(\\)!]) dst_arg=./$dst_arg;;\n+    esac\n   done\n fi\n \n@@ -194,13 +198,26 @@ if test $# -eq 0; then\n     echo \"$0: no input file specified.\" >&2\n     exit 1\n   fi\n-  # It's OK to call `install-sh -d' without argument.\n+  # It's OK to call 'install-sh -d' without argument.\n   # This can happen when creating conditional directories.\n   exit 0\n fi\n \n if test -z \"$dir_arg\"; then\n-  trap '(exit $?); exit' 1 2 13 15\n+  if test $# -gt 1 || test \"$is_target_a_directory\" = always; then\n+    if test ! -d \"$dst_arg\"; then\n+      echo \"$0: $dst_arg: Is not a directory.\" >&2\n+      exit 1\n+    fi\n+  fi\n+fi\n+\n+if test -z \"$dir_arg\"; then\n+  do_exit='(exit $ret); exit $ret'\n+  trap \"ret=129; $do_exit\" 1\n+  trap \"ret=130; $do_exit\" 2\n+  trap \"ret=141; $do_exit\" 13\n+  trap \"ret=143; $do_exit\" 15\n \n   # Set umask so as not to create temps with too-generous modes.\n   # However, 'strip' requires both read and write access to temps.\n@@ -211,26 +228,26 @@ if test -z \"$dir_arg\"; then\n \n     *[0-7])\n       if test -z \"$stripcmd\"; then\n-\tu_plus_rw=\n+        u_plus_rw=\n       else\n-\tu_plus_rw='% 200'\n+        u_plus_rw='% 200'\n       fi\n       cp_umask=`expr '(' 777 - $mode % 1000 ')' $u_plus_rw`;;\n     *)\n       if test -z \"$stripcmd\"; then\n-\tu_plus_rw=\n+        u_plus_rw=\n       else\n-\tu_plus_rw=,u+rw\n+        u_plus_rw=,u+rw\n       fi\n       cp_umask=$mode$u_plus_rw;;\n   esac\n fi\n \n for src\n do\n-  # Protect names starting with `-'.\n+  # Protect names problematic for 'test' and other utilities.\n   case $src in\n-    -*) src=./$src;;\n+    -* | [=\\(\\)!]) src=./$src;;\n   esac\n \n   if test -n \"$dir_arg\"; then\n@@ -252,51 +269,20 @@ do\n       echo \"$0: no destination specified.\" >&2\n       exit 1\n     fi\n-\n     dst=$dst_arg\n-    # Protect names starting with `-'.\n-    case $dst in\n-      -*) dst=./$dst;;\n-    esac\n \n     # If destination is a directory, append the input filename; won't work\n     # if double slashes aren't ignored.\n     if test -d \"$dst\"; then\n-      if test -n \"$no_target_directory\"; then\n-\techo \"$0: $dst_arg: Is a directory\" >&2\n-\texit 1\n+      if test \"$is_target_a_directory\" = never; then\n+        echo \"$0: $dst_arg: Is a directory\" >&2\n+        exit 1\n       fi\n       dstdir=$dst\n       dst=$dstdir/`basename \"$src\"`\n       dstdir_status=0\n     else\n-      # Prefer dirname, but fall back on a substitute if dirname fails.\n-      dstdir=`\n-\t(dirname \"$dst\") 2>/dev/null ||\n-\texpr X\"$dst\" : 'X\\(.*[^/]\\)//*[^/][^/]*/*$' \\| \\\n-\t     X\"$dst\" : 'X\\(//\\)[^/]' \\| \\\n-\t     X\"$dst\" : 'X\\(//\\)$' \\| \\\n-\t     X\"$dst\" : 'X\\(/\\)' \\| . 2>/dev/null ||\n-\techo X\"$dst\" |\n-\t    sed '/^X\\(.*[^/]\\)\\/\\/*[^/][^/]*\\/*$/{\n-\t\t   s//\\1/\n-\t\t   q\n-\t\t }\n-\t\t /^X\\(\\/\\/\\)[^/].*/{\n-\t\t   s//\\1/\n-\t\t   q\n-\t\t }\n-\t\t /^X\\(\\/\\/\\)$/{\n-\t\t   s//\\1/\n-\t\t   q\n-\t\t }\n-\t\t /^X\\(\\/\\).*/{\n-\t\t   s//\\1/\n-\t\t   q\n-\t\t }\n-\t\t s/.*/./; q'\n-      `\n-\n+      dstdir=`dirname \"$dst\"`\n       test -d \"$dstdir\"\n       dstdir_status=$?\n     fi\n@@ -307,74 +293,74 @@ do\n   if test $dstdir_status != 0; then\n     case $posix_mkdir in\n       '')\n-\t# Create intermediate dirs using mode 755 as modified by the umask.\n-\t# This is like FreeBSD 'install' as of 1997-10-28.\n-\tumask=`umask`\n-\tcase $stripcmd.$umask in\n-\t  # Optimize common cases.\n-\t  *[2367][2367]) mkdir_umask=$umask;;\n-\t  .*0[02][02] | .[02][02] | .[02]) mkdir_umask=22;;\n-\n-\t  *[0-7])\n-\t    mkdir_umask=`expr $umask + 22 \\\n-\t      - $umask % 100 % 40 + $umask % 20 \\\n-\t      - $umask % 10 % 4 + $umask % 2\n-\t    `;;\n-\t  *) mkdir_umask=$umask,go-w;;\n-\tesac\n-\n-\t# With -d, create the new directory with the user-specified mode.\n-\t# Otherwise, rely on $mkdir_umask.\n-\tif test -n \"$dir_arg\"; then\n-\t  mkdir_mode=-m$mode\n-\telse\n-\t  mkdir_mode=\n-\tfi\n-\n-\tposix_mkdir=false\n-\tcase $umask in\n-\t  *[123567][0-7][0-7])\n-\t    # POSIX mkdir -p sets u+wx bits regardless of umask, which\n-\t    # is incompatible with FreeBSD 'install' when (umask & 300) != 0.\n-\t    ;;\n-\t  *)\n-\t    tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$\n-\t    trap 'ret=$?; rmdir \"$tmpdir/d\" \"$tmpdir\" 2>/dev/null; exit $ret' 0\n-\n-\t    if (umask $mkdir_umask &&\n-\t\texec $mkdirprog $mkdir_mode -p -- \"$tmpdir/d\") >/dev/null 2>&1\n-\t    then\n-\t      if test -z \"$dir_arg\" || {\n-\t\t   # Check for POSIX incompatibilities with -m.\n-\t\t   # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or\n-\t\t   # other-writeable bit of parent directory when it shouldn't.\n-\t\t   # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.\n-\t\t   ls_ld_tmpdir=`ls -ld \"$tmpdir\"`\n-\t\t   case $ls_ld_tmpdir in\n-\t\t     d????-?r-*) different_mode=700;;\n-\t\t     d????-?--*) different_mode=755;;\n-\t\t     *) false;;\n-\t\t   esac &&\n-\t\t   $mkdirprog -m$different_mode -p -- \"$tmpdir\" && {\n-\t\t     ls_ld_tmpdir_1=`ls -ld \"$tmpdir\"`\n-\t\t     test \"$ls_ld_tmpdir\" = \"$ls_ld_tmpdir_1\"\n-\t\t   }\n-\t\t }\n-\t      then posix_mkdir=:\n-\t      fi\n-\t      rmdir \"$tmpdir/d\" \"$tmpdir\"\n-\t    else\n-\t      # Remove any dirs left behind by ancient mkdir implementations.\n-\t      rmdir ./$mkdir_mode ./-p ./-- 2>/dev/null\n-\t    fi\n-\t    trap '' 0;;\n-\tesac;;\n+        # Create intermediate dirs using mode 755 as modified by the umask.\n+        # This is like FreeBSD 'install' as of 1997-10-28.\n+        umask=`umask`\n+        case $stripcmd.$umask in\n+          # Optimize common cases.\n+          *[2367][2367]) mkdir_umask=$umask;;\n+          .*0[02][02] | .[02][02] | .[02]) mkdir_umask=22;;\n+\n+          *[0-7])\n+            mkdir_umask=`expr $umask + 22 \\\n+              - $umask % 100 % 40 + $umask % 20 \\\n+              - $umask % 10 % 4 + $umask % 2\n+            `;;\n+          *) mkdir_umask=$umask,go-w;;\n+        esac\n+\n+        # With -d, create the new directory with the user-specified mode.\n+        # Otherwise, rely on $mkdir_umask.\n+        if test -n \"$dir_arg\"; then\n+          mkdir_mode=-m$mode\n+        else\n+          mkdir_mode=\n+        fi\n+\n+        posix_mkdir=false\n+        case $umask in\n+          *[123567][0-7][0-7])\n+            # POSIX mkdir -p sets u+wx bits regardless of umask, which\n+            # is incompatible with FreeBSD 'install' when (umask & 300) != 0.\n+            ;;\n+          *)\n+            tmpdir=${TMPDIR-/tmp}/ins$RANDOM-$$\n+            trap 'ret=$?; rmdir \"$tmpdir/d\" \"$tmpdir\" 2>/dev/null; exit $ret' 0\n+\n+            if (umask $mkdir_umask &&\n+                exec $mkdirprog $mkdir_mode -p -- \"$tmpdir/d\") >/dev/null 2>&1\n+            then\n+              if test -z \"$dir_arg\" || {\n+                   # Check for POSIX incompatibilities with -m.\n+                   # HP-UX 11.23 and IRIX 6.5 mkdir -m -p sets group- or\n+                   # other-writable bit of parent directory when it shouldn't.\n+                   # FreeBSD 6.1 mkdir -m -p sets mode of existing directory.\n+                   ls_ld_tmpdir=`ls -ld \"$tmpdir\"`\n+                   case $ls_ld_tmpdir in\n+                     d????-?r-*) different_mode=700;;\n+                     d????-?--*) different_mode=755;;\n+                     *) false;;\n+                   esac &&\n+                   $mkdirprog -m$different_mode -p -- \"$tmpdir\" && {\n+                     ls_ld_tmpdir_1=`ls -ld \"$tmpdir\"`\n+                     test \"$ls_ld_tmpdir\" = \"$ls_ld_tmpdir_1\"\n+                   }\n+                 }\n+              then posix_mkdir=:\n+              fi\n+              rmdir \"$tmpdir/d\" \"$tmpdir\"\n+            else\n+              # Remove any dirs left behind by ancient mkdir implementations.\n+              rmdir ./$mkdir_mode ./-p ./-- 2>/dev/null\n+            fi\n+            trap '' 0;;\n+        esac;;\n     esac\n \n     if\n       $posix_mkdir && (\n-\tumask $mkdir_umask &&\n-\t$doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\"\n+        umask $mkdir_umask &&\n+        $doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\"\n       )\n     then :\n     else\n@@ -384,53 +370,51 @@ do\n       # directory the slow way, step by step, checking for races as we go.\n \n       case $dstdir in\n-\t/*) prefix='/';;\n-\t-*) prefix='./';;\n-\t*)  prefix='';;\n+        /*) prefix='/';;\n+        [-=\\(\\)!]*) prefix='./';;\n+        *)  prefix='';;\n       esac\n \n-      eval \"$initialize_posix_glob\"\n-\n       oIFS=$IFS\n       IFS=/\n-      $posix_glob set -f\n+      set -f\n       set fnord $dstdir\n       shift\n-      $posix_glob set +f\n+      set +f\n       IFS=$oIFS\n \n       prefixes=\n \n       for d\n       do\n-\ttest -z \"$d\" && continue\n-\n-\tprefix=$prefix$d\n-\tif test -d \"$prefix\"; then\n-\t  prefixes=\n-\telse\n-\t  if $posix_mkdir; then\n-\t    (umask=$mkdir_umask &&\n-\t     $doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\") && break\n-\t    # Don't fail if two instances are running concurrently.\n-\t    test -d \"$prefix\" || exit 1\n-\t  else\n-\t    case $prefix in\n-\t      *\\'*) qprefix=`echo \"$prefix\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"`;;\n-\t      *) qprefix=$prefix;;\n-\t    esac\n-\t    prefixes=\"$prefixes '$qprefix'\"\n-\t  fi\n-\tfi\n-\tprefix=$prefix/\n+        test X\"$d\" = X && continue\n+\n+        prefix=$prefix$d\n+        if test -d \"$prefix\"; then\n+          prefixes=\n+        else\n+          if $posix_mkdir; then\n+            (umask=$mkdir_umask &&\n+             $doit_exec $mkdirprog $mkdir_mode -p -- \"$dstdir\") && break\n+            # Don't fail if two instances are running concurrently.\n+            test -d \"$prefix\" || exit 1\n+          else\n+            case $prefix in\n+              *\\'*) qprefix=`echo \"$prefix\" | sed \"s/'/'\\\\\\\\\\\\\\\\''/g\"`;;\n+              *) qprefix=$prefix;;\n+            esac\n+            prefixes=\"$prefixes '$qprefix'\"\n+          fi\n+        fi\n+        prefix=$prefix/\n       done\n \n       if test -n \"$prefixes\"; then\n-\t# Don't fail if two instances are running concurrently.\n-\t(umask $mkdir_umask &&\n-\t eval \"\\$doit_exec \\$mkdirprog $prefixes\") ||\n-\t  test -d \"$dstdir\" || exit 1\n-\tobsolete_mkdir_used=true\n+        # Don't fail if two instances are running concurrently.\n+        (umask $mkdir_umask &&\n+         eval \"\\$doit_exec \\$mkdirprog $prefixes\") ||\n+          test -d \"$dstdir\" || exit 1\n+        obsolete_mkdir_used=true\n       fi\n     fi\n   fi\n@@ -465,15 +449,12 @@ do\n \n     # If -C, don't bother to copy if it wouldn't change the file.\n     if $copy_on_change &&\n-       old=`LC_ALL=C ls -dlL \"$dst\"\t2>/dev/null` &&\n-       new=`LC_ALL=C ls -dlL \"$dsttmp\"\t2>/dev/null` &&\n-\n-       eval \"$initialize_posix_glob\" &&\n-       $posix_glob set -f &&\n+       old=`LC_ALL=C ls -dlL \"$dst\"     2>/dev/null` &&\n+       new=`LC_ALL=C ls -dlL \"$dsttmp\"  2>/dev/null` &&\n+       set -f &&\n        set X $old && old=:$2:$4:$5:$6 &&\n        set X $new && new=:$2:$4:$5:$6 &&\n-       $posix_glob set +f &&\n-\n+       set +f &&\n        test \"$old\" = \"$new\" &&\n        $cmpprog \"$dst\" \"$dsttmp\" >/dev/null 2>&1\n     then\n@@ -486,24 +467,24 @@ do\n       # to itself, or perhaps because mv is so ancient that it does not\n       # support -f.\n       {\n-\t# Now remove or move aside any old file at destination location.\n-\t# We try this two ways since rm can't unlink itself on some\n-\t# systems and the destination file might be busy for other\n-\t# reasons.  In this case, the final cleanup might fail but the new\n-\t# file should still install successfully.\n-\t{\n-\t  test ! -f \"$dst\" ||\n-\t  $doit $rmcmd -f \"$dst\" 2>/dev/null ||\n-\t  { $doit $mvcmd -f \"$dst\" \"$rmtmp\" 2>/dev/null &&\n-\t    { $doit $rmcmd -f \"$rmtmp\" 2>/dev/null; :; }\n-\t  } ||\n-\t  { echo \"$0: cannot unlink or rename $dst\" >&2\n-\t    (exit 1); exit 1\n-\t  }\n-\t} &&\n-\n-\t# Now rename the file to the real destination.\n-\t$doit $mvcmd \"$dsttmp\" \"$dst\"\n+        # Now remove or move aside any old file at destination location.\n+        # We try this two ways since rm can't unlink itself on some\n+        # systems and the destination file might be busy for other\n+        # reasons.  In this case, the final cleanup might fail but the new\n+        # file should still install successfully.\n+        {\n+          test ! -f \"$dst\" ||\n+          $doit $rmcmd -f \"$dst\" 2>/dev/null ||\n+          { $doit $mvcmd -f \"$dst\" \"$rmtmp\" 2>/dev/null &&\n+            { $doit $rmcmd -f \"$rmtmp\" 2>/dev/null; :; }\n+          } ||\n+          { echo \"$0: cannot unlink or rename $dst\" >&2\n+            (exit 1); exit 1\n+          }\n+        } &&\n+\n+        # Now rename the file to the real destination.\n+        $doit $mvcmd \"$dsttmp\" \"$dst\"\n       }\n     fi || exit 1\n "}, {"sha": "73728da3f5664db0306a9ffd6e23066fff2df45d", "filename": "src/libbacktrace/internal.h", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Finternal.h", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Finternal.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Finternal.h?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* internal.h -- Internal header file for stack backtrace library.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -201,13 +201,15 @@ extern int backtrace_close (int descriptor,\n extern void backtrace_qsort (void *base, size_t count, size_t size,\n \t\t\t     int (*compar) (const void *, const void *));\n \n-/* Allocate memory.  This is like malloc.  */\n+/* Allocate memory.  This is like malloc.  If ERROR_CALLBACK is NULL,\n+   this does not report an error, it just returns NULL.  */\n \n extern void *backtrace_alloc (struct backtrace_state *state, size_t size,\n \t\t\t      backtrace_error_callback error_callback,\n \t\t\t      void *data) ATTRIBUTE_MALLOC;\n \n-/* Free memory allocated by backtrace_alloc.  */\n+/* Free memory allocated by backtrace_alloc.  If ERROR_CALLBACK is\n+   NULL, this does not report an error.  */\n \n extern void backtrace_free (struct backtrace_state *state, void *mem,\n \t\t\t    size_t size,"}, {"sha": "eaef55a59332a88c6bcb008a56214d48518c6546", "filename": "src/libbacktrace/ltmain.sh", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fltmain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fltmain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fltmain.sh?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -8633,3 +8633,4 @@ build_old_libs=`case $build_libtool_libs in yes) echo no;; *) echo yes;; esac`\n # sh-indentation:2\n # End:\n # vi:sw=2\n+"}, {"sha": "0ed4802d02de424e62449465cd4761996081f75c", "filename": "src/libbacktrace/mmap.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fmmap.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fmmap.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fmmap.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* mmap.c -- Memory allocation with mmap.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -77,7 +77,8 @@ backtrace_free_locked (struct backtrace_state *state, void *addr, size_t size)\n     }\n }\n \n-/* Allocate memory like malloc.  */\n+/* Allocate memory like malloc.  If ERROR_CALLBACK is NULL, don't\n+   report an error.  */\n \n void *\n backtrace_alloc (struct backtrace_state *state,\n@@ -139,8 +140,11 @@ backtrace_alloc (struct backtrace_state *state,\n       asksize = (size + pagesize - 1) & ~ (pagesize - 1);\n       page = mmap (NULL, asksize, PROT_READ | PROT_WRITE,\n \t\t   MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);\n-      if (page == NULL)\n-\terror_callback (data, \"mmap\", errno);\n+      if (page == MAP_FAILED)\n+\t{\n+\t  if (error_callback)\n+\t    error_callback (data, \"mmap\", errno);\n+\t}\n       else\n \t{\n \t  size = (size + 7) & ~ (size_t) 7;"}, {"sha": "dfdaf6fa52e6e774c1c59e5b4509b8c54a7e110a", "filename": "src/libbacktrace/mmapio.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fmmapio.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fmmapio.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fmmapio.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* mmapio.c -- File views using mmap.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "448a2049f1d1b46aa393f3b17e60d9a799181fc4", "filename": "src/libbacktrace/nounwind.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fnounwind.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fnounwind.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fnounwind.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* backtrace.c -- Entry point for stack backtrace library.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "31126cf4741c7abb72e56d8e08b8fa94822b004c", "filename": "src/libbacktrace/pecoff.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fpecoff.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fpecoff.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fpecoff.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* pecoff.c -- Get debug data from a PE/COFFF file for backtraces.\n-   Copyright (C) 2015 Free Software Foundation, Inc.\n+   Copyright (C) 2015-2016 Free Software Foundation, Inc.\n    Adapted from elf.c by Tristan Gingold, AdaCore.\n \n Redistribution and use in source and binary forms, with or without\n@@ -602,7 +602,7 @@ coff_add (struct backtrace_state *state, int descriptor,\n   const b_coff_section_header *sects;\n   struct backtrace_view str_view;\n   int str_view_valid;\n-  size_t str_size;\n+  uint32_t str_size;\n   off_t str_off;\n   struct backtrace_view syms_view;\n   off_t syms_off;"}, {"sha": "09f5e95a6e42d824b1ef09d3d4ff489e61644f58", "filename": "src/libbacktrace/posix.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fposix.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fposix.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fposix.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* posix.c -- POSIX file I/O routines for the backtrace library.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without\n@@ -64,7 +64,7 @@ backtrace_open (const char *filename, backtrace_error_callback error_callback,\n   if (does_not_exist != NULL)\n     *does_not_exist = 0;\n \n-  descriptor = open (filename, O_RDONLY | O_BINARY | O_CLOEXEC);\n+  descriptor = open (filename, (int) (O_RDONLY | O_BINARY | O_CLOEXEC));\n   if (descriptor < 0)\n     {\n       if (does_not_exist != NULL && errno == ENOENT)"}, {"sha": "74c8fcbee5a1f9bc853a0bb6e3607a15a20f9dba", "filename": "src/libbacktrace/print.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fprint.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fprint.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fprint.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* print.c -- Print the current backtrace.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "7f0317c3a8ce91e3de6c8bc95cae597e3163faf2", "filename": "src/libbacktrace/read.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fread.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fread.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fread.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* read.c -- File views without mmap.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "018773a7e5dbdb66de407529f2508a5cd5769b54", "filename": "src/libbacktrace/simple.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fsimple.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fsimple.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fsimple.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* simple.c -- The backtrace_simple function.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "68a7df65a47f6e4cd8bcc9171410c269b462033e", "filename": "src/libbacktrace/sort.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fsort.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fsort.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fsort.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* sort.c -- Sort without allocating memory\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "93420d9c61b19939ebd28d4fe0dccae745d2af57", "filename": "src/libbacktrace/state.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fstate.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fstate.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fstate.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* state.c -- Create the backtrace state.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "55ec31d10bc8168343550e57a71da06dbd5f64fd", "filename": "src/libbacktrace/stest.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fstest.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Fstest.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Fstest.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* stest.c -- Test for libbacktrace internal sort function\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}, {"sha": "8d06c31549f70a0fbfa049bd9eda0921591b4a31", "filename": "src/libbacktrace/unknown.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Funknown.c", "raw_url": "https://github.com/rust-lang/rust/raw/3c490538d8caf2d5796986bb68503f4e086f9820/src%2Flibbacktrace%2Funknown.c", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibbacktrace%2Funknown.c?ref=3c490538d8caf2d5796986bb68503f4e086f9820", "patch": "@@ -1,5 +1,5 @@\n /* unknown.c -- used when backtrace configury does not know file format.\n-   Copyright (C) 2012-2015 Free Software Foundation, Inc.\n+   Copyright (C) 2012-2016 Free Software Foundation, Inc.\n    Written by Ian Lance Taylor, Google.\n \n Redistribution and use in source and binary forms, with or without"}]}