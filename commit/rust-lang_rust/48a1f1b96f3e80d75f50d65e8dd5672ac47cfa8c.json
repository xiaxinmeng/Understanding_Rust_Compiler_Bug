{"sha": "48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4YTFmMWI5NmYzZTgwZDc1ZjUwZDY1ZThkZDU2NzJhYzQ3Y2ZhOGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-21T03:19:43Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-07-21T03:19:43Z"}, "message": "Auto merge of #27139 - pnkfelix:allow-disable-debuginfo, r=dotdash\n\nfix `configure`: allow both `--enable-debug` and `--disable-debuginfo` in one invocation.\r\n\r\nThis is my very local fix to allow one to be able to (1.) build `rustc` and (2.) run `make check` with internal debug-mode *assertions* turned on in the presence of bugs like  #26447 and #26484 (both of which are solely caused by debuginfo and thus can be sidestepped via `--disable-debuginfo`).\r\n\r\nThis partially addresses #24416 (namely, it addresses the papercut outlined in the description of that ticket).  But there are other issues mentioned in the comment thread that are not addressed here, so they should be separately addressed before closing that ticket, or separate bugs should be opened for them.", "tree": {"sha": "dcf63d1fb3822f7b96e92131fc0f310641811a74", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dcf63d1fb3822f7b96e92131fc0f310641811a74"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c", "html_url": "https://github.com/rust-lang/rust/commit/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "238765e1eb9dc1bd6ba4cc064b37f57207426e84", "url": "https://api.github.com/repos/rust-lang/rust/commits/238765e1eb9dc1bd6ba4cc064b37f57207426e84", "html_url": "https://github.com/rust-lang/rust/commit/238765e1eb9dc1bd6ba4cc064b37f57207426e84"}, {"sha": "ac33f1572bc67c028034a6c39929a500bd8ca5a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac33f1572bc67c028034a6c39929a500bd8ca5a9", "html_url": "https://github.com/rust-lang/rust/commit/ac33f1572bc67c028034a6c39929a500bd8ca5a9"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "652b0b477664f45e57499237210a7cb5c6f03af0", "filename": "configure", "status": "modified", "additions": 17, "deletions": 4, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c/configure", "raw_url": "https://github.com/rust-lang/rust/raw/48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=48a1f1b96f3e80d75f50d65e8dd5672ac47cfa8c", "patch": "@@ -323,6 +323,17 @@ envopt() {\n     fi\n }\n \n+enable_if_not_disabled() {\n+    local OP=$1\n+    local UOP=$(echo $OP | tr '[:lower:]' '[:upper:]' | tr '\\-' '\\_')\n+    local ENAB_V=\"CFG_ENABLE_$UOP\"\n+    local EXPLICITLY_DISABLED=\"CFG_DISABLE_${UOP}_PROVIDED\"\n+    eval VV=\\$$EXPLICITLY_DISABLED\n+    if [ -z \"$VV\" ]; then\n+        eval $ENAB_V=1\n+    fi\n+}\n+\n to_llvm_triple() {\n     case $1 in\n         i686-w64-mingw32) echo i686-pc-windows-gnu ;;\n@@ -671,10 +682,12 @@ if [ -n \"$CFG_ENABLE_DEBUG\" ]; then\n         CFG_DISABLE_OPTIMIZE=1\n         CFG_DISABLE_OPTIMIZE_CXX=1\n     fi\n-    CFG_ENABLE_DEBUG_ASSERTIONS=1\n-    CFG_ENABLE_DEBUG_JEMALLOC=1\n-    CFG_ENABLE_DEBUGINFO=1\n-    CFG_ENABLE_LLVM_ASSERTIONS=1\n+\n+    # Set following variables to 1 unless setting already provided\n+    enable_if_not_disabled debug-assertions\n+    enable_if_not_disabled debug-jemalloc\n+    enable_if_not_disabled debuginfo\n+    enable_if_not_disabled llvm-assertions\n fi\n \n # OK, now write the debugging options"}]}