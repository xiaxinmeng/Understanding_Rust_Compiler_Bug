{"sha": "4fd1c77a24288383600b02a7e3f11bf5eb718a32", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmZDFjNzdhMjQyODgzODM2MDBiMDJhN2UzZjExYmY1ZWI3MThhMzI=", "commit": {"author": {"name": "aspen", "email": "luxx4x@protonmail.com", "date": "2020-07-01T16:15:24Z"}, "committer": {"name": "aspen", "email": "luxx4x@protonmail.com", "date": "2020-07-01T16:15:24Z"}, "message": "Document the CMake defines.", "tree": {"sha": "fa93981a3589986bc9e6d438cf46961c9d1075f0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa93981a3589986bc9e6d438cf46961c9d1075f0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4fd1c77a24288383600b02a7e3f11bf5eb718a32", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQT9GEgotw7oWiVcdotzKTKWiWXeVgUCXvy2oAAKCRBzKTKWiWXe\nVn0WAP9MiS5mySChx1YQGC3LM2tSS3FKOp4v+Ff2sB9Xih9TygEAiovWpzJygZig\nUiterI9s9RFey6i1GjrJe/tZ+6hWtAA=\n=uVG8\n-----END PGP SIGNATURE-----", "payload": "tree fa93981a3589986bc9e6d438cf46961c9d1075f0\nparent 5f3dbd83af1a2872ec2514ea1a18116b800e4aeb\nauthor aspen <luxx4x@protonmail.com> 1593620124 -0400\ncommitter aspen <luxx4x@protonmail.com> 1593620124 -0400\n\nDocument the CMake defines.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4fd1c77a24288383600b02a7e3f11bf5eb718a32", "html_url": "https://github.com/rust-lang/rust/commit/4fd1c77a24288383600b02a7e3f11bf5eb718a32", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4fd1c77a24288383600b02a7e3f11bf5eb718a32/comments", "author": null, "committer": null, "parents": [{"sha": "5f3dbd83af1a2872ec2514ea1a18116b800e4aeb", "url": "https://api.github.com/repos/rust-lang/rust/commits/5f3dbd83af1a2872ec2514ea1a18116b800e4aeb", "html_url": "https://github.com/rust-lang/rust/commit/5f3dbd83af1a2872ec2514ea1a18116b800e4aeb"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "fe1891f3ddf5f36d7656a45b49c0139b261036a3", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4fd1c77a24288383600b02a7e3f11bf5eb718a32/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4fd1c77a24288383600b02a7e3f11bf5eb718a32/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=4fd1c77a24288383600b02a7e3f11bf5eb718a32", "patch": "@@ -177,9 +177,12 @@ impl Step for Llvm {\n \n         // Are we compiling for iOS/tvOS?\n         if target.contains(\"apple\") && !target.contains(\"darwin\") {\n+            // These two defines prevent CMake from automatically trying to add a MacOSX sysroot, which leads to a compiler error.\n             cfg.define(\"CMAKE_OSX_SYSROOT\", \"/\");\n             cfg.define(\"CMAKE_OSX_DEPLOYMENT_TARGET\", \"\");\n-            cfg.define(\"LLVM_ENABLE_PLUGINS\", \"OFF\"); // Prevent cmake from adding -bundle to CFLAGS automatically.\n+            // Prevent cmake from adding -bundle to CFLAGS automatically, which leads to a compiler error because \"-bitcode_bundle\" also gets added.\n+            cfg.define(\"LLVM_ENABLE_PLUGINS\", \"OFF\");\n+            // Zlib fails to link properly, leading to a compiler error.\n             cfg.define(\"LLVM_ENABLE_ZLIB\", \"OFF\");\n         }\n "}]}