{"sha": "2238a94b96380846353821c0f8d5bb1300727e38", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyMzhhOTRiOTYzODA4NDYzNTM4MjFjMGY4ZDViYjEzMDA3MjdlMzg=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-06-29T09:18:08Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-06-29T09:18:08Z"}, "message": "Rollup merge of #61818 - tmandry:issue-60709-test, r=cramertj\n\nIssue #60709 test\n\nAdds a test for #60709, which was fixed as part of #59897.\n\nr? @cramertj", "tree": {"sha": "f36b285577c952c9f90a5515a2e6a69488f2969c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f36b285577c952c9f90a5515a2e6a69488f2969c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2238a94b96380846353821c0f8d5bb1300727e38", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdFyzRCRBK7hj4Ov3rIwAAdHIIAFvEm2GFiFLQaHBJFDpKnU8Y\n18JlCGMr8u2QwpgZCwbPXFMcSImJf0YluTyIoqiwSU3ulfruWEOJIsuM21vP+vpf\nq3KKMSIuQ0WGPoHOSRJTumxmTUViyyQyZbv/z8GdfWDorb8q3BLlx+QMtnIupdSb\n5cNMv8Lm8b0hC8ssZgwtySsY7FQezdobJtRaVAXRJwrX8Rag/LOycqBGNtDRcQxo\nTO0Hfm/r8n+zSDpswfVratfOMOsMR3/pf4LvvqCz+BsOd4O3zQ80vgbpmRKDLngO\nEU4ZWM7uAKoRjk4YYLGbZojqjGehVhEO/phs+a0i81o0ZlHj5MoAbTCdlSaR5so=\n=XleF\n-----END PGP SIGNATURE-----\n", "payload": "tree f36b285577c952c9f90a5515a2e6a69488f2969c\nparent 0721364f0de6191cddeaaaeb112fb74aa1a9e30a\nparent b7397cc00b052cf49c26b095c72b895cd0a3e254\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1561799888 +0200\ncommitter GitHub <noreply@github.com> 1561799888 +0200\n\nRollup merge of #61818 - tmandry:issue-60709-test, r=cramertj\n\nIssue #60709 test\n\nAdds a test for #60709, which was fixed as part of #59897.\n\nr? @cramertj\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2238a94b96380846353821c0f8d5bb1300727e38", "html_url": "https://github.com/rust-lang/rust/commit/2238a94b96380846353821c0f8d5bb1300727e38", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2238a94b96380846353821c0f8d5bb1300727e38/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0721364f0de6191cddeaaaeb112fb74aa1a9e30a", "url": "https://api.github.com/repos/rust-lang/rust/commits/0721364f0de6191cddeaaaeb112fb74aa1a9e30a", "html_url": "https://github.com/rust-lang/rust/commit/0721364f0de6191cddeaaaeb112fb74aa1a9e30a"}, {"sha": "b7397cc00b052cf49c26b095c72b895cd0a3e254", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7397cc00b052cf49c26b095c72b895cd0a3e254", "html_url": "https://github.com/rust-lang/rust/commit/b7397cc00b052cf49c26b095c72b895cd0a3e254"}], "stats": {"total": 32, "additions": 30, "deletions": 2}, "files": [{"sha": "c4e328560ddf701c4067e26f5167cc52638b8096", "filename": "src/test/run-pass/async-await/async-fn-size.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2238a94b96380846353821c0f8d5bb1300727e38/src%2Ftest%2Frun-pass%2Fasync-await%2Fasync-fn-size.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2238a94b96380846353821c0f8d5bb1300727e38/src%2Ftest%2Frun-pass%2Fasync-await%2Fasync-fn-size.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fasync-await%2Fasync-fn-size.rs?ref=2238a94b96380846353821c0f8d5bb1300727e38", "patch": "@@ -1,9 +1,9 @@\n // edition:2018\n-// aux-build:arc_wake.rs\n \n #![feature(async_await, await_macro)]\n \n-extern crate arc_wake;\n+#[path = \"../auxiliary/arc_wake.rs\"]\n+mod arc_wake;\n \n use std::pin::Pin;\n use std::future::Future;", "previous_filename": "src/test/run-pass/async-fn-size.rs"}, {"sha": "778d3ee0c70836d8734d6ecd23accb58411017fb", "filename": "src/test/run-pass/async-await/issue-60709.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/2238a94b96380846353821c0f8d5bb1300727e38/src%2Ftest%2Frun-pass%2Fasync-await%2Fissue-60709.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2238a94b96380846353821c0f8d5bb1300727e38/src%2Ftest%2Frun-pass%2Fasync-await%2Fissue-60709.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fasync-await%2Fissue-60709.rs?ref=2238a94b96380846353821c0f8d5bb1300727e38", "patch": "@@ -0,0 +1,28 @@\n+// This used to compile the future down to ud2, due to uninhabited types being\n+// handled incorrectly in generators.\n+// compile-flags: -Copt-level=z -Cdebuginfo=2 --edition=2018\n+\n+#![feature(async_await, await_macro)]\n+#![allow(unused)]\n+\n+use std::future::Future;\n+use std::task::Poll;\n+use std::task::Context;\n+use std::pin::Pin;\n+use std::rc::Rc;\n+\n+struct Never();\n+impl Future for Never {\n+    type Output = ();\n+    fn poll(self: Pin<&mut Self>, _cx: &mut Context<'_>) -> Poll<Self::Output> {\n+        Poll::Pending\n+    }\n+}\n+\n+fn main() {\n+    let fut = async {\n+        let _rc = Rc::new(()); // Also crashes with Arc\n+        await!(Never());\n+    };\n+    let _bla = fut; // Moving the future is required.\n+}"}]}