{"sha": "827f656ebb1230f31af6d968c4bfe69a79914ffc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyN2Y2NTZlYmIxMjMwZjMxYWY2ZDk2OGM0YmZlNjlhNzk5MTRmZmM=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-07-16T15:22:15Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-07-16T16:33:45Z"}, "message": "Enable incremental independent of stage\n\nPreviously we'd only do so for stage 0 but with keep-stage\nimprovements it seems likely that we'll see more developers working in\nthe stage 1, so we should allow enabling incremental for them.\n\nIdeally, the check we probably want is to only enable incremental for\nthe last compiler build scheduled, but there's no good way to do so\ntoday. Just enabling incremental in all stages should be sufficient;\nwe may be doing extra work that's needles -- compiling incrementally\nsomething that will never be recompiled in-place -- but that should be\nsufficiently unlikely (i.e., users either don't care or won't be\ncompiling the compiler twice).", "tree": {"sha": "8bfe0438e6e8cdec898d79bb114230f1485d09c0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8bfe0438e6e8cdec898d79bb114230f1485d09c0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/827f656ebb1230f31af6d968c4bfe69a79914ffc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/827f656ebb1230f31af6d968c4bfe69a79914ffc", "html_url": "https://github.com/rust-lang/rust/commit/827f656ebb1230f31af6d968c4bfe69a79914ffc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/827f656ebb1230f31af6d968c4bfe69a79914ffc/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d5753fda1ee8f729da1061e931e13b043f479a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d5753fda1ee8f729da1061e931e13b043f479a5", "html_url": "https://github.com/rust-lang/rust/commit/3d5753fda1ee8f729da1061e931e13b043f479a5"}], "stats": {"total": 5, "additions": 1, "deletions": 4}, "files": [{"sha": "79167b1fd5e270b4415f98b8863129009ed3a38d", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/827f656ebb1230f31af6d968c4bfe69a79914ffc/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/827f656ebb1230f31af6d968c4bfe69a79914ffc/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=827f656ebb1230f31af6d968c4bfe69a79914ffc", "patch": "@@ -903,10 +903,7 @@ impl<'a> Builder<'a> {\n                 .env(\"RUSTC_SNAPSHOT_LIBDIR\", self.rustc_libdir(compiler));\n         }\n \n-        // Ignore incremental modes except for stage0, since we're\n-        // not guaranteeing correctness across builds if the compiler\n-        // is changing under your feet.`\n-        if self.config.incremental && compiler.stage == 0 {\n+        if self.config.incremental {\n             cargo.env(\"CARGO_INCREMENTAL\", \"1\");\n         }\n "}]}