{"sha": "c6f4a06b4297f498da4bc2cd747aa38effb855b0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2ZjRhMDZiNDI5N2Y0OThkYTRiYzJjZDc0N2FhMzhlZmZiODU1YjA=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-02-17T22:06:48Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-02-17T22:06:48Z"}, "message": "G: value_parameters, patterns & let statement", "tree": {"sha": "a383a2e71da6029bbd6a5669b5f9d2b99a1b0a92", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a383a2e71da6029bbd6a5669b5f9d2b99a1b0a92"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6f4a06b4297f498da4bc2cd747aa38effb855b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6f4a06b4297f498da4bc2cd747aa38effb855b0", "html_url": "https://github.com/rust-lang/rust/commit/c6f4a06b4297f498da4bc2cd747aa38effb855b0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6f4a06b4297f498da4bc2cd747aa38effb855b0/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8c4c5b5b802a204bfeef52e215358ae838900f1f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8c4c5b5b802a204bfeef52e215358ae838900f1f", "html_url": "https://github.com/rust-lang/rust/commit/8c4c5b5b802a204bfeef52e215358ae838900f1f"}], "stats": {"total": 648, "additions": 541, "deletions": 107}, "files": [{"sha": "d5d2e6162e8bb41e21e0f80779a1e91446a0dfd8", "filename": "grammar.ron", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/grammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/grammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/grammar.ron?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -27,6 +27,8 @@ Grammar(\n         \"mut\",\n         \"unsafe\",\n         \"type\",\n+        \"ref\",\n+        \"let\",\n     ],\n     contextual_keywords: [\n         \"auto\",\n@@ -113,6 +115,12 @@ Grammar(\n         \"FN_POINTER_TYPE\",\n         \"FOR_TYPE\",\n \n+        \"REF_PAT\",\n+        \"BIND_PAT\",\n+        \"PLACEHOLDER_PAT\",\n+\n+        \"TUPLE_EXPR\",\n+\n         \"EXTERN_BLOCK\",\n         \"ENUM_VARIANT\",\n         \"NAMED_FIELD\",\n@@ -132,5 +140,8 @@ Grammar(\n         \"ABI\",\n         \"NAME\",\n         \"NAME_REF\",\n+        \"VALUE_PARAMETER\",\n+        \"BLOCK\",\n+        \"LET_STMT\",\n     ]\n )"}, {"sha": "2145b8d8ba3f741354841d24d992eef35d44e579", "filename": "src/parser/grammar/expressions.rs", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fexpressions.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -14,7 +14,20 @@ pub(super) fn literal(p: &mut Parser) -> bool {\n }\n \n pub(super) fn expr(p: &mut Parser) {\n-    if !literal(p) {\n-        p.error(\"expected expression\");\n+    if literal(p) {\n+        return;\n     }\n+\n+    match p.current() {\n+        L_PAREN => tuple_expr(p),\n+        _ => p.error(\"expected expression\"),\n+    }\n+}\n+\n+fn tuple_expr(p: &mut Parser) {\n+    assert!(p.at(L_PAREN));\n+    let m = p.start();\n+    p.expect(L_PAREN);\n+    p.expect(R_PAREN);\n+    m.complete(p, TUPLE_EXPR);\n }"}, {"sha": "1fe646652bfd2efdbd360c42ed83f48d0dd1c965", "filename": "src/parser/grammar/items/mod.rs", "status": "modified", "additions": 26, "deletions": 2, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fitems%2Fmod.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -218,9 +218,33 @@ fn fn_item(p: &mut Parser) {\n         p.error(\"expected function arguments\");\n     }\n \n-    if p.at(L_CURLY) {\n-        p.expect(L_CURLY);\n+    block(p);\n+\n+    fn block(p: &mut Parser) {\n+        if !p.at(L_CURLY) {\n+            p.error(\"expected block\");\n+        }\n+        let m = p.start();\n+        p.bump();\n+        while !p.at(EOF) && !p.at(R_CURLY) {\n+            match p.current() {\n+                LET_KW => let_stmt(p),\n+                _ => p.err_and_bump(\"expected statement\"),\n+            }\n+        }\n         p.expect(R_CURLY);\n+        m.complete(p, BLOCK);\n+    }\n+\n+    fn let_stmt(p: &mut Parser) {\n+        assert!(p.at(LET_KW));\n+        let m = p.start();\n+        p.bump();\n+        patterns::pattern(p);\n+        p.expect(EQ);\n+        expressions::expr(p);\n+        p.expect(SEMI);\n+        m.complete(p, LET_STMT);\n     }\n }\n "}, {"sha": "54a63a5474f28caf137bd7d912d9831d13563c42", "filename": "src/parser/grammar/mod.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fmod.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -30,6 +30,7 @@ mod items;\n mod attributes;\n mod expressions;\n mod types;\n+mod patterns;\n mod paths;\n mod type_params;\n \n@@ -85,10 +86,29 @@ fn abi(p: &mut Parser) {\n     abi.complete(p, ABI);\n }\n \n+// test fn_value_parameters\n+// fn a() {}\n+// fn b(x: i32) {}\n+// fn c(x: i32, ) {}\n+// fn d(x: i32, y: ()) {}\n fn fn_value_parameters(p: &mut Parser) {\n     assert!(p.at(L_PAREN));\n     p.bump();\n+    while !p.at(EOF) && !p.at(R_PAREN) {\n+        value_parameter(p);\n+        if !p.at(R_PAREN) {\n+            p.expect(COMMA);\n+        }\n+    }\n     p.expect(R_PAREN);\n+\n+    fn value_parameter(p: &mut Parser) {\n+        let m = p.start();\n+        patterns::pattern(p);\n+        p.expect(COLON);\n+        types::type_(p);\n+        m.complete(p, VALUE_PARAMETER);\n+    }\n }\n \n fn fn_ret_type(p: &mut Parser) {"}, {"sha": "6e4f2236bfdf27c9f619b8e828ec7e328c560724", "filename": "src/parser/grammar/patterns.rs", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fparser%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Fpatterns.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,52 @@\n+use super::*;\n+\n+pub(super) fn pattern(p: &mut Parser) {\n+    match p.current() {\n+        UNDERSCORE => placeholder_pat(p),\n+        AMPERSAND => ref_pat(p),\n+        IDENT | REF_KW => bind_pat(p),\n+        _ => p.err_and_bump(\"expected pattern\"),\n+    }\n+}\n+\n+// test placeholder_pat\n+// fn main() { let _ = (); }\n+fn placeholder_pat(p: &mut Parser) {\n+    assert!(p.at(UNDERSCORE));\n+    let m = p.start();\n+    p.bump();\n+    m.complete(p, PLACEHOLDER_PAT);\n+}\n+\n+// test ref_pat\n+// fn main() {\n+//     let &a = ();\n+//     let &mut b = ();\n+// }\n+fn ref_pat(p: &mut Parser) {\n+    assert!(p.at(AMPERSAND));\n+    let m = p.start();\n+    p.bump();\n+    p.eat(MUT_KW);\n+    pattern(p);\n+    m.complete(p, REF_PAT);\n+}\n+\n+// test bind_pat\n+// fn main() {\n+//     let a = ();\n+//     let ref b = ();\n+//     let ref mut c = ();\n+//     let d @ _ = ();\n+// }\n+fn bind_pat(p: &mut Parser) {\n+    let m = p.start();\n+    if p.eat(REF_KW) {\n+        p.eat(MUT_KW);\n+    }\n+    name(p);\n+    if p.eat(AT) {\n+        pattern(p);\n+    }\n+    m.complete(p, BIND_PAT);\n+}"}, {"sha": "1cc29bb61e33ba55c66b924bf63c0a7963cf8dfb", "filename": "src/syntax_kinds.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fsyntax_kinds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/src%2Fsyntax_kinds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsyntax_kinds.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -84,6 +84,8 @@ pub enum SyntaxKind {\n     MUT_KW,\n     UNSAFE_KW,\n     TYPE_KW,\n+    REF_KW,\n+    LET_KW,\n     AUTO_KW,\n     DEFAULT_KW,\n     UNION_KW,\n@@ -110,6 +112,10 @@ pub enum SyntaxKind {\n     PLACEHOLDER_TYPE,\n     FN_POINTER_TYPE,\n     FOR_TYPE,\n+    REF_PAT,\n+    BIND_PAT,\n+    PLACEHOLDER_PAT,\n+    TUPLE_EXPR,\n     EXTERN_BLOCK,\n     ENUM_VARIANT,\n     NAMED_FIELD,\n@@ -129,6 +135,9 @@ pub enum SyntaxKind {\n     ABI,\n     NAME,\n     NAME_REF,\n+    VALUE_PARAMETER,\n+    BLOCK,\n+    LET_STMT,\n \n     // Technical SyntaxKinds: they appear temporally during parsing,\n     // but never end up in the final tree\n@@ -220,6 +229,8 @@ impl SyntaxKind {\n             MUT_KW => &SyntaxInfo { name: \"MUT_KW\" },\n             UNSAFE_KW => &SyntaxInfo { name: \"UNSAFE_KW\" },\n             TYPE_KW => &SyntaxInfo { name: \"TYPE_KW\" },\n+            REF_KW => &SyntaxInfo { name: \"REF_KW\" },\n+            LET_KW => &SyntaxInfo { name: \"LET_KW\" },\n             AUTO_KW => &SyntaxInfo { name: \"AUTO_KW\" },\n             DEFAULT_KW => &SyntaxInfo { name: \"DEFAULT_KW\" },\n             UNION_KW => &SyntaxInfo { name: \"UNION_KW\" },\n@@ -246,6 +257,10 @@ impl SyntaxKind {\n             PLACEHOLDER_TYPE => &SyntaxInfo { name: \"PLACEHOLDER_TYPE\" },\n             FN_POINTER_TYPE => &SyntaxInfo { name: \"FN_POINTER_TYPE\" },\n             FOR_TYPE => &SyntaxInfo { name: \"FOR_TYPE\" },\n+            REF_PAT => &SyntaxInfo { name: \"REF_PAT\" },\n+            BIND_PAT => &SyntaxInfo { name: \"BIND_PAT\" },\n+            PLACEHOLDER_PAT => &SyntaxInfo { name: \"PLACEHOLDER_PAT\" },\n+            TUPLE_EXPR => &SyntaxInfo { name: \"TUPLE_EXPR\" },\n             EXTERN_BLOCK => &SyntaxInfo { name: \"EXTERN_BLOCK\" },\n             ENUM_VARIANT => &SyntaxInfo { name: \"ENUM_VARIANT\" },\n             NAMED_FIELD => &SyntaxInfo { name: \"NAMED_FIELD\" },\n@@ -265,6 +280,9 @@ impl SyntaxKind {\n             ABI => &SyntaxInfo { name: \"ABI\" },\n             NAME => &SyntaxInfo { name: \"NAME\" },\n             NAME_REF => &SyntaxInfo { name: \"NAME_REF\" },\n+            VALUE_PARAMETER => &SyntaxInfo { name: \"VALUE_PARAMETER\" },\n+            BLOCK => &SyntaxInfo { name: \"BLOCK\" },\n+            LET_STMT => &SyntaxInfo { name: \"LET_STMT\" },\n \n             TOMBSTONE => &SyntaxInfo { name: \"TOMBSTONE\" },\n             EOF => &SyntaxInfo { name: \"EOF\" },\n@@ -301,6 +319,8 @@ pub(crate) fn ident_to_keyword(ident: &str) -> Option<SyntaxKind> {\n         \"mut\" => Some(MUT_KW),\n         \"unsafe\" => Some(UNSAFE_KW),\n         \"type\" => Some(TYPE_KW),\n+        \"ref\" => Some(REF_KW),\n+        \"let\" => Some(LET_KW),\n         _ => None,\n     }\n }"}, {"sha": "97ff3f954fe431d7ed3257a31fc9e97ada141fd3", "filename": "tests/data/lexer/0011_keywords.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Flexer%2F0011_keywords.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Flexer%2F0011_keywords.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0011_keywords.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -1,3 +1,3 @@\n fn use struct trait enum impl true false as extern crate\n mod pub self super in where for loop while if match const\n-static mut type\n+static mut type ref let"}, {"sha": "851a671f5cbf5765e6ee079c820fc739a6b07b92", "filename": "tests/data/lexer/0011_keywords.txt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Flexer%2F0011_keywords.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Flexer%2F0011_keywords.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0011_keywords.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -49,4 +49,8 @@ WHITESPACE 1 \" \"\n MUT_KW 3 \"mut\"\n WHITESPACE 1 \" \"\n TYPE_KW 4 \"type\"\n+WHITESPACE 1 \" \"\n+REF_KW 3 \"ref\"\n+WHITESPACE 1 \" \"\n+LET_KW 3 \"let\"\n WHITESPACE 1 \"\\n\""}, {"sha": "731f5f2f84ec7f4236d9bb6707b16e0778ff2333", "filename": "tests/data/parser/err/0005_attribute_recover.txt", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0005_attribute_recover.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0005_attribute_recover.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Ferr%2F0005_attribute_recover.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -28,11 +28,12 @@ FILE@[0; 54)\n       IDENT@[22; 25) \"foo\"\n     L_PAREN@[25; 26)\n     R_PAREN@[26; 27)\n-    WHITESPACE@[27; 28)\n-    L_CURLY@[28; 29)\n-    WHITESPACE@[29; 30)\n-    R_CURLY@[30; 31)\n-    WHITESPACE@[31; 34)\n+    BLOCK@[27; 34)\n+      WHITESPACE@[27; 28)\n+      L_CURLY@[28; 29)\n+      WHITESPACE@[29; 30)\n+      R_CURLY@[30; 31)\n+      WHITESPACE@[31; 34)\n   FN_ITEM@[34; 54)\n     ATTR@[34; 41)\n       POUND@[34; 35)\n@@ -49,8 +50,9 @@ FILE@[0; 54)\n       IDENT@[44; 47) \"foo\"\n     L_PAREN@[47; 48)\n     R_PAREN@[48; 49)\n-    WHITESPACE@[49; 50)\n-    L_CURLY@[50; 51)\n-    WHITESPACE@[51; 52)\n-    R_CURLY@[52; 53)\n-    WHITESPACE@[53; 54)\n+    BLOCK@[49; 54)\n+      WHITESPACE@[49; 50)\n+      L_CURLY@[50; 51)\n+      WHITESPACE@[51; 52)\n+      R_CURLY@[52; 53)\n+      WHITESPACE@[53; 54)"}, {"sha": "8a3cb5096f5d232f262bbe602af6438c459c2671", "filename": "tests/data/parser/err/0007_stray_curly_in_file.txt", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0007_stray_curly_in_file.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0007_stray_curly_in_file.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Ferr%2F0007_stray_curly_in_file.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -21,9 +21,10 @@ FILE@[0; 31)\n       IDENT@[20; 23) \"foo\"\n     L_PAREN@[23; 24)\n     R_PAREN@[24; 25)\n-    L_CURLY@[25; 26)\n-    R_CURLY@[26; 27)\n-    WHITESPACE@[27; 29)\n+    BLOCK@[25; 29)\n+      L_CURLY@[25; 26)\n+      R_CURLY@[26; 27)\n+      WHITESPACE@[27; 29)\n   ERROR@[29; 31)\n   err: `expected item`\n     R_CURLY@[29; 30)"}, {"sha": "0e2aae7cc8c45e46fdbeb2e801a362df20f7001e", "filename": "tests/data/parser/err/0008_item_block_recovery.txt", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0008_item_block_recovery.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Ferr%2F0008_item_block_recovery.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Ferr%2F0008_item_block_recovery.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -6,11 +6,12 @@ FILE@[0; 95)\n       IDENT@[3; 6) \"foo\"\n     L_PAREN@[6; 7)\n     R_PAREN@[7; 8)\n-    WHITESPACE@[8; 9)\n-    L_CURLY@[9; 10)\n-    WHITESPACE@[10; 11)\n-    R_CURLY@[11; 12)\n-    WHITESPACE@[12; 14)\n+    BLOCK@[8; 14)\n+      WHITESPACE@[8; 9)\n+      L_CURLY@[9; 10)\n+      WHITESPACE@[10; 11)\n+      R_CURLY@[11; 12)\n+      WHITESPACE@[12; 14)\n   ERROR@[14; 17)\n   err: `expected item`\n     IDENT@[14; 17) \"bar\"\n@@ -56,8 +57,9 @@ FILE@[0; 95)\n       IDENT@[85; 88) \"baz\"\n     L_PAREN@[88; 89)\n     R_PAREN@[89; 90)\n-    WHITESPACE@[90; 91)\n-    L_CURLY@[91; 92)\n-    WHITESPACE@[92; 93)\n-    R_CURLY@[93; 94)\n-    WHITESPACE@[94; 95)\n+    BLOCK@[90; 95)\n+      WHITESPACE@[90; 91)\n+      L_CURLY@[91; 92)\n+      WHITESPACE@[92; 93)\n+      R_CURLY@[93; 94)\n+      WHITESPACE@[94; 95)"}, {"sha": "48de02284b51758ab85d528c74ac12ca8a0136b8", "filename": "tests/data/parser/inline/0001_const_unsafe_fn.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0001_const_unsafe_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0001_const_unsafe_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0001_const_unsafe_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -10,7 +10,8 @@ FILE@[0; 25)\n       IDENT@[16; 19) \"foo\"\n     L_PAREN@[19; 20)\n     R_PAREN@[20; 21)\n-    WHITESPACE@[21; 22)\n-    L_CURLY@[22; 23)\n-    R_CURLY@[23; 24)\n-    WHITESPACE@[24; 25)\n+    BLOCK@[21; 25)\n+      WHITESPACE@[21; 22)\n+      L_CURLY@[22; 23)\n+      R_CURLY@[23; 24)\n+      WHITESPACE@[24; 25)"}, {"sha": "733e476565cd5c0ec1cdb7ad726329bffafab741", "filename": "tests/data/parser/inline/0002_const_fn.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0002_const_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0002_const_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0002_const_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -8,7 +8,8 @@ FILE@[0; 18)\n       IDENT@[9; 12) \"foo\"\n     L_PAREN@[12; 13)\n     R_PAREN@[13; 14)\n-    WHITESPACE@[14; 15)\n-    L_CURLY@[15; 16)\n-    R_CURLY@[16; 17)\n-    WHITESPACE@[17; 18)\n+    BLOCK@[14; 18)\n+      WHITESPACE@[14; 15)\n+      L_CURLY@[15; 16)\n+      R_CURLY@[16; 17)\n+      WHITESPACE@[17; 18)"}, {"sha": "1caeffe3b373d3c9bba967a27aa50349b3974e23", "filename": "tests/data/parser/inline/0004_extern_fn.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0004_extern_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0004_extern_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0004_extern_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -9,7 +9,8 @@ FILE@[0; 19)\n       IDENT@[10; 13) \"foo\"\n     L_PAREN@[13; 14)\n     R_PAREN@[14; 15)\n-    WHITESPACE@[15; 16)\n-    L_CURLY@[16; 17)\n-    R_CURLY@[17; 18)\n-    WHITESPACE@[18; 19)\n+    BLOCK@[15; 19)\n+      WHITESPACE@[15; 16)\n+      L_CURLY@[16; 17)\n+      R_CURLY@[17; 18)\n+      WHITESPACE@[18; 19)"}, {"sha": "d89ad451f235f40e0bc27e5e70c8012078dbee8d", "filename": "tests/data/parser/inline/0011_unsafe_fn.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0011_unsafe_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0011_unsafe_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0011_unsafe_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -8,7 +8,8 @@ FILE@[0; 19)\n       IDENT@[10; 13) \"foo\"\n     L_PAREN@[13; 14)\n     R_PAREN@[14; 15)\n-    WHITESPACE@[15; 16)\n-    L_CURLY@[16; 17)\n-    R_CURLY@[17; 18)\n-    WHITESPACE@[18; 19)\n+    BLOCK@[15; 19)\n+      WHITESPACE@[15; 16)\n+      L_CURLY@[16; 17)\n+      R_CURLY@[17; 18)\n+      WHITESPACE@[18; 19)"}, {"sha": "b4c602380d2f63b0adbd01c240fdd6d3b42bfc8c", "filename": "tests/data/parser/inline/0012_unsafe_extern_fn.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0012_unsafe_extern_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0012_unsafe_extern_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0012_unsafe_extern_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -13,7 +13,8 @@ FILE@[0; 30)\n       IDENT@[21; 24) \"foo\"\n     L_PAREN@[24; 25)\n     R_PAREN@[25; 26)\n-    WHITESPACE@[26; 27)\n-    L_CURLY@[27; 28)\n-    R_CURLY@[28; 29)\n-    WHITESPACE@[29; 30)\n+    BLOCK@[26; 30)\n+      WHITESPACE@[26; 27)\n+      L_CURLY@[27; 28)\n+      R_CURLY@[28; 29)\n+      WHITESPACE@[29; 30)"}, {"sha": "5ddc1736c70eba238a5a971de34a36699a7e4f97", "filename": "tests/data/parser/inline/0013_unsafe_block_in_mod.txt", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0013_unsafe_block_in_mod.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0013_unsafe_block_in_mod.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0013_unsafe_block_in_mod.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -6,9 +6,10 @@ FILE@[0; 33)\n       IDENT@[3; 6) \"foo\"\n     L_PAREN@[6; 7)\n     R_PAREN@[7; 8)\n-    L_CURLY@[8; 9)\n-    R_CURLY@[9; 10)\n-    WHITESPACE@[10; 11)\n+    BLOCK@[8; 11)\n+      L_CURLY@[8; 9)\n+      R_CURLY@[9; 10)\n+      WHITESPACE@[10; 11)\n   UNSAFE_KW@[11; 17)\n   ERROR@[17; 22)\n   err: `expected `trait`, `impl` or `fn``\n@@ -24,6 +25,7 @@ FILE@[0; 33)\n       IDENT@[25; 28) \"bar\"\n     L_PAREN@[28; 29)\n     R_PAREN@[29; 30)\n-    L_CURLY@[30; 31)\n-    R_CURLY@[31; 32)\n-    WHITESPACE@[32; 33)\n+    BLOCK@[30; 33)\n+      L_CURLY@[30; 31)\n+      R_CURLY@[31; 32)\n+      WHITESPACE@[32; 33)"}, {"sha": "9d55bedbba7477b4287ac8433e12f2067c95ef9c", "filename": "tests/data/parser/inline/0033_fn_value_parameters.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,4 @@\n+fn a() {}\n+fn b(x: i32) {}\n+fn c(x: i32, ) {}\n+fn d(x: i32, y: ()) {}"}, {"sha": "b0a5ff6b4af698a4c111be4dc10fa46d355a6be3", "filename": "tests/data/parser/inline/0033_fn_value_parameters.txt", "status": "added", "additions": 95, "deletions": 0, "changes": 95, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0033_fn_value_parameters.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,95 @@\n+FILE@[0; 67)\n+  FN_ITEM@[0; 10)\n+    FN_KW@[0; 2)\n+    NAME@[2; 4)\n+      WHITESPACE@[2; 3)\n+      IDENT@[3; 4) \"a\"\n+    L_PAREN@[4; 5)\n+    R_PAREN@[5; 6)\n+    BLOCK@[6; 10)\n+      WHITESPACE@[6; 7)\n+      L_CURLY@[7; 8)\n+      R_CURLY@[8; 9)\n+      WHITESPACE@[9; 10)\n+  FN_ITEM@[10; 26)\n+    FN_KW@[10; 12)\n+    NAME@[12; 14)\n+      WHITESPACE@[12; 13)\n+      IDENT@[13; 14) \"b\"\n+    L_PAREN@[14; 15)\n+    VALUE_PARAMETER@[15; 21)\n+      BIND_PAT@[15; 16)\n+        NAME@[15; 16)\n+          IDENT@[15; 16) \"x\"\n+      COLON@[16; 17)\n+      PATH_TYPE@[17; 21)\n+        PATH@[17; 21)\n+          PATH_SEGMENT@[17; 21)\n+            NAME_REF@[17; 21)\n+              WHITESPACE@[17; 18)\n+              IDENT@[18; 21) \"i32\"\n+    R_PAREN@[21; 22)\n+    BLOCK@[22; 26)\n+      WHITESPACE@[22; 23)\n+      L_CURLY@[23; 24)\n+      R_CURLY@[24; 25)\n+      WHITESPACE@[25; 26)\n+  FN_ITEM@[26; 44)\n+    FN_KW@[26; 28)\n+    NAME@[28; 30)\n+      WHITESPACE@[28; 29)\n+      IDENT@[29; 30) \"c\"\n+    L_PAREN@[30; 31)\n+    VALUE_PARAMETER@[31; 37)\n+      BIND_PAT@[31; 32)\n+        NAME@[31; 32)\n+          IDENT@[31; 32) \"x\"\n+      COLON@[32; 33)\n+      PATH_TYPE@[33; 37)\n+        PATH@[33; 37)\n+          PATH_SEGMENT@[33; 37)\n+            NAME_REF@[33; 37)\n+              WHITESPACE@[33; 34)\n+              IDENT@[34; 37) \"i32\"\n+    COMMA@[37; 38)\n+    WHITESPACE@[38; 39)\n+    R_PAREN@[39; 40)\n+    BLOCK@[40; 44)\n+      WHITESPACE@[40; 41)\n+      L_CURLY@[41; 42)\n+      R_CURLY@[42; 43)\n+      WHITESPACE@[43; 44)\n+  FN_ITEM@[44; 67)\n+    FN_KW@[44; 46)\n+    NAME@[46; 48)\n+      WHITESPACE@[46; 47)\n+      IDENT@[47; 48) \"d\"\n+    L_PAREN@[48; 49)\n+    VALUE_PARAMETER@[49; 55)\n+      BIND_PAT@[49; 50)\n+        NAME@[49; 50)\n+          IDENT@[49; 50) \"x\"\n+      COLON@[50; 51)\n+      PATH_TYPE@[51; 55)\n+        PATH@[51; 55)\n+          PATH_SEGMENT@[51; 55)\n+            NAME_REF@[51; 55)\n+              WHITESPACE@[51; 52)\n+              IDENT@[52; 55) \"i32\"\n+    COMMA@[55; 56)\n+    VALUE_PARAMETER@[56; 62)\n+      BIND_PAT@[56; 58)\n+        NAME@[56; 58)\n+          WHITESPACE@[56; 57)\n+          IDENT@[57; 58) \"y\"\n+      COLON@[58; 59)\n+      TUPLE_TYPE@[59; 62)\n+        WHITESPACE@[59; 60)\n+        L_PAREN@[60; 61)\n+        R_PAREN@[61; 62)\n+    R_PAREN@[62; 63)\n+    BLOCK@[63; 67)\n+      WHITESPACE@[63; 64)\n+      L_CURLY@[64; 65)\n+      R_CURLY@[65; 66)\n+      WHITESPACE@[66; 67)"}, {"sha": "604db24079bb2e9e754f95103fc4f26a9f743783", "filename": "tests/data/parser/inline/0034_bind_pat.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,6 @@\n+fn main() {\n+    let a = ();\n+    let ref b = ();\n+    let ref mut c = ();\n+    let d @ _ = ();\n+}"}, {"sha": "426e37e977922efb42b2dbfbf6bbbe500537ad04", "filename": "tests/data/parser/inline/0034_bind_pat.txt", "status": "added", "additions": 81, "deletions": 0, "changes": 81, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0034_bind_pat.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,81 @@\n+FILE@[0; 94)\n+  FN_ITEM@[0; 94)\n+    FN_KW@[0; 2)\n+    NAME@[2; 7)\n+      WHITESPACE@[2; 3)\n+      IDENT@[3; 7) \"main\"\n+    L_PAREN@[7; 8)\n+    R_PAREN@[8; 9)\n+    BLOCK@[9; 94)\n+      WHITESPACE@[9; 10)\n+      L_CURLY@[10; 11)\n+      LET_STMT@[11; 32)\n+        WHITESPACE@[11; 16)\n+        LET_KW@[16; 19)\n+        BIND_PAT@[19; 22)\n+          NAME@[19; 22)\n+            WHITESPACE@[19; 20)\n+            IDENT@[20; 21) \"a\"\n+            WHITESPACE@[21; 22)\n+        EQ@[22; 23)\n+        TUPLE_EXPR@[23; 26)\n+          WHITESPACE@[23; 24)\n+          L_PAREN@[24; 25)\n+          R_PAREN@[25; 26)\n+        SEMI@[26; 27)\n+        WHITESPACE@[27; 32)\n+      LET_STMT@[32; 52)\n+        LET_KW@[32; 35)\n+        BIND_PAT@[35; 42)\n+          WHITESPACE@[35; 36)\n+          REF_KW@[36; 39)\n+          NAME@[39; 42)\n+            WHITESPACE@[39; 40)\n+            IDENT@[40; 41) \"b\"\n+            WHITESPACE@[41; 42)\n+        EQ@[42; 43)\n+        TUPLE_EXPR@[43; 46)\n+          WHITESPACE@[43; 44)\n+          L_PAREN@[44; 45)\n+          R_PAREN@[45; 46)\n+        SEMI@[46; 47)\n+        WHITESPACE@[47; 52)\n+      LET_STMT@[52; 76)\n+        LET_KW@[52; 55)\n+        BIND_PAT@[55; 66)\n+          WHITESPACE@[55; 56)\n+          REF_KW@[56; 59)\n+          WHITESPACE@[59; 60)\n+          MUT_KW@[60; 63)\n+          NAME@[63; 66)\n+            WHITESPACE@[63; 64)\n+            IDENT@[64; 65) \"c\"\n+            WHITESPACE@[65; 66)\n+        EQ@[66; 67)\n+        TUPLE_EXPR@[67; 70)\n+          WHITESPACE@[67; 68)\n+          L_PAREN@[68; 69)\n+          R_PAREN@[69; 70)\n+        SEMI@[70; 71)\n+        WHITESPACE@[71; 76)\n+      LET_STMT@[76; 92)\n+        LET_KW@[76; 79)\n+        BIND_PAT@[79; 86)\n+          NAME@[79; 82)\n+            WHITESPACE@[79; 80)\n+            IDENT@[80; 81) \"d\"\n+            WHITESPACE@[81; 82)\n+          AT@[82; 83)\n+          PLACEHOLDER_PAT@[83; 86)\n+            WHITESPACE@[83; 84)\n+            UNDERSCORE@[84; 85)\n+            WHITESPACE@[85; 86)\n+        EQ@[86; 87)\n+        TUPLE_EXPR@[87; 90)\n+          WHITESPACE@[87; 88)\n+          L_PAREN@[88; 89)\n+          R_PAREN@[89; 90)\n+        SEMI@[90; 91)\n+        WHITESPACE@[91; 92)\n+      R_CURLY@[92; 93)\n+      WHITESPACE@[93; 94)"}, {"sha": "de41f5cae0f3e395086046a04b51cba09ecc0931", "filename": "tests/data/parser/inline/0035_ref_pat.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,4 @@\n+fn main() {\n+    let &a = ();\n+    let &mut b = ();\n+}"}, {"sha": "57623f31ccbf0ec1f865d272e22f2cd5b100af6f", "filename": "tests/data/parser/inline/0035_ref_pat.txt", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0035_ref_pat.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,48 @@\n+FILE@[0; 52)\n+  FN_ITEM@[0; 52)\n+    FN_KW@[0; 2)\n+    NAME@[2; 7)\n+      WHITESPACE@[2; 3)\n+      IDENT@[3; 7) \"main\"\n+    L_PAREN@[7; 8)\n+    R_PAREN@[8; 9)\n+    BLOCK@[9; 52)\n+      WHITESPACE@[9; 10)\n+      L_CURLY@[10; 11)\n+      LET_STMT@[11; 33)\n+        WHITESPACE@[11; 16)\n+        LET_KW@[16; 19)\n+        REF_PAT@[19; 23)\n+          WHITESPACE@[19; 20)\n+          AMPERSAND@[20; 21)\n+          BIND_PAT@[21; 23)\n+            NAME@[21; 23)\n+              IDENT@[21; 22) \"a\"\n+              WHITESPACE@[22; 23)\n+        EQ@[23; 24)\n+        TUPLE_EXPR@[24; 27)\n+          WHITESPACE@[24; 25)\n+          L_PAREN@[25; 26)\n+          R_PAREN@[26; 27)\n+        SEMI@[27; 28)\n+        WHITESPACE@[28; 33)\n+      LET_STMT@[33; 50)\n+        LET_KW@[33; 36)\n+        REF_PAT@[36; 44)\n+          WHITESPACE@[36; 37)\n+          AMPERSAND@[37; 38)\n+          MUT_KW@[38; 41)\n+          BIND_PAT@[41; 44)\n+            NAME@[41; 44)\n+              WHITESPACE@[41; 42)\n+              IDENT@[42; 43) \"b\"\n+              WHITESPACE@[43; 44)\n+        EQ@[44; 45)\n+        TUPLE_EXPR@[45; 48)\n+          WHITESPACE@[45; 46)\n+          L_PAREN@[46; 47)\n+          R_PAREN@[47; 48)\n+        SEMI@[48; 49)\n+        WHITESPACE@[49; 50)\n+      R_CURLY@[50; 51)\n+      WHITESPACE@[51; 52)"}, {"sha": "4d719c4335bcdbdd07da8553ef4b348b347dd921", "filename": "tests/data/parser/inline/0036_placeholder_pat.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.rs?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1 @@\n+fn main() { let _ = (); }"}, {"sha": "06b84c2b579d5fbe5cc65b963d7da0a2c201fff0", "filename": "tests/data/parser/inline/0036_placeholder_pat.txt", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0036_placeholder_pat.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -0,0 +1,27 @@\n+FILE@[0; 26)\n+  FN_ITEM@[0; 26)\n+    FN_KW@[0; 2)\n+    NAME@[2; 7)\n+      WHITESPACE@[2; 3)\n+      IDENT@[3; 7) \"main\"\n+    L_PAREN@[7; 8)\n+    R_PAREN@[8; 9)\n+    BLOCK@[9; 26)\n+      WHITESPACE@[9; 10)\n+      L_CURLY@[10; 11)\n+      LET_STMT@[11; 24)\n+        WHITESPACE@[11; 12)\n+        LET_KW@[12; 15)\n+        PLACEHOLDER_PAT@[15; 18)\n+          WHITESPACE@[15; 16)\n+          UNDERSCORE@[16; 17)\n+          WHITESPACE@[17; 18)\n+        EQ@[18; 19)\n+        TUPLE_EXPR@[19; 22)\n+          WHITESPACE@[19; 20)\n+          L_PAREN@[20; 21)\n+          R_PAREN@[21; 22)\n+        SEMI@[22; 23)\n+        WHITESPACE@[23; 24)\n+      R_CURLY@[24; 25)\n+      WHITESPACE@[25; 26)"}, {"sha": "b9d049b797f815d33f16c4c963ae49f53dab6c74", "filename": "tests/data/parser/ok/0005_fn_item.txt", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0005_fn_item.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0005_fn_item.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0005_fn_item.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -6,8 +6,9 @@ FILE@[0; 13)\n       IDENT@[3; 6) \"foo\"\n     L_PAREN@[6; 7)\n     R_PAREN@[7; 8)\n-    WHITESPACE@[8; 9)\n-    L_CURLY@[9; 10)\n-    WHITESPACE@[10; 11)\n-    R_CURLY@[11; 12)\n-    WHITESPACE@[12; 13)\n+    BLOCK@[8; 13)\n+      WHITESPACE@[8; 9)\n+      L_CURLY@[9; 10)\n+      WHITESPACE@[10; 11)\n+      R_CURLY@[11; 12)\n+      WHITESPACE@[12; 13)"}, {"sha": "70ba5ac731fdce20af5d819d6db76bef547246e6", "filename": "tests/data/parser/ok/0008_mod_item.txt", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0008_mod_item.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0008_mod_item.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0008_mod_item.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -31,11 +31,12 @@ FILE@[0; 118)\n         IDENT@[34; 37) \"foo\"\n       L_PAREN@[37; 38)\n       R_PAREN@[38; 39)\n-      WHITESPACE@[39; 40)\n-      L_CURLY@[40; 41)\n-      WHITESPACE@[41; 46)\n-      R_CURLY@[46; 47)\n-      WHITESPACE@[47; 52)\n+      BLOCK@[39; 52)\n+        WHITESPACE@[39; 40)\n+        L_CURLY@[40; 41)\n+        WHITESPACE@[41; 46)\n+        R_CURLY@[46; 47)\n+        WHITESPACE@[47; 52)\n     STRUCT_ITEM@[52; 64)\n       STRUCT_KW@[52; 58)\n       NAME@[58; 61)"}, {"sha": "3f685ebe248cb0f349d0f99fe4f8b78a957de800", "filename": "tests/data/parser/ok/0011_outer_attribute.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0011_outer_attribute.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0011_outer_attribute.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0011_outer_attribute.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -24,7 +24,8 @@ FILE@[0; 35)\n       IDENT@[26; 29) \"foo\"\n     L_PAREN@[29; 30)\n     R_PAREN@[30; 31)\n-    WHITESPACE@[31; 32)\n-    L_CURLY@[32; 33)\n-    R_CURLY@[33; 34)\n-    WHITESPACE@[34; 35)\n+    BLOCK@[31; 35)\n+      WHITESPACE@[31; 32)\n+      L_CURLY@[32; 33)\n+      R_CURLY@[33; 34)\n+      WHITESPACE@[34; 35)"}, {"sha": "664582a30170c01c21962cf17564147e49893caa", "filename": "tests/data/parser/ok/0012_visibility.txt", "status": "modified", "additions": 25, "deletions": 20, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0012_visibility.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0012_visibility.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0012_visibility.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -6,10 +6,11 @@ FILE@[0; 98)\n       IDENT@[3; 4) \"a\"\n     L_PAREN@[4; 5)\n     R_PAREN@[5; 6)\n-    WHITESPACE@[6; 7)\n-    L_CURLY@[7; 8)\n-    R_CURLY@[8; 9)\n-    WHITESPACE@[9; 10)\n+    BLOCK@[6; 10)\n+      WHITESPACE@[6; 7)\n+      L_CURLY@[7; 8)\n+      R_CURLY@[8; 9)\n+      WHITESPACE@[9; 10)\n   FN_ITEM@[10; 24)\n     VISIBILITY@[10; 14)\n       PUB_KW@[10; 13)\n@@ -20,10 +21,11 @@ FILE@[0; 98)\n       IDENT@[17; 18) \"b\"\n     L_PAREN@[18; 19)\n     R_PAREN@[19; 20)\n-    WHITESPACE@[20; 21)\n-    L_CURLY@[21; 22)\n-    R_CURLY@[22; 23)\n-    WHITESPACE@[23; 24)\n+    BLOCK@[20; 24)\n+      WHITESPACE@[20; 21)\n+      L_CURLY@[21; 22)\n+      R_CURLY@[22; 23)\n+      WHITESPACE@[23; 24)\n   FN_ITEM@[24; 45)\n     VISIBILITY@[24; 35)\n       PUB_KW@[24; 27)\n@@ -37,10 +39,11 @@ FILE@[0; 98)\n       IDENT@[38; 39) \"c\"\n     L_PAREN@[39; 40)\n     R_PAREN@[40; 41)\n-    WHITESPACE@[41; 42)\n-    L_CURLY@[42; 43)\n-    R_CURLY@[43; 44)\n-    WHITESPACE@[44; 45)\n+    BLOCK@[41; 45)\n+      WHITESPACE@[41; 42)\n+      L_CURLY@[42; 43)\n+      R_CURLY@[43; 44)\n+      WHITESPACE@[44; 45)\n   FN_ITEM@[45; 66)\n     VISIBILITY@[45; 56)\n       PUB_KW@[45; 48)\n@@ -54,10 +57,11 @@ FILE@[0; 98)\n       IDENT@[59; 60) \"d\"\n     L_PAREN@[60; 61)\n     R_PAREN@[61; 62)\n-    WHITESPACE@[62; 63)\n-    L_CURLY@[63; 64)\n-    R_CURLY@[64; 65)\n-    WHITESPACE@[65; 66)\n+    BLOCK@[62; 66)\n+      WHITESPACE@[62; 63)\n+      L_CURLY@[63; 64)\n+      R_CURLY@[64; 65)\n+      WHITESPACE@[65; 66)\n   FN_ITEM@[66; 98)\n     VISIBILITY@[66; 88)\n       PUB_KW@[66; 69)\n@@ -86,7 +90,8 @@ FILE@[0; 98)\n       IDENT@[91; 92) \"e\"\n     L_PAREN@[92; 93)\n     R_PAREN@[93; 94)\n-    WHITESPACE@[94; 95)\n-    L_CURLY@[95; 96)\n-    R_CURLY@[96; 97)\n-    WHITESPACE@[97; 98)\n+    BLOCK@[94; 98)\n+      WHITESPACE@[94; 95)\n+      L_CURLY@[95; 96)\n+      R_CURLY@[96; 97)\n+      WHITESPACE@[97; 98)"}, {"sha": "792633eaece40741754cd8de8882f682eddfaa70", "filename": "tests/data/parser/ok/0017_attr_trailing_comma.txt", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0017_attr_trailing_comma.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0017_attr_trailing_comma.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0017_attr_trailing_comma.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -18,7 +18,8 @@ FILE@[0; 23)\n       IDENT@[14; 17) \"foo\"\n     L_PAREN@[17; 18)\n     R_PAREN@[18; 19)\n-    WHITESPACE@[19; 20)\n-    L_CURLY@[20; 21)\n-    R_CURLY@[21; 22)\n-    WHITESPACE@[22; 23)\n+    BLOCK@[19; 23)\n+      WHITESPACE@[19; 20)\n+      L_CURLY@[20; 21)\n+      R_CURLY@[21; 22)\n+      WHITESPACE@[22; 23)"}, {"sha": "b4456af84c998f294498199e4d676dd3cb28ca27", "filename": "tests/data/parser/ok/0021_extern_fn.txt", "status": "modified", "additions": 18, "deletions": 15, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0021_extern_fn.txt", "raw_url": "https://github.com/rust-lang/rust/raw/c6f4a06b4297f498da4bc2cd747aa38effb855b0/tests%2Fdata%2Fparser%2Fok%2F0021_extern_fn.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Fok%2F0021_extern_fn.txt?ref=c6f4a06b4297f498da4bc2cd747aa38effb855b0", "patch": "@@ -9,11 +9,12 @@ FILE@[0; 71)\n       IDENT@[10; 13) \"foo\"\n     L_PAREN@[13; 14)\n     R_PAREN@[14; 15)\n-    WHITESPACE@[15; 16)\n-    L_CURLY@[16; 17)\n-    WHITESPACE@[17; 18)\n-    R_CURLY@[18; 19)\n-    WHITESPACE@[19; 21)\n+    BLOCK@[15; 21)\n+      WHITESPACE@[15; 16)\n+      L_CURLY@[16; 17)\n+      WHITESPACE@[17; 18)\n+      R_CURLY@[18; 19)\n+      WHITESPACE@[19; 21)\n   FN_ITEM@[21; 46)\n     ABI@[21; 32)\n       EXTERN_KW@[21; 27)\n@@ -26,11 +27,12 @@ FILE@[0; 71)\n       IDENT@[35; 38) \"bar\"\n     L_PAREN@[38; 39)\n     R_PAREN@[39; 40)\n-    WHITESPACE@[40; 41)\n-    L_CURLY@[41; 42)\n-    WHITESPACE@[42; 43)\n-    R_CURLY@[43; 44)\n-    WHITESPACE@[44; 46)\n+    BLOCK@[40; 46)\n+      WHITESPACE@[40; 41)\n+      L_CURLY@[41; 42)\n+      WHITESPACE@[42; 43)\n+      R_CURLY@[43; 44)\n+      WHITESPACE@[44; 46)\n   FN_ITEM@[46; 71)\n     ABI@[46; 58)\n       EXTERN_KW@[46; 52)\n@@ -43,8 +45,9 @@ FILE@[0; 71)\n       IDENT@[61; 64) \"baz\"\n     L_PAREN@[64; 65)\n     R_PAREN@[65; 66)\n-    WHITESPACE@[66; 67)\n-    L_CURLY@[67; 68)\n-    WHITESPACE@[68; 69)\n-    R_CURLY@[69; 70)\n-    WHITESPACE@[70; 71)\n+    BLOCK@[66; 71)\n+      WHITESPACE@[66; 67)\n+      L_CURLY@[67; 68)\n+      WHITESPACE@[68; 69)\n+      R_CURLY@[69; 70)\n+      WHITESPACE@[70; 71)"}]}