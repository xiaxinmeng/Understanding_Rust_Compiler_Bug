{"sha": "5b2d52c8df5235fce9d2ae78adc3182a9659b268", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMmQ1MmM4ZGY1MjM1ZmNlOWQyYWU3OGFkYzMxODJhOTY1OWIyNjg=", "commit": {"author": {"name": "Paulo Lieuthier", "email": "paulolieuthier@gmail.com", "date": "2019-10-19T11:19:06Z"}, "committer": {"name": "Paulo Lieuthier", "email": "paulolieuthier@gmail.com", "date": "2019-11-28T20:36:40Z"}, "message": "docs: describe new feature 'add custom impl for derived trait'", "tree": {"sha": "fb791abbbd5ad7505282113939b48d9a88f9d6e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb791abbbd5ad7505282113939b48d9a88f9d6e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b2d52c8df5235fce9d2ae78adc3182a9659b268", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b2d52c8df5235fce9d2ae78adc3182a9659b268", "html_url": "https://github.com/rust-lang/rust/commit/5b2d52c8df5235fce9d2ae78adc3182a9659b268", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b2d52c8df5235fce9d2ae78adc3182a9659b268/comments", "author": {"login": "paulolieuthier", "id": 1238157, "node_id": "MDQ6VXNlcjEyMzgxNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1238157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulolieuthier", "html_url": "https://github.com/paulolieuthier", "followers_url": "https://api.github.com/users/paulolieuthier/followers", "following_url": "https://api.github.com/users/paulolieuthier/following{/other_user}", "gists_url": "https://api.github.com/users/paulolieuthier/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulolieuthier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulolieuthier/subscriptions", "organizations_url": "https://api.github.com/users/paulolieuthier/orgs", "repos_url": "https://api.github.com/users/paulolieuthier/repos", "events_url": "https://api.github.com/users/paulolieuthier/events{/privacy}", "received_events_url": "https://api.github.com/users/paulolieuthier/received_events", "type": "User", "site_admin": false}, "committer": {"login": "paulolieuthier", "id": 1238157, "node_id": "MDQ6VXNlcjEyMzgxNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1238157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulolieuthier", "html_url": "https://github.com/paulolieuthier", "followers_url": "https://api.github.com/users/paulolieuthier/followers", "following_url": "https://api.github.com/users/paulolieuthier/following{/other_user}", "gists_url": "https://api.github.com/users/paulolieuthier/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulolieuthier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulolieuthier/subscriptions", "organizations_url": "https://api.github.com/users/paulolieuthier/orgs", "repos_url": "https://api.github.com/users/paulolieuthier/repos", "events_url": "https://api.github.com/users/paulolieuthier/events{/privacy}", "received_events_url": "https://api.github.com/users/paulolieuthier/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "439080f0274cf4def3f393f466ceb05c8cb8bcd2", "url": "https://api.github.com/repos/rust-lang/rust/commits/439080f0274cf4def3f393f466ceb05c8cb8bcd2", "html_url": "https://github.com/rust-lang/rust/commit/439080f0274cf4def3f393f466ceb05c8cb8bcd2"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "037306fd67d237e7a90385c6b967599694b92b5c", "filename": "crates/ra_assists/src/assists/add_custom_impl.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/5b2d52c8df5235fce9d2ae78adc3182a9659b268/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_custom_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b2d52c8df5235fce9d2ae78adc3182a9659b268/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_custom_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_custom_impl.rs?ref=5b2d52c8df5235fce9d2ae78adc3182a9659b268", "patch": "@@ -12,6 +12,23 @@ use ra_syntax::{\n \n const DERIVE_TRAIT: &'static str = \"derive\";\n \n+// Assist: add_custom_impl\n+//\n+// Adds impl block for derived trait.\n+//\n+// ```\n+// #[derive(Deb<|>ug, Display)]\n+// struct S;\n+// ```\n+// ->\n+// ```\n+// #[derive(Display)]\n+// struct S;\n+//\n+// impl Debug for S {\n+//\n+// }\n+// ```\n pub(crate) fn add_custom_impl(ctx: AssistCtx<impl HirDatabase>) -> Option<Assist> {\n     let input = ctx.find_node_at_offset::<ast::AttrInput>()?;\n     let attr = input.syntax().parent().and_then(ast::Attr::cast)?;"}, {"sha": "4586eeb5923fe5a9cc39b714da98d5220934d895", "filename": "crates/ra_assists/src/doc_tests/generated.rs", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5b2d52c8df5235fce9d2ae78adc3182a9659b268/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b2d52c8df5235fce9d2ae78adc3182a9659b268/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs?ref=5b2d52c8df5235fce9d2ae78adc3182a9659b268", "patch": "@@ -2,6 +2,25 @@\n \n use super::check;\n \n+#[test]\n+fn doctest_add_custom_impl() {\n+    check(\n+        \"add_custom_impl\",\n+        r#####\"\n+#[derive(Deb<|>ug, Display)]\n+struct S;\n+\"#####,\n+        r#####\"\n+#[derive(Display)]\n+struct S;\n+\n+impl Debug for S {\n+\n+}\n+\"#####,\n+    )\n+}\n+\n #[test]\n fn doctest_add_derive() {\n     check("}, {"sha": "334ba450f5a17e3feda99287683cbd5052ac1c4a", "filename": "docs/user/assists.md", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/5b2d52c8df5235fce9d2ae78adc3182a9659b268/docs%2Fuser%2Fassists.md", "raw_url": "https://github.com/rust-lang/rust/raw/5b2d52c8df5235fce9d2ae78adc3182a9659b268/docs%2Fuser%2Fassists.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fassists.md?ref=5b2d52c8df5235fce9d2ae78adc3182a9659b268", "patch": "@@ -3,6 +3,24 @@\n Cursor position or selection is signified by `\u2503` character.\n \n \n+## `add_custom_impl`\n+\n+Adds impl block for derived trait.\n+\n+```rust\n+// BEFORE\n+#[derive(Deb\u2503ug, Display)]\n+struct S;\n+\n+// AFTER\n+#[derive(Display)]\n+struct S;\n+\n+impl Debug for S {\n+\n+}\n+```\n+\n ## `add_derive`\n \n Adds a new `#[derive()]` clause to a struct or enum."}]}