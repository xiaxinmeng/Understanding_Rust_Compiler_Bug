{"sha": "e7507d67202741ca01f3b2326e7c27564fd3e1b5", "node_id": "C_kwDOAAsO6NoAKGU3NTA3ZDY3MjAyNzQxY2EwMWYzYjIzMjZlN2MyNzU2NGZkM2UxYjU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-13T16:08:54Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-06-13T16:08:54Z"}, "message": "Auto merge of #2207 - RalfJung:ui_test_parallelism, r=oli-obk\n\nui_test: ensure all worker threads stay around\n\nAlso organize files such that the by far slowest test (weak_memory/consistency) always starts first. It still finishes last on my system... even after I halved the iteration count.\n\nFixes https://github.com/rust-lang/miri/issues/2204", "tree": {"sha": "d0aab93cdc15efbfa359a48da6fc2aa8b5862696", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0aab93cdc15efbfa359a48da6fc2aa8b5862696"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e7507d67202741ca01f3b2326e7c27564fd3e1b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e7507d67202741ca01f3b2326e7c27564fd3e1b5", "html_url": "https://github.com/rust-lang/rust/commit/e7507d67202741ca01f3b2326e7c27564fd3e1b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e7507d67202741ca01f3b2326e7c27564fd3e1b5/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c1f50bf2bef7b25613a4c42322de87ffcf8c922", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c1f50bf2bef7b25613a4c42322de87ffcf8c922", "html_url": "https://github.com/rust-lang/rust/commit/4c1f50bf2bef7b25613a4c42322de87ffcf8c922"}, {"sha": "c16c45362ccb854ab9438a5db5ad6152dc7fd519", "url": "https://api.github.com/repos/rust-lang/rust/commits/c16c45362ccb854ab9438a5db5ad6152dc7fd519", "html_url": "https://github.com/rust-lang/rust/commit/c16c45362ccb854ab9438a5db5ad6152dc7fd519"}], "stats": {"total": 53, "additions": 36, "deletions": 17}, "files": [{"sha": "fc9dce0c986ab86c6b2d6b7440b6c0b440b02e09", "filename": "tests/pass/0weak_memory_consistency.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2F0weak_memory_consistency.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2F0weak_memory_consistency.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2F0weak_memory_consistency.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "patch": "@@ -214,7 +214,7 @@ fn test_single_thread() {\n }\n \n pub fn main() {\n-    for _ in 0..100 {\n+    for _ in 0..50 {\n         test_single_thread();\n         test_mixed_access();\n         test_load_buffering_acq_rel();", "previous_filename": "tests/pass/weak_memory/consistency.rs"}, {"sha": "62702c088dd6767c1f55a1eda96b472add61751c", "filename": "tests/pass/backtrace/backtrace-api-v0.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v0.rs"}, {"sha": "ee556b3e4a05ab5b3df6d769148c3be79fb7554d", "filename": "tests/pass/backtrace/backtrace-api-v0.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stderr?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v0.stderr"}, {"sha": "9de1d034bb73b64081eca01feeb9c8fd0bf67d23", "filename": "tests/pass/backtrace/backtrace-api-v0.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v0.stdout?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v0.stdout"}, {"sha": "6d4a29c954e9e62feedb057f6130ae536fbfdea4", "filename": "tests/pass/backtrace/backtrace-api-v1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v1.rs"}, {"sha": "7dc281af31ddc5fccc1009311eb06a1ee80a85b9", "filename": "tests/pass/backtrace/backtrace-api-v1.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stderr?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v1.stderr"}, {"sha": "b820a1be0a1996a1119e5c1d5d767e82fe9f47c1", "filename": "tests/pass/backtrace/backtrace-api-v1.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-api-v1.stdout?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-api-v1.stdout"}, {"sha": "8c51bf62706e29ab2583499b9e64a8985c20a6fa", "filename": "tests/pass/backtrace/backtrace-global-alloc.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-global-alloc.rs"}, {"sha": "c48061d64d0887044e323da18d26800eef500c46", "filename": "tests/pass/backtrace/backtrace-global-alloc.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-global-alloc.stderr?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-global-alloc.stderr"}, {"sha": "64b7e7293b194e506750e19fee30c7e242a29e2f", "filename": "tests/pass/backtrace/backtrace-std.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-std.rs"}, {"sha": "4596cadb958d8737aff9b8681756360fcecfd84e", "filename": "tests/pass/backtrace/backtrace-std.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fbacktrace%2Fbacktrace-std.stderr?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/backtrace-std.stderr"}, {"sha": "c85590bb8b4bdf79d6bab4913ea0b1dcef38ad53", "filename": "tests/pass/issues/issue-15063.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15063.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15063.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-15063.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-15063.rs"}, {"sha": "2008e6e157db8ae34cee3b5e54b60daee9679b3e", "filename": "tests/pass/issues/issue-15080.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15080.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15080.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-15080.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-15080.rs"}, {"sha": "75fd8d8dfce8f9b8f686f8dc15a0ea57e3bba485", "filename": "tests/pass/issues/issue-15523-big.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15523-big.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-15523-big.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-15523-big.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-15523-big.rs"}, {"sha": "fa24ab9f4aae8a66616f2412f98144c096e53ca8", "filename": "tests/pass/issues/issue-17877.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-17877.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-17877.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-17877.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-17877.rs"}, {"sha": "19049b9add5c1c399a13c599c9b2a9a079679bb6", "filename": "tests/pass/issues/issue-20575.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-20575.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-20575.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-20575.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-20575.rs"}, {"sha": "f3c2f58ddbca12048d3f93015bf5819e76c5d2b8", "filename": "tests/pass/issues/issue-23261.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-23261.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-23261.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-23261.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-23261.rs"}, {"sha": "78f30e78db7661de224424fda8cf2a36ecb69f5c", "filename": "tests/pass/issues/issue-26709.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-26709.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-26709.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-26709.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-26709.rs"}, {"sha": "b0822accb6b6b48ef3afedf04c63226440e7b050", "filename": "tests/pass/issues/issue-27901.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-27901.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-27901.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-27901.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-27901.rs"}, {"sha": "d04703d6877c84f769f772110fff4c244ab0da51", "filename": "tests/pass/issues/issue-29746.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-29746.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-29746.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-29746.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-29746.rs"}, {"sha": "86c2d9184e0166abf30bbb7524a2ebdd7341593e", "filename": "tests/pass/issues/issue-30530.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-30530.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-30530.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-30530.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-30530.rs"}, {"sha": "f6d7209369b7078d0800f61910c35f4fac3dd385", "filename": "tests/pass/issues/issue-31267-additional.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-31267-additional.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-31267-additional.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-31267-additional.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-31267-additional.rs"}, {"sha": "36b58c642d7d53fd5b960505304eabc8b34a2bac", "filename": "tests/pass/issues/issue-33387.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-33387.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-33387.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-33387.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-33387.rs"}, {"sha": "28fe076b644d4c4dabd07d5ca7ea37954b90948b", "filename": "tests/pass/issues/issue-34571.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-34571.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-34571.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-34571.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-34571.rs"}, {"sha": "62b3220967eddd927ec48307f85fcca08c6bf5bc", "filename": "tests/pass/issues/issue-35815.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-35815.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-35815.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-35815.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-35815.rs"}, {"sha": "cbffbbc0e0f86d68016ea27a8cc187024b897daf", "filename": "tests/pass/issues/issue-36278-prefix-nesting.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-36278-prefix-nesting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-36278-prefix-nesting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-36278-prefix-nesting.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-36278-prefix-nesting.rs"}, {"sha": "5b5b22b54948d43d8f00e254472f1393affb5bc5", "filename": "tests/pass/issues/issue-3794.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-3794.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-3794.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-3794.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-3794.rs"}, {"sha": "e4afe6fa55f15d1365fed3357bd886e509688029", "filename": "tests/pass/issues/issue-3794.stdout", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-3794.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-3794.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-3794.stdout?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-3794.stdout"}, {"sha": "0c858d3444fb369a691d8410573f264351b27c92", "filename": "tests/pass/issues/issue-53728.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-53728.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-53728.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-53728.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-53728.rs"}, {"sha": "eb506dd3a17ebd6c4cfda98e4d1a9569767a5ac1", "filename": "tests/pass/issues/issue-5917.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-5917.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-5917.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-5917.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-5917.rs"}, {"sha": "df13787aad69820c43666b14328efb0dcc86b5db", "filename": "tests/pass/issues/issue-73223.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-73223.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-73223.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-73223.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-73223.rs"}, {"sha": "21000bb68d2bc934157c45f47dcdddc98ac2dd42", "filename": "tests/pass/issues/issue-91636.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-91636.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-91636.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-91636.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-91636.rs"}, {"sha": "1336348efb17a0563062676ec0f56b601440261d", "filename": "tests/pass/issues/issue-94371.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-94371.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-94371.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-94371.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-94371.rs"}, {"sha": "8bacaca9c2ac24d5408fbf58d0b27947d31e5a9d", "filename": "tests/pass/issues/issue-miri-1075.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-1075.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-1075.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-1075.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-1075.rs"}, {"sha": "406b5e102c8b4b87d74880c37db927a6a909979c", "filename": "tests/pass/issues/issue-miri-133.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-133.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-133.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-133.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-133.rs"}, {"sha": "39c841403ef0c8f94f99e0af76a8ddd80312201b", "filename": "tests/pass/issues/issue-miri-184.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-184.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-184.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-184.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-184.rs"}, {"sha": "262889f56eaee4abff5b3f207f6083baffefa3c0", "filename": "tests/pass/issues/issue-miri-1925.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-1925.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-1925.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-1925.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-1925.rs"}, {"sha": "45b2004e33538d51c374a1529bf8c40f22be6f61", "filename": "tests/pass/issues/issue-miri-2068-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-2068-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-2068-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-2068-2.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-2068-2.rs"}, {"sha": "7576ba78f607dd5ecff38d752b0619cefebe3e95", "filename": "tests/pass/issues/issue-miri-2068.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-2068.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/tests%2Fpass%2Fissues%2Fissue-miri-2068.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fpass%2Fissues%2Fissue-miri-2068.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "previous_filename": "tests/pass/issue-miri-2068.rs"}, {"sha": "07a0a67b9143f241066726dcbcc5c82f32e2ed6f", "filename": "ui_test/README.md", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/ui_test%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/ui_test%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2FREADME.md?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "patch": "@@ -1,5 +1,10 @@\n A smaller version of compiletest-rs\n \n+## Magic behavior\n+\n+* Tests are run in order of their filenames (files first, then recursing into folders).\n+  So if you have any slow tests, prepend them with a small integral number to make them get run first, taking advantage of parallelism as much as possible (instead of waiting for the slow tests at the end).\n+\n ## Supported magic comment annotations\n \n Note that the space after `//`, when it is present, is *not* optional -- it must be exactly one."}, {"sha": "d6938b19bfe490c37ade5c9258475078f288615e", "filename": "ui_test/src/lib.rs", "status": "modified", "additions": 30, "deletions": 16, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/e7507d67202741ca01f3b2326e7c27564fd3e1b5/ui_test%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7507d67202741ca01f3b2326e7c27564fd3e1b5/ui_test%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Flib.rs?ref=e7507d67202741ca01f3b2326e7c27564fd3e1b5", "patch": "@@ -1,3 +1,4 @@\n+use std::collections::VecDeque;\n use std::fmt::Write;\n use std::path::{Path, PathBuf};\n use std::process::{Command, ExitStatus};\n@@ -6,7 +7,6 @@ use std::sync::Mutex;\n \n use colored::*;\n use comments::ErrorMatch;\n-use crossbeam::queue::SegQueue;\n use regex::Regex;\n use rustc_stderr::{Level, Message};\n \n@@ -55,9 +55,8 @@ pub fn run_tests(config: Config) {\n     // Get the triple with which to run the tests\n     let target = config.target.clone().unwrap_or_else(|| config.get_host());\n \n-    // A queue for files or folders to process\n-    let todo = SegQueue::new();\n-    todo.push(config.root_dir.clone());\n+    // A channel for files to process\n+    let (submit, receive) = crossbeam::channel::unbounded();\n \n     // Some statistics and failure reports.\n     let failures = Mutex::new(vec![]);\n@@ -66,20 +65,35 @@ pub fn run_tests(config: Config) {\n     let filtered = AtomicUsize::default();\n \n     crossbeam::scope(|s| {\n+        // Create a thread that is in charge of walking the directory and submitting jobs.\n+        // It closes the channel when it is done.\n+        s.spawn(|_| {\n+            let mut todo = VecDeque::new();\n+            todo.push_back(config.root_dir.clone());\n+            while let Some(path) = todo.pop_front() {\n+                if path.is_dir() {\n+                    // Enqueue everything inside this directory.\n+                    // We want it sorted, to have some control over scheduling of slow tests.\n+                    let mut entries =\n+                        std::fs::read_dir(path).unwrap().collect::<Result<Vec<_>, _>>().unwrap();\n+                    entries.sort_by_key(|e| e.file_name());\n+                    for entry in entries {\n+                        todo.push_back(entry.path());\n+                    }\n+                } else if path.extension().map(|ext| ext == \"rs\").unwrap_or(false) {\n+                    // Forward .rs files to the test workers.\n+                    submit.send(path).unwrap();\n+                }\n+            }\n+            // There will be no more jobs. This signals the workers to quit.\n+            // (This also ensures `submit` is moved into this closure.)\n+            drop(submit);\n+        });\n+\n+        // Create N worker threads that receive files to test.\n         for _ in 0..std::thread::available_parallelism().unwrap().get() {\n             s.spawn(|_| {\n-                while let Some(path) = todo.pop() {\n-                    // Collect everything inside directories\n-                    if path.is_dir() {\n-                        for entry in std::fs::read_dir(path).unwrap() {\n-                            todo.push(entry.unwrap().path());\n-                        }\n-                        continue;\n-                    }\n-                    // Only look at .rs files\n-                    if !path.extension().map(|ext| ext == \"rs\").unwrap_or(false) {\n-                        continue;\n-                    }\n+                for path in &receive {\n                     if !config.path_filter.is_empty() {\n                         let path_display = path.display().to_string();\n                         if !config.path_filter.iter().any(|filter| path_display.contains(filter)) {"}]}