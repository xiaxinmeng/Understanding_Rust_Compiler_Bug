{"sha": "781ef3e99582fee003264087b0eea106a8c7518f", "node_id": "C_kwDOAAsO6NoAKDc4MWVmM2U5OTU4MmZlZTAwMzI2NDA4N2IwZWVhMTA2YThjNzUxOGY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-10T23:13:23Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-10T23:13:23Z"}, "message": "Auto merge of #101613 - GuillaumeGomez:codeblock-tooltip, r=notriddle\n\nSimplify codeblock and their associated tooltip\n\nIt is based on https://github.com/rust-lang/rust/pull/101600 so it needs to wait for this one to be merged first.\n\nThis PR does two things:\n\n * Remove CSS class duplication by setting CSS classes such as `compile_fail` directly on the `div` wrapping both the codeblock and the tooltip.\n * Simplify DOM: no need to wrap the tooltip into a `<div>`, it can work just as well without it.\n\nYou can test it [here](https://rustdoc.crud.net/imperio/codeblock-tooltip/std/string/struct.String.html#deref).\n\nr? `@notriddle`", "tree": {"sha": "7fd1ca079c6612b149c997a8703871addbd5f7b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7fd1ca079c6612b149c997a8703871addbd5f7b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/781ef3e99582fee003264087b0eea106a8c7518f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/781ef3e99582fee003264087b0eea106a8c7518f", "html_url": "https://github.com/rust-lang/rust/commit/781ef3e99582fee003264087b0eea106a8c7518f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/781ef3e99582fee003264087b0eea106a8c7518f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2287107588d92889d282e6cd3c1ca5df34cd34a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/2287107588d92889d282e6cd3c1ca5df34cd34a5", "html_url": "https://github.com/rust-lang/rust/commit/2287107588d92889d282e6cd3c1ca5df34cd34a5"}, {"sha": "8ba06d4b91b4193a31b9edf7d38bf6f743f1d779", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ba06d4b91b4193a31b9edf7d38bf6f743f1d779", "html_url": "https://github.com/rust-lang/rust/commit/8ba06d4b91b4193a31b9edf7d38bf6f743f1d779"}], "stats": {"total": 275, "additions": 139, "deletions": 136}, "files": [{"sha": "1e6cab8fcd3b704ca6d3ab80d1d20e8f8937ba14", "filename": "src/librustdoc/html/highlight.rs", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -78,21 +78,22 @@ pub(crate) fn render_source_with_highlighting(\n }\n \n fn write_header(out: &mut Buffer, class: &str, extra_content: Option<Buffer>, tooltip: Tooltip) {\n-    write!(out, \"<div class=\\\"example-wrap\\\">\");\n-\n-    let tooltip_class = match tooltip {\n-        Tooltip::Ignore => \" ignore\",\n-        Tooltip::CompileFail => \" compile_fail\",\n-        Tooltip::ShouldPanic => \" should_panic\",\n-        Tooltip::Edition(_) => \" edition\",\n-        Tooltip::None => \"\",\n-    };\n+    write!(\n+        out,\n+        \"<div class=\\\"example-wrap{}\\\">\",\n+        match tooltip {\n+            Tooltip::Ignore => \" ignore\",\n+            Tooltip::CompileFail => \" compile_fail\",\n+            Tooltip::ShouldPanic => \" should_panic\",\n+            Tooltip::Edition(_) => \" edition\",\n+            Tooltip::None => \"\",\n+        },\n+    );\n \n     if tooltip != Tooltip::None {\n         write!(\n             out,\n-            \"<div class='information'><div class='tooltip{}'{}>\u24d8</div></div>\",\n-            tooltip_class,\n+            \"<div class='tooltip'{}>\u24d8</div>\",\n             if let Tooltip::Edition(edition_info) = tooltip {\n                 format!(\" data-edition=\\\"{}\\\"\", edition_info)\n             } else {\n@@ -104,10 +105,10 @@ fn write_header(out: &mut Buffer, class: &str, extra_content: Option<Buffer>, to\n     if let Some(extra) = extra_content {\n         out.push_buffer(extra);\n     }\n-    if class.is_empty() && tooltip_class.is_empty() {\n+    if class.is_empty() {\n         write!(out, \"<pre class=\\\"rust\\\">\");\n     } else {\n-        write!(out, \"<pre class=\\\"rust {class}{tooltip_class}\\\">\");\n+        write!(out, \"<pre class=\\\"rust {class}\\\">\");\n     }\n     write!(out, \"<code>\");\n }"}, {"sha": "31fced21ce8333404edc5ac25b01ccc59ff6d1b4", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 72, "deletions": 70, "changes": 142, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -1151,42 +1151,100 @@ pre.rust .question-mark {\n \tfont-weight: bold;\n }\n \n-pre.compile_fail,\n-pre.should_panic {\n+.example-wrap.compile_fail,\n+.example-wrap.should_panic {\n \tborder-left: 2px solid var(--codeblock-error-color);\n }\n \n-pre.ignore {\n+.ignore.example-wrap {\n \tborder-left: 2px solid var(--codeblock-ignore-color);\n }\n \n-.example-wrap:hover pre.compile_fail,\n-.example-wrap:hover pre.should_panic {\n+.example-wrap.compile_fail:hover,\n+.example-wrap.should_panic:hover {\n \tborder-left: 2px solid var(--codeblock-error-hover-color);\n }\n \n-.example-wrap:hover pre.ignore {\n+.example-wrap.ignore:hover {\n \tborder-left: 2px solid var(--codeblock-ignore-hover-color);\n }\n \n-.tooltip.compile_fail,\n-.tooltip.should_panic {\n+.example-wrap.compile_fail .tooltip,\n+.example-wrap.should_panic .tooltip {\n \tcolor: var(--codeblock-error-color);\n }\n \n-.tooltip.ignore {\n+.example-wrap.ignore .tooltip {\n \tcolor:  var(--codeblock-ignore-color);\n }\n \n-.example-wrap:hover .tooltip.compile_fail,\n-.example-wrap:hover .tooltip.should_panic {\n+.example-wrap.compile_fail:hover .tooltip,\n+.example-wrap.should_panic:hover .tooltip {\n \tcolor: var(--codeblock-error-hover-color);\n }\n \n-.example-wrap:hover .tooltip.ignore {\n+.example-wrap.ignore:hover .tooltip {\n \tcolor: var(--codeblock-ignore-hover-color);\n }\n \n+.example-wrap .tooltip {\n+\tposition: absolute;\n+\tdisplay: block;\n+\tcursor: pointer;\n+\tleft: -25px;\n+\ttop: 5px;\n+}\n+\n+.example-wrap .tooltip::after {\n+\tdisplay: none;\n+\ttext-align: center;\n+\tpadding: 5px 3px 3px 3px;\n+\tborder-radius: 6px;\n+\tmargin-left: 5px;\n+\tfont-size: 1rem;\n+\tborder: 1px solid var(--border-color);\n+\tposition: absolute;\n+\twidth: max-content;\n+\ttop: -2px;\n+\tz-index: 1;\n+}\n+\n+.example-wrap .tooltip::before {\n+\tcontent: \" \";\n+\tposition: absolute;\n+\ttop: 50%;\n+\tleft: 16px;\n+\tmargin-top: -5px;\n+\tborder-width: 5px;\n+\tborder-style: solid;\n+\tdisplay: none;\n+\tz-index: 1;\n+}\n+\n+.example-wrap.ignore .tooltip::after {\n+\tcontent: \"This example is not tested\";\n+}\n+.example-wrap.compile_fail .tooltip::after {\n+\tcontent: \"This example deliberately fails to compile\";\n+}\n+.example-wrap.should_panic .tooltip::after {\n+\tcontent: \"This example panics\";\n+}\n+.example-wrap.edition .tooltip::after {\n+\tcontent: \"This code runs with edition \" attr(data-edition);\n+}\n+\n+.example-wrap .tooltip:hover::before, .example-wrap .tooltip:hover::after {\n+\tdisplay: inline;\n+}\n+\n+.example-wrap.compile_fail .tooltip,\n+.example-wrap.should_panic .tooltip,\n+.example-wrap.ignore .tooltip {\n+\tfont-weight: bold;\n+\tfont-size: 1.25rem;\n+}\n+\n a.test-arrow {\n \tdisplay: inline-block;\n \tvisibility: hidden;\n@@ -1252,62 +1310,6 @@ h3.variant {\n \tpadding-right: 3px;\n }\n \n-.information {\n-\tposition: absolute;\n-\tleft: -25px;\n-\tmargin-top: 7px;\n-\tz-index: 1;\n-}\n-\n-.tooltip {\n-\tposition: relative;\n-\tdisplay: inline-block;\n-\tcursor: pointer;\n-}\n-\n-.tooltip::after {\n-\tdisplay: none;\n-\ttext-align: center;\n-\tpadding: 5px 3px 3px 3px;\n-\tborder-radius: 6px;\n-\tmargin-left: 5px;\n-\tfont-size: 1rem;\n-\tborder: 1px solid var(--border-color);\n-}\n-\n-.tooltip.ignore::after {\n-\tcontent: \"This example is not tested\";\n-}\n-.tooltip.compile_fail::after {\n-\tcontent: \"This example deliberately fails to compile\";\n-}\n-.tooltip.should_panic::after {\n-\tcontent: \"This example panics\";\n-}\n-.tooltip.edition::after {\n-\tcontent: \"This code runs with edition \" attr(data-edition);\n-}\n-\n-.tooltip::before {\n-\tcontent: \" \";\n-\tposition: absolute;\n-\ttop: 50%;\n-\tleft: 16px;\n-\tmargin-top: -5px;\n-\tborder-width: 5px;\n-\tborder-style: solid;\n-\tdisplay: none;\n-}\n-\n-.tooltip:hover::before, .tooltip:hover::after {\n-\tdisplay: inline;\n-}\n-\n-.tooltip.compile_fail, .tooltip.should_panic, .tooltip.ignore {\n-\tfont-weight: bold;\n-\tfont-size: 1.25rem;\n-}\n-\n .notable-traits-tooltip {\n \tdisplay: inline-block;\n \tcursor: pointer;\n@@ -1349,7 +1351,7 @@ h3.variant {\n \tdisplay: block;\n }\n \n-.notable-traits .docblock code.content{\n+.notable-traits .docblock code.content {\n \tmargin: 0;\n \tpadding: 0;\n \tfont-size: 1.25rem;\n@@ -1718,7 +1720,7 @@ in storage.js plus the media query with (max-width: 700px)\n \tto prevent an overlay between the \"collapse toggle\" and the information tooltip.\n \tHowever, it's not needed with smaller screen width because the doc/code block is always put\n \t\"one line\" below. */\n-\t.docblock > .example-wrap:first-child > .information > .tooltip {\n+\t.docblock > .example-wrap:first-child .tooltip {\n \t\tmargin-top: 16px;\n \t}\n "}, {"sha": "47a78f02fb67906f6530f456f30fef7d7575c09e", "filename": "src/test/rustdoc-gui/check_info_sign_position.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -4,8 +4,8 @@ goto: file://|DOC_PATH|/test_docs/index.html\n goto: ./fn.check_list_code_block.html\n // If the codeblock is the first element of the docblock, the information tooltip must have\n // have some top margin to avoid going over the toggle (the \"[+]\").\n-assert-css: (\".docblock > .example-wrap > .information > .compile_fail\", { \"margin-top\": \"16px\" })\n+assert-css: (\".docblock > .example-wrap.compile_fail .tooltip\", { \"margin-top\": \"16px\" })\n // Checks that the other codeblocks don't have this top margin.\n-assert-css: (\"ol > li > .example-wrap > .information > .compile_fail\", { \"margin-top\": \"0px\" })\n-assert-css: (\"ol > li > .example-wrap > .information > .ignore\", { \"margin-top\": \"0px\" })\n-assert-css: (\".docblock > .example-wrap > .information > .ignore\", { \"margin-top\": \"0px\" })\n+assert-css: (\"ol > li > .example-wrap.compile_fail .tooltip\", { \"margin-top\": \"0px\" })\n+assert-css: (\"ol > li > .example-wrap.ignore .tooltip\", { \"margin-top\": \"0px\" })\n+assert-css: (\".docblock > .example-wrap.ignore .tooltip\", { \"margin-top\": \"0px\" })"}, {"sha": "21a9e120c80a2b5ab127342b325a9633b27ce1e9", "filename": "src/test/rustdoc-gui/codeblock-tooltip.goml", "status": "modified", "additions": 45, "deletions": 45, "changes": 90, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -7,90 +7,90 @@ local-storage: {\"rustdoc-theme\": \"dark\", \"rustdoc-use-system-theme\": \"false\"}\n reload:\n \n // compile_fail block\n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .compile_fail\"\n+move-cursor-to: \".docblock .example-wrap.compile_fail\"\n \n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // should_panic block\n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .should_panic\"\n+move-cursor-to: \".docblock .example-wrap.should_panic\"\n \n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // ignore block\n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n \n-move-cursor-to: \".docblock .information .ignore\"\n+move-cursor-to: \".docblock .example-wrap.ignore\"\n \n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgb(255, 142, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})\n \n \n // Light theme.\n local-storage: {\"rustdoc-theme\": \"light\"}\n reload:\n \n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .compile_fail\"\n+move-cursor-to: \".docblock .example-wrap.compile_fail\"\n \n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // should_panic block\n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .should_panic\"\n+move-cursor-to: \".docblock .example-wrap.should_panic\"\n \n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // ignore block\n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n \n-move-cursor-to: \".docblock .information .ignore\"\n+move-cursor-to: \".docblock .example-wrap.ignore\"\n \n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgb(255, 142, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})\n \n \n // Ayu theme.\n local-storage: {\"rustdoc-theme\": \"ayu\"}\n reload:\n \n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .compile_fail\"\n+move-cursor-to: \".docblock .example-wrap.compile_fail\"\n \n-assert-css: (\".docblock .information .compile_fail\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.compile_fail\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // should_panic block\n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgba(255, 0, 0, 0.5)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"})\n \n-move-cursor-to: \".docblock .information .should_panic\"\n+move-cursor-to: \".docblock .example-wrap.should_panic\"\n \n-assert-css: (\".docblock .information .should_panic\", {\"color\": \"rgb(255, 0, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic .tooltip\", {\"color\": \"rgb(255, 0, 0)\"})\n+assert-css: (\".docblock .example-wrap.should_panic\", {\"border-left\": \"2px solid rgb(255, 0, 0)\"})\n \n // ignore block\n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgba(255, 142, 0, 0.6)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"})\n \n-move-cursor-to: \".docblock .information .ignore\"\n+move-cursor-to: \".docblock .example-wrap.ignore\"\n \n-assert-css: (\".docblock .information .ignore\", {\"color\": \"rgb(255, 142, 0)\"})\n-assert-css: (\".docblock .example-wrap pre.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore .tooltip\", {\"color\": \"rgb(255, 142, 0)\"})\n+assert-css: (\".docblock .example-wrap.ignore\", {\"border-left\": \"2px solid rgb(255, 142, 0)\"})"}, {"sha": "f481f82c234b2af94d076fc13d10e527d9b09d2e", "filename": "src/test/rustdoc-gui/overflow-tooltip-information.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Foverflow-tooltip-information.goml?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -2,7 +2,7 @@\n // have overflow and max-width CSS rules set because they create a bug in firefox on\n // mac. For more information: https://github.com/rust-lang/rust/issues/89185\n goto: file://|DOC_PATH|/test_docs/fn.foo.html\n-assert-css: (\".docblock > .example-wrap > .information\", {\n+assert-css: (\".docblock > .example-wrap .tooltip\", {\n     \"overflow-x\": \"visible\",\n     \"max-width\": \"none\"\n }, ALL)"}, {"sha": "b9b0b0d1abf99699d4dfe9f16b4a524eb7332ace", "filename": "src/test/rustdoc/codeblock-title.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc%2Fcodeblock-title.rs", "raw_url": "https://github.com/rust-lang/rust/raw/781ef3e99582fee003264087b0eea106a8c7518f/src%2Ftest%2Frustdoc%2Fcodeblock-title.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fcodeblock-title.rs?ref=781ef3e99582fee003264087b0eea106a8c7518f", "patch": "@@ -1,8 +1,8 @@\n #![crate_name = \"foo\"]\n \n-// @has foo/fn.bar.html '//*[@class=\"tooltip compile_fail\"]' \"\u24d8\"\n-// @has foo/fn.bar.html '//*[@class=\"tooltip ignore\"]' \"\u24d8\"\n-// @has foo/fn.bar.html '//*[@class=\"tooltip should_panic\"]' \"\u24d8\"\n+// @has foo/fn.bar.html '//*[@class=\"example-wrap compile_fail\"]/*[@class=\"tooltip\"]' \"\u24d8\"\n+// @has foo/fn.bar.html '//*[@class=\"example-wrap ignore\"]/*[@class=\"tooltip\"]' \"\u24d8\"\n+// @has foo/fn.bar.html '//*[@class=\"example-wrap should_panic\"]/*[@class=\"tooltip\"]' \"\u24d8\"\n // @has foo/fn.bar.html '//*[@data-edition=\"2018\"]' \"\u24d8\"\n \n /// foo"}]}