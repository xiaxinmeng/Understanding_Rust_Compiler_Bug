{"sha": "e0165af94b034dacde7f9a598c5e72b9c1a1898c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwMTY1YWY5NGIwMzRkYWNkZTdmOWE1OThjNWU3MmI5YzFhMTg5OGM=", "commit": {"author": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2018-03-21T09:32:53Z"}, "committer": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2018-03-21T09:32:53Z"}, "message": "fix vector fmin/fmax non-fast/fast intrinsics NaN handling", "tree": {"sha": "7d5447ca00a178936a9275ad2c6f03b02697035a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d5447ca00a178936a9275ad2c6f03b02697035a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0165af94b034dacde7f9a598c5e72b9c1a1898c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0165af94b034dacde7f9a598c5e72b9c1a1898c", "html_url": "https://github.com/rust-lang/rust/commit/e0165af94b034dacde7f9a598c5e72b9c1a1898c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0165af94b034dacde7f9a598c5e72b9c1a1898c/comments", "author": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c19264fa835a1eca86de4fd2e86a87b3919e57cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/c19264fa835a1eca86de4fd2e86a87b3919e57cf", "html_url": "https://github.com/rust-lang/rust/commit/c19264fa835a1eca86de4fd2e86a87b3919e57cf"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "91eabb9998f4a6425d7ae0b1105424bf250688b6", "filename": "src/librustc_trans/builder.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e0165af94b034dacde7f9a598c5e72b9c1a1898c/src%2Flibrustc_trans%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0165af94b034dacde7f9a598c5e72b9c1a1898c/src%2Flibrustc_trans%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fbuilder.rs?ref=e0165af94b034dacde7f9a598c5e72b9c1a1898c", "patch": "@@ -1036,7 +1036,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     pub fn vector_reduce_fmin(&self, src: ValueRef) -> ValueRef {\n         self.count_insn(\"vector.reduce.fmin\");\n         unsafe {\n-            let instr = llvm::LLVMRustBuildVectorReduceFMin(self.llbuilder, src, true);\n+            let instr = llvm::LLVMRustBuildVectorReduceFMin(self.llbuilder, src, /*NoNaNs:*/ false);\n             if instr.is_null() {\n                 bug!(\"LLVMRustBuildVectorReduceFMin is not available in LLVM version < 5.0\");\n             }\n@@ -1046,7 +1046,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     pub fn vector_reduce_fmax(&self, src: ValueRef) -> ValueRef {\n         self.count_insn(\"vector.reduce.fmax\");\n         unsafe {\n-            let instr = llvm::LLVMRustBuildVectorReduceFMax(self.llbuilder, src, true);\n+            let instr = llvm::LLVMRustBuildVectorReduceFMax(self.llbuilder, src, /*NoNaNs:*/ false);\n             if instr.is_null() {\n                 bug!(\"LLVMRustBuildVectorReduceFMax is not available in LLVM version < 5.0\");\n             }\n@@ -1056,7 +1056,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     pub fn vector_reduce_fmin_fast(&self, src: ValueRef) -> ValueRef {\n         self.count_insn(\"vector.reduce.fmin_fast\");\n         unsafe {\n-            let instr = llvm::LLVMRustBuildVectorReduceFMin(self.llbuilder, src, false);\n+            let instr = llvm::LLVMRustBuildVectorReduceFMin(self.llbuilder, src, /*NoNaNs:*/ true);\n             if instr.is_null() {\n                 bug!(\"LLVMRustBuildVectorReduceFMin is not available in LLVM version < 5.0\");\n             }\n@@ -1067,7 +1067,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     pub fn vector_reduce_fmax_fast(&self, src: ValueRef) -> ValueRef {\n         self.count_insn(\"vector.reduce.fmax_fast\");\n         unsafe {\n-            let instr = llvm::LLVMRustBuildVectorReduceFMax(self.llbuilder, src, false);\n+            let instr = llvm::LLVMRustBuildVectorReduceFMax(self.llbuilder, src, /*NoNaNs:*/ true);\n             if instr.is_null() {\n                 bug!(\"LLVMRustBuildVectorReduceFMax is not available in LLVM version < 5.0\");\n             }"}]}