{"sha": "ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhM2YxNDhkM2QzYjRmYjFkMWI0OWJlMWJlNGIwMjVmZTE3ZGRlMjY=", "commit": {"author": {"name": "Gibson Fahnestock", "email": "gibfahn@gmail.com", "date": "2017-03-05T19:32:46Z"}, "committer": {"name": "Gibson Fahnestock", "email": "gibfahn@gmail.com", "date": "2017-03-05T20:17:01Z"}, "message": "Add compile-fail test for unwind_attributes\n\nTest copied from src/test/codegen/extern-functions.rs.\n\nRefs: https://github.com/rust-lang/rust/issues/39059", "tree": {"sha": "b49b42cfd1f5ae2d4b21694db4155402d7d1826b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b49b42cfd1f5ae2d4b21694db4155402d7d1826b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJYvHI9AAoJELAfu5KCHFh6I+4P/0sk9mSYCP64rIrcaMdTwSe+\npEvRsG7kHwVEhI7RYmc+bapJ22If+t5jzQ46qsDridwkZSijd8Oq72fbTw18b5WM\n8iZg5fdgHCiCUvGH7iPHKLhPWZI5e6Yr1MiOBT9A7t1B4R+JirYJfO+1huCXuLqC\nqoO7Gq+JUxPZcr5hPWvFT/zTL8vxtEHcaVKaX1RsJ1Qba3BMktxtjS3ZakK6Yxji\nJZ+t7qVoEf1+cFsReN3oTghYIlTuhHgexHYQqGztBoS5Tv012MIBac0P5BXFDvvd\nJQeiecpvGkxdK2AquuAYYAAkO233HxiBFdH46YgB3k5yvtdSUIjBbamEVD5Auq9P\n5iXLpB+kFtXoc4T6lMd32H+C4k6IJJ3Oq+dcwlbnywqpE24oSzSFrM3c/ASufCw3\nttrncp9IRDJ3UwCyNTHfMN58z19RZ+/pA2cW+f1E/UJhIKozdf/Rn5PWXZVejIgX\nARFpyltdVKdkL1dvLvuj8AklMygXlsAkmjuuWghqb9/oqnNcBbB7JyHl5W+U1gYb\n9u2izYV0O7ShUky5lzjrf3zyVIXxDd44ksRe5XkOHNPF4jDlcfpBdqBTrQLuPhkz\nd4wAmn7GTTyTKHvm4lkOxDYXe1kF6YbVcvqzByvxadJSteTO7JT+XWBzH8pkLKVA\nA+45fyh1ubFQf9cRac7Z\n=0tCH\n-----END PGP SIGNATURE-----", "payload": "tree b49b42cfd1f5ae2d4b21694db4155402d7d1826b\nparent 6b76c9ea19f4538a6ace44ebce2b8bfd1f80c126\nauthor Gibson Fahnestock <gibfahn@gmail.com> 1488742366 +0000\ncommitter Gibson Fahnestock <gibfahn@gmail.com> 1488745021 +0000\n\nAdd compile-fail test for unwind_attributes\n\nTest copied from src/test/codegen/extern-functions.rs.\n\nRefs: https://github.com/rust-lang/rust/issues/39059\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "html_url": "https://github.com/rust-lang/rust/commit/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26/comments", "author": {"login": "gibfahn", "id": 15943089, "node_id": "MDQ6VXNlcjE1OTQzMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/15943089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibfahn", "html_url": "https://github.com/gibfahn", "followers_url": "https://api.github.com/users/gibfahn/followers", "following_url": "https://api.github.com/users/gibfahn/following{/other_user}", "gists_url": "https://api.github.com/users/gibfahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibfahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibfahn/subscriptions", "organizations_url": "https://api.github.com/users/gibfahn/orgs", "repos_url": "https://api.github.com/users/gibfahn/repos", "events_url": "https://api.github.com/users/gibfahn/events{/privacy}", "received_events_url": "https://api.github.com/users/gibfahn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gibfahn", "id": 15943089, "node_id": "MDQ6VXNlcjE1OTQzMDg5", "avatar_url": "https://avatars.githubusercontent.com/u/15943089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gibfahn", "html_url": "https://github.com/gibfahn", "followers_url": "https://api.github.com/users/gibfahn/followers", "following_url": "https://api.github.com/users/gibfahn/following{/other_user}", "gists_url": "https://api.github.com/users/gibfahn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gibfahn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gibfahn/subscriptions", "organizations_url": "https://api.github.com/users/gibfahn/orgs", "repos_url": "https://api.github.com/users/gibfahn/repos", "events_url": "https://api.github.com/users/gibfahn/events{/privacy}", "received_events_url": "https://api.github.com/users/gibfahn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6b76c9ea19f4538a6ace44ebce2b8bfd1f80c126", "url": "https://api.github.com/repos/rust-lang/rust/commits/6b76c9ea19f4538a6ace44ebce2b8bfd1f80c126", "html_url": "https://github.com/rust-lang/rust/commit/6b76c9ea19f4538a6ace44ebce2b8bfd1f80c126"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "c8f9cd943cdaaf9ab61d41e2b71cc1faefbef3e0", "filename": "src/test/compile-fail/feature-gate-unwind-attributes.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26/src%2Ftest%2Fcompile-fail%2Ffeature-gate-unwind-attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26/src%2Ftest%2Fcompile-fail%2Ffeature-gate-unwind-attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-unwind-attributes.rs?ref=ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// compile-flags: -C no-prepopulate-passes\n+\n+#![crate_type = \"lib\"]\n+\n+extern {\n+// CHECK: Function Attrs: nounwind\n+// CHECK-NEXT: declare void @extern_fn\n+    fn extern_fn();\n+// CHECK-NOT: Function Attrs: nounwind\n+// CHECK: declare void @unwinding_extern_fn\n+    #[unwind] //~ ERROR #[unwind] is experimental\n+    fn unwinding_extern_fn();\n+}\n+\n+pub unsafe fn force_declare() {\n+    extern_fn();\n+    unwinding_extern_fn();\n+}"}, {"sha": "e065fe00bcf8e1c5dfa9b845c00f2b1e484e124e", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=ea3f148d3d3b4fb1d1b49be1be4b025fe17dde26", "patch": "@@ -167,7 +167,7 @@ pub fn check(path: &Path, bad: &mut bool) {\n \n     // FIXME get this whitelist empty.\n     let whitelist = vec![\n-        \"cfg_target_thread_local\", \"unwind_attributes\",\n+        \"cfg_target_thread_local\",\n     ];\n \n     // Only check the number of lang features."}]}