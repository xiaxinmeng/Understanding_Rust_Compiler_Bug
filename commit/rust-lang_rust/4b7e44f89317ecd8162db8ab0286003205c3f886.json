{"sha": "4b7e44f89317ecd8162db8ab0286003205c3f886", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiN2U0NGY4OTMxN2VjZDgxNjJkYjhhYjAyODYwMDMyMDVjM2Y4ODY=", "commit": {"author": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-05-30T11:30:58Z"}, "committer": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-05-30T11:30:58Z"}, "message": "rustdoc: remove calls to `local_def_id_from_node_id`", "tree": {"sha": "f7d58c339e864f0fca0c1abdb4a240470d1fc0e7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7d58c339e864f0fca0c1abdb4a240470d1fc0e7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4b7e44f89317ecd8162db8ab0286003205c3f886", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4b7e44f89317ecd8162db8ab0286003205c3f886", "html_url": "https://github.com/rust-lang/rust/commit/4b7e44f89317ecd8162db8ab0286003205c3f886", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4b7e44f89317ecd8162db8ab0286003205c3f886/comments", "author": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91fb72a8a9f53de2bcc5638c1358fcb552dba8ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/91fb72a8a9f53de2bcc5638c1358fcb552dba8ce", "html_url": "https://github.com/rust-lang/rust/commit/91fb72a8a9f53de2bcc5638c1358fcb552dba8ce"}], "stats": {"total": 14, "additions": 5, "deletions": 9}, "files": [{"sha": "08e04f719e9ba692d86b263c129e6b8844a6aba5", "filename": "src/librustdoc/clean/inline.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4b7e44f89317ecd8162db8ab0286003205c3f886/src%2Flibrustdoc%2Fclean%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b7e44f89317ecd8162db8ab0286003205c3f886/src%2Flibrustdoc%2Fclean%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Finline.rs?ref=4b7e44f89317ecd8162db8ab0286003205c3f886", "patch": "@@ -6,7 +6,7 @@ use rustc_ast::ast;\n use rustc_data_structures::fx::FxHashSet;\n use rustc_hir as hir;\n use rustc_hir::def::{CtorKind, DefKind, Res};\n-use rustc_hir::def_id::DefId;\n+use rustc_hir::def_id::{DefId, CRATE_DEF_INDEX};\n use rustc_hir::Mutability;\n use rustc_metadata::creader::LoadedMacro;\n use rustc_middle::ty;\n@@ -454,11 +454,7 @@ fn build_module(cx: &DocContext<'_>, did: DefId, visited: &mut FxHashSet<DefId>)\n                         name: None,\n                         attrs: clean::Attributes::default(),\n                         source: clean::Span::empty(),\n-                        def_id: cx\n-                            .tcx\n-                            .hir()\n-                            .local_def_id_from_node_id(ast::CRATE_NODE_ID)\n-                            .to_def_id(),\n+                        def_id: DefId::local(CRATE_DEF_INDEX),\n                         visibility: clean::Public,\n                         stability: None,\n                         deprecation: None,"}, {"sha": "371df7444b004e8e188480e72e48763b7679780a", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4b7e44f89317ecd8162db8ab0286003205c3f886/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4b7e44f89317ecd8162db8ab0286003205c3f886/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=4b7e44f89317ecd8162db8ab0286003205c3f886", "patch": "@@ -1549,11 +1549,11 @@ impl<'tcx> Clean<Type> for Ty<'tcx> {\n             ty::FnDef(..) | ty::FnPtr(_) => {\n                 let ty = cx.tcx.lift(self).expect(\"FnPtr lift failed\");\n                 let sig = ty.fn_sig(cx.tcx);\n-                let local_def_id = cx.tcx.hir().local_def_id_from_node_id(ast::CRATE_NODE_ID);\n+                let def_id = DefId::local(CRATE_DEF_INDEX);\n                 BareFunction(box BareFunctionDecl {\n                     unsafety: sig.unsafety(),\n                     generic_params: Vec::new(),\n-                    decl: (local_def_id.to_def_id(), sig).clean(cx),\n+                    decl: (def_id, sig).clean(cx),\n                     abi: sig.abi(),\n                 })\n             }\n@@ -2255,7 +2255,7 @@ impl Clean<Vec<Item>> for doctree::Import<'_> {\n             name: None,\n             attrs: self.attrs.clean(cx),\n             source: self.whence.clean(cx),\n-            def_id: cx.tcx.hir().local_def_id_from_node_id(ast::CRATE_NODE_ID).to_def_id(),\n+            def_id: DefId::local(CRATE_DEF_INDEX),\n             visibility: self.vis.clean(cx),\n             stability: None,\n             deprecation: None,"}]}