{"sha": "72f8d6a6597e4b780e518e606ec39595ee0eda85", "node_id": "C_kwDOAAsO6NoAKDcyZjhkNmE2NTk3ZTRiNzgwZTUxOGU2MDZlYzM5NTk1ZWUwZWRhODU", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2023-01-06T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2023-01-10T09:14:59Z"}, "message": "Change type of box_noalias to bool", "tree": {"sha": "1c2faa641c630fffaa55d0b12601bcd89a81cc95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c2faa641c630fffaa55d0b12601bcd89a81cc95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72f8d6a6597e4b780e518e606ec39595ee0eda85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72f8d6a6597e4b780e518e606ec39595ee0eda85", "html_url": "https://github.com/rust-lang/rust/commit/72f8d6a6597e4b780e518e606ec39595ee0eda85", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72f8d6a6597e4b780e518e606ec39595ee0eda85/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "78075e1e26176f86cbafb0bf24f86dba174351ed", "url": "https://api.github.com/repos/rust-lang/rust/commits/78075e1e26176f86cbafb0bf24f86dba174351ed", "html_url": "https://github.com/rust-lang/rust/commit/78075e1e26176f86cbafb0bf24f86dba174351ed"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "a3b9891ee64e90a5f6c7f323a2d172b6c2b6c403", "filename": "compiler/rustc_interface/src/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Ftests.rs?ref=72f8d6a6597e4b780e518e606ec39595ee0eda85", "patch": "@@ -715,7 +715,7 @@ fn test_unstable_options_tracking_hash() {\n     tracked!(asm_comments, true);\n     tracked!(assume_incomplete_release, true);\n     tracked!(binary_dep_depinfo, true);\n-    tracked!(box_noalias, Some(false));\n+    tracked!(box_noalias, false);\n     tracked!(\n         branch_protection,\n         Some(BranchProtection {"}, {"sha": "994be8d5f85fe7236c8c8546a3736bd4fc3255cc", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=72f8d6a6597e4b780e518e606ec39595ee0eda85", "patch": "@@ -1255,7 +1255,7 @@ options! {\n     binary_dep_depinfo: bool = (false, parse_bool, [TRACKED],\n         \"include artifacts (sysroot, crate dependencies) used during compilation in dep-info \\\n         (default: no)\"),\n-    box_noalias: Option<bool> = (None, parse_opt_bool, [TRACKED],\n+    box_noalias: bool = (true, parse_bool, [TRACKED],\n         \"emit noalias metadata for box (default: yes)\"),\n     branch_protection: Option<BranchProtection> = (None, parse_branch_protection, [TRACKED],\n         \"set options for branch target identification and pointer authentication on AArch64\"),"}, {"sha": "d1197774fe96cfedb369061d15c5053ffbbff23e", "filename": "compiler/rustc_ty_utils/src/abi.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_ty_utils%2Fsrc%2Fabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72f8d6a6597e4b780e518e606ec39595ee0eda85/compiler%2Frustc_ty_utils%2Fsrc%2Fabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ty_utils%2Fsrc%2Fabi.rs?ref=72f8d6a6597e4b780e518e606ec39595ee0eda85", "patch": "@@ -254,7 +254,7 @@ fn adjust_for_rust_scalar<'tcx>(\n             // The aliasing rules for `Box<T>` are still not decided, but currently we emit\n             // `noalias` for it. This can be turned off using an unstable flag.\n             // See https://github.com/rust-lang/unsafe-code-guidelines/issues/326\n-            let noalias_for_box = cx.tcx.sess.opts.unstable_opts.box_noalias.unwrap_or(true);\n+            let noalias_for_box = cx.tcx.sess.opts.unstable_opts.box_noalias;\n \n             // LLVM prior to version 12 had known miscompiles in the presence of noalias attributes\n             // (see #54878), so it was conditionally disabled, but we don't support earlier"}]}