{"sha": "3e25444e5194fef5a06fb82e1c7726f66c705c88", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNlMjU0NDRlNTE5NGZlZjVhMDZmYjgyZTFjNzcyNmY2NmM3MDVjODg=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-01-19T21:29:26Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-01-19T21:30:31Z"}, "message": "In trans, allow _|_-typed things to be the argument to fail\n\nRationale: _|_-typed things diverge, so it's safe to use them in\nany context.\n\nCloses #1465", "tree": {"sha": "e6c1f4ad667aeea42d38e15dd780ab4093cc3cce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e6c1f4ad667aeea42d38e15dd780ab4093cc3cce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3e25444e5194fef5a06fb82e1c7726f66c705c88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3e25444e5194fef5a06fb82e1c7726f66c705c88", "html_url": "https://github.com/rust-lang/rust/commit/3e25444e5194fef5a06fb82e1c7726f66c705c88", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3e25444e5194fef5a06fb82e1c7726f66c705c88/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc2bd0282702b1987b0f26809ca03df5211f3250", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc2bd0282702b1987b0f26809ca03df5211f3250", "html_url": "https://github.com/rust-lang/rust/commit/cc2bd0282702b1987b0f26809ca03df5211f3250"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "92a37ab36d912c76a02375ed46eb6256555ba22f", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3e25444e5194fef5a06fb82e1c7726f66c705c88/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e25444e5194fef5a06fb82e1c7726f66c705c88/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=3e25444e5194fef5a06fb82e1c7726f66c705c88", "patch": "@@ -3775,7 +3775,7 @@ fn trans_fail_expr(bcx: @block_ctxt, sp_opt: option::t<span>,\n                 bcx, expr_res.val, type_of_or_i8(\n                     bcx, ty::mk_mach_uint(tcx, ast::ty_u8)));\n             ret trans_fail_value(bcx, sp_opt, data);\n-        } else if bcx.unreachable {\n+        } else if bcx.unreachable || ty::type_is_bot(tcx, e_ty) {\n             ret bcx;\n         } else {\n             bcx_ccx(bcx).sess.span_bug("}, {"sha": "38c6d38f309cbb1a3eebab84e33fef4ede375f66", "filename": "src/test/run-fail/do-while-fail.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3e25444e5194fef5a06fb82e1c7726f66c705c88/src%2Ftest%2Frun-fail%2Fdo-while-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3e25444e5194fef5a06fb82e1c7726f66c705c88/src%2Ftest%2Frun-fail%2Fdo-while-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fdo-while-fail.rs?ref=3e25444e5194fef5a06fb82e1c7726f66c705c88", "patch": "@@ -0,0 +1,4 @@\n+// error-pattern:giraffe\n+fn main() {\n+  fail do { fail \"giraffe\" } while true;\n+}"}]}