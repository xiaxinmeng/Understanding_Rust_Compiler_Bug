{"sha": "70a0e0a2779f04999d0f0e40f93e1697c37ec042", "node_id": "C_kwDOAAsO6NoAKDcwYTBlMGEyNzc5ZjA0OTk5ZDBmMGU0MGY5M2UxNjk3YzM3ZWMwNDI", "commit": {"author": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2022-12-24T01:03:51Z"}, "committer": {"name": "Joshua Nelson", "email": "github@jyn.dev", "date": "2022-12-24T01:08:53Z"}, "message": "Remove ancient and outdated references to `config.mk`", "tree": {"sha": "f4fb71ad289f8dd4c7a1af6a68948b3ea1a21736", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f4fb71ad289f8dd4c7a1af6a68948b3ea1a21736"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70a0e0a2779f04999d0f0e40f93e1697c37ec042", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70a0e0a2779f04999d0f0e40f93e1697c37ec042", "html_url": "https://github.com/rust-lang/rust/commit/70a0e0a2779f04999d0f0e40f93e1697c37ec042", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70a0e0a2779f04999d0f0e40f93e1697c37ec042/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1bd1b25be8b4cc20358028108f8a35b8760b5cd3", "url": "https://api.github.com/repos/rust-lang/rust/commits/1bd1b25be8b4cc20358028108f8a35b8760b5cd3", "html_url": "https://github.com/rust-lang/rust/commit/1bd1b25be8b4cc20358028108f8a35b8760b5cd3"}], "stats": {"total": 19, "additions": 4, "deletions": 15}, "files": [{"sha": "014fab907fb96c48a9b46efcbb6055395c68556d", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/70a0e0a2779f04999d0f0e40f93e1697c37ec042/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/70a0e0a2779f04999d0f0e40f93e1697c37ec042/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=70a0e0a2779f04999d0f0e40f93e1697c37ec042", "patch": "@@ -228,9 +228,7 @@ configure script and makefile (the latter of which just invokes `x.py`).\n make && sudo make install\n ```\n \n-When using the configure script, the generated `config.mk` file may override the\n-`config.toml` file. To go back to the `config.toml` file, delete the generated\n-`config.mk` file.\n+`configure` generates a `config.toml` which can also be used with normal `x.py` invocations.\n \n ## Building Documentation\n "}, {"sha": "79c2eb31cdae07b3fca56104c8d9b806bfc87276", "filename": "src/bootstrap/README.md", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/70a0e0a2779f04999d0f0e40f93e1697c37ec042/src%2Fbootstrap%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/70a0e0a2779f04999d0f0e40f93e1697c37ec042/src%2Fbootstrap%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FREADME.md?ref=70a0e0a2779f04999d0f0e40f93e1697c37ec042", "patch": "@@ -80,18 +80,12 @@ The script accepts commands, flags, and arguments to determine what to do:\n \n ## Configuring rustbuild\n \n-There are currently two methods for configuring the rustbuild build system.\n-\n-First, rustbuild offers a TOML-based configuration system with a `config.toml`\n+rustbuild offers a TOML-based configuration system with a `config.toml`\n file. An example of this configuration can be found at `config.toml.example`,\n and the configuration file can also be passed as `--config path/to/config.toml`\n if the build system is being invoked manually (via the python script).\n \n-Next, the `./configure` options serialized in `config.mk` will be\n-parsed and read. That is, if any `./configure` options are passed, they'll be\n-handled naturally. `./configure` should almost never be used for local\n-installations, and is primarily useful for CI. Prefer to customize behavior\n-using `config.toml`.\n+You can generate a config.toml using `./configure` options if you want to automate creating the file without having to edit it.\n \n Finally, rustbuild makes use of the [cc-rs crate] which has [its own\n method][env-vars] of configuring C compilers and C flags via environment"}, {"sha": "3ae23db1d1cc88abadf0c05d25b552f2c5841f72", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/70a0e0a2779f04999d0f0e40f93e1697c37ec042/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70a0e0a2779f04999d0f0e40f93e1697c37ec042/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=70a0e0a2779f04999d0f0e40f93e1697c37ec042", "patch": "@@ -46,10 +46,7 @@ pub enum DryRun {\n \n /// Global configuration for the entire build and/or bootstrap.\n ///\n-/// This structure is derived from a combination of both `config.toml` and\n-/// `config.mk`. As of the time of this writing it's unlikely that `config.toml`\n-/// is used all that much, so this is primarily filled out by `config.mk` which\n-/// is generated from `./configure`.\n+/// This structure is parsed from `config.toml`, and some of the fields are inferred from `git` or build-time parameters.\n ///\n /// Note that this structure is not decoded directly into, but rather it is\n /// filled out from the decoded forms of the structs below. For documentation"}]}