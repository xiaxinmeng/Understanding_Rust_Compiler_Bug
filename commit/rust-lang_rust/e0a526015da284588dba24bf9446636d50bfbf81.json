{"sha": "e0a526015da284588dba24bf9446636d50bfbf81", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwYTUyNjAxNWRhMjg0NTg4ZGJhMjRiZjk0NDY2MzZkNTBiZmJmODE=", "commit": {"author": {"name": "Alex Burka", "email": "aburka@seas.upenn.edu", "date": "2015-12-14T18:36:45Z"}, "committer": {"name": "Alex Burka", "email": "aburka@seas.upenn.edu", "date": "2015-12-14T22:51:52Z"}, "message": "evade unused_variables lint in for-loop desugaring", "tree": {"sha": "dff9ba1e707fbc9b42cb41d36c94e38f84fc34dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dff9ba1e707fbc9b42cb41d36c94e38f84fc34dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0a526015da284588dba24bf9446636d50bfbf81", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0a526015da284588dba24bf9446636d50bfbf81", "html_url": "https://github.com/rust-lang/rust/commit/e0a526015da284588dba24bf9446636d50bfbf81", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0a526015da284588dba24bf9446636d50bfbf81/comments", "author": {"login": "durka", "id": 47007, "node_id": "MDQ6VXNlcjQ3MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durka", "html_url": "https://github.com/durka", "followers_url": "https://api.github.com/users/durka/followers", "following_url": "https://api.github.com/users/durka/following{/other_user}", "gists_url": "https://api.github.com/users/durka/gists{/gist_id}", "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durka/subscriptions", "organizations_url": "https://api.github.com/users/durka/orgs", "repos_url": "https://api.github.com/users/durka/repos", "events_url": "https://api.github.com/users/durka/events{/privacy}", "received_events_url": "https://api.github.com/users/durka/received_events", "type": "User", "site_admin": false}, "committer": {"login": "durka", "id": 47007, "node_id": "MDQ6VXNlcjQ3MDA3", "avatar_url": "https://avatars.githubusercontent.com/u/47007?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durka", "html_url": "https://github.com/durka", "followers_url": "https://api.github.com/users/durka/followers", "following_url": "https://api.github.com/users/durka/following{/other_user}", "gists_url": "https://api.github.com/users/durka/gists{/gist_id}", "starred_url": "https://api.github.com/users/durka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durka/subscriptions", "organizations_url": "https://api.github.com/users/durka/orgs", "repos_url": "https://api.github.com/users/durka/repos", "events_url": "https://api.github.com/users/durka/events{/privacy}", "received_events_url": "https://api.github.com/users/durka/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c0c4e554631b01280d29a0a951fb804e319e7d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c0c4e554631b01280d29a0a951fb804e319e7d9", "html_url": "https://github.com/rust-lang/rust/commit/4c0c4e554631b01280d29a0a951fb804e319e7d9"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "da561a0b32280adc4d60b7772f15d5b0d9b577a0", "filename": "src/librustc_front/lowering.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e0a526015da284588dba24bf9446636d50bfbf81/src%2Flibrustc_front%2Flowering.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0a526015da284588dba24bf9446636d50bfbf81/src%2Flibrustc_front%2Flowering.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_front%2Flowering.rs?ref=e0a526015da284588dba24bf9446636d50bfbf81", "patch": "@@ -1499,8 +1499,9 @@ pub fn lower_expr(lctx: &LoweringContext, e: &Expr) -> P<hir::Expr> {\n                                                 hir::MatchSource::ForLoopDesugar,\n                                                 None);\n \n-                    // `{ let result = ...; result }`\n-                    let result_ident = lctx.str_to_ident(\"result\");\n+                    // `{ let _result = ...; _result }`\n+                    // underscore prevents an unused_variables lint if the head diverges\n+                    let result_ident = lctx.str_to_ident(\"_result\");\n                     let let_stmt = stmt_let(lctx, e.span, false, result_ident, match_expr, None);\n                     let result = expr_ident(lctx, e.span, result_ident, None);\n                     let block = block_all(lctx, e.span, vec![let_stmt], Some(result));"}]}