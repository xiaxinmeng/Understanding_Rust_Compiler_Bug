{"sha": "00c08727c888e493baf2fa625970a357fe998414", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwYzA4NzI3Yzg4OGU0OTNiYWYyZmE2MjU5NzBhMzU3ZmU5OTg0MTQ=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-03-11T10:03:32Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-03-11T10:03:32Z"}, "message": "Adjust some `#[cfg]`s to take non-Unix non-Windows operating systems into account", "tree": {"sha": "acb7f75b8159024013a75820117c5683ede60589", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/acb7f75b8159024013a75820117c5683ede60589"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00c08727c888e493baf2fa625970a357fe998414", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYEnq9BUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLgb2gEAzthdEZ+zAffde1dGNT0Hi0Mx9Ab/\nOM8f/u+rSKIYcO4BAL0WU1N5Kzll1iwwwuls7yXH+i2UV+6T//SpM+G5LToJ\n=KnaT\n-----END PGP SIGNATURE-----", "payload": "tree acb7f75b8159024013a75820117c5683ede60589\nparent 04fce73196638cbb203e2b0dd2a16230ff6e265b\nauthor hyd-dev <yd-huang@outlook.com> 1615457012 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1615457012 +0800\n\nAdjust some `#[cfg]`s to take non-Unix non-Windows operating systems into account\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00c08727c888e493baf2fa625970a357fe998414", "html_url": "https://github.com/rust-lang/rust/commit/00c08727c888e493baf2fa625970a357fe998414", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00c08727c888e493baf2fa625970a357fe998414/comments", "author": null, "committer": null, "parents": [{"sha": "04fce73196638cbb203e2b0dd2a16230ff6e265b", "url": "https://api.github.com/repos/rust-lang/rust/commits/04fce73196638cbb203e2b0dd2a16230ff6e265b", "html_url": "https://github.com/rust-lang/rust/commit/04fce73196638cbb203e2b0dd2a16230ff6e265b"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "b11821b7db0a2b8eb6ac62e5eae4f0b4eb48d9c1", "filename": "compiler/rustc_codegen_ssa/src/back/link.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/00c08727c888e493baf2fa625970a357fe998414/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00c08727c888e493baf2fa625970a357fe998414/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2Fsrc%2Fback%2Flink.rs?ref=00c08727c888e493baf2fa625970a357fe998414", "patch": "@@ -711,7 +711,7 @@ fn link_natively<'a, B: ArchiveBuilder<'a>>(\n             status.signal() == Some(libc::SIGILL)\n         }\n \n-        #[cfg(windows)]\n+        #[cfg(not(unix))]\n         fn is_illegal_instruction(_status: &ExitStatus) -> bool {\n             false\n         }\n@@ -1198,7 +1198,7 @@ fn exec_linker(\n     flush_linked_file(&output, out_filename)?;\n     return output;\n \n-    #[cfg(unix)]\n+    #[cfg(not(windows))]\n     fn flush_linked_file(_: &io::Result<Output>, _: &Path) -> io::Result<()> {\n         Ok(())\n     }\n@@ -1238,6 +1238,11 @@ fn exec_linker(\n         err.raw_os_error() == Some(ERROR_FILENAME_EXCED_RANGE)\n     }\n \n+    #[cfg(not(any(unix, windows)))]\n+    fn command_line_too_big(_: &io::Error) -> bool {\n+        false\n+    }\n+\n     struct Escape<'a> {\n         arg: &'a str,\n         is_like_msvc: bool,"}]}