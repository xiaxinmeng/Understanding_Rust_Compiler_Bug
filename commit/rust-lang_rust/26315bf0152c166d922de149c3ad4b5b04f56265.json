{"sha": "26315bf0152c166d922de149c3ad4b5b04f56265", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2MzE1YmYwMTUyYzE2NmQ5MjJkZTE0OWMzYWQ0YjViMDRmNTYyNjU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-09-10T13:57:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-09-10T13:57:50Z"}, "message": "Rollup merge of #36045 - ollie27:rustdoc_titles3, r=steveklabnik\n\nrustdoc: Add missing item types to page titles\n\nMost pages include the item type in the title such as \"Struct std::vec::Vec\". However it is missing from the pages for foreign functions, type definitions, macros, statics and constants. This adds them so for example, instead of a title of \"std::u32::MAX\" it is \"Constant std::u32::MAX\" to match the others.\n\n[before](https://doc.rust-lang.org/nightly/std/u32/constant.MAX.html) [after](https://ollie27.github.io/rust_doc_test/std/u32/constant.MAX.html)\n[before](https://doc.rust-lang.org/nightly/std/io/type.Result.html) [after](https://ollie27.github.io/rust_doc_test/std/io/type.Result.html)\n\nPrevious discussions: #34345, #35003", "tree": {"sha": "27fc1084591084f7b8fb3447c0ed08fdcebd2ee7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27fc1084591084f7b8fb3447c0ed08fdcebd2ee7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/26315bf0152c166d922de149c3ad4b5b04f56265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/26315bf0152c166d922de149c3ad4b5b04f56265", "html_url": "https://github.com/rust-lang/rust/commit/26315bf0152c166d922de149c3ad4b5b04f56265", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/26315bf0152c166d922de149c3ad4b5b04f56265/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "65af27b000a320d8b8d9af591a0464cba3217e0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/65af27b000a320d8b8d9af591a0464cba3217e0c", "html_url": "https://github.com/rust-lang/rust/commit/65af27b000a320d8b8d9af591a0464cba3217e0c"}, {"sha": "a7c671bb90ba1584d0098460ad8e417f848913f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/a7c671bb90ba1584d0098460ad8e417f848913f9", "html_url": "https://github.com/rust-lang/rust/commit/a7c671bb90ba1584d0098460ad8e417f848913f9"}], "stats": {"total": 77, "additions": 74, "deletions": 3}, "files": [{"sha": "6da7423edb89fc03937d2b93161d5857c3f8a916", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/26315bf0152c166d922de149c3ad4b5b04f56265/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26315bf0152c166d922de149c3ad4b5b04f56265/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=26315bf0152c166d922de149c3ad4b5b04f56265", "patch": "@@ -1560,13 +1560,22 @@ impl<'a> fmt::Display for Item<'a> {\n                 } else {\n                     write!(fmt, \"Module \")?;\n                 },\n-            clean::FunctionItem(..) => write!(fmt, \"Function \")?,\n+            clean::FunctionItem(..) | clean::ForeignFunctionItem(..) =>\n+                write!(fmt, \"Function \")?,\n             clean::TraitItem(..) => write!(fmt, \"Trait \")?,\n             clean::StructItem(..) => write!(fmt, \"Struct \")?,\n             clean::UnionItem(..) => write!(fmt, \"Union \")?,\n             clean::EnumItem(..) => write!(fmt, \"Enum \")?,\n+            clean::TypedefItem(..) => write!(fmt, \"Type Definition \")?,\n+            clean::MacroItem(..) => write!(fmt, \"Macro \")?,\n             clean::PrimitiveItem(..) => write!(fmt, \"Primitive Type \")?,\n-            _ => {}\n+            clean::StaticItem(..) | clean::ForeignStaticItem(..) =>\n+                write!(fmt, \"Static \")?,\n+            clean::ConstantItem(..) => write!(fmt, \"Constant \")?,\n+            _ => {\n+                // We don't generate pages for any other type.\n+                unreachable!();\n+            }\n         }\n         if !self.item.is_primitive() {\n             let cur = &self.cx.current;\n@@ -1628,7 +1637,10 @@ impl<'a> fmt::Display for Item<'a> {\n             clean::StaticItem(ref i) | clean::ForeignStaticItem(ref i) =>\n                 item_static(fmt, self.cx, self.item, i),\n             clean::ConstantItem(ref c) => item_constant(fmt, self.cx, self.item, c),\n-            _ => Ok(())\n+            _ => {\n+                // We don't generate pages for any other type.\n+                unreachable!();\n+            }\n         }\n     }\n }"}, {"sha": "a56fa420944f70b9ab900af01b75d2f09649089c", "filename": "src/test/rustdoc/titles.rs", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/26315bf0152c166d922de149c3ad4b5b04f56265/src%2Ftest%2Frustdoc%2Ftitles.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26315bf0152c166d922de149c3ad4b5b04f56265/src%2Ftest%2Frustdoc%2Ftitles.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftitles.rs?ref=26315bf0152c166d922de149c3ad4b5b04f56265", "patch": "@@ -0,0 +1,59 @@\n+// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![crate_name = \"foo\"]\n+\n+// @matches 'foo/index.html' '//h1' 'Crate foo'\n+\n+// @matches 'foo/foo_mod/index.html' '//h1' 'Module foo::foo_mod'\n+pub mod foo_mod {\n+    pub struct __Thing {}\n+}\n+\n+extern {\n+    // @matches 'foo/fn.foo_ffn.html' '//h1' 'Function foo::foo_ffn'\n+    pub fn foo_ffn();\n+}\n+\n+// @matches 'foo/fn.foo_fn.html' '//h1' 'Function foo::foo_fn'\n+pub fn foo_fn() {}\n+\n+// @matches 'foo/trait.FooTrait.html' '//h1' 'Trait foo::FooTrait'\n+pub trait FooTrait {}\n+\n+// @matches 'foo/struct.FooStruct.html' '//h1' 'Struct foo::FooStruct'\n+pub struct FooStruct;\n+\n+// @matches 'foo/enum.FooEnum.html' '//h1' 'Enum foo::FooEnum'\n+pub enum FooEnum {}\n+\n+// @matches 'foo/type.FooType.html' '//h1' 'Type Definition foo::FooType'\n+pub type FooType = FooStruct;\n+\n+// @matches 'foo/macro.foo_macro.html' '//h1' 'Macro foo::foo_macro'\n+#[macro_export]\n+macro_rules! foo_macro {\n+    () => ();\n+}\n+\n+// @matches 'foo/primitive.bool.html' '//h1' 'Primitive Type bool'\n+#[doc(primitive = \"bool\")]\n+mod bool {}\n+\n+// @matches 'foo/static.FOO_STATIC.html' '//h1' 'Static foo::FOO_STATIC'\n+pub static FOO_STATIC: FooStruct = FooStruct;\n+\n+extern {\n+    // @matches 'foo/static.FOO_FSTATIC.html' '//h1' 'Static foo::FOO_FSTATIC'\n+    pub static FOO_FSTATIC: FooStruct;\n+}\n+\n+// @matches 'foo/constant.FOO_CONSTANT.html' '//h1' 'Constant foo::FOO_CONSTANT'\n+pub const FOO_CONSTANT: FooStruct = FooStruct;"}]}