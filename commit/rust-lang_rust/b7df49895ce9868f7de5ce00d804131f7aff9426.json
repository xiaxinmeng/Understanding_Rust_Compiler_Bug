{"sha": "b7df49895ce9868f7de5ce00d804131f7aff9426", "node_id": "C_kwDOAAsO6NoAKGI3ZGY0OTg5NWNlOTg2OGY3ZGU1Y2UwMGQ4MDQxMzFmN2FmZjk0MjY", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-29T19:35:50Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-29T20:26:50Z"}, "message": "Fix spacing of pretty printed const item without body", "tree": {"sha": "b6db26516f70386e7ae95806f2e75c7da7ba9bdc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6db26516f70386e7ae95806f2e75c7da7ba9bdc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b7df49895ce9868f7de5ce00d804131f7aff9426", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHMxIoACgkQ+boUO5X/\nbYInrw/+M1AvoDYK70FZRNnyVe7OMZgyd9vgS1QEtjmBDOAngdTKzX8mpn5CF+bV\nD6l7VPaVBDuDbP3mC9I0F5tMGD9t+LErZVzkEBacaQvJZ31Cu/WlDuOO8jxyVfqG\n8OFOyYBwwR0tgHRXW5yb1cgLKvRhxqrsfbnic9qdym7bJy6RKsABEybQErfQPAON\nHs148K+ng5NX9eT0tIoTD6eD7sP8cV6bU8aHCAA2lv4aRnqbCVQqLYY02rS8G6Lo\njureuwn7FvlNKNysUIr6Ymoezz5LWUTeq/o29M5aJCaoBbCVnQ2o3C4g5JsSiCJE\ndzPwuh5hqvhcfy9rv6JwXdOULCquuCPShVj4JB6qKAZnMXToINiMDJb3BWWC77d7\n9sWLiG1mhHMVZAvjiuaKcr1gfWPc5SrXF6eH9jbos4SfAF/M65Xwf6fgbUSSEWbt\n2DYzlOOuVm5nHoISk4aP7nsq6VSlXg+mkmCW+mwFhfFxhj6u7zc6CSg1dvwBtS5r\nEpLg9fNW6Q2fZSY6zhmWfwWC0GcI3Ve+UGkm5MgIgBhn4caShd6Q6qaGtSqiySGW\n7wSyT0ChhHq/sXSGptEUVUsJKJJNuKJsoZ4k98Mh9nfP/45vPvqmJG6M/Ge1NXlk\nFe94oyYoT9fEF6MXyHkP9AcKpPiFVy+hAfftB4wGGgwL5K44CCM=\n=BI8C\n-----END PGP SIGNATURE-----", "payload": "tree b6db26516f70386e7ae95806f2e75c7da7ba9bdc\nparent 2b67c30bfece00357d5fc09d99b49f21066f04ba\nauthor David Tolnay <dtolnay@gmail.com> 1640806550 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1640809610 -0800\n\nFix spacing of pretty printed const item without body\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b7df49895ce9868f7de5ce00d804131f7aff9426", "html_url": "https://github.com/rust-lang/rust/commit/b7df49895ce9868f7de5ce00d804131f7aff9426", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b7df49895ce9868f7de5ce00d804131f7aff9426/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b67c30bfece00357d5fc09d99b49f21066f04ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b67c30bfece00357d5fc09d99b49f21066f04ba", "html_url": "https://github.com/rust-lang/rust/commit/2b67c30bfece00357d5fc09d99b49f21066f04ba"}], "stats": {"total": 34, "additions": 18, "deletions": 16}, "files": [{"sha": "6c4f38e9f63cd90d0568df2a642feeeb96e9b9bc", "filename": "compiler/rustc_ast_pretty/src/pprust/state.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b7df49895ce9868f7de5ce00d804131f7aff9426/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b7df49895ce9868f7de5ce00d804131f7aff9426/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs?ref=b7df49895ce9868f7de5ce00d804131f7aff9426", "patch": "@@ -1116,9 +1116,9 @@ impl<'a> State<'a> {\n         self.print_ident(ident);\n         self.word_space(\":\");\n         self.print_type(ty);\n-        self.space();\n         self.end(); // end the head-ibox\n         if let Some(body) = body {\n+            self.space();\n             self.word_space(\"=\");\n             self.print_expr(body);\n         }"}, {"sha": "5dd04a569e743ba3329b401c9c9aa7ac6044c6dc", "filename": "src/test/pretty/issue-68710-field-attr-proc-mac-lost.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fpretty%2Fissue-68710-field-attr-proc-mac-lost.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fpretty%2Fissue-68710-field-attr-proc-mac-lost.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fissue-68710-field-attr-proc-mac-lost.rs?ref=b7df49895ce9868f7de5ce00d804131f7aff9426", "patch": "@@ -7,7 +7,8 @@ struct C {\n }\n \n #[allow()]\n-const C: C =\n+const C: C\n+    =\n     C{\n       #[cfg(debug_assertions)]\n       field: 0,"}, {"sha": "b094ba577db2d7944744a6b5025362c9b9b919bc", "filename": "src/test/pretty/nested-item-vis-defaultness.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fpretty%2Fnested-item-vis-defaultness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fpretty%2Fnested-item-vis-defaultness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fnested-item-vis-defaultness.rs?ref=b7df49895ce9868f7de5ce00d804131f7aff9426", "patch": "@@ -6,42 +6,42 @@ fn main() {}\n \n #[cfg(FALSE)]\n extern \"C\" {\n-    static X: u8 ;\n+    static X: u8;\n     type X;\n     fn foo();\n-    pub static X: u8 ;\n+    pub static X: u8;\n     pub type X;\n     pub fn foo();\n }\n \n #[cfg(FALSE)]\n trait T {\n-    const X: u8 ;\n+    const X: u8;\n     type X;\n     fn foo();\n-    default const X: u8 ;\n+    default const X: u8;\n     default type X;\n     default fn foo();\n-    pub const X: u8 ;\n+    pub const X: u8;\n     pub type X;\n     pub fn foo();\n-    pub default const X: u8 ;\n+    pub default const X: u8;\n     pub default type X;\n     pub default fn foo();\n }\n \n #[cfg(FALSE)]\n impl T for S {\n-    const X: u8 ;\n+    const X: u8;\n     type X;\n     fn foo();\n-    default const X: u8 ;\n+    default const X: u8;\n     default type X;\n     default fn foo();\n-    pub const X: u8 ;\n+    pub const X: u8;\n     pub type X;\n     pub fn foo();\n-    pub default const X: u8 ;\n+    pub default const X: u8;\n     pub default type X;\n     pub default fn foo();\n }"}, {"sha": "7d1c05a85bcf54c3c4e0f0091591ee1adb16ca5d", "filename": "src/test/ui/macros/stringify.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fui%2Fmacros%2Fstringify.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fui%2Fmacros%2Fstringify.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fstringify.rs?ref=b7df49895ce9868f7de5ce00d804131f7aff9426", "patch": "@@ -382,13 +382,13 @@ fn test_item() {\n         stringify_item!(\n             static S: ();\n         ),\n-        \"static S: () ;\", // FIXME\n+        \"static S: ();\",\n     );\n     assert_eq!(\n         stringify_item!(\n             static mut S: ();\n         ),\n-        \"static mut S: () ;\",\n+        \"static mut S: ();\",\n     );\n \n     // ItemKind::Const\n@@ -402,7 +402,7 @@ fn test_item() {\n         stringify_item!(\n             const S: ();\n         ),\n-        \"const S: () ;\", // FIXME\n+        \"const S: ();\",\n     );\n \n     // ItemKind::Fn"}, {"sha": "d806d7c9aadd5f1627a44868c626b693f2d9d891", "filename": "src/test/ui/proc-macro/quote-debug.stdout", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fui%2Fproc-macro%2Fquote-debug.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/b7df49895ce9868f7de5ce00d804131f7aff9426/src%2Ftest%2Fui%2Fproc-macro%2Fquote-debug.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fquote-debug.stdout?ref=b7df49895ce9868f7de5ce00d804131f7aff9426", "patch": "@@ -43,7 +43,8 @@ fn main() {\n      crate::TokenStream::from(crate::TokenTree::Punct(crate::Punct::new('\\u{3b}',\n                                                                         crate::Spacing::Alone)))].iter().cloned().collect::<crate::TokenStream>()\n }\n-const _: () =\n+const _: ()\n+    =\n     {\n         extern crate proc_macro;\n         #[rustc_proc_macro_decls]"}]}