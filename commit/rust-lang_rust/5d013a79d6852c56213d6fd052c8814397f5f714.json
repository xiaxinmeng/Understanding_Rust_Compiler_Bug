{"sha": "5d013a79d6852c56213d6fd052c8814397f5f714", "node_id": "C_kwDOAAsO6NoAKDVkMDEzYTc5ZDY4NTJjNTYyMTNkNmZkMDUyYzg4MTQzOTdmNWY3MTQ", "commit": {"author": {"name": "Alex Vasilev", "email": "vaspiring@gmail.com", "date": "2023-01-24T07:49:20Z"}, "committer": {"name": "Alex Vasilev", "email": "vaspiring@gmail.com", "date": "2023-01-24T07:49:20Z"}, "message": "exclude '", "tree": {"sha": "131e187faa73e2fa7337f2d6df6899a66dd04b7e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/131e187faa73e2fa7337f2d6df6899a66dd04b7e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d013a79d6852c56213d6fd052c8814397f5f714", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d013a79d6852c56213d6fd052c8814397f5f714", "html_url": "https://github.com/rust-lang/rust/commit/5d013a79d6852c56213d6fd052c8814397f5f714", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d013a79d6852c56213d6fd052c8814397f5f714/comments", "author": {"login": "vasilev-alex", "id": 4973437, "node_id": "MDQ6VXNlcjQ5NzM0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4973437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilev-alex", "html_url": "https://github.com/vasilev-alex", "followers_url": "https://api.github.com/users/vasilev-alex/followers", "following_url": "https://api.github.com/users/vasilev-alex/following{/other_user}", "gists_url": "https://api.github.com/users/vasilev-alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilev-alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilev-alex/subscriptions", "organizations_url": "https://api.github.com/users/vasilev-alex/orgs", "repos_url": "https://api.github.com/users/vasilev-alex/repos", "events_url": "https://api.github.com/users/vasilev-alex/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilev-alex/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vasilev-alex", "id": 4973437, "node_id": "MDQ6VXNlcjQ5NzM0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/4973437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vasilev-alex", "html_url": "https://github.com/vasilev-alex", "followers_url": "https://api.github.com/users/vasilev-alex/followers", "following_url": "https://api.github.com/users/vasilev-alex/following{/other_user}", "gists_url": "https://api.github.com/users/vasilev-alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/vasilev-alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vasilev-alex/subscriptions", "organizations_url": "https://api.github.com/users/vasilev-alex/orgs", "repos_url": "https://api.github.com/users/vasilev-alex/repos", "events_url": "https://api.github.com/users/vasilev-alex/events{/privacy}", "received_events_url": "https://api.github.com/users/vasilev-alex/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5f1796f837c19b55eb628a0c90c769365bdead00", "url": "https://api.github.com/repos/rust-lang/rust/commits/5f1796f837c19b55eb628a0c90c769365bdead00", "html_url": "https://github.com/rust-lang/rust/commit/5f1796f837c19b55eb628a0c90c769365bdead00"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "25d165d11137e0088253b90a41aa21fe2f440d3b", "filename": "crates/ide/src/rename.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5d013a79d6852c56213d6fd052c8814397f5f714/crates%2Fide%2Fsrc%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d013a79d6852c56213d6fd052c8814397f5f714/crates%2Fide%2Fsrc%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Frename.rs?ref=5d013a79d6852c56213d6fd052c8814397f5f714", "patch": "@@ -13,7 +13,7 @@ use ide_db::{\n };\n use itertools::Itertools;\n use stdx::{always, never};\n-use syntax::{ast, AstNode, SyntaxNode};\n+use syntax::{ast, AstNode, SyntaxNode, TextRange, TextSize};\n \n use text_edit::TextEdit;\n \n@@ -48,7 +48,13 @@ pub(crate) fn prepare_rename(\n                 frange.range.contains_inclusive(position.offset)\n                     && frange.file_id == position.file_id\n             );\n-            Ok(frange.range)\n+\n+            Ok(match name_like {\n+                ast::NameLike::Lifetime(_) => {\n+                    TextRange::new(frange.range.start() + TextSize::from(1), frange.range.end())\n+                }\n+                _ => frange.range,\n+            })\n         })\n         .reduce(|acc, cur| match (acc, cur) {\n             // ensure all ranges are the same\n@@ -407,7 +413,7 @@ mod tests {\n     #[test]\n     fn test_prepare_rename_namelikes() {\n         check_prepare(r\"fn name$0<'lifetime>() {}\", expect![[r#\"3..7: name\"#]]);\n-        check_prepare(r\"fn name<'lifetime$0>() {}\", expect![[r#\"8..17: 'lifetime\"#]]);\n+        check_prepare(r\"fn name<'lifetime$0>() {}\", expect![[r#\"9..17: lifetime\"#]]);\n         check_prepare(r\"fn name<'lifetime>() { name$0(); }\", expect![[r#\"23..27: name\"#]]);\n     }\n "}]}