{"sha": "e18389d2684a8da9937fe37f9598fabf67c65fee", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxODM4OWQyNjg0YThkYTk5MzdmZTM3Zjk1OThmYWJmNjdjNjVmZWU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-06-30T10:05:51Z"}, "committer": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-06-30T10:05:51Z"}, "message": "Merge #1461\n\n1461: Support attributes on array members r=matklad a=etaoins\n\nArray members are allowed to have attributes such as `#[cfg]`.\n\nCo-authored-by: Ryan Cumming <etaoins@gmail.com>", "tree": {"sha": "57b5338eb38b1f6cd0a254a7f3aa793bb44d815e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57b5338eb38b1f6cd0a254a7f3aa793bb44d815e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e18389d2684a8da9937fe37f9598fabf67c65fee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e18389d2684a8da9937fe37f9598fabf67c65fee", "html_url": "https://github.com/rust-lang/rust/commit/e18389d2684a8da9937fe37f9598fabf67c65fee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e18389d2684a8da9937fe37f9598fabf67c65fee/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "fb2534f30089ddd796dbf52c7bb639efe5d10a3e", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb2534f30089ddd796dbf52c7bb639efe5d10a3e", "html_url": "https://github.com/rust-lang/rust/commit/fb2534f30089ddd796dbf52c7bb639efe5d10a3e"}, {"sha": "2959aa446e452d2176f9db453e52047453a3904e", "url": "https://api.github.com/repos/rust-lang/rust/commits/2959aa446e452d2176f9db453e52047453a3904e", "html_url": "https://github.com/rust-lang/rust/commit/2959aa446e452d2176f9db453e52047453a3904e"}], "stats": {"total": 129, "additions": 129, "deletions": 0}, "files": [{"sha": "6bda041416438405b3e594923793b480be51ef22", "filename": "crates/ra_parser/src/grammar/expressions/atom.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions%2Fatom.rs?ref=e18389d2684a8da9937fe37f9598fabf67c65fee", "patch": "@@ -170,6 +170,15 @@ fn array_expr(p: &mut Parser) -> CompletedMarker {\n     if p.eat(T![']']) {\n         return m.complete(p, ARRAY_EXPR);\n     }\n+\n+    // test first_array_member_attributes\n+    // pub const A: &[i64] = &[\n+    //    #[cfg(test)]\n+    //    1,\n+    //    2,\n+    // ];\n+    attributes::outer_attributes(p);\n+\n     expr(p);\n     if p.eat(T![;]) {\n         expr(p);\n@@ -181,6 +190,14 @@ fn array_expr(p: &mut Parser) -> CompletedMarker {\n         if p.at(T![']']) {\n             break;\n         }\n+\n+        // test subsequent_array_member_attributes\n+        // pub const A: &[i64] = &[\n+        //    1,\n+        //    #[cfg(test)]\n+        //    2,\n+        // ];\n+        attributes::outer_attributes(p);\n         if !p.at_ts(EXPR_FIRST) {\n             p.error(\"expected expression\");\n             break;"}, {"sha": "f59e1377118f41973fcccc9e9a1ff88e1746fc87", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0135_first_array_member_attributes.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.rs?ref=e18389d2684a8da9937fe37f9598fabf67c65fee", "patch": "@@ -0,0 +1,5 @@\n+pub const A: &[i64] = &[\n+   #[cfg(test)]\n+   1,\n+   2,\n+];"}, {"sha": "eac4f6f308581af1790a9f898088208b54e482af", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0135_first_array_member_attributes.txt", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0135_first_array_member_attributes.txt?ref=e18389d2684a8da9937fe37f9598fabf67c65fee", "patch": "@@ -0,0 +1,51 @@\n+SOURCE_FILE@[0; 56)\n+  CONST_DEF@[0; 55)\n+    VISIBILITY@[0; 3)\n+      PUB_KW@[0; 3) \"pub\"\n+    WHITESPACE@[3; 4) \" \"\n+    CONST_KW@[4; 9) \"const\"\n+    WHITESPACE@[9; 10) \" \"\n+    NAME@[10; 11)\n+      IDENT@[10; 11) \"A\"\n+    COLON@[11; 12) \":\"\n+    WHITESPACE@[12; 13) \" \"\n+    REFERENCE_TYPE@[13; 19)\n+      AMP@[13; 14) \"&\"\n+      SLICE_TYPE@[14; 19)\n+        L_BRACK@[14; 15) \"[\"\n+        PATH_TYPE@[15; 18)\n+          PATH@[15; 18)\n+            PATH_SEGMENT@[15; 18)\n+              NAME_REF@[15; 18)\n+                IDENT@[15; 18) \"i64\"\n+        R_BRACK@[18; 19) \"]\"\n+    WHITESPACE@[19; 20) \" \"\n+    EQ@[20; 21) \"=\"\n+    WHITESPACE@[21; 22) \" \"\n+    REF_EXPR@[22; 54)\n+      AMP@[22; 23) \"&\"\n+      ARRAY_EXPR@[23; 54)\n+        L_BRACK@[23; 24) \"[\"\n+        WHITESPACE@[24; 28) \"\\n   \"\n+        ATTR@[28; 40)\n+          POUND@[28; 29) \"#\"\n+          TOKEN_TREE@[29; 40)\n+            L_BRACK@[29; 30) \"[\"\n+            IDENT@[30; 33) \"cfg\"\n+            TOKEN_TREE@[33; 39)\n+              L_PAREN@[33; 34) \"(\"\n+              IDENT@[34; 38) \"test\"\n+              R_PAREN@[38; 39) \")\"\n+            R_BRACK@[39; 40) \"]\"\n+        WHITESPACE@[40; 44) \"\\n   \"\n+        LITERAL@[44; 45)\n+          INT_NUMBER@[44; 45) \"1\"\n+        COMMA@[45; 46) \",\"\n+        WHITESPACE@[46; 50) \"\\n   \"\n+        LITERAL@[50; 51)\n+          INT_NUMBER@[50; 51) \"2\"\n+        COMMA@[51; 52) \",\"\n+        WHITESPACE@[52; 53) \"\\n\"\n+        R_BRACK@[53; 54) \"]\"\n+    SEMI@[54; 55) \";\"\n+  WHITESPACE@[55; 56) \"\\n\""}, {"sha": "1324acb3f69cf8097d33d148b87678ee85bf7eef", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0136_subsequent_array_member_attributes.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.rs?ref=e18389d2684a8da9937fe37f9598fabf67c65fee", "patch": "@@ -0,0 +1,5 @@\n+pub const A: &[i64] = &[\n+   1,\n+   #[cfg(test)]\n+   2,\n+];"}, {"sha": "6fa1b42d91700f6d6e5e90fd8f586ba62253870c", "filename": "crates/ra_syntax/tests/data/parser/inline/ok/0136_subsequent_array_member_attributes.txt", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.txt", "raw_url": "https://github.com/rust-lang/rust/raw/e18389d2684a8da9937fe37f9598fabf67c65fee/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftests%2Fdata%2Fparser%2Finline%2Fok%2F0136_subsequent_array_member_attributes.txt?ref=e18389d2684a8da9937fe37f9598fabf67c65fee", "patch": "@@ -0,0 +1,51 @@\n+SOURCE_FILE@[0; 56)\n+  CONST_DEF@[0; 55)\n+    VISIBILITY@[0; 3)\n+      PUB_KW@[0; 3) \"pub\"\n+    WHITESPACE@[3; 4) \" \"\n+    CONST_KW@[4; 9) \"const\"\n+    WHITESPACE@[9; 10) \" \"\n+    NAME@[10; 11)\n+      IDENT@[10; 11) \"A\"\n+    COLON@[11; 12) \":\"\n+    WHITESPACE@[12; 13) \" \"\n+    REFERENCE_TYPE@[13; 19)\n+      AMP@[13; 14) \"&\"\n+      SLICE_TYPE@[14; 19)\n+        L_BRACK@[14; 15) \"[\"\n+        PATH_TYPE@[15; 18)\n+          PATH@[15; 18)\n+            PATH_SEGMENT@[15; 18)\n+              NAME_REF@[15; 18)\n+                IDENT@[15; 18) \"i64\"\n+        R_BRACK@[18; 19) \"]\"\n+    WHITESPACE@[19; 20) \" \"\n+    EQ@[20; 21) \"=\"\n+    WHITESPACE@[21; 22) \" \"\n+    REF_EXPR@[22; 54)\n+      AMP@[22; 23) \"&\"\n+      ARRAY_EXPR@[23; 54)\n+        L_BRACK@[23; 24) \"[\"\n+        WHITESPACE@[24; 28) \"\\n   \"\n+        LITERAL@[28; 29)\n+          INT_NUMBER@[28; 29) \"1\"\n+        COMMA@[29; 30) \",\"\n+        WHITESPACE@[30; 34) \"\\n   \"\n+        ATTR@[34; 46)\n+          POUND@[34; 35) \"#\"\n+          TOKEN_TREE@[35; 46)\n+            L_BRACK@[35; 36) \"[\"\n+            IDENT@[36; 39) \"cfg\"\n+            TOKEN_TREE@[39; 45)\n+              L_PAREN@[39; 40) \"(\"\n+              IDENT@[40; 44) \"test\"\n+              R_PAREN@[44; 45) \")\"\n+            R_BRACK@[45; 46) \"]\"\n+        WHITESPACE@[46; 50) \"\\n   \"\n+        LITERAL@[50; 51)\n+          INT_NUMBER@[50; 51) \"2\"\n+        COMMA@[51; 52) \",\"\n+        WHITESPACE@[52; 53) \"\\n\"\n+        R_BRACK@[53; 54) \"]\"\n+    SEMI@[54; 55) \";\"\n+  WHITESPACE@[55; 56) \"\\n\""}]}