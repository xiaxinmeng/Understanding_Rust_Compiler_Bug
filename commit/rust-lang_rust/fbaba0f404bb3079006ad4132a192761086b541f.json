{"sha": "fbaba0f404bb3079006ad4132a192761086b541f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiYWJhMGY0MDRiYjMwNzkwMDZhZDQxMzJhMTkyNzYxMDg2YjU0MWY=", "commit": {"author": {"name": "Jeff Olson", "email": "olson.jeffery@gmail.com", "date": "2012-04-28T04:01:31Z"}, "committer": {"name": "Jeff Olson", "email": "olson.jeffery@gmail.com", "date": "2012-04-28T05:19:30Z"}, "message": "std: add ll::loop_refcount binding for uv_loop_refcount", "tree": {"sha": "c7004fbec03ee0ce90e0954118e7f1775a758159", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7004fbec03ee0ce90e0954118e7f1775a758159"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fbaba0f404bb3079006ad4132a192761086b541f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fbaba0f404bb3079006ad4132a192761086b541f", "html_url": "https://github.com/rust-lang/rust/commit/fbaba0f404bb3079006ad4132a192761086b541f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fbaba0f404bb3079006ad4132a192761086b541f/comments", "author": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "committer": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e348567f77be77db01fc6d2f9184ef38adfdbf4d", "url": "https://api.github.com/repos/rust-lang/rust/commits/e348567f77be77db01fc6d2f9184ef38adfdbf4d", "html_url": "https://github.com/rust-lang/rust/commit/e348567f77be77db01fc6d2f9184ef38adfdbf4d"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "31d36430aec43f608b0cf94a92c26d16f7480ae5", "filename": "src/libstd/uv_ll.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fbaba0f404bb3079006ad4132a192761086b541f/src%2Flibstd%2Fuv_ll.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fbaba0f404bb3079006ad4132a192761086b541f/src%2Flibstd%2Fuv_ll.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fuv_ll.rs?ref=fbaba0f404bb3079006ad4132a192761086b541f", "patch": "@@ -512,6 +512,7 @@ mod uv_ll_struct_stubgen {\n native mod rustrt {\n     fn rust_uv_loop_new() -> *libc::c_void;\n     fn rust_uv_loop_delete(lp: *libc::c_void);\n+    fn rust_uv_loop_refcount(loop_ptr: *libc::c_void) -> libc::c_int;\n     fn rust_uv_run(loop_handle: *libc::c_void);\n     fn rust_uv_close(handle: *libc::c_void, cb: *u8);\n     fn rust_uv_async_send(handle: *uv_async_t);\n@@ -601,6 +602,10 @@ unsafe fn loop_delete(loop_handle: *libc::c_void) {\n     rustrt::rust_uv_loop_delete(loop_handle);\n }\n \n+unsafe fn loop_refcount(loop_ptr: *libc::c_void) -> libc::c_int {\n+    ret rustrt::rust_uv_loop_refcount(loop_ptr);\n+}\n+\n unsafe fn run(loop_handle: *libc::c_void) {\n     rustrt::rust_uv_run(loop_handle);\n }"}, {"sha": "84cf14f47ed85c8d073cb034376d8340d31d1977", "filename": "src/rt/rust_uv.cpp", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fbaba0f404bb3079006ad4132a192761086b541f/src%2Frt%2Frust_uv.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/fbaba0f404bb3079006ad4132a192761086b541f/src%2Frt%2Frust_uv.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_uv.cpp?ref=fbaba0f404bb3079006ad4132a192761086b541f", "patch": "@@ -111,6 +111,11 @@ rust_uv_loop_delete(uv_loop_t* loop) {\n     uv_loop_delete(loop);\n }\n \n+extern \"C\" int\n+rust_uv_loop_refcount(uv_loop_t* loop) {\n+\treturn uv_loop_refcount(loop);\n+}\n+\n extern \"C\" void\n rust_uv_loop_set_data(uv_loop_t* loop, void* data) {\n     loop->data = data;"}, {"sha": "49d6320274151a37bf720c60cf247435c4601e33", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fbaba0f404bb3079006ad4132a192761086b541f/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/fbaba0f404bb3079006ad4132a192761086b541f/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=fbaba0f404bb3079006ad4132a192761086b541f", "patch": "@@ -86,6 +86,7 @@ upcall_del_stack\n upcall_reset_stack_limit\n rust_uv_loop_new\n rust_uv_loop_delete\n+rust_uv_loop_refcount\n rust_uv_loop_set_data\n rust_uv_bind_op_cb\n rust_uv_stop_op_cb"}]}