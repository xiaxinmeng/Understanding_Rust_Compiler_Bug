{"sha": "193809ec3ad035f45724f31328142f38a4e9f66a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5MzgwOWVjM2FkMDM1ZjQ1NzI0ZjMxMzI4MTQyZjM4YTRlOWY2NmE=", "commit": {"author": {"name": "AB1908", "email": "abhishekbhattachejree@live.com", "date": "2019-01-16T05:32:03Z"}, "committer": {"name": "AB1908", "email": "abhishekbhattachejree@live.com", "date": "2019-01-16T05:34:40Z"}, "message": "Add regression test to close #53787", "tree": {"sha": "26d6e5e2ecd000da54e341df962e04cca60755b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/26d6e5e2ecd000da54e341df962e04cca60755b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/193809ec3ad035f45724f31328142f38a4e9f66a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/193809ec3ad035f45724f31328142f38a4e9f66a", "html_url": "https://github.com/rust-lang/rust/commit/193809ec3ad035f45724f31328142f38a4e9f66a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/193809ec3ad035f45724f31328142f38a4e9f66a/comments", "author": null, "committer": null, "parents": [{"sha": "1a3a3dfcdd7faf0b8ab266a79a4a35ab30e5136a", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a3a3dfcdd7faf0b8ab266a79a4a35ab30e5136a", "html_url": "https://github.com/rust-lang/rust/commit/1a3a3dfcdd7faf0b8ab266a79a4a35ab30e5136a"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "4f1048f787daba8e3e4de6101e6ef64cd0d172e4", "filename": "src/test/ui/issue-53787-inline-assembler-macro.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/193809ec3ad035f45724f31328142f38a4e9f66a/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/193809ec3ad035f45724f31328142f38a4e9f66a/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.rs?ref=193809ec3ad035f45724f31328142f38a4e9f66a", "patch": "@@ -0,0 +1,24 @@\n+// Regression test for Issue #53787: Fix ICE when creating a label in inline assembler with macros.\n+\n+#![feature(asm)]\n+\n+macro_rules! fake_jump {\n+    ($id:expr) => {\n+        unsafe {\n+            \n+            asm!(\n+            \"\n+            jmp $0\n+            lea eax, [ebx]\n+            xor eax, 0xDEADBEEF\n+            retn\n+            $0:\n+            \"::\"0\"($id)::\"volatile\", \"intel\");\n+        }\n+    };\n+}\n+\n+fn main() {\n+    fake_jump!(\"FirstFunc\"); //~ ERROR invalid value for constraint in inline assembly\n+    println!(\"Hello, world!\");\n+}"}, {"sha": "f63b2e19327545517024c8c5b97b43e2cecbccab", "filename": "src/test/ui/issue-53787-inline-assembler-macro.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/193809ec3ad035f45724f31328142f38a4e9f66a/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/193809ec3ad035f45724f31328142f38a4e9f66a/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-53787-inline-assembler-macro.stderr?ref=193809ec3ad035f45724f31328142f38a4e9f66a", "patch": "@@ -0,0 +1,9 @@\n+error[E0669]: invalid value for constraint in inline assembly\n+  --> $DIR/issue-53787-inline-assembler-macro.rs:22:16\n+   |\n+LL |     fake_jump!(\"FirstFunc\"); //~ ERROR invalid value for constraint in inline assembly\n+   |                ^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0669`."}]}