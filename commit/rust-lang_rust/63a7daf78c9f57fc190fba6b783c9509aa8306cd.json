{"sha": "63a7daf78c9f57fc190fba6b783c9509aa8306cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzYTdkYWY3OGM5ZjU3ZmMxOTBmYmE2Yjc4M2M5NTA5YWE4MzA2Y2Q=", "commit": {"author": {"name": "flip1995", "email": "uwdkn@student.kit.edu", "date": "2018-02-06T12:05:20Z"}, "committer": {"name": "flip1995", "email": "uwdkn@student.kit.edu", "date": "2018-02-06T12:05:20Z"}, "message": "Make decimal_literal_representation a restriction lint", "tree": {"sha": "846cf0adb88588779a92c0086bd91b0d04fdff7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/846cf0adb88588779a92c0086bd91b0d04fdff7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63a7daf78c9f57fc190fba6b783c9509aa8306cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63a7daf78c9f57fc190fba6b783c9509aa8306cd", "html_url": "https://github.com/rust-lang/rust/commit/63a7daf78c9f57fc190fba6b783c9509aa8306cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63a7daf78c9f57fc190fba6b783c9509aa8306cd/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c322a74980f515449c72909810172c55d5e97565", "url": "https://api.github.com/repos/rust-lang/rust/commits/c322a74980f515449c72909810172c55d5e97565", "html_url": "https://github.com/rust-lang/rust/commit/c322a74980f515449c72909810172c55d5e97565"}], "stats": {"total": 61, "additions": 25, "deletions": 36}, "files": [{"sha": "bec46ba180c62ca963fcd3139a0346d55b803420", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=63a7daf78c9f57fc190fba6b783c9509aa8306cd", "patch": "@@ -382,6 +382,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n         else_if_without_else::ELSE_IF_WITHOUT_ELSE,\n         methods::CLONE_ON_REF_PTR,\n         misc::FLOAT_CMP_CONST,\n+        literal_representation::DECIMAL_LITERAL_REPRESENTATION,\n     ]);\n \n     reg.register_lint_group(\"clippy_pedantic\", vec![\n@@ -496,7 +497,6 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n         let_if_seq::USELESS_LET_IF_SEQ,\n         lifetimes::NEEDLESS_LIFETIMES,\n         lifetimes::UNUSED_LIFETIMES,\n-        literal_representation::DECIMAL_LITERAL_REPRESENTATION,\n         literal_representation::INCONSISTENT_DIGIT_GROUPING,\n         literal_representation::LARGE_DIGIT_GROUPS,\n         literal_representation::UNREADABLE_LITERAL,"}, {"sha": "9633ac00b1541355a3d946807a2b48be3e7d4425", "filename": "clippy_lints/src/literal_representation.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Fliteral_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Fliteral_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fliteral_representation.rs?ref=63a7daf78c9f57fc190fba6b783c9509aa8306cd", "patch": "@@ -74,9 +74,8 @@ declare_lint! {\n /// `255` => `0xFF`\n /// `65_535` => `0xFFFF`\n /// `4_042_322_160` => `0xF0F0_F0F0`\n-declare_lint! {\n+declare_restriction_lint! {\n     pub DECIMAL_LITERAL_REPRESENTATION,\n-    Warn,\n     \"using decimal representation when hexadecimal would be better\"\n }\n "}, {"sha": "9f40713f6e42b754ccc582bf4a36c1f945c09970", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63a7daf78c9f57fc190fba6b783c9509aa8306cd/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=63a7daf78c9f57fc190fba6b783c9509aa8306cd", "patch": "@@ -178,7 +178,7 @@ define_Conf! {\n     /// Lint: VERBOSE_BIT_MASK. The maximum allowed size of a bit mask before suggesting to use 'trailing_zeros'\n     (verbose_bit_mask_threshold, \"verbose_bit_mask_threshold\", 1 => u64),\n     /// Lint: DECIMAL_LITERAL_REPRESENTATION. The lower bound for linting decimal literals\n-    (literal_representation_threshold, \"literal_representation_threshold\", 4096 => u64),\n+    (literal_representation_threshold, \"literal_representation_threshold\", 16384 => u64),\n }\n \n /// Search for the configuration file."}, {"sha": "5463b8957f325cef1bbf7cdffbc9a2b35ea6a095", "filename": "tests/ui/decimal_literal_representation.rs", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/63a7daf78c9f57fc190fba6b783c9509aa8306cd/tests%2Fui%2Fdecimal_literal_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63a7daf78c9f57fc190fba6b783c9509aa8306cd/tests%2Fui%2Fdecimal_literal_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdecimal_literal_representation.rs?ref=63a7daf78c9f57fc190fba6b783c9509aa8306cd", "patch": "@@ -4,11 +4,17 @@\n #[warn(decimal_literal_representation)]\n #[allow(unused_variables)]\n fn main() {\n-    // Hex:      7F,  80, 100, 1FF,  800,  FFA,   F0F3,     7F0F_F00D\n-    let good = (127, 128, 256, 511, 2048, 4090, 61_683, 2_131_750_925);\n+    let good = (        // Hex:\n+        127,            // 0x7F\n+        256,            // 0x100\n+        511,            // 0x1FF\n+        2048,           // 0x800\n+        4090,           // 0xFFA\n+        16_371,         // 0x3FF3\n+        61_683,         // 0xF0F3\n+        2_131_750_925,  // 0x7F0F_F00D\n+    );\n     let bad = (        // Hex:\n-        4096,          // 0x1000\n-        16_371,        // 0x3FF3\n         32_773,        // 0x8005\n         65_280,        // 0xFF00\n         2_131_750_927, // 0x7F0F_F00F"}, {"sha": "e3fbeba814838ae86170f34d4c926fb51844bb0d", "filename": "tests/ui/decimal_literal_representation.stderr", "status": "modified", "additions": 12, "deletions": 28, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/63a7daf78c9f57fc190fba6b783c9509aa8306cd/tests%2Fui%2Fdecimal_literal_representation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/63a7daf78c9f57fc190fba6b783c9509aa8306cd/tests%2Fui%2Fdecimal_literal_representation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdecimal_literal_representation.stderr?ref=63a7daf78c9f57fc190fba6b783c9509aa8306cd", "patch": "@@ -1,59 +1,43 @@\n error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:10:9\n+  --> $DIR/decimal_literal_representation.rs:18:9\n    |\n-10 |         4096,          // 0x1000\n-   |         ^^^^\n-   |\n-   = note: `-D decimal-literal-representation` implied by `-D warnings`\n-   = help: consider: 0x1000\n-\n-error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:11:9\n-   |\n-11 |         16_371,        // 0x3FF3\n-   |         ^^^^^^\n-   |\n-   = help: consider: 0x3FF3\n-\n-error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:12:9\n-   |\n-12 |         32_773,        // 0x8005\n+18 |         32_773,        // 0x8005\n    |         ^^^^^^\n    |\n+   = note: `-D decimal-literal-representation` implied by `-D warnings`\n    = help: consider: 0x8005\n \n error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:13:9\n+  --> $DIR/decimal_literal_representation.rs:19:9\n    |\n-13 |         65_280,        // 0xFF00\n+19 |         65_280,        // 0xFF00\n    |         ^^^^^^\n    |\n    = help: consider: 0xFF00\n \n error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:14:9\n+  --> $DIR/decimal_literal_representation.rs:20:9\n    |\n-14 |         2_131_750_927, // 0x7F0F_F00F\n+20 |         2_131_750_927, // 0x7F0F_F00F\n    |         ^^^^^^^^^^^^^\n    |\n    = help: consider: 0x7F0F_F00F\n \n error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:15:9\n+  --> $DIR/decimal_literal_representation.rs:21:9\n    |\n-15 |         2_147_483_647, // 0x7FFF_FFFF\n+21 |         2_147_483_647, // 0x7FFF_FFFF\n    |         ^^^^^^^^^^^^^\n    |\n    = help: consider: 0x7FFF_FFFF\n \n error: integer literal has a better hexadecimal representation\n-  --> $DIR/decimal_literal_representation.rs:16:9\n+  --> $DIR/decimal_literal_representation.rs:22:9\n    |\n-16 |         4_042_322_160, // 0xF0F0_F0F0\n+22 |         4_042_322_160, // 0xF0F0_F0F0\n    |         ^^^^^^^^^^^^^\n    |\n    = help: consider: 0xF0F0_F0F0\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 5 previous errors\n "}]}