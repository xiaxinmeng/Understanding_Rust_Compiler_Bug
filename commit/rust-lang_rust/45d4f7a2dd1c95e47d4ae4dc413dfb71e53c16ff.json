{"sha": "45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1ZDRmN2EyZGQxYzk1ZTQ3ZDRhZTRkYzQxM2RmYjcxZTUzYzE2ZmY=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-24T01:45:18Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2017-11-24T01:45:18Z"}, "message": "struct_lit_multiline_style -> struct_lit_single_line (and make it a bool)", "tree": {"sha": "ae36159dbd29c265fa5e29ace474bc3fd8ca6119", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae36159dbd29c265fa5e29ace474bc3fd8ca6119"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "html_url": "https://github.com/rust-lang/rust/commit/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20805acf42e1bc78c0434276b71309df0a583045", "url": "https://api.github.com/repos/rust-lang/rust/commits/20805acf42e1bc78c0434276b71309df0a583045", "html_url": "https://github.com/rust-lang/rust/commit/20805acf42e1bc78c0434276b71309df0a583045"}], "stats": {"total": 60, "additions": 22, "deletions": 38}, "files": [{"sha": "275d4883760d7d5b003b673d53ba879414f1cb98", "filename": "Configurations.md", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -246,7 +246,7 @@ let lorem = Lorem { ipsum: dolor,\n                     sit: amet, };\n ```\n \n-See also: [`struct_lit_multiline_style`](#struct_lit_multiline_style), [`indent_style`](#indent_style).\n+See also: [`struct_lit_single_line`](#struct_lit_single_line), [`indent_style`](#indent_style).\n \n ### Where predicates\n \n@@ -1746,20 +1746,20 @@ let lorem: [ usize; 2 ] = [ ipsum, dolor ];\n \n See also: [`spaces_within_parens_and_brackets`](#spaces_within_parens_and_brackets), [`spaces_within_parens_and_brackets`](#spaces_within_parens_and_brackets).\n \n-## `struct_lit_multiline_style`\n+## `struct_lit_single_line`\n \n-Multiline style on literal structs\n+Put small struct literals on a single line\n \n-- **Default value**: `\"PreferSingle\"`\n-- **Possible values**: `\"ForceMulti\"`, `\"PreferSingle\"`\n+- **Default value**: `true`\n+- **Possible values**: `true`, `false`\n \n-#### `\"PreferSingle\"` (default):\n+#### `true` (default):\n \n ```rust\n let lorem = Lorem { ipsum: dolor, sit: amet };\n ```\n \n-#### `\"ForceMulti\"`:\n+#### `false`:\n \n ```rust\n let lorem = Lorem {\n@@ -1787,7 +1787,7 @@ let lorem = Lorem { ipsum: dolor, sit: amet };\n #### Lines longer than `struct_lit_width`:\n See [`indent_style`](#indent_style).\n \n-See also: [`struct_lit_multiline_style`](#struct_lit_multiline_style), [`indent_style`](#indent_style).\n+See also: [`struct_lit_single_line`](#struct_lit_single_line), [`indent_style`](#indent_style).\n \n ## `struct_variant_width`\n "}, {"sha": "88af2b5e0a0abfc7cb43e295136adf6cde7ea219", "filename": "src/config.rs", "status": "modified", "additions": 2, "deletions": 18, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -100,22 +100,6 @@ impl Density {\n     }\n }\n \n-configuration_option_enum! { MultilineStyle:\n-    // Use horizontal layout if it fits in one line, fall back to vertical\n-    PreferSingle,\n-    // Use vertical layout\n-    ForceMulti,\n-}\n-\n-impl MultilineStyle {\n-    pub fn to_list_tactic(self) -> ListTactic {\n-        match self {\n-            MultilineStyle::PreferSingle => ListTactic::HorizontalVertical,\n-            MultilineStyle::ForceMulti => ListTactic::Vertical,\n-        }\n-    }\n-}\n-\n configuration_option_enum! { ReportTactic:\n     Always,\n     Unnumbered,\n@@ -563,8 +547,8 @@ create_config! {\n     where_density: Density, Density::Vertical, false, \"Density of a where clause\";\n     where_single_line: bool, false, false, \"To force single line where layout\";\n     where_layout: ListTactic, ListTactic::Vertical, false, \"Element layout inside a where clause\";\n-    struct_lit_multiline_style: MultilineStyle, MultilineStyle::PreferSingle, false,\n-        \"Multiline style on literal structs\";\n+    struct_lit_single_line: bool, true, false,\n+        \"Put small struct literals on a single line\";\n     report_todo: ReportTactic, ReportTactic::Never, false,\n         \"Report all, none or unnumbered occurrences of TODO in source file comments\";\n     report_fixme: ReportTactic, ReportTactic::Never, false,"}, {"sha": "b9c33a52be75758b4c0f16b47cef608559687507", "filename": "src/expr.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -21,7 +21,7 @@ use closures;\n use codemap::{LineRangeUtils, SpanUtils};\n use comment::{combine_strs_with_missing_comments, contains_comment, recover_comment_removed,\n               rewrite_comment, rewrite_missing_comment, FindUncommented};\n-use config::{Config, ControlBraceStyle, IndentStyle, MultilineStyle};\n+use config::{Config, ControlBraceStyle, IndentStyle};\n use lists::{definitive_tactic, itemize_list, shape_for_tactic, struct_lit_formatting,\n             struct_lit_shape, struct_lit_tactic, write_list, DefinitiveListTactic, ListFormatting,\n             ListItem, ListTactic, Separator, SeparatorPlace, SeparatorTactic};\n@@ -2346,8 +2346,7 @@ pub fn wrap_struct_field(\n     one_line_width: usize,\n ) -> String {\n     if context.config.indent_style() == IndentStyle::Block\n-        && (fields_str.contains('\\n')\n-            || context.config.struct_lit_multiline_style() == MultilineStyle::ForceMulti\n+        && (fields_str.contains('\\n') || !context.config.struct_lit_single_line()\n             || fields_str.len() > one_line_width)\n     {\n         format!("}, {"sha": "5f8149c6f3ee4c21bb5a34909f45989b723f71d5", "filename": "src/lists.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -796,7 +796,8 @@ pub fn struct_lit_tactic(\n     if let Some(h_shape) = h_shape {\n         let prelim_tactic = match (context.config.indent_style(), items.len()) {\n             (IndentStyle::Visual, 1) => ListTactic::HorizontalVertical,\n-            _ => context.config.struct_lit_multiline_style().to_list_tactic(),\n+            _ if context.config.struct_lit_single_line() => ListTactic::HorizontalVertical,\n+            _ => ListTactic::Vertical,\n         };\n         definitive_tactic(items, prelim_tactic, Separator::Comma, h_shape.width)\n     } else {"}, {"sha": "17cad8dde290d1cf68943588c39ab26cfac9b4ea", "filename": "tests/source/configs-struct_lit_single_line-false.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fconfigs-struct_lit_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fconfigs-struct_lit_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-struct_lit_single_line-false.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n // Struct literal multiline-style\n \n fn main() {", "previous_filename": "tests/source/configs-struct_lit_multiline_style-force_multi.rs"}, {"sha": "363bf5b114e2d5da741520c0ea22829669b982d1", "filename": "tests/source/configs-struct_lit_single_line-true.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fconfigs-struct_lit_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fconfigs-struct_lit_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-struct_lit_single_line-true.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-struct_lit_multiline_style: PreferSingle\n+// rustfmt-struct_lit_single_line: true\n // rustfmt-struct_lit_width: 100\n // Struct literal multiline-style\n ", "previous_filename": "tests/source/configs-struct_lit_multiline_style-prefer_single.rs"}, {"sha": "256ba1bbda3b1971bb1a53726ef28494c3e245b4", "filename": "tests/source/struct_lits_multiline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fstruct_lits_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fstruct_lits_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fstruct_lits_multiline.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,6 +1,6 @@\n // rustfmt-normalize_comments: true\n // rustfmt-wrap_comments: true\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n \n // Struct literal expressions.\n "}, {"sha": "d0b5ea6efbaea7f6e36aa950b4cac2fdd008cb6d", "filename": "tests/source/struct_lits_visual_multiline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fstruct_lits_visual_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Fsource%2Fstruct_lits_visual_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fstruct_lits_visual_multiline.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,7 +1,7 @@\n // rustfmt-normalize_comments: true\n // rustfmt-wrap_comments: true\n // rustfmt-indent_style: Visual\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n // rustfmt-error_on_line_overflow: false\n \n // Struct literal expressions."}, {"sha": "e2732b5a7c9b40278c66b6eaffb8405cd4a02e52", "filename": "tests/target/configs-struct_lit_single_line-false.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fconfigs-struct_lit_single_line-false.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fconfigs-struct_lit_single_line-false.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-struct_lit_single_line-false.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n // Struct literal multiline-style\n \n fn main() {", "previous_filename": "tests/target/configs-struct_lit_multiline_style-force_multi.rs"}, {"sha": "363bf5b114e2d5da741520c0ea22829669b982d1", "filename": "tests/target/configs-struct_lit_single_line-true.rs", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fconfigs-struct_lit_single_line-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fconfigs-struct_lit_single_line-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-struct_lit_single_line-true.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,4 +1,4 @@\n-// rustfmt-struct_lit_multiline_style: PreferSingle\n+// rustfmt-struct_lit_single_line: true\n // rustfmt-struct_lit_width: 100\n // Struct literal multiline-style\n ", "previous_filename": "tests/target/configs-struct_lit_multiline_style-prefer_single.rs"}, {"sha": "c831dc7a8ba6c99fc9de7612c6ea1d092873c33b", "filename": "tests/target/struct_lits_multiline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fstruct_lits_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fstruct_lits_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits_multiline.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,6 +1,6 @@\n // rustfmt-normalize_comments: true\n // rustfmt-wrap_comments: true\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n \n // Struct literal expressions.\n "}, {"sha": "2809d3a26129077ab7855811f5f31d0de6bd02e7", "filename": "tests/target/struct_lits_visual_multiline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fstruct_lits_visual_multiline.rs?ref=45d4f7a2dd1c95e47d4ae4dc413dfb71e53c16ff", "patch": "@@ -1,7 +1,7 @@\n // rustfmt-normalize_comments: true\n // rustfmt-wrap_comments: true\n // rustfmt-indent_style: Visual\n-// rustfmt-struct_lit_multiline_style: ForceMulti\n+// rustfmt-struct_lit_single_line: false\n // rustfmt-error_on_line_overflow: false\n \n // Struct literal expressions."}]}