{"sha": "ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "node_id": "C_kwDOAAsO6NoAKGNhNTFkMzI1ZTg2NTZkOGJiYTE4MTFmN2JlYTZiMmQ4MmQ4N2ZiMWM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-07-10T09:52:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-10T09:52:15Z"}, "message": "Rollup merge of #99086 - GuillaumeGomez:search-result-crate-filter-dropdown, r=notriddle\n\nFix display of search result crate filter dropdown\n\nIn case a crate name is too long, the `<select>` completely overflows its parent. Another problem is that there is left margin on the `select` which break the alignment. You can see both issues here:\n\n![Screenshot from 2022-07-09 15-31-12](https://user-images.githubusercontent.com/3050060/178108959-0eb5af19-ec60-4d34-a2fd-c27147683c78.png)\n\nAnd with the fix:\n\n![Screenshot from 2022-07-09 15-33-37](https://user-images.githubusercontent.com/3050060/178108980-71030a92-84ee-4ee5-98e3-f97d03a6fbaf.png)\n\ncc `@jsha`\nr? `@notriddle`", "tree": {"sha": "aa43b53ce1562e11ef1f640de92bddd5269bd29c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa43b53ce1562e11ef1f640de92bddd5269bd29c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiyqFPCRBK7hj4Ov3rIwAAC3YIAE0KIIMjtlVbVc84qGlJlB06\nogiAZ67IJKhrWVGzVUt5Zxo6lvnxredVy1WOSO8kXf8bj1OxIrnvOm3FQgUO8Dx+\ndCyrWIlDKS40mhmosBkTKdpGbhmdjxrHxFKsvoBM9br+C6QkoI+QWEZaZkoS2PBg\nOaOQvJBSq56iJNIRz+v7xRdE0L5l60ufGoQ9NndW7tQCgWGqG5qh1k4QSCnZP//m\nFAjH6uUqoVwQxnTcPLp/jT9xAWkYwdzqonXyWsS09l83wCd7bwi+k8v2Y7D5IZlq\nM6t1Nch2UWaiGNSdN95HLQWqyF/yGGgdmCPyyhOK/3rrJq0cwt4Z3nwA6Y+LaSk=\n=coYr\n-----END PGP SIGNATURE-----\n", "payload": "tree aa43b53ce1562e11ef1f640de92bddd5269bd29c\nparent 0dd5c75efffa3c5178fa32d3fbd99f682faa4e33\nparent 9d5e6e2fc3709d5491af7e199a4d18c11170cffd\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1657446735 +0200\ncommitter GitHub <noreply@github.com> 1657446735 +0200\n\nRollup merge of #99086 - GuillaumeGomez:search-result-crate-filter-dropdown, r=notriddle\n\nFix display of search result crate filter dropdown\n\nIn case a crate name is too long, the `<select>` completely overflows its parent. Another problem is that there is left margin on the `select` which break the alignment. You can see both issues here:\n\n![Screenshot from 2022-07-09 15-31-12](https://user-images.githubusercontent.com/3050060/178108959-0eb5af19-ec60-4d34-a2fd-c27147683c78.png)\n\nAnd with the fix:\n\n![Screenshot from 2022-07-09 15-33-37](https://user-images.githubusercontent.com/3050060/178108980-71030a92-84ee-4ee5-98e3-f97d03a6fbaf.png)\n\ncc `@jsha`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "html_url": "https://github.com/rust-lang/rust/commit/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0dd5c75efffa3c5178fa32d3fbd99f682faa4e33", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dd5c75efffa3c5178fa32d3fbd99f682faa4e33", "html_url": "https://github.com/rust-lang/rust/commit/0dd5c75efffa3c5178fa32d3fbd99f682faa4e33"}, {"sha": "9d5e6e2fc3709d5491af7e199a4d18c11170cffd", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d5e6e2fc3709d5491af7e199a4d18c11170cffd", "html_url": "https://github.com/rust-lang/rust/commit/9d5e6e2fc3709d5491af7e199a4d18c11170cffd"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "5c7b56ec140b50058801695ead816e0577a93b96", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "patch": "@@ -924,7 +924,6 @@ table,\n #crate-search {\n \tmin-width: 115px;\n \tmargin-top: 5px;\n-\tmargin-left: 0.25em;\n \tpadding-left: 0.3125em;\n \tpadding-right: 23px;\n \tborder: 1px solid;\n@@ -941,6 +940,8 @@ table,\n \tbackground-size: 20px;\n \tbackground-position: calc(100% - 1px) 56%;\n \tbackground-image: /* AUTOREPLACE: */url(\"down-arrow.svg\");\n+\tmax-width: 100%;\n+\ttext-overflow: ellipsis;\n }\n .search-container {\n \tmargin-top: 4px;"}, {"sha": "b31905a126a0ee99d07e519ec00f2aa7584c21f1", "filename": "src/test/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/ca51d325e8656d8bba1811f7bea6b2d82d87fb1c/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml?ref=ca51d325e8656d8bba1811f7bea6b2d82d87fb1c", "patch": "@@ -10,3 +10,31 @@ size: (600, 100)\n // As counter-intuitive as it may seem, in this width, the width is \"100%\", which is why\n // when computed it's larger.\n assert-css: (\".search-results div.desc\", {\"width\": \"570px\"})\n+\n+// Check that the crate filter `<select>` is correctly handled when it goes to next line.\n+// To do so we need to update the length of one of its `<option>`.\n+size: (900, 900)\n+\n+// First we check the current width and position.\n+assert-css: (\"#crate-search\", {\"width\": \"222px\"})\n+compare-elements-position-near: (\n+    \"#crate-search\",\n+    \"#search-settings .search-results-title\",\n+    {\"y\": 5},\n+)\n+\n+// Then we update the text of one of the `<option>`.\n+text: (\n+    \"#crate-search option\",\n+    \"sdjfaksdjfaksjdbfkadsbfkjsadbfkdsbkfbsadkjfbkdsabfkadsfkjdsafa\",\n+)\n+\n+// Then we compare again.\n+assert-css: (\"#crate-search\", {\"width\": \"640px\"})\n+compare-elements-position-near-false: (\n+    \"#crate-search\",\n+    \"#search-settings .search-results-title\",\n+    {\"y\": 5},\n+)\n+// And we check that the `<select>` isn't bigger than its container.\n+assert-css: (\"#search\", {\"width\": \"640px\"})"}]}