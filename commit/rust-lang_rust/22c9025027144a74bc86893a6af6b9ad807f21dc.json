{"sha": "22c9025027144a74bc86893a6af6b9ad807f21dc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyYzkwMjUwMjcxNDRhNzRiYzg2ODkzYTZhZjZiOWFkODA3ZjIxZGM=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-08-15T15:48:12Z"}, "committer": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2017-11-30T09:00:49Z"}, "message": "Format source codes", "tree": {"sha": "b4db237da6f29120f63cb723f077757088d3cadb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b4db237da6f29120f63cb723f077757088d3cadb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/22c9025027144a74bc86893a6af6b9ad807f21dc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/22c9025027144a74bc86893a6af6b9ad807f21dc", "html_url": "https://github.com/rust-lang/rust/commit/22c9025027144a74bc86893a6af6b9ad807f21dc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/22c9025027144a74bc86893a6af6b9ad807f21dc/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89bf00986de724873858f07af6b49665abf38996", "url": "https://api.github.com/repos/rust-lang/rust/commits/89bf00986de724873858f07af6b49665abf38996", "html_url": "https://github.com/rust-lang/rust/commit/89bf00986de724873858f07af6b49665abf38996"}], "stats": {"total": 172, "additions": 99, "deletions": 73}, "files": [{"sha": "e6a86e04b9e24ff05df83c16eb960fb407efd903", "filename": "src/bin/cargo-fmt.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fbin%2Fcargo-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fbin%2Fcargo-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-fmt.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -94,11 +94,13 @@ fn execute() -> i32 {\n             print_usage_to_stderr(&opts, &e.to_string());\n             failure\n         }\n-        Ok(status) => if status.success() {\n-            success\n-        } else {\n-            status.code().unwrap_or(failure)\n-        },\n+        Ok(status) => {\n+            if status.success() {\n+                success\n+            } else {\n+                status.code().unwrap_or(failure)\n+            }\n+        }\n     }\n }\n "}, {"sha": "2b4665729c4c26ee9cbc5a4081294e3e85103119", "filename": "src/config.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -568,9 +568,11 @@ pub fn get_toml_path(dir: &Path) -> Result<Option<PathBuf>, Error> {\n             Ok(ref md) if md.is_file() => return Ok(Some(config_file)),\n             // Return the error if it's something other than `NotFound`; otherwise we didn't\n             // find the project file yet, and continue searching.\n-            Err(e) => if e.kind() != ErrorKind::NotFound {\n-                return Err(e);\n-            },\n+            Err(e) => {\n+                if e.kind() != ErrorKind::NotFound {\n+                    return Err(e);\n+                }\n+            }\n             _ => {}\n         }\n     }"}, {"sha": "e75c7e2c9dd579aad542b02cfcb98a611c48bf54", "filename": "src/expr.rs", "status": "modified", "additions": 16, "deletions": 14, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -462,18 +462,20 @@ where\n                 None => DefinitiveListTactic::Vertical,\n             }\n         }\n-        IndentStyle::Visual => if has_long_item || items.iter().any(ListItem::is_multiline) {\n-            definitive_tactic(\n-                &items,\n-                ListTactic::LimitedHorizontalVertical(\n-                    context.config.width_heuristics().array_width,\n-                ),\n-                Separator::Comma,\n-                nested_shape.width,\n-            )\n-        } else {\n-            DefinitiveListTactic::Mixed\n-        },\n+        IndentStyle::Visual => {\n+            if has_long_item || items.iter().any(ListItem::is_multiline) {\n+                definitive_tactic(\n+                    &items,\n+                    ListTactic::LimitedHorizontalVertical(\n+                        context.config.width_heuristics().array_width,\n+                    ),\n+                    Separator::Comma,\n+                    nested_shape.width,\n+                )\n+            } else {\n+                DefinitiveListTactic::Mixed\n+            }\n+        }\n     };\n     let ends_with_newline = tactic.ends_with_newline(context.config.indent_style());\n \n@@ -1501,8 +1503,8 @@ fn flatten_arm_body<'a>(context: &'a RewriteContext, body: &'a ast::Expr) -> (bo\n             if let ast::StmtKind::Expr(ref expr) = block.stmts[0].node {\n                 (\n                     !context.config.force_multiline_blocks()\n-                        && (can_extend_match_arm_body(expr), &**expr),\n-                    &**expr,\n+                        && can_extend_match_arm_body(expr),\n+                    &*expr,\n                 )\n             } else {\n                 (false, &*body)"}, {"sha": "f05aa0512da6b0edbbca703e245e7b05d6437e07", "filename": "src/issues.rs", "status": "modified", "additions": 19, "deletions": 13, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fissues.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fissues.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fissues.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -190,19 +190,25 @@ impl BadIssueSeeker {\n         }\n \n         match part {\n-            NumberPart::OpenParen => if c != '(' {\n-                return IssueClassification::Bad(issue);\n-            } else {\n-                part = NumberPart::Pound;\n-            },\n-            NumberPart::Pound => if c == '#' {\n-                part = NumberPart::Number;\n-            },\n-            NumberPart::Number => if c >= '0' && c <= '9' {\n-                part = NumberPart::CloseParen;\n-            } else {\n-                return IssueClassification::Bad(issue);\n-            },\n+            NumberPart::OpenParen => {\n+                if c != '(' {\n+                    return IssueClassification::Bad(issue);\n+                } else {\n+                    part = NumberPart::Pound;\n+                }\n+            }\n+            NumberPart::Pound => {\n+                if c == '#' {\n+                    part = NumberPart::Number;\n+                }\n+            }\n+            NumberPart::Number => {\n+                if c >= '0' && c <= '9' {\n+                    part = NumberPart::CloseParen;\n+                } else {\n+                    return IssueClassification::Bad(issue);\n+                }\n+            }\n             NumberPart::CloseParen => {}\n         }\n "}, {"sha": "867051baea01dc6ed389d882b71b5f7eb44423d1", "filename": "src/items.rs", "status": "modified", "additions": 25, "deletions": 19, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -550,12 +550,14 @@ impl<'a> FmtVisitor<'a> {\n                 self.block_indent,\n                 Some(one_line_width),\n             )?,\n-            ast::VariantData::Unit(..) => if let Some(ref expr) = field.node.disr_expr {\n-                let lhs = format!(\"{} =\", field.node.name);\n-                rewrite_assign_rhs(&context, lhs, &**expr, shape)?\n-            } else {\n-                field.node.name.to_string()\n-            },\n+            ast::VariantData::Unit(..) => {\n+                if let Some(ref expr) = field.node.disr_expr {\n+                    let lhs = format!(\"{} =\", field.node.name);\n+                    rewrite_assign_rhs(&context, lhs, &**expr, shape)?\n+                } else {\n+                    field.node.name.to_string()\n+                }\n+            }\n         };\n \n         let attrs_extendable = attrs_str.is_empty()\n@@ -643,11 +645,13 @@ pub fn format_impl(\n             _ if last_line_contains_single_line_comment(&result) => result.push_str(&sep),\n             BraceStyle::AlwaysNextLine => result.push_str(&sep),\n             BraceStyle::PreferSameLine => result.push(' '),\n-            BraceStyle::SameLineWhere => if !where_clause_str.is_empty() {\n-                result.push_str(&sep);\n-            } else {\n-                result.push(' ');\n-            },\n+            BraceStyle::SameLineWhere => {\n+                if !where_clause_str.is_empty() {\n+                    result.push_str(&sep);\n+                } else {\n+                    result.push(' ');\n+                }\n+            }\n         }\n \n         result.push('{');\n@@ -1039,14 +1043,16 @@ pub fn format_trait(context: &RewriteContext, item: &ast::Item, offset: Indent)\n                 result.push_str(&offset.to_string(context.config));\n             }\n             BraceStyle::PreferSameLine => result.push(' '),\n-            BraceStyle::SameLineWhere => if !where_clause_str.is_empty()\n-                && (!trait_items.is_empty() || result.contains('\\n'))\n-            {\n-                result.push('\\n');\n-                result.push_str(&offset.to_string(context.config));\n-            } else {\n-                result.push(' ');\n-            },\n+            BraceStyle::SameLineWhere => {\n+                if !where_clause_str.is_empty()\n+                    && (!trait_items.is_empty() || result.contains('\\n'))\n+                {\n+                    result.push('\\n');\n+                    result.push_str(&offset.to_string(context.config));\n+                } else {\n+                    result.push(' ');\n+                }\n+            }\n         }\n         result.push('{');\n "}, {"sha": "9247a75ce86b6faf473feae47c6836c2bd5d1dd9", "filename": "src/macros.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmacros.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -126,11 +126,13 @@ pub fn rewrite_macro(\n \n     let macro_name = match extra_ident {\n         None => format!(\"{}!\", mac.node.path),\n-        Some(ident) => if ident == symbol::keywords::Invalid.ident() {\n-            format!(\"{}!\", mac.node.path)\n-        } else {\n-            format!(\"{}! {}\", mac.node.path, ident)\n-        },\n+        Some(ident) => {\n+            if ident == symbol::keywords::Invalid.ident() {\n+                format!(\"{}!\", mac.node.path)\n+            } else {\n+                format!(\"{}! {}\", mac.node.path, ident)\n+            }\n+        }\n     };\n \n     let style = if FORCED_BRACKET_MACROS.contains(&&macro_name[..]) {"}, {"sha": "90a47d785f03a29eede79e1ca43c082a2f66f9a3", "filename": "src/patterns.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -51,11 +51,13 @@ impl Rewrite for Pat {\n \n                 Some(format!(\"{}{}{}{}\", prefix, mut_infix, id_str, sub_pat))\n             }\n-            PatKind::Wild => if 1 <= shape.width {\n-                Some(\"_\".to_owned())\n-            } else {\n-                None\n-            },\n+            PatKind::Wild => {\n+                if 1 <= shape.width {\n+                    Some(\"_\".to_owned())\n+                } else {\n+                    None\n+                }\n+            }\n             PatKind::Range(ref lhs, ref rhs, ref end_kind) => {\n                 let infix = match *end_kind {\n                     RangeEnd::Included(RangeSyntax::DotDotDot) => \"...\","}, {"sha": "72cace33defd7d3c67ee795d991541beefc3e047", "filename": "src/types.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -720,11 +720,13 @@ impl Rewrite for ast::Ty {\n                     SeparatorPlace::Back,\n                 )\n             }\n-            ast::TyKind::Infer => if shape.width >= 1 {\n-                Some(\"_\".to_owned())\n-            } else {\n-                None\n-            },\n+            ast::TyKind::Infer => {\n+                if shape.width >= 1 {\n+                    Some(\"_\".to_owned())\n+                } else {\n+                    None\n+                }\n+            }\n             ast::TyKind::BareFn(ref bare_fn) => rewrite_bare_fn(bare_fn, self.span, context, shape),\n             ast::TyKind::Never => Some(String::from(\"!\")),\n             ast::TyKind::Mac(..) => None,"}, {"sha": "2896b39b09d7b47662c2857f3228615ff699be73", "filename": "src/visitor.rs", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fvisitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/22c9025027144a74bc86893a6af6b9ad807f21dc/src%2Fvisitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fvisitor.rs?ref=22c9025027144a74bc86893a6af6b9ad807f21dc", "patch": "@@ -321,10 +321,12 @@ impl<'a> FmtVisitor<'a> {\n                     attrs = &filtered_attrs;\n                 }\n             }\n-            _ => if self.visit_attrs(&item.attrs, ast::AttrStyle::Outer) {\n-                self.push_rewrite(item.span, None);\n-                return;\n-            },\n+            _ => {\n+                if self.visit_attrs(&item.attrs, ast::AttrStyle::Outer) {\n+                    self.push_rewrite(item.span, None);\n+                    return;\n+                }\n+            }\n         }\n \n         match item.node {"}]}