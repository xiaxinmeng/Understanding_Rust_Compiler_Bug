{"sha": "e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "node_id": "C_kwDOAAsO6NoAKGUzM2VmYzc1MTcxY2E0OGRmY2QzMDk4NGRmYzM1NmNkYmZjNWMxZTQ", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-06-29T22:17:28Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-06-29T22:17:36Z"}, "message": "make ui_test pass clippy", "tree": {"sha": "57ded320d2a3cf7e4b105c3b75d3f5dff716fc67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57ded320d2a3cf7e4b105c3b75d3f5dff716fc67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "html_url": "https://github.com/rust-lang/rust/commit/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02f8cb2d551d06e24b4072c6caf1bf0e129f2eba", "url": "https://api.github.com/repos/rust-lang/rust/commits/02f8cb2d551d06e24b4072c6caf1bf0e129f2eba", "html_url": "https://github.com/rust-lang/rust/commit/02f8cb2d551d06e24b4072c6caf1bf0e129f2eba"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "6b7e9dbf03f897c45d1d5902cfa298540cd9bb1b", "filename": "miri", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/miri", "raw_url": "https://github.com/rust-lang/rust/raw/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/miri", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri?ref=e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "patch": "@@ -168,7 +168,7 @@ fmt)\n     ;;\n clippy)\n     cargo clippy $CARGO_BUILD_FLAGS --manifest-path \"$MIRIDIR\"/Cargo.toml --all-targets \"$@\"\n-    #cargo clippy $CARGO_BUILD_FLAGS --manifest-path \"$MIRIDIR\"/ui_test/Cargo.toml --all-targets \"$@\"\n+    cargo clippy $CARGO_BUILD_FLAGS --manifest-path \"$MIRIDIR\"/ui_test/Cargo.toml --all-targets \"$@\"\n     cargo clippy $CARGO_BUILD_FLAGS --manifest-path \"$MIRIDIR\"/cargo-miri/Cargo.toml \"$@\"\n     ;;\n *)"}, {"sha": "e7b4968a9ca6239f113c083b3d28950657707ee0", "filename": "ui_test/src/comments.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Fcomments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Fcomments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Fcomments.rs?ref=e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "patch": "@@ -90,7 +90,7 @@ impl Comments {\n                     path.display()\n                 );\n                 this.revisions =\n-                    Some(revisions.trim().split_whitespace().map(|s| s.to_string()).collect());\n+                    Some(revisions.split_whitespace().map(|s| s.to_string()).collect());\n             }\n             if let Some(s) = line.strip_prefix(\"// ignore-\") {\n                 let s = s"}, {"sha": "ff0c4e1c8996b7bfc93cec289323abbce2760faa", "filename": "ui_test/src/lib.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Flib.rs?ref=e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "patch": "@@ -1,3 +1,5 @@\n+#![allow(clippy::enum_variant_names, clippy::useless_format, clippy::too_many_arguments)]\n+\n use std::collections::VecDeque;\n use std::fmt::Write;\n use std::path::{Path, PathBuf};\n@@ -338,17 +340,17 @@ fn check_test_result(\n         revised(\"stderr\"),\n         target,\n         &config.stderr_filters,\n-        &config,\n+        config,\n         comments,\n     );\n     check_output(\n-        &stdout,\n+        stdout,\n         path,\n         errors,\n         revised(\"stdout\"),\n         target,\n         &config.stdout_filters,\n-        &config,\n+        config,\n         comments,\n     );\n     // Check error annotations in the source against output"}, {"sha": "ea32ce4bd293466b54ffe02ff4aa56ef86dbe371", "filename": "ui_test/src/rustc_stderr.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Frustc_stderr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Frustc_stderr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Frustc_stderr.rs?ref=e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "patch": "@@ -117,16 +117,16 @@ impl Span {\n \n pub(crate) fn filter_annotations_from_rendered(rendered: &str) -> std::borrow::Cow<'_, str> {\n     let annotations = Regex::new(r\"\\s*//(\\[[^\\]]\\])?~.*\").unwrap();\n-    annotations.replace_all(&rendered, \"\")\n+    annotations.replace_all(rendered, \"\")\n }\n \n pub(crate) fn process(file: &Path, stderr: &[u8]) -> Diagnostics {\n-    let stderr = std::str::from_utf8(&stderr).unwrap();\n+    let stderr = std::str::from_utf8(stderr).unwrap();\n     let mut rendered = String::new();\n     let mut messages = vec![];\n     let mut messages_from_unknown_file_or_line = vec![];\n     for line in stderr.lines() {\n-        if line.starts_with(\"{\") {\n+        if line.starts_with('{') {\n             match serde_json::from_str::<RustcMessage>(line) {\n                 Ok(msg) => {\n                     write!("}, {"sha": "a45f8f8933c909890310caca0b9022e20c7409c2", "filename": "ui_test/src/tests.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e33efc75171ca48dfcd30984dfc356cdbfc5c1e4/ui_test%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ui_test%2Fsrc%2Ftests.rs?ref=e33efc75171ca48dfcd30984dfc356cdbfc5c1e4", "patch": "@@ -29,7 +29,7 @@ fn main() {\n }\n     \";\n     let path = Path::new(\"$DIR/<dummy>\");\n-    let comments = Comments::parse(&path, s);\n+    let comments = Comments::parse(path, s);\n     let mut errors = vec![];\n     let config = config();\n     let messages = vec!["}]}