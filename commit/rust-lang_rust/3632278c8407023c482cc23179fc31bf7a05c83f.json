{"sha": "3632278c8407023c482cc23179fc31bf7a05c83f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2MzIyNzhjODQwNzAyM2M0ODJjYzIzMTc5ZmMzMWJmN2EwNWM4M2Y=", "commit": {"author": {"name": "Nick Platt", "email": "platt.nicholas@gmail.com", "date": "2016-04-10T04:27:32Z"}, "committer": {"name": "Nick Platt", "email": "platt.nicholas@gmail.com", "date": "2016-04-10T04:34:05Z"}, "message": "Add rustbuild option to use Ninja for LLVM build", "tree": {"sha": "914eb7f921f170cc55bb26a047cea9614e341b41", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/914eb7f921f170cc55bb26a047cea9614e341b41"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3632278c8407023c482cc23179fc31bf7a05c83f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3632278c8407023c482cc23179fc31bf7a05c83f", "html_url": "https://github.com/rust-lang/rust/commit/3632278c8407023c482cc23179fc31bf7a05c83f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3632278c8407023c482cc23179fc31bf7a05c83f/comments", "author": {"login": "caipre", "id": 295094, "node_id": "MDQ6VXNlcjI5NTA5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/295094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caipre", "html_url": "https://github.com/caipre", "followers_url": "https://api.github.com/users/caipre/followers", "following_url": "https://api.github.com/users/caipre/following{/other_user}", "gists_url": "https://api.github.com/users/caipre/gists{/gist_id}", "starred_url": "https://api.github.com/users/caipre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caipre/subscriptions", "organizations_url": "https://api.github.com/users/caipre/orgs", "repos_url": "https://api.github.com/users/caipre/repos", "events_url": "https://api.github.com/users/caipre/events{/privacy}", "received_events_url": "https://api.github.com/users/caipre/received_events", "type": "User", "site_admin": false}, "committer": {"login": "caipre", "id": 295094, "node_id": "MDQ6VXNlcjI5NTA5NA==", "avatar_url": "https://avatars.githubusercontent.com/u/295094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caipre", "html_url": "https://github.com/caipre", "followers_url": "https://api.github.com/users/caipre/followers", "following_url": "https://api.github.com/users/caipre/following{/other_user}", "gists_url": "https://api.github.com/users/caipre/gists{/gist_id}", "starred_url": "https://api.github.com/users/caipre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caipre/subscriptions", "organizations_url": "https://api.github.com/users/caipre/orgs", "repos_url": "https://api.github.com/users/caipre/repos", "events_url": "https://api.github.com/users/caipre/events{/privacy}", "received_events_url": "https://api.github.com/users/caipre/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "526f2bf5c534308193246e13ab2da8b3c0cf3cbb", "url": "https://api.github.com/repos/rust-lang/rust/commits/526f2bf5c534308193246e13ab2da8b3c0cf3cbb", "html_url": "https://github.com/rust-lang/rust/commit/526f2bf5c534308193246e13ab2da8b3c0cf3cbb"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "9bb3e79744bb634b0f5838b5e9f87ff8c2b1d893", "filename": "src/bootstrap/Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.lock?ref=3632278c8407023c482cc23179fc31bf7a05c83f", "patch": "@@ -3,7 +3,7 @@ name = \"bootstrap\"\n version = \"0.0.0\"\n dependencies = [\n  \"build_helper 0.1.0\",\n- \"cmake 0.1.16 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"cmake 0.1.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"gcc 0.3.26 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -21,7 +21,7 @@ version = \"0.1.0\"\n \n [[package]]\n name = \"cmake\"\n-version = \"0.1.16\"\n+version = \"0.1.17\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"gcc 0.3.26 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "7b379e1c7b6b9443dacb55701ccfe4dda278d1ba", "filename": "src/bootstrap/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2FCargo.toml?ref=3632278c8407023c482cc23179fc31bf7a05c83f", "patch": "@@ -21,7 +21,7 @@ path = \"rustdoc.rs\"\n \n [dependencies]\n build_helper = { path = \"../build_helper\" }\n-cmake = \"0.1.10\"\n+cmake = \"0.1.17\"\n filetime = \"0.1\"\n num_cpus = \"0.2\"\n toml = \"0.1\""}, {"sha": "9563a3629dad8e16d870d91d6bb59e47a5705a76", "filename": "src/bootstrap/build/config.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild%2Fconfig.rs?ref=3632278c8407023c482cc23179fc31bf7a05c83f", "patch": "@@ -31,6 +31,7 @@ use toml::{Parser, Decoder, Value};\n #[derive(Default)]\n pub struct Config {\n     pub ccache: bool,\n+    pub ninja: bool,\n     pub verbose: bool,\n     pub submodules: bool,\n     pub compiler_docs: bool,\n@@ -107,6 +108,7 @@ struct Build {\n #[derive(RustcDecodable, Default)]\n struct Llvm {\n     ccache: Option<bool>,\n+    ninja: Option<bool>,\n     assertions: Option<bool>,\n     optimize: Option<bool>,\n     version_check: Option<bool>,\n@@ -200,6 +202,7 @@ impl Config {\n \n         if let Some(ref llvm) = toml.llvm {\n             set(&mut config.ccache, llvm.ccache);\n+            set(&mut config.ninja, llvm.ninja);\n             set(&mut config.llvm_assertions, llvm.assertions);\n             set(&mut config.llvm_optimize, llvm.optimize);\n             set(&mut config.llvm_optimize, llvm.optimize);"}, {"sha": "91bc0924b1fef36ca07a17347bc834601100197a", "filename": "src/bootstrap/build/native.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild%2Fnative.rs?ref=3632278c8407023c482cc23179fc31bf7a05c83f", "patch": "@@ -43,6 +43,9 @@ pub fn llvm(build: &Build, target: &str) {\n \n     // http://llvm.org/docs/CMake.html\n     let mut cfg = cmake::Config::new(build.src.join(\"src/llvm\"));\n+    if build.config.ninja {\n+        cfg.generator(\"Ninja\");\n+    }\n     cfg.target(target)\n        .host(&build.config.build)\n        .out_dir(&dst)"}, {"sha": "50fd9c2453826f897607cb3219e2cfbc394dc522", "filename": "src/bootstrap/build/sanity.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3632278c8407023c482cc23179fc31bf7a05c83f/src%2Fbootstrap%2Fbuild%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuild%2Fsanity.rs?ref=3632278c8407023c482cc23179fc31bf7a05c83f", "patch": "@@ -48,6 +48,9 @@ pub fn check(build: &mut Build) {\n             }\n         }\n         need_cmd(\"cmake\".as_ref());\n+        if build.config.ninja {\n+            need_cmd(\"ninja\".as_ref())\n+        }\n         break\n     }\n "}]}