{"sha": "ba65d2e15b45c639e9a77407585644eafedc172c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhNjVkMmUxNWI0NWM2MzllOWE3NzQwNzU4NTY0NGVhZmVkYzE3MmM=", "commit": {"author": {"name": "Andrew Cann", "email": "shum@canndrew.org", "date": "2016-08-01T04:58:01Z"}, "committer": {"name": "Andrew Cann", "email": "shum@canndrew.org", "date": "2016-08-13T13:37:09Z"}, "message": "Remove invalid compile-fail tests related to `!`\n\nThese tests check for the old error messages \"`return` in a function\ndeclared as diverging\" and \"computation may converge in a function\ndeclared as diverging\". The first of these is now invalid as `return` is\npermitted in functions that return `!`. The second of these is subsumed\nby the \"mismatched types\" error.", "tree": {"sha": "dd001ea900ff7329cc94369e675e395293c5ff51", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd001ea900ff7329cc94369e675e395293c5ff51"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba65d2e15b45c639e9a77407585644eafedc172c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba65d2e15b45c639e9a77407585644eafedc172c", "html_url": "https://github.com/rust-lang/rust/commit/ba65d2e15b45c639e9a77407585644eafedc172c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba65d2e15b45c639e9a77407585644eafedc172c/comments", "author": {"login": "canndrew", "id": 5555066, "node_id": "MDQ6VXNlcjU1NTUwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5555066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canndrew", "html_url": "https://github.com/canndrew", "followers_url": "https://api.github.com/users/canndrew/followers", "following_url": "https://api.github.com/users/canndrew/following{/other_user}", "gists_url": "https://api.github.com/users/canndrew/gists{/gist_id}", "starred_url": "https://api.github.com/users/canndrew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canndrew/subscriptions", "organizations_url": "https://api.github.com/users/canndrew/orgs", "repos_url": "https://api.github.com/users/canndrew/repos", "events_url": "https://api.github.com/users/canndrew/events{/privacy}", "received_events_url": "https://api.github.com/users/canndrew/received_events", "type": "User", "site_admin": false}, "committer": {"login": "canndrew", "id": 5555066, "node_id": "MDQ6VXNlcjU1NTUwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5555066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/canndrew", "html_url": "https://github.com/canndrew", "followers_url": "https://api.github.com/users/canndrew/followers", "following_url": "https://api.github.com/users/canndrew/following{/other_user}", "gists_url": "https://api.github.com/users/canndrew/gists{/gist_id}", "starred_url": "https://api.github.com/users/canndrew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/canndrew/subscriptions", "organizations_url": "https://api.github.com/users/canndrew/orgs", "repos_url": "https://api.github.com/users/canndrew/repos", "events_url": "https://api.github.com/users/canndrew/events{/privacy}", "received_events_url": "https://api.github.com/users/canndrew/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "html_url": "https://github.com/rust-lang/rust/commit/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a"}], "stats": {"total": 178, "additions": 0, "deletions": 178}, "files": [{"sha": "f8585d71b402a080c052a5d09a79a45542b5079f", "filename": "src/test/compile-fail/E0166.rs", "status": "removed", "additions": 0, "deletions": 16, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2FE0166.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2FE0166.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0166.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,16 +0,0 @@\n-// Copyright 2016 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-fn foo() -> ! { return; }\n-    //~^ ERROR E0166\n-    //~| NOTE diverging function cannot return\n-\n-fn main() {\n-}"}, {"sha": "1a5496f0551507354ffcb5219f7fbca94911b742", "filename": "src/test/compile-fail/bad-bang-ann-3.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann-3.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Tests that a function with a ! annotation always actually fails\n-\n-fn bad_bang(i: usize) -> ! {\n-    return 7;\n-    //~^ ERROR `return` in a function declared as diverging [E0166]\n-    //~| NOTE diverging function cannot return\n-}\n-\n-fn main() { bad_bang(5); }"}, {"sha": "f0ecf31fd10a2532f93c470f1a5ca4aff4bfabd4", "filename": "src/test/compile-fail/bad-bang-ann.rs", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbad-bang-ann.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,17 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Tests that a function with a ! annotation always actually fails\n-\n-fn bad_bang(i: usize) -> ! { //~ ERROR computation may converge in a function marked as diverging\n-    if i < 0 { } else { panic!(); }\n-}\n-\n-fn main() { bad_bang(5); }"}, {"sha": "7d79ea03c02453cb3380d4ab6dc57dcba905dcc1", "filename": "src/test/compile-fail/bang-tailexpr.rs", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbang-tailexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fbang-tailexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fbang-tailexpr.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,14 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-fn f() -> ! { //~ ERROR computation may converge in a function marked as diverging\n-    3\n-}\n-fn main() { }"}, {"sha": "f133a59d72297bab0b2ca8644a90ae72efc0a8aa", "filename": "src/test/compile-fail/issue-20105.rs", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-20105.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-20105.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-20105.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,17 +0,0 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-fn f<F, R>(_: F) where F: Fn() -> R {\n-}\n-\n-fn main() {\n-    f(|| -> ! { () });\n-//~^ ERROR: computation may converge in a function marked as diverging [E0270]\n-}"}, {"sha": "659b1426bd3f99a86d830adc8ee3c21b2b1f7179", "filename": "src/test/compile-fail/issue-897-2.rs", "status": "removed", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-897-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-897-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-897-2.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,23 +0,0 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-#![deny(unreachable_code)]\n-\n-fn g() -> ! { panic!(); }\n-fn f() -> ! {\n-    return g(); //~ ERROR `return` in a function declared as diverging\n-    g();\n-}\n-fn h() -> ! {\n-    loop {}\n-    g();\n-}\n-\n-fn main() { f() }"}, {"sha": "b9cfbd695b0473049a1963b7c321c43051f41e84", "filename": "src/test/compile-fail/issue-897.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-897.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fissue-897.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-897.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-#![deny(unreachable_code)]\n-\n-fn f() -> ! {\n-    return panic!(); //~ ERROR `return` in a function declared as diverging\n-    panic!(); // the unreachable statement error is in <std macro>, at this line, there\n-             // only is a note\n-}\n-\n-fn main() { f() }"}, {"sha": "d0bc71edf2c4c04ec59e29c8775ef5b8b7e889ec", "filename": "src/test/compile-fail/liveness-bad-bang-2.rs", "status": "removed", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fliveness-bad-bang-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Fliveness-bad-bang-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fliveness-bad-bang-2.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,17 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Tests that a function with a ! annotation always actually fails\n-\n-fn bad_bang(i: usize) -> ! { //~ ERROR computation may converge in a function marked as diverging\n-    println!(\"{}\", 3);\n-}\n-\n-fn main() { bad_bang(5); }"}, {"sha": "451b30629b625f5795bfd3733df37bdc505db090", "filename": "src/test/compile-fail/loop-does-not-diverge.rs", "status": "removed", "additions": 0, "deletions": 21, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Floop-does-not-diverge.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Floop-does-not-diverge.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Floop-does-not-diverge.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,21 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-/* Make sure a loop{} with a break in it can't be\n-   the tailexpr in the body of a diverging function */\n-fn forever() -> ! {\n-  loop {\n-    break;\n-  }\n-  return 42; //~ ERROR `return` in a function declared as diverging\n-}\n-\n-fn main() {\n-}"}, {"sha": "01dfbcc1b9ecee5f13d80799f4a272c33e374f9c", "filename": "src/test/compile-fail/loop-properly-diverging.rs", "status": "removed", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Floop-properly-diverging.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51c6ae25e286152f44adfdc3d2f88b597fa5fc7a/src%2Ftest%2Fcompile-fail%2Floop-properly-diverging.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Floop-properly-diverging.rs?ref=51c6ae25e286152f44adfdc3d2f88b597fa5fc7a", "patch": "@@ -1,15 +0,0 @@\n-// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-fn forever2() -> ! { //~ ERROR computation may converge in a function marked as diverging\n-  loop { break }\n-}\n-\n-fn main() {}"}]}