{"sha": "c0569f2aa7311d295cb273f66fbe365f2b5ad893", "node_id": "C_kwDOAAsO6NoAKGMwNTY5ZjJhYTczMTFkMjk1Y2IyNzNmNjZmYmUzNjVmMmI1YWQ4OTM", "commit": {"author": {"name": "Christopher Durham", "email": "cad97@cad97.com", "date": "2022-07-18T19:22:01Z"}, "committer": {"name": "Christopher Durham", "email": "cad97@cad97.com", "date": "2022-07-18T19:22:01Z"}, "message": "Revert \"Stabilize $$ in Rust 1.63.0\"\n\nThis reverts commit 9edaa76adce4de737db54194eb13d6c298827b37.", "tree": {"sha": "8d05c8cbb51b1a24605d4b4a6e7cc3b9829bf7cd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d05c8cbb51b1a24605d4b4a6e7cc3b9829bf7cd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c0569f2aa7311d295cb273f66fbe365f2b5ad893", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c0569f2aa7311d295cb273f66fbe365f2b5ad893", "html_url": "https://github.com/rust-lang/rust/commit/c0569f2aa7311d295cb273f66fbe365f2b5ad893", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c0569f2aa7311d295cb273f66fbe365f2b5ad893/comments", "author": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CAD97", "id": 5992217, "node_id": "MDQ6VXNlcjU5OTIyMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5992217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CAD97", "html_url": "https://github.com/CAD97", "followers_url": "https://api.github.com/users/CAD97/followers", "following_url": "https://api.github.com/users/CAD97/following{/other_user}", "gists_url": "https://api.github.com/users/CAD97/gists{/gist_id}", "starred_url": "https://api.github.com/users/CAD97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CAD97/subscriptions", "organizations_url": "https://api.github.com/users/CAD97/orgs", "repos_url": "https://api.github.com/users/CAD97/repos", "events_url": "https://api.github.com/users/CAD97/events{/privacy}", "received_events_url": "https://api.github.com/users/CAD97/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "144227dae949fb98896a2ba077d8fe7f36c3238e", "url": "https://api.github.com/repos/rust-lang/rust/commits/144227dae949fb98896a2ba077d8fe7f36c3238e", "html_url": "https://github.com/rust-lang/rust/commit/144227dae949fb98896a2ba077d8fe7f36c3238e"}], "stats": {"total": 76, "additions": 57, "deletions": 19}, "files": [{"sha": "707cb73f097f87062f999dc9eb8cebbd476af86b", "filename": "compiler/rustc_expand/src/mbe/quoted.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c0569f2aa7311d295cb273f66fbe365f2b5ad893/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fquoted.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0569f2aa7311d295cb273f66fbe365f2b5ad893/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fquoted.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fmbe%2Fquoted.rs?ref=c0569f2aa7311d295cb273f66fbe365f2b5ad893", "patch": "@@ -234,6 +234,8 @@ fn parse_tree(\n                             sess,\n                             &Token { kind: token::Dollar, span },\n                         );\n+                    } else {\n+                        maybe_emit_macro_metavar_expr_feature(features, sess, span);\n                     }\n                     TokenTree::token(token::Dollar, span)\n                 }"}, {"sha": "c248c46f52cd35fa9676dbdd9e91247ca22f5ec7", "filename": "src/test/ui/macros/rfc-3086-metavar-expr/allowed-features.rs", "status": "removed", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/144227dae949fb98896a2ba077d8fe7f36c3238e/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Fallowed-features.rs", "raw_url": "https://github.com/rust-lang/rust/raw/144227dae949fb98896a2ba077d8fe7f36c3238e/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Fallowed-features.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Fallowed-features.rs?ref=144227dae949fb98896a2ba077d8fe7f36c3238e", "patch": "@@ -1,12 +0,0 @@\n-// check-pass\n-\n-macro_rules! dollar_dollar {\n-    () => {\n-        macro_rules! bar {\n-            ( $$( $$any:tt )* ) => { $$( $$any )* };\n-        }\n-    };\n-}\n-\n-fn main() {\n-}"}, {"sha": "b4fef11f1e29a0546d5f71a062de9d5998c79a69", "filename": "src/test/ui/macros/rfc-3086-metavar-expr/required-feature.rs", "status": "renamed", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c0569f2aa7311d295cb273f66fbe365f2b5ad893/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c0569f2aa7311d295cb273f66fbe365f2b5ad893/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.rs?ref=c0569f2aa7311d295cb273f66fbe365f2b5ad893", "patch": "@@ -5,6 +5,18 @@ macro_rules! count {\n     };\n }\n \n+macro_rules! dollar_dollar {\n+    () => {\n+        macro_rules! bar {\n+            ( $$( $$any:tt )* ) => { $$( $$any )* };\n+            //~^ ERROR meta-variable expressions are unstable\n+            //~| ERROR meta-variable expressions are unstable\n+            //~| ERROR meta-variable expressions are unstable\n+            //~| ERROR meta-variable expressions are unstable\n+        }\n+    };\n+}\n+\n macro_rules! index {\n     ( $( $e:stmt ),* ) => {\n         $( ${ignore(e)} ${index()} )*", "previous_filename": "src/test/ui/macros/rfc-3086-metavar-expr/required-features.rs"}, {"sha": "ecf598b104d058240ac7990f15e16725e1952ab8", "filename": "src/test/ui/macros/rfc-3086-metavar-expr/required-feature.stderr", "status": "renamed", "additions": 43, "deletions": 7, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/c0569f2aa7311d295cb273f66fbe365f2b5ad893/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c0569f2aa7311d295cb273f66fbe365f2b5ad893/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Frfc-3086-metavar-expr%2Frequired-feature.stderr?ref=c0569f2aa7311d295cb273f66fbe365f2b5ad893", "patch": "@@ -1,5 +1,5 @@\n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:3:10\n+  --> $DIR/required-feature.rs:3:10\n    |\n LL |         ${ count(e) }\n    |          ^^^^^^^^^^^^\n@@ -8,7 +8,43 @@ LL |         ${ count(e) }\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:10:13\n+  --> $DIR/required-feature.rs:11:16\n+   |\n+LL |             ( $$( $$any:tt )* ) => { $$( $$any )* };\n+   |                ^\n+   |\n+   = note: see issue #83527 <https://github.com/rust-lang/rust/issues/83527> for more information\n+   = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n+\n+error[E0658]: meta-variable expressions are unstable\n+  --> $DIR/required-feature.rs:11:20\n+   |\n+LL |             ( $$( $$any:tt )* ) => { $$( $$any )* };\n+   |                    ^\n+   |\n+   = note: see issue #83527 <https://github.com/rust-lang/rust/issues/83527> for more information\n+   = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n+\n+error[E0658]: meta-variable expressions are unstable\n+  --> $DIR/required-feature.rs:11:39\n+   |\n+LL |             ( $$( $$any:tt )* ) => { $$( $$any )* };\n+   |                                       ^\n+   |\n+   = note: see issue #83527 <https://github.com/rust-lang/rust/issues/83527> for more information\n+   = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n+\n+error[E0658]: meta-variable expressions are unstable\n+  --> $DIR/required-feature.rs:11:43\n+   |\n+LL |             ( $$( $$any:tt )* ) => { $$( $$any )* };\n+   |                                           ^\n+   |\n+   = note: see issue #83527 <https://github.com/rust-lang/rust/issues/83527> for more information\n+   = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n+\n+error[E0658]: meta-variable expressions are unstable\n+  --> $DIR/required-feature.rs:22:13\n    |\n LL |         $( ${ignore(e)} ${index()} )*\n    |             ^^^^^^^^^^^\n@@ -17,7 +53,7 @@ LL |         $( ${ignore(e)} ${index()} )*\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:10:26\n+  --> $DIR/required-feature.rs:22:26\n    |\n LL |         $( ${ignore(e)} ${index()} )*\n    |                          ^^^^^^^^^\n@@ -26,7 +62,7 @@ LL |         $( ${ignore(e)} ${index()} )*\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:18:19\n+  --> $DIR/required-feature.rs:30:19\n    |\n LL |         0 $( + 1 ${ignore(i)} )*\n    |                   ^^^^^^^^^^^\n@@ -35,7 +71,7 @@ LL |         0 $( + 1 ${ignore(i)} )*\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:25:13\n+  --> $DIR/required-feature.rs:37:13\n    |\n LL |         $( ${ignore(e)} ${length()} )*\n    |             ^^^^^^^^^^^\n@@ -44,14 +80,14 @@ LL |         $( ${ignore(e)} ${length()} )*\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n error[E0658]: meta-variable expressions are unstable\n-  --> $DIR/required-features.rs:25:26\n+  --> $DIR/required-feature.rs:37:26\n    |\n LL |         $( ${ignore(e)} ${length()} )*\n    |                          ^^^^^^^^^^\n    |\n    = note: see issue #83527 <https://github.com/rust-lang/rust/issues/83527> for more information\n    = help: add `#![feature(macro_metavar_expr)]` to the crate attributes to enable\n \n-error: aborting due to 6 previous errors\n+error: aborting due to 10 previous errors\n \n For more information about this error, try `rustc --explain E0658`.", "previous_filename": "src/test/ui/macros/rfc-3086-metavar-expr/required-features.stderr"}]}