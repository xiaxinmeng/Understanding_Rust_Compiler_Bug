{"sha": "16a3c8032e634d3da53f8d4c0a875f369a9d4394", "node_id": "C_kwDOAAsO6NoAKDE2YTNjODAzMmU2MzRkM2RhNTNmOGQ0YzBhODc1ZjM2OWE5ZDQzOTQ", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-06T19:20:03Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-06T20:14:41Z"}, "message": "rustdoc: remove no-op CSS `.rustdoc.source .sidebar { width: 0 }`\n\nThis CSS was added in dc2c9723343c985740be09919236a6e96c4e4433,\nbefore 6a5f8b1aef1417d7dc85b5d0a229d2db1930eb7c when the sidebars\nwere merged.\n\nNow that they are merged, the source sidebar is being pushed\noff-screen anyway, so giving it zero width doesn't do much.", "tree": {"sha": "0e54fd246f9817f89d8577ef6156892b8f97984b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e54fd246f9817f89d8577ef6156892b8f97984b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16a3c8032e634d3da53f8d4c0a875f369a9d4394", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16a3c8032e634d3da53f8d4c0a875f369a9d4394", "html_url": "https://github.com/rust-lang/rust/commit/16a3c8032e634d3da53f8d4c0a875f369a9d4394", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16a3c8032e634d3da53f8d4c0a875f369a9d4394/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "afe8c4537c9009a251a31e8f022b7795fc305d4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/afe8c4537c9009a251a31e8f022b7795fc305d4f", "html_url": "https://github.com/rust-lang/rust/commit/afe8c4537c9009a251a31e8f022b7795fc305d4f"}], "stats": {"total": 18, "additions": 7, "deletions": 11}, "files": [{"sha": "d77b65ac6034316c4c8eeba584f32c3bcf979d7c", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=16a3c8032e634d3da53f8d4c0a875f369a9d4394", "patch": "@@ -1598,14 +1598,10 @@ in storage.js\n \n \t.sidebar.shown,\n \t.source-sidebar-expanded .source .sidebar,\n-\t.sidebar:focus-within {\n+\t.rustdoc:not(.source) .sidebar:focus-within {\n \t\tleft: 0;\n \t}\n \n-\t.rustdoc.source > .sidebar {\n-\t\twidth: 0;\n-\t}\n-\n \t.mobile-topbar h2 {\n \t\tpadding-bottom: 0;\n \t\tmargin: auto 0.5em auto auto;"}, {"sha": "d0e2c8a6adc21d90cf05e3d10a4d1b642d85f050", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=16a3c8032e634d3da53f8d4c0a875f369a9d4394", "patch": "@@ -171,15 +171,15 @@ assert-css: (\n \n // We now check that the scroll position is kept when opening the sidebar.\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n // We scroll to line 117 to change the scroll position.\n scroll-to: '//*[@id=\"117\"]'\n assert-window-property: {\"pageYOffset\": \"2542\"}\n // Expanding the sidebar...\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"500px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"0px\"})\n click: \"#src-sidebar-toggle\"\n-wait-for-css: (\".sidebar\", {\"width\": \"0px\"})\n+wait-for-css: (\".sidebar\", {\"left\": \"-1000px\"})\n // The \"scrollTop\" property should be the same.\n assert-window-property: {\"pageYOffset\": \"2542\"}\n "}, {"sha": "08a237e49dae7400fa26c777d1310c46a1d0366a", "filename": "src/test/rustdoc-gui/sidebar-source-code.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/16a3c8032e634d3da53f8d4c0a875f369a9d4394/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml?ref=16a3c8032e634d3da53f8d4c0a875f369a9d4394", "patch": "@@ -77,11 +77,11 @@ assert-count: (\"//*[@id='source-sidebar']/details[not(text()='lib2') and not(@op\n \n // We now switch to mobile mode.\n size: (600, 600)\n-wait-for-css: (\".source-sidebar-expanded nav.sidebar\", {\"width\": \"600px\"})\n+wait-for-css: (\".source-sidebar-expanded nav.sidebar\", {\"left\": \"0px\"})\n // We collapse the sidebar.\n click: (10, 10)\n-// We check that the sidebar has the expected width (0).\n-assert-css: (\"nav.sidebar\", {\"width\": \"0px\"})\n+// We check that the sidebar has been moved off-screen.\n+assert-css: (\"nav.sidebar\", {\"left\": \"-1000px\"})\n // We ensure that the class has been removed.\n assert-false: \".source-sidebar-expanded\"\n assert: \"nav.sidebar\""}]}