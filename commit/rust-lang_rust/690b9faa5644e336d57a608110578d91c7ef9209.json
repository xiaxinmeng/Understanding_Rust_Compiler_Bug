{"sha": "690b9faa5644e336d57a608110578d91c7ef9209", "node_id": "C_kwDOAAsO6NoAKDY5MGI5ZmFhNTY0NGUzMzZkNTdhNjA4MTEwNTc4ZDkxYzdlZjkyMDk", "commit": {"author": {"name": "Florian Bartels", "email": "Florian.Bartels@elektrobit.com", "date": "2022-10-12T12:30:06Z"}, "committer": {"name": "Florian Bartels", "email": "Florian.Bartels@elektrobit.com", "date": "2022-10-12T12:30:06Z"}, "message": "Show command line arguments", "tree": {"sha": "0c4385f237f151fa8399e82d182eb7ae9142f41d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c4385f237f151fa8399e82d182eb7ae9142f41d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/690b9faa5644e336d57a608110578d91c7ef9209", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/690b9faa5644e336d57a608110578d91c7ef9209", "html_url": "https://github.com/rust-lang/rust/commit/690b9faa5644e336d57a608110578d91c7ef9209", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/690b9faa5644e336d57a608110578d91c7ef9209/comments", "author": {"login": "flba-eb", "id": 108917393, "node_id": "U_kgDOBn3ykQ", "avatar_url": "https://avatars.githubusercontent.com/u/108917393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flba-eb", "html_url": "https://github.com/flba-eb", "followers_url": "https://api.github.com/users/flba-eb/followers", "following_url": "https://api.github.com/users/flba-eb/following{/other_user}", "gists_url": "https://api.github.com/users/flba-eb/gists{/gist_id}", "starred_url": "https://api.github.com/users/flba-eb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flba-eb/subscriptions", "organizations_url": "https://api.github.com/users/flba-eb/orgs", "repos_url": "https://api.github.com/users/flba-eb/repos", "events_url": "https://api.github.com/users/flba-eb/events{/privacy}", "received_events_url": "https://api.github.com/users/flba-eb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flba-eb", "id": 108917393, "node_id": "U_kgDOBn3ykQ", "avatar_url": "https://avatars.githubusercontent.com/u/108917393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flba-eb", "html_url": "https://github.com/flba-eb", "followers_url": "https://api.github.com/users/flba-eb/followers", "following_url": "https://api.github.com/users/flba-eb/following{/other_user}", "gists_url": "https://api.github.com/users/flba-eb/gists{/gist_id}", "starred_url": "https://api.github.com/users/flba-eb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flba-eb/subscriptions", "organizations_url": "https://api.github.com/users/flba-eb/orgs", "repos_url": "https://api.github.com/users/flba-eb/repos", "events_url": "https://api.github.com/users/flba-eb/events{/privacy}", "received_events_url": "https://api.github.com/users/flba-eb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6ce5627a9e8af9ae4673a390954fffaf526e5cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6ce5627a9e8af9ae4673a390954fffaf526e5cc", "html_url": "https://github.com/rust-lang/rust/commit/e6ce5627a9e8af9ae4673a390954fffaf526e5cc"}], "stats": {"total": 25, "additions": 22, "deletions": 3}, "files": [{"sha": "ec992da681219add9c0b4174f42981ef8f7f207b", "filename": "src/tools/remote-test-server/src/main.rs", "status": "modified", "additions": 22, "deletions": 3, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/690b9faa5644e336d57a608110578d91c7ef9209/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/690b9faa5644e336d57a608110578d91c7ef9209/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fremote-test-server%2Fsrc%2Fmain.rs?ref=690b9faa5644e336d57a608110578d91c7ef9209", "patch": "@@ -74,7 +74,11 @@ impl Config {\n                 \"--bind\" => next_is_bind = true,\n                 \"--sequential\" => config.sequential = true,\n                 \"--verbose\" | \"-v\" => config.verbose = true,\n-                arg => panic!(\"unknown argument: {}\", arg),\n+                \"--help\" | \"-h\" => {\n+                    show_help();\n+                    std::process::exit(0);\n+                }\n+                arg => panic!(\"unknown argument: {}, use `--help` for known arguments\", arg),\n             }\n         }\n         if next_is_bind {\n@@ -85,16 +89,31 @@ impl Config {\n     }\n }\n \n+fn show_help() {\n+    eprintln!(\n+        r#\"Usage:\n+\n+{} [OPTIONS]\n+\n+OPTIONS:\n+    --bind <IP>:<PORT>   Specify IP address and port to listen for requests, e.g. \"0.0.0.0:12345\"\n+    --sequential         Run only one test at a time\n+    -v, --verbose        Show status messages\n+    -h, --help           Show this help screen\n+\"#,\n+        std::env::args().next().unwrap()\n+    );\n+}\n+\n fn print_verbose(s: &str, conf: Config) {\n     if conf.verbose {\n         println!(\"{}\", s);\n     }\n }\n \n fn main() {\n-    println!(\"starting test server\");\n-\n     let config = Config::parse_args();\n+    println!(\"starting test server\");\n \n     let listener = t!(TcpListener::bind(config.bind));\n     let (work, tmp): (PathBuf, PathBuf) = if cfg!(target_os = \"android\") {"}]}