{"sha": "3575f7c4a2c20ed84626e2652be195fc26dd1add", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1NzVmN2M0YTJjMjBlZDg0NjI2ZTI2NTJiZTE5NWZjMjZkZDFhZGQ=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-09-20T15:54:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-20T15:54:01Z"}, "message": "Merge #1884\n\n1884: Add indexing to record_field_pat r=matklad a=kjeremy\n\nFixes #1870 \n\nCo-authored-by: kjeremy <kjeremy@gmail.com>", "tree": {"sha": "2610083075f1a4d7f3f19a3a31d15991c61f873f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2610083075f1a4d7f3f19a3a31d15991c61f873f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3575f7c4a2c20ed84626e2652be195fc26dd1add", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdhPYZCRBK7hj4Ov3rIwAAdHIIAGHU8F+QAh3zk+bcR0Pq2aQH\ntBQyTTX45GaRQPCPEiVnOAsh/Pw8xuwGHDF48E639QY2QLqIbKVcCz6RAXIstlm3\nm1jtu4bWonpciW6FaL9s4FSQ1mO9O0sPNKpiLw7R6XxfXLaoz2Hq1lEIXpd8RFrG\nyreNwbCpIs63BUI/vVtqB/DbCEAj4uvcOT6AN2jwa2N39sgZLyOhjXTbh2iTz4nu\n0MPSeZ9YmNC9Y3UYViP/6RNMDs+gm1VRa/fP+whQndiEAeVQpHqYGsNE1rOpv7QW\ndAXnGHubgHx52igblZgb0iTyjrWP6WsdAz198DroIkP3xwbW3XmppnvpN2sd8aw=\n=T9uF\n-----END PGP SIGNATURE-----\n", "payload": "tree 2610083075f1a4d7f3f19a3a31d15991c61f873f\nparent 0492b18ed47115c630cf3490fcdf904155f6e496\nparent 17a45a686c42522ffb668b1989d58219f76caf51\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1568994841 +0000\ncommitter GitHub <noreply@github.com> 1568994841 +0000\n\nMerge #1884\n\n1884: Add indexing to record_field_pat r=matklad a=kjeremy\n\nFixes #1870 \n\nCo-authored-by: kjeremy <kjeremy@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3575f7c4a2c20ed84626e2652be195fc26dd1add", "html_url": "https://github.com/rust-lang/rust/commit/3575f7c4a2c20ed84626e2652be195fc26dd1add", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3575f7c4a2c20ed84626e2652be195fc26dd1add/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0492b18ed47115c630cf3490fcdf904155f6e496", "url": "https://api.github.com/repos/rust-lang/rust/commits/0492b18ed47115c630cf3490fcdf904155f6e496", "html_url": "https://github.com/rust-lang/rust/commit/0492b18ed47115c630cf3490fcdf904155f6e496"}, {"sha": "17a45a686c42522ffb668b1989d58219f76caf51", "url": "https://api.github.com/repos/rust-lang/rust/commits/17a45a686c42522ffb668b1989d58219f76caf51", "html_url": "https://github.com/rust-lang/rust/commit/17a45a686c42522ffb668b1989d58219f76caf51"}], "stats": {"total": 93, "additions": 91, "deletions": 2}, "files": [{"sha": "877ae5b7afd884b617098f2ea6618dfc739935f2", "filename": "crates/ra_parser/src/grammar/patterns.rs", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=3575f7c4a2c20ed84626e2652be195fc26dd1add", "patch": "@@ -168,6 +168,7 @@ fn record_field_pat_list(p: &mut Parser) {\n             T![.] if p.at(T![..]) => p.bump(T![..]),\n \n             IDENT if p.nth(1) == T![:] => record_field_pat(p),\n+            INT_NUMBER if p.nth(1) == T![:] => record_field_pat(p),\n             T!['{'] => error_block(p, \"expected ident\"),\n             T![box] => {\n                 box_pat(p);\n@@ -184,12 +185,21 @@ fn record_field_pat_list(p: &mut Parser) {\n     m.complete(p, RECORD_FIELD_PAT_LIST);\n }\n \n+// test record_field_pat\n+// fn foo() {\n+//     let S { 0: 1 } = ();\n+//     let S { x: 1 } = ();\n+// }\n fn record_field_pat(p: &mut Parser) {\n-    assert!(p.at(IDENT));\n+    assert!(p.at(IDENT) || p.at(INT_NUMBER));\n     assert!(p.nth(1) == T![:]);\n \n     let m = p.start();\n-    name(p);\n+\n+    if !p.eat(INT_NUMBER) {\n+        name(p)\n+    }\n+\n     p.bump_any();\n     pattern(p);\n     m.complete(p, RECORD_FIELD_PAT);"}, {"sha": "26b1d5f895202062e05f3a8dd06980d1291081e6", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0145_record_field_pat.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs?ref=3575f7c4a2c20ed84626e2652be195fc26dd1add", "patch": "@@ -0,0 +1,4 @@\n+fn foo() {\n+    let S { 0: 1 } = ();\n+    let S { x: 1 } = ();\n+}"}, {"sha": "06fbdfabf19caf882c2733cbcabbce9b3c915105", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0145_record_field_pat.txt", "status": "added", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/3575f7c4a2c20ed84626e2652be195fc26dd1add/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt?ref=3575f7c4a2c20ed84626e2652be195fc26dd1add", "patch": "@@ -0,0 +1,75 @@\n+SOURCE_FILE@[0; 63)\n+  FN_DEF@[0; 62)\n+    FN_KW@[0; 2) \"fn\"\n+    WHITESPACE@[2; 3) \" \"\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 8)\n+      L_PAREN@[6; 7) \"(\"\n+      R_PAREN@[7; 8) \")\"\n+    WHITESPACE@[8; 9) \" \"\n+    BLOCK_EXPR@[9; 62)\n+      BLOCK@[9; 62)\n+        L_CURLY@[9; 10) \"{\"\n+        WHITESPACE@[10; 15) \"\\n    \"\n+        LET_STMT@[15; 35)\n+          LET_KW@[15; 18) \"let\"\n+          WHITESPACE@[18; 19) \" \"\n+          RECORD_PAT@[19; 29)\n+            PATH@[19; 20)\n+              PATH_SEGMENT@[19; 20)\n+                NAME_REF@[19; 20)\n+                  IDENT@[19; 20) \"S\"\n+            WHITESPACE@[20; 21) \" \"\n+            RECORD_FIELD_PAT_LIST@[21; 29)\n+              L_CURLY@[21; 22) \"{\"\n+              WHITESPACE@[22; 23) \" \"\n+              RECORD_FIELD_PAT@[23; 27)\n+                INT_NUMBER@[23; 24) \"0\"\n+                COLON@[24; 25) \":\"\n+                WHITESPACE@[25; 26) \" \"\n+                LITERAL_PAT@[26; 27)\n+                  LITERAL@[26; 27)\n+                    INT_NUMBER@[26; 27) \"1\"\n+              WHITESPACE@[27; 28) \" \"\n+              R_CURLY@[28; 29) \"}\"\n+          WHITESPACE@[29; 30) \" \"\n+          EQ@[30; 31) \"=\"\n+          WHITESPACE@[31; 32) \" \"\n+          TUPLE_EXPR@[32; 34)\n+            L_PAREN@[32; 33) \"(\"\n+            R_PAREN@[33; 34) \")\"\n+          SEMI@[34; 35) \";\"\n+        WHITESPACE@[35; 40) \"\\n    \"\n+        LET_STMT@[40; 60)\n+          LET_KW@[40; 43) \"let\"\n+          WHITESPACE@[43; 44) \" \"\n+          RECORD_PAT@[44; 54)\n+            PATH@[44; 45)\n+              PATH_SEGMENT@[44; 45)\n+                NAME_REF@[44; 45)\n+                  IDENT@[44; 45) \"S\"\n+            WHITESPACE@[45; 46) \" \"\n+            RECORD_FIELD_PAT_LIST@[46; 54)\n+              L_CURLY@[46; 47) \"{\"\n+              WHITESPACE@[47; 48) \" \"\n+              RECORD_FIELD_PAT@[48; 52)\n+                NAME@[48; 49)\n+                  IDENT@[48; 49) \"x\"\n+                COLON@[49; 50) \":\"\n+                WHITESPACE@[50; 51) \" \"\n+                LITERAL_PAT@[51; 52)\n+                  LITERAL@[51; 52)\n+                    INT_NUMBER@[51; 52) \"1\"\n+              WHITESPACE@[52; 53) \" \"\n+              R_CURLY@[53; 54) \"}\"\n+          WHITESPACE@[54; 55) \" \"\n+          EQ@[55; 56) \"=\"\n+          WHITESPACE@[56; 57) \" \"\n+          TUPLE_EXPR@[57; 59)\n+            L_PAREN@[57; 58) \"(\"\n+            R_PAREN@[58; 59) \")\"\n+          SEMI@[59; 60) \";\"\n+        WHITESPACE@[60; 61) \"\\n\"\n+        R_CURLY@[61; 62) \"}\"\n+  WHITESPACE@[62; 63) \"\\n\""}]}