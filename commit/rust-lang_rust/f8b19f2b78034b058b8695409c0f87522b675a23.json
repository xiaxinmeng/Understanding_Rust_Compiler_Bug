{"sha": "f8b19f2b78034b058b8695409c0f87522b675a23", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY4YjE5ZjJiNzgwMzRiMDU4Yjg2OTU0MDljMGY4NzUyMmI2NzVhMjM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2019-09-09T16:29:47Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2019-09-23T16:34:44Z"}, "message": "Move handling of some warnings to `builder.rs`", "tree": {"sha": "40d7f141c6b45500e9845089348f3be6f6e403fe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40d7f141c6b45500e9845089348f3be6f6e403fe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f8b19f2b78034b058b8695409c0f87522b675a23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f8b19f2b78034b058b8695409c0f87522b675a23", "html_url": "https://github.com/rust-lang/rust/commit/f8b19f2b78034b058b8695409c0f87522b675a23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f8b19f2b78034b058b8695409c0f87522b675a23/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a648b65800c5b93531afcec873b5c2da85c8fa2", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a648b65800c5b93531afcec873b5c2da85c8fa2", "html_url": "https://github.com/rust-lang/rust/commit/3a648b65800c5b93531afcec873b5c2da85c8fa2"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "eb5b03f181d21ff800bc9b8f68dee719ae928ccb", "filename": "src/bootstrap/bin/rustc.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f8b19f2b78034b058b8695409c0f87522b675a23/src%2Fbootstrap%2Fbin%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8b19f2b78034b058b8695409c0f87522b675a23/src%2Fbootstrap%2Fbin%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbin%2Frustc.rs?ref=f8b19f2b78034b058b8695409c0f87522b675a23", "patch": "@@ -102,11 +102,6 @@ fn main() {\n     }\n \n     if env::var_os(\"RUSTC_EXTERNAL_TOOL\").is_none() {\n-        // When extending this list, add the new lints to the RUSTFLAGS of the\n-        // build_bootstrap function of src/bootstrap/bootstrap.py as well as\n-        // some code doesn't go through this `rustc` wrapper.\n-        cmd.arg(\"-Wrust_2018_idioms\");\n-        cmd.arg(\"-Wunused_lifetimes\");\n         if use_internal_lints(crate_name) {\n             cmd.arg(\"-Zunstable-options\");\n             cmd.arg(\"-Wrustc::internal\");"}, {"sha": "e415389d307e7618b958c66def534f8a3c6d68d3", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f8b19f2b78034b058b8695409c0f87522b675a23/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f8b19f2b78034b058b8695409c0f87522b675a23/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=f8b19f2b78034b058b8695409c0f87522b675a23", "patch": "@@ -1055,8 +1055,16 @@ impl<'a> Builder<'a> {\n \n         cargo.env(\"RUSTC_VERBOSE\", self.verbosity.to_string());\n \n-        if self.config.deny_warnings && !mode.is_tool() {\n-            rustflags.arg(\"-Dwarnings\");\n+        if !mode.is_tool() {\n+            // When extending this list, add the new lints to the RUSTFLAGS of the\n+            // build_bootstrap function of src/bootstrap/bootstrap.py as well as\n+            // some code doesn't go through this `rustc` wrapper.\n+            rustflags.arg(\"-Wrust_2018_idioms\");\n+            rustflags.arg(\"-Wunused_lifetimes\");\n+\n+            if self.config.deny_warnings {\n+                rustflags.arg(\"-Dwarnings\");\n+            }\n         }\n \n         // Throughout the build Cargo can execute a number of build scripts"}]}