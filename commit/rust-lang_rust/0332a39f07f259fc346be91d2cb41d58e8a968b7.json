{"sha": "0332a39f07f259fc346be91d2cb41d58e8a968b7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzMzJhMzlmMDdmMjU5ZmMzNDZiZTkxZDJjYjQxZDU4ZThhOTY4Yjc=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-10-31T11:24:01Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2018-11-07T12:09:52Z"}, "message": "Replaced use of `#[rustc_error]` with `// skip-codegen`.\n\nThis test specifically notes that it does not want to invoke the\nlinker, due to the way it (IMO weakly) exercises the `#[link=...]`\nattribute.\n\nIn any case, removing the the `#[rustc_error]` here uncovered an\n\"invalid windows subsystem\" error that was previously not included in\nthe transcript of diagnostic output. So that's a step forward, (right?).", "tree": {"sha": "810bf28deb299a42bee3961baab1d514600689fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/810bf28deb299a42bee3961baab1d514600689fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0332a39f07f259fc346be91d2cb41d58e8a968b7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0332a39f07f259fc346be91d2cb41d58e8a968b7", "html_url": "https://github.com/rust-lang/rust/commit/0332a39f07f259fc346be91d2cb41d58e8a968b7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0332a39f07f259fc346be91d2cb41d58e8a968b7/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf544fa920efb1614f95ebc783fbd11c07604972", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf544fa920efb1614f95ebc783fbd11c07604972", "html_url": "https://github.com/rust-lang/rust/commit/bf544fa920efb1614f95ebc783fbd11c07604972"}], "stats": {"total": 24, "additions": 9, "deletions": 15}, "files": [{"sha": "3f340145acffede8f87bb2dba4e52999a4bfe9b3", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0332a39f07f259fc346be91d2cb41d58e8a968b7/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0332a39f07f259fc346be91d2cb41d58e8a968b7/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs?ref=0332a39f07f259fc346be91d2cb41d58e8a968b7", "patch": "@@ -40,7 +40,7 @@\n // inputs are handled by each, and (2.) to ease searching for related\n // occurrences in the source text.\n \n-#![feature(rustc_attrs)] // For `rustc_error`; see note below.\n+// skip-codegen\n #![warn(unused_attributes, unknown_lints)]\n #![allow(dead_code)]\n #![allow(stable_features)]\n@@ -584,7 +584,7 @@ mod export_name {\n     #[export_name = \"2200\"] impl S { }\n }\n \n-// Note that this test ends with a `#[rustc_error] fn main()`, so it\n+// Note that this test has a `skip-codegen`, so it\n // will never invoke the linker. These are here nonetheless to point\n // out that we allow them at non-crate-level (though I do not know\n // whether they have the same effect here as at crate-level).\n@@ -835,12 +835,12 @@ mod type_length_limit {\n     //~| WARN crate-level attribute should be an inner attribute\n }\n \n-// Since we expect for the mix of attributes used here to compile\n-// successfully, and we are just testing for the expected warnings of\n-// various (mis)uses of attributes, we use the `rustc_error` attribute\n-// on the `fn main()`.\n \n-#[rustc_error]\n-fn main() { //~ ERROR compilation successful\n+\n+\n+\n+\n+\n+fn main() {\n     println!(\"Hello World\");\n }"}, {"sha": "59e327bc1ba6288275abfb33962c9e93eca741cb", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.stderr", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0332a39f07f259fc346be91d2cb41d58e8a968b7/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0332a39f07f259fc346be91d2cb41d58e8a968b7/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr?ref=0332a39f07f259fc346be91d2cb41d58e8a968b7", "patch": "@@ -1303,13 +1303,7 @@ warning: unused attribute\n LL | #![proc_macro_derive          = \"2500\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: compilation successful\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:844:1\n-   |\n-LL | / fn main() { //~ ERROR compilation successful\n-LL | |     println!(\"Hello World\");\n-LL | | }\n-   | |_^\n+error: invalid windows subsystem `1000`, only `windows` and `console` are allowed\n \n error: aborting due to previous error\n "}]}