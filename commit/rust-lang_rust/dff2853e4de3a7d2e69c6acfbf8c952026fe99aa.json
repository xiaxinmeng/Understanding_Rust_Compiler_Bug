{"sha": "dff2853e4de3a7d2e69c6acfbf8c952026fe99aa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRmZjI4NTNlNGRlM2E3ZDJlNjljNmFjZmJmOGM5NTIwMjZmZTk5YWE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-12-13T20:46:31Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-12-14T22:59:32Z"}, "message": "Remove bench/shootout-threadring.rs\n\nWill need to be completely rewritten for pipes", "tree": {"sha": "b77b7d58be47877bbe9d1127b09d570047862fef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b77b7d58be47877bbe9d1127b09d570047862fef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dff2853e4de3a7d2e69c6acfbf8c952026fe99aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dff2853e4de3a7d2e69c6acfbf8c952026fe99aa", "html_url": "https://github.com/rust-lang/rust/commit/dff2853e4de3a7d2e69c6acfbf8c952026fe99aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dff2853e4de3a7d2e69c6acfbf8c952026fe99aa/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "05a35a2e5c0b342cd48ce91c244d4570aa30e658", "url": "https://api.github.com/repos/rust-lang/rust/commits/05a35a2e5c0b342cd48ce91c244d4570aa30e658", "html_url": "https://github.com/rust-lang/rust/commit/05a35a2e5c0b342cd48ce91c244d4570aa30e658"}], "stats": {"total": 63, "additions": 0, "deletions": 63}, "files": [{"sha": "40e05ec39b703e2c0f7ecbb6bdc5d49bc19b8294", "filename": "src/test/bench/shootout-threadring.rs", "status": "removed", "additions": 0, "deletions": 63, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/05a35a2e5c0b342cd48ce91c244d4570aa30e658/src%2Ftest%2Fbench%2Fshootout-threadring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05a35a2e5c0b342cd48ce91c244d4570aa30e658/src%2Ftest%2Fbench%2Fshootout-threadring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-threadring.rs?ref=05a35a2e5c0b342cd48ce91c244d4570aa30e658", "patch": "@@ -1,63 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Based on threadring.erlang by Jira Isa\n-extern mod std;\n-\n-const n_threads: int = 503;\n-\n-fn start(+token: int) {\n-    use iter::*;\n-\n-    let p = comm::Port();\n-    let mut ch = comm::Chan(&p);\n-    for int::range(2, n_threads + 1) |i| {\n-        let id = n_threads + 2 - i;\n-        let to_child = do task::spawn_listener::<int> |p, copy ch| {\n-            roundtrip(id, p, ch)\n-        };\n-        ch = to_child;\n-    }\n-    comm::send(ch, token);\n-    roundtrip(1, p, ch);\n-}\n-\n-fn roundtrip(id: int, p: comm::Port<int>, ch: comm::Chan<int>) {\n-    while (true) {\n-        match comm::recv(p) {\n-          1 => {\n-            io::println(fmt!(\"%d\\n\", id));\n-            return;\n-          }\n-          token => {\n-            debug!(\"%d %d\", id, token);\n-            comm::send(ch, token - 1);\n-            if token <= n_threads {\n-                return;\n-            }\n-          }\n-        }\n-    }\n-}\n-\n-fn main() {\n-    let args = os::args();\n-    let args = if os::getenv(~\"RUST_BENCH\").is_some() {\n-        ~[~\"\", ~\"2000000\"]\n-    } else if args.len() <= 1u {\n-        ~[~\"\", ~\"1000\"]\n-    } else {\n-        args\n-    };\n-\n-    let token = int::from_str(args[1]).get();\n-\n-    start(token);\n-}"}]}