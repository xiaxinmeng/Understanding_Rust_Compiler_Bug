{"sha": "857453d36c5b396d2009e08b38b672695c5cddba", "node_id": "C_kwDOAAsO6NoAKDg1NzQ1M2QzNmM1YjM5NmQyMDA5ZTA4YjM4YjY3MjY5NWM1Y2RkYmE", "commit": {"author": {"name": "Chase Wilson", "email": "me@chasewilson.dev", "date": "2022-06-04T18:33:56Z"}, "committer": {"name": "Chase Wilson", "email": "me@chasewilson.dev", "date": "2022-06-04T19:18:43Z"}, "message": "Added test for #97732", "tree": {"sha": "a63a9a66a3f43cd60d95893727715ccdb11a1582", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a63a9a66a3f43cd60d95893727715ccdb11a1582"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/857453d36c5b396d2009e08b38b672695c5cddba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJHBAABCAAxFiEEWoxo69mZszIDaIeeZdBeU2cJKAEFAmKbsBkTHG1lQGNoYXNl\nd2lsc29uLmRldgAKCRBl0F5TZwkoARX1D/9BH1+Ru98lHiBOFv3pA+cDjaNjwcpl\nTpCBdwZsz/JtZ/NZI02qGlO6R2Xn5MqAfIndjc2P1ENwJ6zEelD7q4rLQPMzD2AM\n64uIG7riSlqCaRCwPqMEOzUZNpB6bkH0pAg2L5EDLiJ8tbZbbXDzl6Jfr3cWfian\nERWwAxM8BY/58Jk8e0H8sHD+BCgsk9U0HDU5UJGDqm7O1z9aquUezwT0Pn75M4H4\nMBAJmz3L4de7stPcjbWSN51V1uRG8AmRM0ML3xfG4A6yP+G1qpXYm9hxijZ6p3Wr\nB8VzkPu9P81zoUQz8zstkvcL9tOIFn94cuW12e+XA6J4+mImBoKyK2UOnh4Jp/7a\n6SXo8wO3MO+32cQQfJp+8P77lpUFyzmCeD2w1jWucqQMz1UaUJH1aX1fipQifs/7\nN9ufZHbcsXBeaN7RpShwvxhVTQUYghZiOKyk7PLAAf2zDj30JiCgp2/dPNmNPLS6\nD3AyEed3efXpzgvbgRVylr6e6ikpl2fWm1tZa7C8ZidnK5TP4Qcdsw66WuAK0PzJ\n9d39V+bDYaq30Hjw+IDYJi9qirjePLBRlaLRof+FUSf6nYwjIBBnDuo87+Xqap/w\nlNMuLfiiTq+55XryXknAiWrFCmru7Icob4TnDQk5yp5arViQEWfZ96lBcFoqJQAk\n8s0G1VDUhnDfew==\n=lBWQ\n-----END PGP SIGNATURE-----", "payload": "tree a63a9a66a3f43cd60d95893727715ccdb11a1582\nparent ba2f14e065ef4a798b23fad8b786616e79c59dd5\nauthor Chase Wilson <me@chasewilson.dev> 1654367636 -0500\ncommitter Chase Wilson <me@chasewilson.dev> 1654370323 -0500\n\nAdded test for #97732\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/857453d36c5b396d2009e08b38b672695c5cddba", "html_url": "https://github.com/rust-lang/rust/commit/857453d36c5b396d2009e08b38b672695c5cddba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/857453d36c5b396d2009e08b38b672695c5cddba/comments", "author": {"login": "Kixiron", "id": 25047011, "node_id": "MDQ6VXNlcjI1MDQ3MDEx", "avatar_url": "https://avatars.githubusercontent.com/u/25047011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kixiron", "html_url": "https://github.com/Kixiron", "followers_url": "https://api.github.com/users/Kixiron/followers", "following_url": "https://api.github.com/users/Kixiron/following{/other_user}", "gists_url": "https://api.github.com/users/Kixiron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kixiron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kixiron/subscriptions", "organizations_url": "https://api.github.com/users/Kixiron/orgs", "repos_url": "https://api.github.com/users/Kixiron/repos", "events_url": "https://api.github.com/users/Kixiron/events{/privacy}", "received_events_url": "https://api.github.com/users/Kixiron/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kixiron", "id": 25047011, "node_id": "MDQ6VXNlcjI1MDQ3MDEx", "avatar_url": "https://avatars.githubusercontent.com/u/25047011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kixiron", "html_url": "https://github.com/Kixiron", "followers_url": "https://api.github.com/users/Kixiron/followers", "following_url": "https://api.github.com/users/Kixiron/following{/other_user}", "gists_url": "https://api.github.com/users/Kixiron/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kixiron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kixiron/subscriptions", "organizations_url": "https://api.github.com/users/Kixiron/orgs", "repos_url": "https://api.github.com/users/Kixiron/repos", "events_url": "https://api.github.com/users/Kixiron/events{/privacy}", "received_events_url": "https://api.github.com/users/Kixiron/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba2f14e065ef4a798b23fad8b786616e79c59dd5", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba2f14e065ef4a798b23fad8b786616e79c59dd5", "html_url": "https://github.com/rust-lang/rust/commit/ba2f14e065ef4a798b23fad8b786616e79c59dd5"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "172f0724d42636d717f9f7bbf26f4be5e998bedf", "filename": "src/test/ui/unsized/issue-97732.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/857453d36c5b396d2009e08b38b672695c5cddba/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs", "raw_url": "https://github.com/rust-lang/rust/raw/857453d36c5b396d2009e08b38b672695c5cddba/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funsized%2Fissue-97732.rs?ref=857453d36c5b396d2009e08b38b672695c5cddba", "patch": "@@ -0,0 +1,23 @@\n+// check-pass\n+\n+#![feature(coerce_unsized)]\n+\n+// Ensure that unsizing structs that contain ZSTs at non-zero offsets don't ICE\n+\n+use std::ops::CoerceUnsized;\n+\n+#[repr(C)]\n+pub struct BoxWithZstTail<T: ?Sized>(Box<T>, ());\n+\n+impl<S: ?Sized, T: ?Sized> CoerceUnsized<BoxWithZstTail<T>> for BoxWithZstTail<S> where\n+    Box<S>: CoerceUnsized<Box<T>>\n+{\n+}\n+\n+pub fn noop_dyn_upcast_with_zst_tail(\n+    b: BoxWithZstTail<dyn Send + Sync>,\n+) -> BoxWithZstTail<dyn Send> {\n+    b\n+}\n+\n+fn main() {}"}]}