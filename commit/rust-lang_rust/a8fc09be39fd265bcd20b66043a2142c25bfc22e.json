{"sha": "a8fc09be39fd265bcd20b66043a2142c25bfc22e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4ZmMwOWJlMzlmZDI2NWJjZDIwYjY2MDQzYTIxNDJjMjViZmMyMmU=", "commit": {"author": {"name": "Simon Sapin", "email": "simon.sapin@exyr.org", "date": "2019-05-24T05:51:48Z"}, "committer": {"name": "Simon Sapin", "email": "simon.sapin@exyr.org", "date": "2019-05-24T05:51:48Z"}, "message": "Use FnOnce instead of FnBox in libtest", "tree": {"sha": "38c1c7589d3a40de0a741d721b122cda1db84dee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38c1c7589d3a40de0a741d721b122cda1db84dee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a8fc09be39fd265bcd20b66043a2142c25bfc22e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a8fc09be39fd265bcd20b66043a2142c25bfc22e", "html_url": "https://github.com/rust-lang/rust/commit/a8fc09be39fd265bcd20b66043a2142c25bfc22e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a8fc09be39fd265bcd20b66043a2142c25bfc22e/comments", "author": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SimonSapin", "id": 291359, "node_id": "MDQ6VXNlcjI5MTM1OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/291359?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SimonSapin", "html_url": "https://github.com/SimonSapin", "followers_url": "https://api.github.com/users/SimonSapin/followers", "following_url": "https://api.github.com/users/SimonSapin/following{/other_user}", "gists_url": "https://api.github.com/users/SimonSapin/gists{/gist_id}", "starred_url": "https://api.github.com/users/SimonSapin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SimonSapin/subscriptions", "organizations_url": "https://api.github.com/users/SimonSapin/orgs", "repos_url": "https://api.github.com/users/SimonSapin/repos", "events_url": "https://api.github.com/users/SimonSapin/events{/privacy}", "received_events_url": "https://api.github.com/users/SimonSapin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd8e23c6b2902299cb76e89d868fbb84f48035ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd8e23c6b2902299cb76e89d868fbb84f48035ab", "html_url": "https://github.com/rust-lang/rust/commit/fd8e23c6b2902299cb76e89d868fbb84f48035ab"}], "stats": {"total": 6, "additions": 2, "deletions": 4}, "files": [{"sha": "8bd0d74cd1710673bd62e8a34d22a1c7118e04f9", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8fc09be39fd265bcd20b66043a2142c25bfc22e/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8fc09be39fd265bcd20b66043a2142c25bfc22e/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=a8fc09be39fd265bcd20b66043a2142c25bfc22e", "patch": "@@ -22,7 +22,6 @@\n #![unstable(feature = \"test\", issue = \"27812\")]\n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/\", test(attr(deny(warnings))))]\n #![feature(asm)]\n-#![feature(fnbox)]\n #![cfg_attr(any(unix, target_os = \"cloudabi\"), feature(libc, rustc_private))]\n #![feature(nll)]\n #![feature(set_stdio)]\n@@ -56,7 +55,6 @@ pub use self::TestResult::*;\n \n use std::any::Any;\n use std::borrow::Cow;\n-use std::boxed::FnBox;\n use std::cmp;\n use std::collections::BTreeMap;\n use std::env;\n@@ -174,7 +172,7 @@ pub trait TDynBenchFn: Send {\n pub enum TestFn {\n     StaticTestFn(fn()),\n     StaticBenchFn(fn(&mut Bencher)),\n-    DynTestFn(Box<dyn FnBox() + Send>),\n+    DynTestFn(Box<dyn FnOnce() + Send>),\n     DynBenchFn(Box<dyn TDynBenchFn + 'static>),\n }\n \n@@ -1447,7 +1445,7 @@ pub fn run_test(\n         desc: TestDesc,\n         monitor_ch: Sender<MonitorMsg>,\n         nocapture: bool,\n-        testfn: Box<dyn FnBox() + Send>,\n+        testfn: Box<dyn FnOnce() + Send>,\n         concurrency: Concurrent,\n     ) {\n         // Buffer for capturing standard I/O"}]}