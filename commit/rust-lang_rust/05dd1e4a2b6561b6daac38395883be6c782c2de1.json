{"sha": "05dd1e4a2b6561b6daac38395883be6c782c2de1", "node_id": "C_kwDOAAsO6NoAKDA1ZGQxZTRhMmI2NTYxYjZkYWFjMzgzOTU4ODNiZTZjNzgyYzJkZTE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-12T06:12:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-12T06:12:19Z"}, "message": "Rollup merge of #92764 - GuillaumeGomez:fix-rust-logo-style, r=jsha\n\nFix rust logo style\n\nThe style on the rust logo is currently broken:\n\n![Screenshot from 2022-01-11 13-36-30](https://user-images.githubusercontent.com/3050060/148946754-a1a57253-bed0-44cf-a41c-83e0eecbd6b5.png)\n\nWith this fix, we're back to normal:\n\n![Screenshot from 2022-01-11 13-42-07](https://user-images.githubusercontent.com/3050060/148946778-99f44678-aac1-419f-bb8c-ffa837e0c1ee.png)\n\nI also used a GUI test to prevent future silent regressions.\n\nr? ```@jsha```", "tree": {"sha": "98e184cf410f6f6e4a029d070014e1443e0e23cd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/98e184cf410f6f6e4a029d070014e1443e0e23cd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05dd1e4a2b6561b6daac38395883be6c782c2de1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh3nFDCRBK7hj4Ov3rIwAAUNEIAINSwL2ylSLFjBjGOOH4chS0\nRoeYu/KRzg0Kp+7UzkdK8yk6XzWUWSM0Swd0npZtaB7SpSDCmzwvepqh5wG0lu24\nn2Ia2Y0TDIt1vwfMGAIu5q6dCo3QVVJ7lpf0yZ18kf7J3BK+MkTYjjD+5XJAIj2o\ntEdTvszZrZEWs+uhf4AnHY87f6DQEKygm1e2R84/Y3H6ynA8fYimW82gW7Ijfgy2\nCkpMF+9tv8FZJ1R4ocOF1oQB/324ruRof10N4GaY2pTqGorSLt3JM2eFdDVagFOa\nH1RB8rytIOjLsZS0bT1EsqflulHP2Oidryv/bvI3FTkfGiiuxWeGWLdPKVyQxPk=\n=I8BF\n-----END PGP SIGNATURE-----\n", "payload": "tree 98e184cf410f6f6e4a029d070014e1443e0e23cd\nparent 8f002a0a83c1c71cb66421b610251f7a32e8687d\nparent 24c6e963d038c586458dac287b143ac29c1b6053\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1641967939 +0100\ncommitter GitHub <noreply@github.com> 1641967939 +0100\n\nRollup merge of #92764 - GuillaumeGomez:fix-rust-logo-style, r=jsha\n\nFix rust logo style\n\nThe style on the rust logo is currently broken:\n\n![Screenshot from 2022-01-11 13-36-30](https://user-images.githubusercontent.com/3050060/148946754-a1a57253-bed0-44cf-a41c-83e0eecbd6b5.png)\n\nWith this fix, we're back to normal:\n\n![Screenshot from 2022-01-11 13-42-07](https://user-images.githubusercontent.com/3050060/148946778-99f44678-aac1-419f-bb8c-ffa837e0c1ee.png)\n\nI also used a GUI test to prevent future silent regressions.\n\nr? ```@jsha```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05dd1e4a2b6561b6daac38395883be6c782c2de1", "html_url": "https://github.com/rust-lang/rust/commit/05dd1e4a2b6561b6daac38395883be6c782c2de1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05dd1e4a2b6561b6daac38395883be6c782c2de1/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8f002a0a83c1c71cb66421b610251f7a32e8687d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f002a0a83c1c71cb66421b610251f7a32e8687d", "html_url": "https://github.com/rust-lang/rust/commit/8f002a0a83c1c71cb66421b610251f7a32e8687d"}, {"sha": "24c6e963d038c586458dac287b143ac29c1b6053", "url": "https://api.github.com/repos/rust-lang/rust/commits/24c6e963d038c586458dac287b143ac29c1b6053", "html_url": "https://github.com/rust-lang/rust/commit/24c6e963d038c586458dac287b143ac29c1b6053"}], "stats": {"total": 84, "additions": 81, "deletions": 3}, "files": [{"sha": "23ee87a4e681d8680e9b592b50d49fb300d9bf17", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=05dd1e4a2b6561b6daac38395883be6c782c2de1", "patch": "@@ -61,7 +61,7 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #14191f;\n }\n \n-.rust-logo > img {\n+.rust-logo {\n \tfilter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)"}, {"sha": "2db725c9b4e975a966191e9f442b22d975484565", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=05dd1e4a2b6561b6daac38395883be6c782c2de1", "patch": "@@ -32,7 +32,7 @@ pre, .rustdoc.source .example-wrap {\n \tbackground-color: #505050;\n }\n \n-.rust-logo > img {\n+.rust-logo {\n \tfilter: drop-shadow(1px 0 0px #fff)\n \t\tdrop-shadow(0 1px 0 #fff)\n \t\tdrop-shadow(-1px 0 0 #fff)"}, {"sha": "3c8dbeb98c5b3623b20c04cfcc1bfa0ac9a5e881", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=05dd1e4a2b6561b6daac38395883be6c782c2de1", "patch": "@@ -43,7 +43,7 @@ pre, .rustdoc.source .example-wrap {\n \tscrollbar-color: rgba(36, 37, 39, 0.6) #d9d9d9;\n }\n \n-.rust-logo > img {\n+.rust-logo {\n \t/* No need for a border in here! */\n }\n "}, {"sha": "4a9dcf735065f6afa86772d3c96434ccd8686046", "filename": "src/test/rustdoc-gui/rust-logo.goml", "status": "added", "additions": 78, "deletions": 0, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "raw_url": "https://github.com/rust-lang/rust/raw/05dd1e4a2b6561b6daac38395883be6c782c2de1/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml?ref=05dd1e4a2b6561b6daac38395883be6c782c2de1", "patch": "@@ -0,0 +1,78 @@\n+// This test ensures that the correct style is applied to the rust logo in the sidebar.\n+goto: file://|DOC_PATH|/test_docs/index.html\n+\n+// First we start with the dark theme.\n+local-storage: {\n+    \"rustdoc-theme\": \"dark\",\n+    \"rustdoc-preferred-dark-theme\": \"dark\",\n+    \"rustdoc-use-system-theme\": \"false\",\n+}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"drop-shadow(rgb(255, 255, 255) 1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px 1px 0px) drop-shadow(rgb(255, 255, 255) -1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px -1px 0px)\"},\n+)\n+\n+// In the source view page now.\n+goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n+\n+local-storage: {\n+    \"rustdoc-theme\": \"dark\",\n+    \"rustdoc-preferred-dark-theme\": \"dark\",\n+    \"rustdoc-use-system-theme\": \"false\",\n+}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"drop-shadow(rgb(255, 255, 255) 1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px 1px 0px) drop-shadow(rgb(255, 255, 255) -1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px -1px 0px)\"},\n+)\n+\n+// Then with the ayu theme.\n+local-storage: {\n+    \"rustdoc-theme\": \"ayu\",\n+    \"rustdoc-preferred-dark-theme\": \"ayu\",\n+    \"rustdoc-use-system-theme\": \"false\",\n+}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"drop-shadow(rgb(255, 255, 255) 1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px 1px 0px) drop-shadow(rgb(255, 255, 255) -1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px -1px 0px)\"},\n+)\n+\n+// In the source view page now.\n+goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n+\n+local-storage: {\n+    \"rustdoc-theme\": \"ayu\",\n+    \"rustdoc-preferred-dark-theme\": \"ayu\",\n+    \"rustdoc-use-system-theme\": \"false\",\n+}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"drop-shadow(rgb(255, 255, 255) 1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px 1px 0px) drop-shadow(rgb(255, 255, 255) -1px 0px 0px) drop-shadow(rgb(255, 255, 255) 0px -1px 0px)\"},\n+)\n+\n+// And finally with the light theme.\n+local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"none\"},\n+)\n+\n+// In the source view page now.\n+goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n+\n+local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n+reload:\n+\n+assert-css: (\n+    \".rust-logo\",\n+    {\"filter\": \"none\"},\n+)"}]}