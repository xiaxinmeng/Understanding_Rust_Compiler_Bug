{"sha": "a9ab2e55395013de116340e4cbfa0bb0263bb658", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE5YWIyZTU1Mzk1MDEzZGUxMTYzNDBlNGNiZmEwYmIwMjYzYmI2NTg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-19T09:08:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-08-19T09:08:11Z"}, "message": "Auto merge of #88002 - hermitcore:unbox-mutex, r=dtolnay\n\nUnbox mutexes, condvars and rwlocks on hermit\n\n[RustyHermit](https://github.com/hermitcore/rusty-hermit) provides now movable synchronization primitives and we are able to unbox mutexes and condvars.", "tree": {"sha": "137c185247866ecdbadb516f412fad9bfe3992ea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/137c185247866ecdbadb516f412fad9bfe3992ea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a9ab2e55395013de116340e4cbfa0bb0263bb658", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a9ab2e55395013de116340e4cbfa0bb0263bb658", "html_url": "https://github.com/rust-lang/rust/commit/a9ab2e55395013de116340e4cbfa0bb0263bb658", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a9ab2e55395013de116340e4cbfa0bb0263bb658/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4968a8bbd19cea8713aabff9b1575ec60e208670", "url": "https://api.github.com/repos/rust-lang/rust/commits/4968a8bbd19cea8713aabff9b1575ec60e208670", "html_url": "https://github.com/rust-lang/rust/commit/4968a8bbd19cea8713aabff9b1575ec60e208670"}, {"sha": "bbb6cb8969d104e516cb42f5719121ec01ca3e0e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbb6cb8969d104e516cb42f5719121ec01ca3e0e", "html_url": "https://github.com/rust-lang/rust/commit/bbb6cb8969d104e516cb42f5719121ec01ca3e0e"}], "stats": {"total": 12, "additions": 6, "deletions": 6}, "files": [{"sha": "14cb1f1641ba1aad3269629fad1d8f11668d5f3f", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a9ab2e55395013de116340e4cbfa0bb0263bb658/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/a9ab2e55395013de116340e4cbfa0bb0263bb658/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=a9ab2e55395013de116340e4cbfa0bb0263bb658", "patch": "@@ -1529,9 +1529,9 @@ dependencies = [\n \n [[package]]\n name = \"hermit-abi\"\n-version = \"0.1.17\"\n+version = \"0.1.19\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5aca5565f760fb5b220e499d72710ed156fdb74e631659e99377d9ebfbd13ae8\"\n+checksum = \"62b467343b94ba476dcb2500d242dadbb39557df889310ac77c5d99100aaac33\"\n dependencies = [\n  \"compiler_builtins\",\n  \"libc\","}, {"sha": "7e260aaa4289e184c873fe3783d9682f8a4d4a8d", "filename": "library/std/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2FCargo.toml?ref=a9ab2e55395013de116340e4cbfa0bb0263bb658", "patch": "@@ -42,7 +42,7 @@ dlmalloc = { version = \"0.2.1\", features = ['rustc-dep-of-std'] }\n fortanix-sgx-abi = { version = \"0.3.2\", features = ['rustc-dep-of-std'] }\n \n [target.'cfg(all(any(target_arch = \"x86_64\", target_arch = \"aarch64\"), target_os = \"hermit\"))'.dependencies]\n-hermit-abi = { version = \"0.1.17\", features = ['rustc-dep-of-std'] }\n+hermit-abi = { version = \"0.1.19\", features = ['rustc-dep-of-std'] }\n \n [target.wasm32-wasi.dependencies]\n wasi = { version = \"0.9.0\", features = ['rustc-dep-of-std'], default-features = false }"}, {"sha": "fa8ef8fc37a95d4ab3a1e4c75bd95346cbb3e042", "filename": "library/std/src/sys/hermit/condvar.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcondvar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcondvar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fcondvar.rs?ref=a9ab2e55395013de116340e4cbfa0bb0263bb658", "patch": "@@ -14,7 +14,7 @@ pub struct Condvar {\n     sem2: *const c_void,\n }\n \n-pub type MovableCondvar = Box<Condvar>;\n+pub type MovableCondvar = Condvar;\n \n unsafe impl Send for Condvar {}\n unsafe impl Sync for Condvar {}"}, {"sha": "691e7e07902d8210d0cd26b100eae745a934370c", "filename": "library/std/src/sys/hermit/mutex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Fmutex.rs?ref=a9ab2e55395013de116340e4cbfa0bb0263bb658", "patch": "@@ -156,7 +156,7 @@ pub struct Mutex {\n     inner: Spinlock<MutexInner>,\n }\n \n-pub type MovableMutex = Box<Mutex>;\n+pub type MovableMutex = Mutex;\n \n unsafe impl Send for Mutex {}\n unsafe impl Sync for Mutex {}"}, {"sha": "64eaa2fc482dc2ee31706d37e5a8515e6dee774d", "filename": "library/std/src/sys/hermit/rwlock.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9ab2e55395013de116340e4cbfa0bb0263bb658/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fhermit%2Frwlock.rs?ref=a9ab2e55395013de116340e4cbfa0bb0263bb658", "patch": "@@ -8,7 +8,7 @@ pub struct RWLock {\n     state: UnsafeCell<State>,\n }\n \n-pub type MovableRWLock = Box<RWLock>;\n+pub type MovableRWLock = RWLock;\n \n enum State {\n     Unlocked,"}]}