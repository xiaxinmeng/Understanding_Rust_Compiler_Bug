{"sha": "c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxYTA1ZmJmMDBmNGNmMjNlNDMwMzZiMjc2NGE4MzVlZDRjM2M5NmY=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-02-18T11:09:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-18T11:09:11Z"}, "message": "Rollup merge of #69252 - Mark-Simulacrum:disk-try, r=pietroalbini\n\nClean out unused directories for extra disk space\n\nThis cleans out some of the unused (but large) directories on our linux builders to hopefully allow them to complete without running out of disk space.", "tree": {"sha": "fd553b64639306496f4c7123ed667f83f8fa49f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd553b64639306496f4c7123ed667f83f8fa49f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeS8XXCRBK7hj4Ov3rIwAAdHIIAA1h9j3cUpsrvCM+oi1RaHT9\nrg02GfqkWv7E5bSHgWT8Y5s7JE04NZ5HPQwBU5l061nyLReTXTQhr40omQN3JbYZ\nEFQi2+1r3jG2fom2OUADHd5c3PEKCrs0yJ+qRUugZ3X4D1V20qEtwRvT+oVq5ssk\nVYnATezW67GAOrMt2lOxWcgHqHaQWkSNqAYJQwrDYu7H2us/OaWfnCpYP5jchKV5\nKAgIO6i2T2M7WzQnpCEEMGlTPuisbyMBOYXOXPJahOfNDQI9CPHSba+JG63izRiv\nrXrOS67Hxs8E7CG3gj/M1P4DUeVUiyp9OGAfalePbyPNPLgtqWJ1dNohh7XEdqc=\n=/V5i\n-----END PGP SIGNATURE-----\n", "payload": "tree fd553b64639306496f4c7123ed667f83f8fa49f8\nparent 20c483506a8e1c904f57d8775252f0f74d6de1f2\nparent c992ab23fa14a38c5565889d52ba3a3fb6e1e831\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1582024151 +0900\ncommitter GitHub <noreply@github.com> 1582024151 +0900\n\nRollup merge of #69252 - Mark-Simulacrum:disk-try, r=pietroalbini\n\nClean out unused directories for extra disk space\n\nThis cleans out some of the unused (but large) directories on our linux builders to hopefully allow them to complete without running out of disk space.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "html_url": "https://github.com/rust-lang/rust/commit/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20c483506a8e1c904f57d8775252f0f74d6de1f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/20c483506a8e1c904f57d8775252f0f74d6de1f2", "html_url": "https://github.com/rust-lang/rust/commit/20c483506a8e1c904f57d8775252f0f74d6de1f2"}, {"sha": "c992ab23fa14a38c5565889d52ba3a3fb6e1e831", "url": "https://api.github.com/repos/rust-lang/rust/commits/c992ab23fa14a38c5565889d52ba3a3fb6e1e831", "html_url": "https://github.com/rust-lang/rust/commit/c992ab23fa14a38c5565889d52ba3a3fb6e1e831"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "c39f75aba89d85162b130d7e518c1db2f7b2eb89", "filename": "src/ci/azure-pipelines/steps/run.yml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fsteps%2Frun.yml?ref=c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "patch": "@@ -31,6 +31,9 @@ steps:\n - bash: src/ci/scripts/setup-environment.sh\n   displayName: Setup environment\n \n+- bash: src/ci/scripts/clean-disk.sh\n+  displayName: Clean disk\n+\n - bash: src/ci/scripts/should-skip-this.sh\n   displayName: Decide whether to run this job\n "}, {"sha": "c50de37c492b422decb2542a70afd7c8fd93f4b1", "filename": "src/ci/scripts/clean-disk.sh", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f/src%2Fci%2Fscripts%2Fclean-disk.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c1a05fbf00f4cf23e43036b2764a835ed4c3c96f/src%2Fci%2Fscripts%2Fclean-disk.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Fclean-disk.sh?ref=c1a05fbf00f4cf23e43036b2764a835ed4c3c96f", "patch": "@@ -0,0 +1,16 @@\n+#!/bin/bash\n+# This script deletes some of the Azure-provided artifacts. We don't use these,\n+# and disk space is at a premium on our builders.\n+\n+set -euo pipefail\n+IFS=$'\\n\\t'\n+\n+source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n+\n+# All the Linux builds happen inside Docker.\n+if isLinux; then\n+    # 6.7GB\n+    sudo rm -rf /opt/ghc\n+    # 16GB\n+    sudo rm -rf /usr/share/dotnet\n+fi"}]}