{"sha": "abb9a9853b094eeeea5ea784d188e842a17c5dc8", "node_id": "C_kwDOAAsO6NoAKGFiYjlhOTg1M2IwOTRlZWVlYTVlYTc4NGQxODhlODQyYTE3YzVkYzg", "commit": {"author": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2021-11-06T10:32:11Z"}, "committer": {"name": "Ellen", "email": "supbscripter@gmail.com", "date": "2021-11-06T10:39:11Z"}, "message": "type error go brrrrrrrr", "tree": {"sha": "66c235276f5211f60538c47b6a47e8a12a83f88a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66c235276f5211f60538c47b6a47e8a12a83f88a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/abb9a9853b094eeeea5ea784d188e842a17c5dc8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/abb9a9853b094eeeea5ea784d188e842a17c5dc8", "html_url": "https://github.com/rust-lang/rust/commit/abb9a9853b094eeeea5ea784d188e842a17c5dc8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/abb9a9853b094eeeea5ea784d188e842a17c5dc8/comments", "author": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7276a6a11768634c1e7df5605a83a0f117302c50", "url": "https://api.github.com/repos/rust-lang/rust/commits/7276a6a11768634c1e7df5605a83a0f117302c50", "html_url": "https://github.com/rust-lang/rust/commit/7276a6a11768634c1e7df5605a83a0f117302c50"}], "stats": {"total": 53, "additions": 51, "deletions": 2}, "files": [{"sha": "c7d8bec506f6b80af01ed5e80d120ea8879ac7bb", "filename": "compiler/rustc_middle/src/ty/relate.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/abb9a9853b094eeeea5ea784d188e842a17c5dc8/compiler%2Frustc_middle%2Fsrc%2Fty%2Frelate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abb9a9853b094eeeea5ea784d188e842a17c5dc8/compiler%2Frustc_middle%2Fsrc%2Fty%2Frelate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Frelate.rs?ref=abb9a9853b094eeeea5ea784d188e842a17c5dc8", "patch": "@@ -187,8 +187,12 @@ impl<'tcx> Relate<'tcx> for ty::FnSig<'tcx> {\n             })\n             .enumerate()\n             .map(|(i, r)| match r {\n-                Err(TypeError::Sorts(exp_found)) => Err(TypeError::ArgumentSorts(exp_found, i)),\n-                Err(TypeError::Mutability) => Err(TypeError::ArgumentMutability(i)),\n+                Err(TypeError::Sorts(exp_found) | TypeError::ArgumentSorts(exp_found, _)) => {\n+                    Err(TypeError::ArgumentSorts(exp_found, i))\n+                }\n+                Err(TypeError::Mutability | TypeError::ArgumentMutability(_)) => {\n+                    Err(TypeError::ArgumentMutability(i))\n+                }\n                 r => r,\n             });\n         Ok(ty::FnSig {"}, {"sha": "7c262dcf723390fbe58ef980b862666e536d2986", "filename": "compiler/rustc_typeck/src/check/compare_method.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/abb9a9853b094eeeea5ea784d188e842a17c5dc8/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abb9a9853b094eeeea5ea784d188e842a17c5dc8/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fcompare_method.rs?ref=abb9a9853b094eeeea5ea784d188e842a17c5dc8", "patch": "@@ -453,6 +453,7 @@ fn check_region_bounds_on_impl_item<'tcx>(\n     Ok(())\n }\n \n+#[instrument(level = \"debug\", skip(infcx))]\n fn extract_spans_for_error_reporting<'a, 'tcx>(\n     infcx: &infer::InferCtxt<'a, 'tcx>,\n     terr: &TypeError<'_>,"}, {"sha": "6c287d9a707de2e456c51c4506609febb26c22c9", "filename": "src/test/ui/compare-method/issue-90444.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/abb9a9853b094eeeea5ea784d188e842a17c5dc8/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.rs", "raw_url": "https://github.com/rust-lang/rust/raw/abb9a9853b094eeeea5ea784d188e842a17c5dc8/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.rs?ref=abb9a9853b094eeeea5ea784d188e842a17c5dc8", "patch": "@@ -0,0 +1,17 @@\n+pub struct A;\n+impl From<fn((), (), &())> for A {\n+    fn from(_: fn((), (), &mut ())) -> Self {\n+        //~^ error: method `from` has an incompatible type for trait\n+        loop {}\n+    }\n+}\n+\n+pub struct B;\n+impl From<fn((), (), u32)> for B {\n+    fn from(_: fn((), (), u64)) -> Self {\n+        //~^ error: method `from` has an incompatible type for trait\n+        loop {}\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "84bbec0623fd8f56c72d45b5b6e75941bef8915a", "filename": "src/test/ui/compare-method/issue-90444.stderr", "status": "added", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/abb9a9853b094eeeea5ea784d188e842a17c5dc8/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/abb9a9853b094eeeea5ea784d188e842a17c5dc8/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcompare-method%2Fissue-90444.stderr?ref=abb9a9853b094eeeea5ea784d188e842a17c5dc8", "patch": "@@ -0,0 +1,27 @@\n+error[E0053]: method `from` has an incompatible type for trait\n+  --> $DIR/issue-90444.rs:3:16\n+   |\n+LL |     fn from(_: fn((), (), &mut ())) -> Self {\n+   |                ^^^^^^^^^^^^^^^^^^^\n+   |                |\n+   |                types differ in mutability\n+   |                help: change the parameter type to match the trait: `for<'r> fn((), (), &'r ())`\n+   |\n+   = note: expected fn pointer `fn(for<'r> fn((), (), &'r ())) -> A`\n+              found fn pointer `fn(for<'r> fn((), (), &'r mut ())) -> A`\n+\n+error[E0053]: method `from` has an incompatible type for trait\n+  --> $DIR/issue-90444.rs:11:16\n+   |\n+LL |     fn from(_: fn((), (), u64)) -> Self {\n+   |                ^^^^^^^^^^^^^^^\n+   |                |\n+   |                expected `u32`, found `u64`\n+   |                help: change the parameter type to match the trait: `fn((), (), u32)`\n+   |\n+   = note: expected fn pointer `fn(fn((), (), u32)) -> B`\n+              found fn pointer `fn(fn((), (), u64)) -> B`\n+\n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0053`."}]}