{"sha": "f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY5MjU3MzVlNjRjYjZhZWQ4NWYyOGNhY2MwYTkxYzFjMWJjMDZiYjQ=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-10-20T15:15:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-20T15:15:58Z"}, "message": "Merge #6297\n\n6297: Support Display name in project.json r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "8ac8a8f761db3bd3b60446001739b94bb1ed44dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ac8a8f761db3bd3b60446001739b94bb1ed44dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfjv8uCRBK7hj4Ov3rIwAAdHIIAICPk93H+7PDAnNlSR/+f2dl\nptqVIHC4zSfMBUuXQDtloh9/mj5hdVZ42nmz/Y6ytudncfuAQWvoiNHNQBcmXLHv\nn1MeMz7Wzzc1vSyg9kSuTVm7CTE4auY7VNNO4kG79eAw3ebbMk7wFwqqdbiTCpCf\niY68GXJoRq9S9vU2HZJJrM14kOCZ/yZA9OaDmFI+QWTW78P8cdEEsAHCp/8QT/Sx\nhVsnLrl0CQ9gWjMChFgsz4XZ7Mj4OA7LvrTP8lXdcCOMFeTAcydnfeZKCaLM5qKL\n+23vT0vULzxbPlAHYKsU1QEJywcOrsTJeG5cWiIcVdiUweJDiGYcX79MVzZmj70=\n=Ow4w\n-----END PGP SIGNATURE-----\n", "payload": "tree 8ac8a8f761db3bd3b60446001739b94bb1ed44dd\nparent 1c24f57ef8420e924e904ec481e7c6471f3ddcc8\nparent f753c3ecd20c4a448403d2d7d9b334a289f9e5b3\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1603206958 +0000\ncommitter GitHub <noreply@github.com> 1603206958 +0000\n\nMerge #6297\n\n6297: Support Display name in project.json r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "html_url": "https://github.com/rust-lang/rust/commit/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c24f57ef8420e924e904ec481e7c6471f3ddcc8", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c24f57ef8420e924e904ec481e7c6471f3ddcc8", "html_url": "https://github.com/rust-lang/rust/commit/1c24f57ef8420e924e904ec481e7c6471f3ddcc8"}, {"sha": "f753c3ecd20c4a448403d2d7d9b334a289f9e5b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/f753c3ecd20c4a448403d2d7d9b334a289f9e5b3", "html_url": "https://github.com/rust-lang/rust/commit/f753c3ecd20c4a448403d2d7d9b334a289f9e5b3"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "e92cfea596b5689945cf68a381346112a0b49417", "filename": "crates/project_model/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/crates%2Fproject_model%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/crates%2Fproject_model%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Flib.rs?ref=f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "patch": "@@ -335,8 +335,7 @@ impl ProjectWorkspace {\n                             crate_graph.add_crate_root(\n                                 file_id,\n                                 krate.edition,\n-                                // FIXME json definitions can store the crate name\n-                                None,\n+                                krate.display_name.clone(),\n                                 cfg_options,\n                                 env,\n                                 proc_macro.unwrap_or_default(),"}, {"sha": "aab279223aee6d6ea11795e4a6c300f4ef418a28", "filename": "crates/project_model/src/project_json.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/crates%2Fproject_model%2Fsrc%2Fproject_json.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/crates%2Fproject_model%2Fsrc%2Fproject_json.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Fproject_json.rs?ref=f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "patch": "@@ -2,7 +2,7 @@\n \n use std::path::PathBuf;\n \n-use base_db::{CrateId, CrateName, Dependency, Edition};\n+use base_db::{CrateDisplayName, CrateId, CrateName, Dependency, Edition};\n use paths::{AbsPath, AbsPathBuf};\n use rustc_hash::FxHashMap;\n use serde::{de, Deserialize};\n@@ -21,6 +21,7 @@ pub struct ProjectJson {\n /// useful in creating the crate graph.\n #[derive(Clone, Debug, Eq, PartialEq)]\n pub struct Crate {\n+    pub(crate) display_name: Option<CrateDisplayName>,\n     pub(crate) root_module: AbsPathBuf,\n     pub(crate) edition: Edition,\n     pub(crate) deps: Vec<Dependency>,\n@@ -68,6 +69,9 @@ impl ProjectJson {\n                     };\n \n                     Crate {\n+                        display_name: crate_data\n+                            .display_name\n+                            .map(CrateDisplayName::from_canonical_name),\n                         root_module,\n                         edition: crate_data.edition.into(),\n                         deps: crate_data\n@@ -114,6 +118,7 @@ pub struct ProjectJsonData {\n \n #[derive(Deserialize)]\n struct CrateData {\n+    display_name: Option<String>,\n     root_module: PathBuf,\n     edition: EditionData,\n     deps: Vec<DepData>,"}, {"sha": "7e8adcdb75c0dd88ca9074de1814cea41fc1e3e6", "filename": "docs/user/manual.adoc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/docs%2Fuser%2Fmanual.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/f925735e64cb6aed85f28cacc0a91c1c1bc06bb4/docs%2Fuser%2Fmanual.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fmanual.adoc?ref=f925735e64cb6aed85f28cacc0a91c1c1bc06bb4", "patch": "@@ -287,6 +287,9 @@ interface JsonProject {\n }\n \n interface Crate {\n+    /// Optional crate name used for display purposes, without affecting semantics.\n+    /// See the `deps` key for semantically-significant crate names.\n+    display_name?: string;\n     /// Path to the root module of the crate.\n     root_module: string;\n     /// Edition of the crate."}]}