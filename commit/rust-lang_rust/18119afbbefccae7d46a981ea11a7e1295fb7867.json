{"sha": "18119afbbefccae7d46a981ea11a7e1295fb7867", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4MTE5YWZiYmVmY2NhZTdkNDZhOTgxZWExMWE3ZTEyOTVmYjc4Njc=", "commit": {"author": {"name": "Steven Fackler", "email": "sfackler@gmail.com", "date": "2013-11-15T07:25:00Z"}, "committer": {"name": "Steven Fackler", "email": "sfackler@gmail.com", "date": "2013-11-23T05:19:53Z"}, "message": "Move Rc tests away from Cell", "tree": {"sha": "603cdb959f3e8f543f9574bb636f93ec0bb2a906", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/603cdb959f3e8f543f9574bb636f93ec0bb2a906"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18119afbbefccae7d46a981ea11a7e1295fb7867", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18119afbbefccae7d46a981ea11a7e1295fb7867", "html_url": "https://github.com/rust-lang/rust/commit/18119afbbefccae7d46a981ea11a7e1295fb7867", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18119afbbefccae7d46a981ea11a7e1295fb7867/comments", "author": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sfackler", "id": 1455697, "node_id": "MDQ6VXNlcjE0NTU2OTc=", "avatar_url": "https://avatars.githubusercontent.com/u/1455697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sfackler", "html_url": "https://github.com/sfackler", "followers_url": "https://api.github.com/users/sfackler/followers", "following_url": "https://api.github.com/users/sfackler/following{/other_user}", "gists_url": "https://api.github.com/users/sfackler/gists{/gist_id}", "starred_url": "https://api.github.com/users/sfackler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sfackler/subscriptions", "organizations_url": "https://api.github.com/users/sfackler/orgs", "repos_url": "https://api.github.com/users/sfackler/repos", "events_url": "https://api.github.com/users/sfackler/events{/privacy}", "received_events_url": "https://api.github.com/users/sfackler/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c9daa8ff71cb5896af9bb9a6ec8e15391e76b4e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c9daa8ff71cb5896af9bb9a6ec8e15391e76b4e", "html_url": "https://github.com/rust-lang/rust/commit/7c9daa8ff71cb5896af9bb9a6ec8e15391e76b4e"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "2ffdf91ba2fd168bc39f60e0d1644c838ec709bd", "filename": "src/libstd/rc.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/18119afbbefccae7d46a981ea11a7e1295fb7867/src%2Flibstd%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18119afbbefccae7d46a981ea11a7e1295fb7867/src%2Flibstd%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frc.rs?ref=18119afbbefccae7d46a981ea11a7e1295fb7867", "patch": "@@ -105,26 +105,26 @@ impl<T> Drop for Rc<T> {\n #[cfg(test)]\n mod test_rc {\n     use super::*;\n-    use cell::Cell;\n+    use mutable::Mut;\n \n     #[test]\n     fn test_clone() {\n-        let x = Rc::from_send(Cell::new(5));\n+        let x = Rc::from_send(Mut::new(5));\n         let y = x.clone();\n-        do x.borrow().with_mut_ref |inner| {\n+        do x.borrow().map_mut |inner| {\n             *inner = 20;\n         }\n-        assert_eq!(y.borrow().take(), 20);\n+        assert_eq!(y.borrow().map(|v| *v), 20);\n     }\n \n     #[test]\n     fn test_deep_clone() {\n-        let x = Rc::from_send(Cell::new(5));\n+        let x = Rc::from_send(Mut::new(5));\n         let y = x.deep_clone();\n-        do x.borrow().with_mut_ref |inner| {\n+        do x.borrow().map_mut |inner| {\n             *inner = 20;\n         }\n-        assert_eq!(y.borrow().take(), 5);\n+        assert_eq!(y.borrow().map(|v| *v), 5);\n     }\n \n     #[test]"}]}