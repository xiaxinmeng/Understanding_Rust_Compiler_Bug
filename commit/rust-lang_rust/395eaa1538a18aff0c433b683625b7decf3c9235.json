{"sha": "395eaa1538a18aff0c433b683625b7decf3c9235", "node_id": "C_kwDOAAsO6NoAKDM5NWVhYTE1MzhhMThhZmYwYzQzM2I2ODM2MjViN2RlY2YzYzkyMzU", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-14T14:17:43Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-14T14:17:43Z"}, "message": "Remove Test nightly Cranelift workflow\n\nCranelift makes api breaking changes often enough that this workflow\nfails half of the time. As such in practice I completely ignore it's\nresult and push an update to a branch after Cranelift branches to test\neverything on CI. In this update I immediately fix the fallout of api\nbreaking changes.", "tree": {"sha": "b6916fa3b1044046d29549d246d67475307913ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6916fa3b1044046d29549d246d67475307913ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/395eaa1538a18aff0c433b683625b7decf3c9235", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/395eaa1538a18aff0c433b683625b7decf3c9235", "html_url": "https://github.com/rust-lang/rust/commit/395eaa1538a18aff0c433b683625b7decf3c9235", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/395eaa1538a18aff0c433b683625b7decf3c9235/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8af4eacc8c6e8daad185cffef90ecad6919e34c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/8af4eacc8c6e8daad185cffef90ecad6919e34c1", "html_url": "https://github.com/rust-lang/rust/commit/8af4eacc8c6e8daad185cffef90ecad6919e34c1"}], "stats": {"total": 48, "additions": 0, "deletions": 48}, "files": [{"sha": "c3dd7445fd8b98048efac2a49a632b3606ab6332", "filename": ".github/workflows/nightly-cranelift.yml", "status": "removed", "additions": 0, "deletions": 48, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/8af4eacc8c6e8daad185cffef90ecad6919e34c1/.github%2Fworkflows%2Fnightly-cranelift.yml", "raw_url": "https://github.com/rust-lang/rust/raw/8af4eacc8c6e8daad185cffef90ecad6919e34c1/.github%2Fworkflows%2Fnightly-cranelift.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fnightly-cranelift.yml?ref=8af4eacc8c6e8daad185cffef90ecad6919e34c1", "patch": "@@ -1,48 +0,0 @@\n-name: Test nightly Cranelift\n-\n-on:\n-  push:\n-  schedule:\n-    - cron: '17 1 * * *' # At 01:17 UTC every day.\n-\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    timeout-minutes: 60\n-\n-    steps:\n-    - uses: actions/checkout@v3\n-\n-    - name: Use sparse cargo registry\n-      run: |\n-        cat >> ~/.cargo/config.toml <<EOF\n-        [unstable]\n-        sparse-registry = true\n-        EOF\n-\n-    - name: Prepare dependencies\n-      run: ./y.rs prepare\n-\n-    - name: Patch Cranelift\n-      run: |\n-        sed -i 's/cranelift-codegen = { version = \"\\w*.\\w*.\\w*\", features = \\[\"unwind\", \"all-arch\"\\] }/cranelift-codegen = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\", features = [\"unwind\", \"all-arch\"] }/' Cargo.toml\n-        sed -i 's/cranelift-frontend = \"\\w*.\\w*.\\w*\"/cranelift-frontend = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\" }/' Cargo.toml\n-        sed -i 's/cranelift-module = \"\\w*.\\w*.\\w*\"/cranelift-module = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\" }/' Cargo.toml\n-        sed -i 's/cranelift-native = \"\\w*.\\w*.\\w*\"/cranelift-native = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\" }/' Cargo.toml\n-        sed -i 's/cranelift-jit = { version = \"\\w*.\\w*.\\w*\", optional = true }/cranelift-jit = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\", optional = true }/' Cargo.toml\n-        sed -i 's/cranelift-object = \"\\w*.\\w*.\\w*\"/cranelift-object = { git = \"https:\\/\\/github.com\\/bytecodealliance\\/wasmtime.git\" }/' Cargo.toml\n-\n-        sed -i 's/object = { version = \"0.27.0\"/object = { version = \"0.28.0\"/' Cargo.toml\n-\n-        cat Cargo.toml\n-\n-        cargo fetch\n-\n-    - name: Build without unstable features\n-      # This is the config rust-lang/rust uses for builds\n-      run: ./y.rs build --no-unstable-features\n-\n-    - name: Build\n-      run: ./y.rs build --sysroot none\n-    - name: Test\n-      run: ./test.sh"}]}