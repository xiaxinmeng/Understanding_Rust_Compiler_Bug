{"sha": "99127abca8c9678e14ee11bee4d46bc34ec8b164", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5MTI3YWJjYThjOTY3OGUxNGVlMTFiZWU0ZDQ2YmMzNGVjOGIxNjQ=", "commit": {"author": {"name": "Emilio Cobos \u00c1lvarez", "email": "emilio@crisal.io", "date": "2018-02-19T00:57:55Z"}, "committer": {"name": "Emilio Cobos \u00c1lvarez", "email": "emilio@crisal.io", "date": "2018-03-25T01:30:05Z"}, "message": "rustc_trans: disable probestack when using pgo-gen.\n\nExecutables crash in the probestack function otherwise... I haven't debugged\nmuch further than that.\n\nSigned-off-by: Emilio Cobos \u00c1lvarez <emilio@crisal.io>", "tree": {"sha": "66c1eda706f6a499d09b66616333387046ac18c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66c1eda706f6a499d09b66616333387046ac18c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99127abca8c9678e14ee11bee4d46bc34ec8b164", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE+uMrE+H37zcdV8pyBWtye7nBAnwFAlq2+50ACgkQBWtye7nB\nAnz4uggAl7iVgUPjMTIhiAkk4TySg28ke+5NaSV75YalndNnsmsoM6Kk5KJM+5E8\niFjjpUFOgYZOuxO4BAfXy8tmju2wdxPxVk+uiAyBIySOpwdJ7jdb589PEmSBrapY\nyHkB6nUS6/WviQsPosaxFi+MF7L9SG10KqdBn621egTxKasVLYcFigdHD0DRzOTm\nDIAh1PJ+nr84reRs81GER2aGkUn698TIJem4LfTAR827ZSRhqZnnLHTk55gFQEST\nSvQcFTfF4Cie0ywK7zsYYm/9QrU2bQAwba3uoOGJz0d6ljwNp5CsDA2+5OBHS2+i\nZNOI0uEbbhvi2pZC1FuGg4UjoNsz7g==\n=KBsI\n-----END PGP SIGNATURE-----", "payload": "tree 66c1eda706f6a499d09b66616333387046ac18c4\nparent 324ca7acd59be59abe0562287d5493f78a60823a\nauthor Emilio Cobos \u00c1lvarez <emilio@crisal.io> 1519001875 +0100\ncommitter Emilio Cobos \u00c1lvarez <emilio@crisal.io> 1521941405 +0200\n\nrustc_trans: disable probestack when using pgo-gen.\n\nExecutables crash in the probestack function otherwise... I haven't debugged\nmuch further than that.\n\nSigned-off-by: Emilio Cobos \u00c1lvarez <emilio@crisal.io>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99127abca8c9678e14ee11bee4d46bc34ec8b164", "html_url": "https://github.com/rust-lang/rust/commit/99127abca8c9678e14ee11bee4d46bc34ec8b164", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99127abca8c9678e14ee11bee4d46bc34ec8b164/comments", "author": {"login": "emilio", "id": 1323194, "node_id": "MDQ6VXNlcjEzMjMxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1323194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emilio", "html_url": "https://github.com/emilio", "followers_url": "https://api.github.com/users/emilio/followers", "following_url": "https://api.github.com/users/emilio/following{/other_user}", "gists_url": "https://api.github.com/users/emilio/gists{/gist_id}", "starred_url": "https://api.github.com/users/emilio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emilio/subscriptions", "organizations_url": "https://api.github.com/users/emilio/orgs", "repos_url": "https://api.github.com/users/emilio/repos", "events_url": "https://api.github.com/users/emilio/events{/privacy}", "received_events_url": "https://api.github.com/users/emilio/received_events", "type": "User", "site_admin": false}, "committer": {"login": "emilio", "id": 1323194, "node_id": "MDQ6VXNlcjEzMjMxOTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1323194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emilio", "html_url": "https://github.com/emilio", "followers_url": "https://api.github.com/users/emilio/followers", "following_url": "https://api.github.com/users/emilio/following{/other_user}", "gists_url": "https://api.github.com/users/emilio/gists{/gist_id}", "starred_url": "https://api.github.com/users/emilio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emilio/subscriptions", "organizations_url": "https://api.github.com/users/emilio/orgs", "repos_url": "https://api.github.com/users/emilio/repos", "events_url": "https://api.github.com/users/emilio/events{/privacy}", "received_events_url": "https://api.github.com/users/emilio/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "324ca7acd59be59abe0562287d5493f78a60823a", "url": "https://api.github.com/repos/rust-lang/rust/commits/324ca7acd59be59abe0562287d5493f78a60823a", "html_url": "https://github.com/rust-lang/rust/commit/324ca7acd59be59abe0562287d5493f78a60823a"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "f53c1e84f6e8edeb9dd168c8c356e1c7746ecc39", "filename": "src/librustc_trans/attributes.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/99127abca8c9678e14ee11bee4d46bc34ec8b164/src%2Flibrustc_trans%2Fattributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99127abca8c9678e14ee11bee4d46bc34ec8b164/src%2Flibrustc_trans%2Fattributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fattributes.rs?ref=99127abca8c9678e14ee11bee4d46bc34ec8b164", "patch": "@@ -92,6 +92,11 @@ pub fn set_probestack(cx: &CodegenCx, llfn: ValueRef) {\n         _ => {}\n     }\n \n+    // probestack doesn't play nice either with pgo-gen.\n+    if cx.sess().opts.cg.pgo_gen.is_some() {\n+        return;\n+    }\n+\n     // Flag our internal `__rust_probestack` function as the stack probe symbol.\n     // This is defined in the `compiler-builtins` crate for each architecture.\n     llvm::AddFunctionAttrStringValue("}]}