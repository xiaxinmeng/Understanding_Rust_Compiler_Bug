{"sha": "528b4af7964e9632ef65f4543893bec846cf4403", "node_id": "C_kwDOAAsO6NoAKDUyOGI0YWY3OTY0ZTk2MzJlZjY1ZjQ1NDM4OTNiZWM4NDZjZjQ0MDM", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev+love@gmail.com", "date": "2022-11-13T07:41:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-13T07:41:44Z"}, "message": "Rollup merge of #104177 - notriddle:notriddle/js-notable-trait-v2, r=GuillaumeGomez\n\nrustdoc: use consistent \"popover\" styling for notable traits\n\nFollow-up to #104129\nFixes https://github.com/rust-lang/rust/issues/104313.\n\nPreview: https://notriddle.com/notriddle-rustdoc-demos/js-notable-trait-v2/std/iter/trait.Iterator.html#method.step_by\n\n## Before\n\n![image](https://user-images.githubusercontent.com/1593513/200710372-d2d992ce-0bdc-4437-9a2e-379a29df09cf.png)\n\n![image](https://user-images.githubusercontent.com/1593513/200711266-e372b176-daa9-45f3-a022-738ef0a77d3c.png)\n\n## After\n\n![image](https://user-images.githubusercontent.com/1593513/200710601-09b3b717-116f-43c6-b14f-34a8b02b33c0.png)\n\n![image](https://user-images.githubusercontent.com/1593513/200711288-3978cdc1-a6c2-47f6-9216-e22e3c1f5bdf.png)", "tree": {"sha": "4198d869afcdfe79a9d3b5f984fa73267cec67d0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4198d869afcdfe79a9d3b5f984fa73267cec67d0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/528b4af7964e9632ef65f4543893bec846cf4403", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjcJ+4CRBK7hj4Ov3rIwAAFIkIADd+Lk7E4o9hU5vF4R+tMSVb\nFT4S3TyfStiJ2+dT4WZj+9hqt8u2esQCONMCtyTjI7WTbpfKZUj1HijM01p2Xfgh\nQpgXWZI0BWkIWGdWwiE/iVy2Ur+6iP/LCz0qJZLChHzVAenYfvSgY/jRS3tq0ci4\nCCuDvxyekMM/+3Fm2HPZ/11XO4ky2udnOCgSZkEjUNAAGqftVP39sXcJLxHGAd7G\nGLaKwI9ynRx1v64rUfAKDEBxWJ+lE8qD7hTNdBPM3DU7ss0k34UVxHW3C+aeUUJY\nQ3wkLBw8U8tk+680E6dQgpMVNfGCFI/L6iWWkX3wVDvQmlK5bPV5bMXrB9bYYZI=\n=R/JY\n-----END PGP SIGNATURE-----\n", "payload": "tree 4198d869afcdfe79a9d3b5f984fa73267cec67d0\nparent 96753eb0e077ea0e6b7de60ff75a905d729f4119\nparent 79b6112ab53a9f5cd2b267dfbdb8bcae7049b2f7\nauthor Yuki Okushi <huyuumi.dev+love@gmail.com> 1668325304 +0900\ncommitter GitHub <noreply@github.com> 1668325304 +0900\n\nRollup merge of #104177 - notriddle:notriddle/js-notable-trait-v2, r=GuillaumeGomez\n\nrustdoc: use consistent \"popover\" styling for notable traits\n\nFollow-up to #104129\nFixes https://github.com/rust-lang/rust/issues/104313.\n\nPreview: https://notriddle.com/notriddle-rustdoc-demos/js-notable-trait-v2/std/iter/trait.Iterator.html#method.step_by\n\n## Before\n\n![image](https://user-images.githubusercontent.com/1593513/200710372-d2d992ce-0bdc-4437-9a2e-379a29df09cf.png)\n\n![image](https://user-images.githubusercontent.com/1593513/200711266-e372b176-daa9-45f3-a022-738ef0a77d3c.png)\n\n## After\n\n![image](https://user-images.githubusercontent.com/1593513/200710601-09b3b717-116f-43c6-b14f-34a8b02b33c0.png)\n\n![image](https://user-images.githubusercontent.com/1593513/200711288-3978cdc1-a6c2-47f6-9216-e22e3c1f5bdf.png)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/528b4af7964e9632ef65f4543893bec846cf4403", "html_url": "https://github.com/rust-lang/rust/commit/528b4af7964e9632ef65f4543893bec846cf4403", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/528b4af7964e9632ef65f4543893bec846cf4403/comments", "author": null, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96753eb0e077ea0e6b7de60ff75a905d729f4119", "url": "https://api.github.com/repos/rust-lang/rust/commits/96753eb0e077ea0e6b7de60ff75a905d729f4119", "html_url": "https://github.com/rust-lang/rust/commit/96753eb0e077ea0e6b7de60ff75a905d729f4119"}, {"sha": "79b6112ab53a9f5cd2b267dfbdb8bcae7049b2f7", "url": "https://api.github.com/repos/rust-lang/rust/commits/79b6112ab53a9f5cd2b267dfbdb8bcae7049b2f7", "html_url": "https://github.com/rust-lang/rust/commit/79b6112ab53a9f5cd2b267dfbdb8bcae7049b2f7"}], "stats": {"total": 264, "additions": 134, "deletions": 130}, "files": [{"sha": "8731efb5e87469df5771f938ef9dc1521d9d7902", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1312,9 +1312,7 @@ pub(crate) fn notable_traits_button(ty: &clean::Type, cx: &mut Context<'_>) -> O\n     if has_notable_trait {\n         cx.types_with_notable_traits.insert(ty.clone());\n         Some(format!(\n-            \"<span class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\\\n-                <span class=\\\"notable-traits-tooltip\\\">\u24d8</span>\\\n-            </span>\",\n+            \" <a href=\\\"#\\\" class=\\\"notable-traits\\\" data-ty=\\\"{ty}\\\">\u24d8</a>\",\n             ty = Escape(&format!(\"{:#}\", ty.print(cx))),\n         ))\n     } else {\n@@ -1343,7 +1341,7 @@ fn notable_traits_decl(ty: &clean::Type, cx: &Context<'_>) -> (String, String) {\n                 if out.is_empty() {\n                     write!(\n                         &mut out,\n-                        \"<h3 class=\\\"notable\\\">Notable traits for <code>{}</code></h3>\\\n+                        \"<h3>Notable traits for <code>{}</code></h3>\\\n                      <pre class=\\\"content\\\"><code>\",\n                         impl_.for_.print(cx)\n                     );"}, {"sha": "8a024063d7559c95ba25bcd4a8cdd494f69f5150", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 19, "deletions": 52, "changes": 71, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -929,13 +929,14 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \tborder-radius: 3px;\n \tborder: 1px solid var(--border-color);\n \tfont-size: 1rem;\n+\t--popover-arrow-offset: 11px;\n }\n \n /* This rule is to draw the little arrow connecting the settings menu to the gear icon. */\n .popover::before {\n \tcontent: '';\n \tposition: absolute;\n-\tright: 11px;\n+\tright: var(--popover-arrow-offset);\n \tborder: solid var(--border-color);\n \tborder-width: 1px 1px 0 0;\n \tdisplay: inline-block;\n@@ -952,10 +953,7 @@ so that we can apply CSS-filters to change the arrow color in themes */\n /* use larger max-width for help popover, but not for help.html */\n #help.popover {\n \tmax-width: 600px;\n-}\n-\n-#help.popover::before {\n-\tright: 48px;\n+\t--popover-arrow-offset: 48px;\n }\n \n #help dt {\n@@ -1274,54 +1272,34 @@ h3.variant {\n \tborder-right: 3px solid var(--target-border-color);\n }\n \n-.notable-traits-tooltip {\n-\tdisplay: inline-block;\n-\tcursor: pointer;\n-}\n-\n-.notable-traits .notable-traits-tooltiptext {\n-\tdisplay: inline-block;\n-\tvisibility: hidden;\n+.notable-traits {\n+\tcolor: inherit;\n+\tmargin-right: 15px;\n+\tposition: relative;\n }\n \n-.notable-traits-tooltiptext {\n-\tpadding: 5px 3px 3px 3px;\n-\tborder-radius: 6px;\n-\tmargin-left: 5px;\n-\tz-index: 10;\n-\tfont-size: 1rem;\n-\tcursor: default;\n+/* placeholder thunk so that the mouse can easily travel from \"(i)\" to popover\n+\tthe resulting \"hover tunnel\" is a stepped triangle, approximating\n+\thttps://bjk5.com/post/44698559168/breaking-down-amazons-mega-dropdown */\n+.notable-traits:hover::after {\n \tposition: absolute;\n-\tborder: 1px solid;\n-}\n-\n-.notable-traits-tooltip::after {\n-\t/* The margin on the tooltip does not capture hover events,\n-\t   this extends the area of hover enough so that mouse hover is not\n-\t   lost when moving the mouse to the tooltip */\n-\tcontent: \"\\00a0\\00a0\\00a0\";\n-}\n-\n-.notable-traits-tooltiptext .docblock {\n-\tmargin: 0;\n+\ttop: calc(100% - 10px);\n+\tleft: -15px;\n+\tright: -15px;\n+\theight: 20px;\n+\tcontent: \"\\00a0\";\n }\n \n-.notable-traits-tooltiptext .notable {\n-\tfont-size: 1.1875rem;\n-\tfont-weight: 600;\n-\tdisplay: block;\n+.notable .docblock {\n+\tmargin: 0.25em 0.5em;\n }\n \n-.notable-traits-tooltiptext pre, .notable-traits-tooltiptext code {\n+.notable .docblock pre, .notable .docblock code {\n \tbackground: transparent;\n-}\n-\n-.notable-traits-tooltiptext .docblock pre.content {\n \tmargin: 0;\n \tpadding: 0;\n \tfont-size: 1.25rem;\n \twhite-space: pre-wrap;\n-\toverflow: hidden;\n }\n \n .search-failed {\n@@ -1364,12 +1342,6 @@ h3.variant {\n \tfont-size: 1rem;\n }\n \n-.notable-traits {\n-\tcursor: pointer;\n-\tz-index: 2;\n-\tmargin-left: 5px;\n-}\n-\n #sidebar-toggle {\n \tposition: sticky;\n \ttop: 0;\n@@ -1854,11 +1826,6 @@ in storage.js\n \t\tborder-bottom: 1px solid;\n \t}\n \n-\t.notable-traits .notable-traits-tooltiptext {\n-\t\tleft: 0;\n-\t\ttop: 100%;\n-\t}\n-\n \t/* We don't display the help button on mobile devices. */\n \t#help-button {\n \t\tdisplay: none;"}, {"sha": "db311bccd6dc4a6997d9c40fe53c58392339af90", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -169,10 +169,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent #314559 transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #314559;\n-}\n-\n #titles > button.selected {\n \tbackground-color: #141920 !important;\n \tborder-bottom: 1px solid #ffb44c !important;"}, {"sha": "b2f2c77f5475ae66f74321bfbf0cd6803f6c6ba1", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -92,10 +92,6 @@ details.rustdoc-toggle > summary::before {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #111;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #252525;\n \tborder-top-color: #252525;"}, {"sha": "e81327956888b142befd662515dabab42c3c6ff0", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -84,10 +84,6 @@ body.source .example-wrap pre.rust a {\n \tborder-color: transparent black transparent transparent;\n }\n \n-.notable-traits-tooltiptext {\n-\tbackground-color: #eee;\n-}\n-\n #titles > button:not(.selected) {\n \tbackground-color: #e6e6e6;\n \tborder-top-color: #e6e6e6;"}, {"sha": "0538762e44d031368f822c72857baae46b1bf0ce", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 51, "deletions": 9, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -850,18 +850,33 @@ function loadCss(cssUrl) {\n         }\n         hideNotable();\n         const ty = e.getAttribute(\"data-ty\");\n-        const tooltip = e.getElementsByClassName(\"notable-traits-tooltip\")[0];\n         const wrapper = document.createElement(\"div\");\n         wrapper.innerHTML = \"<div class=\\\"docblock\\\">\" + window.NOTABLE_TRAITS[ty] + \"</div>\";\n-        wrapper.className = \"notable-traits-tooltiptext\";\n-        tooltip.appendChild(wrapper);\n-        const pos = wrapper.getBoundingClientRect();\n-        tooltip.removeChild(wrapper);\n-        wrapper.style.top = (pos.top + window.scrollY) + \"px\";\n-        wrapper.style.left = (pos.left + window.scrollX) + \"px\";\n-        wrapper.style.width = pos.width + \"px\";\n+        wrapper.className = \"notable popover\";\n+        const focusCatcher = document.createElement(\"div\");\n+        focusCatcher.setAttribute(\"tabindex\", \"0\");\n+        focusCatcher.onfocus = hideNotable;\n+        wrapper.appendChild(focusCatcher);\n+        const pos = e.getBoundingClientRect();\n+        // 5px overlap so that the mouse can easily travel from place to place\n+        wrapper.style.top = (pos.top + window.scrollY + pos.height) + \"px\";\n+        wrapper.style.left = 0;\n+        wrapper.style.right = \"auto\";\n+        wrapper.style.visibility = \"hidden\";\n         const body = document.getElementsByTagName(\"body\")[0];\n         body.appendChild(wrapper);\n+        const wrapperPos = wrapper.getBoundingClientRect();\n+        // offset so that the arrow points at the center of the \"(i)\"\n+        const finalPos = pos.left + window.scrollX - wrapperPos.width + 24;\n+        if (finalPos > 0) {\n+            wrapper.style.left = finalPos + \"px\";\n+        } else {\n+            wrapper.style.setProperty(\n+                \"--popover-arrow-offset\",\n+                (wrapperPos.right - pos.right + 4) + \"px\"\n+            );\n+        }\n+        wrapper.style.visibility = \"\";\n         window.CURRENT_NOTABLE_ELEMENT = wrapper;\n         window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE = e;\n         wrapper.onpointerleave = function(ev) {\n@@ -875,9 +890,31 @@ function loadCss(cssUrl) {\n         };\n     }\n \n+    function notableBlurHandler(event) {\n+        if (window.CURRENT_NOTABLE_ELEMENT &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT) &&\n+            !elemIsInParent(document.activeElement, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE) &&\n+            !elemIsInParent(event.relatedTarget, window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE)\n+        ) {\n+            // Work around a difference in the focus behaviour between Firefox, Chrome, and Safari.\n+            // When I click the button on an already-opened notable trait popover, Safari\n+            // hides the popover and then immediately shows it again, while everyone else hides it\n+            // and it stays hidden.\n+            //\n+            // To work around this, make sure the click finishes being dispatched before\n+            // hiding the popover. Since `hideNotable()` is idempotent, this makes Safari behave\n+            // consistently with the other two.\n+            setTimeout(hideNotable, 0);\n+        }\n+    }\n+\n     function hideNotable() {\n         if (window.CURRENT_NOTABLE_ELEMENT) {\n-            window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            if (window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE) {\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.NOTABLE_BASE.NOTABLE_FORCE_VISIBLE = false;\n+            }\n             const body = document.getElementsByTagName(\"body\")[0];\n             body.removeChild(window.CURRENT_NOTABLE_ELEMENT);\n             window.CURRENT_NOTABLE_ELEMENT = null;\n@@ -891,7 +928,11 @@ function loadCss(cssUrl) {\n                 hideNotable();\n             } else {\n                 showNotable(this);\n+                window.CURRENT_NOTABLE_ELEMENT.setAttribute(\"tabindex\", \"0\");\n+                window.CURRENT_NOTABLE_ELEMENT.focus();\n+                window.CURRENT_NOTABLE_ELEMENT.onblur = notableBlurHandler;\n             }\n+            return false;\n         };\n         e.onpointerenter = function(ev) {\n             // If this is a synthetic touch event, ignore it. A click event will be along shortly.\n@@ -1018,6 +1059,7 @@ function loadCss(cssUrl) {\n         onEachLazy(document.querySelectorAll(\".search-form .popover\"), elem => {\n             elem.style.display = \"none\";\n         });\n+        hideNotable();\n     };\n \n     /**"}, {"sha": "4c3943d8858307c729e5493042344d87c6be68f2", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 53, "deletions": 44, "changes": 97, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -22,31 +22,26 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 951},\n+    {\"x\": 955},\n )\n-// The tooltip should be beside the `i`\n+// The tooltip should be below the `i`\n // Also, clicking the tooltip should bring its text into the DOM\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n+assert-count: (\"//*[@class='notable popover']\", 1)\n compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n-)\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Now only the `i` should be on the next line.\n size: (1055, 600)\n@@ -77,7 +72,7 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 519},\n+    {\"x\": 523},\n )\n \n // Checking on mobile now.\n@@ -101,42 +96,28 @@ assert-position: (\n )\n assert-position: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    {\"x\": 289},\n+    {\"x\": 293},\n )\n-// The tooltip should be below `i`\n+// The tooltip should STILL be below `i`\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 1)\n-compare-elements-position-near-false: (\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+compare-elements-position-near: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"y\": 2}\n+    \"//*[@class='notable popover']\",\n+    {\"y\": 30}\n )\n compare-elements-position-false: (\n     \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n+    \"//*[@class='notable popover']\",\n     (\"x\")\n )\n-compare-elements-position-near: (\n-    \"//*[@id='method.create_an_iterator_from_read']\",\n-    \"//*[@class='notable-traits-tooltiptext']\",\n-    {\"x\": 10}\n-)\n-// The docblock should be flush with the border.\n-assert-css: (\n-    \"//*[@class='notable-traits-tooltiptext']/*[@class='docblock']\",\n-    {\"margin-left\": \"0px\"}\n+assert-position: (\n+    \"//*[@class='notable popover']\",\n+    {\"x\": 0}\n )\n click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n move-cursor-to: \"//h1\"\n-assert-count: (\"//*[@class='notable-traits-tooltiptext']\", 0)\n-\n-// Checking on very small mobile. The `i` should be on its own line.\n-size: (365, 600)\n-compare-elements-position-false: (\n-    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n-    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n-    (\"y\", \"x\"),\n-)\n+assert-count: (\"//*[@class='notable popover']\", 0)\n \n // Now check the colors.\n define-function: (\n@@ -153,25 +134,25 @@ define-function: (\n         (\"reload\"),\n \n         (\"move-cursor-to\", \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"),\n-        (\"assert-count\", (\".notable-traits-tooltiptext\", 1)),\n+        (\"assert-count\", (\".notable.popover\", 1)),\n \n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext h3.notable\",\n+             \".notable.popover h3\",\n              {\"color\": |header_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content\",\n+             \".notable.popover pre\",\n              {\"color\": |content_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.struct\",\n+             \".notable.popover pre a.struct\",\n              {\"color\": |type_color|},\n              ALL,\n         )),\n         (\"assert-css\", (\n-             \".notable-traits-tooltiptext pre.content a.trait\",\n+             \".notable.popover pre a.trait\",\n              {\"color\": |trait_color|},\n              ALL,\n         )),\n@@ -210,3 +191,31 @@ call-function: (\n         \"trait_color\": \"rgb(110, 79, 201)\",\n     },\n )\n+\n+reload:\n+\n+// Check that pressing escape works\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+move-cursor-to: \"//*[@class='notable popover']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+press-key: \"Escape\"\n+assert-count: (\"//*[@class='notable popover']\", 0)\n+\n+// Check that clicking outside works.\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+click: \".search-input\"\n+assert-count: (\"//*[@class='notable popover']\", 0)\n+\n+// Check that pressing tab over and over works.\n+click: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+move-cursor-to: \"//*[@class='notable popover']\"\n+assert-count: (\"//*[@class='notable popover']\", 1)\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+press-key: \"Tab\"\n+assert-count: (\"//*[@class='notable popover']\", 0)"}, {"sha": "f2ec8320a05259464874f15483906d95c7581435", "filename": "src/test/rustdoc/doc-notable_trait-slice.bare_fn_matches.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait-slice.bare_fn_matches.html?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"&amp;'static [SomeStruct]\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait_slice::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"&amp;'static [SomeStruct]\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait_slice::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &amp;amp;[&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait_slice::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;]&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "b426a4d7a8b7ba660183a36e66f09a120dd763f9", "filename": "src/test/rustdoc/doc-notable_trait.bare-fn.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.bare-fn.html?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "279faf5540140ee760add8ca75f6c0a16b15ae21", "filename": "src/test/rustdoc/doc-notable_trait.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.rs?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -9,7 +9,7 @@ impl<T: SomeTrait> SomeTrait for Wrapper<T> {}\n #[doc(notable_trait)]\n pub trait SomeTrait {\n     // @has doc_notable_trait/trait.SomeTrait.html\n-    // @has - '//span[@class=\"notable-traits\"]/@data-ty' 'Wrapper<Self>'\n+    // @has - '//a[@class=\"notable-traits\"]/@data-ty' 'Wrapper<Self>'\n     // @snapshot wrap-me - '//script[@id=\"notable-traits-data\"]'\n     fn wrap_me(self) -> Wrapper<Self> where Self: Sized {\n         Wrapper {\n@@ -23,15 +23,15 @@ impl SomeTrait for SomeStruct {}\n \n impl SomeStruct {\n     // @has doc_notable_trait/struct.SomeStruct.html\n-    // @has - '//span[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n+    // @has - '//a[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n     // @snapshot some-struct-new - '//script[@id=\"notable-traits-data\"]'\n     pub fn new() -> SomeStruct {\n         SomeStruct\n     }\n }\n \n // @has doc_notable_trait/fn.bare_fn.html\n-// @has - '//span[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n+// @has - '//a[@class=\"notable-traits\"]/@data-ty' 'SomeStruct'\n // @snapshot bare-fn - '//script[@id=\"notable-traits-data\"]'\n pub fn bare_fn() -> SomeStruct {\n     SomeStruct"}, {"sha": "4f8063807e67dc590cbadd4babd5fb0c2b271c68", "filename": "src/test/rustdoc/doc-notable_trait.some-struct-new.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.some-struct-new.html?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\",\"Wrapper&lt;Self&gt;\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"SomeStruct\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.SomeStruct.html\\\" title=\\\"struct doc_notable_trait::SomeStruct\\\"&gt;SomeStruct&lt;/a&gt;&lt;/span&gt;\",\"Wrapper&lt;Self&gt;\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "bed2a38b24a2bb1b3421c94d4abc3e05fa6a6a71", "filename": "src/test/rustdoc/doc-notable_trait.wrap-me.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdoc-notable_trait.wrap-me.html?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"Wrapper&lt;Self&gt;\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"Wrapper&lt;Self&gt;\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl&amp;lt;T:&amp;nbsp;&lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt;&amp;gt; &lt;a class=\\\"trait\\\" href=\\\"trait.SomeTrait.html\\\" title=\\\"trait doc_notable_trait::SomeTrait\\\"&gt;SomeTrait&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Wrapper.html\\\" title=\\\"struct doc_notable_trait::Wrapper\\\"&gt;Wrapper&lt;/a&gt;&amp;lt;T&amp;gt;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "1d02c13ebfb3c2b9b3ed8d1cf34d94fbb6a8f7eb", "filename": "src/test/rustdoc/spotlight-from-dependency.odd.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.odd.html?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -1 +1 @@\n-<script type=\"text/json\" id=\"notable-traits-data\">{\"Odd\":\"&lt;h3 class=\\\"notable\\\"&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html\\\" title=\\\"trait core::iter::traits::iterator::Iterator\\\"&gt;Iterator&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/span&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;    type &lt;a href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html#associatedtype.Item\\\" class=\\\"associatedtype\\\"&gt;Item&lt;/a&gt; = &lt;a class=\\\"primitive\\\" href=\\\"{{channel}}/std/primitive.usize.html\\\"&gt;usize&lt;/a&gt;;&lt;/span&gt;\"}</script>\n\\ No newline at end of file\n+<script type=\"text/json\" id=\"notable-traits-data\">{\"Odd\":\"&lt;h3&gt;Notable traits for &lt;code&gt;&lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/code&gt;&lt;/h3&gt;&lt;pre class=\\\"content\\\"&gt;&lt;code&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;impl &lt;a class=\\\"trait\\\" href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html\\\" title=\\\"trait core::iter::traits::iterator::Iterator\\\"&gt;Iterator&lt;/a&gt; for &lt;a class=\\\"struct\\\" href=\\\"struct.Odd.html\\\" title=\\\"struct foo::Odd\\\"&gt;Odd&lt;/a&gt;&lt;/span&gt;&lt;span class=\\\"where fmt-newline\\\"&gt;    type &lt;a href=\\\"{{channel}}/core/iter/traits/iterator/trait.Iterator.html#associatedtype.Item\\\" class=\\\"associatedtype\\\"&gt;Item&lt;/a&gt; = &lt;a class=\\\"primitive\\\" href=\\\"{{channel}}/std/primitive.usize.html\\\"&gt;usize&lt;/a&gt;;&lt;/span&gt;\"}</script>\n\\ No newline at end of file"}, {"sha": "090ad187d9cc0a103fe7d0349b8d20dba7c8cd53", "filename": "src/test/rustdoc/spotlight-from-dependency.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs", "raw_url": "https://github.com/rust-lang/rust/raw/528b4af7964e9632ef65f4543893bec846cf4403/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fspotlight-from-dependency.rs?ref=528b4af7964e9632ef65f4543893bec846cf4403", "patch": "@@ -3,7 +3,7 @@\n use std::iter::Iterator;\n \n // @has foo/struct.Odd.html\n-// @has - '//*[@id=\"method.new\"]//span[@class=\"notable-traits\"]/@data-ty' 'Odd'\n+// @has - '//*[@id=\"method.new\"]//a[@class=\"notable-traits\"]/@data-ty' 'Odd'\n // @snapshot odd - '//script[@id=\"notable-traits-data\"]'\n pub struct Odd {\n     current: usize,"}]}