{"sha": "048be5d9a31e2fb005e93c1a1f648d58167622e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0OGJlNWQ5YTMxZTJmYjAwNWU5M2MxYTFmNjQ4ZDU4MTY3NjIyZTg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-10-09T08:22:17Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-10-09T08:26:41Z"}, "message": "smal cleanup", "tree": {"sha": "aab9aac2ec58991221e975821482a5d946e0df28", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aab9aac2ec58991221e975821482a5d946e0df28"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/048be5d9a31e2fb005e93c1a1f648d58167622e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/048be5d9a31e2fb005e93c1a1f648d58167622e8", "html_url": "https://github.com/rust-lang/rust/commit/048be5d9a31e2fb005e93c1a1f648d58167622e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/048be5d9a31e2fb005e93c1a1f648d58167622e8/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d5a6cac3357f22dea2e630e17d0f091988cdd558", "url": "https://api.github.com/repos/rust-lang/rust/commits/d5a6cac3357f22dea2e630e17d0f091988cdd558", "html_url": "https://github.com/rust-lang/rust/commit/d5a6cac3357f22dea2e630e17d0f091988cdd558"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "aa4890375f52b53022a9073efea366b49d9af19b", "filename": "crates/ra_ide_api/src/completion/presentation.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/048be5d9a31e2fb005e93c1a1f648d58167622e8/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fpresentation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/048be5d9a31e2fb005e93c1a1f648d58167622e8/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fpresentation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fcompletion%2Fpresentation.rs?ref=048be5d9a31e2fb005e93c1a1f648d58167622e8", "patch": "@@ -44,7 +44,10 @@ impl Completions {\n     ) {\n         use hir::ModuleDef::*;\n \n-        let mut completion_kind = CompletionKind::Reference;\n+        let completion_kind = match resolution {\n+            ScopeDef::ModuleDef(BuiltinType(..)) => CompletionKind::BuiltinType,\n+            _ => CompletionKind::Reference,\n+        };\n         let (kind, docs) = match resolution {\n             ScopeDef::ModuleDef(Module(it)) => (CompletionItemKind::Module, it.docs(ctx.db)),\n             ScopeDef::ModuleDef(Function(func)) => {\n@@ -60,10 +63,7 @@ impl Completions {\n             ScopeDef::ModuleDef(Static(it)) => (CompletionItemKind::Static, it.docs(ctx.db)),\n             ScopeDef::ModuleDef(Trait(it)) => (CompletionItemKind::Trait, it.docs(ctx.db)),\n             ScopeDef::ModuleDef(TypeAlias(it)) => (CompletionItemKind::TypeAlias, it.docs(ctx.db)),\n-            ScopeDef::ModuleDef(BuiltinType(..)) => {\n-                completion_kind = CompletionKind::BuiltinType;\n-                (CompletionItemKind::BuiltinType, None)\n-            }\n+            ScopeDef::ModuleDef(BuiltinType(..)) => (CompletionItemKind::BuiltinType, None),\n             ScopeDef::GenericParam(..) => (CompletionItemKind::TypeParam, None),\n             ScopeDef::LocalBinding(..) => (CompletionItemKind::Binding, None),\n             ScopeDef::AdtSelfType(..) | ScopeDef::ImplSelfType(..) => ("}]}