{"sha": "b30c4d1932f7c547a431d2a67f939a8305644fdc", "node_id": "C_kwDOAAsO6NoAKGIzMGM0ZDE5MzJmN2M1NDdhNDMxZDJhNjdmOTM5YTgzMDU2NDRmZGM", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-04T19:34:24Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-11-04T19:40:50Z"}, "message": "rustdoc: simplify search results CSS and DOM\n\nThere is a layout change caused by this commit, but it's subtle. You won't\nnotice it unless you're looking for it.", "tree": {"sha": "3ebe11ff360cfdb044d63c7860b98922df52182c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ebe11ff360cfdb044d63c7860b98922df52182c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b30c4d1932f7c547a431d2a67f939a8305644fdc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b30c4d1932f7c547a431d2a67f939a8305644fdc", "html_url": "https://github.com/rust-lang/rust/commit/b30c4d1932f7c547a431d2a67f939a8305644fdc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b30c4d1932f7c547a431d2a67f939a8305644fdc/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6330c27ae24ec1556cf2b97eeac333dc23391686", "url": "https://api.github.com/repos/rust-lang/rust/commits/6330c27ae24ec1556cf2b97eeac333dc23391686", "html_url": "https://github.com/rust-lang/rust/commit/6330c27ae24ec1556cf2b97eeac333dc23391686"}], "stats": {"total": 28, "additions": 9, "deletions": 19}, "files": [{"sha": "227d9ac464bad3aaf8b0332581700908f2924a34", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 6, "deletions": 14, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=b30c4d1932f7c547a431d2a67f939a8305644fdc", "patch": "@@ -889,23 +889,17 @@ so that we can apply CSS-filters to change the arrow color in themes */\n }\n \n .search-results > a {\n-\tdisplay: block;\n+\tdisplay: flex;\n \t/* A little margin ensures the browser's outlining of focused links has room to display. */\n \tmargin-left: 2px;\n \tmargin-right: 2px;\n \tborder-bottom: 1px solid var(--border-color);\n+\tgap: 1em;\n }\n \n .search-results > a > div {\n-\tdisplay: flex;\n-\tflex-flow: row wrap;\n-}\n-\n-.search-results .result-name, .search-results div.desc {\n-\twidth: 50%;\n-}\n-.search-results .result-name {\n-\tpadding-right: 1em;\n+\tflex: 1;\n+\toverflow: hidden;\n }\n \n .search-results a:hover,\n@@ -1867,17 +1861,15 @@ in storage.js\n \t}\n \n \t/* Display an alternating layout on tablets and phones */\n-\t.item-table, .item-row, .item-left, .item-right {\n+\t.item-table, .item-row, .item-left, .item-right,\n+\t.search-results > a, .search-results > a > div {\n \t\tdisplay: block;\n \t}\n \n \t/* Display an alternating layout on tablets and phones */\n \t.search-results > a {\n \t\tpadding: 5px 0px;\n \t}\n-\t.search-results .result-name, .search-results div.desc {\n-\t\twidth: 100%;\n-\t}\n \t.search-results div.desc, .item-right {\n \t\tpadding-left: 2em;\n \t}"}, {"sha": "ef3c74f5faa60505f7a94497d0a446abb49e3eb9", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=b30c4d1932f7c547a431d2a67f939a8305644fdc", "patch": "@@ -1593,7 +1593,6 @@ function initSearch(rawSearchIndex) {\n                 link.className = \"result-\" + type;\n                 link.href = item.href;\n \n-                const wrapper = document.createElement(\"div\");\n                 const resultName = document.createElement(\"div\");\n                 resultName.className = \"result-name\";\n \n@@ -1614,16 +1613,15 @@ function initSearch(rawSearchIndex) {\n                 resultName.insertAdjacentHTML(\n                     \"beforeend\",\n                     item.displayPath + \"<span class=\\\"\" + type + \"\\\">\" + name + extra + \"</span>\");\n-                wrapper.appendChild(resultName);\n+                link.appendChild(resultName);\n \n                 const description = document.createElement(\"div\");\n                 description.className = \"desc\";\n                 const spanDesc = document.createElement(\"span\");\n                 spanDesc.insertAdjacentHTML(\"beforeend\", item.desc);\n \n                 description.appendChild(spanDesc);\n-                wrapper.appendChild(description);\n-                link.appendChild(wrapper);\n+                link.appendChild(description);\n                 output.appendChild(link);\n             });\n         } else if (query.error === null) {"}, {"sha": "b8abd9f906242864018b5bc6216272276b77c9a6", "filename": "src/test/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/b30c4d1932f7c547a431d2a67f939a8305644fdc/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml?ref=b30c4d1932f7c547a431d2a67f939a8305644fdc", "patch": "@@ -7,7 +7,7 @@ press-key: 'Enter'\n wait-for: \"#crate-search\"\n // The width is returned by \"getComputedStyle\" which returns the exact number instead of the\n // CSS rule which is \"50%\"...\n-assert-css: (\".search-results div.desc\", {\"width\": \"318px\"})\n+assert-css: (\".search-results div.desc\", {\"width\": \"310px\"})\n size: (600, 100)\n // As counter-intuitive as it may seem, in this width, the width is \"100%\", which is why\n // when computed it's larger."}]}