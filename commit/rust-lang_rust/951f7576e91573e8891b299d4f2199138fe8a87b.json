{"sha": "951f7576e91573e8891b299d4f2199138fe8a87b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk1MWY3NTc2ZTkxNTczZTg4OTFiMjk5ZDRmMjE5OTEzOGZlOGE4N2I=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-08-25T15:19:41Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-08-25T15:19:41Z"}, "message": "ci: bump prebuilt LLVM on macOS and Windows to 10.0.0", "tree": {"sha": "8efaa98f96ebc9701698171d863189c074613864", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8efaa98f96ebc9701698171d863189c074613864"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/951f7576e91573e8891b299d4f2199138fe8a87b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl9FLBsACgkQPgar6Auq\n8Zyfww/+L+3U/pERyGTcUwHMFogri+T4nfaOmnmKzM+du27KrUqYo/UhKq91zpsn\nqSm2THM43/A/r8rukjX4QGQshkfqHx2NA8DesuuO54HAitBL8JqYEApQASd1EkMb\nvClXKtQ/WnN4CjZKy0AHCm+677aF64oSl7Co9kOfHDW6bqkNiWjwSZtPP3Jjy19b\n5ttP6pMF1jG4snV5kRyPaznyKF/DxhdygEaLFOIFRm9ke3d++UPnk4bzeVi7uASH\n7tpYd+GGuuOpEDMHMIDHdr3MiSey3mp1QBfu/GaTimdmIPIE9/SbFpEEP0xq59j8\ns6WCSbixH9he+SsYGCROuULU/HD4YHttxAgZz0RASDK2AJW71CqUTz9cZdtz8mZp\ntaM4ZltZRZrf0uB4l/LeXlwIKOoWifIJ9ALSyz+olKBMjphemqKIly1QeZDt4Qkz\n9ZFbyeH8DVDG04jAyDFU1IrTG1+wWYbZ2pDDrfoh+inEfJImglPq8PYMbhToFr/s\n/fU2GTHDo1G1W8QEj/dSuR61y7Lj8yMc9qIf49F6cOfTERiqQJHDzrz9I3G+SOdi\n2iYajRcHEH1OTei2PB8ESYZc0XoRctFRq9TRPE+A0QI7EPZ6VQNvFOaLdi1QCcSw\nKUifGleHjzTfmWcZ7kQ0zlJRcx/LBhbKXs2ZZU9/pScBCK475m0=\n=l2t6\n-----END PGP SIGNATURE-----", "payload": "tree 8efaa98f96ebc9701698171d863189c074613864\nparent aa7010df9027c5c346ab32b3a7fefca06365856f\nauthor Pietro Albini <pietro@pietroalbini.org> 1598368781 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1598368781 +0200\n\nci: bump prebuilt LLVM on macOS and Windows to 10.0.0\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/951f7576e91573e8891b299d4f2199138fe8a87b", "html_url": "https://github.com/rust-lang/rust/commit/951f7576e91573e8891b299d4f2199138fe8a87b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/951f7576e91573e8891b299d4f2199138fe8a87b/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa7010df9027c5c346ab32b3a7fefca06365856f", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa7010df9027c5c346ab32b3a7fefca06365856f", "html_url": "https://github.com/rust-lang/rust/commit/aa7010df9027c5c346ab32b3a7fefca06365856f"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "751d58b953a2c658e296c9d3130b12f210fc9532", "filename": "src/ci/scripts/install-clang.sh", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/951f7576e91573e8891b299d4f2199138fe8a87b/src%2Fci%2Fscripts%2Finstall-clang.sh", "raw_url": "https://github.com/rust-lang/rust/raw/951f7576e91573e8891b299d4f2199138fe8a87b/src%2Fci%2Fscripts%2Finstall-clang.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-clang.sh?ref=951f7576e91573e8891b299d4f2199138fe8a87b", "patch": "@@ -8,11 +8,14 @@ IFS=$'\\n\\t'\n \n source \"$(cd \"$(dirname \"$0\")\" && pwd)/../shared.sh\"\n \n+# Update both macOS's and Windows's tarballs when bumping the version here.\n+LLVM_VERSION=\"10.0.0\"\n+\n if isMacOS; then\n-    curl -f \"${MIRRORS_BASE}/clang%2Bllvm-9.0.0-x86_64-darwin-apple.tar.xz\" | tar xJf -\n+    curl -f \"${MIRRORS_BASE}/clang%2Bllvm-${LLVM_VERSION}-x86_64-darwin-apple.tar.xz\" | tar xJf -\n \n-    ciCommandSetEnv CC \"$(pwd)/clang+llvm-9.0.0-x86_64-darwin-apple/bin/clang\"\n-    ciCommandSetEnv CXX \"$(pwd)/clang+llvm-9.0.0-x86_64-darwin-apple/bin/clang++\"\n+    ciCommandSetEnv CC \"$(pwd)/clang+llvm-${LLVM_VERSION}-x86_64-darwin-apple/bin/clang\"\n+    ciCommandSetEnv CXX \"$(pwd)/clang+llvm-${LLVM_VERSION}-x86_64-darwin-apple/bin/clang++\"\n \n     # macOS 10.15 onwards doesn't have libraries in /usr/include anymore: those\n     # are now located deep into the filesystem, under Xcode's own files. The\n@@ -33,8 +36,10 @@ elif isWindows && [[ ${CUSTOM_MINGW-0} -ne 1 ]]; then\n     #\n     # Note that the LLVM installer is an NSIS installer\n     #\n-    # Original downloaded here came from\n-    # http://releases.llvm.org/9.0.0/LLVM-9.0.0-win64.exe\n+    # Original downloaded here came from:\n+    #\n+    #   https://github.com/llvm/llvm-project/releases/download/llvmorg-10.0.0/LLVM-10.0.0-win64.exe\n+    #\n     # That installer was run through `wine ./installer.exe /S /NCRC` on Linux\n     # and then the resulting installation directory (found in\n     # `$HOME/.wine/drive_c/Program Files/LLVM`) was packaged up into a tarball.\n@@ -45,7 +50,7 @@ elif isWindows && [[ ${CUSTOM_MINGW-0} -ne 1 ]]; then\n \n     mkdir -p citools\n     cd citools\n-    curl -f \"${MIRRORS_BASE}/LLVM-9.0.0-win64.tar.gz\" | tar xzf -\n+    curl -f \"${MIRRORS_BASE}/LLVM-${LLVM_VERSION}-win64.tar.gz\" | tar xzf -\n     ciCommandSetEnv RUST_CONFIGURE_ARGS \\\n         \"${RUST_CONFIGURE_ARGS} --set llvm.clang-cl=$(pwd)/clang-rust/bin/clang-cl.exe\"\n fi"}]}