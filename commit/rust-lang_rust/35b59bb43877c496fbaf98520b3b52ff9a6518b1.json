{"sha": "35b59bb43877c496fbaf98520b3b52ff9a6518b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1YjU5YmI0Mzg3N2M0OTZmYmFmOTg1MjBiM2I1MmZmOWE2NTE4YjE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-11T05:56:13Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-11T05:56:13Z"}, "message": "simplify", "tree": {"sha": "9d8a1d0ad251101c9107968bfb0ea17f34ef869c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9d8a1d0ad251101c9107968bfb0ea17f34ef869c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/35b59bb43877c496fbaf98520b3b52ff9a6518b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/35b59bb43877c496fbaf98520b3b52ff9a6518b1", "html_url": "https://github.com/rust-lang/rust/commit/35b59bb43877c496fbaf98520b3b52ff9a6518b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/35b59bb43877c496fbaf98520b3b52ff9a6518b1/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f99551f46b1583ed43751e4d26fe76a0b913eb5f", "url": "https://api.github.com/repos/rust-lang/rust/commits/f99551f46b1583ed43751e4d26fe76a0b913eb5f", "html_url": "https://github.com/rust-lang/rust/commit/f99551f46b1583ed43751e4d26fe76a0b913eb5f"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "863aeb99d08e87fbf9d6418f25b4110f17c1f55e", "filename": "crates/cli/src/main.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Fcli%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Fcli%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcli%2Fsrc%2Fmain.rs?ref=35b59bb43877c496fbaf98520b3b52ff9a6518b1", "patch": "@@ -10,7 +10,7 @@ use std::{\n };\n use clap::{App, Arg, SubCommand};\n use tools::collect_tests;\n-use libeditor::{ast, syntax_tree, symbols};\n+use libeditor::{File, syntax_tree, symbols};\n \n type Result<T> = ::std::result::Result<T, failure::Error>;\n \n@@ -68,9 +68,9 @@ fn main() -> Result<()> {\n     Ok(())\n }\n \n-fn file() -> Result<ast::File> {\n+fn file() -> Result<File> {\n     let text = read_stdin()?;\n-    Ok(ast::File::parse(&text))\n+    Ok(libeditor::parse(&text))\n }\n \n fn read_stdin() -> Result<String> {\n@@ -89,7 +89,7 @@ fn render_test(file: &Path, line: usize) -> Result<(String, String)> {\n         None => bail!(\"No test found at line {} at {}\", line, file.display()),\n         Some((_start_line, test)) => test,\n     };\n-    let file = ast::File::parse(&test.text);\n+    let file = libeditor::parse(&test.text);\n     let tree = syntax_tree(&file);\n     Ok((test.text, tree))\n }"}, {"sha": "c762a8b0bb843ead2fc787bce4f25cb99eb44633", "filename": "crates/libeditor/src/lib.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Flibeditor%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Flibeditor%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibeditor%2Fsrc%2Flib.rs?ref=35b59bb43877c496fbaf98520b3b52ff9a6518b1", "patch": "@@ -5,11 +5,12 @@ mod extend_selection;\n mod line_index;\n \n use libsyntax2::{\n+    ast,\n     SyntaxNodeRef, AstNode,\n     algo::walk,\n     SyntaxKind::*,\n };\n-pub use libsyntax2::{TextRange, TextUnit, ast};\n+pub use libsyntax2::{File, TextRange, TextUnit};\n pub use self::line_index::{LineIndex, LineCol};\n \n #[derive(Debug)]\n@@ -43,6 +44,10 @@ pub enum RunnableKind {\n     Bin,\n }\n \n+pub fn parse(text: &str) -> ast::File {\n+    ast::File::parse(text)\n+}\n+\n pub fn highlight(file: &ast::File) -> Vec<HighlightedRange> {\n     let syntax = file.syntax();\n     let mut res = Vec::new();"}, {"sha": "d617f4b99575345124aee0be6089f0a3bf86ab8d", "filename": "crates/libeditor/tests/test.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Flibeditor%2Ftests%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35b59bb43877c496fbaf98520b3b52ff9a6518b1/crates%2Flibeditor%2Ftests%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibeditor%2Ftests%2Ftest.rs?ref=35b59bb43877c496fbaf98520b3b52ff9a6518b1", "patch": "@@ -3,7 +3,7 @@ extern crate itertools;\n \n use std::fmt;\n use itertools::Itertools;\n-use libeditor::{ast, highlight, runnables, extend_selection, TextRange};\n+use libeditor::{File, highlight, runnables, extend_selection, TextRange};\n \n #[test]\n fn test_extend_selection() {\n@@ -58,8 +58,8 @@ fn test_foo() {}\n     )\n }\n \n-fn file(text: &str) -> ast::File {\n-    ast::File::parse(text)\n+fn file(text: &str) -> File {\n+    File::parse(text)\n }\n \n fn dbg_eq(actual: &impl fmt::Debug, expected: &str) {"}]}