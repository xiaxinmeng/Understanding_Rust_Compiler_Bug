{"sha": "cf72565a12c982f577ca4394c3b80edb89f6c6d3", "node_id": "C_kwDOAAsO6NoAKGNmNzI1NjVhMTJjOTgyZjU3N2NhNDM5NGMzYjgwZWRiODlmNmM2ZDM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-10T12:29:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-10-10T12:29:15Z"}, "message": "Auto merge of #9610 - Jarcho:fix-9608, r=Alexendoo\n\nDon't suggest moving tuple structs with a significant drop to late evaluation\n\nfixes #9608\n\nchangelog: Don't suggest moving tuple structs with a significant drop to late evaluation", "tree": {"sha": "cef7d8e4cfe94942ac48d50e68df597eb2c35374", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cef7d8e4cfe94942ac48d50e68df597eb2c35374"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cf72565a12c982f577ca4394c3b80edb89f6c6d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cf72565a12c982f577ca4394c3b80edb89f6c6d3", "html_url": "https://github.com/rust-lang/rust/commit/cf72565a12c982f577ca4394c3b80edb89f6c6d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cf72565a12c982f577ca4394c3b80edb89f6c6d3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "272bbfb857650e0d3d05dd83a5ce1a522c94b4bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/272bbfb857650e0d3d05dd83a5ce1a522c94b4bd", "html_url": "https://github.com/rust-lang/rust/commit/272bbfb857650e0d3d05dd83a5ce1a522c94b4bd"}, {"sha": "39a7d000b640523772ea709bc85d2c9460cf07bf", "url": "https://api.github.com/repos/rust-lang/rust/commits/39a7d000b640523772ea709bc85d2c9460cf07bf", "html_url": "https://github.com/rust-lang/rust/commit/39a7d000b640523772ea709bc85d2c9460cf07bf"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "95b3e651e2b539db6d3ba8f27426df10ae759636", "filename": "clippy_utils/src/eager_or_lazy.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cf72565a12c982f577ca4394c3b80edb89f6c6d3/clippy_utils%2Fsrc%2Feager_or_lazy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf72565a12c982f577ca4394c3b80edb89f6c6d3/clippy_utils%2Fsrc%2Feager_or_lazy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Feager_or_lazy.rs?ref=cf72565a12c982f577ca4394c3b80edb89f6c6d3", "patch": "@@ -120,7 +120,7 @@ fn expr_eagerness<'tcx>(cx: &LateContext<'tcx>, e: &'tcx Expr<'_>) -> EagernessS\n                             .expr_ty(e)\n                             .has_significant_drop(self.cx.tcx, self.cx.param_env)\n                         {\n-                            self.eagerness = Lazy;\n+                            self.eagerness = ForceNoChange;\n                             return;\n                         }\n                     },"}, {"sha": "23b1aa8bebd53749cf05d23ce27ff7a4195b42d1", "filename": "tests/ui/or_fun_call.fixed", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/cf72565a12c982f577ca4394c3b80edb89f6c6d3/tests%2Fui%2For_fun_call.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/cf72565a12c982f577ca4394c3b80edb89f6c6d3/tests%2Fui%2For_fun_call.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2For_fun_call.fixed?ref=cf72565a12c982f577ca4394c3b80edb89f6c6d3", "patch": "@@ -225,4 +225,15 @@ mod issue8239 {\n     }\n }\n \n+mod issue9608 {\n+    fn sig_drop() {\n+        enum X {\n+            X(std::fs::File),\n+            Y(u32),\n+        }\n+\n+        let _ = None.unwrap_or(X::Y(0));\n+    }\n+}\n+\n fn main() {}"}, {"sha": "039998f22dd7147b9caf5134f1fcb5e139b11d1d", "filename": "tests/ui/or_fun_call.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/cf72565a12c982f577ca4394c3b80edb89f6c6d3/tests%2Fui%2For_fun_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cf72565a12c982f577ca4394c3b80edb89f6c6d3/tests%2Fui%2For_fun_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2For_fun_call.rs?ref=cf72565a12c982f577ca4394c3b80edb89f6c6d3", "patch": "@@ -225,4 +225,15 @@ mod issue8239 {\n     }\n }\n \n+mod issue9608 {\n+    fn sig_drop() {\n+        enum X {\n+            X(std::fs::File),\n+            Y(u32),\n+        }\n+\n+        let _ = None.unwrap_or(X::Y(0));\n+    }\n+}\n+\n fn main() {}"}]}