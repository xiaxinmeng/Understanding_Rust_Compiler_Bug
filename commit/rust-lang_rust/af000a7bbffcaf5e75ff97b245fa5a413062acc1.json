{"sha": "af000a7bbffcaf5e75ff97b245fa5a413062acc1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmMDAwYTdiYmZmY2FmNWU3NWZmOTdiMjQ1ZmE1YTQxMzA2MmFjYzE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-04-22T18:58:53Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-04-22T18:58:53Z"}, "message": "Auto merge of #31169 - gmbonnet:disable-option-checking, r=brson\n\nconfigure: Support --disable-option-checking\n\nI'm trying to package Rust for Fedora (this is nothing official (yet)).\n\nThe standard RPM packaging process involves running `./configure` with a whole lot of options that are commonly recognized by autotools configure scripts, but not by Rust's one. Since it does not make much sense to support all of this options, I think it would be great to support at least `--disable-option-checking`, so Rust's configure script would not fail.\n\n[The old attempt](https://github.com/fabiand/rust-spec/blob/master/rustc.spec) to package Rust used a sed script (at line 72), but this is not the recommended way to do that.", "tree": {"sha": "3164855985849a295dad235a6ae8bdfe81e09b1d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3164855985849a295dad235a6ae8bdfe81e09b1d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af000a7bbffcaf5e75ff97b245fa5a413062acc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af000a7bbffcaf5e75ff97b245fa5a413062acc1", "html_url": "https://github.com/rust-lang/rust/commit/af000a7bbffcaf5e75ff97b245fa5a413062acc1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af000a7bbffcaf5e75ff97b245fa5a413062acc1/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a264f5b7e8df34c4bf7f10d0c6c7f9ab805ee672", "url": "https://api.github.com/repos/rust-lang/rust/commits/a264f5b7e8df34c4bf7f10d0c6c7f9ab805ee672", "html_url": "https://github.com/rust-lang/rust/commit/a264f5b7e8df34c4bf7f10d0c6c7f9ab805ee672"}, {"sha": "46b75eb54bf19aa0eeb9d362b5387892fd2c2dfd", "url": "https://api.github.com/repos/rust-lang/rust/commits/46b75eb54bf19aa0eeb9d362b5387892fd2c2dfd", "html_url": "https://github.com/rust-lang/rust/commit/46b75eb54bf19aa0eeb9d362b5387892fd2c2dfd"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "db3ca2eecbb1233603f0dd31cc2ed8857353d1b1", "filename": "configure", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/af000a7bbffcaf5e75ff97b245fa5a413062acc1/configure", "raw_url": "https://github.com/rust-lang/rust/raw/af000a7bbffcaf5e75ff97b245fa5a413062acc1/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=af000a7bbffcaf5e75ff97b245fa5a413062acc1", "patch": "@@ -609,6 +609,7 @@ opt llvm-version-check 1 \"check if the LLVM version is supported, build anyway\"\n opt rustbuild 0 \"use the rust and cargo based build system\"\n opt orbit 0 \"get MIR where it belongs - everywhere; most importantly, in orbit\"\n opt codegen-tests 1 \"run the src/test/codegen tests\"\n+opt option-checking 1 \"complain about unrecognized options in this configure script\"\n \n # Optimization and debugging options. These may be overridden by the release channel, etc.\n opt_nosave optimize 1 \"build optimized rust code\"\n@@ -674,8 +675,11 @@ then\n fi\n \n # Validate Options\n-step_msg \"validating $CFG_SELF args\"\n-validate_opt\n+if [ -z \"$CFG_DISABLE_OPTION_CHECKING\" ]\n+then\n+    step_msg \"validating $CFG_SELF args\"\n+    validate_opt\n+fi\n \n # Validate the release channel, and configure options\n case \"$CFG_RELEASE_CHANNEL\" in"}]}