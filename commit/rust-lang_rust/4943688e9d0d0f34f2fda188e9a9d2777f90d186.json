{"sha": "4943688e9d0d0f34f2fda188e9a9d2777f90d186", "node_id": "C_kwDOAAsO6NoAKDQ5NDM2ODhlOWQwZDBmMzRmMmZkYTE4OGU5YTlkMjc3N2Y5MGQxODY", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2022-03-24T02:47:45Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2022-03-27T20:54:34Z"}, "message": "Fix from rebase\n\nI changed the test functions to be `pub` rather than called from a\n`main` function too, for easier future modification of tests.", "tree": {"sha": "a7313add5d3d8bc590453d7180347562324b8b39", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a7313add5d3d8bc590453d7180347562324b8b39"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4943688e9d0d0f34f2fda188e9a9d2777f90d186", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4943688e9d0d0f34f2fda188e9a9d2777f90d186", "html_url": "https://github.com/rust-lang/rust/commit/4943688e9d0d0f34f2fda188e9a9d2777f90d186", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4943688e9d0d0f34f2fda188e9a9d2777f90d186/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86220d6e517225d13c145fd12acfc96f78358170", "url": "https://api.github.com/repos/rust-lang/rust/commits/86220d6e517225d13c145fd12acfc96f78358170", "html_url": "https://github.com/rust-lang/rust/commit/86220d6e517225d13c145fd12acfc96f78358170"}], "stats": {"total": 56, "additions": 32, "deletions": 24}, "files": [{"sha": "9bf672312781ed2068195352466f6f8278aec02c", "filename": "compiler/rustc_parse/src/parser/diagnostics.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -17,7 +17,7 @@ use rustc_ast::{\n };\n use rustc_ast_pretty::pprust;\n use rustc_data_structures::fx::FxHashSet;\n-use rustc_errors::{pluralize, struct_span_err, Diagnostic, ErrorGuaranteed};\n+use rustc_errors::{pluralize, struct_span_err, Diagnostic, EmissionGuarantee, ErrorGuaranteed};\n use rustc_errors::{Applicability, DiagnosticBuilder, Handler, PResult};\n use rustc_span::source_map::Spanned;\n use rustc_span::symbol::{kw, Ident};\n@@ -225,13 +225,13 @@ struct MultiSugg {\n }\n \n impl MultiSugg {\n-    fn emit(self, err: &mut DiagnosticBuilder<'_>) {\n+    fn emit<G: EmissionGuarantee>(self, err: &mut DiagnosticBuilder<'_, G>) {\n         err.multipart_suggestion(&self.msg, self.patches, self.applicability);\n     }\n \n     /// Overrides individual messages and applicabilities.\n-    fn emit_many(\n-        err: &mut DiagnosticBuilder<'_>,\n+    fn emit_many<G: EmissionGuarantee>(\n+        err: &mut DiagnosticBuilder<'_, G>,\n         msg: &str,\n         applicability: Applicability,\n         suggestions: impl Iterator<Item = Self>,\n@@ -1289,7 +1289,7 @@ impl<'a> Parser<'a> {\n         );\n         err.span_label(op_span, &format!(\"not a valid {} operator\", kind.fixity));\n \n-        let help_base_case = |mut err: DiagnosticBuilder<'_>, base| {\n+        let help_base_case = |mut err: DiagnosticBuilder<'_, _>, base| {\n             err.help(&format!(\"use `{}= 1` instead\", kind.op.chr()));\n             err.emit();\n             Ok(base)"}, {"sha": "7a426badfc2d3b5571a541e03e8410b8e1ebc701", "filename": "src/test/ui/parser/increment-autofix.fixed", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.fixed?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -1,26 +1,26 @@\n // run-rustfix\n \n-fn pre_regular() {\n+pub fn pre_regular() {\n     let mut i = 0;\n     i += 1; //~ ERROR Rust has no prefix increment operator\n     println!(\"{}\", i);\n }\n \n-fn pre_while() {\n+pub fn pre_while() {\n     let mut i = 0;\n     while { i += 1; i } < 5 {\n         //~^ ERROR Rust has no prefix increment operator\n         println!(\"{}\", i);\n     }\n }\n \n-fn pre_regular_tmp() {\n+pub fn pre_regular_tmp() {\n     let mut tmp = 0;\n     tmp += 1; //~ ERROR Rust has no prefix increment operator\n     println!(\"{}\", tmp);\n }\n \n-fn pre_while_tmp() {\n+pub fn pre_while_tmp() {\n     let mut tmp = 0;\n     while { tmp += 1; tmp } < 5 {\n         //~^ ERROR Rust has no prefix increment operator"}, {"sha": "d38603697a7a6c019236ab0fbc83081292fb9c96", "filename": "src/test/ui/parser/increment-autofix.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.rs?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -1,26 +1,26 @@\n // run-rustfix\n \n-fn pre_regular() {\n+pub fn pre_regular() {\n     let mut i = 0;\n     ++i; //~ ERROR Rust has no prefix increment operator\n     println!(\"{}\", i);\n }\n \n-fn pre_while() {\n+pub fn pre_while() {\n     let mut i = 0;\n     while ++i < 5 {\n         //~^ ERROR Rust has no prefix increment operator\n         println!(\"{}\", i);\n     }\n }\n \n-fn pre_regular_tmp() {\n+pub fn pre_regular_tmp() {\n     let mut tmp = 0;\n     ++tmp; //~ ERROR Rust has no prefix increment operator\n     println!(\"{}\", tmp);\n }\n \n-fn pre_while_tmp() {\n+pub fn pre_while_tmp() {\n     let mut tmp = 0;\n     while ++tmp < 5 {\n         //~^ ERROR Rust has no prefix increment operator"}, {"sha": "593592ba4ab742f96f7ee3b205d0133c8e49934e", "filename": "src/test/ui/parser/increment-autofix.stderr", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fincrement-autofix.stderr?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -14,7 +14,9 @@ error: Rust has no prefix increment operator\n   --> $DIR/increment-autofix.rs:11:11\n    |\n LL |     while ++i < 5 {\n-   |           ^^ not a valid prefix operator\n+   |     ----- ^^ not a valid prefix operator\n+   |     |\n+   |     while parsing the condition of this `while` expression\n    |\n help: use `+= 1` instead\n    |\n@@ -37,7 +39,9 @@ error: Rust has no prefix increment operator\n   --> $DIR/increment-autofix.rs:25:11\n    |\n LL |     while ++tmp < 5 {\n-   |           ^^ not a valid prefix operator\n+   |     ----- ^^ not a valid prefix operator\n+   |     |\n+   |     while parsing the condition of this `while` expression\n    |\n help: use `+= 1` instead\n    |"}, {"sha": "15f159e53d2942e8b74096da51deda980e2f5623", "filename": "src/test/ui/parser/increment-notfixed.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.rs?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -6,42 +6,42 @@ struct Bar {\n     qux: i32,\n }\n \n-fn post_regular() {\n+pub fn post_regular() {\n     let mut i = 0;\n     i++; //~ ERROR Rust has no postfix increment operator\n     println!(\"{}\", i);\n }\n \n-fn post_while() {\n+pub fn post_while() {\n     let mut i = 0;\n     while i++ < 5 {\n         //~^ ERROR Rust has no postfix increment operator\n         println!(\"{}\", i);\n     }\n }\n \n-fn post_regular_tmp() {\n+pub fn post_regular_tmp() {\n     let mut tmp = 0;\n     tmp++; //~ ERROR Rust has no postfix increment operator\n     println!(\"{}\", tmp);\n }\n \n-fn post_while_tmp() {\n+pub fn post_while_tmp() {\n     let mut tmp = 0;\n     while tmp++ < 5 {\n         //~^ ERROR Rust has no postfix increment operator\n         println!(\"{}\", tmp);\n     }\n }\n \n-fn post_field() {\n+pub fn post_field() {\n     let foo = Foo { bar: Bar { qux: 0 } };\n     foo.bar.qux++;\n     //~^ ERROR Rust has no postfix increment operator\n     println!(\"{}\", foo.bar.qux);\n }\n \n-fn post_field_tmp() {\n+pub fn post_field_tmp() {\n     struct S {\n         tmp: i32\n     }\n@@ -51,7 +51,7 @@ fn post_field_tmp() {\n     println!(\"{}\", s.tmp);\n }\n \n-fn pre_field() {\n+pub fn pre_field() {\n     let foo = Foo { bar: Bar { qux: 0 } };\n     ++foo.bar.qux;\n     //~^ ERROR Rust has no prefix increment operator"}, {"sha": "f23595da32ac8b37acd256f7e9c1887f7161598f", "filename": "src/test/ui/parser/increment-notfixed.stderr", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4943688e9d0d0f34f2fda188e9a9d2777f90d186/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fincrement-notfixed.stderr?ref=4943688e9d0d0f34f2fda188e9a9d2777f90d186", "patch": "@@ -16,7 +16,9 @@ error: Rust has no postfix increment operator\n   --> $DIR/increment-notfixed.rs:17:12\n    |\n LL |     while i++ < 5 {\n-   |            ^^ not a valid postfix operator\n+   |     -----  ^^ not a valid postfix operator\n+   |     |\n+   |     while parsing the condition of this `while` expression\n    |\n help: use `+= 1` instead\n    |\n@@ -44,7 +46,9 @@ error: Rust has no postfix increment operator\n   --> $DIR/increment-notfixed.rs:31:14\n    |\n LL |     while tmp++ < 5 {\n-   |              ^^ not a valid postfix operator\n+   |     -----    ^^ not a valid postfix operator\n+   |     |\n+   |     while parsing the condition of this `while` expression\n    |\n help: use `+= 1` instead\n    |"}]}