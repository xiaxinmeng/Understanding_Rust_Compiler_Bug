{"sha": "646f97385709fab31db2f10661125c0bbbda6b7c", "node_id": "C_kwDOAAsO6NoAKDY0NmY5NzM4NTcwOWZhYjMxZGIyZjEwNjYxMTI1YzBiYmJkYTZiN2M", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-12T09:53:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-12T09:53:15Z"}, "message": "Auto merge of #14134 - lnicola:clippy-manual, r=Veykril\n\nfeat: Add clippy configuration section to the manual and update some old keys\n\nCloses #14132\n\nI don't think this is supposed to be under `Diagnostics`, but it does make sense in a way :shrug: (it's probably where someone might look).", "tree": {"sha": "56cadef961f16a94aeee7df07cfd482aa6b6667b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/56cadef961f16a94aeee7df07cfd482aa6b6667b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/646f97385709fab31db2f10661125c0bbbda6b7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/646f97385709fab31db2f10661125c0bbbda6b7c", "html_url": "https://github.com/rust-lang/rust/commit/646f97385709fab31db2f10661125c0bbbda6b7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/646f97385709fab31db2f10661125c0bbbda6b7c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a14a1520a3c1aba4d4b6139a7cac87f15ea84dd7", "url": "https://api.github.com/repos/rust-lang/rust/commits/a14a1520a3c1aba4d4b6139a7cac87f15ea84dd7", "html_url": "https://github.com/rust-lang/rust/commit/a14a1520a3c1aba4d4b6139a7cac87f15ea84dd7"}, {"sha": "8f617b55cefb199f80b114a37215d51e380d6ebf", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f617b55cefb199f80b114a37215d51e380d6ebf", "html_url": "https://github.com/rust-lang/rust/commit/8f617b55cefb199f80b114a37215d51e380d6ebf"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "cb96feeb5e5b3cd78dd1cc2a53c4800fbd7a2d75", "filename": "docs/user/manual.adoc", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/646f97385709fab31db2f10661125c0bbbda6b7c/docs%2Fuser%2Fmanual.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/646f97385709fab31db2f10661125c0bbbda6b7c/docs%2Fuser%2Fmanual.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fmanual.adoc?ref=646f97385709fab31db2f10661125c0bbbda6b7c", "patch": "@@ -773,14 +773,18 @@ See https://github.com/rust-analyzer/rust-project.json-example for a small examp\n \n You can set the `RA_LOG` environment variable to `rust_analyzer=info` to inspect how rust-analyzer handles config and project loading.\n \n-Note that calls to `cargo check` are disabled when using `rust-project.json` by default, so compilation errors and warnings will no longer be sent to your LSP client. To enable these compilation errors you will need to specify explicitly what command rust-analyzer should run to perform the checks using the `checkOnSave.overrideCommand` configuration. As an example, the following configuration explicitly sets `cargo check` as the `checkOnSave` command.\n+Note that calls to `cargo check` are disabled when using `rust-project.json` by default, so compilation errors and warnings will no longer be sent to your LSP client.\n+To enable these compilation errors you will need to specify explicitly what command rust-analyzer should run to perform the checks using the `rust-analyzer.check.overrideCommand` configuration.\n+As an example, the following configuration explicitly sets `cargo check` as the `check` command.\n \n [source,json]\n ----\n-{ \"rust-analyzer.checkOnSave.overrideCommand\": [\"cargo\", \"check\", \"--message-format=json\"] }\n+{ \"rust-analyzer.check.overrideCommand\": [\"cargo\", \"check\", \"--message-format=json\"] }\n ----\n \n-The `checkOnSave.overrideCommand` requires the command specified to output json error messages for rust-analyzer to consume. The `--message-format=json` flag does this for `cargo check` so whichever command you use must also output errors in this format. See the <<Configuration>> section for more information.\n+`check.overrideCommand` requires the command specified to output json error messages for rust-analyzer to consume.\n+The `--message-format=json` flag does this for `cargo check` so whichever command you use must also output errors in this format.\n+See the <<Configuration>> section for more information.\n \n == Security\n \n@@ -821,6 +825,10 @@ include::./generated_assists.adoc[]\n While most errors and warnings provided by rust-analyzer come from the `cargo check` integration, there's a growing number of diagnostics implemented using rust-analyzer's own analysis.\n Some of these diagnostics don't respect `\\#[allow]` or `\\#[deny]` attributes yet, but can be turned off using the `rust-analyzer.diagnostics.enable`, `rust-analyzer.diagnostics.experimental.enable` or `rust-analyzer.diagnostics.disabled` settings.\n \n+=== Clippy\n+\n+To run `cargo clippy` instead of `cargo check`, you can set `\"rust-analyzer.check.command\": \"clippy\"`.\n+\n include::./generated_diagnostic.adoc[]\n \n == Editor Features\n@@ -953,7 +961,7 @@ Also note that a full runnable name is something like *run bin_or_example_name*,\n \n Instead of relying on the built-in `cargo check`, you can configure Code to run a command in the background and use the `$rustc-watch` problem matcher to generate inline error markers from its output.\n \n-To do this you need to create a new https://code.visualstudio.com/docs/editor/tasks[VS Code Task] and set `rust-analyzer.checkOnSave.enable: false` in preferences.\n+To do this you need to create a new https://code.visualstudio.com/docs/editor/tasks[VS Code Task] and set `\"rust-analyzer.checkOnSave\": false` in preferences.\n \n For example, if you want to run https://crates.io/crates/cargo-watch[`cargo watch`] instead, you might add the following to `.vscode/tasks.json`:\n "}]}