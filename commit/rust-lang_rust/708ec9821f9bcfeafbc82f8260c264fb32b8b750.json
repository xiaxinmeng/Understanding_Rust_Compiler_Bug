{"sha": "708ec9821f9bcfeafbc82f8260c264fb32b8b750", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwOGVjOTgyMWY5YmNmZWFmYmM4MmY4MjYwYzI2NGZiMzJiOGI3NTA=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-03-07T08:13:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-07T08:13:27Z"}, "message": "Merge #7895\n\n7895: :arrow_up: xflags r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "09fa1352707b189a9d31fb1c7914908301c35df5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/09fa1352707b189a9d31fb1c7914908301c35df5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/708ec9821f9bcfeafbc82f8260c264fb32b8b750", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgRIsnCRBK7hj4Ov3rIwAAdHIIAJuSLeFoCaUYRy3e6XeQ4DfJ\nWAYR0M3ynavglhYA6vgrf0a/e325IoNBqvCcKEevPlPP35FReBIkal0HGiJNTSK+\nG+HhIT0WppvFFqIIifDF0EFRXAOOOLvs0tNu4BXvJLZo+scqkBxG6VQZ6xdbmCgw\ntHTxadupDexlhrZEf31dpVVXXnHB+MLgOiS8I1rwAT7rHC8eB+uT5XwjMv3eUcco\nhI4olD8qLukLf7crKRT2kexbPcknnBaUiSqfiRt+f16twSzgd0Kr7bvRn7pJcNr2\nms2wbEYN8rOdayKDaRrbQtMKe2Az4tacnaptSBWsDpss0b0pZZyUd04rbFnOAhc=\n=keSt\n-----END PGP SIGNATURE-----\n", "payload": "tree 09fa1352707b189a9d31fb1c7914908301c35df5\nparent f0b7c02f16f717744e7edc79a405db14110393cf\nparent 0296cd590e4c0a21f75b7ec7b420d849c7e9588e\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1615104807 +0000\ncommitter GitHub <noreply@github.com> 1615104807 +0000\n\nMerge #7895\n\n7895: :arrow_up: xflags r=matklad a=matklad\n\nbors r+\n\ud83e\udd16\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/708ec9821f9bcfeafbc82f8260c264fb32b8b750", "html_url": "https://github.com/rust-lang/rust/commit/708ec9821f9bcfeafbc82f8260c264fb32b8b750", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/708ec9821f9bcfeafbc82f8260c264fb32b8b750/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0b7c02f16f717744e7edc79a405db14110393cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0b7c02f16f717744e7edc79a405db14110393cf", "html_url": "https://github.com/rust-lang/rust/commit/f0b7c02f16f717744e7edc79a405db14110393cf"}, {"sha": "0296cd590e4c0a21f75b7ec7b420d849c7e9588e", "url": "https://api.github.com/repos/rust-lang/rust/commits/0296cd590e4c0a21f75b7ec7b420d849c7e9588e", "html_url": "https://github.com/rust-lang/rust/commit/0296cd590e4c0a21f75b7ec7b420d849c7e9588e"}], "stats": {"total": 44, "additions": 23, "deletions": 21}, "files": [{"sha": "c392a89070442593609444e3f485bd0f4d5cdb06", "filename": "Cargo.lock", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/708ec9821f9bcfeafbc82f8260c264fb32b8b750/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/708ec9821f9bcfeafbc82f8260c264fb32b8b750/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=708ec9821f9bcfeafbc82f8260c264fb32b8b750", "patch": "@@ -1919,18 +1919,18 @@ checksum = \"06069a848f95fceae3e5e03c0ddc8cb78452b56654ee0c8e68f938cf790fb9e3\"\n \n [[package]]\n name = \"xflags\"\n-version = \"0.1.4\"\n+version = \"0.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"222e914b43cec5d7305ac5116d10a14b3a52c50e9062d642c92631f3beabc729\"\n+checksum = \"59ad6ce6a0b7224130015b4ebac796478ac04e0079f5d222a690efea06a9208a\"\n dependencies = [\n  \"xflags-macros\",\n ]\n \n [[package]]\n name = \"xflags-macros\"\n-version = \"0.1.4\"\n+version = \"0.2.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"52f18f5b4aa7f95e209d5b9274f6164c3938920b4d5c75f97f0dd16daee25ddd\"\n+checksum = \"c8037d3ca14996158b03c0fa905d0834906ef0fc7044df72c1f5ff690e5e62c9\"\n dependencies = [\n  \"proc-macro2\",\n ]"}, {"sha": "3130785ccc5acf7405cfa49142492e5bdf1134af", "filename": "crates/rust-analyzer/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/708ec9821f9bcfeafbc82f8260c264fb32b8b750/crates%2Frust-analyzer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/708ec9821f9bcfeafbc82f8260c264fb32b8b750/crates%2Frust-analyzer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2FCargo.toml?ref=708ec9821f9bcfeafbc82f8260c264fb32b8b750", "patch": "@@ -24,7 +24,7 @@ jod-thread = \"0.1.0\"\n log = \"0.4.8\"\n lsp-types = { version = \"0.88.0\", features = [\"proposed\"] }\n parking_lot = \"0.11.0\"\n-xflags = \"0.1.2\"\n+xflags = \"0.2.1\"\n oorandom = \"11.1.2\"\n rustc-hash = \"1.1.0\"\n serde = { version = \"1.0.106\", features = [\"derive\"] }"}, {"sha": "3a7caaf3fcb9c446b798a28e07c527983752c9dc", "filename": "crates/rust-analyzer/src/bin/flags.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/708ec9821f9bcfeafbc82f8260c264fb32b8b750/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/708ec9821f9bcfeafbc82f8260c264fb32b8b750/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fbin%2Fflags.rs?ref=708ec9821f9bcfeafbc82f8260c264fb32b8b750", "patch": "@@ -6,7 +6,9 @@ use ide_ssr::{SsrPattern, SsrRule};\n use rust_analyzer::cli::{BenchWhat, Position, Verbosity};\n use vfs::AbsPathBuf;\n \n-xflags::args_parser! {\n+xflags::xflags! {\n+    src \"./src/bin/flags.rs\"\n+\n     /// LSP server for the Rust programming language.\n     cmd rust-analyzer {\n         /// Verbosity level, can be repeated multiple times.\n@@ -120,7 +122,7 @@ xflags::args_parser! {\n \n // generated start\n // The following code is generated by `xflags` macro.\n-// Run `env XFLAGS_DUMP= cargo build` to regenerate.\n+// Run `env UPDATE_XFLAGS=1 cargo build` to regenerate.\n #[derive(Debug)]\n pub struct RustAnalyzer {\n     pub verbose: u32,\n@@ -158,7 +160,7 @@ pub struct Parse {\n }\n \n #[derive(Debug)]\n-pub struct Symbols {}\n+pub struct Symbols;\n \n #[derive(Debug)]\n pub struct Highlight {\n@@ -211,14 +213,13 @@ pub struct Search {\n }\n \n #[derive(Debug)]\n-pub struct ProcMacro {}\n+pub struct ProcMacro;\n \n impl RustAnalyzer {\n-    pub const HELP: &'static str = Self::_HELP;\n+    pub const HELP: &'static str = Self::HELP_;\n \n     pub fn from_env() -> xflags::Result<Self> {\n-        let mut p = xflags::rt::Parser::new_from_env();\n-        Self::_parse(&mut p)\n+        Self::from_env_()\n     }\n }\n // generated end"}, {"sha": "e084f0df65d047b4fe08e1d3f0c02a9b89029bf9", "filename": "xtask/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/708ec9821f9bcfeafbc82f8260c264fb32b8b750/xtask%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/708ec9821f9bcfeafbc82f8260c264fb32b8b750/xtask%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2FCargo.toml?ref=708ec9821f9bcfeafbc82f8260c264fb32b8b750", "patch": "@@ -15,5 +15,5 @@ ungrammar = \"=1.11\"\n walkdir = \"2.3.1\"\n write-json = \"0.1.0\"\n xshell = \"0.1\"\n-xflags = \"0.1.2\"\n+xflags = \"0.2.1\"\n # Avoid adding more dependencies to this crate"}, {"sha": "b39d937cac7dc3ad821e489d9e41a5fb269687b7", "filename": "xtask/src/flags.rs", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/708ec9821f9bcfeafbc82f8260c264fb32b8b750/xtask%2Fsrc%2Fflags.rs", "raw_url": "https://github.com/rust-lang/rust/raw/708ec9821f9bcfeafbc82f8260c264fb32b8b750/xtask%2Fsrc%2Fflags.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fflags.rs?ref=708ec9821f9bcfeafbc82f8260c264fb32b8b750", "patch": "@@ -2,7 +2,9 @@\n \n use crate::install::{ClientOpt, Malloc, ServerOpt};\n \n-xflags::args_parser! {\n+xflags::xflags! {\n+    src \"./src/flags.rs\"\n+\n     /// Run custom build command.\n     cmd xtask {\n         default cmd help {\n@@ -55,7 +57,7 @@ xflags::args_parser! {\n \n // generated start\n // The following code is generated by `xflags` macro.\n-// Run `env XFLAGS_DUMP= cargo build` to regenerate.\n+// Run `env UPDATE_XFLAGS=1 cargo build` to regenerate.\n #[derive(Debug)]\n pub struct Xtask {\n     pub subcommand: XtaskCmd,\n@@ -96,13 +98,13 @@ pub struct Codegen {\n }\n \n #[derive(Debug)]\n-pub struct Lint {}\n+pub struct Lint;\n \n #[derive(Debug)]\n-pub struct FuzzTests {}\n+pub struct FuzzTests;\n \n #[derive(Debug)]\n-pub struct PreCache {}\n+pub struct PreCache;\n \n #[derive(Debug)]\n pub struct Release {\n@@ -131,11 +133,10 @@ pub struct Bb {\n }\n \n impl Xtask {\n-    pub const HELP: &'static str = Self::_HELP;\n+    pub const HELP: &'static str = Self::HELP_;\n \n     pub fn from_env() -> xflags::Result<Self> {\n-        let mut p = xflags::rt::Parser::new_from_env();\n-        Self::_parse(&mut p)\n+        Self::from_env_()\n     }\n }\n // generated end"}]}