{"sha": "6509c42d165eab4a6a91fd94114e3df85532fd80", "node_id": "C_kwDOAAsO6NoAKDY1MDljNDJkMTY1ZWFiNGE2YTkxZmQ5NDExNGUzZGY4NTUzMmZkODA", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-10T22:49:05Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-10T22:49:05Z"}, "message": "Use proper impl self type for alias impl in rustdoc", "tree": {"sha": "bd4f6f6353d282309b91460d8089ae4589424d11", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bd4f6f6353d282309b91460d8089ae4589424d11"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6509c42d165eab4a6a91fd94114e3df85532fd80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6509c42d165eab4a6a91fd94114e3df85532fd80", "html_url": "https://github.com/rust-lang/rust/commit/6509c42d165eab4a6a91fd94114e3df85532fd80", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6509c42d165eab4a6a91fd94114e3df85532fd80/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cba14074bb4cc12bfe918eabd0d52a3999b2a461", "url": "https://api.github.com/repos/rust-lang/rust/commits/cba14074bb4cc12bfe918eabd0d52a3999b2a461", "html_url": "https://github.com/rust-lang/rust/commit/cba14074bb4cc12bfe918eabd0d52a3999b2a461"}], "stats": {"total": 26, "additions": 18, "deletions": 8}, "files": [{"sha": "59a3e63172406892bf116ff252e1268fae0a39cd", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/6509c42d165eab4a6a91fd94114e3df85532fd80/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6509c42d165eab4a6a91fd94114e3df85532fd80/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=6509c42d165eab4a6a91fd94114e3df85532fd80", "patch": "@@ -2414,14 +2414,15 @@ fn clean_impl<'tcx>(\n     }\n \n     let for_ = clean_ty(impl_.self_ty, cx);\n-    let type_alias = for_.def_id(&cx.cache).and_then(|did| match tcx.def_kind(did) {\n-        DefKind::TyAlias => Some(clean_middle_ty(\n-            ty::Binder::dummy(tcx.type_of(did).subst_identity()),\n-            cx,\n-            Some(did),\n-        )),\n-        _ => None,\n-    });\n+    let type_alias =\n+        for_.def_id(&cx.cache).and_then(|alias_def_id: DefId| match tcx.def_kind(alias_def_id) {\n+            DefKind::TyAlias => Some(clean_middle_ty(\n+                ty::Binder::dummy(tcx.type_of(def_id).subst_identity()),\n+                cx,\n+                Some(def_id.to_def_id()),\n+            )),\n+            _ => None,\n+        });\n     let mut make_item = |trait_: Option<Path>, for_: Type, items: Vec<Item>| {\n         let kind = ImplItem(Box::new(Impl {\n             unsafety: impl_.unsafety,"}, {"sha": "82dfffe5f1c223320d656de9bbfc9e2a8b899db1", "filename": "tests/rustdoc/impl-alias-substituted.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/6509c42d165eab4a6a91fd94114e3df85532fd80/tests%2Frustdoc%2Fimpl-alias-substituted.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6509c42d165eab4a6a91fd94114e3df85532fd80/tests%2Frustdoc%2Fimpl-alias-substituted.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fimpl-alias-substituted.rs?ref=6509c42d165eab4a6a91fd94114e3df85532fd80", "patch": "@@ -0,0 +1,9 @@\n+pub struct Matrix<T, const N: usize, const M: usize>([[T; N]; M]);\n+\n+pub type Vector<T, const N: usize> = Matrix<T, N, 1>;\n+\n+// @has \"impl_alias_substituted/struct.Matrix.html\" '//*[@class=\"impl\"]//h3[@class=\"code-header\"]' \\\n+//  \"impl<T: Copy> Matrix<T, 3, 1>\"\n+impl<T: Copy> Vector<T, 3> {\n+    pub fn test() {}\n+}"}]}