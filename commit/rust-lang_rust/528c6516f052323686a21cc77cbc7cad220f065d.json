{"sha": "528c6516f052323686a21cc77cbc7cad220f065d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyOGM2NTE2ZjA1MjMyMzY4NmEyMWNjNzdjYmM3Y2FkMjIwZjA2NWQ=", "commit": {"author": {"name": "Lindsey Kuper", "email": "lkuper@mozilla.com", "date": "2011-06-02T00:15:02Z"}, "committer": {"name": "Lindsey Kuper", "email": "lkuper@mozilla.com", "date": "2011-06-02T00:22:23Z"}, "message": "Use span_err instead of err.  Fixes issue #444.", "tree": {"sha": "ea09fc05870e392eacfe61c410dcf0476ad0415f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea09fc05870e392eacfe61c410dcf0476ad0415f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/528c6516f052323686a21cc77cbc7cad220f065d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/528c6516f052323686a21cc77cbc7cad220f065d", "html_url": "https://github.com/rust-lang/rust/commit/528c6516f052323686a21cc77cbc7cad220f065d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/528c6516f052323686a21cc77cbc7cad220f065d/comments", "author": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lkuper", "id": 535218, "node_id": "MDQ6VXNlcjUzNTIxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/535218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lkuper", "html_url": "https://github.com/lkuper", "followers_url": "https://api.github.com/users/lkuper/followers", "following_url": "https://api.github.com/users/lkuper/following{/other_user}", "gists_url": "https://api.github.com/users/lkuper/gists{/gist_id}", "starred_url": "https://api.github.com/users/lkuper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lkuper/subscriptions", "organizations_url": "https://api.github.com/users/lkuper/orgs", "repos_url": "https://api.github.com/users/lkuper/repos", "events_url": "https://api.github.com/users/lkuper/events{/privacy}", "received_events_url": "https://api.github.com/users/lkuper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d569a71b0b4bac30a4b15b10d95d839e915cd0b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/d569a71b0b4bac30a4b15b10d95d839e915cd0b3", "html_url": "https://github.com/rust-lang/rust/commit/d569a71b0b4bac30a4b15b10d95d839e915cd0b3"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "924be466fae410283410c2b560b6bfe096f2eaf7", "filename": "src/comp/middle/typeck.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/528c6516f052323686a21cc77cbc7cad220f065d/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/528c6516f052323686a21cc77cbc7cad220f065d/src%2Fcomp%2Fmiddle%2Ftypeck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftypeck.rs?ref=528c6516f052323686a21cc77cbc7cad220f065d", "patch": "@@ -2009,9 +2009,8 @@ fn check_expr(&@stmt_ctxt scx, &@ast::expr expr) {\n                 case (none) {\n                     auto nil = ty::mk_nil(scx.fcx.ccx.tcx);\n                     if (!are_compatible(scx, scx.fcx.ret_ty, nil)) {\n-                        // TODO: span_err\n-                        scx.fcx.ccx.tcx.sess.err(\"ret; in function \" +\n-                            \"returning non-nil\");\n+                        scx.fcx.ccx.tcx.sess.span_err(expr.span,\n+                          \"ret; in function returning non-nil\");\n                     }\n \n                     write::bot_ty(scx.fcx.ccx.tcx, a.id);"}, {"sha": "9d1435fb15b6f7b7a1a1e5d610a5ce3e6ed5e6d3", "filename": "src/test/compile-fail/ret-non-nil.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/528c6516f052323686a21cc77cbc7cad220f065d/src%2Ftest%2Fcompile-fail%2Fret-non-nil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/528c6516f052323686a21cc77cbc7cad220f065d/src%2Ftest%2Fcompile-fail%2Fret-non-nil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fret-non-nil.rs?ref=528c6516f052323686a21cc77cbc7cad220f065d", "patch": "@@ -0,0 +1,14 @@\n+// error-pattern: ret; in function returning non-nil\n+\n+fn f() {\n+    ret;\n+}\n+\n+fn g() -> int {\n+    ret;\n+}\n+\n+fn main() {\n+    f();\n+    g();\n+}"}]}