{"sha": "6f1b06eb6546ab4808614dfe7807277419b485aa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmMWIwNmViNjU0NmFiNDgwODYxNGRmZTc4MDcyNzc0MTliNDg1YWE=", "commit": {"author": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2015-01-08T15:34:09Z"}, "committer": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2015-01-11T00:44:03Z"}, "message": "Pass small fixed-size arrays as immediates\n\nCurrently even small fixed-size arrays are passed as indirect\nparameters, which seems to be just an oversight. Let's handle them the\nsame as structs of the same size, passing them as immediate values.", "tree": {"sha": "2fe75eb78917d5fa2078cba0d6154a2b427d30c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2fe75eb78917d5fa2078cba0d6154a2b427d30c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f1b06eb6546ab4808614dfe7807277419b485aa", "comment_count": 17, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f1b06eb6546ab4808614dfe7807277419b485aa", "html_url": "https://github.com/rust-lang/rust/commit/6f1b06eb6546ab4808614dfe7807277419b485aa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f1b06eb6546ab4808614dfe7807277419b485aa/comments", "author": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6ef08406dccdeeb828a6cfc7658ac149900e73ad", "url": "https://api.github.com/repos/rust-lang/rust/commits/6ef08406dccdeeb828a6cfc7658ac149900e73ad", "html_url": "https://github.com/rust-lang/rust/commit/6ef08406dccdeeb828a6cfc7658ac149900e73ad"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "f59e70d099a638342005c300f5c02ed8e3574abe", "filename": "src/librustc_trans/trans/common.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f1b06eb6546ab4808614dfe7807277419b485aa/src%2Flibrustc_trans%2Ftrans%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f1b06eb6546ab4808614dfe7807277419b485aa/src%2Flibrustc_trans%2Ftrans%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fcommon.rs?ref=6f1b06eb6546ab4808614dfe7807277419b485aa", "patch": "@@ -244,7 +244,7 @@ pub fn type_is_immediate<'a, 'tcx>(ccx: &CrateContext<'a, 'tcx>, ty: Ty<'tcx>) -\n         return false;\n     }\n     match ty.sty {\n-        ty::ty_struct(..) | ty::ty_enum(..) | ty::ty_tup(..) |\n+        ty::ty_struct(..) | ty::ty_enum(..) | ty::ty_tup(..) | ty::ty_vec(_, Some(_)) |\n         ty::ty_unboxed_closure(..) => {\n             let llty = sizing_type_of(ccx, ty);\n             llsize_of_alloc(ccx, llty) <= llsize_of_alloc(ccx, ccx.int_type())"}]}