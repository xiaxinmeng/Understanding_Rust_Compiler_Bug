{"sha": "bdfd0b5ae081240697fb087f59c42ab9ba070bef", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkZmQwYjVhZTA4MTI0MDY5N2ZiMDg3ZjU5YzQyYWI5YmEwNzBiZWY=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-20T21:17:55Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-26T21:01:29Z"}, "message": "librustc: De-`@mut` `RegionVarBindings::bound_count`", "tree": {"sha": "3f34aa23c8bbd1138de8603afcb361339ee2f135", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f34aa23c8bbd1138de8603afcb361339ee2f135"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bdfd0b5ae081240697fb087f59c42ab9ba070bef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bdfd0b5ae081240697fb087f59c42ab9ba070bef", "html_url": "https://github.com/rust-lang/rust/commit/bdfd0b5ae081240697fb087f59c42ab9ba070bef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bdfd0b5ae081240697fb087f59c42ab9ba070bef/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "html_url": "https://github.com/rust-lang/rust/commit/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "140df98763e5714042abc5a6298801e6e6ebfa0f", "filename": "src/librustc/middle/typeck/infer/region_inference/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bdfd0b5ae081240697fb087f59c42ab9ba070bef/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bdfd0b5ae081240697fb087f59c42ab9ba070bef/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs?ref=bdfd0b5ae081240697fb087f59c42ab9ba070bef", "patch": "@@ -93,7 +93,7 @@ pub struct RegionVarBindings {\n     lubs: CombineMap,\n     glbs: CombineMap,\n     skolemization_count: Cell<uint>,\n-    bound_count: uint,\n+    bound_count: Cell<uint>,\n \n     // The undo log records actions that might later be undone.\n     //\n@@ -119,7 +119,7 @@ pub fn RegionVarBindings(tcx: ty::ctxt) -> RegionVarBindings {\n         lubs: HashMap::new(),\n         glbs: HashMap::new(),\n         skolemization_count: Cell::new(0),\n-        bound_count: 0,\n+        bound_count: Cell::new(0),\n         undo_log: ~[]\n     }\n }\n@@ -212,10 +212,10 @@ impl RegionVarBindings {\n         // changing the representation of bound regions in a fn\n         // declaration\n \n-        let sc = self.bound_count;\n-        self.bound_count += 1;\n+        let sc = self.bound_count.get();\n+        self.bound_count.set(sc + 1);\n \n-        if sc >= self.bound_count {\n+        if sc >= self.bound_count.get() {\n             self.tcx.sess.bug(\"Rollover in RegionInference new_bound()\");\n         }\n "}]}