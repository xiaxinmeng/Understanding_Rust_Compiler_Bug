{"sha": "ae75ba692a456216139abe42e88b4ca45b973127", "node_id": "C_kwDOAAsO6NoAKGFlNzViYTY5MmE0NTYyMTYxMzlhYmU0MmU4OGI0Y2E0NWI5NzMxMjc", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T02:39:38Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T03:04:30Z"}, "message": "Inline print into advance_left", "tree": {"sha": "614497748f263d287fbbb69f0763a5d70f84772c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/614497748f263d287fbbb69f0763a5d70f84772c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae75ba692a456216139abe42e88b4ca45b973127", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHo0T4ACgkQ+boUO5X/\nbYLT/hAAo60nV/proOC9ll4/kB/WGIikW/OHo46XM4ez84A9HrwKuj16sEGp7Bvn\nWjP5n26SmyxCKzZcWQXJh96IWX440soSNRmZ0N9+oPzXYwP4rSFuE06CD9w4l43v\nHUEfMT7dUl9KZJ7kINcJe4THIx1uFQ+q3L6VOFnypZ6YWyqNilAELCeGIK3m3Fd9\nEI9eF9cOm/rYvAat2bW5EXrz5DFuFyGowxkcR/KP8m/BuM0IScYrC7XlsQ+M0Piw\nfkAiOkdZuiLLOZi7gg3gX0iZyGIkBM96hMSFPRRODFf11J2OCfcpPIbkqXNSbzGg\n1JDps0Usp8TMbyPYt/52mSHGR7iMwSSeWxD4M4nunE9JOFibWe2r5lmwL7E4mKHx\nkXAPhuGXb3Pk3CUCMAaJWILE8QbnF6ptGKswLGJVxcF8QtsZvbBDNFFnyHFGUwQ0\nfMXiojV6RMyWRwZiVye3iImvji2U1HN6qsKbH8nMS6N8V4OtqfOiSbcnYaB3Hx+8\nI4JvuxD4Ki0dVs3xWNWpgDJ1RR0E1lLHmZkWy2ek1iIccDP3jp/cr83ssBYb8ydK\nqoVJICs20RUkVKZkUZmVh4M8Mqc4XVgEBuByRvYFPvzbZBqMBRyzDE2q22wBoxAu\nBGait2NVbvXNxcN8AlFC/t6jzv5CtcHv0cyakJ0PD6ZaD50PmBQ=\n=RPEm\n-----END PGP SIGNATURE-----", "payload": "tree 614497748f263d287fbbb69f0763a5d70f84772c\nparent d2eb46cfecf62210ee313da76acadedd7a2cbfcb\nauthor David Tolnay <dtolnay@gmail.com> 1642646378 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1642647870 -0800\n\nInline print into advance_left\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae75ba692a456216139abe42e88b4ca45b973127", "html_url": "https://github.com/rust-lang/rust/commit/ae75ba692a456216139abe42e88b4ca45b973127", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae75ba692a456216139abe42e88b4ca45b973127/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2eb46cfecf62210ee313da76acadedd7a2cbfcb", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2eb46cfecf62210ee313da76acadedd7a2cbfcb", "html_url": "https://github.com/rust-lang/rust/commit/d2eb46cfecf62210ee313da76acadedd7a2cbfcb"}], "stats": {"total": 19, "additions": 8, "deletions": 11}, "files": [{"sha": "1a6a7f2c52a715034f3b6e6f8cc0d6d0f8e816c8", "filename": "compiler/rustc_ast_pretty/src/pp.rs", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ae75ba692a456216139abe42e88b4ca45b973127/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae75ba692a456216139abe42e88b4ca45b973127/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs?ref=ae75ba692a456216139abe42e88b4ca45b973127", "patch": "@@ -325,7 +325,14 @@ impl Printer {\n                 _ => {}\n             }\n \n-            self.print(left.token, left.size);\n+            match &left.token {\n+                Token::Begin(b) => self.print_begin(*b, left.size),\n+                Token::End => self.print_end(),\n+                Token::Break(b) => self.print_break(*b, left.size),\n+                Token::String(s) => self.print_string(s),\n+            }\n+\n+            self.last_printed = Some(left.token);\n \n             if self.buf.is_empty() {\n                 break;\n@@ -432,16 +439,6 @@ impl Printer {\n         self.out.push_str(s);\n     }\n \n-    fn print(&mut self, token: Token, l: isize) {\n-        match &token {\n-            Token::Begin(b) => self.print_begin(*b, l),\n-            Token::End => self.print_end(),\n-            Token::Break(b) => self.print_break(*b, l),\n-            Token::String(s) => self.print_string(s),\n-        }\n-        self.last_printed = Some(token);\n-    }\n-\n     // Convenience functions to talk to the printer.\n \n     /// \"raw box\""}]}