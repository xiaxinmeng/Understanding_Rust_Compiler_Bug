{"sha": "1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiOWFiMDRkNGI0Njk0ZWIzMjQwMmRhZjgzZjhkZjVmMTNkZjIzZWM=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-28T21:56:17Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-28T21:56:17Z"}, "message": "vscode: migrate to more type-safe assert impl", "tree": {"sha": "90b35930cacf758ac4b6e513a1811a14a41c88ad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/90b35930cacf758ac4b6e513a1811a14a41c88ad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "html_url": "https://github.com/rust-lang/rust/commit/1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/comments", "author": null, "committer": null, "parents": [{"sha": "d2bf2adc272197eafa56f77363edaa6c410b39cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2bf2adc272197eafa56f77363edaa6c410b39cf", "html_url": "https://github.com/rust-lang/rust/commit/d2bf2adc272197eafa56f77363edaa6c410b39cf"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "ee8949d61c4052dad087d24fa51a7c6d321ea0e8", "filename": "editors/code/src/installation/download_file.ts", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_file.ts", "raw_url": "https://github.com/rust-lang/rust/raw/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_file.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_file.ts?ref=1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "patch": "@@ -2,8 +2,7 @@ import fetch from \"node-fetch\";\n import * as fs from \"fs\";\n import * as stream from \"stream\";\n import * as util from \"util\";\n-import { strict as assert } from \"assert\";\n-import { log } from \"../util\";\n+import { log, assert } from \"../util\";\n \n const pipeline = util.promisify(stream.pipeline);\n "}, {"sha": "6a6cf4f8c3ad97dc34168c3db16683a7a602e239", "filename": "editors/code/src/installation/server.ts", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Finstallation%2Fserver.ts", "raw_url": "https://github.com/rust-lang/rust/raw/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Finstallation%2Fserver.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finstallation%2Fserver.ts?ref=1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "patch": "@@ -1,13 +1,12 @@\n import * as vscode from \"vscode\";\n import * as path from \"path\";\n-import { strict as assert } from \"assert\";\n import { promises as dns } from \"dns\";\n import { spawnSync } from \"child_process\";\n \n import { BinarySource } from \"./interfaces\";\n import { fetchArtifactReleaseInfo } from \"./fetch_artifact_release_info\";\n import { downloadArtifact } from \"./download_artifact\";\n-import { log } from \"../util\";\n+import { log, assert } from \"../util\";\n \n export async function ensureServerBinary(source: null | BinarySource): Promise<null | string> {\n     if (!source) {"}, {"sha": "acf78898b05a6302d967490424cc230bafd70107", "filename": "editors/code/src/util.ts", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Futil.ts", "raw_url": "https://github.com/rust-lang/rust/raw/1b9ab04d4b4694eb32402daf83f8df5f13df23ec/editors%2Fcode%2Fsrc%2Futil.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futil.ts?ref=1b9ab04d4b4694eb32402daf83f8df5f13df23ec", "patch": "@@ -1,22 +1,26 @@\n import * as lc from \"vscode-languageclient\";\n import * as vscode from \"vscode\";\n+import { strict as nodeAssert } from \"assert\";\n \n-let enabled: boolean = false;\n+export function assert(condition: unknown, explanation: string): asserts condition {\n+    nodeAssert(condition, explanation);\n+}\n \n export const log = {\n+    enabled: true,\n     debug(message?: any, ...optionalParams: any[]): void {\n-        if (!enabled) return;\n+        if (!log.enabled) return;\n         // eslint-disable-next-line no-console\n         console.log(message, ...optionalParams);\n     },\n     error(message?: any, ...optionalParams: any[]): void {\n-        if (!enabled) return;\n+        if (!log.enabled) return;\n         debugger;\n         // eslint-disable-next-line no-console\n         console.error(message, ...optionalParams);\n     },\n     setEnabled(yes: boolean): void {\n-        enabled = yes;\n+        log.enabled = yes;\n     }\n };\n "}]}