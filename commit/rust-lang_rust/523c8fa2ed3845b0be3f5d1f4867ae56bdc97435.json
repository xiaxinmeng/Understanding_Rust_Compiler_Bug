{"sha": "523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "node_id": "C_kwDOAAsO6NoAKDUyM2M4ZmEyZWQzODQ1YjBiZTNmNWQxZjQ4NjdhZTU2YmRjOTc0MzU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-20T13:27:22Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-20T13:27:22Z"}, "message": "Auto merge of #10615 - c410-f3r:bbbbbbbbbbb, r=giraffate\n\n[arithmetic_side_effects] Fix #10590\n\nFix #10590\n\nchangelog: [`arithmetic_side_effects`]: Detect integer methods that can introduce side effects", "tree": {"sha": "e725bfe2a5365f51180b9bd573f197a8dcc71f36", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e725bfe2a5365f51180b9bd573f197a8dcc71f36"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "html_url": "https://github.com/rust-lang/rust/commit/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d35b5e27b8cb3b220b9d7ec352142508c7ea8a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d35b5e27b8cb3b220b9d7ec352142508c7ea8a2", "html_url": "https://github.com/rust-lang/rust/commit/4d35b5e27b8cb3b220b9d7ec352142508c7ea8a2"}, {"sha": "3db7352b8180bfd66bae2252139340e53f7d670b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3db7352b8180bfd66bae2252139340e53f7d670b", "html_url": "https://github.com/rust-lang/rust/commit/3db7352b8180bfd66bae2252139340e53f7d670b"}], "stats": {"total": 321, "additions": 211, "deletions": 110}, "files": [{"sha": "2e3925f53ddc64624adbbe878f4cbfddd223ef16", "filename": "clippy_lints/src/operators/arithmetic_side_effects.rs", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs?ref=523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "patch": "@@ -185,6 +185,34 @@ impl ArithmeticSideEffects {\n         }\n     }\n \n+    /// There are some integer methods like `wrapping_div` that will panic depending on the\n+    /// provided input.\n+    fn manage_method_call<'tcx>(\n+        &mut self,\n+        args: &[hir::Expr<'tcx>],\n+        cx: &LateContext<'tcx>,\n+        ps: &hir::PathSegment<'tcx>,\n+        receiver: &hir::Expr<'tcx>,\n+    ) {\n+        const METHODS: &[&str] = &[\"saturating_div\", \"wrapping_div\", \"wrapping_rem\", \"wrapping_rem_euclid\"];\n+        let Some(arg) = args.first() else { return; };\n+        if constant_simple(cx, cx.typeck_results(), receiver).is_some() {\n+            return;\n+        }\n+        let instance_ty = cx.typeck_results().expr_ty(receiver);\n+        if !Self::is_integral(instance_ty) {\n+            return;\n+        }\n+        if METHODS.iter().copied().all(|method| method != ps.ident.as_str()) {\n+            return;\n+        }\n+        let (actual_arg, _) = peel_hir_expr_refs(arg);\n+        match Self::literal_integer(cx, actual_arg) {\n+            None | Some(0) => self.issue_lint(cx, arg),\n+            Some(_) => {},\n+        }\n+    }\n+\n     fn manage_unary_ops<'tcx>(\n         &mut self,\n         cx: &LateContext<'tcx>,\n@@ -224,6 +252,9 @@ impl<'tcx> LateLintPass<'tcx> for ArithmeticSideEffects {\n             hir::ExprKind::AssignOp(op, lhs, rhs) | hir::ExprKind::Binary(op, lhs, rhs) => {\n                 self.manage_bin_ops(cx, expr, op, lhs, rhs);\n             },\n+            hir::ExprKind::MethodCall(ps, receiver, args, _) => {\n+                self.manage_method_call(args, cx, ps, receiver);\n+            },\n             hir::ExprKind::Unary(un_op, un_expr) => {\n                 self.manage_unary_ops(cx, expr, un_expr, *un_op);\n             },"}, {"sha": "840bf9892281be9eb9bf83551165bed1f421a635", "filename": "tests/ui/arithmetic_side_effects.rs", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/tests%2Fui%2Farithmetic_side_effects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/tests%2Fui%2Farithmetic_side_effects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic_side_effects.rs?ref=523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "patch": "@@ -276,6 +276,17 @@ pub fn non_overflowing_ops_or_ops_already_handled_by_the_compiler_should_not_tri\n     _n = &1 * _n;\n     _n = 23 + 85;\n \n+    // Method\n+    _n.saturating_div(1);\n+    _n.wrapping_div(1);\n+    _n.wrapping_rem(1);\n+    _n.wrapping_rem_euclid(1);\n+\n+    _n.saturating_div(1);\n+    _n.checked_div(1);\n+    _n.checked_rem(1);\n+    _n.checked_rem_euclid(1);\n+\n     // Unary\n     _n = -2147483647;\n     _n = -i32::MAX;\n@@ -383,6 +394,17 @@ pub fn unknown_ops_or_runtime_ops_that_can_overflow() {\n     _custom = Custom << _custom;\n     _custom = &Custom << _custom;\n \n+    // Method\n+    _n.saturating_div(0);\n+    _n.wrapping_div(0);\n+    _n.wrapping_rem(0);\n+    _n.wrapping_rem_euclid(0);\n+\n+    _n.saturating_div(_n);\n+    _n.wrapping_div(_n);\n+    _n.wrapping_rem(_n);\n+    _n.wrapping_rem_euclid(_n);\n+\n     // Unary\n     _n = -_n;\n     _n = -&_n;"}, {"sha": "e9a626643ff78b675fe03740d43f6ec61d19344f", "filename": "tests/ui/arithmetic_side_effects.stderr", "status": "modified", "additions": 158, "deletions": 110, "changes": 268, "blob_url": "https://github.com/rust-lang/rust/blob/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/tests%2Fui%2Farithmetic_side_effects.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/523c8fa2ed3845b0be3f5d1f4867ae56bdc97435/tests%2Fui%2Farithmetic_side_effects.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic_side_effects.stderr?ref=523c8fa2ed3845b0be3f5d1f4867ae56bdc97435", "patch": "@@ -1,658 +1,706 @@\n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:293:5\n+  --> $DIR/arithmetic_side_effects.rs:304:5\n    |\n LL |     _n += 1;\n    |     ^^^^^^^\n    |\n    = note: `-D clippy::arithmetic-side-effects` implied by `-D warnings`\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:294:5\n+  --> $DIR/arithmetic_side_effects.rs:305:5\n    |\n LL |     _n += &1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:295:5\n+  --> $DIR/arithmetic_side_effects.rs:306:5\n    |\n LL |     _n -= 1;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:296:5\n+  --> $DIR/arithmetic_side_effects.rs:307:5\n    |\n LL |     _n -= &1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:297:5\n+  --> $DIR/arithmetic_side_effects.rs:308:5\n    |\n LL |     _n /= 0;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:298:5\n+  --> $DIR/arithmetic_side_effects.rs:309:5\n    |\n LL |     _n /= &0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:299:5\n+  --> $DIR/arithmetic_side_effects.rs:310:5\n    |\n LL |     _n %= 0;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:300:5\n+  --> $DIR/arithmetic_side_effects.rs:311:5\n    |\n LL |     _n %= &0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:301:5\n+  --> $DIR/arithmetic_side_effects.rs:312:5\n    |\n LL |     _n *= 2;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:302:5\n+  --> $DIR/arithmetic_side_effects.rs:313:5\n    |\n LL |     _n *= &2;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:303:5\n+  --> $DIR/arithmetic_side_effects.rs:314:5\n    |\n LL |     _n += -1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:304:5\n+  --> $DIR/arithmetic_side_effects.rs:315:5\n    |\n LL |     _n += &-1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:305:5\n+  --> $DIR/arithmetic_side_effects.rs:316:5\n    |\n LL |     _n -= -1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:306:5\n+  --> $DIR/arithmetic_side_effects.rs:317:5\n    |\n LL |     _n -= &-1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:307:5\n+  --> $DIR/arithmetic_side_effects.rs:318:5\n    |\n LL |     _n /= -0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:308:5\n+  --> $DIR/arithmetic_side_effects.rs:319:5\n    |\n LL |     _n /= &-0;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:309:5\n+  --> $DIR/arithmetic_side_effects.rs:320:5\n    |\n LL |     _n %= -0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:310:5\n+  --> $DIR/arithmetic_side_effects.rs:321:5\n    |\n LL |     _n %= &-0;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:311:5\n+  --> $DIR/arithmetic_side_effects.rs:322:5\n    |\n LL |     _n *= -2;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:312:5\n+  --> $DIR/arithmetic_side_effects.rs:323:5\n    |\n LL |     _n *= &-2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:313:5\n+  --> $DIR/arithmetic_side_effects.rs:324:5\n    |\n LL |     _custom += Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:314:5\n+  --> $DIR/arithmetic_side_effects.rs:325:5\n    |\n LL |     _custom += &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:315:5\n+  --> $DIR/arithmetic_side_effects.rs:326:5\n    |\n LL |     _custom -= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:316:5\n+  --> $DIR/arithmetic_side_effects.rs:327:5\n    |\n LL |     _custom -= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:317:5\n+  --> $DIR/arithmetic_side_effects.rs:328:5\n    |\n LL |     _custom /= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:318:5\n+  --> $DIR/arithmetic_side_effects.rs:329:5\n    |\n LL |     _custom /= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:319:5\n+  --> $DIR/arithmetic_side_effects.rs:330:5\n    |\n LL |     _custom %= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:320:5\n+  --> $DIR/arithmetic_side_effects.rs:331:5\n    |\n LL |     _custom %= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:321:5\n+  --> $DIR/arithmetic_side_effects.rs:332:5\n    |\n LL |     _custom *= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:322:5\n+  --> $DIR/arithmetic_side_effects.rs:333:5\n    |\n LL |     _custom *= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:323:5\n+  --> $DIR/arithmetic_side_effects.rs:334:5\n    |\n LL |     _custom >>= Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:324:5\n+  --> $DIR/arithmetic_side_effects.rs:335:5\n    |\n LL |     _custom >>= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:325:5\n+  --> $DIR/arithmetic_side_effects.rs:336:5\n    |\n LL |     _custom <<= Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:326:5\n+  --> $DIR/arithmetic_side_effects.rs:337:5\n    |\n LL |     _custom <<= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:327:5\n+  --> $DIR/arithmetic_side_effects.rs:338:5\n    |\n LL |     _custom += -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:328:5\n+  --> $DIR/arithmetic_side_effects.rs:339:5\n    |\n LL |     _custom += &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:329:5\n+  --> $DIR/arithmetic_side_effects.rs:340:5\n    |\n LL |     _custom -= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:330:5\n+  --> $DIR/arithmetic_side_effects.rs:341:5\n    |\n LL |     _custom -= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:331:5\n+  --> $DIR/arithmetic_side_effects.rs:342:5\n    |\n LL |     _custom /= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:332:5\n+  --> $DIR/arithmetic_side_effects.rs:343:5\n    |\n LL |     _custom /= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:333:5\n+  --> $DIR/arithmetic_side_effects.rs:344:5\n    |\n LL |     _custom %= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:334:5\n+  --> $DIR/arithmetic_side_effects.rs:345:5\n    |\n LL |     _custom %= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:335:5\n+  --> $DIR/arithmetic_side_effects.rs:346:5\n    |\n LL |     _custom *= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:336:5\n+  --> $DIR/arithmetic_side_effects.rs:347:5\n    |\n LL |     _custom *= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:337:5\n+  --> $DIR/arithmetic_side_effects.rs:348:5\n    |\n LL |     _custom >>= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:338:5\n+  --> $DIR/arithmetic_side_effects.rs:349:5\n    |\n LL |     _custom >>= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:339:5\n+  --> $DIR/arithmetic_side_effects.rs:350:5\n    |\n LL |     _custom <<= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:340:5\n+  --> $DIR/arithmetic_side_effects.rs:351:5\n    |\n LL |     _custom <<= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:343:10\n+  --> $DIR/arithmetic_side_effects.rs:354:10\n    |\n LL |     _n = _n + 1;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:344:10\n+  --> $DIR/arithmetic_side_effects.rs:355:10\n    |\n LL |     _n = _n + &1;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:345:10\n+  --> $DIR/arithmetic_side_effects.rs:356:10\n    |\n LL |     _n = 1 + _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:346:10\n+  --> $DIR/arithmetic_side_effects.rs:357:10\n    |\n LL |     _n = &1 + _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:347:10\n+  --> $DIR/arithmetic_side_effects.rs:358:10\n    |\n LL |     _n = _n - 1;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:348:10\n+  --> $DIR/arithmetic_side_effects.rs:359:10\n    |\n LL |     _n = _n - &1;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:349:10\n+  --> $DIR/arithmetic_side_effects.rs:360:10\n    |\n LL |     _n = 1 - _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:350:10\n+  --> $DIR/arithmetic_side_effects.rs:361:10\n    |\n LL |     _n = &1 - _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:351:10\n+  --> $DIR/arithmetic_side_effects.rs:362:10\n    |\n LL |     _n = _n / 0;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:352:10\n+  --> $DIR/arithmetic_side_effects.rs:363:10\n    |\n LL |     _n = _n / &0;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:353:10\n+  --> $DIR/arithmetic_side_effects.rs:364:10\n    |\n LL |     _n = _n % 0;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:354:10\n+  --> $DIR/arithmetic_side_effects.rs:365:10\n    |\n LL |     _n = _n % &0;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:355:10\n+  --> $DIR/arithmetic_side_effects.rs:366:10\n    |\n LL |     _n = _n * 2;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:356:10\n+  --> $DIR/arithmetic_side_effects.rs:367:10\n    |\n LL |     _n = _n * &2;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:357:10\n+  --> $DIR/arithmetic_side_effects.rs:368:10\n    |\n LL |     _n = 2 * _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:358:10\n+  --> $DIR/arithmetic_side_effects.rs:369:10\n    |\n LL |     _n = &2 * _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:359:10\n+  --> $DIR/arithmetic_side_effects.rs:370:10\n    |\n LL |     _n = 23 + &85;\n    |          ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:360:10\n+  --> $DIR/arithmetic_side_effects.rs:371:10\n    |\n LL |     _n = &23 + 85;\n    |          ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:361:10\n+  --> $DIR/arithmetic_side_effects.rs:372:10\n    |\n LL |     _n = &23 + &85;\n    |          ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:362:15\n+  --> $DIR/arithmetic_side_effects.rs:373:15\n    |\n LL |     _custom = _custom + _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:363:15\n+  --> $DIR/arithmetic_side_effects.rs:374:15\n    |\n LL |     _custom = _custom + &_custom;\n    |               ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:364:15\n+  --> $DIR/arithmetic_side_effects.rs:375:15\n    |\n LL |     _custom = Custom + _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:365:15\n+  --> $DIR/arithmetic_side_effects.rs:376:15\n    |\n LL |     _custom = &Custom + _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:366:15\n+  --> $DIR/arithmetic_side_effects.rs:377:15\n    |\n LL |     _custom = _custom - Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:367:15\n+  --> $DIR/arithmetic_side_effects.rs:378:15\n    |\n LL |     _custom = _custom - &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:368:15\n+  --> $DIR/arithmetic_side_effects.rs:379:15\n    |\n LL |     _custom = Custom - _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:369:15\n+  --> $DIR/arithmetic_side_effects.rs:380:15\n    |\n LL |     _custom = &Custom - _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:370:15\n+  --> $DIR/arithmetic_side_effects.rs:381:15\n    |\n LL |     _custom = _custom / Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:371:15\n+  --> $DIR/arithmetic_side_effects.rs:382:15\n    |\n LL |     _custom = _custom / &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:372:15\n+  --> $DIR/arithmetic_side_effects.rs:383:15\n    |\n LL |     _custom = _custom % Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:373:15\n+  --> $DIR/arithmetic_side_effects.rs:384:15\n    |\n LL |     _custom = _custom % &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:374:15\n+  --> $DIR/arithmetic_side_effects.rs:385:15\n    |\n LL |     _custom = _custom * Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:375:15\n+  --> $DIR/arithmetic_side_effects.rs:386:15\n    |\n LL |     _custom = _custom * &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:376:15\n+  --> $DIR/arithmetic_side_effects.rs:387:15\n    |\n LL |     _custom = Custom * _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:377:15\n+  --> $DIR/arithmetic_side_effects.rs:388:15\n    |\n LL |     _custom = &Custom * _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:378:15\n+  --> $DIR/arithmetic_side_effects.rs:389:15\n    |\n LL |     _custom = Custom + &Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:379:15\n+  --> $DIR/arithmetic_side_effects.rs:390:15\n    |\n LL |     _custom = &Custom + Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:380:15\n+  --> $DIR/arithmetic_side_effects.rs:391:15\n    |\n LL |     _custom = &Custom + &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:381:15\n+  --> $DIR/arithmetic_side_effects.rs:392:15\n    |\n LL |     _custom = _custom >> _custom;\n    |               ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:382:15\n+  --> $DIR/arithmetic_side_effects.rs:393:15\n    |\n LL |     _custom = _custom >> &_custom;\n    |               ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:383:15\n+  --> $DIR/arithmetic_side_effects.rs:394:15\n    |\n LL |     _custom = Custom << _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:384:15\n+  --> $DIR/arithmetic_side_effects.rs:395:15\n    |\n LL |     _custom = &Custom << _custom;\n    |               ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:387:10\n+  --> $DIR/arithmetic_side_effects.rs:398:23\n+   |\n+LL |     _n.saturating_div(0);\n+   |                       ^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:399:21\n+   |\n+LL |     _n.wrapping_div(0);\n+   |                     ^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:400:21\n+   |\n+LL |     _n.wrapping_rem(0);\n+   |                     ^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:401:28\n+   |\n+LL |     _n.wrapping_rem_euclid(0);\n+   |                            ^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:403:23\n+   |\n+LL |     _n.saturating_div(_n);\n+   |                       ^^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:404:21\n+   |\n+LL |     _n.wrapping_div(_n);\n+   |                     ^^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:405:21\n+   |\n+LL |     _n.wrapping_rem(_n);\n+   |                     ^^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:406:28\n+   |\n+LL |     _n.wrapping_rem_euclid(_n);\n+   |                            ^^\n+\n+error: arithmetic operation that can potentially result in unexpected side-effects\n+  --> $DIR/arithmetic_side_effects.rs:409:10\n    |\n LL |     _n = -_n;\n    |          ^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:388:10\n+  --> $DIR/arithmetic_side_effects.rs:410:10\n    |\n LL |     _n = -&_n;\n    |          ^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:389:15\n+  --> $DIR/arithmetic_side_effects.rs:411:15\n    |\n LL |     _custom = -_custom;\n    |               ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:390:15\n+  --> $DIR/arithmetic_side_effects.rs:412:15\n    |\n LL |     _custom = -&_custom;\n    |               ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:399:5\n+  --> $DIR/arithmetic_side_effects.rs:421:5\n    |\n LL |     1 + i;\n    |     ^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:400:5\n+  --> $DIR/arithmetic_side_effects.rs:422:5\n    |\n LL |     i * 2;\n    |     ^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:401:5\n+  --> $DIR/arithmetic_side_effects.rs:423:5\n    |\n LL |     1 % i / 2;\n    |     ^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:402:5\n+  --> $DIR/arithmetic_side_effects.rs:424:5\n    |\n LL |     i - 2 + 2 - i;\n    |     ^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:403:5\n+  --> $DIR/arithmetic_side_effects.rs:425:5\n    |\n LL |     -i;\n    |     ^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:414:5\n+  --> $DIR/arithmetic_side_effects.rs:436:5\n    |\n LL |     i += 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:415:5\n+  --> $DIR/arithmetic_side_effects.rs:437:5\n    |\n LL |     i -= 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:416:5\n+  --> $DIR/arithmetic_side_effects.rs:438:5\n    |\n LL |     i *= 2;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:418:5\n+  --> $DIR/arithmetic_side_effects.rs:440:5\n    |\n LL |     i /= 0;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:420:5\n+  --> $DIR/arithmetic_side_effects.rs:442:5\n    |\n LL |     i /= var1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:421:5\n+  --> $DIR/arithmetic_side_effects.rs:443:5\n    |\n LL |     i /= var2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:423:5\n+  --> $DIR/arithmetic_side_effects.rs:445:5\n    |\n LL |     i %= 0;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:425:5\n+  --> $DIR/arithmetic_side_effects.rs:447:5\n    |\n LL |     i %= var1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:426:5\n+  --> $DIR/arithmetic_side_effects.rs:448:5\n    |\n LL |     i %= var2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:436:5\n+  --> $DIR/arithmetic_side_effects.rs:458:5\n    |\n LL |     10 / a\n    |     ^^^^^^\n \n-error: aborting due to 109 previous errors\n+error: aborting due to 117 previous errors\n "}]}