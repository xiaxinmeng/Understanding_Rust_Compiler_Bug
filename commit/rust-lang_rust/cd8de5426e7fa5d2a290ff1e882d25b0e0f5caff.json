{"sha": "cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNkOGRlNTQyNmU3ZmE1ZDJhMjkwZmYxZTg4MmQyNWIwZTBmNWNhZmY=", "commit": {"author": {"name": "vagrant", "email": "vagrant@rust-lang.dev", "date": "2016-01-09T23:30:33Z"}, "committer": {"name": "vagrant", "email": "vagrant@rust-lang.dev", "date": "2016-01-09T23:30:33Z"}, "message": "Show clearer error message when #![deny(warnings)] escalates a warning\n\nAddresses #30730", "tree": {"sha": "cbbcc57af38a0d70300207424526f4820d145468", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cbbcc57af38a0d70300207424526f4820d145468"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff", "html_url": "https://github.com/rust-lang/rust/commit/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff/comments", "author": null, "committer": null, "parents": [{"sha": "d70ab2bdf16c22b9f3ff0230089b44855e3f1593", "url": "https://api.github.com/repos/rust-lang/rust/commits/d70ab2bdf16c22b9f3ff0230089b44855e3f1593", "html_url": "https://github.com/rust-lang/rust/commit/d70ab2bdf16c22b9f3ff0230089b44855e3f1593"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "122b2ab73de9b739185783881fe8447721509f1d", "filename": "src/librustc/lint/context.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff/src%2Flibrustc%2Flint%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff/src%2Flibrustc%2Flint%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fcontext.rs?ref=cd8de5426e7fa5d2a290ff1e882d25b0e0f5caff", "patch": "@@ -451,9 +451,14 @@ pub trait LintContext: Sized {\n \n     fn level_src(&self, lint: &'static Lint) -> Option<LevelSource> {\n         self.lints().levels.get(&LintId::of(lint)).map(|ls| match ls {\n-            &(Warn, src) => {\n+            &(Warn, _) => {\n                 let lint_id = LintId::of(builtin::WARNINGS);\n-                (self.lints().get_level_source(lint_id).0, src)\n+                let warn_src = self.lints().get_level_source(lint_id);\n+                if warn_src.0 != Warn {\n+                    warn_src\n+                } else {\n+                    *ls\n+                }\n             }\n             _ => *ls\n         })"}]}