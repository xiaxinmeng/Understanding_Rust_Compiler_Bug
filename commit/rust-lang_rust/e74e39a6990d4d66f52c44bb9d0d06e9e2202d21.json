{"sha": "e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "node_id": "C_kwDOAAsO6NoAKGU3NGUzOWE2OTkwZDRkNjZmNTJjNDRiYjlkMGQwNmU5ZTIyMDJkMjE", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-11-13T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2021-11-29T08:12:01Z"}, "message": "Accumulate all values of `-C remark` option\n\nWhen `-C remark=...` option is specified multiple times,\naccumulate all values instead of using only the last one.", "tree": {"sha": "62f4fccb7f61e215b7b6cc690e60a82e543d0b6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62f4fccb7f61e215b7b6cc690e60a82e543d0b6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "html_url": "https://github.com/rust-lang/rust/commit/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9981e56d3b820f429fac62b4ff916f2a871340b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/9981e56d3b820f429fac62b4ff916f2a871340b4", "html_url": "https://github.com/rust-lang/rust/commit/9981e56d3b820f429fac62b4ff916f2a871340b4"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "16b68d95858b87b9c63ef82cc17def481aa69aed", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "patch": "@@ -833,6 +833,13 @@ impl Passes {\n             Passes::All => false,\n         }\n     }\n+\n+    pub fn extend(&mut self, passes: impl IntoIterator<Item = String>) {\n+        match *self {\n+            Passes::Some(ref mut v) => v.extend(passes),\n+            Passes::All => {}\n+        }\n+    }\n }\n \n pub const fn default_lib_output() -> CrateType {"}, {"sha": "779f29e3dfedf32824e7b9cb558bc58e01f3436b", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "patch": "@@ -567,7 +567,7 @@ mod parse {\n             v => {\n                 let mut passes = vec![];\n                 if parse_list(&mut passes, v) {\n-                    *slot = Passes::Some(passes);\n+                    slot.extend(passes);\n                     true\n                 } else {\n                     false"}, {"sha": "36549cbc554bfdd1a6b504989006afbb6c51750f", "filename": "src/test/ui/optimization-remark.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/src%2Ftest%2Fui%2Foptimization-remark.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e74e39a6990d4d66f52c44bb9d0d06e9e2202d21/src%2Ftest%2Fui%2Foptimization-remark.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Foptimization-remark.rs?ref=e74e39a6990d4d66f52c44bb9d0d06e9e2202d21", "patch": "@@ -1,10 +1,19 @@\n // build-pass\n // ignore-pass\n // no-system-llvm\n-// revisions: all inline\n-//          compile-flags: --crate-type=lib -Cdebuginfo=1 -Copt-level=2\n+// revisions: all inline merge1 merge2\n+// compile-flags: --crate-type=lib -Cdebuginfo=1 -Copt-level=2\n+//\n+// Check that remarks can be enabled individually or with \"all\":\n+//\n // [all]    compile-flags: -Cremark=all\n // [inline] compile-flags: -Cremark=inline\n+//\n+// Check that values of -Cremark flag are accumulated:\n+//\n+// [merge1] compile-flags: -Cremark=all    -Cremark=giraffe\n+// [merge2] compile-flags: -Cremark=inline -Cremark=giraffe\n+//\n // error-pattern: inline: f not inlined into g\n // dont-check-compiler-stderr\n "}]}