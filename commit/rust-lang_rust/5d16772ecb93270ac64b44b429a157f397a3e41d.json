{"sha": "5d16772ecb93270ac64b44b429a157f397a3e41d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkMTY3NzJlY2I5MzI3MGFjNjRiNDRiNDI5YTE1N2YzOTdhM2U0MWQ=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-05-12T02:15:02Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-05-12T02:15:02Z"}, "message": "Rebasing", "tree": {"sha": "f91d54a4f070f96daf6bf36ff76510c11e4ddabb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f91d54a4f070f96daf6bf36ff76510c11e4ddabb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d16772ecb93270ac64b44b429a157f397a3e41d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d16772ecb93270ac64b44b429a157f397a3e41d", "html_url": "https://github.com/rust-lang/rust/commit/5d16772ecb93270ac64b44b429a157f397a3e41d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d16772ecb93270ac64b44b429a157f397a3e41d/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0216fcc42d5f4961d07378a783c87814097015f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e0216fcc42d5f4961d07378a783c87814097015f", "html_url": "https://github.com/rust-lang/rust/commit/e0216fcc42d5f4961d07378a783c87814097015f"}], "stats": {"total": 34, "additions": 17, "deletions": 17}, "files": [{"sha": "0593de6db07a74545d3ac664cb7e3ba68b866323", "filename": "src/libsyntax/ext/deriving/bounds.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fbounds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fbounds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fbounds.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -45,5 +45,5 @@ pub fn expand_deriving_copy(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push);\n+    trait_def.expand(cx, mitem, &item, push);\n }"}, {"sha": "0d8fb471429377e3878a9fd52b038b0a5d9ae462", "filename": "src/libsyntax/ext/deriving/clone.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -47,7 +47,7 @@ pub fn expand_deriving_clone(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n fn cs_clone("}, {"sha": "bd7c7d85a375f41bf6cec262201bbab88ac874af", "filename": "src/libsyntax/ext/deriving/cmp/eq.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Feq.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -66,5 +66,5 @@ pub fn expand_deriving_eq(cx: &mut ExtCtxt,\n         ),\n         associated_types: Vec::new(),\n     };\n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }"}, {"sha": "b4caf0ec26e277de9a25ec9abc371167446422b5", "filename": "src/libsyntax/ext/deriving/cmp/ord.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Ford.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -48,7 +48,7 @@ pub fn expand_deriving_ord(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n "}, {"sha": "5d744334745d32e9c17bb6394a15df3d19b33623", "filename": "src/libsyntax/ext/deriving/cmp/partial_eq.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_eq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_eq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_eq.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -90,5 +90,5 @@ pub fn expand_deriving_partial_eq(cx: &mut ExtCtxt,\n         ),\n         associated_types: Vec::new(),\n     };\n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }"}, {"sha": "3ef73f6556e3015e767e331807708bd1e6180a5e", "filename": "src/libsyntax/ext/deriving/cmp/partial_ord.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_ord.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_ord.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fcmp%2Fpartial_ord.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -80,7 +80,7 @@ pub fn expand_deriving_partial_ord(cx: &mut ExtCtxt,\n         ],\n         associated_types: Vec::new(),\n     };\n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n #[derive(Copy, Clone)]"}, {"sha": "75c9bc42ea2bfc6e261af3c138620bb9af5a6c35", "filename": "src/libsyntax/ext/deriving/decodable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fdecodable.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -87,7 +87,7 @@ fn expand_deriving_decodable_imp(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n fn decodable_substructure(cx: &mut ExtCtxt, trait_span: Span,"}, {"sha": "e9984c84e322fad9b5587f576819428b7b7919a7", "filename": "src/libsyntax/ext/deriving/default.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fdefault.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -46,7 +46,7 @@ pub fn expand_deriving_default(cx: &mut ExtCtxt,\n         ),\n         associated_types: Vec::new(),\n     };\n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n fn default_substructure(cx: &mut ExtCtxt, trait_span: Span, substr: &Substructure) -> P<Expr> {"}, {"sha": "4430c58700af365be6da580d708e478814911f43", "filename": "src/libsyntax/ext/deriving/encodable.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fencodable.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -163,7 +163,7 @@ fn expand_deriving_encodable_imp(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n fn encodable_substructure(cx: &mut ExtCtxt, trait_span: Span,"}, {"sha": "b1ab0438a018b85ba481262af24daadb343a4655", "filename": "src/libsyntax/ext/deriving/generic/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fgeneric%2Fmod.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -380,22 +380,22 @@ impl<'a> TraitDef<'a> {\n     pub fn expand(&self,\n                   cx: &mut ExtCtxt,\n                   mitem: &ast::MetaItem,\n-                  item: Annotatable,\n+                  item: &'a Annotatable,\n                   push: &mut FnMut(Annotatable))\n     {\n-        match item {\n-            Annotatable::Item(item) => {\n+        match *item {\n+            Annotatable::Item(ref item) => {\n                 let newitem = match item.node {\n                     ast::ItemStruct(ref struct_def, ref generics) => {\n                         self.expand_struct_def(cx,\n-                                               &**struct_def,\n+                                               &struct_def,\n                                                item.ident,\n                                                generics)\n                     }\n                     ast::ItemEnum(ref enum_def, ref generics) => {\n                         self.expand_enum_def(cx,\n                                              enum_def,\n-                                             &item.attrs[..],\n+                                             &item.attrs,\n                                              item.ident,\n                                              generics)\n                     }"}, {"sha": "698e788d65f00d8827cea539f72d2cf453376877", "filename": "src/libsyntax/ext/deriving/hash.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fhash.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -52,7 +52,7 @@ pub fn expand_deriving_hash(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    hash_trait_def.expand(cx, mitem, item, push);\n+    hash_trait_def.expand(cx, mitem, &item, push);\n }\n \n fn hash_substructure(cx: &mut ExtCtxt, trait_span: Span, substr: &Substructure) -> P<Expr> {"}, {"sha": "4fe9aefa1a4dfe51a5080b51e47a7bb76a266379", "filename": "src/libsyntax/ext/deriving/primitive.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fprimitive.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -67,7 +67,7 @@ pub fn expand_deriving_from_primitive(cx: &mut ExtCtxt,\n         associated_types: Vec::new(),\n     };\n \n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n fn cs_from(name: &str, cx: &mut ExtCtxt, trait_span: Span, substr: &Substructure) -> P<Expr> {"}, {"sha": "dc634df2073a48b031be43f86dda072d8f2473b5", "filename": "src/libsyntax/ext/deriving/show.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d16772ecb93270ac64b44b429a157f397a3e41d/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fshow.rs?ref=5d16772ecb93270ac64b44b429a157f397a3e41d", "patch": "@@ -49,7 +49,7 @@ pub fn expand_deriving_show(cx: &mut ExtCtxt,\n         ],\n         associated_types: Vec::new(),\n     };\n-    trait_def.expand(cx, mitem, item, push)\n+    trait_def.expand(cx, mitem, &item, push)\n }\n \n /// We use the debug builders to do the heavy lifting here"}]}