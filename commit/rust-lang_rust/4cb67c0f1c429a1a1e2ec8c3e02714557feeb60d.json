{"sha": "4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjYjY3YzBmMWM0MjlhMWExZTJlYzhjM2UwMjcxNDU1N2ZlZWI2MGQ=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-09T19:21:55Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2019-07-09T19:45:25Z"}, "message": "Add a test case with `$crate` from other crate", "tree": {"sha": "e17a13805f19f8f80e9479e405f4cf2b9c5a4325", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e17a13805f19f8f80e9479e405f4cf2b9c5a4325"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "html_url": "https://github.com/rust-lang/rust/commit/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39975077868fc63a7e9a3cec5130adb3607f6838", "url": "https://api.github.com/repos/rust-lang/rust/commits/39975077868fc63a7e9a3cec5130adb3607f6838", "html_url": "https://github.com/rust-lang/rust/commit/39975077868fc63a7e9a3cec5130adb3607f6838"}], "stats": {"total": 66, "additions": 66, "deletions": 0}, "files": [{"sha": "bdcdb7922ca57a674f21ad4008422ac6189da4b3", "filename": "src/test/ui/proc-macro/auxiliary/dollar-crate-external.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fdollar-crate-external.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fdollar-crate-external.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Fdollar-crate-external.rs?ref=4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "patch": "@@ -14,3 +14,9 @@ macro_rules! external {\n         struct D($crate::S);\n     };\n }\n+\n+#[macro_export]\n+macro_rules! issue_62325 { () => {\n+    #[print_attr]\n+    struct B(identity!($crate::S));\n+}}"}, {"sha": "b7b152e669213beea31d60755375f2ec85034bde", "filename": "src/test/ui/proc-macro/dollar-crate-issue-62325.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.rs?ref=4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "patch": "@@ -1,6 +1,7 @@\n // check-pass\n // edition:2018\n // aux-build:test-macros.rs\n+// aux-build:dollar-crate-external.rs\n \n // Anonymize unstable non-dummy spans while still showing dummy spans `0..0`.\n // normalize-stdout-test \"bytes\\([^0]\\w*\\.\\.(\\w+)\\)\" -> \"bytes(LO..$1)\"\n@@ -10,6 +11,7 @@\n \n #[macro_use]\n extern crate test_macros;\n+extern crate dollar_crate_external;\n \n type S = u8;\n \n@@ -20,4 +22,6 @@ macro_rules! m { () => {\n \n m!();\n \n+dollar_crate_external::issue_62325!();\n+\n fn main() {}"}, {"sha": "17ad1a7af7046888f7a3629121ec7f4a7ed38ae1", "filename": "src/test/ui/proc-macro/dollar-crate-issue-62325.stdout", "status": "modified", "additions": 56, "deletions": 0, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate-issue-62325.stdout?ref=4cb67c0f1c429a1a1e2ec8c3e02714557feeb60d", "patch": "@@ -54,3 +54,59 @@ PRINT-ATTR INPUT (DEBUG): TokenStream [\n         span: #2 bytes(LO..HI),\n     },\n ]\n+PRINT-ATTR INPUT (DISPLAY): struct B(identity!(::dollar_crate_external :: S));\n+PRINT-ATTR RE-COLLECTED (DISPLAY): struct B ( identity ! ( ::dollar_crate_external :: S ) ) ;\n+PRINT-ATTR INPUT (DEBUG): TokenStream [\n+    Ident {\n+        ident: \"struct\",\n+        span: #7 bytes(LO..HI),\n+    },\n+    Ident {\n+        ident: \"B\",\n+        span: #7 bytes(LO..HI),\n+    },\n+    Group {\n+        delimiter: Parenthesis,\n+        stream: TokenStream [\n+            Ident {\n+                ident: \"identity\",\n+                span: #7 bytes(LO..HI),\n+            },\n+            Punct {\n+                ch: '!',\n+                spacing: Alone,\n+                span: #7 bytes(LO..HI),\n+            },\n+            Group {\n+                delimiter: Parenthesis,\n+                stream: TokenStream [\n+                    Ident {\n+                        ident: \"$crate\",\n+                        span: #7 bytes(LO..HI),\n+                    },\n+                    Punct {\n+                        ch: ':',\n+                        spacing: Joint,\n+                        span: #7 bytes(LO..HI),\n+                    },\n+                    Punct {\n+                        ch: ':',\n+                        spacing: Alone,\n+                        span: #7 bytes(LO..HI),\n+                    },\n+                    Ident {\n+                        ident: \"S\",\n+                        span: #7 bytes(LO..HI),\n+                    },\n+                ],\n+                span: #7 bytes(LO..HI),\n+            },\n+        ],\n+        span: #7 bytes(LO..HI),\n+    },\n+    Punct {\n+        ch: ';',\n+        spacing: Alone,\n+        span: #7 bytes(LO..HI),\n+    },\n+]"}]}