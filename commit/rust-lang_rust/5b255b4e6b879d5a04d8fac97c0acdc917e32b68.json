{"sha": "5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMjU1YjRlNmI4NzlkNWEwNGQ4ZmFjOTdjMGFjZGM5MTdlMzJiNjg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-01-14T17:47:02Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-01-15T15:52:28Z"}, "message": ":arrow_up: once_cell", "tree": {"sha": "cc9d0c8edfd57a94e9cdfe97bcb3a1a0ce1b079a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cc9d0c8edfd57a94e9cdfe97bcb3a1a0ce1b079a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "html_url": "https://github.com/rust-lang/rust/commit/5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b255b4e6b879d5a04d8fac97c0acdc917e32b68/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "787d1aba633c1d56594464ce3ed4630185b08091", "url": "https://api.github.com/repos/rust-lang/rust/commits/787d1aba633c1d56594464ce3ed4630185b08091", "html_url": "https://github.com/rust-lang/rust/commit/787d1aba633c1d56594464ce3ed4630185b08091"}], "stats": {"total": 16, "additions": 9, "deletions": 7}, "files": [{"sha": "090454658758563f43a9781559e6494d23487838", "filename": "Cargo.lock", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5b255b4e6b879d5a04d8fac97c0acdc917e32b68/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/5b255b4e6b879d5a04d8fac97c0acdc917e32b68/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "patch": "@@ -739,7 +739,7 @@ dependencies = [\n \n [[package]]\n name = \"once_cell\"\n-version = \"1.2.0\"\n+version = \"1.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n@@ -981,7 +981,7 @@ dependencies = [\n  \"either 1.5.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"insta 0.12.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"once_cell 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"once_cell 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ra_arena 0.1.0\",\n  \"ra_cfg 0.1.0\",\n  \"ra_db 0.1.0\",\n@@ -1043,7 +1043,7 @@ dependencies = [\n  \"itertools 0.8.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"join_to_string 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.8 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"once_cell 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"once_cell 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"proptest 0.9.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ra_assists 0.1.0\",\n  \"ra_cfg 0.1.0\",\n@@ -1117,7 +1117,7 @@ dependencies = [\n  \"itertools 0.8.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"jemalloc-ctl 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"jemallocator 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"once_cell 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"once_cell 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1140,7 +1140,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"arrayvec 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"itertools 0.8.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"once_cell 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"once_cell 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"ra_parser 0.1.0\",\n  \"ra_text_edit 0.1.0\",\n  \"rowan 0.9.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1863,7 +1863,7 @@ dependencies = [\n \"checksum notify 4.0.15 (registry+https://github.com/rust-lang/crates.io-index)\" = \"80ae4a7688d1fab81c5bf19c64fc8db920be8d519ce6336ed4e7efe024724dbd\"\n \"checksum num-traits 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c62be47e61d1842b9170f0fdeec8eba98e60e90e5446449a0545e5152acd7096\"\n \"checksum num_cpus 1.11.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"76dac5ed2a876980778b8b85f75a71b6cbf0db0b1232ee12f826bccb00d09d72\"\n-\"checksum once_cell 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"891f486f630e5c5a4916c7e16c4b24a53e78c860b646e9f8e005e4f16847bfed\"\n+\"checksum once_cell 1.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f5941ec2d5ee5916c709580d71553b81a633df245bcc73c04dcbd62152ceefc4\"\n \"checksum ordermap 0.3.5 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a86ed3f5f244b372d6b1a00b72ef7f8876d0bc6a78a4c9985c53614041512063\"\n \"checksum parking_lot 0.10.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"92e98c49ab0b7ce5b222f2cc9193fc4efe11c6d0bd4f648e374684a6857b1cfc\"\n \"checksum parking_lot_core 0.7.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"7582838484df45743c8434fbff785e8edf260c28748353d44bc0da32e0ceabf1\""}, {"sha": "5e2fe1905ad71cc8477906d10054578201d437ee", "filename": "crates/ra_ide/src/references.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5b255b4e6b879d5a04d8fac97c0acdc917e32b68/crates%2Fra_ide%2Fsrc%2Freferences.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b255b4e6b879d5a04d8fac97c0acdc917e32b68/crates%2Fra_ide%2Fsrc%2Freferences.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Freferences.rs?ref=5b255b4e6b879d5a04d8fac97c0acdc917e32b68", "patch": "@@ -196,7 +196,9 @@ fn process_definition(\n \n     for (file_id, search_range) in scope {\n         let text = db.file_text(file_id);\n+\n         let parse = Lazy::new(|| SourceFile::parse(&text));\n+        let mut sb = Lazy::new(|| SourceBinder::new(db));\n \n         for (idx, _) in text.match_indices(pat) {\n             let offset = TextUnit::from_usize(idx);\n@@ -212,7 +214,7 @@ fn process_definition(\n                 }\n                 // FIXME: reuse sb\n                 // See https://github.com/rust-lang/rust/pull/68198#issuecomment-574269098\n-                let mut sb = SourceBinder::new(db);\n+\n                 if let Some(d) = classify_name_ref(&mut sb, InFile::new(file_id.into(), &name_ref))\n                 {\n                     if d == def {"}]}