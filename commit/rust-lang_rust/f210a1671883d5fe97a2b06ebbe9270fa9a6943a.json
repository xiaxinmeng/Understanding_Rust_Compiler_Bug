{"sha": "f210a1671883d5fe97a2b06ebbe9270fa9a6943a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYyMTBhMTY3MTg4M2Q1ZmU5N2EyYjA2ZWJiZTkyNzBmYTlhNjk0M2E=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-26T20:21:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-09-26T20:21:08Z"}, "message": "auto merge of #9520 : blake2-ppc/rust/ringbuf-swap, r=thestinger\n\nextra::ringbuf: Implement method `.swap(uint, uint)` just like vector\r\n\r\nRingBuf::swap(&mut self, i, j) swaps the element at indices `i` and `j`\r\nif both elements are in bounds, otherwise it fails.", "tree": {"sha": "08c98c9b674128c00451b34ce630c933febe6800", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/08c98c9b674128c00451b34ce630c933febe6800"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f210a1671883d5fe97a2b06ebbe9270fa9a6943a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f210a1671883d5fe97a2b06ebbe9270fa9a6943a", "html_url": "https://github.com/rust-lang/rust/commit/f210a1671883d5fe97a2b06ebbe9270fa9a6943a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f210a1671883d5fe97a2b06ebbe9270fa9a6943a/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "47f2e80b65bf814953c0ceda3b48e46802883f4b", "url": "https://api.github.com/repos/rust-lang/rust/commits/47f2e80b65bf814953c0ceda3b48e46802883f4b", "html_url": "https://github.com/rust-lang/rust/commit/47f2e80b65bf814953c0ceda3b48e46802883f4b"}, {"sha": "57757a8051101eb64eb7a330d7c673422e06a57b", "url": "https://api.github.com/repos/rust-lang/rust/commits/57757a8051101eb64eb7a330d7c673422e06a57b", "html_url": "https://github.com/rust-lang/rust/commit/57757a8051101eb64eb7a330d7c673422e06a57b"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "1e3962914057a5e1785c0f71711cab012dc36b2e", "filename": "src/libextra/ringbuf.rs", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/f210a1671883d5fe97a2b06ebbe9270fa9a6943a/src%2Flibextra%2Fringbuf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f210a1671883d5fe97a2b06ebbe9270fa9a6943a/src%2Flibextra%2Fringbuf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Fringbuf.rs?ref=f210a1671883d5fe97a2b06ebbe9270fa9a6943a", "patch": "@@ -143,6 +143,19 @@ impl<T> RingBuf<T> {\n         }\n     }\n \n+    /// Swap elements at indices `i` and `j`\n+    ///\n+    /// `i` and `j` may be equal.\n+    ///\n+    /// Fails if there is no element with the given index\n+    pub fn swap(&mut self, i: uint, j: uint) {\n+        assert!(i < self.len());\n+        assert!(j < self.len());\n+        let ri = self.raw_index(i);\n+        let rj = self.raw_index(j);\n+        self.elts.swap(ri, rj);\n+    }\n+\n     /// Return index in underlying vec for a given logical element index\n     fn raw_index(&self, idx: uint) -> uint {\n         raw_index(self.lo, self.elts.len(), idx)\n@@ -604,6 +617,14 @@ mod tests {\n         assert_eq!(d.elts.capacity(), 64);\n     }\n \n+    #[test]\n+    fn test_swap() {\n+        let mut d: RingBuf<int> = range(0, 5).collect();\n+        d.pop_front();\n+        d.swap(0, 3);\n+        assert_eq!(d.iter().map(|&x|x).collect::<~[int]>(), ~[4, 2, 3, 1]);\n+    }\n+\n     #[test]\n     fn test_iter() {\n         let mut d = RingBuf::new();"}]}