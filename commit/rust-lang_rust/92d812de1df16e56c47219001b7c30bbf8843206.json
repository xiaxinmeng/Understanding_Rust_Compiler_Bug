{"sha": "92d812de1df16e56c47219001b7c30bbf8843206", "node_id": "C_kwDOAAsO6NoAKDkyZDgxMmRlMWRmMTZlNTZjNDcyMTkwMDFiN2MzMGJiZjg4NDMyMDY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-01-06T20:26:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-06T20:26:12Z"}, "message": "Rollup merge of #106534 - GuillaumeGomez:block-syntax, r=notriddle\n\nrustdoc-gui: Use new block syntax for define-function in goml scripts\n\nr? `@notriddle`", "tree": {"sha": "87cf382760f11e89a45cb37b102de1453e8e0c29", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/87cf382760f11e89a45cb37b102de1453e8e0c29"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92d812de1df16e56c47219001b7c30bbf8843206", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjuIPkCRBK7hj4Ov3rIwAAJUsIAGG//Gbmrhh3+rDKiN8u0Pt9\niK+Z6Eph95FeWmqBWhic3nCIghU+u/FySc8QuxkHahKWtuI5tTDnJ93ZeRk8hncD\nlfSdE1dVA7AnNiLJvwCrhNLNKg0wdQHAz0IDsr8G+z6p7+F1PXsTfWhZxACI5KYG\nK4PKH/P/kctWDwYxXbiYmOdimLy4yC1iDtlwYcMfQQpsOz9Ozkniylq9lOKysDcW\nV/vi7HeavqhHKzbXObMg9BrluPFlkT/r9llj+Jy764OiWsb7dCCyXAoU97hQJVmF\nkhiExja1gUX8scTUi/2MeSB4IKm9aSM9GQ/BrUvP+QmXxW4pT2qrrsco3u+6Syo=\n=g0h1\n-----END PGP SIGNATURE-----\n", "payload": "tree 87cf382760f11e89a45cb37b102de1453e8e0c29\nparent 9a090edf2efc184e654ff94f216945af678ecf32\nparent 009064f8902d89e71230af8188a3241d97477d37\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1673036772 +0100\ncommitter GitHub <noreply@github.com> 1673036772 +0100\n\nRollup merge of #106534 - GuillaumeGomez:block-syntax, r=notriddle\n\nrustdoc-gui: Use new block syntax for define-function in goml scripts\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92d812de1df16e56c47219001b7c30bbf8843206", "html_url": "https://github.com/rust-lang/rust/commit/92d812de1df16e56c47219001b7c30bbf8843206", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92d812de1df16e56c47219001b7c30bbf8843206/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a090edf2efc184e654ff94f216945af678ecf32", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a090edf2efc184e654ff94f216945af678ecf32", "html_url": "https://github.com/rust-lang/rust/commit/9a090edf2efc184e654ff94f216945af678ecf32"}, {"sha": "009064f8902d89e71230af8188a3241d97477d37", "url": "https://api.github.com/repos/rust-lang/rust/commits/009064f8902d89e71230af8188a3241d97477d37", "html_url": "https://github.com/rust-lang/rust/commit/009064f8902d89e71230af8188a3241d97477d37"}], "stats": {"total": 1166, "additions": 574, "deletions": 592}, "files": [{"sha": "c39e9c5fbc9d6e0e02eeb4fe453d25ea3e11ff21", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -1 +1 @@\n-0.13.4\n\\ No newline at end of file\n+0.14.1\n\\ No newline at end of file"}, {"sha": "c9b53a1a0f76c5b207c43377583f3bde26b310df", "filename": "src/test/rustdoc-gui/anchors.goml", "status": "modified", "additions": 41, "deletions": 39, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fanchors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fanchors.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -3,70 +3,72 @@\n define-function: (\n     \"check-colors\",\n     (theme, main_color, title_color, fqn_color, fqn_type_color, src_link_color, sidebar_link_color),\n-    [\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/staged_api/struct.Foo.html\"),\n+    block {\n+        goto: \"file://\" + |DOC_PATH| + \"/staged_api/struct.Foo.html\"\n         // This is needed to ensure that the text color is computed.\n-        (\"show-text\", true),\n+        show-text: true\n \n         // Setting the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n+        reload:\n \n-        (\"assert-css\", (\"#toggle-all-docs\", {\"color\": |main_color|})),\n-        (\"assert-css\", (\".fqn a:nth-of-type(1)\", {\"color\": |fqn_color|})),\n-        (\"assert-css\", (\".fqn a:nth-of-type(2)\", {\"color\": |fqn_type_color|})),\n-        (\"assert-css\", (\n+        assert-css: (\"#toggle-all-docs\", {\"color\": |main_color|})\n+        assert-css: (\".fqn a:nth-of-type(1)\", {\"color\": |fqn_color|})\n+        assert-css: (\".fqn a:nth-of-type(2)\", {\"color\": |fqn_type_color|})\n+        assert-css: (\n              \".rightside .srclink\",\n              {\"color\": |src_link_color|, \"text-decoration\": \"none solid \" + |src_link_color|},\n              ALL,\n-        )),\n-        (\n-            \"compare-elements-css\",\n-            (\".rightside .srclink\", \".rightside.srclink\", [\"color\", \"text-decoration\"]),\n-        ),\n-        (\n-            \"compare-elements-css\",\n-            (\".main-heading .srclink\", \".rightside.srclink\", [\"color\", \"text-decoration\"]),\n-        ),\n+        )\n+        compare-elements-css: (\n+            \".rightside .srclink\",\n+            \".rightside.srclink\",\n+            [\"color\", \"text-decoration\"],\n+        )\n+        compare-elements-css: (\n+            \".main-heading .srclink\",\n+            \".rightside.srclink\",\n+            [\"color\", \"text-decoration\"],\n+        )\n \n-        (\"move-cursor-to\", \".main-heading .srclink\"),\n-        (\"assert-css\", (\n+        move-cursor-to: \".main-heading .srclink\"\n+        assert-css: (\n              \".main-heading .srclink\",\n              {\"color\": |src_link_color|, \"text-decoration\": \"underline solid \" + |src_link_color|},\n-        )),\n-        (\"move-cursor-to\", \".impl-items .rightside .srclink\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".impl-items .rightside .srclink\"\n+        assert-css: (\n              \".impl-items .rightside .srclink\",\n              {\"color\": |src_link_color|, \"text-decoration\": \"none solid \" + |src_link_color|},\n-        )),\n-        (\"move-cursor-to\", \".impl-items .rightside.srclink\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".impl-items .rightside.srclink\"\n+        assert-css: (\n              \".impl-items .rightside.srclink\",\n              {\"color\": |src_link_color|, \"text-decoration\": \"none solid \" + |src_link_color|},\n-        )),\n+        )\n \n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"),\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"\n         // Since we changed page, we need to set the theme again.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n+        reload:\n \n-        (\"assert-css\", (\"#top-doc-prose-title\", {\"color\": |title_color|})),\n+        assert-css: (\"#top-doc-prose-title\", {\"color\": |title_color|})\n \n-        (\"assert-css\", (\".sidebar a\", {\"color\": |sidebar_link_color|})),\n-        (\"assert-css\", (\"h1.fqn a\", {\"color\": |title_color|})),\n+        assert-css: (\".sidebar a\", {\"color\": |sidebar_link_color|})\n+        assert-css: (\"h1.fqn a\", {\"color\": |title_color|})\n \n         // We move the cursor over the \"Implementations\" title so the anchor is displayed.\n-        (\"move-cursor-to\", \"h2#implementations\"),\n-        (\"assert-css\", (\"h2#implementations a.anchor\", {\"color\": |main_color|})),\n+        move-cursor-to: \"h2#implementations\"\n+        assert-css: (\"h2#implementations a.anchor\", {\"color\": |main_color|})\n \n         // Same thing with the impl block title.\n-        (\"move-cursor-to\", \"#impl-HeavilyDocumentedStruct\"),\n-        (\"assert-css\", (\"#impl-HeavilyDocumentedStruct a.anchor\", {\"color\": |main_color|})),\n+        move-cursor-to: \"#impl-HeavilyDocumentedStruct\"\n+        assert-css: (\"#impl-HeavilyDocumentedStruct a.anchor\", {\"color\": |main_color|})\n \n-        (\"assert-css\", (\"#title-for-struct-impl-item-doc\", {\"margin-left\": \"0px\"})),\n-    ],\n+        assert-css: (\"#title-for-struct-impl-item-doc\", {\"margin-left\": \"0px\"})\n+    },\n )\n \n call-function: ("}, {"sha": "cb550a4573a6f6c309fc66c45d807881324a29bc", "filename": "src/test/rustdoc-gui/code-color.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fcode-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fcode-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -9,14 +9,14 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, doc_code_color, doc_inline_code_color),\n-    [\n+    block {\n         // Set the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n-        (\"assert-css\", (\".docblock pre > code\", {\"color\": |doc_code_color|}, ALL)),\n-        (\"assert-css\", (\".docblock > p > code\", {\"color\": |doc_inline_code_color|}, ALL)),\n-    ],\n+        reload:\n+        assert-css: (\".docblock pre > code\", {\"color\": |doc_code_color|}, ALL)\n+        assert-css: (\".docblock > p > code\", {\"color\": |doc_inline_code_color|}, ALL)\n+    },\n )\n \n call-function: (\"check-colors\", (\"ayu\", \"rgb(230, 225, 207)\", \"rgb(255, 180, 84)\"))"}, {"sha": "a3ef4e77b542421cfc302c1826d9d9f501cf618e", "filename": "src/test/rustdoc-gui/codeblock-tooltip.goml", "status": "modified", "additions": 43, "deletions": 43, "changes": 86, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcodeblock-tooltip.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -5,32 +5,32 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, background, color, border),\n-    [\n+    block {\n         // Setting the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n \n         // compile_fail block\n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail .tooltip\",\n             {\"color\": \"rgba(255, 0, 0, 0.5)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail\",\n             {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"},\n-        )),\n+        )\n \n-        (\"move-cursor-to\", \".docblock .example-wrap.compile_fail .tooltip\"),\n+        move-cursor-to: \".docblock .example-wrap.compile_fail .tooltip\"\n \n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail .tooltip\",\n             {\"color\": \"rgb(255, 0, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail\",\n             {\"border-left\": \"2px solid rgb(255, 0, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail .tooltip::after\",\n             {\n                 \"content\": '\"This example deliberately fails to compile\"',\n@@ -39,37 +39,37 @@ define-function: (\n                 \"color\": |color|,\n                 \"border\": \"1px solid \" + |border|,\n             },\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.compile_fail .tooltip::before\",\n             {\n                 \"border-width\": \"5px\",\n                 \"border-style\": \"solid\",\n                 \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n             },\n-        )),\n+        )\n \n         // should_panic block\n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.should_panic .tooltip\",\n             {\"color\": \"rgba(255, 0, 0, 0.5)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.should_panic\",\n             {\"border-left\": \"2px solid rgba(255, 0, 0, 0.5)\"},\n-        )),\n+        )\n \n-        (\"move-cursor-to\", \".docblock .example-wrap.should_panic .tooltip\"),\n+        move-cursor-to: \".docblock .example-wrap.should_panic .tooltip\"\n \n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.should_panic .tooltip\",\n             {\"color\": \"rgb(255, 0, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.should_panic\",\n             {\"border-left\": \"2px solid rgb(255, 0, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.should_panic .tooltip::after\",\n             {\n                 \"content\": '\"This example panics\"',\n@@ -78,37 +78,37 @@ define-function: (\n                 \"color\": |color|,\n                 \"border\": \"1px solid \" + |border|,\n             },\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.should_panic .tooltip::before\",\n             {\n                 \"border-width\": \"5px\",\n                 \"border-style\": \"solid\",\n                 \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n             },\n-        )),\n+        )\n \n         // ignore block\n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.ignore .tooltip\",\n             {\"color\": \"rgba(255, 142, 0, 0.6)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.ignore\",\n             {\"border-left\": \"2px solid rgba(255, 142, 0, 0.6)\"},\n-        )),\n+        )\n \n-        (\"move-cursor-to\", \".docblock .example-wrap.ignore .tooltip\"),\n+        move-cursor-to: \".docblock .example-wrap.ignore .tooltip\"\n \n-        (\"assert-css\", (\n+        assert-css: (\n             \".docblock .example-wrap.ignore .tooltip\",\n             {\"color\": \"rgb(255, 142, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.ignore\",\n             {\"border-left\": \"2px solid rgb(255, 142, 0)\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.ignore .tooltip::after\",\n             {\n                 \"content\": '\"This example is not tested\"',\n@@ -117,16 +117,16 @@ define-function: (\n                 \"color\": |color|,\n                 \"border\": \"1px solid \" + |border|,\n             },\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".docblock .example-wrap.ignore .tooltip::before\",\n             {\n                 \"border-width\": \"5px\",\n                 \"border-style\": \"solid\",\n                 \"border-color\": \"rgba(0, 0, 0, 0) \" + |background| + \" rgba(0, 0, 0, 0) rgba(0, 0, 0, 0)\",\n             },\n-        )),\n-    ],\n+        )\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "69bcf5339ef2cda8231dd7aebcbe12500dee78ae", "filename": "src/test/rustdoc-gui/docblock-code-block-line-number.goml", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-code-block-line-number.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -11,19 +11,19 @@ assert-false: \"pre.example-line-numbers\"\n define-function: (\n     \"check-colors\",\n     (theme, color),\n-    [\n+    block {\n         // We now set the setting to show the line numbers on code examples.\n-        (\"local-storage\", {\n+        local-storage: {\n             \"rustdoc-theme\": |theme|,\n             \"rustdoc-use-system-theme\": \"false\",\n             \"rustdoc-line-numbers\": \"true\"\n-        }),\n+        }\n         // We reload to make the line numbers appear and change theme.\n-        (\"reload\"),\n+        reload:\n         // We wait for them to be added into the DOM by the JS...\n-        (\"wait-for\", \"pre.example-line-numbers\"),\n+        wait-for: \"pre.example-line-numbers\"\n         // If the test didn't fail, it means that it was found!\n-        (\"assert-css\", (\n+        assert-css: (\n             \"pre.example-line-numbers\",\n             {\n                 \"color\": |color|,\n@@ -32,8 +32,8 @@ define-function: (\n                 \"text-align\": \"right\",\n             },\n             ALL,\n-        )),\n-    ],\n+        )\n+    },\n )\n call-function: (\"check-colors\", {\n     \"theme\": \"ayu\","}, {"sha": "3dcb8abd41598887020e270a71a2ce012c59ecd5", "filename": "src/test/rustdoc-gui/docblock-table.goml", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fdocblock-table.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fdocblock-table.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fdocblock-table.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -7,32 +7,32 @@ compare-elements-css: (\".impl-items .docblock table td\", \".top-doc .docblock tab\n define-function: (\n     \"check-colors\",\n     (theme, border_color, zebra_stripe_color),\n-    [\n-        (\"local-storage\", {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".top-doc .docblock table tbody tr:nth-child(1)\", {\n+    block {\n+        local-storage: {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}\n+        reload:\n+        assert-css: (\".top-doc .docblock table tbody tr:nth-child(1)\", {\n             \"background-color\": \"rgba(0, 0, 0, 0)\",\n-        })),\n-        (\"assert-css\", (\".top-doc .docblock table tbody tr:nth-child(2)\", {\n+        })\n+        assert-css: (\".top-doc .docblock table tbody tr:nth-child(2)\", {\n             \"background-color\": |zebra_stripe_color|,\n-        })),\n-        (\"assert-css\", (\".top-doc .docblock table tbody tr:nth-child(3)\", {\n+        })\n+        assert-css: (\".top-doc .docblock table tbody tr:nth-child(3)\", {\n             \"background-color\": \"rgba(0, 0, 0, 0)\",\n-        })),\n-        (\"assert-css\", (\".top-doc .docblock table tbody tr:nth-child(4)\", {\n+        })\n+        assert-css: (\".top-doc .docblock table tbody tr:nth-child(4)\", {\n             \"background-color\": |zebra_stripe_color|,\n-        })),\n-        (\"assert-css\", (\".top-doc .docblock table td\", {\n+        })\n+        assert-css: (\".top-doc .docblock table td\", {\n             \"border-style\": \"solid\",\n             \"border-width\": \"1px\",\n             \"border-color\": |border_color|,\n-        })),\n-        (\"assert-css\", (\".top-doc .docblock table th\", {\n+        })\n+        assert-css: (\".top-doc .docblock table th\", {\n             \"border-style\": \"solid\",\n             \"border-width\": \"1px\",\n             \"border-color\": |border_color|,\n-        })),\n-    ]\n+        })\n+    }\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "92cf050a514ff24c9dd92bdb2f3abaac67da360c", "filename": "src/test/rustdoc-gui/headers-color.goml", "status": "modified", "additions": 20, "deletions": 20, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheaders-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -3,39 +3,39 @@\n define-function: (\n     \"check-colors\",\n     (theme, color, code_header_color, focus_background_color, headings_color),\n-    [\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html\"),\n+    block {\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html\"\n         // This is needed so that the text color is computed.\n-        (\"show-text\", true),\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\n+        show-text: true\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\n             \".impl\",\n             {\"color\": |color|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n             ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".impl .code-header\",\n             {\"color\": |code_header_color|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n             ALL,\n-        )),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html#impl-Foo\"),\n-        (\"assert-css\", (\n+        )\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html#impl-Foo\"\n+        assert-css: (\n             \"#impl-Foo\",\n             {\"color\": |color|, \"background-color\": |focus_background_color|},\n-        )),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html#method.must_use\"),\n-        (\"assert-css\", (\n+        )\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.Foo.html#method.must_use\"\n+        assert-css: (\n             \"#method\\.must_use\",\n             {\"color\": |color|, \"background-color\": |focus_background_color|},\n             ALL,\n-        )),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"),\n-        (\"assert-css\", (\".small-section-header a\", {\"color\": |color|}, ALL)),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"),\n+        )\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n+        assert-css: (\".small-section-header a\", {\"color\": |color|}, ALL)\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"\n         // We select headings (h2, h3, h...).\n-        (\"assert-css\", (\".docblock > :not(p) > a\", {\"color\": |headings_color|}, ALL)),\n-    ],\n+        assert-css: (\".docblock > :not(p) > a\", {\"color\": |headings_color|}, ALL)\n+    },\n )\n \n call-function: ("}, {"sha": "45b3fee26e413dc054a6ded9605a9f9b32434afd", "filename": "src/test/rustdoc-gui/headings.goml", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheadings.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -157,38 +157,38 @@ goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"\n define-function: (\n     \"check-colors\",\n     (theme, heading_color, small_heading_color, heading_border_color),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\n             \".top-doc .docblock h2\",\n             {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".top-doc .docblock h3\",\n             {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".top-doc .docblock h4\",\n             {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".top-doc .docblock h5\",\n             {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \"#implementations-list .docblock h4\",\n             {\"color\": |heading_color|, \"border-bottom-width\": \"0px\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \"#implementations-list .docblock h5\",\n             {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \"#implementations-list .docblock h6\",\n             {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n-        )),\n-    ],\n+        )\n+    },\n )\n call-function: (\n     \"check-colors\",\n@@ -221,11 +221,11 @@ call-function: (\n define-function: (\n     \"check-since-color\",\n     (theme),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)),\n-    ],\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|}\n+        reload:\n+        assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n+    },\n )\n \n goto: \"file://\" + |DOC_PATH| + \"/staged_api/struct.Foo.html\""}, {"sha": "5f4c1ba2f8536d83f59281e0feaa92f3d5f454d5", "filename": "src/test/rustdoc-gui/help-page.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhelp-page.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -18,17 +18,17 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, color, background, box_shadow),\n-    [\n+    block {\n         // Setting the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n-        (\"assert-css\", (\"#help kbd\", {\n+        reload:\n+        assert-css: (\"#help kbd\", {\n             \"color\": |color|,\n             \"background-color\": |background|,\n             \"box-shadow\": |box_shadow| + \" 0px -1px 0px 0px inset\",\n-        }, ALL)),\n-    ],\n+        }, ALL)\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "b182150a577d56616b2d11414c39af4a744e33ad", "filename": "src/test/rustdoc-gui/highlight-colors.goml", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fhighlight-colors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fhighlight-colors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhighlight-colors.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -21,24 +21,24 @@ define-function: (\n         comment,\n         doc_comment,\n     ),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\"pre.rust .kw\", {\"color\": |kw|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .kw-2\", {\"color\": |kw2|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .prelude-ty\", {\"color\": |prelude_ty|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .prelude-val\", {\"color\": |prelude_val|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .lifetime\", {\"color\": |lifetime|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .number\", {\"color\": |number|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .string\", {\"color\": |string|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .bool-val\", {\"color\": |bool_val|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .self\", {\"color\": |self|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .attr\", {\"color\": |attr|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .macro\", {\"color\": |macro|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .question-mark\", {\"color\": |question_mark|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .comment\", {\"color\": |comment|}, ALL)),\n-        (\"assert-css\", (\"pre.rust .doccomment\", {\"color\": |doc_comment|}, ALL)),\n-    ],\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\"pre.rust .kw\", {\"color\": |kw|}, ALL)\n+        assert-css: (\"pre.rust .kw-2\", {\"color\": |kw2|}, ALL)\n+        assert-css: (\"pre.rust .prelude-ty\", {\"color\": |prelude_ty|}, ALL)\n+        assert-css: (\"pre.rust .prelude-val\", {\"color\": |prelude_val|}, ALL)\n+        assert-css: (\"pre.rust .lifetime\", {\"color\": |lifetime|}, ALL)\n+        assert-css: (\"pre.rust .number\", {\"color\": |number|}, ALL)\n+        assert-css: (\"pre.rust .string\", {\"color\": |string|}, ALL)\n+        assert-css: (\"pre.rust .bool-val\", {\"color\": |bool_val|}, ALL)\n+        assert-css: (\"pre.rust .self\", {\"color\": |self|}, ALL)\n+        assert-css: (\"pre.rust .attr\", {\"color\": |attr|}, ALL)\n+        assert-css: (\"pre.rust .macro\", {\"color\": |macro|}, ALL)\n+        assert-css: (\"pre.rust .question-mark\", {\"color\": |question_mark|}, ALL)\n+        assert-css: (\"pre.rust .comment\", {\"color\": |comment|}, ALL)\n+        assert-css: (\"pre.rust .doccomment\", {\"color\": |doc_comment|}, ALL)\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "c58e3eb7c237f5ea5dcb5e5e392034eb33171330", "filename": "src/test/rustdoc-gui/item-decl-colors.goml", "status": "modified", "additions": 16, "deletions": 15, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -17,22 +17,23 @@ define-function: (\n         fn_color,\n         assoc_type_color,\n     ),\n-    [\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.WithGenerics.html\"),\n-        (\"show-text\", true),\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".item-decl .code-attribute\", {\"color\": |attr_color|}, ALL)),\n-        (\"assert-css\", (\".item-decl .trait\", {\"color\": |trait_color|}, ALL)),\n+    block {\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.WithGenerics.html\"\n+        show-text: true\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\".item-decl .code-attribute\", {\"color\": |attr_color|}, ALL)\n+        assert-css: (\".item-decl .trait\", {\"color\": |trait_color|}, ALL)\n         // We need to add `code` here because otherwise it would select the parent too.\n-        (\"assert-css\", (\".item-decl code .struct\", {\"color\": |struct_color|}, ALL)),\n-        (\"assert-css\", (\".item-decl .enum\", {\"color\": |enum_color|}, ALL)),\n-        (\"assert-css\", (\".item-decl .primitive\", {\"color\": |primitive_color|}, ALL)),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/trait.TraitWithoutGenerics.html\"),\n-        (\"assert-css\", (\".item-decl .constant\", {\"color\": |constant_color|}, ALL)),\n-        (\"assert-css\", (\".item-decl .fn\", {\"color\": |fn_color|}, ALL)),\n-        (\"assert-css\", (\".item-decl .associatedtype\", {\"color\": |assoc_type_color|}, ALL)),\n-    ],\n+        assert-css: (\".item-decl code .struct\", {\"color\": |struct_color|}, ALL)\n+        assert-css: (\".item-decl .enum\", {\"color\": |enum_color|}, ALL)\n+        assert-css: (\".item-decl .primitive\", {\"color\": |primitive_color|}, ALL)\n+\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/trait.TraitWithoutGenerics.html\"\n+        assert-css: (\".item-decl .constant\", {\"color\": |constant_color|}, ALL)\n+        assert-css: (\".item-decl .fn\", {\"color\": |fn_color|}, ALL)\n+        assert-css: (\".item-decl .associatedtype\", {\"color\": |assoc_type_color|}, ALL)\n+    },\n )\n \n call-function: ("}, {"sha": "8ee3ccf4a211897251aceeee96807847dc257bb3", "filename": "src/test/rustdoc-gui/jump-to-def-background.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fjump-to-def-background.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fjump-to-def-background.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fjump-to-def-background.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -4,17 +4,17 @@ goto: \"file://\" + |DOC_PATH| + \"/src/link_to_definition/lib.rs.html\"\n define-function: (\n     \"check-background-color\",\n     (theme, background_color),\n-    [\n+    block {\n         // Set the theme.\n-        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\" }),\n+        local-storage: { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\" }\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n-        (\"assert-css\", (\n+        reload:\n+        assert-css: (\n             \"body.source .example-wrap pre.rust a\",\n             {\"background-color\": |background_color|},\n             ALL,\n-        )),\n-    ],\n+        )\n+    },\n )\n \n call-function: (\"check-background-color\", (\"ayu\", \"rgb(51, 51, 51)\"))"}, {"sha": "14f7d99351a646364d9ba5cdf9e58324fc6cd940", "filename": "src/test/rustdoc-gui/links-color.goml", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Flinks-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Flinks-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Flinks-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -8,38 +8,38 @@ define-function: (\n     \"check-colors\",\n     (theme, mod, macro, struct, enum, trait, fn, type, union, keyword,\n      sidebar, sidebar_current, sidebar_current_background),\n-    [\n-        (\"local-storage\", {\n+    block {\n+        local-storage: {\n             \"rustdoc-theme\": |theme|,\n             \"rustdoc-use-system-theme\": \"false\",\n-        }),\n-        (\"reload\"),\n+        }\n+        reload:\n         // Checking results colors.\n-        (\"assert-css\", (\".item-table .mod\", {\"color\": |mod|}, ALL)),\n-        (\"assert-css\", (\".item-table .macro\", {\"color\": |macro|}, ALL)),\n-        (\"assert-css\", (\".item-table .struct\", {\"color\": |struct|}, ALL)),\n-        (\"assert-css\", (\".item-table .enum\", {\"color\": |enum|}, ALL)),\n-        (\"assert-css\", (\".item-table .trait\", {\"color\": |trait|}, ALL)),\n-        (\"assert-css\", (\".item-table .fn\", {\"color\": |fn|}, ALL)),\n-        (\"assert-css\", (\".item-table .type\", {\"color\": |type|}, ALL)),\n-        (\"assert-css\", (\".item-table .union\", {\"color\": |union|}, ALL)),\n-        (\"assert-css\", (\".item-table .keyword\", {\"color\": |keyword|}, ALL)),\n+        assert-css: (\".item-table .mod\", {\"color\": |mod|}, ALL)\n+        assert-css: (\".item-table .macro\", {\"color\": |macro|}, ALL)\n+        assert-css: (\".item-table .struct\", {\"color\": |struct|}, ALL)\n+        assert-css: (\".item-table .enum\", {\"color\": |enum|}, ALL)\n+        assert-css: (\".item-table .trait\", {\"color\": |trait|}, ALL)\n+        assert-css: (\".item-table .fn\", {\"color\": |fn|}, ALL)\n+        assert-css: (\".item-table .type\", {\"color\": |type|}, ALL)\n+        assert-css: (\".item-table .union\", {\"color\": |union|}, ALL)\n+        assert-css: (\".item-table .keyword\", {\"color\": |keyword|}, ALL)\n         // Checking sidebar elements.\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar-elems a:not(.current)\",\n             {\"color\": |sidebar|, \"background-color\": \"rgba(0, 0, 0, 0)\", \"font-weight\": \"400\"},\n             ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".sidebar-elems a.current\",\n             {\n                 \"color\": |sidebar_current|,\n                 \"background-color\": |sidebar_current_background|,\n                 \"font-weight\": \"500\",\n             },\n             ALL,\n-        )),\n-    ],\n+        )\n+    },\n )\n \n call-function: ("}, {"sha": "b4fa7d0dbf0e2a69ec820ba0675d6af5f9106dd6", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -123,40 +123,40 @@ assert-count: (\"//*[@class='notable popover']\", 0)\n define-function: (\n     \"check-colors\",\n     (theme, header_color, content_color, type_color, trait_color),\n-    [\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/struct.NotableStructWithLongName.html\"),\n+    block {\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.NotableStructWithLongName.html\"\n         // This is needed to ensure that the text color is computed.\n-        (\"show-text\", true),\n+        show-text: true\n \n         // Setting the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n+        reload:\n \n-        (\"move-cursor-to\", \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"),\n-        (\"assert-count\", (\".notable.popover\", 1)),\n+        move-cursor-to: \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\"\n+        assert-count: (\".notable.popover\", 1)\n \n-        (\"assert-css\", (\n+        assert-css: (\n              \".notable.popover h3\",\n              {\"color\": |header_color|},\n              ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n              \".notable.popover pre\",\n              {\"color\": |content_color|},\n              ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n              \".notable.popover pre a.struct\",\n              {\"color\": |type_color|},\n              ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n              \".notable.popover pre a.trait\",\n              {\"color\": |trait_color|},\n              ALL,\n-        )),\n-    ]\n+        )\n+    },\n )\n \n call-function: ("}, {"sha": "8dcb62c10aaac9a4ab80f0f3efffab03a59d2cc3", "filename": "src/test/rustdoc-gui/run-on-hover.goml", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Frun-on-hover.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Frun-on-hover.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Frun-on-hover.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -8,27 +8,27 @@ show-text: true\n define-function: (\n     \"check-run-button\",\n     (theme, color, background, hover_color, hover_background),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".test-arrow\", {\"visibility\": \"hidden\"})),\n-        (\"move-cursor-to\", \".example-wrap\"),\n-        (\"assert-css\", (\".test-arrow\", {\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\".test-arrow\", {\"visibility\": \"hidden\"})\n+        move-cursor-to: \".example-wrap\"\n+        assert-css: (\".test-arrow\", {\n             \"visibility\": \"visible\",\n             \"color\": |color|,\n             \"background-color\": |background|,\n             \"font-size\": \"22px\",\n             \"border-radius\": \"5px\",\n-        })),\n-        (\"move-cursor-to\", \".test-arrow\"),\n-        (\"assert-css\", (\".test-arrow:hover\", {\n+        })\n+        move-cursor-to: \".test-arrow\"\n+        assert-css: (\".test-arrow:hover\", {\n             \"visibility\": \"visible\",\n             \"color\": |hover_color|,\n             \"background-color\": |hover_background|,\n             \"font-size\": \"22px\",\n             \"border-radius\": \"5px\",\n-        })),\n-    ],\n+        })\n+    },\n )\n \n call-function: (\"check-run-button\", {"}, {"sha": "e94dc9a964ddde18e940a830c3a09a3e99f117d1", "filename": "src/test/rustdoc-gui/rust-logo.goml", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -4,29 +4,29 @@ goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n define-function: (\n     \"check-logo\",\n     (theme, filter),\n-    [\n+    block {\n         // Going to the doc page.\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"),\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n         // Changing theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".rust-logo\", {\"filter\": |filter|})),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\".rust-logo\", {\"filter\": |filter|})\n         // Going to the source code page.\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html\"),\n+        goto: \"file://\" + |DOC_PATH| + \"/src/test_docs/lib.rs.html\"\n         // Changing theme (since it's local files, the local storage works by folder).\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\".rust-logo\", {\"filter\": |filter|})),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\".rust-logo\", {\"filter\": |filter|})\n         // Now we check that the non-rust logos don't have a CSS filter set.\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/huge_logo/index.html\"),\n+        goto: \"file://\" + |DOC_PATH| + \"/huge_logo/index.html\"\n         // Changing theme on the new page (again...).\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n         // Check there is no rust logo\n-        (\"assert-false\", \".rust-logo\"),\n+        assert-false: \".rust-logo\"\n         // Check there is no filter.\n-        (\"assert-css\", (\".sidebar .logo-container img\", {\"filter\": \"none\"})),\n-    ],\n+        assert-css: (\".sidebar .logo-container img\", {\"filter\": \"none\"})\n+    },\n )\n \n call-function: ("}, {"sha": "40f31b2771b258f4d995510d45fc40836c4b2262", "filename": "src/test/rustdoc-gui/scrape-examples-color.goml", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -6,29 +6,29 @@ define-function: (\n     \"check-colors\",\n     (theme, highlight, highlight_focus, help_border, help_color, help_hover_border,\n      help_hover_color),\n-    [\n-        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\", }),\n-        (\"reload\"),\n-        (\"wait-for\", \".more-examples-toggle\"),\n-        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight:not(.focus)\", {\n+    block {\n+        local-storage: { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\", }\n+        reload:\n+        wait-for: \".more-examples-toggle\"\n+        assert-css: (\".scraped-example .example-wrap .rust span.highlight:not(.focus)\", {\n             \"background-color\": |highlight|,\n-        }, ALL)),\n-        (\"assert-css\", (\".scraped-example .example-wrap .rust span.highlight.focus\", {\n+        }, ALL)\n+        assert-css: (\".scraped-example .example-wrap .rust span.highlight.focus\", {\n             \"background-color\": |highlight_focus|,\n-        }, ALL)),\n+        }, ALL)\n \n-        (\"assert-css\", (\".scraped-example-list .scrape-help\", {\n+        assert-css: (\".scraped-example-list .scrape-help\", {\n             \"border-color\": |help_border|,\n             \"color\": |help_color|,\n-        })),\n-        (\"move-cursor-to\", \".scraped-example-list .scrape-help\"),\n-        (\"assert-css\", (\".scraped-example-list .scrape-help:hover\", {\n+        })\n+        move-cursor-to: \".scraped-example-list .scrape-help\"\n+        assert-css: (\".scraped-example-list .scrape-help:hover\", {\n             \"border-color\": |help_hover_border|,\n             \"color\": |help_hover_color|,\n-        })),\n+        })\n         // Moving the cursor to another item to not break next runs.\n-        (\"move-cursor-to\", \".search-input\"),\n-    ]\n+        move-cursor-to: \".search-input\"\n+    }\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "2d5df6a5d25e0d7efdaff29f7d7f2704e1f2f222", "filename": "src/test/rustdoc-gui/scrape-examples-toggle.goml", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fscrape-examples-toggle.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -6,24 +6,24 @@ show-text: true\n define-function: (\n     \"check-color\",\n     (theme, toggle_line_color, toggle_line_hover_color),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n \n         // Clicking \"More examples...\" will open additional examples\n-        (\"assert-attribute-false\", (\".more-examples-toggle\", {\"open\": \"\"})),\n-        (\"click\", \".more-examples-toggle\"),\n-        (\"assert-attribute\", (\".more-examples-toggle\", {\"open\": \"\"})),\n+        assert-attribute-false: (\".more-examples-toggle\", {\"open\": \"\"})\n+        click: \".more-examples-toggle\"\n+        assert-attribute: (\".more-examples-toggle\", {\"open\": \"\"})\n \n-        (\"assert-css\", (\".toggle-line-inner\", {\"background-color\": |toggle_line_color|}, ALL)),\n-        (\"move-cursor-to\", \".toggle-line\"),\n-        (\"assert-css\", (\n+        assert-css: (\".toggle-line-inner\", {\"background-color\": |toggle_line_color|}, ALL)\n+        move-cursor-to: \".toggle-line\"\n+        assert-css: (\n             \".toggle-line:hover .toggle-line-inner\",\n             {\"background-color\": |toggle_line_hover_color|},\n-        )),\n+        )\n         // Moving cursor away from the toggle line to prevent disrupting next test.\n-        (\"move-cursor-to\", \".search-input\"),\n-    ],\n+        move-cursor-to: \".search-input\"\n+    },\n )\n \n call-function: (\"check-color\", {"}, {"sha": "b76a44fa992e636a1532c9d550bab4419b2ffb79", "filename": "src/test/rustdoc-gui/search-no-result.goml", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-no-result.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-no-result.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-no-result.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -5,18 +5,18 @@ show-text: true\n define-function: (\n     \"check-no-result\",\n     (theme, link, link_hover),\n-    [\n+    block {\n         // Changing theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"wait-for\", \"#results\"),\n-        (\"assert\", \".search-failed.active\"),\n-        (\"assert-css\", (\"#results a\", {\"color\": |link|}, ALL)),\n-        (\"move-cursor-to\", \"#results a\"),\n-        (\"assert-css\", (\"#results a:hover\", {\"color\": |link_hover|})),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        wait-for: \"#results\"\n+        assert: \".search-failed.active\"\n+        assert-css: (\"#results a\", {\"color\": |link|}, ALL)\n+        move-cursor-to: \"#results a\"\n+        assert-css: (\"#results a:hover\", {\"color\": |link_hover|})\n         // Moving the cursor to some other place to not create issues with next function run.\n-        (\"move-cursor-to\", \".search-input\"),\n-    ]\n+        move-cursor-to: \".search-input\"\n+    },\n )\n \n call-function: (\"check-no-result\", {"}, {"sha": "d6d54ec4bee9bee2aa5be69ddb3a6d286511285d", "filename": "src/test/rustdoc-gui/search-result-color.goml", "status": "modified", "additions": 35, "deletions": 56, "changes": 91, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -3,53 +3,32 @@\n define-function: (\n     \"check-result-color\",\n     (result_kind, color, hover_color),\n-    [\n-        (\n-            \"assert-css\",\n-            (\".result-\" + |result_kind| + \" .\" + |result_kind|, {\"color\": |color|}, ALL),\n-        ),\n-        (\n-            \"assert-css\",\n-            (\n-                \".result-\" + |result_kind|,\n-                {\"color\": |entry_color|, \"background-color\": |background_color|},\n-            ),\n-        ),\n-        (\n-            \"move-cursor-to\",\n+    block {\n+        assert-css: (\".result-\" + |result_kind| + \" .\" + |result_kind|, {\"color\": |color|}, ALL)\n+        assert-css: (\n             \".result-\" + |result_kind|,\n-        ),\n-        (\n-            \"assert-css\",\n-            (\n-                \".result-\" + |result_kind| + \":hover\",\n-                {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n-            ),\n-        ),\n-        (\n-            \"assert-css\",\n-            (\".result-\" + |result_kind| + \":hover .\" + |result_kind|, {\"color\": |hover_color|}),\n-        ),\n-        (\n-            \"move-cursor-to\",\n-            \".search-input\",\n-        ),\n-        (\n-            \"focus\",\n-            \".result-\" + |result_kind|,\n-        ),\n-        (\n-            \"assert-css\",\n-            (\n-                \".result-\" + |result_kind| + \":focus\",\n-                {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n-            ),\n-        ),\n-        (\n-            \"assert-css\",\n-            (\".result-\" + |result_kind| + \":focus .\" + |result_kind|, {\"color\": |hover_color|}),\n-        ),\n-    ],\n+            {\"color\": |entry_color|, \"background-color\": |background_color|},\n+        )\n+        move-cursor-to: \".result-\" + |result_kind|\n+        assert-css: (\n+            \".result-\" + |result_kind| + \":hover\",\n+            {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n+        )\n+        assert-css: (\n+            \".result-\" + |result_kind| + \":hover .\" + |result_kind|,\n+            {\"color\": |hover_color|},\n+        )\n+        move-cursor-to: \".search-input\"\n+        focus: \".result-\" + |result_kind|\n+        assert-css: (\n+            \".result-\" + |result_kind| + \":focus\",\n+            {\"color\": |hover_entry_color|, \"background-color\": |hover_background_color|},\n+        )\n+        assert-css: (\n+            \".result-\" + |result_kind| + \":focus .\" + |result_kind|,\n+            {\"color\": |hover_color|},\n+        )\n+    },\n )\n \n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html?search=coo\"\n@@ -389,20 +368,20 @@ show-text: true\n define-function: (\n     \"check-alias\",\n     (theme, alias, grey),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"write\", (\".search-input\", \"thisisanalias\")),\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        write: (\".search-input\", \"thisisanalias\")\n         // To be SURE that the search will be run.\n-        (\"press-key\", 'Enter'),\n+        press-key: 'Enter'\n         // Waiting for the search results to appear...\n-        (\"wait-for\", \"#search-tabs\"),\n+        wait-for: \"#search-tabs\"\n         // Checking that the colors for the alias element are the ones expected.\n-        (\"assert-css\", (\".result-name > .alias\", {\"color\": |alias|})),\n-        (\"assert-css\", (\".result-name > .alias > .grey\", {\"color\": |grey|})),\n+        assert-css: (\".result-name > .alias\", {\"color\": |alias|})\n+        assert-css: (\".result-name > .alias > .grey\", {\"color\": |grey|})\n         // Leave the search results to prevent reloading with an already filled search input.\n-        (\"press-key\", \"Escape\"),\n-    ],\n+        press-key: \"Escape\"\n+    },\n )\n \n call-function: (\"check-alias\", {"}, {"sha": "43e608228d8e32d3159b0108d27b8e44f8b2be92", "filename": "src/test/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-result-display.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -42,17 +42,17 @@ show-text: true\n define-function: (\n     \"check-filter\",\n     (theme, border, filter, hover_border, hover_filter),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"wait-for\", \"#crate-search\"),\n-        (\"assert-css\", (\"#crate-search\", {\"border\": \"1px solid \" + |border|})),\n-        (\"assert-css\", (\"#crate-search-div::after\", {\"filter\": |filter|})),\n-        (\"move-cursor-to\", \"#crate-search\"),\n-        (\"assert-css\", (\"#crate-search\", {\"border\": \"1px solid \" + |hover_border|})),\n-        (\"assert-css\", (\"#crate-search-div::after\", {\"filter\": |hover_filter|})),\n-        (\"move-cursor-to\", \".search-input\"),\n-    ],\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        wait-for: \"#crate-search\"\n+        assert-css: (\"#crate-search\", {\"border\": \"1px solid \" + |border|})\n+        assert-css: (\"#crate-search-div::after\", {\"filter\": |filter|})\n+        move-cursor-to: \"#crate-search\"\n+        assert-css: (\"#crate-search\", {\"border\": \"1px solid \" + |hover_border|})\n+        assert-css: (\"#crate-search-div::after\", {\"filter\": |hover_filter|})\n+        move-cursor-to: \".search-input\"\n+    },\n )\n \n call-function: (\"check-filter\", {"}, {"sha": "36958f7004446e2dfe67145ab15e9ba871daa329", "filename": "src/test/rustdoc-gui/search-tab.goml", "status": "modified", "additions": 15, "deletions": 15, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -7,35 +7,35 @@ define-function: (\n     (theme, background, background_selected, background_hover, border_bottom,\n      border_bottom_selected, border_bottom_hover, border_top, border_top_selected,\n      border_top_hover),\n-    [\n+    block {\n         // Setting the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n \n         // These two commands are used to be sure the search will be run.\n-        (\"focus\", \".search-input\"),\n-        (\"press-key\", \"Enter\"),\n+        focus: \".search-input\"\n+        press-key: \"Enter\"\n \n-        (\"wait-for\", \"#search-tabs\"),\n-        (\"assert-css\", (\"#search-tabs > button:not(.selected)\", {\n+        wait-for: \"#search-tabs\"\n+        assert-css: (\"#search-tabs > button:not(.selected)\", {\n             \"background-color\": |background|,\n             \"border-bottom\": |border_bottom|,\n             \"border-top\": |border_top|,\n-        })),\n-        (\"assert-css\", (\"#search-tabs > button.selected\", {\n+        })\n+        assert-css: (\"#search-tabs > button.selected\", {\n             \"background-color\": |background_selected|,\n             \"border-bottom\": |border_bottom_selected|,\n             \"border-top\": |border_top_selected|,\n-        })),\n-        (\"move-cursor-to\", \"#search-tabs > button:not(.selected)\"),\n-        (\"assert-css\", (\"#search-tabs > button:not(.selected):hover\", {\n+        })\n+        move-cursor-to: \"#search-tabs > button:not(.selected)\"\n+        assert-css: (\"#search-tabs > button:not(.selected):hover\", {\n             \"background-color\": |background_hover|,\n             \"border-bottom\": |border_bottom_hover|,\n             \"border-top\": |border_top_hover|,\n-        })),\n+        })\n         // To prevent disrupting next run of this function.\n-        (\"move-cursor-to\", \".search-input\"),\n-    ],\n+        move-cursor-to: \".search-input\"\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "1d5fdb7a48fc71e42c04b99a2daf1381c2fdec21", "filename": "src/test/rustdoc-gui/sidebar-links-color.goml", "status": "modified", "additions": 39, "deletions": 39, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-links-color.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -12,80 +12,80 @@ define-function: (\n         trait_hover_background, fn, fn_hover, fn_hover_background, type, type_hover,\n         type_hover_background, keyword, keyword_hover, keyword_hover_background,\n     ),\n-    [\n-        (\"local-storage\", { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\" }),\n-        (\"reload\"),\n+    block {\n+        local-storage: { \"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\" }\n+        reload:\n         // Struct\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.struct a:not(.current)\",\n             {\"color\": |struct|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.struct a:not(.current)\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.struct a:not(.current)\"\n+        assert-css: (\n             \".sidebar .block.struct a:hover\",\n             {\"color\": |struct_hover|, \"background-color\": |struct_hover_background|},\n-        )),\n+        )\n         // Enum\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.enum a\",\n             {\"color\": |enum|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.enum a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.enum a\"\n+        assert-css: (\n             \".sidebar .block.enum a:hover\",\n             {\"color\": |enum_hover|, \"background-color\": |enum_hover_background|},\n-        )),\n+        )\n         // Union\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.union a\",\n             {\"color\": |union|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.union a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.union a\"\n+        assert-css: (\n             \".sidebar .block.union a:hover\",\n             {\"color\": |union_hover|, \"background-color\": |union_hover_background|},\n-        )),\n+        )\n         // Trait\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.trait a\",\n             {\"color\": |trait|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.trait a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.trait a\"\n+        assert-css: (\n             \".sidebar .block.trait a:hover\",\n             {\"color\": |trait_hover|, \"background-color\": |trait_hover_background|},\n-        )),\n+        )\n         // Function\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.fn a\",\n             {\"color\": |fn|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.fn a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.fn a\"\n+        assert-css: (\n             \".sidebar .block.fn a:hover\",\n             {\"color\": |fn_hover|, \"background-color\": |fn_hover_background|},\n-        )),\n+        )\n         // Type definition\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.type a\",\n             {\"color\": |type|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.type a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.type a\"\n+        assert-css: (\n             \".sidebar .block.type a:hover\",\n             {\"color\": |type_hover|, \"background-color\": |type_hover_background|},\n-        )),\n+        )\n         // Keyword\n-        (\"assert-css\", (\n+        assert-css: (\n             \".sidebar .block.keyword a\",\n             {\"color\": |keyword|, \"background-color\": \"rgba(0, 0, 0, 0)\"},\n-        )),\n-        (\"move-cursor-to\", \".sidebar .block.keyword a\"),\n-        (\"assert-css\", (\n+        )\n+        move-cursor-to: \".sidebar .block.keyword a\"\n+        assert-css: (\n             \".sidebar .block.keyword a:hover\",\n             {\"color\": |keyword_hover|, \"background-color\": |keyword_hover_background|},\n-        )),\n-    ]\n+        )\n+    }\n )\n \n call-function: ("}, {"sha": "d5f4b619629e3caada7fb31ee5f032b70f1e3e8c", "filename": "src/test/rustdoc-gui/sidebar-mobile.goml", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -58,17 +58,17 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, color, background),\n-    [\n-        (\"local-storage\", {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}),\n-        (\"reload\"),\n+    block {\n+        local-storage: {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}\n+        reload:\n \n         // Open the sidebar menu.\n-        (\"click\", \".sidebar-menu-toggle\"),\n-        (\"assert-css\", (\".sidebar\", {\n+        click: \".sidebar-menu-toggle\"\n+        assert-css: (\".sidebar\", {\n             \"background-color\": |background|,\n             \"color\": |color|,\n-        })),\n-    ],\n+        })\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "d74d9420389f04b39031ac77e993bacc83e6fb56", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 42, "deletions": 42, "changes": 84, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -35,88 +35,88 @@ define-function: (\n         theme, color, color_hover, background, background_hover, background_toggle,\n         background_toggle_hover,\n     ),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"wait-for-css\", (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})),\n-        (\"assert-css\", (\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        wait-for-css: (\"#src-sidebar-toggle\", {\"visibility\": \"visible\"})\n+        assert-css: (\n             \"#source-sidebar details[open] > .files a.selected\",\n             {\"color\": |color_hover|, \"background-color\": |background|},\n-        )),\n+        )\n \n         // Without hover or focus.\n-        (\"assert-css\", (\"#src-sidebar-toggle > button\", {\"background-color\": |background_toggle|})),\n+        assert-css: (\"#src-sidebar-toggle > button\", {\"background-color\": |background_toggle|})\n         // With focus.\n-        (\"focus\", \"#src-sidebar-toggle > button\"),\n-        (\"assert-css\", (\n+        focus: \"#src-sidebar-toggle > button\"\n+        assert-css: (\n             \"#src-sidebar-toggle > button:focus\",\n             {\"background-color\": |background_toggle_hover|},\n-        )),\n-        (\"focus\", \".search-input\"),\n+        )\n+        focus: \".search-input\"\n         // With hover.\n-        (\"move-cursor-to\", \"#src-sidebar-toggle > button\"),\n-        (\"assert-css\", (\n+        move-cursor-to: \"#src-sidebar-toggle > button\"\n+        assert-css: (\n             \"#src-sidebar-toggle > button:hover\",\n             {\"background-color\": |background_toggle_hover|},\n-        )),\n+        )\n \n         // Without hover or focus.\n-        (\"assert-css\", (\n+        assert-css: (\n             \"#source-sidebar details[open] > .files a:not(.selected)\",\n             {\"color\": |color|, \"background-color\": |background_toggle|},\n-        )),\n+        )\n         // With focus.\n-        (\"focus\", \"#source-sidebar details[open] > .files a:not(.selected)\"),\n-        (\"wait-for-css\", (\n+        focus: \"#source-sidebar details[open] > .files a:not(.selected)\"\n+        wait-for-css: (\n             \"#source-sidebar details[open] > .files a:not(.selected):focus\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n-        (\"focus\", \".search-input\"),\n+        )\n+        focus: \".search-input\"\n         // With hover.\n-        (\"move-cursor-to\", \"#source-sidebar details[open] > .files a:not(.selected)\"),\n-        (\"assert-css\", (\n+        move-cursor-to: \"#source-sidebar details[open] > .files a:not(.selected)\"\n+        assert-css: (\n             \"#source-sidebar details[open] > .files a:not(.selected):hover\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n+        )\n \n         // Without hover or focus.\n-        (\"assert-css\", (\n+        assert-css: (\n             \"#source-sidebar .dir-entry summary\",\n             {\"color\": |color|, \"background-color\": |background_toggle|},\n-        )),\n+        )\n         // With focus.\n-        (\"focus\", \"#source-sidebar .dir-entry summary\"),\n-        (\"wait-for-css\", (\n+        focus: \"#source-sidebar .dir-entry summary\"\n+        wait-for-css: (\n             \"#source-sidebar .dir-entry summary:focus\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n-        (\"focus\", \".search-input\"),\n+        )\n+        focus: \".search-input\"\n         // With hover.\n-        (\"move-cursor-to\", \"#source-sidebar .dir-entry summary\"),\n-        (\"assert-css\", (\n+        move-cursor-to: \"#source-sidebar .dir-entry summary\"\n+        assert-css: (\n             \"#source-sidebar .dir-entry summary:hover\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n+        )\n \n         // Without hover or focus.\n-        (\"assert-css\", (\n+        assert-css: (\n             \"#source-sidebar details[open] > .folders > details > summary\",\n             {\"color\": |color|, \"background-color\": |background_toggle|},\n-        )),\n+        )\n         // With focus.\n-        (\"focus\", \"#source-sidebar details[open] > .folders > details > summary\"),\n-        (\"wait-for-css\", (\n+        focus: \"#source-sidebar details[open] > .folders > details > summary\"\n+        wait-for-css: (\n             \"#source-sidebar details[open] > .folders > details > summary:focus\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n-        (\"focus\", \".search-input\"),\n+        )\n+        focus: \".search-input\"\n         // With hover.\n-        (\"move-cursor-to\", \"#source-sidebar details[open] > .folders > details > summary\"),\n-        (\"assert-css\", (\n+        move-cursor-to: \"#source-sidebar details[open] > .folders > details > summary\"\n+        assert-css: (\n             \"#source-sidebar details[open] > .folders > details > summary:hover\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n-        )),\n-    ],\n+        )\n+    },\n )\n \n call-function: (\"check-colors\", {"}, {"sha": "3ee83d6f475acaa3bea3ce5efd027ece79859149", "filename": "src/test/rustdoc-gui/sidebar-source-code.goml", "status": "modified", "additions": 27, "deletions": 27, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -7,43 +7,43 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, color, background_color),\n-    [\n-        (\"local-storage\", {\n+    block {\n+        local-storage: {\n             \"rustdoc-theme\": |theme|,\n             \"rustdoc-use-system-theme\": \"false\",\n-        }),\n-        (\"reload\"),\n+        }\n+        reload:\n         // Checking results colors.\n-        (\"assert-css\", (\".source .sidebar\", {\n-        \t\"color\": |color|,\n-        \t\"background-color\": |background_color|\n-        }, ALL)),\n-    ],\n+        assert-css: (\".source .sidebar\", {\n+            \"color\": |color|,\n+            \"background-color\": |background_color|\n+        }, ALL)\n+    },\n )\n \n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"ayu\",\n-\t\t\"color\": \"rgb(197, 197, 197)\",\n-\t\t\"background_color\": \"rgb(20, 25, 31)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"ayu\",\n+        \"color\": \"rgb(197, 197, 197)\",\n+        \"background_color\": \"rgb(20, 25, 31)\",\n+    }\n )\n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"dark\",\n-\t\t\"color\": \"rgb(221, 221, 221)\",\n-\t\t\"background_color\": \"rgb(80, 80, 80)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"dark\",\n+        \"color\": \"rgb(221, 221, 221)\",\n+        \"background_color\": \"rgb(80, 80, 80)\",\n+    }\n )\n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"light\",\n-\t\t\"color\": \"rgb(0, 0, 0)\",\n-\t\t\"background_color\": \"rgb(245, 245, 245)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"light\",\n+        \"color\": \"rgb(0, 0, 0)\",\n+        \"background_color\": \"rgb(245, 245, 245)\",\n+    }\n )\n \n // Next, desktop mode layout."}, {"sha": "9db7f59695bb2be4b6573b6e19154b5f9e1322fb", "filename": "src/test/rustdoc-gui/sidebar.goml", "status": "modified", "additions": 27, "deletions": 27, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -7,43 +7,43 @@ show-text: true\n define-function: (\n     \"check-colors\",\n     (theme, color, background_color),\n-    [\n-        (\"local-storage\", {\n+    block {\n+        local-storage: {\n             \"rustdoc-theme\": |theme|,\n             \"rustdoc-use-system-theme\": \"false\",\n-        }),\n-        (\"reload\"),\n+        }\n+        reload:\n         // Checking results colors.\n-        (\"assert-css\", (\".sidebar\", {\n-        \t\"color\": |color|,\n-        \t\"background-color\": |background_color|\n-        }, ALL)),\n-    ],\n+        assert-css: (\".sidebar\", {\n+            \"color\": |color|,\n+            \"background-color\": |background_color|\n+        }, ALL)\n+    },\n )\n \n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"ayu\",\n-\t\t\"color\": \"rgb(197, 197, 197)\",\n-\t\t\"background_color\": \"rgb(20, 25, 31)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"ayu\",\n+        \"color\": \"rgb(197, 197, 197)\",\n+        \"background_color\": \"rgb(20, 25, 31)\",\n+    }\n )\n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"dark\",\n-\t\t\"color\": \"rgb(221, 221, 221)\",\n-\t\t\"background_color\": \"rgb(80, 80, 80)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"dark\",\n+        \"color\": \"rgb(221, 221, 221)\",\n+        \"background_color\": \"rgb(80, 80, 80)\",\n+    }\n )\n call-function: (\n-\t\"check-colors\",\n-\t{\n-\t\t\"theme\": \"light\",\n-\t\t\"color\": \"rgb(0, 0, 0)\",\n-\t\t\"background_color\": \"rgb(245, 245, 245)\",\n-\t}\n+    \"check-colors\",\n+    {\n+        \"theme\": \"light\",\n+        \"color\": \"rgb(0, 0, 0)\",\n+        \"background_color\": \"rgb(245, 245, 245)\",\n+    }\n )\n \n local-storage: {\"rustdoc-theme\": \"light\"}"}, {"sha": "7c35119e6959dc4830c4e527253244bd023d651e", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 20, "deletions": 20, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -22,20 +22,20 @@ assert-attribute-false: (\".src-line-numbers > a:nth-child(7)\", {\"class\": \"line-h\n define-function: (\n     \"check-colors\",\n     (theme, color, background_color, highlight_color, highlight_background_color),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\n             \".src-line-numbers > a:not(.line-highlighted)\",\n             {\"color\": |color|, \"background-color\": |background_color|},\n             ALL,\n-        )),\n-        (\"assert-css\", (\n+        )\n+        assert-css: (\n             \".src-line-numbers > a.line-highlighted\",\n             {\"color\": |highlight_color|, \"background-color\": |highlight_background_color|},\n             ALL,\n-        )),\n-    ],\n+        )\n+    },\n )\n \n call-function: (\"check-colors\", {\n@@ -124,28 +124,28 @@ store-property: (\n define-function: (\n     \"check-sidebar-dir-entry\",\n     (x, y),\n-    [\n-        (\"assert\", \"details:first-of-type.dir-entry[open] > summary::marker\"),\n-        (\"assert-css\", (\"#source-sidebar > details:first-of-type.dir-entry\", {\"padding-left\": \"4px\"})),\n+    block {\n+        assert: \"details:first-of-type.dir-entry[open] > summary::marker\"\n+        assert-css: (\"#source-sidebar > details:first-of-type.dir-entry\", {\"padding-left\": \"4px\"})\n         // This check ensures that the summary is only one line.\n-       (\"assert-property\", (\n+        assert-property: (\n             \"#source-sidebar > details:first-of-type.dir-entry[open] > summary\",\n             {\"offsetHeight\": |link_height|}\n-        )),\n-        (\"assert-position\", (\n+        )\n+        assert-position: (\n             \"#source-sidebar > details:first-of-type.dir-entry[open] > summary\",\n             {\"x\": |x|, \"y\": |y|}\n-        )),\n-        (\"assert-property\", (\n+        )\n+        assert-property: (\n             \"#source-sidebar > details:first-of-type.dir-entry[open] > .files > a\",\n             {\"offsetHeight\": |link_height|}\n-        )),\n-        (\"assert-position\", (\n+        )\n+        assert-position: (\n             \"#source-sidebar > details:first-of-type.dir-entry[open] > .files > a\",\n             // left margin\n             {\"x\": |x| + 27, \"y\": |y| + |link_height|}\n-        )),\n-    ]\n+        )\n+    }\n )\n store-property: (\n     source_sidebar_title_height,"}, {"sha": "50ba1ba62dbfae4f6b1fa6f9ff3d0600586412d5", "filename": "src/test/rustdoc-gui/stab-badge.goml", "status": "modified", "additions": 29, "deletions": 29, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fstab-badge.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Fstab-badge.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fstab-badge.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -2,40 +2,40 @@\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n show-text: true\n define-function: (\n-\t\"check-badge\",\n-\t(theme, background, color),\n-\t[\n-        (\"local-storage\", {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"),\n-\t\t(\"assert\", (\".docblock .stab\")),\n-\t\t(\"assert\", (\".item-table .stab\")),\n-\t\t(\"assert-css\", (\".stab\", {\n-\t\t\t\"border-radius\": \"3px\",\n-\t\t\t\"color\": |color|,\n-\t\t\t\"background-color\": |background|,\n-\t\t})),\n-        (\"goto\", \"file://\" + |DOC_PATH| + \"/test_docs/fn.replaced_function.html\"),\n-\t\t(\"assert\", (\".item-info .stab\")),\n-\t\t(\"assert-css\", (\".stab\", {\n-\t\t\t\"border-radius\": \"3px\",\n-\t\t\t\"color\": |color|,\n-\t\t\t\"background-color\": |background|,\n-\t\t})),\n-\t]\n+    \"check-badge\",\n+    (theme, background, color),\n+    block {\n+        local-storage: {\"rustdoc-use-system-theme\": \"false\", \"rustdoc-theme\": |theme|}\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/index.html\"\n+        assert: \".docblock .stab\"\n+        assert: \".item-table .stab\"\n+        assert-css: (\".stab\", {\n+            \"border-radius\": \"3px\",\n+            \"color\": |color|,\n+            \"background-color\": |background|,\n+        })\n+        goto: \"file://\" + |DOC_PATH| + \"/test_docs/fn.replaced_function.html\"\n+        assert: (\".item-info .stab\")\n+        assert-css: (\".stab\", {\n+            \"border-radius\": \"3px\",\n+            \"color\": |color|,\n+            \"background-color\": |background|,\n+        })\n+    },\n )\n \n call-function: (\"check-badge\", {\n-\t\"theme\": \"ayu\",\n-\t\"color\": \"rgb(197, 197, 197)\",\n-\t\"background\": \"rgb(49, 69, 89)\",\n+    \"theme\": \"ayu\",\n+    \"color\": \"rgb(197, 197, 197)\",\n+    \"background\": \"rgb(49, 69, 89)\",\n })\n call-function: (\"check-badge\", {\n-\t\"theme\": \"dark\",\n-\t\"color\": \"rgb(221, 221, 221)\",\n-\t\"background\": \"rgb(49, 69, 89)\",\n+    \"theme\": \"dark\",\n+    \"color\": \"rgb(221, 221, 221)\",\n+    \"background\": \"rgb(49, 69, 89)\",\n })\n call-function: (\"check-badge\", {\n-\t\"theme\": \"light\",\n-\t\"color\": \"rgb(0, 0, 0)\",\n-\t\"background\": \"rgb(255, 245, 214)\",\n+    \"theme\": \"light\",\n+    \"color\": \"rgb(0, 0, 0)\",\n+    \"background\": \"rgb(255, 245, 214)\",\n })"}, {"sha": "ca393ee58917dd0a950f3e3ad0593b1fd536913d", "filename": "src/test/rustdoc-gui/target.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Ftarget.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Ftarget.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftarget.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -8,14 +8,14 @@ assert: \"#method\\.a_method:target\"\n define-function: (\n     \"check-style\",\n     (theme, background, border),\n-    [\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n-        (\"reload\"),\n-        (\"assert-css\", (\"#method\\.a_method:target\", {\n+    block {\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n+        reload:\n+        assert-css: (\"#method\\.a_method:target\", {\n             \"background-color\": |background|,\n             \"border-right\": \"3px solid \" + |border|,\n-        })),\n-    ],\n+        })\n+    },\n )\n \n call-function: (\"check-style\", {"}, {"sha": "89ce78e3aab4b6274081590cd29ab47dd1adf0c1", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -50,24 +50,24 @@ show-text: true\n define-function: (\n     \"check-color\",\n     (theme, filter),\n-    [\n+    block {\n         // Setting the theme.\n-\t(\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n+        reload:\n \n-        (\"assert-css\", (\"details.rustdoc-toggle > summary::before\", {\n+        assert-css: (\"details.rustdoc-toggle > summary::before\", {\n             \"opacity\": \"0.5\",\n             \"filter\": |filter|,\n-        }, ALL)),\n-        (\"move-cursor-to\", \"details.rustdoc-toggle summary\"),\n-        (\"assert-css\", (\"details.rustdoc-toggle > summary:hover::before\", {\n+        }, ALL)\n+        move-cursor-to: \"details.rustdoc-toggle summary\"\n+        assert-css: (\"details.rustdoc-toggle > summary:hover::before\", {\n             \"opacity\": \"1\",\n             \"filter\": |filter|,\n-        })),\n+        })\n         // moving the cursor somewhere else to not mess with next function calls.\n-        (\"move-cursor-to\", \".search-input\"),\n-    ]\n+        move-cursor-to: \".search-input\"\n+    },\n )\n \n call-function: (\"check-color\", {\"theme\": \"ayu\", \"filter\": \"invert(1)\"})"}, {"sha": "d3a672ddde6e491250e4022c1c7a1a5ee3be4bbc", "filename": "src/test/rustdoc-gui/unsafe-fn.goml", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml", "raw_url": "https://github.com/rust-lang/rust/raw/92d812de1df16e56c47219001b7c30bbf8843206/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Funsafe-fn.goml?ref=92d812de1df16e56c47219001b7c30bbf8843206", "patch": "@@ -14,13 +14,13 @@ define-function: (\n     // `theme` is the theme being tested.\n     // `color` is the expected color of the `<sup>` element.\n     (theme, color),\n-    [\n+    block {\n         // Set the theme.\n-        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        local-storage: {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}\n         // We reload the page so the local storage settings are being used.\n-        (\"reload\"),\n-        (\"assert-css\", (\".item-left sup\", {\"color\": |color|})),\n-    ],\n+        reload:\n+        assert-css: (\".item-left sup\", {\"color\": |color|})\n+    },\n )\n \n call-function: (\"sup-check\", (\"dark\", \"rgb(221, 221, 221)\"))"}]}