{"sha": "8998024aa388b1d15992133b98fadba1047e4bfe", "node_id": "C_kwDOAAsO6NoAKDg5OTgwMjRhYTM4OGIxZDE1OTkyMTMzYjk4ZmFkYmExMDQ3ZTRiZmU", "commit": {"author": {"name": "czzrr", "email": "chriz@live.dk", "date": "2022-08-19T20:14:36Z"}, "committer": {"name": "czzrr", "email": "chriz@live.dk", "date": "2022-08-21T17:13:03Z"}, "message": "Correct test-args to compiletest on Windows", "tree": {"sha": "3c5a33c9ed52827905c8f0f73a80dfda87b0ac8a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c5a33c9ed52827905c8f0f73a80dfda87b0ac8a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8998024aa388b1d15992133b98fadba1047e4bfe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8998024aa388b1d15992133b98fadba1047e4bfe", "html_url": "https://github.com/rust-lang/rust/commit/8998024aa388b1d15992133b98fadba1047e4bfe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8998024aa388b1d15992133b98fadba1047e4bfe/comments", "author": {"login": "czzrr", "id": 27164959, "node_id": "MDQ6VXNlcjI3MTY0OTU5", "avatar_url": "https://avatars.githubusercontent.com/u/27164959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/czzrr", "html_url": "https://github.com/czzrr", "followers_url": "https://api.github.com/users/czzrr/followers", "following_url": "https://api.github.com/users/czzrr/following{/other_user}", "gists_url": "https://api.github.com/users/czzrr/gists{/gist_id}", "starred_url": "https://api.github.com/users/czzrr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/czzrr/subscriptions", "organizations_url": "https://api.github.com/users/czzrr/orgs", "repos_url": "https://api.github.com/users/czzrr/repos", "events_url": "https://api.github.com/users/czzrr/events{/privacy}", "received_events_url": "https://api.github.com/users/czzrr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "czzrr", "id": 27164959, "node_id": "MDQ6VXNlcjI3MTY0OTU5", "avatar_url": "https://avatars.githubusercontent.com/u/27164959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/czzrr", "html_url": "https://github.com/czzrr", "followers_url": "https://api.github.com/users/czzrr/followers", "following_url": "https://api.github.com/users/czzrr/following{/other_user}", "gists_url": "https://api.github.com/users/czzrr/gists{/gist_id}", "starred_url": "https://api.github.com/users/czzrr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/czzrr/subscriptions", "organizations_url": "https://api.github.com/users/czzrr/orgs", "repos_url": "https://api.github.com/users/czzrr/repos", "events_url": "https://api.github.com/users/czzrr/events{/privacy}", "received_events_url": "https://api.github.com/users/czzrr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "468887ef91e46847dff57b6b234cff0fad17cb71", "url": "https://api.github.com/repos/rust-lang/rust/commits/468887ef91e46847dff57b6b234cff0fad17cb71", "html_url": "https://github.com/rust-lang/rust/commit/468887ef91e46847dff57b6b234cff0fad17cb71"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "c759d9b88e2ff02372c9f1a4ad998e319932d364", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8998024aa388b1d15992133b98fadba1047e4bfe/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8998024aa388b1d15992133b98fadba1047e4bfe/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=8998024aa388b1d15992133b98fadba1047e4bfe", "patch": "@@ -1514,7 +1514,15 @@ note: if you're sure you want to do this, please open an issue as to why. In the\n \n         test_args.append(&mut builder.config.cmd.test_args());\n \n-        cmd.args(&test_args);\n+        // On Windows, replace forward slashes in test-args by backslashes\n+        // so the correct filters are passed to libtest\n+        if cfg!(windows) {\n+            let test_args_win: Vec<String> =\n+                test_args.iter().map(|s| s.replace(\"/\", \"\\\\\")).collect();\n+            cmd.args(&test_args_win);\n+        } else {\n+            cmd.args(&test_args);\n+        }\n \n         if builder.is_verbose() {\n             cmd.arg(\"--verbose\");"}]}