{"sha": "3d33818a79143d0e82852c8b2ed68abf6b86c095", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNkMzM4MThhNzkxNDNkMGU4Mjg1MmM4YjJlZDY4YWJmNmI4NmMwOTU=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-04-06T15:42:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-06T15:42:35Z"}, "message": "Rollup merge of #83920 - ortem:fix-hashmap-lldb-pretty-printer-1.52, r=pnkfelix\n\nFix HashMap/HashSet LLDB pretty-printer after hashbrown 0.11.0\n\nThe pretty-printer was broken in https://github.com/rust-lang/rust/pull/77566 after updating hashbrown to 0.11.0.\nNote that the corresponding GDB pretty-printer was updated properly.\n\nFixes #83891", "tree": {"sha": "8b241bc0ca8518cb00a6d4e465275c5d9cdf8e84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b241bc0ca8518cb00a6d4e465275c5d9cdf8e84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d33818a79143d0e82852c8b2ed68abf6b86c095", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgbIFsCRBK7hj4Ov3rIwAAdHIIACfePUhRVHmYypWYGGol4pdf\nT0DHIk6FL2xNI7bt/CtR1gTze5hm9S080GYB3E5s0LBeNCOCzeT+3OdZQpdWlEZ8\n33aPwvtZjabcBiY/QwomRBW45x+tWDD/zHJZ8zXDYgYCX+r0l5iu85aXOGn6siE4\naKhMdMRjyooeHNKMraDyEo5vLotlLk4OKXLYigBWG6aRAcQ+LC0jKbFfc82Btbj2\nDU4psbbyBSlGzvAor+Wd5zbzq2PZ2AclPfJPybbnE4KPnV4Pe8CY77YbtxDxWb2L\nyegc+BiI45atxSLZabOVScXrlG2hBzoCefK2BJv29VL7KjmuFslTe98SM0PFSiA=\n=JlJo\n-----END PGP SIGNATURE-----\n", "payload": "tree 8b241bc0ca8518cb00a6d4e465275c5d9cdf8e84\nparent 2f57dc857553b881a1e65a1b2341d6f7055cb3d9\nparent 3d3a5ca79fa6bbc83ec73a90c9a4337630ff76b2\nauthor Dylan DPC <dylan.dpc@gmail.com> 1617723755 +0200\ncommitter GitHub <noreply@github.com> 1617723755 +0200\n\nRollup merge of #83920 - ortem:fix-hashmap-lldb-pretty-printer-1.52, r=pnkfelix\n\nFix HashMap/HashSet LLDB pretty-printer after hashbrown 0.11.0\n\nThe pretty-printer was broken in https://github.com/rust-lang/rust/pull/77566 after updating hashbrown to 0.11.0.\nNote that the corresponding GDB pretty-printer was updated properly.\n\nFixes #83891\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d33818a79143d0e82852c8b2ed68abf6b86c095", "html_url": "https://github.com/rust-lang/rust/commit/3d33818a79143d0e82852c8b2ed68abf6b86c095", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d33818a79143d0e82852c8b2ed68abf6b86c095/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f57dc857553b881a1e65a1b2341d6f7055cb3d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f57dc857553b881a1e65a1b2341d6f7055cb3d9", "html_url": "https://github.com/rust-lang/rust/commit/2f57dc857553b881a1e65a1b2341d6f7055cb3d9"}, {"sha": "3d3a5ca79fa6bbc83ec73a90c9a4337630ff76b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d3a5ca79fa6bbc83ec73a90c9a4337630ff76b2", "html_url": "https://github.com/rust-lang/rust/commit/3d3a5ca79fa6bbc83ec73a90c9a4337630ff76b2"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "86dcc335e3cbfdcf2daab64d64fe5810b22f1cbd", "filename": "src/etc/lldb_providers.py", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/3d33818a79143d0e82852c8b2ed68abf6b86c095/src%2Fetc%2Flldb_providers.py", "raw_url": "https://github.com/rust-lang/rust/raw/3d33818a79143d0e82852c8b2ed68abf6b86c095/src%2Fetc%2Flldb_providers.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Flldb_providers.py?ref=3d33818a79143d0e82852c8b2ed68abf6b86c095", "patch": "@@ -527,20 +527,22 @@ def get_child_at_index(self, index):\n     def update(self):\n         # type: () -> None\n         table = self.table()\n-        capacity = table.GetChildMemberWithName(\"bucket_mask\").GetValueAsUnsigned() + 1\n-        ctrl = table.GetChildMemberWithName(\"ctrl\").GetChildAtIndex(0)\n+        inner_table = table.GetChildMemberWithName(\"table\")\n \n-        self.size = table.GetChildMemberWithName(\"items\").GetValueAsUnsigned()\n+        capacity = inner_table.GetChildMemberWithName(\"bucket_mask\").GetValueAsUnsigned() + 1\n+        ctrl = inner_table.GetChildMemberWithName(\"ctrl\").GetChildAtIndex(0)\n+\n+        self.size = inner_table.GetChildMemberWithName(\"items\").GetValueAsUnsigned()\n         self.pair_type = table.type.template_args[0]\n         if self.pair_type.IsTypedefType():\n             self.pair_type = self.pair_type.GetTypedefedType()\n         self.pair_type_size = self.pair_type.GetByteSize()\n \n-        self.new_layout = not table.GetChildMemberWithName(\"data\").IsValid()\n+        self.new_layout = not inner_table.GetChildMemberWithName(\"data\").IsValid()\n         if self.new_layout:\n             self.data_ptr = ctrl.Cast(self.pair_type.GetPointerType())\n         else:\n-            self.data_ptr = table.GetChildMemberWithName(\"data\").GetChildAtIndex(0)\n+            self.data_ptr = inner_table.GetChildMemberWithName(\"data\").GetChildAtIndex(0)\n \n         u8_type = self.valobj.GetTarget().GetBasicType(eBasicTypeUnsignedChar)\n         u8_type_size = self.valobj.GetTarget().GetBasicType(eBasicTypeUnsignedChar).GetByteSize()\n@@ -563,7 +565,7 @@ def table(self):\n             # HashSet wraps either std HashMap or hashbrown::HashSet, which both\n             # wrap hashbrown::HashMap, so either way we \"unwrap\" twice.\n             hashbrown_hashmap = self.valobj.GetChildAtIndex(0).GetChildAtIndex(0)\n-        return hashbrown_hashmap.GetChildMemberWithName(\"table\").GetChildMemberWithName(\"table\")\n+        return hashbrown_hashmap.GetChildMemberWithName(\"table\")\n \n     def has_children(self):\n         # type: () -> bool"}]}