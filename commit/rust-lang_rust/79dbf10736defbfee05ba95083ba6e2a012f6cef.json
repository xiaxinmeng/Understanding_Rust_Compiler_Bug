{"sha": "79dbf10736defbfee05ba95083ba6e2a012f6cef", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5ZGJmMTA3MzZkZWZiZmVlMDViYTk1MDgzYmE2ZTJhMDEyZjZjZWY=", "commit": {"author": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2021-02-05T16:23:04Z"}, "committer": {"name": "flip1995", "email": "philipp.krones@embecosm.com", "date": "2021-02-05T16:23:04Z"}, "message": "Use absolute path to Rust repo in ra_setup\n\nThis will convert the path to the Rust repo to an absolute path. This is\nimportant for the clippy_lints/Cargo.toml file. Otherwise if a relative\npath is passed, rst-analyzer won't find the Rust repo, because it starts\nthe relative path search from the clippy_lints dir, not the\nrust-clippy dir where the ra_setup command was run from.", "tree": {"sha": "d08a36cdbeaa3c57f53c951e9b91afd4a9650484", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d08a36cdbeaa3c57f53c951e9b91afd4a9650484"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79dbf10736defbfee05ba95083ba6e2a012f6cef", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEij1UXJ/PQTcb99vTHKDfKvWdaKUFAmAdcjYACgkQHKDfKvWd\naKWEpxAA1ywTZEinxJhD7lDKRBpfI5hQTbuIR7J5E2q5HYcO3XCUPRWKn212Ej/g\nDYJL3R5oyWF9p6ozMD+IZgeVfPhjHIjuekjfgDalYW/XDJ+qbarGKHQxYnjtBz6g\nf49sn5inbOVCFUl5h1RqUQMvsnYokHFdNGsJDIjmteaGS9j0j0CMvVBTP3lOr7tj\n/LDICx7ZmjqCUGYWCxYEI9nSly5djkGWrQajoPK22fL7TItpjBC/ODlKZhKcwRqI\nsm02VR1ONKksOPq2uxUPYEOe3+SQHTJcnTXeIdlQVpco3DoX7CT3VgjYQga1u2nh\n8+/OmssUOjHgurnjJ86UTg0qahvkZ1OF2/Euf0GHic5iP20F1BhtjXT0Li/tm1FY\nOOIyAXN7MiP4svCv2t1CmSOivD2cP04dAJSphS6td/kL1TGqeHlStyxdBm5L6f3u\nYcmgK4m5Op/v72GuqUC836sGdnialjGJwfNNpVzJ4o0A/6bSSB83V0RwTOfuO/hz\nlGbdNVCv7Rhe4gWaBaCM5uC0nYNBCSrshW8R+YxFhfQDPq6K6RNX4ggOyJrcHboS\nKLWZrwhQTjt7sSQWlWRH6aq1y9s5Tm3hePB3r9fhIwr7UeEZsPp8nrld+/FbU0Jd\nlHP3/pnV7BtkVuMh3BOa1eci0284M4sXRV1hhrfs5+bjMTP/BcI=\n=WN/V\n-----END PGP SIGNATURE-----", "payload": "tree d08a36cdbeaa3c57f53c951e9b91afd4a9650484\nparent 357c6a7e2739da8c8d0a68a5e9e0867983af7cbe\nauthor flip1995 <philipp.krones@embecosm.com> 1612542184 +0100\ncommitter flip1995 <philipp.krones@embecosm.com> 1612542184 +0100\n\nUse absolute path to Rust repo in ra_setup\n\nThis will convert the path to the Rust repo to an absolute path. This is\nimportant for the clippy_lints/Cargo.toml file. Otherwise if a relative\npath is passed, rst-analyzer won't find the Rust repo, because it starts\nthe relative path search from the clippy_lints dir, not the\nrust-clippy dir where the ra_setup command was run from.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79dbf10736defbfee05ba95083ba6e2a012f6cef", "html_url": "https://github.com/rust-lang/rust/commit/79dbf10736defbfee05ba95083ba6e2a012f6cef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79dbf10736defbfee05ba95083ba6e2a012f6cef/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "357c6a7e2739da8c8d0a68a5e9e0867983af7cbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/357c6a7e2739da8c8d0a68a5e9e0867983af7cbe", "html_url": "https://github.com/rust-lang/rust/commit/357c6a7e2739da8c8d0a68a5e9e0867983af7cbe"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "d0e2193ddc5e5c917a58694f9d6a10526294a25c", "filename": "clippy_dev/src/ra_setup.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79dbf10736defbfee05ba95083ba6e2a012f6cef/clippy_dev%2Fsrc%2Fra_setup.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79dbf10736defbfee05ba95083ba6e2a012f6cef/clippy_dev%2Fsrc%2Fra_setup.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fra_setup.rs?ref=79dbf10736defbfee05ba95083ba6e2a012f6cef", "patch": "@@ -13,7 +13,9 @@ use std::path::{Path, PathBuf};\n /// Panics if `rustc_path` does not lead to a rustc repo or the files could not be read\n pub fn run(rustc_path: Option<&str>) {\n     // we can unwrap here because the arg is required by clap\n-    let rustc_path = PathBuf::from(rustc_path.unwrap());\n+    let rustc_path = PathBuf::from(rustc_path.unwrap())\n+        .canonicalize()\n+        .expect(\"failed to get the absolute repo path\");\n     assert!(rustc_path.is_dir(), \"path is not a directory\");\n     let rustc_source_basedir = rustc_path.join(\"compiler\");\n     assert!("}]}