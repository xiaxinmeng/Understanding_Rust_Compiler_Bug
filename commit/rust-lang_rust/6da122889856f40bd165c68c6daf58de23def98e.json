{"sha": "6da122889856f40bd165c68c6daf58de23def98e", "node_id": "C_kwDOAAsO6NoAKDZkYTEyMjg4OTg1NmY0MGJkMTY1YzY4YzZkYWY1OGRlMjNkZWY5OGU", "commit": {"author": {"name": "Luna Razzaghipour", "email": "aramisnoah@gmail.com", "date": "2022-03-07T09:16:03Z"}, "committer": {"name": "Luna Razzaghipour", "email": "aramisnoah@gmail.com", "date": "2022-03-07T09:16:03Z"}, "message": "Emit more detailed highlighting for `%`, `>>`, `<<`", "tree": {"sha": "3f236a3a321d923b2965faf0890bcfc41be6646c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f236a3a321d923b2965faf0890bcfc41be6646c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6da122889856f40bd165c68c6daf58de23def98e", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE/eTS1Yn+tLYoQ5x7GjqcSlzbEIsFAmIlzZIACgkQGjqcSlzb\nEIsiTA//aBeU+WiEoU79MpyX83S2CUGU8QruYoxs2VgBaR4ktjuBCHL3/olZAJo3\n/VmEKibGieVBbVpT+1qRCt9E7p66awUMLUdjpqC/6pYlUnR1Kbzy6vqufEQ7sTJD\npSQT8cAJFYU7ozwF6JhO47nSy7jwSmRuaaCbue+CyTOnGTqWOab6Sd5uj2XQIf1/\n1ymwC83A0Wizzq0smK0jUpJz2XT3/4jI/awWabS3oJJEeKdYcwCwTbadG4A3Ah2Q\ny0XItzy7xlmctLxyDjPKfVTvOVghxTHaYHxEU3QgO9oKfrys1dBVWdROzTUJqVKH\nAET1NGAaWLoC4rtzCaHoDWAzKvF6V5IruWbHbDK1VWyldV7qoK3p8+5flwzfIeKy\nKZdsYM3qKiVUZRcgk5X3CR7T3QUsk4PRyMep/i2+6WnVXbhM5MEhcFAJFkt64ADe\nLowqpsUqU4Gyv8aB4QtIeYuSsrei0+6w5cejPViql5IeeWa+9BWnGyN/jSy8cv5H\naqptZYHjAtZY2kgHlmvshOeNYepZPdmlZtz0qFAA4BIBoF4I5gWX60gMp+ESMC8v\nvKcSfY3suqUMsnzLfci0GdGfb7j/+fINgQZtfOJEQX77VqH+KzF/IIYPQMfmPBCF\nt9kHAKUEpnobB7ZB61UszJ5ycq1dhncSD2+fWc9ApUwmoJuP26U=\n=MNE/\n-----END PGP SIGNATURE-----", "payload": "tree 3f236a3a321d923b2965faf0890bcfc41be6646c\nparent 5fae65dd28b450a437ebc800a410164c3af1d516\nauthor Luna Razzaghipour <aramisnoah@gmail.com> 1646644563 +1100\ncommitter Luna Razzaghipour <aramisnoah@gmail.com> 1646644563 +1100\n\nEmit more detailed highlighting for `%`, `>>`, `<<`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6da122889856f40bd165c68c6daf58de23def98e", "html_url": "https://github.com/rust-lang/rust/commit/6da122889856f40bd165c68c6daf58de23def98e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6da122889856f40bd165c68c6daf58de23def98e/comments", "author": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lunacookies", "id": 31783266, "node_id": "MDQ6VXNlcjMxNzgzMjY2", "avatar_url": "https://avatars.githubusercontent.com/u/31783266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lunacookies", "html_url": "https://github.com/lunacookies", "followers_url": "https://api.github.com/users/lunacookies/followers", "following_url": "https://api.github.com/users/lunacookies/following{/other_user}", "gists_url": "https://api.github.com/users/lunacookies/gists{/gist_id}", "starred_url": "https://api.github.com/users/lunacookies/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lunacookies/subscriptions", "organizations_url": "https://api.github.com/users/lunacookies/orgs", "repos_url": "https://api.github.com/users/lunacookies/repos", "events_url": "https://api.github.com/users/lunacookies/events{/privacy}", "received_events_url": "https://api.github.com/users/lunacookies/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fae65dd28b450a437ebc800a410164c3af1d516", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fae65dd28b450a437ebc800a410164c3af1d516", "html_url": "https://github.com/rust-lang/rust/commit/5fae65dd28b450a437ebc800a410164c3af1d516"}], "stats": {"total": 89, "additions": 85, "deletions": 4}, "files": [{"sha": "eeec8dcba8c42a274ed0f2540f0f6832a4850d41", "filename": "crates/ide/src/syntax_highlighting/highlight.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Fhighlight.rs?ref=6da122889856f40bd165c68c6daf58de23def98e", "patch": "@@ -123,12 +123,12 @@ fn punctuation(sema: &Semantics<RootDatabase>, token: SyntaxToken, kind: SyntaxK\n             }\n             .into()\n         }\n-        (T![+] | T![-] | T![*] | T![/], BIN_EXPR) => HlOperator::Arithmetic.into(),\n-        (T![+=] | T![-=] | T![*=] | T![/=], BIN_EXPR) => {\n+        (T![+] | T![-] | T![*] | T![/] | T![%], BIN_EXPR) => HlOperator::Arithmetic.into(),\n+        (T![+=] | T![-=] | T![*=] | T![/=] | T![%=], BIN_EXPR) => {\n             Highlight::from(HlOperator::Arithmetic) | HlMod::Mutable\n         }\n-        (T![|] | T![&] | T![!] | T![^], BIN_EXPR) => HlOperator::Bitwise.into(),\n-        (T![|=] | T![&=] | T![^=], BIN_EXPR) => {\n+        (T![|] | T![&] | T![!] | T![^] | T![>>] | T![<<], BIN_EXPR) => HlOperator::Bitwise.into(),\n+        (T![|=] | T![&=] | T![^=] | T![>>=] | T![<<=], BIN_EXPR) => {\n             Highlight::from(HlOperator::Bitwise) | HlMod::Mutable\n         }\n         (T![&&] | T![||], BIN_EXPR) => HlOperator::Logical.into(),"}, {"sha": "46220993e6864ba4dcdac110f0bae20ca6c28c0c", "filename": "crates/ide/src/syntax_highlighting/test_data/highlight_operators.html", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/rust-lang/rust/blob/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html", "raw_url": "https://github.com/rust-lang/rust/raw/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlight_operators.html?ref=6da122889856f40bd165c68c6daf58de23def98e", "patch": "@@ -0,0 +1,57 @@\n+\n+<style>\n+body                { margin: 0; }\n+pre                 { color: #DCDCCC; background: #3F3F3F; font-size: 22px; padding: 0.4em; }\n+\n+.lifetime           { color: #DFAF8F; font-style: italic; }\n+.label              { color: #DFAF8F; font-style: italic; }\n+.comment            { color: #7F9F7F; }\n+.documentation      { color: #629755; }\n+.intra_doc_link     { font-style: italic; }\n+.injected           { opacity: 0.65 ; }\n+.struct, .enum      { color: #7CB8BB; }\n+.enum_variant       { color: #BDE0F3; }\n+.string_literal     { color: #CC9393; }\n+.field              { color: #94BFF3; }\n+.function           { color: #93E0E3; }\n+.function.unsafe    { color: #BC8383; }\n+.trait.unsafe       { color: #BC8383; }\n+.operator.unsafe    { color: #BC8383; }\n+.mutable.unsafe     { color: #BC8383; text-decoration: underline; }\n+.keyword.unsafe     { color: #BC8383; font-weight: bold; }\n+.parameter          { color: #94BFF3; }\n+.text               { color: #DCDCCC; }\n+.type               { color: #7CB8BB; }\n+.builtin_type       { color: #8CD0D3; }\n+.type_param         { color: #DFAF8F; }\n+.attribute          { color: #94BFF3; }\n+.numeric_literal    { color: #BFEBBF; }\n+.bool_literal       { color: #BFE6EB; }\n+.macro              { color: #94BFF3; }\n+.derive             { color: #94BFF3; font-style: italic; }\n+.module             { color: #AFD8AF; }\n+.value_param        { color: #DCDCCC; }\n+.variable           { color: #DCDCCC; }\n+.format_specifier   { color: #CC696B; }\n+.mutable            { text-decoration: underline; }\n+.escape_sequence    { color: #94BFF3; }\n+.keyword            { color: #F0DFAF; font-weight: bold; }\n+.control            { font-style: italic; }\n+.reference          { font-style: italic; font-weight: bold; }\n+\n+.unresolved_reference { color: #FC5555; text-decoration: wavy underline; }\n+</style>\n+<pre><code><span class=\"keyword\">fn</span> <span class=\"function declaration\">main</span><span class=\"parenthesis\">(</span><span class=\"parenthesis\">)</span> <span class=\"brace\">{</span>\n+    <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">+</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">-</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">*</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">/</span> <span class=\"numeric_literal\">1</span> <span class=\"arithmetic\">%</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">|</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&</span> <span class=\"numeric_literal\">1</span> <span class=\"logical\">!</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">^</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&gt;&gt;</span> <span class=\"numeric_literal\">1</span> <span class=\"bitwise\">&lt;&lt;</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"keyword\">let</span> <span class=\"keyword\">mut</span> <span class=\"variable declaration mutable\">a</span> <span class=\"operator\">=</span> <span class=\"numeric_literal\">0</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">+=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">-=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">*=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">/=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"arithmetic mutable\">%=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">|=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">^=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&gt;&gt;=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+    <span class=\"variable mutable\">a</span> <span class=\"bitwise mutable\">&lt;&lt;=</span> <span class=\"numeric_literal\">1</span><span class=\"semicolon\">;</span>\n+<span class=\"brace\">}</span></code></pre>\n\\ No newline at end of file"}, {"sha": "efd03c28237c10779fed6c71bdfc9bcd45ef829f", "filename": "crates/ide/src/syntax_highlighting/tests.rs", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6da122889856f40bd165c68c6daf58de23def98e/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs?ref=6da122889856f40bd165c68c6daf58de23def98e", "patch": "@@ -841,6 +841,30 @@ fn foo() {\n     );\n }\n \n+#[test]\n+fn test_operators() {\n+    check_highlighting(\n+        r##\"\n+fn main() {\n+    1 + 1 - 1 * 1 / 1 % 1 | 1 & 1 ! 1 ^ 1 >> 1 << 1;\n+    let mut a = 0;\n+    a += 1;\n+    a -= 1;\n+    a *= 1;\n+    a /= 1;\n+    a %= 1;\n+    a |= 1;\n+    a &= 1;\n+    a ^= 1;\n+    a >>= 1;\n+    a <<= 1;\n+}\n+\"##,\n+        expect_file![\"./test_data/highlight_operators.html\"],\n+        false,\n+    );\n+}\n+\n #[test]\n fn test_rainbow_highlighting() {\n     check_highlighting("}]}