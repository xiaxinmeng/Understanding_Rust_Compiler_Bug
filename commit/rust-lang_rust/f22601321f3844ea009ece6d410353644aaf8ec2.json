{"sha": "f22601321f3844ea009ece6d410353644aaf8ec2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYyMjYwMTMyMWYzODQ0ZWEwMDllY2U2ZDQxMDM1MzY0NGFhZjhlYzI=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-09-30T00:33:14Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-09-30T00:34:49Z"}, "message": "rustc: Fix call signature for call_c_stack", "tree": {"sha": "f3849536a67c6405e80bdef08e96599615321c56", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3849536a67c6405e80bdef08e96599615321c56"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f22601321f3844ea009ece6d410353644aaf8ec2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f22601321f3844ea009ece6d410353644aaf8ec2", "html_url": "https://github.com/rust-lang/rust/commit/f22601321f3844ea009ece6d410353644aaf8ec2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f22601321f3844ea009ece6d410353644aaf8ec2/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e31849fb7920cdd3a46758bb8c6fbd61cde22988", "url": "https://api.github.com/repos/rust-lang/rust/commits/e31849fb7920cdd3a46758bb8c6fbd61cde22988", "html_url": "https://github.com/rust-lang/rust/commit/e31849fb7920cdd3a46758bb8c6fbd61cde22988"}], "stats": {"total": 25, "additions": 7, "deletions": 18}, "files": [{"sha": "1e80df72631e2bb5f2c897d3a6f748778e60dab4", "filename": "src/comp/back/upcall.rs", "status": "modified", "additions": 7, "deletions": 18, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/f22601321f3844ea009ece6d410353644aaf8ec2/src%2Fcomp%2Fback%2Fupcall.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f22601321f3844ea009ece6d410353644aaf8ec2/src%2Fcomp%2Fback%2Fupcall.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fback%2Fupcall.rs?ref=f22601321f3844ea009ece6d410353644aaf8ec2", "patch": "@@ -2,22 +2,10 @@\n import std::str;\n import middle::trans;\n import trans::decl_cdecl_fn;\n-import middle::trans_common::T_f32;\n-import middle::trans_common::T_f64;\n-import middle::trans_common::T_fn;\n-import middle::trans_common::T_bool;\n-import middle::trans_common::T_i1;\n-import middle::trans_common::T_i8;\n-import middle::trans_common::T_i32;\n-import middle::trans_common::T_int;\n-import middle::trans_common::T_vec;\n-import middle::trans_common::T_nil;\n-import middle::trans_common::T_opaque_chan_ptr;\n-import middle::trans_common::T_opaque_vec;\n-import middle::trans_common::T_opaque_port_ptr;\n-import middle::trans_common::T_ptr;\n-import middle::trans_common::T_size_t;\n-import middle::trans_common::T_void;\n+import middle::trans_common::{T_f32, T_f64, T_fn, T_bool, T_i1, T_i8, T_i32,\n+                              T_int, T_vec, T_nil, T_opaque_chan_ptr,\n+                              T_opaque_vec, T_opaque_port_ptr, T_ptr,\n+                              T_size_t, T_void};\n import lib::llvm::type_names;\n import lib::llvm::llvm::ModuleRef;\n import lib::llvm::llvm::ValueRef;\n@@ -94,8 +82,9 @@ fn declare_upcalls(_tn: type_names, tydesc_type: TypeRef,\n                 T_ptr(T_i8())),\n           dynastack_free: d(\"dynastack_free\", [T_ptr(T_i8())], T_void()),\n           alloc_c_stack: dr(\"alloc_c_stack\", [T_size_t()], T_ptr(T_i8())),\n-          call_c_stack: dr(\"call_c_stack\", [T_ptr(T_i8()), T_ptr(T_i8())],\n-                           T_void()),\n+          call_c_stack: dr(\"call_c_stack\",\n+                           [T_ptr(T_fn([], T_void())), T_ptr(T_i8())],\n+                           T_int()),\n           rust_personality: dr(\"rust_personality\", [], T_i32())\n          };\n }"}]}