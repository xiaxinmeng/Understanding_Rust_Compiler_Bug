{"sha": "36dbb07dafe59c4d1491c2fbff6971d653f2ff77", "node_id": "C_kwDOAAsO6NoAKDM2ZGJiMDdkYWZlNTljNGQxNDkxYzJmYmZmNjk3MWQ2NTNmMmZmNzc", "commit": {"author": {"name": "Markus Reiter", "email": "me@reitermark.us", "date": "2022-10-12T11:12:27Z"}, "committer": {"name": "Markus Reiter", "email": "me@reitermark.us", "date": "2022-10-12T11:46:20Z"}, "message": "Update docs for `CStr::from_ptr`.", "tree": {"sha": "06b1cd1a34f571bf4a34c99f9142cf405633d1e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06b1cd1a34f571bf4a34c99f9142cf405633d1e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36dbb07dafe59c4d1491c2fbff6971d653f2ff77", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJFBAABCAAvFiEEbU1eLXPTwjnhHZwHJFKTtRcCZVsFAmNGqQwRHG1lQHJlaXRl\ncm1hcmsudXMACgkQJFKTtRcCZVsA2BAAzR9voGf82oF/bV7QxKoOVZd4E5TdH8lV\nWbAzFedGy+EMdChO8lNhWW+cUT/n2Swrp3cR7xFRWiowxxtfWfNYwg8+TLnSqqxF\nJJhACJo5aCF1wBfEaBunvACZO+UaBhGtvItOSDiT8kj/+9Bk1xvrGV6b1XagQ2FG\n+1qIZe4P4XZho61uor2sjcIpCrJt8bXYyvpHlw1PPdPDFwWVoSIKSTK5D0GM/pdC\nP+uQJYfDHp8Uso0rGKlr/vzXlckRQ0ROpr+W2rEuyfi4v40lXJgSNINOX+C7BhnV\n/WxNVn36rA73AGbE3geHZ1NnMcT1BubjlD2EM+K34h0lfyI01oxe3oALOPDihc4p\nuLof441Je/Xw+0G2xuYFykUDL2YyWDxUaFhfAsBZ6oYxovUDffK4ax/oQWoMKxwT\njYsMmYt7tmLAXqrAYdZPY5CQ1uUiZ/cNJzkr8imF98VPMaenBBObfhQJc/zYcy7q\njW9vjz69Q+YJrh44fci0dTn/uz6sXy+0/u7xA1PU+f99Ga5R5QRBgczJtdtKFAdM\ncNtT/0m4twVB3IvDO7LgTCwtmXMe3gowjpetEjylz6nm79UQCkxDivXts4cgUgz2\nq/EaUM1QW/p5V2/eMgKu5axUCvpbFSe/LAfeqaiX1hdZ/2CXnrCHmfGuoFvWxVR/\nyotJZeUmtlI=\n=wt1H\n-----END PGP SIGNATURE-----", "payload": "tree 06b1cd1a34f571bf4a34c99f9142cf405633d1e8\nparent 328f81713cc80861fb79c629e4887de1a8b7bf05\nauthor Markus Reiter <me@reitermark.us> 1665573147 +0200\ncommitter Markus Reiter <me@reitermark.us> 1665575180 +0200\n\nUpdate docs for `CStr::from_ptr`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36dbb07dafe59c4d1491c2fbff6971d653f2ff77", "html_url": "https://github.com/rust-lang/rust/commit/36dbb07dafe59c4d1491c2fbff6971d653f2ff77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36dbb07dafe59c4d1491c2fbff6971d653f2ff77/comments", "author": {"login": "reitermarkus", "id": 1309829, "node_id": "MDQ6VXNlcjEzMDk4Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1309829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reitermarkus", "html_url": "https://github.com/reitermarkus", "followers_url": "https://api.github.com/users/reitermarkus/followers", "following_url": "https://api.github.com/users/reitermarkus/following{/other_user}", "gists_url": "https://api.github.com/users/reitermarkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/reitermarkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reitermarkus/subscriptions", "organizations_url": "https://api.github.com/users/reitermarkus/orgs", "repos_url": "https://api.github.com/users/reitermarkus/repos", "events_url": "https://api.github.com/users/reitermarkus/events{/privacy}", "received_events_url": "https://api.github.com/users/reitermarkus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "reitermarkus", "id": 1309829, "node_id": "MDQ6VXNlcjEzMDk4Mjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1309829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reitermarkus", "html_url": "https://github.com/reitermarkus", "followers_url": "https://api.github.com/users/reitermarkus/followers", "following_url": "https://api.github.com/users/reitermarkus/following{/other_user}", "gists_url": "https://api.github.com/users/reitermarkus/gists{/gist_id}", "starred_url": "https://api.github.com/users/reitermarkus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reitermarkus/subscriptions", "organizations_url": "https://api.github.com/users/reitermarkus/orgs", "repos_url": "https://api.github.com/users/reitermarkus/repos", "events_url": "https://api.github.com/users/reitermarkus/events{/privacy}", "received_events_url": "https://api.github.com/users/reitermarkus/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "328f81713cc80861fb79c629e4887de1a8b7bf05", "url": "https://api.github.com/repos/rust-lang/rust/commits/328f81713cc80861fb79c629e4887de1a8b7bf05", "html_url": "https://github.com/rust-lang/rust/commit/328f81713cc80861fb79c629e4887de1a8b7bf05"}], "stats": {"total": 17, "additions": 13, "deletions": 4}, "files": [{"sha": "9f7c960d88feb6463d69161eb1d2794b72197dbb", "filename": "library/core/src/ffi/c_str.rs", "status": "modified", "additions": 13, "deletions": 4, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/36dbb07dafe59c4d1491c2fbff6971d653f2ff77/library%2Fcore%2Fsrc%2Fffi%2Fc_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36dbb07dafe59c4d1491c2fbff6971d653f2ff77/library%2Fcore%2Fsrc%2Fffi%2Fc_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fffi%2Fc_str.rs?ref=36dbb07dafe59c4d1491c2fbff6971d653f2ff77", "patch": "@@ -221,9 +221,7 @@ impl CStr {\n     /// # Examples\n     ///\n     /// ```ignore (extern-declaration)\n-    /// # fn main() {\n-    /// use std::ffi::CStr;\n-    /// use std::os::raw::c_char;\n+    /// use std::ffi::{c_char, CStr};\n     ///\n     /// extern \"C\" {\n     ///     fn my_string() -> *const c_char;\n@@ -233,7 +231,18 @@ impl CStr {\n     ///     let slice = CStr::from_ptr(my_string());\n     ///     println!(\"string returned: {}\", slice.to_str().unwrap());\n     /// }\n-    /// # }\n+    /// ```\n+    ///\n+    /// ```\n+    /// #![feature(const_cstr_methods)]\n+    ///\n+    /// use std::ffi::{c_char, CStr};\n+    ///\n+    /// const HELLO_PTR: *const c_char = {\n+    ///     const BYTES: &[u8] = b\"Hello, world!\\0\";\n+    ///     BYTES.as_ptr().cast()\n+    /// };\n+    /// const HELLO: &CStr = unsafe { CStr::from_ptr(HELLO_PTR) };\n     /// ```\n     ///\n     /// [valid]: core::ptr#safety"}]}