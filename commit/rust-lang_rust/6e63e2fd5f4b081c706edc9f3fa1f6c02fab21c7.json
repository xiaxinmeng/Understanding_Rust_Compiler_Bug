{"sha": "6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlNjNlMmZkNWY0YjA4MWM3MDZlZGM5ZjNmYTFmNmMwMmZhYjIxYzc=", "commit": {"author": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2012-06-15T22:30:57Z"}, "committer": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2012-06-15T22:31:19Z"}, "message": "Fix copying of fixed length vectors. Closes #2630.", "tree": {"sha": "00ec4d795b3fcaee12b6ec6a1f42c3c4646edf8a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00ec4d795b3fcaee12b6ec6a1f42c3c4646edf8a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "html_url": "https://github.com/rust-lang/rust/commit/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7/comments", "author": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a56902304d5f1291eca67845fddc906950c53cdc", "url": "https://api.github.com/repos/rust-lang/rust/commits/a56902304d5f1291eca67845fddc906950c53cdc", "html_url": "https://github.com/rust-lang/rust/commit/a56902304d5f1291eca67845fddc906950c53cdc"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "69280657a0d00d12cd83ac2215d2c023a2764a15", "filename": "src/rustc/middle/trans/base.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "patch": "@@ -1404,8 +1404,7 @@ fn copy_val_no_check(bcx: block, action: copy_action, dst: ValueRef,\n         ret bcx;\n     }\n     if ty::type_is_nil(t) || ty::type_is_bot(t) { ret bcx; }\n-    if ty::type_is_boxed(t) || ty::type_is_vec(t) ||\n-       ty::type_is_unique_box(t) {\n+    if ty::type_is_boxed(t) || ty::type_is_unique(t) {\n         if action == DROP_EXISTING { bcx = drop_ty(bcx, dst, t); }\n         Store(bcx, src, dst);\n         ret take_ty(bcx, dst, t);"}, {"sha": "6e59537e4accaeb376daa6fbae28223ecb2ef55e", "filename": "src/test/run-pass/fixed_length_copy.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7/src%2Ftest%2Frun-pass%2Ffixed_length_copy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7/src%2Ftest%2Frun-pass%2Ffixed_length_copy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Ffixed_length_copy.rs?ref=6e63e2fd5f4b081c706edc9f3fa1f6c02fab21c7", "patch": "@@ -0,0 +1,10 @@\n+\n+// error on implicit copies to check fixed length vectors\n+// are implicitly copyable \n+#[warn(err_implicit_copies)]\n+fn main() {\n+    let arr = [1,2,3]/3;\n+    let arr2 = arr;\n+    assert(arr[1] == 2);\n+    assert(arr2[2] == 3);\n+}"}]}