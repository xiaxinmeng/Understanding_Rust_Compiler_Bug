{"sha": "7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlYjM1YmMyYTlkY2MwYTdjZDkxZmIyNDdkMTU2ZWI4N2RmMjViMjc=", "commit": {"author": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2014-08-23T06:58:38Z"}, "committer": {"name": "klutzy", "email": "klutzytheklutzy@gmail.com", "date": "2014-08-23T07:19:07Z"}, "message": "test: Convert Window path to MSYS path\n\nWhen MSYS shell executes program, if its arguments look like MSYS paths,\nMSYS automatically converts them into Windows paths.\nFor example, `/c/path:/d/path` becomes `C:\\path;D:\\path`.\nHowever, if there is only one path e.g. `/c/path`, it becomes `C:/path`.\n\nmaketest.py reverts the behavior to reduce confusion between MSYS and\nWindows, but it didn't handle the `/c/path` case. This patch fixes the\nissue.\n\nFixes #15297\nFixes #15250", "tree": {"sha": "4b69e9e42ef23c64a661e16f0afafca26c4b1fcb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b69e9e42ef23c64a661e16f0afafca26c4b1fcb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27", "html_url": "https://github.com/rust-lang/rust/commit/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27/comments", "author": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klutzy", "id": 1589355, "node_id": "MDQ6VXNlcjE1ODkzNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1589355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klutzy", "html_url": "https://github.com/klutzy", "followers_url": "https://api.github.com/users/klutzy/followers", "following_url": "https://api.github.com/users/klutzy/following{/other_user}", "gists_url": "https://api.github.com/users/klutzy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klutzy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klutzy/subscriptions", "organizations_url": "https://api.github.com/users/klutzy/orgs", "repos_url": "https://api.github.com/users/klutzy/repos", "events_url": "https://api.github.com/users/klutzy/events{/privacy}", "received_events_url": "https://api.github.com/users/klutzy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3d77e616bb8455e158c22a379b655437916d404", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3d77e616bb8455e158c22a379b655437916d404", "html_url": "https://github.com/rust-lang/rust/commit/a3d77e616bb8455e158c22a379b655437916d404"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "b46a3b036005c1776bf5bf1fe854899d2db30a84", "filename": "src/etc/maketest.py", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27/src%2Fetc%2Fmaketest.py", "raw_url": "https://github.com/rust-lang/rust/raw/7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27/src%2Fetc%2Fmaketest.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmaketest.py?ref=7eb35bc2a9dcc0a7cd91fb247d156eb87df25b27", "patch": "@@ -15,13 +15,14 @@\n # msys1/msys2 automatically converts `/abs/path1:/abs/path2` into\n # `c:\\real\\abs\\path1;c:\\real\\abs\\path2` (semicolons) if shell thinks\n # the value is list of paths.\n+# (if there is only one path, it becomes `c:/real/abs/path`.)\n # this causes great confusion and error: shell and Makefile doesn't like\n # windows paths so it is really error-prone. revert it for peace.\n def normalize_path(v):\n-    # c:\\path -> /c/path\n-    if ':\\\\' in v:\n-        v = '/' + v.replace(':\\\\', '/')\n     v = v.replace('\\\\', '/')\n+    # c:/path -> /c/path\n+    if ':/' in v:\n+        v = '/' + v.replace(':/', '/')\n     return v\n \n "}]}