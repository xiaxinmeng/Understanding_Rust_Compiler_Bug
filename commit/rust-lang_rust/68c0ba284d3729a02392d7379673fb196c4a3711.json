{"sha": "68c0ba284d3729a02392d7379673fb196c4a3711", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4YzBiYTI4NGQzNzI5YTAyMzkyZDczNzk2NzNmYjE5NmM0YTM3MTE=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-07-25T16:26:28Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-07-25T16:27:34Z"}, "message": "Rename JsonDumper to Dumper\n\nThe Dumper no longer has anything to do specifically with JSON, it\nmerely represents processing into an `Analysis` output.", "tree": {"sha": "d40a040a57f79f7be211530805456f7916df8462", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d40a040a57f79f7be211530805456f7916df8462"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/68c0ba284d3729a02392d7379673fb196c4a3711", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/68c0ba284d3729a02392d7379673fb196c4a3711", "html_url": "https://github.com/rust-lang/rust/commit/68c0ba284d3729a02392d7379673fb196c4a3711", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/68c0ba284d3729a02392d7379673fb196c4a3711/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eb4fbda1f2893fe6ec0f917722b3bc853704794c", "url": "https://api.github.com/repos/rust-lang/rust/commits/eb4fbda1f2893fe6ec0f917722b3bc853704794c", "html_url": "https://github.com/rust-lang/rust/commit/eb4fbda1f2893fe6ec0f917722b3bc853704794c"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "2b349613dc54f3e1135cd4abaa67b4378423a949", "filename": "src/librustc_save_analysis/dump_visitor.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Fdump_visitor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdump_visitor.rs?ref=68c0ba284d3729a02392d7379673fb196c4a3711", "patch": "@@ -10,7 +10,7 @@\n //!\n //! SpanUtils is used to manipulate spans. In particular, to extract sub-spans\n //! from spans (e.g., the span for `bar` from the above example path).\n-//! DumpVisitor walks the AST and processes it, and JsonDumper is used for\n+//! DumpVisitor walks the AST and processes it, and Dumper is used for\n //! recording the output.\n \n use rustc::hir::def::{Res, DefKind as HirDefKind};\n@@ -38,7 +38,7 @@ use syntax_pos::*;\n \n use crate::{escape, generated_code, id_from_def_id, id_from_node_id, lower_attributes,\n             PathCollector, SaveContext};\n-use crate::json_dumper::{Access, JsonDumper};\n+use crate::dumper::{Access, Dumper};\n use crate::span_utils::SpanUtils;\n use crate::sig;\n \n@@ -78,7 +78,7 @@ macro_rules! access_from_vis {\n pub struct DumpVisitor<'l, 'tcx, 'll> {\n     save_ctxt: SaveContext<'l, 'tcx>,\n     tcx: TyCtxt<'tcx>,\n-    dumper: &'ll mut JsonDumper,\n+    dumper: &'ll mut Dumper,\n \n     span: SpanUtils<'l>,\n \n@@ -95,7 +95,7 @@ pub struct DumpVisitor<'l, 'tcx, 'll> {\n impl<'l, 'tcx, 'll> DumpVisitor<'l, 'tcx, 'll> {\n     pub fn new(\n         save_ctxt: SaveContext<'l, 'tcx>,\n-        dumper: &'ll mut JsonDumper,\n+        dumper: &'ll mut Dumper,\n     ) -> DumpVisitor<'l, 'tcx, 'll> {\n         let span_utils = SpanUtils::new(&save_ctxt.tcx.sess);\n         DumpVisitor {"}, {"sha": "6fb55e6c9905540ac99b921964fb0caa82057ec1", "filename": "src/librustc_save_analysis/dumper.rs", "status": "renamed", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Fdumper.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Fdumper.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Fdumper.rs?ref=68c0ba284d3729a02392d7379673fb196c4a3711", "patch": "@@ -9,14 +9,14 @@ pub struct Access {\n     pub public: bool,\n }\n \n-pub struct JsonDumper {\n+pub struct Dumper {\n     result: Analysis,\n     config: Config,\n }\n \n-impl JsonDumper {\n-    pub fn new(config: Config) -> JsonDumper {\n-        JsonDumper {\n+impl Dumper {\n+    pub fn new(config: Config) -> Dumper {\n+        Dumper {\n             config: config.clone(),\n             result: Analysis::new(config),\n         }\n@@ -27,7 +27,7 @@ impl JsonDumper {\n     }\n }\n \n-impl JsonDumper {\n+impl Dumper {\n     pub fn crate_prelude(&mut self, data: CratePreludeData) {\n         self.result.prelude = Some(data)\n     }", "previous_filename": "src/librustc_save_analysis/json_dumper.rs"}, {"sha": "ade5e2eca60ba56d2848dfb60a5153368a658b88", "filename": "src/librustc_save_analysis/lib.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68c0ba284d3729a02392d7379673fb196c4a3711/src%2Flibrustc_save_analysis%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_save_analysis%2Flib.rs?ref=68c0ba284d3729a02392d7379673fb196c4a3711", "patch": "@@ -7,7 +7,7 @@\n #![recursion_limit=\"256\"]\n \n \n-mod json_dumper;\n+mod dumper;\n mod dump_visitor;\n #[macro_use]\n mod span_utils;\n@@ -39,7 +39,7 @@ use syntax::visit::{self, Visitor};\n use syntax::print::pprust::{arg_to_string, ty_to_string};\n use syntax_pos::*;\n \n-use json_dumper::JsonDumper;\n+use dumper::Dumper;\n use dump_visitor::DumpVisitor;\n use span_utils::SpanUtils;\n \n@@ -1076,7 +1076,7 @@ impl<'a> SaveHandler for DumpHandler<'a> {\n     ) {\n         let sess = &save_ctxt.tcx.sess;\n         let (output, file_name) = self.output_file(&save_ctxt);\n-        let mut dumper = JsonDumper::new(save_ctxt.config.clone());\n+        let mut dumper = Dumper::new(save_ctxt.config.clone());\n         let mut visitor = DumpVisitor::new(save_ctxt, &mut dumper);\n \n         visitor.dump_crate_info(cratename, krate);\n@@ -1109,12 +1109,12 @@ impl<'b> SaveHandler for CallbackHandler<'b> {\n         cratename: &str,\n         input: &'l Input,\n     ) {\n-        // We're using the JsonDumper here because it has the format of the\n+        // We're using the Dumper here because it has the format of the\n         // save-analysis results that we will pass to the callback. IOW, we are\n-        // using the JsonDumper to collect the save-analysis results, but not\n+        // using the Dumper to collect the save-analysis results, but not\n         // actually to dump them to a file. This is all a bit convoluted and\n         // there is certainly a simpler design here trying to get out (FIXME).\n-        let mut dumper = JsonDumper::new(save_ctxt.config.clone());\n+        let mut dumper = Dumper::new(save_ctxt.config.clone());\n         let mut visitor = DumpVisitor::new(save_ctxt, &mut dumper);\n \n         visitor.dump_crate_info(cratename, krate);"}]}