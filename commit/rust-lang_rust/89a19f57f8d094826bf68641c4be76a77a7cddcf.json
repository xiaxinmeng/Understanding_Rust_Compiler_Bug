{"sha": "89a19f57f8d094826bf68641c4be76a77a7cddcf", "node_id": "C_kwDOAAsO6NoAKDg5YTE5ZjU3ZjhkMDk0ODI2YmY2ODY0MWM0YmU3NmE3N2E3Y2RkY2Y", "commit": {"author": {"name": "Tianyi Song", "email": "42670338+tysg@users.noreply.github.com", "date": "2022-03-01T07:44:53Z"}, "committer": {"name": "Tianyi Song", "email": "42670338+tysg@users.noreply.github.com", "date": "2022-03-04T02:16:35Z"}, "message": "Lower string literals with real val, not default", "tree": {"sha": "458515a884d7d8c95e25690cb5c76a09e5e9bad4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/458515a884d7d8c95e25690cb5c76a09e5e9bad4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89a19f57f8d094826bf68641c4be76a77a7cddcf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89a19f57f8d094826bf68641c4be76a77a7cddcf", "html_url": "https://github.com/rust-lang/rust/commit/89a19f57f8d094826bf68641c4be76a77a7cddcf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89a19f57f8d094826bf68641c4be76a77a7cddcf/comments", "author": {"login": "tysg", "id": 42670338, "node_id": "MDQ6VXNlcjQyNjcwMzM4", "avatar_url": "https://avatars.githubusercontent.com/u/42670338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tysg", "html_url": "https://github.com/tysg", "followers_url": "https://api.github.com/users/tysg/followers", "following_url": "https://api.github.com/users/tysg/following{/other_user}", "gists_url": "https://api.github.com/users/tysg/gists{/gist_id}", "starred_url": "https://api.github.com/users/tysg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tysg/subscriptions", "organizations_url": "https://api.github.com/users/tysg/orgs", "repos_url": "https://api.github.com/users/tysg/repos", "events_url": "https://api.github.com/users/tysg/events{/privacy}", "received_events_url": "https://api.github.com/users/tysg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tysg", "id": 42670338, "node_id": "MDQ6VXNlcjQyNjcwMzM4", "avatar_url": "https://avatars.githubusercontent.com/u/42670338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tysg", "html_url": "https://github.com/tysg", "followers_url": "https://api.github.com/users/tysg/followers", "following_url": "https://api.github.com/users/tysg/following{/other_user}", "gists_url": "https://api.github.com/users/tysg/gists{/gist_id}", "starred_url": "https://api.github.com/users/tysg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tysg/subscriptions", "organizations_url": "https://api.github.com/users/tysg/orgs", "repos_url": "https://api.github.com/users/tysg/repos", "events_url": "https://api.github.com/users/tysg/events{/privacy}", "received_events_url": "https://api.github.com/users/tysg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d473a0b9f92c0739e4635fa8ef95a91ac2a481d", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d473a0b9f92c0739e4635fa8ef95a91ac2a481d", "html_url": "https://github.com/rust-lang/rust/commit/9d473a0b9f92c0739e4635fa8ef95a91ac2a481d"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "085eea7fbd0841890f74da5512042b172eec102b", "filename": "crates/hir_def/src/body/lower.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/89a19f57f8d094826bf68641c4be76a77a7cddcf/crates%2Fhir_def%2Fsrc%2Fbody%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89a19f57f8d094826bf68641c4be76a77a7cddcf/crates%2Fhir_def%2Fsrc%2Fbody%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fbody%2Flower.rs?ref=89a19f57f8d094826bf68641c4be76a77a7cddcf", "patch": "@@ -923,7 +923,10 @@ impl From<ast::LiteralKind> for Literal {\n                 let text = bs.value().map(Box::from).unwrap_or_else(Default::default);\n                 Literal::ByteString(text)\n             }\n-            LiteralKind::String(_) => Literal::String(Default::default()),\n+            LiteralKind::String(s) => {\n+                let text = s.value().map(Box::from).unwrap_or_else(Default::default);\n+                Literal::String(text)\n+            }\n             LiteralKind::Byte => Literal::Uint(Default::default(), Some(BuiltinUint::U8)),\n             LiteralKind::Bool(val) => Literal::Bool(val),\n             LiteralKind::Char => Literal::Char(Default::default()),"}, {"sha": "d74666b514dc57de3c32adb9ddcbca9d0ce49a32", "filename": "crates/ide/src/hover/tests.rs", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/89a19f57f8d094826bf68641c4be76a77a7cddcf/crates%2Fide%2Fsrc%2Fhover%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89a19f57f8d094826bf68641c4be76a77a7cddcf/crates%2Fide%2Fsrc%2Fhover%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fhover%2Ftests.rs?ref=89a19f57f8d094826bf68641c4be76a77a7cddcf", "patch": "@@ -3487,6 +3487,27 @@ const FOO$0: usize = 1 << 100;\n \n             ---\n \n+            This is a doc\n+        \"#]],\n+    );\n+    check(\n+        r#\"\n+/// This is a doc\n+const FOO$0: &str = \"bar\";\n+\"#,\n+        expect![[r#\"\n+            *FOO*\n+\n+            ```rust\n+            test\n+            ```\n+\n+            ```rust\n+            const FOO: &str = \"bar\"\n+            ```\n+\n+            ---\n+\n             This is a doc\n         \"#]],\n     );"}]}