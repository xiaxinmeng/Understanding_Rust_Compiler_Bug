{"sha": "8ade08041294446fd44978a9a068cb3b30ca4001", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhhZGUwODA0MTI5NDQ0NmZkNDQ5NzhhOWEwNjhjYjNiMzBjYTQwMDE=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2016-02-20T16:57:14Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2016-02-21T14:32:43Z"}, "message": "Fix liballoc dependencies", "tree": {"sha": "beb295111a3c44689e48b931f38c4bc8209532bf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/beb295111a3c44689e48b931f38c4bc8209532bf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ade08041294446fd44978a9a068cb3b30ca4001", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ade08041294446fd44978a9a068cb3b30ca4001", "html_url": "https://github.com/rust-lang/rust/commit/8ade08041294446fd44978a9a068cb3b30ca4001", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ade08041294446fd44978a9a068cb3b30ca4001/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d14b39204e648a219a17335e712c3fb14666a07", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d14b39204e648a219a17335e712c3fb14666a07", "html_url": "https://github.com/rust-lang/rust/commit/2d14b39204e648a219a17335e712c3fb14666a07"}], "stats": {"total": 16, "additions": 7, "deletions": 9}, "files": [{"sha": "5da0f1a10b9775836c6d4aaea2ccacdbcf912f2d", "filename": "src/liballoc/Cargo.toml", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Fliballoc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Fliballoc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2FCargo.toml?ref=8ade08041294446fd44978a9a068cb3b30ca4001", "patch": "@@ -10,5 +10,3 @@ test = false\n \n [dependencies]\n core = { path = \"../libcore\" }\n-libc = { path = \"../rustc/libc_shim\" }\n-alloc_system = { path = \"../liballoc_system\" }"}, {"sha": "1d928a922c7e053570b9f47da020c60d26ee04cf", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=8ade08041294446fd44978a9a068cb3b30ca4001", "patch": "@@ -92,16 +92,9 @@\n #![feature(unsafe_no_drop_flag, filling_drop)]\n #![feature(unsize)]\n \n-// Issue# 30592: Systematically use alloc_system during stage0 since jemalloc\n-// might be unavailable or disabled\n-#![cfg_attr(stage0, feature(alloc_system))]\n-\n #![cfg_attr(not(test), feature(raw, fn_traits, placement_new_protocol))]\n #![cfg_attr(test, feature(test, rustc_private, box_heap))]\n \n-#[cfg(stage0)]\n-extern crate alloc_system;\n-\n // Allow testing this library\n \n #[cfg(test)]"}, {"sha": "d8ecddcbe422c6ff20f7daab0f955c031b7b562c", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ade08041294446fd44978a9a068cb3b30ca4001/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=8ade08041294446fd44978a9a068cb3b30ca4001", "patch": "@@ -269,6 +269,10 @@\n #![feature(vec_push_all)]\n #![feature(zero_one)]\n \n+// Issue# 30592: Systematically use alloc_system during stage0 since jemalloc\n+// might be unavailable or disabled\n+#![cfg_attr(stage0, feature(alloc_system))]\n+\n // Don't link to std. We are std.\n #![no_std]\n \n@@ -295,6 +299,9 @@ extern crate alloc;\n extern crate rustc_unicode;\n extern crate libc;\n \n+#[cfg(stage0)]\n+extern crate alloc_system;\n+\n // Make std testable by not duplicating lang items and other globals. See #2912\n #[cfg(test)] extern crate std as realstd;\n "}]}