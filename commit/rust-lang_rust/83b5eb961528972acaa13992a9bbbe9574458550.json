{"sha": "83b5eb961528972acaa13992a9bbbe9574458550", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzYjVlYjk2MTUyODk3MmFjYWExMzk5MmE5YmJiZTk1NzQ0NTg1NTA=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-07-31T00:46:46Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-08-02T19:30:46Z"}, "message": "Always error on `SizeOverflow` during mir evaluation", "tree": {"sha": "79a34fa0e89867401a6656a12c583f75aea2b2ec", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/79a34fa0e89867401a6656a12c583f75aea2b2ec"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83b5eb961528972acaa13992a9bbbe9574458550", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83b5eb961528972acaa13992a9bbbe9574458550", "html_url": "https://github.com/rust-lang/rust/commit/83b5eb961528972acaa13992a9bbbe9574458550", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83b5eb961528972acaa13992a9bbbe9574458550/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1df512fcaeaf17639c5d28a3045814d6f7a7db97", "url": "https://api.github.com/repos/rust-lang/rust/commits/1df512fcaeaf17639c5d28a3045814d6f7a7db97", "html_url": "https://github.com/rust-lang/rust/commit/1df512fcaeaf17639c5d28a3045814d6f7a7db97"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "7c1941196390a46f402a752749393860303dab03", "filename": "src/librustc/mir/interpret/error.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/83b5eb961528972acaa13992a9bbbe9574458550/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83b5eb961528972acaa13992a9bbbe9574458550/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Ferror.rs?ref=83b5eb961528972acaa13992a9bbbe9574458550", "patch": "@@ -141,7 +141,6 @@ impl<'tcx> ConstEvalErr<'tcx> {\n             err_inval!(Layout(LayoutError::Unknown(_))) |\n             err_inval!(TooGeneric) =>\n                 return Err(ErrorHandled::TooGeneric),\n-            err_inval!(Layout(LayoutError::SizeOverflow(_))) |\n             err_inval!(TypeckError) =>\n                 return Err(ErrorHandled::Reported),\n             _ => {},"}, {"sha": "ce6c25742870eacb273b465098fc52efebe1c8d6", "filename": "src/test/ui/consts/issue-55878.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.rs?ref=83b5eb961528972acaa13992a9bbbe9574458550", "patch": "@@ -0,0 +1,4 @@\n+// error-pattern: reaching this expression at runtime will panic or abort\n+fn main() {\n+    println!(\"Size: {}\", std::mem::size_of::<[u8; std::u64::MAX as usize]>());\n+}"}, {"sha": "03537ff20bf5e1397142c70c80efb06caa1d86f4", "filename": "src/test/ui/consts/issue-55878.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fissue-55878.stderr?ref=83b5eb961528972acaa13992a9bbbe9574458550", "patch": "@@ -0,0 +1,15 @@\n+error: reaching this expression at runtime will panic or abort\n+  --> $SRC_DIR/libcore/mem/mod.rs:LL:COL\n+   |\n+LL |     intrinsics::size_of::<T>()\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 18446744073709551615])\n+   | \n+  ::: $DIR/issue-55878.rs:3:26\n+   |\n+LL |     println!(\"Size: {}\", std::mem::size_of::<[u8; std::u64::MAX as usize]>());\n+   |                          ---------------------------------------------------\n+   |\n+   = note: `#[deny(const_err)]` on by default\n+\n+error: aborting due to previous error\n+"}, {"sha": "f12d0121a8f1af5b10badf7d157737b15ea78b6a", "filename": "src/test/ui/issues/issue-56762.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fissues%2Fissue-56762.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fissues%2Fissue-56762.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-56762.rs?ref=83b5eb961528972acaa13992a9bbbe9574458550", "patch": "@@ -17,6 +17,8 @@ impl TooBigArray {\n }\n \n static MY_TOO_BIG_ARRAY_1: TooBigArray = TooBigArray::new();\n+//~^ ERROR could not evaluate static initializer\n static MY_TOO_BIG_ARRAY_2: [u8; HUGE_SIZE] = [0x00; HUGE_SIZE];\n+//~^ ERROR could not evaluate static initializer\n \n fn main() { }"}, {"sha": "fa7b9c71eb4a203c07e0717a6cebf16d87755f43", "filename": "src/test/ui/issues/issue-56762.stderr", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/83b5eb961528972acaa13992a9bbbe9574458550/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-56762.stderr?ref=83b5eb961528972acaa13992a9bbbe9574458550", "patch": "@@ -1,4 +1,15 @@\n-error: the type `[u8; 2305843009213693951]` is too big for the current architecture\n+error[E0080]: could not evaluate static initializer\n+  --> $DIR/issue-56762.rs:19:1\n+   |\n+LL | static MY_TOO_BIG_ARRAY_1: TooBigArray = TooBigArray::new();\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 2305843009213693951])\n \n-error: aborting due to previous error\n+error[E0080]: could not evaluate static initializer\n+  --> $DIR/issue-56762.rs:21:1\n+   |\n+LL | static MY_TOO_BIG_ARRAY_2: [u8; HUGE_SIZE] = [0x00; HUGE_SIZE];\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ rustc layout computation failed: SizeOverflow([u8; 2305843009213693951])\n \n+error: aborting due to 2 previous errors\n+\n+For more information about this error, try `rustc --explain E0080`."}]}