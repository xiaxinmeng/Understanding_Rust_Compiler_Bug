{"sha": "e65aa302d34da29839fc72cf3363e85ccd71b2ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2NWFhMzAyZDM0ZGEyOTgzOWZjNzJjZjMzNjNlODVjY2Q3MWIyZWU=", "commit": {"author": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2018-05-06T11:03:11Z"}, "committer": {"name": "Florian Diebold", "email": "flodiebold@gmail.com", "date": "2018-05-06T11:08:43Z"}, "message": "Turn the nonmodrs-mods test into a standard idempotence test\n\nWe need to skip children on foo.rs, since the parser will not find bar from that\nfile, but with that, the test works fine.", "tree": {"sha": "cb6934faed2c69a4fd4484fd034cf2eddb687b9b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cb6934faed2c69a4fd4484fd034cf2eddb687b9b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e65aa302d34da29839fc72cf3363e85ccd71b2ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e65aa302d34da29839fc72cf3363e85ccd71b2ee", "html_url": "https://github.com/rust-lang/rust/commit/e65aa302d34da29839fc72cf3363e85ccd71b2ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e65aa302d34da29839fc72cf3363e85ccd71b2ee/comments", "author": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flodiebold", "id": 906069, "node_id": "MDQ6VXNlcjkwNjA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/906069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flodiebold", "html_url": "https://github.com/flodiebold", "followers_url": "https://api.github.com/users/flodiebold/followers", "following_url": "https://api.github.com/users/flodiebold/following{/other_user}", "gists_url": "https://api.github.com/users/flodiebold/gists{/gist_id}", "starred_url": "https://api.github.com/users/flodiebold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flodiebold/subscriptions", "organizations_url": "https://api.github.com/users/flodiebold/orgs", "repos_url": "https://api.github.com/users/flodiebold/repos", "events_url": "https://api.github.com/users/flodiebold/events{/privacy}", "received_events_url": "https://api.github.com/users/flodiebold/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "215baae2238971361c5f92accfae35ba0ad6c634", "url": "https://api.github.com/repos/rust-lang/rust/commits/215baae2238971361c5f92accfae35ba0ad6c634", "html_url": "https://github.com/rust-lang/rust/commit/215baae2238971361c5f92accfae35ba0ad6c634"}], "stats": {"total": 34, "additions": 11, "deletions": 23}, "files": [{"sha": "2680830f065674f9be8c82663021bb19102c9bdd", "filename": "src/test/mod.rs", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/e65aa302d34da29839fc72cf3363e85ccd71b2ee/src%2Ftest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65aa302d34da29839fc72cf3363e85ccd71b2ee/src%2Ftest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmod.rs?ref=e65aa302d34da29839fc72cf3363e85ccd71b2ee", "patch": "@@ -232,23 +232,6 @@ fn self_tests() {\n     );\n }\n \n-#[test]\n-fn issue_2673_non_modrs_mods() {\n-    match idempotent_check(&PathBuf::from(\"tests/issue-2673-nonmodrs-mods/lib.rs\")) {\n-        Ok(ref report) if report.has_warnings() => {\n-            print!(\"{}\", report);\n-            panic!(\"had warnings\");\n-        }\n-        Ok(_report) => {}\n-        Err(err) => {\n-            if let IdempotentCheckError::Mismatch(msg) = err {\n-                print_mismatches_default_message(msg);\n-            }\n-            panic!(\"had errors\");\n-        }\n-    }\n-}\n-\n #[test]\n fn stdin_formatting_smoke_test() {\n     let input = Input::Text(\"fn main () {}\".to_owned());"}, {"sha": "49f37a88dfbeebf6454dcb22bf052a90ae401d29", "filename": "tests/config/skip_children.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Fconfig%2Fskip_children.toml", "raw_url": "https://github.com/rust-lang/rust/raw/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Fconfig%2Fskip_children.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fconfig%2Fskip_children.toml?ref=e65aa302d34da29839fc72cf3363e85ccd71b2ee", "patch": "@@ -0,0 +1 @@\n+skip_children = true\n\\ No newline at end of file"}, {"sha": "c9fb22cf1a6b8ff20a14125f8dc91ac848513197", "filename": "tests/issue-2673-nonmodrs-mods/foo.rs", "status": "removed", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/215baae2238971361c5f92accfae35ba0ad6c634/tests%2Fissue-2673-nonmodrs-mods%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/215baae2238971361c5f92accfae35ba0ad6c634/tests%2Fissue-2673-nonmodrs-mods%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fissue-2673-nonmodrs-mods%2Ffoo.rs?ref=215baae2238971361c5f92accfae35ba0ad6c634", "patch": "@@ -1,3 +0,0 @@\n-mod bar;\n-\n-mod baz {}"}, {"sha": "e2025a5449d8b041b9f36aab1f4549d94e2cef3b", "filename": "tests/issue-2673-nonmodrs-mods/lib.rs", "status": "removed", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/215baae2238971361c5f92accfae35ba0ad6c634/tests%2Fissue-2673-nonmodrs-mods%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/215baae2238971361c5f92accfae35ba0ad6c634/tests%2Fissue-2673-nonmodrs-mods%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fissue-2673-nonmodrs-mods%2Flib.rs?ref=215baae2238971361c5f92accfae35ba0ad6c634", "patch": "@@ -1,3 +0,0 @@\n-#![feature(non_modrs_mods)]\n-\n-mod foo;"}, {"sha": "5340816d61e0c2cca0cc2a1219e0fe142a683368", "filename": "tests/target/issue-2673-nonmodrs-mods/foo.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo.rs?ref=e65aa302d34da29839fc72cf3363e85ccd71b2ee", "patch": "@@ -0,0 +1,4 @@\n+// rustfmt-config: skip_children.toml\n+mod bar;\n+\n+mod baz {}"}, {"sha": "9ceacd59d86f779890861cee8d5c2b0af759b6a6", "filename": "tests/target/issue-2673-nonmodrs-mods/foo/bar.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo%2Fbar.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo%2Fbar.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Ffoo%2Fbar.rs?ref=e65aa302d34da29839fc72cf3363e85ccd71b2ee", "previous_filename": "tests/issue-2673-nonmodrs-mods/foo/bar.rs"}, {"sha": "82425de565a22d07119b42a8f340a9ffaa682352", "filename": "tests/target/issue-2673-nonmodrs-mods/lib.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65aa302d34da29839fc72cf3363e85ccd71b2ee/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fissue-2673-nonmodrs-mods%2Flib.rs?ref=e65aa302d34da29839fc72cf3363e85ccd71b2ee", "patch": "@@ -0,0 +1,6 @@\n+#![feature(non_modrs_mods)]\n+\n+// Test that submodules in non-mod.rs files work. This is just an idempotence\n+// test since we just want to verify that rustfmt doesn't fail.\n+\n+mod foo;"}]}