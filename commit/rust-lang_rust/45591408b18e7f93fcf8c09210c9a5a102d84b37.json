{"sha": "45591408b18e7f93fcf8c09210c9a5a102d84b37", "node_id": "C_kwDOAAsO6NoAKDQ1NTkxNDA4YjE4ZTdmOTNmY2Y4YzA5MjEwYzlhNWExMDJkODRiMzc", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-23T20:59:29Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-23T20:59:29Z"}, "message": "Auto merge of #90175 - cuviper:min-llvm-12, r=nagisa\n\nUpdate the minimum external LLVM to 12\n\nWith this change, we'll have stable support for LLVM 12 and 13.\nFor reference, the previous increase to LLVM 10 was #83387,\nand this replaces the pending increase to LLVM 11 in #90062.\n\nr? `@nagisa` `@nikic`", "tree": {"sha": "5344f3519ec782c658ef5770dc02fe4178b99931", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5344f3519ec782c658ef5770dc02fe4178b99931"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45591408b18e7f93fcf8c09210c9a5a102d84b37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45591408b18e7f93fcf8c09210c9a5a102d84b37", "html_url": "https://github.com/rust-lang/rust/commit/45591408b18e7f93fcf8c09210c9a5a102d84b37", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45591408b18e7f93fcf8c09210c9a5a102d84b37/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "91b931926fd49fc97d1e39f2b8206abf1d77ce7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/91b931926fd49fc97d1e39f2b8206abf1d77ce7d", "html_url": "https://github.com/rust-lang/rust/commit/91b931926fd49fc97d1e39f2b8206abf1d77ce7d"}, {"sha": "8b1504cfb73894040f8096623e6f9d4559c9eb7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b1504cfb73894040f8096623e6f9d4559c9eb7f", "html_url": "https://github.com/rust-lang/rust/commit/8b1504cfb73894040f8096623e6f9d4559c9eb7f"}], "stats": {"total": 391, "additions": 63, "deletions": 328}, "files": [{"sha": "5278de2727e7cbf7ca8b83c737531c043cccbf04", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -43,7 +43,7 @@ jobs:\n           - name: mingw-check\n             os: ubuntu-latest-xl\n             env: {}\n-          - name: x86_64-gnu-llvm-10\n+          - name: x86_64-gnu-llvm-12\n             os: ubuntu-latest-xl\n             env: {}\n           - name: x86_64-gnu-tools\n@@ -274,7 +274,7 @@ jobs:\n           - name: x86_64-gnu-distcheck\n             os: ubuntu-latest-xl\n             env: {}\n-          - name: x86_64-gnu-llvm-10\n+          - name: x86_64-gnu-llvm-12\n             env:\n               RUST_BACKTRACE: 1\n             os: ubuntu-latest-xl"}, {"sha": "4e4487ad88cebd2eb6eb5c17144348bb19a3654d", "filename": "compiler/rustc_codegen_llvm/src/llvm_util.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -95,8 +95,7 @@ unsafe fn configure_llvm(sess: &Session) {\n         // Ref:\n         // - https://github.com/rust-lang/rust/issues/85351\n         // - https://reviews.llvm.org/D103167\n-        let llvm_version = llvm_util::get_version();\n-        if llvm_version >= (11, 0, 0) && llvm_version < (13, 0, 0) {\n+        if llvm_util::get_version() < (13, 0, 0) {\n             add(\"-enable-machine-outliner=never\", false);\n         }\n "}, {"sha": "8cd2bd12450e3d55a1c548cc4475d1f598754225", "filename": "compiler/rustc_llvm/llvm-wrapper/CoverageMappingWrapper.cpp", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FCoverageMappingWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FCoverageMappingWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FCoverageMappingWrapper.cpp?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -98,10 +98,7 @@ extern \"C\" void LLVMRustCoverageWriteMapSectionNameToString(LLVMModuleRef M,\n \n extern \"C\" void LLVMRustCoverageWriteFuncSectionNameToString(LLVMModuleRef M,\n                                                              RustStringRef Str) {\n-#if LLVM_VERSION_GE(11, 0)\n   WriteSectionNameToString(M, IPSK_covfun, Str);\n-// else do nothing; the `Version` check will abort codegen on the Rust side\n-#endif\n }\n \n extern \"C\" void LLVMRustCoverageWriteMappingVarNameToString(RustStringRef Str) {\n@@ -111,9 +108,5 @@ extern \"C\" void LLVMRustCoverageWriteMappingVarNameToString(RustStringRef Str) {\n }\n \n extern \"C\" uint32_t LLVMRustCoverageMappingVersion() {\n-#if LLVM_VERSION_GE(11, 0)\n   return coverage::CovMapVersion::Version4;\n-#else\n-  return coverage::CovMapVersion::Version3;\n-#endif\n }"}, {"sha": "d6dc54c8d0ad6991ab2bbc86fa6a332d8642ecbc", "filename": "compiler/rustc_llvm/llvm-wrapper/PassWrapper.cpp", "status": "modified", "additions": 2, "deletions": 167, "changes": 169, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FPassWrapper.cpp?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -54,10 +54,6 @@ typedef struct LLVMOpaqueTargetMachine *LLVMTargetMachineRef;\n \n DEFINE_STDCXX_CONVERSION_FUNCTIONS(Pass, LLVMPassRef)\n DEFINE_STDCXX_CONVERSION_FUNCTIONS(TargetMachine, LLVMTargetMachineRef)\n-#if LLVM_VERSION_LT(11, 0)\n-DEFINE_STDCXX_CONVERSION_FUNCTIONS(PassManagerBuilder,\n-                                   LLVMPassManagerBuilderRef)\n-#endif\n \n extern \"C\" void LLVMInitializePasses() {\n   PassRegistry &Registry = *PassRegistry::getPassRegistry();\n@@ -685,7 +681,6 @@ void LLVMSelfProfileInitializeCallbacks(\n     PassInstrumentationCallbacks& PIC, void* LlvmSelfProfiler,\n     LLVMRustSelfProfileBeforePassCallback BeforePassCallback,\n     LLVMRustSelfProfileAfterPassCallback AfterPassCallback) {\n-#if LLVM_VERSION_GE(12, 0)\n   PIC.registerBeforeNonSkippedPassCallback([LlvmSelfProfiler, BeforePassCallback](\n                                            StringRef Pass, llvm::Any Ir) {\n     std::string PassName = Pass.str();\n@@ -703,25 +698,6 @@ void LLVMSelfProfileInitializeCallbacks(\n       [LlvmSelfProfiler, AfterPassCallback](StringRef Pass, const PreservedAnalyses &Preserved) {\n         AfterPassCallback(LlvmSelfProfiler);\n       });\n-#else\n-  PIC.registerBeforePassCallback([LlvmSelfProfiler, BeforePassCallback](\n-                                     StringRef Pass, llvm::Any Ir) {\n-    std::string PassName = Pass.str();\n-    std::string IrName = LLVMRustwrappedIrGetName(Ir);\n-    BeforePassCallback(LlvmSelfProfiler, PassName.c_str(), IrName.c_str());\n-    return true;\n-  });\n-\n-  PIC.registerAfterPassCallback(\n-      [LlvmSelfProfiler, AfterPassCallback](StringRef Pass, llvm::Any Ir) {\n-        AfterPassCallback(LlvmSelfProfiler);\n-      });\n-\n-  PIC.registerAfterPassInvalidatedCallback(\n-      [LlvmSelfProfiler, AfterPassCallback](StringRef Pass) {\n-        AfterPassCallback(LlvmSelfProfiler);\n-      });\n-#endif\n \n   PIC.registerBeforeAnalysisCallback([LlvmSelfProfiler, BeforePassCallback](\n                                          StringRef Pass, llvm::Any Ir) {\n@@ -782,22 +758,13 @@ LLVMRustOptimizeWithNewPassManager(\n   PTO.LoopInterleaving = UnrollLoops;\n   PTO.LoopVectorization = LoopVectorize;\n   PTO.SLPVectorization = SLPVectorize;\n-#if LLVM_VERSION_GE(12, 0)\n   PTO.MergeFunctions = MergeFunctions;\n-#else\n-  // MergeFunctions is not supported by NewPM in older LLVM versions.\n-  (void) MergeFunctions;\n-#endif\n \n   // FIXME: We may want to expose this as an option.\n   bool DebugPassManager = false;\n \n   PassInstrumentationCallbacks PIC;\n-#if LLVM_VERSION_GE(12, 0)\n   StandardInstrumentations SI(DebugPassManager);\n-#else\n-  StandardInstrumentations SI;\n-#endif\n   SI.registerCallbacks(PIC);\n \n   if (LlvmSelfProfiler){\n@@ -821,18 +788,14 @@ LLVMRustOptimizeWithNewPassManager(\n                         PGOOptions::NoCSAction, DebugInfoForProfiling);\n   }\n \n-#if LLVM_VERSION_GE(12, 0) && !LLVM_VERSION_GE(13,0)\n-  PassBuilder PB(DebugPassManager, TM, PTO, PGOOpt, &PIC);\n-#else\n-  PassBuilder PB(TM, PTO, PGOOpt, &PIC);\n-#endif\n-\n #if LLVM_VERSION_GE(13, 0)\n+  PassBuilder PB(TM, PTO, PGOOpt, &PIC);\n   LoopAnalysisManager LAM;\n   FunctionAnalysisManager FAM;\n   CGSCCAnalysisManager CGAM;\n   ModuleAnalysisManager MAM;\n #else\n+  PassBuilder PB(DebugPassManager, TM, PTO, PGOOpt, &PIC);\n   LoopAnalysisManager LAM(DebugPassManager);\n   FunctionAnalysisManager FAM(DebugPassManager);\n   CGSCCAnalysisManager CGAM(DebugPassManager);\n@@ -857,13 +820,8 @@ LLVMRustOptimizeWithNewPassManager(\n   // PassBuilder does not create a pipeline.\n   std::vector<std::function<void(ModulePassManager &, OptimizationLevel)>>\n       PipelineStartEPCallbacks;\n-#if LLVM_VERSION_GE(11, 0)\n   std::vector<std::function<void(ModulePassManager &, OptimizationLevel)>>\n       OptimizerLastEPCallbacks;\n-#else\n-  std::vector<std::function<void(FunctionPassManager &, OptimizationLevel)>>\n-      OptimizerLastEPCallbacks;\n-#endif\n \n   if (VerifyIR) {\n     PipelineStartEPCallbacks.push_back(\n@@ -896,7 +854,6 @@ LLVMRustOptimizeWithNewPassManager(\n           SanitizerOptions->SanitizeMemoryTrackOrigins,\n           SanitizerOptions->SanitizeMemoryRecover,\n           /*CompileKernel=*/false);\n-#if LLVM_VERSION_GE(11, 0)\n       OptimizerLastEPCallbacks.push_back(\n         [Options](ModulePassManager &MPM, OptimizationLevel Level) {\n #if LLVM_VERSION_GE(14, 0)\n@@ -907,22 +864,9 @@ LLVMRustOptimizeWithNewPassManager(\n           MPM.addPass(createModuleToFunctionPassAdaptor(MemorySanitizerPass(Options)));\n         }\n       );\n-#else\n-      PipelineStartEPCallbacks.push_back(\n-        [Options](ModulePassManager &MPM, OptimizationLevel Level) {\n-          MPM.addPass(MemorySanitizerPass(Options));\n-        }\n-      );\n-      OptimizerLastEPCallbacks.push_back(\n-        [Options](FunctionPassManager &FPM, OptimizationLevel Level) {\n-          FPM.addPass(MemorySanitizerPass(Options));\n-        }\n-      );\n-#endif\n     }\n \n     if (SanitizerOptions->SanitizeThread) {\n-#if LLVM_VERSION_GE(11, 0)\n       OptimizerLastEPCallbacks.push_back(\n         [](ModulePassManager &MPM, OptimizationLevel Level) {\n #if LLVM_VERSION_GE(14, 0)\n@@ -933,22 +877,9 @@ LLVMRustOptimizeWithNewPassManager(\n           MPM.addPass(createModuleToFunctionPassAdaptor(ThreadSanitizerPass()));\n         }\n       );\n-#else\n-      PipelineStartEPCallbacks.push_back(\n-        [](ModulePassManager &MPM, OptimizationLevel Level) {\n-          MPM.addPass(ThreadSanitizerPass());\n-        }\n-      );\n-      OptimizerLastEPCallbacks.push_back(\n-        [](FunctionPassManager &FPM, OptimizationLevel Level) {\n-          FPM.addPass(ThreadSanitizerPass());\n-        }\n-      );\n-#endif\n     }\n \n     if (SanitizerOptions->SanitizeAddress) {\n-#if LLVM_VERSION_GE(11, 0)\n       OptimizerLastEPCallbacks.push_back(\n         [SanitizerOptions](ModulePassManager &MPM, OptimizationLevel Level) {\n           MPM.addPass(RequireAnalysisPass<ASanGlobalsMetadataAnalysis, Module>());\n@@ -967,29 +898,8 @@ LLVMRustOptimizeWithNewPassManager(\n #endif\n         }\n       );\n-#else\n-      PipelineStartEPCallbacks.push_back(\n-        [&](ModulePassManager &MPM, OptimizationLevel Level) {\n-          MPM.addPass(RequireAnalysisPass<ASanGlobalsMetadataAnalysis, Module>());\n-        }\n-      );\n-      OptimizerLastEPCallbacks.push_back(\n-        [SanitizerOptions](FunctionPassManager &FPM, OptimizationLevel Level) {\n-          FPM.addPass(AddressSanitizerPass(\n-              /*CompileKernel=*/false, SanitizerOptions->SanitizeAddressRecover,\n-              /*UseAfterScope=*/true));\n-        }\n-      );\n-      PipelineStartEPCallbacks.push_back(\n-        [SanitizerOptions](ModulePassManager &MPM, OptimizationLevel Level) {\n-          MPM.addPass(ModuleAddressSanitizerPass(\n-              /*CompileKernel=*/false, SanitizerOptions->SanitizeAddressRecover));\n-        }\n-      );\n-#endif\n     }\n     if (SanitizerOptions->SanitizeHWAddress) {\n-#if LLVM_VERSION_GE(11, 0)\n       OptimizerLastEPCallbacks.push_back(\n         [SanitizerOptions](ModulePassManager &MPM, OptimizationLevel Level) {\n #if LLVM_VERSION_GE(14, 0)\n@@ -1003,14 +913,6 @@ LLVMRustOptimizeWithNewPassManager(\n #endif\n         }\n       );\n-#else\n-      PipelineStartEPCallbacks.push_back(\n-        [SanitizerOptions](ModulePassManager &MPM, OptimizationLevel Level) {\n-          MPM.addPass(HWAddressSanitizerPass(\n-              /*CompileKernel=*/false, SanitizerOptions->SanitizeHWAddressRecover));\n-        }\n-      );\n-#endif\n     }\n   }\n \n@@ -1025,48 +927,16 @@ LLVMRustOptimizeWithNewPassManager(\n     // At the same time, the LTO pipelines do support O0 and using them is required.\n     bool IsLTO = OptStage == LLVMRustOptStage::ThinLTO || OptStage == LLVMRustOptStage::FatLTO;\n     if (OptLevel == OptimizationLevel::O0 && !IsLTO) {\n-#if LLVM_VERSION_GE(12, 0)\n       for (const auto &C : PipelineStartEPCallbacks)\n         PB.registerPipelineStartEPCallback(C);\n       for (const auto &C : OptimizerLastEPCallbacks)\n         PB.registerOptimizerLastEPCallback(C);\n \n       // Pass false as we manually schedule ThinLTOBufferPasses below.\n       MPM = PB.buildO0DefaultPipeline(OptLevel, /* PreLinkLTO */ false);\n-#else\n-      for (const auto &C : PipelineStartEPCallbacks)\n-        C(MPM, OptLevel);\n-\n-# if LLVM_VERSION_GE(11, 0)\n-      for (const auto &C : OptimizerLastEPCallbacks)\n-        C(MPM, OptLevel);\n-# else\n-      if (!OptimizerLastEPCallbacks.empty()) {\n-        FunctionPassManager FPM(DebugPassManager);\n-        for (const auto &C : OptimizerLastEPCallbacks)\n-          C(FPM, OptLevel);\n-        MPM.addPass(createModuleToFunctionPassAdaptor(std::move(FPM)));\n-      }\n-# endif\n-\n-      MPM.addPass(AlwaysInlinerPass(EmitLifetimeMarkers));\n-\n-      if (PGOOpt) {\n-        PB.addPGOInstrPassesForO0(\n-            MPM, DebugPassManager, PGOOpt->Action == PGOOptions::IRInstr,\n-            /*IsCS=*/false, PGOOpt->ProfileFile, PGOOpt->ProfileRemappingFile);\n-      }\n-#endif\n     } else {\n-#if LLVM_VERSION_GE(12, 0)\n       for (const auto &C : PipelineStartEPCallbacks)\n         PB.registerPipelineStartEPCallback(C);\n-#else\n-      for (const auto &C : PipelineStartEPCallbacks)\n-        PB.registerPipelineStartEPCallback([C, OptLevel](ModulePassManager &MPM) {\n-          C(MPM, OptLevel);\n-        });\n-#endif\n       if (OptStage != LLVMRustOptStage::PreLinkThinLTO) {\n         for (const auto &C : OptimizerLastEPCallbacks)\n           PB.registerOptimizerLastEPCallback(C);\n@@ -1077,52 +947,27 @@ LLVMRustOptimizeWithNewPassManager(\n         MPM = PB.buildPerModuleDefaultPipeline(OptLevel, DebugPassManager);\n         break;\n       case LLVMRustOptStage::PreLinkThinLTO:\n-#if LLVM_VERSION_GE(12, 0)\n         MPM = PB.buildThinLTOPreLinkDefaultPipeline(OptLevel);\n         // The ThinLTOPreLink pipeline already includes ThinLTOBuffer passes. However, callback\n         // passes may still run afterwards. This means we need to run the buffer passes again.\n         // FIXME: In LLVM 13, the ThinLTOPreLink pipeline also runs OptimizerLastEPCallbacks\n         // before the RequiredLTOPreLinkPasses, in which case we can remove these hacks.\n         if (OptimizerLastEPCallbacks.empty())\n           NeedThinLTOBufferPasses = false;\n-#else\n-        MPM = PB.buildThinLTOPreLinkDefaultPipeline(OptLevel, DebugPassManager);\n-#endif\n-#if LLVM_VERSION_GE(11, 0)\n         for (const auto &C : OptimizerLastEPCallbacks)\n           C(MPM, OptLevel);\n-#else\n-        if (!OptimizerLastEPCallbacks.empty()) {\n-          FunctionPassManager FPM(DebugPassManager);\n-          for (const auto &C : OptimizerLastEPCallbacks)\n-            C(FPM, OptLevel);\n-          MPM.addPass(createModuleToFunctionPassAdaptor(std::move(FPM)));\n-        }\n-#endif\n         break;\n       case LLVMRustOptStage::PreLinkFatLTO:\n-#if LLVM_VERSION_GE(12, 0)\n         MPM = PB.buildLTOPreLinkDefaultPipeline(OptLevel);\n         NeedThinLTOBufferPasses = false;\n-#else\n-        MPM = PB.buildLTOPreLinkDefaultPipeline(OptLevel, DebugPassManager);\n-#endif\n         break;\n       case LLVMRustOptStage::ThinLTO:\n         // FIXME: Does it make sense to pass the ModuleSummaryIndex?\n         // It only seems to be needed for C++ specific optimizations.\n-#if LLVM_VERSION_GE(12, 0)\n         MPM = PB.buildThinLTODefaultPipeline(OptLevel, nullptr);\n-#else\n-        MPM = PB.buildThinLTODefaultPipeline(OptLevel, DebugPassManager, nullptr);\n-#endif\n         break;\n       case LLVMRustOptStage::FatLTO:\n-#if LLVM_VERSION_GE(12, 0)\n         MPM = PB.buildLTODefaultPipeline(OptLevel, nullptr);\n-#else\n-        MPM = PB.buildLTODefaultPipeline(OptLevel, DebugPassManager, nullptr);\n-#endif\n         break;\n       }\n     }\n@@ -1552,7 +1397,6 @@ LLVMRustFreeThinLTOData(LLVMRustThinLTOData *Data) {\n // `ProcessThinLTOModule` function. Here they're split up into separate steps\n // so rustc can save off the intermediate bytecode between each step.\n \n-#if LLVM_VERSION_GE(11, 0)\n static bool\n clearDSOLocalOnDeclarations(Module &Mod, TargetMachine &TM) {\n   // When linking an ELF shared object, dso_local should be dropped. We\n@@ -1563,20 +1407,15 @@ clearDSOLocalOnDeclarations(Module &Mod, TargetMachine &TM) {\n       Mod.getPIELevel() == PIELevel::Default;\n   return ClearDSOLocalOnDeclarations;\n }\n-#endif\n \n extern \"C\" bool\n LLVMRustPrepareThinLTORename(const LLVMRustThinLTOData *Data, LLVMModuleRef M,\n                              LLVMTargetMachineRef TM) {\n   Module &Mod = *unwrap(M);\n   TargetMachine &Target = *unwrap(TM);\n \n-#if LLVM_VERSION_GE(11, 0)\n   bool ClearDSOLocal = clearDSOLocalOnDeclarations(Mod, Target);\n   bool error = renameModuleForThinLTO(Mod, Data->Index, ClearDSOLocal);\n-#else\n-  bool error = renameModuleForThinLTO(Mod, Data->Index);\n-#endif\n \n   if (error) {\n     LLVMRustSetLastError(\"renameModuleForThinLTO failed\");\n@@ -1645,12 +1484,8 @@ LLVMRustPrepareThinLTOImport(const LLVMRustThinLTOData *Data, LLVMModuleRef M,\n \n     return MOrErr;\n   };\n-#if LLVM_VERSION_GE(11, 0)\n   bool ClearDSOLocal = clearDSOLocalOnDeclarations(Mod, Target);\n   FunctionImporter Importer(Data->Index, Loader, ClearDSOLocal);\n-#else\n-  FunctionImporter Importer(Data->Index, Loader);\n-#endif\n   Expected<bool> Result = Importer.importFunctions(Mod, ImportList);\n   if (!Result) {\n     LLVMRustSetLastError(toString(Result.takeError()).c_str());"}, {"sha": "e77d29bed7122fd466e77cb5c226df615fe409b8", "filename": "compiler/rustc_llvm/llvm-wrapper/RustWrapper.cpp", "status": "modified", "additions": 0, "deletions": 38, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -263,11 +263,7 @@ extern \"C\" void LLVMRustAddByValCallSiteAttr(LLVMValueRef Instr, unsigned Index,\n extern \"C\" void LLVMRustAddStructRetCallSiteAttr(LLVMValueRef Instr, unsigned Index,\n                                                  LLVMTypeRef Ty) {\n   CallBase *Call = unwrap<CallBase>(Instr);\n-#if LLVM_VERSION_GE(12, 0)\n   Attribute Attr = Attribute::getWithStructRetType(Call->getContext(), unwrap(Ty));\n-#else\n-  Attribute Attr = Attribute::get(Call->getContext(), Attribute::StructRet);\n-#endif\n   AddAttribute(Call, Index, Attr);\n }\n \n@@ -311,11 +307,7 @@ extern \"C\" void LLVMRustAddByValAttr(LLVMValueRef Fn, unsigned Index,\n extern \"C\" void LLVMRustAddStructRetAttr(LLVMValueRef Fn, unsigned Index,\n                                          LLVMTypeRef Ty) {\n   Function *F = unwrap<Function>(Fn);\n-#if LLVM_VERSION_GE(12, 0)\n   Attribute Attr = Attribute::getWithStructRetType(F->getContext(), unwrap(Ty));\n-#else\n-  Attribute Attr = Attribute::get(F->getContext(), Attribute::StructRet);\n-#endif\n   AddAttribute(F, Index, Attr);\n }\n \n@@ -681,10 +673,8 @@ static Optional<DIFile::ChecksumKind> fromRust(LLVMRustChecksumKind Kind) {\n     return DIFile::ChecksumKind::CSK_MD5;\n   case LLVMRustChecksumKind::SHA1:\n     return DIFile::ChecksumKind::CSK_SHA1;\n-#if (LLVM_VERSION_MAJOR >= 11)\n   case LLVMRustChecksumKind::SHA256:\n     return DIFile::ChecksumKind::CSK_SHA256;\n-#endif\n   default:\n     report_fatal_error(\"bad ChecksumKind.\");\n   }\n@@ -999,14 +989,9 @@ extern \"C\" LLVMMetadataRef LLVMRustDIBuilderCreateUnionType(\n extern \"C\" LLVMMetadataRef LLVMRustDIBuilderCreateTemplateTypeParameter(\n     LLVMRustDIBuilderRef Builder, LLVMMetadataRef Scope,\n     const char *Name, size_t NameLen, LLVMMetadataRef Ty) {\n-#if LLVM_VERSION_GE(11, 0)\n   bool IsDefault = false; // FIXME: should we ever set this true?\n   return wrap(Builder->createTemplateTypeParameter(\n       unwrapDI<DIDescriptor>(Scope), StringRef(Name, NameLen), unwrapDI<DIType>(Ty), IsDefault));\n-#else\n-  return wrap(Builder->createTemplateTypeParameter(\n-      unwrapDI<DIDescriptor>(Scope), StringRef(Name, NameLen), unwrapDI<DIType>(Ty)));\n-#endif\n }\n \n extern \"C\" LLVMMetadataRef LLVMRustDIBuilderCreateNameSpace(\n@@ -1031,17 +1016,11 @@ extern \"C\" LLVMMetadataRef\n LLVMRustDIBuilderCreateDebugLocation(unsigned Line, unsigned Column,\n                                      LLVMMetadataRef ScopeRef,\n                                      LLVMMetadataRef InlinedAt) {\n-#if LLVM_VERSION_GE(12, 0)\n   MDNode *Scope = unwrapDIPtr<MDNode>(ScopeRef);\n   DILocation *Loc = DILocation::get(\n       Scope->getContext(), Line, Column, Scope,\n       unwrapDIPtr<MDNode>(InlinedAt));\n   return wrap(Loc);\n-#else\n-  DebugLoc debug_loc = DebugLoc::get(Line, Column, unwrapDIPtr<MDNode>(ScopeRef),\n-                                     unwrapDIPtr<MDNode>(InlinedAt));\n-  return wrap(debug_loc.getAsMDNode());\n-#endif\n }\n \n extern \"C\" int64_t LLVMRustDIBuilderCreateOpDeref() {\n@@ -1246,27 +1225,18 @@ extern \"C\" LLVMTypeKind LLVMRustGetTypeKind(LLVMTypeRef Ty) {\n     return LLVMArrayTypeKind;\n   case Type::PointerTyID:\n     return LLVMPointerTypeKind;\n-#if LLVM_VERSION_GE(11, 0)\n   case Type::FixedVectorTyID:\n     return LLVMVectorTypeKind;\n-#else\n-  case Type::VectorTyID:\n-    return LLVMVectorTypeKind;\n-#endif\n   case Type::X86_MMXTyID:\n     return LLVMX86_MMXTypeKind;\n   case Type::TokenTyID:\n     return LLVMTokenTypeKind;\n-#if LLVM_VERSION_GE(11, 0)\n   case Type::ScalableVectorTyID:\n     return LLVMScalableVectorTypeKind;\n   case Type::BFloatTyID:\n     return LLVMBFloatTypeKind;\n-#endif\n-#if LLVM_VERSION_GE(12, 0)\n   case Type::X86_AMXTyID:\n     return LLVMX86_AMXTypeKind;\n-#endif\n   }\n   report_fatal_error(\"Unhandled TypeID.\");\n }\n@@ -1724,23 +1694,15 @@ LLVMRustBuildVectorReduceMax(LLVMBuilderRef B, LLVMValueRef Src, bool IsSigned)\n }\n extern \"C\" LLVMValueRef\n LLVMRustBuildVectorReduceFMin(LLVMBuilderRef B, LLVMValueRef Src, bool NoNaN) {\n-#if LLVM_VERSION_GE(12, 0)\n   Instruction *I = unwrap(B)->CreateFPMinReduce(unwrap(Src));\n   I->setHasNoNaNs(NoNaN);\n   return wrap(I);\n-#else\n-  return wrap(unwrap(B)->CreateFPMinReduce(unwrap(Src), NoNaN));\n-#endif\n }\n extern \"C\" LLVMValueRef\n LLVMRustBuildVectorReduceFMax(LLVMBuilderRef B, LLVMValueRef Src, bool NoNaN) {\n-#if LLVM_VERSION_GE(12, 0)\n   Instruction *I = unwrap(B)->CreateFPMaxReduce(unwrap(Src));\n   I->setHasNoNaNs(NoNaN);\n   return wrap(I);\n-#else\n-  return wrap(unwrap(B)->CreateFPMaxReduce(unwrap(Src), NoNaN));\n-#endif\n }\n \n extern \"C\" LLVMValueRef"}, {"sha": "37578e30f6d0f698a4185ac5d23e0c410c5a063c", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -378,11 +378,11 @@ fn check_llvm_version(builder: &Builder<'_>, llvm_config: &Path) {\n     let version = output(cmd.arg(\"--version\"));\n     let mut parts = version.split('.').take(2).filter_map(|s| s.parse::<u32>().ok());\n     if let (Some(major), Some(_minor)) = (parts.next(), parts.next()) {\n-        if major >= 10 {\n+        if major >= 12 {\n             return;\n         }\n     }\n-    panic!(\"\\n\\nbad LLVM version: {}, need >=10.0\\n\\n\", version)\n+    panic!(\"\\n\\nbad LLVM version: {}, need >=12.0\\n\\n\", version)\n }\n \n fn configure_cmake("}, {"sha": "df1fbc29cf5e6fd0a39ed10108b58c8f449c1a7f", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-12/Dockerfile", "status": "renamed", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-12%2FDockerfile?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,6 @@\n-FROM ubuntu:18.04\n+FROM ubuntu:20.04\n \n+ARG DEBIAN_FRONTEND=noninteractive\n RUN apt-get update && apt-get install -y --no-install-recommends \\\n   g++ \\\n   gcc-multilib \\\n@@ -13,8 +14,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   cmake \\\n   sudo \\\n   gdb \\\n-  llvm-10-tools \\\n-  llvm-10-dev \\\n+  llvm-12-tools \\\n+  llvm-12-dev \\\n   libedit-dev \\\n   libssl-dev \\\n   pkg-config \\\n@@ -28,7 +29,7 @@ RUN sh /scripts/sccache.sh\n # using llvm-link-shared due to libffi issues -- see #34486\n ENV RUST_CONFIGURE_ARGS \\\n       --build=x86_64-unknown-linux-gnu \\\n-      --llvm-root=/usr/lib/llvm-10 \\\n+      --llvm-root=/usr/lib/llvm-12 \\\n       --enable-llvm-link-shared \\\n       --set rust.thin-lto-import-instr-limit=10\n ", "previous_filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-10/Dockerfile"}, {"sha": "c51c0892fe67980342293bc2d923d9ae67cf0de1", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -284,7 +284,7 @@ jobs:\n           - name: mingw-check\n             <<: *job-linux-xl\n \n-          - name: x86_64-gnu-llvm-10\n+          - name: x86_64-gnu-llvm-12\n             <<: *job-linux-xl\n \n           - name: x86_64-gnu-tools\n@@ -431,7 +431,7 @@ jobs:\n           - name: x86_64-gnu-distcheck\n             <<: *job-linux-xl\n \n-          - name: x86_64-gnu-llvm-10\n+          - name: x86_64-gnu-llvm-12\n             env:\n               RUST_BACKTRACE: 1\n             <<: *job-linux-xl"}, {"sha": "5196aa9fa1759e3a0c9b0b051113fcb491d68a73", "filename": "src/test/assembly/asm/aarch64-modifiers.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-modifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-modifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Faarch64-modifiers.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: -O\n // compile-flags: --target aarch64-unknown-linux-gnu"}, {"sha": "c2ec4e911b9d17152ae919bad65f424347a1e7d7", "filename": "src/test/assembly/asm/aarch64-outline-atomics.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-outline-atomics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-outline-atomics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Faarch64-outline-atomics.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // assembly-output: emit-asm\n // compile-flags: -O\n // compile-flags: --target aarch64-unknown-linux-gnu"}, {"sha": "66c39a48c6e1d5fbc1ecb2ea3207c5dedeb4af37", "filename": "src/test/assembly/asm/aarch64-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Faarch64-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Faarch64-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: --target aarch64-unknown-linux-gnu\n // needs-llvm-components: aarch64"}, {"sha": "a6985a3bf5c6b6313c13b1e64b1f7bc8bd4e1947", "filename": "src/test/assembly/asm/arm-modifiers.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Farm-modifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Farm-modifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Farm-modifiers.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: -O\n // compile-flags: --target armv7-unknown-linux-gnueabihf"}, {"sha": "c848e3284ff1f06bb1926b6ba7587e13b2bb5983", "filename": "src/test/assembly/asm/arm-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Farm-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Farm-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Farm-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: --target armv7-unknown-linux-gnueabihf\n // compile-flags: -C target-feature=+neon"}, {"sha": "1c981040d601474da4547213aa610003c4e16e0d", "filename": "src/test/assembly/asm/global_asm.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fglobal_asm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fglobal_asm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fglobal_asm.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-x86_64\n // assembly-output: emit-asm\n // compile-flags: -C llvm-args=--x86-asm-syntax=intel"}, {"sha": "2156d77233d83888f99ed4ee9454596dfb4920e2", "filename": "src/test/assembly/asm/hexagon-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fhexagon-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fhexagon-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fhexagon-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: --target hexagon-unknown-linux-musl\n // needs-llvm-components: hexagon"}, {"sha": "eb6627639f159d5d77a02c6e9756b7cdcffa5204", "filename": "src/test/assembly/asm/mips-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // revisions: mips32 mips64\n // assembly-output: emit-asm\n //[mips32] compile-flags: --target mips-unknown-linux-gnu"}, {"sha": "cc816fd78f81e2063c66a74e2740afe941b2182f", "filename": "src/test/assembly/asm/nvptx-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fnvptx-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fnvptx-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fnvptx-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: --target nvptx64-nvidia-cuda\n // compile-flags: --crate-type cdylib"}, {"sha": "342998245315e8be0eeb55ce1bfb4c235b218d3b", "filename": "src/test/assembly/asm/powerpc-types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,4 @@\n-// min-llvm-version: 10.0.1\n+// min-llvm-version: 12.0.1\n // revisions: powerpc powerpc64\n // assembly-output: emit-asm\n //[powerpc] compile-flags: --target powerpc-unknown-linux-gnu"}, {"sha": "c510689b42bff788ce2ac9626c10a10446eabf08", "filename": "src/test/assembly/asm/riscv-types.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,12 +1,10 @@\n-// min-llvm-version: 10.0.1\n // revisions: riscv64 riscv32\n // assembly-output: emit-asm\n //[riscv64] compile-flags: --target riscv64imac-unknown-none-elf\n //[riscv64] needs-llvm-components: riscv\n //[riscv32] compile-flags: --target riscv32imac-unknown-none-elf\n //[riscv32] needs-llvm-components: riscv\n // compile-flags: -C target-feature=+d\n-// min-system-llvm-version: 12.0\n \n #![feature(no_core, lang_items, rustc_attrs)]\n #![crate_type = \"rlib\"]"}, {"sha": "b8a4ca08df1cc8ce2d06a39ad7513558b69ede8c", "filename": "src/test/assembly/asm/s390x-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fs390x-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fs390x-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fs390x-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // revisions: s390x\n // assembly-output: emit-asm\n //[s390x] compile-flags: --target s390x-unknown-linux-gnu"}, {"sha": "4b2e83e69b1065ba5701286557cbcbc373176632", "filename": "src/test/assembly/asm/wasm-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fwasm-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fwasm-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fwasm-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // assembly-output: emit-asm\n // compile-flags: --target wasm32-unknown-unknown\n // compile-flags: --crate-type cdylib"}, {"sha": "574fdf12cd0401194a11afd13c5fbd4512929d9c", "filename": "src/test/assembly/asm/x86-modifiers.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // revisions: x86_64 i686\n // assembly-output: emit-asm\n // compile-flags: -O"}, {"sha": "81be79cbaac18c25d8e9516bd8bb6327bdb6b92d", "filename": "src/test/assembly/asm/x86-types.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // revisions: x86_64 i686\n // assembly-output: emit-asm\n //[x86_64] compile-flags: --target x86_64-unknown-linux-gnu"}, {"sha": "6c41e0b78f13790fefa12e8850485845ec675d7b", "filename": "src/test/assembly/static-relocation-model.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0.0\n // revisions: x64 A64 ppc64le\n // assembly-output: emit-asm\n // [x64] compile-flags: --target x86_64-unknown-linux-gnu -Crelocation-model=static"}, {"sha": "c3ffaeb9547b3c20a43168cc88d3aed04cbb29d3", "filename": "src/test/codegen/alloc-optimisation.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Falloc-optimisation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Falloc-optimisation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Falloc-optimisation.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n //\n // no-system-llvm\n-// min-llvm-version: 10.0.1\n // compile-flags: -O\n #![crate_type=\"lib\"]\n "}, {"sha": "ce13a7ff938c8beb23ce18f7c230dd6ddfc4f8aa", "filename": "src/test/codegen/asm-powerpc-clobbers.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fasm-powerpc-clobbers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fasm-powerpc-clobbers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fasm-powerpc-clobbers.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // revisions: powerpc powerpc64 powerpc64le\n //[powerpc] compile-flags: --target powerpc-unknown-linux-gnu\n //[powerpc] needs-llvm-components: powerpc"}, {"sha": "2deabcaa6c21f289266b50aada863efa96ba9c3f", "filename": "src/test/codegen/binary-search-index-no-bound-check.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fbinary-search-index-no-bound-check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fbinary-search-index-no-bound-check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fbinary-search-index-no-bound-check.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 11.0.0\n // compile-flags: -O\n // ignore-debug: the debug assertions get in the way\n #![crate_type = \"lib\"]"}, {"sha": "aa66c2ed08edb777fc24e53c76b870c99b93026d", "filename": "src/test/codegen/enum-bounds-check-derived-idx.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-derived-idx.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-derived-idx.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fenum-bounds-check-derived-idx.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // This test checks an optimization that is not guaranteed to work. This test case should not block\n // a future LLVM update.\n // compile-flags: -O\n-// min-llvm-version: 11.0\n \n #![crate_type = \"lib\"]\n "}, {"sha": "b26945bc54940642ee5fc04aa5600bd13a8f87b4", "filename": "src/test/codegen/enum-bounds-check-issue-13926.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-13926.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-13926.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-13926.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // This test checks an optimization that is not guaranteed to work. This test case should not block\n // a future LLVM update.\n // compile-flags: -O\n-// min-llvm-version: 11.0\n \n #![crate_type = \"lib\"]\n "}, {"sha": "a1fa1387d9441d0f00d83b8e87fae37d51b7663e", "filename": "src/test/codegen/enum-bounds-check-issue-82871.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-82871.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-82871.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fenum-bounds-check-issue-82871.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,4 @@\n // compile-flags: -O\n-// min-llvm-version: 11.0\n \n #![crate_type = \"lib\"]\n "}, {"sha": "3e10e227e55fef2604a0e707557ebc3c50fe1010", "filename": "src/test/codegen/function-arguments.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Ffunction-arguments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Ffunction-arguments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Ffunction-arguments.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,4 @@\n // compile-flags: -O -C no-prepopulate-passes\n-//\n-// min-system-llvm-version: 12.0\n \n #![crate_type = \"lib\"]\n #![feature(rustc_attrs)]"}, {"sha": "e5ee94e1f45e137263d0971028e79dff857a52fb", "filename": "src/test/codegen/issue-27130.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-27130.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-27130.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-27130.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,4 @@\n // compile-flags: -O\n-// min-llvm-version: 11.0\n \n #![crate_type = \"lib\"]\n "}, {"sha": "a09c4bcfbeac539242fd388fcea324cb266afe37", "filename": "src/test/codegen/issue-73031.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73031.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73031.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-73031.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0.0\n // compile-flags: -O\n #![crate_type = \"lib\"]\n "}, {"sha": "8d07a67a1b451807d84bc90a70a302bdcb2dc04f", "filename": "src/test/codegen/issue-73396-bounds-check-after-position.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73396-bounds-check-after-position.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73396-bounds-check-after-position.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-73396-bounds-check-after-position.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 11.0.0\n // compile-flags: -O\n // ignore-debug: the debug assertions get in the way\n #![crate_type = \"lib\"]"}, {"sha": "1ad05906e21abe61ad351258e12569ff81d09a16", "filename": "src/test/codegen/issue-73827-bounds-check-index-in-subexpr.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73827-bounds-check-index-in-subexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-73827-bounds-check-index-in-subexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-73827-bounds-check-index-in-subexpr.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // This test checks that bounds checks are elided when\n // index is part of a (x | y) < C style condition\n \n-// min-llvm-version: 11.0.0\n // compile-flags: -O\n \n #![crate_type = \"lib\"]"}, {"sha": "2d363d8f73be9161fc3a27cd2851292a1b505fbf", "filename": "src/test/codegen/issue-75525-bounds-checks.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-75525-bounds-checks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-75525-bounds-checks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-75525-bounds-checks.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n // Regression test for #75525, verifies that no bounds checks are generated.\n \n-// min-llvm-version: 12.0.0\n // compile-flags: -O\n \n #![crate_type = \"lib\"]"}, {"sha": "470a9e04096050d321bafd74e899ba3a8a07084d", "filename": "src/test/codegen/issue-75546.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-75546.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-75546.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-75546.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0.0\n // compile-flags: -O\n #![crate_type = \"lib\"]\n "}, {"sha": "4cc82414546b298c664be37db0e83a8b0fd9f0ca", "filename": "src/test/codegen/issue-77812.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-77812.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fissue-77812.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fissue-77812.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0.0\n // compile-flags: -O\n #![crate_type = \"lib\"]\n "}, {"sha": "fa9c66b47c0a47d475233733bf2f7b69ba4fbd20", "filename": "src/test/codegen/non-terminate/infinite-loop-1.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-1.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // compile-flags: -C opt-level=3\n \n #![crate_type = \"lib\"]"}, {"sha": "81d62ab33d77855628ddb9e716fa3016ad91c118", "filename": "src/test/codegen/non-terminate/infinite-loop-2.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-loop-2.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // compile-flags: -C opt-level=3\n \n #![crate_type = \"lib\"]"}, {"sha": "6d1f2d4bf8f4ad5ab60c8de9a56ffb6028e11a93", "filename": "src/test/codegen/non-terminate/infinite-recursion.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-recursion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-recursion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnon-terminate%2Finfinite-recursion.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // compile-flags: -C opt-level=3\n \n #![crate_type = \"lib\"]"}, {"sha": "5e25e04fc24ac2136530923073d590e28e6f622b", "filename": "src/test/codegen/non-terminate/nonempty-infinite-loop.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Fnonempty-infinite-loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fnon-terminate%2Fnonempty-infinite-loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fnon-terminate%2Fnonempty-infinite-loop.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // compile-flags: -C opt-level=3\n \n #![crate_type = \"lib\"]"}, {"sha": "a61dad218cd85eda032383c0a2f5cc40604ee9f9", "filename": "src/test/codegen/repr-transparent-aggregates-1.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-1.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // compile-flags: -C no-prepopulate-passes\n //\n \n-// min-system-llvm-version: 12.0\n // ignore-arm\n // ignore-aarch64\n // ignore-mips"}, {"sha": "b68e8e9ebe9b463a1b1e1a878e575bd1d371e322", "filename": "src/test/codegen/repr-transparent-aggregates-2.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-2.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // compile-flags: -C no-prepopulate-passes\n //\n \n-// min-system-llvm-version: 12.0\n // ignore-aarch64\n // ignore-emscripten\n // ignore-mips64"}, {"sha": "0db17e6b13a80e513acd7437260907b3cf27d9b4", "filename": "src/test/codegen/repr-transparent-aggregates-3.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Frepr-transparent-aggregates-3.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // compile-flags: -C no-prepopulate-passes\n //\n \n-// min-system-llvm-version: 12.0\n // only-mips64\n // See repr-transparent.rs\n "}, {"sha": "dc7db8e23728ea9f3d3ae64f275014aa437bdd3c", "filename": "src/test/codegen/src-hash-algorithm/src-hash-algorithm-sha256.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fsrc-hash-algorithm%2Fsrc-hash-algorithm-sha256.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fsrc-hash-algorithm%2Fsrc-hash-algorithm-sha256.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fsrc-hash-algorithm%2Fsrc-hash-algorithm-sha256.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,4 @@\n // compile-flags: -g -Z src-hash-algorithm=sha256\n-// min-llvm-version: 11.0\n \n #![crate_type = \"lib\"]\n "}, {"sha": "a656c9e6f656a8f01db6717e3bfff5ec27d5d3bc", "filename": "src/test/codegen/vec-in-place.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fvec-in-place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fvec-in-place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fvec-in-place.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n // ignore-debug: the debug assertions get in the way\n // compile-flags: -O\n-// min-llvm-version: 11.0\n #![crate_type = \"lib\"]\n \n // Ensure that trivial casts of vec elements are O(1)"}, {"sha": "eb06c4975bb7c2dc9cde840997c74af332f33758", "filename": "src/test/codegen/wasm_casts_trapping.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fwasm_casts_trapping.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fcodegen%2Fwasm_casts_trapping.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fwasm_casts_trapping.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n // only-wasm32\n // compile-flags: -C target-feature=-nontrapping-fptoint\n-// min-llvm-version: 12.0\n #![crate_type = \"lib\"]\n \n // CHECK-LABEL: @cast_f64_i64"}, {"sha": "8722d9e10d91d204fa457b5afc93eb1b3f1f7e42", "filename": "src/test/run-make-fulldeps/coverage-llvmir/Makefile", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-llvmir%2FMakefile?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,4 @@\n # needs-profiler-support\n-# min-llvm-version: 11.0\n \n -include ../coverage/coverage_tools.mk\n "}, {"sha": "4adf02bee0af47eaf85a133e0871c87f6746695a", "filename": "src/test/run-make-fulldeps/coverage-reports/Makefile", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-reports%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-reports%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fcoverage-reports%2FMakefile?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n # needs-profiler-support\n # ignore-windows-gnu\n-# min-llvm-version: 11.0\n \n # FIXME(mati865): MinGW GCC miscompiles compiler-rt profiling library but with Clang it works\n # properly. Since we only have GCC on the CI ignore the test for now."}, {"sha": "e8e62efe01c140de3ddc5c462469aa06859ac20d", "filename": "src/test/run-make-fulldeps/split-debuginfo/Makefile", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fsplit-debuginfo%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fsplit-debuginfo%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsplit-debuginfo%2FMakefile?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,5 @@\n -include ../tools.mk\n \n-# min-llvm-version: 11.0\n-\n all: off packed unpacked\n \n ifeq ($(UNAME),Darwin)"}, {"sha": "ef61ff0450157a73c603b9ec1cff626547fa12ec", "filename": "src/test/run-make-fulldeps/split-dwarf/Makefile", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fsplit-dwarf%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Frun-make-fulldeps%2Fsplit-dwarf%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsplit-dwarf%2FMakefile?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n -include ../tools.mk\n \n # only-linux\n-# min-llvm-version: 11.0\n \n all:\n \t$(RUSTC) -Z unstable-options -C split-debuginfo=packed -C debuginfo=2 foo.rs -g"}, {"sha": "05165b2d46c0dd3eb85fccd5dd7711d57592b269", "filename": "src/test/ui/asm/aarch64/const.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fconst.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fconst.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fconst.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-aarch64\n // run-pass\n // revisions: mirunsafeck thirunsafeck"}, {"sha": "143ed1824039c91b4fb91ad789a6a600659e5d0a", "filename": "src/test/ui/asm/aarch64/srcloc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-aarch64\n // build-fail\n // compile-flags: -Ccodegen-units=1"}, {"sha": "f03fbf28d3184f55ae9d618025fd7287422d28c9", "filename": "src/test/ui/asm/aarch64/srcloc.stderr", "status": "modified", "additions": 23, "deletions": 23, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsrcloc.stderr?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,5 @@\n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:11:15\n+  --> $DIR/srcloc.rs:10:15\n    |\n LL |         asm!(\"invalid_instruction\");\n    |               ^\n@@ -11,7 +11,7 @@ LL |     invalid_instruction\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:15:13\n+  --> $DIR/srcloc.rs:14:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -23,7 +23,7 @@ LL |             invalid_instruction\n    |             ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:20:13\n+  --> $DIR/srcloc.rs:19:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -35,7 +35,7 @@ LL |             invalid_instruction\n    |             ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:26:13\n+  --> $DIR/srcloc.rs:25:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -47,7 +47,7 @@ LL |             invalid_instruction\n    |             ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:33:13\n+  --> $DIR/srcloc.rs:32:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -59,7 +59,7 @@ LL |             invalid_instruction\n    |             ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:38:14\n+  --> $DIR/srcloc.rs:37:14\n    |\n LL |         asm!(concat!(\"invalid\", \"_\", \"instruction\"));\n    |              ^\n@@ -71,7 +71,7 @@ LL |     invalid_instruction\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:42:14\n+  --> $DIR/srcloc.rs:41:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -83,7 +83,7 @@ LL |     invalid_instruction\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:48:14\n+  --> $DIR/srcloc.rs:47:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -95,7 +95,7 @@ LL | invalid_instruction\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:55:14\n+  --> $DIR/srcloc.rs:54:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -107,7 +107,7 @@ LL | invalid_instruction\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:62:13\n+  --> $DIR/srcloc.rs:61:13\n    |\n LL |             concat!(\"invalid\", \"_\", \"instruction\"),\n    |             ^\n@@ -119,7 +119,7 @@ LL | invalid_instruction\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:69:13\n+  --> $DIR/srcloc.rs:68:13\n    |\n LL |             concat!(\"invalid\", \"_\", \"instruction\"),\n    |             ^\n@@ -131,7 +131,7 @@ LL | invalid_instruction\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:76:14\n+  --> $DIR/srcloc.rs:75:14\n    |\n LL |             \"invalid_instruction1\",\n    |              ^\n@@ -143,7 +143,7 @@ LL |     invalid_instruction1\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:77:14\n+  --> $DIR/srcloc.rs:76:14\n    |\n LL |             \"invalid_instruction2\",\n    |              ^\n@@ -155,7 +155,7 @@ LL | invalid_instruction2\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:83:13\n+  --> $DIR/srcloc.rs:82:13\n    |\n LL |             concat!(\n    |             ^\n@@ -167,7 +167,7 @@ LL |     invalid_instruction1\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:83:13\n+  --> $DIR/srcloc.rs:82:13\n    |\n LL |             concat!(\n    |             ^\n@@ -179,7 +179,7 @@ LL | invalid_instruction2\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:92:13\n+  --> $DIR/srcloc.rs:91:13\n    |\n LL |             concat!(\n    |             ^\n@@ -191,7 +191,7 @@ LL |     invalid_instruction1\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:92:13\n+  --> $DIR/srcloc.rs:91:13\n    |\n LL |             concat!(\n    |             ^\n@@ -203,7 +203,7 @@ LL | invalid_instruction2\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:96:13\n+  --> $DIR/srcloc.rs:95:13\n    |\n LL |             concat!(\n    |             ^\n@@ -215,7 +215,7 @@ LL | invalid_instruction3\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:96:13\n+  --> $DIR/srcloc.rs:95:13\n    |\n LL |             concat!(\n    |             ^\n@@ -227,7 +227,7 @@ LL | invalid_instruction4\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:107:13\n+  --> $DIR/srcloc.rs:106:13\n    |\n LL |             concat!(\n    |             ^\n@@ -239,7 +239,7 @@ LL |     invalid_instruction1\n    |     ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:107:13\n+  --> $DIR/srcloc.rs:106:13\n    |\n LL |             concat!(\n    |             ^\n@@ -251,7 +251,7 @@ LL | invalid_instruction2\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:111:13\n+  --> $DIR/srcloc.rs:110:13\n    |\n LL |             concat!(\n    |             ^\n@@ -263,7 +263,7 @@ LL | invalid_instruction3\n    | ^\n \n error: unrecognized instruction mnemonic\n-  --> $DIR/srcloc.rs:111:13\n+  --> $DIR/srcloc.rs:110:13\n    |\n LL |             concat!(\n    |             ^"}, {"sha": "526555334cb882cd1cf2c5d97ef225bab56974fc", "filename": "src/test/ui/asm/aarch64/sym.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsym.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsym.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Faarch64%2Fsym.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-aarch64\n // only-linux\n // run-pass"}, {"sha": "dbf17755720829516155af2e69b864d2952e92ec", "filename": "src/test/ui/asm/x86_64/const.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fconst.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fconst.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fconst.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-x86_64\n // run-pass\n // revisions: mirunsafeck thirunsafeck"}, {"sha": "c4ccfb8016a7798e7bf87178a61ecf9d9f71fc47", "filename": "src/test/ui/asm/x86_64/srcloc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 10.0.1\n // only-x86_64\n // build-fail\n // compile-flags: -Ccodegen-units=1"}, {"sha": "77894657292fbb8e40d24488b952192d9c94017e", "filename": "src/test/ui/asm/x86_64/srcloc.stderr", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsrcloc.stderr?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,5 +1,5 @@\n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:11:15\n+  --> $DIR/srcloc.rs:10:15\n    |\n LL |         asm!(\"invalid_instruction\");\n    |               ^\n@@ -11,7 +11,7 @@ LL |     invalid_instruction\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:15:13\n+  --> $DIR/srcloc.rs:14:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -23,7 +23,7 @@ LL |             invalid_instruction\n    |             ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:20:13\n+  --> $DIR/srcloc.rs:19:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -35,7 +35,7 @@ LL |             invalid_instruction\n    |             ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:26:13\n+  --> $DIR/srcloc.rs:25:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -47,7 +47,7 @@ LL |             invalid_instruction\n    |             ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:33:13\n+  --> $DIR/srcloc.rs:32:13\n    |\n LL |             invalid_instruction\n    |             ^\n@@ -59,7 +59,7 @@ LL |             invalid_instruction\n    |             ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:38:14\n+  --> $DIR/srcloc.rs:37:14\n    |\n LL |         asm!(concat!(\"invalid\", \"_\", \"instruction\"));\n    |              ^\n@@ -71,7 +71,7 @@ LL |     invalid_instruction\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: scale factor without index register is ignored\n-  --> $DIR/srcloc.rs:41:15\n+  --> $DIR/srcloc.rs:40:15\n    |\n LL |         asm!(\"movaps %xmm3, (%esi, 2)\", options(att_syntax));\n    |               ^\n@@ -83,7 +83,7 @@ LL |     movaps %xmm3, (%esi, 2)\n    |                          ^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:45:14\n+  --> $DIR/srcloc.rs:44:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -95,7 +95,7 @@ LL |     invalid_instruction\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:51:14\n+  --> $DIR/srcloc.rs:50:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -107,7 +107,7 @@ LL | invalid_instruction\n    | ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:58:14\n+  --> $DIR/srcloc.rs:57:14\n    |\n LL |             \"invalid_instruction\",\n    |              ^\n@@ -119,7 +119,7 @@ LL | invalid_instruction\n    | ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:65:13\n+  --> $DIR/srcloc.rs:64:13\n    |\n LL |             concat!(\"invalid\", \"_\", \"instruction\"),\n    |             ^\n@@ -131,7 +131,7 @@ LL | invalid_instruction\n    | ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction'\n-  --> $DIR/srcloc.rs:72:13\n+  --> $DIR/srcloc.rs:71:13\n    |\n LL |             concat!(\"invalid\", \"_\", \"instruction\"),\n    |             ^\n@@ -143,7 +143,7 @@ LL | invalid_instruction\n    | ^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction1'\n-  --> $DIR/srcloc.rs:79:14\n+  --> $DIR/srcloc.rs:78:14\n    |\n LL |             \"invalid_instruction1\",\n    |              ^\n@@ -155,7 +155,7 @@ LL |     invalid_instruction1\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction2'\n-  --> $DIR/srcloc.rs:80:14\n+  --> $DIR/srcloc.rs:79:14\n    |\n LL |             \"invalid_instruction2\",\n    |              ^\n@@ -167,7 +167,7 @@ LL | invalid_instruction2\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction1'\n-  --> $DIR/srcloc.rs:86:13\n+  --> $DIR/srcloc.rs:85:13\n    |\n LL |             concat!(\n    |             ^\n@@ -179,7 +179,7 @@ LL |     invalid_instruction1\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction2'\n-  --> $DIR/srcloc.rs:86:13\n+  --> $DIR/srcloc.rs:85:13\n    |\n LL |             concat!(\n    |             ^\n@@ -191,7 +191,7 @@ LL | invalid_instruction2\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction1'\n-  --> $DIR/srcloc.rs:95:13\n+  --> $DIR/srcloc.rs:94:13\n    |\n LL |             concat!(\n    |             ^\n@@ -203,7 +203,7 @@ LL |     invalid_instruction1\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction2'\n-  --> $DIR/srcloc.rs:95:13\n+  --> $DIR/srcloc.rs:94:13\n    |\n LL |             concat!(\n    |             ^\n@@ -215,7 +215,7 @@ LL | invalid_instruction2\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction3'\n-  --> $DIR/srcloc.rs:99:13\n+  --> $DIR/srcloc.rs:98:13\n    |\n LL |             concat!(\n    |             ^\n@@ -227,7 +227,7 @@ LL | invalid_instruction3\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction4'\n-  --> $DIR/srcloc.rs:99:13\n+  --> $DIR/srcloc.rs:98:13\n    |\n LL |             concat!(\n    |             ^\n@@ -239,7 +239,7 @@ LL | invalid_instruction4\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction1'\n-  --> $DIR/srcloc.rs:110:13\n+  --> $DIR/srcloc.rs:109:13\n    |\n LL |             concat!(\n    |             ^\n@@ -251,7 +251,7 @@ LL |     invalid_instruction1\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction2'\n-  --> $DIR/srcloc.rs:110:13\n+  --> $DIR/srcloc.rs:109:13\n    |\n LL |             concat!(\n    |             ^\n@@ -263,7 +263,7 @@ LL | invalid_instruction2\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction3'\n-  --> $DIR/srcloc.rs:114:13\n+  --> $DIR/srcloc.rs:113:13\n    |\n LL |             concat!(\n    |             ^\n@@ -275,7 +275,7 @@ LL | invalid_instruction3\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: invalid instruction mnemonic 'invalid_instruction4'\n-  --> $DIR/srcloc.rs:114:13\n+  --> $DIR/srcloc.rs:113:13\n    |\n LL |             concat!(\n    |             ^"}, {"sha": "188d03e298e0182b734bb4dce9d5091aaef89589", "filename": "src/test/ui/asm/x86_64/sym.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsym.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsym.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fx86_64%2Fsym.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,4 @@\n-// min-llvm-version: 10.0.1\n+// min-llvm-version: 12.0.1\n // only-x86_64\n // only-linux\n // run-pass"}, {"sha": "d5c67af2b41464fab168132c2e405752193e8963", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-call/params-on-stack.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // build-fail\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n // needs-llvm-components: arm\n-// min-llvm-version: 11.0\n #![feature(abi_c_cmse_nonsecure_call, no_core, lang_items, intrinsics)]\n #![no_core]\n #[lang=\"sized\"]"}, {"sha": "9a1b0a38d5eacc21656b6023ac27bde63369119f", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-entry/params-on-stack.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,7 +1,6 @@\n // build-fail\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n // needs-llvm-components: arm\n-// min-llvm-version: 11.0\n #![feature(cmse_nonsecure_entry, no_core, lang_items)]\n #![no_core]\n #[lang=\"sized\"]"}, {"sha": "855749c14b9c3dc60bd5eb103c4cb914b9f6f96e", "filename": "src/test/ui/function-pointer/function-pointer-comparison-issue-54685.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Ffunction-pointer%2Ffunction-pointer-comparison-issue-54685.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Ffunction-pointer%2Ffunction-pointer-comparison-issue-54685.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffunction-pointer%2Ffunction-pointer-comparison-issue-54685.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,4 +1,3 @@\n-// min-llvm-version: 12.0\n // compile-flags: -C opt-level=3\n // run-pass\n "}, {"sha": "6e030f1cc487573adfdf21f91b0fbbcf45e3004c", "filename": "src/test/ui/issues/issue-69225-SCEVAddExpr-wrap-flag.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fissues%2Fissue-69225-SCEVAddExpr-wrap-flag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45591408b18e7f93fcf8c09210c9a5a102d84b37/src%2Ftest%2Fui%2Fissues%2Fissue-69225-SCEVAddExpr-wrap-flag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-69225-SCEVAddExpr-wrap-flag.rs?ref=45591408b18e7f93fcf8c09210c9a5a102d84b37", "patch": "@@ -1,6 +1,5 @@\n // run-fail\n // compile-flags: -C opt-level=3\n-// min-llvm-version: 11.0\n // error-pattern: index out of bounds: the len is 0 but the index is 16777216\n // ignore-wasm no panic or subprocess support\n // ignore-emscripten no panic or subprocess support"}]}