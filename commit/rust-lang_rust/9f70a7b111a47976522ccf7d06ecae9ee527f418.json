{"sha": "9f70a7b111a47976522ccf7d06ecae9ee527f418", "node_id": "C_kwDOAAsO6NoAKDlmNzBhN2IxMTFhNDc5NzY1MjJjY2Y3ZDA2ZWNhZTllZTUyN2Y0MTg", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-04-05T13:11:13Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2022-04-05T21:18:43Z"}, "message": "rustdoc changes for ~const Drop", "tree": {"sha": "5bb7c30d4794711f8812060971edd388540db0c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5bb7c30d4794711f8812060971edd388540db0c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f70a7b111a47976522ccf7d06ecae9ee527f418", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAmJMsjMACgkQPgar6Auq\n8Zz22RAArGR840QSSEaqIWMsgxeQhap5trRWxekvEszf8J4EMUbRe3MYGtXONe7R\nVVPll+Z5+jI9BeFtHI0K0m0Q+h/lbXPGL1WyaYaOpk/Gg1H8LugxMyG598JnJ6tt\nY2BAt/x1YZpNiT8OfTEs7VTNBRCM4aHAekeiSWyf0TkPqrFdd5OoSJ0rA5Oz9I3q\nQrid5yG4FFq88QEhZma8kwKeiOsZCPXgh0K5m9E4csYwvZk7Lty+e/R+1k30oPuU\nKpt+KMd6WRQgLPpIZaJq+gqxe3FZdu9IJctx+XnsK+cacMyRnJ+QMlnJYw7cvINW\n+JZJdjOsWG5lq3aptPBmQCnZBg67WBD24+a4tduQsLePcCqnrq1yvtfkh4O8zr4y\nIBU1yp//EkZtVZ+sRMIuHvoKnZCm/ysRV3pDeLw/myGkLaTbo1BryjHlrGr7XG5C\ntwO2pKh20zqi8mIiEHkXt1b/OO0o+K7ppvJic7CS3+aVreu13bUMN8i+GlpEQhvT\ncMB3K5KqpG3SvLqSHNwKVHCo51fOa+z25+TbBbCGeDRpSUWztWVzCbHdRab4wWtZ\n76YOgI8NfQYurqkp7EjsKWIym+opGKehJoV0fYpDJbvK+JqTc5+RJVv2yDpil/Fn\n9ms6OKaKis0ckX6ACyYN9GEfsQubrOGlNQJcGFnf16Ywjr5gfPE=\n=mFeS\n-----END PGP SIGNATURE-----", "payload": "tree 5bb7c30d4794711f8812060971edd388540db0c4\nparent b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1649164273 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1649193523 +0200\n\nrustdoc changes for ~const Drop\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f70a7b111a47976522ccf7d06ecae9ee527f418", "html_url": "https://github.com/rust-lang/rust/commit/9f70a7b111a47976522ccf7d06ecae9ee527f418", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f70a7b111a47976522ccf7d06ecae9ee527f418/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "url": "https://api.github.com/repos/rust-lang/rust/commits/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "html_url": "https://github.com/rust-lang/rust/commit/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4"}], "stats": {"total": 12, "additions": 2, "deletions": 10}, "files": [{"sha": "e6ef3c26e290a5a8a9b9a4b85cd3c1507555e40b", "filename": "src/librustdoc/clean/mod.rs", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f70a7b111a47976522ccf7d06ecae9ee527f418/src%2Flibrustdoc%2Fclean%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f70a7b111a47976522ccf7d06ecae9ee527f418/src%2Flibrustdoc%2Fclean%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fmod.rs?ref=9f70a7b111a47976522ccf7d06ecae9ee527f418", "patch": "@@ -116,22 +116,14 @@ impl Clean<Option<GenericBound>> for hir::GenericBound<'_> {\n                 )\n             }\n             hir::GenericBound::Trait(ref t, modifier) => {\n-                // `T: ~const Drop` is not equivalent to `T: Drop`, and we don't currently document `~const` bounds\n-                // because of its experimental status, so just don't show these.\n                 // `T: ~const Destruct` is hidden because `T: Destruct` is a no-op.\n                 if modifier == hir::TraitBoundModifier::MaybeConst\n-                    && [cx.tcx.lang_items().drop_trait(), cx.tcx.lang_items().destruct_trait()]\n-                        .iter()\n-                        .any(|tr| *tr == Some(t.trait_ref.trait_def_id().unwrap()))\n+                    && cx.tcx.lang_items().destruct_trait()\n+                        == Some(t.trait_ref.trait_def_id().unwrap())\n                 {\n                     return None;\n                 }\n \n-                #[cfg(bootstrap)]\n-                {\n-                    // FIXME: remove `lang_items().drop_trait()` from above logic,\n-                    // as well as the comment about `~const Drop` because it was renamed to `Destruct`.\n-                }\n                 GenericBound::TraitBound(t.clean(cx), modifier)\n             }\n         })"}]}