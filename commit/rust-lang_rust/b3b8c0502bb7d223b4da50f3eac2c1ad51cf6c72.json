{"sha": "b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIzYjhjMDUwMmJiN2QyMjNiNGRhNTBmM2VhYzJjMWFkNTFjZjZjNzI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-11T23:28:00Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-11T23:28:00Z"}, "message": "auto merge of #5845 : thestinger/rust/bool, r=catamorphism\n\nThis is mostly just to make deriving more convenient, which is probably why Haskell does this too.", "tree": {"sha": "0f63dd3e6629dc56cf5f4801139d449718f65c31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f63dd3e6629dc56cf5f4801139d449718f65c31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72", "html_url": "https://github.com/rust-lang/rust/commit/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bfeb6d124dc924e52a218387a388caf87964162f", "url": "https://api.github.com/repos/rust-lang/rust/commits/bfeb6d124dc924e52a218387a388caf87964162f", "html_url": "https://github.com/rust-lang/rust/commit/bfeb6d124dc924e52a218387a388caf87964162f"}, {"sha": "61b29993ddd531c6f53f7d21ddf28d26d4d63a21", "url": "https://api.github.com/repos/rust-lang/rust/commits/61b29993ddd531c6f53f7d21ddf28d26d4d63a21", "html_url": "https://github.com/rust-lang/rust/commit/61b29993ddd531c6f53f7d21ddf28d26d4d63a21"}], "stats": {"total": 99, "additions": 72, "deletions": 27}, "files": [{"sha": "6c60cec2595ef885f724ef1ab6a1f92935d35491", "filename": "src/libcore/bool.rs", "status": "modified", "additions": 72, "deletions": 27, "changes": 99, "blob_url": "https://github.com/rust-lang/rust/blob/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72/src%2Flibcore%2Fbool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72/src%2Flibcore%2Fbool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fbool.rs?ref=b3b8c0502bb7d223b4da50f3eac2c1ad51cf6c72", "patch": "@@ -8,14 +8,13 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-\n //! Boolean logic\n \n+#[cfg(notest)]\n+use cmp::{Eq, Ord, TotalOrd, Ordering};\n use option::{None, Option, Some};\n use from_str::FromStr;\n \n-#[cfg(notest)] use cmp;\n-\n /// Negation / inverse\n pub fn not(v: bool) -> bool { !v }\n \n@@ -73,40 +72,86 @@ pub fn all_values(blk: &fn(v: bool)) {\n }\n \n /// converts truth value to an 8 bit byte\n+#[inline(always)]\n pub fn to_bit(v: bool) -> u8 { if v { 1u8 } else { 0u8 } }\n \n #[cfg(notest)]\n-impl cmp::Eq for bool {\n+impl Ord for bool {\n+    #[inline(always)]\n+    fn lt(&self, other: &bool) -> bool { to_bit(*self) < to_bit(*other) }\n+    #[inline(always)]\n+    fn le(&self, other: &bool) -> bool { to_bit(*self) <= to_bit(*other) }\n+    #[inline(always)]\n+    fn gt(&self, other: &bool) -> bool { to_bit(*self) > to_bit(*other) }\n+    #[inline(always)]\n+    fn ge(&self, other: &bool) -> bool { to_bit(*self) >= to_bit(*other) }\n+}\n+\n+#[cfg(notest)]\n+impl TotalOrd for bool {\n+    #[inline(always)]\n+    fn cmp(&self, other: &bool) -> Ordering { to_bit(*self).cmp(&to_bit(*other)) }\n+}\n+\n+#[cfg(notest)]\n+impl Eq for bool {\n+    #[inline(always)]\n     fn eq(&self, other: &bool) -> bool { (*self) == (*other) }\n+    #[inline(always)]\n     fn ne(&self, other: &bool) -> bool { (*self) != (*other) }\n }\n \n-#[test]\n-pub fn test_bool_from_str() {\n-    use from_str::FromStr;\n+#[cfg(test)]\n+mod tests {\n+    use super::*;\n+    use prelude::*;\n \n-    do all_values |v| {\n-        assert!(Some(v) == FromStr::from_str(to_str(v)))\n+    #[test]\n+    fn test_bool_from_str() {\n+        use from_str::FromStr;\n+\n+        do all_values |v| {\n+            assert!(Some(v) == FromStr::from_str(to_str(v)))\n+        }\n     }\n-}\n \n-#[test]\n-pub fn test_bool_to_str() {\n-    assert!(to_str(false) == ~\"false\");\n-    assert!(to_str(true) == ~\"true\");\n-}\n+    #[test]\n+    fn test_bool_to_str() {\n+        assert!(to_str(false) == ~\"false\");\n+        assert!(to_str(true) == ~\"true\");\n+    }\n \n-#[test]\n-pub fn test_bool_to_bit() {\n-    do all_values |v| {\n-        assert!(to_bit(v) == if is_true(v) { 1u8 } else { 0u8 });\n+    #[test]\n+    fn test_bool_to_bit() {\n+        do all_values |v| {\n+            assert!(to_bit(v) == if is_true(v) { 1u8 } else { 0u8 });\n+        }\n     }\n-}\n \n-// Local Variables:\n-// mode: rust;\n-// fill-column: 78;\n-// indent-tabs-mode: nil\n-// c-basic-offset: 4\n-// buffer-file-coding-system: utf-8-unix\n-// End:\n+    #[test]\n+    fn test_bool_ord() {\n+        assert!(true > false);\n+        assert!(!(false > true));\n+\n+        assert!(false < true);\n+        assert!(!(true < false));\n+\n+        assert!(false <= false);\n+        assert!(false >= false);\n+        assert!(true <= true);\n+        assert!(true >= true);\n+\n+        assert!(false <= true);\n+        assert!(!(false >= true));\n+        assert!(true >= false);\n+        assert!(!(true <= false));\n+    }\n+\n+    #[test]\n+    fn test_bool_totalord() {\n+        assert_eq!(true.cmp(&true), Equal);\n+        assert_eq!(false.cmp(&false), Equal);\n+        assert_eq!(true.cmp(&false), Greater);\n+        assert_eq!(false.cmp(&true), Less);\n+    }\n+}"}]}