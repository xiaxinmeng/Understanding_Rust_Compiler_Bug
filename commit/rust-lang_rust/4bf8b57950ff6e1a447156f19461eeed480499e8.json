{"sha": "4bf8b57950ff6e1a447156f19461eeed480499e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiZjhiNTc5NTBmZjZlMWE0NDcxNTZmMTk0NjFlZWVkNDgwNDk5ZTg=", "commit": {"author": {"name": "F001", "email": "changchun.fan@qq.com", "date": "2018-05-26T11:55:40Z"}, "committer": {"name": "F001", "email": "changchun.fan@qq.com", "date": "2018-07-17T03:34:19Z"}, "message": "remove \"get_with\" method", "tree": {"sha": "8ab58652cd445e25dffe7853522ec3de61ec1dfe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8ab58652cd445e25dffe7853522ec3de61ec1dfe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bf8b57950ff6e1a447156f19461eeed480499e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bf8b57950ff6e1a447156f19461eeed480499e8", "html_url": "https://github.com/rust-lang/rust/commit/4bf8b57950ff6e1a447156f19461eeed480499e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bf8b57950ff6e1a447156f19461eeed480499e8/comments", "author": {"login": "F001", "id": 3314340, "node_id": "MDQ6VXNlcjMzMTQzNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/3314340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/F001", "html_url": "https://github.com/F001", "followers_url": "https://api.github.com/users/F001/followers", "following_url": "https://api.github.com/users/F001/following{/other_user}", "gists_url": "https://api.github.com/users/F001/gists{/gist_id}", "starred_url": "https://api.github.com/users/F001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/F001/subscriptions", "organizations_url": "https://api.github.com/users/F001/orgs", "repos_url": "https://api.github.com/users/F001/repos", "events_url": "https://api.github.com/users/F001/events{/privacy}", "received_events_url": "https://api.github.com/users/F001/received_events", "type": "User", "site_admin": false}, "committer": {"login": "F001", "id": 3314340, "node_id": "MDQ6VXNlcjMzMTQzNDA=", "avatar_url": "https://avatars.githubusercontent.com/u/3314340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/F001", "html_url": "https://github.com/F001", "followers_url": "https://api.github.com/users/F001/followers", "following_url": "https://api.github.com/users/F001/following{/other_user}", "gists_url": "https://api.github.com/users/F001/gists{/gist_id}", "starred_url": "https://api.github.com/users/F001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/F001/subscriptions", "organizations_url": "https://api.github.com/users/F001/orgs", "repos_url": "https://api.github.com/users/F001/repos", "events_url": "https://api.github.com/users/F001/events{/privacy}", "received_events_url": "https://api.github.com/users/F001/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "20b50f591f6ba43958c9d51cc43f1e7b421994bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/20b50f591f6ba43958c9d51cc43f1e7b421994bb", "html_url": "https://github.com/rust-lang/rust/commit/20b50f591f6ba43958c9d51cc43f1e7b421994bb"}], "stats": {"total": 28, "additions": 2, "deletions": 26}, "files": [{"sha": "78ae1346175877e21980019d20198a2ff5353592", "filename": "src/libcore/cell.rs", "status": "modified", "additions": 2, "deletions": 24, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/4bf8b57950ff6e1a447156f19461eeed480499e8/src%2Flibcore%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bf8b57950ff6e1a447156f19461eeed480499e8/src%2Flibcore%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcell.rs?ref=4bf8b57950ff6e1a447156f19461eeed480499e8", "patch": "@@ -510,8 +510,8 @@ impl<T: ?Sized> Cell<T> {\n     /// use std::cell::Cell;\n     /// let slice: &mut [i32] = &mut [1,2,3];\n     /// let cell_slice: &Cell<[i32]> = Cell::from_mut(slice);\n-    ///\n-    /// assert_eq!(cell_slice.get_with(|v|v.len()), 3)\n+    /// let slice_cell : &[Cell<i32>] = &cell_slice[..];\n+    /// assert_eq!(slice_cell.len(), 3)\n     /// ```\n     #[inline]\n     #[unstable(feature = \"as_cell\", issue=\"43038\")]\n@@ -520,28 +520,6 @@ impl<T: ?Sized> Cell<T> {\n             &*(t as *mut T as *const Cell<T>)\n         }\n     }\n-\n-    /// Returns a value by applying a function on contained value\n-    ///\n-    /// # Examples\n-    ///\n-    /// ```\n-    /// #![feature(as_cell)]\n-    /// use std::cell::Cell;\n-    /// let c : Cell<Vec<i32>> = Cell::new(vec![1,2,3]);\n-    /// let sum : i32 = c.get_with(|v|v.iter().sum());\n-    /// assert_eq!(sum, 6_i32);\n-    /// ```\n-    #[inline]\n-    #[unstable(feature = \"as_cell\", issue=\"43038\")]\n-    pub fn get_with<U, F>(&self, f: F) -> U\n-    where\n-        F: Fn(&T) -> U, U: 'static\n-    {\n-        unsafe {\n-            f(&*self.value.get())\n-        }\n-    }\n }\n \n impl<T: Default> Cell<T> {"}, {"sha": "28b6d8213f714fdbcbed47a94c15db502b0dea8c", "filename": "src/test/run-pass/rfc-1789-as-cell/from-mut.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4bf8b57950ff6e1a447156f19461eeed480499e8/src%2Ftest%2Frun-pass%2Frfc-1789-as-cell%2Ffrom-mut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bf8b57950ff6e1a447156f19461eeed480499e8/src%2Ftest%2Frun-pass%2Frfc-1789-as-cell%2Ffrom-mut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frfc-1789-as-cell%2Ffrom-mut.rs?ref=4bf8b57950ff6e1a447156f19461eeed480499e8", "patch": "@@ -15,8 +15,6 @@ use std::cell::Cell;\n fn main() {\n     let slice: &mut [i32] = &mut [1,2,3];\n     let cell_slice: &Cell<[i32]> = Cell::from_mut(slice);\n-    assert_eq!(cell_slice.get_with(|v|v.len()), 3);\n-\n     let sub_slice : &[Cell<i32>] = &cell_slice[1..];\n     assert_eq!(sub_slice.len(), 2);\n }"}]}