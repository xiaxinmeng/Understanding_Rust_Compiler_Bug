{"sha": "c66554cab3518a9f5c36eafd622ca4c8a3fda631", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2NjU1NGNhYjM1MThhOWY1YzM2ZWFmZDYyMmNhNGM4YTNmZGE2MzE=", "commit": {"author": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-07-13T18:57:46Z"}, "committer": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-08-17T21:41:37Z"}, "message": "switch core::simd to repr(simd) and deprecate it.\n\nThis functionality will be available out of tree in the `simd` crate on\ncrates.io.\n\n[breaking-change]", "tree": {"sha": "958355c0154f8a11219180463ef3aeb8a42aff3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/958355c0154f8a11219180463ef3aeb8a42aff3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c66554cab3518a9f5c36eafd622ca4c8a3fda631", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c66554cab3518a9f5c36eafd622ca4c8a3fda631", "html_url": "https://github.com/rust-lang/rust/commit/c66554cab3518a9f5c36eafd622ca4c8a3fda631", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c66554cab3518a9f5c36eafd622ca4c8a3fda631/comments", "author": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8b6d5b23cc8b2d43ece9f06252c7e98280fb8e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8b6d5b23cc8b2d43ece9f06252c7e98280fb8e5", "html_url": "https://github.com/rust-lang/rust/commit/c8b6d5b23cc8b2d43ece9f06252c7e98280fb8e5"}], "stats": {"total": 134, "additions": 122, "deletions": 12}, "files": [{"sha": "c064d87e37026268a2363685b317e746fa48b439", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -78,7 +78,8 @@\n #![feature(optin_builtin_traits)]\n #![feature(reflect)]\n #![feature(rustc_attrs)]\n-#![feature(simd)]\n+#![cfg_attr(stage0, feature(simd))]\n+#![cfg_attr(not(stage0), feature(simd_basics))]\n #![feature(staged_api)]\n #![feature(unboxed_closures)]\n \n@@ -150,7 +151,13 @@ pub mod iter;\n pub mod option;\n pub mod raw;\n pub mod result;\n+\n+#[cfg(stage0)]\n+#[path = \"simd_old.rs\"]\n+pub mod simd;\n+#[cfg(not(stage0))]\n pub mod simd;\n+\n pub mod slice;\n pub mod str;\n pub mod hash;"}, {"sha": "d58d0c50a8982494e482162966dd413e0eea8515", "filename": "src/libcore/simd.rs", "status": "modified", "additions": 13, "deletions": 10, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Fsimd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Fsimd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsimd.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -37,64 +37,67 @@\n #![unstable(feature = \"core_simd\",\n             reason = \"needs an RFC to flesh out the design\",\n             issue = \"27731\")]\n+#![deprecated(since = \"1.3.0\",\n+              reason = \"use the external `simd` crate instead\")]\n \n #![allow(non_camel_case_types)]\n #![allow(missing_docs)]\n+#![allow(deprecated)]\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct i8x16(pub i8, pub i8, pub i8, pub i8,\n                  pub i8, pub i8, pub i8, pub i8,\n                  pub i8, pub i8, pub i8, pub i8,\n                  pub i8, pub i8, pub i8, pub i8);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct i16x8(pub i16, pub i16, pub i16, pub i16,\n                  pub i16, pub i16, pub i16, pub i16);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct i32x4(pub i32, pub i32, pub i32, pub i32);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct i64x2(pub i64, pub i64);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct u8x16(pub u8, pub u8, pub u8, pub u8,\n                  pub u8, pub u8, pub u8, pub u8,\n                  pub u8, pub u8, pub u8, pub u8,\n                  pub u8, pub u8, pub u8, pub u8);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct u16x8(pub u16, pub u16, pub u16, pub u16,\n                  pub u16, pub u16, pub u16, pub u16);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct u32x4(pub u32, pub u32, pub u32, pub u32);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct u64x2(pub u64, pub u64);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct f32x4(pub f32, pub f32, pub f32, pub f32);\n \n-#[simd]\n+#[repr(simd)]\n #[derive(Copy, Clone, Debug)]\n #[repr(C)]\n pub struct f64x2(pub f64, pub f64);"}, {"sha": "7ecd08bea3574fc192b3d9d2811b39e2922d264a", "filename": "src/libcore/simd_old.rs", "status": "added", "additions": 98, "deletions": 0, "changes": 98, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Fsimd_old.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibcore%2Fsimd_old.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsimd_old.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -0,0 +1,98 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+//! SIMD vectors.\n+//!\n+//! These types can be used for accessing basic SIMD operations. Each of them\n+//! implements the standard arithmetic operator traits (Add, Sub, Mul, Div,\n+//! Rem, Shl, Shr) through compiler magic, rather than explicitly. Currently\n+//! comparison operators are not implemented. To use SSE3+, you must enable\n+//! the features, like `-C target-feature=sse3,sse4.1,sse4.2`, or a more\n+//! specific `target-cpu`. No other SIMD intrinsics or high-level wrappers are\n+//! provided beyond this module.\n+//!\n+//! ```rust\n+//! # #![feature(core_simd)]\n+//! fn main() {\n+//!     use std::simd::f32x4;\n+//!     let a = f32x4(40.0, 41.0, 42.0, 43.0);\n+//!     let b = f32x4(1.0, 1.1, 3.4, 9.8);\n+//!     println!(\"{:?}\", a + b);\n+//! }\n+//! ```\n+//!\n+//! # Stability Note\n+//!\n+//! These are all experimental. The interface may change entirely, without\n+//! warning.\n+\n+#![unstable(feature = \"core_simd\",\n+            reason = \"needs an RFC to flesh out the design\")]\n+\n+#![allow(non_camel_case_types)]\n+#![allow(missing_docs)]\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct i8x16(pub i8, pub i8, pub i8, pub i8,\n+                 pub i8, pub i8, pub i8, pub i8,\n+                 pub i8, pub i8, pub i8, pub i8,\n+                 pub i8, pub i8, pub i8, pub i8);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct i16x8(pub i16, pub i16, pub i16, pub i16,\n+                 pub i16, pub i16, pub i16, pub i16);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct i32x4(pub i32, pub i32, pub i32, pub i32);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct i64x2(pub i64, pub i64);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct u8x16(pub u8, pub u8, pub u8, pub u8,\n+                 pub u8, pub u8, pub u8, pub u8,\n+                 pub u8, pub u8, pub u8, pub u8,\n+                 pub u8, pub u8, pub u8, pub u8);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct u16x8(pub u16, pub u16, pub u16, pub u16,\n+                 pub u16, pub u16, pub u16, pub u16);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct u32x4(pub u32, pub u32, pub u32, pub u32);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct u64x2(pub u64, pub u64);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct f32x4(pub f32, pub f32, pub f32, pub f32);\n+\n+#[simd]\n+#[derive(Copy, Clone, Debug)]\n+#[repr(C)]\n+pub struct f64x2(pub f64, pub f64);"}, {"sha": "bc7252fa33a868c61e297f6c73742d3e23eb814b", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -294,6 +294,7 @@ pub use core::mem;\n pub use core::ops;\n pub use core::ptr;\n pub use core::raw;\n+#[allow(deprecated)]\n pub use core::simd;\n pub use core::result;\n pub use core::option;"}, {"sha": "78f969bfbeb5b3207225f0dcd1c55046820f93e1", "filename": "src/libstd/rt/unwind/seh64_gnu.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Frt%2Funwind%2Fseh64_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Frt%2Funwind%2Fseh64_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Funwind%2Fseh64_gnu.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -21,7 +21,6 @@ use self::EXCEPTION_DISPOSITION::*;\n use rt::dwarf::eh;\n use core::mem;\n use core::ptr;\n-use simd;\n use libc::{c_void, c_ulonglong, DWORD, LPVOID};\n type ULONG_PTR = c_ulonglong;\n "}, {"sha": "d36ca709c5c94c61e9c84ab38ac34993128a9207", "filename": "src/libstd/sys/windows/backtrace.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Fsys%2Fwindows%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c66554cab3518a9f5c36eafd622ca4c8a3fda631/src%2Flibstd%2Fsys%2Fwindows%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fbacktrace.rs?ref=c66554cab3518a9f5c36eafd622ca4c8a3fda631", "patch": "@@ -194,6 +194,8 @@ mod arch {\n \n #[cfg(target_arch = \"x86_64\")]\n mod arch {\n+    #![allow(deprecated)]\n+\n     use libc::{c_longlong, c_ulonglong};\n     use libc::types::os::arch::extra::{WORD, DWORD, DWORDLONG};\n     use simd;"}]}