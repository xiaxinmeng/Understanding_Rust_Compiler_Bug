{"sha": "d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3NmQ3ZDJhNzQyNmUzNGIwZmIzNTgwMjljYmFhMmQ3MWYwMTE4ZTg=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2017-12-31T12:14:47Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2017-12-31T12:14:47Z"}, "message": "Lexer: strings", "tree": {"sha": "3b535fe53705ac554068b78c137c1ddf0420cc06", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b535fe53705ac554068b78c137c1ddf0420cc06"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "html_url": "https://github.com/rust-lang/rust/commit/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b704eb708f5fd6440abc02eb52dbbfbd9feedaa6", "url": "https://api.github.com/repos/rust-lang/rust/commits/b704eb708f5fd6440abc02eb52dbbfbd9feedaa6", "html_url": "https://github.com/rust-lang/rust/commit/b704eb708f5fd6440abc02eb52dbbfbd9feedaa6"}], "stats": {"total": 41, "additions": 39, "deletions": 2}, "files": [{"sha": "d66046ca1df6cd457e8c990b579b66766649fb69", "filename": "src/lexer/mod.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/src%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/src%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flexer%2Fmod.rs?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "patch": "@@ -11,7 +11,7 @@ mod numbers;\n use self::numbers::scan_number;\n \n mod strings;\n-use self::strings::{string_literal_start, scan_char, scan_byte_char_or_string};\n+use self::strings::{string_literal_start, scan_char, scan_byte_char_or_string, scan_string, scan_raw_string};\n \n pub fn next_token(text: &str) -> Token {\n     assert!(!text.is_empty());\n@@ -128,6 +128,16 @@ fn next_token_inner(c: char, ptr: &mut Ptr) -> SyntaxKind {\n             scan_literal_suffix(ptr);\n             return kind\n         },\n+        '\"' => {\n+            scan_string(ptr);\n+            scan_literal_suffix(ptr);\n+            return STRING;\n+        }\n+        'r' => {\n+            scan_raw_string(ptr);\n+            scan_literal_suffix(ptr);\n+            return RAW_STRING;\n+        }\n         _ => (),\n     }\n     ERROR"}, {"sha": "2c1d863746d4d63d4d1a2662b561ad698d19bb21", "filename": "src/lexer/strings.rs", "status": "modified", "additions": 23, "deletions": 1, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/src%2Flexer%2Fstrings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/src%2Flexer%2Fstrings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flexer%2Fstrings.rs?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "patch": "@@ -47,6 +47,27 @@ pub(crate) fn scan_byte_char_or_string(ptr: &mut Ptr) -> SyntaxKind {\n     }\n }\n \n+pub(crate) fn scan_string(ptr: &mut Ptr) {\n+    while let Some(c) = ptr.bump() {\n+        if c == '\"' {\n+            return\n+        }\n+    }\n+}\n+\n+pub(crate) fn scan_raw_string(ptr: &mut Ptr) {\n+    if !ptr.next_is('\"') {\n+        return\n+    }\n+    ptr.bump();\n+\n+    while let Some(c) = ptr.bump() {\n+        if c == '\"' {\n+            return\n+        }\n+    }\n+}\n+\n fn scan_byte(ptr: &mut Ptr) {\n     if ptr.next_is('\\'') {\n         ptr.bump();\n@@ -83,4 +104,5 @@ fn scan_raw_byte_string(ptr: &mut Ptr) {\n fn scan_char_or_byte(ptr: &mut Ptr) {\n     //FIXME: deal with escape sequencies\n     ptr.bump();\n-}\n\\ No newline at end of file\n+}\n+"}, {"sha": "9dd1570de77c50b16abb5140e6c4d2f544caabde", "filename": "tests/data/lexer/0008_byte_strings.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0008_byte_strings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0008_byte_strings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0008_byte_strings.rs?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "previous_filename": "tests/data/lexer/0008_strings.rs"}, {"sha": "ed8cd4babdac23d6be1d89d507570ad8439c736d", "filename": "tests/data/lexer/0008_byte_strings.txt", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0008_byte_strings.txt", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0008_byte_strings.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0008_byte_strings.txt?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "previous_filename": "tests/data/lexer/0008_strings.txt"}, {"sha": "7b7faa5d8f8bbc975e5d15b23c0eeb93b23f0725", "filename": "tests/data/lexer/0009_strings.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0009_strings.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0009_strings.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0009_strings.rs?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "patch": "@@ -0,0 +1 @@\n+\"hello\" r\"world\""}, {"sha": "7fb6b7b368ccff3721825ae0352363bc608b7e4d", "filename": "tests/data/lexer/0009_strings.txt", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0009_strings.txt", "raw_url": "https://github.com/rust-lang/rust/raw/d76d7d2a7426e34b0fb358029cbaa2d71f0118e8/tests%2Fdata%2Flexer%2F0009_strings.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0009_strings.txt?ref=d76d7d2a7426e34b0fb358029cbaa2d71f0118e8", "patch": "@@ -0,0 +1,4 @@\n+STRING 7 \"\\\"hello\\\"\"\n+WHITESPACE 1 \" \"\n+RAW_STRING 8 \"r\\\"world\\\"\"\n+WHITESPACE 1 \"\\n\""}]}