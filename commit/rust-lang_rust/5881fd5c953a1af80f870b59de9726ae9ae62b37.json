{"sha": "5881fd5c953a1af80f870b59de9726ae9ae62b37", "node_id": "C_kwDOAAsO6NoAKDU4ODFmZDVjOTUzYTFhZjgwZjg3MGI1OWRlOTcyNmFlOWFlNjJiMzc", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-11-14T16:11:40Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-05-31T12:02:34Z"}, "message": "Display empty impl blocks if they have documentations", "tree": {"sha": "61c531cac007f88642c64f18436a58ee5678f998", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/61c531cac007f88642c64f18436a58ee5678f998"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5881fd5c953a1af80f870b59de9726ae9ae62b37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5881fd5c953a1af80f870b59de9726ae9ae62b37", "html_url": "https://github.com/rust-lang/rust/commit/5881fd5c953a1af80f870b59de9726ae9ae62b37", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5881fd5c953a1af80f870b59de9726ae9ae62b37/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d35d972e6974d40d30362344ea619a5b560aae20", "url": "https://api.github.com/repos/rust-lang/rust/commits/d35d972e6974d40d30362344ea619a5b560aae20", "html_url": "https://github.com/rust-lang/rust/commit/d35d972e6974d40d30362344ea619a5b560aae20"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "178e0cd8f64886b03e2c347c3aa014a8b646c745", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=5881fd5c953a1af80f870b59de9726ae9ae62b37", "patch": "@@ -1600,6 +1600,13 @@ fn render_impl(\n         }\n \n         if let Some(ref dox) = i.impl_item.collapsed_doc_value() {\n+            if trait_.is_none() && i.inner_impl().items.is_empty() {\n+                w.write_str(\n+                    \"<div class=\\\"item-info\\\">\\\n+                    <div class=\\\"stab empty-impl\\\">This impl block contains no items.</div>\n+                </div>\",\n+                );\n+            }\n             write!(\n                 w,\n                 \"<div class=\\\"docblock\\\">{}</div>\","}, {"sha": "ad3831e073a2677a6043ec245ada779c6509f468", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=5881fd5c953a1af80f870b59de9726ae9ae62b37", "patch": "@@ -283,7 +283,8 @@ details.undocumented > summary::before {\n \n .stab.unstable,\n .stab.deprecated,\n-.stab.portability {\n+.stab.portability,\n+.stab.empty-impl {\n \tcolor: #c5c5c5;\n \tbackground: #314559 !important;\n \tborder-style: none !important;"}, {"sha": "071ad006ed3501aacbda80fe1028d561f8a87b8d", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=5881fd5c953a1af80f870b59de9726ae9ae62b37", "patch": "@@ -266,6 +266,7 @@ details.undocumented > summary::before {\n \tcolor: #ddd;\n }\n \n+.stab.empty-impl { background: #FFF5D6; border-color: #FFC600; color: #2f2f2f; }\n .stab.unstable { background: #FFF5D6; border-color: #FFC600; color: #2f2f2f; }\n .stab.deprecated { background: #ffc4c4; border-color: #db7b7b; color: #2f2f2f; }\n .stab.portability { background: #F3DFFF; border-color: #b07bdb; color: #2f2f2f; }"}, {"sha": "5c3789bf4630a46a08b813d99596067d861d86c7", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=5881fd5c953a1af80f870b59de9726ae9ae62b37", "patch": "@@ -255,6 +255,7 @@ details.undocumented > summary::before {\n \tcolor: #000;\n }\n \n+.stab.empty-impl { background: #FFF5D6; border-color: #FFC600; }\n .stab.unstable { background: #FFF5D6; border-color: #FFC600; }\n .stab.deprecated { background: #ffc4c4; border-color: #db7b7b; }\n .stab.portability { background: #F3DFFF; border-color: #b07bdb; }"}, {"sha": "0fd124e61541581f4d630cafaf23a560e59ffe7b", "filename": "src/librustdoc/passes/stripper.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fpasses%2Fstripper.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5881fd5c953a1af80f870b59de9726ae9ae62b37/src%2Flibrustdoc%2Fpasses%2Fstripper.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fstripper.rs?ref=5881fd5c953a1af80f870b59de9726ae9ae62b37", "patch": "@@ -124,8 +124,9 @@ pub(crate) struct ImplStripper<'a> {\n impl<'a> DocFolder for ImplStripper<'a> {\n     fn fold_item(&mut self, i: Item) -> Option<Item> {\n         if let clean::ImplItem(ref imp) = *i.kind {\n-            // emptied none trait impls can be stripped\n-            if imp.trait_.is_none() && imp.items.is_empty() {\n+            // Impl blocks can be skipped if they are: empty; not a trait impl; and have no\n+            // documentation.\n+            if imp.trait_.is_none() && imp.items.is_empty() && i.doc_value().is_none() {\n                 return None;\n             }\n             if let Some(did) = imp.for_.def_id(self.cache) {"}]}