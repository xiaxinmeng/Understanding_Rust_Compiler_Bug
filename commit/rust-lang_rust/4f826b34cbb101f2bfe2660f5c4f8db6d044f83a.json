{"sha": "4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmODI2YjM0Y2JiMTAxZjJiZmUyNjYwZjVjNGY4ZGI2ZDA0NGY4M2E=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-12-17T01:21:18Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-12-17T01:21:28Z"}, "message": "Update build machinery to build and install librustc everywhere (including snapshots).", "tree": {"sha": "fb29068be6f2b406eb7dc9e15d57ad7ac55fcfad", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb29068be6f2b406eb7dc9e15d57ad7ac55fcfad"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "html_url": "https://github.com/rust-lang/rust/commit/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0ca50a28288563ac836c0af2a1f49dc69a425fdf", "url": "https://api.github.com/repos/rust-lang/rust/commits/0ca50a28288563ac836c0af2a1f49dc69a425fdf", "html_url": "https://github.com/rust-lang/rust/commit/0ca50a28288563ac836c0af2a1f49dc69a425fdf"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "629b4426c2ca05c3555cc8c7741c4746f0b05d8d", "filename": "Makefile.in", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -289,19 +289,31 @@ ifdef CFG_DISABLE_SHAREDSTD\n     $$(HLIB$(1)_H_$(3))/libcore.rlib\n   TCORELIB_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n     $$(TLIB$(1)_T_$(2)_H_$(3))/libcore.rlib\n+\n   HSTDLIB_DEFAULT$(1)_H_$(3) = \\\n     $$(HLIB$(1)_H_$(3))/libstd.rlib\n   TSTDLIB_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n     $$(TLIB$(1)_T_$(2)_H_$(3))/libstd.rlib\n+\n+  HLIBRUSTC_DEFAULT$(1)_H_$(3) = \\\n+    $$(HLIB$(1)_H_$(3))/librustc.rlib\n+  TLIBRUSTC_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n+    $$(TLIB$(1)_T_$(2)_H_$(3))/librustc.rlib\n else\n   HCORELIB_DEFAULT$(1)_H_$(3) = \\\n     $$(HLIB$(1)_H_$(3))/$(CFG_CORELIB)\n   TCORELIB_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n     $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_CORELIB)\n+\n   HSTDLIB_DEFAULT$(1)_H_$(3) = \\\n     $$(HLIB$(1)_H_$(3))/$(CFG_STDLIB)\n   TSTDLIB_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n     $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_STDLIB)\n+\n+  HLIBRUSTC_DEFAULT$(1)_H_$(3) = \\\n+    $$(HLIB$(1)_H_$(3))/$(CFG_LIBRUSTC)\n+  TLIBRUSTC_DEFAULT$(1)_T_$(2)_H_$(3) = \\\n+    $$(TLIB$(1)_T_$(2)_H_$(3))/$(CFG_LIBRUSTC)\n endif\n \n # Preqrequisites for using the stageN compiler\n@@ -311,6 +323,7 @@ HSREQ$(1)_H_$(3) = \\\n \t$$(HLIB$(1)_H_$(3))/$$(CFG_RUSTLLVM) \\\n \t$$(HCORELIB_DEFAULT$(1)_H_$(3)) \\\n \t$$(HSTDLIB_DEFAULT$(1)_H_$(3)) \\\n+\t$$(HLIBRUSTC_DEFAULT$(1)_H_$(3)) \\\n \t$$(MKFILE_DEPS)\n \n # Prerequisites for using the stageN compiler to build target artifacts\n@@ -324,7 +337,8 @@ TSREQ$(1)_T_$(2)_H_$(3) = \\\n SREQ$(1)_T_$(2)_H_$(3) = \\\n \t$$(TSREQ$(1)_T_$(2)_H_$(3)) \\\n \t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_CORELIB) \\\n-\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_STDLIB)  \\\n+\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC)\n \n ifeq ($(1),0)\n # Don't run the the stage0 compiler under valgrind - that ship has sailed"}, {"sha": "a23af108f43125a097e0ece0aadc9cf443be2681", "filename": "mk/host.mk", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Fhost.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Fhost.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fhost.mk?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -68,6 +68,14 @@ $$(HLIB$(2)_H_$(4))/libstd.rlib: \\\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@\n \n+$$(HLIB$(2)_H_$(4))/librustc.rlib: \\\n+\t$$(TLIB$(1)_T_$(4)_H_$(3))/librustc.rlib \\\n+\t$$(HLIB$(2)_H_$(4))/libcore.rlib \\\n+\t$$(HLIB$(2)_H_$(4))/libstd.rlib \\\n+\t$$(HLIB$(2)_H_$(4))/$$(CFG_RUNTIME)\n+\t@$$(call E, cp: $$@)\n+\t$$(Q)cp $$< $$@\n+\n $$(HLIB$(2)_H_$(4))/$$(CFG_RUSTLLVM): \\\n \t$$(TLIB$(1)_T_$(4)_H_$(3))/$$(CFG_RUSTLLVM)\n \t@$$(call E, cp: $$@)"}, {"sha": "7d89f82c0198cf1cd50d713fc901717234ce5815", "filename": "mk/install.mk", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -40,6 +40,8 @@ install-target-$(1)-host-$(2): $$(SREQ$$(ISTAGE)_T_$(1)_H_$(2))\n \t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(CORELIB_GLOB))\n \t$$(Q)$$(call INSTALL_LIB, \\\n \t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(STDLIB_GLOB))\n+\t$$(Q)$$(call INSTALL_LIB, \\\n+\t\t$$(TL$(1)$(2)),$$(PTL$(1)$(2)),$$(LIBRUSTC_GLOB))\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),intrinsics.bc)\n \t$$(Q)$$(call INSTALL,$$(TL$(1)$(2)),$$(PTL$(1)$(2)),libmorestack.a)\n endef\n@@ -69,6 +71,7 @@ install-host: $(SREQ$(ISTAGE)_T_$(CFG_HOST_TRIPLE)_H_$(CFG_HOST_TRIPLE))\n \t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUNTIME))\n \t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(CORELIB_GLOB))\n \t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(STDLIB_GLOB))\n+\t$(Q)$(call INSTALL_LIB,$(HL),$(PHL),$(LIBRUSTC_GLOB))\n \t$(Q)$(call INSTALL,$(HL),$(PHL),$(CFG_RUSTLLVM))\n \t$(Q)$(call INSTALL,$(S)/man, \\\n \t     $(PREFIX_ROOT)/share/man/man1,rustc.1)"}, {"sha": "66dafc92be73d8dc314b6bfe9ae4f1e549301aea", "filename": "mk/stage0.mk", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Fstage0.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Fstage0.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage0.mk?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -21,6 +21,10 @@ $(HLIB0_H_$(CFG_HOST_TRIPLE))/$(CFG_STDLIB): \\\n \t\t$(HBIN0_H_$(CFG_HOST_TRIPLE))/rustc$(X)\n \t$(Q)touch $@\n \n+$(HLIB0_H_$(CFG_HOST_TRIPLE))/$(CFG_LIBRUSTC): \\\n+\t\t$(HBIN0_H_$(CFG_HOST_TRIPLE))/rustc$(X)\n+\t$(Q)touch $@\n+\n $(HLIB0_H_$(CFG_HOST_TRIPLE))/$(CFG_RUSTLLVM): \\\n \t\t$(HBIN0_H_$(CFG_HOST_TRIPLE))/rustc$(X)\n \t$(Q)touch $@\n@@ -52,6 +56,11 @@ $$(HLIB0_H_$(1))/$(CFG_STDLIB): \\\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$$(STDLIB_GLOB) $$@\n \n+$$(HLIB0_H_$(1))/$(CFG_LIBRUSTC): \\\n+\t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$$(CFG_LIBRUSTC)\n+\t@$$(call E, cp: $$@)\n+\t$$(Q)cp $$(TLIB$(2)_T_$(1)_H_$(3))/$$(LIBRUSTC_GLOB) $$@\n+\n $$(HLIB0_H_$(1))/$(CFG_RUSTLLVM): \\\n \t\t$$(TLIB$(2)_T_$(1)_H_$(3))/$$(CFG_RUSTLLVM)\n \t@$$(call E, cp: $$@)"}, {"sha": "381c3af640b71136f3889d0926e1be51df7d76bb", "filename": "mk/target.mk", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Ftarget.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/mk%2Ftarget.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftarget.mk?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -49,14 +49,17 @@ $$(TBIN$(1)_T_$(2)_H_$(3))/rustc$$(X):\t\t\t\t\\\n \t\t$$(COMPILER_CRATE) $$(COMPILER_INPUTS)\t\t\\\n \t\t$$(TSREQ$(1)_T_$(2)_H_$(3))\t\t\t\t\t\\\n \t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM)\t\\\n-\t\t$$(TSTDLIB_DEFAULT$(1)_T_$(2)_H_$(3))\n+\t\t$$(TCORELIB_DEFAULT$(1)_T_$(2)_H_$(3))      \\\n+\t\t$$(TSTDLIB_DEFAULT$(1)_T_$(2)_H_$(3))       \\\n+\t\t$$(TLIBRUSTC_DEFAULT$(1)_T_$(2)_H_$(3))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3))  -o $$@ $$<\n \n $$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_LIBRUSTC):\t\t\\\n \t\t$$(COMPILER_CRATE) $$(COMPILER_INPUTS)\t\t\\\n \t\t$$(TSREQ$(1)_T_$(2)_H_$(3))\t\t\t\t\t\\\n \t\t$$(TLIB$(1)_T_$(2)_H_$(3))/$$(CFG_RUSTLLVM)\t\\\n+\t\t$$(TCORELIB_DEFAULT$(1)_T_$(2)_H_$(3))      \\\n \t\t$$(TSTDLIB_DEFAULT$(1)_T_$(2)_H_$(3))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)_T_$(2)_H_$(3))  --lib -o $$@ $$< && touch $$@"}, {"sha": "130304fdab8321ed178f34ec55ff37f732b12f93", "filename": "src/etc/snapshot.py", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/src%2Fetc%2Fsnapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/4f826b34cbb101f2bfe2660f5c4f8db6d044f83a/src%2Fetc%2Fsnapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsnapshot.py?ref=4f826b34cbb101f2bfe2660f5c4f8db6d044f83a", "patch": "@@ -19,16 +19,19 @@ def scrub(b):\n     \"linux\": [\"bin/rustc\",\n               \"lib/libcore-*.so\",\n               \"lib/libstd-*.so\",\n+              \"lib/librustc-*.so\",\n               \"lib/librustrt.so\",\n               \"lib/librustllvm.so\"],\n     \"macos\": [\"bin/rustc\",\n               \"lib/libcore-*.dylib\",\n               \"lib/libstd-*.dylib\",\n+              \"lib/librustc-*.dylib\",\n               \"lib/librustrt.dylib\",\n               \"lib/librustllvm.dylib\"],\n     \"winnt\": [\"bin/rustc.exe\",\n               \"lib/core-*.dll\",\n               \"lib/std-*.dll\",\n+              \"lib/rustc-*.dll\",\n               \"lib/rustrt.dll\",\n               \"lib/rustllvm.dll\"]\n     }"}]}