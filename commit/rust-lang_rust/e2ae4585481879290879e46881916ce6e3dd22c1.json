{"sha": "e2ae4585481879290879e46881916ce6e3dd22c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUyYWU0NTg1NDgxODc5MjkwODc5ZTQ2ODgxOTE2Y2U2ZTNkZDIyYzE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-24T17:51:13Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-03-24T18:19:28Z"}, "message": "doc: Update the runtime guide with green changes\n\nThis updates a few code examples about booting libgreen/libnative and also\nspells out how the event loop factory is required.", "tree": {"sha": "6e7aafb2dbe2b21dfd9e818d88437eee45e2eb6c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e7aafb2dbe2b21dfd9e818d88437eee45e2eb6c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2ae4585481879290879e46881916ce6e3dd22c1", "comment_count": 9, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2ae4585481879290879e46881916ce6e3dd22c1", "html_url": "https://github.com/rust-lang/rust/commit/e2ae4585481879290879e46881916ce6e3dd22c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2ae4585481879290879e46881916ce6e3dd22c1/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3ccad75641515b1fa62dc5378b0b139129aa9daf", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ccad75641515b1fa62dc5378b0b139129aa9daf", "html_url": "https://github.com/rust-lang/rust/commit/3ccad75641515b1fa62dc5378b0b139129aa9daf"}], "stats": {"total": 32, "additions": 27, "deletions": 5}, "files": [{"sha": "b52c520761e233773865cc2f7f54e0a1c5965dfb", "filename": "src/doc/guide-runtime.md", "status": "modified", "additions": 27, "deletions": 5, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/e2ae4585481879290879e46881916ce6e3dd22c1/src%2Fdoc%2Fguide-runtime.md", "raw_url": "https://github.com/rust-lang/rust/raw/e2ae4585481879290879e46881916ce6e3dd22c1/src%2Fdoc%2Fguide-runtime.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Fguide-runtime.md?ref=e2ae4585481879290879e46881916ce6e3dd22c1", "patch": "@@ -223,27 +223,49 @@ Having a default decision made in the compiler is done out of necessity and\n convenience. The compiler's decision of runtime to link to is *not* an\n endorsement of one over the other. As always, this decision can be overridden.\n \n-For example, this program will be linked to \"the default runtime\"\n+For example, this program will be linked to \"the default runtime\". The current\n+default runtime is to use libnative.\n \n ~~~{.rust}\n fn main() {}\n ~~~\n \n-Whereas this program explicitly opts into using a particular runtime\n+### Force booting with libgreen\n+\n+In this example, the `main` function will be booted with I/O support powered by\n+libuv. This is done by linking to the `rustuv` crate and specifying the\n+`rustuv::event_loop` function as the event loop factory.\n+\n+To create a pool of green tasks which have no I/O support, you may shed the\n+`rustuv` dependency and use the `green::basic::event_loop` function instead of\n+`rustuv::event_loop`. All tasks will have no I/O support, but they will still be\n+able to deschedule/reschedule (use channels, locks, etc).\n \n ~~~{.rust}\n extern crate green;\n+extern crate rustuv;\n \n #[start]\n fn start(argc: int, argv: **u8) -> int {\n-    green::start(argc, argv, main)\n+    green::start(argc, argv, rustuv::event_loop, main)\n }\n \n fn main() {}\n ~~~\n \n-Both libgreen/libnative provide a top-level `start` function which is used to\n-boot an initial Rust task in that specified runtime.\n+### Force booting with libnative\n+\n+This program's `main` function will always be booted with libnative, running\n+inside of an OS thread.\n+\n+~~~{.rust}\n+extern crate native;\n+\n+#[start]\n+fn start(argc: int, argv: **u8) -> int { native::start(argc, argv, main) }\n+\n+fn main() {}\n+~~~\n \n # Finding the runtime\n "}]}