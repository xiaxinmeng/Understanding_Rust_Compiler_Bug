{"sha": "45a09a4683f551d96f7e5b16a125c26003beffaf", "node_id": "C_kwDOAAsO6NoAKDQ1YTA5YTQ2ODNmNTUxZDk2ZjdlNWIxNmExMjVjMjYwMDNiZWZmYWY", "commit": {"author": {"name": "Boxy", "email": "supbscripter@gmail.com", "date": "2022-11-18T13:45:42Z"}, "committer": {"name": "Boxy", "email": "supbscripter@gmail.com", "date": "2022-11-18T13:45:47Z"}, "message": "review comments 2 electric boogalo", "tree": {"sha": "be410b1c6f57f9c8736869f09e33e9fcd433265b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be410b1c6f57f9c8736869f09e33e9fcd433265b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45a09a4683f551d96f7e5b16a125c26003beffaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45a09a4683f551d96f7e5b16a125c26003beffaf", "html_url": "https://github.com/rust-lang/rust/commit/45a09a4683f551d96f7e5b16a125c26003beffaf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45a09a4683f551d96f7e5b16a125c26003beffaf/comments", "author": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BoxyUwU", "id": 21149742, "node_id": "MDQ6VXNlcjIxMTQ5NzQy", "avatar_url": "https://avatars.githubusercontent.com/u/21149742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BoxyUwU", "html_url": "https://github.com/BoxyUwU", "followers_url": "https://api.github.com/users/BoxyUwU/followers", "following_url": "https://api.github.com/users/BoxyUwU/following{/other_user}", "gists_url": "https://api.github.com/users/BoxyUwU/gists{/gist_id}", "starred_url": "https://api.github.com/users/BoxyUwU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BoxyUwU/subscriptions", "organizations_url": "https://api.github.com/users/BoxyUwU/orgs", "repos_url": "https://api.github.com/users/BoxyUwU/repos", "events_url": "https://api.github.com/users/BoxyUwU/events{/privacy}", "received_events_url": "https://api.github.com/users/BoxyUwU/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9ed348376fcdc49beb20cbd64760d2a923b76312", "url": "https://api.github.com/repos/rust-lang/rust/commits/9ed348376fcdc49beb20cbd64760d2a923b76312", "html_url": "https://github.com/rust-lang/rust/commit/9ed348376fcdc49beb20cbd64760d2a923b76312"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "b85a23257286b6ddfad19fffb788d93e567a8001", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/_impl.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/45a09a4683f551d96f7e5b16a125c26003beffaf/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2F_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45a09a4683f551d96f7e5b16a125c26003beffaf/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2F_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2F_impl.rs?ref=45a09a4683f551d96f7e5b16a125c26003beffaf", "patch": "@@ -1440,12 +1440,12 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         if !ty.is_ty_var() {\n             ty\n         } else {\n-            if let None = self.tainted_by_errors() {\n+            let e = self.tainted_by_errors().unwrap_or_else(|| {\n                 self.err_ctxt()\n                     .emit_inference_failure_err((**self).body_id, sp, ty.into(), E0282, true)\n-                    .emit();\n-            }\n-            let err = self.tcx.ty_error();\n+                    .emit()\n+            });\n+            let err = self.tcx.ty_error_with_guaranteed(e);\n             self.demand_suptype(sp, err, ty);\n             err\n         }"}, {"sha": "a31ab9c8b23b899c00dcad27aad6b7f8816e9a54", "filename": "compiler/rustc_hir_typeck/src/fn_ctxt/checks.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/45a09a4683f551d96f7e5b16a125c26003beffaf/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45a09a4683f551d96f7e5b16a125c26003beffaf/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Ffn_ctxt%2Fchecks.rs?ref=45a09a4683f551d96f7e5b16a125c26003beffaf", "patch": "@@ -73,7 +73,6 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 let ty = self.typeck_results.borrow().expr_ty_adjusted(expr);\n                 let ty = self.resolve_vars_if_possible(ty);\n                 if ty.has_non_region_infer() {\n-                    assert!(self.tainted_by_errors().is_some());\n                     self.tcx.ty_error()\n                 } else {\n                     self.tcx.erase_regions(ty)"}]}