{"sha": "b6aed7914d8172937664caf089ebe723504413cc", "node_id": "C_kwDOAAsO6NoAKGI2YWVkNzkxNGQ4MTcyOTM3NjY0Y2FmMDg5ZWJlNzIzNTA0NDEzY2M", "commit": {"author": {"name": "Jonas Platte", "email": "jplatte+git@posteo.de", "date": "2022-09-14T21:30:44Z"}, "committer": {"name": "Jonas Platte", "email": "jplatte+git@posteo.de", "date": "2022-09-14T21:30:44Z"}, "message": "mbe: Remove double reference in container", "tree": {"sha": "571866c7c8eda2d829b385fc6eec5e4ba61d17fa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/571866c7c8eda2d829b385fc6eec5e4ba61d17fa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6aed7914d8172937664caf089ebe723504413cc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIwEABYIADQWIQSDGkJBzFPeoiYaT9p9Jh13HZFTeAUCYyJIBBYcanBsYXR0ZStn\naXRAcG9zdGVvLmRlAAoJEH0mHXcdkVN4DqEBAN4hzTVTAe9e9yxphn6fZUDuA78F\nzphfGWbfSnWwTyaZAQC91FWCcVbYMVGC4XPSdNVa/kabHotRc8SdeMULm5RmDw==\n=xyXr\n-----END PGP SIGNATURE-----", "payload": "tree 571866c7c8eda2d829b385fc6eec5e4ba61d17fa\nparent f7f6d2870fb930a67fe5622704953822521ddeb9\nauthor Jonas Platte <jplatte+git@posteo.de> 1663191044 +0200\ncommitter Jonas Platte <jplatte+git@posteo.de> 1663191044 +0200\n\nmbe: Remove double reference in container\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6aed7914d8172937664caf089ebe723504413cc", "html_url": "https://github.com/rust-lang/rust/commit/b6aed7914d8172937664caf089ebe723504413cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6aed7914d8172937664caf089ebe723504413cc/comments", "author": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jplatte", "id": 951129, "node_id": "MDQ6VXNlcjk1MTEyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/951129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jplatte", "html_url": "https://github.com/jplatte", "followers_url": "https://api.github.com/users/jplatte/followers", "following_url": "https://api.github.com/users/jplatte/following{/other_user}", "gists_url": "https://api.github.com/users/jplatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/jplatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jplatte/subscriptions", "organizations_url": "https://api.github.com/users/jplatte/orgs", "repos_url": "https://api.github.com/users/jplatte/repos", "events_url": "https://api.github.com/users/jplatte/events{/privacy}", "received_events_url": "https://api.github.com/users/jplatte/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7f6d2870fb930a67fe5622704953822521ddeb9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7f6d2870fb930a67fe5622704953822521ddeb9", "html_url": "https://github.com/rust-lang/rust/commit/f7f6d2870fb930a67fe5622704953822521ddeb9"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "7157d8b4328a16bc346f99fa7beaa62cb9bbb0bd", "filename": "crates/mbe/src/expander/matcher.rs", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b6aed7914d8172937664caf089ebe723504413cc/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6aed7914d8172937664caf089ebe723504413cc/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fexpander%2Fmatcher.rs?ref=b6aed7914d8172937664caf089ebe723504413cc", "patch": "@@ -212,7 +212,7 @@ impl BindingsBuilder {\n         self.collect_nodes(link_nodes, &mut nodes);\n \n         for cmd in nodes {\n-            match &**cmd {\n+            match cmd {\n                 BindingKind::Empty(name) => {\n                     bindings.push_empty(name);\n                 }\n@@ -272,12 +272,7 @@ impl BindingsBuilder {\n         nested.extend(nested_refs.into_iter().map(|iter| self.build_inner(iter)));\n     }\n \n-    fn collect_nodes_ref<'a>(\n-        &'a self,\n-        id: usize,\n-        len: usize,\n-        nodes: &mut Vec<&'a Rc<BindingKind>>,\n-    ) {\n+    fn collect_nodes_ref<'a>(&'a self, id: usize, len: usize, nodes: &mut Vec<&'a BindingKind>) {\n         self.nodes[id].iter().take(len).for_each(|it| match it {\n             LinkNode::Node(it) => nodes.push(it),\n             LinkNode::Parent { idx, len } => self.collect_nodes_ref(*idx, *len, nodes),\n@@ -287,7 +282,7 @@ impl BindingsBuilder {\n     fn collect_nodes<'a>(\n         &'a self,\n         link_nodes: &'a [LinkNode<Rc<BindingKind>>],\n-        nodes: &mut Vec<&'a Rc<BindingKind>>,\n+        nodes: &mut Vec<&'a BindingKind>,\n     ) {\n         link_nodes.iter().for_each(|it| match it {\n             LinkNode::Node(it) => nodes.push(it),"}]}