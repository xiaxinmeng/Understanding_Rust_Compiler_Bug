{"sha": "870e730dc8a8a15f98468c08a5a7ec0e44dfc40d", "node_id": "C_kwDOAAsO6NoAKDg3MGU3MzBkYzhhOGExNWY5ODQ2OGMwOGE1YTdlYzBlNDRkZmM0MGQ", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-11-25T15:12:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-11-25T15:12:38Z"}, "message": "Merge #10824\n\n10824: project_model: print full cargo command if cargo metadata fails to run r=Veykril a=jhgg\n\nwell, `Command` implements a sensible `Debug` which *roughly* does what we want to do. Unfortunately it's got a bit of a quote situation,\r\n\r\nSo it'd output something like `\"cargo\" \"metadata\"  \"--format-version\" \"1\" \"--features\" \"foo,bar,baz\"`. \r\n\r\nWhich although is a bit verbose with the quotes, it's at the very least, not entirely incorrect/misleading.\r\n\r\nfixes #10797\n\nCo-authored-by: Jake Heinz <jh@discordapp.com>", "tree": {"sha": "2157e2201f7c844bac18bd0caba5a8f193baca59", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2157e2201f7c844bac18bd0caba5a8f193baca59"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhn6fmCRBK7hj4Ov3rIwAAm28IADtUCIYH+ZRImVUbU+0MDDql\nrSd52bCmXAI77luGjkuv1CaL6wFRJ/uMSfbNC9Ej6gyIpSr5KmxxgL7AgGiDNfrN\n9t8a1nBhob0zfqm9jU5Ulzpt3gI9AkilycGg6F4KaCMgKOBssIczYWwCW65mj9z4\nGDlOfBOnZPcvv7yecQWhIqDHlr3jLXu8dhk39753LryAy/Q+Hxukx6YuWC+m0TEV\njdocM9WnIPVi0ybxHQcdVTVRPih9IrogB2jc5fn8R7IeMXrqsqd3Vb47n/r7/G+9\nXZ92TXpKb4kwDuc6xpHU3DEsvAobDyGEJ22pQSvhWi4mhddunOkg51T6i5SRW9k=\n=8/Mk\n-----END PGP SIGNATURE-----\n", "payload": "tree 2157e2201f7c844bac18bd0caba5a8f193baca59\nparent 4ca6233bd2723c33152dcabd32f184d769d8339c\nparent 03eb9f3abb2d3b49160fbe6cae59a33ab00eb645\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1637853158 +0000\ncommitter GitHub <noreply@github.com> 1637853158 +0000\n\nMerge #10824\n\n10824: project_model: print full cargo command if cargo metadata fails to run r=Veykril a=jhgg\n\nwell, `Command` implements a sensible `Debug` which *roughly* does what we want to do. Unfortunately it's got a bit of a quote situation,\r\n\r\nSo it'd output something like `\"cargo\" \"metadata\"  \"--format-version\" \"1\" \"--features\" \"foo,bar,baz\"`. \r\n\r\nWhich although is a bit verbose with the quotes, it's at the very least, not entirely incorrect/misleading.\r\n\r\nfixes #10797\n\nCo-authored-by: Jake Heinz <jh@discordapp.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d", "html_url": "https://github.com/rust-lang/rust/commit/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ca6233bd2723c33152dcabd32f184d769d8339c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ca6233bd2723c33152dcabd32f184d769d8339c", "html_url": "https://github.com/rust-lang/rust/commit/4ca6233bd2723c33152dcabd32f184d769d8339c"}, {"sha": "03eb9f3abb2d3b49160fbe6cae59a33ab00eb645", "url": "https://api.github.com/repos/rust-lang/rust/commits/03eb9f3abb2d3b49160fbe6cae59a33ab00eb645", "html_url": "https://github.com/rust-lang/rust/commit/03eb9f3abb2d3b49160fbe6cae59a33ab00eb645"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "85123ed5c574bfff48fe0b4b1312efc6ff6ff810", "filename": "crates/project_model/src/cargo_workspace.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/870e730dc8a8a15f98468c08a5a7ec0e44dfc40d/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject_model%2Fsrc%2Fcargo_workspace.rs?ref=870e730dc8a8a15f98468c08a5a7ec0e44dfc40d", "patch": "@@ -286,9 +286,8 @@ impl CargoWorkspace {\n         // unclear whether cargo itself supports it.\n         progress(\"metadata\".to_string());\n \n-        let meta = meta.exec().with_context(|| {\n-            format!(\"Failed to run `cargo metadata --manifest-path {}`\", cargo_toml.display(),)\n-        })?;\n+        let meta =\n+            meta.exec().with_context(|| format!(\"Failed to run `{:?}`\", meta.cargo_command()))?;\n \n         Ok(meta)\n     }"}]}