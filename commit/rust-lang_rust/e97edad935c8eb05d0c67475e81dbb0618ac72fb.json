{"sha": "e97edad935c8eb05d0c67475e81dbb0618ac72fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU5N2VkYWQ5MzVjOGViMDVkMGM2NzQ3NWU4MWRiYjA2MThhYzcyZmI=", "commit": {"author": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2018-11-24T22:27:13Z"}, "committer": {"name": "Mark Mansi", "email": "markm@cs.wisc.edu", "date": "2018-11-27T19:13:11Z"}, "message": "update tests", "tree": {"sha": "7dd223123f44eb1381eb0c0c538996a1c08aae9b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7dd223123f44eb1381eb0c0c538996a1c08aae9b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e97edad935c8eb05d0c67475e81dbb0618ac72fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e97edad935c8eb05d0c67475e81dbb0618ac72fb", "html_url": "https://github.com/rust-lang/rust/commit/e97edad935c8eb05d0c67475e81dbb0618ac72fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e97edad935c8eb05d0c67475e81dbb0618ac72fb/comments", "author": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "32aafb220313fbc91e8f55b12886d77d3e1cf24b", "url": "https://api.github.com/repos/rust-lang/rust/commits/32aafb220313fbc91e8f55b12886d77d3e1cf24b", "html_url": "https://github.com/rust-lang/rust/commit/32aafb220313fbc91e8f55b12886d77d3e1cf24b"}], "stats": {"total": 205, "additions": 16, "deletions": 189}, "files": [{"sha": "63a4ef16a2581cef6a2a03fdc27dff2ad29402b4", "filename": "src/test/ui/macros/macro-at-most-once-rep-2015-ques-rep-feature-flag.rs", "status": "removed", "additions": 0, "deletions": 28, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.rs?ref=32aafb220313fbc91e8f55b12886d77d3e1cf24b", "patch": "@@ -1,28 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Test behavior of `?` macro _kleene op_ under the 2015 edition. Namely, it doesn't exist, even\n-// with the feature flag.\n-\n-// gate-test-macro_at_most_once_rep\n-// edition:2015\n-\n-#![feature(macro_at_most_once_rep)]\n-\n-macro_rules! bar {\n-    ($(a)?) => {} //~ERROR expected `*` or `+`\n-}\n-\n-macro_rules! baz {\n-    ($(a),?) => {} //~ERROR expected `*` or `+`\n-}\n-\n-fn main() {}\n-"}, {"sha": "5f687900421bf4823aaedb95b0f663f82429eb2f", "filename": "src/test/ui/macros/macro-at-most-once-rep-2015-ques-rep-feature-flag.stderr", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-rep-feature-flag.stderr?ref=32aafb220313fbc91e8f55b12886d77d3e1cf24b", "patch": "@@ -1,18 +0,0 @@\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2015-ques-rep-feature-flag.rs:20:10\n-   |\n-LL |     ($(a)?) => {} //~ERROR expected `*` or `+`\n-   |          ^\n-   |\n-   = note: `?` is not a macro repetition operator\n-\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2015-ques-rep-feature-flag.rs:24:11\n-   |\n-LL |     ($(a),?) => {} //~ERROR expected `*` or `+`\n-   |           ^\n-   |\n-   = note: `?` is not a macro repetition operator\n-\n-error: aborting due to 2 previous errors\n-"}, {"sha": "ffabf9bcdf68557dad795f6135ed646380c87d74", "filename": "src/test/ui/macros/macro-at-most-once-rep-2018-feature-gate.rs", "status": "removed", "additions": 0, "deletions": 45, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.rs?ref=32aafb220313fbc91e8f55b12886d77d3e1cf24b", "patch": "@@ -1,45 +0,0 @@\n-// Copyright 2012 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Feature gate test for macro_at_most_once_rep under 2018 edition.\n-\n-// gate-test-macro_at_most_once_rep\n-// edition:2018\n-\n-macro_rules! foo {\n-    ($(a)?) => {}\n-    //~^ERROR using the `?` macro Kleene operator for\n-    //~|ERROR expected `*` or `+`\n-}\n-\n-macro_rules! baz {\n-    ($(a),?) => {} //~ERROR expected `*` or `+`\n-}\n-\n-macro_rules! barplus {\n-    ($(a)?+) => {}\n-    //~^ERROR using the `?` macro Kleene operator for\n-    //~|ERROR expected `*` or `+`\n-}\n-\n-macro_rules! barstar {\n-    ($(a)?*) => {}\n-    //~^ERROR using the `?` macro Kleene operator for\n-    //~|ERROR expected `*` or `+`\n-}\n-\n-pub fn main() {\n-    foo!();\n-    foo!(a);\n-    foo!(a?); //~ ERROR no rules expected the token `?`\n-    foo!(a?a); //~ ERROR no rules expected the token `?`\n-    foo!(a?a?a); //~ ERROR no rules expected the token `?`\n-}\n-"}, {"sha": "27dc03e1c3981f04ef3d64dd6d8ae79c70520366", "filename": "src/test/ui/macros/macro-at-most-once-rep-2018-feature-gate.stderr", "status": "removed", "additions": 0, "deletions": 80, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/32aafb220313fbc91e8f55b12886d77d3e1cf24b/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018-feature-gate.stderr?ref=32aafb220313fbc91e8f55b12886d77d3e1cf24b", "patch": "@@ -1,80 +0,0 @@\n-error[E0658]: using the `?` macro Kleene operator for \"at most one\" repetition is unstable (see issue #48075)\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:17:10\n-   |\n-LL |     ($(a)?) => {}\n-   |          ^\n-   |\n-   = help: add #![feature(macro_at_most_once_rep)] to the crate attributes to enable\n-\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:17:10\n-   |\n-LL |     ($(a)?) => {}\n-   |          ^\n-\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:23:11\n-   |\n-LL |     ($(a),?) => {} //~ERROR expected `*` or `+`\n-   |           ^\n-   |\n-   = note: `?` is not a macro repetition operator\n-\n-error[E0658]: using the `?` macro Kleene operator for \"at most one\" repetition is unstable (see issue #48075)\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:27:10\n-   |\n-LL |     ($(a)?+) => {}\n-   |          ^\n-   |\n-   = help: add #![feature(macro_at_most_once_rep)] to the crate attributes to enable\n-\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:27:10\n-   |\n-LL |     ($(a)?+) => {}\n-   |          ^\n-\n-error[E0658]: using the `?` macro Kleene operator for \"at most one\" repetition is unstable (see issue #48075)\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:33:10\n-   |\n-LL |     ($(a)?*) => {}\n-   |          ^\n-   |\n-   = help: add #![feature(macro_at_most_once_rep)] to the crate attributes to enable\n-\n-error: expected `*` or `+`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:33:10\n-   |\n-LL |     ($(a)?*) => {}\n-   |          ^\n-\n-error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:41:11\n-   |\n-LL | macro_rules! foo {\n-   | ---------------- when calling this macro\n-...\n-LL |     foo!(a?); //~ ERROR no rules expected the token `?`\n-   |           ^ no rules expected this token in macro call\n-\n-error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:42:11\n-   |\n-LL | macro_rules! foo {\n-   | ---------------- when calling this macro\n-...\n-LL |     foo!(a?a); //~ ERROR no rules expected the token `?`\n-   |           ^ no rules expected this token in macro call\n-\n-error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018-feature-gate.rs:43:11\n-   |\n-LL | macro_rules! foo {\n-   | ---------------- when calling this macro\n-...\n-LL |     foo!(a?a?a); //~ ERROR no rules expected the token `?`\n-   |           ^ no rules expected this token in macro call\n-\n-error: aborting due to 10 previous errors\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "d8012c05acf8fdc6675212488cb2d8bd8bc82bdc", "filename": "src/test/ui/macros/macro-at-most-once-rep-2018.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/e97edad935c8eb05d0c67475e81dbb0618ac72fb/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e97edad935c8eb05d0c67475e81dbb0618ac72fb/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.rs?ref=e97edad935c8eb05d0c67475e81dbb0618ac72fb", "patch": "@@ -12,22 +12,20 @@\n \n // edition:2018\n \n-#![feature(macro_at_most_once_rep)]\n-\n macro_rules! foo {\n-    ($(a)?) => {}\n+    ($(a)?) => {};\n }\n \n macro_rules! baz {\n-    ($(a),?) => {} //~ERROR the `?` macro repetition operator\n+    ($(a),?) => {}; //~ERROR the `?` macro repetition operator\n }\n \n macro_rules! barplus {\n-    ($(a)?+) => {} // ok. matches \"a+\" and \"+\"\n+    ($(a)?+) => {}; // ok. matches \"a+\" and \"+\"\n }\n \n macro_rules! barstar {\n-    ($(a)?*) => {} // ok. matches \"a*\" and \"*\"\n+    ($(a)?*) => {}; // ok. matches \"a*\" and \"*\"\n }\n \n pub fn main() {\n@@ -41,7 +39,7 @@ pub fn main() {\n     barplus!(a); //~ERROR unexpected end of macro invocation\n     barplus!(a?); //~ ERROR no rules expected the token `?`\n     barplus!(a?a); //~ ERROR no rules expected the token `?`\n-    barplus!(a+);\n+    barplus!(a);\n     barplus!(+);\n \n     barstar!(); //~ERROR unexpected end of macro invocation"}, {"sha": "efe0a2672c83ccb1f147e8a9ca95a75276e8b619", "filename": "src/test/ui/macros/macro-at-most-once-rep-2018.stderr", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/e97edad935c8eb05d0c67475e81dbb0618ac72fb/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e97edad935c8eb05d0c67475e81dbb0618ac72fb/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2018.stderr?ref=e97edad935c8eb05d0c67475e81dbb0618ac72fb", "patch": "@@ -1,11 +1,11 @@\n error: the `?` macro repetition operator does not take a separator\n-  --> $DIR/macro-at-most-once-rep-2018.rs:22:10\n+  --> $DIR/macro-at-most-once-rep-2018.rs:20:10\n    |\n LL |     ($(a),?) => {} //~ERROR the `?` macro repetition operator\n    |          ^\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:36:11\n+  --> $DIR/macro-at-most-once-rep-2018.rs:34:11\n    |\n LL | macro_rules! foo {\n    | ---------------- when calling this macro\n@@ -14,7 +14,7 @@ LL |     foo!(a?); //~ ERROR no rules expected the token `?`\n    |           ^ no rules expected this token in macro call\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:37:11\n+  --> $DIR/macro-at-most-once-rep-2018.rs:35:11\n    |\n LL | macro_rules! foo {\n    | ---------------- when calling this macro\n@@ -23,7 +23,7 @@ LL |     foo!(a?a); //~ ERROR no rules expected the token `?`\n    |           ^ no rules expected this token in macro call\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:38:11\n+  --> $DIR/macro-at-most-once-rep-2018.rs:36:11\n    |\n LL | macro_rules! foo {\n    | ---------------- when calling this macro\n@@ -32,7 +32,7 @@ LL |     foo!(a?a?a); //~ ERROR no rules expected the token `?`\n    |           ^ no rules expected this token in macro call\n \n error: unexpected end of macro invocation\n-  --> $DIR/macro-at-most-once-rep-2018.rs:40:5\n+  --> $DIR/macro-at-most-once-rep-2018.rs:38:5\n    |\n LL | macro_rules! barplus {\n    | -------------------- when calling this macro\n@@ -50,7 +50,7 @@ LL |     barplus!(a); //~ERROR unexpected end of macro invocation\n    |               ^ missing tokens in macro arguments\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:42:15\n+  --> $DIR/macro-at-most-once-rep-2018.rs:40:15\n    |\n LL | macro_rules! barplus {\n    | -------------------- when calling this macro\n@@ -59,7 +59,7 @@ LL |     barplus!(a?); //~ ERROR no rules expected the token `?`\n    |               ^ no rules expected this token in macro call\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:43:15\n+  --> $DIR/macro-at-most-once-rep-2018.rs:41:15\n    |\n LL | macro_rules! barplus {\n    | -------------------- when calling this macro\n@@ -68,7 +68,7 @@ LL |     barplus!(a?a); //~ ERROR no rules expected the token `?`\n    |               ^ no rules expected this token in macro call\n \n error: unexpected end of macro invocation\n-  --> $DIR/macro-at-most-once-rep-2018.rs:47:5\n+  --> $DIR/macro-at-most-once-rep-2018.rs:45:5\n    |\n LL | macro_rules! barstar {\n    | -------------------- when calling this macro\n@@ -77,7 +77,7 @@ LL |     barstar!(); //~ERROR unexpected end of macro invocation\n    |     ^^^^^^^^^^^ missing tokens in macro arguments\n \n error: unexpected end of macro invocation\n-  --> $DIR/macro-at-most-once-rep-2018.rs:48:15\n+  --> $DIR/macro-at-most-once-rep-2018.rs:46:14\n    |\n LL | macro_rules! barstar {\n    | -------------------- when calling this macro\n@@ -86,7 +86,7 @@ LL |     barstar!(a); //~ERROR unexpected end of macro invocation\n    |               ^ missing tokens in macro arguments\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:49:15\n+  --> $DIR/macro-at-most-once-rep-2018.rs:47:15\n    |\n LL | macro_rules! barstar {\n    | -------------------- when calling this macro\n@@ -95,7 +95,7 @@ LL |     barstar!(a?); //~ ERROR no rules expected the token `?`\n    |               ^ no rules expected this token in macro call\n \n error: no rules expected the token `?`\n-  --> $DIR/macro-at-most-once-rep-2018.rs:50:15\n+  --> $DIR/macro-at-most-once-rep-2018.rs:48:15\n    |\n LL | macro_rules! barstar {\n    | -------------------- when calling this macro"}]}