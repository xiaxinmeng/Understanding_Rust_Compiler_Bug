{"sha": "5b2076ff01c75d4b7e09dac5b5630ecb16d66255", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViMjA3NmZmMDFjNzVkNGI3ZTA5ZGFjNWI1NjMwZWNiMTZkNjYyNTU=", "commit": {"author": {"name": "Peter Todd", "email": "pete@petertodd.org", "date": "2021-05-27T18:01:16Z"}, "committer": {"name": "Peter Todd", "email": "pete@petertodd.org", "date": "2021-05-27T18:01:16Z"}, "message": "Revert #85176 addition of `clone_from` for `ManuallyDrop`\n\nForwarding `clone_from` to the inner value changes the observable\nbehavior, as previously the inner value would *not* be dropped by the\ndefault implementation.", "tree": {"sha": "de33e69cfe4c1a0eacf80ca0291d44b3b9e12a33", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de33e69cfe4c1a0eacf80ca0291d44b3b9e12a33"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5b2076ff01c75d4b7e09dac5b5630ecb16d66255", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEEFcyURjhyM68BBPYTJIFAPaXwkfsFAmCv31sACgkQJIFAPaXw\nkftxUQf/fd3lfJexwZMHP1QuIn9lVp9fa1X/VSIWuo35U2Q3Knrr5AYskGCnGJoB\nvo4xC+Fy1sDyOx4SC4kiu4D2WFZqc5CZDYf3+mhm0Hasa7eSliz+/vheBawGnHRk\n8VV5V+3SC9XhyPacRdTUljPnPwAZd9ZaiMkhX8b8rq4NVJzgWHqSX9AVX5WtLz3D\nVuJukdZlRpaX17ZIvwn07P5w5DuEmiloFi5oPOKgXblJaDRPgoYJRg1MAo33VnQ6\nZaUlJHGOvgKAE4owBmWbJ/FgbqZPYnOC8e+HnGlIcptljNf1mSPBk7FoWiLXxtbO\nssNcvn6KM28JGIvyNdovSwNabVZI1A==\n=HdvS\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwII4/ENFm15EBFXt19f1lfubcKfdsGQ8F4j+5NxtzqtJoCP/wED3Q8L1Bb0Ey\nTRU3wpYu+54I8QRgr99l8AgofL1y3+JfpACD3+MNLvkMjiwraHR0cHM6Ly9ib2Iu\nYnRjLmNhbGVuZGFyLm9wZW50aW1lc3RhbXBzLm9yZ//wEFY7d9l1NI5Jwqdxps0U\n4UQI8QRgr99l8AhOxi7Qi8TfkwCD3+MNLvkMjiMiaHR0cHM6Ly9idGMuY2FsZW5k\nYXIuY2F0YWxsYXh5LmNvbfAQn21pm9VyhV/s0gULGOl4UAjxBGCv32TwCGh1B5yk\noeEhAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGlt\nZXN0YW1wcy5vcmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----", "payload": "tree de33e69cfe4c1a0eacf80ca0291d44b3b9e12a33\nparent ea78d1edf364dd3a4b5ff430f76e2bdd3a713a45\nauthor Peter Todd <pete@petertodd.org> 1622138476 -0400\ncommitter Peter Todd <pete@petertodd.org> 1622138476 -0400\n\nRevert #85176 addition of `clone_from` for `ManuallyDrop`\n\nForwarding `clone_from` to the inner value changes the observable\nbehavior, as previously the inner value would *not* be dropped by the\ndefault implementation.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5b2076ff01c75d4b7e09dac5b5630ecb16d66255", "html_url": "https://github.com/rust-lang/rust/commit/5b2076ff01c75d4b7e09dac5b5630ecb16d66255", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5b2076ff01c75d4b7e09dac5b5630ecb16d66255/comments", "author": {"login": "petertodd", "id": 7042, "node_id": "MDQ6VXNlcjcwNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petertodd", "html_url": "https://github.com/petertodd", "followers_url": "https://api.github.com/users/petertodd/followers", "following_url": "https://api.github.com/users/petertodd/following{/other_user}", "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions", "organizations_url": "https://api.github.com/users/petertodd/orgs", "repos_url": "https://api.github.com/users/petertodd/repos", "events_url": "https://api.github.com/users/petertodd/events{/privacy}", "received_events_url": "https://api.github.com/users/petertodd/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petertodd", "id": 7042, "node_id": "MDQ6VXNlcjcwNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petertodd", "html_url": "https://github.com/petertodd", "followers_url": "https://api.github.com/users/petertodd/followers", "following_url": "https://api.github.com/users/petertodd/following{/other_user}", "gists_url": "https://api.github.com/users/petertodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/petertodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions", "organizations_url": "https://api.github.com/users/petertodd/orgs", "repos_url": "https://api.github.com/users/petertodd/repos", "events_url": "https://api.github.com/users/petertodd/events{/privacy}", "received_events_url": "https://api.github.com/users/petertodd/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea78d1edf364dd3a4b5ff430f76e2bdd3a713a45", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea78d1edf364dd3a4b5ff430f76e2bdd3a713a45", "html_url": "https://github.com/rust-lang/rust/commit/ea78d1edf364dd3a4b5ff430f76e2bdd3a713a45"}], "stats": {"total": 15, "additions": 1, "deletions": 14}, "files": [{"sha": "d86939454be5b0c4432dec7fe6c97a90da0c5e48", "filename": "library/core/src/mem/manually_drop.rs", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/5b2076ff01c75d4b7e09dac5b5630ecb16d66255/library%2Fcore%2Fsrc%2Fmem%2Fmanually_drop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5b2076ff01c75d4b7e09dac5b5630ecb16d66255/library%2Fcore%2Fsrc%2Fmem%2Fmanually_drop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fmem%2Fmanually_drop.rs?ref=5b2076ff01c75d4b7e09dac5b5630ecb16d66255", "patch": "@@ -44,7 +44,7 @@ use crate::ptr;\n /// [`MaybeUninit<T>`]: crate::mem::MaybeUninit\n #[stable(feature = \"manually_drop\", since = \"1.20.0\")]\n #[lang = \"manually_drop\"]\n-#[derive(Copy, Debug, Default, PartialEq, Eq, PartialOrd, Ord, Hash)]\n+#[derive(Copy, Clone, Debug, Default, PartialEq, Eq, PartialOrd, Ord, Hash)]\n #[repr(transparent)]\n pub struct ManuallyDrop<T: ?Sized> {\n     value: T,\n@@ -160,16 +160,3 @@ impl<T: ?Sized> DerefMut for ManuallyDrop<T> {\n         &mut self.value\n     }\n }\n-\n-#[stable(feature = \"manually_drop\", since = \"1.20.0\")]\n-impl<T: Clone> Clone for ManuallyDrop<T> {\n-    #[inline]\n-    fn clone(&self) -> ManuallyDrop<T> {\n-        ManuallyDrop { value: self.value.clone() }\n-    }\n-\n-    #[inline]\n-    fn clone_from(&mut self, other: &Self) {\n-        self.value.clone_from(&other.value)\n-    }\n-}"}]}