{"sha": "9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "node_id": "C_kwDOAAsO6NoAKDlhZjkwZmZhM2M0MGUzMGQ5YWNjOWE3YjNlMGZiZjEyMTU2MGM5ZTk", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-02-11T05:45:55Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-11T05:45:55Z"}, "message": "Rollup merge of #107490 - notriddle:notriddle/rm-sidebar-tooltip, r=GuillaumeGomez\n\nrustdoc: remove inconsistently-present sidebar tooltips\n\nDiscussed in https://rust-lang.zulipchat.com/#narrow/stream/266220-rustdoc/topic/Inconsistent.20sidebar.20tooltips/near/323565625", "tree": {"sha": "8d4639f50162e14d60300097a0c1c5c5a0972614", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d4639f50162e14d60300097a0c1c5c5a0972614"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj5yuTCRBK7hj4Ov3rIwAAjgkIAI85rBEDodFOvfSRoHufaILE\njbWcc60GEZeN2UgVT1BWsuHHBOMgLWkdZH2xs476KWYt9br+2KwRMZcDumzPhv6Y\nZwDCFXID2Wibz9Geva7nADDIS+Csr+1VN54VeBegOlj/EtHxeqxYjD55nNMmNo3q\n18Dk8tDhFpg557TX+4DWcDJh/wzvMYdGRFbT00ajVe8vw3W3UuFKuVu9UEIlhYTq\njHzug0w2CBdVsxvYWXnBCLK1jRowFYQgRBCUre33+VdD0PHwHVgVmXsJxo0YUv2p\nlHFv5VmP7p3tHHj8YPexcHp6tym8rkM2+3GZsy4GEzMEbnJjZZ2qYDoiO1pYiGU=\n=wTgj\n-----END PGP SIGNATURE-----\n", "payload": "tree 8d4639f50162e14d60300097a0c1c5c5a0972614\nparent 400b03ac3c3259506a23515197e49767d6eb5170\nparent 3a20cbf9fc1e3049da8dcc64e572dfb4ff32dd8e\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1676094355 +0530\ncommitter GitHub <noreply@github.com> 1676094355 +0530\n\nRollup merge of #107490 - notriddle:notriddle/rm-sidebar-tooltip, r=GuillaumeGomez\n\nrustdoc: remove inconsistently-present sidebar tooltips\n\nDiscussed in https://rust-lang.zulipchat.com/#narrow/stream/266220-rustdoc/topic/Inconsistent.20sidebar.20tooltips/near/323565625\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "html_url": "https://github.com/rust-lang/rust/commit/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "400b03ac3c3259506a23515197e49767d6eb5170", "url": "https://api.github.com/repos/rust-lang/rust/commits/400b03ac3c3259506a23515197e49767d6eb5170", "html_url": "https://github.com/rust-lang/rust/commit/400b03ac3c3259506a23515197e49767d6eb5170"}, {"sha": "3a20cbf9fc1e3049da8dcc64e572dfb4ff32dd8e", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a20cbf9fc1e3049da8dcc64e572dfb4ff32dd8e", "html_url": "https://github.com/rust-lang/rust/commit/3a20cbf9fc1e3049da8dcc64e572dfb4ff32dd8e"}], "stats": {"total": 45, "additions": 4, "deletions": 41}, "files": [{"sha": "1216a8d71c8cfa51bce3bace9577f7760de4ee1c", "filename": "src/librustdoc/html/render/context.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs?ref=9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "patch": "@@ -18,7 +18,7 @@ use super::search_index::build_index;\n use super::write_shared::write_shared;\n use super::{\n     collect_spans_and_sources, print_sidebar, scrape_examples_help, sidebar_module_like, AllTypes,\n-    LinkFromSrc, NameDoc, StylePath,\n+    LinkFromSrc, StylePath,\n };\n \n use crate::clean::{self, types::ExternalLocation, ExternalCrate};\n@@ -256,7 +256,7 @@ impl<'tcx> Context<'tcx> {\n     }\n \n     /// Construct a map of items shown in the sidebar to a plain-text summary of their docs.\n-    fn build_sidebar_items(&self, m: &clean::Module) -> BTreeMap<String, Vec<NameDoc>> {\n+    fn build_sidebar_items(&self, m: &clean::Module) -> BTreeMap<String, Vec<String>> {\n         // BTreeMap instead of HashMap to get a sorted output\n         let mut map: BTreeMap<_, Vec<_>> = BTreeMap::new();\n         let mut inserted: FxHashMap<ItemType, FxHashSet<Symbol>> = FxHashMap::default();\n@@ -274,10 +274,7 @@ impl<'tcx> Context<'tcx> {\n             if inserted.entry(short).or_default().insert(myname) {\n                 let short = short.to_string();\n                 let myname = myname.to_string();\n-                map.entry(short).or_default().push((\n-                    myname,\n-                    Some(item.doc_value().map_or_else(String::new, |s| plain_text_summary(&s))),\n-                ));\n+                map.entry(short).or_default().push(myname);\n             }\n         }\n "}, {"sha": "6a9a7a6b1a088613156447981c2b9457fdb35221", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "patch": "@@ -83,9 +83,6 @@ use crate::scrape_examples::{CallData, CallLocation};\n use crate::try_none;\n use crate::DOC_RUST_LANG_ORG_CHANNEL;\n \n-/// A pair of name and its optional document.\n-pub(crate) type NameDoc = (String, Option<String>);\n-\n pub(crate) fn ensure_trailing_slash(v: &str) -> impl fmt::Display + '_ {\n     crate::html::format::display_fn(move |f| {\n         if !v.ends_with('/') && !v.is_empty() { write!(f, \"{}/\", v) } else { f.write_str(v) }"}, {"sha": "aa4d65b4bfbcd52bce477a8e32faaa2d5b407308", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=9af90ffa3c40e30d9acc9a7b3e0fbf121560c9e9", "patch": "@@ -455,10 +455,7 @@ function loadCss(cssUrl) {\n             const ul = document.createElement(\"ul\");\n             ul.className = \"block \" + shortty;\n \n-            for (const item of filtered) {\n-                const name = item[0];\n-                const desc = item[1]; // can be null\n-\n+            for (const name of filtered) {\n                 let path;\n                 if (shortty === \"mod\") {\n                     path = name + \"/index.html\";\n@@ -468,7 +465,6 @@ function loadCss(cssUrl) {\n                 const current_page = document.location.href.split(\"/\").pop();\n                 const link = document.createElement(\"a\");\n                 link.href = path;\n-                link.title = desc;\n                 if (path === current_page) {\n                     link.className = \"current\";\n                 }"}, {"sha": "31e7072b5ce9bc7e05c4b596d777aaf991ad2d6d", "filename": "tests/rustdoc/markdown-summaries.rs", "status": "removed", "additions": 0, "deletions": 27, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/400b03ac3c3259506a23515197e49767d6eb5170/tests%2Frustdoc%2Fmarkdown-summaries.rs", "raw_url": "https://github.com/rust-lang/rust/raw/400b03ac3c3259506a23515197e49767d6eb5170/tests%2Frustdoc%2Fmarkdown-summaries.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fmarkdown-summaries.rs?ref=400b03ac3c3259506a23515197e49767d6eb5170", "patch": "@@ -1,27 +0,0 @@\n-#![crate_type = \"lib\"]\n-#![crate_name = \"summaries\"]\n-\n-//! This *summary* has a [link] and `code`.\n-//!\n-//! This is the second paragraph.\n-//!\n-//! [link]: https://example.com\n-\n-// @hasraw search-index.js 'This <em>summary</em> has a link and <code>code</code>.'\n-// @!hasraw - 'second paragraph'\n-\n-/// This `code` will be rendered in a code tag.\n-///\n-/// This text should not be rendered.\n-pub struct Sidebar;\n-\n-// @hasraw search-index.js 'This <code>code</code> will be rendered in a code tag.'\n-// @hasraw summaries/sidebar-items.js 'This `code` will be rendered in a code tag.'\n-// @!hasraw - 'text should not be rendered'\n-\n-/// ```text\n-/// this block should not be rendered\n-/// ```\n-pub struct Sidebar2;\n-\n-// @!hasraw summaries/sidebar-items.js 'block should not be rendered'"}]}