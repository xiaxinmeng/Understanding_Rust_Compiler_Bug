{"sha": "c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5YWJjN2UyYmJlZDRhZmNhMmU3YzhkZTdjNzMzNGQwYTM3MjRiYjg=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-08-30T12:41:09Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-09-02T10:29:11Z"}, "message": "Remove print_fuel_crate field of Session", "tree": {"sha": "968c798c1fb3238f128952e1103d2302c78b70c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/968c798c1fb3238f128952e1103d2302c78b70c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "html_url": "https://github.com/rust-lang/rust/commit/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5464b2e713d5366b3aec5c6eebbe1b84a782c51e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5464b2e713d5366b3aec5c6eebbe1b84a782c51e", "html_url": "https://github.com/rust-lang/rust/commit/5464b2e713d5366b3aec5c6eebbe1b84a782c51e"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "53053327d0dab276b0c90134b18854a84d0fe483", "filename": "compiler/rustc_driver/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver%2Fsrc%2Flib.rs?ref=c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "patch": "@@ -423,10 +423,10 @@ fn run_compiler(\n             sess.print_perf_stats();\n         }\n \n-        if sess.print_fuel_crate.is_some() {\n+        if sess.opts.debugging_opts.print_fuel.is_some() {\n             eprintln!(\n                 \"Fuel used by {}: {}\",\n-                sess.print_fuel_crate.as_ref().unwrap(),\n+                sess.opts.debugging_opts.print_fuel.as_ref().unwrap(),\n                 sess.print_fuel.load(SeqCst)\n             );\n         }"}, {"sha": "f29275bffc40fc740c6f8d890cd70d8f03d32c8a", "filename": "compiler/rustc_session/src/session.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fsession.rs?ref=c9abc7e2bbed4afca2e7c8de7c7334d0a3724bb8", "patch": "@@ -173,9 +173,6 @@ pub struct Session {\n     /// Tracks fuel info if `-zfuel=crate=n` is specified.\n     optimization_fuel: Lock<OptimizationFuel>,\n \n-    // The next two are public because the driver needs to read them.\n-    /// If `-zprint-fuel=crate`, `Some(crate)`.\n-    pub print_fuel_crate: Option<String>,\n     /// Always set to zero and incremented so that we can print fuel expended by a crate.\n     pub print_fuel: AtomicU64,\n \n@@ -900,7 +897,7 @@ impl Session {\n                 }\n             }\n         }\n-        if let Some(ref c) = self.print_fuel_crate {\n+        if let Some(ref c) = self.opts.debugging_opts.print_fuel {\n             if c == crate_name {\n                 assert_eq!(self.threads(), 1);\n                 self.print_fuel.fetch_add(1, SeqCst);\n@@ -1262,7 +1259,6 @@ pub fn build_session(\n         remaining: sopts.debugging_opts.fuel.as_ref().map_or(0, |i| i.1),\n         out_of_fuel: false,\n     });\n-    let print_fuel_crate = sopts.debugging_opts.print_fuel.clone();\n     let print_fuel = AtomicU64::new(0);\n \n     let cgu_reuse_tracker = if sopts.debugging_opts.query_dep_graph {\n@@ -1311,7 +1307,6 @@ pub fn build_session(\n         },\n         code_stats: Default::default(),\n         optimization_fuel,\n-        print_fuel_crate,\n         print_fuel,\n         jobserver: jobserver::client(),\n         driver_lint_caps,"}]}