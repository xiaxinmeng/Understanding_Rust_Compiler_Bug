{"sha": "b3d1a8331180df3a5efaf3e0f2ccac0013059402", "node_id": "C_kwDOAAsO6NoAKGIzZDFhODMzMTE4MGRmM2E1ZWZhZjNlMGYyY2NhYzAwMTMwNTk0MDI", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2023-06-08T08:15:13Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-06-08T08:15:13Z"}, "message": "Rollup merge of #112396 - WaffleLapkin:track_more_diagnostics, r=compiler-errors\n\nTrack more diagnostics in `rustc_expand`\n\nI wish we could lint this somehow...", "tree": {"sha": "0e87cd497fdc17ae77efbd2554dee04866aab5ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e87cd497fdc17ae77efbd2554dee04866aab5ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b3d1a8331180df3a5efaf3e0f2ccac0013059402", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkgY4RCRBK7hj4Ov3rIwAAePsIAINlBJdrpy1HEfk4MQo28+3+\nke4qpXaoQSQSCLO0r1bDItb9V0XLybY3n/Mf2A/xw46t01ik6GS6ZbMMLz4Pu7Wn\nqzPZPLLbu/XmLxh9rHBEUUaYDfh/DwsdJPPh5AiALam1PyM9PebHBC2i7ciqWU8E\nfp6knC/+fYXm2jRueMR65Ri8HnJxU0c/TLEdBVZbMoO1arIV3UStZi4xxmMP0ipd\nuu6qZlKH4yh7OovZkpErN+ycJXVNsOknNMj0S1mOXjMCQMXWF739QR/LtTKJhdY+\nXXMRJJaLZ013vDs+nuKqAWz+C159CEk2SwDqSQ6RkDUyG/vDIUdFu2C+3iyRfLU=\n=Tnjk\n-----END PGP SIGNATURE-----\n", "payload": "tree 0e87cd497fdc17ae77efbd2554dee04866aab5ef\nparent 80c26483ba813c6bd94395b9f9883d51c02c3425\nparent c38d80ee9f4fde1596ae4bff0733c3ec045e2f3e\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1686212113 +0200\ncommitter GitHub <noreply@github.com> 1686212113 +0200\n\nRollup merge of #112396 - WaffleLapkin:track_more_diagnostics, r=compiler-errors\n\nTrack more diagnostics in `rustc_expand`\n\nI wish we could lint this somehow...\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b3d1a8331180df3a5efaf3e0f2ccac0013059402", "html_url": "https://github.com/rust-lang/rust/commit/b3d1a8331180df3a5efaf3e0f2ccac0013059402", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b3d1a8331180df3a5efaf3e0f2ccac0013059402/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80c26483ba813c6bd94395b9f9883d51c02c3425", "url": "https://api.github.com/repos/rust-lang/rust/commits/80c26483ba813c6bd94395b9f9883d51c02c3425", "html_url": "https://github.com/rust-lang/rust/commit/80c26483ba813c6bd94395b9f9883d51c02c3425"}, {"sha": "c38d80ee9f4fde1596ae4bff0733c3ec045e2f3e", "url": "https://api.github.com/repos/rust-lang/rust/commits/c38d80ee9f4fde1596ae4bff0733c3ec045e2f3e", "html_url": "https://github.com/rust-lang/rust/commit/c38d80ee9f4fde1596ae4bff0733c3ec045e2f3e"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "8a251ea29d7fcc80952ae9b03f6ef35ccbf5c5b7", "filename": "compiler/rustc_expand/src/base.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b3d1a8331180df3a5efaf3e0f2ccac0013059402/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b3d1a8331180df3a5efaf3e0f2ccac0013059402/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fbase.rs?ref=b3d1a8331180df3a5efaf3e0f2ccac0013059402", "patch": "@@ -1110,6 +1110,7 @@ impl<'a> ExtCtxt<'a> {\n     }\n \n     #[rustc_lint_diagnostics]\n+    #[track_caller]\n     pub fn struct_span_err<S: Into<MultiSpan>>(\n         &self,\n         sp: S,\n@@ -1118,13 +1119,15 @@ impl<'a> ExtCtxt<'a> {\n         self.sess.parse_sess.span_diagnostic.struct_span_err(sp, msg)\n     }\n \n+    #[track_caller]\n     pub fn create_err(\n         &self,\n         err: impl IntoDiagnostic<'a>,\n     ) -> DiagnosticBuilder<'a, ErrorGuaranteed> {\n         self.sess.create_err(err)\n     }\n \n+    #[track_caller]\n     pub fn emit_err(&self, err: impl IntoDiagnostic<'a>) -> ErrorGuaranteed {\n         self.sess.emit_err(err)\n     }\n@@ -1135,10 +1138,12 @@ impl<'a> ExtCtxt<'a> {\n     /// Compilation will be stopped in the near future (at the end of\n     /// the macro expansion phase).\n     #[rustc_lint_diagnostics]\n+    #[track_caller]\n     pub fn span_err<S: Into<MultiSpan>>(&self, sp: S, msg: impl Into<DiagnosticMessage>) {\n         self.sess.parse_sess.span_diagnostic.span_err(sp, msg);\n     }\n     #[rustc_lint_diagnostics]\n+    #[track_caller]\n     pub fn span_warn<S: Into<MultiSpan>>(&self, sp: S, msg: impl Into<DiagnosticMessage>) {\n         self.sess.parse_sess.span_diagnostic.span_warn(sp, msg);\n     }"}]}