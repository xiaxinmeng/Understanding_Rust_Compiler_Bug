{"sha": "ef223b9e6439c228e0be49861efd2067c0b22af4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVmMjIzYjllNjQzOWMyMjhlMGJlNDk4NjFlZmQyMDY3YzBiMjJhZjQ=", "commit": {"author": {"name": "Veetaha", "email": "veetaha2@gmail.com", "date": "2020-07-06T10:39:08Z"}, "committer": {"name": "Veetaha", "email": "veetaha2@gmail.com", "date": "2020-07-06T10:41:38Z"}, "message": "Fix: allow for binaries from $PATH to pass validity check", "tree": {"sha": "6a4cbf2eb92a1e160397416e212420de9281ab9d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a4cbf2eb92a1e160397416e212420de9281ab9d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ef223b9e6439c228e0be49861efd2067c0b22af4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ef223b9e6439c228e0be49861efd2067c0b22af4", "html_url": "https://github.com/rust-lang/rust/commit/ef223b9e6439c228e0be49861efd2067c0b22af4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ef223b9e6439c228e0be49861efd2067c0b22af4/comments", "author": {"login": "Veetaha", "id": 36276403, "node_id": "MDQ6VXNlcjM2Mjc2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/36276403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veetaha", "html_url": "https://github.com/Veetaha", "followers_url": "https://api.github.com/users/Veetaha/followers", "following_url": "https://api.github.com/users/Veetaha/following{/other_user}", "gists_url": "https://api.github.com/users/Veetaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veetaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veetaha/subscriptions", "organizations_url": "https://api.github.com/users/Veetaha/orgs", "repos_url": "https://api.github.com/users/Veetaha/repos", "events_url": "https://api.github.com/users/Veetaha/events{/privacy}", "received_events_url": "https://api.github.com/users/Veetaha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veetaha", "id": 36276403, "node_id": "MDQ6VXNlcjM2Mjc2NDAz", "avatar_url": "https://avatars.githubusercontent.com/u/36276403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veetaha", "html_url": "https://github.com/Veetaha", "followers_url": "https://api.github.com/users/Veetaha/followers", "following_url": "https://api.github.com/users/Veetaha/following{/other_user}", "gists_url": "https://api.github.com/users/Veetaha/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veetaha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veetaha/subscriptions", "organizations_url": "https://api.github.com/users/Veetaha/orgs", "repos_url": "https://api.github.com/users/Veetaha/repos", "events_url": "https://api.github.com/users/Veetaha/events{/privacy}", "received_events_url": "https://api.github.com/users/Veetaha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "46163acf62a94ec603be444294e119933c953a84", "url": "https://api.github.com/repos/rust-lang/rust/commits/46163acf62a94ec603be444294e119933c953a84", "html_url": "https://github.com/rust-lang/rust/commit/46163acf62a94ec603be444294e119933c953a84"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "970fedb3787fcf547609b8e32555edb8f7917eb1", "filename": "editors/code/src/util.ts", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ef223b9e6439c228e0be49861efd2067c0b22af4/editors%2Fcode%2Fsrc%2Futil.ts", "raw_url": "https://github.com/rust-lang/rust/raw/ef223b9e6439c228e0be49861efd2067c0b22af4/editors%2Fcode%2Fsrc%2Futil.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Futil.ts?ref=ef223b9e6439c228e0be49861efd2067c0b22af4", "patch": "@@ -1,5 +1,4 @@\n import * as lc from \"vscode-languageclient\";\n-import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n import { strict as nativeAssert } from \"assert\";\n import { spawnSync } from \"child_process\";\n@@ -114,15 +113,12 @@ export function isRustEditor(editor: vscode.TextEditor): editor is RustEditor {\n export function isValidExecutable(path: string): boolean {\n     log.debug(\"Checking availability of a binary at\", path);\n \n-    if (!fs.existsSync(path)) return false;\n-\n     const res = spawnSync(path, [\"--version\"], { encoding: 'utf8' });\n \n-    const isSuccess = res.status === 0;\n-    const printOutput = isSuccess ? log.debug : log.warn;\n+    const printOutput = res.error && (res.error as any).code !== 'ENOENT' ? log.warn : log.debug;\n     printOutput(path, \"--version:\", res);\n \n-    return isSuccess;\n+    return res.status === 0;\n }\n \n /** Sets ['when'](https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts) clause contexts */"}]}