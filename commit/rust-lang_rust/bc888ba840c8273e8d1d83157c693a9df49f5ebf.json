{"sha": "bc888ba840c8273e8d1d83157c693a9df49f5ebf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJjODg4YmE4NDBjODI3M2U4ZDFkODMxNTdjNjkzYTlkZjQ5ZjVlYmY=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-05-02T16:59:31Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-05-31T08:30:16Z"}, "message": "Add sidebar GUI tests", "tree": {"sha": "de08765a9c34ed0d41d6b47c3100888bcb704767", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de08765a9c34ed0d41d6b47c3100888bcb704767"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bc888ba840c8273e8d1d83157c693a9df49f5ebf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bc888ba840c8273e8d1d83157c693a9df49f5ebf", "html_url": "https://github.com/rust-lang/rust/commit/bc888ba840c8273e8d1d83157c693a9df49f5ebf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bc888ba840c8273e8d1d83157c693a9df49f5ebf/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dab01a05fb0300873728cedff8164f87804f19ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/dab01a05fb0300873728cedff8164f87804f19ef", "html_url": "https://github.com/rust-lang/rust/commit/dab01a05fb0300873728cedff8164f87804f19ef"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "7e6b8a9b965c3486ceca70be29874f120e35278f", "filename": "src/test/rustdoc-gui/sidebar.goml", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/bc888ba840c8273e8d1d83157c693a9df49f5ebf/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "raw_url": "https://github.com/rust-lang/rust/raw/bc888ba840c8273e8d1d83157c693a9df49f5ebf/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar.goml?ref=bc888ba840c8273e8d1d83157c693a9df49f5ebf", "patch": "@@ -0,0 +1,47 @@\n+goto: file://|DOC_PATH|/test_docs/index.html\n+assert: (\".sidebar > .location\", \"Crate test_docs\")\n+// In modules, we only have one \"location\" element.\n+assert: (\".sidebar .location\", 1)\n+assert: (\".sidebar-elems > #all-types\", \"See all test_docs's items\")\n+// We check that we have the crates list and that the \"current\" on is \"test_docs\".\n+assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"test_docs\")\n+// And we're also supposed to have the list of items in the current module.\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Structs\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(3)\", \"Enums\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(4)\", \"Traits\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(5)\", \"Functions\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(6)\", \"Keywords\")\n+assert: (\"#structs + table td > a\", \"Foo\")\n+click: \"#structs + table td > a\"\n+\n+// PAGE: struct.Foo.html\n+assert: (\".sidebar .location\", 2)\n+// We check that we have the crates list and that the \"current\" on is still \"test_docs\".\n+assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"test_docs\")\n+// We now move to the other crate to check if its submodules have the correct sidebar elements too.\n+click: \".sidebar-elems > .crate > ul > li:first-child > a\"\n+\n+// PAGE: lib2/index.html\n+assert: (\".sidebar > .location\", \"Crate lib2\")\n+// We check that we have the crates list and that the \"current\" on is now \"lib2\".\n+assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"lib2\")\n+// We now go to the \"foobar\" function page.\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Modules\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(2)\", \"Functions\")\n+assert:\t(\"#functions + table td > a\", \"foobar\")\n+click: \"#functions + table td > a\"\n+\n+// PAGE: fn.foobar.html\n+// In items containing no items (like functions or constants) and in modules, we have one\n+// \"location\" elements.\n+assert: (\".sidebar .location\", 1)\n+// We check that we still have the crates list and that the \"current\" on is still \"lib2\".\n+assert: (\".sidebar-elems > .crate > ul > li > a.current\", \"lib2\")\n+goto: ./module/sub_module/sub_sub_module/index.html\n+\n+assert: (\".sidebar > .location\", \"Module sub_sub_module\")\n+assert: (\".sidebar-elems > .crate > ul > li:nth-child(2) > a\", \"test_docs\")\n+assert: (\".sidebar-elems > .crate > ul > li:nth-child(2) > a\", \"href\", \"../../../../test_docs/index.html\")\n+assert: (\".sidebar-elems > .items > ul > li:nth-child(1)\", \"Functions\")\n+assert: (\"#functions + table td > a\", \"foo\")"}, {"sha": "73384cbf90633b5ffce492ed9e7bd48c3340f9b3", "filename": "src/test/rustdoc-gui/src/lib2.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/bc888ba840c8273e8d1d83157c693a9df49f5ebf/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bc888ba840c8273e8d1d83157c693a9df49f5ebf/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Flib2.rs?ref=bc888ba840c8273e8d1d83157c693a9df49f5ebf", "patch": "@@ -0,0 +1,11 @@\n+pub mod module {\n+    pub mod sub_module {\n+        pub mod sub_sub_module {\n+            pub fn foo() {}\n+        }\n+        pub fn bar() {}\n+    }\n+    pub fn whatever() {}\n+}\n+\n+pub fn foobar() {}"}]}