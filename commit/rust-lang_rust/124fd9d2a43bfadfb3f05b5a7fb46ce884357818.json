{"sha": "124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyNGZkOWQyYTQzYmZhZGZiM2YwNWI1YTdmYjQ2Y2U4ODQzNTc4MTg=", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2020-01-01T16:31:03Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2020-01-29T18:43:36Z"}, "message": "Move upvars query to librustc_passes.", "tree": {"sha": "bf4b7027d5cfbb8692ed4ce878b7f796d5d44cd7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bf4b7027d5cfbb8692ed4ce878b7f796d5d44cd7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "html_url": "https://github.com/rust-lang/rust/commit/124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "62c2c99d7d75cb35c60ff8bc3d5c876a0a820b93", "url": "https://api.github.com/repos/rust-lang/rust/commits/62c2c99d7d75cb35c60ff8bc3d5c876a0a820b93", "html_url": "https://github.com/rust-lang/rust/commit/62c2c99d7d75cb35c60ff8bc3d5c876a0a820b93"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "6275c0aabe896829883c90d467a78a4fad10f717", "filename": "src/librustc/hir/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc%2Fhir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc%2Fhir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fmod.rs?ref=124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "patch": "@@ -5,11 +5,9 @@\n pub mod check_attr;\n pub mod exports;\n pub mod map;\n-pub mod upvars;\n \n use crate::ty::query::Providers;\n \n pub fn provide(providers: &mut Providers<'_>) {\n     map::provide(providers);\n-    upvars::provide(providers);\n }"}, {"sha": "4c0fd903db098bc16643f4e2fc39ef5a5fa8b046", "filename": "src/librustc_passes/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc_passes%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc_passes%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Flib.rs?ref=124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "patch": "@@ -31,6 +31,7 @@ pub mod loops;\n mod reachable;\n mod region;\n pub mod stability;\n+mod upvars;\n \n pub fn provide(providers: &mut Providers<'_>) {\n     check_attr::provide(providers);\n@@ -44,4 +45,5 @@ pub fn provide(providers: &mut Providers<'_>) {\n     reachable::provide(providers);\n     region::provide(providers);\n     stability::provide(providers);\n+    upvars::provide(providers);\n }"}, {"sha": "a2397f273385a531e9c109880a65716da7c09dbb", "filename": "src/librustc_passes/upvars.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc_passes%2Fupvars.rs", "raw_url": "https://github.com/rust-lang/rust/raw/124fd9d2a43bfadfb3f05b5a7fb46ce884357818/src%2Flibrustc_passes%2Fupvars.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_passes%2Fupvars.rs?ref=124fd9d2a43bfadfb3f05b5a7fb46ce884357818", "patch": "@@ -1,8 +1,8 @@\n //! Upvar (closure capture) collection from cross-body HIR uses of `Res::Local`s.\n \n-use crate::hir::map::Map;\n-use crate::ty::query::Providers;\n-use crate::ty::TyCtxt;\n+use rustc::hir::map::Map;\n+use rustc::ty::query::Providers;\n+use rustc::ty::TyCtxt;\n use rustc_data_structures::fx::{FxHashSet, FxIndexMap};\n use rustc_hir as hir;\n use rustc_hir::def::Res;"}]}