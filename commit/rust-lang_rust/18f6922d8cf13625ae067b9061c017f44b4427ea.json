{"sha": "18f6922d8cf13625ae067b9061c017f44b4427ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4ZjY5MjJkOGNmMTM2MjVhZTA2N2I5MDYxYzAxN2Y0NGI0NDI3ZWE=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-05-04T02:19:49Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2021-05-18T01:31:05Z"}, "message": "Address review comments\n\n- Simplify boolean expression\n- Give an example of invalid syntax\n- Remove explanation of why code block is text", "tree": {"sha": "523dc526cf55bdec645e3d6a19dc65daac8dcb9e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/523dc526cf55bdec645e3d6a19dc65daac8dcb9e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18f6922d8cf13625ae067b9061c017f44b4427ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18f6922d8cf13625ae067b9061c017f44b4427ea", "html_url": "https://github.com/rust-lang/rust/commit/18f6922d8cf13625ae067b9061c017f44b4427ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18f6922d8cf13625ae067b9061c017f44b4427ea/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b885d81a4a59fa9282ecb088e6eac8e30cb4a9bf", "url": "https://api.github.com/repos/rust-lang/rust/commits/b885d81a4a59fa9282ecb088e6eac8e30cb4a9bf", "html_url": "https://github.com/rust-lang/rust/commit/b885d81a4a59fa9282ecb088e6eac8e30cb4a9bf"}], "stats": {"total": 37, "additions": 22, "deletions": 15}, "files": [{"sha": "f4d78ac04cb029832ac6bf40d8f19033c6e825a4", "filename": "compiler/rustc_mir/src/borrow_check/region_infer/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/18f6922d8cf13625ae067b9061c017f44b4427ea/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fregion_infer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18f6922d8cf13625ae067b9061c017f44b4427ea/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fregion_infer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Fborrow_check%2Fregion_infer%2Fmod.rs?ref=18f6922d8cf13625ae067b9061c017f44b4427ea", "patch": "@@ -1241,7 +1241,7 @@ impl<'tcx> RegionInferenceContext<'tcx> {\n     /// it. However, it works pretty well in practice. In particular,\n     /// this is needed to deal with projection outlives bounds like\n     ///\n-    /// ```text (internal compiler representation so lifetime syntax is invalid)\n+    /// ```text\n     /// <T as Foo<'0>>::Item: '1\n     /// ```\n     ///"}, {"sha": "16b091eb255b0257bc2090414f418f0dd7b081ba", "filename": "src/doc/rustdoc/src/lints.md", "status": "modified", "additions": 20, "deletions": 13, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/18f6922d8cf13625ae067b9061c017f44b4427ea/src%2Fdoc%2Frustdoc%2Fsrc%2Flints.md", "raw_url": "https://github.com/rust-lang/rust/raw/18f6922d8cf13625ae067b9061c017f44b4427ea/src%2Fdoc%2Frustdoc%2Fsrc%2Flints.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustdoc%2Fsrc%2Flints.md?ref=18f6922d8cf13625ae067b9061c017f44b4427ea", "patch": "@@ -305,30 +305,37 @@ examples that are invalid (e.g. empty, not parsable as Rust). For example:\n /// ```rust\n /// ```\n ///\n-/// Unclosed code blocks (with and without the `rust` marker):\n+/// Invalid syntax in code blocks:\n ///\n /// ```rust\n-fn main() {}\n+/// '<\n+/// ```\n+pub fn foo() {}\n ```\n \n Which will give:\n \n ```text\n warning: Rust code block is empty\n---> src/lib.rs:3:5\n-|\n+ --> lint.rs:3:5\n+  |\n 3 |   /// ```rust\n-|  _____^\n+  |  _____^\n 4 | | /// ```\n-| |_______^\n-|\n-= note: `#[warn(rustdoc::invalid_rust_codeblocks)]` on by default\n+  | |_______^\n+  |\n+  = note: `#[warn(rustdoc::invalid_rust_codeblocks)]` on by default\n \n-warning: Rust code block is empty\n---> src/lib.rs:8:5\n-|\n-8 | /// ```rust\n-|       ^^^^^^^\n+warning: could not parse code block as Rust code\n+  --> lint.rs:8:5\n+   |\n+8  |   /// ```rust\n+   |  _____^\n+9  | | /// '<\n+10 | | /// ```\n+   | |_______^\n+   |\n+   = note: error from rustc: unterminated character literal\n ```\n \n ## bare_urls"}, {"sha": "0b94a74eeef976cdc95f82cb3cad7b44135bc0cc", "filename": "src/librustdoc/passes/check_code_block_syntax.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/18f6922d8cf13625ae067b9061c017f44b4427ea/src%2Flibrustdoc%2Fpasses%2Fcheck_code_block_syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18f6922d8cf13625ae067b9061c017f44b4427ea/src%2Flibrustdoc%2Fpasses%2Fcheck_code_block_syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcheck_code_block_syntax.rs?ref=18f6922d8cf13625ae067b9061c017f44b4427ea", "patch": "@@ -48,7 +48,7 @@ impl<'a, 'tcx> SyntaxChecker<'a, 'tcx> {\n         .unwrap_or(false);\n         let buffer = buffer.borrow();\n \n-        if !(buffer.has_errors || is_empty) {\n+        if !buffer.has_errors && !is_empty {\n             // No errors in a non-empty program.\n             return;\n         }"}]}