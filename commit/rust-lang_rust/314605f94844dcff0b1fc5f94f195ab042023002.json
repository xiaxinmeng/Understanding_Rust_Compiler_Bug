{"sha": "314605f94844dcff0b1fc5f94f195ab042023002", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxNDYwNWY5NDg0NGRjZmYwYjFmYzVmOTRmMTk1YWIwNDIwMjMwMDI=", "commit": {"author": {"name": "Jyun-Yan You", "email": "jyyou@cs.nctu.edu.tw", "date": "2013-01-30T15:42:48Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2013-03-04T04:02:06Z"}, "message": "rt: fix some bugs for MIPS target", "tree": {"sha": "99c6b388b4203ce13f9bcc6cb8fb2811d28b0339", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/99c6b388b4203ce13f9bcc6cb8fb2811d28b0339"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/314605f94844dcff0b1fc5f94f195ab042023002", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/314605f94844dcff0b1fc5f94f195ab042023002", "html_url": "https://github.com/rust-lang/rust/commit/314605f94844dcff0b1fc5f94f195ab042023002", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/314605f94844dcff0b1fc5f94f195ab042023002/comments", "author": {"login": "crabtw", "id": 36015, "node_id": "MDQ6VXNlcjM2MDE1", "avatar_url": "https://avatars.githubusercontent.com/u/36015?v=4", "gravatar_id": "", "url": "https://api.github.com/users/crabtw", "html_url": "https://github.com/crabtw", "followers_url": "https://api.github.com/users/crabtw/followers", "following_url": "https://api.github.com/users/crabtw/following{/other_user}", "gists_url": "https://api.github.com/users/crabtw/gists{/gist_id}", "starred_url": "https://api.github.com/users/crabtw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/crabtw/subscriptions", "organizations_url": "https://api.github.com/users/crabtw/orgs", "repos_url": "https://api.github.com/users/crabtw/repos", "events_url": "https://api.github.com/users/crabtw/events{/privacy}", "received_events_url": "https://api.github.com/users/crabtw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2a61d7df33acc606209b0b020208c7f20212394", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2a61d7df33acc606209b0b020208c7f20212394", "html_url": "https://github.com/rust-lang/rust/commit/c2a61d7df33acc606209b0b020208c7f20212394"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "614cf686817081f091069111ceb11da10eb30775", "filename": "src/rt/arch/mips/_context.S", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2F_context.S", "raw_url": "https://github.com/rust-lang/rust/raw/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2F_context.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fmips%2F_context.S?ref=314605f94844dcff0b1fc5f94f195ab042023002", "patch": "@@ -78,4 +78,5 @@ swap_registers:\n         lw $31, 31 * 4($5)\n \n         jr $31\n+        nop\n .end swap_registers"}, {"sha": "522714a8807b42d64135dcf8de72c7f08a9482d4", "filename": "src/rt/arch/mips/ccall.S", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Fccall.S", "raw_url": "https://github.com/rust-lang/rust/raw/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Fccall.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fmips%2Fccall.S?ref=314605f94844dcff0b1fc5f94f195ab042023002", "patch": "@@ -8,5 +8,22 @@\n __morestack:\n         .set noreorder\n         .set nomacro\n+        move $7, $29\n+        move $29, $6\n \n+        sw $7, 0($29)\n+        sw $31, -4($29)\n+\n+        addiu $29, $29, -24\n+        move $25, $5\n+        jalr $25\n+        nop\n+        addiu $29, $29, 24\n+\n+        lw $31, -4($29)\n+        lw $7, 0($29)\n+\n+        move $29, $7\n+        jr $31\n+        nop\n .end __morestack"}, {"sha": "4ff0729633a649972295b0f2548f20eb549be634", "filename": "src/rt/arch/mips/gpr.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Fgpr.h", "raw_url": "https://github.com/rust-lang/rust/raw/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Fgpr.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fmips%2Fgpr.h?ref=314605f94844dcff0b1fc5f94f195ab042023002", "patch": "@@ -21,10 +21,10 @@ class rust_gpr : public rust_gpr_base {\n     uintptr_t r24, r25, r26, r27, r28, r29, r30, r31;\n \n     inline uintptr_t get_fp() { return r30; }\n-    inline uintptr_t get_ip() { return r0; }\n+    inline uintptr_t get_ip() { return r31; }\n \n     inline void set_fp(uintptr_t new_fp) { r30 = new_fp; }\n-    inline void set_ip(uintptr_t new_ip) { r0 = new_ip; }\n+    inline void set_ip(uintptr_t new_ip) { r31 = new_ip; }\n \n     void load();\n };"}, {"sha": "6b782fc4629ecff1786f4af8e374c654692dd7c2", "filename": "src/rt/arch/mips/record_sp.S", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Frecord_sp.S", "raw_url": "https://github.com/rust-lang/rust/raw/314605f94844dcff0b1fc5f94f195ab042023002/src%2Frt%2Farch%2Fmips%2Frecord_sp.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fmips%2Frecord_sp.S?ref=314605f94844dcff0b1fc5f94f195ab042023002", "patch": "@@ -14,6 +14,7 @@ record_sp_limit:\n         addiu $3, $3, -0x7008\n         sw $4, 4($3)\n         jr $31\n+        nop\n .end record_sp_limit\n \n .globl get_sp_limit\n@@ -30,6 +31,7 @@ get_sp_limit:\n         addiu $3, $3, -0x7008\n         lw $2, 4($3)\n         jr $31\n+        nop\n .end get_sp_limit\n \n .globl get_sp\n@@ -41,4 +43,5 @@ get_sp:\n         .set nomacro\n         move $2, $29\n         jr $31\n+        nop\n .end get_sp"}]}