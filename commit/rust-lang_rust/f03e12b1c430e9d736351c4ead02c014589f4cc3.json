{"sha": "f03e12b1c430e9d736351c4ead02c014589f4cc3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYwM2UxMmIxYzQzMGU5ZDczNjM1MWM0ZWFkMDJjMDE0NTg5ZjRjYzM=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-10-20T15:37:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-10-20T15:37:41Z"}, "message": "Merge pull request #2151 from gbip/master\n\nImplementation of the `const_static_lifetime` lint.", "tree": {"sha": "b3b631aa6bd29181cdf49ed8bbc55ecd76d0dcfc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3b631aa6bd29181cdf49ed8bbc55ecd76d0dcfc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f03e12b1c430e9d736351c4ead02c014589f4cc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f03e12b1c430e9d736351c4ead02c014589f4cc3", "html_url": "https://github.com/rust-lang/rust/commit/f03e12b1c430e9d736351c4ead02c014589f4cc3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f03e12b1c430e9d736351c4ead02c014589f4cc3/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ebdefff88a5df05d196b178259effef14e465fe8", "url": "https://api.github.com/repos/rust-lang/rust/commits/ebdefff88a5df05d196b178259effef14e465fe8", "html_url": "https://github.com/rust-lang/rust/commit/ebdefff88a5df05d196b178259effef14e465fe8"}, {"sha": "625aae76de1045c29e905a9563d8917b6c43c206", "url": "https://api.github.com/repos/rust-lang/rust/commits/625aae76de1045c29e905a9563d8917b6c43c206", "html_url": "https://github.com/rust-lang/rust/commit/625aae76de1045c29e905a9563d8917b6c43c206"}], "stats": {"total": 380, "additions": 274, "deletions": 106}, "files": [{"sha": "36f3579e548b977f152ab8ec66deabb1a92647f1", "filename": "clippy_lints/src/approx_const.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fapprox_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fapprox_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fapprox_const.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -33,7 +33,7 @@ declare_lint! {\n }\n \n // Tuples are of the form (constant, name, min_digits)\n-const KNOWN_CONSTS: &'static [(f64, &'static str, usize)] = &[\n+const KNOWN_CONSTS: &[(f64, &str, usize)] = &[\n     (f64::E, \"E\", 4),\n     (f64::FRAC_1_PI, \"FRAC_1_PI\", 4),\n     (f64::FRAC_1_SQRT_2, \"FRAC_1_SQRT_2\", 5),"}, {"sha": "af99b77163b6248b16ed9202290b6dd53f5437e0", "filename": "clippy_lints/src/block_in_if_condition.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fblock_in_if_condition.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -71,8 +71,8 @@ impl<'a, 'tcx: 'a> Visitor<'tcx> for ExVisitor<'a, 'tcx> {\n     }\n }\n \n-const BRACED_EXPR_MESSAGE: &'static str = \"omit braces around single expression condition\";\n-const COMPLEX_BLOCK_MESSAGE: &'static str = \"in an 'if' condition, avoid complex blocks or closures with blocks; \\\n+const BRACED_EXPR_MESSAGE: &str = \"omit braces around single expression condition\";\n+const COMPLEX_BLOCK_MESSAGE: &str = \"in an 'if' condition, avoid complex blocks or closures with blocks; \\\n                                              instead, move the block or closure higher and bind it with a 'let'\";\n \n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for BlockInIfCondition {"}, {"sha": "4801f788856b8ed87fe15f6debfdb3acb3e52632", "filename": "clippy_lints/src/const_static_lifetime.rs", "status": "added", "additions": 84, "deletions": 0, "changes": 84, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fconst_static_lifetime.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -0,0 +1,84 @@\n+use syntax::ast::{Item, ItemKind, TyKind, Ty};\n+use rustc::lint::{LintPass, EarlyLintPass, LintArray, EarlyContext};\n+use utils::{span_lint_and_then, in_macro};\n+\n+/// **What it does:** Checks for constants with an explicit `'static` lifetime.\n+///\n+/// **Why is this bad?** Adding `'static` to every reference can create very\n+/// complicated types.\n+///\n+/// **Known problems:** None.\n+///\n+/// **Example:**\n+/// ```rust\n+/// const FOO: &'static [(&'static str, &'static str, fn(&Bar) -> bool)] =\n+/// &[...]\n+/// ```\n+/// This code can be rewritten as\n+/// ```rust\n+///  const FOO: &[(&str, &str, fn(&Bar) -> bool)] = &[...]\n+/// ```\n+\n+declare_lint! {\n+    pub CONST_STATIC_LIFETIME, \n+    Warn,\n+    \"Using explicit `'static` lifetime for constants when elision rules would allow omitting them.\"\n+}\n+\n+pub struct StaticConst;\n+\n+impl LintPass for StaticConst {\n+    fn get_lints(&self) -> LintArray {\n+        lint_array!(CONST_STATIC_LIFETIME)\n+    }\n+}\n+\n+impl StaticConst {\n+    // Recursively visit types\n+    fn visit_type(&mut self, ty: &Ty, cx: &EarlyContext) {\n+        match ty.node {\n+            // Be carefull of nested structures (arrays and tuples)\n+            TyKind::Array(ref ty, _) => {\n+                self.visit_type(&*ty, cx);\n+            },\n+            TyKind::Tup(ref tup) => {\n+                for tup_ty in tup {\n+                    self.visit_type(&*tup_ty, cx);\n+                }\n+            },\n+            // This is what we are looking for !\n+            TyKind::Rptr(ref optional_lifetime, ref borrow_type) => {\n+                // Match the 'static lifetime\n+                if let Some(lifetime) = *optional_lifetime {\n+                    if let TyKind::Path(_, _) = borrow_type.ty.node {\n+                        // Verify that the path is a str\n+                        if lifetime.ident.name == \"'static\" {\n+                            let mut sug: String = String::new();\n+                            span_lint_and_then(cx,\n+                                               CONST_STATIC_LIFETIME,\n+                                               lifetime.span,\n+                                               \"Constants have by default a `'static` lifetime\",\n+                                               |db| {db.span_suggestion(lifetime.span,\"consider removing `'static`\",sug);});\n+                        }\n+                    }\n+                }\n+                self.visit_type(&*borrow_type.ty, cx);\n+            },\n+            TyKind::Slice(ref ty) => {\n+                self.visit_type(ty, cx);\n+            },\n+            _ => {},\n+        }\n+    }\n+}\n+\n+impl EarlyLintPass for StaticConst {\n+    fn check_item(&mut self, cx: &EarlyContext, item: &Item) {\n+        if !in_macro(item.span) {\n+            // Match only constants...\n+            if let ItemKind::Const(ref var_type, _) = item.node {\n+                self.visit_type(var_type, cx);\n+            }\n+        }\n+    }\n+}"}, {"sha": "abe9897ba4d4281e76cfa87762afbb0892119e87", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -88,7 +88,7 @@ impl<'a> Iterator for Parser<'a> {\n #[allow(cast_possible_truncation)]\n pub fn strip_doc_comment_decoration(comment: &str, span: Span) -> (String, Vec<(usize, Span)>) {\n     // one-line comments lose their prefix\n-    const ONELINERS: &'static [&'static str] = &[\"///!\", \"///\", \"//!\", \"//\"];\n+    const ONELINERS: &[&str] = &[\"///!\", \"///\", \"//!\", \"//\"];\n     for prefix in ONELINERS {\n         if comment.starts_with(*prefix) {\n             let doc = &comment[prefix.len()..];"}, {"sha": "9b78e435645c93f6f32854deded2caedbb352645", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -76,6 +76,7 @@ pub mod block_in_if_condition;\n pub mod booleans;\n pub mod bytecount;\n pub mod collapsible_if;\n+pub mod const_static_lifetime;\n pub mod copies;\n pub mod cyclomatic_complexity;\n pub mod derive;\n@@ -339,6 +340,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n     reg.register_late_lint_pass(box invalid_ref::InvalidRef);\n     reg.register_late_lint_pass(box identity_conversion::IdentityConversion::default());\n     reg.register_late_lint_pass(box types::ImplicitHasher);\n+    reg.register_early_lint_pass(box const_static_lifetime::StaticConst);\n \n     reg.register_lint_group(\"clippy_restrictions\", vec![\n         arithmetic::FLOAT_ARITHMETIC,\n@@ -349,6 +351,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n \n     reg.register_lint_group(\"clippy_pedantic\", vec![\n         booleans::NONMINIMAL_BOOL,\n+        const_static_lifetime::CONST_STATIC_LIFETIME,\n         empty_enum::EMPTY_ENUM,\n         enum_glob_use::ENUM_GLOB_USE,\n         enum_variants::PUB_ENUM_VARIANT_NAMES,"}, {"sha": "849f0024415b0c4070d92bbe13186ce2742ba1cc", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -1531,7 +1531,7 @@ enum Convention {\n }\n \n #[cfg_attr(rustfmt, rustfmt_skip)]\n-const CONVENTIONS: [(Convention, &'static [SelfKind]); 6] = [\n+const CONVENTIONS: [(Convention, &[SelfKind]); 6] = [\n     (Convention::Eq(\"new\"), &[SelfKind::No]),\n     (Convention::StartsWith(\"as_\"), &[SelfKind::Ref, SelfKind::RefMut]),\n     (Convention::StartsWith(\"from_\"), &[SelfKind::No]),\n@@ -1541,7 +1541,7 @@ const CONVENTIONS: [(Convention, &'static [SelfKind]); 6] = [\n ];\n \n #[cfg_attr(rustfmt, rustfmt_skip)]\n-const TRAIT_METHODS: [(&'static str, usize, SelfKind, OutType, &'static str); 30] = [\n+const TRAIT_METHODS: [(&str, usize, SelfKind, OutType, &str); 30] = [\n     (\"add\", 2, SelfKind::Value, OutType::Any, \"std::ops::Add\"),\n     (\"as_mut\", 1, SelfKind::RefMut, OutType::Ref, \"std::convert::AsMut\"),\n     (\"as_ref\", 1, SelfKind::Ref, OutType::Ref, \"std::convert::AsRef\"),\n@@ -1575,7 +1575,7 @@ const TRAIT_METHODS: [(&'static str, usize, SelfKind, OutType, &'static str); 30\n ];\n \n #[cfg_attr(rustfmt, rustfmt_skip)]\n-const PATTERN_METHODS: [(&'static str, usize); 17] = [\n+const PATTERN_METHODS: [(&str, usize); 17] = [\n     (\"contains\", 1),\n     (\"starts_with\", 1),\n     (\"ends_with\", 1),"}, {"sha": "00d7a945595fafdbde77f88ffbfaddb48b3712ed", "filename": "clippy_lints/src/needless_continue.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fneedless_continue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fneedless_continue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_continue.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -252,15 +252,15 @@ struct LintData<'a> {\n     block_stmts: &'a [ast::Stmt],\n }\n \n-const MSG_REDUNDANT_ELSE_BLOCK: &'static str = \"This else block is redundant.\\n\";\n+const MSG_REDUNDANT_ELSE_BLOCK: &str = \"This else block is redundant.\\n\";\n \n-const MSG_ELSE_BLOCK_NOT_NEEDED: &'static str = \"There is no need for an explicit `else` block for this `if` \\\n+const MSG_ELSE_BLOCK_NOT_NEEDED: &str = \"There is no need for an explicit `else` block for this `if` \\\n                                                  expression\\n\";\n \n-const DROP_ELSE_BLOCK_AND_MERGE_MSG: &'static str = \"Consider dropping the else clause and merging the code that \\\n+const DROP_ELSE_BLOCK_AND_MERGE_MSG: &str = \"Consider dropping the else clause and merging the code that \\\n                                                      follows (in the loop) with the if block, like so:\\n\";\n \n-const DROP_ELSE_BLOCK_MSG: &'static str = \"Consider dropping the else clause, and moving out the code in the else \\\n+const DROP_ELSE_BLOCK_MSG: &str = \"Consider dropping the else clause, and moving out the code in the else \\\n                                            block, like so:\\n\";\n \n "}, {"sha": "478b4c3e0eb6d62c74201a693571abeb4a55bd92", "filename": "clippy_lints/src/non_expressive_names.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fnon_expressive_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Fnon_expressive_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnon_expressive_names.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -69,7 +69,7 @@ struct SimilarNamesLocalVisitor<'a, 'tcx: 'a> {\n // this list contains lists of names that are allowed to be similar\n // the assumption is that no name is ever contained in multiple lists.\n #[cfg_attr(rustfmt, rustfmt_skip)]\n-const WHITELIST: &'static [&'static [&'static str]] = &[\n+const WHITELIST: &[&[&str]] = &[\n     &[\"parsed\", \"parser\"],\n     &[\"lhs\", \"rhs\"],\n     &[\"tx\", \"rx\"],"}, {"sha": "83413ae8b48fc3d7003f2696ce758e48c3cff384", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -182,7 +182,7 @@ define_Conf! {\n /// Search for the configuration file.\n pub fn lookup_conf_file() -> io::Result<Option<path::PathBuf>> {\n     /// Possible filename to search for.\n-    const CONFIG_FILE_NAMES: [&'static str; 2] = [\".clippy.toml\", \"clippy.toml\"];\n+    const CONFIG_FILE_NAMES: [&str; 2] = [\".clippy.toml\", \"clippy.toml\"];\n \n     let mut current = try!(env::current_dir());\n "}, {"sha": "f59716268a064cd57704c242f37380b5cff1a605", "filename": "clippy_lints/src/utils/constants.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fconstants.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fconstants.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconstants.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -7,7 +7,7 @@\n /// See also [the reference][reference-types] for a list of such types.\n ///\n /// [reference-types]: https://doc.rust-lang.org/reference.html#types\n-pub const BUILTIN_TYPES: &'static [&'static str] = &[\n+pub const BUILTIN_TYPES: &[&str] = &[\n     \"i8\",\n     \"u8\",\n     \"i16\","}, {"sha": "cf3bf41a925f8433da4098271128277950fb6038", "filename": "clippy_lints/src/utils/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fmod.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -169,7 +169,7 @@ pub fn match_def_path(tcx: TyCtxt, def_id: DefId, path: &[&str]) -> bool {\n \n     impl ty::item_path::ItemPathBuffer for AbsolutePathBuffer {\n         fn root_mode(&self) -> &ty::item_path::RootMode {\n-            const ABSOLUTE: &'static ty::item_path::RootMode = &ty::item_path::RootMode::Absolute;\n+            const ABSOLUTE: &ty::item_path::RootMode = &ty::item_path::RootMode::Absolute;\n             ABSOLUTE\n         }\n "}, {"sha": "c198ad64b0fa35de09ccc318722a869af4bbbaca", "filename": "clippy_lints/src/utils/paths.rs", "status": "modified", "additions": 89, "deletions": 89, "changes": 178, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fpaths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/clippy_lints%2Fsrc%2Futils%2Fpaths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fpaths.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -1,93 +1,93 @@\n //! This module contains paths to types and functions Clippy needs to know\n //! about.\n \n-pub const ANY_TRAIT: [&'static str; 3] = [\"std\", \"any\", \"Any\"];\n-pub const ARC: [&'static str; 3] = [\"alloc\", \"arc\", \"Arc\"];\n-pub const ASMUT_TRAIT: [&'static str; 3] = [\"core\", \"convert\", \"AsMut\"];\n-pub const ASREF_TRAIT: [&'static str; 3] = [\"core\", \"convert\", \"AsRef\"];\n-pub const BEGIN_PANIC: [&'static str; 3] = [\"std\", \"panicking\", \"begin_panic\"];\n-pub const BINARY_HEAP: [&'static str; 3] = [\"alloc\", \"binary_heap\", \"BinaryHeap\"];\n-pub const BORROW_TRAIT: [&'static str; 3] = [\"core\", \"borrow\", \"Borrow\"];\n-pub const BOX: [&'static str; 3] = [\"std\", \"boxed\", \"Box\"];\n-pub const BOX_NEW: [&'static str; 4] = [\"std\", \"boxed\", \"Box\", \"new\"];\n-pub const BTREEMAP: [&'static str; 4] = [\"alloc\", \"btree\", \"map\", \"BTreeMap\"];\n-pub const BTREEMAP_ENTRY: [&'static str; 4] = [\"alloc\", \"btree\", \"map\", \"Entry\"];\n-pub const BTREESET: [&'static str; 4] = [\"alloc\", \"btree\", \"set\", \"BTreeSet\"];\n-pub const CLONE: [&'static str; 4] = [\"core\", \"clone\", \"Clone\", \"clone\"];\n-pub const CLONE_TRAIT: [&'static str; 3] = [\"core\", \"clone\", \"Clone\"];\n-pub const CMP_MAX: [&'static str; 3] = [\"core\", \"cmp\", \"max\"];\n-pub const CMP_MIN: [&'static str; 3] = [\"core\", \"cmp\", \"min\"];\n-pub const COW: [&'static str; 3] = [\"alloc\", \"borrow\", \"Cow\"];\n-pub const CSTRING_NEW: [&'static str; 5] = [\"std\", \"ffi\", \"c_str\", \"CString\", \"new\"];\n-pub const DEBUG_FMT_METHOD: [&'static str; 4] = [\"core\", \"fmt\", \"Debug\", \"fmt\"];\n-pub const DEFAULT_TRAIT: [&'static str; 3] = [\"core\", \"default\", \"Default\"];\n-pub const DISPLAY_FMT_METHOD: [&'static str; 4] = [\"core\", \"fmt\", \"Display\", \"fmt\"];\n-pub const DOUBLE_ENDED_ITERATOR: [&'static str; 4] = [\"core\", \"iter\", \"traits\", \"DoubleEndedIterator\"];\n-pub const DROP: [&'static str; 3] = [\"core\", \"mem\", \"drop\"];\n-pub const FMT_ARGUMENTS_NEWV1: [&'static str; 4] = [\"core\", \"fmt\", \"Arguments\", \"new_v1\"];\n-pub const FMT_ARGUMENTV1_NEW: [&'static str; 4] = [\"core\", \"fmt\", \"ArgumentV1\", \"new\"];\n-pub const FROM_FROM: [&'static str; 4] = [\"core\", \"convert\", \"From\", \"from\"];\n-pub const HASH: [&'static str; 2] = [\"hash\", \"Hash\"];\n-pub const HASHMAP: [&'static str; 5] = [\"std\", \"collections\", \"hash\", \"map\", \"HashMap\"];\n-pub const HASHMAP_ENTRY: [&'static str; 5] = [\"std\", \"collections\", \"hash\", \"map\", \"Entry\"];\n-pub const HASHSET: [&'static str; 5] = [\"std\", \"collections\", \"hash\", \"set\", \"HashSet\"];\n-pub const INIT: [&'static str; 4] = [\"core\", \"intrinsics\", \"\", \"init\"];\n-pub const INTO: [&'static str; 3] = [\"core\", \"convert\", \"Into\"];\n-pub const INTO_ITERATOR: [&'static str; 4] = [\"core\", \"iter\", \"traits\", \"IntoIterator\"];\n-pub const IO_PRINT: [&'static str; 4] = [\"std\", \"io\", \"stdio\", \"_print\"];\n-pub const IO_READ: [&'static str; 3] = [\"std\", \"io\", \"Read\"];\n-pub const IO_WRITE: [&'static str; 3] = [\"std\", \"io\", \"Write\"];\n-pub const ITERATOR: [&'static str; 4] = [\"core\", \"iter\", \"iterator\", \"Iterator\"];\n-pub const LINKED_LIST: [&'static str; 3] = [\"alloc\", \"linked_list\", \"LinkedList\"];\n-pub const LINT: [&'static str; 3] = [\"rustc\", \"lint\", \"Lint\"];\n-pub const LINT_ARRAY: [&'static str; 3] = [\"rustc\", \"lint\", \"LintArray\"];\n-pub const MEM_FORGET: [&'static str; 3] = [\"core\", \"mem\", \"forget\"];\n-pub const MEM_UNINIT: [&'static str; 3] = [\"core\", \"mem\", \"uninitialized\"];\n-pub const MEM_ZEROED: [&'static str; 3] = [\"core\", \"mem\", \"zeroed\"];\n-pub const MUTEX: [&'static str; 4] = [\"std\", \"sync\", \"mutex\", \"Mutex\"];\n-pub const OPEN_OPTIONS: [&'static str; 3] = [\"std\", \"fs\", \"OpenOptions\"];\n-pub const OPS_MODULE: [&'static str; 2] = [\"core\", \"ops\"];\n-pub const OPTION: [&'static str; 3] = [\"core\", \"option\", \"Option\"];\n-pub const OPTION_NONE: [&'static str; 4] = [\"core\", \"option\", \"Option\", \"None\"];\n-pub const OPTION_SOME: [&'static str; 4] = [\"core\", \"option\", \"Option\", \"Some\"];\n-pub const PTR_NULL: [&'static str; 2] = [\"ptr\", \"null\"];\n-pub const PTR_NULL_MUT: [&'static str; 2] = [\"ptr\", \"null_mut\"];\n-pub const RANGE: [&'static str; 3] = [\"core\", \"ops\", \"Range\"];\n-pub const RANGE_FROM: [&'static str; 3] = [\"core\", \"ops\", \"RangeFrom\"];\n-pub const RANGE_FROM_STD: [&'static str; 3] = [\"std\", \"ops\", \"RangeFrom\"];\n-pub const RANGE_FULL: [&'static str; 3] = [\"core\", \"ops\", \"RangeFull\"];\n-pub const RANGE_FULL_STD: [&'static str; 3] = [\"std\", \"ops\", \"RangeFull\"];\n-pub const RANGE_INCLUSIVE: [&'static str; 3] = [\"core\", \"ops\", \"RangeInclusive\"];\n-pub const RANGE_INCLUSIVE_STD: [&'static str; 3] = [\"std\", \"ops\", \"RangeInclusive\"];\n-pub const RANGE_STD: [&'static str; 3] = [\"std\", \"ops\", \"Range\"];\n-pub const RANGE_TO: [&'static str; 3] = [\"core\", \"ops\", \"RangeTo\"];\n-pub const RANGE_TO_INCLUSIVE: [&'static str; 3] = [\"core\", \"ops\", \"RangeToInclusive\"];\n-pub const RANGE_TO_INCLUSIVE_STD: [&'static str; 3] = [\"std\", \"ops\", \"RangeToInclusive\"];\n-pub const RANGE_TO_STD: [&'static str; 3] = [\"std\", \"ops\", \"RangeTo\"];\n-pub const RC: [&'static str; 3] = [\"alloc\", \"rc\", \"Rc\"];\n-pub const REGEX: [&'static str; 3] = [\"regex\", \"re_unicode\", \"Regex\"];\n-pub const REGEX_BUILDER_NEW: [&'static str; 5] = [\"regex\", \"re_builder\", \"unicode\", \"RegexBuilder\", \"new\"];\n-pub const REGEX_BYTES: [&'static str; 3] = [\"regex\", \"re_bytes\", \"Regex\"];\n-pub const REGEX_BYTES_BUILDER_NEW: [&'static str; 5] = [\"regex\", \"re_builder\", \"bytes\", \"RegexBuilder\", \"new\"];\n-pub const REGEX_BYTES_NEW: [&'static str; 4] = [\"regex\", \"re_bytes\", \"Regex\", \"new\"];\n-pub const REGEX_BYTES_SET_NEW: [&'static str; 5] = [\"regex\", \"re_set\", \"bytes\", \"RegexSet\", \"new\"];\n-pub const REGEX_NEW: [&'static str; 4] = [\"regex\", \"re_unicode\", \"Regex\", \"new\"];\n-pub const REGEX_SET_NEW: [&'static str; 5] = [\"regex\", \"re_set\", \"unicode\", \"RegexSet\", \"new\"];\n-pub const REPEAT: [&'static str; 3] = [\"core\", \"iter\", \"repeat\"];\n-pub const RESULT: [&'static str; 3] = [\"core\", \"result\", \"Result\"];\n-pub const RESULT_ERR: [&'static str; 4] = [\"core\", \"result\", \"Result\", \"Err\"];\n-pub const RESULT_OK: [&'static str; 4] = [\"core\", \"result\", \"Result\", \"Ok\"];\n-pub const SERDE_DE_VISITOR: [&'static str; 3] = [\"serde\", \"de\", \"Visitor\"];\n-pub const SLICE_INTO_VEC: [&'static str; 4] = [\"alloc\", \"slice\", \"<impl [T]>\", \"into_vec\"];\n+pub const ANY_TRAIT: [&str; 3] = [\"std\", \"any\", \"Any\"];\n+pub const ARC: [&str; 3] = [\"alloc\", \"arc\", \"Arc\"];\n+pub const ASMUT_TRAIT: [&str; 3] = [\"core\", \"convert\", \"AsMut\"];\n+pub const ASREF_TRAIT: [&str; 3] = [\"core\", \"convert\", \"AsRef\"];\n+pub const BEGIN_PANIC: [&str; 3] = [\"std\", \"panicking\", \"begin_panic\"];\n+pub const BINARY_HEAP: [&str; 3] = [\"alloc\", \"binary_heap\", \"BinaryHeap\"];\n+pub const BORROW_TRAIT: [&str; 3] = [\"core\", \"borrow\", \"Borrow\"];\n+pub const BOX: [&str; 3] = [\"std\", \"boxed\", \"Box\"];\n+pub const BOX_NEW: [&str; 4] = [\"std\", \"boxed\", \"Box\", \"new\"];\n+pub const BTREEMAP: [&str; 4] = [\"alloc\", \"btree\", \"map\", \"BTreeMap\"];\n+pub const BTREEMAP_ENTRY: [&str; 4] = [\"alloc\", \"btree\", \"map\", \"Entry\"];\n+pub const BTREESET: [&str; 4] = [\"alloc\", \"btree\", \"set\", \"BTreeSet\"];\n+pub const CLONE: [&str; 4] = [\"core\", \"clone\", \"Clone\", \"clone\"];\n+pub const CLONE_TRAIT: [&str; 3] = [\"core\", \"clone\", \"Clone\"];\n+pub const CMP_MAX: [&str; 3] = [\"core\", \"cmp\", \"max\"];\n+pub const CMP_MIN: [&str; 3] = [\"core\", \"cmp\", \"min\"];\n+pub const COW: [&str; 3] = [\"alloc\", \"borrow\", \"Cow\"];\n+pub const CSTRING_NEW: [&str; 5] = [\"std\", \"ffi\", \"c_str\", \"CString\", \"new\"];\n+pub const DEBUG_FMT_METHOD: [&str; 4] = [\"core\", \"fmt\", \"Debug\", \"fmt\"];\n+pub const DEFAULT_TRAIT: [&str; 3] = [\"core\", \"default\", \"Default\"];\n+pub const DISPLAY_FMT_METHOD: [&str; 4] = [\"core\", \"fmt\", \"Display\", \"fmt\"];\n+pub const DOUBLE_ENDED_ITERATOR: [&str; 4] = [\"core\", \"iter\", \"traits\", \"DoubleEndedIterator\"];\n+pub const DROP: [&str; 3] = [\"core\", \"mem\", \"drop\"];\n+pub const FMT_ARGUMENTS_NEWV1: [&str; 4] = [\"core\", \"fmt\", \"Arguments\", \"new_v1\"];\n+pub const FMT_ARGUMENTV1_NEW: [&str; 4] = [\"core\", \"fmt\", \"ArgumentV1\", \"new\"];\n+pub const FROM_FROM: [&str; 4] = [\"core\", \"convert\", \"From\", \"from\"];\n+pub const HASH: [&str; 2] = [\"hash\", \"Hash\"];\n+pub const HASHMAP: [&str; 5] = [\"std\", \"collections\", \"hash\", \"map\", \"HashMap\"];\n+pub const HASHMAP_ENTRY: [&str; 5] = [\"std\", \"collections\", \"hash\", \"map\", \"Entry\"];\n+pub const HASHSET: [&str; 5] = [\"std\", \"collections\", \"hash\", \"set\", \"HashSet\"];\n+pub const INIT: [&str; 4] = [\"core\", \"intrinsics\", \"\", \"init\"];\n+pub const INTO: [&str; 3] = [\"core\", \"convert\", \"Into\"];\n+pub const INTO_ITERATOR: [&str; 4] = [\"core\", \"iter\", \"traits\", \"IntoIterator\"];\n+pub const IO_PRINT: [&str; 4] = [\"std\", \"io\", \"stdio\", \"_print\"];\n+pub const IO_READ: [&str; 3] = [\"std\", \"io\", \"Read\"];\n+pub const IO_WRITE: [&str; 3] = [\"std\", \"io\", \"Write\"];\n+pub const ITERATOR: [&str; 4] = [\"core\", \"iter\", \"iterator\", \"Iterator\"];\n+pub const LINKED_LIST: [&str; 3] = [\"alloc\", \"linked_list\", \"LinkedList\"];\n+pub const LINT: [&str; 3] = [\"rustc\", \"lint\", \"Lint\"];\n+pub const LINT_ARRAY: [&str; 3] = [\"rustc\", \"lint\", \"LintArray\"];\n+pub const MEM_FORGET: [&str; 3] = [\"core\", \"mem\", \"forget\"];\n+pub const MEM_UNINIT: [&str; 3] = [\"core\", \"mem\", \"uninitialized\"];\n+pub const MEM_ZEROED: [&str; 3] = [\"core\", \"mem\", \"zeroed\"];\n+pub const MUTEX: [&str; 4] = [\"std\", \"sync\", \"mutex\", \"Mutex\"];\n+pub const OPEN_OPTIONS: [&str; 3] = [\"std\", \"fs\", \"OpenOptions\"];\n+pub const OPS_MODULE: [&str; 2] = [\"core\", \"ops\"];\n+pub const OPTION: [&str; 3] = [\"core\", \"option\", \"Option\"];\n+pub const OPTION_NONE: [&str; 4] = [\"core\", \"option\", \"Option\", \"None\"];\n+pub const OPTION_SOME: [&str; 4] = [\"core\", \"option\", \"Option\", \"Some\"];\n+pub const PTR_NULL: [&str; 2] = [\"ptr\", \"null\"];\n+pub const PTR_NULL_MUT: [&str; 2] = [\"ptr\", \"null_mut\"];\n+pub const RANGE: [&str; 3] = [\"core\", \"ops\", \"Range\"];\n+pub const RANGE_FROM: [&str; 3] = [\"core\", \"ops\", \"RangeFrom\"];\n+pub const RANGE_FROM_STD: [&str; 3] = [\"std\", \"ops\", \"RangeFrom\"];\n+pub const RANGE_FULL: [&str; 3] = [\"core\", \"ops\", \"RangeFull\"];\n+pub const RANGE_FULL_STD: [&str; 3] = [\"std\", \"ops\", \"RangeFull\"];\n+pub const RANGE_INCLUSIVE: [&str; 3] = [\"core\", \"ops\", \"RangeInclusive\"];\n+pub const RANGE_INCLUSIVE_STD: [&str; 3] = [\"std\", \"ops\", \"RangeInclusive\"];\n+pub const RANGE_STD: [&str; 3] = [\"std\", \"ops\", \"Range\"];\n+pub const RANGE_TO: [&str; 3] = [\"core\", \"ops\", \"RangeTo\"];\n+pub const RANGE_TO_INCLUSIVE: [&str; 3] = [\"core\", \"ops\", \"RangeToInclusive\"];\n+pub const RANGE_TO_INCLUSIVE_STD: [&str; 3] = [\"std\", \"ops\", \"RangeToInclusive\"];\n+pub const RANGE_TO_STD: [&str; 3] = [\"std\", \"ops\", \"RangeTo\"];\n+pub const RC: [&str; 3] = [\"alloc\", \"rc\", \"Rc\"];\n+pub const REGEX: [&str; 3] = [\"regex\", \"re_unicode\", \"Regex\"];\n+pub const REGEX_BUILDER_NEW: [&str; 5] = [\"regex\", \"re_builder\", \"unicode\", \"RegexBuilder\", \"new\"];\n+pub const REGEX_BYTES: [&str; 3] = [\"regex\", \"re_bytes\", \"Regex\"];\n+pub const REGEX_BYTES_BUILDER_NEW: [&str; 5] = [\"regex\", \"re_builder\", \"bytes\", \"RegexBuilder\", \"new\"];\n+pub const REGEX_BYTES_NEW: [&str; 4] = [\"regex\", \"re_bytes\", \"Regex\", \"new\"];\n+pub const REGEX_BYTES_SET_NEW: [&str; 5] = [\"regex\", \"re_set\", \"bytes\", \"RegexSet\", \"new\"];\n+pub const REGEX_NEW: [&str; 4] = [\"regex\", \"re_unicode\", \"Regex\", \"new\"];\n+pub const REGEX_SET_NEW: [&str; 5] = [\"regex\", \"re_set\", \"unicode\", \"RegexSet\", \"new\"];\n+pub const REPEAT: [&str; 3] = [\"core\", \"iter\", \"repeat\"];\n+pub const RESULT: [&str; 3] = [\"core\", \"result\", \"Result\"];\n+pub const RESULT_ERR: [&str; 4] = [\"core\", \"result\", \"Result\", \"Err\"];\n+pub const RESULT_OK: [&str; 4] = [\"core\", \"result\", \"Result\", \"Ok\"];\n+pub const SERDE_DE_VISITOR: [&str; 3] = [\"serde\", \"de\", \"Visitor\"];\n+pub const SLICE_INTO_VEC: [&str; 4] = [\"alloc\", \"slice\", \"<impl [T]>\", \"into_vec\"];\n pub const SLICE_ITER: [&str; 3] = [\"core\", \"slice\", \"Iter\"];\n-pub const STRING: [&'static str; 3] = [\"alloc\", \"string\", \"String\"];\n-pub const TO_OWNED: [&'static str; 3] = [\"alloc\", \"borrow\", \"ToOwned\"];\n-pub const TO_STRING: [&'static str; 3] = [\"alloc\", \"string\", \"ToString\"];\n-pub const TRANSMUTE: [&'static str; 4] = [\"core\", \"intrinsics\", \"\", \"transmute\"];\n-pub const TRY_INTO_RESULT: [&'static str; 4] = [\"std\", \"ops\", \"Try\", \"into_result\"];\n-pub const UNINIT: [&'static str; 4] = [\"core\", \"intrinsics\", \"\", \"uninit\"];\n-pub const VEC: [&'static str; 3] = [\"alloc\", \"vec\", \"Vec\"];\n-pub const VEC_DEQUE: [&'static str; 3] = [\"alloc\", \"vec_deque\", \"VecDeque\"];\n-pub const VEC_FROM_ELEM: [&'static str; 3] = [\"alloc\", \"vec\", \"from_elem\"];\n-pub const WEAK_ARC: [&'static str; 3] = [\"alloc\", \"arc\", \"Weak\"];\n-pub const WEAK_RC: [&'static str; 3] = [\"alloc\", \"rc\", \"Weak\"];\n+pub const STRING: [&str; 3] = [\"alloc\", \"string\", \"String\"];\n+pub const TO_OWNED: [&str; 3] = [\"alloc\", \"borrow\", \"ToOwned\"];\n+pub const TO_STRING: [&str; 3] = [\"alloc\", \"string\", \"ToString\"];\n+pub const TRANSMUTE: [&str; 4] = [\"core\", \"intrinsics\", \"\", \"transmute\"];\n+pub const TRY_INTO_RESULT: [&str; 4] = [\"std\", \"ops\", \"Try\", \"into_result\"];\n+pub const UNINIT: [&str; 4] = [\"core\", \"intrinsics\", \"\", \"uninit\"];\n+pub const VEC: [&str; 3] = [\"alloc\", \"vec\", \"Vec\"];\n+pub const VEC_DEQUE: [&str; 3] = [\"alloc\", \"vec_deque\", \"VecDeque\"];\n+pub const VEC_FROM_ELEM: [&str; 3] = [\"alloc\", \"vec\", \"from_elem\"];\n+pub const WEAK_ARC: [&str; 3] = [\"alloc\", \"arc\", \"Weak\"];\n+pub const WEAK_RC: [&str; 3] = [\"alloc\", \"rc\", \"Weak\"];"}, {"sha": "d2caf59935e8b380ba69e1942a21e979fdf0b548", "filename": "tests/ui/const_static_lifetime.rs", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fconst_static_lifetime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fconst_static_lifetime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst_static_lifetime.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -0,0 +1,31 @@\n+#[derive(Debug)]\n+struct Foo {}\n+\n+const VAR_ONE: &'static str = \"Test constant #1\"; // ERROR Consider removing 'static.\n+\n+const VAR_TWO: &str = \"Test constant #2\"; // This line should not raise a warning.\n+\n+const VAR_THREE: &[&'static str] = &[\"one\", \"two\"]; // ERROR Consider removing 'static\n+\n+const VAR_FOUR: (&str, (&str, &'static str), &'static str) = (\"on\", (\"th\", \"th\"), \"on\"); // ERROR Consider removing 'static\n+\n+const VAR_FIVE: &'static [&[&'static str]] = &[&[\"test\"], &[\"other one\"]]; // ERROR Consider removing 'static\n+\n+const VAR_SIX: &'static u8 = &5;\n+\n+const VAR_SEVEN: &[&(&str, &'static [&'static str])] = &[&(\"one\", &[\"other one\"])];\n+\n+const VAR_HEIGHT: &'static Foo = &Foo {};\n+\n+fn main() {\n+    let false_positive: &'static str = \"test\";\n+    println!(\"{}\", VAR_ONE);\n+    println!(\"{}\", VAR_TWO);\n+    println!(\"{:?}\", VAR_THREE);\n+    println!(\"{:?}\", VAR_FOUR);\n+    println!(\"{:?}\", VAR_FIVE);\n+    println!(\"{:?}\", VAR_SIX);\n+    println!(\"{:?}\", VAR_SEVEN);\n+    println!(\"{:?}\", VAR_HEIGHT);\n+    println!(\"{}\", false_positive);\n+}"}, {"sha": "1eeb27c2448a0b2c3278286122809098f13f6f75", "filename": "tests/ui/const_static_lifetime.stderr", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fconst_static_lifetime.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fconst_static_lifetime.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconst_static_lifetime.stderr?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -0,0 +1,50 @@\n+error: Constants have by default a `'static` lifetime\n+ --> $DIR/const_static_lifetime.rs:4:17\n+  |\n+4 | const VAR_ONE: &'static str = \"Test constant #1\"; // ERROR Consider removing 'static.\n+  |                 ^^^^^^^ help: consider removing `'static`\n+  |\n+  = note: `-D const-static-lifetime` implied by `-D warnings`\n+\n+error: Constants have by default a `'static` lifetime\n+ --> $DIR/const_static_lifetime.rs:8:21\n+  |\n+8 | const VAR_THREE: &[&'static str] = &[\"one\", \"two\"]; // ERROR Consider removing 'static\n+  |                     ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:10:32\n+   |\n+10 | const VAR_FOUR: (&str, (&str, &'static str), &'static str) = (\"on\", (\"th\", \"th\"), \"on\"); // ERROR Consider removing 'static\n+   |                                ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:10:47\n+   |\n+10 | const VAR_FOUR: (&str, (&str, &'static str), &'static str) = (\"on\", (\"th\", \"th\"), \"on\"); // ERROR Consider removing 'static\n+   |                                               ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:12:30\n+   |\n+12 | const VAR_FIVE: &'static [&[&'static str]] = &[&[\"test\"], &[\"other one\"]]; // ERROR Consider removing 'static\n+   |                              ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:14:17\n+   |\n+14 | const VAR_SIX: &'static u8 = &5;\n+   |                 ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:16:39\n+   |\n+16 | const VAR_SEVEN: &[&(&str, &'static [&'static str])] = &[&(\"one\", &[\"other one\"])];\n+   |                                       ^^^^^^^ help: consider removing `'static`\n+\n+error: Constants have by default a `'static` lifetime\n+  --> $DIR/const_static_lifetime.rs:18:20\n+   |\n+18 | const VAR_HEIGHT: &'static Foo = &Foo {};\n+   |                    ^^^^^^^ help: consider removing `'static`\n+"}, {"sha": "2007f1fad552e7c60fb1345b5e1b424e7024e5c7", "filename": "tests/ui/regex.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fregex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f03e12b1c430e9d736351c4ead02c014589f4cc3/tests%2Fui%2Fregex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fregex.rs?ref=f03e12b1c430e9d736351c4ead02c014589f4cc3", "patch": "@@ -9,8 +9,8 @@ extern crate regex;\n use regex::{Regex, RegexSet, RegexBuilder};\n use regex::bytes::{Regex as BRegex, RegexSet as BRegexSet, RegexBuilder as BRegexBuilder};\n \n-const OPENING_PAREN : &'static str = \"(\";\n-const NOT_A_REAL_REGEX : &'static str = \"foobar\";\n+const OPENING_PAREN: &str = \"(\";\n+const NOT_A_REAL_REGEX: &str = \"foobar\";\n \n fn syntax_error() {\n     let pipe_in_wrong_position = Regex::new(\"|\");"}]}