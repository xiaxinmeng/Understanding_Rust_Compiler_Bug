{"sha": "441b950bac194aa67aef6f39fbdc787bdc663aa7", "node_id": "C_kwDOAAsO6NoAKDQ0MWI5NTBiYWMxOTRhYTY3YWVmNmYzOWZiZGM3ODdiZGM2NjNhYTc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-10-23T06:14:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-10-23T06:14:33Z"}, "message": "Rollup merge of #103401 - GuillaumeGomez:gui-test-headings-cleanup, r=notriddle\n\nUse functions for headings rustdoc GUI test\n\nr? ````@notriddle````", "tree": {"sha": "e3f48dac425d00dec5932c3222840ed3c603311d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3f48dac425d00dec5932c3222840ed3c603311d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/441b950bac194aa67aef6f39fbdc787bdc663aa7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjVNvJCRBK7hj4Ov3rIwAASjMIAIPzH77Xee6JYNvjymyqv7xU\nibre+b25sZVslG4/SCgl0yOUzwIFqp+EsLS+4dlmz+M5PyY6/jB8gudbqyEamGLq\nguCirCB3vxA4ldfU7bmYZ+u/H1yyq+42cBrAbE97GyTVBYL1iWej+n06fySIoV37\nA2hBJDN4W29yieS6H3qIEeUwSzL01ev90/0Kf7lnkmGjcVhXyx1H3LZYD4umnqOC\n9NbfpHUj/4vb6E75C/tuzgGpEciGf7+iw1b+fM1EZoSbkVHKipdelQ6hkip+C9b9\ngisJyst+kdWK3TBjhv2Wpxx0o3Fu11JnVNhgiMtLEibLdoLmf7TN3jpbNm+aSTE=\n=MSab\n-----END PGP SIGNATURE-----\n", "payload": "tree e3f48dac425d00dec5932c3222840ed3c603311d\nparent 6be917a748a507cbbdf156a16ba410b332f0180c\nparent 94a9ee3692d43627aecc2b0889134d4b71e46257\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1666505673 +0200\ncommitter GitHub <noreply@github.com> 1666505673 +0200\n\nRollup merge of #103401 - GuillaumeGomez:gui-test-headings-cleanup, r=notriddle\n\nUse functions for headings rustdoc GUI test\n\nr? ````@notriddle````\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/441b950bac194aa67aef6f39fbdc787bdc663aa7", "html_url": "https://github.com/rust-lang/rust/commit/441b950bac194aa67aef6f39fbdc787bdc663aa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/441b950bac194aa67aef6f39fbdc787bdc663aa7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6be917a748a507cbbdf156a16ba410b332f0180c", "url": "https://api.github.com/repos/rust-lang/rust/commits/6be917a748a507cbbdf156a16ba410b332f0180c", "html_url": "https://github.com/rust-lang/rust/commit/6be917a748a507cbbdf156a16ba410b332f0180c"}, {"sha": "94a9ee3692d43627aecc2b0889134d4b71e46257", "url": "https://api.github.com/repos/rust-lang/rust/commits/94a9ee3692d43627aecc2b0889134d4b71e46257", "html_url": "https://github.com/rust-lang/rust/commit/94a9ee3692d43627aecc2b0889134d4b71e46257"}], "stats": {"total": 176, "additions": 76, "deletions": 100}, "files": [{"sha": "85e17ca9551a2af896074ffc1f5a13dd4b4162e5", "filename": "src/test/rustdoc-gui/headings.goml", "status": "modified", "additions": 76, "deletions": 100, "changes": 176, "blob_url": "https://github.com/rust-lang/rust/blob/441b950bac194aa67aef6f39fbdc787bdc663aa7/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/441b950bac194aa67aef6f39fbdc787bdc663aa7/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheadings.goml?ref=441b950bac194aa67aef6f39fbdc787bdc663aa7", "patch": "@@ -150,109 +150,85 @@ assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"font-size\": \"20px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"border-bottom-width\": \"1px\"})\n \n-// Checking colors now.\n+// Needed to check colors\n show-text: true\n-local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h3\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n \n-local-storage: {\"rustdoc-theme\": \"dark\"}\n-reload:\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h3\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n+define-function: (\n+    \"check-colors\",\n+    (theme, heading_color, small_heading_color, heading_border_color),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h2\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h3\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h4\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h5\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h4\",\n+            {\"color\": |heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h5\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h6\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+    ],\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"ayu\",\n+        \"heading_color\": \"rgb(255, 255, 255)\",\n+        \"small_heading_color\": \"rgb(197, 197, 197)\",\n+        \"heading_border_color\": \"rgb(92, 103, 115)\",\n+    },\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"dark\",\n+        \"heading_color\": \"rgb(221, 221, 221)\",\n+        \"small_heading_color\": \"rgb(221, 221, 221)\",\n+        \"heading_border_color\": \"rgb(210, 210, 210)\",\n+    },\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"light\",\n+        \"heading_color\": \"rgb(0, 0, 0)\",\n+        \"small_heading_color\": \"rgb(0, 0, 0)\",\n+        \"heading_border_color\": \"rgb(221, 221, 221)\",\n+    },\n+)\n+\n+define-function: (\n+    \"check-since-color\",\n+    (theme),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|}),\n+        (\"reload\"),\n+        (\"assert-css\", (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)),\n+    ],\n )\n \n-local-storage: {\"rustdoc-theme\": \"ayu\"}\n-reload:\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-\n-local-storage: {\"rustdoc-theme\": \"light\"}\n goto: \"file://\" + |DOC_PATH| + \"/staged_api/struct.Foo.html\"\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n-\n-local-storage: {\"rustdoc-theme\": \"dark\"}\n-reload:\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n-\n-local-storage: {\"rustdoc-theme\": \"ayu\"}\n-reload:\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n+call-function: (\"check-since-color\", (\"ayu\"))\n+call-function: (\"check-since-color\", (\"dark\"))\n+call-function: (\"check-since-color\", (\"light\"))"}]}