{"sha": "7f4048c710249daafacdb6004da312e0681954f5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmNDA0OGM3MTAyNDlkYWFmYWNkYjYwMDRkYTMxMmUwNjgxOTU0ZjU=", "commit": {"author": {"name": "Pyfisch", "email": "pyfisch@posteo.org", "date": "2020-04-11T10:56:25Z"}, "committer": {"name": "Pyfisch", "email": "pyfisch@posteo.org", "date": "2020-04-11T10:56:25Z"}, "message": "Store UNICODE_VERSION as a tuple\n\nRemove the UnicodeVersion struct containing\nmajor, minor and update fields and replace it with\na 3-tuple containing the version number.\nAs the value of each field is limited to 255\nuse u8 to store them.", "tree": {"sha": "0222e4a646f7870134145138eb69bd7f79540117", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0222e4a646f7870134145138eb69bd7f79540117"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f4048c710249daafacdb6004da312e0681954f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f4048c710249daafacdb6004da312e0681954f5", "html_url": "https://github.com/rust-lang/rust/commit/7f4048c710249daafacdb6004da312e0681954f5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f4048c710249daafacdb6004da312e0681954f5/comments", "author": {"login": "pyfisch", "id": 2781017, "node_id": "MDQ6VXNlcjI3ODEwMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2781017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyfisch", "html_url": "https://github.com/pyfisch", "followers_url": "https://api.github.com/users/pyfisch/followers", "following_url": "https://api.github.com/users/pyfisch/following{/other_user}", "gists_url": "https://api.github.com/users/pyfisch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyfisch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyfisch/subscriptions", "organizations_url": "https://api.github.com/users/pyfisch/orgs", "repos_url": "https://api.github.com/users/pyfisch/repos", "events_url": "https://api.github.com/users/pyfisch/events{/privacy}", "received_events_url": "https://api.github.com/users/pyfisch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pyfisch", "id": 2781017, "node_id": "MDQ6VXNlcjI3ODEwMTc=", "avatar_url": "https://avatars.githubusercontent.com/u/2781017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pyfisch", "html_url": "https://github.com/pyfisch", "followers_url": "https://api.github.com/users/pyfisch/followers", "following_url": "https://api.github.com/users/pyfisch/following{/other_user}", "gists_url": "https://api.github.com/users/pyfisch/gists{/gist_id}", "starred_url": "https://api.github.com/users/pyfisch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pyfisch/subscriptions", "organizations_url": "https://api.github.com/users/pyfisch/orgs", "repos_url": "https://api.github.com/users/pyfisch/repos", "events_url": "https://api.github.com/users/pyfisch/events{/privacy}", "received_events_url": "https://api.github.com/users/pyfisch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f3b65921effc08ea1171bdbbcad70765ecacb22", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f3b65921effc08ea1171bdbbcad70765ecacb22", "html_url": "https://github.com/rust-lang/rust/commit/1f3b65921effc08ea1171bdbbcad70765ecacb22"}], "stats": {"total": 41, "additions": 8, "deletions": 33}, "files": [{"sha": "715ad8992ad6bde268f719425615a1aa5b4de70a", "filename": "src/libcore/char/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Fchar%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Fchar%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fchar%2Fmod.rs?ref=7f4048c710249daafacdb6004da312e0681954f5", "patch": "@@ -37,8 +37,6 @@ pub use self::decode::{decode_utf16, DecodeUtf16, DecodeUtf16Error};\n \n // unstable re-exports\n #[unstable(feature = \"unicode_version\", issue = \"49726\")]\n-pub use crate::unicode::version::UnicodeVersion;\n-#[unstable(feature = \"unicode_version\", issue = \"49726\")]\n pub use crate::unicode::UNICODE_VERSION;\n \n use crate::fmt::{self, Write};"}, {"sha": "3952ae4482e9f83e06f2512248e15dff3530bc47", "filename": "src/libcore/unicode/mod.rs", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Funicode%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Funicode%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Funicode%2Fmod.rs?ref=7f4048c710249daafacdb6004da312e0681954f5", "patch": "@@ -3,19 +3,14 @@\n \n pub(crate) mod printable;\n mod unicode_data;\n-pub(crate) mod version;\n-\n-use version::UnicodeVersion;\n \n /// The version of [Unicode](http://www.unicode.org/) that the Unicode parts of\n /// `char` and `str` methods are based on.\n+///\n+/// The version numbering scheme is explained in\n+/// [Unicode 11.0 or later, Section 3.1 Versions of the Unicode Standard](https://www.unicode.org/versions/Unicode11.0.0/ch03.pdf#page=4).\n #[unstable(feature = \"unicode_version\", issue = \"49726\")]\n-pub const UNICODE_VERSION: UnicodeVersion = UnicodeVersion {\n-    major: unicode_data::UNICODE_VERSION.0,\n-    minor: unicode_data::UNICODE_VERSION.1,\n-    micro: unicode_data::UNICODE_VERSION.2,\n-    _priv: (),\n-};\n+pub const UNICODE_VERSION: (u8, u8, u8) = unicode_data::UNICODE_VERSION;\n \n // For use in liballoc, not re-exported in libstd.\n pub mod derived_property {"}, {"sha": "9c92a8ba28ae4f707d3287d5c30d9d09d60d4dd6", "filename": "src/libcore/unicode/unicode_data.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Funicode%2Funicode_data.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f4048c710249daafacdb6004da312e0681954f5/src%2Flibcore%2Funicode%2Funicode_data.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Funicode%2Funicode_data.rs?ref=7f4048c710249daafacdb6004da312e0681954f5", "patch": "@@ -94,7 +94,7 @@ fn skip_search<const SOR: usize, const OFFSETS: usize>(\n     offset_idx % 2 == 1\n }\n \n-pub const UNICODE_VERSION: (u32, u32, u32) = (13, 0, 0);\n+pub const UNICODE_VERSION: (u8, u8, u8) = (13, 0, 0);\n \n #[rustfmt::skip]\n pub mod alphabetic {"}, {"sha": "4d68d2e8c2ef784907507485c590292870c3e29f", "filename": "src/libcore/unicode/version.rs", "status": "removed", "additions": 0, "deletions": 18, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/1f3b65921effc08ea1171bdbbcad70765ecacb22/src%2Flibcore%2Funicode%2Fversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f3b65921effc08ea1171bdbbcad70765ecacb22/src%2Flibcore%2Funicode%2Fversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Funicode%2Fversion.rs?ref=1f3b65921effc08ea1171bdbbcad70765ecacb22", "patch": "@@ -1,18 +0,0 @@\n-/// Represents a Unicode Version.\n-///\n-/// See also: <http://www.unicode.org/versions/>\n-#[derive(Clone, Copy, Debug, Eq, Ord, PartialEq, PartialOrd)]\n-#[unstable(feature = \"unicode_version\", issue = \"49726\")]\n-pub struct UnicodeVersion {\n-    /// Major version.\n-    pub major: u32,\n-\n-    /// Minor version.\n-    pub minor: u32,\n-\n-    /// Micro (or Update) version.\n-    pub micro: u32,\n-\n-    // Private field to keep struct expandable.\n-    pub(crate) _priv: (),\n-}"}, {"sha": "8d28f0080dd561e995d95f43e4219b9fcb51cbd5", "filename": "src/test/ui/char_unicode.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7f4048c710249daafacdb6004da312e0681954f5/src%2Ftest%2Fui%2Fchar_unicode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f4048c710249daafacdb6004da312e0681954f5/src%2Ftest%2Fui%2Fchar_unicode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fchar_unicode.rs?ref=7f4048c710249daafacdb6004da312e0681954f5", "patch": "@@ -7,6 +7,6 @@ pub fn main() {\n     check(std::char::UNICODE_VERSION);\n }\n \n-pub fn check(unicode_version: std::char::UnicodeVersion) {\n-    assert!(unicode_version.major >= 10);\n+pub fn check(unicode_version: (u8, u8, u8)) {\n+    assert!(unicode_version.0 >= 10);\n }"}, {"sha": "6f73b172feae3fde619982f2dd80324b146473cb", "filename": "src/tools/unicode-table-generator/src/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f4048c710249daafacdb6004da312e0681954f5/src%2Ftools%2Funicode-table-generator%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f4048c710249daafacdb6004da312e0681954f5/src%2Ftools%2Funicode-table-generator%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funicode-table-generator%2Fsrc%2Fmain.rs?ref=7f4048c710249daafacdb6004da312e0681954f5", "patch": "@@ -295,7 +295,7 @@ fn main() {\n \n fn version() -> String {\n     let mut out = String::new();\n-    out.push_str(\"pub const UNICODE_VERSION: (u32, u32, u32) = \");\n+    out.push_str(\"pub const UNICODE_VERSION: (u8, u8, u8) = \");\n \n     let readme =\n         std::fs::read_to_string(std::path::Path::new(UNICODE_DIRECTORY).join(\"ReadMe.txt\"))"}]}