{"sha": "60fa9acdf727fa98c42ed0f95b7a4cb6b4550829", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwZmE5YWNkZjcyN2ZhOThjNDJlZDBmOTViN2E0Y2I2YjQ1NTA4Mjk=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-04-23T15:46:49Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2020-04-23T15:51:12Z"}, "message": "Disable interactive prompts in CI", "tree": {"sha": "1aad7fb14c9fe34af6d380f148062cf1377c4374", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1aad7fb14c9fe34af6d380f148062cf1377c4374"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAl6huXAACgkQ+boUO5X/\nbYIq9hAAwZlvQBVxqsoTKvGdzJtYgas2B6ibDHlQg/hXflF/QymkojId7lhHR4kZ\ntjS5syrgvmDBSKTz7TAv9wp241mXbe+e99tHJ096EpYSUOYLEXHlYWyhQYdMj4Ts\nLmGeRC7jaN9Pd2yZY2Ed1inDaK2ufyyI54EGINHOp5pWTCpJGnWbaQrzHxDedJGE\ntR8avju2VFaSd7st/33L7ol0XBfuN09p6sUnTe8paYKuvj1Aqfdcz5tp64J3Y4Ca\nxUuiREtvGwyP+z2KK+RGeYtaAp8NTtxpQv4sn5/YJH+ejZImMDElXU7eOoNXABwL\n7L8nmPDyc1G51MONp/v/qtLZstNCmDmvieoQi3IipZigAtjp9lAjt2yng643ttTh\nkEdWeIGttSbPPzFtnm4kT/s5KzXsxpR6Uh7jsltFnGORAf5go1dyye5pFO8ZTWet\nWrU59Vb6PY1N1N5bk7mS4LtOj84M+0I1D6vFmal2Q3mFLdh5blN7JT4mNn4HgCzY\n39uJiSqGDYXvNF2WW0ps1zVFOc4T9FBF/+nWi54yqw3FEPDAik3ztZmCAA3cW/lB\nniZKjJWxhreGpFcpL/G5PJew896r0gcUu9EAPCdOdY+f+Yk+FVfA/aJS56kGKciJ\nrQLknCB8tjNJ2UUhgLja/nksg+6Q4t30FmR6Cd3hWSGiW97PXww=\n=vWsE\n-----END PGP SIGNATURE-----", "payload": "tree 1aad7fb14c9fe34af6d380f148062cf1377c4374\nparent 92b29721ba87941f0a718974b80ccd8fe31237ee\nauthor David Tolnay <dtolnay@gmail.com> 1587656809 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1587657072 -0700\n\nDisable interactive prompts in CI\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829", "html_url": "https://github.com/rust-lang/rust/commit/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92b29721ba87941f0a718974b80ccd8fe31237ee", "url": "https://api.github.com/repos/rust-lang/rust/commits/92b29721ba87941f0a718974b80ccd8fe31237ee", "html_url": "https://github.com/rust-lang/rust/commit/92b29721ba87941f0a718974b80ccd8fe31237ee"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "ea99ee11495f0dcc78b44c745efbd64528ad2a66", "filename": "src/bin/cargo-miri.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829/src%2Fbin%2Fcargo-miri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/60fa9acdf727fa98c42ed0f95b7a4cb6b4550829/src%2Fbin%2Fcargo-miri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-miri.rs?ref=60fa9acdf727fa98c42ed0f95b7a4cb6b4550829", "patch": "@@ -1,5 +1,6 @@\n #![feature(inner_deref)]\n \n+use std::env;\n use std::fs::{self, File};\n use std::io::{self, BufRead, Write};\n use std::ops::Not;\n@@ -435,7 +436,8 @@ fn in_cargo_miri() {\n     test_sysroot_consistency();\n \n     // We always setup.\n-    let ask = subcommand != MiriCommand::Setup;\n+    // Disable interactive prompts in CI (GitHub Actions, Travis, AppVeyor, etc).\n+    let ask = subcommand != MiriCommand::Setup && env::var_os(\"CI\").is_none();\n     setup(ask);\n     if subcommand == MiriCommand::Setup {\n         // Stop here."}]}