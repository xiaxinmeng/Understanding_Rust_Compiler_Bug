{"sha": "7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkOWRjNmU2OThiNWJkZGM1ZTYzZjExZmM2ZDZmNjBiYjFjZDQzNTk=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-04-18T11:20:01Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2019-04-18T12:43:25Z"}, "message": "test that creating a 2nd mutable ref from a NonNull invalidates the first", "tree": {"sha": "e94a3d387f3e0c969028cbc876c257c298ab415f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e94a3d387f3e0c969028cbc876c257c298ab415f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359", "html_url": "https://github.com/rust-lang/rust/commit/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae9e9cb47c7b79d8bb29fab90929bd9b3606348a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae9e9cb47c7b79d8bb29fab90929bd9b3606348a", "html_url": "https://github.com/rust-lang/rust/commit/ae9e9cb47c7b79d8bb29fab90929bd9b3606348a"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "c6802c5ec94ee78a0a0a498237ae94845b372b96", "filename": "tests/compile-fail/stacked_borrows/mut_exclusive_violation2.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359/tests%2Fcompile-fail%2Fstacked_borrows%2Fmut_exclusive_violation2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359/tests%2Fcompile-fail%2Fstacked_borrows%2Fmut_exclusive_violation2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fstacked_borrows%2Fmut_exclusive_violation2.rs?ref=7d9dc6e698b5bddc5e63f11fc6d6f60bb1cd4359", "patch": "@@ -0,0 +1,10 @@\n+use std::ptr::NonNull;\n+\n+fn main() { unsafe {\n+    let x = &mut 0;\n+    let mut ptr1 = NonNull::from(x);\n+    let mut ptr2 = ptr1.clone();\n+    let raw1 = ptr1.as_mut();\n+    let _raw2 = ptr2.as_mut();\n+    let _val = *raw1; //~ ERROR borrow stack\n+} }"}]}