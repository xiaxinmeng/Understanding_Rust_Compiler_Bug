{"sha": "433f2b030b1c672bd19f38f6247d8aadce438189", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQzM2YyYjAzMGIxYzY3MmJkMTlmMzhmNjI0N2Q4YWFkY2U0MzgxODk=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-11-23T17:45:55Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2019-11-23T17:46:07Z"}, "message": "Add test for anchors", "tree": {"sha": "d1725470bcdab2a3a3d2281043315f66547ed700", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1725470bcdab2a3a3d2281043315f66547ed700"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/433f2b030b1c672bd19f38f6247d8aadce438189", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/433f2b030b1c672bd19f38f6247d8aadce438189", "html_url": "https://github.com/rust-lang/rust/commit/433f2b030b1c672bd19f38f6247d8aadce438189", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/433f2b030b1c672bd19f38f6247d8aadce438189/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "454d13badf6a5d423ba1cc56d106137752db719c", "url": "https://api.github.com/repos/rust-lang/rust/commits/454d13badf6a5d423ba1cc56d106137752db719c", "html_url": "https://github.com/rust-lang/rust/commit/454d13badf6a5d423ba1cc56d106137752db719c"}], "stats": {"total": 89, "additions": 89, "deletions": 0}, "files": [{"sha": "8603f65dde1fd1574b3272062b4de6e453aee3b4", "filename": "src/test/rustdoc-ui/intra-links-anchors.rs", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.rs?ref=433f2b030b1c672bd19f38f6247d8aadce438189", "patch": "@@ -0,0 +1,45 @@\n+#![deny(intra_doc_link_resolution_failure)]\n+\n+// A few tests on anchors.\n+\n+/// Hello people.\n+///\n+/// You can anchors? Here's one!\n+///\n+/// # hola\n+///\n+/// Isn't it amazing?\n+pub struct Foo {\n+    pub f: u8,\n+}\n+\n+pub enum Enum {\n+    A,\n+    B,\n+}\n+\n+/// Have you heard about stuff?\n+///\n+/// Like [Foo#hola].\n+///\n+/// Or maybe [Foo::f#hola].\n+//~^ ERROR `[Foo::f#hola]` has an anchor issue...\n+pub fn foo() {}\n+\n+/// Empty.\n+///\n+/// Another anchor error: [hello#people#!].\n+//~^ ERROR `[hello#people#!]` has an anchor issue...\n+pub fn bar() {}\n+\n+/// Empty?\n+///\n+/// Damn enum's variants: [Enum::A#whatever].\n+//~^ ERROR `[Enum::A#whatever]` has an anchor issue...\n+pub fn enum_link() {}\n+\n+/// Primitives?\n+///\n+/// [u32#hello]\n+//~^ ERROR `[u32#hello]` has an anchor issue...\n+pub fn x() {}"}, {"sha": "39e83b5659be6a5484a51bfd7b2cea12cbc287a0", "filename": "src/test/rustdoc-ui/intra-links-anchors.stderr", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fintra-links-anchors.stderr?ref=433f2b030b1c672bd19f38f6247d8aadce438189", "patch": "@@ -0,0 +1,32 @@\n+error: `[Foo::f#hola]` has an anchor issue...\n+  --> $DIR/intra-links-anchors.rs:25:15\n+   |\n+LL | /// Or maybe [Foo::f#hola].\n+   |               ^^^^^^^^^^^ struct fields cannot be followed by anchors\n+   |\n+note: lint level defined here\n+  --> $DIR/intra-links-anchors.rs:1:9\n+   |\n+LL | #![deny(intra_doc_link_resolution_failure)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: `[hello#people#!]` has an anchor issue...\n+  --> $DIR/intra-links-anchors.rs:31:28\n+   |\n+LL | /// Another anchor error: [hello#people#!].\n+   |                            ^^^^^^^^^^^^^^ only one `#` is allowed in a link\n+\n+error: `[Enum::A#whatever]` has an anchor issue...\n+  --> $DIR/intra-links-anchors.rs:37:28\n+   |\n+LL | /// Damn enum's variants: [Enum::A#whatever].\n+   |                            ^^^^^^^^^^^^^^^^ variants cannot be followed by anchors\n+\n+error: `[u32#hello]` has an anchor issue...\n+  --> $DIR/intra-links-anchors.rs:43:6\n+   |\n+LL | /// [u32#hello]\n+   |      ^^^^^^^^^ primitive types cannot be followed by anchors\n+\n+error: aborting due to 4 previous errors\n+"}, {"sha": "f554e16b4f475452b81396897b5ca6b48a44ec1e", "filename": "src/test/rustdoc/intra-links-anchors.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc%2Fintra-links-anchors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/433f2b030b1c672bd19f38f6247d8aadce438189/src%2Ftest%2Frustdoc%2Fintra-links-anchors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fintra-links-anchors.rs?ref=433f2b030b1c672bd19f38f6247d8aadce438189", "patch": "@@ -0,0 +1,12 @@\n+/// I want...\n+///\n+/// # Anchor!\n+pub struct Something;\n+\n+// @has intra_links_anchors/struct.SomeOtherType.html\n+// @has - '//a/@href' '../intra_links_anchors/struct.Something.html#Anchor!'\n+\n+/// I want...\n+///\n+/// To link to [Something#Anchor!]\n+pub struct SomeOtherType;"}]}