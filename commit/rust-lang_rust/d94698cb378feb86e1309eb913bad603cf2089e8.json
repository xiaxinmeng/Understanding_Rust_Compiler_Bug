{"sha": "d94698cb378feb86e1309eb913bad603cf2089e8", "node_id": "C_kwDOAAsO6NoAKGQ5NDY5OGNiMzc4ZmViODZlMTMwOWViOTEzYmFkNjAzY2YyMDg5ZTg", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-01-30T09:41:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-30T09:41:46Z"}, "message": "Rollup merge of #107264 - ferrocene:pa-private-items, r=Mark-Simulacrum\n\nAdd option to include private items in library docs\n\nI need to perform some one-off analysis on libcore, and I wanted to use the unstable JSON rustdoc output to easily do it. Unfortunately, there is currently no way to include unstable items in the library docs. This PR adds support for that, with the off-by-default `build.library-docs-private-items` setting.", "tree": {"sha": "460737560a7a6036e5d2bbce8b444cd84a630333", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/460737560a7a6036e5d2bbce8b444cd84a630333"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d94698cb378feb86e1309eb913bad603cf2089e8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj15DaCRBK7hj4Ov3rIwAAdLMIAI+EArXbSeidSqWM/lGfF4Bw\nYn2ddP3keKR1tQ12LTbLx+2+0uMCIt2cuxq/b/+ICoD3Niukh8vPiwbNTA8G0GKD\nVAyld77AdohqvHELzh7mtz+0yiP9/koB3EyG3MffMgEfFqyqzLB99+z4YZS36SdB\nEQlFDLheNXGo4w4FXMa6Dsce9rFir1PxH/zzzQhZPCZ/APmo7xc9R7QMr/zcomvY\nttGZNBlCWvufx7uUJdRdu5cbbmLb4OXGGiWzp9OIkgvK4gMhXoXDj3x9aZTbaIU6\nXCk7+xVJbGW56dWlgisM2yeWT6C2I48Ge6ENZeKMBgybH2IRJq6Xh1yyCg2evic=\n=aQXj\n-----END PGP SIGNATURE-----\n", "payload": "tree 460737560a7a6036e5d2bbce8b444cd84a630333\nparent e19ae977ec4c8eaccd92c8e16da4ca4d6ca318d5\nparent 8f84408697dfa95fd3b6367094105b959969702e\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1675071706 +0530\ncommitter GitHub <noreply@github.com> 1675071706 +0530\n\nRollup merge of #107264 - ferrocene:pa-private-items, r=Mark-Simulacrum\n\nAdd option to include private items in library docs\n\nI need to perform some one-off analysis on libcore, and I wanted to use the unstable JSON rustdoc output to easily do it. Unfortunately, there is currently no way to include unstable items in the library docs. This PR adds support for that, with the off-by-default `build.library-docs-private-items` setting.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d94698cb378feb86e1309eb913bad603cf2089e8", "html_url": "https://github.com/rust-lang/rust/commit/d94698cb378feb86e1309eb913bad603cf2089e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d94698cb378feb86e1309eb913bad603cf2089e8/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e19ae977ec4c8eaccd92c8e16da4ca4d6ca318d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/e19ae977ec4c8eaccd92c8e16da4ca4d6ca318d5", "html_url": "https://github.com/rust-lang/rust/commit/e19ae977ec4c8eaccd92c8e16da4ca4d6ca318d5"}, {"sha": "8f84408697dfa95fd3b6367094105b959969702e", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f84408697dfa95fd3b6367094105b959969702e", "html_url": "https://github.com/rust-lang/rust/commit/8f84408697dfa95fd3b6367094105b959969702e"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "85f058f3664e3e5d388643fb86e70feeca400f83", "filename": "config.toml.example", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d94698cb378feb86e1309eb913bad603cf2089e8/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/d94698cb378feb86e1309eb913bad603cf2089e8/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=d94698cb378feb86e1309eb913bad603cf2089e8", "patch": "@@ -233,6 +233,9 @@ changelog-seen = 2\n # and generated in already-minified form from the beginning.\n #docs-minification = true\n \n+# Flag to specify whether private items should be included in the library docs.\n+#library-docs-private-items = false\n+\n # Indicate whether the compiler should be documented in addition to the standard\n # library and facade crates.\n #compiler-docs = false"}, {"sha": "165502b0a41d8214d8389a075bdfe07ea2d7b26f", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d94698cb378feb86e1309eb913bad603cf2089e8/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d94698cb378feb86e1309eb913bad603cf2089e8/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=d94698cb378feb86e1309eb913bad603cf2089e8", "patch": "@@ -65,6 +65,7 @@ pub struct Config {\n     pub verbose: usize,\n     pub submodules: Option<bool>,\n     pub compiler_docs: bool,\n+    pub library_docs_private_items: bool,\n     pub docs_minification: bool,\n     pub docs: bool,\n     pub locked_deps: bool,\n@@ -606,6 +607,7 @@ define_config! {\n         rustfmt: Option<PathBuf> = \"rustfmt\",\n         docs: Option<bool> = \"docs\",\n         compiler_docs: Option<bool> = \"compiler-docs\",\n+        library_docs_private_items: Option<bool> = \"library-docs-private-items\",\n         docs_minification: Option<bool> = \"docs-minification\",\n         submodules: Option<bool> = \"submodules\",\n         gdb: Option<String> = \"gdb\",\n@@ -1018,6 +1020,7 @@ impl Config {\n         config.submodules = build.submodules;\n         set(&mut config.low_priority, build.low_priority);\n         set(&mut config.compiler_docs, build.compiler_docs);\n+        set(&mut config.library_docs_private_items, build.library_docs_private_items);\n         set(&mut config.docs_minification, build.docs_minification);\n         set(&mut config.docs, build.docs);\n         set(&mut config.locked_deps, build.locked_deps);"}, {"sha": "7f8aa2573ddb316b2549c65267792a4a91280102", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d94698cb378feb86e1309eb913bad603cf2089e8/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d94698cb378feb86e1309eb913bad603cf2089e8/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=d94698cb378feb86e1309eb913bad603cf2089e8", "patch": "@@ -597,6 +597,9 @@ fn doc_std(\n             .arg(\"--resource-suffix\")\n             .arg(&builder.version)\n             .args(extra_args);\n+        if builder.config.library_docs_private_items {\n+            cargo.arg(\"--document-private-items\").arg(\"--document-hidden-items\");\n+        }\n         builder.run(&mut cargo.into());\n     };\n "}]}