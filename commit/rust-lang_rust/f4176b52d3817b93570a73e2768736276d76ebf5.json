{"sha": "f4176b52d3817b93570a73e2768736276d76ebf5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY0MTc2YjUyZDM4MTdiOTM1NzBhNzNlMjc2ODczNjI3NmQ3NmViZjU=", "commit": {"author": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2015-05-03T12:02:25Z"}, "committer": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2015-05-03T12:08:30Z"}, "message": "Restore HashMap performance by allowing some functions to be inlined\n\nSince the hashmap and its hasher are implemented in different crates, we\ncurrently can't benefit from inlining, which means that especially for\nsmall, fixed size keys, there is a huge overhead in hash calculations,\nbecause the compiler can't apply optimizations that only apply for these\nkeys.\n\nFixes the brainfuck benchmark in #24014.", "tree": {"sha": "5a8603ba1ca1daa77203d10f42522dc26a8eb6a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a8603ba1ca1daa77203d10f42522dc26a8eb6a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f4176b52d3817b93570a73e2768736276d76ebf5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f4176b52d3817b93570a73e2768736276d76ebf5", "html_url": "https://github.com/rust-lang/rust/commit/f4176b52d3817b93570a73e2768736276d76ebf5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f4176b52d3817b93570a73e2768736276d76ebf5/comments", "author": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d7d3ec9d2b314af0188a820c58fbd95ee905793", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d7d3ec9d2b314af0188a820c58fbd95ee905793", "html_url": "https://github.com/rust-lang/rust/commit/0d7d3ec9d2b314af0188a820c58fbd95ee905793"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "a92b72e0f00faa542598e1ccd7650277c9526902", "filename": "src/libcore/hash/sip.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f4176b52d3817b93570a73e2768736276d76ebf5/src%2Flibcore%2Fhash%2Fsip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f4176b52d3817b93570a73e2768736276d76ebf5/src%2Flibcore%2Fhash%2Fsip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fhash%2Fsip.rs?ref=f4176b52d3817b93570a73e2768736276d76ebf5", "patch": "@@ -111,6 +111,7 @@ impl SipHasher {\n         state\n     }\n \n+    #[inline]\n     fn reset(&mut self) {\n         self.length = 0;\n         self.v0 = self.k0 ^ 0x736f6d6570736575;\n@@ -120,6 +121,7 @@ impl SipHasher {\n         self.ntail = 0;\n     }\n \n+    #[inline]\n     fn write(&mut self, msg: &[u8]) {\n         let length = msg.len();\n         self.length += length;\n@@ -173,6 +175,7 @@ impl Hasher for SipHasher {\n         self.write(msg)\n     }\n \n+    #[inline]\n     fn finish(&self) -> u64 {\n         let mut v0 = self.v0;\n         let mut v1 = self.v1;"}, {"sha": "f82c1653be1ae5697ed6c7f4a58395abae112553", "filename": "src/libstd/collections/hash/map.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f4176b52d3817b93570a73e2768736276d76ebf5/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f4176b52d3817b93570a73e2768736276d76ebf5/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs?ref=f4176b52d3817b93570a73e2768736276d76ebf5", "patch": "@@ -1600,6 +1600,7 @@ impl RandomState {\n            reason = \"hashing an hash maps may be altered\")]\n impl HashState for RandomState {\n     type Hasher = SipHasher;\n+    #[inline]\n     fn hasher(&self) -> SipHasher {\n         SipHasher::new_with_keys(self.k0, self.k1)\n     }"}]}