{"sha": "c74f0045a177c61bd58a23455b27548e3f4bf5e5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3NGYwMDQ1YTE3N2M2MWJkNThhMjM0NTViMjc1NDhlM2Y0YmY1ZTU=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-01-31T00:47:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-31T00:47:39Z"}, "message": "Rollup merge of #81509 - 0yoyoyo:fix-issue-72685-ice-drop-in-place, r=estebank\n\nAdd a regression test for ICE of bad_placeholder_type\n\nAdd a regression test for #72685. Check the error message is output instead of ICE.", "tree": {"sha": "a5c6a09fc6027921ed746f2b739e2e33940d61c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a5c6a09fc6027921ed746f2b739e2e33940d61c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c74f0045a177c61bd58a23455b27548e3f4bf5e5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgFf4sCRBK7hj4Ov3rIwAAdHIIAJ7ZmxsXsCbnm+fgeUIiw3fP\n2waALDcGgJc5J91GcYvoSNYaZXMy1JiPwXCU8cLEHkk5FUYzTk5+M53MMfxkSxlX\nOnnU3bX53mLvpE4LyfXjt+TqbMfTq3EFNbmI/SIbEvtrYWZtMCFiauhR4r1DukgB\nvIw4byhWiUiI3v3b/lmNViJZoTSjHnU1OPQLdLuQT82PcP9PXKdp1iTZd8fsihjT\nDZ+h93tZGlvcN77cE+lBJ9VFAL4c4fE7ZD9b4VqdZ54fZAcN2A2qd71j91ugI5ox\nuyRPcz04Ox68nGcj4dYIOB3dxArRZRhRV1hXnoMHHpGI6WR79oXf8wJXFUCOybY=\n=Wb4Z\n-----END PGP SIGNATURE-----\n", "payload": "tree a5c6a09fc6027921ed746f2b739e2e33940d61c7\nparent 4de31816bfd81501131d90c72b6ac6e38e0770a1\nparent 81ed4cfd0138e68d370873281f53f4e63e5a223f\nauthor Jonas Schievink <jonasschievink@gmail.com> 1612054059 +0100\ncommitter GitHub <noreply@github.com> 1612054059 +0100\n\nRollup merge of #81509 - 0yoyoyo:fix-issue-72685-ice-drop-in-place, r=estebank\n\nAdd a regression test for ICE of bad_placeholder_type\n\nAdd a regression test for #72685. Check the error message is output instead of ICE.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c74f0045a177c61bd58a23455b27548e3f4bf5e5", "html_url": "https://github.com/rust-lang/rust/commit/c74f0045a177c61bd58a23455b27548e3f4bf5e5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c74f0045a177c61bd58a23455b27548e3f4bf5e5/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4de31816bfd81501131d90c72b6ac6e38e0770a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/4de31816bfd81501131d90c72b6ac6e38e0770a1", "html_url": "https://github.com/rust-lang/rust/commit/4de31816bfd81501131d90c72b6ac6e38e0770a1"}, {"sha": "81ed4cfd0138e68d370873281f53f4e63e5a223f", "url": "https://api.github.com/repos/rust-lang/rust/commits/81ed4cfd0138e68d370873281f53f4e63e5a223f", "html_url": "https://github.com/rust-lang/rust/commit/81ed4cfd0138e68d370873281f53f4e63e5a223f"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "0c890f88c60dca2530554a8030b06935d8bb0b41", "filename": "src/test/ui/typeck/typeck_type_placeholder_item_help.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/c74f0045a177c61bd58a23455b27548e3f4bf5e5/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c74f0045a177c61bd58a23455b27548e3f4bf5e5/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.rs?ref=c74f0045a177c61bd58a23455b27548e3f4bf5e5", "patch": "@@ -10,15 +10,18 @@ const TEST2: _ = 42u32;\n const TEST3: _ = Some(42);\n //~^ ERROR the type placeholder `_` is not allowed within types on item signatures\n \n-trait Test4 {\n-    const TEST4: _ = 42;\n+const TEST4: fn() -> _ = 42;\n+//~^ ERROR the type placeholder `_` is not allowed within types on item signatures\n+\n+trait Test5 {\n+    const TEST5: _ = 42;\n     //~^ ERROR the type placeholder `_` is not allowed within types on item signatures\n }\n \n-struct Test5;\n+struct Test6;\n \n-impl Test5 {\n-    const TEST5: _ = 13;\n+impl Test6 {\n+    const TEST6: _ = 13;\n     //~^ ERROR the type placeholder `_` is not allowed within types on item signatures\n }\n "}, {"sha": "0121e18631676c7d3a791d7aa21cd79d5542cec7", "filename": "src/test/ui/typeck/typeck_type_placeholder_item_help.stderr", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/c74f0045a177c61bd58a23455b27548e3f4bf5e5/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c74f0045a177c61bd58a23455b27548e3f4bf5e5/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftypeck%2Ftypeck_type_placeholder_item_help.stderr?ref=c74f0045a177c61bd58a23455b27548e3f4bf5e5", "patch": "@@ -26,23 +26,32 @@ LL | const TEST3: _ = Some(42);\n    |              help: replace `_` with the correct type: `Option<i32>`\n \n error[E0121]: the type placeholder `_` is not allowed within types on item signatures\n-  --> $DIR/typeck_type_placeholder_item_help.rs:14:18\n+  --> $DIR/typeck_type_placeholder_item_help.rs:13:22\n    |\n-LL |     const TEST4: _ = 42;\n+LL | const TEST4: fn() -> _ = 42;\n+   |                      ^\n+   |                      |\n+   |                      not allowed in type signatures\n+   |                      help: use type parameters instead: `T`\n+\n+error[E0121]: the type placeholder `_` is not allowed within types on item signatures\n+  --> $DIR/typeck_type_placeholder_item_help.rs:17:18\n+   |\n+LL |     const TEST5: _ = 42;\n    |                  ^\n    |                  |\n    |                  not allowed in type signatures\n    |                  help: replace `_` with the correct type: `i32`\n \n error[E0121]: the type placeholder `_` is not allowed within types on item signatures\n-  --> $DIR/typeck_type_placeholder_item_help.rs:21:18\n+  --> $DIR/typeck_type_placeholder_item_help.rs:24:18\n    |\n-LL |     const TEST5: _ = 13;\n+LL |     const TEST6: _ = 13;\n    |                  ^\n    |                  |\n    |                  not allowed in type signatures\n    |                  help: replace `_` with the correct type: `i32`\n \n-error: aborting due to 5 previous errors\n+error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0121`."}]}