{"sha": "1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5MjMwNDQ3MDViMmU5ZDU0ZjdmYThmNDBlMWMwYmFiNWVhMDgxZmY=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-14T15:33:24Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-02-15T12:43:29Z"}, "message": "Add a `cdylib`-only crate test", "tree": {"sha": "2c47329f12b4bcb895940c52b55e157b8c036197", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2c47329f12b4bcb895940c52b55e157b8c036197"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYCpscRUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLhZyQD9HE2dxD6XdRn2xtBqqnuQodT12S4i\n9sxdzxa0EKTtxsgA/2bilbwa6AKfXve4oN1vhJ9KK8Pi28hVXny7odB5y0wJ\n=SzrO\n-----END PGP SIGNATURE-----", "payload": "tree 2c47329f12b4bcb895940c52b55e157b8c036197\nparent 51c6f51c36b95420d9748b0d9d372ccbbaafc93d\nauthor hyd-dev <yd-huang@outlook.com> 1613316804 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1613393009 +0800\n\nAdd a `cdylib`-only crate test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "html_url": "https://github.com/rust-lang/rust/commit/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/comments", "author": null, "committer": null, "parents": [{"sha": "51c6f51c36b95420d9748b0d9d372ccbbaafc93d", "url": "https://api.github.com/repos/rust-lang/rust/commits/51c6f51c36b95420d9748b0d9d372ccbbaafc93d", "html_url": "https://github.com/rust-lang/rust/commit/51c6f51c36b95420d9748b0d9d372ccbbaafc93d"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "1f1541b92a5631abf4489041cc53f00b8ab9b84a", "filename": "test-cargo-miri/Cargo.lock", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.lock?ref=1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "patch": "@@ -11,13 +11,21 @@ name = \"cargo-miri-test\"\n version = \"0.1.0\"\n dependencies = [\n  \"byteorder\",\n+ \"cdylib\",\n  \"issue_1567\",\n  \"issue_1691\",\n  \"issue_1705\",\n  \"rand\",\n  \"serde_derive\",\n ]\n \n+[[package]]\n+name = \"cdylib\"\n+version = \"0.1.0\"\n+dependencies = [\n+ \"byteorder\",\n+]\n+\n [[package]]\n name = \"cfg-if\"\n version = \"0.1.10\""}, {"sha": "7ffe7d04ea4759f21a2e089f5b4a38c4a08f74b2", "filename": "test-cargo-miri/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.toml?ref=1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "patch": "@@ -9,6 +9,7 @@ edition = \"2018\"\n \n [dependencies]\n byteorder = \"1.0\"\n+cdylib = { path = \"cdylib\" }\n issue_1567 = { path = \"issue-1567\" }\n issue_1691 = { path = \"issue-1691\" }\n issue_1705 = { path = \"issue-1705\" }"}, {"sha": "4e5b5601a56cea5eea13f558882dac93a2a80764", "filename": "test-cargo-miri/cdylib/Cargo.toml", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2Fcdylib%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2Fcdylib%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Fcdylib%2FCargo.toml?ref=1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "patch": "@@ -0,0 +1,12 @@\n+[package]\n+name = \"cdylib\"\n+version = \"0.1.0\"\n+authors = [\"Miri Team\"]\n+edition = \"2018\"\n+\n+[lib]\n+# cargo-miri used to handle `cdylib` crate-type specially (https://github.com/rust-lang/miri/pull/1577).\n+crate-type = [\"cdylib\"]\n+\n+[dependencies]\n+byteorder = \"1.0\""}, {"sha": "dd89048284deef338d1fd938ee251686aca8d5f4", "filename": "test-cargo-miri/cdylib/src/lib.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2Fcdylib%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1923044705b2e9d54f7fa8f40e1c0bab5ea081ff/test-cargo-miri%2Fcdylib%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Fcdylib%2Fsrc%2Flib.rs?ref=1923044705b2e9d54f7fa8f40e1c0bab5ea081ff", "patch": "@@ -0,0 +1,6 @@\n+use byteorder::{BigEndian, ByteOrder};\n+\n+#[no_mangle]\n+extern \"C\" fn use_the_dependency() {\n+    let _n = <BigEndian as ByteOrder>::read_u64(&[1,2,3,4,5,6,7,8]);\n+}"}]}