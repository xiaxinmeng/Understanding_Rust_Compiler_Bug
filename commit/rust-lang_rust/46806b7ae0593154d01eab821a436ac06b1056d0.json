{"sha": "46806b7ae0593154d01eab821a436ac06b1056d0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ2ODA2YjdhZTA1OTMxNTRkMDFlYWI4MjFhNDM2YWMwNmIxMDU2ZDA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-27T05:45:36Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-04-27T05:45:36Z"}, "message": "auto merge of #6059 : Kimundi/rust/nice-fail, r=pcwalton\n\nr? @brson\r\n\r\nUnwinding through macros now happens as a call to the trait function `FailWithCause::fail_with()`, which consumes self, allowing to use a more generic failure object in the future.", "tree": {"sha": "51227371d5ed464ee724df475950e9eaa7f346dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/51227371d5ed464ee724df475950e9eaa7f346dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/46806b7ae0593154d01eab821a436ac06b1056d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/46806b7ae0593154d01eab821a436ac06b1056d0", "html_url": "https://github.com/rust-lang/rust/commit/46806b7ae0593154d01eab821a436ac06b1056d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/46806b7ae0593154d01eab821a436ac06b1056d0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8804b13bd2d7230f65db2c847177969dde9e3936", "url": "https://api.github.com/repos/rust-lang/rust/commits/8804b13bd2d7230f65db2c847177969dde9e3936", "html_url": "https://github.com/rust-lang/rust/commit/8804b13bd2d7230f65db2c847177969dde9e3936"}, {"sha": "928a07e9cb576640d122fbd7428b8a39b925c5f7", "url": "https://api.github.com/repos/rust-lang/rust/commits/928a07e9cb576640d122fbd7428b8a39b925c5f7", "html_url": "https://github.com/rust-lang/rust/commit/928a07e9cb576640d122fbd7428b8a39b925c5f7"}], "stats": {"total": 236, "additions": 210, "deletions": 26}, "files": [{"sha": "bdc3a17308da59fc2d9035a7c2c0f25b4404b385", "filename": "src/libcore/sys.rs", "status": "modified", "additions": 46, "deletions": 1, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibcore%2Fsys.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibcore%2Fsys.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsys.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -165,7 +165,42 @@ pub fn log_str<T>(t: &T) -> ~str {\n     }\n }\n \n-/** Initiate task failure */\n+/// Trait for initiating task failure.\n+pub trait FailWithCause {\n+    /// Fail the current task, taking ownership of `cause`\n+    fn fail_with(cause: Self, file: &'static str, line: uint) -> !;\n+}\n+\n+impl FailWithCause for ~str {\n+    fn fail_with(cause: ~str, file: &'static str, line: uint) -> ! {\n+        do str::as_buf(cause) |msg_buf, _msg_len| {\n+            do str::as_buf(file) |file_buf, _file_len| {\n+                unsafe {\n+                    let msg_buf = cast::transmute(msg_buf);\n+                    let file_buf = cast::transmute(file_buf);\n+                    begin_unwind_(msg_buf, file_buf, line as libc::size_t)\n+                }\n+            }\n+        }\n+    }\n+}\n+\n+impl FailWithCause for &'static str {\n+    fn fail_with(cause: &'static str, file: &'static str, line: uint) -> ! {\n+        do str::as_buf(cause) |msg_buf, _msg_len| {\n+            do str::as_buf(file) |file_buf, _file_len| {\n+                unsafe {\n+                    let msg_buf = cast::transmute(msg_buf);\n+                    let file_buf = cast::transmute(file_buf);\n+                    begin_unwind_(msg_buf, file_buf, line as libc::size_t)\n+                }\n+            }\n+        }\n+    }\n+}\n+\n+// NOTE: remove function after snapshot\n+#[cfg(stage0)]\n pub fn begin_unwind(msg: ~str, file: ~str, line: uint) -> ! {\n     do str::as_buf(msg) |msg_buf, _msg_len| {\n         do str::as_buf(file) |file_buf, _file_len| {\n@@ -187,6 +222,8 @@ pub fn begin_unwind_(msg: *c_char, file: *c_char, line: size_t) -> ! {\n     }\n }\n \n+// NOTE: remove function after snapshot\n+#[cfg(stage0)]\n pub fn fail_assert(msg: &str, file: &str, line: uint) -> ! {\n     let (msg, file) = (msg.to_owned(), file.to_owned());\n     begin_unwind(~\"assertion failed: \" + msg, file, line)\n@@ -297,6 +334,14 @@ mod tests {\n             assert!(new_f(20) == 30);\n         }\n     }\n+\n+    #[test]\n+    #[should_fail]\n+    fn fail_static() { FailWithCause::fail_with(\"cause\", file!(), line!())  }\n+\n+    #[test]\n+    #[should_fail]\n+    fn fail_owned() { FailWithCause::fail_with(~\"cause\", file!(), line!())  }\n }\n \n // Local Variables:"}, {"sha": "8263fce23563a1e3bb847ebf7a0026d834f0c917", "filename": "src/libsyntax/ext/auto_encode.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fauto_encode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fauto_encode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fauto_encode.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -1101,7 +1101,7 @@ fn mk_enum_deser_body(\n     };\n \n     let quoted_expr = copy quote_expr!(\n-      ::core::sys::begin_unwind(~\"explicit failure\", ~\"empty\", 1);\n+      ::core::sys::FailWithCause::fail_with(\"explicit failure\", \"empty\", 1);\n     ).node;\n \n     let impossible_case = ast::arm {"}, {"sha": "db4929854b37035817b7be2eaf5bd8b32ab8a17a", "filename": "src/libsyntax/ext/build.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fbuild.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -474,11 +474,12 @@ pub fn mk_unreachable(cx: @ext_ctxt, span: span) -> @ast::expr {\n         ~[\n             cx.ident_of(~\"core\"),\n             cx.ident_of(~\"sys\"),\n-            cx.ident_of(~\"begin_unwind\"),\n+            cx.ident_of(~\"FailWithCause\"),\n+            cx.ident_of(~\"fail_with\"),\n         ],\n         ~[\n-            mk_uniq_str(cx, span, ~\"internal error: entered unreachable code\"),\n-            mk_uniq_str(cx, span, loc.file.name),\n+            mk_base_str(cx, span, ~\"internal error: entered unreachable code\"),\n+            mk_base_str(cx, span, loc.file.name),\n             mk_uint(cx, span, loc.line),\n         ]\n     )"}, {"sha": "53ebb946114d2d6730179302bf7ac13d24e2350b", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 29, "deletions": 13, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -415,6 +415,7 @@ pub fn core_macros() -> ~str {\n             __log(1u32, fmt!( $($arg),+ ))\n         )\n     )\n+\n     macro_rules! warn (\n         ($arg:expr) => (\n             __log(2u32, fmt!( \\\"%?\\\", $arg ))\n@@ -423,6 +424,7 @@ pub fn core_macros() -> ~str {\n             __log(2u32, fmt!( $($arg),+ ))\n         )\n     )\n+\n     macro_rules! info (\n         ($arg:expr) => (\n             __log(3u32, fmt!( \\\"%?\\\", $arg ))\n@@ -431,6 +433,7 @@ pub fn core_macros() -> ~str {\n             __log(3u32, fmt!( $($arg),+ ))\n         )\n     )\n+\n     macro_rules! debug (\n         ($arg:expr) => (\n             __log(4u32, fmt!( \\\"%?\\\", $arg ))\n@@ -441,35 +444,48 @@ pub fn core_macros() -> ~str {\n     )\n \n     macro_rules! fail(\n-        ($msg: expr) => (\n-            ::core::sys::begin_unwind($msg, file!().to_owned(), line!())\n-        );\n         () => (\n-            fail!(~\\\"explicit failure\\\")\n+            fail!(\\\"explicit failure\\\")\n+        );\n+        ($msg:expr) => (\n+            ::core::sys::FailWithCause::fail_with($msg, file!(), line!())\n+        );\n+        ($( $arg:expr ),+) => (\n+            ::core::sys::FailWithCause::fail_with(fmt!( $($arg),+ ), file!(), line!())\n         )\n     )\n \n     macro_rules! assert(\n         ($cond:expr) => {\n             if !$cond {\n-                ::core::sys::fail_assert(stringify!($cond), file!(), line!())\n+                ::core::sys::FailWithCause::fail_with(\n+                    ~\\\"assertion failed: \\\" + stringify!($cond), file!(), line!())\n             }\n         };\n         ($cond:expr, $msg:expr) => {\n             if !$cond {\n-                ::core::sys::fail_assert($msg, file!(), line!())\n+                ::core::sys::FailWithCause::fail_with($msg, file!(), line!())\n+            }\n+        };\n+        ($cond:expr, $( $arg:expr ),+) => {\n+            if !$cond {\n+                ::core::sys::FailWithCause::fail_with(fmt!( $($arg),+ ), file!(), line!())\n             }\n         }\n     )\n \n     macro_rules! assert_eq (\n-        ($given:expr , $expected:expr) =>\n-        ({let given_val = $given;\n-          let expected_val = $expected;\n-          // check both directions of equality....\n-          if !((given_val == expected_val) && (expected_val == given_val)) {\n-            fail!(fmt!(\\\"expected: %?, given: %?\\\",expected_val,given_val));\n-        }}))\n+        ($given:expr , $expected:expr) => (\n+            {\n+                let given_val = $given;\n+                let expected_val = $expected;\n+                // check both directions of equality....\n+                if !((given_val == expected_val) && (expected_val == given_val)) {\n+                    fail!(fmt!(\\\"left: %? != right: %?\\\", given_val, expected_val));\n+                }\n+            }\n+        )\n+    )\n \n     macro_rules! condition (\n "}, {"sha": "b30e3942e6330755c2fcf5b54ebea325f8c0f18e", "filename": "src/test/compile-fail/die-not-static.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Fdie-not-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Fdie-not-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdie-not-static.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,7 @@\n+// error-pattern:illegal borrow: borrowed value does not live long enough\n+\n+fn main() {\n+    let v = ~\"test\";\n+    let sslice = str::slice(v, 0, v.len());\n+    fail!(sslice);\n+}"}, {"sha": "29369f081d75da7d0a8542076fdb71917c8417fe", "filename": "src/test/compile-fail/die-not-unique.rs", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8804b13bd2d7230f65db2c847177969dde9e3936/src%2Ftest%2Fcompile-fail%2Fdie-not-unique.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8804b13bd2d7230f65db2c847177969dde9e3936/src%2Ftest%2Fcompile-fail%2Fdie-not-unique.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fdie-not-unique.rs?ref=8804b13bd2d7230f65db2c847177969dde9e3936", "patch": "@@ -1,5 +0,0 @@\n-// error-pattern:mismatched types\n-\n-fn main() {\n-    fail!(\"test\");\n-}"}, {"sha": "e17c8d6a182c545182b227c960834fe49f92c120", "filename": "src/test/compile-fail/fail-expr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Ffail-expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Ffail-expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffail-expr.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -8,6 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:mismatched types\n+// error-pattern:failed to find an implementation of trait core::sys::FailWithCause for int\n \n fn main() { fail!(5); }"}, {"sha": "fbfa85ea6f87fdefa50a83bdb7fbdf1dd3b19e8f", "filename": "src/test/compile-fail/fail-type-err.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Ffail-type-err.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Fcompile-fail%2Ffail-type-err.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffail-type-err.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -8,5 +8,5 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:expected `~str` but found `~[int]`\n+// error-pattern:failed to find an implementation of trait core::sys::FailWithCause for ~[int]\n fn main() { fail!(~[0i]); }"}, {"sha": "7d98d0dccde63645c2129084240fd5a3d39c9b6c", "filename": "src/test/run-fail/assert-eq-macro-fail.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-eq-macro-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-eq-macro-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-eq-macro-fail.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -1,4 +1,4 @@\n-// error-pattern:expected: 15, given: 14\n+// error-pattern:left: 14 != right: 15\n \n #[deriving(Eq)]\n struct Point { x : int }"}, {"sha": "8c35c92ffb0ba2bcf196224e7ed96575b3255f99", "filename": "src/test/run-fail/assert-macro-explicit.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-explicit.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'assertion failed: false'\n+\n+fn main() {\n+    assert!(false);\n+}"}, {"sha": "d239760537821b6a5cc4a37847bf9d06b0070918", "filename": "src/test/run-fail/assert-macro-fmt.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-fmt.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-assert-fmt 42 rust'\n+\n+fn main() {\n+    assert!(false, \"test-assert-fmt %d %s\", 42, \"rust\");\n+}"}, {"sha": "baa47dbbd356df6e45bbc7ba4cd45e3f22ea9678", "filename": "src/test/run-fail/assert-macro-owned.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-owned.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-assert-owned'\n+\n+fn main() {\n+    assert!(false, ~\"test-assert-owned\");\n+}"}, {"sha": "d47455173d1b97b2c6b49182792a7a355d9c92f6", "filename": "src/test/run-fail/assert-macro-static.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Fassert-macro-static.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-assert-static'\n+\n+fn main() {\n+    assert!(false, \"test-assert-static\");\n+}"}, {"sha": "eac80db40b9d23bb232dff246b76ea63746f21c2", "filename": "src/test/run-fail/fail-macro-explicit.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-explicit.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'explicit failure'\n+\n+fn main() {\n+    fail!();\n+}"}, {"sha": "363c572f3fe1eb50834d6dff23c1436301c9d60a", "filename": "src/test/run-fail/fail-macro-fmt.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-fmt.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-fail-fmt 42 rust'\n+\n+fn main() {\n+    fail!(\"test-fail-fmt %d %s\", 42, \"rust\");\n+}"}, {"sha": "6bed79a885fea5ff49ccd894f8337d52516467c4", "filename": "src/test/run-fail/fail-macro-owned.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-owned.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-fail-owned'\n+\n+fn main() {\n+    fail!(~\"test-fail-owned\");\n+}"}, {"sha": "3235dc761a29dce54920002178737a4bf2c42d1e", "filename": "src/test/run-fail/fail-macro-static.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46806b7ae0593154d01eab821a436ac06b1056d0/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Ffail-macro-static.rs?ref=46806b7ae0593154d01eab821a436ac06b1056d0", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// error-pattern:task failed at 'test-fail-static'\n+\n+fn main() {\n+    fail!(\"test-fail-static\");\n+}"}]}