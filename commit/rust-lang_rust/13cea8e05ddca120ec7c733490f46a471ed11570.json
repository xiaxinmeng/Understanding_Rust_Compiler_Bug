{"sha": "13cea8e05ddca120ec7c733490f46a471ed11570", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEzY2VhOGUwNWRkY2ExMjBlYzdjNzMzNDkwZjQ2YTQ3MWVkMTE1NzA=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-09-20T13:36:22Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-09-20T13:36:22Z"}, "message": "Rollup merge of #54258 - alexcrichton:lld-fatal-warnings, r=eddyb\n\nEnable fatal warnings for the wasm32 linker\n\nHistorically LLD has emitted warnings for various reasons but all the bugs have\nsince been fixed (yay!) and by enabling fatal warnings we should be able to head\noff bugs like #53390 sooner.", "tree": {"sha": "2b3a1428eeb3f5aa953c9fba196032c3da8745e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b3a1428eeb3f5aa953c9fba196032c3da8745e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/13cea8e05ddca120ec7c733490f46a471ed11570", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbo6JWCRBK7hj4Ov3rIwAAdHIIAI8qUgHmhBr0ltew/ove69Pu\npCBP4PIQzCM8c+aNDXMFkGq9+BD/Js+eQJVf6G9DkwZkkm1QcrJlLOrOXlK/0nd/\nJbHhmLQIrtTlZc65yPBA3q5TxVg7UrkHTnzbZNI0g4HP0Fde+/rQ5EZKAu/Lh2f9\nnuA87vrF0HnZfmd4tPwNmuxjYdBYMngEwIzjisdDHgwc1SgS4ov2K3aAF6Ie84SW\nWgX8a4BQUCfN2IZDruJGYJeTz8KIw9j3MARsJRENxKA1t14MTsSGQ7dBsXJlrCo7\n2ebh2rTGipA/4BQMFnOZ83wboaGnLJRPCHexlwqY6o09wdTFfSaSCgltYo+Kx3A=\n=22Ul\n-----END PGP SIGNATURE-----\n", "payload": "tree 2b3a1428eeb3f5aa953c9fba196032c3da8745e3\nparent a135005150fad21ddde16446a7dea08257102b84\nparent 42652565ee7da4053b24ec8cd1e31c0c30ac8174\nauthor kennytm <kennytm@gmail.com> 1537450582 +0800\ncommitter GitHub <noreply@github.com> 1537450582 +0800\n\nRollup merge of #54258 - alexcrichton:lld-fatal-warnings, r=eddyb\n\nEnable fatal warnings for the wasm32 linker\n\nHistorically LLD has emitted warnings for various reasons but all the bugs have\nsince been fixed (yay!) and by enabling fatal warnings we should be able to head\noff bugs like #53390 sooner.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/13cea8e05ddca120ec7c733490f46a471ed11570", "html_url": "https://github.com/rust-lang/rust/commit/13cea8e05ddca120ec7c733490f46a471ed11570", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/13cea8e05ddca120ec7c733490f46a471ed11570/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a135005150fad21ddde16446a7dea08257102b84", "url": "https://api.github.com/repos/rust-lang/rust/commits/a135005150fad21ddde16446a7dea08257102b84", "html_url": "https://github.com/rust-lang/rust/commit/a135005150fad21ddde16446a7dea08257102b84"}, {"sha": "42652565ee7da4053b24ec8cd1e31c0c30ac8174", "url": "https://api.github.com/repos/rust-lang/rust/commits/42652565ee7da4053b24ec8cd1e31c0c30ac8174", "html_url": "https://github.com/rust-lang/rust/commit/42652565ee7da4053b24ec8cd1e31c0c30ac8174"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "c03180c02fe634f5d1c6b5c62a304cd2eb40fcb4", "filename": "src/librustc_codegen_llvm/back/linker.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/13cea8e05ddca120ec7c733490f46a471ed11570/src%2Flibrustc_codegen_llvm%2Fback%2Flinker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/13cea8e05ddca120ec7c733490f46a471ed11570/src%2Flibrustc_codegen_llvm%2Fback%2Flinker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fback%2Flinker.rs?ref=13cea8e05ddca120ec7c733490f46a471ed11570", "patch": "@@ -1071,6 +1071,10 @@ impl<'a> Linker for WasmLd<'a> {\n         // Make the default table accessible\n         self.cmd.arg(\"--export-table\");\n \n+        // Rust code should never have warnings, and warnings are often\n+        // indicative of bugs, let's prevent them.\n+        self.cmd.arg(\"--fatal-warnings\");\n+\n         let mut cmd = Command::new(\"\");\n         ::std::mem::swap(&mut cmd, &mut self.cmd);\n         cmd"}]}