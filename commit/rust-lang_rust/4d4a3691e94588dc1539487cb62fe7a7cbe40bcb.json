{"sha": "4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "node_id": "C_kwDOAAsO6NoAKDRkNGEzNjkxZTk0NTg4ZGMxNTM5NDg3Y2I2MmZlN2E3Y2JlNDBiY2I", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-09-26T17:19:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-26T17:19:19Z"}, "message": "Rollup merge of #101875 - fmease:allow-more-negative-copy-impls, r=lcnr\n\nAllow more `!Copy` impls\n\nYou can already implement `!Copy` for a lot of types (with `#![feature(negative_impls)]`). However, before this PR you could not implement `!Copy` for ADTs whose fields don't implement `Copy` which didn't make any sense. Further, you couldn't implement `!Copy` for types impl'ing `Drop` (equally nonsensical).\n\n``@rustbot`` label T-types F-negative_impls\nFixes #101836.\n\nr? types", "tree": {"sha": "009004758cb2bd007cff153dc0e174bffcb188f8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/009004758cb2bd007cff153dc0e174bffcb188f8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjMd8XCRBK7hj4Ov3rIwAADHUIAAzpiAsLpvw+rv+9Z5SXGceH\nBmX7p6lhQkzNgDT+ZoMvvFu/RQXU0MPfXEpDbn+MTJZR0fNkiMupH84ezetNoxyh\n/8vLZ3jElF4IMXvNTcws57oOVRJalt5HAPM66isA/9lry7D4gMShlnZDhbNEkBKr\nEWAc+6Veft6/Z50sLsSFx3SX93AAw++QqyasNk9WGR/lUlghesZRe6Tzn+0kXn1U\nF2Y2OBq495cvmphVP3mKL+ZERjAC/4uizK7Q/VKyO49HlLyZvhljEtyBnrG13djj\nflvfkGDFuI6h9q7gYIxyO1dJs4ADDivWnTcnwnE9VmGtPxVwBoIUiLDD/S01+s0=\n=HVK8\n-----END PGP SIGNATURE-----\n", "payload": "tree 009004758cb2bd007cff153dc0e174bffcb188f8\nparent e1d7dec558d863fb76f98453088b36cb1a926d48\nparent 28e0c5aec8335d34cd84f3970d633860d6bd08a9\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1664212759 +0200\ncommitter GitHub <noreply@github.com> 1664212759 +0200\n\nRollup merge of #101875 - fmease:allow-more-negative-copy-impls, r=lcnr\n\nAllow more `!Copy` impls\n\nYou can already implement `!Copy` for a lot of types (with `#![feature(negative_impls)]`). However, before this PR you could not implement `!Copy` for ADTs whose fields don't implement `Copy` which didn't make any sense. Further, you couldn't implement `!Copy` for types impl'ing `Drop` (equally nonsensical).\n\n``@rustbot`` label T-types F-negative_impls\nFixes #101836.\n\nr? types\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "html_url": "https://github.com/rust-lang/rust/commit/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e1d7dec558d863fb76f98453088b36cb1a926d48", "url": "https://api.github.com/repos/rust-lang/rust/commits/e1d7dec558d863fb76f98453088b36cb1a926d48", "html_url": "https://github.com/rust-lang/rust/commit/e1d7dec558d863fb76f98453088b36cb1a926d48"}, {"sha": "28e0c5aec8335d34cd84f3970d633860d6bd08a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/28e0c5aec8335d34cd84f3970d633860d6bd08a9", "html_url": "https://github.com/rust-lang/rust/commit/28e0c5aec8335d34cd84f3970d633860d6bd08a9"}], "stats": {"total": 130, "additions": 100, "deletions": 30}, "files": [{"sha": "d4eb826f0b4d39a4f108f37606ad685503e7be7d", "filename": "compiler/rustc_typeck/src/coherence/builtin.rs", "status": "modified", "additions": 6, "deletions": 12, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcoherence%2Fbuiltin.rs?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -70,23 +70,21 @@ fn visit_implementation_of_copy(tcx: TyCtxt<'_>, impl_did: LocalDefId) {\n     let self_type = tcx.type_of(impl_did);\n     debug!(\"visit_implementation_of_copy: self_type={:?} (bound)\", self_type);\n \n-    let span = tcx.hir().span(impl_hir_id);\n     let param_env = tcx.param_env(impl_did);\n     assert!(!self_type.has_escaping_bound_vars());\n \n     debug!(\"visit_implementation_of_copy: self_type={:?} (free)\", self_type);\n \n+    let span = match tcx.hir().expect_item(impl_did).kind {\n+        ItemKind::Impl(hir::Impl { polarity: hir::ImplPolarity::Negative(_), .. }) => return,\n+        ItemKind::Impl(impl_) => impl_.self_ty.span,\n+        _ => bug!(\"expected Copy impl item\"),\n+    };\n+\n     let cause = traits::ObligationCause::misc(span, impl_hir_id);\n     match can_type_implement_copy(tcx, param_env, self_type, cause) {\n         Ok(()) => {}\n         Err(CopyImplementationError::InfrigingFields(fields)) => {\n-            let item = tcx.hir().expect_item(impl_did);\n-            let span = if let ItemKind::Impl(hir::Impl { of_trait: Some(ref tr), .. }) = item.kind {\n-                tr.path.span\n-            } else {\n-                span\n-            };\n-\n             let mut err = struct_span_err!(\n                 tcx.sess,\n                 span,\n@@ -166,10 +164,6 @@ fn visit_implementation_of_copy(tcx: TyCtxt<'_>, impl_did: LocalDefId) {\n             err.emit();\n         }\n         Err(CopyImplementationError::NotAnAdt) => {\n-            let item = tcx.hir().expect_item(impl_did);\n-            let span =\n-                if let ItemKind::Impl(ref impl_) = item.kind { impl_.self_ty.span } else { span };\n-\n             tcx.sess.emit_err(CopyImplOnNonAdt { span });\n         }\n         Err(CopyImplementationError::HasDestructor) => {"}, {"sha": "563f28e2291d42015d3160e8896c3ad639f7d4ed", "filename": "src/test/ui/coherence/coherence-negative-impls-copy-bad.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.rs?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -0,0 +1,11 @@\n+#![feature(negative_impls)]\n+#![crate_type = \"lib\"]\n+\n+impl !Copy for str {}\n+//~^ ERROR only traits defined in the current crate can be implemented\n+\n+impl !Copy for fn() {}\n+//~^ ERROR only traits defined in the current crate can be implemented\n+\n+impl !Copy for () {}\n+//~^ ERROR only traits defined in the current crate can be implemented"}, {"sha": "2295d6315d1c2af951520a0f166c371ed301dabc", "filename": "src/test/ui/coherence/coherence-negative-impls-copy-bad.stderr", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy-bad.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -0,0 +1,36 @@\n+error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+  --> $DIR/coherence-negative-impls-copy-bad.rs:4:1\n+   |\n+LL | impl !Copy for str {}\n+   | ^^^^^^^^^^^^^^^---\n+   | |              |\n+   | |              `str` is not defined in the current crate\n+   | impl doesn't use only types from inside the current crate\n+   |\n+   = note: define and implement a trait or new type instead\n+\n+error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+  --> $DIR/coherence-negative-impls-copy-bad.rs:7:1\n+   |\n+LL | impl !Copy for fn() {}\n+   | ^^^^^^^^^^^^^^^----\n+   | |              |\n+   | |              `fn()` is not defined in the current crate\n+   | impl doesn't use only types from inside the current crate\n+   |\n+   = note: define and implement a trait or new type instead\n+\n+error[E0117]: only traits defined in the current crate can be implemented for arbitrary types\n+  --> $DIR/coherence-negative-impls-copy-bad.rs:10:1\n+   |\n+LL | impl !Copy for () {}\n+   | ^^^^^^^^^^^^^^^--\n+   | |              |\n+   | |              this is not defined in the current crate because tuples are always foreign\n+   | impl doesn't use only types from inside the current crate\n+   |\n+   = note: define and implement a trait or new type instead\n+\n+error: aborting due to 3 previous errors\n+\n+For more information about this error, try `rustc --explain E0117`."}, {"sha": "7b29aade41335ba9514ee2ffd00bd477159cfc80", "filename": "src/test/ui/coherence/coherence-negative-impls-copy.rs", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fcoherence-negative-impls-copy.rs?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -0,0 +1,29 @@\n+// check-pass\n+// regression test for issue #101836\n+\n+#![feature(negative_impls, extern_types)]\n+#![crate_type = \"lib\"]\n+\n+struct NonCopy;\n+struct NeverCopy(NonCopy);\n+\n+impl !Copy for NeverCopy {}\n+\n+\n+struct WithDrop;\n+impl Drop for WithDrop { fn drop(&mut self) {} }\n+\n+impl !Copy for WithDrop {}\n+\n+\n+struct Type;\n+trait Trait {}\n+extern {\n+    type ExternType;\n+}\n+\n+impl !Copy for &mut Type {}\n+\n+impl !Copy for dyn Trait {}\n+\n+impl !Copy for ExternType {}"}, {"sha": "168ee57263d2a4205799c6ab22c453a07f2a2098", "filename": "src/test/ui/coherence/deep-bad-copy-reason.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fdeep-bad-copy-reason.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fcoherence%2Fdeep-bad-copy-reason.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcoherence%2Fdeep-bad-copy-reason.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,11 +1,11 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/deep-bad-copy-reason.rs:33:15\n+  --> $DIR/deep-bad-copy-reason.rs:33:24\n    |\n LL | pub struct List<'tcx, T>(Interned<'tcx, ListS<T>>);\n    |                          ------------------------ this field does not implement `Copy`\n ...\n LL | impl<'tcx, T> Copy for List<'tcx, T> {}\n-   |               ^^^^\n+   |                        ^^^^^^^^^^^^^\n    |\n note: the `Copy` impl for `Interned<'tcx, ListS<T>>` requires that `OpaqueListContents: Sized`\n   --> $DIR/deep-bad-copy-reason.rs:23:26"}, {"sha": "4461567df0a2a6d046dd9b162fd2ce5d1edf8143", "filename": "src/test/ui/opt-in-copy.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fopt-in-copy.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fopt-in-copy.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fopt-in-copy.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,20 +1,20 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/opt-in-copy.rs:7:6\n+  --> $DIR/opt-in-copy.rs:7:15\n    |\n LL |     but_i_cant: CantCopyThis,\n    |     ------------------------ this field does not implement `Copy`\n ...\n LL | impl Copy for IWantToCopyThis {}\n-   |      ^^^^\n+   |               ^^^^^^^^^^^^^^^\n \n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/opt-in-copy.rs:19:6\n+  --> $DIR/opt-in-copy.rs:19:15\n    |\n LL |     ButICant(CantCopyThisEither),\n    |              ------------------ this field does not implement `Copy`\n ...\n LL | impl Copy for IWantToCopyThisToo {}\n-   |      ^^^^\n+   |               ^^^^^^^^^^^^^^^^^^\n \n error: aborting due to 2 previous errors\n "}, {"sha": "0b2166eed7ead932a6b47d449fa8dd3814f6d65a", "filename": "src/test/ui/span/E0204.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fspan%2FE0204.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fspan%2FE0204.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2FE0204.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,11 +1,11 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/E0204.rs:5:6\n+  --> $DIR/E0204.rs:5:15\n    |\n LL |     foo: Vec<u32>,\n    |     ------------- this field does not implement `Copy`\n ...\n LL | impl Copy for Foo { }\n-   |      ^^^^\n+   |               ^^^\n \n error[E0204]: the trait `Copy` may not be implemented for this type\n   --> $DIR/E0204.rs:7:10\n@@ -19,13 +19,13 @@ LL |     ty: &'a mut bool,\n    = note: this error originates in the derive macro `Copy` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/E0204.rs:17:6\n+  --> $DIR/E0204.rs:17:15\n    |\n LL |     Bar { x: Vec<u32> },\n    |           ----------- this field does not implement `Copy`\n ...\n LL | impl Copy for EFoo { }\n-   |      ^^^^\n+   |               ^^^^\n \n error[E0204]: the trait `Copy` may not be implemented for this type\n   --> $DIR/E0204.rs:19:10"}, {"sha": "9e6f0d9ebbd27fdfdeabd7693844e0dba0913f24", "filename": "src/test/ui/suggestions/missing-bound-in-manual-copy-impl-2.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl-2.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,11 +1,11 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/missing-bound-in-manual-copy-impl-2.rs:16:9\n+  --> $DIR/missing-bound-in-manual-copy-impl-2.rs:16:18\n    |\n LL | struct Wrapper<T>(T);\n    |                   - this field does not implement `Copy`\n ...\n LL | impl<S> Copy for Wrapper<OnlyCopyIfDisplay<S>> {}\n-   |         ^^^^\n+   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: the `Copy` impl for `OnlyCopyIfDisplay<S>` requires that `S: std::fmt::Display`\n   --> $DIR/missing-bound-in-manual-copy-impl-2.rs:4:19"}, {"sha": "fe2d133c8aa74910c310cd9a595b8666bf3745b5", "filename": "src/test/ui/suggestions/missing-bound-in-manual-copy-impl.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmissing-bound-in-manual-copy-impl.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,11 +1,11 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/missing-bound-in-manual-copy-impl.rs:6:9\n+  --> $DIR/missing-bound-in-manual-copy-impl.rs:6:18\n    |\n LL | struct Wrapper<T>(T);\n    |                   - this field does not implement `Copy`\n LL |\n LL | impl<S> Copy for Wrapper<S> {}\n-   |         ^^^^\n+   |                  ^^^^^^^^^^\n    |\n help: consider restricting type parameter `S`\n    |"}, {"sha": "68b95b42b3463f32261aeb309084473118464ed1", "filename": "src/test/ui/traits/copy-impl-cannot-normalize.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Ftraits%2Fcopy-impl-cannot-normalize.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Ftraits%2Fcopy-impl-cannot-normalize.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftraits%2Fcopy-impl-cannot-normalize.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,8 +1,8 @@\n error[E0277]: the trait bound `T: TraitFoo` is not satisfied\n-  --> $DIR/copy-impl-cannot-normalize.rs:22:1\n+  --> $DIR/copy-impl-cannot-normalize.rs:22:18\n    |\n LL | impl<T> Copy for Foo<T> {}\n-   | ^^^^^^^^^^^^^^^^^^^^^^^ the trait `TraitFoo` is not implemented for `T`\n+   |                  ^^^^^^ the trait `TraitFoo` is not implemented for `T`\n    |\n help: consider restricting type parameter `T`\n    |"}, {"sha": "53ee4dd2e5bdbab1fb15ebc3c13887c00cc2ca58", "filename": "src/test/ui/union/union-copy.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Funion%2Funion-copy.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4d4a3691e94588dc1539487cb62fe7a7cbe40bcb/src%2Ftest%2Fui%2Funion%2Funion-copy.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funion%2Funion-copy.stderr?ref=4d4a3691e94588dc1539487cb62fe7a7cbe40bcb", "patch": "@@ -1,11 +1,11 @@\n error[E0204]: the trait `Copy` may not be implemented for this type\n-  --> $DIR/union-copy.rs:12:6\n+  --> $DIR/union-copy.rs:12:15\n    |\n LL |     a: std::mem::ManuallyDrop<String>\n    |     --------------------------------- this field does not implement `Copy`\n ...\n LL | impl Copy for W {}\n-   |      ^^^^\n+   |               ^\n    |\n note: the `Copy` impl for `ManuallyDrop<String>` requires that `String: Copy`\n   --> $DIR/union-copy.rs:8:8"}]}