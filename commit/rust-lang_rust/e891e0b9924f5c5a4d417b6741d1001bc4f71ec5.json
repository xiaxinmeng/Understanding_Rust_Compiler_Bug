{"sha": "e891e0b9924f5c5a4d417b6741d1001bc4f71ec5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU4OTFlMGI5OTI0ZjVjNWE0ZDQxN2I2NzQxZDEwMDFiYzRmNzFlYzU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-22T05:26:53Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-07-22T17:18:28Z"}, "message": "Print a list of test failures in the test summary. Issue #428", "tree": {"sha": "d9c0d9e8034f1d79a088fbead3fbb3b0a3d0b839", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d9c0d9e8034f1d79a088fbead3fbb3b0a3d0b839"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5", "html_url": "https://github.com/rust-lang/rust/commit/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9b674abe70dd6f666ac3318e26d28c8f61b8e40", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9b674abe70dd6f666ac3318e26d28c8f61b8e40", "html_url": "https://github.com/rust-lang/rust/commit/b9b674abe70dd6f666ac3318e26d28c8f61b8e40"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "678c7ae07d90a9114d290dcd6f87c3ce5e90958a", "filename": "src/lib/test.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5/src%2Flib%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e891e0b9924f5c5a4d417b6741d1001bc4f71ec5/src%2Flib%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftest.rs?ref=e891e0b9924f5c5a4d417b6741d1001bc4f71ec5", "patch": "@@ -107,6 +107,8 @@ fn run_tests(&test_opts opts, &test_desc[] tests) -> bool {\n     auto failed = 0u;\n     auto ignored = 0u;\n \n+    auto failures = ~[];\n+\n     for (test_desc test in filtered_tests) {\n         out.write_str(#fmt(\"running %s ... \", test.name));\n         alt (run_test(test)) {\n@@ -119,6 +121,7 @@ fn run_tests(&test_opts opts, &test_desc[] tests) -> bool {\n                 failed += 1u;\n                 write_failed(out);\n                 out.write_line(\"\");\n+                failures += ~[test];\n             }\n             tr_ignored {\n                 ignored += 1u;\n@@ -131,6 +134,13 @@ fn run_tests(&test_opts opts, &test_desc[] tests) -> bool {\n     assert passed + failed + ignored == total;\n     auto success = failed == 0u;\n \n+    if (!success) {\n+        out.write_line(\"\\nfailures:\");\n+        for (test_desc test in failures) {\n+            out.write_line(#fmt(\"    %s\", test.name));\n+        }\n+    }\n+\n     out.write_str(#fmt(\"\\nresult: \"));\n     if (success) {\n         write_ok(out);"}]}