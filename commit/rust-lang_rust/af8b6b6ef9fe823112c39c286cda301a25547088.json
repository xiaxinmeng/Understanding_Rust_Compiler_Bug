{"sha": "af8b6b6ef9fe823112c39c286cda301a25547088", "node_id": "C_kwDOAAsO6NoAKGFmOGI2YjZlZjlmZTgyMzExMmMzOWMyODZjZGEzMDFhMjU1NDcwODg", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-04-04T08:33:21Z"}, "committer": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-04-04T08:33:21Z"}, "message": "add compat note about instant changes", "tree": {"sha": "1ebdbd041aa9d3d91853914e6825bf8a53e24bf1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1ebdbd041aa9d3d91853914e6825bf8a53e24bf1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af8b6b6ef9fe823112c39c286cda301a25547088", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEMycKYjxLY0eb13b7zXazX3c0dp4FAmJKrVcACgkQzXazX3c0\ndp6aYw/5AQ5wV9UsJ3h+SIFWfhWk99MF+0M7MNn5Z/eUV/LZF6vLivu0MV5X7/5c\nKoei/8reUDT30sKPFftmgqqSFia2Xvmywb5GfVL5Eb/Xshzn9z2c1q6++2AIxOON\n0hZ52AYpvlsMUYKvhixwX6XUhSzNXhkS4oN+PSbJUfFzkU3FVSKrARog3MOlxaWy\n+z/x0YTue2Oa/vYiZBTezJFoCVu1jlCrT7WAswee3JDrSvfrPhs8GPGDkVvEhHmY\n7Mv8Kdo8zlepafNgdXqVrETt1nL20Zpuh+nBZNTYdM0S0oj5ZQeuaDo36DvjTWAf\nAMLuv/9ocejHbYwfJLTbmRDnXFMN1G9PuLVeasb2WjfGjjkcjO6V6VsyMHLrywtC\nh3lIc3qNMt6Wr9wfYm9iWfH2e5cUChBDFhLfnyR+oy0dvWQbxXr3q4tR/2vqC6jU\nSMeZ9BlR/5na302k0fOecdktWq4tcNWaJTIC0FUzw/F6fSBsruokBColpJqSYVtg\nEf6CWsuiRcrlWKhRiN4M5o16MNLocmrdGAgrfKP1DrSGb3mixmkl/awFa+TPhtAA\nqpVdJAp5gKY/uSE7p9S88exv2PTHOIu68+dYGx27ggOGaUiBn4+lmhGbolx2HLta\nJNr71VRkjPkYDvFWRNABBOPFGGRP71x/eOG88bKFVn0Jk62V7yM=\n=bkO/\n-----END PGP SIGNATURE-----", "payload": "tree 1ebdbd041aa9d3d91853914e6825bf8a53e24bf1\nparent 9c0de7bb995a4e1067f5bf07e541337cb713172a\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1649061201 +0200\ncommitter Pietro Albini <pietro.albini@ferrous-systems.com> 1649061201 +0200\n\nadd compat note about instant changes\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af8b6b6ef9fe823112c39c286cda301a25547088", "html_url": "https://github.com/rust-lang/rust/commit/af8b6b6ef9fe823112c39c286cda301a25547088", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af8b6b6ef9fe823112c39c286cda301a25547088/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c0de7bb995a4e1067f5bf07e541337cb713172a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c0de7bb995a4e1067f5bf07e541337cb713172a", "html_url": "https://github.com/rust-lang/rust/commit/9c0de7bb995a4e1067f5bf07e541337cb713172a"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "e8fa3afe8b342bf47b0b5b81b3128467e8f49082", "filename": "RELEASES.md", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/af8b6b6ef9fe823112c39c286cda301a25547088/RELEASES.md", "raw_url": "https://github.com/rust-lang/rust/raw/af8b6b6ef9fe823112c39c286cda301a25547088/RELEASES.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/RELEASES.md?ref=af8b6b6ef9fe823112c39c286cda301a25547088", "patch": "@@ -27,7 +27,8 @@ Libraries\n ---------\n - [Guarantee call order for `sort_by_cached_key`][89621]\n - [Improve `Duration::try_from_secs_f32`/`f64` accuracy by directly processing exponent and mantissa][90247]\n-- [Make `Instant::{duration_since, elapsed, sub}` saturating and remove workarounds][89926]\n+- [Make `Instant::{duration_since, elapsed, sub}` saturating][89926]\n+- [Remove non-monotonic clocks workarounds in `Instant::now`][89926]\n - [Change PhantomData type for `BuildHasherDefault` (and more)][92630]\n \n Stabilized APIs\n@@ -75,6 +76,14 @@ Misc\n Compatibility Notes\n -------------------\n - [Remove compiler-rt linking hack on Android][83822]\n+- [Mitigations for platforms with non-monotonic clocks have been removed from\n+  `Instant::now`][89926]. On platforms that don't provide monotonic clocks, an\n+  instant is not guaranteed to be greater than an earlier instant anymore.\n+- [`Instant::{duration_since, elapsed, sub}` do not panic anymore on underflow,\n+  saturating to `0` instead][89926]. In the real world the panic happened mostly\n+  on platforms with buggy monotonic clock implementations rather than catching\n+  programming errors like reversing the start and end times. Such programming\n+  errors will now results in `0` rather than a panic.\n - In a future release we're planning to increase the baseline requirements for\n   the Linux kernel to version 3.2, and for glibc to version 2.17. We'd love\n   your feedback in [PR #95026][95026]."}]}