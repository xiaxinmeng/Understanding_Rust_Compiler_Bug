{"sha": "a82caff588f602b171471661f983ee550d4494d6", "node_id": "C_kwDOAAsO6NoAKGE4MmNhZmY1ODhmNjAyYjE3MTQ3MTY2MWY5ODNlZTU1MGQ0NDk0ZDY", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-03-19T19:26:34Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-19T19:26:34Z"}, "message": "Merge #11765\n\n11765: fix: Fix closure hints using macro ranges r=Veykril a=Veykril\n\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>", "tree": {"sha": "8fb194e885a3ece7de2e350246940e69342e3cb9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8fb194e885a3ece7de2e350246940e69342e3cb9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a82caff588f602b171471661f983ee550d4494d6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiNi5qCRBK7hj4Ov3rIwAA8gAIACsujCO+JgY65ID/IuGqgK/S\niuhOZpjksj7bvF6HKsyquS4Hz+WCqi6+Lr6I0324b/lMhQGYRx5+PJGSOUhtaQm5\nQ++JtV4LqfiXWUSavbfKdEYO9bFiipen3HYM2AzxMJT7W1mO8mB2hKWIJKpt08Bb\nBoddjr7LCTx4xh9IQXbqjHoBPgura1eoblJGp8lv4Fncnwh/hj1Fg7WhCQXTMJCr\nlOfo4LpfnRlvlnihju48LvrWTRCFtClPGcW605UjNOhOJN946eY5YtMjTEzX2iMc\npt2m6IM0G1oSgjOnzKcTGOGT4NQQQXzzXuWfSNzpSLkIdgkChsz8T9FehzALlBE=\n=iZfP\n-----END PGP SIGNATURE-----\n", "payload": "tree 8fb194e885a3ece7de2e350246940e69342e3cb9\nparent 7315d973478560f6be3ff3d6fceadabc900d9ffa\nparent 2598575a35266d8ece1f4e4ecef996622eaef42a\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1647717994 +0000\ncommitter GitHub <noreply@github.com> 1647717994 +0000\n\nMerge #11765\n\n11765: fix: Fix closure hints using macro ranges r=Veykril a=Veykril\n\nbors r+\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a82caff588f602b171471661f983ee550d4494d6", "html_url": "https://github.com/rust-lang/rust/commit/a82caff588f602b171471661f983ee550d4494d6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a82caff588f602b171471661f983ee550d4494d6/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7315d973478560f6be3ff3d6fceadabc900d9ffa", "url": "https://api.github.com/repos/rust-lang/rust/commits/7315d973478560f6be3ff3d6fceadabc900d9ffa", "html_url": "https://github.com/rust-lang/rust/commit/7315d973478560f6be3ff3d6fceadabc900d9ffa"}, {"sha": "2598575a35266d8ece1f4e4ecef996622eaef42a", "url": "https://api.github.com/repos/rust-lang/rust/commits/2598575a35266d8ece1f4e4ecef996622eaef42a", "html_url": "https://github.com/rust-lang/rust/commit/2598575a35266d8ece1f4e4ecef996622eaef42a"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "565bee88f3f25f7acbdfb492b3cbe6cf6be98c55", "filename": "crates/ide/src/inlay_hints.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a82caff588f602b171471661f983ee550d4494d6/crates%2Fide%2Fsrc%2Finlay_hints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a82caff588f602b171471661f983ee550d4494d6/crates%2Fide%2Fsrc%2Finlay_hints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Finlay_hints.rs?ref=a82caff588f602b171471661f983ee550d4494d6", "patch": "@@ -344,12 +344,12 @@ fn closure_ret_hints(\n         return None;\n     }\n \n-    let closure = sema.descend_node_into_attributes(closure.clone()).pop()?;\n-\n     let param_list = match closure.body() {\n         Some(ast::Expr::BlockExpr(_)) => closure.param_list()?,\n         _ => return None,\n     };\n+\n+    let closure = sema.descend_node_into_attributes(closure.clone()).pop()?;\n     let ty = sema.type_of_expr(&ast::Expr::ClosureExpr(closure))?.adjusted();\n     let callable = ty.as_callable(sema.db)?;\n     let ty = callable.return_type();"}]}