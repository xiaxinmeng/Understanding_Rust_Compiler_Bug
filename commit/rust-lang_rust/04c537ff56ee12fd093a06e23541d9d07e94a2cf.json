{"sha": "04c537ff56ee12fd093a06e23541d9d07e94a2cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0YzUzN2ZmNTZlZTEyZmQwOTNhMDZlMjM1NDFkOWQwN2U5NGEyY2Y=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-09-17T15:49:21Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-09-17T15:49:21Z"}, "message": "rollup merge of #17285 : brson/relchan", "tree": {"sha": "d6ae33dd19a7c500d66ff108664214ec223f456e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d6ae33dd19a7c500d66ff108664214ec223f456e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04c537ff56ee12fd093a06e23541d9d07e94a2cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04c537ff56ee12fd093a06e23541d9d07e94a2cf", "html_url": "https://github.com/rust-lang/rust/commit/04c537ff56ee12fd093a06e23541d9d07e94a2cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04c537ff56ee12fd093a06e23541d9d07e94a2cf/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f575d1b9c1c533ae7e083185239af92619cf68b", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f575d1b9c1c533ae7e083185239af92619cf68b", "html_url": "https://github.com/rust-lang/rust/commit/6f575d1b9c1c533ae7e083185239af92619cf68b"}, {"sha": "a3c27ea3c658cf0e6d4c630c35756add8fda82a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3c27ea3c658cf0e6d4c630c35756add8fda82a7", "html_url": "https://github.com/rust-lang/rust/commit/a3c27ea3c658cf0e6d4c630c35756add8fda82a7"}], "stats": {"total": 57, "additions": 43, "deletions": 14}, "files": [{"sha": "9aa23e732abfe913a501aefe6fd5632d00c968eb", "filename": "configure", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/04c537ff56ee12fd093a06e23541d9d07e94a2cf/configure", "raw_url": "https://github.com/rust-lang/rust/raw/04c537ff56ee12fd093a06e23541d9d07e94a2cf/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=04c537ff56ee12fd093a06e23541d9d07e94a2cf", "patch": "@@ -453,6 +453,8 @@ valopt datadir \"${CFG_PREFIX}/share\" \"install data\"\n valopt infodir \"${CFG_PREFIX}/share/info\" \"install additional info\"\n valopt mandir \"${CFG_PREFIX}/share/man\" \"install man pages in PATH\"\n \n+valopt release-channel \"source\" \"the name of the release channel to build\"\n+\n # On windows we just store the libraries in the bin directory because\n # there's no rpath. This is where the build system itself puts libraries;\n # --libdir is used to configure the installation directory.\n@@ -481,6 +483,23 @@ CFG_BUILD=`echo \"${CFG_BUILD}\" | sed 's/-pc-mingw32/-w64-mingw32/g'`\n CFG_HOST=`echo \"${CFG_HOST}\" | sed 's/-pc-mingw32/-w64-mingw32/g'`\n CFG_TARGET=`echo \"${CFG_TARGET}\" | sed 's/-pc-mingw32/-w64-mingw32/g'`\n \n+# Validate the release channel\n+case \"$CFG_RELEASE_CHANNEL\" in\n+    (source | nightly | beta | stable)\n+\t;;\n+    (*)\n+        err \"release channel must be 'source', 'nightly', 'beta' or 'stable'\"\n+        ;;\n+esac\n+\n+# Continue supporting the old --enable-nightly flag to transition the bots\n+# XXX Remove me\n+if [ $CFG_ENABLE_NIGHTLY -eq 1 ]\n+then\n+    CFG_RELEASE_CHANNEL=nightly\n+    putvar CFG_RELEASE_CHANNEL\n+fi\n+\n step_msg \"looking for build programs\"\n \n probe_need CFG_PERL        perl"}, {"sha": "6b7243541c41afb0f10f129b2367ba6dbf84ae35", "filename": "man/rustc.1", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/04c537ff56ee12fd093a06e23541d9d07e94a2cf/man%2Frustc.1", "raw_url": "https://github.com/rust-lang/rust/raw/04c537ff56ee12fd093a06e23541d9d07e94a2cf/man%2Frustc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustc.1?ref=04c537ff56ee12fd093a06e23541d9d07e94a2cf", "patch": "@@ -1,4 +1,4 @@\n-.TH RUSTC \"1\" \"March 2014\" \"rustc 0.12.0-pre\" \"User Commands\"\n+.TH RUSTC \"1\" \"March 2014\" \"rustc 0.12.0\" \"User Commands\"\n .SH NAME\n rustc \\- The Rust compiler\n .SH SYNOPSIS"}, {"sha": "e675aca38aa9882993aeae8431fa85861f41882c", "filename": "man/rustdoc.1", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/04c537ff56ee12fd093a06e23541d9d07e94a2cf/man%2Frustdoc.1", "raw_url": "https://github.com/rust-lang/rust/raw/04c537ff56ee12fd093a06e23541d9d07e94a2cf/man%2Frustdoc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustdoc.1?ref=04c537ff56ee12fd093a06e23541d9d07e94a2cf", "patch": "@@ -1,4 +1,4 @@\n-.TH RUSTDOC \"1\" \"March 2014\" \"rustdoc 0.12.0-pre\" \"User Commands\"\n+.TH RUSTDOC \"1\" \"March 2014\" \"rustdoc 0.12.0\" \"User Commands\"\n .SH NAME\n rustdoc \\- generate documentation from Rust source code\n .SH SYNOPSIS"}, {"sha": "6667a29d4f956fd661da5e2b4a284b54fed83e33", "filename": "mk/main.mk", "status": "modified", "additions": 21, "deletions": 11, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/04c537ff56ee12fd093a06e23541d9d07e94a2cf/mk%2Fmain.mk", "raw_url": "https://github.com/rust-lang/rust/raw/04c537ff56ee12fd093a06e23541d9d07e94a2cf/mk%2Fmain.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fmain.mk?ref=04c537ff56ee12fd093a06e23541d9d07e94a2cf", "patch": "@@ -14,22 +14,32 @@\n \n # The version number\n CFG_RELEASE_NUM=0.12.0\n-CFG_RELEASE_LABEL=-pre\n \n CFG_FILENAME_EXTRA=4e7c5e5c\n \n-ifndef CFG_ENABLE_NIGHTLY\n-# This is the normal version string\n-CFG_RELEASE=$(CFG_RELEASE_NUM)$(CFG_RELEASE_LABEL)\n-CFG_PACKAGE_VERS=$(CFG_RELEASE)\n-else\n-# Modify the version label for nightly builds\n-CFG_RELEASE=$(CFG_RELEASE_NUM)$(CFG_RELEASE_LABEL)-nightly\n-# When building nightly distributables just reuse the same \"rust-nightly\" name\n-# so when we upload we'll always override the previous nighly. This doesn't actually\n-# impact the version reported by rustc - it's just for file naming.\n+ifeq ($(CFG_RELEASE_CHANNEL),stable)\n+# This is the normal semver version string, e.g. \"0.12.0\", \"0.12.0-nightly\"\n+CFG_RELEASE=$(CFG_RELEASE_NUM)\n+# This is the string used in dist artifact file names, e.g. \"0.12.0\", \"nightly\"\n+CFG_PACKAGE_VERS=$(CFG_RELEASE_NUM)\n+endif\n+ifeq ($(CFG_RELEASE_CHANNEL),beta)\n+CFG_RELEASE=$(CFG_RELEASE_NUM)-beta\n+# When building beta/nightly distributables just reuse the same \"beta\"\n+# name so when we upload we'll always override the previous\n+# nighly. This doesn't actually impact the version reported by rustc -\n+# it's just for file naming.\n+CFG_PACKAGE_VERS=beta\n+endif\n+ifeq ($(CFG_RELEASE_CHANNEL),nightly)\n+CFG_RELEASE=$(CFG_RELEASE_NUM)-nightly\n CFG_PACKAGE_VERS=nightly\n endif\n+ifeq ($(CFG_RELEASE_CHANNEL),source)\n+CFG_RELEASE=$(CFG_RELEASE_NUM)-pre\n+CFG_PACKAGE_VERS=$(CFG_RELEASE_NUM)-pre\n+endif\n+\n # The name of the package to use for creating tarballs, installers etc.\n CFG_PACKAGE_NAME=rust-$(CFG_PACKAGE_VERS)\n "}, {"sha": "2b80c0ff39f5a43b6c24415689f436b56c5964cb", "filename": "src/etc/kate/rust.xml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/04c537ff56ee12fd093a06e23541d9d07e94a2cf/src%2Fetc%2Fkate%2Frust.xml", "raw_url": "https://github.com/rust-lang/rust/raw/04c537ff56ee12fd093a06e23541d9d07e94a2cf/src%2Fetc%2Fkate%2Frust.xml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fkate%2Frust.xml?ref=04c537ff56ee12fd093a06e23541d9d07e94a2cf", "patch": "@@ -7,7 +7,7 @@\n \t<!ENTITY rustIdent \"[a-zA-Z_][a-zA-Z_0-9]*\">\n \t<!ENTITY rustIntSuf \"([iu](8|16|32|64)?)?\">\n ]>\n-<language name=\"Rust\" version=\"0.12.0-pre\" kateversion=\"2.4\" section=\"Sources\" extensions=\"*.rs\" mimetype=\"text/x-rust\" priority=\"15\">\n+<language name=\"Rust\" version=\"0.12.0\" kateversion=\"2.4\" section=\"Sources\" extensions=\"*.rs\" mimetype=\"text/x-rust\" priority=\"15\">\n <highlighting>\n \t<list name=\"fn\">\n \t\t<item> fn </item>"}]}