{"sha": "6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmZTZhNmY5ZGZmZmUwZGUwOGZlZmI3ODc4N2MxNzhlMmY4OWE4YTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-25T19:56:40Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-25T19:56:40Z"}, "message": "auto merge of #10657 : sanxiyn/rust/pat, r=cmr", "tree": {"sha": "00356ef83a9644f0d2fd2eb782b95d706e2f5c70", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/00356ef83a9644f0d2fd2eb782b95d706e2f5c70"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "html_url": "https://github.com/rust-lang/rust/commit/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "679a2c042fb2541f55f1192ca97672907b258337", "url": "https://api.github.com/repos/rust-lang/rust/commits/679a2c042fb2541f55f1192ca97672907b258337", "html_url": "https://github.com/rust-lang/rust/commit/679a2c042fb2541f55f1192ca97672907b258337"}, {"sha": "9028330f39d28a8719b0b63dc5edcc1a70a69f02", "url": "https://api.github.com/repos/rust-lang/rust/commits/9028330f39d28a8719b0b63dc5edcc1a70a69f02", "html_url": "https://github.com/rust-lang/rust/commit/9028330f39d28a8719b0b63dc5edcc1a70a69f02"}], "stats": {"total": 75, "additions": 26, "deletions": 49}, "files": [{"sha": "781aaa5c6163b8d6f9cfe0f417cb5fc3354ebdc3", "filename": "src/librustc/middle/borrowck/check_loans.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fcheck_loans.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -51,7 +51,7 @@ impl<'self> Visitor<()> for CheckLoanCtxt<'self> {\n     fn visit_block(&mut self, b:&ast::Block, _:()) {\n         check_loans_in_block(self, b);\n     }\n-    fn visit_pat(&mut self, p:@ast::Pat, _:()) {\n+    fn visit_pat(&mut self, p:&ast::Pat, _:()) {\n         check_loans_in_pat(self, p);\n     }\n     fn visit_fn(&mut self, fk:&visit::fn_kind, fd:&ast::fn_decl,\n@@ -847,7 +847,7 @@ fn check_loans_in_expr<'a>(this: &mut CheckLoanCtxt<'a>,\n }\n \n fn check_loans_in_pat<'a>(this: &mut CheckLoanCtxt<'a>,\n-                          pat: @ast::Pat)\n+                          pat: &ast::Pat)\n {\n     this.check_for_conflicting_loans(pat.id);\n     this.check_move_out_from_id(pat.id, pat.span);"}, {"sha": "239890415329f7b0d6ea49e320b6028d4db08d48", "filename": "src/librustc/middle/borrowck/gather_loans/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -87,7 +87,7 @@ impl<'self> visit::Visitor<()> for GatherLoanCtxt<'self> {\n     fn visit_stmt(&mut self, s:@Stmt, _:()) {\n         add_stmt_to_map(self, s);\n     }\n-    fn visit_pat(&mut self, p:@Pat, _:()) {\n+    fn visit_pat(&mut self, p:&Pat, _:()) {\n         add_pat_to_id_range(self, p);\n     }\n     fn visit_local(&mut self, l:@Local, _:()) {\n@@ -119,7 +119,7 @@ pub fn gather_loans(bccx: &BorrowckCtxt,\n }\n \n fn add_pat_to_id_range(this: &mut GatherLoanCtxt,\n-                       p: @ast::Pat) {\n+                       p: &ast::Pat) {\n     // NB: This visitor function just adds the pat ids into the id\n     // range. We gather loans that occur in patterns using the\n     // `gather_pat()` method below. Eventually these two should be"}, {"sha": "3048bfb1d2caabe268be364b35d72978983b1eee", "filename": "src/librustc/middle/check_const.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcheck_const.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -33,7 +33,7 @@ impl Visitor<bool> for CheckCrateVisitor {\n     fn visit_item(&mut self, i:@item, env:bool) {\n         check_item(self, self.sess, self.ast_map, self.def_map, i, env);\n     }\n-    fn visit_pat(&mut self, p:@Pat, env:bool) {\n+    fn visit_pat(&mut self, p:&Pat, env:bool) {\n         check_pat(self, p, env);\n     }\n     fn visit_expr(&mut self, ex:@Expr, env:bool) {\n@@ -81,7 +81,7 @@ pub fn check_item(v: &mut CheckCrateVisitor,\n     }\n }\n \n-pub fn check_pat(v: &mut CheckCrateVisitor, p: @Pat, _is_const: bool) {\n+pub fn check_pat(v: &mut CheckCrateVisitor, p: &Pat, _is_const: bool) {\n     fn is_str(e: @Expr) -> bool {\n         match e.node {\n             ExprVstore("}, {"sha": "473b7025cbf95a91506b0264972ae01ad8c15e00", "filename": "src/librustc/middle/lint.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Flint.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -900,7 +900,7 @@ fn check_unsafe_block(cx: &Context, e: &ast::Expr) {\n     }\n }\n \n-fn check_unused_mut_pat(cx: &Context, p: @ast::Pat) {\n+fn check_unused_mut_pat(cx: &Context, p: &ast::Pat) {\n     match p.node {\n         ast::PatIdent(ast::BindByValue(ast::MutMutable),\n                       ref path, _) if pat_util::pat_is_binding(cx.tcx.def_map, p)=> {\n@@ -1119,7 +1119,7 @@ impl<'self> Visitor<()> for Context<'self> {\n         }\n     }\n \n-    fn visit_pat(&mut self, p: @ast::Pat, _: ()) {\n+    fn visit_pat(&mut self, p: &ast::Pat, _: ()) {\n         check_pat_non_uppercase_statics(self, p);\n         check_unused_mut_pat(self, p);\n "}, {"sha": "9e84b32ae8ffb591c0e342f9c7fddd7690738a04", "filename": "src/librustc/middle/moves.rs", "status": "modified", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fmoves.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fmoves.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmoves.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -459,8 +459,6 @@ impl VisitContext {\n             }\n \n             ExprMatch(discr, ref arms) => {\n-                // We must do this first so that `arms_have_by_move_bindings`\n-                // below knows which bindings are moves.\n                 for arm in arms.iter() {\n                     self.consume_arm(arm);\n                 }\n@@ -657,27 +655,6 @@ impl VisitContext {\n         self.consume_expr(arg_expr)\n     }\n \n-    pub fn arms_have_by_move_bindings(&mut self,\n-                                      moves_map: MovesMap,\n-                                      arms: &[Arm])\n-                                      -> Option<@Pat> {\n-        let mut ret = None;\n-        for arm in arms.iter() {\n-            for &pat in arm.pats.iter() {\n-                let cont = do ast_util::walk_pat(pat) |p| {\n-                    if moves_map.contains(&p.id) {\n-                        ret = Some(p);\n-                        false\n-                    } else {\n-                        true\n-                    }\n-                };\n-                if !cont { return ret }\n-            }\n-        }\n-        ret\n-    }\n-\n     pub fn compute_captures(&mut self, fn_expr_id: NodeId) -> @[CaptureVar] {\n         debug!(\"compute_capture_vars(fn_expr_id={:?})\", fn_expr_id);\n         let _indenter = indenter();"}, {"sha": "0f3d54e295f3e997497ed4c24b14acb820c050bf", "filename": "src/librustc/middle/pat_util.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fpat_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fpat_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fpat_util.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -20,7 +20,7 @@ pub type PatIdMap = HashMap<Ident, NodeId>;\n \n // This is used because same-named variables in alternative patterns need to\n // use the NodeId of their namesake in the first pattern.\n-pub fn pat_id_map(dm: resolve::DefMap, pat: @Pat) -> PatIdMap {\n+pub fn pat_id_map(dm: resolve::DefMap, pat: &Pat) -> PatIdMap {\n     let mut map = HashMap::new();\n     do pat_bindings(dm, pat) |_bm, p_id, _s, n| {\n       map.insert(path_to_ident(n), p_id);\n@@ -52,7 +52,7 @@ pub fn pat_is_const(dm: resolve::DefMap, pat: &Pat) -> bool {\n     }\n }\n \n-pub fn pat_is_binding(dm: resolve::DefMap, pat: @Pat) -> bool {\n+pub fn pat_is_binding(dm: resolve::DefMap, pat: &Pat) -> bool {\n     match pat.node {\n         PatIdent(*) => {\n             !pat_is_variant_or_struct(dm, pat) &&\n@@ -62,7 +62,7 @@ pub fn pat_is_binding(dm: resolve::DefMap, pat: @Pat) -> bool {\n     }\n }\n \n-pub fn pat_is_binding_or_wild(dm: resolve::DefMap, pat: @Pat) -> bool {\n+pub fn pat_is_binding_or_wild(dm: resolve::DefMap, pat: &Pat) -> bool {\n     match pat.node {\n         PatIdent(*) => pat_is_binding(dm, pat),\n         PatWild | PatWildMulti => true,\n@@ -73,7 +73,7 @@ pub fn pat_is_binding_or_wild(dm: resolve::DefMap, pat: @Pat) -> bool {\n /// Call `it` on every \"binding\" in a pattern, e.g., on `a` in\n /// `match foo() { Some(a) => (), None => () }`\n pub fn pat_bindings(dm: resolve::DefMap,\n-                    pat: @Pat,\n+                    pat: &Pat,\n                     it: |BindingMode, NodeId, Span, &Path|) {\n     do walk_pat(pat) |p| {\n         match p.node {\n@@ -86,15 +86,15 @@ pub fn pat_bindings(dm: resolve::DefMap,\n     };\n }\n \n-pub fn pat_binding_ids(dm: resolve::DefMap, pat: @Pat) -> ~[NodeId] {\n+pub fn pat_binding_ids(dm: resolve::DefMap, pat: &Pat) -> ~[NodeId] {\n     let mut found = ~[];\n     pat_bindings(dm, pat, |_bm, b_id, _sp, _pt| found.push(b_id) );\n     return found;\n }\n \n /// Checks if the pattern contains any patterns that bind something to\n /// an ident, e.g. `foo`, or `Foo(foo)` or `foo @ Bar(*)`.\n-pub fn pat_contains_bindings(dm: resolve::DefMap, pat: @Pat) -> bool {\n+pub fn pat_contains_bindings(dm: resolve::DefMap, pat: &Pat) -> bool {\n     let mut contains_bindings = false;\n     do walk_pat(pat) |p| {\n         if pat_is_binding(dm, p) {"}, {"sha": "90bbbaeaf6f748d7620c34fa498cb3b63ed9d48f", "filename": "src/librustc/middle/privacy.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fprivacy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fprivacy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fprivacy.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -739,7 +739,7 @@ impl<'self> Visitor<()> for PrivacyVisitor<'self> {\n         }\n     }\n \n-    fn visit_pat(&mut self, pattern: @ast::Pat, _: ()) {\n+    fn visit_pat(&mut self, pattern: &ast::Pat, _: ()) {\n         match pattern.node {\n             ast::PatStruct(_, ref fields, _) => {\n                 match ty::get(ty::pat_ty(self.tcx, pattern)).sty {"}, {"sha": "b0568834ed4b68decbd46dc7d6b7189d07810969", "filename": "src/librustc/middle/region.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fregion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Fregion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fregion.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -340,7 +340,7 @@ fn resolve_arm(visitor: &mut RegionResolutionVisitor,\n }\n \n fn resolve_pat(visitor: &mut RegionResolutionVisitor,\n-               pat: @ast::Pat,\n+               pat: &ast::Pat,\n                cx: Context) {\n     assert_eq!(cx.var_parent, cx.parent);\n     parent_to_expr(visitor, cx, pat.id, pat.span);\n@@ -480,7 +480,7 @@ impl Visitor<Context> for RegionResolutionVisitor {\n     fn visit_arm(&mut self, a:&Arm, cx:Context) {\n         resolve_arm(self, a, cx);\n     }\n-    fn visit_pat(&mut self, p:@Pat, cx:Context) {\n+    fn visit_pat(&mut self, p:&Pat, cx:Context) {\n         resolve_pat(self, p, cx);\n     }\n     fn visit_stmt(&mut self, s:@Stmt, cx:Context) {"}, {"sha": "4da4de7b7577d0799b74079dec31d5ca08ea5739", "filename": "src/librustc/middle/typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fmod.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -375,7 +375,7 @@ impl Visitor<()> for GatherLocalsVisitor {\n \n     }\n         // Add pattern bindings.\n-    fn visit_pat(&mut self, p:@ast::Pat, _:()) {\n+    fn visit_pat(&mut self, p:&ast::Pat, _:()) {\n             match p.node {\n               ast::PatIdent(_, ref path, _)\n                   if pat_util::pat_is_binding(self.fcx.ccx.tcx.def_map, p) => {"}, {"sha": "93438cacdd602f9a6255a1134dad6e330e248a23", "filename": "src/librustc/middle/typeck/check/writeback.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Fcheck%2Fwriteback.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -278,7 +278,7 @@ fn visit_block(b: &ast::Block, wbcx: &mut WbCtxt) {\n     visit::walk_block(wbcx, b, ());\n }\n \n-fn visit_pat(p: @ast::Pat, wbcx: &mut WbCtxt) {\n+fn visit_pat(p: &ast::Pat, wbcx: &mut WbCtxt) {\n     if !wbcx.success {\n         return;\n     }\n@@ -323,7 +323,7 @@ impl Visitor<()> for WbCtxt {\n     fn visit_stmt(&mut self, s:@ast::Stmt, _:()) { visit_stmt(s, self); }\n     fn visit_expr(&mut self, ex:@ast::Expr, _:()) { visit_expr(ex, self); }\n     fn visit_block(&mut self, b:&ast::Block, _:()) { visit_block(b, self); }\n-    fn visit_pat(&mut self, p:@ast::Pat, _:()) { visit_pat(p, self); }\n+    fn visit_pat(&mut self, p:&ast::Pat, _:()) { visit_pat(p, self); }\n     fn visit_local(&mut self, l:@ast::Local, _:()) { visit_local(l, self); }\n }\n "}, {"sha": "f0be7057c70bf5dcc5ccc0f21514a9e816a1ab6e", "filename": "src/libsyntax/ast_map.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fast_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fast_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast_map.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -242,7 +242,7 @@ impl Ctx {\n         visit::walk_block(self, b, ());\n     }\n \n-    fn map_pat(&mut self, pat: @Pat) {\n+    fn map_pat(&mut self, pat: &Pat) {\n         match pat.node {\n             PatIdent(_, ref path, _) => {\n                 // Note: this is at least *potentially* a pattern...\n@@ -345,7 +345,7 @@ impl Visitor<()> for Ctx {\n         self.path.pop();\n     }\n \n-    fn visit_pat(&mut self, pat: @Pat, _: ()) {\n+    fn visit_pat(&mut self, pat: &Pat, _: ()) {\n         self.map_pat(pat);\n         visit::walk_pat(self, pat, ())\n     }"}, {"sha": "16846823e0c6fe29f86c6edebbd28d829aa0d3f5", "filename": "src/libsyntax/ast_util.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fast_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fast_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fast_util.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -497,7 +497,7 @@ impl<'self, O: IdVisitingOperation> Visitor<()> for IdVisitor<'self, O> {\n         visit::walk_stmt(self, statement, env)\n     }\n \n-    fn visit_pat(&mut self, pattern: @Pat, env: ()) {\n+    fn visit_pat(&mut self, pattern: &Pat, env: ()) {\n         self.operation.visit_id(pattern.id);\n         visit::walk_pat(self, pattern, env)\n     }\n@@ -636,7 +636,7 @@ pub fn is_item_impl(item: @ast::item) -> bool {\n     }\n }\n \n-pub fn walk_pat(pat: @Pat, it: |@Pat| -> bool) -> bool {\n+pub fn walk_pat(pat: &Pat, it: |&Pat| -> bool) -> bool {\n     if !it(pat) {\n         return false;\n     }"}, {"sha": "9b6f2a275eebb2ce21f56f9d593bf4bb307c7487", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -612,7 +612,7 @@ struct NewNameFinderContext {\n }\n \n impl Visitor<()> for NewNameFinderContext {\n-    fn visit_pat(&mut self, pattern: @ast::Pat, _: ()) {\n+    fn visit_pat(&mut self, pattern: &ast::Pat, _: ()) {\n         match *pattern {\n             // we found a pat_ident!\n             ast::Pat {"}, {"sha": "4691d8f591247f86c04207c7798f173b6f52004d", "filename": "src/libsyntax/visit.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4/src%2Flibsyntax%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fvisit.rs?ref=6fe6a6f9dfffe0de08fefb78787c178e2f89a8a4", "patch": "@@ -78,7 +78,7 @@ pub trait Visitor<E:Clone> {\n     fn visit_block(&mut self, b:&Block, e:E) { walk_block(self, b, e) }\n     fn visit_stmt(&mut self, s:@Stmt, e:E) { walk_stmt(self, s, e) }\n     fn visit_arm(&mut self, a:&Arm, e:E) { walk_arm(self, a, e) }\n-    fn visit_pat(&mut self, p:@Pat, e:E) { walk_pat(self, p, e) }\n+    fn visit_pat(&mut self, p:&Pat, e:E) { walk_pat(self, p, e) }\n     fn visit_decl(&mut self, d:@Decl, e:E) { walk_decl(self, d, e) }\n     fn visit_expr(&mut self, ex:@Expr, e:E) { walk_expr(self, ex, e) }\n     fn visit_expr_post(&mut self, _ex:@Expr, _e:E) { }"}]}