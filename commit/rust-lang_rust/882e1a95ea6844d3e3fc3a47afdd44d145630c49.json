{"sha": "882e1a95ea6844d3e3fc3a47afdd44d145630c49", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4MmUxYTk1ZWE2ODQ0ZDNlM2ZjM2E0N2FmZGQ0NGQxNDU2MzBjNDk=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-13T08:52:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-13T08:52:31Z"}, "message": "Merge pull request #5738 from matklad/cfg\n\nRename ra_cfg -> cfg", "tree": {"sha": "35a33a55c4715c255914d5104b25f2f21862c49d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/35a33a55c4715c255914d5104b25f2f21862c49d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/882e1a95ea6844d3e3fc3a47afdd44d145630c49", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfNP9PCRBK7hj4Ov3rIwAAdHIIAHVnq8QDIVhgOY3diPUpCG8j\nbAnpTCJuBf1yEvXPpoQ18XD+gjSV1PX2QlaKKZNw+HlsPecHxeOjKgi9ZO6obrp8\nWtO+BDVqgiCs6zGTgkHofGFAComTcXae0LK7s/FxQX+ERdVvBfbI1Wmj57Us29p4\ndQGcted4lxpewCzDUkOo4Khzxv+ImA4LvvgTnIAyIGCJC+kFERC/DwTEBKA1zZb5\nccyv7NAvanMyk/jamuOyGBxhTl13oLOyPKFxCWM2wYY1DjqU+0fCCIiDEZc7l5jm\nM3wtK/sCp2ZaN/4YsmPGf+A29cWST4oyYxG4ja7zIkWnbD2wfdq2TbPNHT2Cp6M=\n=beQJ\n-----END PGP SIGNATURE-----\n", "payload": "tree 35a33a55c4715c255914d5104b25f2f21862c49d\nparent e30be7ad15272746e761a29cb1829defecd231cc\nparent 7d9480c6eb43b3ef1bd75ad26e99c14cca5cb366\nauthor Aleksey Kladov <aleksey.kladov@gmail.com> 1597308751 +0200\ncommitter GitHub <noreply@github.com> 1597308751 +0200\n\nMerge pull request #5738 from matklad/cfg\n\nRename ra_cfg -> cfg\r\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/882e1a95ea6844d3e3fc3a47afdd44d145630c49", "html_url": "https://github.com/rust-lang/rust/commit/882e1a95ea6844d3e3fc3a47afdd44d145630c49", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/882e1a95ea6844d3e3fc3a47afdd44d145630c49/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e30be7ad15272746e761a29cb1829defecd231cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/e30be7ad15272746e761a29cb1829defecd231cc", "html_url": "https://github.com/rust-lang/rust/commit/e30be7ad15272746e761a29cb1829defecd231cc"}, {"sha": "7d9480c6eb43b3ef1bd75ad26e99c14cca5cb366", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d9480c6eb43b3ef1bd75ad26e99c14cca5cb366", "html_url": "https://github.com/rust-lang/rust/commit/7d9480c6eb43b3ef1bd75ad26e99c14cca5cb366"}], "stats": {"total": 252, "additions": 118, "deletions": 134}, "files": [{"sha": "18c979b39e59fd513cf6ba3285542c8629e075bf", "filename": "Cargo.lock", "status": "modified", "additions": 66, "deletions": 83, "changes": 149, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -15,15 +15,6 @@ version = \"0.2.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"ee2a4ec343196209d6594e19543ae87a39f96d5534d7174822a3ad825dd6ed7e\"\n \n-[[package]]\n-name = \"aho-corasick\"\n-version = \"0.7.13\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"043164d8ba5c4c3035fec9bbee8647c0261d788f3474306f93bb65901cae0e86\"\n-dependencies = [\n- \"memchr\",\n-]\n-\n [[package]]\n name = \"ansi_term\"\n version = \"0.12.1\"\n@@ -121,6 +112,16 @@ version = \"1.0.58\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"f9a06fb2e53271d7c279ec1efea6ab691c35a2ae67ec0d91d7acec0caf13b518\"\n \n+[[package]]\n+name = \"cfg\"\n+version = \"0.0.0\"\n+dependencies = [\n+ \"mbe\",\n+ \"rustc-hash\",\n+ \"syntax\",\n+ \"tt\",\n+]\n+\n [[package]]\n name = \"cfg-if\"\n version = \"0.1.10\"\n@@ -289,9 +290,9 @@ checksum = \"9bda8e21c04aca2ae33ffc2fd8c23134f3cac46db123ba97bd9d3f3b8a4a85e1\"\n \n [[package]]\n name = \"either\"\n-version = \"1.5.3\"\n+version = \"1.6.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"bb1f6b1ce1c140482ea30ddd3335fc0024ac7ee112895426e0a629a6c20adfe3\"\n+checksum = \"cd56b59865bce947ac5958779cfa508f6c3b9497cc762b7e24a12d11ccde2c4f\"\n \n [[package]]\n name = \"ena\"\n@@ -551,9 +552,9 @@ checksum = \"e2abad23fbc42b3700f2f279844dc832adb2b2eb069b2df918f455c4e18cc646\"\n \n [[package]]\n name = \"lazycell\"\n-version = \"1.2.1\"\n+version = \"1.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b294d6fa9ee409a054354afc4352b0b9ef7ca222c69b8812cbea9e7d2bf3783f\"\n+checksum = \"830d08ce1d1d941e6b30645f1a0eb5643013d835ce3779a5fc208261dbe10f55\"\n \n [[package]]\n name = \"libc\"\n@@ -645,10 +646,17 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"60302e4db3a61da70c0cb7991976248362f30319e88850c487b9b95bbf059e00\"\n \n [[package]]\n-name = \"memchr\"\n-version = \"2.3.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3728d817d99e5ac407411fa471ff9800a778d88a24685968b36824eaf4bee400\"\n+name = \"mbe\"\n+version = \"0.0.0\"\n+dependencies = [\n+ \"log\",\n+ \"parser\",\n+ \"rustc-hash\",\n+ \"smallvec\",\n+ \"syntax\",\n+ \"test_utils\",\n+ \"tt\",\n+]\n \n [[package]]\n name = \"memmap\"\n@@ -901,6 +909,23 @@ dependencies = [\n  \"unicode-xid\",\n ]\n \n+[[package]]\n+name = \"proc_macro_srv\"\n+version = \"0.0.0\"\n+dependencies = [\n+ \"cargo_metadata\",\n+ \"difference\",\n+ \"goblin\",\n+ \"libloading\",\n+ \"mbe\",\n+ \"memmap\",\n+ \"ra_proc_macro\",\n+ \"serde_derive\",\n+ \"test_utils\",\n+ \"toolchain\",\n+ \"tt\",\n+]\n+\n [[package]]\n name = \"profile\"\n version = \"0.0.0\"\n@@ -940,22 +965,12 @@ dependencies = [\n  \"text_edit\",\n ]\n \n-[[package]]\n-name = \"ra_cfg\"\n-version = \"0.1.0\"\n-dependencies = [\n- \"ra_mbe\",\n- \"rustc-hash\",\n- \"syntax\",\n- \"tt\",\n-]\n-\n [[package]]\n name = \"ra_db\"\n version = \"0.1.0\"\n dependencies = [\n+ \"cfg\",\n  \"profile\",\n- \"ra_cfg\",\n  \"rustc-hash\",\n  \"salsa\",\n  \"stdx\",\n@@ -997,19 +1012,19 @@ version = \"0.1.0\"\n dependencies = [\n  \"anymap\",\n  \"arena\",\n+ \"cfg\",\n  \"drop_bomb\",\n  \"either\",\n  \"expect\",\n  \"fst\",\n  \"indexmap\",\n  \"itertools\",\n  \"log\",\n+ \"mbe\",\n  \"once_cell\",\n  \"profile\",\n- \"ra_cfg\",\n  \"ra_db\",\n  \"ra_hir_expand\",\n- \"ra_mbe\",\n  \"rustc-hash\",\n  \"smallvec\",\n  \"stdx\",\n@@ -1025,10 +1040,10 @@ dependencies = [\n  \"arena\",\n  \"either\",\n  \"log\",\n+ \"mbe\",\n  \"parser\",\n  \"profile\",\n  \"ra_db\",\n- \"ra_mbe\",\n  \"rustc-hash\",\n  \"syntax\",\n  \"test_utils\",\n@@ -1067,6 +1082,7 @@ dependencies = [\n name = \"ra_ide\"\n version = \"0.1.0\"\n dependencies = [\n+ \"cfg\",\n  \"either\",\n  \"expect\",\n  \"indexmap\",\n@@ -1075,7 +1091,6 @@ dependencies = [\n  \"oorandom\",\n  \"profile\",\n  \"ra_assists\",\n- \"ra_cfg\",\n  \"ra_db\",\n  \"ra_fmt\",\n  \"ra_hir\",\n@@ -1107,19 +1122,6 @@ dependencies = [\n  \"text_edit\",\n ]\n \n-[[package]]\n-name = \"ra_mbe\"\n-version = \"0.1.0\"\n-dependencies = [\n- \"log\",\n- \"parser\",\n- \"rustc-hash\",\n- \"smallvec\",\n- \"syntax\",\n- \"test_utils\",\n- \"tt\",\n-]\n-\n [[package]]\n name = \"ra_proc_macro\"\n version = \"0.1.0\"\n@@ -1132,33 +1134,16 @@ dependencies = [\n  \"tt\",\n ]\n \n-[[package]]\n-name = \"proc_macro_srv\"\n-version = \"0.0.0\"\n-dependencies = [\n- \"cargo_metadata\",\n- \"difference\",\n- \"goblin\",\n- \"libloading\",\n- \"memmap\",\n- \"ra_mbe\",\n- \"ra_proc_macro\",\n- \"serde_derive\",\n- \"test_utils\",\n- \"toolchain\",\n- \"tt\",\n-]\n-\n [[package]]\n name = \"ra_project_model\"\n version = \"0.1.0\"\n dependencies = [\n  \"anyhow\",\n  \"arena\",\n  \"cargo_metadata\",\n+ \"cfg\",\n  \"log\",\n  \"paths\",\n- \"ra_cfg\",\n  \"ra_db\",\n  \"ra_proc_macro\",\n  \"rustc-hash\",\n@@ -1219,10 +1204,7 @@ version = \"1.3.9\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"9c3780fcf44b193bc4d09f36d2a3c87b251da4a046c87795a0d35f4f927ad8e6\"\n dependencies = [\n- \"aho-corasick\",\n- \"memchr\",\n  \"regex-syntax\",\n- \"thread_local\",\n ]\n \n [[package]]\n@@ -1258,6 +1240,7 @@ name = \"rust-analyzer\"\n version = \"0.1.0\"\n dependencies = [\n  \"anyhow\",\n+ \"cfg\",\n  \"crossbeam-channel\",\n  \"env_logger\",\n  \"expect\",\n@@ -1267,20 +1250,19 @@ dependencies = [\n  \"log\",\n  \"lsp-server\",\n  \"lsp-types\",\n+ \"mbe\",\n  \"mimalloc\",\n  \"oorandom\",\n  \"parking_lot\",\n  \"pico-args\",\n+ \"proc_macro_srv\",\n  \"profile\",\n- \"ra_cfg\",\n  \"ra_db\",\n  \"ra_hir\",\n  \"ra_hir_def\",\n  \"ra_hir_ty\",\n  \"ra_ide\",\n  \"ra_ide_db\",\n- \"ra_mbe\",\n- \"proc_macro_srv\",\n  \"ra_project_model\",\n  \"ra_ssr\",\n  \"rayon\",\n@@ -1414,18 +1396,18 @@ checksum = \"388a1df253eca08550bef6c72392cfe7c30914bf41df5269b68cbd6ff8f570a3\"\n \n [[package]]\n name = \"serde\"\n-version = \"1.0.114\"\n+version = \"1.0.115\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"5317f7588f0a5078ee60ef675ef96735a1442132dc645eb1d12c018620ed8cd3\"\n+checksum = \"e54c9a88f2da7238af84b5101443f0c0d0a3bbdc455e34a5c9497b1903ed55d5\"\n dependencies = [\n  \"serde_derive\",\n ]\n \n [[package]]\n name = \"serde_derive\"\n-version = \"1.0.114\"\n+version = \"1.0.115\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"2a0be94b04690fbaed37cddffc5c134bf537c8e3329d53e982fe04c374978f8e\"\n+checksum = \"609feed1d0a73cc36a0182a840a9b37b4a82f0b1150369f0536a9e3f2a31dc48\"\n dependencies = [\n  \"proc-macro2\",\n  \"quote\",\n@@ -1471,9 +1453,9 @@ checksum = \"c111b5bd5695e56cffe5129854aa230b39c93a305372fdbb2668ca2394eea9f8\"\n \n [[package]]\n name = \"smallvec\"\n-version = \"1.4.1\"\n+version = \"1.4.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"3757cb9d89161a2f24e1cf78efa0c1fcff485d18e3f55e0aa3480824ddaa0f3f\"\n+checksum = \"fbee7696b84bbf3d89a1c2eccff0850e3047ed46bfcd2e92c29a2d074d57e252\"\n \n [[package]]\n name = \"smol_str\"\n@@ -1614,9 +1596,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing\"\n-version = \"0.1.18\"\n+version = \"0.1.19\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f0aae59226cf195d8e74d4b34beae1859257efb4e5fed3f147d2dc2c7d372178\"\n+checksum = \"6d79ca061b032d6ce30c660fded31189ca0b9922bf483cd70759f13a2d86786c\"\n dependencies = [\n  \"cfg-if\",\n  \"tracing-attributes\",\n@@ -1625,9 +1607,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing-attributes\"\n-version = \"0.1.9\"\n+version = \"0.1.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f0693bf8d6f2bf22c690fc61a9d21ac69efdbb894a17ed596b9af0f01e64b84b\"\n+checksum = \"1fe233f4227389ab7df5b32649239da7ebe0b281824b4e84b342d04d3fd8c25e\"\n dependencies = [\n  \"proc-macro2\",\n  \"quote\",\n@@ -1636,9 +1618,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing-core\"\n-version = \"0.1.13\"\n+version = \"0.1.14\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"d593f98af59ebc017c0648f0117525db358745a8894a8d684e185ba3f45954f9\"\n+checksum = \"db63662723c316b43ca36d833707cc93dff82a02ba3d7e354f342682cc8b3545\"\n dependencies = [\n  \"lazy_static\",\n ]\n@@ -1666,9 +1648,9 @@ dependencies = [\n \n [[package]]\n name = \"tracing-subscriber\"\n-version = \"0.2.10\"\n+version = \"0.2.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"f7b33f8b2ef2ab0c3778c12646d9c42a24f7772bee4cdafc72199644a9f58fdc\"\n+checksum = \"abd165311cc4d7a555ad11cc77a37756df836182db0d81aac908c8184c584f40\"\n dependencies = [\n  \"ansi_term\",\n  \"chrono\",\n@@ -1679,6 +1661,7 @@ dependencies = [\n  \"serde_json\",\n  \"sharded-slab\",\n  \"smallvec\",\n+ \"thread_local\",\n  \"tracing-core\",\n  \"tracing-log\",\n  \"tracing-serde\","}, {"sha": "d2ea551d18a0331559ca0641f14f29d403bf8401", "filename": "crates/cfg/Cargo.toml", "status": "renamed", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcfg%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,18 +1,18 @@\n [package]\n-edition = \"2018\"\n-name = \"ra_cfg\"\n-version = \"0.1.0\"\n-authors = [\"rust-analyzer developers\"]\n+name = \"cfg\"\n+version = \"0.0.0\"\n license = \"MIT OR Apache-2.0\"\n+authors = [\"rust-analyzer developers\"]\n+edition = \"2018\"\n \n [lib]\n doctest = false\n \n [dependencies]\n rustc-hash = \"1.1.0\"\n \n-syntax = { path = \"../syntax\" }\n tt = { path = \"../tt\" }\n \n [dev-dependencies]\n-mbe = { path = \"../ra_mbe\", package = \"ra_mbe\" }\n+mbe = { path = \"../mbe\" }\n+syntax = { path = \"../syntax\" }", "previous_filename": "crates/ra_cfg/Cargo.toml"}, {"sha": "336fe25bc9c4a3f58d0b1cb300612bd0dbfaaac0", "filename": "crates/cfg/src/cfg_expr.rs", "status": "renamed", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2Fsrc%2Fcfg_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2Fsrc%2Fcfg_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcfg%2Fsrc%2Fcfg_expr.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -4,7 +4,7 @@\n \n use std::slice::Iter as SliceIter;\n \n-use syntax::SmolStr;\n+use tt::SmolStr;\n \n #[derive(Debug, Clone, PartialEq, Eq)]\n pub enum CfgExpr {\n@@ -86,17 +86,15 @@ fn next_cfg_expr(it: &mut SliceIter<tt::TokenTree>) -> Option<CfgExpr> {\n mod tests {\n     use super::*;\n \n-    use mbe::{ast_to_token_tree, TokenMap};\n+    use mbe::ast_to_token_tree;\n     use syntax::ast::{self, AstNode};\n \n-    fn get_token_tree_generated(input: &str) -> (tt::Subtree, TokenMap) {\n-        let source_file = ast::SourceFile::parse(input).ok().unwrap();\n-        let tt = source_file.syntax().descendants().find_map(ast::TokenTree::cast).unwrap();\n-        ast_to_token_tree(&tt).unwrap()\n-    }\n-\n     fn assert_parse_result(input: &str, expected: CfgExpr) {\n-        let (tt, _) = get_token_tree_generated(input);\n+        let (tt, _) = {\n+            let source_file = ast::SourceFile::parse(input).ok().unwrap();\n+            let tt = source_file.syntax().descendants().find_map(ast::TokenTree::cast).unwrap();\n+            ast_to_token_tree(&tt).unwrap()\n+        };\n         let cfg = CfgExpr::parse(&tt);\n         assert_eq!(cfg, expected);\n     }", "previous_filename": "crates/ra_cfg/src/cfg_expr.rs"}, {"sha": "a9d50e698ab115a734db8933ae0f39202dfb7282", "filename": "crates/cfg/src/lib.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fcfg%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcfg%2Fsrc%2Flib.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,9 +1,9 @@\n-//! ra_cfg defines conditional compiling options, `cfg` attibute parser and evaluator\n+//! cfg defines conditional compiling options, `cfg` attibute parser and evaluator\n \n mod cfg_expr;\n \n use rustc_hash::FxHashSet;\n-use syntax::SmolStr;\n+use tt::SmolStr;\n \n pub use cfg_expr::CfgExpr;\n ", "previous_filename": "crates/ra_cfg/src/lib.rs"}, {"sha": "1aba8b7c48279d619b264a127720c13067b575fd", "filename": "crates/mbe/Cargo.toml", "status": "renamed", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,20 +1,21 @@\n [package]\n-edition = \"2018\"\n-name = \"ra_mbe\"\n-version = \"0.1.0\"\n-authors = [\"rust-analyzer developers\"]\n+name = \"mbe\"\n+version = \"0.0.0\"\n license = \"MIT OR Apache-2.0\"\n+authors = [\"rust-analyzer developers\"]\n+edition = \"2018\"\n \n [lib]\n doctest = false\n \n [dependencies]\n-syntax = { path = \"../syntax\" }\n-parser = { path = \"../parser\" }\n-tt = { path = \"../tt\" }\n rustc-hash = \"1.1.0\"\n smallvec = \"1.2.0\"\n log = \"0.4.8\"\n \n+syntax = { path = \"../syntax\" }\n+parser = { path = \"../parser\" }\n+tt = { path = \"../tt\" }\n+\n [dev-dependencies]\n test_utils = { path = \"../test_utils\" }", "previous_filename": "crates/ra_mbe/Cargo.toml"}, {"sha": "f854ca09abe82256e4a4cd43611a623a5c77040f", "filename": "crates/mbe/src/lib.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Flib.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/lib.rs"}, {"sha": "1ad8b9f8a580ad03012bf5c3840363cdaa11c951", "filename": "crates/mbe/src/mbe_expander.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fmbe_expander.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/mbe_expander.rs"}, {"sha": "b698b98326d0f6e57fac0ae7b34ff77d37b5842c", "filename": "crates/mbe/src/mbe_expander/matcher.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Fmatcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Fmatcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Fmatcher.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/mbe_expander/matcher.rs"}, {"sha": "c9525c5bf204cfb9dc96cf1f9de8488f32da9f19", "filename": "crates/mbe/src/mbe_expander/transcriber.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Ftranscriber.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Ftranscriber.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fmbe_expander%2Ftranscriber.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/mbe_expander/transcriber.rs"}, {"sha": "6b46a1673c38e17e012f26478e42143c4f37483d", "filename": "crates/mbe/src/parser.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fparser.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/parser.rs"}, {"sha": "41461b3150ae17c9d91b7cc161cb29202ae05e94", "filename": "crates/mbe/src/subtree_source.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fsubtree_source.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fsubtree_source.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fsubtree_source.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/subtree_source.rs"}, {"sha": "a8ad917fb880c534faffe1df3baca75febd8122d", "filename": "crates/mbe/src/syntax_bridge.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Fsyntax_bridge.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/syntax_bridge.rs"}, {"sha": "0796ceee1a7a7306c2004ceea592fa28ee5a22f4", "filename": "crates/mbe/src/tests.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Ftests.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/tests.rs"}, {"sha": "46c4207185f603fbb00c13b09d0278e74b53de8f", "filename": "crates/mbe/src/tt_iter.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Ftt_iter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fmbe%2Fsrc%2Ftt_iter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fmbe%2Fsrc%2Ftt_iter.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "previous_filename": "crates/ra_mbe/src/tt_iter.rs"}, {"sha": "0954ffb66f488a9c1b06cae15b548a04bb74b070", "filename": "crates/proc_macro_srv/Cargo.toml", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fproc_macro_srv%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fproc_macro_srv%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproc_macro_srv%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -9,17 +9,19 @@ edition = \"2018\"\n doctest = false\n \n [dependencies]\n-tt = { path = \"../tt\" }\n-ra_mbe = { path = \"../ra_mbe\" }\n-ra_proc_macro = { path = \"../ra_proc_macro\" }\n goblin = \"0.2.1\"\n libloading = \"0.6.0\"\n memmap = \"0.7\"\n+\n+tt = { path = \"../tt\" }\n+mbe = { path = \"../mbe\" }\n+ra_proc_macro = { path = \"../ra_proc_macro\" }\n test_utils = { path = \"../test_utils\" }\n \n [dev-dependencies]\n cargo_metadata = \"0.11.1\"\n difference = \"2.0.0\"\n # used as proc macro test target\n serde_derive = \"1.0.106\"\n+\n toolchain = { path = \"../toolchain\" }"}, {"sha": "7d1695c86a8f33037f701eb08e6062e04e0db405", "filename": "crates/proc_macro_srv/src/rustc_server.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fproc_macro_srv%2Fsrc%2Frustc_server.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fproc_macro_srv%2Fsrc%2Frustc_server.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproc_macro_srv%2Fsrc%2Frustc_server.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -182,7 +182,7 @@ pub mod token_stream {\n \n         fn from_str(src: &str) -> Result<TokenStream, LexError> {\n             let (subtree, _token_map) =\n-                ra_mbe::parse_to_token_tree(src).ok_or(\"Failed to parse from mbe\")?;\n+                mbe::parse_to_token_tree(src).ok_or(\"Failed to parse from mbe\")?;\n \n             let tt: tt::TokenTree = subtree.into();\n             Ok(tt.into())"}, {"sha": "ad432f096a14c836c272ac15800832d5d27474d9", "filename": "crates/ra_db/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -13,7 +13,7 @@ salsa = \"0.15.2\"\n rustc-hash = \"1.1.0\"\n \n syntax = { path = \"../syntax\" }\n-ra_cfg = { path = \"../ra_cfg\" }\n+cfg = { path = \"../cfg\" }\n profile = { path = \"../profile\" }\n tt = { path = \"../tt\" }\n test_utils = { path = \"../test_utils\" }"}, {"sha": "5ff8ead0e5ed90c071fc1a488b8e7090753bd7a6", "filename": "crates/ra_db/src/fixture.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2Fsrc%2Ffixture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2Fsrc%2Ffixture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Ffixture.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -59,7 +59,7 @@\n //! ```\n use std::{str::FromStr, sync::Arc};\n \n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n use rustc_hash::FxHashMap;\n use test_utils::{extract_range_or_offset, Fixture, RangeOrOffset, CURSOR_MARKER};\n use vfs::{file_set::FileSet, VfsPath};"}, {"sha": "f3d65cdf02f510cd13b69efc466077f20d06fb01", "filename": "crates/ra_db/src/input.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2Fsrc%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_db%2Fsrc%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Finput.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -8,7 +8,7 @@\n \n use std::{fmt, iter::FromIterator, ops, str::FromStr, sync::Arc};\n \n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n use rustc_hash::{FxHashMap, FxHashSet};\n use syntax::SmolStr;\n use tt::TokenExpander;"}, {"sha": "e7d3c4d5be2c863b3f54710276b6e5f55daf7368", "filename": "crates/ra_hir_def/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -28,8 +28,8 @@ syntax = { path = \"../syntax\" }\n profile = { path = \"../profile\" }\n hir_expand = { path = \"../ra_hir_expand\", package = \"ra_hir_expand\" }\n test_utils = { path = \"../test_utils\" }\n-mbe = { path = \"../ra_mbe\", package = \"ra_mbe\" }\n-ra_cfg = { path = \"../ra_cfg\" }\n+mbe = { path = \"../mbe\" }\n+cfg = { path = \"../cfg\" }\n tt = { path = \"../tt\" }\n \n [dev-dependencies]"}, {"sha": "d69ff2fc79e760a0829cc2cae4bc0f7f0e952eab", "filename": "crates/ra_hir_def/src/adt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fadt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fadt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fadt.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -23,7 +23,7 @@ use crate::{\n     EnumId, HasModule, LocalEnumVariantId, LocalFieldId, Lookup, ModuleId, StructId, UnionId,\n     VariantId,\n };\n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n \n /// Note that we use `StructData` for unions as well!\n #[derive(Debug, Clone, PartialEq, Eq)]"}, {"sha": "dea552a605a4bbf664accf316a8f5a341eb535fd", "filename": "crates/ra_hir_def/src/attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fattr.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -2,10 +2,10 @@\n \n use std::{ops, sync::Arc};\n \n+use cfg::{CfgExpr, CfgOptions};\n use either::Either;\n use hir_expand::{hygiene::Hygiene, AstId, InFile};\n use mbe::ast_to_token_tree;\n-use ra_cfg::{CfgExpr, CfgOptions};\n use syntax::{\n     ast::{self, AstNode, AttrsOwner},\n     SmolStr,"}, {"sha": "fe659386a3d2a25f03745991a7fd956a7a2ebe19", "filename": "crates/ra_hir_def/src/body.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fbody.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fbody.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fbody.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -6,10 +6,10 @@ pub mod scope;\n use std::{mem, ops::Index, sync::Arc};\n \n use arena::{map::ArenaMap, Arena};\n+use cfg::CfgOptions;\n use drop_bomb::DropBomb;\n use either::Either;\n use hir_expand::{ast_id_map::AstIdMap, hygiene::Hygiene, AstId, HirFileId, InFile, MacroDefId};\n-use ra_cfg::CfgOptions;\n use ra_db::CrateId;\n use rustc_hash::FxHashMap;\n use syntax::{ast, AstNode, AstPtr};"}, {"sha": "6a58919360f4c089e5d4b38d3766c8359d5f8737", "filename": "crates/ra_hir_def/src/nameres/collector.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fnameres%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_def%2Fsrc%2Fnameres%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fnameres%2Fcollector.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -3,6 +3,7 @@\n //! `DefCollector::collect` contains the fixed-point iteration loop which\n //! resolves imports and expands macros.\n \n+use cfg::CfgOptions;\n use hir_expand::{\n     ast_id_map::FileAstId,\n     builtin_derive::find_builtin_derive,\n@@ -11,7 +12,6 @@ use hir_expand::{\n     proc_macro::ProcMacroExpander,\n     HirFileId, MacroCallId, MacroDefId, MacroDefKind,\n };\n-use ra_cfg::CfgOptions;\n use ra_db::{CrateId, FileId, ProcMacroId};\n use rustc_hash::FxHashMap;\n use syntax::ast;"}, {"sha": "cbb0ac29b8ba2dca5d73d1e82b8d967e5b16bf9c", "filename": "crates/ra_hir_expand/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_expand%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_hir_expand%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_expand%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -19,5 +19,5 @@ syntax = { path = \"../syntax\" }\n parser = { path = \"../parser\" }\n profile = { path = \"../profile\" }\n tt = { path = \"../tt\" }\n-mbe = { path = \"../ra_mbe\", package = \"ra_mbe\" }\n+mbe = { path = \"../mbe\" }\n test_utils = { path = \"../test_utils\"}"}, {"sha": "c60e555455e1e3f8141e67f92e84f163f7821700", "filename": "crates/ra_ide/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -25,7 +25,7 @@ syntax = { path = \"../syntax\" }\n text_edit = { path = \"../text_edit\" }\n ra_db = { path = \"../ra_db\" }\n ra_ide_db = { path = \"../ra_ide_db\" }\n-ra_cfg = { path = \"../ra_cfg\" }\n+cfg = { path = \"../cfg\" }\n ra_fmt = { path = \"../ra_fmt\" }\n profile = { path = \"../profile\" }\n test_utils = { path = \"../test_utils\" }"}, {"sha": "1fdf17800d15ef0aaaebb91986e6d91b0b59e2a3", "filename": "crates/ra_ide/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Flib.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -47,7 +47,7 @@ mod typing;\n \n use std::sync::Arc;\n \n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n use ra_db::{\n     salsa::{self, ParallelDatabase},\n     CheckCanceled, Env, FileLoader, FileSet, SourceDatabase, VfsPath,"}, {"sha": "a4691f0284ec18bc8767bf829d64226a5c982621", "filename": "crates/ra_ide/src/mock_analysis.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,7 +1,7 @@\n //! FIXME: write short doc here\n use std::sync::Arc;\n \n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n use ra_db::{CrateName, FileSet, SourceRoot, VfsPath};\n use test_utils::{\n     extract_annotations, extract_range_or_offset, Fixture, RangeOrOffset, CURSOR_MARKER,"}, {"sha": "b78388e6b17244e5fd367384da91fa1ef72c9296", "filename": "crates/ra_ide/src/parent_module.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Fparent_module.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Fparent_module.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fparent_module.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -63,7 +63,7 @@ pub(crate) fn crate_for(db: &RootDatabase, file_id: FileId) -> Vec<CrateId> {\n \n #[cfg(test)]\n mod tests {\n-    use ra_cfg::CfgOptions;\n+    use cfg::CfgOptions;\n     use ra_db::Env;\n     use test_utils::mark;\n "}, {"sha": "fb40762cfb204a4072cb3e63d22ec5de7fa61919", "filename": "crates/ra_ide/src/runnables.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Frunnables.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_ide%2Fsrc%2Frunnables.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Frunnables.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,8 +1,8 @@\n use std::fmt;\n \n+use cfg::CfgExpr;\n use hir::{AsAssocItem, Attrs, HirFileId, InFile, Semantics};\n use itertools::Itertools;\n-use ra_cfg::CfgExpr;\n use ra_ide_db::RootDatabase;\n use syntax::{\n     ast::{self, AstNode, AttrsOwner, DocCommentsOwner, ModuleItemOwner, NameOwner},"}, {"sha": "52f2d57b3b6d9941668b462c2cfaf2b2b3bd18f3", "filename": "crates/ra_project_model/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_project_model%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -15,7 +15,7 @@ rustc-hash = \"1.1.0\"\n cargo_metadata = \"0.11.1\"\n \n arena = { path = \"../arena\" }\n-ra_cfg = { path = \"../ra_cfg\" }\n+cfg = { path = \"../cfg\" }\n ra_db = { path = \"../ra_db\" }\n toolchain = { path = \"../toolchain\" }\n ra_proc_macro =  { path = \"../ra_proc_macro\" }"}, {"sha": "e92962cf6727ba94f245d56f035886fe2cef25c2", "filename": "crates/ra_project_model/src/cfg_flag.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2Fsrc%2Fcfg_flag.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2Fsrc%2Fcfg_flag.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_project_model%2Fsrc%2Fcfg_flag.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -3,7 +3,7 @@\n //! rustc main.rs --cfg foo --cfg 'feature=\"bar\"'\n use std::str::FromStr;\n \n-use ra_cfg::CfgOptions;\n+use cfg::CfgOptions;\n use stdx::split_once;\n \n #[derive(Clone, Eq, PartialEq, Debug)]"}, {"sha": "ee42198f35b45368935e4d44bd8c141b7da39dd2", "filename": "crates/ra_project_model/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Fra_project_model%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_project_model%2Fsrc%2Flib.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -12,8 +12,8 @@ use std::{\n };\n \n use anyhow::{bail, Context, Result};\n+use cfg::CfgOptions;\n use paths::{AbsPath, AbsPathBuf};\n-use ra_cfg::CfgOptions;\n use ra_db::{CrateGraph, CrateId, CrateName, Edition, Env, FileId};\n use rustc_hash::{FxHashMap, FxHashSet};\n "}, {"sha": "440b1cd134e8730f29b8fffa82a60dc72d1b580d", "filename": "crates/rust-analyzer/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Frust-analyzer%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Frust-analyzer%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2FCargo.toml?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -42,7 +42,7 @@ syntax = { path = \"../syntax\" }\n text_edit = { path = \"../text_edit\" }\n vfs = { path = \"../vfs\" }\n vfs-notify = { path = \"../vfs-notify\" }\n-ra_cfg = { path = \"../ra_cfg\" }\n+cfg = { path = \"../cfg\" }\n toolchain = { path = \"../toolchain\" }\n \n # This should only be used in CLI\n@@ -60,5 +60,5 @@ winapi = \"0.3.8\"\n [dev-dependencies]\n expect = { path = \"../expect\" }\n test_utils = { path = \"../test_utils\" }\n-mbe = { path = \"../ra_mbe\", package = \"ra_mbe\" }\n+mbe = { path = \"../mbe\" }\n tt = { path = \"../tt\" }"}, {"sha": "9c7a9cce61766de38fa74fefebb584d6eb09b08a", "filename": "crates/rust-analyzer/src/cargo_target_spec.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Frust-analyzer%2Fsrc%2Fcargo_target_spec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/crates%2Frust-analyzer%2Fsrc%2Fcargo_target_spec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fcargo_target_spec.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -1,6 +1,6 @@\n //! See `CargoTargetSpec`\n \n-use ra_cfg::CfgExpr;\n+use cfg::CfgExpr;\n use ra_ide::{FileId, RunnableKind, TestId};\n use ra_project_model::{self, TargetKind};\n use vfs::AbsPathBuf;\n@@ -177,8 +177,8 @@ fn required_features(cfg_expr: &CfgExpr, features: &mut Vec<String>) {\n mod tests {\n     use super::*;\n \n+    use cfg::CfgExpr;\n     use mbe::ast_to_token_tree;\n-    use ra_cfg::CfgExpr;\n     use syntax::{\n         ast::{self, AstNode},\n         SmolStr,"}, {"sha": "0188aaa2ec9fdcf30c093b4aabb5d9733e6c16b9", "filename": "xtask/tests/tidy.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/882e1a95ea6844d3e3fc3a47afdd44d145630c49/xtask%2Ftests%2Ftidy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/882e1a95ea6844d3e3fc3a47afdd44d145630c49/xtask%2Ftests%2Ftidy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftests%2Ftidy.rs?ref=882e1a95ea6844d3e3fc3a47afdd44d145630c49", "patch": "@@ -195,7 +195,7 @@ impl TidyDocs {\n             \"ra_hir\",\n             \"ra_hir_expand\",\n             \"ra_ide\",\n-            \"ra_mbe\",\n+            \"mbe\",\n             \"parser\",\n             \"profile\",\n             \"ra_project_model\","}]}