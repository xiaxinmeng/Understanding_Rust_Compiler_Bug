{"sha": "a608e501ec1db8990392150fd0961ac0e4790862", "node_id": "C_kwDOAAsO6NoAKGE2MDhlNTAxZWMxZGI4OTkwMzkyMTUwZmQwOTYxYWMwZTQ3OTA4NjI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-03-28T05:01:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-28T05:01:09Z"}, "message": "Rollup merge of #109661 - fortanix:raoul/EDP-107-fix_lvi_mitigation_tests_llvm_16, r=cuviper\n\nFix LVI test post LLVM 16 update\n\n#109474 updated LLVM to 16. This causes the LVI mitigation tests for the `x86_64-fortanix-unknown-sgx` platform to fail. This PR fixes those tests again.\n\ncc: `@jethrogb`", "tree": {"sha": "087c847562583673149762610ea01c23a3d25986", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/087c847562583673149762610ea01c23a3d25986"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a608e501ec1db8990392150fd0961ac0e4790862", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkInSVCRBK7hj4Ov3rIwAApLIIAByVXQ+QghljUlheYpO/riTz\nT/nc8+ETronQYtHaTa4Fk/xIuI07sWm6fTiaRz1+nMn293oPhtHTpcofp2eccdis\ndNPESZqSGtysUPglRiJpTFsh6mxguDl0pWveMqdMBHgRiiS4B7Aiy+q4Z0+Sd281\n8LOCzzr0YZjmIlQurLt/Qfhld/pxGDBFgSS/M4BARLNWaSJeYdNkFxaQ0zWpqq88\nP5khjoX9cSP/NAvOqfsh62EYdFgDaedVCBywxRqjwnGCeZKQ8+gWlZ6FnjpxV4N0\nw2Ukyb5UComNzAHWm7VWT+8FBCNaJ12v2rWzjG8CwC1mEAyZNSHu57rXqwUnsuA=\n=IkDd\n-----END PGP SIGNATURE-----\n", "payload": "tree 087c847562583673149762610ea01c23a3d25986\nparent eee3f484f9c03e8e702cc8af90c0a35f902272d0\nparent 64927b973b6c82889231e54d90a58580d2392b54\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1679979669 +0200\ncommitter GitHub <noreply@github.com> 1679979669 +0200\n\nRollup merge of #109661 - fortanix:raoul/EDP-107-fix_lvi_mitigation_tests_llvm_16, r=cuviper\n\nFix LVI test post LLVM 16 update\n\n#109474 updated LLVM to 16. This causes the LVI mitigation tests for the `x86_64-fortanix-unknown-sgx` platform to fail. This PR fixes those tests again.\n\ncc: `@jethrogb`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a608e501ec1db8990392150fd0961ac0e4790862", "html_url": "https://github.com/rust-lang/rust/commit/a608e501ec1db8990392150fd0961ac0e4790862", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a608e501ec1db8990392150fd0961ac0e4790862/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eee3f484f9c03e8e702cc8af90c0a35f902272d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/eee3f484f9c03e8e702cc8af90c0a35f902272d0", "html_url": "https://github.com/rust-lang/rust/commit/eee3f484f9c03e8e702cc8af90c0a35f902272d0"}, {"sha": "64927b973b6c82889231e54d90a58580d2392b54", "url": "https://api.github.com/repos/rust-lang/rust/commits/64927b973b6c82889231e54d90a58580d2392b54", "html_url": "https://github.com/rust-lang/rust/commit/64927b973b6c82889231e54d90a58580d2392b54"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "d2e53bee08f4664b6e03562f87a9396d51830a29", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cc_plus_one_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -2,6 +2,6 @@ CHECK: cc_plus_one_asm\n CHECK-NEXT: movl\n CHECK-NEXT: lfence\n CHECK-NEXT: incl\n-CHECK-NEXT: shlq $0, (%rsp)\n+CHECK-NEXT: shlq $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq"}, {"sha": "0a3d1dced42d509dd221a1bbe8682d5a61ced063", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cc_plus_one_c_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_c_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -6,7 +6,7 @@ CHECK:      lfence\n CHECK:      lfence\n CHECK-NEXT: incl\n CHECK-NEXT: jmp\n-CHECK-NEXT: shlq    $0, (%rsp)\n+CHECK-NEXT: shlq\t$0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq\n CHECK:      popq"}, {"sha": "0126cd8ee643759ebd9f77a35a74bf7271277919", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cc_plus_one_cxx_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_cxx_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_cxx_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcc_plus_one_cxx_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -7,7 +7,7 @@ CHECK:      lfence\n CHECK:      lfence\n CHECK-NEXT: incl\n CHECK-NEXT: jmp     0x{{[[:xdigit:]]+}} <cc_plus_one_cxx_asm+0x{{[[:xdigit:]]+}}>\n-CHECK-NEXT: shlq    $0, (%rsp)\n+CHECK-NEXT: shlq    $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq\n CHECK:      popq"}, {"sha": "615675488482005910d02724c5f3b8221c7b2b6a", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cmake_plus_one_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -2,6 +2,6 @@ CHECK: cmake_plus_one_asm\n CHECK-NEXT: movl\n CHECK-NEXT: lfence\n CHECK-NEXT: incl\n-CHECK-NEXT: shlq    $0, (%rsp)\n+CHECK-NEXT: shlq    $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq"}, {"sha": "17312b9126ab86de4b55086a1d2653e07454f36d", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cmake_plus_one_c_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_c_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_c_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_c_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -7,7 +7,7 @@ CHECK:      movl\n CHECK:      lfence\n CHECK-NEXT: incl\n CHECK-NEXT: jmp     0x{{[[:xdigit:]]+}} <cmake_plus_one_c_asm+0x{{[[:xdigit:]]+}}>\n-CHECK-NEXT: shlq    $0, (%rsp)\n+CHECK-NEXT: shlq    $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq\n CHECK:      popq"}, {"sha": "222e4ef79836d023cf3b03b192b8ca8bb444b98d", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/cmake_plus_one_cxx_asm.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_cxx_asm.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_cxx_asm.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Fcmake_plus_one_cxx_asm.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -7,7 +7,7 @@ CHECK:      movl\n CHECK:      lfence\n CHECK-NEXT: incl\n CHECK-NEXT: jmp     0x{{[[:xdigit:]]+}} <cmake_plus_one_cxx_asm+0x{{[[:xdigit:]]+}}>\n-CHECK-NEXT: shlq    $0, (%rsp)\n+CHECK-NEXT: shlq    $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq\n CHECK:      popq"}, {"sha": "b46cf758384e073bd6acb031465ae5383913ad5c", "filename": "tests/run-make/x86_64-fortanix-unknown-sgx-lvi/unw_getcontext.checks", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Funw_getcontext.checks", "raw_url": "https://github.com/rust-lang/rust/raw/a608e501ec1db8990392150fd0961ac0e4790862/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Funw_getcontext.checks", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-make%2Fx86_64-fortanix-unknown-sgx-lvi%2Funw_getcontext.checks?ref=a608e501ec1db8990392150fd0961ac0e4790862", "patch": "@@ -1,6 +1,6 @@\n CHECK: unw_getcontext\n CHECK:      lfence\n CHECK:      lfence\n-CHECK:      shlq    $0, (%rsp)\n+CHECK:      shlq    $0x0, (%rsp)\n CHECK-NEXT: lfence\n CHECK-NEXT: retq"}]}