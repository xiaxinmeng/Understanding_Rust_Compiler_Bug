{"sha": "303e7d1af8f1a2eb0c584e94f4392104227a9392", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwM2U3ZDFhZjhmMWEyZWIwYzU4NGU5NGY0MzkyMTA0MjI3YTkzOTI=", "commit": {"author": {"name": "Eduardo Broto", "email": "ebroto@tutanota.com", "date": "2020-04-26T19:26:19Z"}, "committer": {"name": "Eduardo Broto", "email": "ebroto@tutanota.com", "date": "2020-04-26T19:27:29Z"}, "message": "Split tests in unix/non-unix", "tree": {"sha": "b855670a12db4b0c6b8fee1b182508be38e962fe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b855670a12db4b0c6b8fee1b182508be38e962fe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/303e7d1af8f1a2eb0c584e94f4392104227a9392", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/303e7d1af8f1a2eb0c584e94f4392104227a9392", "html_url": "https://github.com/rust-lang/rust/commit/303e7d1af8f1a2eb0c584e94f4392104227a9392", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/303e7d1af8f1a2eb0c584e94f4392104227a9392/comments", "author": {"login": "ebroto", "id": 816908, "node_id": "MDQ6VXNlcjgxNjkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/816908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebroto", "html_url": "https://github.com/ebroto", "followers_url": "https://api.github.com/users/ebroto/followers", "following_url": "https://api.github.com/users/ebroto/following{/other_user}", "gists_url": "https://api.github.com/users/ebroto/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebroto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebroto/subscriptions", "organizations_url": "https://api.github.com/users/ebroto/orgs", "repos_url": "https://api.github.com/users/ebroto/repos", "events_url": "https://api.github.com/users/ebroto/events{/privacy}", "received_events_url": "https://api.github.com/users/ebroto/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ebroto", "id": 816908, "node_id": "MDQ6VXNlcjgxNjkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/816908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebroto", "html_url": "https://github.com/ebroto", "followers_url": "https://api.github.com/users/ebroto/followers", "following_url": "https://api.github.com/users/ebroto/following{/other_user}", "gists_url": "https://api.github.com/users/ebroto/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebroto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebroto/subscriptions", "organizations_url": "https://api.github.com/users/ebroto/orgs", "repos_url": "https://api.github.com/users/ebroto/repos", "events_url": "https://api.github.com/users/ebroto/events{/privacy}", "received_events_url": "https://api.github.com/users/ebroto/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a405c9977e19807b3ac993a7a8e198d27d551b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/4a405c9977e19807b3ac993a7a8e198d27d551b1", "html_url": "https://github.com/rust-lang/rust/commit/4a405c9977e19807b3ac993a7a8e198d27d551b1"}], "stats": {"total": 263, "additions": 169, "deletions": 94}, "files": [{"sha": "3ee77dcac31a0d6b3658fb4104147ab0a41402ef", "filename": "tests/ui/mismatched_target_os_non_unix.fixed", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_non_unix.fixed?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -0,0 +1,30 @@\n+// run-rustfix\n+\n+#![warn(clippy::mismatched_target_os)]\n+#![allow(unused)]\n+\n+#[cfg(target_os = \"cloudabi\")]\n+fn cloudabi() {}\n+\n+#[cfg(target_os = \"hermit\")]\n+fn hermit() {}\n+\n+#[cfg(target_os = \"wasi\")]\n+fn wasi() {}\n+\n+#[cfg(target_os = \"none\")]\n+fn none() {}\n+\n+// list with conditions\n+#[cfg(all(not(any(windows, target_os = \"cloudabi\")), target_os = \"wasi\"))]\n+fn list() {}\n+\n+// windows is a valid target family, should be ignored\n+#[cfg(windows)]\n+fn windows() {}\n+\n+// correct use, should be ignored\n+#[cfg(target_os = \"hermit\")]\n+fn correct() {}\n+\n+fn main() {}"}, {"sha": "9cc411418e4c4d979ca53f274aab55a803558226", "filename": "tests/ui/mismatched_target_os_non_unix.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_non_unix.rs?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -0,0 +1,30 @@\n+// run-rustfix\n+\n+#![warn(clippy::mismatched_target_os)]\n+#![allow(unused)]\n+\n+#[cfg(cloudabi)]\n+fn cloudabi() {}\n+\n+#[cfg(hermit)]\n+fn hermit() {}\n+\n+#[cfg(wasi)]\n+fn wasi() {}\n+\n+#[cfg(none)]\n+fn none() {}\n+\n+// list with conditions\n+#[cfg(all(not(any(windows, cloudabi)), wasi))]\n+fn list() {}\n+\n+// windows is a valid target family, should be ignored\n+#[cfg(windows)]\n+fn windows() {}\n+\n+// correct use, should be ignored\n+#[cfg(target_os = \"hermit\")]\n+fn correct() {}\n+\n+fn main() {}"}, {"sha": "78fc27752d239bcc9d57f2c54139b19503d9bc97", "filename": "tests/ui/mismatched_target_os_non_unix.stderr", "status": "added", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_non_unix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_non_unix.stderr?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -0,0 +1,51 @@\n+error: operating system used in target family position\n+  --> $DIR/mismatched_target_os_non_unix.rs:6:1\n+   |\n+LL | #[cfg(cloudabi)]\n+   | ^^^^^^--------^^\n+   |       |\n+   |       help: try: `target_os = \"cloudabi\"`\n+   |\n+   = note: `-D clippy::mismatched-target-os` implied by `-D warnings`\n+\n+error: operating system used in target family position\n+  --> $DIR/mismatched_target_os_non_unix.rs:9:1\n+   |\n+LL | #[cfg(hermit)]\n+   | ^^^^^^------^^\n+   |       |\n+   |       help: try: `target_os = \"hermit\"`\n+\n+error: operating system used in target family position\n+  --> $DIR/mismatched_target_os_non_unix.rs:12:1\n+   |\n+LL | #[cfg(wasi)]\n+   | ^^^^^^----^^\n+   |       |\n+   |       help: try: `target_os = \"wasi\"`\n+\n+error: operating system used in target family position\n+  --> $DIR/mismatched_target_os_non_unix.rs:15:1\n+   |\n+LL | #[cfg(none)]\n+   | ^^^^^^----^^\n+   |       |\n+   |       help: try: `target_os = \"none\"`\n+\n+error: operating system used in target family position\n+  --> $DIR/mismatched_target_os_non_unix.rs:19:1\n+   |\n+LL | #[cfg(all(not(any(windows, cloudabi)), wasi))]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: try\n+   |\n+LL | #[cfg(all(not(any(windows, target_os = \"cloudabi\")), wasi))]\n+   |                            ^^^^^^^^^^^^^^^^^^^^^^\n+help: try\n+   |\n+LL | #[cfg(all(not(any(windows, cloudabi)), target_os = \"wasi\"))]\n+   |                                        ^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 5 previous errors\n+"}, {"sha": "7d9d406d99dfcabf0828ed6eb5f1b3125f916f7e", "filename": "tests/ui/mismatched_target_os_unix.fixed", "status": "renamed", "additions": 8, "deletions": 22, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_unix.fixed?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -3,8 +3,6 @@\n #![warn(clippy::mismatched_target_os)]\n #![allow(unused)]\n \n-// unix\n-\n #[cfg(target_os = \"linux\")]\n fn linux() {}\n \n@@ -38,6 +36,12 @@ fn fuchsia() {}\n #[cfg(target_os = \"haiku\")]\n fn haiku() {}\n \n+#[cfg(target_os = \"illumos\")]\n+fn illumos() {}\n+\n+#[cfg(target_os = \"l4re\")]\n+fn l4re() {}\n+\n #[cfg(target_os = \"redox\")]\n fn redox() {}\n \n@@ -47,30 +51,12 @@ fn solaris() {}\n #[cfg(target_os = \"vxworks\")]\n fn vxworks() {}\n \n-// non-unix\n-\n-#[cfg(target_os = \"cloudabi\")]\n-fn cloudabi() {}\n-\n-#[cfg(target_os = \"hermit\")]\n-fn hermit() {}\n-\n-#[cfg(target_os = \"wasi\")]\n-fn wasi() {}\n-\n-#[cfg(target_os = \"none\")]\n-fn none() {}\n-\n // list with conditions\n-#[cfg(all(not(any(windows, target_os = \"linux\")), target_os = \"freebsd\"))]\n+#[cfg(all(not(any(target_os = \"solaris\", target_os = \"linux\")), target_os = \"freebsd\"))]\n fn list() {}\n \n-// windows is a valid target family, should be ignored\n-#[cfg(windows)]\n-fn windows() {}\n-\n // correct use, should be ignored\n #[cfg(target_os = \"freebsd\")]\n-fn freebsd() {}\n+fn correct() {}\n \n fn main() {}", "previous_filename": "tests/ui/mismatched_target_os.fixed"}, {"sha": "c1177f1eedc62153ad9eb2c48596fdffc9b346fc", "filename": "tests/ui/mismatched_target_os_unix.rs", "status": "renamed", "additions": 8, "deletions": 22, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_unix.rs?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -3,8 +3,6 @@\n #![warn(clippy::mismatched_target_os)]\n #![allow(unused)]\n \n-// unix\n-\n #[cfg(linux)]\n fn linux() {}\n \n@@ -38,6 +36,12 @@ fn fuchsia() {}\n #[cfg(haiku)]\n fn haiku() {}\n \n+#[cfg(illumos)]\n+fn illumos() {}\n+\n+#[cfg(l4re)]\n+fn l4re() {}\n+\n #[cfg(redox)]\n fn redox() {}\n \n@@ -47,30 +51,12 @@ fn solaris() {}\n #[cfg(vxworks)]\n fn vxworks() {}\n \n-// non-unix\n-\n-#[cfg(cloudabi)]\n-fn cloudabi() {}\n-\n-#[cfg(hermit)]\n-fn hermit() {}\n-\n-#[cfg(wasi)]\n-fn wasi() {}\n-\n-#[cfg(none)]\n-fn none() {}\n-\n // list with conditions\n-#[cfg(all(not(any(windows, linux)), freebsd))]\n+#[cfg(all(not(any(solaris, linux)), freebsd))]\n fn list() {}\n \n-// windows is a valid target family, should be ignored\n-#[cfg(windows)]\n-fn windows() {}\n-\n // correct use, should be ignored\n #[cfg(target_os = \"freebsd\")]\n-fn freebsd() {}\n+fn correct() {}\n \n fn main() {}", "previous_filename": "tests/ui/mismatched_target_os.rs"}, {"sha": "fe9aeedb59c45b80b8b7d3b609e0841363fd98b2", "filename": "tests/ui/mismatched_target_os_unix.stderr", "status": "renamed", "additions": 42, "deletions": 50, "changes": 92, "blob_url": "https://github.com/rust-lang/rust/blob/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/303e7d1af8f1a2eb0c584e94f4392104227a9392/tests%2Fui%2Fmismatched_target_os_unix.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmismatched_target_os_unix.stderr?ref=303e7d1af8f1a2eb0c584e94f4392104227a9392", "patch": "@@ -1,5 +1,5 @@\n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:8:1\n+  --> $DIR/mismatched_target_os_unix.rs:6:1\n    |\n LL | #[cfg(linux)]\n    | ^^^^^^-----^^\n@@ -10,7 +10,7 @@ LL | #[cfg(linux)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:11:1\n+  --> $DIR/mismatched_target_os_unix.rs:9:1\n    |\n LL | #[cfg(freebsd)]\n    | ^^^^^^-------^^\n@@ -20,7 +20,7 @@ LL | #[cfg(freebsd)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:14:1\n+  --> $DIR/mismatched_target_os_unix.rs:12:1\n    |\n LL | #[cfg(dragonfly)]\n    | ^^^^^^---------^^\n@@ -30,7 +30,7 @@ LL | #[cfg(dragonfly)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:17:1\n+  --> $DIR/mismatched_target_os_unix.rs:15:1\n    |\n LL | #[cfg(openbsd)]\n    | ^^^^^^-------^^\n@@ -40,7 +40,7 @@ LL | #[cfg(openbsd)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:20:1\n+  --> $DIR/mismatched_target_os_unix.rs:18:1\n    |\n LL | #[cfg(netbsd)]\n    | ^^^^^^------^^\n@@ -50,7 +50,7 @@ LL | #[cfg(netbsd)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:23:1\n+  --> $DIR/mismatched_target_os_unix.rs:21:1\n    |\n LL | #[cfg(macos)]\n    | ^^^^^^-----^^\n@@ -60,7 +60,7 @@ LL | #[cfg(macos)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:26:1\n+  --> $DIR/mismatched_target_os_unix.rs:24:1\n    |\n LL | #[cfg(ios)]\n    | ^^^^^^---^^\n@@ -70,7 +70,7 @@ LL | #[cfg(ios)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:29:1\n+  --> $DIR/mismatched_target_os_unix.rs:27:1\n    |\n LL | #[cfg(android)]\n    | ^^^^^^-------^^\n@@ -80,7 +80,7 @@ LL | #[cfg(android)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:32:1\n+  --> $DIR/mismatched_target_os_unix.rs:30:1\n    |\n LL | #[cfg(emscripten)]\n    | ^^^^^^----------^^\n@@ -90,7 +90,7 @@ LL | #[cfg(emscripten)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:35:1\n+  --> $DIR/mismatched_target_os_unix.rs:33:1\n    |\n LL | #[cfg(fuchsia)]\n    | ^^^^^^-------^^\n@@ -100,7 +100,7 @@ LL | #[cfg(fuchsia)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:38:1\n+  --> $DIR/mismatched_target_os_unix.rs:36:1\n    |\n LL | #[cfg(haiku)]\n    | ^^^^^^-----^^\n@@ -110,82 +110,74 @@ LL | #[cfg(haiku)]\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:41:1\n+  --> $DIR/mismatched_target_os_unix.rs:39:1\n    |\n-LL | #[cfg(redox)]\n-   | ^^^^^^-----^^\n+LL | #[cfg(illumos)]\n+   | ^^^^^^-------^^\n    |       |\n-   |       help: try: `target_os = \"redox\"`\n+   |       help: try: `target_os = \"illumos\"`\n    |\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:44:1\n+  --> $DIR/mismatched_target_os_unix.rs:42:1\n    |\n-LL | #[cfg(solaris)]\n-   | ^^^^^^-------^^\n+LL | #[cfg(l4re)]\n+   | ^^^^^^----^^\n    |       |\n-   |       help: try: `target_os = \"solaris\"`\n+   |       help: try: `target_os = \"l4re\"`\n    |\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:47:1\n+  --> $DIR/mismatched_target_os_unix.rs:45:1\n    |\n-LL | #[cfg(vxworks)]\n-   | ^^^^^^-------^^\n+LL | #[cfg(redox)]\n+   | ^^^^^^-----^^\n    |       |\n-   |       help: try: `target_os = \"vxworks\"`\n+   |       help: try: `target_os = \"redox\"`\n    |\n    = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:52:1\n+  --> $DIR/mismatched_target_os_unix.rs:48:1\n    |\n-LL | #[cfg(cloudabi)]\n-   | ^^^^^^--------^^\n+LL | #[cfg(solaris)]\n+   | ^^^^^^-------^^\n    |       |\n-   |       help: try: `target_os = \"cloudabi\"`\n-\n-error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:55:1\n+   |       help: try: `target_os = \"solaris\"`\n    |\n-LL | #[cfg(hermit)]\n-   | ^^^^^^------^^\n-   |       |\n-   |       help: try: `target_os = \"hermit\"`\n+   = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:58:1\n+  --> $DIR/mismatched_target_os_unix.rs:51:1\n    |\n-LL | #[cfg(wasi)]\n-   | ^^^^^^----^^\n+LL | #[cfg(vxworks)]\n+   | ^^^^^^-------^^\n    |       |\n-   |       help: try: `target_os = \"wasi\"`\n-\n-error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:61:1\n+   |       help: try: `target_os = \"vxworks\"`\n    |\n-LL | #[cfg(none)]\n-   | ^^^^^^----^^\n-   |       |\n-   |       help: try: `target_os = \"none\"`\n+   = help: Did you mean `unix`?\n \n error: operating system used in target family position\n-  --> $DIR/mismatched_target_os.rs:65:1\n+  --> $DIR/mismatched_target_os_unix.rs:55:1\n    |\n-LL | #[cfg(all(not(any(windows, linux)), freebsd))]\n+LL | #[cfg(all(not(any(solaris, linux)), freebsd))]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = help: Did you mean `unix`?\n help: try\n    |\n-LL | #[cfg(all(not(any(windows, target_os = \"linux\")), freebsd))]\n+LL | #[cfg(all(not(any(target_os = \"solaris\", linux)), freebsd))]\n+   |                   ^^^^^^^^^^^^^^^^^^^^^\n+help: try\n+   |\n+LL | #[cfg(all(not(any(solaris, target_os = \"linux\")), freebsd))]\n    |                            ^^^^^^^^^^^^^^^^^^^\n help: try\n    |\n-LL | #[cfg(all(not(any(windows, linux)), target_os = \"freebsd\"))]\n+LL | #[cfg(all(not(any(solaris, linux)), target_os = \"freebsd\"))]\n    |                                     ^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 19 previous errors\n+error: aborting due to 17 previous errors\n ", "previous_filename": "tests/ui/mismatched_target_os.stderr"}]}