{"sha": "2d36a71aee17b6dad04a184541cebbb8e3901a5a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJkMzZhNzFhZWUxN2I2ZGFkMDRhMTg0NTQxY2ViYmI4ZTM5MDFhNWE=", "commit": {"author": {"name": "Kevin Atkinson", "email": "kevina@cs.utah.edu", "date": "2012-01-16T02:56:20Z"}, "committer": {"name": "Marijn Haverbeke", "email": "marijnh@gmail.com", "date": "2012-01-16T10:19:32Z"}, "message": "Update pretty printer to print out disr. values.\n\nPartly fixes issue #1510.  \"rustc --pretty=typed\" fails.", "tree": {"sha": "b2cd21074ce66517381ff01b344be4af9ade566b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2cd21074ce66517381ff01b344be4af9ade566b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2d36a71aee17b6dad04a184541cebbb8e3901a5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2d36a71aee17b6dad04a184541cebbb8e3901a5a", "html_url": "https://github.com/rust-lang/rust/commit/2d36a71aee17b6dad04a184541cebbb8e3901a5a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2d36a71aee17b6dad04a184541cebbb8e3901a5a/comments", "author": {"login": "kevina", "id": 1271492, "node_id": "MDQ6VXNlcjEyNzE0OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1271492?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kevina", "html_url": "https://github.com/kevina", "followers_url": "https://api.github.com/users/kevina/followers", "following_url": "https://api.github.com/users/kevina/following{/other_user}", "gists_url": "https://api.github.com/users/kevina/gists{/gist_id}", "starred_url": "https://api.github.com/users/kevina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kevina/subscriptions", "organizations_url": "https://api.github.com/users/kevina/orgs", "repos_url": "https://api.github.com/users/kevina/repos", "events_url": "https://api.github.com/users/kevina/events{/privacy}", "received_events_url": "https://api.github.com/users/kevina/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marijnh", "id": 144427, "node_id": "MDQ6VXNlcjE0NDQyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/144427?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marijnh", "html_url": "https://github.com/marijnh", "followers_url": "https://api.github.com/users/marijnh/followers", "following_url": "https://api.github.com/users/marijnh/following{/other_user}", "gists_url": "https://api.github.com/users/marijnh/gists{/gist_id}", "starred_url": "https://api.github.com/users/marijnh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marijnh/subscriptions", "organizations_url": "https://api.github.com/users/marijnh/orgs", "repos_url": "https://api.github.com/users/marijnh/repos", "events_url": "https://api.github.com/users/marijnh/events{/privacy}", "received_events_url": "https://api.github.com/users/marijnh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "13b9a16a7b98f2308d7fae01ad122a3f94032c63", "url": "https://api.github.com/repos/rust-lang/rust/commits/13b9a16a7b98f2308d7fae01ad122a3f94032c63", "html_url": "https://github.com/rust-lang/rust/commit/13b9a16a7b98f2308d7fae01ad122a3f94032c63"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "38449d6e255b5cda926ac74cbb78bb228a1f72d4", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2d36a71aee17b6dad04a184541cebbb8e3901a5a/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d36a71aee17b6dad04a184541cebbb8e3901a5a/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=2d36a71aee17b6dad04a184541cebbb8e3901a5a", "patch": "@@ -428,6 +428,14 @@ fn print_item(s: ps, &&item: @ast::item) {\n                     commasep(s, consistent, v.node.args, print_variant_arg);\n                     pclose(s);\n                 }\n+                alt v.node.disr_expr {\n+                  some(expr) {\n+                    nbsp(s);\n+                    word_nbsp(s, \"=\");\n+                    print_expr(s, expr);\n+                  }\n+                  _ {}\n+                }\n                 word(s.s, \";\");\n                 maybe_print_trailing_comment(s, v.span, none::<uint>);\n             }"}, {"sha": "68226f63a2f8b62317286a515f52d0b4491e253e", "filename": "src/test/run-pass/enum-disr-val-pretty.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/2d36a71aee17b6dad04a184541cebbb8e3901a5a/src%2Ftest%2Frun-pass%2Fenum-disr-val-pretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d36a71aee17b6dad04a184541cebbb8e3901a5a/src%2Ftest%2Frun-pass%2Fenum-disr-val-pretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fenum-disr-val-pretty.rs?ref=2d36a71aee17b6dad04a184541cebbb8e3901a5a", "patch": "@@ -0,0 +1,16 @@\n+// pp-exact\n+\n+enum color { red = 1; green; blue; imaginary = -1; }\n+\n+fn main() {\n+    test_color(red, 1, \"red\");\n+    test_color(green, 2, \"green\");\n+    test_color(blue, 3, \"blue\");\n+    test_color(imaginary, -1, \"imaginary\");\n+}\n+\n+fn test_color(color: color, val: int, name: str) unsafe{\n+    assert (color as int == val);\n+    assert (color as float == val as float);\n+}\n+"}]}