{"sha": "f6588b86768fe426ff85dd0c5c838193a8f27d48", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2NTg4Yjg2NzY4ZmU0MjZmZjg1ZGQwYzVjODM4MTkzYThmMjdkNDg=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-10-27T14:50:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-10-27T14:50:27Z"}, "message": "Merge #2095\n\n2095: move all assists to use generated docs r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "97e3213d449e6237d1a20f99e9e82ede19215b20", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/97e3213d449e6237d1a20f99e9e82ede19215b20"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f6588b86768fe426ff85dd0c5c838193a8f27d48", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdta6zCRBK7hj4Ov3rIwAAdHIIAD75uJ83Ue6Ye5i4KER/aelQ\nDN5/KEjLsbufhWWxjB0zEfl5m2MI9xh7/+K4nhhb32+v0docqfFrOA1iGIu5D3I1\nUJZTgG+eV4gcXKbi7ciBhPIbfzeEwO9qHf83vrpRlS7sUFxrVL+2yzPtAMtecsDp\ne53p1Iunv1aBMWMDIqQH6Cz1l0aBIQ2TnT0eg0PrR0AMubNAqL0McWV68N5H340q\nixxG3Y8b15tjIE+gR7L+LVS7Jms9pzu/B0mDT56DdH5KICaj2y/MO04EhKJodhZk\nFOJtAULk+SC4hnBYFtZzfAS++KsN0m1WDCm75P+LEmYTC4Ep1CcxEQnaZlQo4/Q=\n=S/iL\n-----END PGP SIGNATURE-----\n", "payload": "tree 97e3213d449e6237d1a20f99e9e82ede19215b20\nparent cf309b6a5f2d51e9509568ab82446cc3eae29f94\nparent b6fcacd96d26e7edaf37bda852b8b3ad104d4c90\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1572187827 +0000\ncommitter GitHub <noreply@github.com> 1572187827 +0000\n\nMerge #2095\n\n2095: move all assists to use generated docs r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f6588b86768fe426ff85dd0c5c838193a8f27d48", "html_url": "https://github.com/rust-lang/rust/commit/f6588b86768fe426ff85dd0c5c838193a8f27d48", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f6588b86768fe426ff85dd0c5c838193a8f27d48/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf309b6a5f2d51e9509568ab82446cc3eae29f94", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf309b6a5f2d51e9509568ab82446cc3eae29f94", "html_url": "https://github.com/rust-lang/rust/commit/cf309b6a5f2d51e9509568ab82446cc3eae29f94"}, {"sha": "b6fcacd96d26e7edaf37bda852b8b3ad104d4c90", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6fcacd96d26e7edaf37bda852b8b3ad104d4c90", "html_url": "https://github.com/rust-lang/rust/commit/b6fcacd96d26e7edaf37bda852b8b3ad104d4c90"}], "stats": {"total": 70, "additions": 48, "deletions": 22}, "files": [{"sha": "e87fae1af0a524ccd082f9063f72371caa53d67b", "filename": "crates/ra_assists/src/assists/add_import.rs", "status": "modified", "additions": 16, "deletions": 5, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/f6588b86768fe426ff85dd0c5c838193a8f27d48/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_import.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6588b86768fe426ff85dd0c5c838193a8f27d48/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_import.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fassists%2Fadd_import.rs?ref=f6588b86768fe426ff85dd0c5c838193a8f27d48", "patch": "@@ -1,5 +1,3 @@\n-//! FIXME: write short doc here\n-\n use hir::{self, db::HirDatabase};\n use ra_syntax::{\n     ast::{self, NameOwner},\n@@ -14,9 +12,9 @@ use crate::{\n     AssistId,\n };\n \n-// This function produces sequence of text edits into edit\n-// to import the target path in the most appropriate scope given\n-// the cursor position\n+/// This function produces sequence of text edits into edit\n+/// to import the target path in the most appropriate scope given\n+/// the cursor position\n pub fn auto_import_text_edit(\n     // Ideally the position of the cursor, used to\n     position: &SyntaxNode,\n@@ -39,6 +37,19 @@ pub fn auto_import_text_edit(\n     }\n }\n \n+// Assist: add_import\n+//\n+// Adds a use statement for a given fully-qualified path.\n+//\n+// ```\n+// fn process(map: std::collections::<|>HashMap<String, String>) {}\n+// ```\n+// ->\n+// ```\n+// use std::collections::HashMap;\n+//\n+// fn process(map: HashMap<String, String>) {}\n+// ```\n pub(crate) fn add_import(ctx: AssistCtx<impl HirDatabase>) -> Option<Assist> {\n     let path: ast::Path = ctx.find_node_at_offset()?;\n     // We don't want to mess with use statements"}, {"sha": "1bee76f59a33674daa8d060e1a3e9860cc71f5f2", "filename": "crates/ra_assists/src/doc_tests/generated.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f6588b86768fe426ff85dd0c5c838193a8f27d48/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f6588b86768fe426ff85dd0c5c838193a8f27d48/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fdoc_tests%2Fgenerated.rs?ref=f6588b86768fe426ff85dd0c5c838193a8f27d48", "patch": "@@ -141,6 +141,21 @@ impl T for () {\n     )\n }\n \n+#[test]\n+fn doctest_add_import() {\n+    check(\n+        \"add_import\",\n+        r#####\"\n+fn process(map: std::collections::<|>HashMap<String, String>) {}\n+\"#####,\n+        r#####\"\n+use std::collections::HashMap;\n+\n+fn process(map: HashMap<String, String>) {}\n+\"#####,\n+    )\n+}\n+\n #[test]\n fn doctest_apply_demorgan() {\n     check("}, {"sha": "303353e742940bf542ad54cb0554d1c3527c4abe", "filename": "docs/user/assists.md", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/f6588b86768fe426ff85dd0c5c838193a8f27d48/docs%2Fuser%2Fassists.md", "raw_url": "https://github.com/rust-lang/rust/raw/f6588b86768fe426ff85dd0c5c838193a8f27d48/docs%2Fuser%2Fassists.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Fassists.md?ref=f6588b86768fe426ff85dd0c5c838193a8f27d48", "patch": "@@ -136,6 +136,20 @@ impl T for () {\n }\n ```\n \n+## `add_import`\n+\n+Adds a use statement for a given fully-qualified path.\n+\n+```rust\n+// BEFORE\n+fn process(map: std::collections::\u2503HashMap<String, String>) {}\n+\n+// AFTER\n+use std::collections::HashMap;\n+\n+fn process(map: HashMap<String, String>) {}\n+```\n+\n ## `apply_demorgan`\n \n Apply [De Morgan's law](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)."}, {"sha": "c160dd70bd95c5b378421ace92825cc344d0e009", "filename": "docs/user/features.md", "status": "modified", "additions": 3, "deletions": 17, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/f6588b86768fe426ff85dd0c5c838193a8f27d48/docs%2Fuser%2Ffeatures.md", "raw_url": "https://github.com/rust-lang/rust/raw/f6588b86768fe426ff85dd0c5c838193a8f27d48/docs%2Fuser%2Ffeatures.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fuser%2Ffeatures.md?ref=f6588b86768fe426ff85dd0c5c838193a8f27d48", "patch": "@@ -99,24 +99,10 @@ Stop `cargo watch`\n \n ### Assists (Code Actions)\n \n-These are triggered in a particular context via light bulb. We use custom code on\n-the VS Code side to be able to position cursor. `<|>` signifies cursor\n+Assists, or code actions, are small local refactorings, available in a particular context.\n+They are usually triggered by a shortcut or by clicking a light bulb icon in the editor.\n \n-See [assists.md](./assists.md)\n-\n-- Import path\n-\n-```rust\n-// before:\n-impl std::fmt::Debug<|> for Foo {\n-}\n-\n-// after:\n-use std::fmt::Debug;\n-\n-impl Debug<|> for Foo {\n-}\n-```\n+See [assists.md](./assists.md) for the list of available assists.\n \n ### Magic Completions\n "}]}