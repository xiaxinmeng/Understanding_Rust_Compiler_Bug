{"sha": "98260a2a22ab693f2363c68339cf5bb9fca011ab", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4MjYwYTJhMjJhYjY5M2YyMzYzYzY4MzM5Y2Y1YmI5ZmNhMDExYWI=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-03-11T00:21:34Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-03-11T04:15:27Z"}, "message": "Handle infinite-loop poststate correctly in typestate\n\nIf control passes an infinite loop (that doesn't have non-local\nexits), then everything is true.", "tree": {"sha": "159a693e13647b5138c099287e9f309a26d274e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/159a693e13647b5138c099287e9f309a26d274e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/98260a2a22ab693f2363c68339cf5bb9fca011ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/98260a2a22ab693f2363c68339cf5bb9fca011ab", "html_url": "https://github.com/rust-lang/rust/commit/98260a2a22ab693f2363c68339cf5bb9fca011ab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/98260a2a22ab693f2363c68339cf5bb9fca011ab/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e34fad750359a3e72bb7b357432341b3d3f28c86", "url": "https://api.github.com/repos/rust-lang/rust/commits/e34fad750359a3e72bb7b357432341b3d3f28c86", "html_url": "https://github.com/rust-lang/rust/commit/e34fad750359a3e72bb7b357432341b3d3f28c86"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "f13e59aa301247c177fb9c46fdb4fd37673d631d", "filename": "src/rustc/middle/tstate/states.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98260a2a22ab693f2363c68339cf5bb9fca011ab/src%2Frustc%2Fmiddle%2Ftstate%2Fstates.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98260a2a22ab693f2363c68339cf5bb9fca011ab/src%2Frustc%2Fmiddle%2Ftstate%2Fstates.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftstate%2Fstates.rs?ref=98260a2a22ab693f2363c68339cf5bb9fca011ab", "patch": "@@ -554,7 +554,7 @@ fn find_pre_post_state_expr(fcx: fn_ctxt, pres: prestate, e: @expr) -> bool {\n             ret changed | set_poststate_ann(fcx.ccx, e.id, pres);\n         } else {\n             ret changed | set_poststate_ann(fcx.ccx, e.id,\n-                             block_poststate(fcx.ccx, body));\n+                                            false_postcond(num_constrs));\n         }\n       }\n       expr_for(d, index, body) {"}, {"sha": "646d2466c7464b4cc129af7e85d6887938614e4b", "filename": "src/test/compile-fail/while-loop-pred-constraints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/98260a2a22ab693f2363c68339cf5bb9fca011ab/src%2Ftest%2Fcompile-fail%2Fwhile-loop-pred-constraints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/98260a2a22ab693f2363c68339cf5bb9fca011ab/src%2Ftest%2Fcompile-fail%2Fwhile-loop-pred-constraints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fwhile-loop-pred-constraints.rs?ref=98260a2a22ab693f2363c68339cf5bb9fca011ab", "patch": "@@ -11,6 +11,6 @@ fn main() {\n     check (even(y));\n     loop {\n         print_even(y);\n-        loop { loop { loop { y += x; } } }\n+        while true { while true { while true { y += x; } } }\n     }\n }"}]}