{"sha": "66db8e52d7e75e20048af38d137db2fbe4aa9201", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY2ZGI4ZTUyZDdlNzVlMjAwNDhhZjM4ZDEzN2RiMmZiZTRhYTkyMDE=", "commit": {"author": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-08-10T10:04:51Z"}, "committer": {"name": "Bastian Kauschke", "email": "bastian_kauschke@hotmail.de", "date": "2020-08-10T10:04:51Z"}, "message": "unused_delims: trim expr", "tree": {"sha": "f9c54cd86183ce0bde13bf5d6c38576967d1781e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f9c54cd86183ce0bde13bf5d6c38576967d1781e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/66db8e52d7e75e20048af38d137db2fbe4aa9201", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/66db8e52d7e75e20048af38d137db2fbe4aa9201", "html_url": "https://github.com/rust-lang/rust/commit/66db8e52d7e75e20048af38d137db2fbe4aa9201", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/66db8e52d7e75e20048af38d137db2fbe4aa9201/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "13290e83a6e20f3b408d177a9d64d8cf98fe4615", "url": "https://api.github.com/repos/rust-lang/rust/commits/13290e83a6e20f3b408d177a9d64d8cf98fe4615", "html_url": "https://github.com/rust-lang/rust/commit/13290e83a6e20f3b408d177a9d64d8cf98fe4615"}], "stats": {"total": 50, "additions": 26, "deletions": 24}, "files": [{"sha": "ecc8a192f18ea9566ba9c49b8aec4f02b01348ae", "filename": "src/librustc_lint/unused.rs", "status": "modified", "additions": 19, "deletions": 17, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Flibrustc_lint%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Flibrustc_lint%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Funused.rs?ref=66db8e52d7e75e20048af38d137db2fbe4aa9201", "patch": "@@ -481,25 +481,27 @@ trait UnusedDelimLint {\n             let mut err = lint.build(&span_msg);\n             let mut ate_left_paren = false;\n             let mut ate_right_paren = false;\n-            let parens_removed = pattern.trim_matches(|c| match c {\n-                '(' | '{' => {\n-                    if ate_left_paren {\n-                        false\n-                    } else {\n-                        ate_left_paren = true;\n-                        true\n+            let parens_removed = pattern\n+                .trim_matches(|c| match c {\n+                    '(' | '{' => {\n+                        if ate_left_paren {\n+                            false\n+                        } else {\n+                            ate_left_paren = true;\n+                            true\n+                        }\n                     }\n-                }\n-                ')' | '}' => {\n-                    if ate_right_paren {\n-                        false\n-                    } else {\n-                        ate_right_paren = true;\n-                        true\n+                    ')' | '}' => {\n+                        if ate_right_paren {\n+                            false\n+                        } else {\n+                            ate_right_paren = true;\n+                            true\n+                        }\n                     }\n-                }\n-                _ => false,\n-            });\n+                    _ => false,\n+                })\n+                .trim();\n \n             let replace = {\n                 let mut replace = if keep_space.0 {"}, {"sha": "836f26efc9601e7df2c5e00dc6e4c8c1e029c9e5", "filename": "src/test/ui/const-generics/unused_braces.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Funused_braces.fixed?ref=66db8e52d7e75e20048af38d137db2fbe4aa9201", "patch": "@@ -10,6 +10,6 @@ struct A<const N: usize>;\n \n fn main() {\n     let _: A<7>; // ok\n-    let _: A< 7 >; //~ WARN unnecessary braces\n+    let _: A<7>; //~ WARN unnecessary braces\n     let _: A<{ 3 + 5 }>; // ok\n }"}, {"sha": "1a88d985dd86a6438bf0b6847895a8255c24d5fa", "filename": "src/test/ui/lint/unused_braces.fixed", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_braces.fixed?ref=66db8e52d7e75e20048af38d137db2fbe4aa9201", "patch": "@@ -23,18 +23,18 @@ fn main() {\n         }\n     }\n \n-    if  true  {\n+    if true {\n         //~^ WARN unnecessary braces\n     }\n \n-    while  false  {\n+    while false {\n         //~^ WARN unnecessary braces\n     }\n \n-    let _: [u8;  3 ];\n+    let _: [u8; 3];\n     //~^ WARN unnecessary braces\n \n-    consume( 7 );\n+    consume(7);\n     //~^ WARN unnecessary braces\n \n     // Do not emit lint for multiline blocks."}, {"sha": "583506f891d019af04aaa5cafe08a2eda050fee2", "filename": "src/test/ui/lint/unused_braces_borrow.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_braces_borrow.fixed?ref=66db8e52d7e75e20048af38d137db2fbe4aa9201", "patch": "@@ -21,6 +21,6 @@ fn main() {\n     };\n \n     consume(&{ a.b });\n-    consume( a.b );\n+    consume(a.b);\n     //~^ WARN unnecessary braces\n }"}, {"sha": "756081738c3d7403423d8bee9f97a493c0ea7fd1", "filename": "src/test/ui/try-block/try-block-unused-delims.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/66db8e52d7e75e20048af38d137db2fbe4aa9201/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftry-block%2Ftry-block-unused-delims.fixed?ref=66db8e52d7e75e20048af38d137db2fbe4aa9201", "patch": "@@ -11,7 +11,7 @@ fn main() {\n     consume(try {});\n     //~^ WARN unnecessary parentheses\n \n-    consume( try {} );\n+    consume(try {});\n     //~^ WARN unnecessary braces\n \n     match try {} {"}]}