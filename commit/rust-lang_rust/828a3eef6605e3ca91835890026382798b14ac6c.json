{"sha": "828a3eef6605e3ca91835890026382798b14ac6c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgyOGEzZWVmNjYwNWUzY2E5MTgzNTg5MDAyNjM4Mjc5OGIxNGFjNmM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-06T06:03:09Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-06T06:03:09Z"}, "message": "Rollup merge of #66092 - niacat:master, r=nagisa\n\nUse KERN_ARND syscall for random numbers on NetBSD, same as FreeBSD.\n\nThis system call is present on all supported NetBSD versions and provides an endless stream of non-blocking random data from the kernel's ChaCha20-based CSPRNG. It doesn't require a file like `/dev/urandom` to be opened.\n\nThe system call is documented here (under kern.arandom):\nhttps://netbsd.gw.com/cgi-bin/man-cgi?sysctl+7+NetBSD-7.0\n\nAnd defined here:\nhttps://nxr.netbsd.org/xref/src/sys/sys/sysctl.h#273\n\nThe semantics are the same as FreeBSD so reading 256 bytes per call is fine.\n\nSimilar change for getrandom crate: rust-random/getrandom#115", "tree": {"sha": "4880ee363b60d5b89d463f7d06719f6bcf6a336c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4880ee363b60d5b89d463f7d06719f6bcf6a336c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/828a3eef6605e3ca91835890026382798b14ac6c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdwmIdCRBK7hj4Ov3rIwAAdHIIAFVGeWQ795yKO/sOkwXBcb0C\nJNg0abTjrJ6MDyaCkSjVThU1LUrLpe54E3nR/vF1qzMBX9E2agmwLgCIbwoDZ0oo\njtWwduvG7pLrDSPREKxW6kNL5UR2bPnEeCa9jxZIP+NG8McyrkpCiIKuTKUoL/tg\nbE42+4Kc6nARF5kHrusSnkcIXLBuDHcMH+eJq2USvP9ieRGi3EQV57R63Y5NtRLC\niWfnphkO0CHWzJmDNDpN1BtfZp4kDCQwDaScranldBP+7qRXFkHw8SsPE6NmUzAr\nA7rql8sKCb+QzKsuXNo+7Pkz9Mpn8gyBQKmg+bVUuGdT7rPT3TR3nQLw2MCE9M4=\n=XnXg\n-----END PGP SIGNATURE-----\n", "payload": "tree 4880ee363b60d5b89d463f7d06719f6bcf6a336c\nparent 167b8fedd615becb4e614ae0635a0e488cce70c4\nparent b4f92eaea23bee1b8574128878f909b8534b0f3d\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1573020189 +0100\ncommitter GitHub <noreply@github.com> 1573020189 +0100\n\nRollup merge of #66092 - niacat:master, r=nagisa\n\nUse KERN_ARND syscall for random numbers on NetBSD, same as FreeBSD.\n\nThis system call is present on all supported NetBSD versions and provides an endless stream of non-blocking random data from the kernel's ChaCha20-based CSPRNG. It doesn't require a file like `/dev/urandom` to be opened.\n\nThe system call is documented here (under kern.arandom):\nhttps://netbsd.gw.com/cgi-bin/man-cgi?sysctl+7+NetBSD-7.0\n\nAnd defined here:\nhttps://nxr.netbsd.org/xref/src/sys/sys/sysctl.h#273\n\nThe semantics are the same as FreeBSD so reading 256 bytes per call is fine.\n\nSimilar change for getrandom crate: rust-random/getrandom#115\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/828a3eef6605e3ca91835890026382798b14ac6c", "html_url": "https://github.com/rust-lang/rust/commit/828a3eef6605e3ca91835890026382798b14ac6c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/828a3eef6605e3ca91835890026382798b14ac6c/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "167b8fedd615becb4e614ae0635a0e488cce70c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/167b8fedd615becb4e614ae0635a0e488cce70c4", "html_url": "https://github.com/rust-lang/rust/commit/167b8fedd615becb4e614ae0635a0e488cce70c4"}, {"sha": "b4f92eaea23bee1b8574128878f909b8534b0f3d", "url": "https://api.github.com/repos/rust-lang/rust/commits/b4f92eaea23bee1b8574128878f909b8534b0f3d", "html_url": "https://github.com/rust-lang/rust/commit/b4f92eaea23bee1b8574128878f909b8534b0f3d"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "bc387544c4cb4d9353aa96109eba3e827ef9c984", "filename": "src/libstd/sys/unix/rand.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/828a3eef6605e3ca91835890026382798b14ac6c/src%2Flibstd%2Fsys%2Funix%2Frand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/828a3eef6605e3ca91835890026382798b14ac6c/src%2Flibstd%2Fsys%2Funix%2Frand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Frand.rs?ref=828a3eef6605e3ca91835890026382798b14ac6c", "patch": "@@ -15,6 +15,7 @@ pub fn hashmap_random_keys() -> (u64, u64) {\n           not(target_os = \"ios\"),\n           not(target_os = \"openbsd\"),\n           not(target_os = \"freebsd\"),\n+          not(target_os = \"netbsd\"),\n           not(target_os = \"fuchsia\"),\n           not(target_os = \"redox\")))]\n mod imp {\n@@ -142,7 +143,7 @@ mod imp {\n     }\n }\n \n-#[cfg(target_os = \"freebsd\")]\n+#[cfg(any(target_os = \"freebsd\", target_os = \"netbsd\"))]\n mod imp {\n     use crate::ptr;\n "}]}