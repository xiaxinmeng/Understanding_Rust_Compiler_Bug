{"sha": "49fbfffb48a5926cd4a01ca6b23f656a84fec830", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5ZmJmZmZiNDhhNTkyNmNkNGEwMWNhNmIyM2Y2NTZhODRmZWM4MzA=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-11-28T15:22:28Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2020-11-28T15:22:28Z"}, "message": "Add ast::*Number::suffix tests unit tests", "tree": {"sha": "9f74fa205723cac42485c313b9026d2e25377a72", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f74fa205723cac42485c313b9026d2e25377a72"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49fbfffb48a5926cd4a01ca6b23f656a84fec830", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49fbfffb48a5926cd4a01ca6b23f656a84fec830", "html_url": "https://github.com/rust-lang/rust/commit/49fbfffb48a5926cd4a01ca6b23f656a84fec830", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49fbfffb48a5926cd4a01ca6b23f656a84fec830/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "931493e949ce369775bccfcca24878c73e1509c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/931493e949ce369775bccfcca24878c73e1509c2", "html_url": "https://github.com/rust-lang/rust/commit/931493e949ce369775bccfcca24878c73e1509c2"}], "stats": {"total": 37, "additions": 37, "deletions": 0}, "files": [{"sha": "0c178039e83f795d52d6a43860423ff5a384c4ab", "filename": "crates/syntax/src/ast/token_ext.rs", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/49fbfffb48a5926cd4a01ca6b23f656a84fec830/crates%2Fsyntax%2Fsrc%2Fast%2Ftoken_ext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49fbfffb48a5926cd4a01ca6b23f656a84fec830/crates%2Fsyntax%2Fsrc%2Fast%2Ftoken_ext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Fsrc%2Fast%2Ftoken_ext.rs?ref=49fbfffb48a5926cd4a01ca6b23f656a84fec830", "patch": "@@ -612,3 +612,40 @@ impl Radix {\n         }\n     }\n }\n+\n+#[cfg(test)]\n+mod tests {\n+    use crate::ast::{make, FloatNumber, IntNumber};\n+\n+    fn check_float_suffix<'a>(lit: &str, expected: impl Into<Option<&'a str>>) {\n+        assert_eq!(FloatNumber { syntax: make::tokens::literal(lit) }.suffix(), expected.into());\n+    }\n+\n+    fn check_int_suffix<'a>(lit: &str, expected: impl Into<Option<&'a str>>) {\n+        assert_eq!(IntNumber { syntax: make::tokens::literal(lit) }.suffix(), expected.into());\n+    }\n+\n+    #[test]\n+    fn test_float_number_suffix() {\n+        check_float_suffix(\"123.0\", None);\n+        check_float_suffix(\"123f32\", \"f32\");\n+        check_float_suffix(\"123.0e\", None);\n+        check_float_suffix(\"123.0e4\", None);\n+        check_float_suffix(\"123.0ef32\", \"f32\");\n+        check_float_suffix(\"123.0E4f32\", \"f32\");\n+        check_float_suffix(\"1_2_3.0_f32\", \"f32\");\n+    }\n+\n+    #[test]\n+    fn test_int_number_suffix() {\n+        check_int_suffix(\"123\", None);\n+        check_int_suffix(\"123i32\", \"i32\");\n+        check_int_suffix(\"1_0_1_l_o_l\", \"l_o_l\");\n+        check_int_suffix(\"0b11\", None);\n+        check_int_suffix(\"0o11\", None);\n+        check_int_suffix(\"0xff\", None);\n+        check_int_suffix(\"0b11u32\", \"u32\");\n+        check_int_suffix(\"0o11u32\", \"u32\");\n+        check_int_suffix(\"0xffu32\", \"u32\");\n+    }\n+}"}]}