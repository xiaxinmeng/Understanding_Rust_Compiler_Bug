{"sha": "b1d84f721e3e423e4159e7f63729bd492d2cb77a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxZDg0ZjcyMWUzZTQyM2U0MTU5ZTdmNjM3MjliZDQ5MmQyY2I3N2E=", "commit": {"author": {"name": "Michael Hall", "email": "michael@mbh.sh", "date": "2021-05-11T01:41:37Z"}, "committer": {"name": "Michael Hall", "email": "michael@mbh.sh", "date": "2021-05-11T01:41:37Z"}, "message": "add missing windows tests", "tree": {"sha": "cf612450fb41533c1b9d315ccc52f3b2e49bebfa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf612450fb41533c1b9d315ccc52f3b2e49bebfa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b1d84f721e3e423e4159e7f63729bd492d2cb77a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b1d84f721e3e423e4159e7f63729bd492d2cb77a", "html_url": "https://github.com/rust-lang/rust/commit/b1d84f721e3e423e4159e7f63729bd492d2cb77a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b1d84f721e3e423e4159e7f63729bd492d2cb77a/comments", "author": {"login": "mbhall88", "id": 20403931, "node_id": "MDQ6VXNlcjIwNDAzOTMx", "avatar_url": "https://avatars.githubusercontent.com/u/20403931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbhall88", "html_url": "https://github.com/mbhall88", "followers_url": "https://api.github.com/users/mbhall88/followers", "following_url": "https://api.github.com/users/mbhall88/following{/other_user}", "gists_url": "https://api.github.com/users/mbhall88/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbhall88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbhall88/subscriptions", "organizations_url": "https://api.github.com/users/mbhall88/orgs", "repos_url": "https://api.github.com/users/mbhall88/repos", "events_url": "https://api.github.com/users/mbhall88/events{/privacy}", "received_events_url": "https://api.github.com/users/mbhall88/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mbhall88", "id": 20403931, "node_id": "MDQ6VXNlcjIwNDAzOTMx", "avatar_url": "https://avatars.githubusercontent.com/u/20403931?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbhall88", "html_url": "https://github.com/mbhall88", "followers_url": "https://api.github.com/users/mbhall88/followers", "following_url": "https://api.github.com/users/mbhall88/following{/other_user}", "gists_url": "https://api.github.com/users/mbhall88/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbhall88/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbhall88/subscriptions", "organizations_url": "https://api.github.com/users/mbhall88/orgs", "repos_url": "https://api.github.com/users/mbhall88/repos", "events_url": "https://api.github.com/users/mbhall88/events{/privacy}", "received_events_url": "https://api.github.com/users/mbhall88/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e2206a29a2f8b93932a56768516845ec4379bb4", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e2206a29a2f8b93932a56768516845ec4379bb4", "html_url": "https://github.com/rust-lang/rust/commit/3e2206a29a2f8b93932a56768516845ec4379bb4"}], "stats": {"total": 193, "additions": 140, "deletions": 53}, "files": [{"sha": "7ffc787b0a2b41e4a48110b320abec3c0dbd8c69", "filename": "library/std/src/path/tests.rs", "status": "modified", "additions": 140, "deletions": 53, "changes": 193, "blob_url": "https://github.com/rust-lang/rust/blob/b1d84f721e3e423e4159e7f63729bd492d2cb77a/library%2Fstd%2Fsrc%2Fpath%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b1d84f721e3e423e4159e7f63729bd492d2cb77a/library%2Fstd%2Fsrc%2Fpath%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpath%2Ftests.rs?ref=b1d84f721e3e423e4159e7f63729bd492d2cb77a", "patch": "@@ -457,7 +457,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"foo\",\n@@ -467,7 +468,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"/\",\n@@ -477,7 +479,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\",\n@@ -487,7 +490,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"c:\",\n@@ -497,7 +501,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"c:\\\\\",\n@@ -507,7 +512,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"c:/\",\n@@ -517,7 +523,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"/foo\",\n@@ -527,7 +534,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"/\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"foo/\",\n@@ -537,7 +545,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"/foo/\",\n@@ -547,7 +556,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"/\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"foo/bar\",\n@@ -557,7 +567,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"foo\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"/foo/bar\",\n@@ -567,7 +578,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"/foo\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"///foo///\",\n@@ -577,7 +589,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"/\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"///foo///bar\",\n@@ -587,7 +600,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"///foo\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"./.\",\n@@ -597,7 +611,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"/..\",\n@@ -607,7 +622,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"/\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"../\",\n@@ -617,7 +633,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"foo/.\",\n@@ -627,7 +644,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"foo/..\",\n@@ -637,7 +655,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"foo\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"foo/./\",\n@@ -647,7 +666,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: Some(\"foo\"),\n     file_stem: Some(\"foo\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"foo/./bar\",\n@@ -657,7 +677,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"foo\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"foo/../\",\n@@ -667,7 +688,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"foo\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"foo/../bar\",\n@@ -677,7 +699,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"foo/..\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"./a\",\n@@ -687,7 +710,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\".\"),\n     file_name: Some(\"a\"),\n     file_stem: Some(\"a\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"a\")\n     );\n \n     t!(\".\",\n@@ -697,7 +721,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"./\",\n@@ -707,7 +732,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\"),\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"a/b\",\n@@ -717,7 +743,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"a\"),\n     file_name: Some(\"b\"),\n     file_stem: Some(\"b\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"b\")\n     );\n \n     t!(\"a//b\",\n@@ -727,7 +754,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"a\"),\n     file_name: Some(\"b\"),\n     file_stem: Some(\"b\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"b\")\n     );\n \n     t!(\"a/./b\",\n@@ -737,7 +765,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"a\"),\n     file_name: Some(\"b\"),\n     file_stem: Some(\"b\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"b\")\n     );\n \n     t!(\"a/b/c\",\n@@ -747,7 +776,9 @@ pub fn test_decompositions_windows() {\n        parent: Some(\"a/b\"),\n        file_name: Some(\"c\"),\n        file_stem: Some(\"c\"),\n-       extension: None);\n+       extension: None,\n+       file_prefix: Some(\"c\")\n+    );\n \n     t!(\"a\\\\b\\\\c\",\n     iter: [\"a\", \"b\", \"c\"],\n@@ -756,7 +787,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"a\\\\b\"),\n     file_name: Some(\"c\"),\n     file_stem: Some(\"c\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"c\")\n     );\n \n     t!(\"\\\\a\",\n@@ -766,7 +798,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\"),\n     file_name: Some(\"a\"),\n     file_stem: Some(\"a\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"a\")\n     );\n \n     t!(\"c:\\\\foo.txt\",\n@@ -776,7 +809,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"c:\\\\\"),\n     file_name: Some(\"foo.txt\"),\n     file_stem: Some(\"foo\"),\n-    extension: Some(\"txt\")\n+    extension: Some(\"txt\"),\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"\\\\\\\\server\\\\share\\\\foo.txt\",\n@@ -786,7 +820,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\server\\\\share\\\\\"),\n     file_name: Some(\"foo.txt\"),\n     file_stem: Some(\"foo\"),\n-    extension: Some(\"txt\")\n+    extension: Some(\"txt\"),\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"\\\\\\\\server\\\\share\",\n@@ -796,7 +831,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\server\",\n@@ -806,7 +842,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\"),\n     file_name: Some(\"server\"),\n     file_stem: Some(\"server\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"server\")\n     );\n \n     t!(\"\\\\\\\\?\\\\bar\\\\foo.txt\",\n@@ -816,7 +853,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\?\\\\bar\\\\\"),\n     file_name: Some(\"foo.txt\"),\n     file_stem: Some(\"foo\"),\n-    extension: Some(\"txt\")\n+    extension: Some(\"txt\"),\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"\\\\\\\\?\\\\bar\",\n@@ -826,7 +864,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\\",\n@@ -836,7 +875,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\UNC\\\\server\\\\share\\\\foo.txt\",\n@@ -846,7 +886,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\?\\\\UNC\\\\server\\\\share\\\\\"),\n     file_name: Some(\"foo.txt\"),\n     file_stem: Some(\"foo\"),\n-    extension: Some(\"txt\")\n+    extension: Some(\"txt\"),\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"\\\\\\\\?\\\\UNC\\\\server\",\n@@ -856,7 +897,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\UNC\\\\\",\n@@ -866,7 +908,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\C:\\\\foo.txt\",\n@@ -876,7 +919,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\?\\\\C:\\\\\"),\n     file_name: Some(\"foo.txt\"),\n     file_stem: Some(\"foo\"),\n-    extension: Some(\"txt\")\n+    extension: Some(\"txt\"),\n+    file_prefix: Some(\"foo\")\n     );\n \n     t!(\"\\\\\\\\?\\\\C:\\\\\",\n@@ -886,7 +930,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\C:\",\n@@ -896,7 +941,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\foo/bar\",\n@@ -906,7 +952,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\C:/foo\",\n@@ -916,7 +963,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\.\\\\foo\\\\bar\",\n@@ -926,7 +974,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\.\\\\foo\\\\\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"\\\\\\\\.\\\\foo\",\n@@ -936,7 +985,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\.\\\\foo/bar\",\n@@ -946,7 +996,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\.\\\\foo/\"),\n     file_name: Some(\"bar\"),\n     file_stem: Some(\"bar\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"bar\")\n     );\n \n     t!(\"\\\\\\\\.\\\\foo\\\\bar/baz\",\n@@ -956,7 +1007,8 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\.\\\\foo\\\\bar\"),\n     file_name: Some(\"baz\"),\n     file_stem: Some(\"baz\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"baz\")\n     );\n \n     t!(\"\\\\\\\\.\\\\\",\n@@ -966,7 +1018,8 @@ pub fn test_decompositions_windows() {\n     parent: None,\n     file_name: None,\n     file_stem: None,\n-    extension: None\n+    extension: None,\n+    file_prefix: None\n     );\n \n     t!(\"\\\\\\\\?\\\\a\\\\b\\\\\",\n@@ -976,7 +1029,41 @@ pub fn test_decompositions_windows() {\n     parent: Some(\"\\\\\\\\?\\\\a\\\\\"),\n     file_name: Some(\"b\"),\n     file_stem: Some(\"b\"),\n-    extension: None\n+    extension: None,\n+    file_prefix: Some(\"b\")\n+    );\n+\n+    t!(\"\\\\\\\\?\\\\C:\\\\foo.txt.zip\",\n+    iter: [\"\\\\\\\\?\\\\C:\", \"\\\\\", \"foo.txt.zip\"],\n+    has_root: true,\n+    is_absolute: true,\n+    parent: Some(\"\\\\\\\\?\\\\C:\\\\\"),\n+    file_name: Some(\"foo.txt.zip\"),\n+    file_stem: Some(\"foo.txt\"),\n+    extension: Some(\"zip\"),\n+    file_prefix: Some(\"foo\")\n+    );\n+\n+    t!(\"\\\\\\\\?\\\\C:\\\\.foo.txt.zip\",\n+    iter: [\"\\\\\\\\?\\\\C:\", \"\\\\\", \".foo.txt.zip\"],\n+    has_root: true,\n+    is_absolute: true,\n+    parent: Some(\"\\\\\\\\?\\\\C:\\\\\"),\n+    file_name: Some(\".foo.txt.zip\"),\n+    file_stem: Some(\".foo.txt\"),\n+    extension: Some(\"zip\"),\n+    file_prefix: Some(\".foo\")\n+    );\n+\n+    t!(\"\\\\\\\\?\\\\C:\\\\.foo\",\n+    iter: [\"\\\\\\\\?\\\\C:\", \"\\\\\", \".foo\"],\n+    has_root: true,\n+    is_absolute: true,\n+    parent: Some(\"\\\\\\\\?\\\\C:\\\\\"),\n+    file_name: Some(\".foo\"),\n+    file_stem: Some(\".foo\"),\n+    extension: None,\n+    file_prefix: Some(\".foo\")\n     );\n }\n "}]}