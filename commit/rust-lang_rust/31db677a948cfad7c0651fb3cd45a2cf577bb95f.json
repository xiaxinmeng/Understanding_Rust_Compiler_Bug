{"sha": "31db677a948cfad7c0651fb3cd45a2cf577bb95f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxZGI2NzdhOTQ4Y2ZhZDdjMDY1MWZiM2NkNDVhMmNmNTc3YmI5NWY=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-10-22T14:24:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-22T14:24:10Z"}, "message": "Merge #6319\n\n6319: Properly identify camel cased acronyms as UpperCamelCase r=popzxc a=ArifRoktim\n\nThis closes #6305.\n\nCo-authored-by: Arif Roktim <arifrroktim@gmail.com>", "tree": {"sha": "0e4e1e8575616e272d1bf4ca5da881fe4f152c3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e4e1e8575616e272d1bf4ca5da881fe4f152c3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31db677a948cfad7c0651fb3cd45a2cf577bb95f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfkZYKCRBK7hj4Ov3rIwAAdHIIAApitkEV2Zo6UFzrGZieq2SL\nwL2eDnZgc9VBMWEw7C+er8dgYvoIMYb6896Dl3Mz4J9ux//jU5KbKDTh5Ky7Zh0h\n3IZh+zch/BwOV1NkWX3v5ngoGr9RGyvUFKvpL3gOggxS0BU+iQ6XblSP23eyrjhW\nluC0OC3554CApunlzgYwuAVtxJQFXMO8ffuz10Bi0DP8KemIZaLiECtP82P2KF+s\nOh7WNpySwcIROqqBLHpyZucjJaX5DtgUG3SnNyM40NKsOBKz+1vVPv0DEN45xurz\nD7CBpiL6dqo8nGNRofE+pwjva59Q9etHJNHDdEAdUApMtihiqhQIPpaUq4Em1IY=\n=iBDA\n-----END PGP SIGNATURE-----\n", "payload": "tree 0e4e1e8575616e272d1bf4ca5da881fe4f152c3b\nparent ab53bb8718bb93b72085c19337f7e766ea7196f6\nparent 854b1331810b503e266be96708ed753db2677865\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1603376650 +0000\ncommitter GitHub <noreply@github.com> 1603376650 +0000\n\nMerge #6319\n\n6319: Properly identify camel cased acronyms as UpperCamelCase r=popzxc a=ArifRoktim\n\nThis closes #6305.\n\nCo-authored-by: Arif Roktim <arifrroktim@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31db677a948cfad7c0651fb3cd45a2cf577bb95f", "html_url": "https://github.com/rust-lang/rust/commit/31db677a948cfad7c0651fb3cd45a2cf577bb95f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31db677a948cfad7c0651fb3cd45a2cf577bb95f/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ab53bb8718bb93b72085c19337f7e766ea7196f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/ab53bb8718bb93b72085c19337f7e766ea7196f6", "html_url": "https://github.com/rust-lang/rust/commit/ab53bb8718bb93b72085c19337f7e766ea7196f6"}, {"sha": "854b1331810b503e266be96708ed753db2677865", "url": "https://api.github.com/repos/rust-lang/rust/commits/854b1331810b503e266be96708ed753db2677865", "html_url": "https://github.com/rust-lang/rust/commit/854b1331810b503e266be96708ed753db2677865"}], "stats": {"total": 37, "additions": 34, "deletions": 3}, "files": [{"sha": "f179c62b7f36456810f802ec6fef6117997652f5", "filename": "crates/hir_ty/src/diagnostics/decl_check.rs", "status": "modified", "additions": 26, "deletions": 2, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/31db677a948cfad7c0651fb3cd45a2cf577bb95f/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31db677a948cfad7c0651fb3cd45a2cf577bb95f/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check.rs?ref=31db677a948cfad7c0651fb3cd45a2cf577bb95f", "patch": "@@ -708,11 +708,23 @@ fn foo() {\n     }\n \n     #[test]\n-    fn incorrect_struct_name() {\n+    fn incorrect_struct_names() {\n         check_diagnostics(\n             r#\"\n struct non_camel_case_name {}\n     // ^^^^^^^^^^^^^^^^^^^ Structure `non_camel_case_name` should have CamelCase name, e.g. `NonCamelCaseName`\n+\n+struct SCREAMING_CASE {}\n+    // ^^^^^^^^^^^^^^ Structure `SCREAMING_CASE` should have CamelCase name, e.g. `ScreamingCase`\n+\"#,\n+        );\n+    }\n+\n+    #[test]\n+    fn no_diagnostic_for_camel_cased_acronyms_in_struct_name() {\n+        check_diagnostics(\n+            r#\"\n+struct AABB {}\n \"#,\n         );\n     }\n@@ -728,11 +740,23 @@ struct SomeStruct { SomeField: u8 }\n     }\n \n     #[test]\n-    fn incorrect_enum_name() {\n+    fn incorrect_enum_names() {\n         check_diagnostics(\n             r#\"\n enum some_enum { Val(u8) }\n   // ^^^^^^^^^ Enum `some_enum` should have CamelCase name, e.g. `SomeEnum`\n+\n+enum SOME_ENUM\n+  // ^^^^^^^^^ Enum `SOME_ENUM` should have CamelCase name, e.g. `SomeEnum`\n+\"#,\n+        );\n+    }\n+\n+    #[test]\n+    fn no_diagnostic_for_camel_cased_acronyms_in_enum_name() {\n+        check_diagnostics(\n+            r#\"\n+enum AABB {}\n \"#,\n         );\n     }"}, {"sha": "324d607658a8849709704f61acb6c4c96586c15c", "filename": "crates/hir_ty/src/diagnostics/decl_check/case_conv.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/31db677a948cfad7c0651fb3cd45a2cf577bb95f/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check%2Fcase_conv.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31db677a948cfad7c0651fb3cd45a2cf577bb95f/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check%2Fcase_conv.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_ty%2Fsrc%2Fdiagnostics%2Fdecl_check%2Fcase_conv.rs?ref=31db677a948cfad7c0651fb3cd45a2cf577bb95f", "patch": "@@ -29,7 +29,13 @@ fn detect_case(ident: &str) -> DetectedCase {\n \n     if has_uppercase {\n         if !has_lowercase {\n-            DetectedCase::UpperSnakeCase\n+            if has_underscore {\n+                DetectedCase::UpperSnakeCase\n+            } else {\n+                // It has uppercase only and no underscores. Ex: \"AABB\"\n+                // This is a camel cased acronym.\n+                DetectedCase::UpperCamelCase\n+            }\n         } else if !has_underscore {\n             if first_lowercase {\n                 DetectedCase::LowerCamelCase\n@@ -180,6 +186,7 @@ mod tests {\n         check(to_camel_case, \"Weird_Case\", expect![[\"WeirdCase\"]]);\n         check(to_camel_case, \"name\", expect![[\"Name\"]]);\n         check(to_camel_case, \"A\", expect![[\"\"]]);\n+        check(to_camel_case, \"AABB\", expect![[\"\"]]);\n     }\n \n     #[test]"}]}