{"sha": "0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlZDFlYzlmOWViODE3NDI3Mzg2NzM0M2QwMTE3N2I1YWMxM2ZmNGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-05-18T09:32:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-05-18T09:32:28Z"}, "message": "Auto merge of #42055 - michaelwoerister:reenable-incremental-cc, r=nikomatsakis\n\nEnable cross-crate incremental compilation by default.\n\nNow that direct metadata hashing has been implemented for a while and we haven't seen any problems with it over at [rust-icci](https://travis-ci.org/rust-icci/), let's re-enable cross crate support for incremental compilation again.\n\nr? @nikomatsakis", "tree": {"sha": "048614ee4463384070550dd16beab2eb7a7b6e99", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/048614ee4463384070550dd16beab2eb7a7b6e99"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "html_url": "https://github.com/rust-lang/rust/commit/0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6af8c6c7d1173f68addbf51560e6a009b30c9a93", "url": "https://api.github.com/repos/rust-lang/rust/commits/6af8c6c7d1173f68addbf51560e6a009b30c9a93", "html_url": "https://github.com/rust-lang/rust/commit/6af8c6c7d1173f68addbf51560e6a009b30c9a93"}, {"sha": "1b8df3d7fb1f575ed12c13a79455af6c7de05632", "url": "https://api.github.com/repos/rust-lang/rust/commits/1b8df3d7fb1f575ed12c13a79455af6c7de05632", "html_url": "https://github.com/rust-lang/rust/commit/1b8df3d7fb1f575ed12c13a79455af6c7de05632"}], "stats": {"total": 23, "additions": 4, "deletions": 19}, "files": [{"sha": "e3b43b3290fc9e4994c080464bf6a6a909aacca1", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -963,7 +963,7 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n           \"attempt to recover from parse errors (experimental)\"),\n     incremental: Option<String> = (None, parse_opt_string, [UNTRACKED],\n           \"enable incremental compilation (experimental)\"),\n-    incremental_cc: bool = (false, parse_bool, [UNTRACKED],\n+    incremental_cc: bool = (true, parse_bool, [UNTRACKED],\n           \"enable cross-crate incremental compilation (even more experimental)\"),\n     incremental_info: bool = (false, parse_bool, [UNTRACKED],\n         \"print high-level information about incremental reuse (or the lack thereof)\"),"}, {"sha": "adc2b23441ef817355c6af0d2ff05a4cb878c388", "filename": "src/test/incremental/add_private_fn_at_krate_root_cc/auxiliary/point.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fadd_private_fn_at_krate_root_cc%2Fauxiliary%2Fpoint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fadd_private_fn_at_krate_root_cc%2Fauxiliary%2Fpoint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fadd_private_fn_at_krate_root_cc%2Fauxiliary%2Fpoint.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n pub struct Point {\n     pub x: f32,\n     pub y: f32,"}, {"sha": "d802c9a8352eb675af47f076a0036fa7d2dc9ac8", "filename": "src/test/incremental/callee_caller_cross_crate/auxiliary/a.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fcallee_caller_cross_crate%2Fauxiliary%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fcallee_caller_cross_crate%2Fauxiliary%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fcallee_caller_cross_crate%2Fauxiliary%2Fa.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n #![crate_type=\"rlib\"]\n \n #[cfg(rpass1)]"}, {"sha": "dcc1ced635fbf8b6a08a7c03410ef7eff95f2867", "filename": "src/test/incremental/change_private_fn_cc/auxiliary/point.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fchange_private_fn_cc%2Fauxiliary%2Fpoint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fchange_private_fn_cc%2Fauxiliary%2Fpoint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fchange_private_fn_cc%2Fauxiliary%2Fpoint.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n pub struct Point {\n     pub x: f32,\n     pub y: f32,"}, {"sha": "8df1cf54da2b97c3e34abb97abcba9b802f2b239", "filename": "src/test/incremental/change_private_impl_method_cc/auxiliary/point.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fchange_private_impl_method_cc%2Fauxiliary%2Fpoint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fchange_private_impl_method_cc%2Fauxiliary%2Fpoint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fchange_private_impl_method_cc%2Fauxiliary%2Fpoint.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n pub struct Point {\n     pub x: f32,\n     pub y: f32,"}, {"sha": "1483bf92c9708ec30bd567f7a37563c37f144ca2", "filename": "src/test/incremental/remapped_paths_cc/auxiliary/extern_crate.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fremapped_paths_cc%2Fauxiliary%2Fextern_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fremapped_paths_cc%2Fauxiliary%2Fextern_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fremapped_paths_cc%2Fauxiliary%2Fextern_crate.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -10,9 +10,9 @@\n \n // ignore-tidy-linelength\n \n-//[rpass1] compile-flags: -g -Zincremental-cc\n-//[rpass2] compile-flags: -g -Zincremental-cc\n-//[rpass3] compile-flags: -g -Zincremental-cc -Zremap-path-prefix-from={{src-base}} -Zremap-path-prefix-to=/the/src\n+//[rpass1] compile-flags: -g\n+//[rpass2] compile-flags: -g\n+//[rpass3] compile-flags: -g -Zremap-path-prefix-from={{src-base}} -Zremap-path-prefix-to=/the/src\n \n #![feature(rustc_attrs)]\n #![crate_type=\"rlib\"]"}, {"sha": "4d84e844dedbbc6ff84839eff5207d872072176d", "filename": "src/test/incremental/remove-private-item-cross-crate/auxiliary/a.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fremove-private-item-cross-crate%2Fauxiliary%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fremove-private-item-cross-crate%2Fauxiliary%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fremove-private-item-cross-crate%2Fauxiliary%2Fa.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n #![allow(warnings)]\n #![crate_name = \"a\"]\n #![crate_type = \"rlib\"]"}, {"sha": "ff5fd634714497bf53a38f11bc1aa323844a5a8c", "filename": "src/test/incremental/rlib_cross_crate/auxiliary/a.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Frlib_cross_crate%2Fauxiliary%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Frlib_cross_crate%2Fauxiliary%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Frlib_cross_crate%2Fauxiliary%2Fa.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,7 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n // no-prefer-dynamic\n \n #![crate_type=\"rlib\"]"}, {"sha": "2ddcaf157210dfef38201bad5d729743d5527db4", "filename": "src/test/incremental/struct_change_field_type_cross_crate/auxiliary/a.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fstruct_change_field_type_cross_crate%2Fauxiliary%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Fstruct_change_field_type_cross_crate%2Fauxiliary%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Fstruct_change_field_type_cross_crate%2Fauxiliary%2Fa.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n #![crate_type=\"rlib\"]\n \n  #[cfg(rpass1)]"}, {"sha": "e1dba1317703d6c448b969d1327a3884b8cc113c", "filename": "src/test/incremental/type_alias_cross_crate/auxiliary/a.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Ftype_alias_cross_crate%2Fauxiliary%2Fa.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ed1ec9f9eb8174273867343d01177b5ac13ff4c/src%2Ftest%2Fincremental%2Ftype_alias_cross_crate%2Fauxiliary%2Fa.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fincremental%2Ftype_alias_cross_crate%2Fauxiliary%2Fa.rs?ref=0ed1ec9f9eb8174273867343d01177b5ac13ff4c", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z incremental-cc\n-\n #![crate_type=\"rlib\"]\n \n #[cfg(rpass1)]"}]}