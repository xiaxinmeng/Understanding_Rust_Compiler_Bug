{"sha": "bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "node_id": "C_kwDOAAsO6NoAKGJjYmIwN2Y0ZGMzYzE0N2I5ZjQyNTlkZjdmOGM2YThiMmJmOTE3Mjk", "commit": {"author": {"name": "Alex Macleod", "email": "alex@macleod.io", "date": "2022-02-17T11:20:47Z"}, "committer": {"name": "Alex Macleod", "email": "alex@macleod.io", "date": "2022-02-25T18:22:55Z"}, "message": "Rename RecursiveFormatImpl to FormatImpl", "tree": {"sha": "01849e7c364c44c9778247ba638f1d84f60e7847", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01849e7c364c44c9778247ba638f1d84f60e7847"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "html_url": "https://github.com/rust-lang/rust/commit/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/comments", "author": {"login": "Alexendoo", "id": 1830331, "node_id": "MDQ6VXNlcjE4MzAzMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1830331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexendoo", "html_url": "https://github.com/Alexendoo", "followers_url": "https://api.github.com/users/Alexendoo/followers", "following_url": "https://api.github.com/users/Alexendoo/following{/other_user}", "gists_url": "https://api.github.com/users/Alexendoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexendoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexendoo/subscriptions", "organizations_url": "https://api.github.com/users/Alexendoo/orgs", "repos_url": "https://api.github.com/users/Alexendoo/repos", "events_url": "https://api.github.com/users/Alexendoo/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexendoo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Alexendoo", "id": 1830331, "node_id": "MDQ6VXNlcjE4MzAzMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1830331?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Alexendoo", "html_url": "https://github.com/Alexendoo", "followers_url": "https://api.github.com/users/Alexendoo/followers", "following_url": "https://api.github.com/users/Alexendoo/following{/other_user}", "gists_url": "https://api.github.com/users/Alexendoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Alexendoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Alexendoo/subscriptions", "organizations_url": "https://api.github.com/users/Alexendoo/orgs", "repos_url": "https://api.github.com/users/Alexendoo/repos", "events_url": "https://api.github.com/users/Alexendoo/events{/privacy}", "received_events_url": "https://api.github.com/users/Alexendoo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4417f78e91eca7b2de09a820ea29efc0b2629901", "url": "https://api.github.com/repos/rust-lang/rust/commits/4417f78e91eca7b2de09a820ea29efc0b2629901", "html_url": "https://github.com/rust-lang/rust/commit/4417f78e91eca7b2de09a820ea29efc0b2629901"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "02b2d721939934f1e9091405ff420784d78445f7", "filename": "clippy_lints/src/format_impl.rs", "status": "renamed", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Fformat_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Fformat_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fformat_impl.rs?ref=bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "patch": "@@ -21,7 +21,6 @@ impl FormatTrait {\n         }\n     }\n }\n-\n declare_clippy_lint! {\n     /// ### What it does\n     /// Checks for format trait implementations (e.g. `Display`) with a recursive call to itself\n@@ -62,22 +61,22 @@ declare_clippy_lint! {\n }\n \n #[derive(Default)]\n-pub struct RecursiveFormatImpl {\n+pub struct FormatImpl {\n     // Whether we are inside Display or Debug trait impl - None for neither\n     format_trait_impl: Option<FormatTrait>,\n }\n \n-impl RecursiveFormatImpl {\n+impl FormatImpl {\n     pub fn new() -> Self {\n         Self {\n             format_trait_impl: None,\n         }\n     }\n }\n \n-impl_lint_pass!(RecursiveFormatImpl => [RECURSIVE_FORMAT_IMPL]);\n+impl_lint_pass!(FormatImpl => [RECURSIVE_FORMAT_IMPL]);\n \n-impl<'tcx> LateLintPass<'tcx> for RecursiveFormatImpl {\n+impl<'tcx> LateLintPass<'tcx> for FormatImpl {\n     fn check_item(&mut self, cx: &LateContext<'_>, item: &Item<'_>) {\n         if let Some(format_trait_impl) = is_format_trait_impl(cx, item) {\n             self.format_trait_impl = Some(format_trait_impl);", "previous_filename": "clippy_lints/src/recursive_format_impl.rs"}, {"sha": "b2d9889ba86520c46d9277115548a7be892ca77d", "filename": "clippy_lints/src/lib.register_all.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_all.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_all.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_all.rs?ref=bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "patch": "@@ -68,6 +68,7 @@ store.register_group(true, \"clippy::all\", Some(\"clippy_all\"), vec![\n     LintId::of(format::USELESS_FORMAT),\n     LintId::of(format_args::FORMAT_IN_FORMAT_ARGS),\n     LintId::of(format_args::TO_STRING_IN_FORMAT_ARGS),\n+    LintId::of(format_impl::RECURSIVE_FORMAT_IMPL),\n     LintId::of(formatting::POSSIBLE_MISSING_COMMA),\n     LintId::of(formatting::SUSPICIOUS_ASSIGNMENT_FORMATTING),\n     LintId::of(formatting::SUSPICIOUS_ELSE_FORMATTING),\n@@ -244,7 +245,6 @@ store.register_group(true, \"clippy::all\", Some(\"clippy_all\"), vec![\n     LintId::of(ranges::MANUAL_RANGE_CONTAINS),\n     LintId::of(ranges::RANGE_ZIP_WITH_LEN),\n     LintId::of(ranges::REVERSED_EMPTY_RANGES),\n-    LintId::of(recursive_format_impl::RECURSIVE_FORMAT_IMPL),\n     LintId::of(redundant_clone::REDUNDANT_CLONE),\n     LintId::of(redundant_closure_call::REDUNDANT_CLOSURE_CALL),\n     LintId::of(redundant_field_names::REDUNDANT_FIELD_NAMES),"}, {"sha": "35b1e644a8a71d63bd9afa2375a0d089cec14bb0", "filename": "clippy_lints/src/lib.register_correctness.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_correctness.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_correctness.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_correctness.rs?ref=bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "patch": "@@ -24,6 +24,7 @@ store.register_group(true, \"clippy::correctness\", Some(\"clippy_correctness\"), ve\n     LintId::of(enum_clike::ENUM_CLIKE_UNPORTABLE_VARIANT),\n     LintId::of(eq_op::EQ_OP),\n     LintId::of(erasing_op::ERASING_OP),\n+    LintId::of(format_impl::RECURSIVE_FORMAT_IMPL),\n     LintId::of(formatting::POSSIBLE_MISSING_COMMA),\n     LintId::of(functions::NOT_UNSAFE_PTR_ARG_DEREF),\n     LintId::of(if_let_mutex::IF_LET_MUTEX),\n@@ -52,7 +53,6 @@ store.register_group(true, \"clippy::correctness\", Some(\"clippy_correctness\"), ve\n     LintId::of(ptr::INVALID_NULL_PTR_USAGE),\n     LintId::of(ptr::MUT_FROM_REF),\n     LintId::of(ranges::REVERSED_EMPTY_RANGES),\n-    LintId::of(recursive_format_impl::RECURSIVE_FORMAT_IMPL),\n     LintId::of(regex::INVALID_REGEX),\n     LintId::of(self_assignment::SELF_ASSIGNMENT),\n     LintId::of(serde_api::SERDE_API_MISUSE),"}, {"sha": "1243fc978b7cb9851f4db25fd0b3d03e6fa2e2ed", "filename": "clippy_lints/src/lib.register_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.register_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.register_lints.rs?ref=bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "patch": "@@ -152,6 +152,7 @@ store.register_lints(&[\n     format::USELESS_FORMAT,\n     format_args::FORMAT_IN_FORMAT_ARGS,\n     format_args::TO_STRING_IN_FORMAT_ARGS,\n+    format_impl::RECURSIVE_FORMAT_IMPL,\n     formatting::POSSIBLE_MISSING_COMMA,\n     formatting::SUSPICIOUS_ASSIGNMENT_FORMATTING,\n     formatting::SUSPICIOUS_ELSE_FORMATTING,\n@@ -417,7 +418,6 @@ store.register_lints(&[\n     ranges::RANGE_PLUS_ONE,\n     ranges::RANGE_ZIP_WITH_LEN,\n     ranges::REVERSED_EMPTY_RANGES,\n-    recursive_format_impl::RECURSIVE_FORMAT_IMPL,\n     redundant_clone::REDUNDANT_CLONE,\n     redundant_closure_call::REDUNDANT_CLOSURE_CALL,\n     redundant_else::REDUNDANT_ELSE,"}, {"sha": "230e2b2ccdfb597e8fe293ce666587f746ad22fb", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=bcbb07f4dc3c147b9f4259df7f8c6a8b2bf91729", "patch": "@@ -226,6 +226,7 @@ mod float_literal;\n mod floating_point_arithmetic;\n mod format;\n mod format_args;\n+mod format_impl;\n mod formatting;\n mod from_over_into;\n mod from_str_radix_10;\n@@ -333,7 +334,6 @@ mod ptr_eq;\n mod ptr_offset_with_cast;\n mod question_mark;\n mod ranges;\n-mod recursive_format_impl;\n mod redundant_clone;\n mod redundant_closure_call;\n mod redundant_else;\n@@ -705,7 +705,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     store.register_late_pass(|| Box::new(modulo_arithmetic::ModuloArithmetic));\n     store.register_early_pass(|| Box::new(reference::DerefAddrOf));\n     store.register_early_pass(|| Box::new(double_parens::DoubleParens));\n-    store.register_late_pass(|| Box::new(recursive_format_impl::RecursiveFormatImpl::new()));\n+    store.register_late_pass(|| Box::new(format_impl::FormatImpl::new()));\n     store.register_early_pass(|| Box::new(unsafe_removed_from_name::UnsafeNameRemoval));\n     store.register_early_pass(|| Box::new(else_if_without_else::ElseIfWithoutElse));\n     store.register_early_pass(|| Box::new(int_plus_one::IntPlusOne));"}]}