{"sha": "6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhNzU1ZWQ4M2E1ODNkMWY3MGE1ZmJjZmYyZDQ5MzNiNTI2MjhjZmU=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-12-19T09:48:34Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-12-20T09:15:38Z"}, "message": "remove more imports", "tree": {"sha": "2880222c172a15739afc4a69764de4d233165ff4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2880222c172a15739afc4a69764de4d233165ff4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "html_url": "https://github.com/rust-lang/rust/commit/6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a755ed83a583d1f70a5fbcff2d4933b52628cfe/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79596abcaf50019810f7fa01a264100472359f8a", "url": "https://api.github.com/repos/rust-lang/rust/commits/79596abcaf50019810f7fa01a264100472359f8a", "html_url": "https://github.com/rust-lang/rust/commit/79596abcaf50019810f7fa01a264100472359f8a"}], "stats": {"total": 25, "additions": 2, "deletions": 23}, "files": [{"sha": "86cf29540e42f21d2588599c55181e2fbd6d0d0b", "filename": "crates/ra_lsp_server/src/path_map.rs", "status": "modified", "additions": 1, "deletions": 22, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/6a755ed83a583d1f70a5fbcff2d4933b52628cfe/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a755ed83a583d1f70a5fbcff2d4933b52628cfe/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fpath_map.rs?ref=6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "patch": "@@ -4,7 +4,7 @@ use std::{\n };\n \n use im;\n-use ra_analysis::{FileId, FileResolver};\n+use ra_analysis::{FileId};\n use relative_path::RelativePath;\n \n #[derive(Debug, Clone, Copy, PartialEq, Eq)]\n@@ -64,27 +64,6 @@ impl PathMap {\n     }\n }\n \n-impl FileResolver for PathMap {\n-    fn file_stem(&self, file_id: FileId) -> String {\n-        self.get_path(file_id)\n-            .file_stem()\n-            .unwrap()\n-            .to_str()\n-            .unwrap()\n-            .to_string()\n-    }\n-\n-    fn resolve(&self, file_id: FileId, path: &RelativePath) -> Option<FileId> {\n-        let path = path.to_path(&self.get_path(file_id));\n-        let path = normalize(&path);\n-        self.get_id(&path)\n-    }\n-\n-    fn debug_path(&self, file_id: FileId) -> Option<PathBuf> {\n-        Some(self.get_path(file_id).to_owned())\n-    }\n-}\n-\n fn normalize(path: &Path) -> PathBuf {\n     let mut components = path.components().peekable();\n     let mut ret = if let Some(c @ Component::Prefix(..)) = components.peek().cloned() {"}, {"sha": "c0d1338a25c0b30d8d5b6a6d8e0b20a911ea1bce", "filename": "crates/ra_lsp_server/src/server_world.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6a755ed83a583d1f70a5fbcff2d4933b52628cfe/crates%2Fra_lsp_server%2Fsrc%2Fserver_world.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a755ed83a583d1f70a5fbcff2d4933b52628cfe/crates%2Fra_lsp_server%2Fsrc%2Fserver_world.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fserver_world.rs?ref=6a755ed83a583d1f70a5fbcff2d4933b52628cfe", "patch": "@@ -6,7 +6,7 @@ use std::{\n \n use languageserver_types::Url;\n use ra_analysis::{\n-    Analysis, AnalysisChange, AnalysisHost, CrateGraph, FileId, FileResolver, LibraryData,\n+    Analysis, AnalysisChange, AnalysisHost, CrateGraph, FileId, LibraryData,\n };\n use rustc_hash::FxHashMap;\n use failure::{bail, format_err};"}]}