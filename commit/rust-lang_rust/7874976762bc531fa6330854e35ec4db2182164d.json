{"sha": "7874976762bc531fa6330854e35ec4db2182164d", "node_id": "C_kwDOAAsO6NoAKDc4NzQ5NzY3NjJiYzUzMWZhNjMzMDg1NGUzNWVjNGRiMjE4MjE2NGQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-09-29T08:27:03Z"}, "committer": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-09-29T08:27:03Z"}, "message": "Stabilize the `instruction_set` feature\n\nSigned-off-by: Yuki Okushi <jtitor@2k36.org>", "tree": {"sha": "a9b42ef0e2de52d46daa448ae80f62ab30925ddf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9b42ef0e2de52d46daa448ae80f62ab30925ddf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7874976762bc531fa6330854e35ec4db2182164d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAgHhkVL0/9C9iZr1PMss4Lz7KmAH\nPO6dU/JqcK/z29OHQAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQKoEC9yzQzL+nOBUWtqY98CocNIEyBzZIDWDyVRtTCnFznp/47pahOv6eFYbv0vsNA\nqT8pjYESG9NE+9Uq3aNwM=\n-----END SSH SIGNATURE-----", "payload": "tree a9b42ef0e2de52d46daa448ae80f62ab30925ddf\nparent ce7f0f1aa0f02c45cad0749e63f3086234b1f422\nauthor Yuki Okushi <jtitor@2k36.org> 1664440023 +0900\ncommitter Yuki Okushi <jtitor@2k36.org> 1664440023 +0900\n\nStabilize the `instruction_set` feature\n\nSigned-off-by: Yuki Okushi <jtitor@2k36.org>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7874976762bc531fa6330854e35ec4db2182164d", "html_url": "https://github.com/rust-lang/rust/commit/7874976762bc531fa6330854e35ec4db2182164d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7874976762bc531fa6330854e35ec4db2182164d/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ce7f0f1aa0f02c45cad0749e63f3086234b1f422", "url": "https://api.github.com/repos/rust-lang/rust/commits/ce7f0f1aa0f02c45cad0749e63f3086234b1f422", "html_url": "https://github.com/rust-lang/rust/commit/ce7f0f1aa0f02c45cad0749e63f3086234b1f422"}], "stats": {"total": 61, "additions": 9, "deletions": 52}, "files": [{"sha": "4f58e42b6aceb02bcd24b6aadd7abe527a0319cb", "filename": "compiler/rustc_feature/src/accepted.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Faccepted.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Faccepted.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Faccepted.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -185,6 +185,8 @@ declare_features! (\n     (accepted, infer_outlives_requirements, \"1.30.0\", Some(44493), None),\n     /// Allows irrefutable patterns in `if let` and `while let` statements (RFC 2086).\n     (accepted, irrefutable_let_patterns, \"1.33.0\", Some(44495), None),\n+    /// Allows `#[instruction_set(_)]` attribute.\n+    (accepted, isa_attribute, \"CURRENT_RUSTC_VERSION\", Some(74727), None),\n     /// Allows some increased flexibility in the name resolution rules,\n     /// especially around globs and shadowing (RFC 1560).\n     (accepted, item_like_imports, \"1.15.0\", Some(35120), None),"}, {"sha": "e9b948bfe4da7801d9ecae46253dbd9a794b6d5e", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -426,8 +426,6 @@ declare_features! (\n     (incomplete, inline_const_pat, \"1.58.0\", Some(76001), None),\n     /// Allows using `pointer` and `reference` in intra-doc links\n     (active, intra_doc_pointers, \"1.51.0\", Some(80896), None),\n-    /// Allows `#[instruction_set(_)]` attribute\n-    (active, isa_attribute, \"1.48.0\", Some(74727), None),\n     // Allows setting the threshold for the `large_assignments` lint.\n     (active, large_assignments, \"1.52.0\", Some(83518), None),\n     /// Allows `if/while p && let q = r && ...` chains."}, {"sha": "3c62bdcaadbdc607b52cb6944ced38c5b796f5c2", "filename": "compiler/rustc_feature/src/builtin_attrs.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -384,6 +384,7 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n     ungated!(no_builtins, CrateLevel, template!(Word), WarnFollowing),\n     ungated!(target_feature, Normal, template!(List: r#\"enable = \"name\"\"#), DuplicatesOk),\n     ungated!(track_caller, Normal, template!(Word), WarnFollowing),\n+    ungated!(instruction_set, Normal, template!(List: \"set\"), ErrorPreceding),\n     gated!(\n         no_sanitize, Normal,\n         template!(List: \"address, memory, thread\"), DuplicatesOk,\n@@ -445,11 +446,6 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n         optimize, Normal, template!(List: \"size|speed\"), ErrorPreceding, optimize_attribute,\n         experimental!(optimize),\n     ),\n-    // RFC 2867\n-    gated!(\n-        instruction_set, Normal, template!(List: \"set\"), ErrorPreceding,\n-        isa_attribute, experimental!(instruction_set)\n-    ),\n \n     gated!(\n         ffi_returns_twice, Normal, template!(Word), WarnFollowing, experimental!(ffi_returns_twice)"}, {"sha": "809b0d1555ae476cc1c1d631f9b18ec32450db19", "filename": "src/test/ui/asm/issue-92378.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Fasm%2Fissue-92378.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Fasm%2Fissue-92378.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fissue-92378.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -3,7 +3,7 @@\n // needs-asm-support\n // build-pass\n \n-#![feature(no_core, lang_items, rustc_attrs, isa_attribute)]\n+#![feature(no_core, lang_items, rustc_attrs)]\n #![no_core]\n #![crate_type = \"rlib\"]\n "}, {"sha": "74653886d4154d3066607874a8fbb88f427ffed1", "filename": "src/test/ui/error-codes/E0778.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0778.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0778.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0778.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -1,8 +1,4 @@\n-#![feature(isa_attribute)]\n-\n #[instruction_set()] //~ ERROR\n-fn no_isa_defined() {\n-}\n+fn no_isa_defined() {}\n \n-fn main() {\n-}\n+fn main() {}"}, {"sha": "42647e5c6a1b9f57d7d6092960eefd2e49a4023f", "filename": "src/test/ui/error-codes/E0778.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0778.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0778.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0778.stderr?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -1,5 +1,5 @@\n error[E0778]: `#[instruction_set]` requires an argument\n-  --> $DIR/E0778.rs:3:1\n+  --> $DIR/E0778.rs:1:1\n    |\n LL | #[instruction_set()]\n    | ^^^^^^^^^^^^^^^^^^^^"}, {"sha": "c32dae12c9cbfefa33b65480df076c7c926541dc", "filename": "src/test/ui/error-codes/E0779.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0779.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0779.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0779.rs?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -1,6 +1,2 @@\n-#![feature(isa_attribute)]\n-\n #[instruction_set(arm::magic)] //~ ERROR\n-fn main() {\n-\n-}\n+fn main() {}"}, {"sha": "7c6a119a09615ba5a8224df897c99bd773f4395b", "filename": "src/test/ui/error-codes/E0779.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0779.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7874976762bc531fa6330854e35ec4db2182164d/src%2Ftest%2Fui%2Ferror-codes%2FE0779.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0779.stderr?ref=7874976762bc531fa6330854e35ec4db2182164d", "patch": "@@ -1,5 +1,5 @@\n error[E0779]: invalid instruction set specified\n-  --> $DIR/E0779.rs:3:1\n+  --> $DIR/E0779.rs:1:1\n    |\n LL | #[instruction_set(arm::magic)]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^"}, {"sha": "cb02a0955e913ea2846d2670de69f496fd9b0856", "filename": "src/test/ui/feature-gates/feature-gate-isa_attribute.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ce7f0f1aa0f02c45cad0749e63f3086234b1f422/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce7f0f1aa0f02c45cad0749e63f3086234b1f422/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.rs?ref=ce7f0f1aa0f02c45cad0749e63f3086234b1f422", "patch": "@@ -1,6 +0,0 @@\n-#[instruction_set]\n-//~^ ERROR the `#[instruction_set]` attribute is an experimental feature [E0658]\n-//~| ERROR malformed `instruction_set` attribute input\n-//~| ERROR must specify an instruction set [E0778]\n-fn main() {\n-}"}, {"sha": "2a95a80ca6178235e8b82c55125dec5c2be24461", "filename": "src/test/ui/feature-gates/feature-gate-isa_attribute.stderr", "status": "removed", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/ce7f0f1aa0f02c45cad0749e63f3086234b1f422/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ce7f0f1aa0f02c45cad0749e63f3086234b1f422/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-isa_attribute.stderr?ref=ce7f0f1aa0f02c45cad0749e63f3086234b1f422", "patch": "@@ -1,25 +0,0 @@\n-error: malformed `instruction_set` attribute input\n-  --> $DIR/feature-gate-isa_attribute.rs:1:1\n-   |\n-LL | #[instruction_set]\n-   | ^^^^^^^^^^^^^^^^^^ help: must be of the form: `#[instruction_set(set)]`\n-\n-error[E0658]: the `#[instruction_set]` attribute is an experimental feature\n-  --> $DIR/feature-gate-isa_attribute.rs:1:1\n-   |\n-LL | #[instruction_set]\n-   | ^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: see issue #74727 <https://github.com/rust-lang/rust/issues/74727> for more information\n-   = help: add `#![feature(isa_attribute)]` to the crate attributes to enable\n-\n-error[E0778]: must specify an instruction set\n-  --> $DIR/feature-gate-isa_attribute.rs:1:1\n-   |\n-LL | #[instruction_set]\n-   | ^^^^^^^^^^^^^^^^^^\n-\n-error: aborting due to 3 previous errors\n-\n-Some errors have detailed explanations: E0658, E0778.\n-For more information about an error, try `rustc --explain E0658`."}]}