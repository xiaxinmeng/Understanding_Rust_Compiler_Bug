{"sha": "4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlNTlhYjA5N2E4MDI2ZjliZGJhYmM3ZWRhNDMxM2QyZWZkNzBlMWU=", "commit": {"author": {"name": "Vadim Chugunov", "email": "vadimcn@gmail.com", "date": "2013-10-02T18:40:50Z"}, "committer": {"name": "Vadim Chugunov", "email": "vadimcn@gmail.com", "date": "2013-10-02T18:40:50Z"}, "message": "Package system runtime dependencies into Windows distribution.", "tree": {"sha": "55e372f50b4bfdb74fa592f235eafd6f6046004c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55e372f50b4bfdb74fa592f235eafd6f6046004c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "html_url": "https://github.com/rust-lang/rust/commit/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/comments", "author": {"login": "vadimcn", "id": 3203809, "node_id": "MDQ6VXNlcjMyMDM4MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimcn", "html_url": "https://github.com/vadimcn", "followers_url": "https://api.github.com/users/vadimcn/followers", "following_url": "https://api.github.com/users/vadimcn/following{/other_user}", "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions", "organizations_url": "https://api.github.com/users/vadimcn/orgs", "repos_url": "https://api.github.com/users/vadimcn/repos", "events_url": "https://api.github.com/users/vadimcn/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimcn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vadimcn", "id": 3203809, "node_id": "MDQ6VXNlcjMyMDM4MDk=", "avatar_url": "https://avatars.githubusercontent.com/u/3203809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vadimcn", "html_url": "https://github.com/vadimcn", "followers_url": "https://api.github.com/users/vadimcn/followers", "following_url": "https://api.github.com/users/vadimcn/following{/other_user}", "gists_url": "https://api.github.com/users/vadimcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/vadimcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vadimcn/subscriptions", "organizations_url": "https://api.github.com/users/vadimcn/orgs", "repos_url": "https://api.github.com/users/vadimcn/repos", "events_url": "https://api.github.com/users/vadimcn/events{/privacy}", "received_events_url": "https://api.github.com/users/vadimcn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a6b6c4301f924ee5d7068c49e65f488dbe93592", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a6b6c4301f924ee5d7068c49e65f488dbe93592", "html_url": "https://github.com/rust-lang/rust/commit/1a6b6c4301f924ee5d7068c49e65f488dbe93592"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "beaa6dc52150b26cbf13d35f6cd4bb37f7063993", "filename": "mk/dist.mk", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "patch": "@@ -60,6 +60,7 @@ LICENSE.txt: $(S)COPYRIGHT $(S)LICENSE-APACHE $(S)LICENSE-MIT\n \n $(PKG_EXE): rust.iss modpath.iss LICENSE.txt rust-logo.ico \\\n             $(PKG_FILES) $(CSREQ3_T_$(CFG_BUILD_TRIPLE)_H_$(CFG_BUILD_TRIPLE))\n+\t$(CFG_PYTHON) $(S)src/etc/copy-runtime-deps.py i686-pc-mingw32/stage3/bin\n \t@$(call E, ISCC: $@)\n \t$(Q)\"$(CFG_ISCC)\" $<\n endif"}, {"sha": "16155a99b690fb2c4b88307e9198d4b68c40f879", "filename": "src/etc/copy-runtime-deps.py", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/src%2Fetc%2Fcopy-runtime-deps.py", "raw_url": "https://github.com/rust-lang/rust/raw/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/src%2Fetc%2Fcopy-runtime-deps.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcopy-runtime-deps.py?ref=4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "patch": "@@ -0,0 +1,16 @@\n+#!/usr/bin/env python\n+# xfail-license\n+\n+# Copies Rust runtime dependencies to the specified directory\n+\n+import snapshot, sys, os, shutil\n+\n+def copy_runtime_deps(dest_dir):\n+    for path in snapshot.get_winnt_runtime_deps():\n+        shutil.copy(path, dest_dir)\n+\n+    lic_dest = os.path.join(dest_dir, \"third-party\")\n+    shutil.rmtree(lic_dest) # copytree() won't overwrite existing files\n+    shutil.copytree(os.path.join(os.path.dirname(__file__), \"third-party\"), lic_dest)\n+\n+copy_runtime_deps(sys.argv[1])"}, {"sha": "dc46f89121993e8350c1ba0584af7fce44a8b89d", "filename": "src/etc/pkg/rust.iss", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/src%2Fetc%2Fpkg%2Frust.iss", "raw_url": "https://github.com/rust-lang/rust/raw/4e59ab097a8026f9bdbabc7eda4313d2efd70e1e/src%2Fetc%2Fpkg%2Frust.iss", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fpkg%2Frust.iss?ref=4e59ab097a8026f9bdbabc7eda4313d2efd70e1e", "patch": "@@ -19,7 +19,7 @@ DisableStartupPrompt=true\n \n OutputDir=.\\\n SourceDir=.\\\n-OutputBaseFilename=rust-{#CFG_VERSION}-install\n+OutputBaseFilename=rust-{#CFG_VERSION_WIN}-install\n DefaultDirName={pf32}\\Rust\n \n Compression=lzma2/ultra"}]}