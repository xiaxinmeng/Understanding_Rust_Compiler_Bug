{"sha": "c7db4b08fff9591adb2c7a66d5f81ce685655622", "node_id": "C_kwDOAAsO6NoAKGM3ZGI0YjA4ZmZmOTU5MWFkYjJjN2E2NmQ1ZjgxY2U2ODU2NTU2MjI", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-10T11:17:38Z"}, "committer": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-31T14:57:13Z"}, "message": "Apply track_caller to closure on `expect_non_local()`", "tree": {"sha": "cf8909f9f33bd4648c44deb91b4735ae4e62ce4f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cf8909f9f33bd4648c44deb91b4735ae4e62ce4f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c7db4b08fff9591adb2c7a66d5f81ce685655622", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEClCZYSKPPkQPouAvN5zu/dY+XdcFAmKWLMkACgkQN5zu/dY+\nXddYWg/+Oh0IG5VHYZ8a92JKxcQkO5rrMIPoCA8tbQHStMt1p0+pptKkvLrnhJXB\nywE74PiBaTOu9kgE4hP5pHixKJoOkMcjmBkaie9dwbCv9UYfdJTccy+Xyk9aB3BO\nIPeskh6ShohdaHBZm0ObhH4RNLtjMgjg2NEKkpAUC7o8fWLTIuk61p02Jw0PwAns\n+Q3pAOtQCmriM6VzRQIBaNhKwekc7kv0r/YjkJEGRrwRhC21/6zr/aDWQUvQmUOS\nmQHfCeepTti4XQh2reXFK2/qISR/YfThNbXLILeY9LMze6H9Ce3FKKXycKv34o6k\nBSc3s8afPEdgRC97/BZwFHPMTtbqmVuT6AE4GNpr1rJxKoVZRxEPTSSdpdUFRvJF\nlVXQJSRLf13ihUGZ97t6NlzKNva3RGr+ahZ29fVzl3LXcMNOr7Ss3Dy/p5D+w/I+\nfvZNqOJrdpUH4d6iq/wvYmO3D81UsccbBaLBNak28p7+OPX8xOHMMqSesBP3MEvG\nJ4w1VNxTKTtwVRkmAsg0Q/aZNE9ynrXeOJ/BIn+a9eIbHt2SaqY6LblfFSXtfCYd\nLdb8pJixMR3mB4sQg5xdg8SsMVH/GGqjhZsNEMmOQASiZTXnnNBHkmL6r6cxXoOC\nqUqynTsNp8vFsesVGyOYJ1PSY7Aq0/fF63TG8IpAdoF/q2YUmOU=\n=Mh1r\n-----END PGP SIGNATURE-----", "payload": "tree cf8909f9f33bd4648c44deb91b4735ae4e62ce4f\nparent 16a0d03698bfc9f93250490797f9a1a870f8bcfe\nauthor Yuki Okushi <jtitor@2k36.org> 1652181458 +0900\ncommitter Yuki Okushi <jtitor@2k36.org> 1654009033 +0900\n\nApply track_caller to closure on `expect_non_local()`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c7db4b08fff9591adb2c7a66d5f81ce685655622", "html_url": "https://github.com/rust-lang/rust/commit/c7db4b08fff9591adb2c7a66d5f81ce685655622", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c7db4b08fff9591adb2c7a66d5f81ce685655622/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16a0d03698bfc9f93250490797f9a1a870f8bcfe", "url": "https://api.github.com/repos/rust-lang/rust/commits/16a0d03698bfc9f93250490797f9a1a870f8bcfe", "html_url": "https://github.com/rust-lang/rust/commit/16a0d03698bfc9f93250490797f9a1a870f8bcfe"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "414f6272591966b60d9fdb49e21e6473ca1f92b6", "filename": "compiler/rustc_hir/src/def.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c7db4b08fff9591adb2c7a66d5f81ce685655622/compiler%2Frustc_hir%2Fsrc%2Fdef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7db4b08fff9591adb2c7a66d5f81ce685655622/compiler%2Frustc_hir%2Fsrc%2Fdef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir%2Fsrc%2Fdef.rs?ref=c7db4b08fff9591adb2c7a66d5f81ce685655622", "patch": "@@ -671,7 +671,10 @@ impl<Id> Res<Id> {\n \n     #[track_caller]\n     pub fn expect_non_local<OtherId>(self) -> Res<OtherId> {\n-        self.map_id(|_| panic!(\"unexpected `Res::Local`\"))\n+        self.map_id(\n+            #[track_caller]\n+            |_| panic!(\"unexpected `Res::Local`\"),\n+        )\n     }\n \n     pub fn macro_kind(self) -> Option<MacroKind> {"}, {"sha": "d845c433d8c5f6874f7ff8e739a3582afca9579d", "filename": "compiler/rustc_hir/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c7db4b08fff9591adb2c7a66d5f81ce685655622/compiler%2Frustc_hir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c7db4b08fff9591adb2c7a66d5f81ce685655622/compiler%2Frustc_hir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir%2Fsrc%2Flib.rs?ref=c7db4b08fff9591adb2c7a66d5f81ce685655622", "patch": "@@ -3,6 +3,7 @@\n //! [rustc dev guide]: https://rustc-dev-guide.rust-lang.org/hir.html\n \n #![feature(associated_type_defaults)]\n+#![feature(closure_track_caller)]\n #![feature(const_btree_new)]\n #![feature(let_else)]\n #![feature(once_cell)]"}]}