{"sha": "00920c0024860cec91b71a8a1fe57d1af37938f9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwOTIwYzAwMjQ4NjBjZWM5MWI3MWE4YTFmZTU3ZDFhZjM3OTM4Zjk=", "commit": {"author": {"name": "Jakub Kozlowski", "email": "mail@jakub-kozlowski.com", "date": "2018-08-14T23:24:55Z"}, "committer": {"name": "Jakub Kozlowski", "email": "mail@jakub-kozlowski.com", "date": "2018-08-19T16:08:00Z"}, "message": "Stabilize macro_vis_matcher", "tree": {"sha": "8338da004d3412c100b2c11f32c6c7fb0e0f4af6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8338da004d3412c100b2c11f32c6c7fb0e0f4af6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00920c0024860cec91b71a8a1fe57d1af37938f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00920c0024860cec91b71a8a1fe57d1af37938f9", "html_url": "https://github.com/rust-lang/rust/commit/00920c0024860cec91b71a8a1fe57d1af37938f9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00920c0024860cec91b71a8a1fe57d1af37938f9/comments", "author": {"login": "jkozlowski", "id": 690973, "node_id": "MDQ6VXNlcjY5MDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/690973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkozlowski", "html_url": "https://github.com/jkozlowski", "followers_url": "https://api.github.com/users/jkozlowski/followers", "following_url": "https://api.github.com/users/jkozlowski/following{/other_user}", "gists_url": "https://api.github.com/users/jkozlowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkozlowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkozlowski/subscriptions", "organizations_url": "https://api.github.com/users/jkozlowski/orgs", "repos_url": "https://api.github.com/users/jkozlowski/repos", "events_url": "https://api.github.com/users/jkozlowski/events{/privacy}", "received_events_url": "https://api.github.com/users/jkozlowski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jkozlowski", "id": 690973, "node_id": "MDQ6VXNlcjY5MDk3Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/690973?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkozlowski", "html_url": "https://github.com/jkozlowski", "followers_url": "https://api.github.com/users/jkozlowski/followers", "following_url": "https://api.github.com/users/jkozlowski/following{/other_user}", "gists_url": "https://api.github.com/users/jkozlowski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkozlowski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkozlowski/subscriptions", "organizations_url": "https://api.github.com/users/jkozlowski/orgs", "repos_url": "https://api.github.com/users/jkozlowski/repos", "events_url": "https://api.github.com/users/jkozlowski/events{/privacy}", "received_events_url": "https://api.github.com/users/jkozlowski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b355906919927ab3c879becd14392f023af883a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/b355906919927ab3c879becd14392f023af883a1", "html_url": "https://github.com/rust-lang/rust/commit/b355906919927ab3c879becd14392f023af883a1"}], "stats": {"total": 104, "additions": 22, "deletions": 82}, "files": [{"sha": "7918a356843298d34cc458ed40d1b9e5fc075478", "filename": "src/doc/unstable-book/src/language-features/macro-vis-matcher.md", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/b355906919927ab3c879becd14392f023af883a1/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md", "raw_url": "https://github.com/rust-lang/rust/raw/b355906919927ab3c879becd14392f023af883a1/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md?ref=b355906919927ab3c879becd14392f023af883a1", "patch": "@@ -1,14 +0,0 @@\n-# `macro_vis_matcher`\n-\n-The tracking issue for this feature is: [#41022]\n-\n-With this feature gate enabled, the [list of fragment specifiers][frags] gains one more entry:\n-\n-* `vis`: a visibility qualifier. Examples: nothing (default visibility); `pub`; `pub(crate)`.\n-\n-A `vis` variable may be followed by a comma, ident, type, or path.\n-\n-[#41022]: https://github.com/rust-lang/rust/issues/41022\n-[frags]: ../book/first-edition/macros.html#syntactic-requirements\n-\n-------------------------"}, {"sha": "b408d5d0805152008ed803dbd6c5fa8ef0fd5128", "filename": "src/doc/unstable-book/src/language-features/plugin.md", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -183,7 +183,6 @@ that warns about any item named `lintme`.\n ```rust,ignore\n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "c92f7eb5954964ac8906c0696d99c82ca9ed5e49", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -47,7 +47,7 @@\n #![feature(drain_filter)]\n #![feature(iterator_find_map)]\n #![cfg_attr(windows, feature(libc))]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(never_type)]\n #![feature(exhaustive_patterns)]\n #![feature(extern_types)]"}, {"sha": "c3ee48d20f6f5afad8610a4914771335e765b4c7", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -25,7 +25,7 @@\n #![feature(unsize)]\n #![feature(specialization)]\n #![feature(optin_builtin_traits)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![cfg_attr(not(stage0), feature(nll))]\n #![feature(allow_internal_unstable)]\n #![feature(vec_resize_with)]"}, {"sha": "15eb4730c1d20e95190f5e41cd7f3636ce703d9f", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -26,7 +26,7 @@\n #![cfg_attr(test, feature(test))]\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![cfg_attr(not(stage0), feature(nll))]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]"}, {"sha": "19fc087f128031b2cbcd39c1d923ec8995f3bbef", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -26,7 +26,7 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![feature(const_fn)]\n #![feature(core_intrinsics)]\n #![feature(decl_macro)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(exhaustive_patterns)]\n #![feature(range_contains)]\n #![feature(rustc_diagnostic_macros)]"}, {"sha": "ade297219d221e73867a081517beff74175fafd6", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -270,7 +270,7 @@\n #![feature(libc)]\n #![feature(link_args)]\n #![feature(linkage)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(needs_panic_runtime)]\n #![feature(never_type)]\n #![cfg_attr(not(stage0), feature(nll))]"}, {"sha": "2c738ac2a04cd864db459a93b3e2b4a4ed8a1d87", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -964,7 +964,7 @@ fn is_legal_fragment_specifier(sess: &ParseSess,\n                                frag_span: Span) -> bool {\n     match frag_name {\n         \"item\" | \"block\" | \"stmt\" | \"expr\" | \"pat\" | \"lifetime\" |\n-        \"path\" | \"ty\" | \"ident\" | \"meta\" | \"tt\" | \"\" => true,\n+        \"path\" | \"ty\" | \"ident\" | \"meta\" | \"tt\" | \"vis\" | \"\" => true,\n         \"literal\" => {\n             if !features.macro_literal_matcher &&\n                !attr::contains_name(attrs, \"allow_internal_unstable\") {\n@@ -977,18 +977,6 @@ fn is_legal_fragment_specifier(sess: &ParseSess,\n             }\n             true\n         },\n-        \"vis\" => {\n-            if !features.macro_vis_matcher &&\n-               !attr::contains_name(attrs, \"allow_internal_unstable\") {\n-                let explain = feature_gate::EXPLAIN_VIS_MATCHER;\n-                emit_feature_err(sess,\n-                                 \"macro_vis_matcher\",\n-                                 frag_span,\n-                                 GateIssue::Language,\n-                                 explain);\n-            }\n-            true\n-        },\n         _ => false,\n     }\n }"}, {"sha": "9e80564f579f9b55b7524278fa7edef5f4b660e2", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -342,9 +342,6 @@ declare_features! (\n     // Allows overlapping impls of marker traits\n     (active, overlapping_marker_traits, \"1.18.0\", Some(29864), None),\n \n-    // Allows use of the :vis macro fragment specifier\n-    (active, macro_vis_matcher, \"1.18.0\", Some(41022), None),\n-\n     // rustc internal\n     (active, abi_thiscall, \"1.19.0\", None, None),\n \n@@ -648,6 +645,8 @@ declare_features! (\n     (accepted, repr_transparent, \"1.28.0\", Some(43036), None),\n     // Defining procedural macros in `proc-macro` crates\n     (accepted, proc_macro, \"1.29.0\", Some(38356), None),\n+    // Allows use of the :vis macro fragment specifier\n+    (accepted, macro_vis_matcher, \"1.29.0\", Some(41022), None),\n     // Allows importing and reexporting macros with `use`,\n     // enables macro modularization in general.\n     (accepted, use_extern_macros, \"1.30.0\", Some(35896), None),\n@@ -1363,9 +1362,6 @@ pub const EXPLAIN_DEPR_CUSTOM_DERIVE: &'static str =\n pub const EXPLAIN_DERIVE_UNDERSCORE: &'static str =\n     \"attributes of the form `#[derive_*]` are reserved for the compiler\";\n \n-pub const EXPLAIN_VIS_MATCHER: &'static str =\n-    \":vis fragment specifier is experimental and subject to change\";\n-\n pub const EXPLAIN_LITERAL_MATCHER: &'static str =\n     \":literal fragment specifier is experimental and subject to change\";\n "}, {"sha": "c965a3ed86c82d7336d47961b9a95f69935d4f84", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_for_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar, rustc_private)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n #[macro_use] extern crate rustc;"}, {"sha": "8ccb5878c40456d449fb746836dc5697124f083f", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_group_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n // Load rustc as a plugin to get macros"}, {"sha": "315dad7eea515279f0aa1d06b15ba5ea2ded568b", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "601003827c6a287a463e193bda77647ff4274a62", "filename": "src/test/run-pass-fulldeps/auxiliary/lint_for_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar, rustc_private)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n #[macro_use] extern crate rustc;"}, {"sha": "fe9ac5fd635bddd8514303770d80fb80d3cff291", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/issue-40001-plugin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n #![feature(box_syntax, plugin, plugin_registrar, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n #![crate_type = \"dylib\"]\n "}, {"sha": "9216040ab6ec892b7c7b5f500aedf768d6c757dd", "filename": "src/test/run-pass/macro-first-set.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n //{{{ issue 40569 ==============================================================\n "}, {"sha": "db8331358b96e31ddcfd084830f11bfe897f4e9d", "filename": "src/test/run-pass/macro-pub-matcher.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -9,7 +9,8 @@\n // except according to those terms.\n \n #![allow(dead_code, unused_imports)]\n-#![feature(macro_vis_matcher, crate_visibility_modifier)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n+#![feature(crate_visibility_modifier)]\n \n /**\n Ensure that `:vis` matches can be captured in existing positions, and passed"}, {"sha": "8ccb5878c40456d449fb746836dc5697124f083f", "filename": "src/test/ui-fulldeps/auxiliary/lint_group_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n // Load rustc as a plugin to get macros"}, {"sha": "315dad7eea515279f0aa1d06b15ba5ea2ded568b", "filename": "src/test/ui-fulldeps/auxiliary/lint_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "d7895bd8781ba02b83fcb3eb45031184e3361373", "filename": "src/test/ui-fulldeps/auxiliary/lint_tool_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -10,7 +10,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "5d6f2acea83cea7c31da88f4f36a91de4b8988f1", "filename": "src/test/ui/feature-gates/feature-gate-macro-vis-matcher.rs", "status": "removed", "additions": 0, "deletions": 19, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/b355906919927ab3c879becd14392f023af883a1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b355906919927ab3c879becd14392f023af883a1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.rs?ref=b355906919927ab3c879becd14392f023af883a1", "patch": "@@ -1,19 +0,0 @@\n-// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n-// file at the top-level directory of this distribution and at\n-// http://rust-lang.org/COPYRIGHT.\n-//\n-// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-// option. This file may not be copied, modified, or distributed\n-// except according to those terms.\n-\n-// Test that the MSP430 interrupt ABI cannot be used when msp430_interrupt\n-// feature gate is not used.\n-\n-macro_rules! m { ($v:vis) => {} }\n-//~^ ERROR :vis fragment specifier is experimental and subject to change\n-\n-fn main() {\n-    m!(pub);\n-}"}, {"sha": "9d98091674e76fc55e8b3d9ffceb8e9a38483dbf", "filename": "src/test/ui/feature-gates/feature-gate-macro-vis-matcher.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b355906919927ab3c879becd14392f023af883a1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b355906919927ab3c879becd14392f023af883a1/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr?ref=b355906919927ab3c879becd14392f023af883a1", "patch": "@@ -1,11 +0,0 @@\n-error[E0658]: :vis fragment specifier is experimental and subject to change (see issue #41022)\n-  --> $DIR/feature-gate-macro-vis-matcher.rs:14:19\n-   |\n-LL | macro_rules! m { ($v:vis) => {} }\n-   |                   ^^^^^^\n-   |\n-   = help: add #![feature(macro_vis_matcher)] to the crate attributes to enable\n-\n-error: aborting due to previous error\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "dd53a1c71a5bce538a8474502bc15c60457d5957", "filename": "src/test/ui/issues/issue-42755.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n macro_rules! foo {\n     ($($p:vis)*) => {} //~ ERROR repetition matches empty token tree"}, {"sha": "0089617b11c0b9a84e1c3f5db6b8731694185a69", "filename": "src/test/ui/lint/unreachable_pub-pub_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -16,7 +16,7 @@\n \n // compile-pass\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n #![allow(unused)]\n #![warn(unreachable_pub)]"}, {"sha": "7fd4a901090711bcfaf666bf456533ca5d9128a3", "filename": "src/test/ui/lint/unreachable_pub.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00920c0024860cec91b71a8a1fe57d1af37938f9/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs?ref=00920c0024860cec91b71a8a1fe57d1af37938f9", "patch": "@@ -11,7 +11,7 @@\n // compile-pass\n \n #![feature(crate_visibility_modifier)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n #![allow(unused)]\n #![warn(unreachable_pub)]"}]}