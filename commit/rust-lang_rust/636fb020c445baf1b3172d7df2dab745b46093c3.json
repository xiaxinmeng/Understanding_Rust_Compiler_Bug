{"sha": "636fb020c445baf1b3172d7df2dab745b46093c3", "node_id": "C_kwDOAAsO6NoAKDYzNmZiMDIwYzQ0NWJhZjFiMzE3MmQ3ZGYyZGFiNzQ1YjQ2MDkzYzM", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-19T15:11:53Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2022-03-20T11:14:24Z"}, "message": "Ignore rustc tests with needs-unwind directive", "tree": {"sha": "14006590469d0ebb14e62f59e614cea2e03abf5e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14006590469d0ebb14e62f59e614cea2e03abf5e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/636fb020c445baf1b3172d7df2dab745b46093c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/636fb020c445baf1b3172d7df2dab745b46093c3", "html_url": "https://github.com/rust-lang/rust/commit/636fb020c445baf1b3172d7df2dab745b46093c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/636fb020c445baf1b3172d7df2dab745b46093c3/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7e5016207c40f3520e0bc55a34ada3a2a778ac2", "url": "https://api.github.com/repos/rust-lang/rust/commits/e7e5016207c40f3520e0bc55a34ada3a2a778ac2", "html_url": "https://github.com/rust-lang/rust/commit/e7e5016207c40f3520e0bc55a34ada3a2a778ac2"}], "stats": {"total": 30, "additions": 5, "deletions": 25}, "files": [{"sha": "e9b8c297a390986916ee3047944e8b79ebbac325", "filename": "scripts/test_rustc_tests.sh", "status": "modified", "additions": 5, "deletions": 25, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/636fb020c445baf1b3172d7df2dab745b46093c3/scripts%2Ftest_rustc_tests.sh", "raw_url": "https://github.com/rust-lang/rust/raw/636fb020c445baf1b3172d7df2dab745b46093c3/scripts%2Ftest_rustc_tests.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Ftest_rustc_tests.sh?ref=636fb020c445baf1b3172d7df2dab745b46093c3", "patch": "@@ -10,8 +10,8 @@ pushd rust\n \n command -v rg >/dev/null 2>&1 || cargo install ripgrep\n \n-rm -r src/test/ui/{extern/,panics/,unsized-locals/,lto/,simd*,linkage*,unwind-*.rs} || true\n-for test in $(rg --files-with-matches \"asm!|catch_unwind|should_panic|lto|// needs-asm-support\" src/test/ui); do\n+rm -r src/test/ui/{extern/,unsized-locals/,lto/,simd*,linkage*} || true\n+for test in $(rg --files-with-matches \"asm!|lto|// needs-asm-support|// needs-unwind\" src/test/{ui,incremental}); do\n   rm $test\n done\n \n@@ -26,28 +26,15 @@ git checkout -- src/test/ui/issues/auxiliary/issue-3136-a.rs # contains //~ERROR\n \n # requires stack unwinding\n rm src/test/ui/backtrace.rs\n-rm src/test/ui/array-slice-vec/box-of-array-of-drop-*.rs\n-rm src/test/ui/array-slice-vec/slice-panic-*.rs\n-rm src/test/ui/array-slice-vec/nested-vec-3.rs\n-rm src/test/ui/cleanup-rvalue-temp-during-incomplete-alloc.rs\n-rm src/test/ui/issues/issue-26655.rs\n-rm src/test/ui/issues/issue-29485.rs\n-rm src/test/ui/issues/issue-30018-panic.rs\n rm src/test/ui/process/multi-panic.rs\n-rm src/test/ui/sepcomp/sepcomp-unwind.rs\n-rm src/test/ui/structs-enums/unit-like-struct-drop-run.rs\n-rm src/test/ui/drop/terminate-in-initializer.rs\n-rm src/test/ui/threads-sendsync/task-stderr.rs\n-rm src/test/ui/numbers-arithmetic/int-abs-overflow.rs\n-rm src/test/ui/drop/drop-trait-enum.rs\n rm src/test/ui/numbers-arithmetic/issue-8460.rs\n-rm src/test/ui/runtime/rt-explody-panic-payloads.rs\n rm src/test/incremental/change_crate_dep_kind.rs\n-rm src/test/ui/threads-sendsync/unwind-resource.rs\n rm src/test/incremental/issue-80691-bad-eval-cache.rs # -Cpanic=abort causes abort instead of exit(101)\n+rm src/test/ui/panic-while-printing.rs\n+rm src/test/ui/test-attrs/test-panic-while-printing.rs\n+rm src/test/ui/test-attrs/test-type.rs\n \n # requires compiling with -Cpanic=unwind\n-rm src/test/ui/cfg/cfg-panic.rs\n rm src/test/ui/test-attrs/test-fn-signature-verification-for-explicit-return-type.rs # \"Cannot run dynamic test fn out-of-process\"\n rm src/test/ui/async-await/async-fn-size-moved-locals.rs # -Cpanic=abort shrinks some generator by one byte\n rm src/test/ui/async-await/async-fn-size-uninit-locals.rs # same\n@@ -57,18 +44,11 @@ rm src/test/ui/generator/size-moved-locals.rs # same\n rm src/test/ui/sse2.rs # cpuid not supported, so sse2 not detected\n rm src/test/ui/intrinsics/const-eval-select-x86_64.rs # requires x86_64 vendor intrinsics\n \n-# inline asm\n-rm src/test/incremental/hashes/inline_asm.rs # inline asm\n-rm src/test/incremental/issue-72386.rs # same\n-\n # exotic linkages\n rm src/test/ui/issues/issue-33992.rs # unsupported linkages\n rm src/test/incremental/hashes/function_interfaces.rs # same\n rm src/test/incremental/hashes/statics.rs # same\n \n-# LTO\n-rm src/test/incremental/lto.rs # requires lt\n-\n # variadic arguments\n rm src/test/ui/abi/mir/mir_codegen_calls_variadic.rs # requires float varargs\n rm src/test/ui/abi/variadic-ffi.rs # requires callee side vararg support"}]}