{"sha": "bf13861e6cebfedef6d996037bf09babf9dcb600", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmMTM4NjFlNmNlYmZlZGVmNmQ5OTYwMzdiZjA5YmFiZjlkY2I2MDA=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-02-06T14:37:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-06T14:37:39Z"}, "message": "Rollup merge of #68751 - Tyg13:unused_parens_const_static, r=Centril\n\nImplement `unused_parens` for `const` and `static` items\n\nFixes #67942", "tree": {"sha": "cdbeb2cce1f8c12ad13ed6033b96c87b820ac665", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cdbeb2cce1f8c12ad13ed6033b96c87b820ac665"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bf13861e6cebfedef6d996037bf09babf9dcb600", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJePCS0CRBK7hj4Ov3rIwAAdHIIAHVJozLkQpIZiRdFg//7KYLR\nZfl7xxl+dbZ+KZnXP9FCcb37GZWnVu3n3iwMsI8qFUTpgfpEOE9JS0gSk0sO6kCO\nENrNkHeRT/uaXX77S6rSyEYYOhKAkVjCReUsnCubG/C0gQizPrvvEFCf68G9jbbS\nSdU3mYqk1KJi4JOIvcj7Rv62Dd32tr3FznoKlwvCunXBNQSeIRD7tzNhJTnXkg7q\nuhR5zlOp0tbsPtTfvKqntbSGx9MoVRPbvciR02MzJGarc33aFF2muFOtZmzrTwQL\neT1U1sN/TsHNMJugkzkMU+rbx/90yJy4y4lZCwLwZ+3eOYEwMvayU8xyEXGg1q0=\n=uKNL\n-----END PGP SIGNATURE-----\n", "payload": "tree cdbeb2cce1f8c12ad13ed6033b96c87b820ac665\nparent a1478b760431c8327181cd481ae2c100c4d7e2f1\nparent d8cf95010f0f757d68712c7478b1008734791f66\nauthor Dylan DPC <dylan.dpc@gmail.com> 1580999859 +0100\ncommitter GitHub <noreply@github.com> 1580999859 +0100\n\nRollup merge of #68751 - Tyg13:unused_parens_const_static, r=Centril\n\nImplement `unused_parens` for `const` and `static` items\n\nFixes #67942\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bf13861e6cebfedef6d996037bf09babf9dcb600", "html_url": "https://github.com/rust-lang/rust/commit/bf13861e6cebfedef6d996037bf09babf9dcb600", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bf13861e6cebfedef6d996037bf09babf9dcb600/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1478b760431c8327181cd481ae2c100c4d7e2f1", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1478b760431c8327181cd481ae2c100c4d7e2f1", "html_url": "https://github.com/rust-lang/rust/commit/a1478b760431c8327181cd481ae2c100c4d7e2f1"}, {"sha": "d8cf95010f0f757d68712c7478b1008734791f66", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8cf95010f0f757d68712c7478b1008734791f66", "html_url": "https://github.com/rust-lang/rust/commit/d8cf95010f0f757d68712c7478b1008734791f66"}], "stats": {"total": 48, "additions": 36, "deletions": 12}, "files": [{"sha": "5490e5e2b4d55104fd374570cbeec7b352e05483", "filename": "src/librustc_lint/unused.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Flibrustc_lint%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Flibrustc_lint%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Funused.rs?ref=bf13861e6cebfedef6d996037bf09babf9dcb600", "patch": "@@ -587,6 +587,14 @@ impl EarlyLintPass for UnusedParens {\n             }\n         }\n     }\n+\n+    fn check_item(&mut self, cx: &EarlyContext<'_>, item: &ast::Item) {\n+        use ast::ItemKind::*;\n+\n+        if let Const(.., ref expr) | Static(.., ref expr) = item.kind {\n+            self.check_unused_parens_expr(cx, expr, \"assigned value\", false, None, None);\n+        }\n+    }\n }\n \n declare_lint! {"}, {"sha": "5ce1f57608132e2f297597ea349b84ea5d84abd7", "filename": "src/test/ui/lint/lint-unnecessary-parens.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs?ref=bf13861e6cebfedef6d996037bf09babf9dcb600", "patch": "@@ -38,6 +38,9 @@ macro_rules! baz {\n     }\n }\n \n+const CONST_ITEM: usize = (10); //~ ERROR unnecessary parentheses around assigned value\n+static STATIC_ITEM: usize = (10); //~ ERROR unnecessary parentheses around assigned value\n+\n fn main() {\n     foo();\n     bar((true)); //~ ERROR unnecessary parentheses around function argument"}, {"sha": "8858c9532732248cb2dc17b4265f610a34668a12", "filename": "src/test/ui/lint/lint-unnecessary-parens.stderr", "status": "modified", "additions": 24, "deletions": 12, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr?ref=bf13861e6cebfedef6d996037bf09babf9dcb600", "patch": "@@ -34,73 +34,85 @@ error: unnecessary parentheses around block return value\n LL |     (5)\n    |     ^^^ help: remove these parentheses\n \n+error: unnecessary parentheses around assigned value\n+  --> $DIR/lint-unnecessary-parens.rs:41:27\n+   |\n+LL | const CONST_ITEM: usize = (10);\n+   |                           ^^^^ help: remove these parentheses\n+\n+error: unnecessary parentheses around assigned value\n+  --> $DIR/lint-unnecessary-parens.rs:42:29\n+   |\n+LL | static STATIC_ITEM: usize = (10);\n+   |                             ^^^^ help: remove these parentheses\n+\n error: unnecessary parentheses around function argument\n-  --> $DIR/lint-unnecessary-parens.rs:43:9\n+  --> $DIR/lint-unnecessary-parens.rs:46:9\n    |\n LL |     bar((true));\n    |         ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `if` condition\n-  --> $DIR/lint-unnecessary-parens.rs:45:8\n+  --> $DIR/lint-unnecessary-parens.rs:48:8\n    |\n LL |     if (true) {}\n    |        ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `while` condition\n-  --> $DIR/lint-unnecessary-parens.rs:46:11\n+  --> $DIR/lint-unnecessary-parens.rs:49:11\n    |\n LL |     while (true) {}\n    |           ^^^^^^ help: remove these parentheses\n \n warning: denote infinite loops with `loop { ... }`\n-  --> $DIR/lint-unnecessary-parens.rs:46:5\n+  --> $DIR/lint-unnecessary-parens.rs:49:5\n    |\n LL |     while (true) {}\n    |     ^^^^^^^^^^^^ help: use `loop`\n    |\n    = note: `#[warn(while_true)]` on by default\n \n error: unnecessary parentheses around `match` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:48:11\n+  --> $DIR/lint-unnecessary-parens.rs:51:11\n    |\n LL |     match (true) {\n    |           ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `let` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:51:16\n+  --> $DIR/lint-unnecessary-parens.rs:54:16\n    |\n LL |     if let 1 = (1) {}\n    |                ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `let` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:52:19\n+  --> $DIR/lint-unnecessary-parens.rs:55:19\n    |\n LL |     while let 1 = (2) {}\n    |                   ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around method argument\n-  --> $DIR/lint-unnecessary-parens.rs:66:24\n+  --> $DIR/lint-unnecessary-parens.rs:69:24\n    |\n LL |     X { y: false }.foo((true));\n    |                        ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:68:18\n+  --> $DIR/lint-unnecessary-parens.rs:71:18\n    |\n LL |     let mut _a = (0);\n    |                  ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:69:10\n+  --> $DIR/lint-unnecessary-parens.rs:72:10\n    |\n LL |     _a = (0);\n    |          ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:70:11\n+  --> $DIR/lint-unnecessary-parens.rs:73:11\n    |\n LL |     _a += (1);\n    |           ^^^ help: remove these parentheses\n \n-error: aborting due to 15 previous errors\n+error: aborting due to 17 previous errors\n "}, {"sha": "cb42ff2c6443a2b88349ebcb5d92b60301b27cbc", "filename": "src/test/ui/super-fast-paren-parsing.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bf13861e6cebfedef6d996037bf09babf9dcb600/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs?ref=bf13861e6cebfedef6d996037bf09babf9dcb600", "patch": "@@ -1,5 +1,6 @@\n // run-pass\n \n+#![allow(unused_parens)]\n #![allow(non_upper_case_globals)]\n #![allow(dead_code)]\n // exec-env:RUST_MIN_STACK=16000000"}]}