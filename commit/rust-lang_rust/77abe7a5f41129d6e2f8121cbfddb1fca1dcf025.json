{"sha": "77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3YWJlN2E1ZjQxMTI5ZDZlMmY4MTIxY2JmZGRiMWZjYTFkY2YwMjU=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-05-02T22:32:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-05-02T22:32:41Z"}, "message": "Rollup merge of #84744 - kornelski:enomem, r=joshtriplett\n\nAdd ErrorKind::OutOfMemory\n\nAbility to express `ENOMEM` as an `io::Error`.\n\nI've used `OutOfMemory` as opposed to `NotEnoughMem` or `AllocationFailed`, because \"OOM\" is used in Rust already.\n\nSee also #84612", "tree": {"sha": "7dbb1911d0638d3f2a0d2796392ce618305d93cb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7dbb1911d0638d3f2a0d2796392ce618305d93cb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgjyiKCRBK7hj4Ov3rIwAAt0wIAG+iA6hn56yROOGddKny9ivM\nfmYP5upp/2OreAuVKCufJVEMW8NFJKjQ84oa7eE42lUspp9gGqyioUOmjRh8ItbD\nWjqjO3534d8JNmBRl/llfVivjs1x+xpma53/WDcTT6S6WWTpZyTBK/XNC5ikCXXK\nDSS7wzTIoQl7RPl2twGQZsEtMIUQh6sq139mQCJJ/bJ7mphr2cwsK/esgec/5FQs\nMrrKpHHRFi+YhQFT57FLA/qkNiTIQt92J6VEqAuqW7IA7cEOHYcDuUGE6ovJBA4g\n/D5l2Cp//aFLCQA5d1H73bwXrjw45AmKCKTYh8un1Q08iLYWNIq0W9EivG6hYpA=\n=jcyT\n-----END PGP SIGNATURE-----\n", "payload": "tree 7dbb1911d0638d3f2a0d2796392ce618305d93cb\nparent 966e9e2471f9772cd1b75793c7d3fcbfce7a57d5\nparent 19568f9a8368c9f433d8f73d9eed59eb6ad24651\nauthor Dylan DPC <dylan.dpc@gmail.com> 1619994761 +0200\ncommitter GitHub <noreply@github.com> 1619994761 +0200\n\nRollup merge of #84744 - kornelski:enomem, r=joshtriplett\n\nAdd ErrorKind::OutOfMemory\n\nAbility to express `ENOMEM` as an `io::Error`.\n\nI've used `OutOfMemory` as opposed to `NotEnoughMem` or `AllocationFailed`, because \"OOM\" is used in Rust already.\n\nSee also #84612\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "html_url": "https://github.com/rust-lang/rust/commit/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "966e9e2471f9772cd1b75793c7d3fcbfce7a57d5", "url": "https://api.github.com/repos/rust-lang/rust/commits/966e9e2471f9772cd1b75793c7d3fcbfce7a57d5", "html_url": "https://github.com/rust-lang/rust/commit/966e9e2471f9772cd1b75793c7d3fcbfce7a57d5"}, {"sha": "19568f9a8368c9f433d8f73d9eed59eb6ad24651", "url": "https://api.github.com/repos/rust-lang/rust/commits/19568f9a8368c9f433d8f73d9eed59eb6ad24651", "html_url": "https://github.com/rust-lang/rust/commit/19568f9a8368c9f433d8f73d9eed59eb6ad24651"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "ae896d1240ea536bbfcfbbe9a139c34b6fc48c5a", "filename": "library/std/src/io/error.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fio%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fio%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fio%2Ferror.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -186,6 +186,11 @@ pub enum ErrorKind {\n     /// This means that the operation can never succeed.\n     #[stable(feature = \"unsupported_error\", since = \"1.53.0\")]\n     Unsupported,\n+\n+    /// An operation could not be completed, because it failed\n+    /// to allocate enough memory.\n+    #[stable(feature = \"out_of_memory_error\", since = \"1.53.0\")]\n+    OutOfMemory,\n }\n \n impl ErrorKind {\n@@ -210,6 +215,7 @@ impl ErrorKind {\n             ErrorKind::Other => \"other os error\",\n             ErrorKind::UnexpectedEof => \"unexpected end of file\",\n             ErrorKind::Unsupported => \"unsupported\",\n+            ErrorKind::OutOfMemory => \"out of memory\",\n         }\n     }\n }"}, {"sha": "562d9d92637a6662fb415d4509e491c702b37df0", "filename": "library/std/src/sys/unix/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Fmod.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -149,6 +149,7 @@ pub fn decode_error_kind(errno: i32) -> ErrorKind {\n         libc::ETIMEDOUT => ErrorKind::TimedOut,\n         libc::EEXIST => ErrorKind::AlreadyExists,\n         libc::ENOSYS => ErrorKind::Unsupported,\n+        libc::ENOMEM => ErrorKind::OutOfMemory,\n \n         // These two constants can have the same value on some systems,\n         // but different values on others, so we can't use a match"}, {"sha": "88b81d455d2416f1c408c1b62e1fdcf4cfb2d165", "filename": "library/std/src/sys/wasi/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwasi%2Fmod.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -77,6 +77,7 @@ pub fn decode_error_kind(errno: i32) -> std_io::ErrorKind {\n         wasi::ERRNO_EXIST => AlreadyExists,\n         wasi::ERRNO_AGAIN => WouldBlock,\n         wasi::ERRNO_NOSYS => Unsupported,\n+        wasi::ERRNO_NOMEM => OutOfMemory,\n         _ => Other,\n     }\n }"}, {"sha": "7ea6048e94a883e0fea616733edadb3fb73797d4", "filename": "library/std/src/sys/windows/c.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -168,6 +168,8 @@ pub const ERROR_FILE_NOT_FOUND: DWORD = 2;\n pub const ERROR_PATH_NOT_FOUND: DWORD = 3;\n pub const ERROR_ACCESS_DENIED: DWORD = 5;\n pub const ERROR_INVALID_HANDLE: DWORD = 6;\n+pub const ERROR_NOT_ENOUGH_MEMORY: DWORD = 8;\n+pub const ERROR_OUTOFMEMORY: DWORD = 14;\n pub const ERROR_NO_MORE_FILES: DWORD = 18;\n pub const ERROR_HANDLE_EOF: DWORD = 38;\n pub const ERROR_FILE_EXISTS: DWORD = 80;"}, {"sha": "2208ff025c0f7d77e6a6563a986488207662b0fc", "filename": "library/std/src/sys/windows/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fmod.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -71,6 +71,7 @@ pub fn decode_error_kind(errno: i32) -> ErrorKind {\n         c::ERROR_PATH_NOT_FOUND => return ErrorKind::NotFound,\n         c::ERROR_NO_DATA => return ErrorKind::BrokenPipe,\n         c::ERROR_INVALID_PARAMETER => return ErrorKind::InvalidInput,\n+        c::ERROR_NOT_ENOUGH_MEMORY | c::ERROR_OUTOFMEMORY => return ErrorKind::OutOfMemory,\n         c::ERROR_SEM_TIMEOUT\n         | c::WAIT_TIMEOUT\n         | c::ERROR_DRIVER_CANCEL_TIMEOUT"}, {"sha": "5ad27bb14501feb8988331dfaefd1dee909e6431", "filename": "src/tools/clippy/tests/ui/wildcard_enum_match_arm.fixed", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.fixed?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -77,7 +77,7 @@ fn main() {\n     let error_kind = ErrorKind::NotFound;\n     match error_kind {\n         ErrorKind::NotFound => {},\n-        ErrorKind::PermissionDenied | ErrorKind::ConnectionRefused | ErrorKind::ConnectionReset | ErrorKind::ConnectionAborted | ErrorKind::NotConnected | ErrorKind::AddrInUse | ErrorKind::AddrNotAvailable | ErrorKind::BrokenPipe | ErrorKind::AlreadyExists | ErrorKind::WouldBlock | ErrorKind::InvalidInput | ErrorKind::InvalidData | ErrorKind::TimedOut | ErrorKind::WriteZero | ErrorKind::Interrupted | ErrorKind::Other | ErrorKind::UnexpectedEof | ErrorKind::Unsupported | _ => {},\n+        ErrorKind::PermissionDenied | ErrorKind::ConnectionRefused | ErrorKind::ConnectionReset | ErrorKind::ConnectionAborted | ErrorKind::NotConnected | ErrorKind::AddrInUse | ErrorKind::AddrNotAvailable | ErrorKind::BrokenPipe | ErrorKind::AlreadyExists | ErrorKind::WouldBlock | ErrorKind::InvalidInput | ErrorKind::InvalidData | ErrorKind::TimedOut | ErrorKind::WriteZero | ErrorKind::Interrupted | ErrorKind::Other | ErrorKind::UnexpectedEof | ErrorKind::Unsupported | ErrorKind::OutOfMemory | _ => {},\n     }\n     match error_kind {\n         ErrorKind::NotFound => {},\n@@ -99,6 +99,7 @@ fn main() {\n         ErrorKind::Other => {},\n         ErrorKind::UnexpectedEof => {},\n         ErrorKind::Unsupported => {},\n+        ErrorKind::OutOfMemory => {},\n         _ => {},\n     }\n }"}, {"sha": "adca0738bba5b3cdee4e8255d79916ed98a3912c", "filename": "src/tools/clippy/tests/ui/wildcard_enum_match_arm.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.rs?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -99,6 +99,7 @@ fn main() {\n         ErrorKind::Other => {},\n         ErrorKind::UnexpectedEof => {},\n         ErrorKind::Unsupported => {},\n+        ErrorKind::OutOfMemory => {},\n         _ => {},\n     }\n }"}, {"sha": "73f6a4a80c960d36c8611b63fca88f59d1103c5d", "filename": "src/tools/clippy/tests/ui/wildcard_enum_match_arm.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/77abe7a5f41129d6e2f8121cbfddb1fca1dcf025/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fwildcard_enum_match_arm.stderr?ref=77abe7a5f41129d6e2f8121cbfddb1fca1dcf025", "patch": "@@ -32,7 +32,7 @@ error: wildcard matches known variants and will also match future added variants\n   --> $DIR/wildcard_enum_match_arm.rs:80:9\n    |\n LL |         _ => {},\n-   |         ^ help: try this: `ErrorKind::PermissionDenied | ErrorKind::ConnectionRefused | ErrorKind::ConnectionReset | ErrorKind::ConnectionAborted | ErrorKind::NotConnected | ErrorKind::AddrInUse | ErrorKind::AddrNotAvailable | ErrorKind::BrokenPipe | ErrorKind::AlreadyExists | ErrorKind::WouldBlock | ErrorKind::InvalidInput | ErrorKind::InvalidData | ErrorKind::TimedOut | ErrorKind::WriteZero | ErrorKind::Interrupted | ErrorKind::Other | ErrorKind::UnexpectedEof | ErrorKind::Unsupported | _`\n+   |         ^ help: try this: `ErrorKind::PermissionDenied | ErrorKind::ConnectionRefused | ErrorKind::ConnectionReset | ErrorKind::ConnectionAborted | ErrorKind::NotConnected | ErrorKind::AddrInUse | ErrorKind::AddrNotAvailable | ErrorKind::BrokenPipe | ErrorKind::AlreadyExists | ErrorKind::WouldBlock | ErrorKind::InvalidInput | ErrorKind::InvalidData | ErrorKind::TimedOut | ErrorKind::WriteZero | ErrorKind::Interrupted | ErrorKind::Other | ErrorKind::UnexpectedEof | ErrorKind::Unsupported | ErrorKind::OutOfMemory | _`\n \n error: aborting due to 5 previous errors\n "}]}