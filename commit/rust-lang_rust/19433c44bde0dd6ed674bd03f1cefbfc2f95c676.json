{"sha": "19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5NDMzYzQ0YmRlMGRkNmVkNjc0YmQwM2YxY2VmYmZjMmY5NWM2NzY=", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-06-06T10:11:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-06T10:11:24Z"}, "message": "Rollup merge of #86047 - jyn514:doc-attrs, r=petrochenkov\n\nDon't fire `invalid_doc_attributes` on `extern crate` items\n\nFixes https://github.com/rust-lang/rust/issues/86046.", "tree": {"sha": "0321b1e5b1d8b8175b6f59613de38cb524eade38", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0321b1e5b1d8b8175b6f59613de38cb524eade38"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgvJ9MCRBK7hj4Ov3rIwAALyoIAAz1ar05JPI5Lt76O6644dZf\nKoYj6tKqCxmSu2DKy+3yTTKzJUezIsoqe68H6KSRfCsMSC24ZrdDSXNtJE2KZKoJ\nxSdkyW0+hrSnj3+UJw7EVFQuhwv19NnpY56MiAKS1/Hz5yEjq7C6dL3jyEM0iXoy\nH8SRAlbh1Nok8f0VUO0lrtsP0eSnJoMk46rxU/eZA4KJ+4GVvW19DRNhBH8Qm5dR\n1dO0rBAQTbleQtZKnW0UFuxhhcCG/i2O855YRjclkphmay/ekmfWpj+4cmSJjKIs\nInyt0Vmkm2VCT5Wu07wVX0PZkt9RykmwE6erI4pRuoHWHEWSSkH2UtkhgkgYBfs=\n=t61D\n-----END PGP SIGNATURE-----\n", "payload": "tree 0321b1e5b1d8b8175b6f59613de38cb524eade38\nparent 2f0a8556a9add078c3ecc9d748e9ec820817fd42\nparent b8ebf4431e48abe6f1844b80416c11f7b0ccab0c\nauthor Yuki Okushi <jtitor@2k36.org> 1622974284 +0900\ncommitter GitHub <noreply@github.com> 1622974284 +0900\n\nRollup merge of #86047 - jyn514:doc-attrs, r=petrochenkov\n\nDon't fire `invalid_doc_attributes` on `extern crate` items\n\nFixes https://github.com/rust-lang/rust/issues/86046.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "html_url": "https://github.com/rust-lang/rust/commit/19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f0a8556a9add078c3ecc9d748e9ec820817fd42", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f0a8556a9add078c3ecc9d748e9ec820817fd42", "html_url": "https://github.com/rust-lang/rust/commit/2f0a8556a9add078c3ecc9d748e9ec820817fd42"}, {"sha": "b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c", "html_url": "https://github.com/rust-lang/rust/commit/b8ebf4431e48abe6f1844b80416c11f7b0ccab0c"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "b18ef302962378b1819e909dfd9ca6841535dd24", "filename": "compiler/rustc_passes/src/check_attr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_attr.rs?ref=19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "patch": "@@ -577,7 +577,7 @@ impl CheckAttrVisitor<'tcx> {\n         target: Target,\n         specified_inline: &mut Option<(bool, Span)>,\n     ) -> bool {\n-        if target == Target::Use {\n+        if target == Target::Use || target == Target::ExternCrate {\n             let do_inline = meta.name_or_empty() == sym::inline;\n             if let Some((prev_inline, prev_span)) = *specified_inline {\n                 if do_inline != prev_inline {"}, {"sha": "0eb4c149060db4c16f3d8413d2628e3735393dfd", "filename": "src/test/ui/rustdoc/doc-inline-extern-crate.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.rs?ref=19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "patch": "@@ -0,0 +1,9 @@\n+#[doc(inline)]\n+//~^ ERROR conflicting\n+#[doc(no_inline)]\n+pub extern crate core;\n+\n+// no warning\n+pub extern crate alloc;\n+\n+fn main() {}"}, {"sha": "41518295b1224bbb5959be5cca543b21989e594a", "filename": "src/test/ui/rustdoc/doc-inline-extern-crate.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/19433c44bde0dd6ed674bd03f1cefbfc2f95c676/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frustdoc%2Fdoc-inline-extern-crate.stderr?ref=19433c44bde0dd6ed674bd03f1cefbfc2f95c676", "patch": "@@ -0,0 +1,13 @@\n+error: conflicting doc inlining attributes\n+  --> $DIR/doc-inline-extern-crate.rs:1:7\n+   |\n+LL | #[doc(inline)]\n+   |       ^^^^^^ this attribute...\n+LL |\n+LL | #[doc(no_inline)]\n+   |       ^^^^^^^^^ ...conflicts with this attribute\n+   |\n+   = help: remove one of the conflicting attributes\n+\n+error: aborting due to previous error\n+"}]}