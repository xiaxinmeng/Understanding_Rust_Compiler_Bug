{"sha": "745dee9d3ee82558570ee7bd832ce81654ce4096", "node_id": "C_kwDOAAsO6NoAKDc0NWRlZTlkM2VlODI1NTg1NzBlZTdiZDgzMmNlODE2NTRjZTQwOTY", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2020-11-14T00:59:00Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-09-30T17:41:31Z"}, "message": "Move encode_metadata out of CrateStore.", "tree": {"sha": "aab3d6bacdd148183fe7bf279bb34d851ddab691", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aab3d6bacdd148183fe7bf279bb34d851ddab691"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/745dee9d3ee82558570ee7bd832ce81654ce4096", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/745dee9d3ee82558570ee7bd832ce81654ce4096", "html_url": "https://github.com/rust-lang/rust/commit/745dee9d3ee82558570ee7bd832ce81654ce4096", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/745dee9d3ee82558570ee7bd832ce81654ce4096/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "500e22e340ee260c3fcd0e34e20e5c5d71df04bf", "url": "https://api.github.com/repos/rust-lang/rust/commits/500e22e340ee260c3fcd0e34e20e5c5d71df04bf", "html_url": "https://github.com/rust-lang/rust/commit/500e22e340ee260c3fcd0e34e20e5c5d71df04bf"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "33814727eb1f6490bc3e9b8cc400465c398f3069", "filename": "scripts/filter_profile.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/745dee9d3ee82558570ee7bd832ce81654ce4096/scripts%2Ffilter_profile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/745dee9d3ee82558570ee7bd832ce81654ce4096/scripts%2Ffilter_profile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/scripts%2Ffilter_profile.rs?ref=745dee9d3ee82558570ee7bd832ce81654ce4096", "patch": "@@ -96,7 +96,7 @@ fn main() -> Result<(), Box<dyn std::error::Error>> {\n             stack = &stack[..index + REPORT_SYMBOL_NAMES.len()];\n         }\n \n-        const ENCODE_METADATA: &str = \"rustc_middle::ty::context::TyCtxt::encode_metadata\";\n+        const ENCODE_METADATA: &str = \"rustc_metadata::encode_metadata\";\n         if let Some(index) = stack.find(ENCODE_METADATA) {\n             stack = &stack[..index + ENCODE_METADATA.len()];\n         }"}, {"sha": "7b769dff3708c4c04b52e49ca80ae3e00a407119", "filename": "src/metadata.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/745dee9d3ee82558570ee7bd832ce81654ce4096/src%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/745dee9d3ee82558570ee7bd832ce81654ce4096/src%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmetadata.rs?ref=745dee9d3ee82558570ee7bd832ce81654ce4096", "patch": "@@ -7,7 +7,11 @@ use rustc_middle::middle::cstore::EncodedMetadata;\n use rustc_middle::ty::TyCtxt;\n \n // Adapted from https://github.com/rust-lang/rust/blob/da573206f87b5510de4b0ee1a9c044127e409bd3/src/librustc_codegen_llvm/base.rs#L47-L112\n-pub(crate) fn new_metadata_object(tcx: TyCtxt<'_>, cgu_name: &str, metadata: &EncodedMetadata) -> Vec<u8> {\n+pub(crate) fn new_metadata_object(\n+    tcx: TyCtxt<'_>,\n+    cgu_name: &str,\n+    metadata: &EncodedMetadata,\n+) -> Vec<u8> {\n     use snap::write::FrameEncoder;\n     use std::io::Write;\n "}]}