{"sha": "ab06acedd650d25fcdecf1ee08bb4eb2837669bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFiMDZhY2VkZDY1MGQyNWZjZGVjZjFlZTA4YmI0ZWIyODM3NjY5YmQ=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-06-30T17:25:46Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-06-30T17:25:46Z"}, "message": "mk: Request -march=i686 on i686 Linux\n\nApparently the gcc on our dist bot is so old and/or obscure that the default\n`-m32` switch doesn't think it can generate i686 code (or something like that).\nThe compiler-rt build system probes for the `__i686__` define in GCC to compile\nfor an i686 (vs i386) target, so this was failing on the bots.\n\nThis tweaks instead to pass `-march=i686` on i686-unknown-linux-gnu to C code to\nensure that we're compiling for i686 instead of i386. This should hopefully not\nactually have an impact other than maybe doing some random optimization it\nwasn't able to do so before. In theory this isn't making the target less\ncompatible as all Rust code is already compiled for i686.\n\nHopefully closes #34572", "tree": {"sha": "6198b24a993dcf42886e3b9cb9c17626fbd91a05", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6198b24a993dcf42886e3b9cb9c17626fbd91a05"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ab06acedd650d25fcdecf1ee08bb4eb2837669bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ab06acedd650d25fcdecf1ee08bb4eb2837669bd", "html_url": "https://github.com/rust-lang/rust/commit/ab06acedd650d25fcdecf1ee08bb4eb2837669bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ab06acedd650d25fcdecf1ee08bb4eb2837669bd/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2b56fb7a0c24e04227318ca7e5950e9289ee3e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2b56fb7a0c24e04227318ca7e5950e9289ee3e4", "html_url": "https://github.com/rust-lang/rust/commit/c2b56fb7a0c24e04227318ca7e5950e9289ee3e4"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "129af8ac69609396b0b31cd496f294e0e9ed4d18", "filename": "mk/cfg/i686-unknown-linux-gnu.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ab06acedd650d25fcdecf1ee08bb4eb2837669bd/mk%2Fcfg%2Fi686-unknown-linux-gnu.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ab06acedd650d25fcdecf1ee08bb4eb2837669bd/mk%2Fcfg%2Fi686-unknown-linux-gnu.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fcfg%2Fi686-unknown-linux-gnu.mk?ref=ab06acedd650d25fcdecf1ee08bb4eb2837669bd", "patch": "@@ -8,7 +8,7 @@ CFG_STATIC_LIB_NAME_i686-unknown-linux-gnu=lib$(1).a\n CFG_LIB_GLOB_i686-unknown-linux-gnu=lib$(1)-*.so\n CFG_LIB_DSYM_GLOB_i686-unknown-linux-gnu=lib$(1)-*.dylib.dSYM\n CFG_JEMALLOC_CFLAGS_i686-unknown-linux-gnu := -m32 $(CFLAGS)\n-CFG_GCCISH_CFLAGS_i686-unknown-linux-gnu := -Wall -Werror -g -fPIC -m32 $(CFLAGS)\n+CFG_GCCISH_CFLAGS_i686-unknown-linux-gnu := -Wall -Werror -g -fPIC -m32 $(CFLAGS) -march=i686\n CFG_GCCISH_CXXFLAGS_i686-unknown-linux-gnu := -fno-rtti $(CXXFLAGS)\n CFG_GCCISH_LINK_FLAGS_i686-unknown-linux-gnu := -shared -fPIC -ldl -pthread  -lrt -g -m32\n CFG_GCCISH_DEF_FLAG_i686-unknown-linux-gnu := -Wl,--export-dynamic,--dynamic-list="}]}