{"sha": "91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "node_id": "C_kwDOAAsO6NoAKDkxZTdlOGRkY2JjMTZkMzVhMzY3ZmRhMTk4Njg0YTUxZWUyZDBiMmI", "commit": {"author": {"name": "Erik Desjardins", "email": "erikdesjardins@users.noreply.github.com", "date": "2022-02-26T21:58:17Z"}, "committer": {"name": "Erik Desjardins", "email": "erikdesjardins@users.noreply.github.com", "date": "2022-02-26T21:58:17Z"}, "message": "just put smallvec lengths in the signature", "tree": {"sha": "24526cad9f461aeed5496cb5897ae3aaa2344d51", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/24526cad9f461aeed5496cb5897ae3aaa2344d51"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "html_url": "https://github.com/rust-lang/rust/commit/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b/comments", "author": {"login": "erikdesjardins", "id": 7673145, "node_id": "MDQ6VXNlcjc2NzMxNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7673145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikdesjardins", "html_url": "https://github.com/erikdesjardins", "followers_url": "https://api.github.com/users/erikdesjardins/followers", "following_url": "https://api.github.com/users/erikdesjardins/following{/other_user}", "gists_url": "https://api.github.com/users/erikdesjardins/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikdesjardins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikdesjardins/subscriptions", "organizations_url": "https://api.github.com/users/erikdesjardins/orgs", "repos_url": "https://api.github.com/users/erikdesjardins/repos", "events_url": "https://api.github.com/users/erikdesjardins/events{/privacy}", "received_events_url": "https://api.github.com/users/erikdesjardins/received_events", "type": "User", "site_admin": false}, "committer": {"login": "erikdesjardins", "id": 7673145, "node_id": "MDQ6VXNlcjc2NzMxNDU=", "avatar_url": "https://avatars.githubusercontent.com/u/7673145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erikdesjardins", "html_url": "https://github.com/erikdesjardins", "followers_url": "https://api.github.com/users/erikdesjardins/followers", "following_url": "https://api.github.com/users/erikdesjardins/following{/other_user}", "gists_url": "https://api.github.com/users/erikdesjardins/gists{/gist_id}", "starred_url": "https://api.github.com/users/erikdesjardins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erikdesjardins/subscriptions", "organizations_url": "https://api.github.com/users/erikdesjardins/orgs", "repos_url": "https://api.github.com/users/erikdesjardins/repos", "events_url": "https://api.github.com/users/erikdesjardins/events{/privacy}", "received_events_url": "https://api.github.com/users/erikdesjardins/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30d3ce06742fc5d0eb844239652a0af4d47bb095", "url": "https://api.github.com/repos/rust-lang/rust/commits/30d3ce06742fc5d0eb844239652a0af4d47bb095", "html_url": "https://github.com/rust-lang/rust/commit/30d3ce06742fc5d0eb844239652a0af4d47bb095"}], "stats": {"total": 19, "additions": 8, "deletions": 11}, "files": [{"sha": "f8f6956c47e4d298327f22f3c61e75ffac512b77", "filename": "compiler/rustc_codegen_llvm/src/abi.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b/compiler%2Frustc_codegen_llvm%2Fsrc%2Fabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b/compiler%2Frustc_codegen_llvm%2Fsrc%2Fabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fabi.rs?ref=91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "patch": "@@ -51,13 +51,10 @@ const OPTIMIZATION_ATTRIBUTES: [(ArgAttribute, llvm::AttributeKind); 5] = [\n     (ArgAttribute::NoUndef, llvm::AttributeKind::NoUndef),\n ];\n \n-fn get_attrs<'ll>(\n-    this: &ArgAttributes,\n-    cx: &CodegenCx<'ll, '_>,\n-) -> SmallVec<impl smallvec::Array<Item = &'ll Attribute>> {\n+fn get_attrs<'ll>(this: &ArgAttributes, cx: &CodegenCx<'ll, '_>) -> SmallVec<[&'ll Attribute; 8]> {\n     let mut regular = this.regular;\n \n-    let mut attrs = SmallVec::<[_; 8]>::new();\n+    let mut attrs = SmallVec::new();\n \n     // ABI-affecting attributes must always be applied\n     for (attr, llattr) in ABI_AFFECTING_ATTRIBUTES {"}, {"sha": "13a41388f5e2f8af0ea49d86e4f0d0d1d59e972e", "filename": "compiler/rustc_codegen_llvm/src/attributes.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b/compiler%2Frustc_codegen_llvm%2Fsrc%2Fattributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91e7e8ddcbc16d35a367fda198684a51ee2d0b2b/compiler%2Frustc_codegen_llvm%2Fsrc%2Fattributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fattributes.rs?ref=91e7e8ddcbc16d35a367fda198684a51ee2d0b2b", "patch": "@@ -62,8 +62,8 @@ fn inline_attr<'ll>(cx: &CodegenCx<'ll, '_>, inline: InlineAttr) -> Option<&'ll\n pub fn sanitize_attrs<'ll>(\n     cx: &CodegenCx<'ll, '_>,\n     no_sanitize: SanitizerSet,\n-) -> SmallVec<impl smallvec::Array<Item = &'ll Attribute>> {\n-    let mut attrs = SmallVec::<[_; 4]>::new();\n+) -> SmallVec<[&'ll Attribute; 4]> {\n+    let mut attrs = SmallVec::new();\n     let enabled = cx.tcx.sess.opts.debugging_opts.sanitizer - no_sanitize;\n     if enabled.contains(SanitizerSet::ADDRESS) {\n         attrs.push(llvm::AttributeKind::SanitizeAddress.create_attr(cx.llcx));\n@@ -224,12 +224,12 @@ pub(crate) fn default_optimisation_attrs<'ll>(\n     cx: &CodegenCx<'ll, '_>,\n ) -> (\n     // Attributes to remove\n-    SmallVec<impl smallvec::Array<Item = AttributeKind>>,\n+    SmallVec<[AttributeKind; 3]>,\n     // Attributes to add\n-    SmallVec<impl smallvec::Array<Item = &'ll Attribute>>,\n+    SmallVec<[&'ll Attribute; 2]>,\n ) {\n-    let mut to_remove = SmallVec::<[_; 3]>::new();\n-    let mut to_add = SmallVec::<[_; 2]>::new();\n+    let mut to_remove = SmallVec::new();\n+    let mut to_add = SmallVec::new();\n     match cx.sess().opts.optimize {\n         OptLevel::Size => {\n             to_remove.push(llvm::AttributeKind::MinSize);"}]}