{"sha": "a64724fac49a91b1049f377f296b16a4725b713b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2NDcyNGZhYzQ5YTkxYjEwNDlmMzc3ZjI5NmIxNmE0NzI1YjcxM2I=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-02-01T06:43:03Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-02-01T06:43:03Z"}, "message": "Fix false positive in empty_line_after_outer_attr\n\nDoc comments are syntactic sugar for #[doc] attributes, so this lint was\ncatching them, too.\n\nThis commit makes it so that doc comments are ignored in this lint.\n\nI think, for normal attributes it makes sense to warn about following empty\nlines, for doc comments, less. This way the user has some freedom over\nthe formatting.", "tree": {"sha": "4c34acb3dd9ffc3c641d36bad6a3bc572bbd60b7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4c34acb3dd9ffc3c641d36bad6a3bc572bbd60b7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a64724fac49a91b1049f377f296b16a4725b713b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJacrnIAAoJEGZ8j0taaYpgBd0P/inARjDekaRGaQIspJCPfX63\nC1deLGYSusInK50KRr4NUuOebASJjcjCFXIEoUrV3ZjiI5fk87Ls7gLNAvhorKBz\nDzczyAqM4pwyr2hxUxCt9Ia0pLxnYOpH1XlAUdXdaeiX2oHFLYNxkbqxd0kraasT\n/M9FWU+CsaV758dbEOL1HYc56QzoZQuqOGFIkGGBR5ULB+TSI4Ep9191hvOuEEIb\nz06+eBmTMldOJ8QLL2tEN3MW6fmLKO4ruD25iS8EeWWR6K7vYGPr7E0s5AjP/xsk\nlRAdKTm1Mbl7NkHrC5sRRPvEwRsAGu8nc8HzJV0OzVM6oQJ8ci1nSZOhQyABn9hJ\n408bW2TipiuFgDsK+N+s6yNHk1fIIuKoQCAF08hZPu7fzogXESfLP8ofnWmNdE0T\nlspEFiHqLgaHhCawprMdr4cGhC/NVjzcODdKSogh/VfebrgRkgqLHY0Xg0EjbQQ1\nxmd55PvdWSVhgKQjEHwaZ9yAzgbG7chadNcDq5ZK7aMUVqlk4u6CXqAHnukIiBTg\n29ysBs+SxoMv4CO5suuWKrPENGLkioQGkBfKxcxD7wqqIYn4F0HGWkt6bfFTvDxl\nvg6AfJcjZiLe/ryaZVCKVJO5d/Ob4YHsy506kctSRJsk8O+jKDfTocVJDhNHu03T\nQ3YhTDwvBwdcJbjuRYmx\n=XDtC\n-----END PGP SIGNATURE-----", "payload": "tree 4c34acb3dd9ffc3c641d36bad6a3bc572bbd60b7\nparent ee8d32850d1c32aaa593ca9e42e127cfa88ec9c9\nauthor Philipp Hansch <dev@phansch.net> 1517467383 +0100\ncommitter Philipp Hansch <dev@phansch.net> 1517467383 +0100\n\nFix false positive in empty_line_after_outer_attr\n\nDoc comments are syntactic sugar for #[doc] attributes, so this lint was\ncatching them, too.\n\nThis commit makes it so that doc comments are ignored in this lint.\n\nI think, for normal attributes it makes sense to warn about following empty\nlines, for doc comments, less. This way the user has some freedom over\nthe formatting.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a64724fac49a91b1049f377f296b16a4725b713b", "html_url": "https://github.com/rust-lang/rust/commit/a64724fac49a91b1049f377f296b16a4725b713b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a64724fac49a91b1049f377f296b16a4725b713b/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ee8d32850d1c32aaa593ca9e42e127cfa88ec9c9", "url": "https://api.github.com/repos/rust-lang/rust/commits/ee8d32850d1c32aaa593ca9e42e127cfa88ec9c9", "html_url": "https://github.com/rust-lang/rust/commit/ee8d32850d1c32aaa593ca9e42e127cfa88ec9c9"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "73f25aa76e0991b852ef39297ee7d7497f89ccfa", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a64724fac49a91b1049f377f296b16a4725b713b/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a64724fac49a91b1049f377f296b16a4725b713b/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=a64724fac49a91b1049f377f296b16a4725b713b", "patch": "@@ -262,6 +262,9 @@ fn check_attrs(cx: &LateContext, span: Span, name: &Name, attrs: &[Attribute]) {\n     }\n \n     for attr in attrs {\n+        if attr.is_sugared_doc {\n+            return;\n+        }\n         if attr.style == AttrStyle::Outer {\n             if !is_present_in_source(cx, attr.span) {\n                 return;\n@@ -276,7 +279,7 @@ fn check_attrs(cx: &LateContext, span: Span, name: &Name, attrs: &[Attribute]) {\n                         cx,\n                         EMPTY_LINE_AFTER_OUTER_ATTR,\n                         attr_to_item_span,\n-                        &format!(\"Found an empty line after an outer attribute. Perhaps you forgot to add a '!' to make it an inner attribute?\")\n+                        \"Found an empty line after an outer attribute. Perhaps you forgot to add a '!' to make it an inner attribute?\"\n                         );\n \n                 }"}, {"sha": "ef78ca530c1907355a49601d07530c60b570b33e", "filename": "tests/ui/empty_line_after_outer_attribute.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a64724fac49a91b1049f377f296b16a4725b713b/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a64724fac49a91b1049f377f296b16a4725b713b/tests%2Fui%2Fempty_line_after_outer_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fempty_line_after_outer_attribute.rs?ref=a64724fac49a91b1049f377f296b16a4725b713b", "patch": "@@ -47,6 +47,11 @@ struct Foo {\n mod foo {\n }\n \n+/// This doc comment should not produce a warning\n+\n+/** This is also a doc comment and should not produce a warning\n+ */\n+\n // This should not produce a warning\n #[allow(non_camel_case_types)]\n #[allow(missing_docs)]"}]}