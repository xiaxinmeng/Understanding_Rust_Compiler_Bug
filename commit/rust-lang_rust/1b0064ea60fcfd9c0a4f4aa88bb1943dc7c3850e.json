{"sha": "1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiMDA2NGVhNjBmY2ZkOWMwYTRmNGFhODhiYjE5NDNkYzdjMzg1MGU=", "commit": {"author": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2016-01-15T20:12:51Z"}, "committer": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2016-01-16T17:35:00Z"}, "message": "Fix test fallout\n\nSigned-off-by: Peter Atashian <retep998@gmail.com>", "tree": {"sha": "9b94adc13c534aa664c9fbab62dd7997d1fa3661", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9b94adc13c534aa664c9fbab62dd7997d1fa3661"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "html_url": "https://github.com/rust-lang/rust/commit/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/comments", "author": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "committer": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "06c66d6ca23c73c60aeb0ea2c12baaf0236afe40", "url": "https://api.github.com/repos/rust-lang/rust/commits/06c66d6ca23c73c60aeb0ea2c12baaf0236afe40", "html_url": "https://github.com/rust-lang/rust/commit/06c66d6ca23c73c60aeb0ea2c12baaf0236afe40"}], "stats": {"total": 19, "additions": 9, "deletions": 10}, "files": [{"sha": "98e112a374423910cf249c8170e6a6e123a7d5c6", "filename": "src/test/run-make/c-link-to-rust-dylib/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fc-link-to-rust-dylib%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fc-link-to-rust-dylib%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fc-link-to-rust-dylib%2FMakefile?ref=1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "patch": "@@ -7,7 +7,7 @@ all: $(TMPDIR)/$(call BIN,bar)\n \n ifdef IS_MSVC\n $(TMPDIR)/$(call BIN,bar): $(call DYLIB,foo)\n-\t$(CC) bar.c $(TMPDIR)/foo.lib $(call OUT_EXE,bar)\n+\t$(CC) bar.c $(TMPDIR)/foo.dll.lib $(call OUT_EXE,bar)\n else\n $(TMPDIR)/$(call BIN,bar): $(call DYLIB,foo)\n \t$(CC) bar.c -lfoo -o $(call RUN_BINFILE,bar) -L $(TMPDIR)"}, {"sha": "47264e82165b4a96b80bba72fc96c0ac0214212f", "filename": "src/test/run-make/c-link-to-rust-staticlib/Makefile", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fc-link-to-rust-staticlib%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fc-link-to-rust-staticlib%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fc-link-to-rust-staticlib%2FMakefile?ref=1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "patch": "@@ -4,11 +4,10 @@\n ifneq ($(shell uname),FreeBSD)\n all:\n \t$(RUSTC) foo.rs\n-\tcp $(TMPDIR)/libfoo.a $(call NATIVE_STATICLIB,foo2)\n-\t$(CC) bar.c $(call NATIVE_STATICLIB,foo2) $(call OUT_EXE,bar) \\\n+\t$(CC) bar.c $(call STATICLIB,foo) $(call OUT_EXE,bar) \\\n \t\t$(EXTRACFLAGS) $(EXTRACXXFLAGS)\n \t$(call RUN,bar)\n-\trm $(call STATICLIB,foo*)\n+\trm $(call STATICLIB,foo)\n \t$(call RUN,bar)\n \n else"}, {"sha": "0f61f5de938bc37d6bf5fbfae13b58e533ad5c1c", "filename": "src/test/run-make/lto-smoke-c/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Flto-smoke-c%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Flto-smoke-c%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Flto-smoke-c%2FMakefile?ref=1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "patch": "@@ -5,7 +5,7 @@ CC := $(CC:-g=)\n \n all:\n \t$(RUSTC) foo.rs -C lto\n-\t$(CC) bar.c $(TMPDIR)/libfoo.a \\\n+\t$(CC) bar.c $(call STATICLIB,foo) \\\n \t\t$(call OUT_EXE,bar) \\\n \t\t$(EXTRACFLAGS) $(EXTRACXXFLAGS)\n \t$(call RUN,bar)"}, {"sha": "c2715027bc1f904470285ddc0ce97fde9df967a2", "filename": "src/test/run-make/output-type-permutations/Makefile", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Foutput-type-permutations%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Foutput-type-permutations%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Foutput-type-permutations%2FMakefile?ref=1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "patch": "@@ -4,8 +4,8 @@ all:\n \t$(RUSTC) foo.rs --crate-type=rlib,dylib,staticlib\n \t$(call REMOVE_RLIBS,bar)\n \t$(call REMOVE_DYLIBS,bar)\n-\trm $(TMPDIR)/libbar.a\n-\trm -f $(TMPDIR)/bar.{exp,lib,pdb}\n+\trm $(call STATICLIB,bar)\n+\trm -f $(TMPDIR)/bar.{dll.exp,dll.lib,pdb}\n \t# Check that $(TMPDIR) is empty.\n \t[ \"$$(ls -1 $(TMPDIR) | wc -l)\" -eq \"0\" ]\n \n@@ -78,7 +78,7 @@ all:\n \trm $(TMPDIR)/$(call BIN,foo)\n \t$(RUSTC) foo.rs --crate-type=dylib --emit=link=$(TMPDIR)/$(call BIN,foo)\n \trm $(TMPDIR)/$(call BIN,foo)\n-\trm -f $(TMPDIR)/foo.{exp,lib,pdb}\n+\trm -f $(TMPDIR)/foo.{dll.exp,dll.lib,pdb}\n \t[ \"$$(ls -1 $(TMPDIR) | wc -l)\" -eq \"0\" ]\n \n \t$(RUSTC) foo.rs --crate-type=staticlib -o $(TMPDIR)/foo\n@@ -133,7 +133,7 @@ all:\n \trm $(TMPDIR)/bar.ll\n \trm $(TMPDIR)/bar.s\n \trm $(TMPDIR)/bar.o\n-\trm $(TMPDIR)/libbar.a\n+\trm $(call STATICLIB,bar)\n \tmv $(TMPDIR)/bar.bc $(TMPDIR)/foo.bc\n \t# Don't check that the $(TMPDIR) is empty - we left `foo.bc` for later\n \t# comparison."}, {"sha": "6409aa66ae061879f2055606e83b573b8dc75bce", "filename": "src/test/run-make/static-dylib-by-default/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fstatic-dylib-by-default%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e/src%2Ftest%2Frun-make%2Fstatic-dylib-by-default%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fstatic-dylib-by-default%2FMakefile?ref=1b0064ea60fcfd9c0a4f4aa88bb1943dc7c3850e", "patch": "@@ -2,7 +2,7 @@\n \n TO_LINK := $(call DYLIB,bar)\n ifdef IS_MSVC\n-LINK_ARG = $(TO_LINK:dll=lib)\n+LINK_ARG = $(TO_LINK:dll=dll.lib)\n else\n LINK_ARG = $(TO_LINK)\n endif"}]}