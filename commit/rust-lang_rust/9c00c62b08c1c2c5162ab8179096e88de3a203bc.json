{"sha": "9c00c62b08c1c2c5162ab8179096e88de3a203bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjljMDBjNjJiMDhjMWMyYzUxNjJhYjgxNzkwOTZlODhkZTNhMjAzYmM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2011-11-23T23:20:28Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2011-11-29T20:51:09Z"}, "message": "fix makefiles, add option to ignore changes in makefiles", "tree": {"sha": "de475166566617e11a78c97ef5cb579721ce35e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de475166566617e11a78c97ef5cb579721ce35e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9c00c62b08c1c2c5162ab8179096e88de3a203bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9c00c62b08c1c2c5162ab8179096e88de3a203bc", "html_url": "https://github.com/rust-lang/rust/commit/9c00c62b08c1c2c5162ab8179096e88de3a203bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9c00c62b08c1c2c5162ab8179096e88de3a203bc/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "092fc0ab2216a63a8ff698ff61ed9fefe54fa31a", "url": "https://api.github.com/repos/rust-lang/rust/commits/092fc0ab2216a63a8ff698ff61ed9fefe54fa31a", "html_url": "https://github.com/rust-lang/rust/commit/092fc0ab2216a63a8ff698ff61ed9fefe54fa31a"}], "stats": {"total": 88, "additions": 49, "deletions": 39}, "files": [{"sha": "d9f9012f88dd7bc28364574bbd76325529cc62ad", "filename": "Makefile.in", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/Makefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/Makefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Makefile.in?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -59,6 +59,12 @@ GEN_MKFILES := $(wildcard $(CFG_SRC_DIR)/mk/libuv/*/*/*) \\\n \n MKFILES := $(OUR_MKFILES) $(3RDPARTY_MKFILES) $(GEN_MKFILES)\n \n+ifdef IGNORE_MKFILES\n+  MKFILE_DEPS :=\n+else\n+  MKFILE_DEPS := $(MKFILES)\n+endif\n+\n NON_HOST_TRIPLES = $(filter-out $(CFG_HOST_TRIPLE),$(CFG_TARGET_TRIPLES))\n \n ifneq ($(MAKE_RESTARTS),)"}, {"sha": "a53d0aa9bdffc4d4477c1f9c88140ff35fa92e75", "filename": "mk/autodep.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fautodep.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fautodep.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fautodep.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -5,7 +5,7 @@\n C_DEPFILES := $(RUNTIME_CS:%.cpp=%.d) $(RUSTLLVM_LIB_CS:%.cpp=%.d) \\\n               $(RUSTLLVM_OBJS_CS:%.cpp=%.d)\n \n-rt/%.d: rt/%.cpp $(MKFILES)\n+rt/%.d: rt/%.cpp $(MKFILE_DEPS)\n \t@$(call E, dep: $@)\n \t$(Q)$(call CFG_DEPEND_C, $@ \\\n       $(subst $(S)src/,,$(patsubst %.cpp, %.o, $<)), \\\n@@ -14,7 +14,7 @@ rt/%.d: rt/%.cpp $(MKFILES)\n \t$(Q)rm -f $@.tmp.bak\n \t$(Q)mv $@.tmp $@\n \n-rustllvm/%.d: rustllvm/%.cpp $(MKFILES) $(LLVM_CONFIG_$(CFG_HOST_TRIPLE))\n+rustllvm/%.d: rustllvm/%.cpp $(MKFILE_DEPS) $(LLVM_CONFIG_$(CFG_HOST_TRIPLE))\n \t@$(call E, dep: $@)\n \t$(Q)$(call CFG_DEPEND_C, $@ \\\n       $(subst $(S)src/,,$(patsubst %.cpp, %.o, $<)), \\"}, {"sha": "def3cfc126921fe434c489eb40c07933b0f277a8", "filename": "mk/dist.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -53,7 +53,7 @@ PKG_FILES = \\\n     $(COMPILETEST_CRATE)                       \\\n     $(COMPILETEST_INPUTS)                      \\\n     $(PKG_PP_EXAMPLES)                         \\\n-    $(MKFILES)\n+    $(MKFILE_DEPS)\n \n dist: $(PKG_TAR) $(PKG_EXE)\n "}, {"sha": "b4250194c483877c1a53003aac07ad66aa251e9f", "filename": "mk/docs.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fdocs.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fdocs.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdocs.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -8,7 +8,7 @@ doc/keywords.texi: $(S)doc/keywords.txt $(S)src/etc/gen-keywords-table.py\n \t@$(call E, gen-keywords-table: $@)\n \t$(Q)$(S)src/etc/gen-keywords-table.py\n \n-doc/version.texi: $(MKFILES) rust.texi\n+doc/version.texi: $(MKFILE_DEPS) rust.texi\n \t@$(call E, version-stamp: $@)\n \t$(Q)echo \"@macro gitversion\" >$@\n \t$(Q)echo \"$(CFG_VERSION)\" >>$@"}, {"sha": "57d75e3243554e37a81d0c18f421e6613800fc0f", "filename": "mk/rt.mk", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -131,22 +131,23 @@ RUNTIME_OBJS_$(1) := $$(RUNTIME_CS_$(1):rt/%.cpp=rt/$(1)/%.o) \\\n                      $$(RUNTIME_S_$(1):rt/%.S=rt/$(1)/%.o)\n RUNTIME_LIBS_$(1) := $$(LIBUV_LIB_$(1))\n \n-rt/$(1)/%.o: rt/%.cpp $$(MKFILES)\n+rt/$(1)/%.o: rt/%.cpp $$(MKFILE_DEPS)\n \t@$$(call E, compile: $$@)\n \t$$(Q)$$(call CFG_COMPILE_C_$(1), $$@, $$(RUNTIME_INCS_$(1))) $$<\n \n-rt/$(1)/%.o: rt/%.S $$(MKFILES)\n+rt/$(1)/%.o: rt/%.S $$(MKFILE_DEPS)\n \t@$$(call E, compile: $$@)\n \t$$(Q)$$(call CFG_COMPILE_C_$(1), $$@, $$(RUNTIME_INCS_$(1))) $$<\n \n-rt/$(1)/arch/$$(HOST_$(1))/libmorestack.a: rt/$(1)/arch/$$(HOST_$(1))/morestack.o\n+rt/$(1)/arch/$$(HOST_$(1))/libmorestack.a: \\\n+\t\trt/$(1)/arch/$$(HOST_$(1))/morestack.o\n \t@$$(call E, link: $$@)\n \t$$(Q)ar rcs $$@ $$<\n \n-rt/$(1)/$(CFG_RUNTIME): $$(RUNTIME_OBJS_$(1)) $$(MKFILES) \\\n-\t\t\t  \t\t\t\t $$(RUNTIME_HDR_$(1)) \\\n-                             $$(RUNTIME_DEF_$(1)) \\\n-                             $$(RUNTIME_LIBS_$(1))\n+rt/$(1)/$(CFG_RUNTIME): $$(RUNTIME_OBJS_$(1)) $$(MKFILE_DEPS) \\\n+\t\t\t$$(RUNTIME_HDR_$(1)) \\\n+                        $$(RUNTIME_DEF_$(1)) \\\n+                        $$(RUNTIME_LIBS_$(1))\n \t@$$(call E, link: $$@)\n \t$$(Q)$$(call CFG_LINK_C_$(1),$$@, $$(RUNTIME_OBJS_$(1)) \\\n \t  $$(CFG_GCCISH_POST_LIB_FLAGS) $$(RUNTIME_LIBS_$(1)) \\\n@@ -172,18 +173,18 @@ $$(LIBUV_LIB_$(1)): $$(wildcard \\\n # These could go in rt.mk or rustllvm.mk, they're needed for both.\n \n # This regexp has a single $, escaped twice\n-%.linux.def:    %.def.in $$(MKFILES)\n+%.linux.def:    %.def.in $$(MKFILE_DEPS)\n \t@$$(call E, def: $$@)\n \t$$(Q)echo \"{\" > $$@\n \t$$(Q)sed 's/.$$$$/&;/' $$< >> $$@\n \t$$(Q)echo \"};\" >> $$@\n \n-%.darwin.def:\t%.def.in $$(MKFILES)\n+%.darwin.def:\t%.def.in $$(MKFILE_DEPS)\n \t@$$(call E, def: $$@)\n \t$$(Q)sed 's/^./_&/' $$< > $$@\n \n ifdef CFG_WINDOWSY\n-%.def:\t%.def.in $$(MKFILES)\n+%.def:\t%.def.in $$(MKFILE_DEPS)\n \t@$$(call E, def: $$@)\n \t$$(Q)echo LIBRARY $$* > $$@\n \t$$(Q)echo EXPORTS >> $$@"}, {"sha": "dc85cd0943e4dc5fa93a06d1ddc7be877ebf5394", "filename": "mk/rustllvm.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Frustllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Frustllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frustllvm.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -19,14 +19,14 @@ RUSTLLVM_INCS_$(1) = -iquote $$(LLVM_INCDIR_$(1)) \\\n RUSTLLVM_OBJS_OBJS_$(1) := $$(RUSTLLVM_OBJS_CS_$(1):rustllvm/%.cpp=rustllvm/$(1)/%.o)\n \n rustllvm/$(1)/$(CFG_RUSTLLVM): $$(RUSTLLVM_OBJS_OBJS_$(1)) \\\n-                          $$(MKFILES) $$(RUSTLLVM_DEF_$(1))\n+                          $$(MKFILE_DEPS) $$(RUSTLLVM_DEF_$(1))\n \t@$$(call E, link: $$@)\n \t$$(Q)$$(call CFG_LINK_C_$(1),$$@,$$(RUSTLLVM_OBJS_OBJS_$(1)) \\\n \t  $$(CFG_GCCISH_PRE_LIB_FLAGS) $$(LLVM_LIBS_$(1)) \\\n           $$(CFG_GCCISH_POST_LIB_FLAGS) \\\n           $$(LLVM_LDFLAGS_$(1)),$$(RUSTLLVM_DEF_$(1)),$$(CFG_RUSTLLVM))\n \n-rustllvm/$(1)/%.o: rustllvm/%.cpp $$(MKFILES) $$(LLVM_CONFIG_$(1))\n+rustllvm/$(1)/%.o: rustllvm/%.cpp $$(MKFILE_DEPS) $$(LLVM_CONFIG_$(1))\n \t@$$(call E, compile: $$@)\n \t$$(Q)$$(call CFG_COMPILE_C_$(1), $$@, $$(LLVM_CXXFLAGS_$(1)) $$(RUSTLLVM_INCS_$(1))) $$<\n endef"}, {"sha": "325418181caa446f5dcb225beec3a23344a106b8", "filename": "mk/stage0.mk", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fstage0.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Fstage0.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage0.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -2,7 +2,7 @@\n \n $(HBIN0_H_$(CFG_HOST_TRIPLE))/rustc$(X):\t\t\\\n \t\t$(S)src/snapshots.txt\t\t\t\t\t\\\n-\t\t$(S)src/etc/get-snapshot.py $(MKFILES)\n+\t\t$(S)src/etc/get-snapshot.py $(MKFILE_DEPS)\n \t@$(call E, fetch: $@)\n \t$(Q)$(S)src/etc/get-snapshot.py $(CFG_HOST_TRIPLE)\n \t$(Q)touch $@\n@@ -50,5 +50,7 @@ $$(HLIB0_H_$(1))/$(CFG_RUSTLLVM): \\\n \n endef\n \n+# Use stage1 to build other architectures: then you don't have to wait\n+# for stage2, but you get the latest updates to the compiler source.\n $(foreach t,$(NON_HOST_TRIPLES),\t\t\t\t\t\t\t\t\\\n- $(eval $(call BOOTSTRAP_STAGE0,$(t),2,$(CFG_HOST_TRIPLE))))\n+ $(eval $(call BOOTSTRAP_STAGE0,$(t),1,$(CFG_HOST_TRIPLE))))"}, {"sha": "19c9522ccafd1abc5e6844432851399eb58d0c0b", "filename": "mk/tests.mk", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -201,62 +201,62 @@ CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\t\\\n         --rustcflags \"$$(CFG_RUSTC_FLAGS) --target=$(2)\"\t\\\n         $$(CTEST_TESTARGS)\n \n-CFAIL_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\t\\\n+CFAIL_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/compile-fail/\t\\\n-        --build-base test/compile-fail/\t\t\t\\\n+        --build-base $(3)/test/compile-fail/\t\\\n         --mode compile-fail\n \n-RFAIL_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\t\\\n+RFAIL_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/run-fail/\t\t\\\n-        --build-base test/run-fail/\t\t\t\t\\\n+        --build-base $(3)/test/run-fail/\t\t\\\n         --mode run-fail\t\t\t\t\t\t\t\\\n         $$(CTEST_RUNTOOL)\n \n-RPASS_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\t\\\n+RPASS_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/run-pass/\t\t\\\n-        --build-base test/run-pass/\t\t\t\t\\\n+        --build-base $(3)/test/run-pass/\t\t\\\n         --mode run-pass\t\t\t\t\t\t\t\\\n         $$(CTEST_RUNTOOL)\n \n-BENCH_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\t\\\n+BENCH_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/bench/\t\t\t\\\n-        --build-base test/bench/\t\t\t\t\\\n+        --build-base $(3)/test/bench/\t\t\t\\\n         --mode run-pass\t\t\t\t\t\t\t\\\n         $$(CTEST_RUNTOOL)\n \n-PERF_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\t\t\\\n+PERF_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/bench/\t\t\t\\\n-        --build-base test/perf/\t\t\t\t\t\\\n+        --build-base $(3)/test/perf/\t\t\t\\\n         --mode run-pass\t\t\t\t\t\t\t\\\n         $$(CTEST_PERF_RUNTOOL)\n \n-PRETTY_RPASS_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\\\n+PRETTY_RPASS_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/run-pass/\t\t\\\n-        --build-base test/run-pass/\t\t\t\t\\\n+        --build-base $(3)/test/run-pass/\t\t\\\n         --mode pretty\n \n-PRETTY_RFAIL_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\\\n+PRETTY_RFAIL_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/run-fail/\t\t\\\n-        --build-base test/run-fail/\t\t\t\t\\\n+        --build-base $(3)/test/run-fail/\t\t\\\n         --mode pretty\n \n-PRETTY_BENCH_ARGS$(1)-T-$(2)-H-$(3) := \t\t\t\\\n+PRETTY_BENCH_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/bench/\t\t\t\\\n-        --build-base test/bench/\t\t\t\t\\\n+        --build-base $(3)/test/bench/\t\t\t\\\n         --mode pretty\n \n-PRETTY_PRETTY_ARGS$(1)-T-$(2)-H-$(3) := \t\t\\\n+PRETTY_PRETTY_ARGS$(1)-T-$(2)-H-$(3) :=\t\t\t\\\n \t\t$$(CTEST_COMMON_ARGS$(1)-T-$(2)-H-$(3))\t\\\n         --src-base $$(S)src/test/pretty/\t\t\\\n-        --build-base test/pretty/\t\t\t\t\\\n+        --build-base $(3)/test/pretty/\t\t\t\\\n         --mode pretty\n \n check-stage$(1)-T-$(2)-H-$(3)-cfail-dummy:\t\t\\"}, {"sha": "bb36cdf2f36c18c62313e912d468548af35d8e5e", "filename": "mk/tools.mk", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/9c00c62b08c1c2c5162ab8179096e88de3a203bc/mk%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftools.mk?ref=9c00c62b08c1c2c5162ab8179096e88de3a203bc", "patch": "@@ -45,6 +45,7 @@ $$(HBIN$(2)_H_$(4))/compiletest$$(X):\t\t\t\t\\\n \n endef\n \n-$(eval $(call TOOLS_STAGE_N,0,1,$(CFG_HOST_TRIPLE),$(CFG_HOST_TRIPLE)))\n-$(eval $(call TOOLS_STAGE_N,1,2,$(CFG_HOST_TRIPLE),$(CFG_HOST_TRIPLE)))\n-$(eval $(call TOOLS_STAGE_N,2,3,$(CFG_HOST_TRIPLE),$(CFG_HOST_TRIPLE)))\n+$(foreach host,$(CFG_TARGET_TRIPLES),\t\t\t\t\\\n+ $(eval $(call TOOLS_STAGE_N,0,1,$(host),$(host)))\t\\\n+ $(eval $(call TOOLS_STAGE_N,1,2,$(host),$(host)))\t\\\n+ $(eval $(call TOOLS_STAGE_N,2,3,$(host),$(host))))"}]}