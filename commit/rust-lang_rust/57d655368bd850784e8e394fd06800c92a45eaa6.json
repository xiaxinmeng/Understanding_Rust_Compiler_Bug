{"sha": "57d655368bd850784e8e394fd06800c92a45eaa6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3ZDY1NTM2OGJkODUwNzg0ZThlMzk0ZmQwNjgwMGM5MmE0NWVhYTY=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-01-23T19:16:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-23T19:16:00Z"}, "message": "Rollup merge of #81130 - pierwill:edit-depnode, r=jyn514\n\nEdit rustc_middle::dep_graph module documentation\n\nThis is similar to work approved and then closed in https://github.com/rust-lang/rust/pull/80325 due to a bad rebase.", "tree": {"sha": "f3aceb5dad33bda137be0856ea1ec7ac59b9a430", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f3aceb5dad33bda137be0856ea1ec7ac59b9a430"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/57d655368bd850784e8e394fd06800c92a45eaa6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgDHXxCRBK7hj4Ov3rIwAAdHIIAGi4/XSN868JOegs9SxzN/lG\n4cG33TNB2DD0Z9CFJA6iAwblPLfLtKhhvBkLPNQXu2y071XPnfVCjbBQbtkknqxV\nh87YK5tb2vjFDWc4rozucznynHC1fIez1ai+R5kH7OJSNQzfmeTZbD5eEzXoj0DD\nH/c2OmbFFE2sWRje1RFxaH678M57w6IZMrCNGG19mpB5qVQl8xkHOUyfzBStrOi0\nF8x8sxAUfXCAwJ6drFkC+9jcBdmLy19ujCqh44fQlF4vhUR+0l6TVOQKEi0G9yR4\nB2aY7W3qamdYHYcjLn7ntDz4QTvqf3TyIaxYrxCEVhbpWjEBrXXDelyHQbo5iV4=\n=FTwn\n-----END PGP SIGNATURE-----\n", "payload": "tree f3aceb5dad33bda137be0856ea1ec7ac59b9a430\nparent 3382771dfd84c56c29d0cabc38b6e2db9554c02c\nparent b29353af09893b8b70a9d84595966b7712b60b1b\nauthor Jonas Schievink <jonasschievink@gmail.com> 1611429360 +0100\ncommitter GitHub <noreply@github.com> 1611429360 +0100\n\nRollup merge of #81130 - pierwill:edit-depnode, r=jyn514\n\nEdit rustc_middle::dep_graph module documentation\n\nThis is similar to work approved and then closed in https://github.com/rust-lang/rust/pull/80325 due to a bad rebase.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/57d655368bd850784e8e394fd06800c92a45eaa6", "html_url": "https://github.com/rust-lang/rust/commit/57d655368bd850784e8e394fd06800c92a45eaa6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/57d655368bd850784e8e394fd06800c92a45eaa6/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3382771dfd84c56c29d0cabc38b6e2db9554c02c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3382771dfd84c56c29d0cabc38b6e2db9554c02c", "html_url": "https://github.com/rust-lang/rust/commit/3382771dfd84c56c29d0cabc38b6e2db9554c02c"}, {"sha": "b29353af09893b8b70a9d84595966b7712b60b1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/b29353af09893b8b70a9d84595966b7712b60b1b", "html_url": "https://github.com/rust-lang/rust/commit/b29353af09893b8b70a9d84595966b7712b60b1b"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "1cb75757379c99b9ddfb1daeab2dc7fa37c1d36c", "filename": "compiler/rustc_middle/src/dep_graph/dep_node.rs", "status": "modified", "additions": 10, "deletions": 7, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/57d655368bd850784e8e394fd06800c92a45eaa6/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57d655368bd850784e8e394fd06800c92a45eaa6/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs?ref=57d655368bd850784e8e394fd06800c92a45eaa6", "patch": "@@ -1,16 +1,17 @@\n-//! This module defines the `DepNode` type which the compiler uses to represent\n-//! nodes in the dependency graph.\n+//! Nodes in the dependency graph.\n //!\n-//! A `DepNode` consists of a `DepKind` (which\n-//! specifies the kind of thing it represents, like a piece of HIR, MIR, etc)\n-//! and a `Fingerprint`, a 128-bit hash value the exact meaning of which\n+//! A node in the [dependency graph] is represented by a [`DepNode`].\n+//! A `DepNode` consists of a [`DepKind`] (which\n+//! specifies the kind of thing it represents, like a piece of HIR, MIR, etc.)\n+//! and a [`Fingerprint`], a 128-bit hash value, the exact meaning of which\n //! depends on the node's `DepKind`. Together, the kind and the fingerprint\n //! fully identify a dependency node, even across multiple compilation sessions.\n //! In other words, the value of the fingerprint does not depend on anything\n //! that is specific to a given compilation session, like an unpredictable\n-//! interning key (e.g., NodeId, DefId, Symbol) or the numeric value of a\n+//! interning key (e.g., `NodeId`, `DefId`, `Symbol`) or the numeric value of a\n //! pointer. The concept behind this could be compared to how git commit hashes\n-//! uniquely identify a given commit and has a few advantages:\n+//! uniquely identify a given commit. The fingerprinting approach has\n+//! a few advantages:\n //!\n //! * A `DepNode` can simply be serialized to disk and loaded in another session\n //!   without the need to do any \"rebasing\" (like we have to do for Spans and\n@@ -51,6 +52,8 @@\n //! than a zeroed out fingerprint. More generally speaking, it relieves the\n //! user of the `DepNode` API of having to know how to compute the expected\n //! fingerprint for a given set of node parameters.\n+//!\n+//! [dependency graph]: https://rustc-dev-guide.rust-lang.org/query.html\n \n use crate::ty::TyCtxt;\n "}]}