{"sha": "ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "node_id": "C_kwDOAAsO6NoAKGViZjhiMWE5NmVkNWNjNGVlY2M5MWQ4MjgwNmQ3NGMzZTIwNmFiOWM", "commit": {"author": {"name": "andylizi", "email": "andylizi666@gmail.com", "date": "2022-05-23T23:35:47Z"}, "committer": {"name": "andylizi", "email": "andylizi666@gmail.com", "date": "2022-05-23T23:54:43Z"}, "message": "ide: insert whitespaces surrounding `_` in macro expansion", "tree": {"sha": "96a63164c9c123002d898c5855e62272e7f26574", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96a63164c9c123002d898c5855e62272e7f26574"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE85wNqADN79wr57npv7+oyFkp8OgFAmKMHsMACgkQv7+oyFkp\n8OiY7A/+MeOrjOa1rVPNU2AH665UZWEmSMERBj85Q+TjqRn5NlwJAxemfJHrQ4Fw\ngVLkgOjjxgHzR05lPvDUV8KFAEHvIlVbNBjxGMPRI8NAY+2IEmPjJr/PuBUHBRiW\nuC85d4IYhqvvmehj+e1FvYyu/Yqgg8Hekwg3dWx3E7Pz5MpH6Lz9SL266fp/bIb8\niLQKmv1dBQH8jUxWmf9qVPqICkWKVuC4wFP9FpfM+mRmT9gBG2pnCj0qmTVrNyvH\nJfD6pjVtoRk08kUVQpLycqKVIaLC6mwZPHd1iRTFORFAxmzdq8LvWoGtx3Y8MaTH\nyvO3vkxUcISRPBOWAhY7mdok3TxbghaENGNqyIY2/FFx2+MvUZgZ29KQWKflbDQw\ntaAPF/NIyNdRMKTftaucboVAuRApmlA+wJ+clNC+tzOzm+nFozpgCc8UcdKriu3k\nRCO3LrPq+nrDKrQQ6VJBaID+bDRzIjCYBNtum5Mt6ng1DTROenJrEdq8q+bITN5B\n4cBb1Ycgswz9QoD2M1fpVX/1IiYQvIta7YYmi80BtvctGc9VE78xNYg9hKGb9nMq\njZbb3aYKwzpejIK7Duij1XpXyJjJLXp2eCYseWGo4o+6BrxNRkvDKjCaf3weGuem\nVN0/CfBhHaEYF8ByUqLjnkSnZTeuwuUaOevC3fu57mXBnQY72nk=\n=TCVU\n-----END PGP SIGNATURE-----", "payload": "tree 96a63164c9c123002d898c5855e62272e7f26574\nparent 81805d4cfc2bb307d911806dffb6eabf29b623e3\nauthor andylizi <andylizi666@gmail.com> 1653348947 +0800\ncommitter andylizi <andylizi666@gmail.com> 1653350083 +0800\n\nide: insert whitespaces surrounding `_` in macro expansion\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "html_url": "https://github.com/rust-lang/rust/commit/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c/comments", "author": {"login": "andylizi", "id": 12008103, "node_id": "MDQ6VXNlcjEyMDA4MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/12008103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andylizi", "html_url": "https://github.com/andylizi", "followers_url": "https://api.github.com/users/andylizi/followers", "following_url": "https://api.github.com/users/andylizi/following{/other_user}", "gists_url": "https://api.github.com/users/andylizi/gists{/gist_id}", "starred_url": "https://api.github.com/users/andylizi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andylizi/subscriptions", "organizations_url": "https://api.github.com/users/andylizi/orgs", "repos_url": "https://api.github.com/users/andylizi/repos", "events_url": "https://api.github.com/users/andylizi/events{/privacy}", "received_events_url": "https://api.github.com/users/andylizi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "andylizi", "id": 12008103, "node_id": "MDQ6VXNlcjEyMDA4MTAz", "avatar_url": "https://avatars.githubusercontent.com/u/12008103?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andylizi", "html_url": "https://github.com/andylizi", "followers_url": "https://api.github.com/users/andylizi/followers", "following_url": "https://api.github.com/users/andylizi/following{/other_user}", "gists_url": "https://api.github.com/users/andylizi/gists{/gist_id}", "starred_url": "https://api.github.com/users/andylizi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andylizi/subscriptions", "organizations_url": "https://api.github.com/users/andylizi/orgs", "repos_url": "https://api.github.com/users/andylizi/repos", "events_url": "https://api.github.com/users/andylizi/events{/privacy}", "received_events_url": "https://api.github.com/users/andylizi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "81805d4cfc2bb307d911806dffb6eabf29b623e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/81805d4cfc2bb307d911806dffb6eabf29b623e3", "html_url": "https://github.com/rust-lang/rust/commit/81805d4cfc2bb307d911806dffb6eabf29b623e3"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "b5db8c1967b74581eb45d164972f21abb3e37389", "filename": "crates/ide-db/src/syntax_helpers/insert_whitespace_into_node.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c/crates%2Fide-db%2Fsrc%2Fsyntax_helpers%2Finsert_whitespace_into_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c/crates%2Fide-db%2Fsrc%2Fsyntax_helpers%2Finsert_whitespace_into_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-db%2Fsrc%2Fsyntax_helpers%2Finsert_whitespace_into_node.rs?ref=ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "patch": "@@ -57,7 +57,7 @@ pub fn insert_ws_into(syn: SyntaxNode) -> SyntaxNode {\n             |f: fn(SyntaxKind) -> bool, default| -> bool { last.map(f).unwrap_or(default) };\n \n         match tok.kind() {\n-            k if is_text(k) && is_next(|it| !it.is_punct(), true) => {\n+            k if is_text(k) && is_next(|it| !it.is_punct() || it == UNDERSCORE, false) => {\n                 mods.push(do_ws(after, tok));\n             }\n             L_CURLY if is_next(|it| it != R_CURLY, true) => {\n@@ -118,5 +118,5 @@ pub fn insert_ws_into(syn: SyntaxNode) -> SyntaxNode {\n }\n \n fn is_text(k: SyntaxKind) -> bool {\n-    k.is_keyword() || k.is_literal() || k == IDENT\n+    k.is_keyword() || k.is_literal() || k == IDENT || k == UNDERSCORE\n }"}, {"sha": "290f797c5e82de1a9cbec3d60451c558a8d76d32", "filename": "crates/ide/src/expand_macro.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c/crates%2Fide%2Fsrc%2Fexpand_macro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c/crates%2Fide%2Fsrc%2Fexpand_macro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fexpand_macro.rs?ref=ebf8b1a96ed5cc4eecc91d82806d74c3e206ab9c", "patch": "@@ -385,7 +385,7 @@ fn main() {\n \"#,\n             expect![[r#\"\n                 foo\n-                0 \"#]],\n+                0\"#]],\n         );\n     }\n "}]}