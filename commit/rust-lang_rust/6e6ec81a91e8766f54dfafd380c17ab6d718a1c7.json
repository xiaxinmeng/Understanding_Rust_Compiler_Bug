{"sha": "6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "node_id": "C_kwDOAAsO6NoAKDZlNmVjODFhOTFlODc2NmY1NGRmYWZkMzgwYzE3YWI2ZDcxOGExYzc", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-12-19T19:54:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-12-19T19:54:57Z"}, "message": "Rollup merge of #105860 - Ezrashaw:add-long-errors-0460-0457, r=jruderman,GuillaumeGomez\n\nAdd long error docs for `E0460` and `E0457`\n\nFinal docs for errors in #61137 that have UI tests, my next PRs will also add these tests.\n\nr? ``@GuillaumeGomez``", "tree": {"sha": "19945ef02f63044bc5f5155ec8960d6fc0ef1cc8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/19945ef02f63044bc5f5155ec8960d6fc0ef1cc8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjoMGRCRBK7hj4Ov3rIwAAsJQIAEsXWkxvcCM35x28HeQ+Uu0X\nW30QNe0JUt89cgeKsG1CfQKMqhveP+LeJqWtcQiplycrViXkD4pfgSog0jzq/I87\nlJkjL3PDcz5H9aLvqKkMQFtDud5LaPy0PhkV8NuoYfnFrRjDOSOSCd9nmLLPkxFr\nsjzvE2QJmgT2e6CPNKEIW5HIGGuSZxQzrcFQ2/47P9q6caYFhxfnU4X+jq3rLVgb\nK7p63OUy3XEXhTS8tvp9YYfpn8cqWFZd9Ziep7C8FPu8O+yVUjt4Ng4qilBucg+Y\n+o/lNpPSh4VkwjQx7c2KnbJvDNjAP5i1sTEk9/tRuXwBAIMNjR6ioaEq8XQnUhI=\n=J/vJ\n-----END PGP SIGNATURE-----\n", "payload": "tree 19945ef02f63044bc5f5155ec8960d6fc0ef1cc8\nparent 3af45eeb9898f8997339e51c1b9919eaaa040c0d\nparent 5ecac8ede670ac8045a199cd3bcd58bd940ec8d4\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1671479697 +0100\ncommitter GitHub <noreply@github.com> 1671479697 +0100\n\nRollup merge of #105860 - Ezrashaw:add-long-errors-0460-0457, r=jruderman,GuillaumeGomez\n\nAdd long error docs for `E0460` and `E0457`\n\nFinal docs for errors in #61137 that have UI tests, my next PRs will also add these tests.\n\nr? ``@GuillaumeGomez``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "html_url": "https://github.com/rust-lang/rust/commit/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3af45eeb9898f8997339e51c1b9919eaaa040c0d", "url": "https://api.github.com/repos/rust-lang/rust/commits/3af45eeb9898f8997339e51c1b9919eaaa040c0d", "html_url": "https://github.com/rust-lang/rust/commit/3af45eeb9898f8997339e51c1b9919eaaa040c0d"}, {"sha": "5ecac8ede670ac8045a199cd3bcd58bd940ec8d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ecac8ede670ac8045a199cd3bcd58bd940ec8d4", "html_url": "https://github.com/rust-lang/rust/commit/5ecac8ede670ac8045a199cd3bcd58bd940ec8d4"}], "stats": {"total": 120, "additions": 118, "deletions": 2}, "files": [{"sha": "883a4bbe8e8237cad9d960fddc7f4ba57001c577", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -239,8 +239,10 @@ E0452: include_str!(\"./error_codes/E0452.md\"),\n E0453: include_str!(\"./error_codes/E0453.md\"),\n E0454: include_str!(\"./error_codes/E0454.md\"),\n E0455: include_str!(\"./error_codes/E0455.md\"),\n+E0457: include_str!(\"./error_codes/E0457.md\"),\n E0458: include_str!(\"./error_codes/E0458.md\"),\n E0459: include_str!(\"./error_codes/E0459.md\"),\n+E0460: include_str!(\"./error_codes/E0460.md\"),\n E0463: include_str!(\"./error_codes/E0463.md\"),\n E0464: include_str!(\"./error_codes/E0464.md\"),\n E0466: include_str!(\"./error_codes/E0466.md\"),\n@@ -592,8 +594,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0421, // merged into 531\n //  E0427, // merged into 530\n //  E0456, // plugin `..` is not available for triple `..`\n-    E0457, // plugin `..` only found in rlib format, but must be available...\n-    E0460, // found possibly newer version of crate `..`\n     E0461, // couldn't find crate `..` with expected target triple ..\n     E0462, // found staticlib `..` instead of rlib or dylib\n     E0465, // multiple .. candidates for `..` found"}, {"sha": "53d384d36c4267c7b42db39ee6a268e292deefc4", "filename": "compiler/rustc_error_codes/src/error_codes/E0457.md", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0457.md", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0457.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0457.md?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -0,0 +1,36 @@\n+Plugin `..` only found in rlib format, but must be available in dylib format.\n+\n+Erroronous code example:\n+\n+`rlib-plugin.rs`\n+```ignore (needs-linkage-with-other-tests)\n+#![crate_type = \"rlib\"]\n+#![feature(rustc_private)]\n+\n+extern crate rustc_middle;\n+extern crate rustc_driver;\n+\n+use rustc_driver::plugin::Registry;\n+\n+#[no_mangle]\n+fn __rustc_plugin_registrar(_: &mut Registry) {}\n+```\n+\n+`main.rs`\n+```ignore (needs-linkage-with-other-tests)\n+#![feature(plugin)]\n+#![plugin(rlib_plugin)] // error: plugin `rlib_plugin` only found in rlib\n+                        //        format, but must be available in dylib\n+\n+fn main() {}\n+```\n+\n+The compiler exposes a plugin interface to allow altering the compile process\n+(adding lints, etc). Plugins must be defined in their own crates (similar to\n+[proc-macro](../reference/procedural-macros.html) isolation) and then compiled\n+and linked to another crate. Plugin crates *must* be compiled to the\n+dynamically-linked dylib format, and not the statically-linked rlib format.\n+Learn more about different output types in\n+[this section](../reference/linkage.html) of the Rust reference.\n+\n+This error is easily fixed by recompiling the plugin crate in the dylib format."}, {"sha": "001678a9bce0625f359d3553c316bcf4fbdd67ce", "filename": "compiler/rustc_error_codes/src/error_codes/E0460.md", "status": "added", "additions": 71, "deletions": 0, "changes": 71, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0460.md", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0460.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0460.md?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -0,0 +1,71 @@\n+Found possibly newer version of crate `..` which `..` depends on.\n+\n+Consider these erroneous files:\n+\n+`a1.rs`\n+```ignore (needs-linkage-with-other-tests)\n+#![crate_name = \"a\"]\n+\n+pub fn foo<T>() {}\n+```\n+\n+`a2.rs`\n+```ignore (needs-linkage-with-other-tests)\n+#![crate_name = \"a\"]\n+\n+pub fn foo<T>() {\n+    println!(\"foo<T>()\");\n+}\n+```\n+\n+`b.rs`\n+```ignore (needs-linkage-with-other-tests)\n+#![crate_name = \"b\"]\n+\n+extern crate a; // linked with `a1.rs`\n+\n+pub fn foo() {\n+    a::foo::<isize>();\n+}\n+```\n+\n+`main.rs`\n+```ignore (needs-linkage-with-other-tests)\n+extern crate a; // linked with `a2.rs`\n+extern crate b; // error: found possibly newer version of crate `a` which `b`\n+                //        depends on\n+\n+fn main() {}\n+```\n+\n+The dependency graph of this program can be represented as follows:\n+```text\n+    crate `main`\n+         |\n+         +-------------+\n+         |             |\n+         |             v\n+depends: |         crate `b`\n+ `a` v1  |             |\n+         |             | depends:\n+         |             |  `a` v2\n+         v             |\n+      crate `a` <------+\n+```\n+\n+Crate `main` depends on crate `a` (version 1) and crate `b` which in turn\n+depends on crate `a` (version 2); this discrepancy in versions cannot be\n+reconciled. This difference in versions typically occurs when one crate is\n+compiled and linked, then updated and linked to another crate. The crate\n+\"version\" is a SVH (Strict Version Hash) of the crate in an\n+implementation-specific way. Note that this error can *only* occur when\n+directly compiling and linking with `rustc`; [Cargo] automatically resolves\n+dependencies, without using the compiler's own dependency management that\n+causes this issue.\n+\n+This error can be fixed by:\n+ * Using [Cargo], the Rust package manager, automatically fixing this issue.\n+ * Recompiling crate `a` so that both crate `b` and `main` have a uniform\n+   version to depend on.\n+\n+[Cargo]: ../cargo/index.html"}, {"sha": "9c2b992b7655849d0096cc789b83ef1d2d3c2296", "filename": "src/test/ui-fulldeps/macro-crate-rlib.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fmacro-crate-rlib.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -6,3 +6,4 @@ LL | #![plugin(rlib_crate_test)]\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0457`."}, {"sha": "caefdfc96f0388cb238bb525e0ea70c4f17eb17a", "filename": "src/test/ui/svh/changing-crates.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fchanging-crates.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fchanging-crates.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fchanging-crates.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "5e890c6aa5795d7d7bfb214768ae195699db31bc", "filename": "src/test/ui/svh/svh-change-lit.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-lit.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-lit.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-lit.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "dcc250d5216b0c5fff45a769b228c3c75ec4dd22", "filename": "src/test/ui/svh/svh-change-significant-cfg.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-significant-cfg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-significant-cfg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-significant-cfg.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "2035993d218ec5a4c377c1fc75b3c98dafb610cd", "filename": "src/test/ui/svh/svh-change-trait-bound.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-trait-bound.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-trait-bound.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-trait-bound.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "eef85aa954611f6e72b7573949cadf794a8ee14e", "filename": "src/test/ui/svh/svh-change-type-arg.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-arg.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-arg.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-arg.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "247f74e50df600f10a4ec0888bd0350f43eb362c", "filename": "src/test/ui/svh/svh-change-type-ret.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-ret.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-ret.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-ret.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "78b54f227f0f015301720a9695b7015a8f876cd2", "filename": "src/test/ui/svh/svh-change-type-static.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-static.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-static.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-change-type-static.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate b;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}, {"sha": "d8a81864dcaa81eee8fb98348b521255e63377bc", "filename": "src/test/ui/svh/svh-use-trait.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-use-trait.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6e6ec81a91e8766f54dfafd380c17ab6d718a1c7/src%2Ftest%2Fui%2Fsvh%2Fsvh-use-trait.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsvh%2Fsvh-use-trait.stderr?ref=6e6ec81a91e8766f54dfafd380c17ab6d718a1c7", "patch": "@@ -11,3 +11,4 @@ LL | extern crate utb;\n \n error: aborting due to previous error\n \n+For more information about this error, try `rustc --explain E0460`."}]}