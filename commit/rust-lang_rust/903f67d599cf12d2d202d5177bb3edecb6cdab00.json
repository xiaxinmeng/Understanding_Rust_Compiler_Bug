{"sha": "903f67d599cf12d2d202d5177bb3edecb6cdab00", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwM2Y2N2Q1OTljZjEyZDJkMjAyZDUxNzdiYjNlZGVjYjZjZGFiMDA=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-03-19T14:55:58Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-03-20T16:11:13Z"}, "message": "Avoid re-fetching Unicode data\n\nIf the unicode-downloads folder already exists, we likely just fetched the data,\nso don't make any further network requests. Unicode versions are released rarely\nenough that this doesn't matter much in practice.", "tree": {"sha": "350ce959396bb31db7a6e5ac51c09220c1134723", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/350ce959396bb31db7a6e5ac51c09220c1134723"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/903f67d599cf12d2d202d5177bb3edecb6cdab00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/903f67d599cf12d2d202d5177bb3edecb6cdab00", "html_url": "https://github.com/rust-lang/rust/commit/903f67d599cf12d2d202d5177bb3edecb6cdab00", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/903f67d599cf12d2d202d5177bb3edecb6cdab00/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f4c675c476c18b1a11041193f2f59d695b126bc8", "url": "https://api.github.com/repos/rust-lang/rust/commits/f4c675c476c18b1a11041193f2f59d695b126bc8", "html_url": "https://github.com/rust-lang/rust/commit/f4c675c476c18b1a11041193f2f59d695b126bc8"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "fa57f650ac082706d11bbdd8bd3e6148b22ec3b1", "filename": "src/tools/unicode-table-generator/src/unicode_download.rs", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/903f67d599cf12d2d202d5177bb3edecb6cdab00/src%2Ftools%2Funicode-table-generator%2Fsrc%2Funicode_download.rs", "raw_url": "https://github.com/rust-lang/rust/raw/903f67d599cf12d2d202d5177bb3edecb6cdab00/src%2Ftools%2Funicode-table-generator%2Fsrc%2Funicode_download.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Funicode-table-generator%2Fsrc%2Funicode_download.rs?ref=903f67d599cf12d2d202d5177bb3edecb6cdab00", "patch": "@@ -11,10 +11,15 @@ static RESOURCES: &[&str] =\n \n pub fn fetch_latest() {\n     let directory = Path::new(UNICODE_DIRECTORY);\n+    if directory.exists() {\n+        eprintln!(\n+            \"Not refetching unicode data, already exists, please delete {:?} to regenerate\",\n+            directory\n+        );\n+        return;\n+    }\n     if let Err(e) = std::fs::create_dir_all(directory) {\n-        if e.kind() != std::io::ErrorKind::AlreadyExists {\n-            panic!(\"Failed to create {:?}: {}\", UNICODE_DIRECTORY, e);\n-        }\n+        panic!(\"Failed to create {:?}: {}\", UNICODE_DIRECTORY, e);\n     }\n     let output = Command::new(\"curl\").arg(URL_PREFIX.to_owned() + README).output().unwrap();\n     if !output.status.success() {"}]}