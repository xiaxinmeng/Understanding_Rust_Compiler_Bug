{"sha": "2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMWE3YzEzMmIxYjEwMzExNWI1NDY1ZTViMWQ5ZDJiODNiYzA2YjU=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-02T06:55:19Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-02T14:58:35Z"}, "message": "Rollup merge of #58830 - Centril:rust_2018_idioms-tidy, r=oli-obk\n\ntidy: deny(rust_2018_idioms)\n\nr? @oli-obk", "tree": {"sha": "77960c29aacd472a552117d135e441fa1decd7d7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/77960c29aacd472a552117d135e441fa1decd7d7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlx6mhsACgkQ/vbIBR0O\nATxfJQ//e+wbXpzMiqfkLiZXLc+EMEYzytVshovFeb16vtYlEciPfL4yp6sQAtBN\nLwYLUYo9UJ0lMLAGrmO9N9ukfyE/FQTf2pLTw2OAfVEwEUqK5F4vJD0OjBCUb3vV\nkFr4SeDrH8yYFCPB6U+ghsNPUWfp5vNLJLLjrDRmfCmpRUcmBs9dtRTIB3/J8o/q\niy1unztVtdw5ynGF56I6u+mlT0ndKKd02Z30B5FjpBO0h3GFD/qNlqaWezeVXn8i\nDNFAYBkkPE4HLc2g9vd+PX6aXD2IKZhswNCVB+sqnQBldnw1rhP/yRanzUMhkAvC\n8bTNak1i8xLJdn2+630HVHwSbb1HmixJE7rg1h9czkkqwk7UhOh6VYTnxtBN3Gcf\n+hjTZZfi3sMiTAjhKSCsfLoGSuLczvQc34k5U49m5zAldZXqCdLwXmN9a+OzP2+o\nilyUAdqPQRnDDcgT4GuKAVJ0Ogszhwexz3hrhpjbeHBSnc3DfPBsh7Fc68qtPfFU\n9uSoRq+XsiR3/t3hsNBzD9hD+/xwCpGBEgXfAE4vGclwW+QP2DQfcXgM6IXxmAvN\np1+0/CVWg6/FVnoEv2u5JTZN1Ty8uW0CB6bVMfPl1FF+i73MfLUvFl5nV/SUdYdd\nMj5Ub0fbl3ycOsHEqxXrzrJfA1djFjKlp6uvCx7uWN1STqgBdu4=\n=FxJC\n-----END PGP SIGNATURE-----", "payload": "tree 77960c29aacd472a552117d135e441fa1decd7d7\nparent c4f693cbf254ecf96f626fcd59d60344b04a71e5\nparent 3391f6ce8083ea860009caa99b415b402feeddd1\nauthor kennytm <kennytm@gmail.com> 1551509719 +0800\ncommitter kennytm <kennytm@gmail.com> 1551538715 +0800\n\nRollup merge of #58830 - Centril:rust_2018_idioms-tidy, r=oli-obk\n\ntidy: deny(rust_2018_idioms)\n\nr? @oli-obk\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "html_url": "https://github.com/rust-lang/rust/commit/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c4f693cbf254ecf96f626fcd59d60344b04a71e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4f693cbf254ecf96f626fcd59d60344b04a71e5", "html_url": "https://github.com/rust-lang/rust/commit/c4f693cbf254ecf96f626fcd59d60344b04a71e5"}, {"sha": "3391f6ce8083ea860009caa99b415b402feeddd1", "url": "https://api.github.com/repos/rust-lang/rust/commits/3391f6ce8083ea860009caa99b415b402feeddd1", "html_url": "https://github.com/rust-lang/rust/commit/3391f6ce8083ea860009caa99b415b402feeddd1"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "0169725fa29686e918bbb95aea52079bf0d351c0", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "patch": "@@ -49,13 +49,13 @@ const EXCEPTIONS: &[&str] = &[\n ];\n \n /// Which crates to check against the whitelist?\n-const WHITELIST_CRATES: &[CrateVersion] = &[\n+const WHITELIST_CRATES: &[CrateVersion<'_>] = &[\n     CrateVersion(\"rustc\", \"0.0.0\"),\n     CrateVersion(\"rustc_codegen_llvm\", \"0.0.0\"),\n ];\n \n /// Whitelist of crates rustc is allowed to depend on. Avoid adding to the list if possible.\n-const WHITELIST: &[Crate] = &[\n+const WHITELIST: &[Crate<'_>] = &[\n     Crate(\"adler32\"),\n     Crate(\"aho-corasick\"),\n     Crate(\"arrayvec\"),\n@@ -183,7 +183,7 @@ struct Crate<'a>(&'a str); // (name)\n #[derive(Copy, Clone, PartialOrd, Ord, PartialEq, Eq, Debug, Hash)]\n struct CrateVersion<'a>(&'a str, &'a str); // (name, version)\n \n-impl<'a> Crate<'a> {\n+impl Crate<'_> {\n     pub fn id_str(&self) -> String {\n         format!(\"{} \", self.0)\n     }\n@@ -330,10 +330,10 @@ fn get_deps(path: &Path, cargo: &Path) -> Resolve {\n \n /// Checks the dependencies of the given crate from the given cargo metadata to see if they are on\n /// the whitelist. Returns a list of illegal dependencies.\n-fn check_crate_whitelist<'a, 'b>(\n-    whitelist: &'a HashSet<Crate>,\n+fn check_crate_whitelist<'a>(\n+    whitelist: &'a HashSet<Crate<'_>>,\n     resolve: &'a Resolve,\n-    visited: &'b mut BTreeSet<CrateVersion<'a>>,\n+    visited: &mut BTreeSet<CrateVersion<'a>>,\n     krate: CrateVersion<'a>,\n     must_be_on_whitelist: bool,\n ) -> BTreeSet<Crate<'a>> {"}, {"sha": "1eab217027c8a7a99963d707dbcd365e8154b7f4", "filename": "src/tools/tidy/src/features.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ffeatures.rs?ref=2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "patch": "@@ -22,7 +22,7 @@ pub enum Status {\n }\n \n impl fmt::Display for Status {\n-    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n         let as_str = match *self {\n             Status::Stable => \"stable\",\n             Status::Unstable => \"unstable\","}, {"sha": "c4a1246ffdf555f6915db7668551a8659c5cffab", "filename": "src/tools/tidy/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Flib.rs?ref=2c1a7c132b1b103115b5465e5b1d9d2b83bc06b5", "patch": "@@ -3,7 +3,8 @@\n //! This library contains the tidy lints and exposes it\n //! to be used by tools.\n \n-extern crate serde;\n+#![deny(rust_2018_idioms)]\n+\n extern crate serde_json;\n #[macro_use]\n extern crate serde_derive;"}]}