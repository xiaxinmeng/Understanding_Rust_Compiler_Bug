{"sha": "9318b4d2cfc3690812a4cad93934d505d1a6f72d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzMThiNGQyY2ZjMzY5MDgxMmE0Y2FkOTM5MzRkNTA1ZDFhNmY3MmQ=", "commit": {"author": {"name": "Ingvar Stepanyan", "email": "me@rreverser.com", "date": "2018-01-24T19:25:57Z"}, "committer": {"name": "Ingvar Stepanyan", "email": "me@rreverser.com", "date": "2018-02-04T11:53:10Z"}, "message": "Update some macro tests", "tree": {"sha": "57cb9a89d4e635416fe588a5ea44883300301057", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57cb9a89d4e635416fe588a5ea44883300301057"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9318b4d2cfc3690812a4cad93934d505d1a6f72d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9318b4d2cfc3690812a4cad93934d505d1a6f72d", "html_url": "https://github.com/rust-lang/rust/commit/9318b4d2cfc3690812a4cad93934d505d1a6f72d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9318b4d2cfc3690812a4cad93934d505d1a6f72d/comments", "author": {"login": "RReverser", "id": 557590, "node_id": "MDQ6VXNlcjU1NzU5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/557590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RReverser", "html_url": "https://github.com/RReverser", "followers_url": "https://api.github.com/users/RReverser/followers", "following_url": "https://api.github.com/users/RReverser/following{/other_user}", "gists_url": "https://api.github.com/users/RReverser/gists{/gist_id}", "starred_url": "https://api.github.com/users/RReverser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RReverser/subscriptions", "organizations_url": "https://api.github.com/users/RReverser/orgs", "repos_url": "https://api.github.com/users/RReverser/repos", "events_url": "https://api.github.com/users/RReverser/events{/privacy}", "received_events_url": "https://api.github.com/users/RReverser/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RReverser", "id": 557590, "node_id": "MDQ6VXNlcjU1NzU5MA==", "avatar_url": "https://avatars.githubusercontent.com/u/557590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RReverser", "html_url": "https://github.com/RReverser", "followers_url": "https://api.github.com/users/RReverser/followers", "following_url": "https://api.github.com/users/RReverser/following{/other_user}", "gists_url": "https://api.github.com/users/RReverser/gists{/gist_id}", "starred_url": "https://api.github.com/users/RReverser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RReverser/subscriptions", "organizations_url": "https://api.github.com/users/RReverser/orgs", "repos_url": "https://api.github.com/users/RReverser/repos", "events_url": "https://api.github.com/users/RReverser/events{/privacy}", "received_events_url": "https://api.github.com/users/RReverser/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c750442e0406432196de49ab1b4c1d28b651cc16", "url": "https://api.github.com/repos/rust-lang/rust/commits/c750442e0406432196de49ab1b4c1d28b651cc16", "html_url": "https://github.com/rust-lang/rust/commit/c750442e0406432196de49ab1b4c1d28b651cc16"}], "stats": {"total": 51, "additions": 31, "deletions": 20}, "files": [{"sha": "2c5f16b46fb9f13c3e66118936f7a0d36a0e8f6a", "filename": "src/bin/cargo-fmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9318b4d2cfc3690812a4cad93934d505d1a6f72d/src%2Fbin%2Fcargo-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9318b4d2cfc3690812a4cad93934d505d1a6f72d/src%2Fbin%2Fcargo-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fcargo-fmt.rs?ref=9318b4d2cfc3690812a4cad93934d505d1a6f72d", "patch": "@@ -97,7 +97,7 @@ fn execute() -> i32 {\n }\n \n macro_rules! print_usage {\n-    ($print:ident, $opts:ident, $reason:expr) => ({\n+    ($print: ident, $opts: ident, $reason: expr) => ({\n         let msg = format!(\"{}\\nusage: cargo fmt [options]\", $reason);\n         $print!(\n             \"{}\\nThis utility formats all bin and lib files of the current crate using rustfmt. \\"}, {"sha": "20dcfe2d622cac8318232831ee7d815c483b1822", "filename": "tests/target/macro_not_expr.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9318b4d2cfc3690812a4cad93934d505d1a6f72d/tests%2Ftarget%2Fmacro_not_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9318b4d2cfc3690812a4cad93934d505d1a6f72d/tests%2Ftarget%2Fmacro_not_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fmacro_not_expr.rs?ref=9318b4d2cfc3690812a4cad93934d505d1a6f72d", "patch": "@@ -1,5 +1,6 @@\n macro_rules! test {\n-    ($($t:tt)*) => {}\n+    ($($t: tt)*) => {\n+    };\n }\n \n fn main() {"}, {"sha": "471c90bf4707789feb0c30e8bdbe71f8e63e5205", "filename": "tests/target/macros.rs", "status": "modified", "additions": 28, "deletions": 18, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/9318b4d2cfc3690812a4cad93934d505d1a6f72d/tests%2Ftarget%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9318b4d2cfc3690812a4cad93934d505d1a6f72d/tests%2Ftarget%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fmacros.rs?ref=9318b4d2cfc3690812a4cad93934d505d1a6f72d", "patch": "@@ -141,7 +141,8 @@ fn issue_1555() {\n \n fn issue1178() {\n     macro_rules! foo {\n-        (#[$attr:meta] $name:ident) => {}\n+        (#[$attr: meta] $name: ident) => {\n+        };\n     }\n \n     foo!(\n@@ -246,11 +247,15 @@ fn __bindgen_test_layout_HandleWithDtor_open0_int_close0_instantiation() {\n \n // #878\n macro_rules! try_opt {\n-    ($expr:expr) => (match $expr {\n-        Some(val) => val,\n+    ($expr: expr) => {\n+        match $expr {\n+            Some(val) => val,\n \n-        None => { return None; }\n-    })\n+            None => {\n+                return None;\n+            }\n+        }\n+    };\n }\n \n // #2214\n@@ -885,24 +890,29 @@ fn macro_in_pattern_position() {\n     };\n }\n \n-macro foo() {\n-\n+macro foo {\n+    () => {\n+    }\n }\n \n-pub macro bar($x: ident + $y: expr;) {\n-    fn foo($x: Foo) {\n-        long_function(\n-            a_long_argument_to_a_long_function_is_what_this_is(AAAAAAAAAAAAAAAAAAAAAAAAAAAA),\n-            $x.bar($y),\n-        );\n+pub macro bar {\n+    ($x: ident + $y: expr;) => {\n+        fn foo($x: Foo) {\n+            long_function(\n+                a_long_argument_to_a_long_function_is_what_this_is(AAAAAAAAAAAAAAAAAAAAAAAAAAAA),\n+                $x.bar($y),\n+            );\n+        }\n     }\n }\n \n-macro foo() {\n-    // a comment\n-    fn foo() {\n-        // another comment\n-        bar();\n+macro foo {\n+    () => {\n+        // a comment\n+        fn foo() {\n+            // another comment\n+            bar();\n+        }\n     }\n }\n "}]}