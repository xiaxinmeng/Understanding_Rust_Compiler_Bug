{"sha": "80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "node_id": "C_kwDOAAsO6NoAKDgwMTc2YTEyMGU5MGJiOWY4ZTdiOWU4ZmVkZGE5YWM4NTdmNDM0ZjM", "commit": {"author": {"name": "\u8bb8\u6770\u53cb Jieyou Xu (Joe)", "email": "jieyouxu@outlook.com", "date": "2023-06-08T07:03:21Z"}, "committer": {"name": "\u8bb8\u6770\u53cb Jieyou Xu (Joe)", "email": "jieyouxu@outlook.com", "date": "2023-06-10T09:11:38Z"}, "message": "Adjust span labels for `HIDDEN_GLOB_REEXPORTS`", "tree": {"sha": "0cb8a233833791088cb40aef7fd3637744cb9f93", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0cb8a233833791088cb40aef7fd3637744cb9f93"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEze4qXcfh0ileWqZTxf1dMgFP20cFAmSEPksACgkQxf1dMgFP\n20cOrg//Xc1QU+yMoQ1x2UxNvFW24s5GzN/qA6OACFKOl9eq8v+cxBhwtrA20bk4\nOzdaCMnY3cBvK9SrE24xDanOUYkTaooPOkGEQ/F65Dfs4H5AUsbLOgDG8V9kajgs\nT0vgP2jMG3Ku5C7gYCwagepQhoCeUA3uGRuzT4gRRThbq7aMaOmctsAOmoeawizY\nNhyc9C+FlbYvKQf9cZ6FHc0ae/5G4IcYGHpO6bJC5rKEJgaJmqO5nX9nT86hfxJO\n7d/OYSyDMxaT1C0jVioU51jSjeZvWb5v/We3Wey9sj5fFExVFbvCD/d9B/FwquDx\ncxA2w+kblNk7ahLJSJucgLBFNZuzr8/Br3bEmTlyF/z6XSdOfqjnRucnGVK/qCiH\ntTVcxZy66kLnjyLxupm4D5+vjIOzE0yw/oZFPaKXUUb1Z/D+ODfydBht22bffJix\nf4idTTUdqqzaBpySzaDlYsMdGGcXY3O+BRgdl/BoKQxGJ18mulf1C8NMbZ3nkIpV\nQn3mlO9MR/ZcraAfuYLFu1KP9iXD5+eVa8wHzkfJRYdaNlvFB0eYJ9C1GIBgcVxw\nnKx9vhlf6QBrCREqMXY8AYU8Aq3qkxTiIaZYu25gR1EGrUVADERmlWohf8AI6AKZ\n5k+BkM8OUnberpVB6fO1u77cQzh1rN1ifxA5VAKmVlgmv1IBfgk=\n=i4GK\n-----END PGP SIGNATURE-----", "payload": "tree 0cb8a233833791088cb40aef7fd3637744cb9f93\nparent 43062c43d2a63cf4e261c6eddc417575c4f3062f\nauthor \u8bb8\u6770\u53cb Jieyou Xu (Joe) <jieyouxu@outlook.com> 1686207801 +0800\ncommitter \u8bb8\u6770\u53cb Jieyou Xu (Joe) <jieyouxu@outlook.com> 1686388298 +0800\n\nAdjust span labels for `HIDDEN_GLOB_REEXPORTS`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "html_url": "https://github.com/rust-lang/rust/commit/80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/comments", "author": {"login": "jieyouxu", "id": 39484203, "node_id": "MDQ6VXNlcjM5NDg0MjAz", "avatar_url": "https://avatars.githubusercontent.com/u/39484203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieyouxu", "html_url": "https://github.com/jieyouxu", "followers_url": "https://api.github.com/users/jieyouxu/followers", "following_url": "https://api.github.com/users/jieyouxu/following{/other_user}", "gists_url": "https://api.github.com/users/jieyouxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieyouxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieyouxu/subscriptions", "organizations_url": "https://api.github.com/users/jieyouxu/orgs", "repos_url": "https://api.github.com/users/jieyouxu/repos", "events_url": "https://api.github.com/users/jieyouxu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieyouxu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jieyouxu", "id": 39484203, "node_id": "MDQ6VXNlcjM5NDg0MjAz", "avatar_url": "https://avatars.githubusercontent.com/u/39484203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jieyouxu", "html_url": "https://github.com/jieyouxu", "followers_url": "https://api.github.com/users/jieyouxu/followers", "following_url": "https://api.github.com/users/jieyouxu/following{/other_user}", "gists_url": "https://api.github.com/users/jieyouxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jieyouxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jieyouxu/subscriptions", "organizations_url": "https://api.github.com/users/jieyouxu/orgs", "repos_url": "https://api.github.com/users/jieyouxu/repos", "events_url": "https://api.github.com/users/jieyouxu/events{/privacy}", "received_events_url": "https://api.github.com/users/jieyouxu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43062c43d2a63cf4e261c6eddc417575c4f3062f", "url": "https://api.github.com/repos/rust-lang/rust/commits/43062c43d2a63cf4e261c6eddc417575c4f3062f", "html_url": "https://github.com/rust-lang/rust/commit/43062c43d2a63cf4e261c6eddc417575c4f3062f"}], "stats": {"total": 53, "additions": 38, "deletions": 15}, "files": [{"sha": "13164b0b339a35b08a6f44524f30db0c6a54cb2e", "filename": "compiler/rustc_lint/src/context.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_lint%2Fsrc%2Fcontext.rs?ref=80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "patch": "@@ -953,8 +953,8 @@ pub trait LintContext: Sized {\n                     db.span_label(duplicate_reexport_span, format!(\"but the name `{}` in the {} namespace is also re-exported here\", name, namespace));\n                 }\n                 BuiltinLintDiagnostics::HiddenGlobReexports { name, namespace, glob_reexport_span, private_item_span } => {\n-                    db.span_label(glob_reexport_span, format!(\"the name `{}` in the {} namespace is supposed to be publicly re-exported here\", name, namespace));\n-                    db.span_label(private_item_span, \"but the private item here shadows it\");\n+                    db.span_note(glob_reexport_span, format!(\"the name `{}` in the {} namespace is supposed to be publicly re-exported here\", name, namespace));\n+                    db.span_note(private_item_span, \"but the private item here shadows it\".to_owned());\n                 }\n             }\n             // Rewrap `db`, and pass control to the user."}, {"sha": "102b5656245268f786c2896ded96db576f6291ef", "filename": "tests/ui/resolve/hidden_glob_reexports.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.rs?ref=80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "patch": "@@ -6,10 +6,10 @@ pub mod upstream_a {\n         pub struct Bar {}\n     }\n \n-    pub use self::inner::*;\n-\n     struct Foo;\n     //~^ WARN private item shadows public glob re-export\n+\n+    pub use self::inner::*;\n }\n \n pub mod upstream_b {"}, {"sha": "11fa94d6fee987f8160edc4f615063d7eacfc6e5", "filename": "tests/ui/resolve/hidden_glob_reexports.stderr", "status": "modified", "additions": 34, "deletions": 11, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/80176a120e90bb9f8e7b9e8fedda9ac857f434f3/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fresolve%2Fhidden_glob_reexports.stderr?ref=80176a120e90bb9f8e7b9e8fedda9ac857f434f3", "patch": "@@ -1,31 +1,54 @@\n warning: private item shadows public glob re-export\n-  --> $DIR/hidden_glob_reexports.rs:11:5\n+  --> $DIR/hidden_glob_reexports.rs:9:5\n    |\n-LL |     pub use self::inner::*;\n-   |             -------------- the name `Foo` in the type namespace is supposed to be publicly re-exported here\n-LL |\n LL |     struct Foo;\n-   |     ^^^^^^^^^^^ but the private item here shadows it\n+   |     ^^^^^^^^^^^\n+   |\n+note: the name `Foo` in the type namespace is supposed to be publicly re-exported here\n+  --> $DIR/hidden_glob_reexports.rs:12:13\n+   |\n+LL |     pub use self::inner::*;\n+   |             ^^^^^^^^^^^^^^\n+note: but the private item here shadows it\n+  --> $DIR/hidden_glob_reexports.rs:9:5\n    |\n+LL |     struct Foo;\n+   |     ^^^^^^^^^^^\n    = note: `#[warn(hidden_glob_reexports)]` on by default\n \n warning: private item shadows public glob re-export\n   --> $DIR/hidden_glob_reexports.rs:27:9\n    |\n+LL |     use self::other::Foo;\n+   |         ^^^^^^^^^^^^^^^^\n+   |\n+note: the name `Foo` in the type namespace is supposed to be publicly re-exported here\n+  --> $DIR/hidden_glob_reexports.rs:25:13\n+   |\n LL |     pub use self::inner::*;\n-   |             -------------- the name `Foo` in the type namespace is supposed to be publicly re-exported here\n-LL |\n+   |             ^^^^^^^^^^^^^^\n+note: but the private item here shadows it\n+  --> $DIR/hidden_glob_reexports.rs:27:9\n+   |\n LL |     use self::other::Foo;\n-   |         ^^^^^^^^^^^^^^^^ but the private item here shadows it\n+   |         ^^^^^^^^^^^^^^^^\n \n warning: private item shadows public glob re-export\n   --> $DIR/hidden_glob_reexports.rs:40:9\n    |\n+LL |     use std::primitive::u8;\n+   |         ^^^^^^^^^^^^^^^^^^\n+   |\n+note: the name `u8` in the type namespace is supposed to be publicly re-exported here\n+  --> $DIR/hidden_glob_reexports.rs:38:13\n+   |\n LL |     pub use self::no_def_id::*;\n-   |             ------------------ the name `u8` in the type namespace is supposed to be publicly re-exported here\n-LL |\n+   |             ^^^^^^^^^^^^^^^^^^\n+note: but the private item here shadows it\n+  --> $DIR/hidden_glob_reexports.rs:40:9\n+   |\n LL |     use std::primitive::u8;\n-   |         ^^^^^^^^^^^^^^^^^^ but the private item here shadows it\n+   |         ^^^^^^^^^^^^^^^^^^\n \n warning: 3 warnings emitted\n "}]}