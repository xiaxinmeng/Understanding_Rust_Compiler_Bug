{"sha": "b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4", "node_id": "C_kwDOAAsO6NoAKGIyNDU1ZGM5MWNlN2Q0M2VhODgzZWE1ZDJlYzhhZGI2ZTkwZmM0ZDQ", "commit": {"author": {"name": "Rune Tynan", "email": "runetynan@gmail.com", "date": "2023-02-14T04:16:56Z"}, "committer": {"name": "Rune Tynan", "email": "runetynan@gmail.com", "date": "2023-02-20T18:47:11Z"}, "message": "Add mentioned from_raw_bytes constructor", "tree": {"sha": "09d4a6e921706e9a5c08bfcc828a7d7ad90ae001", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/09d4a6e921706e9a5c08bfcc828a7d7ad90ae001"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEETdpCnQmiF6hBYUqdfsyTL4sscx4FAmPzwC8ACgkQfsyTL4ss\ncx6g4w/8DSWo8hDWymv1dx4PhZhjawR2TjJqssN/UbwRtCOcc5ijuEIgRvNX+mXN\nXuTKWBjc9I5pr6Y/Nm1fxo3bHkiANDmrwZGaQRO3BgztlD/2W0OnI9NYnkshGtzU\naDcPzEcjL2Tf2E4J66h5TuzOzKSBnLkr60xXosjhgr26onsBKftOx7x/0lIhk4EV\njjxLVO9KUXnzTuT9Qd2t7KKqy2FiLD0X0PAOnStSz/AWQ2kPK8uTCZJzMm+1uRTk\ndHncNTWxWp+LTL1kSc0Lmx7XmQqlojbmpSC826P1PSK1RyPNn5XBB3TYLR2jiUyj\n2h3xeD5l5skSY3p0ZtNmNEtZxEiNs/IRzhdnX7RTefpTTyUHruhZFi2tzupfWLl6\nWN6PFX2NQR5SANGNACCEzQKUObmb3QGBrzG9A18oOrYin3aDyPIcCEK97S4Dm5xo\nsBAwLjDYUVhSPKTwtQbA/tRApm0Y+shfCFcHXI8gDTG1q63dG2scZZFJ1rIY7F1D\nl3lV3omBhDllxR2DzALs80vTr2XzWWikOk+YlZiOBdh4wXeZM39T9DPJhVYn+YL/\nbAoqLFG4r4CAhG8P2DXb80bB03nnWQLS72W52d7wCM5rwI+ukBiDBWJNZO7eDQfx\nfDc+OeWrM45EZXzejOYWObZMOpdBQexN/kEolHCjn1WxmbHIbUc=\n=vaYk\n-----END PGP SIGNATURE-----", "payload": "tree 09d4a6e921706e9a5c08bfcc828a7d7ad90ae001\nparent 6f407d67b8ae387f763fa8e8dbc269b16a996ce3\nauthor Rune Tynan <runetynan@gmail.com> 1676348216 -0500\ncommitter Rune Tynan <runetynan@gmail.com> 1676918831 -0500\n\nAdd mentioned from_raw_bytes constructor\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4", "html_url": "https://github.com/rust-lang/rust/commit/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4/comments", "author": {"login": "CraftSpider", "id": 13342132, "node_id": "MDQ6VXNlcjEzMzQyMTMy", "avatar_url": "https://avatars.githubusercontent.com/u/13342132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CraftSpider", "html_url": "https://github.com/CraftSpider", "followers_url": "https://api.github.com/users/CraftSpider/followers", "following_url": "https://api.github.com/users/CraftSpider/following{/other_user}", "gists_url": "https://api.github.com/users/CraftSpider/gists{/gist_id}", "starred_url": "https://api.github.com/users/CraftSpider/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CraftSpider/subscriptions", "organizations_url": "https://api.github.com/users/CraftSpider/orgs", "repos_url": "https://api.github.com/users/CraftSpider/repos", "events_url": "https://api.github.com/users/CraftSpider/events{/privacy}", "received_events_url": "https://api.github.com/users/CraftSpider/received_events", "type": "User", "site_admin": false}, "committer": {"login": "CraftSpider", "id": 13342132, "node_id": "MDQ6VXNlcjEzMzQyMTMy", "avatar_url": "https://avatars.githubusercontent.com/u/13342132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CraftSpider", "html_url": "https://github.com/CraftSpider", "followers_url": "https://api.github.com/users/CraftSpider/followers", "following_url": "https://api.github.com/users/CraftSpider/following{/other_user}", "gists_url": "https://api.github.com/users/CraftSpider/gists{/gist_id}", "starred_url": "https://api.github.com/users/CraftSpider/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CraftSpider/subscriptions", "organizations_url": "https://api.github.com/users/CraftSpider/orgs", "repos_url": "https://api.github.com/users/CraftSpider/repos", "events_url": "https://api.github.com/users/CraftSpider/events{/privacy}", "received_events_url": "https://api.github.com/users/CraftSpider/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f407d67b8ae387f763fa8e8dbc269b16a996ce3", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f407d67b8ae387f763fa8e8dbc269b16a996ce3", "html_url": "https://github.com/rust-lang/rust/commit/6f407d67b8ae387f763fa8e8dbc269b16a996ce3"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "974db3f4402241c285ad6a6fafb5476cc2014874", "filename": "compiler/rustc_middle/src/mir/interpret/allocation.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Finterpret%2Fallocation.rs?ref=b2455dc91ce7d43ea883ea5d2ec8adb6e90fc4d4", "patch": "@@ -270,6 +270,23 @@ impl AllocRange {\n \n // The constructors are all without extra; the extra gets added by a machine hook later.\n impl<Prov: Provenance, Bytes: AllocBytes> Allocation<Prov, (), Bytes> {\n+    /// Creates an allocation from an existing `Bytes` value - this is needed for miri FFI support\n+    pub fn from_raw_bytes<'a>(\n+        bytes: Bytes,\n+        align: Align,\n+        mutability: Mutability,\n+    ) -> Self {\n+        let size = Size::from_bytes(bytes.len());\n+        Self {\n+            bytes,\n+            provenance: ProvenanceMap::new(),\n+            init_mask: InitMask::new(size, true),\n+            align,\n+            mutability,\n+            extra: (),\n+        }\n+    }\n+\n     /// Creates an allocation initialized by the given bytes\n     pub fn from_bytes<'a>(\n         slice: impl Into<Cow<'a, [u8]>>,"}]}