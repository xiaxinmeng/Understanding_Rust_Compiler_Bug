{"sha": "fca805382b0458cfa171a86c1375a0aabd05e8d7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjYTgwNTM4MmIwNDU4Y2ZhMTcxYTg2YzEzNzVhMGFhYmQwNWU4ZDc=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2018-10-02T08:03:03Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-10-02T08:03:03Z"}, "message": "Merge pull request #3247 from rust-lang-nursery/dummy\n\nAdd dummy clippy crate for publishing", "tree": {"sha": "3331261e504cb6151de331d0032e6a275ffec2e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3331261e504cb6151de331d0032e6a275ffec2e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fca805382b0458cfa171a86c1375a0aabd05e8d7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbsyY3CRBK7hj4Ov3rIwAAdHIIABGUOlckQs3HDXFc1IhRPE3w\nvHrAAoH6cP/1loYmt4NsKVZPBH7yxJyMgqegZkmqz0h5qwt74awAM+s60Y4wSt2h\n57xyD3Zt1cyA3vZd9y1d0Uq4qpIYNowwy5CwRNxwl2L9ZG2dMxDdv2xa+fh1RQjv\nrOZPkJnre7E+jvOmV7j+LyAaZaTlJg+y+ZrA/WTclyXEp465/C+aOpUiO/pojhQ2\nB2aHWbkYiFLeYYD4kohM1iV8/N28o6TO+tFfc+blCdexvVq3rpUWm4+1QTZkhIai\ntUJFwws8hlctQnynEZ20m3hoY+GDTmYMYP5J1aLsGYs9Uo5FLodB6HzuXxkagBs=\n=IBAO\n-----END PGP SIGNATURE-----\n", "payload": "tree 3331261e504cb6151de331d0032e6a275ffec2e4\nparent 788c838fc1dd0a4f23d77e52419ee0e0177d2e65\nparent 6c1d6391ecf3d7f2ee6761dda1cd5595744550dc\nauthor Manish Goregaokar <manishsmail@gmail.com> 1538467383 +0200\ncommitter GitHub <noreply@github.com> 1538467383 +0200\n\nMerge pull request #3247 from rust-lang-nursery/dummy\n\nAdd dummy clippy crate for publishing"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fca805382b0458cfa171a86c1375a0aabd05e8d7", "html_url": "https://github.com/rust-lang/rust/commit/fca805382b0458cfa171a86c1375a0aabd05e8d7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fca805382b0458cfa171a86c1375a0aabd05e8d7/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "788c838fc1dd0a4f23d77e52419ee0e0177d2e65", "url": "https://api.github.com/repos/rust-lang/rust/commits/788c838fc1dd0a4f23d77e52419ee0e0177d2e65", "html_url": "https://github.com/rust-lang/rust/commit/788c838fc1dd0a4f23d77e52419ee0e0177d2e65"}, {"sha": "6c1d6391ecf3d7f2ee6761dda1cd5595744550dc", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c1d6391ecf3d7f2ee6761dda1cd5595744550dc", "html_url": "https://github.com/rust-lang/rust/commit/6c1d6391ecf3d7f2ee6761dda1cd5595744550dc"}], "stats": {"total": 76, "additions": 76, "deletions": 0}, "files": [{"sha": "d765e09deef3544af6306cf45fe58dcf7c1d0f2e", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -16,6 +16,7 @@ keywords = [\"clippy\", \"lint\", \"plugin\"]\n categories = [\"development-tools\", \"development-tools::cargo-plugins\"]\n build = \"build.rs\"\n edition = \"2018\"\n+publish = false\n \n [badges]\n travis-ci = { repository = \"rust-lang-nursery/rust-clippy\" }"}, {"sha": "b9e3aa3bcdc595565f002dd22710ac91b66156d0", "filename": "clippy_dummy/Cargo.toml", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2FCargo.toml?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -0,0 +1,17 @@\n+[package]\n+name = \"clippy_dummy\" # rename to clippy before publishing\n+version = \"0.0.301\"\n+authors = [\"Manish Goregaokar <manishsmail@gmail.com>\"]\n+edition = \"2018\"\n+readme = \"crates-readme.md\"\n+description = \"A bunch of helpful lints to avoid common pitfalls in Rust.\"\n+build = 'build.rs'\n+\n+repository = \"https://github.com/rust-lang-nursery/rust-clippy\"\n+\n+license = \"MPL-2.0\"\n+keywords = [\"clippy\", \"lint\", \"plugin\"]\n+categories = [\"development-tools\", \"development-tools::cargo-plugins\"]\n+\n+[build-dependencies]\n+term = \"0.5.1\""}, {"sha": "535f11bd2ee4662ba8785e7f819303e6ad02334a", "filename": "clippy_dummy/PUBLISH.md", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2FPUBLISH.md", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2FPUBLISH.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2FPUBLISH.md?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -0,0 +1,4 @@\n+This is a dummy crate to publish to crates.io. It primarily exists to ensure that folks trying to install clippy from crates.io get redirected to the `rustup` technique.\n+\n+Before publishing, be sure to rename `clippy_dummy` to `clippy` in `Cargo.toml`, it has a different name to avoid workspace issues.\n+ \n\\ No newline at end of file"}, {"sha": "97902feff86835cf7b0ade4468f9771d73e9ac3f", "filename": "clippy_dummy/build.rs", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fbuild.rs?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -0,0 +1,42 @@\n+extern crate term;\n+\n+fn main() {\n+    if let Err(_) = foo() {\n+        eprintln!(\"error: Clippy is no longer available via crates.io\\n\");\n+        eprintln!(\"help: please run `rustup component add clippy-preview` instead\");\n+    }\n+    std::process::exit(1);\n+}\n+\n+fn foo() -> Result<(), ()> {\n+    let mut t = term::stderr().ok_or(())?;\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    t.fg(term::color::RED).map_err(|_| ())?;\n+    write!(t, \"\\nerror: \").map_err(|_| ())?;\n+\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    writeln!(t, \"Clippy is no longer available via crates.io\\n\").map_err(|_| ())?;\n+\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    t.fg(term::color::GREEN).map_err(|_| ())?;\n+    write!(t, \"help: \").map_err(|_| ())?;\n+\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    write!(t, \"please run `\").map_err(|_| ())?;\n+\n+    t.attr(term::Attr::Bold).map_err(|_| ())?;\n+    write!(t, \"rustup component add clippy-preview\").map_err(|_| ())?;\n+\n+    t.reset().map_err(|_| ())?;\n+    t.fg(term::color::WHITE).map_err(|_| ())?;\n+    writeln!(t, \"` instead\").map_err(|_| ())?;\n+\n+    t.reset().map_err(|_| ())?;\n+    Ok(())\n+}\n\\ No newline at end of file"}, {"sha": "0035073549c0570b4d55fcfb050797fa91c9ad29", "filename": "clippy_dummy/crates-readme.md", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fcrates-readme.md", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fcrates-readme.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fcrates-readme.md?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -0,0 +1,9 @@\n+Installing clippy via crates.io is deprecated. Please use the following:\n+\n+```terminal\n+rustup component add clippy-preview\n+```\n+\n+on a Rust version 1.29 or later. You may need to run `rustup self update` if it complains about a missing clippy binary.\n+\n+See [the homepage](https://github.com/rust-lang-nursery/rust-clippy/#clippy) for more information\n\\ No newline at end of file"}, {"sha": "a118834f1fd47cb1b44ebac6fcdea1456e76b615", "filename": "clippy_dummy/src/main.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fca805382b0458cfa171a86c1375a0aabd05e8d7/clippy_dummy%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dummy%2Fsrc%2Fmain.rs?ref=fca805382b0458cfa171a86c1375a0aabd05e8d7", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+    panic!(\"This shouldn't even compile\")\n+}"}]}