{"sha": "bb4a79b087158f396b984bdf552d2c90890b12a3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJiNGE3OWIwODcxNThmMzk2Yjk4NGJkZjU1MmQyYzkwODkwYjEyYTM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-06-15T20:11:19Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-06-15T20:11:19Z"}, "message": "Auto merge of #34220 - srinivasreddy:rf_cargotest, r=brson\n\nrun rustfmt on cargotest folder in src/tools/cargotest", "tree": {"sha": "6601cc8468a81051a737590e71948cc2b29b3880", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6601cc8468a81051a737590e71948cc2b29b3880"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bb4a79b087158f396b984bdf552d2c90890b12a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bb4a79b087158f396b984bdf552d2c90890b12a3", "html_url": "https://github.com/rust-lang/rust/commit/bb4a79b087158f396b984bdf552d2c90890b12a3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bb4a79b087158f396b984bdf552d2c90890b12a3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5755936a635bf0560947ee1af2ec69f644a70d19", "url": "https://api.github.com/repos/rust-lang/rust/commits/5755936a635bf0560947ee1af2ec69f644a70d19", "html_url": "https://github.com/rust-lang/rust/commit/5755936a635bf0560947ee1af2ec69f644a70d19"}, {"sha": "028073dd606206a4383193a6924e83c83ce2f8c3", "url": "https://api.github.com/repos/rust-lang/rust/commits/028073dd606206a4383193a6924e83c83ce2f8c3", "html_url": "https://github.com/rust-lang/rust/commit/028073dd606206a4383193a6924e83c83ce2f8c3"}], "stats": {"total": 76, "additions": 38, "deletions": 38}, "files": [{"sha": "8b7164819a7907390d3105335ae38039d47b9d65", "filename": "src/tools/cargotest/main.rs", "status": "modified", "additions": 38, "deletions": 38, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/bb4a79b087158f396b984bdf552d2c90890b12a3/src%2Ftools%2Fcargotest%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb4a79b087158f396b984bdf552d2c90890b12a3/src%2Ftools%2Fcargotest%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcargotest%2Fmain.rs?ref=bb4a79b087158f396b984bdf552d2c90890b12a3", "patch": "@@ -21,20 +21,18 @@ struct Test {\n     lock: Option<&'static str>,\n }\n \n-const TEST_REPOS: &'static [Test] = &[\n-    Test {\n-        name: \"cargo\",\n-        repo: \"https://github.com/rust-lang/cargo\",\n-        sha: \"7d79da08238e3d47e0bc4406155bdcc45ccb8c82\",\n-        lock: None,\n-    },\n-    Test {\n-        name: \"iron\",\n-        repo: \"https://github.com/iron/iron\",\n-        sha: \"16c858ec2901e2992fe5e529780f59fa8ed12903\",\n-        lock: Some(include_str!(\"lockfiles/iron-Cargo.lock\")),\n-    },\n-];\n+const TEST_REPOS: &'static [Test] = &[Test {\n+                                          name: \"cargo\",\n+                                          repo: \"https://github.com/rust-lang/cargo\",\n+                                          sha: \"7d79da08238e3d47e0bc4406155bdcc45ccb8c82\",\n+                                          lock: None,\n+                                      },\n+                                      Test {\n+                                          name: \"iron\",\n+                                          repo: \"https://github.com/iron/iron\",\n+                                          sha: \"16c858ec2901e2992fe5e529780f59fa8ed12903\",\n+                                          lock: Some(include_str!(\"lockfiles/iron-Cargo.lock\")),\n+                                      }];\n \n \n fn main() {\n@@ -52,8 +50,10 @@ fn test_repo(cargo: &Path, out_dir: &Path, test: &Test) {\n     println!(\"testing {}\", test.repo);\n     let dir = clone_repo(test, out_dir);\n     if let Some(lockfile) = test.lock {\n-        File::create(&dir.join(\"Cargo.lock\")).expect(\"\")\n-            .write_all(lockfile.as_bytes()).expect(\"\");\n+        File::create(&dir.join(\"Cargo.lock\"))\n+            .expect(\"\")\n+            .write_all(lockfile.as_bytes())\n+            .expect(\"\");\n     }\n     if !run_cargo_test(cargo, &dir) {\n         panic!(\"tests failed for {}\", test.repo);\n@@ -65,10 +65,10 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n \n     if !out_dir.join(\".git\").is_dir() {\n         let status = Command::new(\"git\")\n-            .arg(\"init\")\n-            .arg(&out_dir)\n-            .status()\n-            .expect(\"\");\n+                         .arg(\"init\")\n+                         .arg(&out_dir)\n+                         .status()\n+                         .expect(\"\");\n         assert!(status.success());\n     }\n \n@@ -77,23 +77,23 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n     for depth in &[0, 1, 10, 100, 1000, 100000] {\n         if *depth > 0 {\n             let status = Command::new(\"git\")\n-                .arg(\"fetch\")\n-                .arg(test.repo)\n-                .arg(\"master\")\n-                .arg(&format!(\"--depth={}\", depth))\n-                .current_dir(&out_dir)\n-                .status()\n-                .expect(\"\");\n+                             .arg(\"fetch\")\n+                             .arg(test.repo)\n+                             .arg(\"master\")\n+                             .arg(&format!(\"--depth={}\", depth))\n+                             .current_dir(&out_dir)\n+                             .status()\n+                             .expect(\"\");\n             assert!(status.success());\n         }\n \n         let status = Command::new(\"git\")\n-            .arg(\"reset\")\n-            .arg(test.sha)\n-            .arg(\"--hard\")\n-            .current_dir(&out_dir)\n-            .status()\n-            .expect(\"\");\n+                         .arg(\"reset\")\n+                         .arg(test.sha)\n+                         .arg(\"--hard\")\n+                         .current_dir(&out_dir)\n+                         .status()\n+                         .expect(\"\");\n \n         if status.success() {\n             found = true;\n@@ -105,11 +105,11 @@ fn clone_repo(test: &Test, out_dir: &Path) -> PathBuf {\n         panic!(\"unable to find commit {}\", test.sha)\n     }\n     let status = Command::new(\"git\")\n-        .arg(\"clean\")\n-        .arg(\"-fdx\")\n-        .current_dir(&out_dir)\n-        .status()\n-        .unwrap();\n+                     .arg(\"clean\")\n+                     .arg(\"-fdx\")\n+                     .current_dir(&out_dir)\n+                     .status()\n+                     .unwrap();\n     assert!(status.success());\n \n     out_dir"}]}