{"sha": "ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkNjZkNzJlNmMwZjc3ZDdjNmEwOTRjZjNmYzU3OTliNjU4MjRjODc=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-28T20:56:01Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-10-28T20:56:01Z"}, "message": "stdlib: Make merge_sort take [mutable? T]", "tree": {"sha": "c7f79bfeec0948b4fa25e379ccc48ace8dd26f93", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7f79bfeec0948b4fa25e379ccc48ace8dd26f93"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "html_url": "https://github.com/rust-lang/rust/commit/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "39b729e36f813a58de6b1f5641c94f47b7a6c277", "url": "https://api.github.com/repos/rust-lang/rust/commits/39b729e36f813a58de6b1f5641c94f47b7a6c277", "html_url": "https://github.com/rust-lang/rust/commit/39b729e36f813a58de6b1f5641c94f47b7a6c277"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "a4fe4cf3f8b2215fac2ec405fea6b65ecfe10e56", "filename": "src/lib/sort.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87/src%2Flib%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87/src%2Flib%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fsort.rs?ref=ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "patch": "@@ -20,7 +20,7 @@ Merge sort. Returns a new vector containing the sorted list.\n Has worst case O(n log n) performance, best case O(n), but\n is not space efficient. This is a stable sort.\n */\n-fn merge_sort<T>(le: lteq<T>, v: [T]) -> [T] {\n+fn merge_sort<T>(le: lteq<T>, v: [mutable? T]) -> [T] {\n     fn merge<T>(le: lteq<T>, a: [T], b: [T]) -> [T] {\n         let rs: [T] = [];\n         let a_len: uint = len::<T>(a);\n@@ -38,7 +38,8 @@ fn merge_sort<T>(le: lteq<T>, v: [T]) -> [T] {\n         ret rs;\n     }\n     let v_len: uint = len::<T>(v);\n-    if v_len <= 1u { ret v; }\n+    if v_len == 0u { ret []; }\n+    if v_len == 1u { ret [v[0]]; }\n     let mid: uint = v_len / 2u;\n     let a: [T] = slice::<T>(v, 0u, mid);\n     let b: [T] = slice::<T>(v, mid, v_len);"}, {"sha": "9e362f0c98817277161566a663893ece6a79df5a", "filename": "src/test/stdtest/sort.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87/src%2Ftest%2Fstdtest%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ad66d72e6c0f77d7c6a094cf3fc5799b65824c87/src%2Ftest%2Fstdtest%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Fsort.rs?ref=ad66d72e6c0f77d7c6a094cf3fc5799b65824c87", "patch": "@@ -26,3 +26,11 @@ fn test() {\n         check_sort(v1, v2);\n     }\n }\n+\n+#[test]\n+fn test_merge_sort_mutable() {\n+    fn lteq(&&a: int, &&b: int) -> bool { ret a <= b; }\n+    let v1 = [mutable 3, 2, 1];\n+    let v2 = std::sort::merge_sort(lteq, v1);\n+    assert v2 == [1, 2, 3];\n+}\n\\ No newline at end of file"}]}