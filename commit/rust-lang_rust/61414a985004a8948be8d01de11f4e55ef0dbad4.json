{"sha": "61414a985004a8948be8d01de11f4e55ef0dbad4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxNDE0YTk4NTAwNGE4OTQ4YmU4ZDAxZGUxMWY0ZTU1ZWYwZGJhZDQ=", "commit": {"author": {"name": "inrustwetrust", "email": "inrustwetrust@users.noreply.github.com", "date": "2014-08-31T17:07:27Z"}, "committer": {"name": "inrustwetrust", "email": "inrustwetrust@users.noreply.github.com", "date": "2014-09-07T09:42:02Z"}, "message": "Changed addl_lib_search_paths from HashSet to Vec\n\nThis makes the extra library paths given to the gcc linker come in\nthe same order as the -L options on the rustc command line.", "tree": {"sha": "b86a4824305038080732f0bd73b5871252c565e0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b86a4824305038080732f0bd73b5871252c565e0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/61414a985004a8948be8d01de11f4e55ef0dbad4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/61414a985004a8948be8d01de11f4e55ef0dbad4", "html_url": "https://github.com/rust-lang/rust/commit/61414a985004a8948be8d01de11f4e55ef0dbad4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/61414a985004a8948be8d01de11f4e55ef0dbad4/comments", "author": {"login": "inrustwetrust", "id": 8572437, "node_id": "MDQ6VXNlcjg1NzI0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8572437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inrustwetrust", "html_url": "https://github.com/inrustwetrust", "followers_url": "https://api.github.com/users/inrustwetrust/followers", "following_url": "https://api.github.com/users/inrustwetrust/following{/other_user}", "gists_url": "https://api.github.com/users/inrustwetrust/gists{/gist_id}", "starred_url": "https://api.github.com/users/inrustwetrust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inrustwetrust/subscriptions", "organizations_url": "https://api.github.com/users/inrustwetrust/orgs", "repos_url": "https://api.github.com/users/inrustwetrust/repos", "events_url": "https://api.github.com/users/inrustwetrust/events{/privacy}", "received_events_url": "https://api.github.com/users/inrustwetrust/received_events", "type": "User", "site_admin": false}, "committer": {"login": "inrustwetrust", "id": 8572437, "node_id": "MDQ6VXNlcjg1NzI0Mzc=", "avatar_url": "https://avatars.githubusercontent.com/u/8572437?v=4", "gravatar_id": "", "url": "https://api.github.com/users/inrustwetrust", "html_url": "https://github.com/inrustwetrust", "followers_url": "https://api.github.com/users/inrustwetrust/followers", "following_url": "https://api.github.com/users/inrustwetrust/following{/other_user}", "gists_url": "https://api.github.com/users/inrustwetrust/gists{/gist_id}", "starred_url": "https://api.github.com/users/inrustwetrust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/inrustwetrust/subscriptions", "organizations_url": "https://api.github.com/users/inrustwetrust/orgs", "repos_url": "https://api.github.com/users/inrustwetrust/repos", "events_url": "https://api.github.com/users/inrustwetrust/events{/privacy}", "received_events_url": "https://api.github.com/users/inrustwetrust/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57781c3c30babf85ee7a95f586ef5dcfb30104f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/57781c3c30babf85ee7a95f586ef5dcfb30104f8", "html_url": "https://github.com/rust-lang/rust/commit/57781c3c30babf85ee7a95f586ef5dcfb30104f8"}], "stats": {"total": 39, "additions": 15, "deletions": 24}, "files": [{"sha": "25bffe4289b48522560917cb1c1499106a9ebb8d", "filename": "src/librustc/back/link.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fback%2Flink.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -28,7 +28,6 @@ use util::ppaux;\n use util::sha2::{Digest, Sha256};\n \n use std::char;\n-use std::collections::HashSet;\n use std::io::{fs, TempDir, Command};\n use std::io;\n use std::mem;\n@@ -570,10 +569,7 @@ fn link_binary_output(sess: &Session,\n fn archive_search_paths(sess: &Session) -> Vec<Path> {\n     let mut rustpath = filesearch::rust_path();\n     rustpath.push(sess.target_filesearch().get_lib_path());\n-    // FIXME: Addl lib search paths are an unordered HashSet?\n-    // Shouldn't this search be done in some order?\n-    let addl_lib_paths: HashSet<Path> = sess.opts.addl_lib_search_paths.borrow().clone();\n-    let mut search: Vec<Path> = addl_lib_paths.move_iter().collect();\n+    let mut search: Vec<Path> = sess.opts.addl_lib_search_paths.borrow().clone();\n     search.push_all(rustpath.as_slice());\n     return search;\n }"}, {"sha": "8f4f54ce967355d8895e8c4eff64aca5abd3da8d", "filename": "src/librustc/driver/config.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fdriver%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fdriver%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fconfig.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -30,7 +30,7 @@ use syntax::diagnostic::{ColorConfig, Auto, Always, Never};\n use syntax::parse;\n use syntax::parse::token::InternedString;\n \n-use std::collections::{HashSet, HashMap};\n+use std::collections::HashMap;\n use getopts::{optopt, optmulti, optflag, optflagopt};\n use getopts;\n use std::cell::{RefCell};\n@@ -76,7 +76,7 @@ pub struct Options {\n     // This was mutable for rustpkg, which updates search paths based on the\n     // parsed code. It remains mutable in case its replacements wants to use\n     // this.\n-    pub addl_lib_search_paths: RefCell<HashSet<Path>>,\n+    pub addl_lib_search_paths: RefCell<Vec<Path>>,\n     pub maybe_sysroot: Option<Path>,\n     pub target_triple: String,\n     // User-specified cfg meta items. The compiler itself will add additional\n@@ -113,7 +113,7 @@ pub fn basic_options() -> Options {\n         lint_opts: Vec::new(),\n         describe_lints: false,\n         output_types: Vec::new(),\n-        addl_lib_search_paths: RefCell::new(HashSet::new()),\n+        addl_lib_search_paths: RefCell::new(Vec::new()),\n         maybe_sysroot: None,\n         target_triple: driver::host_triple().to_string(),\n         cfg: Vec::new(),"}, {"sha": "49c24b190b22b98003b6786de8b3fac27a214b21", "filename": "src/librustc/metadata/filesearch.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Ffilesearch.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -30,7 +30,7 @@ pub type pick<'a> = |path: &Path|: 'a -> FileMatch;\n \n pub struct FileSearch<'a> {\n     pub sysroot: &'a Path,\n-    pub addl_lib_search_paths: &'a RefCell<HashSet<Path>>,\n+    pub addl_lib_search_paths: &'a RefCell<Vec<Path>>,\n     pub triple: &'a str,\n }\n \n@@ -125,7 +125,7 @@ impl<'a> FileSearch<'a> {\n \n     pub fn new(sysroot: &'a Path,\n                triple: &'a str,\n-               addl_lib_search_paths: &'a RefCell<HashSet<Path>>) -> FileSearch<'a> {\n+               addl_lib_search_paths: &'a RefCell<Vec<Path>>) -> FileSearch<'a> {\n         debug!(\"using sysroot = {}, triple = {}\", sysroot.display(), triple);\n         FileSearch {\n             sysroot: sysroot,"}, {"sha": "908a8ed11e7e819cac7229d15c9cc7eb4b1c6c7e", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -1,4 +1,4 @@\n-// Copyright 2012-2013 The Rust Project Developers. See the COPYRIGHT\n+// Copyright 2012-2014 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -80,7 +80,7 @@ pub struct CrateAnalysis {\n pub type Externs = HashMap<String, Vec<String>>;\n \n /// Parses, resolves, and typechecks the given crate\n-fn get_ast_and_resolve(cpath: &Path, libs: HashSet<Path>, cfgs: Vec<String>,\n+fn get_ast_and_resolve(cpath: &Path, libs: Vec<Path>, cfgs: Vec<String>,\n                        externs: Externs, triple: Option<String>)\n                        -> (DocContext, CrateAnalysis) {\n     use syntax::codemap::dummy_spanned;\n@@ -153,7 +153,7 @@ fn get_ast_and_resolve(cpath: &Path, libs: HashSet<Path>, cfgs: Vec<String>,\n     })\n }\n \n-pub fn run_core(libs: HashSet<Path>, cfgs: Vec<String>, externs: Externs,\n+pub fn run_core(libs: Vec<Path>, cfgs: Vec<String>, externs: Externs,\n                 path: &Path, triple: Option<String>)\n                 -> (clean::Crate, CrateAnalysis) {\n     let (ctxt, analysis) = get_ast_and_resolve(path, libs, cfgs, externs, triple);"}, {"sha": "4adb7f1617ac3a740f7852ded45cc8f64c2b7bcc", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -369,11 +369,7 @@ fn rust_input(cratefile: &str, externs: core::Externs, matches: &getopts::Matche\n     info!(\"starting to run rustc\");\n     let (mut krate, analysis) = std::task::try(proc() {\n         let cr = cr;\n-        core::run_core(libs.move_iter().collect(),\n-                       cfgs,\n-                       externs,\n-                       &cr,\n-                       triple)\n+        core::run_core(libs, cfgs, externs, &cr, triple)\n     }).map_err(|boxed_any|format!(\"{:?}\", boxed_any)).unwrap();\n     info!(\"finished with rustc\");\n     analysiskey.replace(Some(analysis));"}, {"sha": "7ee58d99c27efd087cb357972e80f7f142717e10", "filename": "src/librustdoc/markdown.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -8,7 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use std::collections::HashSet;\n use std::io;\n use std::string::String;\n \n@@ -136,7 +135,7 @@ pub fn render(input: &str, mut output: Path, matches: &getopts::Matches,\n }\n \n /// Run any tests/code examples in the markdown file `input`.\n-pub fn test(input: &str, libs: HashSet<Path>, externs: core::Externs,\n+pub fn test(input: &str, libs: Vec<Path>, externs: core::Externs,\n             mut test_args: Vec<String>) -> int {\n     let input_str = load_or_return!(input, 1, 2);\n "}, {"sha": "adf8cfa45b5122d91eeac7b8269e3a0265025f9a", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/61414a985004a8948be8d01de11f4e55ef0dbad4/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=61414a985004a8948be8d01de11f4e55ef0dbad4", "patch": "@@ -39,7 +39,7 @@ use visit_ast::RustdocVisitor;\n \n pub fn run(input: &str,\n            cfgs: Vec<String>,\n-           libs: HashSet<Path>,\n+           libs: Vec<Path>,\n            externs: core::Externs,\n            mut test_args: Vec<String>,\n            crate_name: Option<String>)\n@@ -109,7 +109,7 @@ pub fn run(input: &str,\n     0\n }\n \n-fn runtest(test: &str, cratename: &str, libs: HashSet<Path>, externs: core::Externs,\n+fn runtest(test: &str, cratename: &str, libs: Vec<Path>, externs: core::Externs,\n            should_fail: bool, no_run: bool, as_test_harness: bool) {\n     // the test harness wants its own `main` & top level functions, so\n     // never wrap the test in `fn main() { ... }`\n@@ -244,7 +244,7 @@ pub fn maketest(s: &str, cratename: Option<&str>, lints: bool, dont_insert_main:\n pub struct Collector {\n     pub tests: Vec<testing::TestDescAndFn>,\n     names: Vec<String>,\n-    libs: HashSet<Path>,\n+    libs: Vec<Path>,\n     externs: core::Externs,\n     cnt: uint,\n     use_headers: bool,\n@@ -253,7 +253,7 @@ pub struct Collector {\n }\n \n impl Collector {\n-    pub fn new(cratename: String, libs: HashSet<Path>, externs: core::Externs,\n+    pub fn new(cratename: String, libs: Vec<Path>, externs: core::Externs,\n                use_headers: bool) -> Collector {\n         Collector {\n             tests: Vec::new(),"}]}