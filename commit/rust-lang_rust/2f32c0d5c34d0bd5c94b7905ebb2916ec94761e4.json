{"sha": "2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmMzJjMGQ1YzM0ZDBiZDVjOTRiNzkwNWViYjI5MTZlYzk0NzYxZTQ=", "commit": {"author": {"name": "Jeff Olson", "email": "olson.jeffery@gmail.com", "date": "2012-08-28T06:03:04Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-08T21:22:15Z"}, "message": "core: cleanup in task.rs for things missed in last rebase", "tree": {"sha": "925f45595b5b9ab6fcc4ba53d259cf8a80162f3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/925f45595b5b9ab6fcc4ba53d259cf8a80162f3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4", "html_url": "https://github.com/rust-lang/rust/commit/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4/comments", "author": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d41af3e00229c2c32890360eb760219eeb14e724", "url": "https://api.github.com/repos/rust-lang/rust/commits/d41af3e00229c2c32890360eb760219eeb14e724", "html_url": "https://github.com/rust-lang/rust/commit/d41af3e00229c2c32890360eb760219eeb14e724"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "919faf40d83a0a581202de8135165efa4e64ea3b", "filename": "src/libcore/task.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4/src%2Flibcore%2Ftask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4/src%2Flibcore%2Ftask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ftask.rs?ref=2f32c0d5c34d0bd5c94b7905ebb2916ec94761e4", "patch": "@@ -78,9 +78,9 @@ export ThreadPerTask;\n export ManualThreads;\n export PlatformThread;\n \n-macro_rules! move_it {\n+macro_rules! move_it (\n     { $x:expr } => { unsafe { let y <- *ptr::addr_of($x); y } }\n-}\n+)\n \n /* Data types */\n \n@@ -209,7 +209,7 @@ type TaskOpts = {\n     linked: bool,\n     supervised: bool,\n     mut notify_chan: Option<Chan<Notification>>,\n-    sched: option<SchedOpts>,\n+    sched: Option<SchedOpts>,\n };\n \n /**\n@@ -254,7 +254,7 @@ priv impl TaskBuilder {\n         }\n         self.consumed = true;\n         let notify_chan = if self.opts.notify_chan == None {\n-            none\n+            None\n         } else {\n             Some(option::swap_unwrap(&mut self.opts.notify_chan))\n         };\n@@ -450,12 +450,12 @@ impl TaskBuilder {\n      * must be greater than zero.\n      */\n     fn spawn(+f: fn~()) {\n-        let notify_chan = if self.opts.notify_chan == none {\n+        let notify_chan = if self.opts.notify_chan == None {\n             None\n         } else {\n             let swapped_notify_chan =\n                 option::swap_unwrap(&mut self.opts.notify_chan);\n-            some(swapped_notify_chan)\n+            Some(swapped_notify_chan)\n         };\n         let x = self.consume();\n         let opts = {\n@@ -1309,7 +1309,7 @@ fn spawn_raw(+opts: TaskOpts, +f: fn~()) {\n             //let mut notifier = None;//notify_chan.map(|c| AutoNotify(c));\n             let notifier = match notify_chan {\n                 Some(notify_chan_value) => {\n-                    let moved_ncv = move_it!{notify_chan_value};\n+                    let moved_ncv = move_it!(notify_chan_value);\n                     Some(AutoNotify(moved_ncv))\n                 }\n                 _ => None"}]}