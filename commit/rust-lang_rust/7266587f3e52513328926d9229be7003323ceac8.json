{"sha": "7266587f3e52513328926d9229be7003323ceac8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyNjY1ODdmM2U1MjUxMzMyODkyNmQ5MjI5YmU3MDAzMzIzY2VhYzg=", "commit": {"author": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2014-04-24T13:33:28Z"}, "committer": {"name": "Chris Morgan", "email": "me@chrismorgan.info", "date": "2014-04-24T13:33:28Z"}, "message": "Fix Vim indent regressions from #13600.\n\nThe change in #13600 was incorrect, containing a bad regular expression;\ninside an indent function, errors are silently ignored (and the ``~=``\noperation will return 0), so it just always failed, causing the cases\nthat were supposed to be caught to not be caught and making things like\nthe ``match`` example shown above or struct field definitions regress.\n\nI have fixed the regular expression to what it should have been. This is\nstill imperfect, of course, not handling cases like where the first\nargument to a function is a function call (``foo(bar(),``), but it'll do\nfor now.", "tree": {"sha": "e564235f3359335c23d0500a23ea0cc3eadff2f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e564235f3359335c23d0500a23ea0cc3eadff2f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7266587f3e52513328926d9229be7003323ceac8", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7266587f3e52513328926d9229be7003323ceac8", "html_url": "https://github.com/rust-lang/rust/commit/7266587f3e52513328926d9229be7003323ceac8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7266587f3e52513328926d9229be7003323ceac8/comments", "author": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chris-morgan", "id": 392868, "node_id": "MDQ6VXNlcjM5Mjg2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/392868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-morgan", "html_url": "https://github.com/chris-morgan", "followers_url": "https://api.github.com/users/chris-morgan/followers", "following_url": "https://api.github.com/users/chris-morgan/following{/other_user}", "gists_url": "https://api.github.com/users/chris-morgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-morgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-morgan/subscriptions", "organizations_url": "https://api.github.com/users/chris-morgan/orgs", "repos_url": "https://api.github.com/users/chris-morgan/repos", "events_url": "https://api.github.com/users/chris-morgan/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-morgan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e01e78fd00c78fd3b7f92fb0d6d58e05801d5d38", "url": "https://api.github.com/repos/rust-lang/rust/commits/e01e78fd00c78fd3b7f92fb0d6d58e05801d5d38", "html_url": "https://github.com/rust-lang/rust/commit/e01e78fd00c78fd3b7f92fb0d6d58e05801d5d38"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "54094a741196747ce38476866bd9f2a753bdcb2b", "filename": "src/etc/vim/indent/rust.vim", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7266587f3e52513328926d9229be7003323ceac8/src%2Fetc%2Fvim%2Findent%2Frust.vim", "raw_url": "https://github.com/rust-lang/rust/raw/7266587f3e52513328926d9229be7003323ceac8/src%2Fetc%2Fvim%2Findent%2Frust.vim", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fvim%2Findent%2Frust.vim?ref=7266587f3e52513328926d9229be7003323ceac8", "patch": "@@ -105,7 +105,7 @@ function GetRustIndent(lnum)\n \tif prevline[len(prevline) - 1] == \",\"\n \t\t\t\t\\ && s:get_line_trimmed(a:lnum) !~ \"^\\\\s*[\\\\[\\\\]{}]\"\n \t\t\t\t\\ && prevline !~ \"^\\\\s*fn\\\\s\"\n-\t\t\t\t\\ && prevline !~ \"\\\\([^\\\\(\\\\)]\\+,$\"\n+\t\t\t\t\\ && prevline !~ \"([^()]\\\\+,$\"\n \t\t\" Oh ho! The previous line ended in a comma! I bet cindent will try to\n \t\t\" take this too far... For now, let's normally use the previous line's\n \t\t\" indent."}]}