{"sha": "14227ddc40c61332eb7f9afbd711d58e76df6cb2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE0MjI3ZGRjNDBjNjEzMzJlYjdmOWFmYmQ3MTFkNThlNzZkZjZjYjI=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2017-06-13T02:28:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-06-13T02:28:57Z"}, "message": "Merge pull request #1664 from topecongiro/where-rfc-style\n\nFix excessive indentation in trait where clause when using Rfc style", "tree": {"sha": "3e6b858939cebed89530166b38ad8c9ec40127da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3e6b858939cebed89530166b38ad8c9ec40127da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/14227ddc40c61332eb7f9afbd711d58e76df6cb2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/14227ddc40c61332eb7f9afbd711d58e76df6cb2", "html_url": "https://github.com/rust-lang/rust/commit/14227ddc40c61332eb7f9afbd711d58e76df6cb2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/14227ddc40c61332eb7f9afbd711d58e76df6cb2/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c9e77cdb3fdeb58726e72f61ca0a8387ae7c7d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c9e77cdb3fdeb58726e72f61ca0a8387ae7c7d6", "html_url": "https://github.com/rust-lang/rust/commit/6c9e77cdb3fdeb58726e72f61ca0a8387ae7c7d6"}, {"sha": "f084a8af963c2160c4832226d7c0003982f13204", "url": "https://api.github.com/repos/rust-lang/rust/commits/f084a8af963c2160c4832226d7c0003982f13204", "html_url": "https://github.com/rust-lang/rust/commit/f084a8af963c2160c4832226d7c0003982f13204"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "085b9eed812e48df273311ec18d56cc426ac0f62", "filename": "src/items.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/14227ddc40c61332eb7f9afbd711d58e76df6cb2/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14227ddc40c61332eb7f9afbd711d58e76df6cb2/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=14227ddc40c61332eb7f9afbd711d58e76df6cb2", "patch": "@@ -2306,7 +2306,7 @@ fn rewrite_where_clause_rfc_style(context: &RewriteContext,\n                              terminator,\n                              |pred| span_for_where_pred(pred).lo,\n                              |pred| span_for_where_pred(pred).hi,\n-                             |pred| pred.rewrite(context, clause_shape),\n+                             |pred| pred.rewrite(context, shape),\n                              span_start,\n                              span_end);\n     let comma_tactic = if suppress_comma {"}, {"sha": "7e5daa12f812fcabff7fb3e9121bb3451c0d83a5", "filename": "src/types.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/14227ddc40c61332eb7f9afbd711d58e76df6cb2/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14227ddc40c61332eb7f9afbd711d58e76df6cb2/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=14227ddc40c61332eb7f9afbd711d58e76df6cb2", "patch": "@@ -24,7 +24,7 @@ use lists::{itemize_list, format_fn_args};\n use rewrite::{Rewrite, RewriteContext};\n use utils::{extra_offset, format_mutability, colon_spaces, wrap_str, mk_sp, last_line_width};\n use expr::{rewrite_unary_prefix, rewrite_pair, rewrite_tuple_type};\n-use config::TypeDensity;\n+use config::{Style, TypeDensity};\n \n #[derive(Copy, Clone, Debug, Eq, PartialEq)]\n pub enum PathContext {\n@@ -383,7 +383,10 @@ impl Rewrite for ast::WherePredicate {\n                     }\n                 } else {\n                     let used_width = type_str.len() + colon.len();\n-                    let ty_shape = try_opt!(shape.block_left(used_width));\n+                    let ty_shape = match context.config.where_style() {\n+                        Style::Legacy => try_opt!(shape.block_left(used_width)),\n+                        Style::Rfc => shape.block_indent(context.config.tab_spaces()),\n+                    };\n                     let bounds: Vec<_> =\n                         try_opt!(bounds\n                                      .iter()"}, {"sha": "ef822f6bea2f2c6cea83b3d89667b601ef48903d", "filename": "tests/source/where-clause-rfc.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/14227ddc40c61332eb7f9afbd711d58e76df6cb2/tests%2Fsource%2Fwhere-clause-rfc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14227ddc40c61332eb7f9afbd711d58e76df6cb2/tests%2Fsource%2Fwhere-clause-rfc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fwhere-clause-rfc.rs?ref=14227ddc40c61332eb7f9afbd711d58e76df6cb2", "patch": "@@ -42,3 +42,9 @@ struct Exactly100CharsToSemicolon<A, B, C, D, E>\n struct AlwaysOnNextLine<LongLongTypename, LongTypename, A, B, C, D, E, F> where A: LongTrait {\n     x: i32\n }\n+\n+pub trait SomeTrait<T>\n+    where\n+    T: Something + Sync + Send + Display     + Debug     + Copy + Hash + Debug + Display + Write + Read + FromStr\n+{\n+}"}, {"sha": "bdf1f9d257429cdca20577dfebfdc7f539bde798", "filename": "tests/target/where-clause-rfc.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/14227ddc40c61332eb7f9afbd711d58e76df6cb2/tests%2Ftarget%2Fwhere-clause-rfc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14227ddc40c61332eb7f9afbd711d58e76df6cb2/tests%2Ftarget%2Fwhere-clause-rfc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fwhere-clause-rfc.rs?ref=14227ddc40c61332eb7f9afbd711d58e76df6cb2", "patch": "@@ -96,3 +96,20 @@ where\n {\n     x: i32,\n }\n+\n+pub trait SomeTrait<T>\n+where\n+    T: Something\n+        + Sync\n+        + Send\n+        + Display\n+        + Debug\n+        + Copy\n+        + Hash\n+        + Debug\n+        + Display\n+        + Write\n+        + Read\n+        + FromStr\n+{\n+}"}]}