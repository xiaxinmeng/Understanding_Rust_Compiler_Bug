{"sha": "c73871c516f659262bb70a38b50e949f8ca39023", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM3Mzg3MWM1MTZmNjU5MjYyYmI3MGEzOGI1MGU5NDlmOGNhMzkwMjM=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-05T05:17:46Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2017-11-06T04:52:25Z"}, "message": "Introduce PairParts to reduce the number of args of rewrite_pair()", "tree": {"sha": "cbb5bc0669dccd96b59200429454a33c059ca2f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cbb5bc0669dccd96b59200429454a33c059ca2f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c73871c516f659262bb70a38b50e949f8ca39023", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c73871c516f659262bb70a38b50e949f8ca39023", "html_url": "https://github.com/rust-lang/rust/commit/c73871c516f659262bb70a38b50e949f8ca39023", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c73871c516f659262bb70a38b50e949f8ca39023/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10cb568c18a4efb5655a0eaa3bd7bd11c441aa6c", "url": "https://api.github.com/repos/rust-lang/rust/commits/10cb568c18a4efb5655a0eaa3bd7bd11c441aa6c", "html_url": "https://github.com/rust-lang/rust/commit/10cb568c18a4efb5655a0eaa3bd7bd11c441aa6c"}], "stats": {"total": 39, "additions": 13, "deletions": 26}, "files": [{"sha": "0fc2743e57eb03b93fce5c6bc4e61d493c220330", "filename": "src/expr.rs", "status": "modified", "additions": 9, "deletions": 18, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/c73871c516f659262bb70a38b50e949f8ca39023/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c73871c516f659262bb70a38b50e949f8ca39023/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=c73871c516f659262bb70a38b50e949f8ca39023", "patch": "@@ -83,9 +83,7 @@ pub fn format_expr(\n             rewrite_pair(\n                 &**lhs,\n                 &**rhs,\n-                \"\",\n-                &format!(\" {} \", context.snippet(op.span)),\n-                \"\",\n+                &PairParts(\"\", &format!(\" {} \", context.snippet(op.span)), \"\"),\n                 context,\n                 shape,\n                 context.config.binop_separator(),\n@@ -186,19 +184,15 @@ pub fn format_expr(\n         ast::ExprKind::Cast(ref expr, ref ty) => rewrite_pair(\n             &**expr,\n             &**ty,\n-            \"\",\n-            \" as \",\n-            \"\",\n+            &PairParts(\"\", \" as \", \"\"),\n             context,\n             shape,\n             SeparatorPlace::Front,\n         ),\n         ast::ExprKind::Type(ref expr, ref ty) => rewrite_pair(\n             &**expr,\n             &**ty,\n-            \"\",\n-            \": \",\n-            \"\",\n+            &PairParts(\"\", \": \", \"\"),\n             context,\n             shape,\n             SeparatorPlace::Back,\n@@ -215,9 +209,7 @@ pub fn format_expr(\n             rewrite_pair(\n                 &**expr,\n                 &**repeats,\n-                lbr,\n-                \"; \",\n-                rbr,\n+                &PairParts(lbr, \"; \", rbr),\n                 context,\n                 shape,\n                 SeparatorPlace::Back,\n@@ -253,9 +245,7 @@ pub fn format_expr(\n                     rewrite_pair(\n                         &*lhs,\n                         &*rhs,\n-                        \"\",\n-                        &sp_delim,\n-                        \"\",\n+                        &PairParts(\"\", &sp_delim, \"\"),\n                         context,\n                         shape,\n                         SeparatorPlace::Front,\n@@ -315,12 +305,12 @@ pub fn format_expr(\n         })\n }\n \n+pub struct PairParts<'a>(pub &'a str, pub &'a str, pub &'a str);\n+\n pub fn rewrite_pair<LHS, RHS>(\n     lhs: &LHS,\n     rhs: &RHS,\n-    prefix: &str,\n-    infix: &str,\n-    suffix: &str,\n+    pp: &PairParts,\n     context: &RewriteContext,\n     shape: Shape,\n     separator_place: SeparatorPlace,\n@@ -329,6 +319,7 @@ where\n     LHS: Rewrite,\n     RHS: Rewrite,\n {\n+    let &PairParts(prefix, infix, suffix) = pp;\n     let lhs_overhead = match separator_place {\n         SeparatorPlace::Back => shape.used_width() + prefix.len() + infix.trim_right().len(),\n         SeparatorPlace::Front => shape.used_width(),"}, {"sha": "38d850962bbb4f411bf9825a97edf9444819e4aa", "filename": "src/patterns.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c73871c516f659262bb70a38b50e949f8ca39023/src%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c73871c516f659262bb70a38b50e949f8ca39023/src%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fpatterns.rs?ref=c73871c516f659262bb70a38b50e949f8ca39023", "patch": "@@ -16,7 +16,7 @@ use spanned::Spanned;\n use codemap::SpanUtils;\n use comment::FindUncommented;\n use expr::{can_be_overflowed_expr, rewrite_call_inner, rewrite_pair, rewrite_unary_prefix,\n-           wrap_struct_field};\n+           wrap_struct_field, PairParts};\n use lists::{itemize_list, shape_for_tactic, struct_lit_formatting, struct_lit_shape,\n             struct_lit_tactic, write_list, DefinitiveListTactic, SeparatorPlace, SeparatorTactic};\n use rewrite::{Rewrite, RewriteContext};\n@@ -65,9 +65,7 @@ impl Rewrite for Pat {\n                 rewrite_pair(\n                     &**lhs,\n                     &**rhs,\n-                    \"\",\n-                    infix,\n-                    \"\",\n+                    &PairParts(\"\", infix, \"\"),\n                     context,\n                     shape,\n                     SeparatorPlace::Front,"}, {"sha": "26b5f702a70fcb2230ec98dbc2c34eb07207f006", "filename": "src/types.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c73871c516f659262bb70a38b50e949f8ca39023/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c73871c516f659262bb70a38b50e949f8ca39023/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=c73871c516f659262bb70a38b50e949f8ca39023", "patch": "@@ -19,7 +19,7 @@ use syntax::symbol::keywords;\n use spanned::Spanned;\n use codemap::SpanUtils;\n use config::{IndentStyle, Style, TypeDensity};\n-use expr::{rewrite_pair, rewrite_tuple, rewrite_unary_prefix, wrap_args_with_parens};\n+use expr::{rewrite_pair, rewrite_tuple, rewrite_unary_prefix, wrap_args_with_parens, PairParts};\n use items::{format_generics_item_list, generics_shape_from_config};\n use lists::{definitive_tactic, itemize_list, write_list, ListFormatting, ListTactic, Separator,\n             SeparatorPlace, SeparatorTactic};\n@@ -709,9 +709,7 @@ impl Rewrite for ast::Ty {\n                 rewrite_pair(\n                     &**ty,\n                     &**repeats,\n-                    lbr,\n-                    \"; \",\n-                    rbr,\n+                    &PairParts(lbr, \"; \", rbr),\n                     context,\n                     shape,\n                     SeparatorPlace::Back,"}]}