{"sha": "5ae94cc6b878f8004e3d354d77991146448c1f82", "node_id": "C_kwDOAAsO6NoAKDVhZTk0Y2M2Yjg3OGY4MDA0ZTNkMzU0ZDc3OTkxMTQ2NDQ4YzFmODI", "commit": {"author": {"name": "Yacin Tmimi", "email": "yacintmimi@gmail.com", "date": "2022-06-13T12:34:47Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2022-06-16T01:06:04Z"}, "message": "Backport 3795\n\nfix sorting of use statements with raw identifiers", "tree": {"sha": "e8222d8e34d425c7920bc8cf5b7a5d1ac55351f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e8222d8e34d425c7920bc8cf5b7a5d1ac55351f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ae94cc6b878f8004e3d354d77991146448c1f82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ae94cc6b878f8004e3d354d77991146448c1f82", "html_url": "https://github.com/rust-lang/rust/commit/5ae94cc6b878f8004e3d354d77991146448c1f82", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ae94cc6b878f8004e3d354d77991146448c1f82/comments", "author": {"login": "ytmimi", "id": 29028348, "node_id": "MDQ6VXNlcjI5MDI4MzQ4", "avatar_url": "https://avatars.githubusercontent.com/u/29028348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ytmimi", "html_url": "https://github.com/ytmimi", "followers_url": "https://api.github.com/users/ytmimi/followers", "following_url": "https://api.github.com/users/ytmimi/following{/other_user}", "gists_url": "https://api.github.com/users/ytmimi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ytmimi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ytmimi/subscriptions", "organizations_url": "https://api.github.com/users/ytmimi/orgs", "repos_url": "https://api.github.com/users/ytmimi/repos", "events_url": "https://api.github.com/users/ytmimi/events{/privacy}", "received_events_url": "https://api.github.com/users/ytmimi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a6146e53638e04ed86ceec417d4197440ead828", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a6146e53638e04ed86ceec417d4197440ead828", "html_url": "https://github.com/rust-lang/rust/commit/1a6146e53638e04ed86ceec417d4197440ead828"}], "stats": {"total": 30, "additions": 22, "deletions": 8}, "files": [{"sha": "6742b14c5a37aab85ec283db6fe1c9b0f95d1caa", "filename": "src/imports.rs", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/5ae94cc6b878f8004e3d354d77991146448c1f82/src%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ae94cc6b878f8004e3d354d77991146448c1f82/src%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fimports.rs?ref=5ae94cc6b878f8004e3d354d77991146448c1f82", "patch": "@@ -815,9 +815,16 @@ impl Ord for UseSegment {\n         match (self, other) {\n             (&Slf(ref a), &Slf(ref b))\n             | (&Super(ref a), &Super(ref b))\n-            | (&Crate(ref a), &Crate(ref b)) => a.cmp(b),\n+            | (&Crate(ref a), &Crate(ref b)) => match (a, b) {\n+                (Some(sa), Some(sb)) => {\n+                    sa.trim_start_matches(\"r#\").cmp(sb.trim_start_matches(\"r#\"))\n+                }\n+                (_, _) => a.cmp(b),\n+            },\n             (&Glob, &Glob) => Ordering::Equal,\n-            (&Ident(ref ia, ref aa), &Ident(ref ib, ref ab)) => {\n+            (&Ident(ref pia, ref aa), &Ident(ref pib, ref ab)) => {\n+                let ia = pia.trim_start_matches(\"r#\");\n+                let ib = pib.trim_start_matches(\"r#\");\n                 // snake_case < CamelCase < UPPER_SNAKE_CASE\n                 if ia.starts_with(char::is_uppercase) && ib.starts_with(char::is_lowercase) {\n                     return Ordering::Greater;\n@@ -835,13 +842,14 @@ impl Ord for UseSegment {\n                 if ident_ord != Ordering::Equal {\n                     return ident_ord;\n                 }\n-                if aa.is_none() && ab.is_some() {\n-                    return Ordering::Less;\n-                }\n-                if aa.is_some() && ab.is_none() {\n-                    return Ordering::Greater;\n+                match (aa, ab) {\n+                    (None, Some(_)) => Ordering::Less,\n+                    (Some(_), None) => Ordering::Greater,\n+                    (Some(aas), Some(abs)) => aas\n+                        .trim_start_matches(\"r#\")\n+                        .cmp(abs.trim_start_matches(\"r#\")),\n+                    (None, None) => Ordering::Equal,\n                 }\n-                aa.cmp(ab)\n             }\n             (&List(ref a), &List(ref b)) => {\n                 for (a, b) in a.iter().zip(b.iter()) {"}, {"sha": "d5857290b62808551ee138d2aed4a161e93c8820", "filename": "tests/source/imports_raw_identifiers.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5ae94cc6b878f8004e3d354d77991146448c1f82/tests%2Fsource%2Fimports_raw_identifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ae94cc6b878f8004e3d354d77991146448c1f82/tests%2Fsource%2Fimports_raw_identifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fimports_raw_identifiers.rs?ref=5ae94cc6b878f8004e3d354d77991146448c1f82", "patch": "@@ -0,0 +1,3 @@\n+use websocket::client::ClientBuilder;\n+use websocket::r#async::futures::Stream;\n+use websocket::result::WebSocketError;"}, {"sha": "6ae085c8a5f670e37a91cafb430e4ac0d6da2c11", "filename": "tests/target/imports_raw_identifiers.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/5ae94cc6b878f8004e3d354d77991146448c1f82/tests%2Ftarget%2Fimports_raw_identifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ae94cc6b878f8004e3d354d77991146448c1f82/tests%2Ftarget%2Fimports_raw_identifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fimports_raw_identifiers.rs?ref=5ae94cc6b878f8004e3d354d77991146448c1f82", "patch": "@@ -0,0 +1,3 @@\n+use websocket::r#async::futures::Stream;\n+use websocket::client::ClientBuilder;\n+use websocket::result::WebSocketError;"}]}