{"sha": "d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ0ZWY3NGIyZGFhYjMxMTllMzRlMmRiZWQ2YmIyYWI0MGI0OWNhZTk=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-19T14:16:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-03-19T14:16:46Z"}, "message": "Rollup merge of #57847 - clarcharr:dbg_no_params, r=Centril\n\ndbg!() without parameters\n\nFixes #57845.", "tree": {"sha": "b82f9d1975bfffa209df981ced4e12cc02360a87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b82f9d1975bfffa209df981ced4e12cc02360a87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJckPnPCRBK7hj4Ov3rIwAAdHIIAFZnywwWi6C4mi5nMbNl+PQ8\nV+ZzvyfvmLgsXwaws8aDpSCFjBfz6rQO4bJgkfb7zTNqFXkcjPVYnR+4C+2FiBKJ\nKjCCdFP33aQuV/VHUerWopQffZxpFgdjwOLkTzgXy81XBfCEMBRRItPeCWTJ78AX\nkKYJvCp48yJQrdYX7im6Yxae6mzh1GSWNrLZR2i98IV9nWcC9U+2CK+C3TdBmaAV\n2fr5wEPJav8eE+sy/EQknIsGAkrHK9FTSPv7GY+QRjb5fF+VylauLK6qpK1szb9y\nQQLBSLRlKGnbRR7ZCnOzdZVweMctkN3w+O/rhXYTazkN5Icn70IDCZFnNRG4oh4=\n=s2nZ\n-----END PGP SIGNATURE-----\n", "payload": "tree b82f9d1975bfffa209df981ced4e12cc02360a87\nparent c1975dbd34a69565cd0a66770377ed9bfc85fa35\nparent ea9e2c4ef5cf2d1867b284bd4f84b5417d8df45b\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1553005006 +0100\ncommitter GitHub <noreply@github.com> 1553005006 +0100\n\nRollup merge of #57847 - clarcharr:dbg_no_params, r=Centril\n\ndbg!() without parameters\n\nFixes #57845.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "html_url": "https://github.com/rust-lang/rust/commit/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c1975dbd34a69565cd0a66770377ed9bfc85fa35", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1975dbd34a69565cd0a66770377ed9bfc85fa35", "html_url": "https://github.com/rust-lang/rust/commit/c1975dbd34a69565cd0a66770377ed9bfc85fa35"}, {"sha": "ea9e2c4ef5cf2d1867b284bd4f84b5417d8df45b", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea9e2c4ef5cf2d1867b284bd4f84b5417d8df45b", "html_url": "https://github.com/rust-lang/rust/commit/ea9e2c4ef5cf2d1867b284bd4f84b5417d8df45b"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "d5dc5f7c4f0dfe3f4532974eb9e8910f8d5a0b37", "filename": "src/libstd/macros.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9/src%2Flibstd%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9/src%2Flibstd%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmacros.rs?ref=d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "patch": "@@ -305,10 +305,16 @@ macro_rules! eprintln {\n /// let _ = dbg!(a); // <-- `a` is moved again; error!\n /// ```\n ///\n+/// You can also use `dbg!()` without a value to just print the\n+/// file and line whenever it's reached.\n+///\n /// [stderr]: https://en.wikipedia.org/wiki/Standard_streams#Standard_error_(stderr)\n #[macro_export]\n #[stable(feature = \"dbg_macro\", since = \"1.32.0\")]\n macro_rules! dbg {\n+    () => {\n+        eprintln!(\"[{}:{}]\", file!(), line!());\n+    };\n     ($val:expr) => {\n         // Use of `match` here is intentional because it affects the lifetimes\n         // of temporaries - https://stackoverflow.com/a/48732525/1063961"}, {"sha": "67f7f80a9e2dac087839d305a6145869a02a31b8", "filename": "src/test/ui/rfc-2361-dbg-macro/dbg-macro-expected-behavior.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9/src%2Ftest%2Fui%2Frfc-2361-dbg-macro%2Fdbg-macro-expected-behavior.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9/src%2Ftest%2Fui%2Frfc-2361-dbg-macro%2Fdbg-macro-expected-behavior.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc-2361-dbg-macro%2Fdbg-macro-expected-behavior.rs?ref=d4ef74b2daab3119e34e2dbed6bb2ab40b49cae9", "patch": "@@ -33,6 +33,9 @@ fn test() {\n     // We can move `b` because it's Copy.\n     drop(b);\n \n+    // Without parameters works as expected.\n+    let _: () = dbg!();\n+\n     // Test that we can borrow and that successive applications is still identity.\n     let a = NoCopy(1337);\n     let b: &NoCopy = dbg!(dbg!(&a));\n@@ -69,17 +72,19 @@ fn validate_stderr(stderr: Vec<String>) {\n         \"    y: 24\",\n         \"}\",\n \n-        \":38] &a = NoCopy(\",\n+        \":37]\",\n+\n+        \":41] &a = NoCopy(\",\n         \"    1337\",\n         \")\",\n \n-        \":38] dbg!(& a) = NoCopy(\",\n+        \":41] dbg!(& a) = NoCopy(\",\n         \"    1337\",\n         \")\",\n-        \":43] f(&42) = 42\",\n+        \":46] f(&42) = 42\",\n \n         \"before\",\n-        \":48] { foo += 1; eprintln!(\\\"before\\\"); 7331 } = 7331\",\n+        \":51] { foo += 1; eprintln!(\\\"before\\\"); 7331 } = 7331\",\n     ]);\n }\n "}]}