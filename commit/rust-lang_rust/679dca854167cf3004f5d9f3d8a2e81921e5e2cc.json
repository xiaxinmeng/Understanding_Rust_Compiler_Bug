{"sha": "679dca854167cf3004f5d9f3d8a2e81921e5e2cc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3OWRjYTg1NDE2N2NmMzAwNGY1ZDlmM2Q4YTJlODE5MjFlNWUyY2M=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2010-10-27T22:02:52Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2010-10-27T22:06:19Z"}, "message": "Emit a sensible error message if one or more of the parameters isn't enough context to instantiate a polymorphic function", "tree": {"sha": "368334f1b54a602ac1da2a8401cd47dd472d987e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/368334f1b54a602ac1da2a8401cd47dd472d987e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/679dca854167cf3004f5d9f3d8a2e81921e5e2cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/679dca854167cf3004f5d9f3d8a2e81921e5e2cc", "html_url": "https://github.com/rust-lang/rust/commit/679dca854167cf3004f5d9f3d8a2e81921e5e2cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/679dca854167cf3004f5d9f3d8a2e81921e5e2cc/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3c4c1426a54d3dfbfae9ab4e54d18875d01885e", "url": "https://api.github.com/repos/rust-lang/rust/commits/b3c4c1426a54d3dfbfae9ab4e54d18875d01885e", "html_url": "https://github.com/rust-lang/rust/commit/b3c4c1426a54d3dfbfae9ab4e54d18875d01885e"}], "stats": {"total": 13, "additions": 9, "deletions": 4}, "files": [{"sha": "2ff5e1286d77ccfa0528168cd5e4089c901968d1", "filename": "src/boot/me/type.ml", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/679dca854167cf3004f5d9f3d8a2e81921e5e2cc/src%2Fboot%2Fme%2Ftype.ml", "raw_url": "https://github.com/rust-lang/rust/raw/679dca854167cf3004f5d9f3d8a2e81921e5e2cc/src%2Fboot%2Fme%2Ftype.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Fme%2Ftype.ml?ref=679dca854167cf3004f5d9f3d8a2e81921e5e2cc", "patch": "@@ -673,14 +673,19 @@ let check_stmt (cx:Semant.ctxt) : (fn_ctx -> Ast.stmt -> unit) =\n           in\n           let arg_ty_opts = Array.map (fun ty -> Some ty) arg_tys in\n           ignore (demand_fn ~param_handler:param_handler arg_ty_opts ty);\n-          let get_subst subst_opt =\n+          let get_subst i subst_opt =\n             match subst_opt with\n                 Some subst -> subst\n               | None ->\n-                  Common.bug ()\n-                    \"internal_check_outer_lval: subst not found\"\n+                  Common.err\n+                    None\n+                    \"not enough context to instantiate parameter %d of the \\\n+                    function with type '%a'; please supply type parameters \\\n+                    explicitly\"\n+                    (i + 1)\n+                    sprintf_ltype lty\n           in\n-          let substs = Array.map get_subst substs in\n+          let substs = Array.mapi get_subst substs in\n           begin\n             match beta_reduce (Semant.lval_base_id lval) lty substs with\n                 LTYPE_mono ty -> yield_ty ty"}]}