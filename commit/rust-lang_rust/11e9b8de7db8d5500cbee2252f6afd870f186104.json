{"sha": "11e9b8de7db8d5500cbee2252f6afd870f186104", "node_id": "MDY6Q29tbWl0NzI0NzEyOjExZTliOGRlN2RiOGQ1NTAwY2JlZTIyNTJmNmFmZDg3MGYxODYxMDQ=", "commit": {"author": {"name": "Mohit Agarwal", "email": "mohit@sdf.org", "date": "2016-08-24T12:13:51Z"}, "committer": {"name": "Your Name", "email": "foo@bar.com", "date": "2016-08-24T12:13:51Z"}, "message": "Update E0445 and E0454 to new error format\n\nFixes #35922.\nFixes #35930.\nPart of #35233.\n\nr? @GuillaumeGomez", "tree": {"sha": "802f29a6002b65f90be4a76973cb22d42c78fc3e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/802f29a6002b65f90be4a76973cb22d42c78fc3e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/11e9b8de7db8d5500cbee2252f6afd870f186104", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/11e9b8de7db8d5500cbee2252f6afd870f186104", "html_url": "https://github.com/rust-lang/rust/commit/11e9b8de7db8d5500cbee2252f6afd870f186104", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/11e9b8de7db8d5500cbee2252f6afd870f186104/comments", "author": {"login": "0xmohit", "id": 8176079, "node_id": "MDQ6VXNlcjgxNzYwNzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8176079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/0xmohit", "html_url": "https://github.com/0xmohit", "followers_url": "https://api.github.com/users/0xmohit/followers", "following_url": "https://api.github.com/users/0xmohit/following{/other_user}", "gists_url": "https://api.github.com/users/0xmohit/gists{/gist_id}", "starred_url": "https://api.github.com/users/0xmohit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/0xmohit/subscriptions", "organizations_url": "https://api.github.com/users/0xmohit/orgs", "repos_url": "https://api.github.com/users/0xmohit/repos", "events_url": "https://api.github.com/users/0xmohit/events{/privacy}", "received_events_url": "https://api.github.com/users/0xmohit/received_events", "type": "User", "site_admin": false}, "committer": {"login": "invalid-email-address", "id": 148100, "node_id": "MDQ6VXNlcjE0ODEwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/148100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invalid-email-address", "html_url": "https://github.com/invalid-email-address", "followers_url": "https://api.github.com/users/invalid-email-address/followers", "following_url": "https://api.github.com/users/invalid-email-address/following{/other_user}", "gists_url": "https://api.github.com/users/invalid-email-address/gists{/gist_id}", "starred_url": "https://api.github.com/users/invalid-email-address/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invalid-email-address/subscriptions", "organizations_url": "https://api.github.com/users/invalid-email-address/orgs", "repos_url": "https://api.github.com/users/invalid-email-address/repos", "events_url": "https://api.github.com/users/invalid-email-address/events{/privacy}", "received_events_url": "https://api.github.com/users/invalid-email-address/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "308824acecf902f2b6a9c1538bde0324804ba68e", "url": "https://api.github.com/repos/rust-lang/rust/commits/308824acecf902f2b6a9c1538bde0324804ba68e", "html_url": "https://github.com/rust-lang/rust/commit/308824acecf902f2b6a9c1538bde0324804ba68e"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "46469efea6bc830a7a2b8ab2e34b24d8126fea2a", "filename": "src/librustc_metadata/creader.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Flibrustc_metadata%2Fcreader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Flibrustc_metadata%2Fcreader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcreader.rs?ref=11e9b8de7db8d5500cbee2252f6afd870f186104", "patch": "@@ -101,8 +101,10 @@ fn register_native_lib(sess: &Session,\n     if name.is_empty() {\n         match span {\n             Some(span) => {\n-                span_err!(sess, span, E0454,\n-                          \"#[link(name = \\\"\\\")] given with empty name\");\n+                struct_span_err!(sess, span, E0454,\n+                                 \"#[link(name = \\\"\\\")] given with empty name\")\n+                    .span_label(span, &format!(\"empty name given\"))\n+                    .emit();\n             }\n             None => {\n                 sess.err(\"empty library name given via `-l`\");"}, {"sha": "028632ad7c006b90632cb90f681d47480019d4b6", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=11e9b8de7db8d5500cbee2252f6afd870f186104", "patch": "@@ -964,8 +964,11 @@ impl<'a, 'tcx: 'a, 'v> Visitor<'v> for SearchInterfaceForPrivateItemsVisitor<'a,\n             if !vis.is_at_least(self.required_visibility, &self.tcx.map) {\n                 if self.tcx.sess.features.borrow().pub_restricted ||\n                    self.old_error_set.contains(&trait_ref.ref_id) {\n-                    span_err!(self.tcx.sess, trait_ref.path.span, E0445,\n-                              \"private trait in public interface\");\n+                    struct_span_err!(self.tcx.sess, trait_ref.path.span, E0445,\n+                                     \"private trait in public interface\")\n+                        .span_label(trait_ref.path.span, &format!(\n+                                    \"private trait can't be public\"))\n+                        .emit();\n                 } else {\n                     self.tcx.sess.add_lint(lint::builtin::PRIVATE_IN_PUBLIC,\n                                            node_id,"}, {"sha": "7c5c862a6f812ab724520c75f9260fde6aaa5061", "filename": "src/test/compile-fail/E0445.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Ftest%2Fcompile-fail%2FE0445.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Ftest%2Fcompile-fail%2FE0445.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0445.rs?ref=11e9b8de7db8d5500cbee2252f6afd870f186104", "patch": "@@ -12,8 +12,14 @@ trait Foo {\n     fn dummy(&self) { }\n }\n \n-pub trait Bar : Foo {} //~ ERROR E0445\n-pub struct Bar2<T: Foo>(pub T); //~ ERROR E0445\n-pub fn foo<T: Foo> (t: T) {} //~ ERROR E0445\n+pub trait Bar : Foo {}\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n+pub struct Bar2<T: Foo>(pub T);\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n+pub fn foo<T: Foo> (t: T) {}\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n \n fn main() {}"}, {"sha": "39887927c885fe79ea604300065112683b57ad6f", "filename": "src/test/compile-fail/E0454.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Ftest%2Fcompile-fail%2FE0454.rs", "raw_url": "https://github.com/rust-lang/rust/raw/11e9b8de7db8d5500cbee2252f6afd870f186104/src%2Ftest%2Fcompile-fail%2FE0454.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0454.rs?ref=11e9b8de7db8d5500cbee2252f6afd870f186104", "patch": "@@ -8,7 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#[link(name = \"\")] extern {} //~ ERROR E0454\n+#[link(name = \"\")] extern {}\n+//~^ ERROR E0454\n+//~| NOTE empty name given\n \n fn main() {\n }"}]}