{"sha": "cd1f782b742f2c83d91648efae35dfd0d79cec08", "node_id": "C_kwDOAAsO6NoAKGNkMWY3ODJiNzQyZjJjODNkOTE2NDhlZmFlMzVkZmQwZDc5Y2VjMDg", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-19T22:25:18Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-11-19T22:25:18Z"}, "message": "Auto merge of #104470 - ehuss:cdb-dupe-last-command, r=jyn514\n\nDon't duplicate last cdb debuginfo test command\n\ncdb scripts interpret a blank line to mean \"repeat the last command\", similar to what happens when running the debugger from a console. The code for compiletest that constructs the debugger script was inserting a blank line between the last command and the \"quit\" command. This caused the last command to be executed twice. This can cause some confusion since the `-check` lines are expecting the output in a certain order. But printing the last command twice causes that order-assumption to fail, and that can cause confusion.\n\nThis fixes it by removing the blank line.\n\nAFAICT, gdb and lldb scripts don't have the same behavior with blank lines (and the gdb code doesn't add any blank lines anyways).", "tree": {"sha": "2af12bb1bd9329e13092b02cb03328925288670c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2af12bb1bd9329e13092b02cb03328925288670c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd1f782b742f2c83d91648efae35dfd0d79cec08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd1f782b742f2c83d91648efae35dfd0d79cec08", "html_url": "https://github.com/rust-lang/rust/commit/cd1f782b742f2c83d91648efae35dfd0d79cec08", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd1f782b742f2c83d91648efae35dfd0d79cec08/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5d82ed7a4ad94a538bb87e5016e7d5ce0bd434b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5d82ed7a4ad94a538bb87e5016e7d5ce0bd434b", "html_url": "https://github.com/rust-lang/rust/commit/c5d82ed7a4ad94a538bb87e5016e7d5ce0bd434b"}, {"sha": "425a7af9193df1d4debab5a6c4c8fa72c3290298", "url": "https://api.github.com/repos/rust-lang/rust/commits/425a7af9193df1d4debab5a6c4c8fa72c3290298", "html_url": "https://github.com/rust-lang/rust/commit/425a7af9193df1d4debab5a6c4c8fa72c3290298"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "2227de3b377659530471d21b43a191869fc60566", "filename": "src/test/debuginfo/function-names.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cd1f782b742f2c83d91648efae35dfd0d79cec08/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd1f782b742f2c83d91648efae35dfd0d79cec08/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Ffunction-names.rs?ref=cd1f782b742f2c83d91648efae35dfd0d79cec08", "patch": "@@ -76,9 +76,9 @@\n // Const generic parameter\n // cdb-command:x a!function_names::const_generic_fn*\n // cdb-check:[...] a!function_names::const_generic_fn_bool<false> (void)\n-// cdb-check:[...] a!function_names::const_generic_fn_non_int<CONST$6348c650c7b26618> (void)\n // cdb-check:[...] a!function_names::const_generic_fn_unsigned_int<14> (void)\n // cdb-check:[...] a!function_names::const_generic_fn_signed_int<-7> (void)\n+// cdb-check:[...] a!function_names::const_generic_fn_non_int<CONST$6348c650c7b26618> (void)\n \n #![allow(unused_variables)]\n #![feature(omit_gdb_pretty_printer_section)]"}, {"sha": "e07b71a7c47802b07e5be842899be0f3706cb896", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cd1f782b742f2c83d91648efae35dfd0d79cec08/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd1f782b742f2c83d91648efae35dfd0d79cec08/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=cd1f782b742f2c83d91648efae35dfd0d79cec08", "patch": "@@ -711,7 +711,7 @@ impl<'test> TestCx<'test> {\n             script_str.push_str(\"\\n\");\n         }\n \n-        script_str.push_str(\"\\nqq\\n\"); // Quit the debugger (including remote debugger, if any)\n+        script_str.push_str(\"qq\\n\"); // Quit the debugger (including remote debugger, if any)\n \n         // Write the script into a file\n         debug!(\"script_str = {}\", script_str);"}]}