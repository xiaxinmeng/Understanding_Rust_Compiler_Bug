{"sha": "ffb2f12ed89213f96561dfbece0751ac870e2c40", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmYjJmMTJlZDg5MjEzZjk2NTYxZGZiZWNlMDc1MWFjODcwZTJjNDA=", "commit": {"author": {"name": "Keegan McAllister", "email": "kmcallister@mozilla.com", "date": "2014-05-25T04:15:16Z"}, "committer": {"name": "Keegan McAllister", "email": "kmcallister@mozilla.com", "date": "2014-06-09T21:29:30Z"}, "message": "Use phase(plugin) in bootstrap crates\n\nDo this to avoid warnings on post-stage0 builds.", "tree": {"sha": "58e38537d628abdb2a9a3e2cfb6e6b84817a7ead", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/58e38537d628abdb2a9a3e2cfb6e6b84817a7ead"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ffb2f12ed89213f96561dfbece0751ac870e2c40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ffb2f12ed89213f96561dfbece0751ac870e2c40", "html_url": "https://github.com/rust-lang/rust/commit/ffb2f12ed89213f96561dfbece0751ac870e2c40", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ffb2f12ed89213f96561dfbece0751ac870e2c40/comments", "author": {"login": "kmcallister", "id": 444997, "node_id": "MDQ6VXNlcjQ0NDk5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmcallister", "html_url": "https://github.com/kmcallister", "followers_url": "https://api.github.com/users/kmcallister/followers", "following_url": "https://api.github.com/users/kmcallister/following{/other_user}", "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions", "organizations_url": "https://api.github.com/users/kmcallister/orgs", "repos_url": "https://api.github.com/users/kmcallister/repos", "events_url": "https://api.github.com/users/kmcallister/events{/privacy}", "received_events_url": "https://api.github.com/users/kmcallister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kmcallister", "id": 444997, "node_id": "MDQ6VXNlcjQ0NDk5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/444997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmcallister", "html_url": "https://github.com/kmcallister", "followers_url": "https://api.github.com/users/kmcallister/followers", "following_url": "https://api.github.com/users/kmcallister/following{/other_user}", "gists_url": "https://api.github.com/users/kmcallister/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmcallister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmcallister/subscriptions", "organizations_url": "https://api.github.com/users/kmcallister/orgs", "repos_url": "https://api.github.com/users/kmcallister/repos", "events_url": "https://api.github.com/users/kmcallister/events{/privacy}", "received_events_url": "https://api.github.com/users/kmcallister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d15c6749c30d9077c6e12af3be64c5f68fafcff", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d15c6749c30d9077c6e12af3be64c5f68fafcff", "html_url": "https://github.com/rust-lang/rust/commit/6d15c6749c30d9077c6e12af3be64c5f68fafcff"}], "stats": {"total": 116, "additions": 98, "deletions": 18}, "files": [{"sha": "de0ca4971f5c2ba085bd1185dcfa5ed6f3f3d38f", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -18,11 +18,17 @@\n \n extern crate test;\n extern crate getopts;\n-#[phase(link, syntax)]\n-extern crate log;\n extern crate green;\n extern crate rustuv;\n \n+#[cfg(stage0)]\n+#[phase(syntax, link)]\n+extern crate log;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate log;\n+\n extern crate regex;\n \n use std::os;"}, {"sha": "7e2c9a75fad0d3eee0b23ecb3bb5de6dcc776302", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -70,8 +70,14 @@\n #![no_std]\n #![feature(phase)]\n \n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate core;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate core;\n+\n extern crate libc;\n \n \n@@ -80,8 +86,10 @@ extern crate libc;\n #[cfg(test)] extern crate debug;\n #[cfg(test)] extern crate sync;\n #[cfg(test)] extern crate native;\n-#[cfg(test)] #[phase(syntax, link)] extern crate std;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate std;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate std;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n // Heaps provided for low-level allocation strategies\n "}, {"sha": "a114755a0ed91a3ac011fd8b6cc8020e8ef3b89c", "filename": "src/libcollections/lib.rs", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibcollections%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibcollections%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -23,14 +23,24 @@\n #![feature(macro_rules, managed_boxes, default_type_params, phase, globs)]\n #![no_std]\n \n-#[phase(syntax, link)] extern crate core;\n extern crate alloc;\n \n+#[cfg(stage0)]\n+#[phase(syntax, link)]\n+extern crate core;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate core;\n+\n #[cfg(test)] extern crate native;\n #[cfg(test)] extern crate test;\n #[cfg(test)] extern crate debug;\n-#[cfg(test)] #[phase(syntax, link)] extern crate std;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate std;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate std;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n use core::prelude::*;\n "}, {"sha": "8d8fe8ffe8cfe404c10aa577d9cd0f4207bc3cc3", "filename": "src/libflate/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibflate%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibflate%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibflate%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -28,7 +28,8 @@ Simple [DEFLATE][def]-based compression. This is a wrapper around the\n #![feature(phase)]\n #![deny(deprecated_owned_vector)]\n \n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n extern crate libc;\n "}, {"sha": "dec62265516fdb5da21e4285641a8b105300b9e8", "filename": "src/libgetopts/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibgetopts%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibgetopts%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibgetopts%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -91,7 +91,8 @@\n #![deny(deprecated_owned_vector)]\n \n #[cfg(test)] extern crate debug;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n use std::cmp::PartialEq;\n use std::result::{Err, Ok};"}, {"sha": "1f7216fc1a37d9e05b6270cf121703edc3e1af3f", "filename": "src/librand/lib.rs", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrand%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrand%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrand%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -28,13 +28,28 @@\n #![no_std]\n #![experimental]\n \n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate core;\n \n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate core;\n+\n+#[cfg(test, stage0)]\n+#[phase(syntax, link)] extern crate std;\n+\n+#[cfg(test, stage0)]\n+#[phase(syntax, link)] extern crate log;\n+\n+#[cfg(test, not(stage0))]\n+#[phase(plugin, link)] extern crate std;\n+\n+#[cfg(test, not(stage0))]\n+#[phase(plugin, link)] extern crate log;\n+\n #[cfg(test)] extern crate native;\n #[cfg(test)] extern crate debug;\n-#[cfg(test)] #[phase(syntax, link)] extern crate std;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n \n use core::prelude::*;\n "}, {"sha": "bdbb1a98ac5a4fc02ef03c16b25a81642727894e", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -42,9 +42,14 @@ extern crate sync;\n extern crate syntax;\n extern crate time;\n \n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate log;\n \n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate log;\n+\n pub mod middle {\n     pub mod def;\n     pub mod trans;"}, {"sha": "05875f59fbe1852bb4da502a1cdba1f47aceeb71", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -19,15 +19,21 @@\n extern crate debug;\n extern crate getopts;\n extern crate libc;\n-#[phase(syntax, link)]\n-extern crate log;\n extern crate rustc;\n extern crate serialize;\n extern crate sync;\n extern crate syntax;\n extern crate testing = \"test\";\n extern crate time;\n \n+#[cfg(stage0)]\n+#[phase(syntax, link)]\n+extern crate log;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate log;\n+\n use std::io;\n use std::io::{File, MemWriter};\n use std::str;"}, {"sha": "bb57f5c038c0323c4f111c814f37d427f4dd2f3c", "filename": "src/librustrt/lib.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustrt%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibrustrt%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustrt%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -19,16 +19,24 @@\n #![no_std]\n #![experimental]\n \n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate core;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate core;\n+\n extern crate alloc;\n extern crate libc;\n extern crate collections;\n \n #[cfg(test)] extern crate realrustrt = \"rustrt\";\n #[cfg(test)] extern crate test;\n #[cfg(test)] extern crate native;\n-#[cfg(test)] #[phase(syntax, link)] extern crate std;\n+\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate std;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate std;\n \n pub use self::util::{Stdio, Stdout, Stderr};\n pub use self::unwind::{begin_unwind, begin_unwind_fmt};"}, {"sha": "33d20ed7bcd0fe35313719066df22d713da674e1", "filename": "src/libserialize/lib.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibserialize%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibserialize%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -27,9 +27,15 @@ Core encoding and decoding interfaces.\n // test harness access\n #[cfg(test)]\n extern crate test;\n+\n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate log;\n \n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate log;\n+\n pub use self::serialize::{Decoder, Encoder, Decodable, Encodable,\n                           DecoderHelpers, EncoderHelpers};\n "}, {"sha": "85813c02d5535be8c25e49515123caf37260e805", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -119,7 +119,8 @@\n #[cfg(test)] extern crate native;\n #[cfg(test)] extern crate green;\n #[cfg(test)] extern crate debug;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n extern crate alloc;\n extern crate core;"}, {"sha": "44d17e6fb95ce13bb7d446aa8f3e8e7b556f7119", "filename": "src/libsync/lib.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibsync%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibsync%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsync%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -25,9 +25,12 @@\n \n #![deny(missing_doc)]\n \n-#[cfg(test)]\n+#[cfg(test, stage0)]\n #[phase(syntax, link)] extern crate log;\n \n+#[cfg(test, not(stage0))]\n+#[phase(plugin, link)] extern crate log;\n+\n extern crate alloc;\n \n pub use comm::{DuplexStream, duplex};"}, {"sha": "754518f5fea3192f8cd7239757b63f8f38706a89", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -32,8 +32,15 @@ This API is completely unstable and subject to change.\n \n extern crate serialize;\n extern crate term;\n+\n+#[cfg(stage0)]\n #[phase(syntax, link)]\n extern crate log;\n+\n+#[cfg(not(stage0))]\n+#[phase(plugin, link)]\n+extern crate log;\n+\n extern crate fmt_macros;\n extern crate debug;\n "}, {"sha": "76118f642abe0480722ffed527cd58ac3aeb7640", "filename": "src/libterm/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibterm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibterm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibterm%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -52,7 +52,8 @@\n \n #![deny(missing_doc)]\n \n-#[phase(syntax, link)] extern crate log;\n+#[cfg(stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(not(stage0))] #[phase(plugin, link)] extern crate log;\n \n pub use terminfo::TerminfoTerminal;\n #[cfg(windows)]"}, {"sha": "f2af59433358e44bc1cfeba8f9fa91b0d87aa169", "filename": "src/libtime/lib.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibtime%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb2f12ed89213f96561dfbece0751ac870e2c40/src%2Flibtime%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtime%2Flib.rs?ref=ffb2f12ed89213f96561dfbece0751ac870e2c40", "patch": "@@ -23,7 +23,9 @@\n #![deny(deprecated_owned_vector)]\n \n #[cfg(test)] extern crate debug;\n-#[cfg(test)] #[phase(syntax, link)] extern crate log;\n+\n+#[cfg(test, stage0)] #[phase(syntax, link)] extern crate log;\n+#[cfg(test, not(stage0))] #[phase(plugin, link)] extern crate log;\n \n extern crate serialize;\n extern crate libc;"}]}