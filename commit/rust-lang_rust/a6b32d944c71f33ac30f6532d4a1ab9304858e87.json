{"sha": "a6b32d944c71f33ac30f6532d4a1ab9304858e87", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2YjMyZDk0NGM3MWYzM2FjMzBmNjUzMmQ0YTFhYjkzMDQ4NThlODc=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-22T21:04:14Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-05-22T21:04:32Z"}, "message": "Fix breaking changes from introducing AnonConst", "tree": {"sha": "9bb1723ae9e1363a36036519396bc7ddda1d1ead", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9bb1723ae9e1363a36036519396bc7ddda1d1ead"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6b32d944c71f33ac30f6532d4a1ab9304858e87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6b32d944c71f33ac30f6532d4a1ab9304858e87", "html_url": "https://github.com/rust-lang/rust/commit/a6b32d944c71f33ac30f6532d4a1ab9304858e87", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6b32d944c71f33ac30f6532d4a1ab9304858e87/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c7c770c80896555aa8114afb8586fdfcc9f7d9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c7c770c80896555aa8114afb8586fdfcc9f7d9a", "html_url": "https://github.com/rust-lang/rust/commit/6c7c770c80896555aa8114afb8586fdfcc9f7d9a"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "2f5e53ef06275dbc8d7bddfdd2b9ed9c3a5e7bc4", "filename": "src/expr.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=a6b32d944c71f33ac30f6532d4a1ab9304858e87", "patch": "@@ -228,7 +228,7 @@ pub fn format_expr(\n         }\n         ast::ExprKind::Repeat(ref expr, ref repeats) => rewrite_pair(\n             &**expr,\n-            &**repeats,\n+            &*repeats.value,\n             PairParts::new(\"[\", \"; \", \"]\"),\n             context,\n             shape,\n@@ -1469,8 +1469,9 @@ fn is_simple_expr(expr: &ast::Expr) -> bool {\n         | ast::ExprKind::Field(ref expr, _)\n         | ast::ExprKind::Try(ref expr)\n         | ast::ExprKind::Unary(_, ref expr) => is_simple_expr(expr),\n-        ast::ExprKind::Index(ref lhs, ref rhs) | ast::ExprKind::Repeat(ref lhs, ref rhs) => {\n-            is_simple_expr(lhs) && is_simple_expr(rhs)\n+        ast::ExprKind::Index(ref lhs, ref rhs) => is_simple_expr(lhs) && is_simple_expr(rhs),\n+        ast::ExprKind::Repeat(ref lhs, ref rhs) => {\n+            is_simple_expr(lhs) && is_simple_expr(&*rhs.value)\n         }\n         _ => false,\n     }"}, {"sha": "345d60e35177a137892cf4023e653306ed1bb2e1", "filename": "src/items.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=a6b32d944c71f33ac30f6532d4a1ab9304858e87", "patch": "@@ -572,7 +572,7 @@ impl<'a> FmtVisitor<'a> {\n             ast::VariantData::Unit(..) => {\n                 if let Some(ref expr) = field.node.disr_expr {\n                     let lhs = format!(\"{} =\", field.node.ident.name);\n-                    rewrite_assign_rhs(&context, lhs, &**expr, shape)?\n+                    rewrite_assign_rhs(&context, lhs, &*expr.value, shape)?\n                 } else {\n                     field.node.ident.name.to_string()\n                 }"}, {"sha": "46d48e727634fb78f383f50d3fcbd7afd3d7368b", "filename": "src/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6b32d944c71f33ac30f6532d4a1ab9304858e87/src%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftypes.rs?ref=a6b32d944c71f33ac30f6532d4a1ab9304858e87", "patch": "@@ -656,7 +656,7 @@ impl Rewrite for ast::Ty {\n             }\n             ast::TyKind::Array(ref ty, ref repeats) => rewrite_pair(\n                 &**ty,\n-                &**repeats,\n+                &*repeats.value,\n                 PairParts::new(\"[\", \"; \", \"]\"),\n                 context,\n                 shape,"}]}