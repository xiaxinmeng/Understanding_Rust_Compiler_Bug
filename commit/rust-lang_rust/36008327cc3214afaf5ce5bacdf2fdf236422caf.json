{"sha": "36008327cc3214afaf5ce5bacdf2fdf236422caf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2MDA4MzI3Y2MzMjE0YWZhZjVjZTViYWNkZjJmZGYyMzY0MjJjYWY=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-07-05T23:10:29Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2019-07-07T21:22:07Z"}, "message": "Address review comments", "tree": {"sha": "2ba7fe18af0695272651e5d5a2a596eacc2755a5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2ba7fe18af0695272651e5d5a2a596eacc2755a5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36008327cc3214afaf5ce5bacdf2fdf236422caf", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl0iYn8ACgkQtAh+UQ6Y\nsWTK2A//TgK0nkW+eetwqJ/LlQPMA9BStkCvfiV8qpAVpX3yFZ/YEvgQdUxqOCXK\nGfmk8PrzoaEuvlMhpF2oCAfxqlpFTcZOxFyiF9XxocUDX/tovcONlp1jZEjUkozt\na+gaKtdqiQgzWMPhHaG3v8U7b03ta3+uAA3nxRxKiweTjCZynBxgWF+n8nbg7Hk1\n7ftelyWhOI/zPzDKsy7HdG7ftBYCwAqdA0WjMTQiUBsUbf3c7UHDO97cRRZ0u3lN\n7N1mWBaNayD+vhXL8+YkA8naG5IHrLmwj1cPz54M51PcDfyljd3uH2siT+ffuCNY\n7WG2sTh2OEM96am38EAt/Ml0vIeCKXRkB+AvDODWy1LD7pHWU2tW19MOYhcxw/aq\na/yKmMM6WJrnqP/KcxHjMu3DCOLyQrZFPP25E3Hl4iwqSQqCuybpLasqnIiDffKs\nAznIFEFt5W0h3Z4sR4KOzCiHay+I40Md7GBtqVlSz3H7f2xE9O7gGCNZQWp3ApoY\nROtIEWkz02SHweBXRewn4sLH9r5A0QIJyraIdb5fJkZMOaVZvgEWRnOOIzeGhxpb\nUMar6OCE/5EKEVdMzvrFcyzVaZ7S34LNkDMYNK7Yew+XCp3qyirsn6KDV167zcCo\nYr7zNIr1WA71gUS8kxo80dCIbDc5JOf3D8g9/iFjSw84GbaqczU=\n=IEze\n-----END PGP SIGNATURE-----", "payload": "tree 2ba7fe18af0695272651e5d5a2a596eacc2755a5\nparent 2ab8d618823a51f347407cf7299110ad42f26616\nauthor Aaron Hill <aa1ronham@gmail.com> 1562368229 -0400\ncommitter Aaron Hill <aa1ronham@gmail.com> 1562534527 -0400\n\nAddress review comments\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36008327cc3214afaf5ce5bacdf2fdf236422caf", "html_url": "https://github.com/rust-lang/rust/commit/36008327cc3214afaf5ce5bacdf2fdf236422caf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36008327cc3214afaf5ce5bacdf2fdf236422caf/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ab8d618823a51f347407cf7299110ad42f26616", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ab8d618823a51f347407cf7299110ad42f26616", "html_url": "https://github.com/rust-lang/rust/commit/2ab8d618823a51f347407cf7299110ad42f26616"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "1194872c0afd484d3c8449888fcd4873704475cb", "filename": "src/librustc_mir/borrow_check/nll/type_check/mod.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "patch": "@@ -1280,14 +1280,14 @@ impl<'a, 'tcx> TypeChecker<'a, 'tcx> {\n                             concrete_is_opaque\n                         );\n \n-                        // concrete_is_opaque is 'true' when we're using an existential\n-                        // type without 'revelaing' it. For example, code like this:\n+                        // concrete_is_opaque is `true` when we're using an existential\n+                        // type without 'revealing' it. For example, code like this:\n                         //\n                         // existential type Foo: Debug;\n                         // fn foo1() -> Foo { ... }\n                         // fn foo2() -> Foo { foo1() }\n                         //\n-                        // In 'foo2', we're not revealing the type of 'Foo' - we're\n+                        // In `foo2`, we're not revealing the type of `Foo` - we're\n                         // just treating it as the opaque type.\n                         //\n                         // When this occurs, we do *not* want to try to equate"}, {"sha": "831f9daa52d91f966e443560b2aa9300ec0f8edb", "filename": "src/librustc_typeck/check/writeback.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "patch": "@@ -587,6 +587,11 @@ impl<'cx, 'tcx> WritebackCx<'cx, 'tcx> {\n             }\n \n             if !opaque_defn.substs.has_local_value() {\n+                // We only want to add an entry into `concrete_existential_types`\n+                // if we actually found a defining usage of this existential type.\n+                // Otherwise, we do nothing - we'll either find a defining usage\n+                // in some other location, or we'll end up emitting an error due\n+                // to the lack of defining usage\n                 if !skip_add {\n                     let new = ty::ResolvedOpaqueTy {\n                         concrete_type: definition_ty,"}, {"sha": "55920b85dd73025d6f31a610e07b446936c2760c", "filename": "src/test/ui/existential_types/existential_type_const.rs", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.rs?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "patch": "@@ -1,3 +1,5 @@\n+// check-pass\n+\n #![feature(existential_type)]\n #![feature(impl_trait_in_bindings)]\n //~^ WARN the feature `impl_trait_in_bindings` is incomplete and may cause the compiler to crash", "previous_filename": "src/test/run-pass/existential_type_const.rs"}, {"sha": "b6d83fb170362e87ba312485a504b6e8f9f0ee78", "filename": "src/test/ui/existential_types/existential_type_const.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_const.stderr?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "previous_filename": "src/test/run-pass/existential_type_const.stderr"}, {"sha": "6f22eef2849855f21a362bc8d136c6e102be0d31", "filename": "src/test/ui/existential_types/existential_type_fns.rs", "status": "renamed", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_fns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_fns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_fns.rs?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "patch": "@@ -1,3 +1,5 @@\n+// check-pass\n+\n #![feature(existential_type)]\n \n // Regression test for issue #61863", "previous_filename": "src/test/run-pass/existential_type_fns.rs"}, {"sha": "0f134a528979c41a0ac411bacd35797a4f63ae5f", "filename": "src/test/ui/existential_types/existential_type_tuple.rs", "status": "renamed", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_tuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36008327cc3214afaf5ce5bacdf2fdf236422caf/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_tuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fexistential_types%2Fexistential_type_tuple.rs?ref=36008327cc3214afaf5ce5bacdf2fdf236422caf", "patch": "@@ -1,5 +1,6 @@\n-#![feature(existential_type)]\n+// check-pass\n \n+#![feature(existential_type)]\n #![allow(dead_code)]\n \n pub trait MyTrait {}", "previous_filename": "src/test/run-pass/existential_type_tuple.rs"}]}