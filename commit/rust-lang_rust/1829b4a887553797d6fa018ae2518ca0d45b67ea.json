{"sha": "1829b4a887553797d6fa018ae2518ca0d45b67ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4MjliNGE4ODc1NTM3OTdkNmZhMDE4YWUyNTE4Y2EwZDQ1YjY3ZWE=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-10-22T18:34:46Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2020-10-23T15:06:41Z"}, "message": "Add test case for different `impl Future`s", "tree": {"sha": "ea145c29302d4d1ad351ba0cc26b2a6545282726", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea145c29302d4d1ad351ba0cc26b2a6545282726"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1829b4a887553797d6fa018ae2518ca0d45b67ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1829b4a887553797d6fa018ae2518ca0d45b67ea", "html_url": "https://github.com/rust-lang/rust/commit/1829b4a887553797d6fa018ae2518ca0d45b67ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1829b4a887553797d6fa018ae2518ca0d45b67ea/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a0227bc49397879b240373d84b2a80e05569724", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a0227bc49397879b240373d84b2a80e05569724", "html_url": "https://github.com/rust-lang/rust/commit/3a0227bc49397879b240373d84b2a80e05569724"}], "stats": {"total": 39, "additions": 36, "deletions": 3}, "files": [{"sha": "81e6abf7d7ba4e20ac133d0dbf3b4f9158ca7e81", "filename": "src/test/ui/suggestions/match-prev-arm-needing-semi.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1829b4a887553797d6fa018ae2518ca0d45b67ea/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1829b4a887553797d6fa018ae2518ca0d45b67ea/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.rs?ref=1829b4a887553797d6fa018ae2518ca0d45b67ea", "patch": "@@ -15,6 +15,7 @@ fn extra_semicolon() {\n \n async fn async_dummy() {} //~ NOTE the `Output` of this `async fn`'s found opaque type\n async fn async_dummy2() {} //~ NOTE the `Output` of this `async fn`'s found opaque type\n+//~^ NOTE the `Output` of this `async fn`'s found opaque type\n \n async fn async_extra_semicolon_same() {\n     let _ = match true { //~ NOTE `match` arms have incompatible types\n@@ -42,4 +43,14 @@ async fn async_extra_semicolon_different() {\n     };\n }\n \n+async fn async_different_futures() {\n+    let _ = match true { //~ NOTE `match` arms have incompatible types\n+        true => async_dummy(), //~ NOTE this is found to be\n+        false => async_dummy2(), //~ ERROR `match` arms have incompatible types\n+        //~^ NOTE expected opaque type, found a different opaque type\n+        //~| NOTE expected type `impl Future`\n+        //~| NOTE distinct uses of `impl Trait` result in different opaque types\n+    };\n+}\n+\n fn main() {}"}, {"sha": "8f4b860589efd075de3581c5d57dcc33e100fd3f", "filename": "src/test/ui/suggestions/match-prev-arm-needing-semi.stderr", "status": "modified", "additions": 25, "deletions": 3, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/1829b4a887553797d6fa018ae2518ca0d45b67ea/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1829b4a887553797d6fa018ae2518ca0d45b67ea/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-prev-arm-needing-semi.stderr?ref=1829b4a887553797d6fa018ae2518ca0d45b67ea", "patch": "@@ -1,5 +1,5 @@\n error[E0308]: `match` arms have incompatible types\n-  --> $DIR/match-prev-arm-needing-semi.rs:25:18\n+  --> $DIR/match-prev-arm-needing-semi.rs:26:18\n    |\n LL |   async fn async_dummy() {}\n    |                          - the `Output` of this `async fn`'s found opaque type\n@@ -30,7 +30,7 @@ LL |         false => async_dummy().await,\n    |                               ^^^^^^\n \n error[E0308]: `match` arms have incompatible types\n-  --> $DIR/match-prev-arm-needing-semi.rs:38:18\n+  --> $DIR/match-prev-arm-needing-semi.rs:39:18\n    |\n LL |   async fn async_dummy2() {}\n    |                           - the `Output` of this `async fn`'s found opaque type\n@@ -60,6 +60,28 @@ help: consider `await`ing on the `Future`\n LL |         false => async_dummy2().await,\n    |                                ^^^^^^\n \n+error[E0308]: `match` arms have incompatible types\n+  --> $DIR/match-prev-arm-needing-semi.rs:49:18\n+   |\n+LL |   async fn async_dummy2() {}\n+   |                           - the `Output` of this `async fn`'s found opaque type\n+...\n+LL |       let _ = match true {\n+   |  _____________-\n+LL | |         true => async_dummy(),\n+   | |                 ------------- this is found to be of type `impl Future`\n+LL | |         false => async_dummy2(),\n+   | |                  ^^^^^^^^^^^^^^ expected opaque type, found a different opaque type\n+LL | |\n+LL | |\n+LL | |\n+LL | |     };\n+   | |_____- `match` arms have incompatible types\n+   |\n+   = note:     expected type `impl Future` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:16:24>)\n+           found opaque type `impl Future` (opaque type at <$DIR/match-prev-arm-needing-semi.rs:17:25>)\n+   = note: distinct uses of `impl Trait` result in different opaque types\n+\n error[E0308]: `match` arms have incompatible types\n   --> $DIR/match-prev-arm-needing-semi.rs:11:18\n    |\n@@ -79,6 +101,6 @@ LL | |\n LL | |     };\n    | |_____- `match` arms have incompatible types\n \n-error: aborting due to 3 previous errors\n+error: aborting due to 4 previous errors\n \n For more information about this error, try `rustc --explain E0308`."}]}