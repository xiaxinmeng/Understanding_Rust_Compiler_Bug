{"sha": "6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkMDc4NzRlODgzYWU0MzM0YjQyZWYzYWIwNGNjM2Y1MmVlNzExZWU=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-09-24T23:53:33Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2019-09-24T23:53:33Z"}, "message": "Don't emit explain with json short messages.", "tree": {"sha": "dd360aaa4aa02671cb8462bec638f1854a4c556f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd360aaa4aa02671cb8462bec638f1854a4c556f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "html_url": "https://github.com/rust-lang/rust/commit/6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d07874e883ae4334b42ef3ab04cc3f52ee711ee/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6ef275e6c3cb1384ec78128eceeb4963ff788dca", "url": "https://api.github.com/repos/rust-lang/rust/commits/6ef275e6c3cb1384ec78128eceeb4963ff788dca", "html_url": "https://github.com/rust-lang/rust/commit/6ef275e6c3cb1384ec78128eceeb4963ff788dca"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "2423e1070fc3eb432cd5abf684df8f2365154375", "filename": "src/libsyntax/json.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6d07874e883ae4334b42ef3ab04cc3f52ee711ee/src%2Flibsyntax%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6d07874e883ae4334b42ef3ab04cc3f52ee711ee/src%2Flibsyntax%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fjson.rs?ref=6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "patch": "@@ -112,6 +112,13 @@ impl Emitter for JsonEmitter {\n             panic!(\"failed to print notification: {:?}\", e);\n         }\n     }\n+\n+    fn should_show_explain(&self) -> bool {\n+        match self.json_rendered {\n+            HumanReadableErrorType::Short(_) => false,\n+            _ => true,\n+        }\n+    }\n }\n \n // The following data types are provided just for serialisation."}, {"sha": "d9f68023ce76d60c91f1a330e8d196050cc3e1b6", "filename": "src/test/ui/json-short.stderr", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6d07874e883ae4334b42ef3ab04cc3f52ee711ee/src%2Ftest%2Fui%2Fjson-short.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6d07874e883ae4334b42ef3ab04cc3f52ee711ee/src%2Ftest%2Fui%2Fjson-short.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fjson-short.stderr?ref=6d07874e883ae4334b42ef3ab04cc3f52ee711ee", "patch": "@@ -15,5 +15,3 @@ started: https://doc.rust-lang.org/book/\n \"}\n {\"message\":\"aborting due to previous error\",\"code\":null,\"level\":\"error\",\"spans\":[],\"children\":[],\"rendered\":\"error: aborting due to previous error\n \"}\n-{\"message\":\"For more information about this error, try `rustc --explain E0601`.\",\"code\":null,\"level\":\"failure-note\",\"spans\":[],\"children\":[],\"rendered\":\"For more information about this error, try `rustc --explain E0601`.\n-\"}"}]}