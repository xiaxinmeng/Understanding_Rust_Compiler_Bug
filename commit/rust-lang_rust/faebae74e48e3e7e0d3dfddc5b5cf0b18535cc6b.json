{"sha": "faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhZWJhZTc0ZTQ4ZTNlN2UwZDNkZmRkYzViNWNmMGIxODUzNWNjNmI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-31T09:13:02Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2018-08-31T09:13:02Z"}, "message": "fix tests", "tree": {"sha": "ca1868a06529489514b0dd8dd1e2be563c14f657", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ca1868a06529489514b0dd8dd1e2be563c14f657"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b", "html_url": "https://github.com/rust-lang/rust/commit/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d999f4b56803b613dcf354862e1db4b5d2a8a8d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/d999f4b56803b613dcf354862e1db4b5d2a8a8d0", "html_url": "https://github.com/rust-lang/rust/commit/d999f4b56803b613dcf354862e1db4b5d2a8a8d0"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "887e13fa36257bff94942304be2742c7a9b0f1f3", "filename": "crates/libanalysis/tests/tests.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b/crates%2Flibanalysis%2Ftests%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b/crates%2Flibanalysis%2Ftests%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Flibanalysis%2Ftests%2Ftests.rs?ref=faebae74e48e3e7e0d3dfddc5b5cf0b18535cc6b", "patch": "@@ -5,7 +5,7 @@ extern crate test_utils;\n use std::path::{Path};\n \n use relative_path::RelativePath;\n-use libanalysis::{AnalysisHost, FileId, FileResolver};\n+use libanalysis::{AnalysisHost, FileId, FileResolver, JobHandle};\n use test_utils::assert_eq_dbg;\n \n struct FileMap(&'static [(u32, &'static str)]);\n@@ -45,7 +45,8 @@ fn test_resolve_module() {\n         (1, \"/lib.rs\"),\n         (2, \"/foo.rs\"),\n     ]));\n-    let symbols = snap.approximately_resolve_symbol(FileId(1), 4.into());\n+    let (_handle, token) = JobHandle::new();\n+    let symbols = snap.approximately_resolve_symbol(FileId(1), 4.into(), &token);\n     assert_eq_dbg(\n         r#\"[(FileId(2), FileSymbol { name: \"foo\", node_range: [0; 0), kind: MODULE })]\"#,\n         &symbols,\n@@ -55,7 +56,7 @@ fn test_resolve_module() {\n         (1, \"/lib.rs\"),\n         (2, \"/foo/mod.rs\")\n     ]));\n-    let symbols = snap.approximately_resolve_symbol(FileId(1), 4.into());\n+    let symbols = snap.approximately_resolve_symbol(FileId(1), 4.into(), &token);\n     assert_eq_dbg(\n         r#\"[(FileId(2), FileSymbol { name: \"foo\", node_range: [0; 0), kind: MODULE })]\"#,\n         &symbols,"}]}