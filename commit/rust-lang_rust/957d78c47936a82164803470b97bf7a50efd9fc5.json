{"sha": "957d78c47936a82164803470b97bf7a50efd9fc5", "node_id": "C_kwDOAAsO6NoAKDk1N2Q3OGM0NzkzNmE4MjE2NDgwMzQ3MGI5N2JmN2E1MGVmZDlmYzU", "commit": {"author": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-13T15:40:22Z"}, "committer": {"name": "bjorn3", "email": "17426603+bjorn3@users.noreply.github.com", "date": "2023-01-13T15:40:22Z"}, "message": "Fetch all cargo dependencies in ./y.rs prepare", "tree": {"sha": "eae1abf140062522fdbde936d1b6b6f975c788f6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eae1abf140062522fdbde936d1b6b6f975c788f6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/957d78c47936a82164803470b97bf7a50efd9fc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/957d78c47936a82164803470b97bf7a50efd9fc5", "html_url": "https://github.com/rust-lang/rust/commit/957d78c47936a82164803470b97bf7a50efd9fc5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/957d78c47936a82164803470b97bf7a50efd9fc5/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a89507d7c4fa7d8cfa87872578cc833d52f88f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a89507d7c4fa7d8cfa87872578cc833d52f88f8", "html_url": "https://github.com/rust-lang/rust/commit/1a89507d7c4fa7d8cfa87872578cc833d52f88f8"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "3f93c14a0fb49eb9529dec11e0ce8996d7f57af9", "filename": "build_system/abi_cafe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fabi_cafe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fabi_cafe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fabi_cafe.rs?ref=957d78c47936a82164803470b97bf7a50efd9fc5", "patch": "@@ -10,7 +10,7 @@ use super::SysrootKind;\n pub(crate) static ABI_CAFE_REPO: GitRepo =\n     GitRepo::github(\"Gankra\", \"abi-cafe\", \"4c6dc8c9c687e2b3a760ff2176ce236872b37212\", \"abi-cafe\");\n \n-static ABI_CAFE: CargoProject = CargoProject::new(&ABI_CAFE_REPO.source_dir(), \"abi_cafe\");\n+pub(crate) static ABI_CAFE: CargoProject = CargoProject::new(&ABI_CAFE_REPO.source_dir(), \"abi_cafe\");\n \n pub(crate) fn run(\n     channel: &str,"}, {"sha": "6ab39e48f214f11febd63b3c0a94e3981c3690e8", "filename": "build_system/build_backend.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fbuild_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fbuild_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fbuild_backend.rs?ref=957d78c47936a82164803470b97bf7a50efd9fc5", "patch": "@@ -5,7 +5,7 @@ use super::path::{Dirs, RelPath};\n use super::rustc_info::get_file_name;\n use super::utils::{is_ci, CargoProject, Compiler};\n \n-static CG_CLIF: CargoProject = CargoProject::new(&RelPath::SOURCE, \"cg_clif\");\n+pub(crate) static CG_CLIF: CargoProject = CargoProject::new(&RelPath::SOURCE, \"cg_clif\");\n \n pub(crate) fn build_backend(\n     dirs: &Dirs,"}, {"sha": "c7d80789f8a2e2cc7398610baed5e295c34f4b75", "filename": "build_system/build_sysroot.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fbuild_sysroot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fbuild_sysroot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fbuild_sysroot.rs?ref=957d78c47936a82164803470b97bf7a50efd9fc5", "patch": "@@ -153,7 +153,7 @@ pub(crate) static ORIG_BUILD_SYSROOT: RelPath = RelPath::SOURCE.join(\"build_sysr\n pub(crate) static BUILD_SYSROOT: RelPath = RelPath::DOWNLOAD.join(\"sysroot\");\n pub(crate) static SYSROOT_RUSTC_VERSION: RelPath = BUILD_SYSROOT.join(\"rustc_version\");\n pub(crate) static SYSROOT_SRC: RelPath = BUILD_SYSROOT.join(\"sysroot_src\");\n-static STANDARD_LIBRARY: CargoProject = CargoProject::new(&BUILD_SYSROOT, \"build_sysroot\");\n+pub(crate) static STANDARD_LIBRARY: CargoProject = CargoProject::new(&BUILD_SYSROOT, \"build_sysroot\");\n \n fn build_clif_sysroot_for_triple(\n     dirs: &Dirs,"}, {"sha": "4e898b30b7cce6a0e4ae3463dcf019da99cd85d0", "filename": "build_system/prepare.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fprepare.rs", "raw_url": "https://github.com/rust-lang/rust/raw/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Fprepare.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Fprepare.rs?ref=957d78c47936a82164803470b97bf7a50efd9fc5", "patch": "@@ -16,13 +16,22 @@ pub(crate) fn prepare(dirs: &Dirs) {\n     }\n     std::fs::create_dir_all(RelPath::DOWNLOAD.to_path(dirs)).unwrap();\n \n+    spawn_and_wait(super::build_backend::CG_CLIF.fetch(\"cargo\", dirs));\n+\n     prepare_sysroot(dirs);\n+    spawn_and_wait(super::build_sysroot::STANDARD_LIBRARY.fetch(\"cargo\", dirs));\n+    spawn_and_wait(super::tests::LIBCORE_TESTS.fetch(\"cargo\", dirs));\n \n     super::abi_cafe::ABI_CAFE_REPO.fetch(dirs);\n+    spawn_and_wait(super::abi_cafe::ABI_CAFE.fetch(\"cargo\", dirs));\n     super::tests::RAND_REPO.fetch(dirs);\n+    spawn_and_wait(super::tests::RAND.fetch(\"cargo\", dirs));\n     super::tests::REGEX_REPO.fetch(dirs);\n+    spawn_and_wait(super::tests::REGEX.fetch(\"cargo\", dirs));\n     super::tests::PORTABLE_SIMD_REPO.fetch(dirs);\n+    spawn_and_wait(super::tests::PORTABLE_SIMD.fetch(\"cargo\", dirs));\n     super::bench::SIMPLE_RAYTRACER_REPO.fetch(dirs);\n+    spawn_and_wait(super::bench::SIMPLE_RAYTRACER.fetch(\"cargo\", dirs));\n }\n \n fn prepare_sysroot(dirs: &Dirs) {"}, {"sha": "4d638a4eced108f3cf5a372a003682201669f449", "filename": "build_system/tests.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/957d78c47936a82164803470b97bf7a50efd9fc5/build_system%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build_system%2Ftests.rs?ref=957d78c47936a82164803470b97bf7a50efd9fc5", "patch": "@@ -97,12 +97,12 @@ const BASE_SYSROOT_SUITE: &[TestCase] = &[\n pub(crate) static RAND_REPO: GitRepo =\n     GitRepo::github(\"rust-random\", \"rand\", \"0f933f9c7176e53b2a3c7952ded484e1783f0bf1\", \"rand\");\n \n-static RAND: CargoProject = CargoProject::new(&RAND_REPO.source_dir(), \"rand\");\n+pub(crate) static RAND: CargoProject = CargoProject::new(&RAND_REPO.source_dir(), \"rand\");\n \n pub(crate) static REGEX_REPO: GitRepo =\n     GitRepo::github(\"rust-lang\", \"regex\", \"341f207c1071f7290e3f228c710817c280c8dca1\", \"regex\");\n \n-static REGEX: CargoProject = CargoProject::new(&REGEX_REPO.source_dir(), \"regex\");\n+pub(crate) static REGEX: CargoProject = CargoProject::new(&REGEX_REPO.source_dir(), \"regex\");\n \n pub(crate) static PORTABLE_SIMD_REPO: GitRepo = GitRepo::github(\n     \"rust-lang\",\n@@ -111,10 +111,10 @@ pub(crate) static PORTABLE_SIMD_REPO: GitRepo = GitRepo::github(\n     \"portable-simd\",\n );\n \n-static PORTABLE_SIMD: CargoProject =\n+pub(crate) static PORTABLE_SIMD: CargoProject =\n     CargoProject::new(&PORTABLE_SIMD_REPO.source_dir(), \"portable_simd\");\n \n-static LIBCORE_TESTS: CargoProject =\n+pub(crate) static LIBCORE_TESTS: CargoProject =\n     CargoProject::new(&SYSROOT_SRC.join(\"library/core/tests\"), \"core_tests\");\n \n const EXTENDED_SYSROOT_SUITE: &[TestCase] = &["}]}