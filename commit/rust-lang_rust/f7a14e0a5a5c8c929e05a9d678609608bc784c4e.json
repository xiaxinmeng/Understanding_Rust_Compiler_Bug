{"sha": "f7a14e0a5a5c8c929e05a9d678609608bc784c4e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3YTE0ZTBhNWE1YzhjOTI5ZTA1YTlkNjc4NjA5NjA4YmM3ODRjNGU=", "commit": {"author": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2013-03-17T07:29:12Z"}, "committer": {"name": "Luqman Aden", "email": "me@luqman.ca", "date": "2013-03-17T07:29:12Z"}, "message": "rt: don't save and restore xmm/regs in __morestack.", "tree": {"sha": "e796c8b9ef5d462161dfbfa1e9c652edc20ff322", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e796c8b9ef5d462161dfbfa1e9c652edc20ff322"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7a14e0a5a5c8c929e05a9d678609608bc784c4e", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7a14e0a5a5c8c929e05a9d678609608bc784c4e", "html_url": "https://github.com/rust-lang/rust/commit/f7a14e0a5a5c8c929e05a9d678609608bc784c4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7a14e0a5a5c8c929e05a9d678609608bc784c4e/comments", "author": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "committer": {"login": "luqmana", "id": 287063, "node_id": "MDQ6VXNlcjI4NzA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/287063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/luqmana", "html_url": "https://github.com/luqmana", "followers_url": "https://api.github.com/users/luqmana/followers", "following_url": "https://api.github.com/users/luqmana/following{/other_user}", "gists_url": "https://api.github.com/users/luqmana/gists{/gist_id}", "starred_url": "https://api.github.com/users/luqmana/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/luqmana/subscriptions", "organizations_url": "https://api.github.com/users/luqmana/orgs", "repos_url": "https://api.github.com/users/luqmana/repos", "events_url": "https://api.github.com/users/luqmana/events{/privacy}", "received_events_url": "https://api.github.com/users/luqmana/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f54adca7c984c75334d9cb73ec85bf3b5c326ed9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f54adca7c984c75334d9cb73ec85bf3b5c326ed9", "html_url": "https://github.com/rust-lang/rust/commit/f54adca7c984c75334d9cb73ec85bf3b5c326ed9"}], "stats": {"total": 22, "additions": 3, "deletions": 19}, "files": [{"sha": "239f7d58b098cf43ff7e101544832e5f498f80ec", "filename": "src/rt/arch/x86_64/morestack.S", "status": "modified", "additions": 3, "deletions": 19, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/f7a14e0a5a5c8c929e05a9d678609608bc784c4e/src%2Frt%2Farch%2Fx86_64%2Fmorestack.S", "raw_url": "https://github.com/rust-lang/rust/raw/f7a14e0a5a5c8c929e05a9d678609608bc784c4e/src%2Frt%2Farch%2Fx86_64%2Fmorestack.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fx86_64%2Fmorestack.S?ref=f7a14e0a5a5c8c929e05a9d678609608bc784c4e", "patch": "@@ -49,7 +49,7 @@ MORESTACK:\n \t// Calculate the CFA as on offset from %ebp\n \t.cfi_def_cfa_register %rbp\n \n-        subq $184, %rsp\n+        subq $56, %rsp\n \n \t// Save argument registers of the original function\n \tmovq %rdi,       (%rsp)\n@@ -58,14 +58,6 @@ MORESTACK:\n \tmovq %rcx,     24(%rsp)\n \tmovq %r8,      32(%rsp)\n \tmovq %r9,      40(%rsp)\n-\tmovdqa %xmm0,  48(%rsp)\n-\tmovdqa %xmm1,  64(%rsp)\n-\tmovdqa %xmm2,  80(%rsp)\n-\tmovdqa %xmm3,  96(%rsp)\n-\tmovdqa %xmm4, 112(%rsp)\n-\tmovdqa %xmm5, 128(%rsp)\n-\tmovdqa %xmm6, 144(%rsp)\n-\tmovdqa %xmm7, 160(%rsp)\n \n \t// Calculate the address of the stack arguments.\n \t// We have the base pointer, __morestack's return address,\n@@ -96,16 +88,8 @@ MORESTACK:\n \tmovq    24(%rsp), %rcx\n \tmovq    32(%rsp), %r8\n \tmovq    40(%rsp), %r9\n-\tmovdqa  48(%rsp), %xmm0\n-\tmovdqa  64(%rsp), %xmm1\n-\tmovdqa  80(%rsp), %xmm2\n-\tmovdqa  96(%rsp), %xmm3\n-\tmovdqa 112(%rsp), %xmm4\n-\tmovdqa 128(%rsp), %xmm5\n-\tmovdqa 144(%rsp), %xmm6\n-\tmovdqa 160(%rsp), %xmm7\n-\n-\taddq $184, %rsp\n+\n+\taddq $56, %rsp\n \n         movq 8(%rbp),%r10       // Grab the return pointer.\n         incq %r10               // Skip past the `ret` in our parent frame"}]}