{"sha": "b5c35c5f7ae255887af085fbd75c06809a3039c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1YzM1YzVmN2FlMjU1ODg3YWYwODVmYmQ3NWMwNjgwOWEzMDM5YzE=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-03-17T16:31:28Z"}, "committer": {"name": "Peter Atashian", "email": "retep998@gmail.com", "date": "2017-03-21T20:51:57Z"}, "message": "travis: Add timestamps to all build messages\n\nWhen debugging why builds are taking so long it's often useful to get the\ntimestamp of all log messages as we're not always timing every tiny step of the\nbuild. I wrote a [utility] for prepending a relative timestamp from the start of\na process which is now downloaded to the builders and is what we wrap the entire\nbuild invocation in.\n\n[utility]: https://github.com/alexcrichton/stamp-rs\n\nCloses #40577", "tree": {"sha": "6fd28e589898c329461d78e712f146ca4cf96091", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fd28e589898c329461d78e712f146ca4cf96091"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5c35c5f7ae255887af085fbd75c06809a3039c1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQEcBAABCAAGBQJY0ZJtAAoJEN4E2eJ1WbyKwIYIAIw8MHQIRxgu1aqGgtFCZ4gL\nCSs+GSVYlRSjc/QlOe7/uj/6wlCUJBoKG78/E2y86wOrN9rAAUNpj+0Gh5dSwqmy\nR5L914+NXJEmO490g4B1ALDDSGgFrwT6YXcK6FLm07vFgaG+Vsfi+a7cZSMEQafY\npFGCQ2A1ZzbU3O72baq0kcJNOPBQwO74Q61fyFS/unq4xmxvNqQ6X9i6YKdbRUGT\nG10kM37ho3Ovt4xRHs0MtREwxpg/lWwGFgOhJBUQKmV9Bx7sgs3kjcjwRex2GCeb\nfWIGDGVWrbrWxkdwdQ4PwtVpGnuo6/ikBRG90D/CO+GwPqMUuHQqpZFByHqPMyA=\n=o/nV\n-----END PGP SIGNATURE-----", "payload": "tree 6fd28e589898c329461d78e712f146ca4cf96091\nparent 58c701f5c7dc26d9b55c631006ece52abe1ddce2\nauthor Alex Crichton <alex@alexcrichton.com> 1489768288 -0700\ncommitter Peter Atashian <retep998@gmail.com> 1490129517 -0400\n\ntravis: Add timestamps to all build messages\n\nWhen debugging why builds are taking so long it's often useful to get the\ntimestamp of all log messages as we're not always timing every tiny step of the\nbuild. I wrote a [utility] for prepending a relative timestamp from the start of\na process which is now downloaded to the builders and is what we wrap the entire\nbuild invocation in.\n\n[utility]: https://github.com/alexcrichton/stamp-rs\n\nCloses #40577\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5c35c5f7ae255887af085fbd75c06809a3039c1", "html_url": "https://github.com/rust-lang/rust/commit/b5c35c5f7ae255887af085fbd75c06809a3039c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5c35c5f7ae255887af085fbd75c06809a3039c1/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "retep998", "id": 666308, "node_id": "MDQ6VXNlcjY2NjMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/666308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/retep998", "html_url": "https://github.com/retep998", "followers_url": "https://api.github.com/users/retep998/followers", "following_url": "https://api.github.com/users/retep998/following{/other_user}", "gists_url": "https://api.github.com/users/retep998/gists{/gist_id}", "starred_url": "https://api.github.com/users/retep998/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/retep998/subscriptions", "organizations_url": "https://api.github.com/users/retep998/orgs", "repos_url": "https://api.github.com/users/retep998/repos", "events_url": "https://api.github.com/users/retep998/events{/privacy}", "received_events_url": "https://api.github.com/users/retep998/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58c701f5c7dc26d9b55c631006ece52abe1ddce2", "url": "https://api.github.com/repos/rust-lang/rust/commits/58c701f5c7dc26d9b55c631006ece52abe1ddce2", "html_url": "https://github.com/rust-lang/rust/commit/58c701f5c7dc26d9b55c631006ece52abe1ddce2"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "1dd9114d5348a752276027e48016dce92946fc23", "filename": ".travis.yml", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b5c35c5f7ae255887af085fbd75c06809a3039c1/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/b5c35c5f7ae255887af085fbd75c06809a3039c1/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=b5c35c5f7ae255887af085fbd75c06809a3039c1", "patch": "@@ -53,7 +53,9 @@ matrix:\n       osx_image: xcode8.2\n       install: &osx_install_sccache >\n         travis_retry curl -o /usr/local/bin/sccache https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-16-sccache-x86_64-apple-darwin &&\n-          chmod +x /usr/local/bin/sccache\n+          chmod +x /usr/local/bin/sccache &&\n+        travis_retry curl -o /usr/local/bin/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-apple-darwin &&\n+          chmod +x /usr/local/bin/stamp\n     - env: >\n         RUST_CHECK_TARGET=check\n         RUST_CONFIGURE_ARGS=--build=i686-apple-darwin\n@@ -118,6 +120,11 @@ env:\n     # AWS_SECRET_ACCESS_KEY=...\n     - secure: \"Pixhh0hXDqGCdOyLtGFjli3J2AtDWIpyb2btIrLe956nCBDRutRoMm6rv5DI9sFZN07Mms7VzNNvhc9wCW1y63JAm414d2Co7Ob8kWMZlz9l9t7ACHuktUiis8yr+S4Quq1Vqd6pqi7pf2J++UxC8R/uLeqVrubzr6+X7AbmEFE=\"\n \n+# Note that this is overridden on OSX builders\n+install: >\n+  travis_retry curl -o /usr/local/bin/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-unknown-linux-musl &&\n+    chmod +x /usr/local/bin/stamp\n+\n before_script:\n   - >\n       echo \"#### Disk usage before running script:\";\n@@ -129,11 +136,11 @@ script:\n       if [ \"$ALLOW_PR\" = \"\" ] && [ \"$TRAVIS_BRANCH\" != \"auto\" ]; then\n           echo skipping, not a full build;\n       elif [ \"$TRAVIS_OS_NAME\" = \"osx\" ]; then\n-          travis_retry sh -c 'git submodule deinit -f . && git submodule update --init' &&\n-          src/ci/run.sh;\n+          travis_retry stamp sh -c 'git submodule deinit -f . && git submodule update --init' &&\n+          stamp src/ci/run.sh;\n       else\n-          travis_retry sh -c 'git submodule deinit -f . && git submodule update --init' &&\n-          src/ci/docker/run.sh $IMAGE;\n+          travis_retry stamp sh -c 'git submodule deinit -f . && git submodule update --init' &&\n+          stamp src/ci/docker/run.sh $IMAGE;\n       fi\n \n after_success:"}]}