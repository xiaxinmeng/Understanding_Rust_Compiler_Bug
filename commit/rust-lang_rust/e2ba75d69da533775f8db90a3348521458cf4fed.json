{"sha": "e2ba75d69da533775f8db90a3348521458cf4fed", "node_id": "C_kwDOAAsO6NoAKGUyYmE3NWQ2OWRhNTMzNzc1ZjhkYjkwYTMzNDg1MjE0NThjZjRmZWQ", "commit": {"author": {"name": "blyxyas", "email": "blyxyas@gmail.com", "date": "2023-03-15T15:27:46Z"}, "committer": {"name": "blyxyas", "email": "blyxyas@gmail.com", "date": "2023-03-15T15:27:46Z"}, "message": "Add macro test", "tree": {"sha": "4b5e47f574027bdf41d66092f082a0137f48bd4c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b5e47f574027bdf41d66092f082a0137f48bd4c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e2ba75d69da533775f8db90a3348521458cf4fed", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEM3aofraJSaf7CtgpTTgXC1ovwzQFAmQR4/IACgkQTTgXC1ov\nwzRefhAAhfYNEY2O8VAyOu7uX5K/akhWAeuJE1jZM2qJkt367WrocG/BoK38a0xS\neS/0eGVVMDnFAH/241I1jWoL9GFzHgyWztVXLxwkq8odY+4dGy62W8y+hmNMQCUF\nyXuX7jitXGZ3bQEL0AaGXaHZBPqLAwo+3DHPhXXA14kXe8qpcs7gKlW4jRzAY3//\nfBTFUzEiqs87ZfrqHznSSQW+alhWXxjTz2R3hyPoYK9I5Qs9UuEuII1OJwNmFazx\nXlXyIrMzFrEWrGm9GWxeTQ398p1vZWQhxHrDc9laLw6XaY4oi8WZzp1Vu7kQ3GWY\nzqrvM4d9k6IshvoTbVYkyDs7LI0v6RGzq3m8oHaBmYEnOj0L2uxXoA9sVAzItCOJ\nG0rY9X4RtBaWBOMI5WQt6CQ5sawKb5qa7ka3LzlNn39qzVYTEIbmoFkyYCLlBTZM\nMlpWiviPuxGtgct7ZFZIcv7cDUqibLEnzwvphtm2Z6X1/MvpQT2RET8Us4+j8eHg\nnd+keVNS36jXKawn3X1ExFoV3RvauBnIfttjEcKraXO7mGPmgMMReHw4a2/u5m1T\n7FrBTu2aLMWp7dIXtwEYp0QoeNV4GVqjBN/CfHlBI9LM/P2+tqL/XIWP6dXK4jia\nsjznyDw186AEdV+He4L9ztfS7l7GxYBSN7kgjh/3RcOo4nTlRmc=\n=1dNd\n-----END PGP SIGNATURE-----", "payload": "tree 4b5e47f574027bdf41d66092f082a0137f48bd4c\nparent 3eea49446bae42709b96bd36a0eb2c0966b6b4ac\nauthor blyxyas <blyxyas@gmail.com> 1678894066 +0100\ncommitter blyxyas <blyxyas@gmail.com> 1678894066 +0100\n\nAdd macro test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e2ba75d69da533775f8db90a3348521458cf4fed", "html_url": "https://github.com/rust-lang/rust/commit/e2ba75d69da533775f8db90a3348521458cf4fed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e2ba75d69da533775f8db90a3348521458cf4fed/comments", "author": {"login": "blyxyas", "id": 73757586, "node_id": "MDQ6VXNlcjczNzU3NTg2", "avatar_url": "https://avatars.githubusercontent.com/u/73757586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blyxyas", "html_url": "https://github.com/blyxyas", "followers_url": "https://api.github.com/users/blyxyas/followers", "following_url": "https://api.github.com/users/blyxyas/following{/other_user}", "gists_url": "https://api.github.com/users/blyxyas/gists{/gist_id}", "starred_url": "https://api.github.com/users/blyxyas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blyxyas/subscriptions", "organizations_url": "https://api.github.com/users/blyxyas/orgs", "repos_url": "https://api.github.com/users/blyxyas/repos", "events_url": "https://api.github.com/users/blyxyas/events{/privacy}", "received_events_url": "https://api.github.com/users/blyxyas/received_events", "type": "User", "site_admin": false}, "committer": {"login": "blyxyas", "id": 73757586, "node_id": "MDQ6VXNlcjczNzU3NTg2", "avatar_url": "https://avatars.githubusercontent.com/u/73757586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blyxyas", "html_url": "https://github.com/blyxyas", "followers_url": "https://api.github.com/users/blyxyas/followers", "following_url": "https://api.github.com/users/blyxyas/following{/other_user}", "gists_url": "https://api.github.com/users/blyxyas/gists{/gist_id}", "starred_url": "https://api.github.com/users/blyxyas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blyxyas/subscriptions", "organizations_url": "https://api.github.com/users/blyxyas/orgs", "repos_url": "https://api.github.com/users/blyxyas/repos", "events_url": "https://api.github.com/users/blyxyas/events{/privacy}", "received_events_url": "https://api.github.com/users/blyxyas/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3eea49446bae42709b96bd36a0eb2c0966b6b4ac", "url": "https://api.github.com/repos/rust-lang/rust/commits/3eea49446bae42709b96bd36a0eb2c0966b6b4ac", "html_url": "https://github.com/rust-lang/rust/commit/3eea49446bae42709b96bd36a0eb2c0966b6b4ac"}], "stats": {"total": 60, "additions": 39, "deletions": 21}, "files": [{"sha": "78d8eedc38af051e386b1bf79464645a14ec717a", "filename": "tests/ui/swap.fixed", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fswap.fixed?ref=e2ba75d69da533775f8db90a3348521458cf4fed", "patch": "@@ -8,7 +8,8 @@\n     redundant_semicolons,\n     dead_code,\n     unused_assignments,\n-    unused_variables\n+    unused_variables,\n+    clippy::let_and_return\n )]\n \n struct Foo(u32);\n@@ -187,8 +188,16 @@ const fn issue_9864(mut u: u32) -> u32 {\n     u + v\n }\n \n-#[allow(clippy::let_and_return)]\n+macro_rules! issue_10421 {\n+    () => {\n+        let a = 1;\n+        let b = a;\n+        let b = b;\n+    };\n+}\n+\n const fn issue_10421(x: u32) -> u32 {\n+    issue_10421!();\n     let a = x;\n     let a = a;\n     let a = a;"}, {"sha": "c995af8ecf91b5ceb807958265fa320b1c7dcbe7", "filename": "tests/ui/swap.rs", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fswap.rs?ref=e2ba75d69da533775f8db90a3348521458cf4fed", "patch": "@@ -8,7 +8,8 @@\n     redundant_semicolons,\n     dead_code,\n     unused_assignments,\n-    unused_variables\n+    unused_variables,\n+    clippy::let_and_return\n )]\n \n struct Foo(u32);\n@@ -216,8 +217,16 @@ const fn issue_9864(mut u: u32) -> u32 {\n     u + v\n }\n \n-#[allow(clippy::let_and_return)]\n+macro_rules! issue_10421 {\n+    () => {\n+        let a = 1;\n+        let b = a;\n+        let b = b;\n+    };\n+}\n+\n const fn issue_10421(x: u32) -> u32 {\n+    issue_10421!();\n     let a = x;\n     let a = a;\n     let a = a;"}, {"sha": "e9dacb3119e33647e1a0175ec1d2f3f0fa42279f", "filename": "tests/ui/swap.stderr", "status": "modified", "additions": 17, "deletions": 17, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e2ba75d69da533775f8db90a3348521458cf4fed/tests%2Fui%2Fswap.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fswap.stderr?ref=e2ba75d69da533775f8db90a3348521458cf4fed", "patch": "@@ -1,5 +1,5 @@\n error: this looks like you are swapping `bar.a` and `bar.b` manually\n-  --> $DIR/swap.rs:25:5\n+  --> $DIR/swap.rs:26:5\n    |\n LL | /     let temp = bar.a;\n LL | |     bar.a = bar.b;\n@@ -10,55 +10,55 @@ LL | |     bar.b = temp;\n    = note: `-D clippy::manual-swap` implied by `-D warnings`\n \n error: this looks like you are swapping elements of `foo` manually\n-  --> $DIR/swap.rs:37:5\n+  --> $DIR/swap.rs:38:5\n    |\n LL | /     let temp = foo[0];\n LL | |     foo[0] = foo[1];\n LL | |     foo[1] = temp;\n    | |__________________^ help: try: `foo.swap(0, 1);`\n \n error: this looks like you are swapping elements of `foo` manually\n-  --> $DIR/swap.rs:46:5\n+  --> $DIR/swap.rs:47:5\n    |\n LL | /     let temp = foo[0];\n LL | |     foo[0] = foo[1];\n LL | |     foo[1] = temp;\n    | |__________________^ help: try: `foo.swap(0, 1);`\n \n error: this looks like you are swapping elements of `foo` manually\n-  --> $DIR/swap.rs:65:5\n+  --> $DIR/swap.rs:66:5\n    |\n LL | /     let temp = foo[0];\n LL | |     foo[0] = foo[1];\n LL | |     foo[1] = temp;\n    | |__________________^ help: try: `foo.swap(0, 1);`\n \n error: this looks like you are swapping `a` and `b` manually\n-  --> $DIR/swap.rs:76:5\n+  --> $DIR/swap.rs:77:5\n    |\n LL | /     a ^= b;\n LL | |     b ^= a;\n LL | |     a ^= b;\n    | |___________^ help: try: `std::mem::swap(&mut a, &mut b);`\n \n error: this looks like you are swapping `bar.a` and `bar.b` manually\n-  --> $DIR/swap.rs:84:5\n+  --> $DIR/swap.rs:85:5\n    |\n LL | /     bar.a ^= bar.b;\n LL | |     bar.b ^= bar.a;\n LL | |     bar.a ^= bar.b;\n    | |___________________^ help: try: `std::mem::swap(&mut bar.a, &mut bar.b);`\n \n error: this looks like you are swapping elements of `foo` manually\n-  --> $DIR/swap.rs:92:5\n+  --> $DIR/swap.rs:93:5\n    |\n LL | /     foo[0] ^= foo[1];\n LL | |     foo[1] ^= foo[0];\n LL | |     foo[0] ^= foo[1];\n    | |_____________________^ help: try: `foo.swap(0, 1);`\n \n error: this looks like you are swapping `foo[0][1]` and `bar[1][0]` manually\n-  --> $DIR/swap.rs:121:5\n+  --> $DIR/swap.rs:122:5\n    |\n LL | /     let temp = foo[0][1];\n LL | |     foo[0][1] = bar[1][0];\n@@ -68,7 +68,7 @@ LL | |     bar[1][0] = temp;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are swapping `a` and `b` manually\n-  --> $DIR/swap.rs:135:7\n+  --> $DIR/swap.rs:136:7\n    |\n LL |       ; let t = a;\n    |  _______^\n@@ -79,7 +79,7 @@ LL | |     b = t;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are swapping `c.0` and `a` manually\n-  --> $DIR/swap.rs:144:7\n+  --> $DIR/swap.rs:145:7\n    |\n LL |       ; let t = c.0;\n    |  _______^\n@@ -90,7 +90,7 @@ LL | |     a = t;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are swapping `b` and `a` manually\n-  --> $DIR/swap.rs:170:5\n+  --> $DIR/swap.rs:171:5\n    |\n LL | /     let t = b;\n LL | |     b = a;\n@@ -100,7 +100,7 @@ LL | |     a = t;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are trying to swap `a` and `b`\n-  --> $DIR/swap.rs:132:5\n+  --> $DIR/swap.rs:133:5\n    |\n LL | /     a = b;\n LL | |     b = a;\n@@ -110,7 +110,7 @@ LL | |     b = a;\n    = note: `-D clippy::almost-swapped` implied by `-D warnings`\n \n error: this looks like you are trying to swap `c.0` and `a`\n-  --> $DIR/swap.rs:141:5\n+  --> $DIR/swap.rs:142:5\n    |\n LL | /     c.0 = a;\n LL | |     a = c.0;\n@@ -119,7 +119,7 @@ LL | |     a = c.0;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are trying to swap `a` and `b`\n-  --> $DIR/swap.rs:148:5\n+  --> $DIR/swap.rs:149:5\n    |\n LL | /     let a = b;\n LL | |     let b = a;\n@@ -128,7 +128,7 @@ LL | |     let b = a;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are trying to swap `d` and `c`\n-  --> $DIR/swap.rs:153:5\n+  --> $DIR/swap.rs:154:5\n    |\n LL | /     d = c;\n LL | |     c = d;\n@@ -137,7 +137,7 @@ LL | |     c = d;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are trying to swap `a` and `b`\n-  --> $DIR/swap.rs:157:5\n+  --> $DIR/swap.rs:158:5\n    |\n LL | /     let a = b;\n LL | |     b = a;\n@@ -146,7 +146,7 @@ LL | |     b = a;\n    = note: or maybe you should use `std::mem::replace`?\n \n error: this looks like you are swapping `s.0.x` and `s.0.y` manually\n-  --> $DIR/swap.rs:205:5\n+  --> $DIR/swap.rs:206:5\n    |\n LL | /     let t = s.0.x;\n LL | |     s.0.x = s.0.y;"}]}