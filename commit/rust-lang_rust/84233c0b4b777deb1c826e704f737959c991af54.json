{"sha": "84233c0b4b777deb1c826e704f737959c991af54", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0MjMzYzBiNGI3NzdkZWIxYzgyNmU3MDRmNzM3OTU5Yzk5MWFmNTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-05-20T16:34:44Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-05-20T16:34:44Z"}, "message": "auto merge of #6643 : sanxiyn/rust/legacy-modes, r=bstrie", "tree": {"sha": "78592c62e77fc8868c34339c1fd564b1abdfb856", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/78592c62e77fc8868c34339c1fd564b1abdfb856"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84233c0b4b777deb1c826e704f737959c991af54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84233c0b4b777deb1c826e704f737959c991af54", "html_url": "https://github.com/rust-lang/rust/commit/84233c0b4b777deb1c826e704f737959c991af54", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84233c0b4b777deb1c826e704f737959c991af54/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f323b0c8bac704366eb307437faea231fb73b8d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/f323b0c8bac704366eb307437faea231fb73b8d1", "html_url": "https://github.com/rust-lang/rust/commit/f323b0c8bac704366eb307437faea231fb73b8d1"}, {"sha": "17dfebf883053ea84ef3fcf6b928d4a210c1012e", "url": "https://api.github.com/repos/rust-lang/rust/commits/17dfebf883053ea84ef3fcf6b928d4a210c1012e", "html_url": "https://github.com/rust-lang/rust/commit/17dfebf883053ea84ef3fcf6b928d4a210c1012e"}], "stats": {"total": 19, "additions": 3, "deletions": 16}, "files": [{"sha": "00621573b886ae62459616d1acc619d64f955a0b", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=84233c0b4b777deb1c826e704f737959c991af54", "patch": "@@ -239,7 +239,7 @@ pub fn compile_rest(sess: Session,\n     let (llmod, link_meta) = {\n \n         let ty_cx = ty::mk_ctxt(sess, def_map, ast_map, freevars,\n-                                region_map, rp_set, lang_items, crate);\n+                                region_map, rp_set, lang_items);\n \n         // passes are timed inside typeck\n         let (method_map, vtable_map) = typeck::check_crate("}, {"sha": "1a2a84ceae856af225b53078ad04341cac5d24d8", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=84233c0b4b777deb1c826e704f737959c991af54", "patch": "@@ -232,7 +232,6 @@ struct ctxt_ {\n     diag: @syntax::diagnostic::span_handler,\n     interner: @mut HashMap<intern_key, ~t_box_>,\n     next_id: @mut uint,\n-    legacy_modes: bool,\n     cstore: @mut metadata::cstore::CStore,\n     sess: session::Session,\n     def_map: resolve::DefMap,\n@@ -906,24 +905,12 @@ pub fn mk_ctxt(s: session::Session,\n                freevars: freevars::freevar_map,\n                region_maps: @mut middle::region::RegionMaps,\n                region_paramd_items: middle::region::region_paramd_items,\n-               lang_items: middle::lang_items::LanguageItems,\n-               crate: @ast::crate)\n+               lang_items: middle::lang_items::LanguageItems)\n             -> ctxt {\n-    let mut legacy_modes = false;\n-    for crate.node.attrs.each |attribute| {\n-        match attribute.node.value.node {\n-            ast::meta_word(w) if *w == ~\"legacy_modes\" => {\n-                legacy_modes = true;\n-            }\n-            _ => {}\n-        }\n-    }\n-\n     @ctxt_ {\n         diag: s.diagnostic(),\n         interner: @mut HashMap::new(),\n         next_id: @mut primitives::LAST_PRIMITIVE_ID,\n-        legacy_modes: legacy_modes,\n         cstore: s.cstore,\n         sess: s,\n         def_map: dm,"}, {"sha": "f2a72e07a5739f453422175816fb9f66e47780a9", "filename": "src/librustc/middle/typeck/infer/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84233c0b4b777deb1c826e704f737959c991af54/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Ftest.rs?ref=84233c0b4b777deb1c826e704f737959c991af54", "patch": "@@ -67,7 +67,7 @@ fn setup_env(test_name: &str, source_string: &str) -> Env {\n         cfg, parse_sess);\n \n     let tcx = ty::mk_ctxt(sess, dm, amap, freevars, region_map,\n-                          region_paramd_items, lang_items, crate);\n+                          region_paramd_items, lang_items);\n \n     let infcx = infer::new_infer_ctxt(tcx);\n "}]}