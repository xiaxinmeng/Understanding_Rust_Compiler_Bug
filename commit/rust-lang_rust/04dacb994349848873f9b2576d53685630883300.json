{"sha": "04dacb994349848873f9b2576d53685630883300", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0ZGFjYjk5NDM0OTg0ODg3M2Y5YjI1NzZkNTM2ODU2MzA4ODMzMDA=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-02-20T17:50:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-20T17:50:39Z"}, "message": "Merge #3252\n\n3252: Improve integration with token color configuration r=matklad a=eaglgenes101\n\nFirst, the extension now checks theme token color customizations as well as global token color customizations when determining what colors to highlight syntax with. Theme token color customizations take precedence over both global token color customizations and the theme token colors. \r\n\r\nSecond, a few additional token color customization keys used by other themes are added. The original paths still take precedence, but now turning on rust analyzer syntax highlighting should now not unexpectedly homogenize token colors when custom themes are used. \n\nCo-authored-by: eaglgenes101 <eaglgenes101@gmail.com>", "tree": {"sha": "09c442a5a857b0dc47ad972aea84235f70dbf60c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/09c442a5a857b0dc47ad972aea84235f70dbf60c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04dacb994349848873f9b2576d53685630883300", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeTsbvCRBK7hj4Ov3rIwAAdHIIAKw7neauyvnW7LvkyCsZtmBH\nqqo0sP9fk0kb5qhTL3or9M8RxUwC5+go86e8708QDfQGTrFqaYmxVuy7fTsdCADj\nXh42IN2uS5UDGui+Z2pupv2op7ObJJ5O3MRUJqQmMNRfkewDxOzt7rYE7dFByNIR\npie6xw6+Uv4z88Uyc69BTYy7MMIUxthkJ7umTx56c8gxd3kduF73bXzwuhuRT0QR\nZyCi7luY8yd3aaqwsnwyFRBTa8zWtqZycsSfPe4AQopEuByGsSxvpJPeH6Y5YMAe\nG+Qcf1baWAxygJZ0SFlf722du0D+v42UwXuWJPyWNnZTqvraCc88eEv8ykSrJ3I=\n=M4v8\n-----END PGP SIGNATURE-----\n", "payload": "tree 09c442a5a857b0dc47ad972aea84235f70dbf60c\nparent f761ed2abb3faa07f9a835e9ba767954ca2e684b\nparent bf99a6eb084ea6a2ad105bc7328334a769db788c\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1582221039 +0000\ncommitter GitHub <noreply@github.com> 1582221039 +0000\n\nMerge #3252\n\n3252: Improve integration with token color configuration r=matklad a=eaglgenes101\n\nFirst, the extension now checks theme token color customizations as well as global token color customizations when determining what colors to highlight syntax with. Theme token color customizations take precedence over both global token color customizations and the theme token colors. \r\n\r\nSecond, a few additional token color customization keys used by other themes are added. The original paths still take precedence, but now turning on rust analyzer syntax highlighting should now not unexpectedly homogenize token colors when custom themes are used. \n\nCo-authored-by: eaglgenes101 <eaglgenes101@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04dacb994349848873f9b2576d53685630883300", "html_url": "https://github.com/rust-lang/rust/commit/04dacb994349848873f9b2576d53685630883300", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04dacb994349848873f9b2576d53685630883300/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f761ed2abb3faa07f9a835e9ba767954ca2e684b", "url": "https://api.github.com/repos/rust-lang/rust/commits/f761ed2abb3faa07f9a835e9ba767954ca2e684b", "html_url": "https://github.com/rust-lang/rust/commit/f761ed2abb3faa07f9a835e9ba767954ca2e684b"}, {"sha": "bf99a6eb084ea6a2ad105bc7328334a769db788c", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf99a6eb084ea6a2ad105bc7328334a769db788c", "html_url": "https://github.com/rust-lang/rust/commit/bf99a6eb084ea6a2ad105bc7328334a769db788c"}], "stats": {"total": 16, "additions": 10, "deletions": 6}, "files": [{"sha": "2f2a39877e91878555ea9a627d510dd6dc7ff27a", "filename": "editors/code/src/color_theme.ts", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/04dacb994349848873f9b2576d53685630883300/editors%2Fcode%2Fsrc%2Fcolor_theme.ts", "raw_url": "https://github.com/rust-lang/rust/raw/04dacb994349848873f9b2576d53685630883300/editors%2Fcode%2Fsrc%2Fcolor_theme.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcolor_theme.ts?ref=04dacb994349848873f9b2576d53685630883300", "patch": "@@ -83,8 +83,12 @@ function loadThemeNamed(themeName: string): ColorTheme {\n         res.mergeFrom(loadThemeFile(themePath));\n     }\n \n-    const customizations: any = vscode.workspace.getConfiguration('editor').get('tokenColorCustomizations');\n-    res.mergeFrom(ColorTheme.fromRules(customizations?.textMateRules ?? []));\n+    const global_customizations: any = vscode.workspace.getConfiguration('editor').get('tokenColorCustomizations');\n+    res.mergeFrom(ColorTheme.fromRules(global_customizations?.textMateRules ?? []));\n+\n+    const theme_customizations: any = vscode.workspace.getConfiguration('editor.tokenColorCustomizations').get(`[${themeName}]`);\n+    res.mergeFrom(ColorTheme.fromRules(theme_customizations?.textMateRules ?? []));\n+\n \n     return res;\n }"}, {"sha": "b34e49c173aa2fd62822a7d898098a68265c8ec3", "filename": "editors/code/src/highlighting.ts", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/04dacb994349848873f9b2576d53685630883300/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "raw_url": "https://github.com/rust-lang/rust/raw/04dacb994349848873f9b2576d53685630883300/editors%2Fcode%2Fsrc%2Fhighlighting.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fhighlighting.ts?ref=04dacb994349848873f9b2576d53685630883300", "patch": "@@ -233,16 +233,16 @@ const TAG_TO_SCOPES = new Map<string, string[]>([\n     [\"type\", [\"entity.name.type\"]],\n     [\"type.builtin\", [\"entity.name.type\", \"support.type.primitive\"]],\n     [\"type.self\", [\"entity.name.type.parameter.self\"]],\n-    [\"type.param\", [\"entity.name.type.parameter\"]],\n-    [\"type.lifetime\", [\"entity.name.type.lifetime\"]],\n+    [\"type.param\", [\"entity.name.type.parameter\", \"entity.name.type.param.rust\"]],\n+    [\"type.lifetime\", [\"entity.name.type.lifetime\", \"entity.name.lifetime.rust\"]],\n \n     [\"literal.byte\", [\"constant.character.byte\"]],\n-    [\"literal.char\", [\"constant.character\"]],\n+    [\"literal.char\", [\"constant.character.rust\"]],\n     [\"literal.numeric\", [\"constant.numeric\"]],\n \n     [\"comment\", [\"comment\"]],\n     [\"string\", [\"string.quoted\"]],\n-    [\"attribute\", [\"meta.attribute\"]],\n+    [\"attribute\", [\"meta.attribute.rust\"]],\n \n     [\"keyword\", [\"keyword\"]],\n     [\"keyword.unsafe\", [\"keyword.other.unsafe\"]],"}]}