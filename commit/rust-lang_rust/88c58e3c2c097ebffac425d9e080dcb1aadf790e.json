{"sha": "88c58e3c2c097ebffac425d9e080dcb1aadf790e", "node_id": "C_kwDOAAsO6NoAKDg4YzU4ZTNjMmMwOTdlYmZmYWM0MjVkOWUwODBkY2IxYWFkZjc5MGU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-26T18:36:10Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-26T18:36:10Z"}, "message": "Auto merge of #106156 - fee1-dead-contrib:rollup-3ir0951, r=fee1-dead\n\nRollup of 2 pull requests\n\nSuccessful merges:\n\n - #106151 (Remove unused imports)\n - #106153 (Fix missing renaming for #titles into #search-tabs)\n\nFailed merges:\n\nr? `@ghost`\n`@rustbot` modify labels: rollup", "tree": {"sha": "750f72fe78f8dde60f424d3e4b6f3c09b7713113", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/750f72fe78f8dde60f424d3e4b6f3c09b7713113"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88c58e3c2c097ebffac425d9e080dcb1aadf790e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88c58e3c2c097ebffac425d9e080dcb1aadf790e", "html_url": "https://github.com/rust-lang/rust/commit/88c58e3c2c097ebffac425d9e080dcb1aadf790e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88c58e3c2c097ebffac425d9e080dcb1aadf790e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "caa64e5b5e7605a1c1428b2a402021bef83f3e1e", "url": "https://api.github.com/repos/rust-lang/rust/commits/caa64e5b5e7605a1c1428b2a402021bef83f3e1e", "html_url": "https://github.com/rust-lang/rust/commit/caa64e5b5e7605a1c1428b2a402021bef83f3e1e"}, {"sha": "786e0b5577f6ad9a41c692fcd0a91077a05d2928", "url": "https://api.github.com/repos/rust-lang/rust/commits/786e0b5577f6ad9a41c692fcd0a91077a05d2928", "html_url": "https://github.com/rust-lang/rust/commit/786e0b5577f6ad9a41c692fcd0a91077a05d2928"}], "stats": {"total": 100, "additions": 86, "deletions": 14}, "files": [{"sha": "ac60f085304d40d8d9e5677e6f7fb03238e1e83a", "filename": "compiler/rustc_hir_analysis/src/impl_wf_check/min_specialization.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fimpl_wf_check%2Fmin_specialization.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -81,7 +81,6 @@ use rustc_span::Span;\n use rustc_trait_selection::traits::error_reporting::TypeErrCtxtExt;\n use rustc_trait_selection::traits::outlives_bounds::InferCtxtExt as _;\n use rustc_trait_selection::traits::{self, translate_substs, wf, ObligationCtxt};\n-use tracing::instrument;\n \n pub(super) fn check_min_specialization(tcx: TyCtxt<'_>, impl_def_id: LocalDefId) {\n     if let Some(node) = parent_specialization_node(tcx, impl_def_id) {"}, {"sha": "438f36373ca91b0682484f1052eefd7ad1aa889a", "filename": "compiler/rustc_middle/src/mir/terminator.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fmir%2Fterminator.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -1,4 +1,4 @@\n-use smallvec::{smallvec, SmallVec};\n+use smallvec::SmallVec;\n \n use super::{BasicBlock, InlineAsmOperand, Operand, SourceInfo, TerminatorKind};\n use rustc_ast::InlineAsmTemplatePiece;"}, {"sha": "708a5e4d059e8acdab8166081f1c6c4d54fee151", "filename": "compiler/rustc_middle/src/ty/walk.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_middle%2Fsrc%2Fty%2Fwalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_middle%2Fsrc%2Fty%2Fwalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fwalk.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -4,7 +4,7 @@\n use crate::ty::subst::{GenericArg, GenericArgKind};\n use crate::ty::{self, Ty};\n use rustc_data_structures::sso::SsoHashSet;\n-use smallvec::{self, SmallVec};\n+use smallvec::SmallVec;\n \n // The TypeWalker's stack is hot enough that it's worth going to some effort to\n // avoid heap allocations."}, {"sha": "61fe379c3e98b03dc19e579127c6162ff2d95604", "filename": "compiler/rustc_parse/src/parser/diagnostics.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fdiagnostics.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -41,7 +41,6 @@ use rustc_span::{Span, SpanSnippetError, DUMMY_SP};\n use std::mem::take;\n use std::ops::{Deref, DerefMut};\n use thin_vec::{thin_vec, ThinVec};\n-use tracing::{debug, trace};\n \n /// Creates a placeholder argument.\n pub(super) fn dummy_arg(ident: Ident) -> Param {"}, {"sha": "9b8a6c47966d4c321b9a2d1e91ba6afca8e3c024", "filename": "compiler/rustc_parse/src/parser/item.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fitem.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -24,7 +24,6 @@ use rustc_span::symbol::{kw, sym, Ident, Symbol};\n use rustc_span::DUMMY_SP;\n use std::mem;\n use thin_vec::ThinVec;\n-use tracing::debug;\n \n impl<'a> Parser<'a> {\n     /// Parses a source module as a crate. This is the main entry point for the parser."}, {"sha": "b5df583e3f4cbb94d5fb2e38aa1b7cab2ffd1d0a", "filename": "compiler/rustc_trait_selection/src/traits/util.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Futil.rs?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -1,6 +1,5 @@\n use rustc_errors::Diagnostic;\n use rustc_span::Span;\n-use smallvec::smallvec;\n use smallvec::SmallVec;\n \n use rustc_data_structures::fx::FxHashSet;"}, {"sha": "36f1f955f5f895fb32b37918a5abb0e5641ab2c0", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -162,18 +162,18 @@ pre, .rustdoc.source .example-wrap {\n \tcolor: #788797;\n }\n \n-#titles > button.selected {\n+#search-tabs > button.selected {\n \tbackground-color: #141920 !important;\n \tborder-bottom: 1px solid #ffb44c !important;\n \tborder-top: none;\n }\n \n-#titles > button:not(.selected) {\n+#search-tabs > button:not(.selected) {\n \tbackground-color: transparent !important;\n \tborder: none;\n }\n \n-#titles > button:hover {\n+#search-tabs > button:hover {\n \tborder-bottom: 1px solid rgba(242, 151, 24, 0.3);\n }\n \n@@ -185,7 +185,7 @@ above the `@media (max-width: 700px)` rules due to a bug in the css checker */\n /* see https://github.com/rust-lang/rust/pull/71237#issuecomment-618170143 */\n pre.rust .lifetime {}\n pre.rust .kw {}\n-#titles > button:hover, #titles > button.selected {}\n+#search-tabs > button:hover, #search-tabs > button.selected {}\n pre.rust .self, pre.rust .bool-val, pre.rust .prelude-val, pre.rust .attribute {}\n pre.rust .kw-2, pre.rust .prelude-ty {}\n "}, {"sha": "6dd15d2e1bbaa5128c0f4d1ceaeaf11ee8295afe", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -88,12 +88,12 @@\n \t--scrape-example-toggle-line-hover-background: #c5c5c5;\n }\n \n-#titles > button:not(.selected) {\n+#search-tabs > button:not(.selected) {\n \tbackground-color: #252525;\n \tborder-top-color: #252525;\n }\n \n-#titles > button:hover, #titles > button.selected {\n+#search-tabs > button:hover, #search-tabs > button.selected {\n \tborder-top-color: #0089ff;\n \tbackground-color: #353535;\n }"}, {"sha": "804e20d0d44e9736173063914e147cfbf39af38e", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -85,12 +85,12 @@\n \t--scrape-example-toggle-line-hover-background: #999;\n }\n \n-#titles > button:not(.selected) {\n+#search-tabs > button:not(.selected) {\n \tbackground-color: #e6e6e6;\n \tborder-top-color: #e6e6e6;\n }\n \n-#titles > button:hover, #titles > button.selected {\n+#search-tabs > button:hover, #search-tabs > button.selected {\n \tbackground-color: #ffffff;\n \tborder-top-color: #0089ff;\n }"}, {"sha": "c2634a04c8a74089a43cd0e75e5ca2e2f672bbff", "filename": "src/test/rustdoc-gui/search-tab.goml", "status": "added", "additions": 76, "deletions": 0, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml", "raw_url": "https://github.com/rust-lang/rust/raw/88c58e3c2c097ebffac425d9e080dcb1aadf790e/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-tab.goml?ref=88c58e3c2c097ebffac425d9e080dcb1aadf790e", "patch": "@@ -0,0 +1,76 @@\n+// Checking the colors of the search tab headers.\n+goto: \"file://\" + |DOC_PATH| + \"/test_docs/fn.foo.html?search=something\"\n+show-text: true\n+\n+define-function: (\n+    \"check-colors\",\n+    (theme, background, background_selected, background_hover, border_bottom,\n+     border_bottom_selected, border_bottom_hover, border_top, border_top_selected,\n+     border_top_hover),\n+    [\n+        // Setting the theme.\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+\n+        // These two commands are used to be sure the search will be run.\n+        (\"focus\", \".search-input\"),\n+        (\"press-key\", \"Enter\"),\n+\n+        (\"wait-for\", \"#search-tabs\"),\n+        (\"assert-css\", (\"#search-tabs > button:not(.selected)\", {\n+            \"background-color\": |background|,\n+            \"border-bottom\": |border_bottom|,\n+            \"border-top\": |border_top|,\n+        })),\n+        (\"assert-css\", (\"#search-tabs > button.selected\", {\n+            \"background-color\": |background_selected|,\n+            \"border-bottom\": |border_bottom_selected|,\n+            \"border-top\": |border_top_selected|,\n+        })),\n+        (\"move-cursor-to\", \"#search-tabs > button:not(.selected)\"),\n+        (\"assert-css\", (\"#search-tabs > button:not(.selected):hover\", {\n+            \"background-color\": |background_hover|,\n+            \"border-bottom\": |border_bottom_hover|,\n+            \"border-top\": |border_top_hover|,\n+        })),\n+        // To prevent disrupting next run of this function.\n+        (\"move-cursor-to\", \".search-input\"),\n+    ],\n+)\n+\n+call-function: (\"check-colors\", {\n+    \"theme\": \"ayu\",\n+    \"background\": \"rgba(0, 0, 0, 0)\",\n+    \"background_selected\": \"rgb(20, 25, 32)\",\n+    \"background_hover\": \"rgba(0, 0, 0, 0)\",\n+    \"border_bottom\": \"0px none rgb(197, 197, 197)\",\n+    \"border_bottom_selected\": \"1px solid rgb(255, 180, 76)\",\n+    \"border_bottom_hover\": \"1px solid rgba(242, 151, 24, 0.3)\",\n+    \"border_top\": \"0px none rgb(197, 197, 197)\",\n+    \"border_top_selected\": \"0px none rgb(197, 197, 197)\",\n+    \"border_top_hover\": \"0px none rgb(197, 197, 197)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"dark\",\n+    \"background\": \"rgb(37, 37, 37)\",\n+    \"background_selected\": \"rgb(53, 53, 53)\",\n+    \"background_hover\": \"rgb(53, 53, 53)\",\n+    \"border_bottom\": \"0px none rgb(221, 221, 221)\",\n+    \"border_bottom_selected\": \"0px none rgb(221, 221, 221)\",\n+    \"border_bottom_hover\": \"0px none rgb(221, 221, 221)\",\n+    \"border_top\": \"2px solid rgb(37, 37, 37)\",\n+    \"border_top_selected\": \"2px solid rgb(0, 137, 255)\",\n+    \"border_top_hover\": \"2px solid rgb(0, 137, 255)\",\n+})\n+call-function: (\"check-colors\", {\n+    \"theme\": \"light\",\n+    \"background\": \"rgb(230, 230, 230)\",\n+    \"background_selected\": \"rgb(255, 255, 255)\",\n+    \"background_hover\": \"rgb(255, 255, 255)\",\n+    \"border_bottom\": \"0px none rgb(0, 0, 0)\",\n+    \"border_bottom_selected\": \"0px none rgb(0, 0, 0)\",\n+    \"border_bottom_hover\": \"0px none rgb(0, 0, 0)\",\n+    \"border_top\": \"2px solid rgb(230, 230, 230)\",\n+    \"border_top_selected\": \"2px solid rgb(0, 137, 255)\",\n+    \"border_top_hover\": \"2px solid rgb(0, 137, 255)\",\n+})"}]}