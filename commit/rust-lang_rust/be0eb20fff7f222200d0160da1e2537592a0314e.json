{"sha": "be0eb20fff7f222200d0160da1e2537592a0314e", "node_id": "C_kwDOAAsO6NoAKGJlMGViMjBmZmY3ZjIyMjIwMGQwMTYwZGExZTI1Mzc1OTJhMDMxNGU", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-01T22:25:38Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-12-01T22:25:38Z"}, "message": "Auto merge of #10006 - Jarcho:issue_9890, r=Manishearth\n\nDon't suggest removing `mut` from references in `redundant_static_lifetimes`\n\nfixes #9890\nchangelog: `redundant_static_lifetimes`: Don't suggest removing `mut` from references", "tree": {"sha": "7f38c6d460439bdbb7e7d5d912a58f5a37a88cfe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7f38c6d460439bdbb7e7d5d912a58f5a37a88cfe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be0eb20fff7f222200d0160da1e2537592a0314e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be0eb20fff7f222200d0160da1e2537592a0314e", "html_url": "https://github.com/rust-lang/rust/commit/be0eb20fff7f222200d0160da1e2537592a0314e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be0eb20fff7f222200d0160da1e2537592a0314e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "53e1b451375a22fbe7bba21cc0694dab2d08c745", "url": "https://api.github.com/repos/rust-lang/rust/commits/53e1b451375a22fbe7bba21cc0694dab2d08c745", "html_url": "https://github.com/rust-lang/rust/commit/53e1b451375a22fbe7bba21cc0694dab2d08c745"}, {"sha": "55096eab0f5b398294cba8b9182e06b1c1e3d423", "url": "https://api.github.com/repos/rust-lang/rust/commits/55096eab0f5b398294cba8b9182e06b1c1e3d423", "html_url": "https://github.com/rust-lang/rust/commit/55096eab0f5b398294cba8b9182e06b1c1e3d423"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "41f991a967bfd9929b025657ef21c8fc0aa573ca", "filename": "clippy_lints/src/redundant_static_lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/be0eb20fff7f222200d0160da1e2537592a0314e/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be0eb20fff7f222200d0160da1e2537592a0314e/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_static_lifetimes.rs?ref=be0eb20fff7f222200d0160da1e2537592a0314e", "patch": "@@ -66,7 +66,7 @@ impl RedundantStaticLifetimes {\n                         TyKind::Path(..) | TyKind::Slice(..) | TyKind::Array(..) | TyKind::Tup(..) => {\n                             if lifetime.ident.name == rustc_span::symbol::kw::StaticLifetime {\n                                 let snip = snippet(cx, borrow_type.ty.span, \"<type>\");\n-                                let sugg = format!(\"&{snip}\");\n+                                let sugg = format!(\"&{}{snip}\", borrow_type.mutbl.prefix_str());\n                                 span_lint_and_then(\n                                     cx,\n                                     REDUNDANT_STATIC_LIFETIMES,"}, {"sha": "bca777a890c3b249c2f0ae7bbf61c099a2d0705e", "filename": "tests/ui/redundant_static_lifetimes.fixed", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.fixed?ref=be0eb20fff7f222200d0160da1e2537592a0314e", "patch": "@@ -39,8 +39,14 @@ static STATIC_VAR_TUPLE: &(u8, u8) = &(1, 2); // ERROR Consider removing 'static\n \n static STATIC_VAR_ARRAY: &[u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n \n+static mut STATIC_MUT_SLICE: &mut [u32] = &mut [0];\n+\n fn main() {\n     let false_positive: &'static str = \"test\";\n+\n+    unsafe {\n+        STATIC_MUT_SLICE[0] = 0;\n+    }\n }\n \n trait Bar {"}, {"sha": "afe7644816d2e4f0420d04d1547c3080f45d984b", "filename": "tests/ui/redundant_static_lifetimes.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.rs?ref=be0eb20fff7f222200d0160da1e2537592a0314e", "patch": "@@ -39,8 +39,14 @@ static STATIC_VAR_TUPLE: &'static (u8, u8) = &(1, 2); // ERROR Consider removing\n \n static STATIC_VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removing 'static.\n \n+static mut STATIC_MUT_SLICE: &'static mut [u32] = &mut [0];\n+\n fn main() {\n     let false_positive: &'static str = \"test\";\n+\n+    unsafe {\n+        STATIC_MUT_SLICE[0] = 0;\n+    }\n }\n \n trait Bar {"}, {"sha": "b2cbd2d9d01b0350e7f31710c9fdec05f2cfc6ce", "filename": "tests/ui/redundant_static_lifetimes.stderr", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be0eb20fff7f222200d0160da1e2537592a0314e/tests%2Fui%2Fredundant_static_lifetimes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_static_lifetimes.stderr?ref=be0eb20fff7f222200d0160da1e2537592a0314e", "patch": "@@ -97,10 +97,16 @@ LL | static STATIC_VAR_ARRAY: &'static [u8; 1] = b\"T\"; // ERROR Consider removin\n    |                          -^^^^^^^-------- help: consider removing `'static`: `&[u8; 1]`\n \n error: statics have by default a `'static` lifetime\n-  --> $DIR/redundant_static_lifetimes.rs:65:16\n+  --> $DIR/redundant_static_lifetimes.rs:42:31\n+   |\n+LL | static mut STATIC_MUT_SLICE: &'static mut [u32] = &mut [0];\n+   |                              -^^^^^^^---------- help: consider removing `'static`: `&mut [u32]`\n+\n+error: statics have by default a `'static` lifetime\n+  --> $DIR/redundant_static_lifetimes.rs:71:16\n    |\n LL |     static V: &'static u8 = &17;\n    |               -^^^^^^^--- help: consider removing `'static`: `&u8`\n \n-error: aborting due to 17 previous errors\n+error: aborting due to 18 previous errors\n "}]}