{"sha": "40158901d5c7e65b2fb5adc6ce186bc308274954", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwMTU4OTAxZDVjN2U2NWIyZmI1YWRjNmNlMTg2YmMzMDgyNzQ5NTQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-04-06T14:43:52Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-04-06T14:43:52Z"}, "message": "Auto merge of #70737 - Centril:cleanup-lower-item-id, r=estebank\n\ncleanup `lower_item_id`\n\nr? @oli-obk", "tree": {"sha": "300cc05c99aebaeaa431487d90f560b7314821aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/300cc05c99aebaeaa431487d90f560b7314821aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/40158901d5c7e65b2fb5adc6ce186bc308274954", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/40158901d5c7e65b2fb5adc6ce186bc308274954", "html_url": "https://github.com/rust-lang/rust/commit/40158901d5c7e65b2fb5adc6ce186bc308274954", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/40158901d5c7e65b2fb5adc6ce186bc308274954/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd18bc9a4c142100a7230e1fd1cfe6be08214693", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd18bc9a4c142100a7230e1fd1cfe6be08214693", "html_url": "https://github.com/rust-lang/rust/commit/bd18bc9a4c142100a7230e1fd1cfe6be08214693"}, {"sha": "abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "url": "https://api.github.com/repos/rust-lang/rust/commits/abe0c2de43581bad6923af8c9e8c10d862fa5ffc", "html_url": "https://github.com/rust-lang/rust/commit/abe0c2de43581bad6923af8c9e8c10d862fa5ffc"}], "stats": {"total": 13, "additions": 2, "deletions": 11}, "files": [{"sha": "5fe007d6de298d3a1ff3bb0a6910a856c85d2e88", "filename": "src/librustc_ast_lowering/item.rs", "status": "modified", "additions": 2, "deletions": 11, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/40158901d5c7e65b2fb5adc6ce186bc308274954/src%2Flibrustc_ast_lowering%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40158901d5c7e65b2fb5adc6ce186bc308274954/src%2Flibrustc_ast_lowering%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_ast_lowering%2Fitem.rs?ref=40158901d5c7e65b2fb5adc6ce186bc308274954", "patch": "@@ -165,19 +165,10 @@ impl<'hir> LoweringContext<'_, 'hir> {\n             }\n             ItemKind::MacroDef(..) => SmallVec::new(),\n             ItemKind::Fn(..) | ItemKind::Impl { of_trait: None, .. } => smallvec![i.id],\n-            ItemKind::Static(ref ty, ..) => {\n+            ItemKind::Static(ref ty, ..) | ItemKind::Const(_, ref ty, ..) => {\n                 let mut ids = smallvec![i.id];\n                 if self.sess.features_untracked().impl_trait_in_bindings {\n-                    let mut visitor = ImplTraitTypeIdVisitor { ids: &mut ids };\n-                    visitor.visit_ty(ty);\n-                }\n-                ids\n-            }\n-            ItemKind::Const(_, ref ty, ..) => {\n-                let mut ids = smallvec![i.id];\n-                if self.sess.features_untracked().impl_trait_in_bindings {\n-                    let mut visitor = ImplTraitTypeIdVisitor { ids: &mut ids };\n-                    visitor.visit_ty(ty);\n+                    ImplTraitTypeIdVisitor { ids: &mut ids }.visit_ty(ty);\n                 }\n                 ids\n             }"}]}