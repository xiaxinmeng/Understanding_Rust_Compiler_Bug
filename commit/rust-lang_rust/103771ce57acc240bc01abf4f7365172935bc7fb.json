{"sha": "103771ce57acc240bc01abf4f7365172935bc7fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwMzc3MWNlNTdhY2MyNDBiYzAxYWJmNGY3MzY1MTcyOTM1YmM3ZmI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-03-29T00:01:32Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-03-30T17:44:21Z"}, "message": "Add a test", "tree": {"sha": "038bde36276477bd1b739d92066e2a680d914e03", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/038bde36276477bd1b739d92066e2a680d914e03"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/103771ce57acc240bc01abf4f7365172935bc7fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/103771ce57acc240bc01abf4f7365172935bc7fb", "html_url": "https://github.com/rust-lang/rust/commit/103771ce57acc240bc01abf4f7365172935bc7fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/103771ce57acc240bc01abf4f7365172935bc7fb/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "49ba323c8db6fd5fbe3d72f623c9d89cb09c508d", "url": "https://api.github.com/repos/rust-lang/rust/commits/49ba323c8db6fd5fbe3d72f623c9d89cb09c508d", "html_url": "https://github.com/rust-lang/rust/commit/49ba323c8db6fd5fbe3d72f623c9d89cb09c508d"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "4371dd2e16747784fc67047d13384ac5a8cccbe0", "filename": "src/test/ui/specialization/issue-70442.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/103771ce57acc240bc01abf4f7365172935bc7fb/src%2Ftest%2Fui%2Fspecialization%2Fissue-70442.rs", "raw_url": "https://github.com/rust-lang/rust/raw/103771ce57acc240bc01abf4f7365172935bc7fb/src%2Ftest%2Fui%2Fspecialization%2Fissue-70442.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspecialization%2Fissue-70442.rs?ref=103771ce57acc240bc01abf4f7365172935bc7fb", "patch": "@@ -0,0 +1,23 @@\n+#![feature(specialization)]\n+\n+// check-pass\n+\n+trait Trait {\n+    type Assoc;\n+}\n+\n+impl<T> Trait for T {\n+    default type Assoc = bool;\n+}\n+\n+// This impl inherits the `Assoc` definition from above and \"locks it in\", or finalizes it, making\n+// child impls unable to further specialize it. However, since the specialization graph didn't\n+// correctly track this, we would refuse to project `Assoc` from this impl, even though that should\n+// happen for items that are final.\n+impl Trait for () {}\n+\n+fn foo<X: Trait<Assoc=bool>>() {}\n+\n+fn main() {\n+    foo::<()>();  // `<() as Trait>::Assoc` is normalized to `bool` correctly\n+}"}]}