{"sha": "509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "node_id": "C_kwDOAAsO6NoAKDUwOWQ4YWQ0NTRlZTQ4ZDZiOGYyNDcyODc1NWQ4ZWQ5ZWM5NjI4Yzg", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-10-27T20:36:27Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-10-28T00:48:26Z"}, "message": "rustdoc: remove redundant `div.search-container`\n\nThis wrapper DIV was originally added in\n89e1fb322321c05497caa01372ceb7d5b57fa680, when it allowed the search bar's\nsize to be calculated without using `calc()`. This `width` hack can be\nremoved using flexbox.", "tree": {"sha": "54fca4975101beb7e1d93b239da7da6054ac7846", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/54fca4975101beb7e1d93b239da7da6054ac7846"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "html_url": "https://github.com/rust-lang/rust/commit/509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "126dbdc9c78446ad4cf41f5f8510a7cee59ff966", "url": "https://api.github.com/repos/rust-lang/rust/commits/126dbdc9c78446ad4cf41f5f8510a7cee59ff966", "html_url": "https://github.com/rust-lang/rust/commit/126dbdc9c78446ad4cf41f5f8510a7cee59ff966"}], "stats": {"total": 55, "additions": 24, "deletions": 31}, "files": [{"sha": "65f6a79d5892109c7b78fc5a213fbb0249f0919e", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 12, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "patch": "@@ -679,13 +679,16 @@ nav.sub {\n \tdisplay: flex;\n \talign-items: center;\n }\n-nav.sub form {\n+.search-form {\n+\tposition: relative;\n+\tdisplay: flex;\n+\theight: 34px;\n \tflex-grow: 1;\n }\n .source nav.sub {\n \tmargin: 0 0 15px 0;\n }\n-.source nav.sub form {\n+.source .search-form {\n \tmargin-left: 32px;\n }\n \n@@ -776,11 +779,6 @@ table,\n \tpadding-right: 1.25rem;\n }\n \n-.search-container {\n-\tposition: relative;\n-\tdisplay: flex;\n-\theight: 34px;\n-}\n .search-results-title {\n \tmargin-top: 0;\n \twhite-space: nowrap;\n@@ -856,15 +854,12 @@ so that we can apply CSS-filters to change the arrow color in themes */\n \t   -webkit-appearance: textfield for search inputs. That\n \t   causes rounded corners and no border on iOS Safari. */\n \t-webkit-appearance: none;\n-\t/* Override Normalize.css: we have margins and do\n-\t not want to overflow */\n-\tbox-sizing: border-box !important;\n \toutline: none;\n \tborder: 1px solid var(--border-color);\n \tborder-radius: 2px;\n \tpadding: 8px;\n \tfont-size: 1rem;\n-\twidth: 100%;\n+\tflex-grow: 1;\n \tbackground-color: var(--button-background-color);\n \tcolor: var(--search-color);\n }\n@@ -1951,7 +1946,7 @@ in storage.js\n \t\tflex-direction: column;\n \t}\n \n-\tnav.sub form {\n+\t.search-form {\n \t\talign-self: stretch;\n \t}\n "}, {"sha": "33480fa41cf07767448a30d3d11af6e144715be9", "filename": "src/librustdoc/html/static/js/main.js", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fmain.js?ref=509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "patch": "@@ -932,7 +932,7 @@ function loadCss(cssFileName) {\n      * Hide all the popover menus.\n      */\n     window.hidePopoverMenus = function() {\n-        onEachLazy(document.querySelectorAll(\".search-container .popover\"), elem => {\n+        onEachLazy(document.querySelectorAll(\".search-form .popover\"), elem => {\n             elem.style.display = \"none\";\n         });\n     };"}, {"sha": "c3238691687899cc9dafea69e41bb2e095323b43", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 16, "deletions": 18, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/509d8ad454ee48d6b8f24728755d8ed9ec9628c8/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=509d8ad454ee48d6b8f24728755d8ed9ec9628c8", "patch": "@@ -115,24 +115,22 @@ <h2></h2> {#- -#}\n                 </a> {#- -#}\n                 {%- endif -%}\n                 <form class=\"search-form\"> {#- -#}\n-                    <div class=\"search-container\"> {#- -#}\n-                        <span></span> {#- This empty span is a hacky fix for Safari - See #93184 -#}\n-                        <input {# -#}\n-                            class=\"search-input\" {# -#}\n-                            name=\"search\" {# -#}\n-                            autocomplete=\"off\" {# -#}\n-                            spellcheck=\"false\" {# -#}\n-                            placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n-                            type=\"search\"> {#- -#}\n-                        <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {#- -#}\n-                            <a href=\"{{page.root_path|safe}}help.html\">?</a> {#- -#}\n-                        </div> {#- -#}\n-                        <div id=\"settings-menu\" tabindex=\"-1\"> {#- -#}\n-                            <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {#- -#}\n-                                <img width=\"22\" height=\"22\" alt=\"Change settings\" {# -#}\n-                                 src=\"{{static_root_path|safe}}wheel{{page.resource_suffix}}.svg\"> {#- -#}\n-                            </a> {#- -#}\n-                        </div> {#- -#}\n+                    <span></span> {#- This empty span is a hacky fix for Safari - See #93184 -#}\n+                    <input {# -#}\n+                        class=\"search-input\" {# -#}\n+                        name=\"search\" {# -#}\n+                        autocomplete=\"off\" {# -#}\n+                        spellcheck=\"false\" {# -#}\n+                        placeholder=\"Click or press \u2018S\u2019 to search, \u2018?\u2019 for more options\u2026\" {# -#}\n+                        type=\"search\"> {#- -#}\n+                    <div id=\"help-button\" title=\"help\" tabindex=\"-1\"> {#- -#}\n+                        <a href=\"{{page.root_path|safe}}help.html\">?</a> {#- -#}\n+                    </div> {#- -#}\n+                    <div id=\"settings-menu\" tabindex=\"-1\"> {#- -#}\n+                        <a href=\"{{page.root_path|safe}}settings.html\" title=\"settings\"> {#- -#}\n+                            <img width=\"22\" height=\"22\" alt=\"Change settings\" {# -#}\n+                             src=\"{{static_root_path|safe}}wheel{{page.resource_suffix}}.svg\"> {#- -#}\n+                        </a> {#- -#}\n                     </div> {#- -#}\n                 </form> {#- -#}\n             </nav> {#- -#}"}]}