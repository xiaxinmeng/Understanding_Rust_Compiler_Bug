{"sha": "90f6f6080ea5f3f8588ed4a10056820e418e78d0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwZjZmNjA4MGVhNWYzZjg1ODhlZDRhMTAwNTY4MjBlNDE4ZTc4ZDA=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-11-18T19:02:02Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-11-18T19:20:14Z"}, "message": "Fix test", "tree": {"sha": "ee50cb1890e5460b8bac3e8b8fd163fd681dc948", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ee50cb1890e5460b8bac3e8b8fd163fd681dc948"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/90f6f6080ea5f3f8588ed4a10056820e418e78d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/90f6f6080ea5f3f8588ed4a10056820e418e78d0", "html_url": "https://github.com/rust-lang/rust/commit/90f6f6080ea5f3f8588ed4a10056820e418e78d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/90f6f6080ea5f3f8588ed4a10056820e418e78d0/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2cc593381aa835b708dfc2df05809e7574be0d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2cc593381aa835b708dfc2df05809e7574be0d6", "html_url": "https://github.com/rust-lang/rust/commit/b2cc593381aa835b708dfc2df05809e7574be0d6"}], "stats": {"total": 16, "additions": 6, "deletions": 10}, "files": [{"sha": "787b714b3ada73b7020907a6cee3ce20ab900784", "filename": "crates/ra_ide_api/src/hover.rs", "status": "modified", "additions": 6, "deletions": 10, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/90f6f6080ea5f3f8588ed4a10056820e418e78d0/crates%2Fra_ide_api%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90f6f6080ea5f3f8588ed4a10056820e418e78d0/crates%2Fra_ide_api%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fhover.rs?ref=90f6f6080ea5f3f8588ed4a10056820e418e78d0", "patch": "@@ -197,8 +197,7 @@ pub(crate) fn hover(db: &RootDatabase, position: FilePosition) -> Option<RangeIn\n             },\n             ast::Name(name) => {\n                 if let Some(name_kind) = classify_name(db, token.with_ast(&name)).map(|d| d.kind) {\n-                    let mut _b: bool = true;\n-                    res.extend(hover_text_from_name_kind(db, name_kind, &mut _b));\n+                    res.extend(hover_text_from_name_kind(db, name_kind, &mut true));\n                 }\n \n                 if !res.is_empty() {\n@@ -721,23 +720,20 @@ fn func(foo: i32) { if true { <|>foo; }; }\n \n     #[test]\n     fn test_hover_through_macro() {\n-        let (analysis, position) = single_file_with_position(\n+        check_hover_result(\n             \"\n+            //- /lib.rs\n             macro_rules! id {\n-                ($($tt:$tt)*) => { $($tt)* }\n+                ($($tt:tt)*) => { $($tt)* }\n             }\n-\n             fn foo() {}\n-\n             id! {\n                 fn bar() {\n-                    foo<|>();\n+                    fo<|>o();\n                 }\n             }\n             \",\n+            &[\"fn foo()\"],\n         );\n-        let hover = analysis.hover(position).unwrap().unwrap();\n-        assert_eq!(trim_markup_opt(hover.info.first()), Some(\"fn foo()\"));\n-        assert_eq!(hover.info.is_exact(), true);\n     }\n }"}]}