{"sha": "2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMGY5YmQzNTQ5M2RlZjVlMjNmMGY0M2RkZWJhNTRkYTlkNzg4YjQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-23T16:01:20Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-08-23T16:01:20Z"}, "message": "auto merge of #8695 : thestinger/rust/build, r=pcwalton\n\nWe currently have no need for the frame pointers on any platform. They\r\nmay eventually be needed on platforms without an equivalent to the DWARF\r\ncall frame information to walk the stack in the garbage collector.\r\n\r\nCloses #7477", "tree": {"sha": "3b369d9141eba2339b355b1ec284261526d9dc85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b369d9141eba2339b355b1ec284261526d9dc85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "html_url": "https://github.com/rust-lang/rust/commit/2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f8c4f0ea9c96218dbc81081799e77875fbb071de", "url": "https://api.github.com/repos/rust-lang/rust/commits/f8c4f0ea9c96218dbc81081799e77875fbb071de", "html_url": "https://github.com/rust-lang/rust/commit/f8c4f0ea9c96218dbc81081799e77875fbb071de"}, {"sha": "0ac02e7c4fcdda35940eccba385001e8b882c63e", "url": "https://api.github.com/repos/rust-lang/rust/commits/0ac02e7c4fcdda35940eccba385001e8b882c63e", "html_url": "https://github.com/rust-lang/rust/commit/0ac02e7c4fcdda35940eccba385001e8b882c63e"}], "stats": {"total": 11, "additions": 2, "deletions": 9}, "files": [{"sha": "896718be6c451b9cfa67248c1168bcee2809ab5b", "filename": "mk/llvm.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/mk%2Fllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/mk%2Fllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fllvm.mk?ref=2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "patch": "@@ -26,7 +26,7 @@ ifeq ($(CFG_LLVM_ROOT),)\n \n $$(LLVM_CONFIG_$(1)): $$(LLVM_DEPS)\n \t@$$(call E, make: llvm)\n-\t$$(Q)$$(MAKE) -C $$(CFG_LLVM_BUILD_DIR_$(1)) $$(CFG_LLVM_BUILD_ENV)\n+\t$$(Q)$$(MAKE) -C $$(CFG_LLVM_BUILD_DIR_$(1))\n \t$$(Q)touch $$(LLVM_CONFIG_$(1))\n endif\n "}, {"sha": "3e7ad914daba19fab8c1c62a9c3e16a031a4af08", "filename": "mk/platform.mk", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "patch": "@@ -26,10 +26,7 @@ endef\n $(foreach t,$(CFG_TARGET_TRIPLES),$(eval $(call DEF_OSTYPE_VAR,$(t))))\n $(foreach t,$(CFG_TARGET_TRIPLES),$(info cfg: os for $(t) is $(OSTYPE_$(t))))\n \n-# FIXME: no-omit-frame-pointer is just so that task_start_wrapper\n-# has a frame pointer and the stack walker can understand it. Turning off\n-# frame pointers everywhere is overkill\n-CFG_GCCISH_CFLAGS += -fno-omit-frame-pointer -DUSE_UTF8\n+CFG_GCCISH_CFLAGS += -DUSE_UTF8\n \n # On Darwin, we need to run dsymutil so the debugging information ends\n # up in the right place.  On other platforms, it automatically gets\n@@ -153,7 +150,6 @@ CFG_GCCISH_POST_LIB_FLAGS_x86_64-unknown-linux-gnu := -Wl,-no-whole-archive\n CFG_DEF_SUFFIX_x86_64-unknown-linux-gnu := .linux.def\n CFG_INSTALL_NAME_x86_64-unknown-linux-gnu =\n CFG_LIBUV_LINK_FLAGS_x86_64-unknown-linux-gnu =\n-CFG_LLVM_BUILD_ENV_x86_64-unknown-linux-gnu=\"CXXFLAGS=-fno-omit-frame-pointer\"\n CFG_EXE_SUFFIX_x86_64-unknown-linux-gnu =\n CFG_WINDOWSY_x86_64-unknown-linux-gnu :=\n CFG_UNIXY_x86_64-unknown-linux-gnu := 1\n@@ -179,7 +175,6 @@ CFG_GCCISH_POST_LIB_FLAGS_i686-unknown-linux-gnu := -Wl,-no-whole-archive\n CFG_DEF_SUFFIX_i686-unknown-linux-gnu := .linux.def\n CFG_INSTALL_NAME_i686-unknown-linux-gnu =\n CFG_LIBUV_LINK_FLAGS_i686-unknown-linux-gnu =\n-CFG_LLVM_BUILD_ENV_i686-unknown-linux-gnu=\"CXXFLAGS=-fno-omit-frame-pointer\"\n CFG_EXE_SUFFIX_i686-unknown-linux-gnu =\n CFG_WINDOWSY_i686-unknown-linux-gnu :=\n CFG_UNIXY_i686-unknown-linux-gnu := 1"}, {"sha": "7e9a790e215aa161996d9c4a466cf43cffd0e958", "filename": "src/rustllvm/RustWrapper.cpp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/src%2Frustllvm%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/2c0f9bd35493def5e23f0f43ddeba54da9d788b4/src%2Frustllvm%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustllvm%2FRustWrapper.cpp?ref=2c0f9bd35493def5e23f0f43ddeba54da9d788b4", "patch": "@@ -342,7 +342,6 @@ LLVMRustBuildJIT(void* mem,\n   std::string Err;\n   TargetOptions Options;\n   Options.JITEmitDebugInfo = true;\n-  Options.NoFramePointerElim = true;\n   Options.EnableSegmentedStacks = EnableSegmentedStacks;\n   RustMCJITMemoryManager* MM = (RustMCJITMemoryManager*) mem;\n   assert(MM);\n@@ -393,7 +392,6 @@ LLVMRustWriteOutputFile(LLVMPassManagerRef PMR,\n   }\n \n   TargetOptions Options;\n-  Options.NoFramePointerElim = true;\n   Options.EnableSegmentedStacks = EnableSegmentedStacks;\n   Options.FixedStackSegmentSize = 2 * 1024 * 1024;  // XXX: This is too big.\n "}]}