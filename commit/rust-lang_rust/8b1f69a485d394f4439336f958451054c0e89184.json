{"sha": "8b1f69a485d394f4439336f958451054c0e89184", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiMWY2OWE0ODVkMzk0ZjQ0MzkzMzZmOTU4NDUxMDU0YzBlODkxODQ=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2018-12-02T00:20:58Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2018-12-02T00:21:02Z"}, "message": "Downgrade unsafe_vector_initialization to restriction\n\nThis lint looks for:\n\n    let mut vec = Vec::with_capacity(len);\n    vec.set_len(len);\n\nThe suggested replacement is `vec![0; len]`.\n\nThis is far too opinionated to be a deny-by-default lint because the performance\ncharacteristics of the suggested replacement are totally different.\n\nI am not convinced that this lint has value beyond what deny(unsafe_code) gives\nyou. Unsafe code is unsafe but please don't deny-by-default lint it if that's\nthe only reason.", "tree": {"sha": "c55a9b6fc84cf53f393b4706772211b15af946b6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c55a9b6fc84cf53f393b4706772211b15af946b6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b1f69a485d394f4439336f958451054c0e89184", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJcAygRAAoJEPm6FDuV/22CJOwP/1DItpWrcguqGf9n8xBNTOkk\nD9ygQbgtsbr76nn/7k4PiEP0iO9SZhnq4THvbkVh9W/LQFk0RKGmamd/iTyKO1ky\nfQozUSacef09LCBWQikPEX79X+BTw6wBCy3PjHo8/0GX95EeI3B/5PuAe/+kpwjY\n96XH+yHYyINai80oDJWaYAF6ROi6ID8eXBd8XUaWCj8RHTZdfiLRX3C8HfoWO5Kk\nqJkDkAistcQNOzI3bWbV92nRrOjUEOCZyyaoyhQzciqzI2dsoaNc69K+ZZqoNgn9\n39OwDrSxLsBOqoYH88cKRt/ORZ2IwFWkecYsWQLRLOU7kxCblWh07HChYmxlHiTT\nlSOYyen2AipxYTPBBUGKw/NLyh6ehtLTx03U6fr+rzBE2rPsz8H/jHqCca/M+HVU\nwD9Ew5UCijorftwTtxim1Dx4F9TcBkwMegI4gThFJYY85Pzkd8sXY3oL9h/SD6m9\n6U1Euu/qyVAbHn/4cTnGiVCYajlmMXiEIPRMKfVMT/aZBF8n20oXFJ4QNlVhVnWK\nNJU6mlmcWaO6g5dqDnTYkwXFzDgEbPBENbcGAQto88ijpkRickgbG8mjcxeO80ch\nGoQIa1LR/0Cz+Dl146uq+k6O7IuG62IKDeAKcjc3uBb7+O3M3vkaqtxZySO3Pvzz\n0ohuFodPMEB6JMXnuF5P\n=2BPy\n-----END PGP SIGNATURE-----", "payload": "tree c55a9b6fc84cf53f393b4706772211b15af946b6\nparent c669727df4de8a9b155b4ebd389f56cc68fa3b30\nauthor David Tolnay <dtolnay@gmail.com> 1543710058 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1543710062 -0800\n\nDowngrade unsafe_vector_initialization to restriction\n\nThis lint looks for:\n\n    let mut vec = Vec::with_capacity(len);\n    vec.set_len(len);\n\nThe suggested replacement is `vec![0; len]`.\n\nThis is far too opinionated to be a deny-by-default lint because the performance\ncharacteristics of the suggested replacement are totally different.\n\nI am not convinced that this lint has value beyond what deny(unsafe_code) gives\nyou. Unsafe code is unsafe but please don't deny-by-default lint it if that's\nthe only reason.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b1f69a485d394f4439336f958451054c0e89184", "html_url": "https://github.com/rust-lang/rust/commit/8b1f69a485d394f4439336f958451054c0e89184", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b1f69a485d394f4439336f958451054c0e89184/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c669727df4de8a9b155b4ebd389f56cc68fa3b30", "url": "https://api.github.com/repos/rust-lang/rust/commits/c669727df4de8a9b155b4ebd389f56cc68fa3b30", "html_url": "https://github.com/rust-lang/rust/commit/c669727df4de8a9b155b4ebd389f56cc68fa3b30"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "c2e625f3d52abee2d71e6764eb3404570fb083e4", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8b1f69a485d394f4439336f958451054c0e89184/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b1f69a485d394f4439336f958451054c0e89184/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=8b1f69a485d394f4439336f958451054c0e89184", "patch": "@@ -495,6 +495,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         panic_unimplemented::UNIMPLEMENTED,\n         shadow::SHADOW_REUSE,\n         shadow::SHADOW_SAME,\n+        slow_vector_initialization::UNSAFE_VECTOR_INITIALIZATION,\n         strings::STRING_ADD,\n         write::PRINT_STDOUT,\n         write::USE_DEBUG,\n@@ -727,7 +728,6 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         returns::UNUSED_UNIT,\n         serde_api::SERDE_API_MISUSE,\n         slow_vector_initialization::SLOW_VECTOR_INITIALIZATION,\n-        slow_vector_initialization::UNSAFE_VECTOR_INITIALIZATION,\n         strings::STRING_LIT_AS_BYTES,\n         suspicious_trait_impl::SUSPICIOUS_ARITHMETIC_IMPL,\n         suspicious_trait_impl::SUSPICIOUS_OP_ASSIGN_IMPL,\n@@ -974,7 +974,6 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n         ranges::ITERATOR_STEP_BY_ZERO,\n         regex::INVALID_REGEX,\n         serde_api::SERDE_API_MISUSE,\n-        slow_vector_initialization::UNSAFE_VECTOR_INITIALIZATION,\n         suspicious_trait_impl::SUSPICIOUS_ARITHMETIC_IMPL,\n         suspicious_trait_impl::SUSPICIOUS_OP_ASSIGN_IMPL,\n         swap::ALMOST_SWAPPED,"}, {"sha": "2964bb6fac7db32222dea6838202c380908f2555", "filename": "clippy_lints/src/slow_vector_initialization.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8b1f69a485d394f4439336f958451054c0e89184/clippy_lints%2Fsrc%2Fslow_vector_initialization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b1f69a485d394f4439336f958451054c0e89184/clippy_lints%2Fsrc%2Fslow_vector_initialization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fslow_vector_initialization.rs?ref=8b1f69a485d394f4439336f958451054c0e89184", "patch": "@@ -55,7 +55,7 @@ declare_clippy_lint! {\n /// ```\n declare_clippy_lint! {\n     pub UNSAFE_VECTOR_INITIALIZATION,\n-    correctness,\n+    restriction,\n     \"unsafe vector initialization\"\n }\n "}]}