{"sha": "f9df658aad43b3a0328052b5347cd4a8cae8328f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY5ZGY2NThhYWQ0M2IzYTAzMjgwNTJiNTM0N2NkNGE4Y2FlODMyOGY=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2020-09-10T19:20:06Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-09-10T19:20:06Z"}, "message": "Rollup merge of #76555 - alilleybrinker:reword_trivial_casts_lint_doc, r=steveklabnik\n\nReword `trivial_casts` lint in rustc book to better explain what it does.\n\nThe current description of the trivial casts lint under the \"allowed\nby default\" listing in the rustc book indicates the lint is for casts\nwhich may be removed, which is less clear than saying it's for casts\nwhich may be replaced by coercion (which is the wording used by the\nerror message included in the doc).\n\nThis commit changes the wording slightly to better describe what the\nlint does.\n\nThis issue bit me in some recent code where I was attempting to\nconvert a `Vec<SomeType>` to a `Vec<SomeTraitObject>`, and\nhit my project-wide `#![deny(trivial_casts)]` with\n`map(|o| Box::new(o) as TraitObject)`. I'd read the book docs for\n`trivial_casts` and was surprised by the error, as I took it to mean\nthe cast ought to be removed (rather than replaced by ascription\nin this case). Removing the cast meant other code didn't compile,\nand I then found issues like #23742 and realized my misunderstanding.", "tree": {"sha": "249b4abcfd934c505515df9e6c704b4855e5d740", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/249b4abcfd934c505515df9e6c704b4855e5d740"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f9df658aad43b3a0328052b5347cd4a8cae8328f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfWnxmCRBK7hj4Ov3rIwAAdHIIABdC5OpC6Gz51FMjI5XBDAaK\nXwnu1NEfwDcJ2O8hSB7vMKbKL4MCl4YfjRQgCX6RtWD9J5XBFG6Z9TPkaF578C6u\nLryaobiJElZBNZ4L/8Eaozk3nk5JsUAn5gREnaud6ZLv8BGJF4U3YIiCjjpNw8AV\nVNFNR8u1iPFz5eYLZj5p0ZJ+CAT6rsI3yL7Dr5/7Ry0eMqQGOnXKAO900MLlgew/\nNFrfwn4k059ihdXti+UzwW+kFgk8GSwSr7eo+0TDj43Dl4iPEXkE6n414JjFN+3G\npleqaovKAL5kY03qfXVzA/bn8luPhVoFnsRLdPna7XUOibXgLuDGzMoPOlunX8w=\n=R5F+\n-----END PGP SIGNATURE-----\n", "payload": "tree 249b4abcfd934c505515df9e6c704b4855e5d740\nparent 2df1487fc912ccf10e67e836b76def4a2675a568\nparent 01bf35010fb76154475fb722773731073fb50fa3\nauthor Tyler Mandry <tmandry@gmail.com> 1599765606 -0700\ncommitter GitHub <noreply@github.com> 1599765606 -0700\n\nRollup merge of #76555 - alilleybrinker:reword_trivial_casts_lint_doc, r=steveklabnik\n\nReword `trivial_casts` lint in rustc book to better explain what it does.\n\nThe current description of the trivial casts lint under the \"allowed\nby default\" listing in the rustc book indicates the lint is for casts\nwhich may be removed, which is less clear than saying it's for casts\nwhich may be replaced by coercion (which is the wording used by the\nerror message included in the doc).\n\nThis commit changes the wording slightly to better describe what the\nlint does.\n\nThis issue bit me in some recent code where I was attempting to\nconvert a `Vec<SomeType>` to a `Vec<SomeTraitObject>`, and\nhit my project-wide `#![deny(trivial_casts)]` with\n`map(|o| Box::new(o) as TraitObject)`. I'd read the book docs for\n`trivial_casts` and was surprised by the error, as I took it to mean\nthe cast ought to be removed (rather than replaced by ascription\nin this case). Removing the cast meant other code didn't compile,\nand I then found issues like #23742 and realized my misunderstanding.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f9df658aad43b3a0328052b5347cd4a8cae8328f", "html_url": "https://github.com/rust-lang/rust/commit/f9df658aad43b3a0328052b5347cd4a8cae8328f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f9df658aad43b3a0328052b5347cd4a8cae8328f/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2df1487fc912ccf10e67e836b76def4a2675a568", "url": "https://api.github.com/repos/rust-lang/rust/commits/2df1487fc912ccf10e67e836b76def4a2675a568", "html_url": "https://github.com/rust-lang/rust/commit/2df1487fc912ccf10e67e836b76def4a2675a568"}, {"sha": "01bf35010fb76154475fb722773731073fb50fa3", "url": "https://api.github.com/repos/rust-lang/rust/commits/01bf35010fb76154475fb722773731073fb50fa3", "html_url": "https://github.com/rust-lang/rust/commit/01bf35010fb76154475fb722773731073fb50fa3"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "d2d8c471efc96d0b5989026083ca18f1c84a140d", "filename": "src/doc/rustc/src/lints/listing/allowed-by-default.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f9df658aad43b3a0328052b5347cd4a8cae8328f/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fallowed-by-default.md", "raw_url": "https://github.com/rust-lang/rust/raw/f9df658aad43b3a0328052b5347cd4a8cae8328f/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fallowed-by-default.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fallowed-by-default.md?ref=f9df658aad43b3a0328052b5347cd4a8cae8328f", "patch": "@@ -232,7 +232,8 @@ error: lifetime name `'x` only used once\n \n ## trivial-casts\n \n-This lint detects trivial casts which could be removed. Some example code\n+This lint detects trivial casts which could be replaced with coercion, which may require\n+type ascription or a temporary variable. Some example code\n that triggers this lint:\n \n ```rust"}]}