{"sha": "f0f7b8d44abde324082a91e47f08112f4c0adae8", "node_id": "C_kwDOAAsO6NoAKGYwZjdiOGQ0NGFiZGUzMjQwODJhOTFlNDdmMDgxMTJmNGMwYWRhZTg", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-05T20:35:09Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-08T22:35:20Z"}, "message": "Pretty print break and continue without redundant space", "tree": {"sha": "28092853f64da98a77257eb95c7ed5bb8a02b840", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/28092853f64da98a77257eb95c7ed5bb8a02b840"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f0f7b8d44abde324082a91e47f08112f4c0adae8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmGxMykACgkQ+boUO5X/\nbYLX2xAAu9A/K1Dtfr0m65AEe1HnWdAXuSp+cSzvozc52d7Tl2DC7UCBGNoBy/r6\nZSHcwGKs3IHFniFkMfSWWf/Cy0bQcOjmXz+///NZu6dwQl/70S4JRZTGxs5DcGqb\nQEeQqvcuJQrsbnnftxyU5L7W3ctpJX60gnrLCYQMebk2WH6q5CjfuEyI5jNiNX67\nuoYpQXZFw2ENUem2nqW5UO9PH0fp6e3vmga0pV0dmZFg8SKeKEX3Y2tshxcTGKmd\nxlOWcxAIVFmcoPhpxdw2YT0OdxY6NV6l2CTNwJY/4SQBnQVg6BJY7a/pHbpyBSoo\n+WGYUsM3NrWoV/WcoVLY/bsCyyMonPxzBBGYiybZ8PEo2IbxB+ZaUjtWK+COsjSy\ngMq8fCYdMVF+6d7ABHFHWP0TSEyVlK5SuPIy14zrci0uO+mMkaz3mrEmMHMEXgbl\nCILCSoDOAjzUKl6MreK149knXkgFBcnrCEfvkNgryCiHJtWREaDHzkk47bmrtv0n\nCrsiUNk+WFujtAVi5u6+/E31TwSIan+5Rm0VakQTloRvun2WpljOtGjKGcwQaez7\n5h30epK12zJ7MdnbaoHWjPUqF/Xjx8ZmhFZ21TQua3j2TRkf0+zWgFZ/E0CJDeI8\nPNBOf2qDE24IVn5VXh8thrJSzD9VbPvdbI+dhNpiOmucSNyj+UI=\n=X2i5\n-----END PGP SIGNATURE-----", "payload": "tree 28092853f64da98a77257eb95c7ed5bb8a02b840\nparent e6b883c74f49f32cb5d1cbad3457f2b8805a4a38\nauthor David Tolnay <dtolnay@gmail.com> 1638736509 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1639002920 -0800\n\nPretty print break and continue without redundant space\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f0f7b8d44abde324082a91e47f08112f4c0adae8", "html_url": "https://github.com/rust-lang/rust/commit/f0f7b8d44abde324082a91e47f08112f4c0adae8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f0f7b8d44abde324082a91e47f08112f4c0adae8/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6b883c74f49f32cb5d1cbad3457f2b8805a4a38", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6b883c74f49f32cb5d1cbad3457f2b8805a4a38", "html_url": "https://github.com/rust-lang/rust/commit/e6b883c74f49f32cb5d1cbad3457f2b8805a4a38"}], "stats": {"total": 27, "additions": 11, "deletions": 16}, "files": [{"sha": "6c70cafb01fabe0a4043e202bfd93f60285cb406", "filename": "compiler/rustc_ast_pretty/src/pprust/state.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f0f7b8d44abde324082a91e47f08112f4c0adae8/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0f7b8d44abde324082a91e47f08112f4c0adae8/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpprust%2Fstate.rs?ref=f0f7b8d44abde324082a91e47f08112f4c0adae8", "patch": "@@ -2135,22 +2135,20 @@ impl<'a> State<'a> {\n             ast::ExprKind::Path(Some(ref qself), ref path) => self.print_qpath(path, qself, true),\n             ast::ExprKind::Break(opt_label, ref opt_expr) => {\n                 self.word(\"break\");\n-                self.space();\n                 if let Some(label) = opt_label {\n-                    self.print_ident(label.ident);\n                     self.space();\n+                    self.print_ident(label.ident);\n                 }\n                 if let Some(ref expr) = *opt_expr {\n-                    self.print_expr_maybe_paren(expr, parser::PREC_JUMP);\n                     self.space();\n+                    self.print_expr_maybe_paren(expr, parser::PREC_JUMP);\n                 }\n             }\n             ast::ExprKind::Continue(opt_label) => {\n                 self.word(\"continue\");\n-                self.space();\n                 if let Some(label) = opt_label {\n+                    self.space();\n                     self.print_ident(label.ident);\n-                    self.space()\n                 }\n             }\n             ast::ExprKind::Ret(ref result) => {"}, {"sha": "c3601d0997c236af711681ee1d9fd6b3ef20072f", "filename": "compiler/rustc_hir_pretty/src/lib.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f0f7b8d44abde324082a91e47f08112f4c0adae8/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0f7b8d44abde324082a91e47f08112f4c0adae8/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_pretty%2Fsrc%2Flib.rs?ref=f0f7b8d44abde324082a91e47f08112f4c0adae8", "patch": "@@ -1543,22 +1543,20 @@ impl<'a> State<'a> {\n             hir::ExprKind::Path(ref qpath) => self.print_qpath(qpath, true),\n             hir::ExprKind::Break(destination, ref opt_expr) => {\n                 self.word(\"break\");\n-                self.space();\n                 if let Some(label) = destination.label {\n-                    self.print_ident(label.ident);\n                     self.space();\n+                    self.print_ident(label.ident);\n                 }\n                 if let Some(ref expr) = *opt_expr {\n-                    self.print_expr_maybe_paren(expr, parser::PREC_JUMP);\n                     self.space();\n+                    self.print_expr_maybe_paren(expr, parser::PREC_JUMP);\n                 }\n             }\n             hir::ExprKind::Continue(destination) => {\n                 self.word(\"continue\");\n-                self.space();\n                 if let Some(label) = destination.label {\n+                    self.space();\n                     self.print_ident(label.ident);\n-                    self.space()\n                 }\n             }\n             hir::ExprKind::Ret(ref result) => {"}, {"sha": "e32f5ca24ea0f9de389575b53363f89279239cd5", "filename": "src/test/pretty/ast-stmt-expr-attr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fast-stmt-expr-attr.rs?ref=f0f7b8d44abde324082a91e47f08112f4c0adae8", "patch": "@@ -110,8 +110,8 @@ fn syntax() {\n     let _ = #[attr] &mut 0;\n     let _ = #[attr] &#[attr] 0;\n     let _ = #[attr] &mut #[attr] 0;\n-    let _ = #[attr] break ;\n-    let _ = #[attr] continue ;\n+    let _ = #[attr] break;\n+    let _ = #[attr] continue;\n     let _ = #[attr] return;\n     let _ = #[attr] foo!();\n     let _ = #[attr] foo!(#! [attr]);"}, {"sha": "9b10fd86c4778d8ee4f744d6566c667d6c5cea63", "filename": "src/test/pretty/hir-pretty-loop.pp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp", "raw_url": "https://github.com/rust-lang/rust/raw/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fhir-pretty-loop.pp?ref=f0f7b8d44abde324082a91e47f08112f4c0adae8", "patch": "@@ -6,4 +6,4 @@\n // pretty-mode:hir\n // pp-exact:hir-pretty-loop.pp\n \n-pub fn foo() { loop { break ; } }\n+pub fn foo() { loop { break; } }"}, {"sha": "01533cd8107b07e95890c0399a6dcecaef8883b1", "filename": "src/test/pretty/stmt_expr_attributes.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f0f7b8d44abde324082a91e47f08112f4c0adae8/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fstmt_expr_attributes.rs?ref=f0f7b8d44abde324082a91e47f08112f4c0adae8", "patch": "@@ -229,9 +229,8 @@ fn _11() {\n     let _ = #[rustc_dummy] &mut 0;\n     let _ = #[rustc_dummy] &#[rustc_dummy] 0;\n     let _ = #[rustc_dummy] &mut #[rustc_dummy] 0;\n-    // FIXME: pp bug, extra space after keyword?\n-    while false { let _ = #[rustc_dummy] continue ; }\n-    while true { let _ = #[rustc_dummy] break ; }\n+    while false { let _ = #[rustc_dummy] continue; }\n+    while true { let _ = #[rustc_dummy] break; }\n     || #[rustc_dummy] return;\n     let _ = #[rustc_dummy] expr_mac!();\n     let _ = #[rustc_dummy] expr_mac![];"}]}