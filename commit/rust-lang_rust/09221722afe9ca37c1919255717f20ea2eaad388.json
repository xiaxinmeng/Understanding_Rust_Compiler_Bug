{"sha": "09221722afe9ca37c1919255717f20ea2eaad388", "node_id": "C_kwDOAAsO6NoAKDA5MjIxNzIyYWZlOWNhMzdjMTkxOTI1NTcxN2YyMGVhMmVhYWQzODg", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-09-20T17:12:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-09-20T17:12:59Z"}, "message": "Rollup merge of #102008 - GuillaumeGomez:notable-trait-gui-test, r=notriddle\n\nAdd GUI test for notable traits element position\n\nFixes #101891.\n\nr? ````@notriddle````", "tree": {"sha": "b9bc38c142920203027c6b44f11150cb3a9cdccf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9bc38c142920203027c6b44f11150cb3a9cdccf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/09221722afe9ca37c1919255717f20ea2eaad388", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjKfSbCRBK7hj4Ov3rIwAAXKEIAIaR5Ixi0DoE7u2cHwmaHg9B\nui+iHUhtLwcswiMGsSfoqXfb3BXvb3d1dJITWZU0BmkvuX0YBLacJDxhgaxX9sbD\n1R6czBeoUe5fGa0YSWGFtguop3Khxt1++HvuI6BR0xeyvnxIYP4adm8xQ8DScWK2\ncHbOTZDhPZGZvqsCkesc6aMIPobdcE4BJ4W3WLfNhjkIsmSuz4DF0uvlg5PGPsMD\nCF2E1k9AzLh7JZNgIW3ci2B9mlcv5oErJSCKaa9sv1f10nE0NrqJaApYGp9fKRxK\nMmm2IWlyTGHf6YdbYj6E4ZU4LX1fRgHkdM2Od7j6y5jCCJIMe3xZRa9gD3fKEbg=\n=T4A4\n-----END PGP SIGNATURE-----\n", "payload": "tree b9bc38c142920203027c6b44f11150cb3a9cdccf\nparent 2c57a5b166d5e19ace5fea696a7f6d9d0cf6443b\nparent db2d5df860295b3d852ef386587386a2af590884\nauthor Michael Howell <michael@notriddle.com> 1663693979 -0700\ncommitter GitHub <noreply@github.com> 1663693979 -0700\n\nRollup merge of #102008 - GuillaumeGomez:notable-trait-gui-test, r=notriddle\n\nAdd GUI test for notable traits element position\n\nFixes #101891.\n\nr? ````@notriddle````\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/09221722afe9ca37c1919255717f20ea2eaad388", "html_url": "https://github.com/rust-lang/rust/commit/09221722afe9ca37c1919255717f20ea2eaad388", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/09221722afe9ca37c1919255717f20ea2eaad388/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c57a5b166d5e19ace5fea696a7f6d9d0cf6443b", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c57a5b166d5e19ace5fea696a7f6d9d0cf6443b", "html_url": "https://github.com/rust-lang/rust/commit/2c57a5b166d5e19ace5fea696a7f6d9d0cf6443b"}, {"sha": "db2d5df860295b3d852ef386587386a2af590884", "url": "https://api.github.com/repos/rust-lang/rust/commits/db2d5df860295b3d852ef386587386a2af590884", "html_url": "https://github.com/rust-lang/rust/commit/db2d5df860295b3d852ef386587386a2af590884"}], "stats": {"total": 103, "additions": 103, "deletions": 0}, "files": [{"sha": "69088a0774fc42e64b9f3df834b61f525081e92c", "filename": "src/test/rustdoc-gui/notable-trait.goml", "status": "added", "additions": 91, "deletions": 0, "changes": 91, "blob_url": "https://github.com/rust-lang/rust/blob/09221722afe9ca37c1919255717f20ea2eaad388/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "raw_url": "https://github.com/rust-lang/rust/raw/09221722afe9ca37c1919255717f20ea2eaad388/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fnotable-trait.goml?ref=09221722afe9ca37c1919255717f20ea2eaad388", "patch": "@@ -0,0 +1,91 @@\n+// This test checks the position of the `i` for the notable traits.\n+goto: file://|DOC_PATH|/test_docs/struct.NotableStructWithLongName.html\n+show-text: true\n+// We start with a wide screen.\n+size: (1100, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 692},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 966},\n+)\n+\n+\n+// Now only the `i` should be on the next line.\n+size: (1055, 600)\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\", \"x\"),\n+)\n+\n+// Now both the `i` and the struct name should be on the next line.\n+size: (980, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 245},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 519},\n+)\n+\n+// Checking on mobile now.\n+size: (650, 600)\n+// Checking they have the same y position.\n+compare-elements-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\"),\n+)\n+// Checking they don't have the same x position.\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"x\"),\n+)\n+// The `i` should be *after* the type.\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    {\"x\": 15},\n+)\n+assert-position: (\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    {\"x\": 289},\n+)\n+\n+// Checking on very small mobile. The `i` should be on its own line.\n+size: (410, 600)\n+compare-elements-position-false: (\n+    \"//*[@id='method.create_an_iterator_from_read']//a[text()='NotableStructWithLongName']\",\n+    \"//*[@id='method.create_an_iterator_from_read']//*[@class='notable-traits']\",\n+    (\"y\", \"x\"),\n+)"}, {"sha": "e6177ff84b42e86bb6b9f6f118bd1528302bb15a", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/09221722afe9ca37c1919255717f20ea2eaad388/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/09221722afe9ca37c1919255717f20ea2eaad388/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=09221722afe9ca37c1919255717f20ea2eaad388", "patch": "@@ -325,3 +325,15 @@ pub mod doc_block_table {\n     }\n \n }\n+\n+pub struct NotableStructWithLongName<R>(R);\n+\n+impl<R: std::io::Read> NotableStructWithLongName<R> {\n+    pub fn create_an_iterator_from_read(r: R) -> NotableStructWithLongName<R> { Self(r) }\n+}\n+\n+impl<R: std::io::Read> std::iter::Iterator for NotableStructWithLongName<R> {\n+    type Item = ();\n+\n+    fn next(&mut self) -> Option<Self::Item> { () }\n+}"}]}