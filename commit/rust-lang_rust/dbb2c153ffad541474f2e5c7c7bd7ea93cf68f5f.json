{"sha": "dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiYjJjMTUzZmZhZDU0MTQ3NGYyZTVjN2M3YmQ3ZWE5M2NmNjhmNWY=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-05-26T07:20:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-05-26T07:20:56Z"}, "message": "Merge #4617\n\n4617: Hover tooltip module name is monospace once again r=matklad a=aloucks\n\nThe line separator is also moved below the function signature to split regions between the docs. This is very similar to how IntelliJ displays tooltips. Adding an additional separator between the module name and function signature currently has rendering issues.\r\n\r\nFixes #4594\r\nAlternative to #4615\r\n\r\n@kjeremy @Veetaha \r\n\r\nNote that I have semantic coloring disabled so ignore any differences due to that.\r\n\r\n![image](https://user-images.githubusercontent.com/221559/82857507-30180e80-9edf-11ea-903a-f25c60055a93.png)\r\n\r\n![image](https://user-images.githubusercontent.com/221559/82857407-e6c7bf00-9ede-11ea-9ae0-d348279552e7.png)\r\n\n\nCo-authored-by: Aaron Loucks <aloucks@cofront.net>", "tree": {"sha": "7a79d631ba9ed42ad0d6a1133c54976a65c82760", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a79d631ba9ed42ad0d6a1133c54976a65c82760"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJezMNYCRBK7hj4Ov3rIwAAdHIIAEIZeYTg/g8+rd11DO/CNgQz\nHVdlOHuebn9ZCYJTTBvCWKQYN0T9cK09z0qVyHLqi5BlS7XXaLxHOXi6BRYvqqwm\n6XeRTgnoRi0FcRY9TlKwNYwqP4Ka90bHx+JX/S39ZTf2X7pLyeH5qQmR+6K40Nb8\n043Ch+BChKG8fhci1rLMGzttX15Bs/44OdFR9XbWDmec8avsts/VhnDbjcE56XL8\nMMtbkPed60bG8VVNzz97rj3o5tD28C5uu0pkfQ0PxHGaou/tOOEexOwaeWmUHoTO\nqrDZbD593icN7LF6qlVGM2wf1OwhlvWH8D1tuWe6b38BMolHTAda0QkPV62S3EI=\n=6/KI\n-----END PGP SIGNATURE-----\n", "payload": "tree 7a79d631ba9ed42ad0d6a1133c54976a65c82760\nparent 76fa498d6c69a8c26f074b15178256041bb53675\nparent a047f10839d64813213c70ed60c37c0a99f232b2\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1590477656 +0000\ncommitter GitHub <noreply@github.com> 1590477656 +0000\n\nMerge #4617\n\n4617: Hover tooltip module name is monospace once again r=matklad a=aloucks\n\nThe line separator is also moved below the function signature to split regions between the docs. This is very similar to how IntelliJ displays tooltips. Adding an additional separator between the module name and function signature currently has rendering issues.\r\n\r\nFixes #4594\r\nAlternative to #4615\r\n\r\n@kjeremy @Veetaha \r\n\r\nNote that I have semantic coloring disabled so ignore any differences due to that.\r\n\r\n![image](https://user-images.githubusercontent.com/221559/82857507-30180e80-9edf-11ea-903a-f25c60055a93.png)\r\n\r\n![image](https://user-images.githubusercontent.com/221559/82857407-e6c7bf00-9ede-11ea-9ae0-d348279552e7.png)\r\n\n\nCo-authored-by: Aaron Loucks <aloucks@cofront.net>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "html_url": "https://github.com/rust-lang/rust/commit/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76fa498d6c69a8c26f074b15178256041bb53675", "url": "https://api.github.com/repos/rust-lang/rust/commits/76fa498d6c69a8c26f074b15178256041bb53675", "html_url": "https://github.com/rust-lang/rust/commit/76fa498d6c69a8c26f074b15178256041bb53675"}, {"sha": "a047f10839d64813213c70ed60c37c0a99f232b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/a047f10839d64813213c70ed60c37c0a99f232b2", "html_url": "https://github.com/rust-lang/rust/commit/a047f10839d64813213c70ed60c37c0a99f232b2"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "827c094e7163878b4b84ce46787a06438206bb79", "filename": "crates/ra_ide/src/display.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Fra_ide%2Fsrc%2Fdisplay.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Fra_ide%2Fsrc%2Fdisplay.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fdisplay.rs?ref=dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "patch": "@@ -83,12 +83,13 @@ pub(crate) fn rust_code_markup_with_doc(\n \n     if let Some(mod_path) = mod_path {\n         if !mod_path.is_empty() {\n-            format_to!(buf, \"{}\\n___\\n\\n\", mod_path);\n+            format_to!(buf, \"```rust\\n{}\\n```\\n\\n\", mod_path);\n         }\n     }\n     format_to!(buf, \"```rust\\n{}\\n```\", code);\n \n     if let Some(doc) = doc {\n+        format_to!(buf, \"\\n___\");\n         format_to!(buf, \"\\n\\n{}\", doc);\n     }\n "}, {"sha": "3e721dcca392b5377c95418f053cb747c1c1a5e3", "filename": "crates/ra_ide/src/hover.rs", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Fra_ide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Fra_ide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fhover.rs?ref=dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "patch": "@@ -405,7 +405,7 @@ mod tests {\n                 };\n             }\n         \"#,\n-            &[\"Foo\\n___\\n\\n```rust\\nfield_a: u32\"],\n+            &[\"Foo\\n```\\n\\n```rust\\nfield_a: u32\"],\n         );\n \n         // Hovering over the field in the definition\n@@ -422,7 +422,7 @@ mod tests {\n                 };\n             }\n         \"#,\n-            &[\"Foo\\n___\\n\\n```rust\\nfield_a: u32\"],\n+            &[\"Foo\\n```\\n\\n```rust\\nfield_a: u32\"],\n         );\n     }\n \n@@ -475,7 +475,7 @@ fn main() {\n             \",\n         );\n         let hover = analysis.hover(position).unwrap().unwrap();\n-        assert_eq!(trim_markup_opt(hover.info.first()), Some(\"Option\\n___\\n\\n```rust\\nSome\"));\n+        assert_eq!(trim_markup_opt(hover.info.first()), Some(\"Option\\n```\\n\\n```rust\\nSome\"));\n \n         let (analysis, position) = single_file_with_position(\n             \"\n@@ -503,11 +503,12 @@ fn main() {\n         \"#,\n             &[\"\n Option\n-___\n+```\n \n ```rust\n None\n ```\n+___\n \n The None variant\n             \"\n@@ -527,11 +528,12 @@ The None variant\n         \"#,\n             &[\"\n Option\n-___\n+```\n \n ```rust\n Some\n ```\n+___\n \n The Some variant\n             \"\n@@ -614,7 +616,7 @@ fn func(foo: i32) { if true { <|>foo; }; }\n         let hover = analysis.hover(position).unwrap().unwrap();\n         assert_eq!(\n             trim_markup_opt(hover.info.first()),\n-            Some(\"wrapper::Thing\\n___\\n\\n```rust\\nfn new() -> Thing\")\n+            Some(\"wrapper::Thing\\n```\\n\\n```rust\\nfn new() -> Thing\")\n         );\n     }\n \n@@ -891,7 +893,7 @@ fn func(foo: i32) { if true { <|>foo; }; }\n                 fo<|>o();\n             }\n             \",\n-            &[\"fn foo()\\n```\\n\\n<- `\\u{3000}` here\"],\n+            &[\"fn foo()\\n```\\n___\\n\\n<- `\\u{3000}` here\"],\n         );\n     }\n "}, {"sha": "405ddb362969ed3a6da61d9f1f44d86aedc02c9c", "filename": "crates/rust-analyzer/tests/heavy_tests/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs?ref=dbb2c153ffad541474f2e5c7c7bd7ea93cf68f5f", "patch": "@@ -756,5 +756,5 @@ pub fn foo(_input: TokenStream) -> TokenStream {\n     });\n \n     let value = res.get(\"contents\").unwrap().get(\"value\").unwrap().to_string();\n-    assert_eq!(value, r#\"\"foo::Bar\\n___\\n\\n```rust\\nfn bar()\\n```\"\"#)\n+    assert_eq!(value, r#\"\"```rust\\nfoo::Bar\\n```\\n\\n```rust\\nfn bar()\\n```\"\"#)\n }"}]}