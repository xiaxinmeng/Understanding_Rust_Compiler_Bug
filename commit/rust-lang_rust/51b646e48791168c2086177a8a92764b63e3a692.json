{"sha": "51b646e48791168c2086177a8a92764b63e3a692", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxYjY0NmU0ODc5MTE2OGMyMDg2MTc3YThhOTI3NjRiNjNlM2E2OTI=", "commit": {"author": {"name": "Tom Eccles", "email": "tom.eccles@codethink.co.uk", "date": "2020-07-08T18:23:51Z"}, "committer": {"name": "Tom Eccles", "email": "tom.eccles@codethink.co.uk", "date": "2020-07-08T20:20:13Z"}, "message": "ci: disabled: riscv: minimise docker overlays\n\nSuggested by @bjorn3\n\nEvery RUN command creates a new overlay on top of the image as of before\nthe RUN command. Using fewer RUN commands prevents intermediate overlays\n(which in this case would have contained the entire Linux source tree).", "tree": {"sha": "3711f78de52b090c6f5b4028a0f18003beef7488", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3711f78de52b090c6f5b4028a0f18003beef7488"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51b646e48791168c2086177a8a92764b63e3a692", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51b646e48791168c2086177a8a92764b63e3a692", "html_url": "https://github.com/rust-lang/rust/commit/51b646e48791168c2086177a8a92764b63e3a692", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51b646e48791168c2086177a8a92764b63e3a692/comments", "author": {"login": "tblah", "id": 3716681, "node_id": "MDQ6VXNlcjM3MTY2ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/3716681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tblah", "html_url": "https://github.com/tblah", "followers_url": "https://api.github.com/users/tblah/followers", "following_url": "https://api.github.com/users/tblah/following{/other_user}", "gists_url": "https://api.github.com/users/tblah/gists{/gist_id}", "starred_url": "https://api.github.com/users/tblah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tblah/subscriptions", "organizations_url": "https://api.github.com/users/tblah/orgs", "repos_url": "https://api.github.com/users/tblah/repos", "events_url": "https://api.github.com/users/tblah/events{/privacy}", "received_events_url": "https://api.github.com/users/tblah/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tblah", "id": 3716681, "node_id": "MDQ6VXNlcjM3MTY2ODE=", "avatar_url": "https://avatars.githubusercontent.com/u/3716681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tblah", "html_url": "https://github.com/tblah", "followers_url": "https://api.github.com/users/tblah/followers", "following_url": "https://api.github.com/users/tblah/following{/other_user}", "gists_url": "https://api.github.com/users/tblah/gists{/gist_id}", "starred_url": "https://api.github.com/users/tblah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tblah/subscriptions", "organizations_url": "https://api.github.com/users/tblah/orgs", "repos_url": "https://api.github.com/users/tblah/repos", "events_url": "https://api.github.com/users/tblah/events{/privacy}", "received_events_url": "https://api.github.com/users/tblah/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d919c9377f4602d991ca1c7ba852e7555943740", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d919c9377f4602d991ca1c7ba852e7555943740", "html_url": "https://github.com/rust-lang/rust/commit/1d919c9377f4602d991ca1c7ba852e7555943740"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "a938899636a45878ad03f8d6a778e10e34c24240", "filename": "src/ci/docker/host-x86_64/disabled/riscv64gc-linux/Dockerfile", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/51b646e48791168c2086177a8a92764b63e3a692/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/51b646e48791168c2086177a8a92764b63e3a692/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdisabled%2Friscv64gc-linux%2FDockerfile?ref=51b646e48791168c2086177a8a92764b63e3a692", "patch": "@@ -40,9 +40,9 @@ RUN curl https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.6.16.tar.xz | tar\n     cp linux.config linux-5.6.16/.config && \\\n     cd /build/linux-5.6.16 && \\\n     make olddefconfig && \\\n-    make -j$(nproc) vmlinux\n-RUN cp linux-5.6.16/vmlinux /tmp\n-RUN rm -rf linux-5.6.16\n+    make -j$(nproc) vmlinux && \\\n+    cp vmlinux /tmp && \\\n+    rm -rf linux-5.6.16\n \n # Compile an instance of busybox as this provides a lightweight system and init\n # binary which we will boot into. Only trick here is configuring busybox to"}]}