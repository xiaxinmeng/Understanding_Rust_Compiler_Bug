{"sha": "fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "node_id": "C_kwDOAAsO6NoAKGZjN2ZjMGZhZTUwNzliYzQzM2E2ZTM3N2IxNjNhMmEwNzU3ZDY1Y2Q", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-17T17:23:52Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-08-17T17:23:52Z"}, "message": "ty::Error does not match other types for region constraints", "tree": {"sha": "57b3f3fbe1847c1eb54ec002edebcec36742743f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57b3f3fbe1847c1eb54ec002edebcec36742743f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "html_url": "https://github.com/rust-lang/rust/commit/fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86c6ebee8fa0a5ad1e18e375113b06bd2849b634", "url": "https://api.github.com/repos/rust-lang/rust/commits/86c6ebee8fa0a5ad1e18e375113b06bd2849b634", "html_url": "https://github.com/rust-lang/rust/commit/86c6ebee8fa0a5ad1e18e375113b06bd2849b634"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "be03c8b5bae98a507cec3b8581bd874cea47338c", "filename": "compiler/rustc_infer/src/infer/outlives/test_type_match.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Ftest_type_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Ftest_type_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Foutlives%2Ftest_type_match.rs?ref=fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "patch": "@@ -174,7 +174,14 @@ impl<'tcx> TypeRelation<'tcx> for Match<'tcx> {\n \n     #[instrument(skip(self), level = \"debug\")]\n     fn tys(&mut self, pattern: Ty<'tcx>, value: Ty<'tcx>) -> RelateResult<'tcx, Ty<'tcx>> {\n-        if pattern == value { Ok(pattern) } else { relate::super_relate_tys(self, pattern, value) }\n+        if let ty::Error(_) = pattern.kind() {\n+            // Unlike normal `TypeRelation` rules, `ty::Error` does not equal any type.\n+            self.no_match()\n+        } else if pattern == value {\n+            Ok(pattern)\n+        } else {\n+            relate::super_relate_tys(self, pattern, value)\n+        }\n     }\n \n     #[instrument(skip(self), level = \"debug\")]"}, {"sha": "29d89718b5867b4213aa2f708e21a14761006903", "filename": "src/test/ui/regions/outlives-with-missing.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.rs?ref=fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "patch": "@@ -0,0 +1,16 @@\n+trait HandlerFamily {\n+    type Target;\n+}\n+\n+struct HandlerWrapper<H: HandlerFamily>(H);\n+\n+impl<H: HandlerFamily> HandlerWrapper<H> {\n+    pub fn set_handler(&self, handler: &H::Target)\n+    where\n+        T: Send + Sync + 'static,\n+        //~^ ERROR cannot find type `T` in this scope\n+    {\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "e204c918724fea5db1f7aceae3e3828b2ff4e01e", "filename": "src/test/ui/regions/outlives-with-missing.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fc7fc0fae5079bc433a6e377b163a2a0757d65cd/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fregions%2Foutlives-with-missing.stderr?ref=fc7fc0fae5079bc433a6e377b163a2a0757d65cd", "patch": "@@ -0,0 +1,12 @@\n+error[E0412]: cannot find type `T` in this scope\n+  --> $DIR/outlives-with-missing.rs:10:9\n+   |\n+LL | impl<H: HandlerFamily> HandlerWrapper<H> {\n+   |      - similarly named type parameter `H` defined here\n+...\n+LL |         T: Send + Sync + 'static,\n+   |         ^ help: a type parameter with a similar name exists: `H`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0412`."}]}