{"sha": "72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcyY2EwZTVmMmM1ZGYwODAxYWY0ZGIxNGY4OGU3ZjhlYTZlMjQwMDI=", "commit": {"author": {"name": "Seiichi Uchida", "email": "seuchida@gmail.com", "date": "2019-05-22T01:49:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-05-22T01:49:12Z"}, "message": "Merge pull request #3577 from topecongiro/issue-3575\n\nInsert an empty line when normalizing `#[doc = \"\"]`", "tree": {"sha": "07524c5588def27fdf609a8d357afcd5a68a54bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/07524c5588def27fdf609a8d357afcd5a68a54bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJc5KqYCRBK7hj4Ov3rIwAAdHIIALGsVi9UpWgHHcNWn5aedHgf\neRVziT6QSMCJR+SNFmZBcs1uZdmH1oqHzgKFQXsArCHXB/1RW7Op478DD/BdbbMW\n8ngPgFsPl0PKlBkpXJV9aWqm507gGC3Rvs6pH2T2f4dfDqq79xD4h599y3W564xo\nK6Es2A1PGThbYbMkf2kcEPwJzro0Nb94NRAjXpwwYEpWnqE6wJdSYG6IkHnypFsg\nO8klHYjLwjZLcT4X09W8al6woJSrS14XkpnDE+aFsaMDS5xY69fW4ZgWP21zKF29\nzScB81YFmuyNY6JykgqvEnXt9B4Q1kzRhref9iPHPPl+t7bu/fplc/OS1fBW54M=\n=s5/c\n-----END PGP SIGNATURE-----\n", "payload": "tree 07524c5588def27fdf609a8d357afcd5a68a54bc\nparent 86dad6e3dd285678335252bef12169232096a97b\nparent bdb72237a274a2edbe38b9e1ebae18c00ae3ae96\nauthor Seiichi Uchida <seuchida@gmail.com> 1558489752 +0900\ncommitter GitHub <noreply@github.com> 1558489752 +0900\n\nMerge pull request #3577 from topecongiro/issue-3575\n\nInsert an empty line when normalizing `#[doc = \"\"]`"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "html_url": "https://github.com/rust-lang/rust/commit/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "86dad6e3dd285678335252bef12169232096a97b", "url": "https://api.github.com/repos/rust-lang/rust/commits/86dad6e3dd285678335252bef12169232096a97b", "html_url": "https://github.com/rust-lang/rust/commit/86dad6e3dd285678335252bef12169232096a97b"}, {"sha": "bdb72237a274a2edbe38b9e1ebae18c00ae3ae96", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdb72237a274a2edbe38b9e1ebae18c00ae3ae96", "html_url": "https://github.com/rust-lang/rust/commit/bdb72237a274a2edbe38b9e1ebae18c00ae3ae96"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "c3dcb84c9488d53b001f5febb9c8803039f9a27c", "filename": "src/attr/doc_comment.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/src%2Fattr%2Fdoc_comment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/src%2Fattr%2Fdoc_comment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fattr%2Fdoc_comment.rs?ref=72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "patch": "@@ -12,6 +12,12 @@ impl Display for DocCommentFormatter<'_> {\n     fn fmt(&self, formatter: &mut fmt::Formatter<'_>) -> fmt::Result {\n         let opener = self.style.opener().trim_end();\n         let mut lines = self.literal.lines().peekable();\n+\n+        // Handle `#[doc = \"\"]`.\n+        if lines.peek().is_none() {\n+            return write!(formatter, \"{}\", opener);\n+        }\n+\n         while let Some(line) = lines.next() {\n             let is_last_line = lines.peek().is_none();\n             if is_last_line {"}, {"sha": "3564e3e7ad056992915c3d86cd1ea23c9defa5d0", "filename": "tests/source/normalize_multiline_doc_attribute.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/tests%2Fsource%2Fnormalize_multiline_doc_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/tests%2Fsource%2Fnormalize_multiline_doc_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fnormalize_multiline_doc_attribute.rs?ref=72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "patch": "@@ -5,3 +5,8 @@\n is split\n on multiple lines\"]\n fn foo() {}\n+\n+#[doc = \" B1\"]\n+#[doc = \"\"]\n+#[doc = \" A1\"]\n+fn bar() {}"}, {"sha": "890c9bb20cd8d82f9bd385a25880e4e5b522f02b", "filename": "tests/target/normalize_multiline_doc_attribute.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/tests%2Ftarget%2Fnormalize_multiline_doc_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72ca0e5f2c5df0801af4db14f88e7f8ea6e24002/tests%2Ftarget%2Fnormalize_multiline_doc_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fnormalize_multiline_doc_attribute.rs?ref=72ca0e5f2c5df0801af4db14f88e7f8ea6e24002", "patch": "@@ -5,3 +5,8 @@\n ///is split\n ///on multiple lines\n fn foo() {}\n+\n+/// B1\n+///\n+/// A1\n+fn bar() {}"}]}