{"sha": "eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlZWFkZjMwYmY1ZjY3NGJjYmJiNGY2MjUyNmY4OTY2NmY2ZmRkN2M=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-28T19:17:12Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-28T19:17:12Z"}, "message": "Make useless_attribute suggestion MaybeIncorrect", "tree": {"sha": "aa91dcf2504d61f45fb73fcd89462ffa5e700708", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/aa91dcf2504d61f45fb73fcd89462ffa5e700708"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1m00cQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5hSVD/9tnZ5xJ9PfX68Q22pKwELTE/QswHRSLDCi\n1shdovn4e8r2uum5t88z2zQXoUjevwLpsR9Tekt3gVc0hEPMpQ+td9u1or0+OGh8\niJNANs3XIowsPvU5iabrNd32vW4Q7uXtt8v0ncnXLrZ7sNaYyDiYGGoIXXxeqNSp\nCcDi/xPCllZx+HMuQ2+ci9EkiLCFpd/uEI8asVi1DjGmoiz21q03xeAoGrk4zFxS\nlOlqTGLj3v1sjPbUbK+ikdzy/XKBrOoIaTXOt1Jjnqnar74YXcVkegjtM60SZ11I\n80vLTrLRn/FMwGBTPQbZ6X3o2G/l7oReIO08L9bKPdXYzjHGOy4OwhtzQSWEHUkB\n5CgZNm46JZtwsKHx1gymuj9P+AEFZ62+KOOYdGpLKxAMgOQgKmyHBVd2cKekkHZj\nUQ/l6Rxozw47p4IJOIxTWRCEctPWfQ9AHKk8d7BIY+L3MjACWtt3ZAf00+kde9pE\n0nOIcqaKca5uIov07juRRkQNYyksEVBR2S5EiSUhdPaq0AnAY4zWTu6rYWjHhcFY\nQpgNFw2kU1dEaq60G+HJl//4lweUF9COQXivvvIrdWh7ZfD4lu5r55YR0+LWBVN3\nKJWgj54Df35TN8qerCgvAFnQ8NaTDeZM7clAkCF2bTWtLAY4jZ7ZvaLnczAPKbMK\nT3IrnQ/r0w==\n=DYBW\n-----END PGP SIGNATURE-----", "payload": "tree aa91dcf2504d61f45fb73fcd89462ffa5e700708\nparent f41677902d2362e4d246932864245231b8581809\nauthor Philipp Hansch <dev@phansch.net> 1567019832 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1567019832 +0200\n\nMake useless_attribute suggestion MaybeIncorrect\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "html_url": "https://github.com/rust-lang/rust/commit/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f41677902d2362e4d246932864245231b8581809", "url": "https://api.github.com/repos/rust-lang/rust/commits/f41677902d2362e4d246932864245231b8581809", "html_url": "https://github.com/rust-lang/rust/commit/f41677902d2362e4d246932864245231b8581809"}], "stats": {"total": 56, "additions": 3, "deletions": 53}, "files": [{"sha": "558298c2e0e0786bf756973b5c5915d3c9369584", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "patch": "@@ -277,7 +277,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Attributes {\n                                                         line_span,\n                                                         \"if you just forgot a `!`, use\",\n                                                         sugg,\n-                                                        Applicability::MachineApplicable,\n+                                                        Applicability::MaybeIncorrect,\n                                                     );\n                                                 },\n                                             );"}, {"sha": "d729311e90704c03131fff17ee380a51dfc20860", "filename": "tests/ui/useless_attribute.fixed", "status": "removed", "additions": 0, "deletions": 49, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/f41677902d2362e4d246932864245231b8581809/tests%2Fui%2Fuseless_attribute.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/f41677902d2362e4d246932864245231b8581809/tests%2Fui%2Fuseless_attribute.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuseless_attribute.fixed?ref=f41677902d2362e4d246932864245231b8581809", "patch": "@@ -1,49 +0,0 @@\n-// run-rustfix\n-// aux-build:proc_macro_derive.rs\n-\n-#![warn(clippy::useless_attribute)]\n-#![warn(unreachable_pub)]\n-\n-#![allow(dead_code)]\n-#![cfg_attr(feature = \"cargo-clippy\", allow(dead_code))]\n-#[rustfmt::skip]\n-#[cfg_attr(feature = \"cargo-clippy\",\n-           allow(dead_code))]\n-#[allow(unused_imports)]\n-#[allow(unused_extern_crates)]\n-#[macro_use]\n-extern crate clippy_lints;\n-\n-#[macro_use]\n-extern crate proc_macro_derive;\n-\n-// don't lint on unused_import for `use` items\n-#[allow(unused_imports)]\n-use std::collections;\n-\n-// don't lint on deprecated for `use` items\n-mod foo {\n-    #[deprecated]\n-    pub struct Bar;\n-}\n-#[allow(deprecated)]\n-pub use foo::Bar;\n-\n-// This should not trigger the lint. There's lint level definitions inside the external derive\n-// that would trigger the useless_attribute lint.\n-#[derive(DeriveSomething)]\n-struct Baz;\n-\n-// don't lint on unreachable_pub for `use` items\n-mod a {\n-    mod b {\n-        #[allow(dead_code)]\n-        #[allow(unreachable_pub)]\n-        pub struct C {}\n-    }\n-\n-    #[allow(unreachable_pub)]\n-    pub use self::b::C;\n-}\n-\n-fn main() {}"}, {"sha": "dd84b1b2c1c381570d276a43aa052d45b7cb01db", "filename": "tests/ui/useless_attribute.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/tests%2Fui%2Fuseless_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/tests%2Fui%2Fuseless_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuseless_attribute.rs?ref=eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "patch": "@@ -1,4 +1,3 @@\n-// run-rustfix\n // aux-build:proc_macro_derive.rs\n \n #![warn(clippy::useless_attribute)]"}, {"sha": "bf7ea1698d354b42de59879ff204fc145cf5ad6d", "filename": "tests/ui/useless_attribute.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/tests%2Fui%2Fuseless_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c/tests%2Fui%2Fuseless_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fuseless_attribute.stderr?ref=eeeadf30bf5f674bcbbb4f62526f89666f6fdd7c", "patch": "@@ -1,13 +1,13 @@\n error: useless lint attribute\n-  --> $DIR/useless_attribute.rs:7:1\n+  --> $DIR/useless_attribute.rs:6:1\n    |\n LL | #[allow(dead_code)]\n    | ^^^^^^^^^^^^^^^^^^^ help: if you just forgot a `!`, use: `#![allow(dead_code)]`\n    |\n    = note: `-D clippy::useless-attribute` implied by `-D warnings`\n \n error: useless lint attribute\n-  --> $DIR/useless_attribute.rs:8:1\n+  --> $DIR/useless_attribute.rs:7:1\n    |\n LL | #[cfg_attr(feature = \"cargo-clippy\", allow(dead_code))]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: if you just forgot a `!`, use: `#![cfg_attr(feature = \"cargo-clippy\", allow(dead_code)`"}]}