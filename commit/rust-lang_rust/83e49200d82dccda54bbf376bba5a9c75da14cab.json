{"sha": "83e49200d82dccda54bbf376bba5a9c75da14cab", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzZTQ5MjAwZDgyZGNjZGE1NGJiZjM3NmJiYTVhOWM3NWRhMTRjYWI=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-01-19T19:21:56Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-01-19T19:25:29Z"}, "message": "Add LifetimeParam and ConstParam to CompletionItemKind", "tree": {"sha": "48b14cd545e44b95ad086a2476c95cd68c32fd49", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/48b14cd545e44b95ad086a2476c95cd68c32fd49"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83e49200d82dccda54bbf376bba5a9c75da14cab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83e49200d82dccda54bbf376bba5a9c75da14cab", "html_url": "https://github.com/rust-lang/rust/commit/83e49200d82dccda54bbf376bba5a9c75da14cab", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83e49200d82dccda54bbf376bba5a9c75da14cab/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f647e134a785245579da3de04235887a5e958c9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/f647e134a785245579da3de04235887a5e958c9b", "html_url": "https://github.com/rust-lang/rust/commit/f647e134a785245579da3de04235887a5e958c9b"}], "stats": {"total": 58, "additions": 34, "deletions": 24}, "files": [{"sha": "860c774c1ca29e4abd286e673219815f5432ea6b", "filename": "crates/completion/src/completions/unqualified_path.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fcompletions%2Funqualified_path.rs?ref=83e49200d82dccda54bbf376bba5a9c75da14cab", "patch": "@@ -241,7 +241,7 @@ fn main() {\n         check(\n             r#\"fn quux<const C: usize>() { $0 }\"#,\n             expect![[r#\"\n-                tp C\n+                cp C\n                 fn quux() fn quux<const C: usize>()\n             \"#]],\n         );"}, {"sha": "ecf581be2bc5639728fbe2e377f006ff4d743854", "filename": "crates/completion/src/item.rs", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Fitem.rs?ref=83e49200d82dccda54bbf376bba5a9c75da14cab", "patch": "@@ -117,24 +117,26 @@ pub enum CompletionScore {\n \n #[derive(Debug, Clone, Copy, PartialEq, Eq)]\n pub enum CompletionItemKind {\n-    Snippet,\n-    Keyword,\n-    Module,\n-    Function,\n+    Attribute,\n+    Binding,\n     BuiltinType,\n-    Struct,\n+    Const,\n+    ConstParam,\n     Enum,\n     EnumVariant,\n-    Binding,\n     Field,\n+    Function,\n+    Keyword,\n+    LifetimeParam,\n+    Macro,\n+    Method,\n+    Module,\n+    Snippet,\n     Static,\n-    Const,\n+    Struct,\n     Trait,\n     TypeAlias,\n-    Method,\n     TypeParam,\n-    Macro,\n-    Attribute,\n     UnresolvedReference,\n }\n \n@@ -146,11 +148,13 @@ impl CompletionItemKind {\n             CompletionItemKind::Binding => \"bn\",\n             CompletionItemKind::BuiltinType => \"bt\",\n             CompletionItemKind::Const => \"ct\",\n+            CompletionItemKind::ConstParam => \"cp\",\n             CompletionItemKind::Enum => \"en\",\n             CompletionItemKind::EnumVariant => \"ev\",\n             CompletionItemKind::Field => \"fd\",\n             CompletionItemKind::Function => \"fn\",\n             CompletionItemKind::Keyword => \"kw\",\n+            CompletionItemKind::LifetimeParam => \"lt\",\n             CompletionItemKind::Macro => \"ma\",\n             CompletionItemKind::Method => \"me\",\n             CompletionItemKind::Module => \"md\","}, {"sha": "68556c8ceb3d1b3db0fe7e179926e119e64ed132", "filename": "crates/completion/src/render.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Fcompletion%2Fsrc%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcompletion%2Fsrc%2Frender.rs?ref=83e49200d82dccda54bbf376bba5a9c75da14cab", "patch": "@@ -208,7 +208,11 @@ impl<'a> Render<'a> {\n             ScopeDef::ModuleDef(Trait(..)) => CompletionItemKind::Trait,\n             ScopeDef::ModuleDef(TypeAlias(..)) => CompletionItemKind::TypeAlias,\n             ScopeDef::ModuleDef(BuiltinType(..)) => CompletionItemKind::BuiltinType,\n-            ScopeDef::GenericParam(..) => CompletionItemKind::TypeParam,\n+            ScopeDef::GenericParam(param) => match param {\n+                hir::GenericParam::TypeParam(_) => CompletionItemKind::TypeParam,\n+                hir::GenericParam::LifetimeParam(_) => CompletionItemKind::LifetimeParam,\n+                hir::GenericParam::ConstParam(_) => CompletionItemKind::ConstParam,\n+            },\n             ScopeDef::Local(..) => CompletionItemKind::Binding,\n             // (does this need its own kind?)\n             ScopeDef::AdtSelfType(..) | ScopeDef::ImplSelfType(..) => CompletionItemKind::TypeParam,"}, {"sha": "9fd32a8c7dec8f17730c7b26a9402b56f558cd5e", "filename": "crates/rust-analyzer/src/to_proto.rs", "status": "modified", "additions": 14, "deletions": 12, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83e49200d82dccda54bbf376bba5a9c75da14cab/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fto_proto.rs?ref=83e49200d82dccda54bbf376bba5a9c75da14cab", "patch": "@@ -87,24 +87,26 @@ pub(crate) fn completion_item_kind(\n     completion_item_kind: CompletionItemKind,\n ) -> lsp_types::CompletionItemKind {\n     match completion_item_kind {\n-        CompletionItemKind::Keyword => lsp_types::CompletionItemKind::Keyword,\n-        CompletionItemKind::Snippet => lsp_types::CompletionItemKind::Snippet,\n-        CompletionItemKind::Module => lsp_types::CompletionItemKind::Module,\n-        CompletionItemKind::Function => lsp_types::CompletionItemKind::Function,\n-        CompletionItemKind::Struct => lsp_types::CompletionItemKind::Struct,\n+        CompletionItemKind::Attribute => lsp_types::CompletionItemKind::EnumMember,\n+        CompletionItemKind::Binding => lsp_types::CompletionItemKind::Variable,\n+        CompletionItemKind::BuiltinType => lsp_types::CompletionItemKind::Struct,\n+        CompletionItemKind::Const => lsp_types::CompletionItemKind::Constant,\n+        CompletionItemKind::ConstParam => lsp_types::CompletionItemKind::TypeParameter,\n         CompletionItemKind::Enum => lsp_types::CompletionItemKind::Enum,\n         CompletionItemKind::EnumVariant => lsp_types::CompletionItemKind::EnumMember,\n-        CompletionItemKind::BuiltinType => lsp_types::CompletionItemKind::Struct,\n-        CompletionItemKind::Binding => lsp_types::CompletionItemKind::Variable,\n         CompletionItemKind::Field => lsp_types::CompletionItemKind::Field,\n+        CompletionItemKind::Function => lsp_types::CompletionItemKind::Function,\n+        CompletionItemKind::Keyword => lsp_types::CompletionItemKind::Keyword,\n+        CompletionItemKind::LifetimeParam => lsp_types::CompletionItemKind::TypeParameter,\n+        CompletionItemKind::Macro => lsp_types::CompletionItemKind::Method,\n+        CompletionItemKind::Method => lsp_types::CompletionItemKind::Method,\n+        CompletionItemKind::Module => lsp_types::CompletionItemKind::Module,\n+        CompletionItemKind::Snippet => lsp_types::CompletionItemKind::Snippet,\n+        CompletionItemKind::Static => lsp_types::CompletionItemKind::Value,\n+        CompletionItemKind::Struct => lsp_types::CompletionItemKind::Struct,\n         CompletionItemKind::Trait => lsp_types::CompletionItemKind::Interface,\n         CompletionItemKind::TypeAlias => lsp_types::CompletionItemKind::Struct,\n-        CompletionItemKind::Const => lsp_types::CompletionItemKind::Constant,\n-        CompletionItemKind::Static => lsp_types::CompletionItemKind::Value,\n-        CompletionItemKind::Method => lsp_types::CompletionItemKind::Method,\n         CompletionItemKind::TypeParam => lsp_types::CompletionItemKind::TypeParameter,\n-        CompletionItemKind::Macro => lsp_types::CompletionItemKind::Method,\n-        CompletionItemKind::Attribute => lsp_types::CompletionItemKind::EnumMember,\n         CompletionItemKind::UnresolvedReference => lsp_types::CompletionItemKind::Reference,\n     }\n }"}]}