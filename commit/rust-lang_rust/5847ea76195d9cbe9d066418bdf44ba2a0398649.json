{"sha": "5847ea76195d9cbe9d066418bdf44ba2a0398649", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4NDdlYTc2MTk1ZDljYmU5ZDA2NjQxOGJkZjQ0YmEyYTAzOTg2NDk=", "commit": {"author": {"name": "Victor Berger", "email": "victor.berger@m4x.org", "date": "2015-08-07T10:00:46Z"}, "committer": {"name": "Victor Berger", "email": "victor.berger@m4x.org", "date": "2015-08-07T12:18:20Z"}, "message": "Customize error messages for self glob imports.", "tree": {"sha": "675bdea0b0d1213ff3ae2b28b3e454fabcdea758", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/675bdea0b0d1213ff3ae2b28b3e454fabcdea758"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5847ea76195d9cbe9d066418bdf44ba2a0398649", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5847ea76195d9cbe9d066418bdf44ba2a0398649", "html_url": "https://github.com/rust-lang/rust/commit/5847ea76195d9cbe9d066418bdf44ba2a0398649", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5847ea76195d9cbe9d066418bdf44ba2a0398649/comments", "author": {"login": "elinorbgr", "id": 3009227, "node_id": "MDQ6VXNlcjMwMDkyMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elinorbgr", "html_url": "https://github.com/elinorbgr", "followers_url": "https://api.github.com/users/elinorbgr/followers", "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}", "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions", "organizations_url": "https://api.github.com/users/elinorbgr/orgs", "repos_url": "https://api.github.com/users/elinorbgr/repos", "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}", "received_events_url": "https://api.github.com/users/elinorbgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "elinorbgr", "id": 3009227, "node_id": "MDQ6VXNlcjMwMDkyMjc=", "avatar_url": "https://avatars.githubusercontent.com/u/3009227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elinorbgr", "html_url": "https://github.com/elinorbgr", "followers_url": "https://api.github.com/users/elinorbgr/followers", "following_url": "https://api.github.com/users/elinorbgr/following{/other_user}", "gists_url": "https://api.github.com/users/elinorbgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/elinorbgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elinorbgr/subscriptions", "organizations_url": "https://api.github.com/users/elinorbgr/orgs", "repos_url": "https://api.github.com/users/elinorbgr/repos", "events_url": "https://api.github.com/users/elinorbgr/events{/privacy}", "received_events_url": "https://api.github.com/users/elinorbgr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3d041bd46dfbd77a392228b6e4c0cb866d4404fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/3d041bd46dfbd77a392228b6e4c0cb866d4404fc", "html_url": "https://github.com/rust-lang/rust/commit/3d041bd46dfbd77a392228b6e4c0cb866d4404fc"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "5a377d2c5fe12f2af21cc022ebac6b4a9ddfd925", "filename": "src/librustc_resolve/resolve_imports.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5847ea76195d9cbe9d066418bdf44ba2a0398649/src%2Flibrustc_resolve%2Fresolve_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5847ea76195d9cbe9d066418bdf44ba2a0398649/src%2Flibrustc_resolve%2Fresolve_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fresolve_imports.rs?ref=5847ea76195d9cbe9d066418bdf44ba2a0398649", "patch": "@@ -785,7 +785,11 @@ impl<'a, 'b:'a, 'tcx:'b> ImportResolver<'a, 'b, 'tcx> {\n             // In this case, target_module == module_\n             // This means we are trying to glob import a module into itself,\n             // and it is a no-go\n-            return ResolveResult::Indeterminate;\n+            debug!(\"(resolving glob imports) target module is current module; giving up\");\n+            return ResolveResult::Failed(Some((\n+                        import_directive.span,\n+                        \"Cannot glob-import a module into itself.\".into()\n+                    )));\n         }\n \n         for (ident, target_import_resolution) in import_resolutions.iter() {"}, {"sha": "318089b3030f613d227c84f4b4957a4194c7dc28", "filename": "src/test/compile-fail/issue-8208.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/5847ea76195d9cbe9d066418bdf44ba2a0398649/src%2Ftest%2Fcompile-fail%2Fissue-8208.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5847ea76195d9cbe9d066418bdf44ba2a0398649/src%2Ftest%2Fcompile-fail%2Fissue-8208.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-8208.rs?ref=5847ea76195d9cbe9d066418bdf44ba2a0398649", "patch": "@@ -8,7 +8,17 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use self::*; //~ ERROR: unresolved import\n+use self::*; //~ ERROR: unresolved import `self::*`. Cannot glob-import a module into itself.\n+\n+mod foo {\n+    use foo::*; //~ ERROR: unresolved import `foo::*`. Cannot glob-import a module into itself.\n+\n+    mod bar {\n+        use super::bar::*;\n+        //~^ ERROR: unresolved import `super::bar::*`. Cannot glob-import a module into itself.\n+    }\n+\n+}\n \n fn main() {\n }"}]}