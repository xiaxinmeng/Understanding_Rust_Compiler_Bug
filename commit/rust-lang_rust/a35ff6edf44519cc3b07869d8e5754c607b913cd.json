{"sha": "a35ff6edf44519cc3b07869d8e5754c607b913cd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzNWZmNmVkZjQ0NTE5Y2MzYjA3ODY5ZDhlNTc1NGM2MDdiOTEzY2Q=", "commit": {"author": {"name": "GrayJack", "email": "gr41.j4ck@gmail.com", "date": "2020-10-21T04:54:51Z"}, "committer": {"name": "GrayJack", "email": "gr41.j4ck@gmail.com", "date": "2020-10-21T04:54:51Z"}, "message": "Add tests for callable modifier", "tree": {"sha": "0852638727ab78008d7941651573d9fa07504339", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0852638727ab78008d7941651573d9fa07504339"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a35ff6edf44519cc3b07869d8e5754c607b913cd", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEcp2lmfLVC4NXZ3mZEsVOBKq5kx4FAl+PvxsACgkQEsVOBKq5\nkx5Nzg/9GunvoK9gqBVD19R3nibqb8cQvKR6eiONuodHRb2axY733OPex3hED9HC\nLDVRF4zdROznW9tvhQFH4+zYghH6Mbh+iQKYNkcP2PPhGnRSmO6UXInp9dnhONI1\n+7OnR4FLDkgePWx/nEil68afVOdUzXLZpfXrxp+EkWYxONWSOeH2qfvqmlNNb7HB\nwk4PbBKAFX6I4bs4c7Ux26Hr1QY6Xli/8NPUwTtui7nUx/Gir55j91j0CHP1FbfS\nMZrgFnXTQqrDBrJSB0LeJPWEMsikHbCQWJTUx0N7QSGxYebQ3u+HOYvELOy1jfcH\neJKrm3syPtgUa+qiyRDf5YbBPVAdK6pRSCPS1vPL+OcGu7B5RaxVslUDVCPsCChj\nYctsN6WtpejHhXd8Cw59zYTg5b+bwsEE5sZRhHTYUab/ScbJFZ58UIpR5fc4nOFJ\nid4nNBEeRzBMHHPbOUK9aqcRTBE8VUBo230PVTSvBhcaLetI9E2wKx0GcDP/pgMZ\nvNiQqsPi89HJ4T8CH4Q+GGo4XMiQPNUE/QirmhqRUKgK7PD7QJe8MOXNMOoqvMwu\nB5mxqMPFdF1hwnNTxxlOSZFm69uViupY//Z2Gz1W5l0zEs+a0owC9+uQQQ3TsK20\nI6dLuFh7st04jcsBYYKBsxc1PSKARhlgTa2bEBpmvdTx8FolSpc=\n=+MTb\n-----END PGP SIGNATURE-----", "payload": "tree 0852638727ab78008d7941651573d9fa07504339\nparent 2e66fae1dba3887a738c290ed958e21e9f990059\nauthor GrayJack <gr41.j4ck@gmail.com> 1603256091 -0300\ncommitter GrayJack <gr41.j4ck@gmail.com> 1603256091 -0300\n\nAdd tests for callable modifier\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a35ff6edf44519cc3b07869d8e5754c607b913cd", "html_url": "https://github.com/rust-lang/rust/commit/a35ff6edf44519cc3b07869d8e5754c607b913cd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a35ff6edf44519cc3b07869d8e5754c607b913cd/comments", "author": {"login": "GrayJack", "id": 17973728, "node_id": "MDQ6VXNlcjE3OTczNzI4", "avatar_url": "https://avatars.githubusercontent.com/u/17973728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrayJack", "html_url": "https://github.com/GrayJack", "followers_url": "https://api.github.com/users/GrayJack/followers", "following_url": "https://api.github.com/users/GrayJack/following{/other_user}", "gists_url": "https://api.github.com/users/GrayJack/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrayJack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrayJack/subscriptions", "organizations_url": "https://api.github.com/users/GrayJack/orgs", "repos_url": "https://api.github.com/users/GrayJack/repos", "events_url": "https://api.github.com/users/GrayJack/events{/privacy}", "received_events_url": "https://api.github.com/users/GrayJack/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GrayJack", "id": 17973728, "node_id": "MDQ6VXNlcjE3OTczNzI4", "avatar_url": "https://avatars.githubusercontent.com/u/17973728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GrayJack", "html_url": "https://github.com/GrayJack", "followers_url": "https://api.github.com/users/GrayJack/followers", "following_url": "https://api.github.com/users/GrayJack/following{/other_user}", "gists_url": "https://api.github.com/users/GrayJack/gists{/gist_id}", "starred_url": "https://api.github.com/users/GrayJack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GrayJack/subscriptions", "organizations_url": "https://api.github.com/users/GrayJack/orgs", "repos_url": "https://api.github.com/users/GrayJack/repos", "events_url": "https://api.github.com/users/GrayJack/events{/privacy}", "received_events_url": "https://api.github.com/users/GrayJack/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e66fae1dba3887a738c290ed958e21e9f990059", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e66fae1dba3887a738c290ed958e21e9f990059", "html_url": "https://github.com/rust-lang/rust/commit/2e66fae1dba3887a738c290ed958e21e9f990059"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "0cb84866d64830082304911e62a6b6d8b94f0611", "filename": "crates/ide/src/syntax_highlighting/test_data/highlighting.html", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a35ff6edf44519cc3b07869d8e5754c607b913cd/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/a35ff6edf44519cc3b07869d8e5754c607b913cd/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftest_data%2Fhighlighting.html?ref=a35ff6edf44519cc3b07869d8e5754c607b913cd", "patch": "@@ -44,6 +44,17 @@\n     <span class=\"keyword\">pub</span> <span class=\"keyword\">trait</span> <span class=\"trait declaration\">Copy</span> <span class=\"punctuation\">{</span><span class=\"punctuation\">}</span>\n <span class=\"punctuation\">}</span>\n \n+<span class=\"keyword\">pub</span> <span class=\"keyword\">mod</span> <span class=\"module declaration\">ops</span> <span class=\"punctuation\">{</span>\n+    <span class=\"attribute\">#</span><span class=\"attribute\">[</span><span class=\"function attribute\">lang</span><span class=\"attribute\"> </span><span class=\"operator\">=</span><span class=\"attribute\"> </span><span class=\"string_literal\">\"fn_once\"</span><span class=\"attribute\">]</span>\n+    <span class=\"keyword\">pub</span> <span class=\"keyword\">trait</span> <span class=\"trait declaration\">FnOnce</span><span class=\"punctuation\">&lt;</span><span class=\"type_param declaration\">Args</span><span class=\"punctuation\">&gt;</span> <span class=\"punctuation\">{</span><span class=\"punctuation\">}</span>\n+\n+    <span class=\"attribute\">#</span><span class=\"attribute\">[</span><span class=\"function attribute\">lang</span><span class=\"attribute\"> </span><span class=\"operator\">=</span><span class=\"attribute\"> </span><span class=\"string_literal\">\"fn_mut\"</span><span class=\"attribute\">]</span>\n+    <span class=\"keyword\">pub</span> <span class=\"keyword\">trait</span> <span class=\"trait declaration\">FnMut</span><span class=\"punctuation\">&lt;</span><span class=\"type_param declaration\">Args</span><span class=\"punctuation\">&gt;</span><span class=\"punctuation\">:</span> <span class=\"trait\">FnOnce</span><span class=\"punctuation\">&lt;</span><span class=\"type_param\">Args</span><span class=\"punctuation\">&gt;</span> <span class=\"punctuation\">{</span><span class=\"punctuation\">}</span>\n+\n+    <span class=\"attribute\">#</span><span class=\"attribute\">[</span><span class=\"function attribute\">lang</span><span class=\"attribute\"> </span><span class=\"operator\">=</span><span class=\"attribute\"> </span><span class=\"string_literal\">\"fn\"</span><span class=\"attribute\">]</span>\n+    <span class=\"keyword\">pub</span> <span class=\"keyword\">trait</span> <span class=\"trait declaration\">Fn</span><span class=\"punctuation\">&lt;</span><span class=\"type_param declaration\">Args</span><span class=\"punctuation\">&gt;</span><span class=\"punctuation\">:</span> <span class=\"trait\">FnMut</span><span class=\"punctuation\">&lt;</span><span class=\"type_param\">Args</span><span class=\"punctuation\">&gt;</span> <span class=\"punctuation\">{</span><span class=\"punctuation\">}</span>\n+<span class=\"punctuation\">}</span>\n+\n \n <span class=\"keyword\">struct</span> <span class=\"struct declaration\">Foo</span> <span class=\"punctuation\">{</span>\n     <span class=\"keyword\">pub</span> <span class=\"field declaration\">x</span><span class=\"punctuation\">:</span> <span class=\"builtin_type\">i32</span><span class=\"punctuation\">,</span>\n@@ -99,6 +110,11 @@\n     <span class=\"function\">foo</span><span class=\"operator\">::</span><span class=\"punctuation\">&lt;</span><span class=\"lifetime\">'a</span><span class=\"punctuation\">,</span> <span class=\"builtin_type\">i32</span><span class=\"punctuation\">&gt;</span><span class=\"punctuation\">(</span><span class=\"punctuation\">)</span>\n <span class=\"punctuation\">}</span>\n \n+<span class=\"keyword\">use</span> <span class=\"module\">ops</span><span class=\"operator\">::</span><span class=\"trait\">Fn</span><span class=\"punctuation\">;</span>\n+<span class=\"keyword\">fn</span> <span class=\"function declaration\">baz</span><span class=\"punctuation\">&lt;</span><span class=\"type_param declaration\">F</span><span class=\"punctuation\">:</span> <span class=\"trait\">Fn</span><span class=\"punctuation\">(</span><span class=\"punctuation\">)</span> <span class=\"operator\">-&gt;</span> <span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">&gt;</span><span class=\"punctuation\">(</span><span class=\"value_param declaration callable\">f</span><span class=\"punctuation\">:</span> <span class=\"type_param\">F</span><span class=\"punctuation\">)</span> <span class=\"punctuation\">{</span>\n+    <span class=\"value_param callable\">f</span><span class=\"punctuation\">(</span><span class=\"punctuation\">)</span>\n+<span class=\"punctuation\">}</span>\n+\n <span class=\"macro\">macro_rules!</span> <span class=\"macro declaration\">def_fn</span> <span class=\"punctuation\">{</span>\n     <span class=\"punctuation\">(</span><span class=\"punctuation\">$</span><span class=\"punctuation\">(</span><span class=\"punctuation\">$</span>tt<span class=\"punctuation\">:</span>tt<span class=\"punctuation\">)</span><span class=\"punctuation\">*</span><span class=\"punctuation\">)</span> <span class=\"operator\">=</span><span class=\"punctuation\">&gt;</span> <span class=\"punctuation\">{</span><span class=\"punctuation\">$</span><span class=\"punctuation\">(</span><span class=\"punctuation\">$</span>tt<span class=\"punctuation\">)</span><span class=\"punctuation\">*</span><span class=\"punctuation\">}</span>\n <span class=\"punctuation\">}</span>\n@@ -157,6 +173,9 @@\n     <span class=\"variable mutable\">copy</span><span class=\"punctuation\">.</span><span class=\"function\">quop</span><span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">;</span>\n     <span class=\"variable mutable\">copy</span><span class=\"punctuation\">.</span><span class=\"function mutable\">qux</span><span class=\"punctuation\">(</span><span class=\"punctuation\">)</span><span class=\"punctuation\">;</span>\n     <span class=\"variable mutable\">copy</span><span class=\"punctuation\">.</span><span class=\"function\">baz</span><span class=\"punctuation\">(</span><span class=\"variable mutable\">copy</span><span class=\"punctuation\">)</span><span class=\"punctuation\">;</span>\n+\n+    <span class=\"keyword\">let</span> <span class=\"variable declaration callable\">a</span> <span class=\"operator\">=</span> <span class=\"punctuation\">|</span><span class=\"value_param declaration\">x</span><span class=\"punctuation\">|</span> <span class=\"value_param\">x</span><span class=\"punctuation\">;</span>\n+    <span class=\"keyword\">let</span> <span class=\"variable declaration callable\">bar</span> <span class=\"operator\">=</span> <span class=\"struct\">Foo</span><span class=\"operator\">::</span><span class=\"function\">baz</span><span class=\"punctuation\">;</span>\n <span class=\"punctuation\">}</span>\n \n <span class=\"keyword\">enum</span> <span class=\"enum declaration\">Option</span><span class=\"punctuation\">&lt;</span><span class=\"type_param declaration\">T</span><span class=\"punctuation\">&gt;</span> <span class=\"punctuation\">{</span>"}, {"sha": "da20c300e28bc507222b9b92b279af44619bf20d", "filename": "crates/ide/src/syntax_highlighting/tests.rs", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/a35ff6edf44519cc3b07869d8e5754c607b913cd/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a35ff6edf44519cc3b07869d8e5754c607b913cd/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide%2Fsrc%2Fsyntax_highlighting%2Ftests.rs?ref=a35ff6edf44519cc3b07869d8e5754c607b913cd", "patch": "@@ -18,6 +18,17 @@ pub mod marker {\n     pub trait Copy {}\n }\n \n+pub mod ops {\n+    #[lang = \"fn_once\"]\n+    pub trait FnOnce<Args> {}\n+\n+    #[lang = \"fn_mut\"]\n+    pub trait FnMut<Args>: FnOnce<Args> {}\n+\n+    #[lang = \"fn\"]\n+    pub trait Fn<Args>: FnMut<Args> {}\n+}\n+\n \n struct Foo {\n     pub x: i32,\n@@ -73,6 +84,11 @@ fn foo<'a, T>() -> T {\n     foo::<'a, i32>()\n }\n \n+use ops::Fn;\n+fn baz<F: Fn() -> ()>(f: F) {\n+    f()\n+}\n+\n macro_rules! def_fn {\n     ($($tt:tt)*) => {$($tt)*}\n }\n@@ -131,6 +147,9 @@ fn main() {\n     copy.quop();\n     copy.qux();\n     copy.baz(copy);\n+\n+    let a = |x| x;\n+    let bar = Foo::baz;\n }\n \n enum Option<T> {"}]}