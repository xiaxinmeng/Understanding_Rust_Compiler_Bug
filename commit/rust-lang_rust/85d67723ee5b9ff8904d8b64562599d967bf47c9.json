{"sha": "85d67723ee5b9ff8904d8b64562599d967bf47c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1ZDY3NzIzZWU1YjlmZjg5MDRkOGI2NDU2MjU5OWQ5NjdiZjQ3Yzk=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-05-22T05:41:59Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-05-22T05:41:59Z"}, "message": "rustc: Move path_to_ident to ast_util", "tree": {"sha": "338313bba41993d6cb574517cfd80cf0c05c5938", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/338313bba41993d6cb574517cfd80cf0c05c5938"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85d67723ee5b9ff8904d8b64562599d967bf47c9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85d67723ee5b9ff8904d8b64562599d967bf47c9", "html_url": "https://github.com/rust-lang/rust/commit/85d67723ee5b9ff8904d8b64562599d967bf47c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85d67723ee5b9ff8904d8b64562599d967bf47c9/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c492a183d7e2c7bfb090940bb1e64b9ed83b0046", "url": "https://api.github.com/repos/rust-lang/rust/commits/c492a183d7e2c7bfb090940bb1e64b9ed83b0046", "html_url": "https://github.com/rust-lang/rust/commit/c492a183d7e2c7bfb090940bb1e64b9ed83b0046"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "2f0e44473522d6cdeecb86cc66ce8032521e104f", "filename": "src/librustsyntax/ast_util.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Flibrustsyntax%2Fast_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Flibrustsyntax%2Fast_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustsyntax%2Fast_util.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -25,6 +25,8 @@ fn path_name(p: @path) -> str { path_name_i(p.idents) }\n \n fn path_name_i(idents: [ident]) -> str { str::connect(idents, \"::\") }\n \n+fn path_to_ident(p: @path) -> ident { vec::last(p.idents) }\n+\n fn local_def(id: node_id) -> def_id { {crate: local_crate, node: id} }\n \n pure fn is_local(did: ast::def_id) -> bool { did.crate == local_crate }"}, {"sha": "efb849be6bef3cfedeb96407bc61e67a0dc5de2a", "filename": "src/rustc/middle/alias.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Falias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Falias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Falias.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -1,4 +1,5 @@\n import syntax::{ast, ast_util};\n+import ast_util::path_to_ident;\n import ast::{ident, fn_ident, node_id};\n import syntax::codemap::span;\n import syntax::visit;"}, {"sha": "36333ca85754e7d4d7789d510e460f3ae5b17d58", "filename": "src/rustc/middle/ast_map.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fast_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fast_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fast_map.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -4,6 +4,7 @@ import syntax::ast::*;\n import syntax::print::pprust;\n import syntax::ast_util;\n import middle::pat_util::*;\n+import syntax::ast_util::path_to_ident;\n import syntax::ast_util::inlined_item_methods;\n import syntax::{visit, codemap};\n import driver::session::session;"}, {"sha": "72bb2257c54365a591b06849f8ff22628d883700", "filename": "src/rustc/middle/pat_util.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fpat_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fpat_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fpat_util.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -1,5 +1,6 @@\n import syntax::ast::*;\n import syntax::ast_util;\n+import syntax::ast_util::path_to_ident;\n import syntax::ast_util::respan;\n import syntax::fold;\n import syntax::fold::*;\n@@ -9,7 +10,6 @@ import std::map::hashmap;\n export walk_pat;\n export pat_binding_ids, pat_bindings, pat_id_map;\n export pat_is_variant;\n-export path_to_ident;\n \n type pat_id_map = std::map::hashmap<str, node_id>;\n \n@@ -68,5 +68,3 @@ fn pat_binding_ids(dm: resolve::def_map, pat: @pat) -> [node_id] {\n     pat_bindings(dm, pat) {|b_id, _sp, _pt| found += [b_id]; };\n     ret found;\n }\n-\n-fn path_to_ident(p: @path) -> ident { vec::last(p.idents) }"}, {"sha": "6df257d34d6a1a4194d9732409cf366c22e8fff0", "filename": "src/rustc/middle/resolve.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Fresolve.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -1,7 +1,8 @@\n import syntax::{ast, ast_util, codemap};\n import syntax::ast::*;\n import ast::{ident, fn_ident, def, def_id, node_id};\n-import syntax::ast_util::{local_def, def_id_of_def, class_item_ident};\n+import syntax::ast_util::{local_def, def_id_of_def,\n+                          class_item_ident, path_to_ident};\n import pat_util::*;\n \n import syntax::attr;"}, {"sha": "493d1ee4ad2dd5321f457bab1a7896f60edd8d7c", "filename": "src/rustc/middle/trans/alt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Falt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Falt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Falt.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -6,7 +6,7 @@ import build::*;\n import base::*;\n import syntax::ast;\n import syntax::ast_util;\n-import syntax::ast_util::{dummy_sp};\n+import syntax::ast_util::{dummy_sp, path_to_ident};\n import syntax::ast::def_id;\n import syntax::codemap::span;\n import syntax::print::pprust::pat_to_str;"}, {"sha": "868ddc4fd56f4d97f92cf1e18220d11c2f083946", "filename": "src/rustc/middle/trans/base.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -22,8 +22,7 @@ import session::session;\n import syntax::attr;\n import back::{link, abi, upcall};\n import syntax::{ast, ast_util, codemap};\n-import ast_util::inlined_item_methods;\n-import ast_util::local_def;\n+import ast_util::{inlined_item_methods, local_def, path_to_ident};\n import syntax::visit;\n import syntax::codemap::span;\n import syntax::print::pprust::{expr_to_str, stmt_to_str, path_to_str};"}, {"sha": "58d671f503a8fc6fcef9283e5c0845f6f87d0a51", "filename": "src/rustc/middle/trans/debuginfo.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -648,7 +648,7 @@ fn create_local_var(bcx: block, local: @ast::local)\n     }\n \n     let name = alt local.node.pat.node {\n-      ast::pat_ident(pth, _) { pat_util::path_to_ident(pth) }\n+      ast::pat_ident(pth, _) { ast_util::path_to_ident(pth) }\n       // FIXME this should be handled\n       _ { fail \"no single variable name for local\"; }\n     };"}, {"sha": "268777f5aaf28d0f6a01175ed4e5679f99750b83", "filename": "src/rustc/middle/typeck/check/alt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Falt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d67723ee5b9ff8904d8b64562599d967bf47c9/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Falt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck%2Falt.rs?ref=85d67723ee5b9ff8904d8b64562599d967bf47c9", "patch": "@@ -154,7 +154,7 @@ fn check_pat(pcx: pat_ctxt, pat: @ast::pat, expected: ty::t) {\n         let vid = lookup_local(pcx.fcx, pat.span, pat.id);\n         let mut typ = ty::mk_var(tcx, vid);\n         demand::suptype(pcx.fcx, pat.span, expected, typ);\n-        let canon_id = pcx.map.get(pat_util::path_to_ident(name));\n+        let canon_id = pcx.map.get(ast_util::path_to_ident(name));\n         if canon_id != pat.id {\n             let tv_id = lookup_local(pcx.fcx, pat.span, canon_id);\n             let ct = ty::mk_var(tcx, tv_id);"}]}