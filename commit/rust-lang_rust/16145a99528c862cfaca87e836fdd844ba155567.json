{"sha": "16145a99528c862cfaca87e836fdd844ba155567", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2MTQ1YTk5NTI4Yzg2MmNmYWNhODdlODM2ZmRkODQ0YmExNTU1Njc=", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2021-06-24T08:32:24Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2021-06-24T08:32:24Z"}, "message": "Test that `env_clear` works on Windows", "tree": {"sha": "cdbc9d6f13df2a2dcfb26e5f29e723d44da2f584", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cdbc9d6f13df2a2dcfb26e5f29e723d44da2f584"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16145a99528c862cfaca87e836fdd844ba155567", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmDUQxgACgkQcTRy8vRW\nJ953sBAAkcuRqCMRJUlgSANhN2cB/dw7g8yxZLIEMrx1qlCWEwRqOm0n7BvKkASF\nSf7KMen9HM3dJrbGLgfo4vqAmeaqyHhoA2e+oryZlbp8WRua5BXGQS4KBgij5+fM\nP8RMLWPmt8gPJyh4BinprKMZuIW8oW9+OTmIOWut6Qw4p7PqbEqGH8gU1RsuD9yZ\n1HBknYlHUillKgo+7ScgV9A+KBkI7PIj0AfbYYfE8YJGKjWTiVHKhPad7C0lGuQ6\ncRZtkC9laPiNdnzWwBTpatSGyF2UAgub0zYxHWeR5XaLvBbXt46dnYg26U6M6AUM\nVXQfkGkXNc5aBzmXw3womQb9nn7x6OAW/7fl9Xl/Enbwy+I0XtlMU5Vw2pQ73W3w\neHD0+K4WfZ03jYes/T076+yvI7oJ3gld67Afzb8XeVVEjyK74NNFupnbmw+oqS0y\nUipdwPvS/ddUuX99PR+53nlS51yvyWMCTmIpTre8CgzalGz758vZ6lxrDAtNJ57y\nfGznQnSY8xtY1ErD5gdZZ3i63/3gDGlfQKgay2DIM4TUfVTf99c6wD0wHNOBlQsn\nkIyLSJ/YmGgci0HHhmxjs/ZK5f0byADSRDuASEMY7LaaHoWssSTD3wgWrxWCT2oG\nJ7g/DRHkXocC8FpjIBZ4XKXwKJCWYQqYvvr5ctHFDHUlFpXQlyc=\n=4pry\n-----END PGP SIGNATURE-----", "payload": "tree cdbc9d6f13df2a2dcfb26e5f29e723d44da2f584\nparent 365a3586a94dc9ca675ddb02a86e116e8161481a\nauthor Chris Denton <christophersdenton@gmail.com> 1624523544 +0100\ncommitter Chris Denton <christophersdenton@gmail.com> 1624523544 +0100\n\nTest that `env_clear` works on Windows\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16145a99528c862cfaca87e836fdd844ba155567", "html_url": "https://github.com/rust-lang/rust/commit/16145a99528c862cfaca87e836fdd844ba155567", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16145a99528c862cfaca87e836fdd844ba155567/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "365a3586a94dc9ca675ddb02a86e116e8161481a", "url": "https://api.github.com/repos/rust-lang/rust/commits/365a3586a94dc9ca675ddb02a86e116e8161481a", "html_url": "https://github.com/rust-lang/rust/commit/365a3586a94dc9ca675ddb02a86e116e8161481a"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "bc71c150550a4080a0ad6f51e945a7cef6698460", "filename": "library/std/src/process/tests.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/16145a99528c862cfaca87e836fdd844ba155567/library%2Fstd%2Fsrc%2Fprocess%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16145a99528c862cfaca87e836fdd844ba155567/library%2Fstd%2Fsrc%2Fprocess%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fprocess%2Ftests.rs?ref=16145a99528c862cfaca87e836fdd844ba155567", "patch": "@@ -399,3 +399,12 @@ fn test_command_implements_send_sync() {\n     fn take_send_sync_type<T: Send + Sync>(_: T) {}\n     take_send_sync_type(Command::new(\"\"))\n }\n+\n+// Ensure that starting a process with no environment variables works on Windows.\n+// This will fail if the environment block is ill-formed.\n+#[test]\n+#[cfg(windows)]\n+fn env_empty() {\n+    let p = Command::new(\"cmd\").args(&[\"/C\", \"exit 0\"]).env_clear().spawn();\n+    assert!(p.is_ok());\n+}"}]}