{"sha": "8d8178f93184d09cf1e3f813257d6aeb19d08c57", "node_id": "C_kwDOAAsO6NoAKDhkODE3OGY5MzE4NGQwOWNmMWUzZjgxMzI1N2Q2YWViMTlkMDhjNTc", "commit": {"author": {"name": "y21", "email": "30553356+y21@users.noreply.github.com", "date": "2023-04-19T20:26:50Z"}, "committer": {"name": "y21", "email": "30553356+y21@users.noreply.github.com", "date": "2023-04-29T16:59:07Z"}, "message": "rename lint to `manual_while_let_some`", "tree": {"sha": "534c4d56ebf804a3d22d7b9e4abe12167d800f47", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/534c4d56ebf804a3d22d7b9e4abe12167d800f47"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8d8178f93184d09cf1e3f813257d6aeb19d08c57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8d8178f93184d09cf1e3f813257d6aeb19d08c57", "html_url": "https://github.com/rust-lang/rust/commit/8d8178f93184d09cf1e3f813257d6aeb19d08c57", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8d8178f93184d09cf1e3f813257d6aeb19d08c57/comments", "author": {"login": "y21", "id": 30553356, "node_id": "MDQ6VXNlcjMwNTUzMzU2", "avatar_url": "https://avatars.githubusercontent.com/u/30553356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y21", "html_url": "https://github.com/y21", "followers_url": "https://api.github.com/users/y21/followers", "following_url": "https://api.github.com/users/y21/following{/other_user}", "gists_url": "https://api.github.com/users/y21/gists{/gist_id}", "starred_url": "https://api.github.com/users/y21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y21/subscriptions", "organizations_url": "https://api.github.com/users/y21/orgs", "repos_url": "https://api.github.com/users/y21/repos", "events_url": "https://api.github.com/users/y21/events{/privacy}", "received_events_url": "https://api.github.com/users/y21/received_events", "type": "User", "site_admin": false}, "committer": {"login": "y21", "id": 30553356, "node_id": "MDQ6VXNlcjMwNTUzMzU2", "avatar_url": "https://avatars.githubusercontent.com/u/30553356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/y21", "html_url": "https://github.com/y21", "followers_url": "https://api.github.com/users/y21/followers", "following_url": "https://api.github.com/users/y21/following{/other_user}", "gists_url": "https://api.github.com/users/y21/gists{/gist_id}", "starred_url": "https://api.github.com/users/y21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/y21/subscriptions", "organizations_url": "https://api.github.com/users/y21/orgs", "repos_url": "https://api.github.com/users/y21/repos", "events_url": "https://api.github.com/users/y21/events{/privacy}", "received_events_url": "https://api.github.com/users/y21/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f10e39fd2be243b7f0d4f82f56420ba1cbd4a7bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/f10e39fd2be243b7f0d4f82f56420ba1cbd4a7bb", "html_url": "https://github.com/rust-lang/rust/commit/f10e39fd2be243b7f0d4f82f56420ba1cbd4a7bb"}], "stats": {"total": 42, "additions": 21, "deletions": 21}, "files": [{"sha": "d1e98a93940d6abdbc7c7023e0bcc8cc67e07cab", "filename": "CHANGELOG.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -4797,6 +4797,7 @@ Released 2018-09-13\n [`manual_strip`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_strip\n [`manual_swap`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_swap\n [`manual_unwrap_or`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_unwrap_or\n+[`manual_while_let_some`]: https://rust-lang.github.io/rust-clippy/master/index.html#manual_while_let_some\n [`many_single_char_names`]: https://rust-lang.github.io/rust-clippy/master/index.html#many_single_char_names\n [`map_clone`]: https://rust-lang.github.io/rust-clippy/master/index.html#map_clone\n [`map_collect_result_unit`]: https://rust-lang.github.io/rust-clippy/master/index.html#map_collect_result_unit\n@@ -5160,7 +5161,6 @@ Released 2018-09-13\n [`while_immutable_condition`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_immutable_condition\n [`while_let_loop`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_let_loop\n [`while_let_on_iterator`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_let_on_iterator\n-[`while_pop_unwrap`]: https://rust-lang.github.io/rust-clippy/master/index.html#while_pop_unwrap\n [`wildcard_dependencies`]: https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_dependencies\n [`wildcard_enum_match_arm`]: https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_enum_match_arm\n [`wildcard_imports`]: https://rust-lang.github.io/rust-clippy/master/index.html#wildcard_imports"}, {"sha": "44e725be710e037d733c9062db6387c1534f4205", "filename": "clippy_lints/src/declared_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Fdeclared_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Fdeclared_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdeclared_lints.rs?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -249,6 +249,7 @@ pub(crate) static LINTS: &[&crate::LintInfo] = &[\n     crate::loops::MANUAL_FIND_INFO,\n     crate::loops::MANUAL_FLATTEN_INFO,\n     crate::loops::MANUAL_MEMCPY_INFO,\n+    crate::loops::MANUAL_WHILE_LET_SOME_INFO,\n     crate::loops::MISSING_SPIN_LOOP_INFO,\n     crate::loops::MUT_RANGE_BOUND_INFO,\n     crate::loops::NEEDLESS_RANGE_LOOP_INFO,\n@@ -258,7 +259,6 @@ pub(crate) static LINTS: &[&crate::LintInfo] = &[\n     crate::loops::WHILE_IMMUTABLE_CONDITION_INFO,\n     crate::loops::WHILE_LET_LOOP_INFO,\n     crate::loops::WHILE_LET_ON_ITERATOR_INFO,\n-    crate::loops::WHILE_POP_UNWRAP_INFO,\n     crate::macro_use::MACRO_USE_IMPORTS_INFO,\n     crate::main_recursion::MAIN_RECURSION_INFO,\n     crate::manual_assert::MANUAL_ASSERT_INFO,"}, {"sha": "cb9c84be4c7a695fbd481f088cc218b4db4dece0", "filename": "clippy_lints/src/loops/manual_while_let_some.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Floops%2Fmanual_while_let_some.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Floops%2Fmanual_while_let_some.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops%2Fmanual_while_let_some.rs?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -10,7 +10,7 @@ use rustc_lint::LateContext;\n use rustc_span::Span;\n use std::borrow::Cow;\n \n-use super::WHILE_POP_UNWRAP;\n+use super::MANUAL_WHILE_LET_SOME;\n \n /// The kind of statement that the `pop()` call appeared in.\n ///\n@@ -31,7 +31,7 @@ enum PopStmt<'hir> {\n fn report_lint(cx: &LateContext<'_>, pop_span: Span, pop_stmt_kind: PopStmt<'_>, loop_span: Span, receiver_span: Span) {\n     span_lint_and_then(\n         cx,\n-        WHILE_POP_UNWRAP,\n+        MANUAL_WHILE_LET_SOME,\n         pop_span,\n         \"you seem to be trying to pop elements from a `Vec` in a loop\",\n         |diag| {", "previous_filename": "clippy_lints/src/loops/while_pop_unwrap.rs"}, {"sha": "f83ad388a742fc4d5916f4bc216de4d4b6c1f724", "filename": "clippy_lints/src/loops/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Floops%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/clippy_lints%2Fsrc%2Floops%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops%2Fmod.rs?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -7,6 +7,7 @@ mod iter_next_loop;\n mod manual_find;\n mod manual_flatten;\n mod manual_memcpy;\n+mod manual_while_let_some;\n mod missing_spin_loop;\n mod mut_range_bound;\n mod needless_range_loop;\n@@ -17,7 +18,6 @@ mod utils;\n mod while_immutable_condition;\n mod while_let_loop;\n mod while_let_on_iterator;\n-mod while_pop_unwrap;\n \n use clippy_utils::higher;\n use rustc_hir::{Expr, ExprKind, LoopSource, Pat};\n@@ -582,7 +582,7 @@ declare_clippy_lint! {\n     /// in the body as a separate operation.\n     ///\n     /// ### Why is this bad?\n-    /// Such loops can be written in a more idiomatic way by using a while..let loop and directly\n+    /// Such loops can be written in a more idiomatic way by using a while-let loop and directly\n     /// pattern matching on the return value of `Vec::pop()`.\n     ///\n     /// ### Example\n@@ -601,7 +601,7 @@ declare_clippy_lint! {\n     /// }\n     /// ```\n     #[clippy::version = \"1.70.0\"]\n-    pub WHILE_POP_UNWRAP,\n+    pub MANUAL_WHILE_LET_SOME,\n     style,\n     \"checking for emptiness of a `Vec` in the loop condition and popping an element in the body\"\n }\n@@ -625,7 +625,7 @@ declare_lint_pass!(Loops => [\n     SINGLE_ELEMENT_LOOP,\n     MISSING_SPIN_LOOP,\n     MANUAL_FIND,\n-    WHILE_POP_UNWRAP\n+    MANUAL_WHILE_LET_SOME\n ]);\n \n impl<'tcx> LateLintPass<'tcx> for Loops {\n@@ -675,7 +675,7 @@ impl<'tcx> LateLintPass<'tcx> for Loops {\n         if let Some(higher::While { condition, body, span }) = higher::While::hir(expr) {\n             while_immutable_condition::check(cx, condition, body);\n             missing_spin_loop::check(cx, condition, body);\n-            while_pop_unwrap::check(cx, condition, body, span);\n+            manual_while_let_some::check(cx, condition, body, span);\n         }\n     }\n }"}, {"sha": "75738209bad1369ccd41d69a39658098af9e12f0", "filename": "tests/ui/manual_while_let_some.fixed", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_while_let_some.fixed?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -1,7 +1,7 @@\n // run-rustfix\n \n #![allow(unused)]\n-#![warn(clippy::while_pop_unwrap)]\n+#![warn(clippy::manual_while_let_some)]\n \n struct VecInStruct {\n     numbers: Vec<i32>,\n@@ -73,7 +73,7 @@ fn main() {\n             }\n         };\n     }\n-    // Do not warn if the loop is in a macro.\n+    // Do not warn if the loop comes from a macro.\n     generate_loop!();\n \n     // Try other kinds of patterns", "previous_filename": "tests/ui/while_pop_unwrap.fixed"}, {"sha": "142c14715983de241d69e0cfb286a65929c3c787", "filename": "tests/ui/manual_while_let_some.rs", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_while_let_some.rs?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -1,7 +1,7 @@\n // run-rustfix\n \n #![allow(unused)]\n-#![warn(clippy::while_pop_unwrap)]\n+#![warn(clippy::manual_while_let_some)]\n \n struct VecInStruct {\n     numbers: Vec<i32>,\n@@ -73,7 +73,7 @@ fn main() {\n             }\n         };\n     }\n-    // Do not warn if the loop is in a macro.\n+    // Do not warn if the loop comes from a macro.\n     generate_loop!();\n \n     // Try other kinds of patterns", "previous_filename": "tests/ui/while_pop_unwrap.rs"}, {"sha": "633fe05c49b840c62c03045c1003822edcd020fb", "filename": "tests/ui/manual_while_let_some.stderr", "status": "renamed", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8d8178f93184d09cf1e3f813257d6aeb19d08c57/tests%2Fui%2Fmanual_while_let_some.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_while_let_some.stderr?ref=8d8178f93184d09cf1e3f813257d6aeb19d08c57", "patch": "@@ -1,18 +1,18 @@\n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:23:9\n+  --> $DIR/manual_while_let_some.rs:23:9\n    |\n LL |         let number = numbers.pop().unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n-   = note: `-D clippy::while-pop-unwrap` implied by `-D warnings`\n+   = note: `-D clippy::manual-while-let-some` implied by `-D warnings`\n help: consider using a `while..let` loop\n    |\n LL ~     while let Some(number) = numbers.pop() {\n LL ~         \n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:31:9\n+  --> $DIR/manual_while_let_some.rs:31:9\n    |\n LL |         let number = val.numbers.pop().unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -24,7 +24,7 @@ LL ~\n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:35:20\n+  --> $DIR/manual_while_let_some.rs:35:20\n    |\n LL |         accept_i32(numbers.pop().unwrap());\n    |                    ^^^^^^^^^^^^^^^^^^^^^^\n@@ -36,7 +36,7 @@ LL ~         accept_i32(element);\n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:39:20\n+  --> $DIR/manual_while_let_some.rs:39:20\n    |\n LL |         accept_i32(numbers.pop().expect(\"\"));\n    |                    ^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -48,7 +48,7 @@ LL ~         accept_i32(element);\n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:82:9\n+  --> $DIR/manual_while_let_some.rs:82:9\n    |\n LL |         let (a, b) = numbers.pop().unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -60,7 +60,7 @@ LL ~\n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:86:26\n+  --> $DIR/manual_while_let_some.rs:86:26\n    |\n LL |         accept_i32_tuple(numbers.pop().unwrap());\n    |                          ^^^^^^^^^^^^^^^^^^^^^^\n@@ -72,7 +72,7 @@ LL ~         accept_i32_tuple(element);\n    |\n \n error: you seem to be trying to pop elements from a `Vec` in a loop\n-  --> $DIR/while_pop_unwrap.rs:91:9\n+  --> $DIR/manual_while_let_some.rs:91:9\n    |\n LL |         let Foo { a, b } = results.pop().unwrap();\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^", "previous_filename": "tests/ui/while_pop_unwrap.stderr"}]}