{"sha": "a09bce1047ab5714e56891edee0feab8813ba99e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEwOWJjZTEwNDdhYjU3MTRlNTY4OTFlZGVlMGZlYWI4ODEzYmE5OWU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-07-29T19:01:09Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-07-29T22:11:07Z"}, "message": "Feature gate associated type defaults\n\nThere are multiple issues with them as designed and implemented.\n\ncc #27364", "tree": {"sha": "4b9bb542cd10053a63b53a802f43a9cab6ec1d98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b9bb542cd10053a63b53a802f43a9cab6ec1d98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a09bce1047ab5714e56891edee0feab8813ba99e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a09bce1047ab5714e56891edee0feab8813ba99e", "html_url": "https://github.com/rust-lang/rust/commit/a09bce1047ab5714e56891edee0feab8813ba99e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a09bce1047ab5714e56891edee0feab8813ba99e/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c8194c4777ce1291d78066f2c0d9052b0d2a681", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c8194c4777ce1291d78066f2c0d9052b0d2a681", "html_url": "https://github.com/rust-lang/rust/commit/1c8194c4777ce1291d78066f2c0d9052b0d2a681"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "6da1a3da5fd600c4394d458ff8d226c7583c7262", "filename": "src/libcore/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Flibcore%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Flibcore%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Flib.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -65,6 +65,7 @@\n #![allow(raw_pointer_derive)]\n #![deny(missing_docs)]\n \n+#![feature(associated_type_defaults)]\n #![feature(intrinsics)]\n #![feature(lang_items)]\n #![feature(on_unimplemented)]"}, {"sha": "945e457a77b7313dc55259e81387397ac850def0", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -165,7 +165,10 @@ const KNOWN_FEATURES: &'static [(&'static str, &'static str, Status)] = &[\n     (\"static_recursion\", \"1.3.0\", Active),\n \n     // Allows default type parameters to influence type inference.\n-    (\"default_type_parameter_fallback\", \"1.3.0\", Active)\n+    (\"default_type_parameter_fallback\", \"1.3.0\", Active),\n+\n+    // Allows associated type defaults\n+    (\"associated_type_defaults\", \"1.2.0\", Active),\n ];\n // (changing above list without updating src/doc/reference.md makes @cmr sad)\n \n@@ -763,6 +766,10 @@ impl<'a, 'v> Visitor<'v> for PostExpansionVisitor<'a> {\n                     self.gate_feature(\"const_fn\", ti.span, \"const fn is unstable\");\n                 }\n             }\n+            ast::TypeTraitItem(_, Some(_)) => {\n+                self.gate_feature(\"associated_type_defaults\", ti.span,\n+                                  \"associated type defaults are unstable\");\n+            }\n             _ => {}\n         }\n         visit::walk_trait_item(self, ti);"}, {"sha": "43852a4e793f363a6477cb8dc7df1caf906c2a65", "filename": "src/test/auxiliary/xcrate_associated_type_defaults.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Fauxiliary%2Fxcrate_associated_type_defaults.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Fauxiliary%2Fxcrate_associated_type_defaults.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fxcrate_associated_type_defaults.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![feature(associated_type_defaults)]\n+\n pub trait Foo {\n     type Input = usize;\n     fn bar(&self, _: Self::Input) {}"}, {"sha": "fc4871a712dffc64519885c861f8682253746307", "filename": "src/test/compile-fail/feature-gate-assoc-type-defaults.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Fcompile-fail%2Ffeature-gate-assoc-type-defaults.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Fcompile-fail%2Ffeature-gate-assoc-type-defaults.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Ffeature-gate-assoc-type-defaults.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -0,0 +1,15 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+trait Foo {\n+    type Bar = u8; //~ ERROR associated type defaults are unstable\n+}\n+\n+fn main() {}"}, {"sha": "3e6c72c993a0aa5e480919674aff6b4b0cdc62db", "filename": "src/test/run-pass/default-associated-types.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Frun-pass%2Fdefault-associated-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Frun-pass%2Fdefault-associated-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdefault-associated-types.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![feature(associated_type_defaults)]\n+\n trait Foo<T> {\n     type Out = T;\n     fn foo(&self) -> Self::Out;"}, {"sha": "381df7c5d5938e4222e0ca30a2c0949209ba5f37", "filename": "src/test/run-pass/issue-25339.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Frun-pass%2Fissue-25339.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a09bce1047ab5714e56891edee0feab8813ba99e/src%2Ftest%2Frun-pass%2Fissue-25339.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-25339.rs?ref=a09bce1047ab5714e56891edee0feab8813ba99e", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+#![feature(associated_type_defaults)]\n+\n use std::marker::PhantomData;\n \n pub trait Routing<I> {"}]}