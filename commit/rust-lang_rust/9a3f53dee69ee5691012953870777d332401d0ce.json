{"sha": "9a3f53dee69ee5691012953870777d332401d0ce", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhM2Y1M2RlZTY5ZWU1NjkxMDEyOTUzODcwNzc3ZDMzMjQwMWQwY2U=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-02T00:17:04Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-10-02T00:17:04Z"}, "message": "Partially hash `let` declaration in `SpanlessHash`\n\nThe hash never needs to be good but before it was simply doing nothing\nfor these.", "tree": {"sha": "6633f523bdc1c29c17c04f3f77dedfd95603ceeb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6633f523bdc1c29c17c04f3f77dedfd95603ceeb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a3f53dee69ee5691012953870777d332401d0ce", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJX8FI9AAoJEF5CfHlMukXoPwgQAJdDuKHZUgm8Z5IdTouv3KBI\nRxcOcooLEMVLTGPdGSgEdt11QaHLk4XMR9X2zWlYdvjSrGj7qVWnqkBqcU2WREj+\nXPzDCZg9yhaouUjHgPTYhxvBXd7ZGKttxMWCDe5f9oaz8cmQyWolo323Jsq1qcp4\nyWd1qHl6e8YuYtJiC5AKGPiLzmhkjCQf7XAOLXJlvkMOXPHnqFmsaCQcNgJow7D0\n1hTEEq+W6o7cX606EelFS+hfbukfk6x/kVd66eNwcnyJyfdgi62a/Hxr+Ug55chr\nDtnDeX0BuwI8i+eP5F2NrA4glXrxbM1UFcRoDNJ7t/98nVfYJfEUxwcdWb5DsE0L\nggN3Tvl9e0863qwjQGcOfFGfrZ5wWI0hdf+z0ZO1CMwpj2ydj6z3rSY7hj6DF1k4\n75a6A7ZACKKeO1ls5HLe9w/kkYCNyHXiME061iGNUdmQaejV8UBCATA63uL6nBAe\n9dbkCRLxzvBV1kf9f+a4Oz/ozmS4fKgb/OuF4inxYVDJL6klGvpr7O4JE1/ks/y2\nQmtYXlUEbuB1467gPU+PeCjeJjjnb2S6esgdlbo9tneXfxLguiXaJgkspn8jiIar\niVoqwMRpDdRtP3pNtBBNAg87m3gvgiIex7IPOBPICvwR6uWjZSC8Z5YDUIRtAAcT\nK3km1mCTzxrK+HZ+aWnl\n=hqTZ\n-----END PGP SIGNATURE-----", "payload": "tree 6633f523bdc1c29c17c04f3f77dedfd95603ceeb\nparent 6302e41ccbca0f9e1a6921a79f57cee5394b2834\nauthor mcarton <cartonmartin+git@gmail.com> 1475367424 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1475367424 +0200\n\nPartially hash `let` declaration in `SpanlessHash`\n\nThe hash never needs to be good but before it was simply doing nothing\nfor these.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a3f53dee69ee5691012953870777d332401d0ce", "html_url": "https://github.com/rust-lang/rust/commit/9a3f53dee69ee5691012953870777d332401d0ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a3f53dee69ee5691012953870777d332401d0ce/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6302e41ccbca0f9e1a6921a79f57cee5394b2834", "url": "https://api.github.com/repos/rust-lang/rust/commits/6302e41ccbca0f9e1a6921a79f57cee5394b2834", "html_url": "https://github.com/rust-lang/rust/commit/6302e41ccbca0f9e1a6921a79f57cee5394b2834"}], "stats": {"total": 44, "additions": 28, "deletions": 16}, "files": [{"sha": "bb9d0583ab1c6e4c3a4fb09bbbb1c0582f8097e0", "filename": "clippy_lints/src/utils/hir.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/9a3f53dee69ee5691012953870777d332401d0ce/clippy_lints%2Fsrc%2Futils%2Fhir.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a3f53dee69ee5691012953870777d332401d0ce/clippy_lints%2Fsrc%2Futils%2Fhir.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fhir.rs?ref=9a3f53dee69ee5691012953870777d332401d0ce", "patch": "@@ -528,10 +528,15 @@ impl<'a, 'tcx: 'a> SpanlessHash<'a, 'tcx> {\n \n     pub fn hash_stmt(&mut self, b: &Stmt) {\n         match b.node {\n-            StmtDecl(ref _decl, _) => {\n+            StmtDecl(ref decl, _) => {\n                 let c: fn(_, _) -> _ = StmtDecl;\n                 c.hash(&mut self.s);\n-                // TODO: decl\n+\n+                if let DeclLocal(ref local) = decl.node {\n+                    if let Some(ref init) = local.init {\n+                        self.hash_expr(init);\n+                    }\n+                }\n             }\n             StmtExpr(ref expr, _) => {\n                 let c: fn(_, _) -> _ = StmtExpr;"}, {"sha": "dba653a148ffcc5832f2c72f4f3145086823385b", "filename": "tests/compile-fail/copies.rs", "status": "modified", "additions": 21, "deletions": 14, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/9a3f53dee69ee5691012953870777d332401d0ce/tests%2Fcompile-fail%2Fcopies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a3f53dee69ee5691012953870777d332401d0ce/tests%2Fcompile-fail%2Fcopies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fcopies.rs?ref=9a3f53dee69ee5691012953870777d332401d0ce", "patch": "@@ -70,20 +70,27 @@ fn if_same_then_else() -> Result<&'static str, ()> {\n         foo();\n     }\n \n-    let _ = if true {\n-        //~^NOTE same as this\n-        foo();\n-        let mut a = 42 + [23].len() as i32;\n-        a += 7;\n-        a = -31-a;\n-        a\n-    }\n-    else { //~ERROR this `if` has identical blocks\n-        foo();\n-        let mut a = 42 + [23].len() as i32;\n-        a += 7;\n-        a = -31-a;\n-        a\n+    let _ = match 42 {\n+        42 => {\n+            //~^ NOTE same as this\n+            //~| NOTE refactoring\n+            foo();\n+            let mut a = 42 + [23].len() as i32;\n+            if true {\n+                a += 7;\n+            }\n+            a = -31-a;\n+            a\n+        }\n+        _ => { //~ERROR this `match` has identical arm bodies\n+            foo();\n+            let mut a = 42 + [23].len() as i32;\n+            if true {\n+                a += 7;\n+            }\n+            a = -31-a;\n+            a\n+        }\n     };\n \n     if true {"}]}