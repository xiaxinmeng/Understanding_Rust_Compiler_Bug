{"sha": "ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhN2RiMDc4N2Q5ZTAzZmZiZTdlM2Y5YWVhMjg3NWVhMDc3ZmMxZTg=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-06-22T12:30:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-06-22T12:30:11Z"}, "message": "Rollup merge of #42805 - stepancheg:forward-python, r=alexcrichton\n\nPass path to python from bootstrap.py to bootstrap.rs\n\nWhen bootstrap is executed with python not in `$PATH`, (e. g.\n`c:\\Python27\\python.exe x.py test`) bootstrap cannot find python\nand crashes.\n\nThis commit passes path to python in `BOOTSTRAP_PYTHON` env var.", "tree": {"sha": "831fc9ef9a7b6d5a210cd222ac665012421faf67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/831fc9ef9a7b6d5a210cd222ac665012421faf67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "html_url": "https://github.com/rust-lang/rust/commit/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a859f2bd4b5c3e0a893a888ddc4f30fe7c302cdb", "url": "https://api.github.com/repos/rust-lang/rust/commits/a859f2bd4b5c3e0a893a888ddc4f30fe7c302cdb", "html_url": "https://github.com/rust-lang/rust/commit/a859f2bd4b5c3e0a893a888ddc4f30fe7c302cdb"}, {"sha": "f441e07feb0d8421beaedc5223478bb6e08a5462", "url": "https://api.github.com/repos/rust-lang/rust/commits/f441e07feb0d8421beaedc5223478bb6e08a5462", "html_url": "https://github.com/rust-lang/rust/commit/f441e07feb0d8421beaedc5223478bb6e08a5462"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "8dc2875ec42473ca8dbf8eb83ad7d3a042cba34e", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "patch": "@@ -668,6 +668,7 @@ def bootstrap():\n     env[\"BUILD\"] = rb.build\n     env[\"SRC\"] = rb.rust_root\n     env[\"BOOTSTRAP_PARENT_ID\"] = str(os.getpid())\n+    env[\"BOOTSTRAP_PYTHON\"] = sys.executable\n     run(args, env=env, verbose=rb.verbose)\n \n "}, {"sha": "5ccd131b77ae46f845c24ee186664ea6a18cc595", "filename": "src/bootstrap/sanity.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8/src%2Fbootstrap%2Fsanity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8/src%2Fbootstrap%2Fsanity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fsanity.rs?ref=ea7db0787d9e03ffbe7e3f9aea2875ea077fc1e8", "patch": "@@ -23,6 +23,7 @@ use std::env;\n use std::ffi::{OsStr, OsString};\n use std::fs;\n use std::process::Command;\n+use std::path::PathBuf;\n \n use build_helper::output;\n \n@@ -86,6 +87,12 @@ pub fn check(build: &mut Build) {\n         }\n     }\n \n+    if build.config.python.is_none() {\n+        // set by bootstrap.py\n+        if let Some(v) = env::var_os(\"BOOTSTRAP_PYTHON\") {\n+            build.config.python = Some(PathBuf::from(v));\n+        }\n+    }\n     if build.config.python.is_none() {\n         build.config.python = have_cmd(\"python2.7\".as_ref());\n     }"}]}