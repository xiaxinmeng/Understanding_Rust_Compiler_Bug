{"sha": "a135005150fad21ddde16446a7dea08257102b84", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExMzUwMDUxNTBmYWQyMWRkZGUxNjQ0NmE3ZGVhMDgyNTcxMDJiODQ=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-09-20T13:36:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-09-20T13:36:21Z"}, "message": "Rollup merge of #54257 - alexcrichton:wasm-math-symbols, r=TimNN\n\nSwitch wasm math symbols to their original names\n\nThe names `Math_*` were given to help undefined symbol messages indicate how to\nimplement them, but these are all implemented in compiler-rt now so there's no\nneed to rename them! This change should make it so wasm binaries by default, no\nmatter the math symbols used, will not have unresolved symbols.", "tree": {"sha": "8a3bebebc3ef8a8602ad3c9aa6a25f8a1d9ab968", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a3bebebc3ef8a8602ad3c9aa6a25f8a1d9ab968"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a135005150fad21ddde16446a7dea08257102b84", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbo6JVCRBK7hj4Ov3rIwAAdHIIABBzBsYwbiso4s7t7n2JVt9F\nOrqf2QK6kShmKn1aWTbqFA39PKJ+HZtGtd2YawY04RICCll0WBCxWwyZ88LKOgT0\n1DnwMZM0JiEWmrvwxuL1Mpj6SPe4q4uRzD0mYyUFLShrpUaG0hCH7MlaHfK58MFo\nMv+ZoUScAo26c3hM0ccX9KF+fFoaitjn5zSdVAo5pDIMri2Q1SOPl6CYuumtJ7MO\nZCM+vNm4x43rZLxuB5Y/tc5oRsOzpCNIn3rFH1U2uIftrTx1OvH0VG5SwE1aRS1t\nmD/VU6X7w50CRrMlXu5Lf/bRZKl3Sww7g4x8XR6+zZ9MaxyrD7Q18uRB0iDA2c4=\n=YRh8\n-----END PGP SIGNATURE-----\n", "payload": "tree 8a3bebebc3ef8a8602ad3c9aa6a25f8a1d9ab968\nparent 6f7602d49d639a34a4065763a4ddf57bb450c219\nparent b74215accedd26b57907d3473fa325861b8a2f92\nauthor kennytm <kennytm@gmail.com> 1537450581 +0800\ncommitter GitHub <noreply@github.com> 1537450581 +0800\n\nRollup merge of #54257 - alexcrichton:wasm-math-symbols, r=TimNN\n\nSwitch wasm math symbols to their original names\n\nThe names `Math_*` were given to help undefined symbol messages indicate how to\nimplement them, but these are all implemented in compiler-rt now so there's no\nneed to rename them! This change should make it so wasm binaries by default, no\nmatter the math symbols used, will not have unresolved symbols.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a135005150fad21ddde16446a7dea08257102b84", "html_url": "https://github.com/rust-lang/rust/commit/a135005150fad21ddde16446a7dea08257102b84", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a135005150fad21ddde16446a7dea08257102b84/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6f7602d49d639a34a4065763a4ddf57bb450c219", "url": "https://api.github.com/repos/rust-lang/rust/commits/6f7602d49d639a34a4065763a4ddf57bb450c219", "html_url": "https://github.com/rust-lang/rust/commit/6f7602d49d639a34a4065763a4ddf57bb450c219"}, {"sha": "b74215accedd26b57907d3473fa325861b8a2f92", "url": "https://api.github.com/repos/rust-lang/rust/commits/b74215accedd26b57907d3473fa325861b8a2f92", "html_url": "https://github.com/rust-lang/rust/commit/b74215accedd26b57907d3473fa325861b8a2f92"}], "stats": {"total": 29, "additions": 1, "deletions": 28}, "files": [{"sha": "64fc14d42d9b77f0884c5a4749bb336ca0c237e1", "filename": "src/libstd/sys/wasm/cmath.rs", "status": "modified", "additions": 1, "deletions": 28, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/a135005150fad21ddde16446a7dea08257102b84/src%2Flibstd%2Fsys%2Fwasm%2Fcmath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a135005150fad21ddde16446a7dea08257102b84/src%2Flibstd%2Fsys%2Fwasm%2Fcmath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Fcmath.rs?ref=a135005150fad21ddde16446a7dea08257102b84", "patch": "@@ -74,46 +74,19 @@ pub unsafe fn tanhf(n: f32) -> f32 {\n     f64::tanh(n as f64) as f32\n }\n \n-// Right now all these functions, the f64 version of the functions above, all\n-// shell out to random names. These names aren't actually defined anywhere, per\n-// se, but we need this to compile somehow.\n-//\n-// The idea with this is that when you're using wasm then, for now, we have no\n-// way of providing an implementation of these which delegates to a \"correct\"\n-// implementation. For example most wasm applications probably just want to\n-// delegate to the javascript `Math` object and its related functions, but wasm\n-// doesn't currently have the ability to seamlessly do that (when you\n-// instantiate a module you have to set that up).\n-//\n-// As a result these are just defined here with \"hopefully helpful\" names. The\n-// symbols won't ever be needed or show up unless these functions are called,\n-// and hopefully when they're called the errors are self-explanatory enough to\n-// figure out what's going on.\n-\n+// These symbols are all defined in `compiler-builtins`\n extern {\n-    #[link_name = \"Math_acos\"]\n     pub fn acos(n: f64) -> f64;\n-    #[link_name = \"Math_asin\"]\n     pub fn asin(n: f64) -> f64;\n-    #[link_name = \"Math_atan\"]\n     pub fn atan(n: f64) -> f64;\n-    #[link_name = \"Math_atan2\"]\n     pub fn atan2(a: f64, b: f64) -> f64;\n-    #[link_name = \"Math_cbrt\"]\n     pub fn cbrt(n: f64) -> f64;\n-    #[link_name = \"Math_cosh\"]\n     pub fn cosh(n: f64) -> f64;\n-    #[link_name = \"Math_expm1\"]\n     pub fn expm1(n: f64) -> f64;\n     pub fn fdim(a: f64, b: f64) -> f64;\n-    #[link_name = \"Math_log1p\"]\n     pub fn log1p(n: f64) -> f64;\n-    #[link_name = \"Math_sinh\"]\n     pub fn sinh(n: f64) -> f64;\n-    #[link_name = \"Math_tan\"]\n     pub fn tan(n: f64) -> f64;\n-    #[link_name = \"Math_tanh\"]\n     pub fn tanh(n: f64) -> f64;\n-    #[link_name = \"Math_hypot\"]\n     pub fn hypot(x: f64, y: f64) -> f64;\n }"}]}