{"sha": "ec790d6fcc426e13431cbb7510c62864515a3ef8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVjNzkwZDZmY2M0MjZlMTM0MzFjYmI3NTEwYzYyODY0NTE1YTNlZjg=", "commit": {"author": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-01-13T04:18:55Z"}, "committer": {"name": "Huon Wilson", "email": "dbau.pp+github@gmail.com", "date": "2015-01-24T13:35:06Z"}, "message": "Tweak chained comparison errors.\n\nLower case and give a more precise span: from operator to operator, not\njust the last one.", "tree": {"sha": "adce0173abedda482d03d8e2a912a0145f32315b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/adce0173abedda482d03d8e2a912a0145f32315b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ec790d6fcc426e13431cbb7510c62864515a3ef8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ec790d6fcc426e13431cbb7510c62864515a3ef8", "html_url": "https://github.com/rust-lang/rust/commit/ec790d6fcc426e13431cbb7510c62864515a3ef8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ec790d6fcc426e13431cbb7510c62864515a3ef8/comments", "author": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "huonw", "id": 1203825, "node_id": "MDQ6VXNlcjEyMDM4MjU=", "avatar_url": "https://avatars.githubusercontent.com/u/1203825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huonw", "html_url": "https://github.com/huonw", "followers_url": "https://api.github.com/users/huonw/followers", "following_url": "https://api.github.com/users/huonw/following{/other_user}", "gists_url": "https://api.github.com/users/huonw/gists{/gist_id}", "starred_url": "https://api.github.com/users/huonw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huonw/subscriptions", "organizations_url": "https://api.github.com/users/huonw/orgs", "repos_url": "https://api.github.com/users/huonw/repos", "events_url": "https://api.github.com/users/huonw/events{/privacy}", "received_events_url": "https://api.github.com/users/huonw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e888d0341e81de1744b257c25b012c2c148f0ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e888d0341e81de1744b257c25b012c2c148f0ba", "html_url": "https://github.com/rust-lang/rust/commit/2e888d0341e81de1744b257c25b012c2c148f0ba"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "759e5e8229a0e91343eb9337a30a11965f72a90e", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=ec790d6fcc426e13431cbb7510c62864515a3ef8", "patch": "@@ -2882,12 +2882,13 @@ impl<'a> Parser<'a> {\n         debug_assert!(ast_util::is_comparison_binop(outer_op));\n         match lhs.node {\n             ExprBinary(op, _, _) if ast_util::is_comparison_binop(op.node) => {\n-                let op_span = self.span;\n+                // respan to include both operators\n+                let op_span = mk_sp(op.span.lo, self.span.hi);\n                 self.span_err(op_span,\n-                    \"Chained comparison operators require parentheses\");\n+                    \"chained comparison operators require parentheses\");\n                 if op.node == BiLt && outer_op == BiGt {\n                     self.span_help(op_span,\n-                        \"use ::< instead of < if you meant to specify type arguments\");\n+                        \"use `::<...>` instead of `<...>` if you meant to specify type arguments\");\n                 }\n             }\n             _ => {}"}, {"sha": "f2705f58331b463a9d486df1d634f8434d38b052", "filename": "src/test/compile-fail/require-parens-for-chained-comparison.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Ftest%2Fcompile-fail%2Frequire-parens-for-chained-comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Ftest%2Fcompile-fail%2Frequire-parens-for-chained-comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frequire-parens-for-chained-comparison.rs?ref=ec790d6fcc426e13431cbb7510c62864515a3ef8", "patch": "@@ -12,12 +12,12 @@ fn f<T>() {}\n \n fn main() {\n     false == false == false;\n-    //~^ ERROR: Chained comparison operators require parentheses\n+    //~^ ERROR: chained comparison operators require parentheses\n \n     false == 0 < 2;\n-    //~^ ERROR: Chained comparison operators require parentheses\n+    //~^ ERROR: chained comparison operators require parentheses\n \n     f<X>();\n-    //~^ ERROR: Chained comparison operators require parentheses\n-    //~^^ HELP: use ::< instead of < if you meant to specify type arguments\n+    //~^ ERROR: chained comparison operators require parentheses\n+    //~^^ HELP: use `::<...>` instead of `<...>`\n }"}, {"sha": "b2eb2064aeb0932d8c300642e027d9e4f9c432ab", "filename": "src/test/compile-fail/unsized2.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Ftest%2Fcompile-fail%2Funsized2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec790d6fcc426e13431cbb7510c62864515a3ef8/src%2Ftest%2Fcompile-fail%2Funsized2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funsized2.rs?ref=ec790d6fcc426e13431cbb7510c62864515a3ef8", "patch": "@@ -15,6 +15,6 @@ fn f<X>() {}\n pub fn main() {\n     f<type>();\n     //~^ ERROR expected identifier, found keyword `type`\n-    //~^^ ERROR: Chained comparison operators require parentheses\n-    //~^^^ HELP: use ::< instead of < if you meant to specify type arguments\n+    //~^^ ERROR: chained comparison\n+    //~^^^ HELP: use `::<\n }"}]}