{"sha": "f5bac0c4c8b00eceaba627b4bf074a38f1971330", "node_id": "C_kwDOAAsO6NoAKGY1YmFjMGM0YzhiMDBlY2VhYmE2MjdiNGJmMDc0YTM4ZjE5NzEzMzA", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-30T19:20:06Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2023-01-30T19:20:06Z"}, "message": "rustdoc: remove meta keywords from HTML\n\nDiscussed in\n<https://rust-lang.zulipchat.com/#narrow/stream/266220-rustdoc/topic/.60.3Cmeta.20name.3D.22keywords.22.3E.60>", "tree": {"sha": "7108a7e19033361d39343d0693b3fc594a99c1de", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7108a7e19033361d39343d0693b3fc594a99c1de"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f5bac0c4c8b00eceaba627b4bf074a38f1971330", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f5bac0c4c8b00eceaba627b4bf074a38f1971330", "html_url": "https://github.com/rust-lang/rust/commit/f5bac0c4c8b00eceaba627b4bf074a38f1971330", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f5bac0c4c8b00eceaba627b4bf074a38f1971330/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "006ca9b14da1e0145844598b3d6a554c042c702a", "url": "https://api.github.com/repos/rust-lang/rust/commits/006ca9b14da1e0145844598b3d6a554c042c702a", "html_url": "https://github.com/rust-lang/rust/commit/006ca9b14da1e0145844598b3d6a554c042c702a"}], "stats": {"total": 19, "additions": 3, "deletions": 16}, "files": [{"sha": "6ab849c92a0768bac3c2e0c31f3be0d5e9014b0d", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -30,7 +30,6 @@ pub(crate) struct Page<'a> {\n     pub(crate) root_path: &'a str,\n     pub(crate) static_root_path: Option<&'a str>,\n     pub(crate) description: &'a str,\n-    pub(crate) keywords: &'a str,\n     pub(crate) resource_suffix: &'a str,\n }\n "}, {"sha": "b59645ec2e2d5e88b9ea82a59315e552aec06ccf", "filename": "src/librustdoc/html/render/context.rs", "status": "modified", "additions": 1, "deletions": 8, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fcontext.rs?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -18,7 +18,7 @@ use super::search_index::build_index;\n use super::write_shared::write_shared;\n use super::{\n     collect_spans_and_sources, print_sidebar, scrape_examples_help, sidebar_module_like, AllTypes,\n-    LinkFromSrc, NameDoc, StylePath, BASIC_KEYWORDS,\n+    LinkFromSrc, NameDoc, StylePath,\n };\n \n use crate::clean::{self, types::ExternalLocation, ExternalCrate};\n@@ -195,7 +195,6 @@ impl<'tcx> Context<'tcx> {\n                 self.shared.layout.krate\n             )\n         };\n-        let keywords = make_item_keywords(it);\n         let name;\n         let tyname_s = if it.is_crate() {\n             name = format!(\"{} crate\", tyname);\n@@ -212,7 +211,6 @@ impl<'tcx> Context<'tcx> {\n                 static_root_path: clone_shared.static_root_path.as_deref(),\n                 title: &title,\n                 description: &desc,\n-                keywords: &keywords,\n                 resource_suffix: &clone_shared.resource_suffix,\n             };\n             let mut page_buffer = Buffer::html();\n@@ -598,7 +596,6 @@ impl<'tcx> FormatRenderer<'tcx> for Context<'tcx> {\n             root_path: \"../\",\n             static_root_path: shared.static_root_path.as_deref(),\n             description: \"List of all items in this crate\",\n-            keywords: BASIC_KEYWORDS,\n             resource_suffix: &shared.resource_suffix,\n         };\n         let all = shared.all.replace(AllTypes::new());\n@@ -828,7 +825,3 @@ impl<'tcx> FormatRenderer<'tcx> for Context<'tcx> {\n         &self.shared.cache\n     }\n }\n-\n-fn make_item_keywords(it: &clean::Item) -> String {\n-    format!(\"{}, {}\", BASIC_KEYWORDS, it.name.as_ref().unwrap())\n-}"}, {"sha": "816a8f4e274ce20c10c5cadc2bfd1a2600cc0c85", "filename": "src/librustdoc/html/render/mod.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fmod.rs?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -2743,8 +2743,6 @@ fn sidebar_foreign_type(cx: &Context<'_>, buf: &mut Buffer, it: &clean::Item) {\n     }\n }\n \n-pub(crate) const BASIC_KEYWORDS: &str = \"rust, rustlang, rust-lang\";\n-\n /// Returns a list of all paths used in the type.\n /// This is used to help deduplicate imported impls\n /// for reexported types. If any of the contained"}, {"sha": "6b71ecc24bde6f8e3604729a57e0df84172ea715", "filename": "src/librustdoc/html/render/write_shared.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fwrite_shared.rs?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -11,7 +11,7 @@ use rustc_data_structures::fx::{FxHashMap, FxHashSet};\n use serde::ser::SerializeSeq;\n use serde::{Serialize, Serializer};\n \n-use super::{collect_paths_for_type, ensure_trailing_slash, Context, BASIC_KEYWORDS};\n+use super::{collect_paths_for_type, ensure_trailing_slash, Context};\n use crate::clean::Crate;\n use crate::config::{EmitType, RenderOptions};\n use crate::docfs::PathError;\n@@ -340,7 +340,6 @@ if (typeof exports !== 'undefined') {exports.searchIndex = searchIndex};\n                 root_path: \"./\",\n                 static_root_path: shared.static_root_path.as_deref(),\n                 description: \"List of crates\",\n-                keywords: BASIC_KEYWORDS,\n                 resource_suffix: &shared.resource_suffix,\n             };\n "}, {"sha": "2c90bf4fadc0186ee8633a4e0dead6231fab7fdb", "filename": "src/librustdoc/html/sources.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Fsources.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fsources.rs?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -4,7 +4,7 @@ use crate::error::Error;\n use crate::html::format::Buffer;\n use crate::html::highlight;\n use crate::html::layout;\n-use crate::html::render::{Context, BASIC_KEYWORDS};\n+use crate::html::render::Context;\n use crate::visit::DocVisitor;\n \n use rustc_data_structures::fx::{FxHashMap, FxHashSet};\n@@ -228,7 +228,6 @@ impl SourceCollector<'_, '_> {\n             root_path: &root_path,\n             static_root_path: shared.static_root_path.as_deref(),\n             description: &desc,\n-            keywords: BASIC_KEYWORDS,\n             resource_suffix: &shared.resource_suffix,\n         };\n         let v = layout::render("}, {"sha": "8540ee6631934c7d163644fd17e52553b9f5b1a2", "filename": "src/librustdoc/html/templates/page.html", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "raw_url": "https://github.com/rust-lang/rust/raw/f5bac0c4c8b00eceaba627b4bf074a38f1971330/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Ftemplates%2Fpage.html?ref=f5bac0c4c8b00eceaba627b4bf074a38f1971330", "patch": "@@ -5,7 +5,6 @@\n     <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> {#- -#}\n     <meta name=\"generator\" content=\"rustdoc\"> {#- -#}\n     <meta name=\"description\" content=\"{{page.description}}\"> {#- -#}\n-    <meta name=\"keywords\" content=\"{{page.keywords}}\"> {#- -#}\n     <title>{{page.title}}</title> {#- -#}\n     <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.source_serif_4_regular}}\"> {#- -#}\n     <link rel=\"preload\" as=\"font\" type=\"font/woff2\" crossorigin href=\"{{static_root_path|safe}}{{files.fira_sans_regular}}\"> {#- -#}"}]}