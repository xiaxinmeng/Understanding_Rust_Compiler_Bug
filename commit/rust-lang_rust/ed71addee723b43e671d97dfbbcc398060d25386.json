{"sha": "ed71addee723b43e671d97dfbbcc398060d25386", "node_id": "C_kwDOAAsO6NoAKGVkNzFhZGRlZTcyM2I0M2U2NzFkOTdkZmJiY2MzOTgwNjBkMjUzODY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-27T18:38:38Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-10-27T18:38:38Z"}, "message": "Auto merge of #7885 - devonhollowood:deprecated-cleanup, r=llogiq\n\nClean up `tests/ui/deprecated.rs`\n\nClean up `tests/ui/deprecated.rs`\n\nAlong with #7884, this fixes #7057\n\nchangelog: none", "tree": {"sha": "b37076fbe23637bcfa99b469efdf029d3b98a6e8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b37076fbe23637bcfa99b469efdf029d3b98a6e8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed71addee723b43e671d97dfbbcc398060d25386", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed71addee723b43e671d97dfbbcc398060d25386", "html_url": "https://github.com/rust-lang/rust/commit/ed71addee723b43e671d97dfbbcc398060d25386", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed71addee723b43e671d97dfbbcc398060d25386/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "962e21cf157558c27a660a404545af7e7be53289", "url": "https://api.github.com/repos/rust-lang/rust/commits/962e21cf157558c27a660a404545af7e7be53289", "html_url": "https://github.com/rust-lang/rust/commit/962e21cf157558c27a660a404545af7e7be53289"}, {"sha": "e48ab448f9b3c23e583256f2028731639bb168cd", "url": "https://api.github.com/repos/rust-lang/rust/commits/e48ab448f9b3c23e583256f2028731639bb168cd", "html_url": "https://github.com/rust-lang/rust/commit/e48ab448f9b3c23e583256f2028731639bb168cd"}], "stats": {"total": 164, "additions": 80, "deletions": 84}, "files": [{"sha": "9d8524ec91cc6e08f7c2ea056aabb58f3103e02e", "filename": "clippy_lints/src/deprecated_lints.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ed71addee723b43e671d97dfbbcc398060d25386/clippy_lints%2Fsrc%2Fdeprecated_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed71addee723b43e671d97dfbbcc398060d25386/clippy_lints%2Fsrc%2Fdeprecated_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdeprecated_lints.rs?ref=ed71addee723b43e671d97dfbbcc398060d25386", "patch": "@@ -1,3 +1,6 @@\n+// NOTE: if you add a deprecated lint in this file, please add a corresponding test in\n+// tests/ui/deprecated.rs\n+\n /// This struct fakes the `Lint` declaration that is usually created by `declare_lint!`. This\n /// enables the simple extraction of the metadata without changing the current deprecation\n /// declaration."}, {"sha": "39a2601fee9aca39e6d3882f27c8d1008ffce339", "filename": "tests/ui/deprecated.rs", "status": "modified", "additions": 16, "deletions": 17, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/ed71addee723b43e671d97dfbbcc398060d25386/tests%2Fui%2Fdeprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed71addee723b43e671d97dfbbcc398060d25386/tests%2Fui%2Fdeprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdeprecated.rs?ref=ed71addee723b43e671d97dfbbcc398060d25386", "patch": "@@ -1,19 +1,18 @@\n-#[warn(clippy::unstable_as_slice)]\n-#[warn(clippy::unstable_as_mut_slice)]\n-#[warn(clippy::misaligned_transmute)]\n-#[warn(clippy::unused_collect)]\n-#[warn(clippy::invalid_ref)]\n-#[warn(clippy::into_iter_on_array)]\n-#[warn(clippy::unused_label)]\n-#[warn(clippy::regex_macro)]\n-#[warn(clippy::drop_bounds)]\n-#[warn(clippy::temporary_cstring_as_ptr)]\n-#[warn(clippy::panic_params)]\n-#[warn(clippy::unknown_clippy_lints)]\n-#[warn(clippy::find_map)]\n-#[warn(clippy::filter_map)]\n-#[warn(clippy::pub_enum_variant_names)]\n-#[warn(clippy::wrong_pub_self_convention)]\n-#[warn(clippy::invalid_atomic_ordering)]\n+#![warn(clippy::should_assert_eq)]\n+#![warn(clippy::extend_from_slice)]\n+#![warn(clippy::range_step_by_zero)]\n+#![warn(clippy::unstable_as_slice)]\n+#![warn(clippy::unstable_as_mut_slice)]\n+#![warn(clippy::misaligned_transmute)]\n+#![warn(clippy::assign_ops)]\n+#![warn(clippy::if_let_redundant_pattern_matching)]\n+#![warn(clippy::unsafe_vector_initialization)]\n+#![warn(clippy::unused_collect)]\n+#![warn(clippy::replace_consts)]\n+#![warn(clippy::regex_macro)]\n+#![warn(clippy::find_map)]\n+#![warn(clippy::filter_map)]\n+#![warn(clippy::pub_enum_variant_names)]\n+#![warn(clippy::wrong_pub_self_convention)]\n \n fn main() {}"}, {"sha": "6095f134d55e0d2ea7452696adfb9a047521f077", "filename": "tests/ui/deprecated.stderr", "status": "modified", "additions": 61, "deletions": 67, "changes": 128, "blob_url": "https://github.com/rust-lang/rust/blob/ed71addee723b43e671d97dfbbcc398060d25386/tests%2Fui%2Fdeprecated.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ed71addee723b43e671d97dfbbcc398060d25386/tests%2Fui%2Fdeprecated.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdeprecated.stderr?ref=ed71addee723b43e671d97dfbbcc398060d25386", "patch": "@@ -1,106 +1,100 @@\n-error: lint `clippy::unstable_as_slice` has been removed: `Vec::as_slice` has been stabilized in 1.7\n-  --> $DIR/deprecated.rs:1:8\n+error: lint `clippy::should_assert_eq` has been removed: `assert!()` will be more flexible with RFC 2011\n+  --> $DIR/deprecated.rs:1:9\n    |\n-LL | #[warn(clippy::unstable_as_slice)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::should_assert_eq)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D renamed-and-removed-lints` implied by `-D warnings`\n \n-error: lint `clippy::unstable_as_mut_slice` has been removed: `Vec::as_mut_slice` has been stabilized in 1.7\n-  --> $DIR/deprecated.rs:2:8\n+error: lint `clippy::extend_from_slice` has been removed: `.extend_from_slice(_)` is a faster way to extend a Vec by a slice\n+  --> $DIR/deprecated.rs:2:9\n    |\n-LL | #[warn(clippy::unstable_as_mut_slice)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::extend_from_slice)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::misaligned_transmute` has been removed: this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr\n-  --> $DIR/deprecated.rs:3:8\n+error: lint `clippy::range_step_by_zero` has been removed: `iterator.step_by(0)` panics nowadays\n+  --> $DIR/deprecated.rs:3:9\n    |\n-LL | #[warn(clippy::misaligned_transmute)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::range_step_by_zero)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::unused_collect` has been removed: `collect` has been marked as #[must_use] in rustc and that covers all cases of this lint\n-  --> $DIR/deprecated.rs:4:8\n+error: lint `clippy::unstable_as_slice` has been removed: `Vec::as_slice` has been stabilized in 1.7\n+  --> $DIR/deprecated.rs:4:9\n    |\n-LL | #[warn(clippy::unused_collect)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::unstable_as_slice)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::invalid_ref` has been renamed to `invalid_value`\n-  --> $DIR/deprecated.rs:5:8\n+error: lint `clippy::unstable_as_mut_slice` has been removed: `Vec::as_mut_slice` has been stabilized in 1.7\n+  --> $DIR/deprecated.rs:5:9\n    |\n-LL | #[warn(clippy::invalid_ref)]\n-   |        ^^^^^^^^^^^^^^^^^^^ help: use the new name: `invalid_value`\n+LL | #![warn(clippy::unstable_as_mut_slice)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::into_iter_on_array` has been renamed to `array_into_iter`\n-  --> $DIR/deprecated.rs:6:8\n+error: lint `clippy::misaligned_transmute` has been removed: this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr\n+  --> $DIR/deprecated.rs:6:9\n    |\n-LL | #[warn(clippy::into_iter_on_array)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `array_into_iter`\n+LL | #![warn(clippy::misaligned_transmute)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::unused_label` has been renamed to `unused_labels`\n-  --> $DIR/deprecated.rs:7:8\n+error: lint `clippy::assign_ops` has been removed: using compound assignment operators (e.g., `+=`) is harmless\n+  --> $DIR/deprecated.rs:7:9\n    |\n-LL | #[warn(clippy::unused_label)]\n-   |        ^^^^^^^^^^^^^^^^^^^^ help: use the new name: `unused_labels`\n+LL | #![warn(clippy::assign_ops)]\n+   |         ^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::regex_macro` has been removed: the regex! macro has been removed from the regex crate in 2018\n-  --> $DIR/deprecated.rs:8:8\n+error: lint `clippy::if_let_redundant_pattern_matching` has been removed: this lint has been changed to redundant_pattern_matching\n+  --> $DIR/deprecated.rs:8:9\n    |\n-LL | #[warn(clippy::regex_macro)]\n-   |        ^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::if_let_redundant_pattern_matching)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::drop_bounds` has been renamed to `drop_bounds`\n-  --> $DIR/deprecated.rs:9:8\n+error: lint `clippy::unsafe_vector_initialization` has been removed: the replacement suggested by this lint had substantially different behavior\n+  --> $DIR/deprecated.rs:9:9\n    |\n-LL | #[warn(clippy::drop_bounds)]\n-   |        ^^^^^^^^^^^^^^^^^^^ help: use the new name: `drop_bounds`\n+LL | #![warn(clippy::unsafe_vector_initialization)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::temporary_cstring_as_ptr` has been renamed to `temporary_cstring_as_ptr`\n-  --> $DIR/deprecated.rs:10:8\n+error: lint `clippy::unused_collect` has been removed: `collect` has been marked as #[must_use] in rustc and that covers all cases of this lint\n+  --> $DIR/deprecated.rs:10:9\n    |\n-LL | #[warn(clippy::temporary_cstring_as_ptr)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `temporary_cstring_as_ptr`\n+LL | #![warn(clippy::unused_collect)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::panic_params` has been renamed to `non_fmt_panics`\n-  --> $DIR/deprecated.rs:11:8\n+error: lint `clippy::replace_consts` has been removed: associated-constants `MIN`/`MAX` of integers are preferred to `{min,max}_value()` and module constants\n+  --> $DIR/deprecated.rs:11:9\n    |\n-LL | #[warn(clippy::panic_params)]\n-   |        ^^^^^^^^^^^^^^^^^^^^ help: use the new name: `non_fmt_panics`\n+LL | #![warn(clippy::replace_consts)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^\n \n-error: lint `clippy::unknown_clippy_lints` has been renamed to `unknown_lints`\n-  --> $DIR/deprecated.rs:12:8\n+error: lint `clippy::regex_macro` has been removed: the regex! macro has been removed from the regex crate in 2018\n+  --> $DIR/deprecated.rs:12:9\n    |\n-LL | #[warn(clippy::unknown_clippy_lints)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `unknown_lints`\n+LL | #![warn(clippy::regex_macro)]\n+   |         ^^^^^^^^^^^^^^^^^^^\n \n error: lint `clippy::find_map` has been removed: this lint has been replaced by `manual_find_map`, a more specific lint\n-  --> $DIR/deprecated.rs:13:8\n+  --> $DIR/deprecated.rs:13:9\n    |\n-LL | #[warn(clippy::find_map)]\n-   |        ^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::find_map)]\n+   |         ^^^^^^^^^^^^^^^^\n \n error: lint `clippy::filter_map` has been removed: this lint has been replaced by `manual_filter_map`, a more specific lint\n-  --> $DIR/deprecated.rs:14:8\n+  --> $DIR/deprecated.rs:14:9\n    |\n-LL | #[warn(clippy::filter_map)]\n-   |        ^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::filter_map)]\n+   |         ^^^^^^^^^^^^^^^^^^\n \n error: lint `clippy::pub_enum_variant_names` has been removed: set the `avoid-breaking-exported-api` config option to `false` to enable the `enum_variant_names` lint for public items\n-  --> $DIR/deprecated.rs:15:8\n+  --> $DIR/deprecated.rs:15:9\n    |\n-LL | #[warn(clippy::pub_enum_variant_names)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL | #![warn(clippy::pub_enum_variant_names)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: lint `clippy::wrong_pub_self_convention` has been removed: set the `avoid-breaking-exported-api` config option to `false` to enable the `wrong_self_convention` lint for public items\n-  --> $DIR/deprecated.rs:16:8\n-   |\n-LL | #[warn(clippy::wrong_pub_self_convention)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-error: lint `clippy::invalid_atomic_ordering` has been renamed to `invalid_atomic_ordering`\n-  --> $DIR/deprecated.rs:17:8\n+  --> $DIR/deprecated.rs:16:9\n    |\n-LL | #[warn(clippy::invalid_atomic_ordering)]\n-   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use the new name: `invalid_atomic_ordering`\n+LL | #![warn(clippy::wrong_pub_self_convention)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 17 previous errors\n+error: aborting due to 16 previous errors\n "}]}