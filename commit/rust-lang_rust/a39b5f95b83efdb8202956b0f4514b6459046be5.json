{"sha": "a39b5f95b83efdb8202956b0f4514b6459046be5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEzOWI1Zjk1YjgzZWZkYjgyMDI5NTZiMGY0NTE0YjY0NTkwNDZiZTU=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-02-28T13:30:15Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-28T13:30:15Z"}, "message": "Merge pull request #1581 from Manishearth/cargofix\n\nGet cargo clippy working on 64 bit windows again", "tree": {"sha": "0b370f71b5875ad4e01ef7a120e03d7b8d11b063", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b370f71b5875ad4e01ef7a120e03d7b8d11b063"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a39b5f95b83efdb8202956b0f4514b6459046be5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a39b5f95b83efdb8202956b0f4514b6459046be5", "html_url": "https://github.com/rust-lang/rust/commit/a39b5f95b83efdb8202956b0f4514b6459046be5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a39b5f95b83efdb8202956b0f4514b6459046be5/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0623730a969ad05f16eb93862b7975bc2e847e49", "url": "https://api.github.com/repos/rust-lang/rust/commits/0623730a969ad05f16eb93862b7975bc2e847e49", "html_url": "https://github.com/rust-lang/rust/commit/0623730a969ad05f16eb93862b7975bc2e847e49"}, {"sha": "a78ca9e955d66c7f676482e348c6ba4e89cfc24a", "url": "https://api.github.com/repos/rust-lang/rust/commits/a78ca9e955d66c7f676482e348c6ba4e89cfc24a", "html_url": "https://github.com/rust-lang/rust/commit/a78ca9e955d66c7f676482e348c6ba4e89cfc24a"}], "stats": {"total": 57, "additions": 30, "deletions": 27}, "files": [{"sha": "4885986e271ddf873281a89bda361d2d4907afa4", "filename": "CHANGELOG.md", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a39b5f95b83efdb8202956b0f4514b6459046be5/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/a39b5f95b83efdb8202956b0f4514b6459046be5/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=a39b5f95b83efdb8202956b0f4514b6459046be5", "patch": "@@ -1,6 +1,9 @@\n # Change Log\n All notable changes to this project will be documented in this file.\n \n+## 0.0.116 \u2014 2017-02-28\n+* Fix `cargo clippy` on 64 bit windows systems\n+\n ## 0.0.115 \u2014 2017-02-27\n * Rustup to *rustc 1.17.0-nightly (60a0edc6c 2017-02-26)*\n * New lints: [`zero_ptr`], [`never_loop`], [`mut_from_ref`]"}, {"sha": "c71287b0ea867fa9c0cfc0fb6b51519eb02538e3", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a39b5f95b83efdb8202956b0f4514b6459046be5/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a39b5f95b83efdb8202956b0f4514b6459046be5/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=a39b5f95b83efdb8202956b0f4514b6459046be5", "patch": "@@ -1,6 +1,6 @@\n [package]\n name = \"clippy\"\n-version = \"0.0.115\"\n+version = \"0.0.116\"\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\",\n \t\"Andre Bogus <bogusandre@gmail.com>\",\n@@ -30,7 +30,7 @@ test = false\n \n [dependencies]\n # begin automatic update\n-clippy_lints = { version = \"0.0.115\", path = \"clippy_lints\" }\n+clippy_lints = { version = \"0.0.116\", path = \"clippy_lints\" }\n # end automatic update\n cargo_metadata = \"0.1.1\"\n "}, {"sha": "d83d3478c326b644d2ea796d57a2c8f32f74de3a", "filename": "appveyor.yml", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a39b5f95b83efdb8202956b0f4514b6459046be5/appveyor.yml", "raw_url": "https://github.com/rust-lang/rust/raw/a39b5f95b83efdb8202956b0f4514b6459046be5/appveyor.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/appveyor.yml?ref=a39b5f95b83efdb8202956b0f4514b6459046be5", "patch": "@@ -4,10 +4,8 @@ environment:\n     matrix:\n         - TARGET: i686-pc-windows-gnu\n           MSYS2_BITS: 32\n-          RUN_CARGO_CLIPPY: true\n         - TARGET: i686-pc-windows-msvc\n           MSYS2_BITS: 32\n-          RUN_CARGO_CLIPPY: true\n         - TARGET: x86_64-pc-windows-gnu\n           MSYS2_BITS: 64\n         - TARGET: x86_64-pc-windows-msvc\n@@ -29,7 +27,7 @@ test_script:\n     - cargo test --features debugging\n     - copy target\\debug\\cargo-clippy.exe C:\\Users\\appveyor\\.cargo\\bin\\\n     - cargo clippy -- -D clippy\n-    - if defined RUN_CARGO_CLIPPY cd clippy_lints && cargo clippy -- -D clippy && cd ..\n+    - cd clippy_lints && cargo clippy -- -D clippy && cd ..\n \n notifications:\n     - provider: Email"}, {"sha": "4c68b94a6fc3c9a150701c5a93f2fa511582ef27", "filename": "clippy_lints/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a39b5f95b83efdb8202956b0f4514b6459046be5/clippy_lints%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/a39b5f95b83efdb8202956b0f4514b6459046be5/clippy_lints%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2FCargo.toml?ref=a39b5f95b83efdb8202956b0f4514b6459046be5", "patch": "@@ -1,7 +1,7 @@\n [package]\n name = \"clippy_lints\"\n # begin automatic update\n-version = \"0.0.115\"\n+version = \"0.0.116\"\n # end automatic update\n authors = [\n \t\"Manish Goregaokar <manishsmail@gmail.com>\","}, {"sha": "12dd5d1f695b10e0c027e9f69593ff2154e7c670", "filename": "src/main.rs", "status": "modified", "additions": 23, "deletions": 21, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/a39b5f95b83efdb8202956b0f4514b6459046be5/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a39b5f95b83efdb8202956b0f4514b6459046be5/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=a39b5f95b83efdb8202956b0f4514b6459046be5", "patch": "@@ -244,30 +244,32 @@ pub fn main() {\n                 .expect(\"need to specify SYSROOT env var during clippy compilation, or use rustup or multirust\")\n         };\n \n-        // this conditional check for the --sysroot flag is there so users can call `cargo-clippy` directly\n-        // without having to pass --sysroot or anything\n-        let mut args: Vec<String> = if env::args().any(|s| s == \"--sysroot\") {\n-            env::args().collect()\n-        } else {\n-            env::args().chain(Some(\"--sysroot\".to_owned())).chain(Some(sys_root)).collect()\n-        };\n-\n-        // this check ensures that dependencies are built but not linted and the final crate is\n-        // linted but not built\n-        let clippy_enabled = env::args().any(|s| s == \"-Zno-trans\");\n+        rustc_driver::in_rustc_thread(|| {\n+                // this conditional check for the --sysroot flag is there so users can call `cargo-clippy` directly\n+                // without having to pass --sysroot or anything\n+                let mut args: Vec<String> = if env::args().any(|s| s == \"--sysroot\") {\n+                    env::args().collect()\n+                } else {\n+                    env::args().chain(Some(\"--sysroot\".to_owned())).chain(Some(sys_root)).collect()\n+                };\n \n-        if clippy_enabled {\n-            args.extend_from_slice(&[\"--cfg\".to_owned(), r#\"feature=\"cargo-clippy\"\"#.to_owned()]);\n-        }\n+                // this check ensures that dependencies are built but not linted and the final crate is\n+                // linted but not built\n+                let clippy_enabled = env::args().any(|s| s == \"-Zno-trans\");\n \n-        let mut ccc = ClippyCompilerCalls::new(clippy_enabled);\n-        let (result, _) = rustc_driver::run_compiler(&args, &mut ccc, None, None);\n+                if clippy_enabled {\n+                    args.extend_from_slice(&[\"--cfg\".to_owned(), r#\"feature=\"cargo-clippy\"\"#.to_owned()]);\n+                }\n \n-        if let Err(err_count) = result {\n-            if err_count > 0 {\n-                std::process::exit(1);\n-            }\n-        }\n+                let mut ccc = ClippyCompilerCalls::new(clippy_enabled);\n+                let (result, _) = rustc_driver::run_compiler(&args, &mut ccc, None, None);\n+                if let Err(err_count) = result {\n+                    if err_count > 0 {\n+                        std::process::exit(1);\n+                    }\n+                }\n+            })\n+            .expect(\"rustc_thread failed\");\n     }\n }\n "}]}