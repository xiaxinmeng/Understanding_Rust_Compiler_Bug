{"sha": "45e343a0ef6f4caf078811d0664907610f085d54", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ1ZTM0M2EwZWY2ZjRjYWYwNzg4MTFkMDY2NDkwNzYxMGYwODVkNTQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-20T08:20:21Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-05-20T08:20:21Z"}, "message": "Minor", "tree": {"sha": "f059c318e3562d6af9cb40feb0b1d3b93d945f9e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f059c318e3562d6af9cb40feb0b1d3b93d945f9e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/45e343a0ef6f4caf078811d0664907610f085d54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/45e343a0ef6f4caf078811d0664907610f085d54", "html_url": "https://github.com/rust-lang/rust/commit/45e343a0ef6f4caf078811d0664907610f085d54", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/45e343a0ef6f4caf078811d0664907610f085d54/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b2bd022dc6fbe13356622ada5b6499f012cb5ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b2bd022dc6fbe13356622ada5b6499f012cb5ae", "html_url": "https://github.com/rust-lang/rust/commit/9b2bd022dc6fbe13356622ada5b6499f012cb5ae"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "f6d25579e0c6193ce22fa499074edeb400706f21", "filename": "crates/ra_assists/src/handlers/auto_import.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fauto_import.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fauto_import.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Fauto_import.rs?ref=45e343a0ef6f4caf078811d0664907610f085d54", "patch": "@@ -50,7 +50,12 @@ pub(crate) fn auto_import(acc: &mut Assists, ctx: &AssistContext) -> Option<()>\n             format!(\"Import `{}`\", &import),\n             range,\n             |builder| {\n-                insert_use_statement(&auto_import_assets.syntax_under_caret, &import, ctx, builder);\n+                insert_use_statement(\n+                    &auto_import_assets.syntax_under_caret,\n+                    &import,\n+                    ctx,\n+                    builder.text_edit_builder(),\n+                );\n             },\n         );\n     }"}, {"sha": "d9f84208dfe1380939bffde95b8adb0f6a768829", "filename": "crates/ra_assists/src/handlers/replace_qualified_name_with_use.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Fhandlers%2Freplace_qualified_name_with_use.rs?ref=45e343a0ef6f4caf078811d0664907610f085d54", "patch": "@@ -39,7 +39,7 @@ pub(crate) fn replace_qualified_name_with_use(\n         target,\n         |builder| {\n             let path_to_import = hir_path.mod_path().clone();\n-            insert_use_statement(path.syntax(), &path_to_import, ctx, builder);\n+            insert_use_statement(path.syntax(), &path_to_import, ctx, builder.text_edit_builder());\n \n             if let Some(last) = path.segment() {\n                 // Here we are assuming the assist will provide a correct use statement"}, {"sha": "0ee43482f79856a7a1f7fa963d6e89cdd3d6ac39", "filename": "crates/ra_assists/src/utils/insert_use.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Futils%2Finsert_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/45e343a0ef6f4caf078811d0664907610f085d54/crates%2Fra_assists%2Fsrc%2Futils%2Finsert_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_assists%2Fsrc%2Futils%2Finsert_use.rs?ref=45e343a0ef6f4caf078811d0664907610f085d54", "patch": "@@ -11,7 +11,7 @@ use ra_syntax::{\n };\n use ra_text_edit::TextEditBuilder;\n \n-use crate::assist_context::{AssistBuilder, AssistContext};\n+use crate::assist_context::AssistContext;\n \n /// Creates and inserts a use statement for the given path to import.\n /// The use statement is inserted in the scope most appropriate to the\n@@ -21,7 +21,7 @@ pub(crate) fn insert_use_statement(\n     position: &SyntaxNode,\n     path_to_import: &ModPath,\n     ctx: &AssistContext,\n-    builder: &mut AssistBuilder,\n+    builder: &mut TextEditBuilder,\n ) {\n     let target = path_to_import.to_string().split(\"::\").map(SmolStr::new).collect::<Vec<_>>();\n     let container = ctx.sema.ancestors_with_macros(position.clone()).find_map(|n| {\n@@ -33,7 +33,7 @@ pub(crate) fn insert_use_statement(\n \n     if let Some(container) = container {\n         let action = best_action_for_target(container, position.clone(), &target);\n-        make_assist(&action, &target, builder.text_edit_builder());\n+        make_assist(&action, &target, builder);\n     }\n }\n "}]}