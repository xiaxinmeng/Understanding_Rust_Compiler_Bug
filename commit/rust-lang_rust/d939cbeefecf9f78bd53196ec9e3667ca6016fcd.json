{"sha": "d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5MzljYmVlZmVjZjlmNzhiZDUzMTk2ZWM5ZTM2NjdjYTYwMTZmY2Q=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-09-14T15:15:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-09-14T15:15:36Z"}, "message": "Rollup merge of #36334 - GuillaumeGomez:run_but, r=steveklabnik\n\nSet run button transparent instead of invisible\n\nr? @steveklabnik\n\nAnd of course a screenshot:\n\n![screenshot from 2016-09-08 01-15-45](https://cloud.githubusercontent.com/assets/3050060/18331849/31fe1f8c-7562-11e6-9ae9-1dab44089ec6.png)", "tree": {"sha": "a55ed4054799b9df9f42389334e51f40ecb47d31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a55ed4054799b9df9f42389334e51f40ecb47d31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "html_url": "https://github.com/rust-lang/rust/commit/d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "739d57180fa207410b8858f8cede7b8a9ea6f01e", "url": "https://api.github.com/repos/rust-lang/rust/commits/739d57180fa207410b8858f8cede7b8a9ea6f01e", "html_url": "https://github.com/rust-lang/rust/commit/739d57180fa207410b8858f8cede7b8a9ea6f01e"}, {"sha": "a2faf5477c46e425d02b48ec0be6eea49c694fc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/a2faf5477c46e425d02b48ec0be6eea49c694fc2", "html_url": "https://github.com/rust-lang/rust/commit/a2faf5477c46e425d02b48ec0be6eea49c694fc2"}], "stats": {"total": 37, "additions": 17, "deletions": 20}, "files": [{"sha": "855588a4c3a4b9e69818da5af12db1ba318b74c9", "filename": "src/librustdoc/html/highlight.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fhighlight.rs?ref=d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "patch": "@@ -33,7 +33,8 @@ use syntax::parse;\n use syntax_pos::Span;\n \n /// Highlights `src`, returning the HTML output.\n-pub fn render_with_highlighting(src: &str, class: Option<&str>, id: Option<&str>) -> String {\n+pub fn render_with_highlighting(src: &str, class: Option<&str>, id: Option<&str>,\n+                                extension: Option<&str>) -> String {\n     debug!(\"highlighting: ================\\n{}\\n==============\", src);\n     let sess = parse::ParseSess::new();\n     let fm = sess.codemap().new_filemap(\"<stdin>\".to_string(), None, src.to_string());\n@@ -47,6 +48,9 @@ pub fn render_with_highlighting(src: &str, class: Option<&str>, id: Option<&str>\n         return format!(\"<pre>{}</pre>\", src);\n     }\n \n+    if let Some(extension) = extension {\n+        write!(out, \"{}\", extension).unwrap();\n+    }\n     write_footer(&mut out).unwrap();\n     String::from_utf8_lossy(&out[..]).into_owned()\n }"}, {"sha": "aff5a964f75cc297053b69a0213b43ff48bc21e0", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "patch": "@@ -262,9 +262,11 @@ pub fn render(w: &mut fmt::Formatter, s: &str, print_toc: bool) -> fmt::Result {\n                                               &Default::default());\n                     s.push_str(&format!(\"<span class='rusttest'>{}</span>\", Escape(&test)));\n                 });\n-                s.push_str(&highlight::render_with_highlighting(&text,\n-                                                                Some(\"rust-example-rendered\"),\n-                                                                None));\n+                s.push_str(&highlight::render_with_highlighting(\n+                               &text,\n+                               Some(\"rust-example-rendered\"),\n+                               None,\n+                               Some(\"<a class='test-arrow' target='_blank' href=''>Run</a>\")));\n                 let output = CString::new(s).unwrap();\n                 hoedown_buffer_puts(ob, output.as_ptr());\n             })"}, {"sha": "cedd8e514ce2d5d2edc16f16056e40430301f334", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "patch": "@@ -2954,7 +2954,7 @@ impl<'a> fmt::Display for Source<'a> {\n             write!(fmt, \"<span id=\\\"{0}\\\">{0:1$}</span>\\n\", i, cols)?;\n         }\n         write!(fmt, \"</pre>\")?;\n-        write!(fmt, \"{}\", highlight::render_with_highlighting(s, None, None))?;\n+        write!(fmt, \"{}\", highlight::render_with_highlighting(s, None, None, None))?;\n         Ok(())\n     }\n }\n@@ -2963,6 +2963,7 @@ fn item_macro(w: &mut fmt::Formatter, cx: &Context, it: &clean::Item,\n               t: &clean::Macro) -> fmt::Result {\n     w.write_str(&highlight::render_with_highlighting(&t.source,\n                                                      Some(\"macro\"),\n+                                                     None,\n                                                      None))?;\n     render_stability_since_raw(w, it.stable_since(), None)?;\n     document(w, cx, it)"}, {"sha": "cad97c04e1ac066a8b2243ad0eeebc8267f2afcc", "filename": "src/librustdoc/html/static/playpen.js", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fplaypen.js", "raw_url": "https://github.com/rust-lang/rust/raw/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fplaypen.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fplaypen.js?ref=d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "patch": "@@ -27,9 +27,7 @@ document.addEventListener('DOMContentLoaded', function() {\n                 return;\n             }\n \n-            var a = document.createElement('a');\n-            a.setAttribute('class', 'test-arrow');\n-            a.textContent = 'Run';\n+            var a = el.querySelectorAll('a.test-arrow')[0];\n \n             var code = el.previousElementSibling.textContent;\n \n@@ -40,17 +38,6 @@ document.addEventListener('DOMContentLoaded', function() {\n \n             a.setAttribute('href', window.playgroundUrl + '?code=' +\n                            encodeURIComponent(code) + channel);\n-            a.setAttribute('target', '_blank');\n-\n-            el.appendChild(a);\n-        };\n-\n-        el.onmouseout = function(e) {\n-            if (el.contains(e.relatedTarget)) {\n-                return;\n-            }\n-\n-            el.removeChild(el.querySelectorAll('a.test-arrow')[0]);\n         };\n     });\n });"}, {"sha": "2884320b82ebddecfa4434487e916658040c3b5e", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/d939cbeefecf9f78bd53196ec9e3667ca6016fcd/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=d939cbeefecf9f78bd53196ec9e3667ca6016fcd", "patch": "@@ -568,15 +568,18 @@ pre.rust .lifetime { color: #B76514; }\n .rusttest { display: none; }\n pre.rust { position: relative; }\n a.test-arrow {\n+    background-color: rgba(78, 139, 202, 0.2);\n     display: inline-block;\n     position: absolute;\n-    background-color: #4e8bca;\n     padding: 5px 10px 5px 10px;\n     border-radius: 5px;\n     font-size: 130%;\n     top: 5px;\n     right: 5px;\n }\n+a.test-arrow:hover{\n+    background-color: #4e8bca;\n+}\n \n .section-header:hover a:after {\n     content: '\\2002\\00a7\\2002';"}]}