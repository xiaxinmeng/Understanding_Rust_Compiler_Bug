{"sha": "1bec738c56c221843adbb022914c1de6e3bd7c61", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiZWM3MzhjNTZjMjIxODQzYWRiYjAyMjkxNGMxZGU2ZTNiZDdjNjE=", "commit": {"author": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-04-17T21:24:17Z"}, "committer": {"name": "Brian Anderson", "email": "andersrb@gmail.com", "date": "2011-04-17T21:24:17Z"}, "message": "Support #fmt precision for bools, with same rules as strings\n\nNot totally confident this is desirable. The alternative would be to make it a\ncompile error.", "tree": {"sha": "2b5d86bb58bc138d1c1c10248a2a8b94f26a8a94", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b5d86bb58bc138d1c1c10248a2a8b94f26a8a94"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1bec738c56c221843adbb022914c1de6e3bd7c61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1bec738c56c221843adbb022914c1de6e3bd7c61", "html_url": "https://github.com/rust-lang/rust/commit/1bec738c56c221843adbb022914c1de6e3bd7c61", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1bec738c56c221843adbb022914c1de6e3bd7c61/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da996d6e6b6b2f0c4f14de946fc3d5196e1053df", "url": "https://api.github.com/repos/rust-lang/rust/commits/da996d6e6b6b2f0c4f14de946fc3d5196e1053df", "html_url": "https://github.com/rust-lang/rust/commit/da996d6e6b6b2f0c4f14de946fc3d5196e1053df"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "4be038586be60f4757327c3844479e0ed9f4e82b", "filename": "src/lib/ExtFmt.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1bec738c56c221843adbb022914c1de6e3bd7c61/src%2Flib%2FExtFmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1bec738c56c221843adbb022914c1de6e3bd7c61/src%2Flib%2FExtFmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2FExtFmt.rs?ref=1bec738c56c221843adbb022914c1de6e3bd7c61", "patch": "@@ -358,11 +358,15 @@ mod RT {\n     }\n \n     fn conv_bool(&conv cv, bool b) -> str {\n+        auto s;\n         if (b) {\n-            ret pad(cv, \"true\");\n+            s = \"true\";\n         } else {\n-            ret pad(cv, \"false\");\n+            s = \"false\";\n         }\n+        // Run the boolean conversion through the string conversion logic,\n+        // giving it the same rules for precision, etc.\n+        ret conv_str(cv, s);\n     }\n \n     fn conv_char(&conv cv, char c) -> str {"}, {"sha": "5c66b17a1e5ea6b15caa5d45e5695651b0a02c5d", "filename": "src/test/run-pass/syntax-extension-fmt.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1bec738c56c221843adbb022914c1de6e3bd7c61/src%2Ftest%2Frun-pass%2Fsyntax-extension-fmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1bec738c56c221843adbb022914c1de6e3bd7c61/src%2Ftest%2Frun-pass%2Fsyntax-extension-fmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsyntax-extension-fmt.rs?ref=1bec738c56c221843adbb022914c1de6e3bd7c61", "patch": "@@ -104,4 +104,12 @@ fn main() {\n   test(#fmt(\"%.5x\", 127u), \"0007f\");\n   test(#fmt(\"%.5t\", 3u), \"00011\");\n   test(#fmt(\"%.5c\", 'A'), \"A\");\n+\n+  // Bool precision. I'm not sure if it's good or bad to have bool\n+  // conversions support precision - it's not standard printf so we\n+  // can do whatever. For now I'm making it behave the same as string\n+  // conversions.\n+  test(#fmt(\"%.b\", true), \"\");\n+  test(#fmt(\"%.0b\", true), \"\");\n+  test(#fmt(\"%.1b\", true), \"t\");\n }"}]}