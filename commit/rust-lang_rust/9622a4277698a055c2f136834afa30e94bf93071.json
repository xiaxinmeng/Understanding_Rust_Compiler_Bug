{"sha": "9622a4277698a055c2f136834afa30e94bf93071", "node_id": "C_kwDOAAsO6NoAKDk2MjJhNDI3NzY5OGEwNTVjMmYxMzY4MzRhZmEzMGU5NGJmOTMwNzE", "commit": {"author": {"name": "chordtoll", "email": "git@chordtoll.com", "date": "2022-01-10T07:35:54Z"}, "committer": {"name": "chordtoll", "email": "git@chordtoll.com", "date": "2022-01-17T03:09:35Z"}, "message": "Only suggest char literal for single-character strings", "tree": {"sha": "0c3212485e1e8f08690cc997d874c2a5b99dda22", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c3212485e1e8f08690cc997d874c2a5b99dda22"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9622a4277698a055c2f136834afa30e94bf93071", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEpY3nxsja8fiSLk0qbzOVC0R1V3AFAmHk3fEACgkQbzOVC0R1\nV3D0sw/8Do8UFPT7Nvyk9LIQIwACz9K7su6CmV2WBhDWa9V+iRxG9gx6UEfiptGd\nJfj1yjc419/FC3kWtNISVMx99/4R+DpF7NtyqXCtcIExWFmKqwKhwji5ChBAm8Za\nPDYIqgCDQKYaYcFKEjye5+7gIF0CEeKmY18m23q8mzdZubFnamU+b0gw0iDv7L6G\nzx5FELdzH7xR4aSdd72EPGX9LhdlpV9LvSG9hil5JBpBgUsHntb0O/HbUqhAbYPK\nlAD9TYOBjhIwRYaQXZ3ALE+TbDEtObz9MLMzwXSYI7jj/xyNXkW0toWu0fKFznfh\nsWBWqBNRaA4sO5ab8kb2c3t1trwb1ulER0+3jr/3bvxKVJoZDcFATsPgxmQANbeU\nqRoJSlbKG1kMBGuqoaDT0kTPzU0BYRzmKkKSPSj72O1iiaWU+AYobWFzyW3kKGkM\nuLVDewvuDQ77sRHx5hCVHbUWx6fqES533vzpgHn8YPabMTdKnxYGxT75u9KPk+RQ\nLucKcImongq07QyRimZwraSdhqwsrZju+RCud0nGjRbkc0QYjNOz3rs3m1a/SAhl\nFKMTQc/DMAh51R9D/Yt7TzD++X2Pv/uqYYkWe3o9FIV0+P1ALCKUslpBMWCXoJ32\n4DVAHIz+g77HaKuT9jccw7k/OzM5M4duhQr2UiyKkfxTrnge1Xs=\n=v/W8\n-----END PGP SIGNATURE-----", "payload": "tree 0c3212485e1e8f08690cc997d874c2a5b99dda22\nparent 02fe61b381c2dedc0071e1aacfbe91e0bad1f656\nauthor chordtoll <git@chordtoll.com> 1641800154 -0800\ncommitter chordtoll <git@chordtoll.com> 1642388975 -0800\n\nOnly suggest char literal for single-character strings\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9622a4277698a055c2f136834afa30e94bf93071", "html_url": "https://github.com/rust-lang/rust/commit/9622a4277698a055c2f136834afa30e94bf93071", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9622a4277698a055c2f136834afa30e94bf93071/comments", "author": {"login": "chordtoll", "id": 542193, "node_id": "MDQ6VXNlcjU0MjE5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/542193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chordtoll", "html_url": "https://github.com/chordtoll", "followers_url": "https://api.github.com/users/chordtoll/followers", "following_url": "https://api.github.com/users/chordtoll/following{/other_user}", "gists_url": "https://api.github.com/users/chordtoll/gists{/gist_id}", "starred_url": "https://api.github.com/users/chordtoll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chordtoll/subscriptions", "organizations_url": "https://api.github.com/users/chordtoll/orgs", "repos_url": "https://api.github.com/users/chordtoll/repos", "events_url": "https://api.github.com/users/chordtoll/events{/privacy}", "received_events_url": "https://api.github.com/users/chordtoll/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chordtoll", "id": 542193, "node_id": "MDQ6VXNlcjU0MjE5Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/542193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chordtoll", "html_url": "https://github.com/chordtoll", "followers_url": "https://api.github.com/users/chordtoll/followers", "following_url": "https://api.github.com/users/chordtoll/following{/other_user}", "gists_url": "https://api.github.com/users/chordtoll/gists{/gist_id}", "starred_url": "https://api.github.com/users/chordtoll/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chordtoll/subscriptions", "organizations_url": "https://api.github.com/users/chordtoll/orgs", "repos_url": "https://api.github.com/users/chordtoll/repos", "events_url": "https://api.github.com/users/chordtoll/events{/privacy}", "received_events_url": "https://api.github.com/users/chordtoll/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "02fe61b381c2dedc0071e1aacfbe91e0bad1f656", "url": "https://api.github.com/repos/rust-lang/rust/commits/02fe61b381c2dedc0071e1aacfbe91e0bad1f656", "html_url": "https://github.com/rust-lang/rust/commit/02fe61b381c2dedc0071e1aacfbe91e0bad1f656"}], "stats": {"total": 15, "additions": 12, "deletions": 3}, "files": [{"sha": "69b610feb7ca528b313c0af5ad9556ae71d9f93f", "filename": "compiler/rustc_infer/src/infer/error_reporting/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9622a4277698a055c2f136834afa30e94bf93071/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9622a4277698a055c2f136834afa30e94bf93071/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fmod.rs?ref=9622a4277698a055c2f136834afa30e94bf93071", "patch": "@@ -2068,7 +2068,7 @@ impl<'a, 'tcx> InferCtxt<'a, 'tcx> {\n                                 if let Some(code) =\n                                     code.strip_prefix('\"').and_then(|s| s.strip_suffix('\"'))\n                                 {\n-                                    if code.chars().nth(1).is_none() {\n+                                    if code.chars().count() == 1 {\n                                         err.span_suggestion(\n                                             span,\n                                             \"if you meant to write a `char` literal, use single quotes\","}, {"sha": "c29a15025a9c29d27c802af015d131b03c2187c7", "filename": "src/test/ui/inference/char-as-str-multi.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9622a4277698a055c2f136834afa30e94bf93071/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9622a4277698a055c2f136834afa30e94bf93071/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.rs?ref=9622a4277698a055c2f136834afa30e94bf93071", "patch": "@@ -1,6 +1,7 @@\n-// When a MULTI-character string literal is used where a char should be,\n+// When a MULTI/NO-character string literal is used where a char should be,\n // DO NOT suggest changing to single quotes.\n \n fn main() {\n     let _: char = \"foo\"; //~ ERROR mismatched types\n+    let _: char = \"\"; //~ ERROR mismatched types\n }"}, {"sha": "297ca2b548f7141d2b90868739dd7f67a06f2c55", "filename": "src/test/ui/inference/char-as-str-multi.stderr", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9622a4277698a055c2f136834afa30e94bf93071/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9622a4277698a055c2f136834afa30e94bf93071/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finference%2Fchar-as-str-multi.stderr?ref=9622a4277698a055c2f136834afa30e94bf93071", "patch": "@@ -6,6 +6,14 @@ LL |     let _: char = \"foo\";\n    |            |\n    |            expected due to this\n \n-error: aborting due to previous error\n+error[E0308]: mismatched types\n+  --> $DIR/char-as-str-multi.rs:6:19\n+   |\n+LL |     let _: char = \"\";\n+   |            ----   ^^ expected `char`, found `&str`\n+   |            |\n+   |            expected due to this\n+\n+error: aborting due to 2 previous errors\n \n For more information about this error, try `rustc --explain E0308`."}]}