{"sha": "c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "node_id": "C_kwDOAAsO6NoAKGMyMmQ0ZTZiMzQ2MmNkYjJiNWM5MGVlNTdjNDg3YTI1MmEwZGE3NzY", "commit": {"author": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2022-06-04T12:04:35Z"}, "committer": {"name": "Philipp Krones", "email": "hello@philkrones.com", "date": "2022-06-04T12:04:35Z"}, "message": "Remove unnecessary clap_derive dependency added in 9ee211af\n\nThe fixed issue in this commit can be tested without depending on\nclap/clap_derive. This updates the test case to do so.", "tree": {"sha": "49528338d5b316798ba6fb91c490e73bb9ca954d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/49528338d5b316798ba6fb91c490e73bb9ca954d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEij1UXJ/PQTcb99vTHKDfKvWdaKUFAmKbSrAACgkQHKDfKvWd\naKX5rRAAgNfdZqLeTc0MA0Exvfz90FEvU1BKALOw8nsfQUUl/6bHqhpS/mkKTOEk\ncxr1IR71Cg6/Pn55aO+SqYNLFmFlufS5eqJseD4UZJq22MzE4IIkUmhn0Ij+VK47\nG8R7yt7EXETm/IJ8rthxwCtLnJFsYZiUP6c9s+NAMPgviVZBa8DA8w5DoXpl8O/J\nACEKbfJka5fFUg2YHvc2ElBLgGHcJZRZuiiLMF5KIRRf+VkSgOj3bKZTO2A34QlE\nfXaY6wS/ffH1VL86Me+5Y1Z/1YKoh+d0ztLHhdurJtGDtbpAEcdqrBB5N3Gj9/wj\ni/jEX5WL7jLDthRo9j5IJGzqJRpvbDn/WHEpOX00c2iQzvvmCjlfC57p6jc1bH3k\nqEO+3PDL0gcwkd/LsSupKrPxA0xq4R1VwSquQ5MbOrP1zYETn2+M29QMRvib1Bua\naiRRzgvNTif+5TY4WbEFJXn2a9YYWuM/LUaa3fSuvo7rSVX5i40sIyn/xTycKNHx\nSVmCTqa/0523rfjsnFiNg/5RP0xPzum0wfBQEFdjv61rcI3B9RNbB7jiwGSXMf2i\nPvCHDZ5ZUuWht5WLfrT3gDUq5iobhDcw1pwXiHvD1QRMxju4GxFKMdD99oql3Y+I\na1naFJBQ4sAzra/+lqSbjROV+YdTMVlaE+WcQE4IbO5vQpTq/jQ=\n=QUMg\n-----END PGP SIGNATURE-----", "payload": "tree 49528338d5b316798ba6fb91c490e73bb9ca954d\nparent d55c373ddd1ec4f9bee281801f85283ac44140a7\nauthor Philipp Krones <hello@philkrones.com> 1654344275 +0200\ncommitter Philipp Krones <hello@philkrones.com> 1654344275 +0200\n\nRemove unnecessary clap_derive dependency added in 9ee211af\n\nThe fixed issue in this commit can be tested without depending on\nclap/clap_derive. This updates the test case to do so.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "html_url": "https://github.com/rust-lang/rust/commit/c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d55c373ddd1ec4f9bee281801f85283ac44140a7", "url": "https://api.github.com/repos/rust-lang/rust/commits/d55c373ddd1ec4f9bee281801f85283ac44140a7", "html_url": "https://github.com/rust-lang/rust/commit/d55c373ddd1ec4f9bee281801f85283ac44140a7"}], "stats": {"total": 30, "additions": 14, "deletions": 16}, "files": [{"sha": "3c8b758d53dca74843349e28b8460495d2f4c105", "filename": "src/tools/clippy/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2FCargo.toml?ref=c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "patch": "@@ -40,7 +40,6 @@ filetime = \"0.2\"\n rustc-workspace-hack = \"1.0\"\n \n # UI test dependencies\n-clap = { version = \"3.1\", features = [\"derive\"] }\n clippy_utils = { path = \"clippy_utils\" }\n derive-new = \"0.5\"\n if_chain = \"1.0\""}, {"sha": "04c2eeff08b6f0b32ec0dd2b666ee84d31de7140", "filename": "src/tools/clippy/tests/compile-test.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fcompile-test.rs?ref=c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "patch": "@@ -23,7 +23,6 @@ const RUN_INTERNAL_TESTS: bool = cfg!(feature = \"internal\");\n \n /// All crates used in UI tests are listed here\n static TEST_DEPENDENCIES: &[&str] = &[\n-    \"clap\",\n     \"clippy_utils\",\n     \"derive_new\",\n     \"futures\",\n@@ -42,8 +41,6 @@ static TEST_DEPENDENCIES: &[&str] = &[\n // Test dependencies may need an `extern crate` here to ensure that they show up\n // in the depinfo file (otherwise cargo thinks they are unused)\n #[allow(unused_extern_crates)]\n-extern crate clap;\n-#[allow(unused_extern_crates)]\n extern crate clippy_utils;\n #[allow(unused_extern_crates)]\n extern crate derive_new;"}, {"sha": "ae2cc2492f414e8c9c033f38f920e188dc171785", "filename": "src/tools/clippy/tests/ui/auxiliary/proc_macro_attr.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fauxiliary%2Fproc_macro_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fauxiliary%2Fproc_macro_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fauxiliary%2Fproc_macro_attr.rs?ref=c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "patch": "@@ -19,6 +19,11 @@ use syn::{\n     parse_quote, FnArg, ImplItem, ItemImpl, ItemTrait, Lifetime, Pat, PatIdent, PatType, Signature, TraitItem, Type,\n };\n \n+#[proc_macro_attribute]\n+pub fn dummy(_args: TokenStream, input: TokenStream) -> TokenStream {\n+    input\n+}\n+\n #[proc_macro_attribute]\n pub fn fake_async_trait(_args: TokenStream, input: TokenStream) -> TokenStream {\n     let mut item = parse_macro_input!(input as ItemTrait);"}, {"sha": "697412c00275e5178db7bcac8656e81eab5ae179", "filename": "src/tools/clippy/tests/ui/empty_line_after_outer_attribute.rs", "status": "modified", "additions": 3, "deletions": 6, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.rs?ref=c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "patch": "@@ -4,9 +4,6 @@\n #![feature(custom_inner_attributes)]\n #![rustfmt::skip]\n \n-#[macro_use]\n-extern crate clap;\n-\n #[macro_use]\n extern crate proc_macro_attr;\n \n@@ -113,10 +110,10 @@ pub trait Bazz {\n     }\n }\n \n-#[derive(clap::Parser)]\n-#[clap(after_help = \"This ia a help message.\n+#[derive(Clone, Copy)]\n+#[dummy(string = \"first line\n \n-You're welcome.\n+second line\n \")]\n pub struct Args;\n "}, {"sha": "594fca44a321071ac46cdc9ad5bcac5676f69218", "filename": "src/tools/clippy/tests/ui/empty_line_after_outer_attribute.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/c22d4e6b3462cdb2b5c90ee57c487a252a0da776/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fempty_line_after_outer_attribute.stderr?ref=c22d4e6b3462cdb2b5c90ee57c487a252a0da776", "patch": "@@ -1,5 +1,5 @@\n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:14:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:11:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |\n@@ -10,15 +10,15 @@ LL | | fn with_one_newline_and_comment() { assert!(true) }\n    = note: `-D clippy::empty-line-after-outer-attr` implied by `-D warnings`\n \n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:26:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:23:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |\n LL | | fn with_one_newline() { assert!(true) }\n    | |_\n \n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:31:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:28:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |\n@@ -27,23 +27,23 @@ LL | | fn with_two_newlines() { assert!(true) }\n    | |_\n \n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:38:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:35:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |\n LL | | enum Baz {\n    | |_\n \n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:46:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:43:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |\n LL | | struct Foo {\n    | |_\n \n error: found an empty line after an outer attribute. Perhaps you forgot to add a `!` to make it an inner attribute?\n-  --> $DIR/empty_line_after_outer_attribute.rs:54:1\n+  --> $DIR/empty_line_after_outer_attribute.rs:51:1\n    |\n LL | / #[crate_type = \"lib\"]\n LL | |"}]}