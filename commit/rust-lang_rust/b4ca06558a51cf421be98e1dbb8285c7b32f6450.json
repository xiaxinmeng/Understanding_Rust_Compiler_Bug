{"sha": "b4ca06558a51cf421be98e1dbb8285c7b32f6450", "node_id": "C_kwDOAAsO6NoAKGI0Y2EwNjU1OGE1MWNmNDIxYmU5OGUxZGJiODI4NWM3YjMyZjY0NTA", "commit": {"author": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-04-19T01:21:19Z"}, "committer": {"name": "Joshua Nelson", "email": "jnelson@cloudflare.com", "date": "2022-04-19T01:21:19Z"}, "message": "Remove assertion that all paths in `ShouldRun` exist\n\nThis breaks on submodules (see #96188). Disable the assertion for now until I can think of a proper\nfix.\n\nThis doesn't revert any of the changes in `Step`s themselves, only what\n`ShouldRun::paths` does.", "tree": {"sha": "3f5943218e479786fa313b23d988753009fed3ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f5943218e479786fa313b23d988753009fed3ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b4ca06558a51cf421be98e1dbb8285c7b32f6450", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b4ca06558a51cf421be98e1dbb8285c7b32f6450", "html_url": "https://github.com/rust-lang/rust/commit/b4ca06558a51cf421be98e1dbb8285c7b32f6450", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b4ca06558a51cf421be98e1dbb8285c7b32f6450/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "311e2683e1bad87715b1558f7900e294d24ce491", "url": "https://api.github.com/repos/rust-lang/rust/commits/311e2683e1bad87715b1558f7900e294d24ce491", "html_url": "https://github.com/rust-lang/rust/commit/311e2683e1bad87715b1558f7900e294d24ce491"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "965e66880f4d1a1dd4e2d215a5004058dd420424", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b4ca06558a51cf421be98e1dbb8285c7b32f6450/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b4ca06558a51cf421be98e1dbb8285c7b32f6450/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=b4ca06558a51cf421be98e1dbb8285c7b32f6450", "patch": "@@ -388,11 +388,13 @@ impl<'a> ShouldRun<'a> {\n             paths\n                 .iter()\n                 .map(|p| {\n-                    assert!(\n-                        self.builder.src.join(p).exists(),\n-                        \"`should_run.paths` should correspond to real on-disk paths - use `alias` if there is no relevant path: {}\",\n-                        p\n-                    );\n+                    // FIXME(#96188): make sure this is actually a path.\n+                    // This currently breaks for paths within submodules.\n+                    //assert!(\n+                    //    self.builder.src.join(p).exists(),\n+                    //    \"`should_run.paths` should correspond to real on-disk paths - use `alias` if there is no relevant path: {}\",\n+                    //    p\n+                    //);\n                     TaskPath { path: p.into(), kind: Some(self.kind) }\n                 })\n                 .collect(),"}]}