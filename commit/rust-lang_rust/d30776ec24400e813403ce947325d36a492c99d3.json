{"sha": "d30776ec24400e813403ce947325d36a492c99d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzMDc3NmVjMjQ0MDBlODEzNDAzY2U5NDczMjVkMzZhNDkyYzk5ZDM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-25T15:41:08Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-07-25T15:41:08Z"}, "message": "auto merge of #15958 : hirschenberger/rust/borrock-stats-div-by-zero, r=alexcrichton\n\n`rustc -Z borrowck-stats` displays ugly `-NaN%` in the stats\r\n\r\n```\r\npaths requiring guarantees: 0\r\npaths requiring loans     : 0 (-NaN%)\r\npaths requiring imm loans : 0 (-NaN%)\r\nstable paths              : 0 (-NaN%)\r\n```", "tree": {"sha": "6108b21571382f0b5d11c1b829275aa52464bd9f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6108b21571382f0b5d11c1b829275aa52464bd9f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d30776ec24400e813403ce947325d36a492c99d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d30776ec24400e813403ce947325d36a492c99d3", "html_url": "https://github.com/rust-lang/rust/commit/d30776ec24400e813403ce947325d36a492c99d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d30776ec24400e813403ce947325d36a492c99d3/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ff5bbd494ad40f494bf375451c4be52aa7c9d56", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ff5bbd494ad40f494bf375451c4be52aa7c9d56", "html_url": "https://github.com/rust-lang/rust/commit/7ff5bbd494ad40f494bf375451c4be52aa7c9d56"}, {"sha": "4ca127789d167f5d82c0e76e57649e35216afffc", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ca127789d167f5d82c0e76e57649e35216afffc", "html_url": "https://github.com/rust-lang/rust/commit/4ca127789d167f5d82c0e76e57649e35216afffc"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "6c5352ed796d689c2e3c76159f22c5ec2d34a8b4", "filename": "src/librustc/middle/borrowck/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d30776ec24400e813403ce947325d36a492c99d3/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d30776ec24400e813403ce947325d36a492c99d3/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fmod.rs?ref=d30776ec24400e813403ce947325d36a492c99d3", "patch": "@@ -98,9 +98,9 @@ pub fn check_crate(tcx: &ty::ctxt,\n     }\n \n     fn make_stat(bccx: &BorrowckCtxt, stat: uint) -> String {\n-        let stat_f = stat as f64;\n         let total = bccx.stats.guaranteed_paths.get() as f64;\n-        format!(\"{} ({:.0f}%)\", stat  , stat_f * 100.0 / total)\n+        let perc = if total == 0.0 { 0.0 } else { stat as f64 * 100.0 / total };\n+        format!(\"{} ({:.0f}%)\", stat, perc)\n     }\n }\n "}]}