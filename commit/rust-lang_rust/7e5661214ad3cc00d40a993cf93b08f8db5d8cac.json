{"sha": "7e5661214ad3cc00d40a993cf93b08f8db5d8cac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlNTY2MTIxNGFkM2NjMDBkNDBhOTkzY2Y5M2IwOGY4ZGI1ZDhjYWM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-09-13T03:22:56Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-09-13T16:14:49Z"}, "message": "Remove unnecessary temporary, add type annot to help inferencer (cc #2280)", "tree": {"sha": "7e9e3934a520530f9a356b7962b66f3dab592d87", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e9e3934a520530f9a356b7962b66f3dab592d87"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e5661214ad3cc00d40a993cf93b08f8db5d8cac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e5661214ad3cc00d40a993cf93b08f8db5d8cac", "html_url": "https://github.com/rust-lang/rust/commit/7e5661214ad3cc00d40a993cf93b08f8db5d8cac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e5661214ad3cc00d40a993cf93b08f8db5d8cac/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "308ca06012df2fe26c528efc354f975970e5def5", "url": "https://api.github.com/repos/rust-lang/rust/commits/308ca06012df2fe26c528efc354f975970e5def5", "html_url": "https://github.com/rust-lang/rust/commit/308ca06012df2fe26c528efc354f975970e5def5"}], "stats": {"total": 7, "additions": 2, "deletions": 5}, "files": [{"sha": "167bbe7dc7d93611f37e6b904ac01f72fd15730b", "filename": "src/test/bench/shootout-mandelbrot.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7e5661214ad3cc00d40a993cf93b08f8db5d8cac/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e5661214ad3cc00d40a993cf93b08f8db5d8cac/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-mandelbrot.rs?ref=7e5661214ad3cc00d40a993cf93b08f8db5d8cac", "patch": "@@ -118,7 +118,7 @@ fn writer(path: ~str, writech: comm::Chan<comm::Chan<line>>, size: uint)\n     };\n     cout.write_line(~\"P4\");\n     cout.write_line(fmt!(\"%u %u\", size, size));\n-    let lines = std::map::uint_hash();\n+    let lines: HashMap<uint, ~[u8]> = std::map::uint_hash();\n     let mut done = 0_u;\n     let mut i = 0_u;\n     while i < size {\n@@ -131,10 +131,7 @@ fn writer(path: ~str, writech: comm::Chan<comm::Chan<line>>, size: uint)\n             while prev <= i {\n                 if lines.contains_key(prev) {\n                     debug!(\"WS %u\", prev);\n-                    // FIXME (#2280): this temporary shouldn't be\n-                    // necessary, but seems to be, for borrowing.\n-                    let v : ~[u8] = lines.get(prev);\n-                    cout.write(v);\n+                    cout.write(lines.get(prev));\n                     done += 1_u;\n                     lines.remove(prev);\n                     prev += 1_u;"}]}