{"sha": "da7fcc7a09c213808134561ce99303b8d559d02b", "node_id": "C_kwDOAAsO6NoAKGRhN2ZjYzdhMDljMjEzODA4MTM0NTYxY2U5OTMwM2I4ZDU1OWQwMmI", "commit": {"author": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2022-12-21T00:48:12Z"}, "committer": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2022-12-29T00:16:10Z"}, "message": "docs/test: add UI test and long-form error docs for `E0519`", "tree": {"sha": "5fef35a9e58afc211630d229e41a1730d12dc79a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fef35a9e58afc211630d229e41a1730d12dc79a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da7fcc7a09c213808134561ce99303b8d559d02b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJJBAABCAAzFiEEYSWD6p+RIeSP1N2eF81cKtrg00QFAmOs3EoVHGV6cmFzdXJl\nQG91dGxvb2suY29tAAoJEBfNXCra4NNE89YP/iR3I9DSO2Gi5Z7YurhDUzJj9iZP\nFTT9EeFMHNYvYOYcKWpVaWnet18i7zWFMBKcAdQprngA1xCzN2f7AiJZ/Cy7Mpnl\nNF3NUl5gmvm8d9HTNbQdWxZCsym+3Cmbt4pujvj8AxXsruFV+44zCqUdHSUBmcGL\nCLS4bA7HIyDfEbFH9RVpAf2Uk6pGyYaJ/HnFULvytjixmAm/cHIdDOp4H1TiStvn\nzBxByNN6KbLQTbrk09PQS1o8k+Bohl9OXqGINFxfZ4LU3/UySMFiMps1zpQ9pFJi\nXoYatmdJNc+EOEs+DXDNP29yYrFm6VuZA1DGj2pKl3oFwowQK2wMssLTHwLhdFKX\nWMHohPeI1xpoZE2no2aRIpIlfKqggzcckoYMfAfqzQNyhCctEgYyWVgY/FlqMqTc\nG2VjVqnvLdpoAiheGGbHINIk804Zb8aS25L5hV+M0WdgA435hYe0JR6ALR7iDkdG\n7fE6EktUKieO709nGsJMte19XPGB2a+raQ2H74H2QczPD7k9Zmk0CZlyfHVkq5HS\ncnCTX+d/1fXVvdLcz9ynMgAMLEtsnApaC0uT7EZqTIHdjHXpzq+I86mF/9RJkBCA\nLQqYF8UWnO9eqQJg6852zH5XGJnN1W6uKGCuciPqzRT0HXDFdeuQAvK3iZwtvv+0\nbIP9Xpud1x1+reyL\n=giBq\n-----END PGP SIGNATURE-----", "payload": "tree 5fef35a9e58afc211630d229e41a1730d12dc79a\nparent 270c94e484e19764a2832ef918c95224eb3f17c7\nauthor Ezra Shaw <ezrasure@outlook.com> 1671583692 +1300\ncommitter Ezra Shaw <ezrasure@outlook.com> 1672272970 +1300\n\ndocs/test: add UI test and long-form error docs for `E0519`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da7fcc7a09c213808134561ce99303b8d559d02b", "html_url": "https://github.com/rust-lang/rust/commit/da7fcc7a09c213808134561ce99303b8d559d02b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da7fcc7a09c213808134561ce99303b8d559d02b/comments", "author": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "270c94e484e19764a2832ef918c95224eb3f17c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/270c94e484e19764a2832ef918c95224eb3f17c7", "html_url": "https://github.com/rust-lang/rust/commit/270c94e484e19764a2832ef918c95224eb3f17c7"}], "stats": {"total": 63, "additions": 60, "deletions": 3}, "files": [{"sha": "68eac479f9ef863d0c5b8b0ad79bb83fbe1c68ca", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/da7fcc7a09c213808134561ce99303b8d559d02b/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da7fcc7a09c213808134561ce99303b8d559d02b/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=da7fcc7a09c213808134561ce99303b8d559d02b", "patch": "@@ -280,6 +280,7 @@ E0515: include_str!(\"./error_codes/E0515.md\"),\n E0516: include_str!(\"./error_codes/E0516.md\"),\n E0517: include_str!(\"./error_codes/E0517.md\"),\n E0518: include_str!(\"./error_codes/E0518.md\"),\n+E0519: include_str!(\"./error_codes/E0519.md\"),\n E0520: include_str!(\"./error_codes/E0520.md\"),\n E0521: include_str!(\"./error_codes/E0521.md\"),\n E0522: include_str!(\"./error_codes/E0522.md\"),\n@@ -616,7 +617,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0489, // type/lifetime parameter not in scope here\n     E0490, // a value of type `..` is borrowed for too long\n     E0514, // metadata version mismatch\n-    E0519, // local crate and dependency have same (crate-name, disambiguator)\n     E0523, // two dependencies have same (crate-name, disambiguator) but different SVH\n //  E0526, // shuffle indices are not constant\n //  E0540, // multiple rustc_deprecated attributes"}, {"sha": "12876e2ad75fcc92c34885a567292945b7335e78", "filename": "compiler/rustc_error_codes/src/error_codes/E0519.md", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/da7fcc7a09c213808134561ce99303b8d559d02b/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md", "raw_url": "https://github.com/rust-lang/rust/raw/da7fcc7a09c213808134561ce99303b8d559d02b/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md?ref=da7fcc7a09c213808134561ce99303b8d559d02b", "patch": "@@ -0,0 +1,40 @@\n+The current crate is indistinguishable from one of its dependencies, in terms\n+of metadata.\n+\n+Example of erroneous code:\n+\n+`a.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_name = \"a\"]\n+#![crate_type = \"lib\"]\n+\n+pub fn foo() {}\n+```\n+\n+`b.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_name = \"a\"]\n+#![crate_type = \"lib\"]\n+\n+// error: the current crate is indistinguishable from one of its dependencies:\n+//        it has the same crate-name `a` and was compiled with the same\n+//        `-C metadata` arguments. This will result in symbol conflicts between\n+//        the two.\n+extern crate a;\n+\n+pub fn foo() {}\n+\n+fn bar() {\n+    a::foo(); // is this calling the local crate or the dependency?\n+}\n+```\n+\n+The above example compiles two crates with exactly the same name and\n+`crate_type` (plus any other metadata). This causes an error because it becomes\n+impossible for the compiler to distinguish between symbols (`pub` item names).\n+\n+This error can be fixed by:\n+ * Using [Cargo](../cargo/index.html), the Rust package manager, automatically\n+   fixing this issue.\n+ * Recompiling the crate with different metadata (different name/\n+   `crate_type`)."}, {"sha": "269ffd6320d9e7ad95fc420cc78ca36043c2a2d5", "filename": "src/test/ui/error-codes/E0519.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs?ref=da7fcc7a09c213808134561ce99303b8d559d02b", "patch": "@@ -0,0 +1,8 @@\n+// no need to create a new aux file, we can use an existing.\n+// aux-build: crateresolve1-1.rs\n+\n+// set same metadata as `crateresolve1`\n+#![crate_name = \"crateresolve1\"]\n+#![crate_type = \"lib\"]\n+\n+extern crate crateresolve1; //~ ERROR E0519"}, {"sha": "e24fc4aaa70fb18dd83c4f98b41896e73f26e995", "filename": "src/test/ui/error-codes/E0519.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr?ref=da7fcc7a09c213808134561ce99303b8d559d02b", "patch": "@@ -0,0 +1,9 @@\n+error[E0519]: the current crate is indistinguishable from one of its dependencies: it has the same crate-name `crateresolve1` and was compiled with the same `-C metadata` arguments. This will result in symbol conflicts between the two.\n+  --> $DIR/E0519.rs:8:1\n+   |\n+LL | extern crate crateresolve1;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0519`."}, {"sha": "fd870b0997ce0294566b048ecac3cd19214d6ee4", "filename": "src/tools/tidy/src/error_codes_check.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da7fcc7a09c213808134561ce99303b8d559d02b/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs?ref=da7fcc7a09c213808134561ce99303b8d559d02b", "patch": "@@ -11,8 +11,8 @@ use regex::Regex;\n \n // A few of those error codes can't be tested but all the others can and *should* be tested!\n const EXEMPTED_FROM_TEST: &[&str] = &[\n-    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\", \"E0640\",\n-    \"E0717\", \"E0729\", \"E0789\",\n+    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0523\", \"E0554\", \"E0640\", \"E0717\",\n+    \"E0729\", \"E0789\",\n ];\n \n // Some error codes don't have any tests apparently..."}]}