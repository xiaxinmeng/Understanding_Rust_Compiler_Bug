{"sha": "2c7099baeb6be82fcfec630b00d8a8175f5329f8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjNzA5OWJhZWI2YmU4MmZjZmVjNjMwYjAwZDhhODE3NWY1MzI5Zjg=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-06T19:31:43Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-06T19:31:43Z"}, "message": "Expand output and suggestions, fix tests", "tree": {"sha": "122843eebd8d9ff507eed519af19f60762f0b3b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/122843eebd8d9ff507eed519af19f60762f0b3b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c7099baeb6be82fcfec630b00d8a8175f5329f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c7099baeb6be82fcfec630b00d8a8175f5329f8", "html_url": "https://github.com/rust-lang/rust/commit/2c7099baeb6be82fcfec630b00d8a8175f5329f8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c7099baeb6be82fcfec630b00d8a8175f5329f8/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36381fabaf18a6dfa0e9ee27b5045c2e8cf1c8ed", "url": "https://api.github.com/repos/rust-lang/rust/commits/36381fabaf18a6dfa0e9ee27b5045c2e8cf1c8ed", "html_url": "https://github.com/rust-lang/rust/commit/36381fabaf18a6dfa0e9ee27b5045c2e8cf1c8ed"}], "stats": {"total": 446, "additions": 292, "deletions": 154}, "files": [{"sha": "61f05ca347358781a75f399b0d3d8963d6901dc9", "filename": "src/librustc/diagnostics.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Flibrustc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Flibrustc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdiagnostics.rs?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -2139,7 +2139,6 @@ register_diagnostics! {\n     E0657, // `impl Trait` can only capture lifetimes bound at the fn level\n     E0687, // in-band lifetimes cannot be used in `fn`/`Fn` syntax\n     E0688, // in-band lifetimes cannot be mixed with explicit lifetime binders\n-    E0689, // `#[repr]` must have a hint\n \n     E0906, // closures cannot be static\n }"}, {"sha": "5c7c9a05964e082f6d659e60822855341c79b040", "filename": "src/librustc/hir/check_attr.rs", "status": "modified", "additions": 48, "deletions": 11, "changes": 59, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fcheck_attr.rs?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -14,7 +14,7 @@\n //! conflicts between multiple such attributes attached to the same\n //! item.\n \n-use syntax_pos::Span;\n+use syntax_pos::{BytePos, Span};\n use ty::TyCtxt;\n \n use hir;\n@@ -156,17 +156,54 @@ impl<'a, 'tcx> CheckAttrVisitor<'a, 'tcx> {\n             .filter(|attr| attr.name() == \"repr\")\n             .filter_map(|attr| {\n                 let list = attr.meta_item_list();\n-                let mut has_hints = false;\n-                if let Some(ref list) = list {\n-                    has_hints = !list.is_empty();\n-                }\n+\n+                // Emit warnings with `repr` either has a literal assignment (`#[repr = \"C\"]`) or\n+                // no hints (``#[repr]`)\n+                let has_hints = list.as_ref().map(|ref list| !list.is_empty()).unwrap_or(false);\n                 if !has_hints {\n-                    span_warn!(\n-                        self.tcx.sess,\n-                        item.span,\n-                        E0689,\n-                        \"`repr` attribute cannot be empty\",\n-                    );\n+                    let mut suggested = false;\n+                    let mut warn = if let Some(ref lit) = attr.value_str() {\n+                        // avoid warning about empty `repr` on `#[repr = \"foo\"]`\n+                        let sp = match format!(\"{}\", lit).as_ref() {\n+                            \"C\" | \"packed\" | \"rust\" | \"u*\" | \"i*\" => {\n+                                let lo = attr.span.lo() + BytePos(2);\n+                                let hi = attr.span.hi() - BytePos(1);\n+                                suggested = true;\n+                                attr.span.with_lo(lo).with_hi(hi)\n+                            }\n+                            _ => attr.span,  // the literal wasn't a valid `repr` arg\n+                        };\n+                        let mut warn = self.tcx.sess.struct_span_warn(\n+                            sp,\n+                            \"`repr` attribute isn't configurable with a literal\",\n+                        );\n+                        if suggested {\n+                            // if the literal could have been a valid `repr` arg,\n+                            // suggest the correct syntax\n+                            warn.span_suggestion(\n+                                sp,\n+                                \"give `repr` a hint\",\n+                                format!(\"repr({})\", lit),\n+                            );\n+                        } else {\n+                            warn.span_label(attr.span, \"needs a hint\");\n+                        }\n+                        warn\n+                    } else {\n+                        let mut warn = self.tcx.sess.struct_span_warn(\n+                            attr.span,\n+                            \"`repr` attribute must have a hint\",\n+                        );\n+                        warn.span_label(attr.span, \"needs a hint\");\n+                        warn\n+                    };\n+                    if !suggested {\n+                        warn.help(\"valid hints include `#[repr(C)]`, `#[repr(packed)]` and \\\n+                                   `#[repr(rust)]`\");\n+                        warn.note(\"for more information, visit \\\n+                                   <https://doc.rust-lang.org/nomicon/other-reprs.html>\");\n+                    }\n+                    warn.emit();\n                 }\n                 list\n             })"}, {"sha": "4ba4464e87fa50800e3b8365c7f439d3a6dbcad2", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -309,20 +309,25 @@ mod bench {\n \n #[repr = \"3900\"]\n //~^ WARN unused attribute\n+//~| WARN `repr` attribute isn't configurable with a literal\n mod repr {\n     mod inner { #![repr=\"3900\"] }\n     //~^ WARN unused attribute\n+    //~| WARN `repr` attribute isn't configurable with a literal\n \n     #[repr = \"3900\"] fn f() { }\n     //~^ WARN unused attribute\n+    //~| WARN `repr` attribute isn't configurable with a literal\n \n     struct S;\n \n     #[repr = \"3900\"] type T = S;\n     //~^ WARN unused attribute\n+    //~| WARN `repr` attribute isn't configurable with a literal\n \n     #[repr = \"3900\"] impl S { }\n     //~^ WARN unused attribute\n+    //~| WARN `repr` attribute isn't configurable with a literal\n }\n \n #[path = \"3800\"]"}, {"sha": "6754e5170731864bc818d8d5fecb749dbe864319", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.stderr", "status": "modified", "additions": 187, "deletions": 142, "changes": 329, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -1,11 +1,11 @@\n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:493:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:498:1\n    |\n LL | #[macro_escape]\n    | ^^^^^^^^^^^^^^^\n \n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:496:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:501:17\n    |\n LL |     mod inner { #![macro_escape] }\n    |                 ^^^^^^^^^^^^^^^^\n@@ -186,6 +186,51 @@ warning: unknown lint: `x5100`\n LL |     #[deny(x5100)] impl S { }\n    |            ^^^^^\n \n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:310:1\n+   |\n+LL | #[repr = \"3900\"]\n+   | ^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:314:17\n+   |\n+LL |     mod inner { #![repr=\"3900\"] }\n+   |                 ^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:318:5\n+   |\n+LL |     #[repr = \"3900\"] fn f() { }\n+   |     ^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n+   |\n+LL |     #[repr = \"3900\"] type T = S;\n+   |     ^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:328:5\n+   |\n+LL |     #[repr = \"3900\"] impl S { }\n+   |     ^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n warning: unused attribute\n   --> $DIR/issue-43106-gating-of-builtin-attrs.rs:192:5\n    |\n@@ -343,25 +388,25 @@ LL | #[start = \"4300\"]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:313:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:314:17\n    |\n LL |     mod inner { #![repr=\"3900\"] }\n    |                 ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:316:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:318:5\n    |\n LL |     #[repr = \"3900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:321:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n    |\n LL |     #[repr = \"3900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:328:5\n    |\n LL |     #[repr = \"3900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n@@ -373,103 +418,103 @@ LL | #[repr = \"3900\"]\n    | ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:332:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:337:5\n    |\n LL |     #[path = \"3800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:335:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:340:5\n    |\n LL |     #[path = \"3800\"]  struct S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:338:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:343:5\n    |\n LL |     #[path = \"3800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:341:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:346:5\n    |\n LL |     #[path = \"3800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:348:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:353:17\n    |\n LL |     mod inner { #![abi=\"3700\"] }\n    |                 ^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:351:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:356:5\n    |\n LL |     #[abi = \"3700\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:354:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:359:5\n    |\n LL |     #[abi = \"3700\"] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:357:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:362:5\n    |\n LL |     #[abi = \"3700\"] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:360:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:365:5\n    |\n LL |     #[abi = \"3700\"] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:345:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:350:1\n    |\n LL | #[abi = \"3700\"]\n    | ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:367:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:372:17\n    |\n LL |     mod inner { #![automatically_derived=\"3600\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:370:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:375:5\n    |\n LL |     #[automatically_derived = \"3600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:373:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:378:5\n    |\n LL |     #[automatically_derived = \"3600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:376:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:381:5\n    |\n LL |     #[automatically_derived = \"3600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:379:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:384:5\n    |\n LL |     #[automatically_derived = \"3600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:364:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:369:1\n    |\n LL | #[automatically_derived = \"3600\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: function is marked #[no_mangle], but not exported\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:387:27\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:392:27\n    |\n LL |     #[no_mangle = \"3500\"] fn f() { }\n    |                           -^^^^^^^^^\n@@ -479,709 +524,709 @@ LL |     #[no_mangle = \"3500\"] fn f() { }\n    = note: #[warn(private_no_mangle_fns)] on by default\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:400:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:405:17\n    |\n LL |     mod inner { #![no_link=\"3400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:403:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:408:5\n    |\n LL |     #[no_link = \"3400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:406:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:411:5\n    |\n LL |     #[no_link = \"3400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:409:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:414:5\n    |\n LL |     #[no_link = \"3400\"]type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:412:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:417:5\n    |\n LL |     #[no_link = \"3400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:397:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:402:1\n    |\n LL | #[no_link = \"3400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:419:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:424:17\n    |\n LL |     mod inner { #![should_panic=\"3200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:422:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:427:5\n    |\n LL |     #[should_panic = \"3200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:425:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:430:5\n    |\n LL |     #[should_panic = \"3200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:428:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:433:5\n    |\n LL |     #[should_panic = \"3200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:431:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:436:5\n    |\n LL |     #[should_panic = \"3200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:416:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:421:1\n    |\n LL | #[should_panic = \"3200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:438:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:443:17\n    |\n LL |     mod inner { #![ignore=\"3100\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:441:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:446:5\n    |\n LL |     #[ignore = \"3100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:444:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:449:5\n    |\n LL |     #[ignore = \"3100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:447:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:452:5\n    |\n LL |     #[ignore = \"3100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:450:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:455:5\n    |\n LL |     #[ignore = \"3100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:435:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:440:1\n    |\n LL | #[ignore = \"3100\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:457:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:462:17\n    |\n LL |     mod inner { #![no_implicit_prelude=\"3000\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:460:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:465:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:463:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:468:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:466:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:471:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:469:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:474:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:454:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:459:1\n    |\n LL | #[no_implicit_prelude = \"3000\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:476:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:481:17\n    |\n LL |     mod inner { #![reexport_test_harness_main=\"2900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:479:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:484:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:482:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:487:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:485:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:490:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:488:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:493:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:473:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:478:1\n    |\n LL | #[reexport_test_harness_main = \"2900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:499:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:504:5\n    |\n LL |     #[macro_escape] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:502:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:507:5\n    |\n LL |     #[macro_escape] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:505:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:510:5\n    |\n LL |     #[macro_escape] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:508:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:513:5\n    |\n LL |     #[macro_escape] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:516:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:521:17\n    |\n LL |     mod inner { #![no_std=\"2600\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:516:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:521:17\n    |\n LL |     mod inner { #![no_std=\"2600\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:520:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:525:5\n    |\n LL |     #[no_std = \"2600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:520:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:525:5\n    |\n LL |     #[no_std = \"2600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:524:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:529:5\n    |\n LL |     #[no_std = \"2600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:524:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:529:5\n    |\n LL |     #[no_std = \"2600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:528:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:533:5\n    |\n LL |     #[no_std = \"2600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:528:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:533:5\n    |\n LL |     #[no_std = \"2600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:532:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:537:5\n    |\n LL |     #[no_std = \"2600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:532:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:537:5\n    |\n LL |     #[no_std = \"2600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:512:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:517:1\n    |\n LL | #[no_std = \"2600\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:512:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:517:1\n    |\n LL | #[no_std = \"2600\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:671:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:676:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:671:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:676:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:675:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:675:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:679:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:679:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:683:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:683:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:687:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:687:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:667:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:672:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:667:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:672:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:696:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:701:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:696:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:701:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:700:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:700:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:704:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:704:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:708:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:708:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:712:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:712:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:697:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:697:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:721:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:721:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:725:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:730:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:725:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:730:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:729:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:734:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:729:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:734:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:733:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:738:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:733:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:738:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:737:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:742:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:737:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:742:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:747:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:17\n    |\n LL |     mod inner { #![no_main=\"0400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:747:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:17\n    |\n LL |     mod inner { #![no_main=\"0400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:751:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n    |\n LL |     #[no_main = \"0400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:751:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n    |\n LL |     #[no_main = \"0400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:755:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n    |\n LL |     #[no_main = \"0400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:755:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n    |\n LL |     #[no_main = \"0400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:759:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n    |\n LL |     #[no_main = \"0400\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:759:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n    |\n LL |     #[no_main = \"0400\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:763:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:5\n    |\n LL |     #[no_main = \"0400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:763:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:5\n    |\n LL |     #[no_main = \"0400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:743:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:1\n    |\n LL | #[no_main = \"0400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:743:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:1\n    |\n LL | #[no_main = \"0400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:785:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:790:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:785:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:790:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:789:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:794:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:789:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:794:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:793:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:798:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:793:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:798:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:797:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:802:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:797:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:802:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:801:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:801:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:781:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:786:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:781:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:786:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:810:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:815:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:810:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:815:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:814:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:819:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:814:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:819:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:818:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:823:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:818:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:823:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:822:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:827:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:822:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:827:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:826:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:831:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:826:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:831:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:811:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:811:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -1259,7 +1304,7 @@ LL | #![proc_macro_derive          = \"2500\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: compilation successful\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:837:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:842:1\n    |\n LL | / fn main() { //~ ERROR compilation successful\n LL | |     println!(\"Hello World\");"}, {"sha": "312f60202c6c254dad35ac423e8fe56e6fb33e08", "filename": "src/test/ui/suggestions/repr.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Fsuggestions%2Frepr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Fsuggestions%2Frepr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Frepr.rs?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// compile-pass\n+\n+#[repr]\n+//^ WARN `repr` attribute must have a hint\n+struct _A {}\n+\n+#[repr = \"B\"]\n+//^ WARN `repr` attribute isn't configurable with a literal\n+struct _B {}\n+\n+#[repr = \"C\"]\n+//^ WARN `repr` attribute isn't configurable with a literal\n+struct _C {}\n+\n+#[repr(C)]\n+struct _D {}\n+\n+fn main() {}"}, {"sha": "6ed246d0d2c2927cc0bb74afd904d704f56037bb", "filename": "src/test/ui/suggestions/repr.stderr", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2c7099baeb6be82fcfec630b00d8a8175f5329f8/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr?ref=2c7099baeb6be82fcfec630b00d8a8175f5329f8", "patch": "@@ -0,0 +1,24 @@\n+warning: `repr` attribute must have a hint\n+  --> $DIR/repr.rs:13:1\n+   |\n+LL | #[repr]\n+   | ^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/repr.rs:17:1\n+   |\n+LL | #[repr = \"B\"]\n+   | ^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/repr.rs:21:3\n+   |\n+LL | #[repr = \"C\"]\n+   |   ^^^^^^^^^^ help: give `repr` a hint: `repr(C)`\n+"}]}