{"sha": "336b902f669167d09782702dffcc12513ebc8950", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzNmI5MDJmNjY5MTY3ZDA5NzgyNzAyZGZmY2MxMjUxM2ViYzg5NTA=", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-01-05T23:09:57Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2020-01-05T23:09:57Z"}, "message": "Use Instance.ty_env instead of Instance.monomorphic_ty in interpreter", "tree": {"sha": "3aa3354574315038e0d97f982e18c02c8c8cafe6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3aa3354574315038e0d97f982e18c02c8c8cafe6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/336b902f669167d09782702dffcc12513ebc8950", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAl4SbNUACgkQtAh+UQ6Y\nsWQu5A/+OHcqxUmmefgX/yzf9I5GYtNzmCy4Klmtl2I8hHs8TrccklHXtRMcx0l2\nwdpLF1jWZYEWgEHKvcDMlXw63p6D9cW7UidR9XKo29fGUYtRgEpOJeXykOAqwD+a\nHP9qQQuv8c4COKyBdTwPMNKm3HSwB6JcE7uTltkb4X3xxuj82VE5DEypheg2MVsC\nc4O/nc20HWyZjRNnRjlWi/qlaAYyQfy1QAI4Nw6BKIUHROmMIg9OqnlPIFSDJHwL\no6G5a51QAkjTOO6SGl3k/UNYOyzysuLyD92GwmOL+abUcauVk+BYafjlidGhavNe\niAJobcyRoZDlACOV0WuJpd5zsG9yz0I40sOD9LwcLJiJRqpjeULBq0gvX9yrx7hx\nzVltv4T4DiUDxjAD2OE01tXZrZwYuV+zdOZlKFLcOKC6Q/SszW24jQ2G5SwV0/1q\nQpjn3QSHMhS1mzRmPf4BpCeIGybs28r6khmS/OkyI7vZXn+RaBEzjKnMZYUDo7xU\nf8v13wNxzMZNQNwtwrQXa+dJEqjlO6Vn+bH00sPcModM2Y3Qjm9KNHuogTWvYuqd\ne3WJgCNcWigfPhFgTG2cwL7W6KUZPMhbwK79cSjeZJ+RqWVbGG2bmUaZ2wVnfdH0\nmyv0t2uPAHktDVrS6U0Yf5K52u9HbE6Yj0iKjphQHsZVChsCo+w=\n=HRiJ\n-----END PGP SIGNATURE-----", "payload": "tree 3aa3354574315038e0d97f982e18c02c8c8cafe6\nparent db2c4f214f9bb638261cb0e1e0d6d66847d122e1\nauthor Aaron Hill <aa1ronham@gmail.com> 1578265797 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1578265797 -0500\n\nUse Instance.ty_env instead of Instance.monomorphic_ty in interpreter\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/336b902f669167d09782702dffcc12513ebc8950", "html_url": "https://github.com/rust-lang/rust/commit/336b902f669167d09782702dffcc12513ebc8950", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/336b902f669167d09782702dffcc12513ebc8950/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db2c4f214f9bb638261cb0e1e0d6d66847d122e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/db2c4f214f9bb638261cb0e1e0d6d66847d122e1", "html_url": "https://github.com/rust-lang/rust/commit/db2c4f214f9bb638261cb0e1e0d6d66847d122e1"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "efbbca534856a694555a5fd68f5ad82fe90c0481", "filename": "src/librustc_mir/interpret/traits.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/336b902f669167d09782702dffcc12513ebc8950/src%2Flibrustc_mir%2Finterpret%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/336b902f669167d09782702dffcc12513ebc8950/src%2Flibrustc_mir%2Finterpret%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Ftraits.rs?ref=336b902f669167d09782702dffcc12513ebc8950", "patch": "@@ -140,7 +140,7 @@ impl<'mir, 'tcx, M: Machine<'mir, 'tcx>> InterpCx<'mir, 'tcx, M> {\n         // to determine the type.\n         let drop_instance = self.memory.get_fn(drop_fn)?.as_instance()?;\n         trace!(\"Found drop fn: {:?}\", drop_instance);\n-        let fn_sig = drop_instance.monomorphic_ty(*self.tcx).fn_sig(*self.tcx);\n+        let fn_sig = drop_instance.ty_env(*self.tcx, self.param_env).fn_sig(*self.tcx);\n         let fn_sig = self.tcx.normalize_erasing_late_bound_regions(self.param_env, &fn_sig);\n         // The drop function takes `*mut T` where `T` is the type being dropped, so get that.\n         let args = fn_sig.inputs();"}]}