{"sha": "ae30294771e3c5c65a2d70be0e09b5bec2490c66", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlMzAyOTQ3NzFlM2M1YzY1YTJkNzBiZTBlMDliNWJlYzI0OTBjNjY=", "commit": {"author": {"name": "Paul Dicker", "email": "pitdicker@gmail.com", "date": "2016-01-20T07:41:20Z"}, "committer": {"name": "Paul Dicker", "email": "pitdicker@gmail.com", "date": "2016-01-20T07:41:20Z"}, "message": "Remove raw pointer from OpenOptions struct\nOtherwise it is not Send and Sync anymore", "tree": {"sha": "af981f4e62d8583c17d772d245fa7050301577af", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/af981f4e62d8583c17d772d245fa7050301577af"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae30294771e3c5c65a2d70be0e09b5bec2490c66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae30294771e3c5c65a2d70be0e09b5bec2490c66", "html_url": "https://github.com/rust-lang/rust/commit/ae30294771e3c5c65a2d70be0e09b5bec2490c66", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae30294771e3c5c65a2d70be0e09b5bec2490c66/comments", "author": {"login": "pitdicker", "id": 6255050, "node_id": "MDQ6VXNlcjYyNTUwNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6255050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pitdicker", "html_url": "https://github.com/pitdicker", "followers_url": "https://api.github.com/users/pitdicker/followers", "following_url": "https://api.github.com/users/pitdicker/following{/other_user}", "gists_url": "https://api.github.com/users/pitdicker/gists{/gist_id}", "starred_url": "https://api.github.com/users/pitdicker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pitdicker/subscriptions", "organizations_url": "https://api.github.com/users/pitdicker/orgs", "repos_url": "https://api.github.com/users/pitdicker/repos", "events_url": "https://api.github.com/users/pitdicker/events{/privacy}", "received_events_url": "https://api.github.com/users/pitdicker/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pitdicker", "id": 6255050, "node_id": "MDQ6VXNlcjYyNTUwNTA=", "avatar_url": "https://avatars.githubusercontent.com/u/6255050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pitdicker", "html_url": "https://github.com/pitdicker", "followers_url": "https://api.github.com/users/pitdicker/followers", "following_url": "https://api.github.com/users/pitdicker/following{/other_user}", "gists_url": "https://api.github.com/users/pitdicker/gists{/gist_id}", "starred_url": "https://api.github.com/users/pitdicker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pitdicker/subscriptions", "organizations_url": "https://api.github.com/users/pitdicker/orgs", "repos_url": "https://api.github.com/users/pitdicker/repos", "events_url": "https://api.github.com/users/pitdicker/events{/privacy}", "received_events_url": "https://api.github.com/users/pitdicker/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c569189c8b8b5d635b6704c489a8410c81570a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c569189c8b8b5d635b6704c489a8410c81570a0", "html_url": "https://github.com/rust-lang/rust/commit/9c569189c8b8b5d635b6704c489a8410c81570a0"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "414a0ebd11fa27ce0cc8c4b79f68b45a252229cc", "filename": "src/libstd/fs.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ae30294771e3c5c65a2d70be0e09b5bec2490c66/src%2Flibstd%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae30294771e3c5c65a2d70be0e09b5bec2490c66/src%2Flibstd%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffs.rs?ref=ae30294771e3c5c65a2d70be0e09b5bec2490c66", "patch": "@@ -2264,6 +2264,12 @@ mod tests {\n         assert_eq!(check!(fs::metadata(&tmpdir.join(\"h\"))).len(), 9);\n     }\n \n+    #[test]\n+    fn _assert_send_sync() {\n+        fn _assert_send_sync<T: Send + Sync>() {}\n+        _assert_send_sync::<OpenOptions>();\n+    }\n+\n     #[test]\n     fn binary_file() {\n         let mut bytes = [0; 1024];"}, {"sha": "60e3f7c22bd58c0484be6c0ba684e1e6fb714f0b", "filename": "src/libstd/sys/windows/fs.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ae30294771e3c5c65a2d70be0e09b5bec2490c66/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae30294771e3c5c65a2d70be0e09b5bec2490c66/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ffs.rs?ref=ae30294771e3c5c65a2d70be0e09b5bec2490c66", "patch": "@@ -69,7 +69,7 @@ pub struct OpenOptions {\n     attributes: c::DWORD,\n     share_mode: c::DWORD,\n     security_qos_flags: c::DWORD,\n-    security_attributes: c::LPSECURITY_ATTRIBUTES,\n+    security_attributes: usize, // FIXME: should be a reference\n }\n \n #[derive(Clone, PartialEq, Eq, Debug)]\n@@ -170,7 +170,7 @@ impl OpenOptions {\n             share_mode: c::FILE_SHARE_READ | c::FILE_SHARE_WRITE | c::FILE_SHARE_DELETE,\n             attributes: 0,\n             security_qos_flags: 0,\n-            security_attributes: ptr::null_mut(),\n+            security_attributes: 0,\n         }\n     }\n \n@@ -187,7 +187,7 @@ impl OpenOptions {\n     pub fn attributes(&mut self, attrs: u32) { self.attributes = attrs; }\n     pub fn security_qos_flags(&mut self, flags: u32) { self.security_qos_flags = flags; }\n     pub fn security_attributes(&mut self, attrs: c::LPSECURITY_ATTRIBUTES) {\n-        self.security_attributes = attrs;\n+        self.security_attributes = attrs as usize;\n     }\n \n     fn get_access_mode(&self) -> io::Result<c::DWORD> {"}]}