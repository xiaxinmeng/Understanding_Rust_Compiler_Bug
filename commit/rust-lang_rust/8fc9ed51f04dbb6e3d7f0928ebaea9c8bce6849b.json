{"sha": "8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "node_id": "C_kwDOAAsO6NoAKDhmYzllZDUxZjA0ZGJiNmUzZDdmMDkyOGViYWVhOWM4YmNlNjg0OWI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-02-10T05:09:56Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-02-10T05:09:56Z"}, "message": "Rollup merge of #107043 - Nilstrieb:true-and-false-is-false, r=wesleywiser\n\nSupport `true` and `false` as boolean flag params\n\nImplements [MCP 577](https://github.com/rust-lang/compiler-team/issues/577).", "tree": {"sha": "56cd7111c0865d2676e0d90807a206aa8d036feb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/56cd7111c0865d2676e0d90807a206aa8d036feb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj5dGkCRBK7hj4Ov3rIwAAdSYIABONqlycOLi3DtJlhVZ4lMwM\nBj8nybBhZcE0Lu6hhVlIvcVRhPzddTA6+JQt2pG+dFX2obno+SJSxEG06IKRygad\n5LDBOG8Y1iTS51aj1+gnXFHMpGN3AcSMrLox2xcq0WNauW7r1NWxejpNvWW5vAQp\nD4hC9YEih0zVojkSKNO1ezo7LHvMA+tgxMiD+lbjjFPlqt5oQVxBLpbgLeU0u38q\nsDSLfPxPvF7A+oy5NXBqZDL1zUoJxd13EIkCH4D2IMtEekOgB9ruwaReeUYGSRSQ\nKanZx9875zC7xthX/m9M08yebgvDzAx5J9pNE2ksU/hjxY6maxj1VtLmAEyBYhY=\n=jnat\n-----END PGP SIGNATURE-----\n", "payload": "tree 56cd7111c0865d2676e0d90807a206aa8d036feb\nparent a12d31d5a681d70f277b4fbf6cafe22bae876ea7\nparent 7605853b32111219aa99db94a7ef5a00fe3e751d\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1676005796 +0100\ncommitter GitHub <noreply@github.com> 1676005796 +0100\n\nRollup merge of #107043 - Nilstrieb:true-and-false-is-false, r=wesleywiser\n\nSupport `true` and `false` as boolean flag params\n\nImplements [MCP 577](https://github.com/rust-lang/compiler-team/issues/577).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "html_url": "https://github.com/rust-lang/rust/commit/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a12d31d5a681d70f277b4fbf6cafe22bae876ea7", "url": "https://api.github.com/repos/rust-lang/rust/commits/a12d31d5a681d70f277b4fbf6cafe22bae876ea7", "html_url": "https://github.com/rust-lang/rust/commit/a12d31d5a681d70f277b4fbf6cafe22bae876ea7"}, {"sha": "7605853b32111219aa99db94a7ef5a00fe3e751d", "url": "https://api.github.com/repos/rust-lang/rust/commits/7605853b32111219aa99db94a7ef5a00fe3e751d", "html_url": "https://github.com/rust-lang/rust/commit/7605853b32111219aa99db94a7ef5a00fe3e751d"}], "stats": {"total": 82, "additions": 41, "deletions": 41}, "files": [{"sha": "03f45d0fc32bcb25d3904d2355cc790ac9383c11", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -349,7 +349,7 @@ fn build_options<O: Default>(\n #[allow(non_upper_case_globals)]\n mod desc {\n     pub const parse_no_flag: &str = \"no value\";\n-    pub const parse_bool: &str = \"one of: `y`, `yes`, `on`, `n`, `no`, or `off`\";\n+    pub const parse_bool: &str = \"one of: `y`, `yes`, `on`, `true`, `n`, `no`, `off` or `false`\";\n     pub const parse_opt_bool: &str = parse_bool;\n     pub const parse_string: &str = \"a string\";\n     pub const parse_opt_string: &str = parse_string;\n@@ -433,11 +433,11 @@ mod parse {\n     /// Use this for any boolean option that has a static default.\n     pub(crate) fn parse_bool(slot: &mut bool, v: Option<&str>) -> bool {\n         match v {\n-            Some(\"y\") | Some(\"yes\") | Some(\"on\") | None => {\n+            Some(\"y\") | Some(\"yes\") | Some(\"on\") | Some(\"true\") | None => {\n                 *slot = true;\n                 true\n             }\n-            Some(\"n\") | Some(\"no\") | Some(\"off\") => {\n+            Some(\"n\") | Some(\"no\") | Some(\"off\") | Some(\"false\") => {\n                 *slot = false;\n                 true\n             }\n@@ -450,11 +450,11 @@ mod parse {\n     /// other factors, such as other options, or target options.)\n     pub(crate) fn parse_opt_bool(slot: &mut Option<bool>, v: Option<&str>) -> bool {\n         match v {\n-            Some(\"y\") | Some(\"yes\") | Some(\"on\") | None => {\n+            Some(\"y\") | Some(\"yes\") | Some(\"on\") | Some(\"true\") | None => {\n                 *slot = Some(true);\n                 true\n             }\n-            Some(\"n\") | Some(\"no\") | Some(\"off\") => {\n+            Some(\"n\") | Some(\"no\") | Some(\"off\") | Some(\"false\") => {\n                 *slot = Some(false);\n                 true\n             }"}, {"sha": "c7f120dafeafdeebe1f9a020e2116638477900fa", "filename": "src/doc/rustc/src/codegen-options/index.md", "status": "modified", "additions": 32, "deletions": 32, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -49,19 +49,19 @@ Guard](https://docs.microsoft.com/en-us/windows/win32/secbp/control-flow-guard)\n platform security feature. This flag is currently ignored for non-Windows targets.\n It takes one of the following values:\n \n-* `y`, `yes`, `on`, `checks`, or no value: enable Control Flow Guard.\n+* `y`, `yes`, `on`, `true`, `checks`, or no value: enable Control Flow Guard.\n * `nochecks`: emit Control Flow Guard metadata without runtime enforcement checks (this\n should only be used for testing purposes as it does not provide security enforcement).\n-* `n`, `no`, `off`: do not enable Control Flow Guard (the default).\n+* `n`, `no`, `off`, `false`: do not enable Control Flow Guard (the default).\n \n ## debug-assertions\n \n This flag lets you turn `cfg(debug_assertions)` [conditional\n compilation](../../reference/conditional-compilation.md#debug_assertions) on\n or off. It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: enable debug-assertions.\n-* `n`, `no`, or `off`: disable debug-assertions.\n+* `y`, `yes`, `on`, `true`, or no value: enable debug-assertions.\n+* `n`, `no`, `off` or `false`: disable debug-assertions.\n \n If not specified, debug assertions are automatically enabled only if the\n [opt-level](#opt-level) is 0.\n@@ -82,8 +82,8 @@ Note: The [`-g` flag][option-g-debug] is an alias for `-C debuginfo=2`.\n This flag controls whether or not the linker includes its default libraries.\n It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: include default libraries (the default).\n-* `n`, `no`, or `off`: exclude default libraries.\n+* `y`, `yes`, `on`, `true` or no value: include default libraries (the default).\n+* `n`, `no`, `off` or `false`: exclude default libraries.\n \n For example, for gcc flavor linkers, this issues the `-nodefaultlibs` flag to\n the linker.\n@@ -93,8 +93,8 @@ the linker.\n This flag controls whether or not the compiler embeds LLVM bitcode into object\n files. It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: put bitcode in rlibs (the default).\n-* `n`, `no`, or `off`: omit bitcode from rlibs.\n+* `y`, `yes`, `on`, `true` or no value: put bitcode in rlibs (the default).\n+* `n`, `no`, `off` or `false`: omit bitcode from rlibs.\n \n LLVM bitcode is required when rustc is performing link-time optimization (LTO).\n It is also required on some targets like iOS ones where vendors look for LLVM\n@@ -135,8 +135,8 @@ flag][option-emit] for more information.\n This flag forces the use of frame pointers. It takes one of the following\n values:\n \n-* `y`, `yes`, `on`, or no value: force-enable frame pointers.\n-* `n`, `no`, or `off`: do not force-enable frame pointers. This does\n+* `y`, `yes`, `on`, `true` or no value: force-enable frame pointers.\n+* `n`, `no`, `off` or `false`: do not force-enable frame pointers. This does\n   not necessarily mean frame pointers will be removed.\n \n The default behaviour, if frame pointers are not force-enabled, depends on the\n@@ -147,8 +147,8 @@ target.\n This flag forces the generation of unwind tables. It takes one of the following\n values:\n \n-* `y`, `yes`, `on`, or no value: Unwind tables are forced to be generated.\n-* `n`, `no`, or `off`: Unwind tables are not forced to be generated. If unwind\n+* `y`, `yes`, `on`, `true` or no value: Unwind tables are forced to be generated.\n+* `n`, `no`, `off` or `false`: Unwind tables are not forced to be generated. If unwind\n   tables are required by the target an error will be emitted.\n \n The default if not specified depends on the target.\n@@ -202,8 +202,8 @@ options should be separated by spaces.\n This flag controls whether the linker will keep dead code. It takes one of\n the following values:\n \n-* `y`, `yes`, `on`, or no value: keep dead code.\n-* `n`, `no`, or `off`: remove dead code (the default).\n+* `y`, `yes`, `on`, `true` or no value: keep dead code.\n+* `n`, `no`, `off` or `false`: remove dead code (the default).\n \n An example of when this flag might be useful is when trying to construct code coverage\n metrics.\n@@ -215,8 +215,8 @@ linker will use libraries and objects shipped with Rust instead or those in the\n It takes one of the following values:\n \n * no value: rustc will use heuristic to disable self-contained mode if system has necessary tools.\n-* `y`, `yes`, `on`: use only libraries/objects shipped with Rust.\n-* `n`, `no`, or `off`: rely on the user or the linker to provide non-Rust libraries/objects.\n+* `y`, `yes`, `on`, `true`: use only libraries/objects shipped with Rust.\n+* `n`, `no`, `off` or `false`: rely on the user or the linker to provide non-Rust libraries/objects.\n \n This allows overriding cases when detection fails or user wants to use shipped libraries.\n \n@@ -261,8 +261,8 @@ This flag defers LTO optimizations to the linker. See\n [linker-plugin-LTO](../linker-plugin-lto.md) for more details. It takes one of\n the following values:\n \n-* `y`, `yes`, `on`, or no value: enable linker plugin LTO.\n-* `n`, `no`, or `off`: disable linker plugin LTO (the default).\n+* `y`, `yes`, `on`, `true` or no value: enable linker plugin LTO.\n+* `n`, `no`, `off` or `false`: disable linker plugin LTO (the default).\n * A path to the linker plugin.\n \n More specifically this flag will cause the compiler to replace its typical\n@@ -292,9 +292,9 @@ optimizations](https://llvm.org/docs/LinkTimeOptimization.html) to produce\n better optimized code, using whole-program analysis, at the cost of longer\n linking time. It takes one of the following values:\n \n-* `y`, `yes`, `on`, `fat`, or no value: perform \"fat\" LTO which attempts to\n+* `y`, `yes`, `on`, `true`, `fat`, or no value: perform \"fat\" LTO which attempts to\n   perform optimizations across all crates within the dependency graph.\n-* `n`, `no`, `off`: disables LTO.\n+* `n`, `no`, `off`, `false`: disables LTO.\n * `thin`: perform [\"thin\"\n   LTO](http://blog.llvm.org/2016/06/thinlto-scalable-and-incremental-lto.html).\n   This is similar to \"fat\", but takes substantially less time to run while\n@@ -333,8 +333,8 @@ This flag allows you to disable [the\n red zone](https://en.wikipedia.org/wiki/Red_zone_\\(computing\\)). It takes one\n of the following values:\n \n-* `y`, `yes`, `on`, or no value: disable the red zone.\n-* `n`, `no`, or `off`: enable the red zone.\n+* `y`, `yes`, `on`, `true` or no value: disable the red zone.\n+* `n`, `no`, `off` or `false`: enable the red zone.\n \n The default behaviour, if the flag is not specified, depends on the target.\n \n@@ -376,8 +376,8 @@ overflow](../../reference/expressions/operator-expr.md#overflow). When\n overflow-checks are enabled, a panic will occur on overflow. This flag takes\n one of the following values:\n \n-* `y`, `yes`, `on`, or no value: enable overflow checks.\n-* `n`, `no`, or `off`: disable overflow checks.\n+* `y`, `yes`, `on`, `true` or no value: enable overflow checks.\n+* `n`, `no`, `off` or `false`: disable overflow checks.\n \n If not specified, overflow checks are enabled if\n [debug-assertions](#debug-assertions) are enabled, disabled otherwise.\n@@ -409,8 +409,8 @@ for determining whether or not it is possible to statically or dynamically\n link with a dependency. For example, `cdylib` crate types may only use static\n linkage. This flag takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: use dynamic linking.\n-* `n`, `no`, or `off`: use static linking (the default).\n+* `y`, `yes`, `on`, `true` or no value: use dynamic linking.\n+* `n`, `no`, `off` or `false`: use static linking (the default).\n \n ## profile-generate\n \n@@ -487,24 +487,24 @@ The list of passes should be separated by spaces.\n This flag controls whether [`rpath`](https://en.wikipedia.org/wiki/Rpath) is\n enabled. It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: enable rpath.\n-* `n`, `no`, or `off`: disable rpath (the default).\n+* `y`, `yes`, `on`, `true` or no value: enable rpath.\n+* `n`, `no`, `off` or `false`: disable rpath (the default).\n \n ## save-temps\n \n This flag controls whether temporary files generated during compilation are\n deleted once compilation finishes. It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: save temporary files.\n-* `n`, `no`, or `off`: delete temporary files (the default).\n+* `y`, `yes`, `on`, `true` or no value: save temporary files.\n+* `n`, `no`, `off` or `false`: delete temporary files (the default).\n \n ## soft-float\n \n This option controls whether `rustc` generates code that emulates floating\n point instructions in software. It takes one of the following values:\n \n-* `y`, `yes`, `on`, or no value: use soft floats.\n-* `n`, `no`, or `off`: use hardware floats (the default).\n+* `y`, `yes`, `on`, `true` or no value: use soft floats.\n+* `n`, `no`, `off` or `false`: use hardware floats (the default).\n \n ## split-debuginfo\n "}, {"sha": "9394868c08db51995ea1bde2472fec0f0673c554", "filename": "tests/codegen/issue-75659.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fcodegen%2Fissue-75659.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fcodegen%2Fissue-75659.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcodegen%2Fissue-75659.rs?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -1,7 +1,7 @@\n // This test checks that the call to memchr/slice_contains is optimized away\n // when searching in small slices.\n \n-// compile-flags: -O -Zinline-mir=no\n+// compile-flags: -O -Zinline-mir=false\n // only-x86_64\n \n #![crate_type = \"lib\"]"}, {"sha": "947099fdd13e7825600fdf2e024bbacbc2ae930f", "filename": "tests/ui/lint/reasons-forbidden.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Flint%2Freasons-forbidden.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Flint%2Freasons-forbidden.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flint%2Freasons-forbidden.rs?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -8,7 +8,7 @@\n //\n // The test is much cleaner if we deduplicate, though.\n \n-// compile-flags: -Z deduplicate-diagnostics=yes\n+// compile-flags: -Z deduplicate-diagnostics=true\n \n #![forbid(\n     unsafe_code,"}, {"sha": "0e487a700b802ee74aa45025bd6ecf12a86ac41e", "filename": "tests/ui/numbers-arithmetic/next-power-of-two-overflow-debug.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fnumbers-arithmetic%2Fnext-power-of-two-overflow-debug.rs?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -1,5 +1,5 @@\n // run-pass\n-// compile-flags: -C debug_assertions=yes\n+// compile-flags: -C debug_assertions=true\n // needs-unwind\n // ignore-emscripten dies with an LLVM error\n "}, {"sha": "a8814ce2852865b2a8f4fb21d519bcb4f4a53e75", "filename": "tests/ui/rfc-2091-track-caller/call-chain.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Frfc-2091-track-caller%2Fcall-chain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b/tests%2Fui%2Frfc-2091-track-caller%2Fcall-chain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Frfc-2091-track-caller%2Fcall-chain.rs?ref=8fc9ed51f04dbb6e3d7f0928ebaea9c8bce6849b", "patch": "@@ -1,6 +1,6 @@\n // run-pass\n // revisions: default mir-opt\n-//[default] compile-flags: -Zinline-mir=no\n+//[default] compile-flags: -Zinline-mir=false\n //[mir-opt] compile-flags: -Zmir-opt-level=4\n \n use std::panic::Location;"}]}