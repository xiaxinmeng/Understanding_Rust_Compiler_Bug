{"sha": "900648cfd68c246ab7774bee1126b770955e3e6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwMDY0OGNmZDY4YzI0NmFiNzc3NGJlZTExMjZiNzcwOTU1ZTNlNmI=", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-02-04T17:41:15Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2021-02-04T17:41:15Z"}, "message": "Adjust global_asm doc test to work on all platforms.\n\nThe cfg isn't actually necessary, since `--emit=metadata` does not\nactually do enough validation for it to fail on any platform. However,\nI feel a little more comfortable leaving it in.\n\nUnhide the feature flag, since I think that is important to display.", "tree": {"sha": "08470564fcc7c23b24a120ca2e1186132f8af3db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/08470564fcc7c23b24a120ca2e1186132f8af3db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/900648cfd68c246ab7774bee1126b770955e3e6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/900648cfd68c246ab7774bee1126b770955e3e6b", "html_url": "https://github.com/rust-lang/rust/commit/900648cfd68c246ab7774bee1126b770955e3e6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/900648cfd68c246ab7774bee1126b770955e3e6b/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dc7746f3343429924531daa6d692eba94b414e55", "url": "https://api.github.com/repos/rust-lang/rust/commits/dc7746f3343429924531daa6d692eba94b414e55", "html_url": "https://github.com/rust-lang/rust/commit/dc7746f3343429924531daa6d692eba94b414e55"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "ce1155a977cd05eb46c79f4a78f62f562d44948f", "filename": "src/doc/unstable-book/src/library-features/global-asm.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/900648cfd68c246ab7774bee1126b770955e3e6b/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fglobal-asm.md", "raw_url": "https://github.com/rust-lang/rust/raw/900648cfd68c246ab7774bee1126b770955e3e6b/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fglobal-asm.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fglobal-asm.md?ref=900648cfd68c246ab7774bee1126b770955e3e6b", "patch": "@@ -25,16 +25,17 @@ conventions of the assembler in your toolchain.\n A simple usage looks like this:\n \n ```rust,ignore (requires-external-file)\n-# #![feature(global_asm)]\n+#![feature(global_asm)]\n # // you also need relevant target_arch cfgs\n global_asm!(include_str!(\"something_neato.s\"));\n ```\n \n And a more complicated usage looks like this:\n \n ```rust,no_run\n-# #![feature(global_asm)]\n-# #![cfg(any(target_arch = \"x86\", target_arch = \"x86_64\"))]\n+#![feature(global_asm)]\n+# #[cfg(any(target_arch=\"x86\", target_arch=\"x86_64\"))]\n+# mod x86 {\n \n pub mod sally {\n     global_asm!(r#\"\n@@ -64,6 +65,7 @@ pub mod harry {\n     #[no_mangle]\n     pub unsafe extern \"C\" fn quux() {}\n }\n+# }\n ```\n \n You may use `global_asm!` multiple times, anywhere in your crate, in"}]}