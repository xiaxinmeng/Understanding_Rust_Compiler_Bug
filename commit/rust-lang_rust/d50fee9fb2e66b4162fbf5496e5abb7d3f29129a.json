{"sha": "d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "node_id": "C_kwDOAAsO6NoAKGQ1MGZlZTlmYjJlNjZiNDE2MmZiZjU0OTZlNWFiYjdkM2YyOTEyOWE", "commit": {"author": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-04-10T11:57:55Z"}, "committer": {"name": "Ben Kimock", "email": "kimockb@gmail.com", "date": "2023-04-10T11:57:55Z"}, "message": "rustup", "tree": {"sha": "7bb888ad6e275594af2ca66ad278c3597f8c736e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7bb888ad6e275594af2ca66ad278c3597f8c736e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "html_url": "https://github.com/rust-lang/rust/commit/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a/comments", "author": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "saethlin", "id": 12105168, "node_id": "MDQ6VXNlcjEyMTA1MTY4", "avatar_url": "https://avatars.githubusercontent.com/u/12105168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saethlin", "html_url": "https://github.com/saethlin", "followers_url": "https://api.github.com/users/saethlin/followers", "following_url": "https://api.github.com/users/saethlin/following{/other_user}", "gists_url": "https://api.github.com/users/saethlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/saethlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saethlin/subscriptions", "organizations_url": "https://api.github.com/users/saethlin/orgs", "repos_url": "https://api.github.com/users/saethlin/repos", "events_url": "https://api.github.com/users/saethlin/events{/privacy}", "received_events_url": "https://api.github.com/users/saethlin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "73702d5e39e812d2e9ad22221462c266c963dd43", "url": "https://api.github.com/repos/rust-lang/rust/commits/73702d5e39e812d2e9ad22221462c266c963dd43", "html_url": "https://github.com/rust-lang/rust/commit/73702d5e39e812d2e9ad22221462c266c963dd43"}], "stats": {"total": 24, "additions": 10, "deletions": 14}, "files": [{"sha": "18ae01a19f914e06962472aefa3c378e44095956", "filename": "src/tools/miri/src/shims/panic.rs", "status": "modified", "additions": 7, "deletions": 13, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a/src%2Ftools%2Fmiri%2Fsrc%2Fshims%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a/src%2Ftools%2Fmiri%2Fsrc%2Fshims%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Fsrc%2Fshims%2Fpanic.rs?ref=d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "patch": "@@ -157,7 +157,10 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriInterpCxExt<'mir, 'tcx> {\n                 &[catch_unwind.data.into(), payload.into()],\n                 None,\n                 // Directly return to caller of `try`.\n-                StackPopCleanup::Goto { ret: Some(catch_unwind.ret), unwind: mir::UnwindAction::Continue },\n+                StackPopCleanup::Goto {\n+                    ret: Some(catch_unwind.ret),\n+                    unwind: mir::UnwindAction::Continue,\n+                },\n             )?;\n \n             // We pushed a new stack frame, the engine should not do any jumping now!\n@@ -211,10 +214,7 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriInterpCxExt<'mir, 'tcx> {\n                     Abi::Rust,\n                     &[index.into(), len.into()],\n                     None,\n-                    StackPopCleanup::Goto {\n-                        ret: None,\n-                        unwind,\n-                    },\n+                    StackPopCleanup::Goto { ret: None, unwind },\n                 )?;\n             }\n             MisalignedPointerDereference { required, found } => {\n@@ -235,19 +235,13 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriInterpCxExt<'mir, 'tcx> {\n                     Abi::Rust,\n                     &[required.into(), found.into()],\n                     None,\n-                    StackPopCleanup::Goto {\n-                        ret: None,\n-                        unwind,\n-                    },\n+                    StackPopCleanup::Goto { ret: None, unwind },\n                 )?;\n             }\n \n             _ => {\n                 // Forward everything else to `panic` lang item.\n-                this.start_panic(\n-                    msg.description(),\n-                    unwind,\n-                )?;\n+                this.start_panic(msg.description(), unwind)?;\n             }\n         }\n         Ok(())"}, {"sha": "c046678f73f5b396c66edad74b7b85db475a98e3", "filename": "src/tools/miri/tests/fail/terminate-terminator.stderr", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fterminate-terminator.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d50fee9fb2e66b4162fbf5496e5abb7d3f29129a/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fterminate-terminator.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fmiri%2Ftests%2Ffail%2Fterminate-terminator.stderr?ref=d50fee9fb2e66b4162fbf5496e5abb7d3f29129a", "patch": "@@ -1,3 +1,5 @@\n+warning: You have explicitly enabled MIR optimizations, overriding Miri's default which is to completely disable them. Any optimizations may hide UB that Miri would otherwise detect, and it is not necessarily possible to predict what kind of UB will be missed. If you are enabling optimizations to make Miri run faster, we advise using cfg(miri) to shrink your workload instead. The performance benefit of enabling MIR optimizations is usually marginal at best.\n+\n thread 'main' panicked at 'explicit panic', $DIR/terminate-terminator.rs:LL:CC\n note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\n error: abnormal termination: panic in a function that cannot unwind\n@@ -23,5 +25,5 @@ LL |     panic_abort();\n \n note: some details are omitted, run with `MIRIFLAGS=-Zmiri-backtrace=full` for a verbose backtrace\n \n-error: aborting due to previous error\n+error: aborting due to previous error; 1 warning emitted\n "}]}