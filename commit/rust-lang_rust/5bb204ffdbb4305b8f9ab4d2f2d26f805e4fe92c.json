{"sha": "5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjViYjIwNGZmZGJiNDMwNWI4ZjlhYjRkMmYyZDI2ZjgwNWU0ZmU5MmM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-02-20T23:37:44Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2014-02-21T05:43:25Z"}, "message": "Add a Travis-CI configuration for the repo\n\nTravis CI provides an easy-to-use continuous integration infrastructure for\ngithub repos to use. Travis will automatically test all PRs which are opened\nagainst the rust repository, informing PR owners of the test results.\n\nI believe that this will be a very convenient piece of infrastructure as we'll\nbe able to reduce the load on bors quite a bit. In theory all PRs opened have\nhad the full test suite run against them, but unfortunately this is rarely the\ncase (I'm a prime suspect). Travis will be able to provide easy and relatively\nquick (~30min) feedback for PRs. By ensuring fewer failures on bors, we can\nhopefully feed more successful jobs to bors.\n\nOverall, I expect this to be very helpful for new contributors as well as\nregular contributors as it's another layer of tests being run which will\nhopefully catch things sooner. One of the most convenient parts about using\nTravis is that there's very little burden in terms of maintenance, and if things\ngo wrong we can easily turn travis completely off.\n\nNote that this is *not* the metric by which a PR will be merged with. Using\ntravis will purely be another source for running tests, we will continue to gate\nall PRs on bors.", "tree": {"sha": "576e7042c422e33d17ac225c8e5f9882f85213cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/576e7042c422e33d17ac225c8e5f9882f85213cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "html_url": "https://github.com/rust-lang/rust/commit/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ccd25e572d62e008e0be275c2120d166c48817b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/ccd25e572d62e008e0be275c2120d166c48817b6", "html_url": "https://github.com/rust-lang/rust/commit/ccd25e572d62e008e0be275c2120d166c48817b6"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "a443581b58e9f896c03946dc17276b900169de49", "filename": ".travis.yml", "status": "added", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "patch": "@@ -0,0 +1,53 @@\n+# Use something that's not 'ruby' so we don't set up things like\n+# RVM/bundler/ruby and whatnot. Right now 'rust' isn't a language on travis and\n+# it treats unknown languages as ruby-like I believe.\n+language: c\n+\n+# Before we start doing anything, install the latest stock LLVM. These are\n+# maintained by LLVM, and more information can be found at llvm.org/apt.\n+#\n+# Right now, the highest version is 3.5, and our SVN version is roughly aligned\n+# with the 3.5 API (hurray!)\n+install:\n+  - sudo sh -c \"echo 'deb http://llvm.org/apt/precise/ llvm-toolchain-precise main' >> /etc/apt/sources.list\"\n+  - sudo sh -c \"echo 'deb-src http://llvm.org/apt/precise/ llvm-toolchain-precise main' >> /etc/apt/sources.list\"\n+  - sudo sh -c \"echo 'deb http://ppa.launchpad.net/ubuntu-toolchain-r/test/ubuntu precise main' >> /etc/apt/sources.list\"\n+  - wget -O - http://llvm.org/apt/llvm-snapshot.gpg.key | sudo apt-key add -\n+  - sudo apt-get update -qq\n+  - sudo apt-get install -y --force-yes -qq llvm-3.5 llvm-3.5-dev clang-3.5 lldb-3.5\n+\n+# All of the llvm tools are suffixed with \"-3.5\" which we don't want, so symlink\n+# them all into a local directory and just use that\n+#\n+# FIXME: this shouldn't update the src/llvm sub-repo, that takes about a minute\n+#        it's gotta download so much stuff.\n+before_script:\n+  - mkdir -p local-llvm/bin\n+  - ln -nsf /usr/bin/llvm-config-3.5 local-llvm/bin/llvm-config\n+  - ln -nsf /usr/bin/llvm-mc-3.5 local-llvm/bin/llvm-mc\n+  - ln -nsf /usr/bin/llvm-as-3.5 local-llvm/bin/llvm-as\n+  - ln -nsf /usr/bin/llvm-dis-3.5 local-llvm/bin/llvm-dis\n+  - ln -nsf /usr/bin/llc-3.5 local-llvm/bin/llc\n+  - ln -nsf /usr/include/llvm-3.5 local-llvm/include\n+  - ./configure --disable-optimize-tests --llvm-root=`pwd`/local-llvm --enable-fast-make --enable-clang\n+\n+# Tidy everything up first, then build a few things, and then run a few tests.\n+# Note that this is meant to run in a \"fairly small\" amount of time, so this\n+# isn't exhaustive at all.\n+#\n+# The \"-lffi and -lncurses\" are required for LLVM. The LLVM that rust builds\n+# manually disables bringing in these two libraries, but the stock LLVM was\n+# apparently built with these options. We provide these options when building so\n+# the `rustc` binary can successfully link.\n+script:\n+  - make tidy\n+  - RUSTFLAGS=\"-C link-args='-lffi -lncurses'\" make -j4 rustc-stage1\n+  - make check-stage1-std check-stage1-rpass check-stage1-cfail check-stage1-rfail\n+\n+env:\n+  - NO_BENCH=1\n+\n+# We track this ourselves, and in theory we don't have to update the LLVM repo\n+# (but sadly we do right now anyway).\n+git:\n+  submodules: false"}, {"sha": "c8763899269ccefbcbbe98e62e9969cd5a5d1a03", "filename": "src/test/compile-fail/gated-phase.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c/src%2Ftest%2Fcompile-fail%2Fgated-phase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c/src%2Ftest%2Fcompile-fail%2Fgated-phase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fgated-phase.rs?ref=5bb204ffdbb4305b8f9ab4d2f2d26f805e4fe92c", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n // aux-build:macro_crate_test.rs\n+// ignore-stage1\n \n #[phase(syntax)]\n //~^ ERROR compile time crate loading is experimental and possibly buggy"}]}