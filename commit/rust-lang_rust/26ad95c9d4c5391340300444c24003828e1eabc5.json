{"sha": "26ad95c9d4c5391340300444c24003828e1eabc5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI2YWQ5NWM5ZDRjNTM5MTM0MDMwMDQ0NGMyNDAwMzgyOGUxZWFiYzU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-05-21T22:31:45Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-06-02T21:26:46Z"}, "message": "Add attributes for trait and methods as well", "tree": {"sha": "e3674c21ee171528dd0f2c29c9755adbb6dd5cbe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e3674c21ee171528dd0f2c29c9755adbb6dd5cbe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/26ad95c9d4c5391340300444c24003828e1eabc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/26ad95c9d4c5391340300444c24003828e1eabc5", "html_url": "https://github.com/rust-lang/rust/commit/26ad95c9d4c5391340300444c24003828e1eabc5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/26ad95c9d4c5391340300444c24003828e1eabc5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ecf12bf0eb8386626ccdb5f721a7183ccc4eba6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ecf12bf0eb8386626ccdb5f721a7183ccc4eba6", "html_url": "https://github.com/rust-lang/rust/commit/4ecf12bf0eb8386626ccdb5f721a7183ccc4eba6"}], "stats": {"total": 66, "additions": 53, "deletions": 13}, "files": [{"sha": "5377cd9a39143a4faeb40298897cc5b595aa6c34", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=26ad95c9d4c5391340300444c24003828e1eabc5", "patch": "@@ -3055,6 +3055,7 @@ fn render_assoc_item(w: &mut fmt::Formatter,\n         } else {\n             (0, true)\n         };\n+        render_attributes(w, meth)?;\n         write!(w, \"{}{}{}{}fn <a href='{href}' class='fnname'>{name}</a>\\\n                    {generics}{decl}{where_clause}\",\n                VisSpace(&meth.visibility),"}, {"sha": "0c937759120ef47e39df76218cffe5b6ab9cb6fd", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 8, "deletions": 10, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=26ad95c9d4c5391340300444c24003828e1eabc5", "patch": "@@ -2041,16 +2041,16 @@\n \n     autoCollapseAllImpls(getPageId());\n \n-    function createToggleWrapper() {\n+    function createToggleWrapper(tog) {\n         var span = document.createElement('span');\n         span.className = 'toggle-label';\n         span.style.display = 'none';\n         span.innerHTML = '&nbsp;Expand&nbsp;attributes';\n-        toggle.appendChild(span);\n+        tog.appendChild(span);\n \n         var wrapper = document.createElement('div');\n         wrapper.className = 'toggle-wrapper toggle-attributes';\n-        wrapper.appendChild(toggle);\n+        wrapper.appendChild(tog);\n         return wrapper;\n     }\n \n@@ -2078,13 +2078,11 @@\n         });\n     }\n \n-    onEach(document.getElementById('main').getElementsByTagName('pre'), function(e) {\n-        onEach(e.getElementsByClassName('attributes'), function(i_e) {\n-            i_e.parentNode.insertBefore(createToggleWrapper(), i_e);\n-            if (getCurrentValue(\"rustdoc-item-attributes\") !== \"false\") {\n-                collapseDocs(i_e.previousSibling.childNodes[0], \"toggle\");\n-            }\n-        });\n+    onEach(document.getElementById('main').getElementsByClassName('attributes'), function(i_e) {\n+        i_e.parentNode.insertBefore(createToggleWrapper(toggle.cloneNode(true)), i_e);\n+        if (getCurrentValue(\"rustdoc-item-attributes\") !== \"false\") {\n+            collapseDocs(i_e.previousSibling.childNodes[0], \"toggle\");\n+        }\n     });\n \n     onEach(document.getElementsByClassName('rust-example-rendered'), function(e) {"}, {"sha": "867b1e86aa2ca62cab970bb167201b515bce4553", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=26ad95c9d4c5391340300444c24003828e1eabc5", "patch": "@@ -771,7 +771,7 @@ h3 > .collapse-toggle, h4 > .collapse-toggle {\n \n .toggle-wrapper {\n \tposition: relative;\n-\tmargin-top: 5px;\n+\tmargin-top: 0;\n }\n \n .toggle-wrapper.collapsed {\n@@ -854,10 +854,19 @@ span.since {\n \n .attributes {\n \tdisplay: block;\n-\tmargin: 0px 0px 0px 30px !important;\n+\tmargin-top: 0px !important;\n+\tmargin-right: 0px;\n+\tmargin-bottom: 0px !important;\n+\tmargin-left: 30px;\n }\n .toggle-attributes.collapsed {\n-\tmargin-bottom: 5px;\n+\tmargin-bottom: 0;\n+}\n+.impl-items > .toggle-attributes {\n+\tmargin-left: 20px;\n+}\n+.impl-items .attributes {\n+\tfont-weight: 500;\n }\n \n :target > code {"}, {"sha": "00d10408b4c91346b5dce57e51542c219a78697d", "filename": "src/test/rustdoc/trait-attributes.rs", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Ftest%2Frustdoc%2Ftrait-attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/26ad95c9d4c5391340300444c24003828e1eabc5/src%2Ftest%2Frustdoc%2Ftrait-attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftrait-attributes.rs?ref=26ad95c9d4c5391340300444c24003828e1eabc5", "patch": "@@ -0,0 +1,32 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+#![crate_name = \"foo\"]\n+\n+// ignore-tidy-linelength\n+\n+pub trait Foo {\n+    // @has foo/trait.Foo.html '//h3[@id=\"tymethod.foo\"]//div[@class=\"docblock attributes\"]' '#[must_use]'\n+    #[must_use]\n+    fn foo();\n+}\n+\n+#[must_use]\n+pub struct Bar;\n+\n+impl Bar {\n+    // @has foo/struct.Bar.html '//h4[@id=\"method.bar\"]//div[@class=\"docblock attributes\"]' '#[must_use]'\n+    #[must_use]\n+    pub fn bar() {}\n+\n+    // @has foo/struct.Bar.html '//h4[@id=\"method.bar2\"]//div[@class=\"docblock attributes\"]' '#[must_use]'\n+    #[must_use]\n+    pub fn bar2() {}\n+}"}]}