{"sha": "9e7ca80c8220136500dbe90d4e0925c22ab59c62", "node_id": "C_kwDOAAsO6NoAKDllN2NhODBjODIyMDEzNjUwMGRiZTkwZDRlMDkyNWMyMmFiNTljNjI", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2022-07-03T07:08:10Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2022-07-03T07:09:35Z"}, "message": "Bump cargo_metadata", "tree": {"sha": "2bde3d15a103c8801e49b1345681553d76451ba4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2bde3d15a103c8801e49b1345681553d76451ba4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9e7ca80c8220136500dbe90d4e0925c22ab59c62", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9e7ca80c8220136500dbe90d4e0925c22ab59c62", "html_url": "https://github.com/rust-lang/rust/commit/9e7ca80c8220136500dbe90d4e0925c22ab59c62", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9e7ca80c8220136500dbe90d4e0925c22ab59c62/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2d3f0b48419ad936b44b5e1bc30b7f60367067f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/2d3f0b48419ad936b44b5e1bc30b7f60367067f3", "html_url": "https://github.com/rust-lang/rust/commit/2d3f0b48419ad936b44b5e1bc30b7f60367067f3"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "eb5d192abb339095ab4e08b0097e0e29799627b5", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9e7ca80c8220136500dbe90d4e0925c22ab59c62/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/9e7ca80c8220136500dbe90d4e0925c22ab59c62/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=9e7ca80c8220136500dbe90d4e0925c22ab59c62", "patch": "@@ -132,9 +132,9 @@ dependencies = [\n \n [[package]]\n name = \"cargo_metadata\"\n-version = \"0.14.2\"\n+version = \"0.15.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"4acbb09d9ee8e23699b9634375c72795d095bf268439da88562cf9b501f181fa\"\n+checksum = \"3abb7553d5b9b8421c6de7cb02606ff15e0c6eea7d8eadd75ef013fd636bec36\"\n dependencies = [\n  \"camino\",\n  \"cargo-platform\","}, {"sha": "d3d180ece512a4a72f3d9dd15d2cb3643391fe44", "filename": "crates/flycheck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fflycheck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fflycheck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fflycheck%2FCargo.toml?ref=9e7ca80c8220136500dbe90d4e0925c22ab59c62", "patch": "@@ -12,7 +12,7 @@ doctest = false\n [dependencies]\n crossbeam-channel = \"0.5.5\"\n tracing = \"0.1.35\"\n-cargo_metadata = \"0.14.2\"\n+cargo_metadata = \"0.15.0\"\n serde = { version = \"1.0.137\", features = [\"derive\"] }\n serde_json = \"1.0.81\"\n jod-thread = \"0.1.2\""}, {"sha": "684477191b2767cabecd620f201cbdc2d0d26a77", "filename": "crates/proc-macro-test/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproc-macro-test%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproc-macro-test%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproc-macro-test%2FCargo.toml?ref=9e7ca80c8220136500dbe90d4e0925c22ab59c62", "patch": "@@ -12,4 +12,4 @@ doctest = false\n [build-dependencies]\n proc-macro-test-impl = { path = \"imp\", version = \"0.0.0\" }\n toolchain = { path = \"../toolchain\", version = \"0.0.0\" }\n-cargo_metadata = \"0.14.2\"\n+cargo_metadata = \"0.15.0\""}, {"sha": "84b239b3e29241225881d62c0e764a949fda2f2c", "filename": "crates/project-model/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproject-model%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproject-model%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject-model%2FCargo.toml?ref=9e7ca80c8220136500dbe90d4e0925c22ab59c62", "patch": "@@ -12,7 +12,7 @@ doctest = false\n [dependencies]\n tracing = \"0.1.35\"\n rustc-hash = \"1.1.0\"\n-cargo_metadata = \"0.14.2\"\n+cargo_metadata = \"0.15.0\"\n semver = \"1.0.10\"\n serde = { version = \"1.0.137\", features = [\"derive\"] }\n serde_json = \"1.0.81\""}, {"sha": "597880c2ca214c62fde565e39643a6998ac5baf8", "filename": "crates/project-model/src/cargo_workspace.rs", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproject-model%2Fsrc%2Fcargo_workspace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e7ca80c8220136500dbe90d4e0925c22ab59c62/crates%2Fproject-model%2Fsrc%2Fcargo_workspace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fproject-model%2Fsrc%2Fcargo_workspace.rs?ref=9e7ca80c8220136500dbe90d4e0925c22ab59c62", "patch": "@@ -318,10 +318,15 @@ impl CargoWorkspace {\n                 ..\n             } = meta_pkg;\n             let meta = from_value::<PackageMetadata>(metadata.clone()).unwrap_or_default();\n-            let edition = edition.parse::<Edition>().unwrap_or_else(|err| {\n-                tracing::error!(\"Failed to parse edition {}\", err);\n-                Edition::CURRENT\n-            });\n+            let edition = match edition {\n+                cargo_metadata::Edition::E2015 => Edition::Edition2015,\n+                cargo_metadata::Edition::E2018 => Edition::Edition2018,\n+                cargo_metadata::Edition::E2021 => Edition::Edition2021,\n+                _ => {\n+                    tracing::error!(\"Unsupported edition `{:?}`\", edition);\n+                    Edition::CURRENT\n+                }\n+            };\n             // We treat packages without source as \"local\" packages. That includes all members of\n             // the current workspace, as well as any path dependency outside the workspace.\n             let is_local = meta_pkg.source.is_none();"}]}