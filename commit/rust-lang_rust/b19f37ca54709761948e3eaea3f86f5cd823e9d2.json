{"sha": "b19f37ca54709761948e3eaea3f86f5cd823e9d2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxOWYzN2NhNTQ3MDk3NjE5NDhlM2VhZWEzZjg2ZjVjZDgyM2U5ZDI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-07-16T08:08:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-16T08:08:11Z"}, "message": "Rollup merge of #87167 - GuillaumeGomez:sidebar-display-mobile, r=notriddle\n\nFix sidebar display on small devices\n\nPart of #87059.\n\nInstead of hiding the sidebar on small devices, we instead move it out of the viewport so that it remains \"visible\" to our text only users.\n\nCould you confirm it works for you `@ahicks92` and `@DataTriny` please? You can give it a try at [this URL](https://guillaume-gomez.fr/rustdoc-test/test_docs/index.html).\n\nr? `@notriddle`", "tree": {"sha": "a8f726384f3935f18e8d68a6db1af1b19fd37a5b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a8f726384f3935f18e8d68a6db1af1b19fd37a5b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b19f37ca54709761948e3eaea3f86f5cd823e9d2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg8T5rCRBK7hj4Ov3rIwAAwqgIALE/iS8QK35Ii0BTLA0Tox9i\nfLHARcLUttWHRxD86JnrxGLsFi9bo/RR5y3ZRohPhkm38g6E/l3EGQ54jSI8MpiI\ndxY/cS8IbC23INXOP9wc+a2q1Gp5gsKXlfByski6XN3MH4XPcMfDinFgPnhV53Qy\n/DRByjKLLryqcWyWHCO0UnwmuJtp5L+6VVgQMZ3CSvCfpHIcg4F87UGrVciOfKE+\nFFXOlOwR5oIlui5JU4WixdmBQZvIGjfNYHXjKC2MJm8n0S+A7OIojv/Xzf5SVr0w\nhaac6RF1/fN8Zxabz12G8Icl26hR/5QSb6Ilz1cm0qI1AWXUZqMhX+1sAtRcX/c=\n=K3nS\n-----END PGP SIGNATURE-----\n", "payload": "tree a8f726384f3935f18e8d68a6db1af1b19fd37a5b\nparent a547abe929b750971f5b909149a0be2a3ec7c366\nparent 868ffd03ed2b52d23eeaa9bf48857dde5083c18d\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1626422891 +0200\ncommitter GitHub <noreply@github.com> 1626422891 +0200\n\nRollup merge of #87167 - GuillaumeGomez:sidebar-display-mobile, r=notriddle\n\nFix sidebar display on small devices\n\nPart of #87059.\n\nInstead of hiding the sidebar on small devices, we instead move it out of the viewport so that it remains \"visible\" to our text only users.\n\nCould you confirm it works for you `@ahicks92` and `@DataTriny` please? You can give it a try at [this URL](https://guillaume-gomez.fr/rustdoc-test/test_docs/index.html).\n\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b19f37ca54709761948e3eaea3f86f5cd823e9d2", "html_url": "https://github.com/rust-lang/rust/commit/b19f37ca54709761948e3eaea3f86f5cd823e9d2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b19f37ca54709761948e3eaea3f86f5cd823e9d2/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a547abe929b750971f5b909149a0be2a3ec7c366", "url": "https://api.github.com/repos/rust-lang/rust/commits/a547abe929b750971f5b909149a0be2a3ec7c366", "html_url": "https://github.com/rust-lang/rust/commit/a547abe929b750971f5b909149a0be2a3ec7c366"}, {"sha": "868ffd03ed2b52d23eeaa9bf48857dde5083c18d", "url": "https://api.github.com/repos/rust-lang/rust/commits/868ffd03ed2b52d23eeaa9bf48857dde5083c18d", "html_url": "https://github.com/rust-lang/rust/commit/868ffd03ed2b52d23eeaa9bf48857dde5083c18d"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "89dbc4d825f3d785b1085e67ee22a9a6cfa4e82c", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b19f37ca54709761948e3eaea3f86f5cd823e9d2/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/b19f37ca54709761948e3eaea3f86f5cd823e9d2/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=b19f37ca54709761948e3eaea3f86f5cd823e9d2", "patch": "@@ -1634,15 +1634,18 @@ details.undocumented[open] > summary::before {\n \t\tdisplay: none;\n \t}\n \n+\t/* We do NOT hide this element so that alternative device readers still have this information\n+\t   available. */\n \t.sidebar-elems {\n \t\tposition: fixed;\n \t\tz-index: 1;\n-\t\tleft: 0;\n \t\ttop: 45px;\n \t\tbottom: 0;\n+\t\twidth: 246px;\n+\t\t/* We move the sidebar to the left by its own width so it doesn't appear. */\n+\t\tleft: -246px;\n \t\toverflow-y: auto;\n \t\tborder-right: 1px solid;\n-\t\tdisplay: none;\n \t}\n \n \t.sidebar > .block.version {\n@@ -1730,8 +1733,7 @@ details.undocumented[open] > summary::before {\n \t}\n \n \t.show-it {\n-\t\tdisplay: block;\n-\t\twidth: 246px;\n+\t\tleft: 0;\n \t}\n \n \t.show-it > .block.items {"}, {"sha": "9a1442e48a9ea44c4ba7af11debb92b589050257", "filename": "src/test/rustdoc-gui/sidebar-mobile.goml", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/b19f37ca54709761948e3eaea3f86f5cd823e9d2/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/b19f37ca54709761948e3eaea3f86f5cd823e9d2/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-mobile.goml?ref=b19f37ca54709761948e3eaea3f86f5cd823e9d2", "patch": "@@ -0,0 +1,10 @@\n+// This test ensure that the sidebar isn't \"hidden\" on mobile but instead moved out of the viewport.\n+// This is especially important for devices for \"text-first\" content (like for users with\n+// sight issues).\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n+// Switching to \"mobile view\" by reducing the width to 600px.\n+size: (600, 600)\n+assert-css: (\".sidebar-elems\", {\"display\": \"block\", \"left\": \"-246px\"})\n+// Opening the sidebar menu.\n+click: \".sidebar-menu\"\n+assert-css: (\".sidebar-elems\", {\"display\": \"block\", \"left\": \"0px\"})"}]}