{"sha": "b93203ff07f771b44f5db2188e8421afdbea9a03", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5MzIwM2ZmMDdmNzcxYjQ0ZjVkYjIxODhlODQyMWFmZGJlYTlhMDM=", "commit": {"author": {"name": "Tyler Mandry", "email": "tmandry@gmail.com", "date": "2019-10-11T22:10:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-10-11T22:10:01Z"}, "message": "Rollup merge of #65321 - Mark-Simulacrum:remove-linker-no-utf8-test, r=nikomatsakis\n\nRemove painful test that is not pulling its weight\n\nResearch suggests that we are not properly testing this case anyway, and\neven if we were, it is unlikely that we will regress here -- or, perhaps\nmore accurately, if we do, I am uncertain that we care too much. It\ndefinitely seems like an edge case, and one that is particularly\nunlikely to occur as time goes on.\n\nFixes https://github.com/rust-lang/rust/issues/63520", "tree": {"sha": "b78e1995035efe502647d44cae420df6ee22c777", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b78e1995035efe502647d44cae420df6ee22c777"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b93203ff07f771b44f5db2188e8421afdbea9a03", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdoP25CRBK7hj4Ov3rIwAAdHIIAD5U4QQ3yeGLKm7rGzMJUXCq\nX0NzL6vxbkpXxe6feVQMgOeSBH0UtbnQijA1aNVBREqAFoCNvKpYxGMC/rEzXGBK\nHN5o6B/AHuTmhWeo3tbweJm5gNJgphr27y1YRVnxzhOF3p2VL1cDOF0bpnmEm+4E\nkI71DHf/PUHDVjo/MD+cCmfxu6vioiIIH8CIGX7tqsIQE+fG+GysJiufLr2i8zYG\nYb5ybl0Y4sfIjtPlkG9HZ9t7QuocvE3MKSnzwFYQ0Tp9h8b6D8KFfeivBMOSSn+Z\nZ6N9YkTNkVcb37XhU5LPP1VFU5bmSacwSS29zK6ZqsE9mAfSBraV0zNp2BgkFB4=\n=HSdx\n-----END PGP SIGNATURE-----\n", "payload": "tree b78e1995035efe502647d44cae420df6ee22c777\nparent c8e3c517828e2b0c3695140825e6f4ac497c0777\nparent 000fe63b6fc57b09828930cacbab20c2ee6e6d15\nauthor Tyler Mandry <tmandry@gmail.com> 1570831801 -0700\ncommitter GitHub <noreply@github.com> 1570831801 -0700\n\nRollup merge of #65321 - Mark-Simulacrum:remove-linker-no-utf8-test, r=nikomatsakis\n\nRemove painful test that is not pulling its weight\n\nResearch suggests that we are not properly testing this case anyway, and\neven if we were, it is unlikely that we will regress here -- or, perhaps\nmore accurately, if we do, I am uncertain that we care too much. It\ndefinitely seems like an edge case, and one that is particularly\nunlikely to occur as time goes on.\n\nFixes https://github.com/rust-lang/rust/issues/63520\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b93203ff07f771b44f5db2188e8421afdbea9a03", "html_url": "https://github.com/rust-lang/rust/commit/b93203ff07f771b44f5db2188e8421afdbea9a03", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b93203ff07f771b44f5db2188e8421afdbea9a03/comments", "author": {"login": "tmandry", "id": 2280544, "node_id": "MDQ6VXNlcjIyODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/2280544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmandry", "html_url": "https://github.com/tmandry", "followers_url": "https://api.github.com/users/tmandry/followers", "following_url": "https://api.github.com/users/tmandry/following{/other_user}", "gists_url": "https://api.github.com/users/tmandry/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmandry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmandry/subscriptions", "organizations_url": "https://api.github.com/users/tmandry/orgs", "repos_url": "https://api.github.com/users/tmandry/repos", "events_url": "https://api.github.com/users/tmandry/events{/privacy}", "received_events_url": "https://api.github.com/users/tmandry/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c8e3c517828e2b0c3695140825e6f4ac497c0777", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8e3c517828e2b0c3695140825e6f4ac497c0777", "html_url": "https://github.com/rust-lang/rust/commit/c8e3c517828e2b0c3695140825e6f4ac497c0777"}, {"sha": "000fe63b6fc57b09828930cacbab20c2ee6e6d15", "url": "https://api.github.com/repos/rust-lang/rust/commits/000fe63b6fc57b09828930cacbab20c2ee6e6d15", "html_url": "https://github.com/rust-lang/rust/commit/000fe63b6fc57b09828930cacbab20c2ee6e6d15"}], "stats": {"total": 39, "additions": 0, "deletions": 39}, "files": [{"sha": "b47ce17ec8baa2d64292a34532c86b1c15535631", "filename": "src/test/run-make-fulldeps/linker-output-non-utf8/Makefile", "status": "removed", "additions": 0, "deletions": 23, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2FMakefile?ref=c8e3c517828e2b0c3695140825e6f4ac497c0777", "patch": "@@ -1,23 +0,0 @@\n--include ../tools.mk\n-\n-# Make sure we don't ICE if the linker prints a non-UTF-8 error message.\n-\n-# ignore-windows\n-#\n-# This does not work in its current form on windows, possibly due to\n-# gcc bugs or something about valid Windows paths.  See issue #29151\n-# for more information.\n-\n-# ignore-macos\n-#\n-# This also does not work on Apple APFS due to the filesystem requiring\n-# valid UTF-8 paths.\n-\n-# The zzz it to allow humans to tab complete or glob this thing.\n-bad_dir := $(TMPDIR)/zzz$$'\\xff'\n-\n-all:\n-\t$(RUSTC) library.rs\n-\tmkdir $(bad_dir)\n-\tmv $(TMPDIR)/liblibrary.a $(bad_dir)\n-\t$(RUSTC) -L $(bad_dir) exec.rs 2>&1 | $(CGREP) this_symbol_not_defined"}, {"sha": "6864018d64e97894a0ab0c107d18608d3901ae39", "filename": "src/test/run-make-fulldeps/linker-output-non-utf8/exec.rs", "status": "removed", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Fexec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Fexec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Fexec.rs?ref=c8e3c517828e2b0c3695140825e6f4ac497c0777", "patch": "@@ -1,6 +0,0 @@\n-#[link(name=\"library\")]\n-extern \"C\" {\n-    fn foo();\n-}\n-\n-fn main() { unsafe { foo(); } }"}, {"sha": "6689a82fa2c4947e0114f0f66879c02ef86eb148", "filename": "src/test/run-make-fulldeps/linker-output-non-utf8/library.rs", "status": "removed", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Flibrary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8e3c517828e2b0c3695140825e6f4ac497c0777/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Flibrary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flinker-output-non-utf8%2Flibrary.rs?ref=c8e3c517828e2b0c3695140825e6f4ac497c0777", "patch": "@@ -1,10 +0,0 @@\n-#![crate_type = \"staticlib\"]\n-\n-extern \"C\" {\n-    fn this_symbol_not_defined();\n-}\n-\n-#[no_mangle]\n-pub extern \"C\" fn foo() {\n-    unsafe { this_symbol_not_defined(); }\n-}"}]}