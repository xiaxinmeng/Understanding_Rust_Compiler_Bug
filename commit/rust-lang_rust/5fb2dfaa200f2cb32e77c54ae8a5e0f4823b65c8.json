{"sha": "5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVmYjJkZmFhMjAwZjJjYjMyZTc3YzU0YWU4YTVlMGY0ODIzYjY1Yzg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-25T12:10:56Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-25T12:10:56Z"}, "message": "auto merge of #16740 : alexcrichton/rust/issue-16725, r=pcwalton\n\nCloses #16725", "tree": {"sha": "d076d1055023820ff815ad82d58f4d046a0f8490", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d076d1055023820ff815ad82d58f4d046a0f8490"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "html_url": "https://github.com/rust-lang/rust/commit/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b3e43d2a47ecf4908a912c1144942e5216703ea", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b3e43d2a47ecf4908a912c1144942e5216703ea", "html_url": "https://github.com/rust-lang/rust/commit/0b3e43d2a47ecf4908a912c1144942e5216703ea"}, {"sha": "1c76d559c37bf313a31e260b986255cc45912014", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c76d559c37bf313a31e260b986255cc45912014", "html_url": "https://github.com/rust-lang/rust/commit/1c76d559c37bf313a31e260b986255cc45912014"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "ffa4a1b5bf0838f62a856c0fe92ce4732708596a", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "patch": "@@ -1371,6 +1371,7 @@ fn encode_info_for_foreign_item(ecx: &EncodeContext,\n \n     rbml_w.start_tag(tag_items_data_item);\n     encode_def_id(rbml_w, local_def(nitem.id));\n+    encode_visibility(rbml_w, nitem.vis);\n     match nitem.node {\n       ForeignItemFn(..) => {\n         encode_family(rbml_w, style_fn_family(NormalFn));"}, {"sha": "500475091e0d3f883d650f83f29b120c30e0cf07", "filename": "src/test/auxiliary/foreign_lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fauxiliary%2Fforeign_lib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fauxiliary%2Fforeign_lib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fforeign_lib.rs?ref=5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "patch": "@@ -15,6 +15,6 @@ pub mod rustrt {\n \n     #[link(name = \"rust_test_helpers\")]\n     extern {\n-        fn rust_get_test_int() -> libc::intptr_t;\n+        pub fn rust_get_test_int() -> libc::intptr_t;\n     }\n }"}, {"sha": "7f388c13e15a8a7351d1a6d3d0439c99e8bc1f27", "filename": "src/test/auxiliary/issue-16725.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fauxiliary%2Fissue-16725.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fauxiliary%2Fissue-16725.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fissue-16725.rs?ref=5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "patch": "@@ -0,0 +1,14 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+extern {\n+    fn bar();\n+}\n+"}, {"sha": "f70d88a41cd1f5e02d09c5de65749771f69cf43c", "filename": "src/test/compile-fail/issue-16725.rs", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fcompile-fail%2Fissue-16725.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8/src%2Ftest%2Fcompile-fail%2Fissue-16725.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-16725.rs?ref=5fb2dfaa200f2cb32e77c54ae8a5e0f4823b65c8", "patch": "@@ -0,0 +1,19 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:issue-16725.rs\n+\n+extern crate foo = \"issue-16725\";\n+\n+fn main() {\n+    unsafe { foo::bar(); }\n+    //~^ ERROR: function `bar` is private\n+}\n+"}]}