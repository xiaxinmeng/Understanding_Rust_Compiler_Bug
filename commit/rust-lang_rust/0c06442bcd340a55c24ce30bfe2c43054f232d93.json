{"sha": "0c06442bcd340a55c24ce30bfe2c43054f232d93", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBjMDY0NDJiY2QzNDBhNTVjMjRjZTMwYmZlMmM0MzA1NGYyMzJkOTM=", "commit": {"author": {"name": "Liigo Zhuang", "email": "com.liigo@gmail.com", "date": "2014-12-23T12:22:50Z"}, "committer": {"name": "Liigo Zhuang", "email": "com.liigo@gmail.com", "date": "2015-01-21T13:31:09Z"}, "message": "display plain summary line in javascript", "tree": {"sha": "3f40c87931c908fe155b0652796d1d12fd97fd4b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f40c87931c908fe155b0652796d1d12fd97fd4b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c06442bcd340a55c24ce30bfe2c43054f232d93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c06442bcd340a55c24ce30bfe2c43054f232d93", "html_url": "https://github.com/rust-lang/rust/commit/0c06442bcd340a55c24ce30bfe2c43054f232d93", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c06442bcd340a55c24ce30bfe2c43054f232d93/comments", "author": {"login": "liigo", "id": 346530, "node_id": "MDQ6VXNlcjM0NjUzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/346530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liigo", "html_url": "https://github.com/liigo", "followers_url": "https://api.github.com/users/liigo/followers", "following_url": "https://api.github.com/users/liigo/following{/other_user}", "gists_url": "https://api.github.com/users/liigo/gists{/gist_id}", "starred_url": "https://api.github.com/users/liigo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liigo/subscriptions", "organizations_url": "https://api.github.com/users/liigo/orgs", "repos_url": "https://api.github.com/users/liigo/repos", "events_url": "https://api.github.com/users/liigo/events{/privacy}", "received_events_url": "https://api.github.com/users/liigo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "liigo", "id": 346530, "node_id": "MDQ6VXNlcjM0NjUzMA==", "avatar_url": "https://avatars.githubusercontent.com/u/346530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liigo", "html_url": "https://github.com/liigo", "followers_url": "https://api.github.com/users/liigo/followers", "following_url": "https://api.github.com/users/liigo/following{/other_user}", "gists_url": "https://api.github.com/users/liigo/gists{/gist_id}", "starred_url": "https://api.github.com/users/liigo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liigo/subscriptions", "organizations_url": "https://api.github.com/users/liigo/orgs", "repos_url": "https://api.github.com/users/liigo/repos", "events_url": "https://api.github.com/users/liigo/events{/privacy}", "received_events_url": "https://api.github.com/users/liigo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58a257bcdf096c53c0ca75ee1ca1024b51481865", "url": "https://api.github.com/repos/rust-lang/rust/commits/58a257bcdf096c53c0ca75ee1ca1024b51481865", "html_url": "https://github.com/rust-lang/rust/commit/58a257bcdf096c53c0ca75ee1ca1024b51481865"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "7e1e2ae77655d27be62cd45af0955a436dffeb9d", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 13, "deletions": 1, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/0c06442bcd340a55c24ce30bfe2c43054f232d93/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/0c06442bcd340a55c24ce30bfe2c43054f232d93/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=0c06442bcd340a55c24ce30bfe2c43054f232d93", "patch": "@@ -669,6 +669,18 @@\n             search();\n         }\n \n+        function plainSummaryLine(markdown) {\n+            var str = markdown.replace(/\\n/g, ' ')\n+            str = str.replace(/</g, \"&lt;\")\n+            str = str.replace(/>/g, \"&gt;\")\n+            str = str.replace(/\"/g, \"&quot;\")\n+            str = str.replace(/'/g, \"&#39;\")\n+            str = str.replace(/^#+? (.+?)/, \"$1\")\n+            str = str.replace(/\\[(.*?)\\]\\(.*?\\)/g, \"$1\")\n+            str = str.replace(/\\[(.*?)\\]\\[.*?\\]/g, \"$1\")\n+            return str;\n+        }\n+\n         index = buildIndex(rawSearchIndex);\n         startSearch();\n \n@@ -691,7 +703,7 @@\n                 }\n                 var desc = rawSearchIndex[crates[i]].items[0][3];\n                 div.append($('<a>', {'href': '../' + crates[i] + '/index.html',\n-                                     'title': desc.replace(/\\n/g, ' '),\n+                                     'title': plainSummaryLine(desc),\n                                      'class': klass}).text(crates[i]));\n             }\n             sidebar.append(div);"}]}