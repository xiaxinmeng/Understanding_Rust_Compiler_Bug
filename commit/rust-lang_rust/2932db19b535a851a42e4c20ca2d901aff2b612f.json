{"sha": "2932db19b535a851a42e4c20ca2d901aff2b612f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5MzJkYjE5YjUzNWE4NTFhNDJlNGMyMGNhMmQ5MDFhZmYyYjYxMmY=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-24T17:35:29Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-24T17:35:29Z"}, "message": "Rollup merge of #35961 - 0xmohit:pr/error-codes-E0445-E0454, r=GuillaumeGomez\n\nUpdate E0445 and E0454 to new error format\n\nFixes #35922.\nFixes #35930.\nPart of #35233.\n\nr? @GuillaumeGomez", "tree": {"sha": "b6cf9531beacc1a9d6627b0e68ddf78c34a8dd89", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6cf9531beacc1a9d6627b0e68ddf78c34a8dd89"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2932db19b535a851a42e4c20ca2d901aff2b612f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2932db19b535a851a42e4c20ca2d901aff2b612f", "html_url": "https://github.com/rust-lang/rust/commit/2932db19b535a851a42e4c20ca2d901aff2b612f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2932db19b535a851a42e4c20ca2d901aff2b612f/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "411a85e2717ddd016fa4a3fbf5df5231018616ec", "url": "https://api.github.com/repos/rust-lang/rust/commits/411a85e2717ddd016fa4a3fbf5df5231018616ec", "html_url": "https://github.com/rust-lang/rust/commit/411a85e2717ddd016fa4a3fbf5df5231018616ec"}, {"sha": "11e9b8de7db8d5500cbee2252f6afd870f186104", "url": "https://api.github.com/repos/rust-lang/rust/commits/11e9b8de7db8d5500cbee2252f6afd870f186104", "html_url": "https://github.com/rust-lang/rust/commit/11e9b8de7db8d5500cbee2252f6afd870f186104"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "46469efea6bc830a7a2b8ab2e34b24d8126fea2a", "filename": "src/librustc_metadata/creader.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Flibrustc_metadata%2Fcreader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Flibrustc_metadata%2Fcreader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcreader.rs?ref=2932db19b535a851a42e4c20ca2d901aff2b612f", "patch": "@@ -101,8 +101,10 @@ fn register_native_lib(sess: &Session,\n     if name.is_empty() {\n         match span {\n             Some(span) => {\n-                span_err!(sess, span, E0454,\n-                          \"#[link(name = \\\"\\\")] given with empty name\");\n+                struct_span_err!(sess, span, E0454,\n+                                 \"#[link(name = \\\"\\\")] given with empty name\")\n+                    .span_label(span, &format!(\"empty name given\"))\n+                    .emit();\n             }\n             None => {\n                 sess.err(\"empty library name given via `-l`\");"}, {"sha": "028632ad7c006b90632cb90f681d47480019d4b6", "filename": "src/librustc_privacy/lib.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Flibrustc_privacy%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Flibrustc_privacy%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_privacy%2Flib.rs?ref=2932db19b535a851a42e4c20ca2d901aff2b612f", "patch": "@@ -964,8 +964,11 @@ impl<'a, 'tcx: 'a, 'v> Visitor<'v> for SearchInterfaceForPrivateItemsVisitor<'a,\n             if !vis.is_at_least(self.required_visibility, &self.tcx.map) {\n                 if self.tcx.sess.features.borrow().pub_restricted ||\n                    self.old_error_set.contains(&trait_ref.ref_id) {\n-                    span_err!(self.tcx.sess, trait_ref.path.span, E0445,\n-                              \"private trait in public interface\");\n+                    struct_span_err!(self.tcx.sess, trait_ref.path.span, E0445,\n+                                     \"private trait in public interface\")\n+                        .span_label(trait_ref.path.span, &format!(\n+                                    \"private trait can't be public\"))\n+                        .emit();\n                 } else {\n                     self.tcx.sess.add_lint(lint::builtin::PRIVATE_IN_PUBLIC,\n                                            node_id,"}, {"sha": "7c5c862a6f812ab724520c75f9260fde6aaa5061", "filename": "src/test/compile-fail/E0445.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Ftest%2Fcompile-fail%2FE0445.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Ftest%2Fcompile-fail%2FE0445.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0445.rs?ref=2932db19b535a851a42e4c20ca2d901aff2b612f", "patch": "@@ -12,8 +12,14 @@ trait Foo {\n     fn dummy(&self) { }\n }\n \n-pub trait Bar : Foo {} //~ ERROR E0445\n-pub struct Bar2<T: Foo>(pub T); //~ ERROR E0445\n-pub fn foo<T: Foo> (t: T) {} //~ ERROR E0445\n+pub trait Bar : Foo {}\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n+pub struct Bar2<T: Foo>(pub T);\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n+pub fn foo<T: Foo> (t: T) {}\n+//~^ ERROR private trait in public interface [E0445]\n+//~| NOTE private trait can't be public\n \n fn main() {}"}, {"sha": "39887927c885fe79ea604300065112683b57ad6f", "filename": "src/test/compile-fail/E0454.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Ftest%2Fcompile-fail%2FE0454.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2932db19b535a851a42e4c20ca2d901aff2b612f/src%2Ftest%2Fcompile-fail%2FE0454.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0454.rs?ref=2932db19b535a851a42e4c20ca2d901aff2b612f", "patch": "@@ -8,7 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#[link(name = \"\")] extern {} //~ ERROR E0454\n+#[link(name = \"\")] extern {}\n+//~^ ERROR E0454\n+//~| NOTE empty name given\n \n fn main() {\n }"}]}