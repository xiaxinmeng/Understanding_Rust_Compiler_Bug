{"sha": "05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "node_id": "C_kwDOAAsO6NoAKDA1ZTY5ZDhmYzZjNmUyY2U3MjAyMThmZTRmNmUzNDc1N2MxYWEwNWE", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-07-05T13:10:12Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-07-05T19:33:39Z"}, "message": "Update rustdoc tests", "tree": {"sha": "6c54f92180a8d0e1b0a0af87c29396a540789f13", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c54f92180a8d0e1b0a0af87c29396a540789f13"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "html_url": "https://github.com/rust-lang/rust/commit/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "499e024ac967a2315bd6dc88086999b92a254a0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/499e024ac967a2315bd6dc88086999b92a254a0b", "html_url": "https://github.com/rust-lang/rust/commit/499e024ac967a2315bd6dc88086999b92a254a0b"}], "stats": {"total": 57, "additions": 34, "deletions": 23}, "files": [{"sha": "666a6e1253d9dbd64cf6d28ba17972f922d638ef", "filename": "src/test/rustdoc-gui/implementors.goml", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -16,8 +16,16 @@ assert-attribute: (\"#implementors-list .impl:nth-child(2) > a.anchor\", {\"href\":\n assert: \"#implementors-list .impl:nth-child(2) > .code-header.in-band\"\n \n goto: file://|DOC_PATH|/test_docs/struct.HasEmptyTraits.html\n-compare-elements-position-near-false: (\"#impl-EmptyTrait1\", \"#impl-EmptyTrait2\", {\"y\": 30})\n-compare-elements-position-near: (\"#impl-EmptyTrait3 h3\", \"#impl-EmptyTrait3 .item-info\", {\"y\": 30})\n+compare-elements-position-near-false: (\n+    \"#impl-EmptyTrait1-for-HasEmptyTraits\",\n+    \"#impl-EmptyTrait2-for-HasEmptyTraits\",\n+    {\"y\": 30},\n+)\n+compare-elements-position-near: (\n+    \"#impl-EmptyTrait3-for-HasEmptyTraits h3\",\n+    \"#impl-EmptyTrait3-for-HasEmptyTraits .item-info\",\n+    {\"y\": 30},\n+)\n \n // Now check that re-exports work correctly.\n // There should be exactly one impl shown on both of these pages."}, {"sha": "b7095a3c5324d5715998dadd4d466626f46047ee", "filename": "src/test/rustdoc-gui/item-info-overflow.goml", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-overflow.goml?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -15,14 +15,17 @@ assert-text: (\n // Checking the \"item-info\" on an impl block as well:\n goto: file://|DOC_PATH|/lib2/struct.LongItemInfo2.html\n compare-elements-property: (\n-    \"#impl-SimpleTrait .item-info\",\n-    \"#impl-SimpleTrait + .docblock\",\n+    \"#impl-SimpleTrait-for-LongItemInfo2 .item-info\",\n+    \"#impl-SimpleTrait-for-LongItemInfo2 + .docblock\",\n     [\"scrollWidth\"],\n )\n-assert-property: (\"#impl-SimpleTrait .item-info\", {\"scrollWidth\": \"866\"})\n+assert-property: (\n+    \"#impl-SimpleTrait-for-LongItemInfo2 .item-info\",\n+    {\"scrollWidth\": \"866\"},\n+)\n // Just to be sure we're comparing the correct \"item-info\":\n assert-text: (\n-    \"#impl-SimpleTrait .item-info\",\n+    \"#impl-SimpleTrait-for-LongItemInfo2 .item-info\",\n     \"Available on Android or Linux or Emscripten or DragonFly BSD\",\n     STARTS_WITH,\n )"}, {"sha": "661d905ab639cb81143eca5ea523524193307b0e", "filename": "src/test/rustdoc/auto-trait-not-send.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fauto-trait-not-send.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fauto-trait-not-send.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fauto-trait-not-send.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -1,8 +1,8 @@\n #![crate_name = \"foo\"]\n \n // @has 'foo/struct.Foo.html'\n-// @has - '//*[@id=\"impl-Send\"]' 'impl !Send for Foo'\n-// @has - '//*[@id=\"impl-Sync\"]' 'impl !Sync for Foo'\n+// @has - '//*[@id=\"impl-Send-for-Foo\"]' 'impl !Send for Foo'\n+// @has - '//*[@id=\"impl-Sync-for-Foo\"]' 'impl !Sync for Foo'\n pub struct Foo(*const i8);\n pub trait Whatever: Send {}\n impl<T: Send + ?Sized> Whatever for T {}"}, {"sha": "350c897417d1f5f9583a52deb6e42594811c5c5a", "filename": "src/test/rustdoc/double-quote-escape.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fdouble-quote-escape.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fdouble-quote-escape.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fdouble-quote-escape.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -1,12 +1,11 @@\n #![crate_name = \"foo\"]\n \n-\n pub trait Foo<T> {\n     fn foo() {}\n }\n \n pub struct Bar;\n \n // @has foo/struct.Bar.html\n-// @has - '//*[@class=\"sidebar-elems\"]//section//a[@href=\"#impl-Foo%3Cunsafe%20extern%20%22C%22%20fn()%3E\"]' 'Foo<unsafe extern \"C\" fn()>'\n+// @has - '//*[@class=\"sidebar-elems\"]//section//a[@href=\"#impl-Foo%3Cunsafe%20extern%20%22C%22%20fn()%3E-for-Bar\"]' 'Foo<unsafe extern \"C\" fn()>'\n impl Foo<unsafe extern \"C\" fn()> for Bar {}"}, {"sha": "c6beed70abeb168e158e0e7e3bcda6ec96ece152", "filename": "src/test/rustdoc/generic-impl.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fgeneric-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fgeneric-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fgeneric-impl.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -2,12 +2,12 @@\n \n use std::fmt;\n \n-// @!has foo/struct.Bar.html '//*[@id=\"impl-ToString-for-Bar\"]//h3[@class=\"code-header in-band\"]' 'impl<T> ToString for T'\n+// @!has foo/struct.Bar.html '//*[@id=\"impl-ToString-for-Bar\"]' ''\n pub struct Bar;\n \n // @has foo/struct.Foo.html '//*[@id=\"impl-ToString-for-Foo\"]//h3[@class=\"code-header in-band\"]' 'impl<T> ToString for T'\n pub struct Foo;\n-// @has foo/struct.Foo.html '//*[@class=\"sidebar-elems\"]//section//a[@href=\"#impl-ToString\"]' 'ToString'\n+// @has foo/struct.Foo.html '//*[@class=\"sidebar-elems\"]//section//a[@href=\"#impl-ToString-for-Foo\"]' 'ToString'\n \n impl fmt::Display for Foo {\n     fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {"}, {"sha": "592b6c98587addbcf983000de22d154f890e2199", "filename": "src/test/rustdoc/impl-box.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fimpl-box.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fimpl-box.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fimpl-box.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -5,7 +5,7 @@\n pub struct MyType;\n \n // @has 'impl_box/struct.MyType.html'\n-// @has '-' '//*[@id=\"impl-Iterator\"]' 'impl Iterator for Box<MyType>'\n+// @has '-' '//*[@id=\"impl-Iterator-for-Box%3CMyType%3E\"]' 'impl Iterator for Box<MyType>'\n \n impl Iterator for Box<MyType> {\n     type Item = ();"}, {"sha": "ac97b94fb351b558258671d7529e8c5825373591", "filename": "src/test/rustdoc/issue-75588.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fissue-75588.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fissue-75588.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-75588.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -13,5 +13,5 @@ extern crate real_gimli;\n // @!has foo/trait.Deref.html '//*[@id=\"impl-Deref-for-EndianSlice\"]//h3[@class=\"code-header in-band\"]' 'impl Deref for EndianSlice'\n pub use realcore::Deref;\n \n-// @has foo/trait.Join.html '//*[@id=\"impl-Join\"]//h3[@class=\"code-header in-band\"]' 'impl Join for Foo'\n+// @has foo/trait.Join.html '//*[@id=\"impl-Join-for-Foo\"]//h3[@class=\"code-header in-band\"]' 'impl Join for Foo'\n pub use realcore::Join;"}, {"sha": "e3e46468f38407e2fe231c9e628266dde0343c0a", "filename": "src/test/rustdoc/issue-78701.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fissue-78701.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fissue-78701.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-78701.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -5,8 +5,8 @@\n // the ID is correctly derived.\n \n // @has 'foo/struct.AnotherStruct.html'\n-// @count - '//*[@class=\"sidebar\"]//a[@href=\"#impl-AnAmazingTrait\"]' 1\n-// @count - '//*[@class=\"sidebar\"]//a[@href=\"#impl-AnAmazingTrait-1\"]' 1\n+// @count - '//*[@class=\"sidebar\"]//a[@href=\"#impl-AnAmazingTrait-for-AnotherStruct%3C()%3E\"]' 1\n+// @count - '//*[@class=\"sidebar\"]//a[@href=\"#impl-AnAmazingTrait-for-AnotherStruct%3CT%3E\"]' 1\n \n pub trait Something {}\n "}, {"sha": "f3e211e301742c5609468299a15afd4fc4105b0d", "filename": "src/test/rustdoc/rfc-2632-const-trait-impl.rs", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Frfc-2632-const-trait-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Frfc-2632-const-trait-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Frfc-2632-const-trait-impl.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -29,10 +29,11 @@ pub trait Tr<T> {\n     }\n }\n \n-// @!has - '//section[@id=\"impl-Tr%3CT%3E\"]/h3[@class=\"code-header in-band\"]' '~const'\n-// @has - '//section[@id=\"impl-Tr%3CT%3E\"]/h3[@class=\"code-header in-band\"]/a[@class=\"trait\"]' 'Clone'\n-// @!has - '//section[@id=\"impl-Tr%3CT%3E\"]/h3[@class=\"code-header in-band\"]/span[@class=\"where\"]' '~const'\n-// @has - '//section[@id=\"impl-Tr%3CT%3E\"]/h3[@class=\"code-header in-band\"]/span[@class=\"where fmt-newline\"]' ': Clone'\n+// @has - '//section[@id=\"impl-Tr%3CT%3E-for-T\"]' ''\n+// @!has - '//section[@id=\"impl-Tr%3CT%3E-for-T\"]/h3[@class=\"code-header in-band\"]' '~const'\n+// @has - '//section[@id=\"impl-Tr%3CT%3E-for-T\"]/h3[@class=\"code-header in-band\"]/a[@class=\"trait\"]' 'Clone'\n+// @!has - '//section[@id=\"impl-Tr%3CT%3E-for-T\"]/h3[@class=\"code-header in-band\"]/span[@class=\"where\"]' '~const'\n+// @has - '//section[@id=\"impl-Tr%3CT%3E-for-T\"]/h3[@class=\"code-header in-band\"]/span[@class=\"where fmt-newline\"]' ': Clone'\n impl<T: ~const Clone + ~const Destruct> const Tr<T> for T\n where\n     Option<T>: ~const Clone + ~const Destruct,"}, {"sha": "69be9aa8d5f1011213f24589337f844b86647f2b", "filename": "src/test/rustdoc/src-links-auto-impls.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fsrc-links-auto-impls.rs?ref=05e69d8fc6c6e2ce720218fe4f6e34757c1aa05a", "patch": "@@ -1,10 +1,10 @@\n #![crate_name = \"foo\"]\n \n // @has foo/struct.Unsized.html\n-// @has - '//div[@id=\"impl-Sized-for-Unsized\"]/h3[@class=\"code-header in-band\"]' 'impl !Sized for Unsized'\n-// @!has - '//*[@id=\"impl-Sized\"]//a[@class=\"srclink\"]' 'source'\n+// @has - '//*[@id=\"impl-Sized-for-Unsized\"]/h3[@class=\"code-header in-band\"]' 'impl !Sized for Unsized'\n+// @!has - '//*[@id=\"impl-Sized-for-Unsized\"]//a[@class=\"srclink\"]' 'source'\n // @has - '//*[@id=\"impl-Sync-for-Unsized\"]/h3[@class=\"code-header in-band\"]' 'impl Sync for Unsized'\n-// @!has - '//*[@id=\"impl-Sync\"]//a[@class=\"srclink\"]' 'source'\n+// @!has - '//*[@id=\"impl-Sync-for-Unsized\"]//a[@class=\"srclink\"]' 'source'\n // @has - '//*[@id=\"impl-Any-for-Unsized\"]/h3[@class=\"code-header in-band\"]' 'impl<T> Any for T'\n // @has - '//*[@id=\"impl-Any-for-Unsized\"]//a[@class=\"srclink\"]' 'source'\n pub struct Unsized {"}]}