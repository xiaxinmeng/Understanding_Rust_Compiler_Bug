{"sha": "b5f85cffc8abbaa5b581fa498cf30f211284d378", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1Zjg1Y2ZmYzhhYmJhYTViNTgxZmE0OThjZjMwZjIxMTI4NGQzNzg=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-01-19T21:36:13Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2016-01-19T21:36:13Z"}, "message": "remove the `SimplifiedType` from the `DepNode` for now, just to keep\nsize of `DepNode` smaller and because we are not that fine-grained yet\nanyhow", "tree": {"sha": "a9fd3c0c809796558ad04db65aecde54e59907cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9fd3c0c809796558ad04db65aecde54e59907cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5f85cffc8abbaa5b581fa498cf30f211284d378", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5f85cffc8abbaa5b581fa498cf30f211284d378", "html_url": "https://github.com/rust-lang/rust/commit/b5f85cffc8abbaa5b581fa498cf30f211284d378", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5f85cffc8abbaa5b581fa498cf30f211284d378/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84157dbd4c7420e3e5b4dd22e4ff244889aa6275", "url": "https://api.github.com/repos/rust-lang/rust/commits/84157dbd4c7420e3e5b4dd22e4ff244889aa6275", "html_url": "https://github.com/rust-lang/rust/commit/84157dbd4c7420e3e5b4dd22e4ff244889aa6275"}], "stats": {"total": 17, "additions": 4, "deletions": 13}, "files": [{"sha": "3bb73ecca2c43aad946075dbd1ae41c8b4f8f6c2", "filename": "src/librustc/dep_graph/mod.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fdep_graph%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fdep_graph%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fmod.rs?ref=b5f85cffc8abbaa5b581fa498cf30f211284d378", "patch": "@@ -11,7 +11,6 @@\n use self::thread::{DepGraphThreadData, DepMessage};\n use middle::def_id::DefId;\n use middle::ty;\n-use middle::ty::fast_reject::SimplifiedType;\n use rustc_front::hir;\n use rustc_front::intravisit::Visitor;\n use std::rc::Rc;\n@@ -102,7 +101,7 @@ pub enum DepNode {\n     // which would yield an overly conservative dep-graph.\n     TraitItems(DefId),\n     ReprHints(DefId),\n-    TraitSelect(DefId, Option<SimplifiedType>),\n+    TraitSelect(DefId),\n }\n \n #[derive(Clone)]"}, {"sha": "f58cc919959729b035fdc576e6ca93d150732d09", "filename": "src/librustc/middle/traits/mod.rs", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fmiddle%2Ftraits%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fmiddle%2Ftraits%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftraits%2Fmod.rs?ref=b5f85cffc8abbaa5b581fa498cf30f211284d378", "patch": "@@ -20,7 +20,6 @@ use middle::def_id::DefId;\n use middle::free_region::FreeRegionMap;\n use middle::subst;\n use middle::ty::{self, Ty, TypeFoldable};\n-use middle::ty::fast_reject;\n use middle::infer::{self, fixup_err_to_string, InferCtxt};\n \n use std::rc::Rc;\n@@ -618,15 +617,8 @@ impl<'tcx> FulfillmentError<'tcx> {\n \n impl<'tcx> TraitObligation<'tcx> {\n     /// Creates the dep-node for selecting/evaluating this trait reference.\n-    fn dep_node(&self, tcx: &ty::ctxt<'tcx>) -> DepNode {\n-        let simplified_ty =\n-            fast_reject::simplify_type(tcx,\n-                                       self.predicate.skip_binder().self_ty(), // (*)\n-                                       true);\n-\n-        // (*) skip_binder is ok because `simplify_type` doesn't care about regions\n-\n-        DepNode::TraitSelect(self.predicate.def_id(), simplified_ty)\n+    fn dep_node(&self) -> DepNode {\n+        DepNode::TraitSelect(self.predicate.def_id())\n     }\n \n     fn self_ty(&self) -> ty::Binder<Ty<'tcx>> {"}, {"sha": "59a62d130b89570c469589b04357d36f82542fd3", "filename": "src/librustc/middle/traits/select.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5f85cffc8abbaa5b581fa498cf30f211284d378/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftraits%2Fselect.rs?ref=b5f85cffc8abbaa5b581fa498cf30f211284d378", "patch": "@@ -307,7 +307,7 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n         debug!(\"select({:?})\", obligation);\n         assert!(!obligation.predicate.has_escaping_regions());\n \n-        let dep_node = obligation.dep_node(self.tcx());\n+        let dep_node = obligation.dep_node();\n         let _task = self.tcx().dep_graph.in_task(dep_node);\n \n         let stack = self.push_stack(TraitObligationStackList::empty(), obligation);"}]}