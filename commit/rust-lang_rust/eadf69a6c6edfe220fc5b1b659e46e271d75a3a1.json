{"sha": "eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "node_id": "C_kwDOAAsO6NoAKGVhZGY2OWE2YzZlZGZlMjIwZmM1YjFiNjU5ZTQ2ZTI3MWQ3NWEzYTE", "commit": {"author": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2022-12-02T14:17:36Z"}, "committer": {"name": "klensy", "email": "klensy@users.noreply.github.com", "date": "2022-12-02T14:17:36Z"}, "message": "reduce docker image sizes by cleaning cache/squashing steps", "tree": {"sha": "3b6a6ed63c3ff79af7b1c6b60e2713b2caf255c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b6a6ed63c3ff79af7b1c6b60e2713b2caf255c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "html_url": "https://github.com/rust-lang/rust/commit/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/comments", "author": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "klensy", "id": 1782831, "node_id": "MDQ6VXNlcjE3ODI4MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1782831?v=4", "gravatar_id": "", "url": "https://api.github.com/users/klensy", "html_url": "https://github.com/klensy", "followers_url": "https://api.github.com/users/klensy/followers", "following_url": "https://api.github.com/users/klensy/following{/other_user}", "gists_url": "https://api.github.com/users/klensy/gists{/gist_id}", "starred_url": "https://api.github.com/users/klensy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/klensy/subscriptions", "organizations_url": "https://api.github.com/users/klensy/orgs", "repos_url": "https://api.github.com/users/klensy/repos", "events_url": "https://api.github.com/users/klensy/events{/privacy}", "received_events_url": "https://api.github.com/users/klensy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11663b1b4857ffeafbd85a9a36c234d117373b76", "url": "https://api.github.com/repos/rust-lang/rust/commits/11663b1b4857ffeafbd85a9a36c234d117373b76", "html_url": "https://github.com/rust-lang/rust/commit/11663b1b4857ffeafbd85a9a36c234d117373b76"}], "stats": {"total": 70, "additions": 43, "deletions": 27}, "files": [{"sha": "699938c37184285eef21b68354f85efd3455f03f", "filename": "src/ci/docker/host-aarch64/aarch64-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-aarch64%2Faarch64-gnu%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -14,7 +14,8 @@ RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-ins\n   gdb \\\n   libssl-dev \\\n   pkg-config \\\n-  xz-utils\n+  xz-utils \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "ea4a2a2427dbf8ba29e66719bbd6d4163fb0b340", "filename": "src/ci/docker/host-x86_64/dist-i686-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-linux%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -32,7 +32,8 @@ RUN yum upgrade -y && \\\n       wget \\\n       xz \\\n       zlib-devel.i686 \\\n-      zlib-devel.x86_64\n+      zlib-devel.x86_64 \\\n+      && yum clean all\n \n RUN mkdir -p /rustroot/bin && ln -s /usr/bin/cmake3 /rustroot/bin/cmake\n "}, {"sha": "377d4a9ce5ebde94f3ef2a56a24c890d8071908e", "filename": "src/ci/docker/host-x86_64/dist-x86_64-freebsd/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-freebsd%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   xz-utils \\\n   wget \\\n   libssl-dev \\\n-  pkg-config\n+  pkg-config \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/freebsd-toolchain.sh /tmp/\n RUN /tmp/freebsd-toolchain.sh x86_64"}, {"sha": "4e46bdee5acb581e412ec6b4f9a7313dc3abb245", "filename": "src/ci/docker/host-x86_64/dist-x86_64-illumos/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-illumos%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-illumos%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-illumos%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -11,7 +11,8 @@ RUN apt-get update && \\\n     apt-get install -y --no-install-recommends \\\n       libgmp-dev \\\n       libmpfr-dev \\\n-      libmpc-dev\n+      libmpc-dev \\\n+      && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/illumos-toolchain.sh /tmp/\n "}, {"sha": "6bdc88e18f530f8d9e2dc64ce6f41564a354c65f", "filename": "src/ci/docker/host-x86_64/dist-x86_64-linux/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-linux%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -32,7 +32,8 @@ RUN yum upgrade -y && \\\n       wget \\\n       xz \\\n       zlib-devel.i686 \\\n-      zlib-devel.x86_64\n+      zlib-devel.x86_64 \\\n+      && yum clean all\n \n RUN mkdir -p /rustroot/bin && ln -s /usr/bin/cmake3 /rustroot/bin/cmake\n "}, {"sha": "13eaf7fce8cd76ae1a921b9dbdafb447537dde9f", "filename": "src/ci/docker/host-x86_64/dist-x86_64-musl/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-x86_64-musl%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -16,7 +16,8 @@ RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-ins\n   gdb \\\n   patch \\\n   libssl-dev \\\n-  pkg-config\n+  pkg-config \\\n+  && rm -rf /var/lib/apt/lists/*\n \n WORKDIR /build/\n "}, {"sha": "e2b66c2cff1d8258e6721013559367b499e1005c", "filename": "src/ci/docker/host-x86_64/i686-gnu-nopt/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu-nopt%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   gdb \\\n   zlib1g-dev \\\n   lib32z1-dev \\\n-  xz-utils\n+  xz-utils \\\n+  && rm -rf /var/lib/apt/lists/*\n \n \n COPY scripts/sccache.sh /scripts/"}, {"sha": "cb6559707d962b53ab03f97515b1a9a68cd53425", "filename": "src/ci/docker/host-x86_64/i686-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fi686-gnu%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   gdb \\\n   zlib1g-dev \\\n   lib32z1-dev \\\n-  xz-utils\n+  xz-utils \\\n+  && rm -rf /var/lib/apt/lists/*\n \n \n COPY scripts/sccache.sh /scripts/"}, {"sha": "40caa7c50135d31dae92b8331501572436f874dd", "filename": "src/ci/docker/host-x86_64/mingw-check/Dockerfile", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fmingw-check%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -20,20 +20,20 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   xz-utils \\\n   libssl-dev \\\n   pkg-config \\\n-  mingw-w64\n+  mingw-w64 \\\n+  && rm -rf /var/lib/apt/lists/*\n \n RUN curl -sL https://nodejs.org/dist/v16.9.0/node-v16.9.0-linux-x64.tar.xz | tar -xJ\n ENV PATH=\"/node-v16.9.0-linux-x64/bin:${PATH}\"\n # Install es-check\n # Pin its version to prevent unrelated CI failures due to future es-check versions.\n-RUN npm install es-check@6.1.1 -g\n-RUN npm install eslint@8.6.0 -g\n+RUN npm install es-check@6.1.1 eslint@8.6.0 -g\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n COPY host-x86_64/mingw-check/reuse-requirements.txt /tmp/\n-RUN pip3 install --no-deps --require-hashes -r /tmp/reuse-requirements.txt\n+RUN pip3 install --no-deps --no-cache-dir --require-hashes -r /tmp/reuse-requirements.txt\n \n COPY host-x86_64/mingw-check/validate-toolstate.sh /scripts/\n COPY host-x86_64/mingw-check/validate-error-codes.sh /scripts/"}, {"sha": "cf4451f8b33b64faa99c717e4ccb6f340b6014fb", "filename": "src/ci/docker/host-x86_64/test-various/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Ftest-various%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -21,7 +21,8 @@ RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-ins\n   ovmf \\\n   qemu-efi-aarch64 \\\n   qemu-system-arm \\\n-  qemu-system-x86\n+  qemu-system-x86 \\\n+  && rm -rf /var/lib/apt/lists/*\n \n RUN curl -sL https://nodejs.org/dist/v15.14.0/node-v15.14.0-linux-x64.tar.xz | \\\n   tar -xJ"}, {"sha": "ef1fde1c3b924711c29829f75df0d1f89880e3dd", "filename": "src/ci/docker/host-x86_64/wasm32/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fwasm32%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -13,7 +13,8 @@ RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-ins\n   sudo \\\n   gdb \\\n   xz-utils \\\n-  bzip2\n+  bzip2 \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/emscripten.sh /scripts/\n RUN bash /scripts/emscripten.sh"}, {"sha": "e08c4e1e8b7dec7c07fc11c9791e70b528b36554", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-aux/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-aux%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -19,7 +19,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   llvm-dev \\\n   libfreetype6-dev \\\n   libexpat1-dev \\\n-  tidy\n+  tidy \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "c2b002055a8fcc9c6176fbf16986c3b2e4b66a55", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-debug/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-debug%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -23,7 +23,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   pkg-config \\\n   xz-utils \\\n   lld \\\n-  clang\n+  clang \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "7e640c49f015a4a413fc657b7f2567164b7ad5eb", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-distcheck/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-distcheck%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   gdb \\\n   xz-utils \\\n   libssl-dev \\\n-  pkg-config\n+  pkg-config \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "16976a9428ef1ebd3e8b4c34ffea94740ef7afdd", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-13-stage1/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13-stage1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13-stage1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13-stage1%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -21,7 +21,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n     pkg-config \\\n     zlib1g-dev \\\n     xz-utils \\\n-    nodejs\n+    nodejs \\\n+    && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "c3b47c3510d46fef2fc0071f43a709140f72cc83", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-llvm-13/Dockerfile", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-llvm-13%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -24,15 +24,15 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   pkg-config \\\n   zlib1g-dev \\\n   xz-utils \\\n-  nodejs\n+  nodejs \\\n \n # Install powershell so we can test x.ps1 on Linux\n-RUN apt-get update && \\\n-    apt-get install -y apt-transport-https software-properties-common && \\\n+    apt-transport-https software-properties-common && \\\n     curl -s \"https://packages.microsoft.com/config/ubuntu/$(lsb_release -rs)/packages-microsoft-prod.deb\" > packages-microsoft-prod.deb && \\\n     dpkg -i packages-microsoft-prod.deb && \\\n     apt-get update && \\\n-    apt-get install -y powershell\n+    apt-get install -y powershell \\\n+    && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "9fdc78406fbd1f0f04f69c9006f6f32fe37ea820", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-nopt/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-nopt%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-ins\n   gdb \\\n   libssl-dev \\\n   pkg-config \\\n-  xz-utils\n+  xz-utils \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "501d27816462aace153eb6ecc578210fa681018d", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/Dockerfile", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -14,10 +14,9 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   libssl-dev \\\n   sudo \\\n   xz-utils \\\n-  tidy\n+  tidy \\\n \n # Install dependencies for chromium browser\n-RUN apt-get install -y \\\n   gconf-service \\\n   libasound2 \\\n   libatk1.0-0 \\\n@@ -56,7 +55,8 @@ RUN apt-get install -y \\\n   libnss3 \\\n   lsb-release \\\n   xdg-utils \\\n-  wget\n+  wget \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}, {"sha": "5b9581f72a64ef63dcc2df31a5100efe82fb83fc", "filename": "src/ci/docker/host-x86_64/x86_64-gnu/Dockerfile", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/eadf69a6c6edfe220fc5b1b659e46e271d75a3a1/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu%2FDockerfile?ref=eadf69a6c6edfe220fc5b1b659e46e271d75a3a1", "patch": "@@ -15,7 +15,8 @@ RUN apt-get update && apt-get install -y --no-install-recommends \\\n   gdb \\\n   libssl-dev \\\n   pkg-config \\\n-  xz-utils\n+  xz-utils \\\n+  && rm -rf /var/lib/apt/lists/*\n \n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh"}]}