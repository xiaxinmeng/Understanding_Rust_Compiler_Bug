{"sha": "2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmYjVkNWRmODk4OTcxMTVjYjRjN2ZiYTZiOGRhNDFlZDY2NWY3NWQ=", "commit": {"author": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-09-09T13:43:28Z"}, "committer": {"name": "Jorge Aparicio", "email": "jorge@japaric.io", "date": "2018-09-09T13:43:28Z"}, "message": "stabilize `#[used]`\n\ncloses #40289", "tree": {"sha": "40a2cd7a83944454ed5534378401a20bd7f18f6b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/40a2cd7a83944454ed5534378401a20bd7f18f6b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "html_url": "https://github.com/rust-lang/rust/commit/2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/comments", "author": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "committer": {"login": "japaric", "id": 5018213, "node_id": "MDQ6VXNlcjUwMTgyMTM=", "avatar_url": "https://avatars.githubusercontent.com/u/5018213?v=4", "gravatar_id": "", "url": "https://api.github.com/users/japaric", "html_url": "https://github.com/japaric", "followers_url": "https://api.github.com/users/japaric/followers", "following_url": "https://api.github.com/users/japaric/following{/other_user}", "gists_url": "https://api.github.com/users/japaric/gists{/gist_id}", "starred_url": "https://api.github.com/users/japaric/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/japaric/subscriptions", "organizations_url": "https://api.github.com/users/japaric/orgs", "repos_url": "https://api.github.com/users/japaric/repos", "events_url": "https://api.github.com/users/japaric/events{/privacy}", "received_events_url": "https://api.github.com/users/japaric/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df6ba0c4acceb5f63090bb20bd23f29c4f439376", "url": "https://api.github.com/repos/rust-lang/rust/commits/df6ba0c4acceb5f63090bb20bd23f29c4f439376", "html_url": "https://github.com/rust-lang/rust/commit/df6ba0c4acceb5f63090bb20bd23f29c4f439376"}], "stats": {"total": 17, "additions": 5, "deletions": 12}, "files": [{"sha": "5c9e88dc57ca6ea869c72dbca80edf95b7785fce", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "patch": "@@ -307,7 +307,7 @@\n #![feature(doc_cfg)]\n #![feature(doc_masked)]\n #![feature(doc_spotlight)]\n-#![cfg_attr(windows, feature(used))]\n+#![cfg_attr(all(windows, stage0), feature(used))]\n #![feature(doc_alias)]\n #![feature(doc_keyword)]\n #![feature(panic_info_message)]"}, {"sha": "cbadbf8ee164877e40cb028aa1ce4a42d141eb9d", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "patch": "@@ -349,9 +349,6 @@ declare_features! (\n     // Allows the `try {...}` expression\n     (active, try_blocks, \"1.29.0\", Some(31436), None),\n \n-    // Used to preserve symbols (see llvm.used)\n-    (active, used, \"1.18.0\", Some(40289), None),\n-\n     // Allows module-level inline assembly by way of global_asm!()\n     (active, global_asm, \"1.18.0\", Some(35119), None),\n \n@@ -674,6 +671,9 @@ declare_features! (\n     // Allows all literals in attribute lists and values of key-value pairs.\n     (accepted, attr_literals, \"1.30.0\", Some(34981), None),\n     (accepted, panic_handler, \"1.30.0\", Some(44489), None),\n+    // Used to preserve symbols (see llvm.used)\n+    (accepted, used, \"1.29.0\", Some(40289), None),\n+\n );\n \n // If you change this, please modify src/doc/unstable-book as well. You must\n@@ -1064,10 +1064,7 @@ pub const BUILTIN_ATTRIBUTES: &'static [(&'static str, AttributeType, AttributeG\n                                   \"unwind_attributes\",\n                                   \"#[unwind] is experimental\",\n                                   cfg_fn!(unwind_attributes))),\n-    (\"used\", Whitelisted, Gated(\n-        Stability::Unstable, \"used\",\n-        \"the `#[used]` attribute is an experimental feature\",\n-        cfg_fn!(used))),\n+    (\"used\", Whitelisted, Ungated),\n \n     // used in resolve\n     (\"prelude_import\", Whitelisted, Gated(Stability::Unstable,"}, {"sha": "6992dd94af3bdda82df6fe9b6d3f86496ffe13d5", "filename": "src/test/run-make-fulldeps/used/used.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Frun-make-fulldeps%2Fused%2Fused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Frun-make-fulldeps%2Fused%2Fused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fused%2Fused.rs?ref=2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n #![crate_type = \"lib\"]\n-#![feature(used)]\n \n #[used]\n static FOO: u32 = 0;"}, {"sha": "f4b9588ff0567b8fdbfd9129a0865c440eb60d3b", "filename": "src/test/ui/run-pass/issues/issue-41628.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-41628.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-41628.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frun-pass%2Fissues%2Fissue-41628.rs?ref=2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "patch": "@@ -10,7 +10,6 @@\n \n // run-pass\n #![deny(dead_code)]\n-#![feature(used)]\n \n #[used]\n static FOO: u32 = 0;"}, {"sha": "b3ed8601988d18eec128e447a8aab97c527f7bf7", "filename": "src/test/ui/used.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Fui%2Fused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fb5d5df89897115cb4c7fba6b8da41ed665f75d/src%2Ftest%2Fui%2Fused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fused.rs?ref=2fb5d5df89897115cb4c7fba6b8da41ed665f75d", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(used)]\n-\n #[used]\n static FOO: u32 = 0; // OK\n "}]}