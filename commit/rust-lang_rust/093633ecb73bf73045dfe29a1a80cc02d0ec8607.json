{"sha": "093633ecb73bf73045dfe29a1a80cc02d0ec8607", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA5MzYzM2VjYjczYmY3MzA0NWRmZTI5YTFhODBjYzAyZDBlYzg2MDc=", "commit": {"author": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-02-22T23:10:17Z"}, "committer": {"name": "topecongiro", "email": "seuchida@gmail.com", "date": "2018-02-22T23:10:17Z"}, "message": "Update tests for #2438 and #2476", "tree": {"sha": "66a127d25b1708679c6912ede68a37552c20a81f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/66a127d25b1708679c6912ede68a37552c20a81f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/093633ecb73bf73045dfe29a1a80cc02d0ec8607", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/093633ecb73bf73045dfe29a1a80cc02d0ec8607", "html_url": "https://github.com/rust-lang/rust/commit/093633ecb73bf73045dfe29a1a80cc02d0ec8607", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/093633ecb73bf73045dfe29a1a80cc02d0ec8607/comments", "author": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "committer": {"login": "topecongiro", "id": 21980157, "node_id": "MDQ6VXNlcjIxOTgwMTU3", "avatar_url": "https://avatars.githubusercontent.com/u/21980157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/topecongiro", "html_url": "https://github.com/topecongiro", "followers_url": "https://api.github.com/users/topecongiro/followers", "following_url": "https://api.github.com/users/topecongiro/following{/other_user}", "gists_url": "https://api.github.com/users/topecongiro/gists{/gist_id}", "starred_url": "https://api.github.com/users/topecongiro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/topecongiro/subscriptions", "organizations_url": "https://api.github.com/users/topecongiro/orgs", "repos_url": "https://api.github.com/users/topecongiro/repos", "events_url": "https://api.github.com/users/topecongiro/events{/privacy}", "received_events_url": "https://api.github.com/users/topecongiro/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f09480432d8dbcae2059c98584c2a37b57a0ad7d", "url": "https://api.github.com/repos/rust-lang/rust/commits/f09480432d8dbcae2059c98584c2a37b57a0ad7d", "html_url": "https://github.com/rust-lang/rust/commit/f09480432d8dbcae2059c98584c2a37b57a0ad7d"}], "stats": {"total": 68, "additions": 61, "deletions": 7}, "files": [{"sha": "dba1d78f0dd35e56ad756ff64f95e2df8d0abcca", "filename": "rustfmt-core/tests/source/macro_rules.rs", "status": "modified", "additions": 31, "deletions": 4, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/093633ecb73bf73045dfe29a1a80cc02d0ec8607/rustfmt-core%2Ftests%2Fsource%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/093633ecb73bf73045dfe29a1a80cc02d0ec8607/rustfmt-core%2Ftests%2Fsource%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustfmt-core%2Ftests%2Fsource%2Fmacro_rules.rs?ref=093633ecb73bf73045dfe29a1a80cc02d0ec8607", "patch": "@@ -1,3 +1,5 @@\n+// rustfmt-error_on_line_overflow: false\n+\n macro_rules! m {\n \t// a\n \t($expr :expr,  $( $func : ident    ) *   ) => {\n@@ -50,12 +52,37 @@ macro m2 {\n }\n }\n \n-\n-// #2438\n+// #2438, #2476\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_98_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+            );\n+        }\n+    }\n+}\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_99_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+);\n+        }\n+    };\n+}\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_100_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+);\n+        }\n+    };\n+}\n macro_rules! m {\n     () => {\n-        this_line_is_99_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n-        ); // this line is drifting\n+        fn foo() {\n+            this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+            );\n+        }\n     };\n }\n "}, {"sha": "2136784dec77e2165f5a8db3b05961da1a694317", "filename": "rustfmt-core/tests/target/macro_rules.rs", "status": "modified", "additions": 30, "deletions": 3, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/093633ecb73bf73045dfe29a1a80cc02d0ec8607/rustfmt-core%2Ftests%2Ftarget%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/093633ecb73bf73045dfe29a1a80cc02d0ec8607/rustfmt-core%2Ftests%2Ftarget%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustfmt-core%2Ftests%2Ftarget%2Fmacro_rules.rs?ref=093633ecb73bf73045dfe29a1a80cc02d0ec8607", "patch": "@@ -1,3 +1,5 @@\n+// rustfmt-error_on_line_overflow: false\n+\n macro_rules! m {\n     // a\n     ($expr: expr, $($func: ident)*) => {{\n@@ -42,11 +44,36 @@ macro m2 {\n     }\n }\n \n-// #2438\n+// #2438, #2476\n macro_rules! m {\n     () => {\n-        this_line_is_99_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n-        ); // this line is drifting\n+        fn foo() {\n+            this_line_is_98_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx();\n+        }\n+    };\n+}\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_99_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+            );\n+        }\n+    };\n+}\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_100_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+            );\n+        }\n+    };\n+}\n+macro_rules! m {\n+    () => {\n+        fn foo() {\n+            this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx(\n+            );\n+        }\n     };\n }\n "}]}