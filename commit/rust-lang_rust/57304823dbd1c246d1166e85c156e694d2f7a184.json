{"sha": "57304823dbd1c246d1166e85c156e694d2f7a184", "node_id": "C_kwDOAAsO6NoAKDU3MzA0ODIzZGJkMWMyNDZkMTE2NmU4NWMxNTZlNjk0ZDJmN2ExODQ", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-06-03T15:10:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-03T15:10:51Z"}, "message": "Rollup merge of #97415 - cjgillot:is-late-bound-solo, r=estebank\n\nCompute `is_late_bound_map` query separately from lifetime resolution\n\nThis query is actually very simple, and is only useful for functions and method.  It can be computed directly by fetching the HIR, with no need to embed it within the lifetime resolution visitor.\n\nBased on https://github.com/rust-lang/rust/pull/96296", "tree": {"sha": "10933d053ab9240962948274f3ea2d9f34687c18", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10933d053ab9240962948274f3ea2d9f34687c18"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/57304823dbd1c246d1166e85c156e694d2f7a184", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/57304823dbd1c246d1166e85c156e694d2f7a184", "html_url": "https://github.com/rust-lang/rust/commit/57304823dbd1c246d1166e85c156e694d2f7a184", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/57304823dbd1c246d1166e85c156e694d2f7a184/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "baacbfda45c4f7b6c679ac7d03d374b0a1d58391", "url": "https://api.github.com/repos/rust-lang/rust/commits/baacbfda45c4f7b6c679ac7d03d374b0a1d58391", "html_url": "https://github.com/rust-lang/rust/commit/baacbfda45c4f7b6c679ac7d03d374b0a1d58391"}, {"sha": "1e86cc5194eca009519b9631d081867366fe5c44", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e86cc5194eca009519b9631d081867366fe5c44", "html_url": "https://github.com/rust-lang/rust/commit/1e86cc5194eca009519b9631d081867366fe5c44"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "070c7e591420d49128fea3160076391425d2c615", "filename": "clippy_lints/src/lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_lints%2Fsrc%2Flifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_lints%2Fsrc%2Flifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flifetimes.rs?ref=57304823dbd1c246d1166e85c156e694d2f7a184", "patch": "@@ -371,7 +371,7 @@ impl<'a, 'tcx> RefVisitor<'a, 'tcx> {\n         if let Some(ref lt) = *lifetime {\n             if lt.name == LifetimeName::Static {\n                 self.lts.push(RefLt::Static);\n-            } else if let LifetimeName::Param(ParamName::Fresh(_)) = lt.name {\n+            } else if let LifetimeName::Param(_, ParamName::Fresh) = lt.name {\n                 // Fresh lifetimes generated should be ignored.\n             } else if lt.is_elided() {\n                 self.lts.push(RefLt::Unnamed);"}, {"sha": "0b96f6ff6835800aec2f42ec9614c88319c8425a", "filename": "clippy_lints/src/ptr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_lints%2Fsrc%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_lints%2Fsrc%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fptr.rs?ref=57304823dbd1c246d1166e85c156e694d2f7a184", "patch": "@@ -343,7 +343,7 @@ impl fmt::Display for RefPrefix {\n         use fmt::Write;\n         f.write_char('&')?;\n         match self.lt {\n-            LifetimeName::Param(ParamName::Plain(name)) => {\n+            LifetimeName::Param(_, ParamName::Plain(name)) => {\n                 name.fmt(f)?;\n                 f.write_char(' ')?;\n             },"}, {"sha": "fc1a4e1f6025555bb7c472d6c4c0968676bf3a9b", "filename": "clippy_utils/src/hir_utils.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_utils%2Fsrc%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/57304823dbd1c246d1166e85c156e694d2f7a184/clippy_utils%2Fsrc%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fhir_utils.rs?ref=57304823dbd1c246d1166e85c156e694d2f7a184", "patch": "@@ -902,16 +902,14 @@ impl<'a, 'tcx> SpanlessHash<'a, 'tcx> {\n \n     pub fn hash_lifetime(&mut self, lifetime: Lifetime) {\n         std::mem::discriminant(&lifetime.name).hash(&mut self.s);\n-        if let LifetimeName::Param(ref name) = lifetime.name {\n+        if let LifetimeName::Param(param_id, ref name) = lifetime.name {\n             std::mem::discriminant(name).hash(&mut self.s);\n+            param_id.hash(&mut self.s);\n             match name {\n                 ParamName::Plain(ref ident) => {\n                     ident.name.hash(&mut self.s);\n                 },\n-                ParamName::Fresh(ref size) => {\n-                    size.hash(&mut self.s);\n-                },\n-                ParamName::Error => {},\n+                ParamName::Fresh | ParamName::Error => {},\n             }\n         }\n     }"}]}