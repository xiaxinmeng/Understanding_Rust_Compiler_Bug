{"sha": "10ee0f68a6815fafa69f58daf347f0c2a8339f32", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEwZWUwZjY4YTY4MTVmYWZhNjlmNThkYWYzNDdmMGMyYTgzMzlmMzI=", "commit": {"author": {"name": "mark", "email": "markm@cs.wisc.edu", "date": "2018-07-14T04:48:15Z"}, "committer": {"name": "mark", "email": "markm@cs.wisc.edu", "date": "2018-07-24T02:55:51Z"}, "message": "Allow by default, fix tests", "tree": {"sha": "2f05c5d7b6d538bd3b15d6bc0f91f547b0dcb2c8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2f05c5d7b6d538bd3b15d6bc0f91f547b0dcb2c8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/10ee0f68a6815fafa69f58daf347f0c2a8339f32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/10ee0f68a6815fafa69f58daf347f0c2a8339f32", "html_url": "https://github.com/rust-lang/rust/commit/10ee0f68a6815fafa69f58daf347f0c2a8339f32", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/10ee0f68a6815fafa69f58daf347f0c2a8339f32/comments", "author": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mark-i-m", "id": 8827840, "node_id": "MDQ6VXNlcjg4Mjc4NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/8827840?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mark-i-m", "html_url": "https://github.com/mark-i-m", "followers_url": "https://api.github.com/users/mark-i-m/followers", "following_url": "https://api.github.com/users/mark-i-m/following{/other_user}", "gists_url": "https://api.github.com/users/mark-i-m/gists{/gist_id}", "starred_url": "https://api.github.com/users/mark-i-m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mark-i-m/subscriptions", "organizations_url": "https://api.github.com/users/mark-i-m/orgs", "repos_url": "https://api.github.com/users/mark-i-m/repos", "events_url": "https://api.github.com/users/mark-i-m/events{/privacy}", "received_events_url": "https://api.github.com/users/mark-i-m/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6cb09ccf9f524590d7cc9f8c97732742446ae2b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6cb09ccf9f524590d7cc9f8c97732742446ae2b2", "html_url": "https://github.com/rust-lang/rust/commit/6cb09ccf9f524590d7cc9f8c97732742446ae2b2"}], "stats": {"total": 33, "additions": 26, "deletions": 7}, "files": [{"sha": "4184cba7db3ef6ee4343b52a1d89d1d47c6b2bc1", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -335,7 +335,7 @@ declare_lint! {\n pub mod parser {\n     declare_lint! {\n         pub QUESTION_MARK_MACRO_SEP,\n-        Warn,\n+        Allow,\n         \"detects the use of `?` as a macro separator\"\n     }\n }"}, {"sha": "4b077aa8dd4c6d437113a945e58c823da98b0e95", "filename": "src/libsyntax/parse/lexer/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Flexer%2Fmod.rs?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -1807,6 +1807,7 @@ mod tests {\n             raw_identifier_spans: Lock::new(Vec::new()),\n             registered_diagnostics: Lock::new(ErrorMap::new()),\n             non_modrs_mods: Lock::new(vec![]),\n+            buffered_lints: Lock::new(vec![]),\n         }\n     }\n "}, {"sha": "f1777745e06c343ea61bb5366566d8ed8739572e", "filename": "src/test/run-pass-fulldeps/auxiliary/procedural_mbe_matching.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fprocedural_mbe_matching.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fprocedural_mbe_matching.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Fprocedural_mbe_matching.rs?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -20,7 +20,7 @@ extern crate rustc_plugin;\n \n use syntax::feature_gate::Features;\n use syntax::parse::token::{NtExpr, NtPat};\n-use syntax::ast::{Ident, Pat};\n+use syntax::ast::{Ident, Pat, NodeId};\n use syntax::tokenstream::{TokenTree};\n use syntax::ext::base::{ExtCtxt, MacResult, MacEager};\n use syntax::ext::build::AstBuilder;\n@@ -41,7 +41,9 @@ fn expand_mbe_matches(cx: &mut ExtCtxt, _: Span, args: &[TokenTree])\n                                     cx.parse_sess,\n                                     &Features::new(),\n                                     &[],\n-                                    Edition::Edition2015);\n+                                    Edition::Edition2015,\n+                                    // not used...\n+                                    NodeId::new(0));\n     let map = match TokenTree::parse(cx, &mbe_matcher, args.iter().cloned().collect()) {\n         Success(map) => map,\n         Failure(_, tok) => {"}, {"sha": "dc19487f3af6538a2e78005f41fb9d638a25a196", "filename": "src/test/ui/issue-39388.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fissue-39388.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fissue-39388.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-39388.stderr?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -1,7 +1,7 @@\n-error: expected one of: `*`, `+`, or `?`\n+error: expected `*` or `+`\n   --> $DIR/issue-39388.rs:14:22\n    |\n-LL |     (($($a:tt)*) = ($($b:tt))*) => { //~ ERROR expected one of: `*`, `+`, or `?`\n+LL |     (($($a:tt)*) = ($($b:tt))*) => { //~ ERROR expected `*` or `+`\n    |                      ^^^^^^^\n \n error: aborting due to previous error"}, {"sha": "2e06b4bd5c2405819a29fe8efbe2822d5c48257b", "filename": "src/test/ui/macros/macro-at-most-once-rep-2015-ques-sep.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.rs", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.rs?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -14,12 +14,16 @@\n // compile-flags: --edition=2015\n // compile-pass\n \n+#![warn(rust_2018_compatibility)]\n+\n macro_rules! bar {\n     ($(a)?*) => {} //~WARN using `?` as a separator\n+    //~^WARN this was previously accepted\n }\n \n macro_rules! baz {\n     ($(a)?+) => {} //~WARN using `?` as a separator\n+    //~^WARN this was previously accepted\n }\n \n fn main() {"}, {"sha": "db1872c24134ae51049705ad7b5793ea6a362056", "filename": "src/test/ui/macros/macro-at-most-once-rep-2015-ques-sep.stderr", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/10ee0f68a6815fafa69f58daf347f0c2a8339f32/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fmacro-at-most-once-rep-2015-ques-sep.stderr?ref=10ee0f68a6815fafa69f58daf347f0c2a8339f32", "patch": "@@ -1,12 +1,24 @@\n warning: using `?` as a separator is deprecated and will be a hard error in an upcoming edition\n-  --> $DIR/macro-at-most-once-rep-2015-ques-sep.rs:18:10\n+  --> $DIR/macro-at-most-once-rep-2015-ques-sep.rs:20:10\n    |\n LL |     ($(a)?*) => {} //~WARN using `?` as a separator\n    |          ^\n+   |\n+note: lint level defined here\n+  --> $DIR/macro-at-most-once-rep-2015-ques-sep.rs:17:9\n+   |\n+LL | #![warn(rust_2018_compatibility)]\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^\n+   = note: #[warn(question_mark_macro_sep)] implied by #[warn(rust_2018_compatibility)]\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2018 edition!\n+   = note: for more information, see issue #48075 <https://github.com/rust-lang/rust/issues/48075>\n \n warning: using `?` as a separator is deprecated and will be a hard error in an upcoming edition\n-  --> $DIR/macro-at-most-once-rep-2015-ques-sep.rs:22:10\n+  --> $DIR/macro-at-most-once-rep-2015-ques-sep.rs:25:10\n    |\n LL |     ($(a)?+) => {} //~WARN using `?` as a separator\n    |          ^\n+   |\n+   = warning: this was previously accepted by the compiler but is being phased out; it will become a hard error in the 2018 edition!\n+   = note: for more information, see issue #48075 <https://github.com/rust-lang/rust/issues/48075>\n "}]}