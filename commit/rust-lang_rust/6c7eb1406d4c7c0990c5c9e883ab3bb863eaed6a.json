{"sha": "6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZjN2ViMTQwNmQ0YzdjMDk5MGM1YzllODgzYWIzYmI4NjNlYWVkNmE=", "commit": {"author": {"name": "Philip Munksgaard", "email": "pmunksgaard@gmail.com", "date": "2018-10-11T12:34:43Z"}, "committer": {"name": "Philip Munksgaard", "email": "pmunksgaard@gmail.com", "date": "2018-10-11T12:37:56Z"}, "message": "Fix spelling in the documentation to htmldocck.py", "tree": {"sha": "de9461798fe11bf9809e68d4246f0729af8b5afe", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de9461798fe11bf9809e68d4246f0729af8b5afe"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a", "html_url": "https://github.com/rust-lang/rust/commit/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a/comments", "author": {"login": "Munksgaard", "id": 230613, "node_id": "MDQ6VXNlcjIzMDYxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/230613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Munksgaard", "html_url": "https://github.com/Munksgaard", "followers_url": "https://api.github.com/users/Munksgaard/followers", "following_url": "https://api.github.com/users/Munksgaard/following{/other_user}", "gists_url": "https://api.github.com/users/Munksgaard/gists{/gist_id}", "starred_url": "https://api.github.com/users/Munksgaard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Munksgaard/subscriptions", "organizations_url": "https://api.github.com/users/Munksgaard/orgs", "repos_url": "https://api.github.com/users/Munksgaard/repos", "events_url": "https://api.github.com/users/Munksgaard/events{/privacy}", "received_events_url": "https://api.github.com/users/Munksgaard/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Munksgaard", "id": 230613, "node_id": "MDQ6VXNlcjIzMDYxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/230613?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Munksgaard", "html_url": "https://github.com/Munksgaard", "followers_url": "https://api.github.com/users/Munksgaard/followers", "following_url": "https://api.github.com/users/Munksgaard/following{/other_user}", "gists_url": "https://api.github.com/users/Munksgaard/gists{/gist_id}", "starred_url": "https://api.github.com/users/Munksgaard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Munksgaard/subscriptions", "organizations_url": "https://api.github.com/users/Munksgaard/orgs", "repos_url": "https://api.github.com/users/Munksgaard/repos", "events_url": "https://api.github.com/users/Munksgaard/events{/privacy}", "received_events_url": "https://api.github.com/users/Munksgaard/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7b5ba8661aa844a06c37f22d7af0afb1807d347", "url": "https://api.github.com/repos/rust-lang/rust/commits/e7b5ba8661aa844a06c37f22d7af0afb1807d347", "html_url": "https://github.com/rust-lang/rust/commit/e7b5ba8661aa844a06c37f22d7af0afb1807d347"}], "stats": {"total": 52, "additions": 27, "deletions": 25}, "files": [{"sha": "91010262981e884981a46110a6acc659bc1d7e99", "filename": "src/etc/htmldocck.py", "status": "modified", "additions": 27, "deletions": 25, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a/src%2Fetc%2Fhtmldocck.py", "raw_url": "https://github.com/rust-lang/rust/raw/6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a/src%2Fetc%2Fhtmldocck.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fhtmldocck.py?ref=6c7eb1406d4c7c0990c5c9e883ab3bb863eaed6a", "patch": "@@ -15,65 +15,66 @@\n \n The principle is simple: This script receives a path to generated HTML\n documentation and a \"template\" script, which has a series of check\n-commands like `@has` or `@matches`. Each command can be used to check if\n+commands like `@has` or `@matches`. Each command is used to check if\n some pattern is present or not present in the particular file or in\n-the particular node of HTML tree. In many cases, the template script\n-happens to be a source code given to rustdoc.\n+a particular node of the HTML tree. In many cases, the template script\n+happens to be the source code given to rustdoc.\n \n While it indeed is possible to test in smaller portions, it has been\n hard to construct tests in this fashion and major rendering errors were\n-discovered much later. This script is designed for making the black-box\n-and regression testing of Rustdoc easy. This does not preclude the needs\n-for unit testing, but can be used to complement related tests by quickly\n+discovered much later. This script is designed to make black-box and\n+regression testing of Rustdoc easy. This does not preclude the needs for\n+unit testing, but can be used to complement related tests by quickly\n showing the expected renderings.\n \n In order to avoid one-off dependencies for this task, this script uses\n a reasonably working HTML parser and the existing XPath implementation\n-from Python's standard library. Hopefully we won't render\n+from Python's standard library. Hopefully, we won't render\n non-well-formed HTML.\n \n # Commands\n \n Commands start with an `@` followed by a command name (letters and\n hyphens), and zero or more arguments separated by one or more whitespace\n-and optionally delimited with single or double quotes. The `@` mark\n-cannot be preceded by a non-whitespace character. Other lines (including\n-every text up to the first `@`) are ignored, but it is recommended to\n-avoid the use of `@` in the template file.\n+characters and optionally delimited with single or double quotes. The `@`\n+mark cannot be preceded by a non-whitespace character. Other lines\n+(including every text up to the first `@`) are ignored, but it is\n+recommended to avoid the use of `@` in the template file.\n \n There are a number of supported commands:\n \n-* `@has PATH` checks for the existence of given file.\n+* `@has PATH` checks for the existence of the given file.\n \n   `PATH` is relative to the output directory. It can be given as `-`\n   which repeats the most recently used `PATH`.\n \n * `@has PATH PATTERN` and `@matches PATH PATTERN` checks for\n-  the occurrence of given `PATTERN` in the given file. Only one\n-  occurrence of given pattern is enough.\n+  the occurrence of the given pattern `PATTERN` in the specified file.\n+  Only one occurrence of the pattern is enough.\n \n   For `@has`, `PATTERN` is a whitespace-normalized (every consecutive\n   whitespace being replaced by one single space character) string.\n   The entire file is also whitespace-normalized including newlines.\n \n   For `@matches`, `PATTERN` is a Python-supported regular expression.\n-  The file remains intact but the regexp is matched with no `MULTILINE`\n-  and `IGNORECASE` option. You can still use a prefix `(?m)` or `(?i)`\n+  The file remains intact but the regexp is matched without the `MULTILINE`\n+  and `IGNORECASE` options. You can still use a prefix `(?m)` or `(?i)`\n   to override them, and `\\A` and `\\Z` for definitely matching\n   the beginning and end of the file.\n \n   (The same distinction goes to other variants of these commands.)\n \n * `@has PATH XPATH PATTERN` and `@matches PATH XPATH PATTERN` checks for\n-  the presence of given `XPATH` in the given HTML file, and also\n-  the occurrence of given `PATTERN` in the matching node or attribute.\n-  Only one occurrence of given pattern in the match is enough.\n+  the presence of the given XPath `XPATH` in the specified HTML file,\n+  and also the occurrence of the given pattern `PATTERN` in the matching\n+  node or attribute. Only one occurrence of the pattern in the match\n+  is enough.\n \n   `PATH` should be a valid and well-formed HTML file. It does *not*\n   accept arbitrary HTML5; it should have matching open and close tags\n   and correct entity references at least.\n \n-  `XPATH` is an XPath expression to match. This is fairly limited:\n+  `XPATH` is an XPath expression to match. The XPath is fairly limited:\n   `tag`, `*`, `.`, `//`, `..`, `[@attr]`, `[@attr='value']`, `[tag]`,\n   `[POS]` (element located in given `POS`), `[last()-POS]`, `text()`\n   and `@attr` (both as the last segment) are supported. Some examples:\n@@ -85,19 +86,20 @@\n   - `//h1[@class=\"fqn\"]/span[1]/a[last()]/@class` matches a value of\n     `class` attribute in the last `a` element (can be followed by more\n     elements that are not `a`) inside the first `span` in the `h1` with\n-    a class of `fqn`. Note that there cannot be no additional elements\n+    a class of `fqn`. Note that there cannot be any additional elements\n     between them due to the use of `/` instead of `//`.\n \n   Do not try to use non-absolute paths, it won't work due to the flawed\n   ElementTree implementation. The script rejects them.\n \n   For the text matches (i.e. paths not ending with `@attr`), any\n   subelements are flattened into one string; this is handy for ignoring\n-  highlights for example. If you want to simply check the presence of\n-  given node or attribute, use an empty string (`\"\"`) as a `PATTERN`.\n+  highlights for example. If you want to simply check for the presence of\n+  a given node or attribute, use an empty string (`\"\"`) as a `PATTERN`.\n \n-* `@count PATH XPATH COUNT' checks for the occurrence of given XPath\n-  in the given file. The number of occurrences must match the given count.\n+* `@count PATH XPATH COUNT' checks for the occurrence of the given XPath\n+  in the specified file. The number of occurrences must match the given\n+  count.\n \n * `@has-dir PATH` checks for the existence of the given directory.\n "}]}