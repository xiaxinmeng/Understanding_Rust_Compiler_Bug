{"sha": "c26dd4d4140202283221c05758b1b1531b2fbb96", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMyNmRkNGQ0MTQwMjAyMjgzMjIxYzA1NzU4YjFiMTUzMWIyZmJiOTY=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-01-30T04:36:48Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-01-30T04:36:48Z"}, "message": "Rollup merge of #81409 - gilescope:chars_count, r=joshtriplett\n\nSlight simplification of chars().count()\n\nSlight simplification: No need to call len(), we can just count the number of non continuation bytes.\n\nI can't see any reason not to do this, can you?", "tree": {"sha": "c4a8d8ef3ee93f46e038f003775cd7da268d098d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4a8d8ef3ee93f46e038f003775cd7da268d098d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c26dd4d4140202283221c05758b1b1531b2fbb96", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgFOJhCRBK7hj4Ov3rIwAAdHIIAECZv+oJs9RLem0OiM5PbrA+\n/TJ0IhfuyXp3ZKqmqV/YBWsiZ7qViEM1rWdXO42uhwGxJ+hSfq3lnuZB+vo3HrJb\nC5fXXBF2qim9rnh8RTWapF18McHe4lKCVUu14HHgd11waqeZk1xtHoZu+zQy2hX0\nm5QQzebS852kod6tiNxQeKaSTKU4NOChxZD9PSS3G6WafJxLgo2eOmb8g3qzV00e\nAS5Ctjp2t8wVk4r4OIQtcquwV7DKz3/pTjEJfXBrbnYAk85qnovQwIfvPt6XqJ+V\njHktJI7CWVLxoqmG23+Gj98YQZs7hg2jBpNO8OBhAnV/TTIIH8Bclcaxrx7xXiw=\n=W6lm\n-----END PGP SIGNATURE-----\n", "payload": "tree c4a8d8ef3ee93f46e038f003775cd7da268d098d\nparent 7fa991fb8545d8b03f0ab953770cb4fa08921abc\nparent a623ea5301737507a8229c2ddae74b20f727bd1b\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1611981408 +0900\ncommitter GitHub <noreply@github.com> 1611981408 +0900\n\nRollup merge of #81409 - gilescope:chars_count, r=joshtriplett\n\nSlight simplification of chars().count()\n\nSlight simplification: No need to call len(), we can just count the number of non continuation bytes.\n\nI can't see any reason not to do this, can you?\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c26dd4d4140202283221c05758b1b1531b2fbb96", "html_url": "https://github.com/rust-lang/rust/commit/c26dd4d4140202283221c05758b1b1531b2fbb96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c26dd4d4140202283221c05758b1b1531b2fbb96/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7fa991fb8545d8b03f0ab953770cb4fa08921abc", "url": "https://api.github.com/repos/rust-lang/rust/commits/7fa991fb8545d8b03f0ab953770cb4fa08921abc", "html_url": "https://github.com/rust-lang/rust/commit/7fa991fb8545d8b03f0ab953770cb4fa08921abc"}, {"sha": "a623ea5301737507a8229c2ddae74b20f727bd1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/a623ea5301737507a8229c2ddae74b20f727bd1b", "html_url": "https://github.com/rust-lang/rust/commit/a623ea5301737507a8229c2ddae74b20f727bd1b"}], "stats": {"total": 7, "additions": 1, "deletions": 6}, "files": [{"sha": "83f484dc570c468d6b0a27b4c79dc79613871d74", "filename": "library/core/src/str/iter.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c26dd4d4140202283221c05758b1b1531b2fbb96/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c26dd4d4140202283221c05758b1b1531b2fbb96/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fstr%2Fiter.rs?ref=c26dd4d4140202283221c05758b1b1531b2fbb96", "patch": "@@ -47,12 +47,7 @@ impl<'a> Iterator for Chars<'a> {\n     #[inline]\n     fn count(self) -> usize {\n         // length in `char` is equal to the number of non-continuation bytes\n-        let bytes_len = self.iter.len();\n-        let mut cont_bytes = 0;\n-        for &byte in self.iter {\n-            cont_bytes += utf8_is_cont_byte(byte) as usize;\n-        }\n-        bytes_len - cont_bytes\n+        self.iter.filter(|&&byte| !utf8_is_cont_byte(byte)).count()\n     }\n \n     #[inline]"}]}