{"sha": "6189602bb84019b25ab8f1f5287c366ba50d0e66", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxODk2MDJiYjg0MDE5YjI1YWI4ZjFmNTI4N2MzNjZiYTUwZDBlNjY=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2018-05-10T15:41:24Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2018-05-10T15:41:24Z"}, "message": "fix nll reference harder", "tree": {"sha": "140ee8bc7749bb9c39d0de32c77efa4cc5a68714", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/140ee8bc7749bb9c39d0de32c77efa4cc5a68714"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6189602bb84019b25ab8f1f5287c366ba50d0e66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6189602bb84019b25ab8f1f5287c366ba50d0e66", "html_url": "https://github.com/rust-lang/rust/commit/6189602bb84019b25ab8f1f5287c366ba50d0e66", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6189602bb84019b25ab8f1f5287c366ba50d0e66/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72c235d6aea713d233fa1536b344c59b93c28295", "url": "https://api.github.com/repos/rust-lang/rust/commits/72c235d6aea713d233fa1536b344c59b93c28295", "html_url": "https://github.com/rust-lang/rust/commit/72c235d6aea713d233fa1536b344c59b93c28295"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "b955a51e38d73433184f516491839ff030d7074c", "filename": "src/test/ui/nll/get_default.nll.stderr", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/6189602bb84019b25ab8f1f5287c366ba50d0e66/src%2Ftest%2Fui%2Fnll%2Fget_default.nll.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6189602bb84019b25ab8f1f5287c366ba50d0e66/src%2Ftest%2Fui%2Fnll%2Fget_default.nll.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fget_default.nll.stderr?ref=6189602bb84019b25ab8f1f5287c366ba50d0e66", "patch": "@@ -41,7 +41,7 @@ LL |         match map.get() {\n    |               --- immutable borrow occurs here\n ...\n LL |                 map.set(String::new()); // Ideally, this would not error.\n-   |                 ^^^ mutable borrow occurs here\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^ mutable borrow occurs here\n    |\n note: borrowed value must be valid for the anonymous lifetime #1 defined on the function body at 26:1...\n   --> $DIR/get_default.rs:26:1\n@@ -55,14 +55,26 @@ LL | |     }\n LL | | }\n    | |_^\n \n+error[E0502]: cannot borrow `*map` as mutable because it is also borrowed as immutable (Mir)\n+  --> $DIR/get_default.rs:45:17\n+   |\n+LL |         match map.get() {\n+   |               --- immutable borrow occurs here\n+LL |             Some(v) => {\n+LL |                 map.set(String::new()); // Both AST and MIR error here\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^ mutable borrow occurs here\n+...\n+LL |                 return v;\n+   |                        - borrow later used here\n+\n error[E0502]: cannot borrow `*map` as mutable because it is also borrowed as immutable (Mir)\n   --> $DIR/get_default.rs:51:17\n    |\n LL |         match map.get() {\n    |               --- immutable borrow occurs here\n ...\n LL |                 map.set(String::new()); // Ideally, just AST would error here\n-   |                 ^^^ mutable borrow occurs here\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^ mutable borrow occurs here\n    |\n note: borrowed value must be valid for the anonymous lifetime #1 defined on the function body at 41:1...\n   --> $DIR/get_default.rs:41:1\n@@ -76,18 +88,6 @@ LL | |     }\n LL | | }\n    | |_^\n \n-error[E0502]: cannot borrow `*map` as mutable because it is also borrowed as immutable (Mir)\n-  --> $DIR/get_default.rs:45:17\n-   |\n-LL |         match map.get() {\n-   |               --- immutable borrow occurs here\n-LL |             Some(v) => {\n-LL |                 map.set(String::new()); // Both AST and MIR error here\n-   |                 ^^^ mutable borrow occurs here\n-...\n-LL |                 return v;\n-   |                        - borrow later used here\n-\n error: aborting due to 6 previous errors\n \n For more information about this error, try `rustc --explain E0502`."}]}