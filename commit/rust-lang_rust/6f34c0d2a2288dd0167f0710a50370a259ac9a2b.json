{"sha": "6f34c0d2a2288dd0167f0710a50370a259ac9a2b", "node_id": "C_kwDOAAsO6NoAKDZmMzRjMGQyYTIyODhkZDAxNjdmMDcxMGE1MDM3MGEyNTlhYzlhMmI", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-12-15T07:36:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-12-15T07:36:21Z"}, "message": "Rollup merge of #91584 - GuillaumeGomez:improve-rustdoc-gui-tester-code, r=jsha\n\nImprove code for rustdoc-gui tester\n\nFollowing advice given in #91391.\n\nIt nicely improves the code readability. :)\n\nr? `@jsha`", "tree": {"sha": "6871ee19361670abd5d6a756e5d4d78c8412cd68", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6871ee19361670abd5d6a756e5d4d78c8412cd68"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f34c0d2a2288dd0167f0710a50370a259ac9a2b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhuZr1CRBK7hj4Ov3rIwAAVeAIAEEAl2msTI2C2jGJq9WPvcxN\nQt8qmTuVtn2PyPcKxpuvTF4xqUPvJ6CyCwMDTCfNrFKgDzX0VpS3GpSv3MCjlNRy\nROF0vVpK4qUm7Whez8FZyNA4rnZrxgNvvsXv0OyBpssapNTGyS/+ZX4gkgeKF95g\npZLfhTLwhJQkgsKH8v9FM+iVgXNVkyAv7sXqZPZ8XwNI7OJTMXHc0YRRoH8ExIE1\nLCd10Gwp5f6hd4Bry9rPGmJmzm0E99C83zdtNKPS0kGnw4QLXUDQcai+rM8GpnOJ\nhmfDH5mfV89A7AqJ5O0rwaHiphuNK1bhWZv0MuUbrnoMrW/eRPhZfX7y/D+zsKQ=\n=Rl5B\n-----END PGP SIGNATURE-----\n", "payload": "tree 6871ee19361670abd5d6a756e5d4d78c8412cd68\nparent efc49c142a7a9c80841f51cbae92fed6f40adfcc\nparent 4c1e24beb7dcf9b838f3b4963b527747c8a4e682\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1639553781 +0100\ncommitter GitHub <noreply@github.com> 1639553781 +0100\n\nRollup merge of #91584 - GuillaumeGomez:improve-rustdoc-gui-tester-code, r=jsha\n\nImprove code for rustdoc-gui tester\n\nFollowing advice given in #91391.\n\nIt nicely improves the code readability. :)\n\nr? `@jsha`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f34c0d2a2288dd0167f0710a50370a259ac9a2b", "html_url": "https://github.com/rust-lang/rust/commit/6f34c0d2a2288dd0167f0710a50370a259ac9a2b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f34c0d2a2288dd0167f0710a50370a259ac9a2b/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efc49c142a7a9c80841f51cbae92fed6f40adfcc", "url": "https://api.github.com/repos/rust-lang/rust/commits/efc49c142a7a9c80841f51cbae92fed6f40adfcc", "html_url": "https://github.com/rust-lang/rust/commit/efc49c142a7a9c80841f51cbae92fed6f40adfcc"}, {"sha": "4c1e24beb7dcf9b838f3b4963b527747c8a4e682", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c1e24beb7dcf9b838f3b4963b527747c8a4e682", "html_url": "https://github.com/rust-lang/rust/commit/4c1e24beb7dcf9b838f3b4963b527747c8a4e682"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "32340ec7eecf2de70ce21723ea0ec2ade91c9e54", "filename": "src/tools/rustdoc-gui/tester.js", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6f34c0d2a2288dd0167f0710a50370a259ac9a2b/src%2Ftools%2Frustdoc-gui%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/6f34c0d2a2288dd0167f0710a50370a259ac9a2b/src%2Ftools%2Frustdoc-gui%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-gui%2Ftester.js?ref=6f34c0d2a2288dd0167f0710a50370a259ac9a2b", "patch": "@@ -133,7 +133,7 @@ async function main(argv) {\n     // Print successful tests too\n     let debug = false;\n     // Run tests in sequentially\n-    let no_headless = false;\n+    let headless = true;\n     const options = new Options();\n     try {\n         // This is more convenient that setting fields one by one.\n@@ -150,7 +150,7 @@ async function main(argv) {\n         }\n         if (opts[\"no_headless\"]) {\n             args.push(\"--no-headless\");\n-            no_headless = true;\n+            headless = false;\n         }\n         options.parseArguments(args);\n     } catch (error) {\n@@ -172,7 +172,7 @@ async function main(argv) {\n     }\n     files.sort();\n \n-    if (no_headless) {\n+    if (!headless) {\n         opts[\"jobs\"] = 1;\n         console.log(\"`--no-headless` option is active, disabling concurrency for running tests.\");\n     }\n@@ -181,7 +181,7 @@ async function main(argv) {\n \n     if (opts[\"jobs\"] < 1) {\n         process.setMaxListeners(files.length + 1);\n-    } else if (!no_headless) {\n+    } else if (headless) {\n         process.setMaxListeners(opts[\"jobs\"] + 1);\n     }\n \n@@ -226,7 +226,7 @@ async function main(argv) {\n             await Promise.race(tests_queue);\n         }\n     }\n-    if (!no_headless && tests_queue.length > 0) {\n+    if (tests_queue.length > 0) {\n         await Promise.all(tests_queue);\n     }\n     status_bar.finish();"}]}