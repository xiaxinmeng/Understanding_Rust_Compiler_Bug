{"sha": "14f3f6c71294fbbcb0a32286d942a4080156c6bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE0ZjNmNmM3MTI5NGZiYmNiMGEzMjI4NmQ5NDJhNDA4MDE1NmM2YmM=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-26T18:07:13Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-03-27T08:41:42Z"}, "message": "librustc_interface => 2018", "tree": {"sha": "096a18731fcad5d51b7cc3431e339e41b5767777", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/096a18731fcad5d51b7cc3431e339e41b5767777"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/14f3f6c71294fbbcb0a32286d942a4080156c6bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/14f3f6c71294fbbcb0a32286d942a4080156c6bc", "html_url": "https://github.com/rust-lang/rust/commit/14f3f6c71294fbbcb0a32286d942a4080156c6bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/14f3f6c71294fbbcb0a32286d942a4080156c6bc/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd363d14ae842ab5aae3ee81b337f26aabcb8875", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd363d14ae842ab5aae3ee81b337f26aabcb8875", "html_url": "https://github.com/rust-lang/rust/commit/dd363d14ae842ab5aae3ee81b337f26aabcb8875"}], "stats": {"total": 59, "additions": 21, "deletions": 38}, "files": [{"sha": "356547db88675c7426ab3530385e4a271f2da606", "filename": "src/librustc_interface/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2FCargo.toml?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -2,6 +2,7 @@\n authors = [\"The Rust Project Developers\"]\n name = \"rustc_interface\"\n version = \"0.0.0\"\n+edition = \"2018\"\n \n [lib]\n name = \"rustc_interface\""}, {"sha": "bec868be505b50ab86e78f4ffede21177aea71ee", "filename": "src/librustc_interface/interface.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Finterface.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Finterface.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Finterface.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -1,4 +1,8 @@\n-use queries::Queries;\n+use crate::queries::Queries;\n+use crate::util;\n+use crate::profile;\n+pub use crate::passes::BoxedResolver;\n+\n use rustc::lint;\n use rustc::session::config::{self, Input};\n use rustc::session::{DiagnosticOutput, Session};\n@@ -15,10 +19,6 @@ use std::result;\n use std::sync::{Arc, Mutex};\n use syntax;\n use syntax::source_map::{FileLoader, SourceMap};\n-use util;\n-use profile;\n-\n-pub use passes::BoxedResolver;\n \n pub type Result<T> = result::Result<T, ErrorReported>;\n "}, {"sha": "3314681b6981a5096da6821cddaf61cfa40a13bb", "filename": "src/librustc_interface/lib.rs", "status": "modified", "additions": 2, "deletions": 25, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Flib.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -6,37 +6,14 @@\n #![feature(generators)]\n #![cfg_attr(unix, feature(libc))]\n \n+#![deny(rust_2018_idioms)]\n+\n #![allow(unused_imports)]\n \n #![recursion_limit=\"256\"]\n \n #[cfg(unix)]\n extern crate libc;\n-#[macro_use]\n-extern crate log;\n-extern crate rustc;\n-extern crate rustc_codegen_utils;\n-extern crate rustc_allocator;\n-extern crate rustc_borrowck;\n-extern crate rustc_incremental;\n-extern crate rustc_traits;\n-#[macro_use]\n-extern crate rustc_data_structures;\n-extern crate rustc_errors;\n-extern crate rustc_lint;\n-extern crate rustc_metadata;\n-extern crate rustc_mir;\n-extern crate rustc_passes;\n-extern crate rustc_plugin;\n-extern crate rustc_privacy;\n-extern crate rustc_rayon as rayon;\n-extern crate rustc_resolve;\n-extern crate rustc_typeck;\n-extern crate smallvec;\n-extern crate serialize;\n-extern crate syntax;\n-extern crate syntax_pos;\n-extern crate syntax_ext;\n \n pub mod interface;\n mod passes;"}, {"sha": "318857c3406e32f850b3b5755c2d87cf9e9b956a", "filename": "src/librustc_interface/passes.rs", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fpasses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fpasses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fpasses.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -1,7 +1,8 @@\n-use interface::{Compiler, Result};\n-use util;\n-use proc_macro_decls;\n+use crate::interface::{Compiler, Result};\n+use crate::util;\n+use crate::proc_macro_decls;\n \n+use log::{debug, info, warn, log_enabled};\n use rustc::dep_graph::DepGraph;\n use rustc::hir;\n use rustc::hir::lowering::lower_crate;\n@@ -20,6 +21,7 @@ use rustc::session::search_paths::PathKind;\n use rustc_allocator as allocator;\n use rustc_borrowck as borrowck;\n use rustc_codegen_utils::codegen_backend::CodegenBackend;\n+use rustc_data_structures::{box_region_allow_access, declare_box_region_type, parallel};\n use rustc_data_structures::fingerprint::Fingerprint;\n use rustc_data_structures::stable_hasher::StableHasher;\n use rustc_data_structures::sync::{Lrc, ParallelIterator, par_iter};\n@@ -758,7 +760,7 @@ pub fn prepare_outputs(\n     Ok(outputs)\n }\n \n-pub fn default_provide(providers: &mut ty::query::Providers) {\n+pub fn default_provide(providers: &mut ty::query::Providers<'_>) {\n     providers.analysis = analysis;\n     proc_macro_decls::provide(providers);\n     plugin::build::provide(providers);\n@@ -783,7 +785,7 @@ pub fn default_provide(providers: &mut ty::query::Providers) {\n     lint::provide(providers);\n }\n \n-pub fn default_provide_extern(providers: &mut ty::query::Providers) {\n+pub fn default_provide_extern(providers: &mut ty::query::Providers<'_>) {\n     cstore::provide_extern(providers);\n }\n "}, {"sha": "d0c8dff207083d6773692a279fac5c8c2724c006", "filename": "src/librustc_interface/profile/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fprofile%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fprofile%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fprofile%2Fmod.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -1,8 +1,9 @@\n+use log::debug;\n+use rustc::dep_graph::DepNode;\n use rustc::session::Session;\n use rustc::util::common::{ProfQDumpParams, ProfileQueriesMsg, profq_msg, profq_set_chan};\n use std::sync::mpsc::{Receiver};\n use std::io::{Write};\n-use rustc::dep_graph::{DepNode};\n use std::time::{Duration, Instant};\n \n pub mod trace;"}, {"sha": "570509ffb2b8ca1b7e6b5915ec5041dec1ef76dc", "filename": "src/librustc_interface/queries.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fqueries.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Fqueries.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Fqueries.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -1,5 +1,6 @@\n-use interface::{Compiler, Result};\n-use passes::{self, BoxedResolver, ExpansionResult, BoxedGlobalCtxt, PluginInfo};\n+use crate::interface::{Compiler, Result};\n+use crate::passes::{self, BoxedResolver, ExpansionResult, BoxedGlobalCtxt, PluginInfo};\n+\n use rustc_incremental::DepGraphFuture;\n use rustc_data_structures::sync::Lrc;\n use rustc::session::config::{Input, OutputFilenames, OutputType};"}, {"sha": "6e4f2bf24e32f0750ab4ecfbb231d73489ee6ef3", "filename": "src/librustc_interface/util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/14f3f6c71294fbbcb0a32286d942a4080156c6bc/src%2Flibrustc_interface%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_interface%2Futil.rs?ref=14f3f6c71294fbbcb0a32286d942a4080156c6bc", "patch": "@@ -1,3 +1,4 @@\n+use log::info;\n use rustc::session::config::{Input, OutputFilenames, ErrorOutputType};\n use rustc::session::{self, config, early_error, filesearch, Session, DiagnosticOutput};\n use rustc::session::CrateDisambiguator;"}]}