{"sha": "be40b588953df73a9e766b644b7eac9e7d287b99", "node_id": "C_kwDOAAsO6NoAKGJlNDBiNTg4OTUzZGY3M2E5ZTc2NmI2NDRiN2VhYzllN2QyODdiOTk", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-05-01T11:07:57Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-02T17:24:26Z"}, "message": "Stop warning against unrelated labels.", "tree": {"sha": "2885c6f341ef9953a5ad969acfb8fb361480fc32", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2885c6f341ef9953a5ad969acfb8fb361480fc32"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/be40b588953df73a9e766b644b7eac9e7d287b99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/be40b588953df73a9e766b644b7eac9e7d287b99", "html_url": "https://github.com/rust-lang/rust/commit/be40b588953df73a9e766b644b7eac9e7d287b99", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/be40b588953df73a9e766b644b7eac9e7d287b99/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "84e19930e341a9b68d55f1925c6c8ed43dadac49", "url": "https://api.github.com/repos/rust-lang/rust/commits/84e19930e341a9b68d55f1925c6c8ed43dadac49", "html_url": "https://github.com/rust-lang/rust/commit/84e19930e341a9b68d55f1925c6c8ed43dadac49"}], "stats": {"total": 470, "additions": 42, "deletions": 428}, "files": [{"sha": "5c9074773de13c7cde8bd48d5e6b3b1e52d70436", "filename": "compiler/rustc_resolve/src/late.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate.rs?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -3151,7 +3151,6 @@ impl<'a: 'ast, 'b, 'ast> LateResolutionVisitor<'a, 'b, 'ast> {\n                     diagnostics::signal_label_shadowing(self.r.session, orig_ident, label.ident)\n                 }\n                 if rib.kind.is_label_barrier() {\n-                    rib.bindings.insert(ident, id);\n                     break;\n                 }\n             }"}, {"sha": "8cf66f31a0a1df988a64920a26ef70e0b3136f6b", "filename": "src/test/ui/hygiene/hygienic-labels-in-let.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.rs?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -52,7 +52,6 @@ pub fn main() {\n \n     let k: isize = {\n         'x: for _ in 0..1 {\n-            //~^ WARNING shadows a label name that is already in scope\n             // ditto\n             loop_x!(break 'x);\n             i += 1;\n@@ -63,7 +62,6 @@ pub fn main() {\n \n     let l: isize = {\n         'x: for _ in 0..1 {\n-            //~^ WARNING shadows a label name that is already in scope\n             // ditto\n             while_true!(break 'x);\n             i += 1;\n@@ -74,7 +72,6 @@ pub fn main() {\n \n     let n: isize = {\n         'x: for _ in 0..1 {\n-            //~^ WARNING shadows a label name that is already in scope\n             // ditto\n             run_once!(continue 'x);\n             i += 1;"}, {"sha": "e1c284600ea23db89da44cab509cb21fdbe68c39", "filename": "src/test/ui/hygiene/hygienic-labels-in-let.stderr", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels-in-let.stderr?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,29 +0,0 @@\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels-in-let.rs:54:9\n-   |\n-LL |         'x: loop {\n-   |         -- first declared here\n-...\n-LL |         'x: for _ in 0..1 {\n-   |         ^^ label `'x` already in scope\n-\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels-in-let.rs:65:9\n-   |\n-LL |         'x: loop {\n-   |         -- first declared here\n-...\n-LL |         'x: for _ in 0..1 {\n-   |         ^^ label `'x` already in scope\n-\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels-in-let.rs:76:9\n-   |\n-LL |         'x: loop {\n-   |         -- first declared here\n-...\n-LL |         'x: for _ in 0..1 {\n-   |         ^^ label `'x` already in scope\n-\n-warning: 3 warnings emitted\n-"}, {"sha": "6a7d81f045bfc587f40e0e191cd748ea199b9e1b", "filename": "src/test/ui/hygiene/hygienic-labels.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.rs?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -42,23 +42,17 @@ pub fn main() {\n     }\n \n     'x: loop {\n-        //~^ WARNING shadows a label name that is already in scope\n-\n         // ditto\n         loop_x!(break 'x);\n         panic!(\"break doesn't act hygienically inside infinite loop\");\n     }\n \n     'x: while 1 + 1 == 2 {\n-        //~^ WARNING shadows a label name that is already in scope\n-\n         while_x!(break 'x);\n         panic!(\"break doesn't act hygienically inside infinite while loop\");\n     }\n \n     'x: for _ in 0..1 {\n-        //~^ WARNING shadows a label name that is already in scope\n-\n         // ditto\n         run_once!(continue 'x);\n         panic!(\"continue doesn't act hygienically inside for loop\");"}, {"sha": "df1f3c701904b724257937415fb8cd87e6b09e58", "filename": "src/test/ui/hygiene/hygienic-labels.stderr", "status": "removed", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fhygiene%2Fhygienic-labels.stderr?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,29 +0,0 @@\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels.rs:44:5\n-   |\n-LL |     'x: for _ in 0..1 {\n-   |     -- first declared here\n-...\n-LL |     'x: loop {\n-   |     ^^ label `'x` already in scope\n-\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels.rs:52:5\n-   |\n-LL |     'x: for _ in 0..1 {\n-   |     -- first declared here\n-...\n-LL |     'x: while 1 + 1 == 2 {\n-   |     ^^ label `'x` already in scope\n-\n-warning: label name `'x` shadows a label name that is already in scope\n-  --> $DIR/hygienic-labels.rs:59:5\n-   |\n-LL |     'x: for _ in 0..1 {\n-   |     -- first declared here\n-...\n-LL |     'x: for _ in 0..1 {\n-   |     ^^ label `'x` already in scope\n-\n-warning: 3 warnings emitted\n-"}, {"sha": "4b5b9e92ca09a5ab244ac9c384bf6f525eeb6438", "filename": "src/test/ui/label/label_misspelled.stderr", "status": "modified", "additions": 24, "deletions": 72, "changes": 96, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled.stderr?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -2,10 +2,7 @@ error[E0425]: cannot find value `while_loop` in this scope\n   --> $DIR/label_misspelled.rs:6:9\n    |\n LL |     'while_loop: while true {\n-   |     -----------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ----------- a label with a similar name exists\n LL |\n LL |         while_loop;\n    |         ^^^^^^^^^^ not found in this scope\n@@ -14,10 +11,7 @@ error[E0425]: cannot find value `while_let` in this scope\n   --> $DIR/label_misspelled.rs:11:9\n    |\n LL |     'while_let: while let Some(_) = Some(()) {\n-   |     ----------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ---------- a label with a similar name exists\n LL |\n LL |         while_let;\n    |         ^^^^^^^^^ not found in this scope\n@@ -26,10 +20,7 @@ error[E0425]: cannot find value `for_loop` in this scope\n   --> $DIR/label_misspelled.rs:16:9\n    |\n LL |     'for_loop: for _ in 0..3 {\n-   |     ---------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     --------- a label with a similar name exists\n LL |\n LL |         for_loop;\n    |         ^^^^^^^^ not found in this scope\n@@ -38,10 +29,7 @@ error[E0425]: cannot find value `LOOP` in this scope\n   --> $DIR/label_misspelled.rs:21:9\n    |\n LL |     'LOOP: loop {\n-   |     -----\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ----- a label with a similar name exists\n LL |\n LL |         LOOP;\n    |         ^^^^ not found in this scope\n@@ -50,81 +38,45 @@ error[E0425]: cannot find value `LOOP` in this scope\n   --> $DIR/label_misspelled.rs:28:15\n    |\n LL |     'LOOP: loop {\n-   |     -----\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ----- a label with a similar name exists\n LL |         break LOOP;\n-   |               ^^^^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'LOOP;\n-   |               ~~~~~\n-help: use the similarly named label\n-   |\n-LL |         break 'LOOP;\n-   |               ~~~~~\n+   |               ^^^^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'LOOP`\n \n error[E0425]: cannot find value `while_loop` in this scope\n   --> $DIR/label_misspelled.rs:32:15\n    |\n LL |     'while_loop: while true {\n-   |     -----------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ----------- a label with a similar name exists\n LL |         break while_loop;\n-   |               ^^^^^^^^^^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'while_loop;\n-   |               ~~~~~~~~~~~\n-help: use the similarly named label\n-   |\n-LL |         break 'while_loop;\n-   |               ~~~~~~~~~~~\n+   |               ^^^^^^^^^^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'while_loop`\n \n error[E0425]: cannot find value `while_let` in this scope\n   --> $DIR/label_misspelled.rs:36:15\n    |\n LL |     'while_let: while let Some(_) = Some(()) {\n-   |     ----------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ---------- a label with a similar name exists\n LL |         break while_let;\n-   |               ^^^^^^^^^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'while_let;\n-   |               ~~~~~~~~~~\n-help: use the similarly named label\n-   |\n-LL |         break 'while_let;\n-   |               ~~~~~~~~~~\n+   |               ^^^^^^^^^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'while_let`\n \n error[E0425]: cannot find value `for_loop` in this scope\n   --> $DIR/label_misspelled.rs:40:15\n    |\n LL |     'for_loop: for _ in 0..3 {\n-   |     ---------\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     --------- a label with a similar name exists\n LL |         break for_loop;\n-   |               ^^^^^^^^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'for_loop;\n-   |               ~~~~~~~~~\n-help: use the similarly named label\n-   |\n-LL |         break 'for_loop;\n-   |               ~~~~~~~~~\n+   |               ^^^^^^^^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'for_loop`\n \n warning: unused label\n   --> $DIR/label_misspelled.rs:4:5"}, {"sha": "960646d9894d1158774e6d5369ecd7e350e24c38", "filename": "src/test/ui/label/label_misspelled_2.stderr", "status": "modified", "additions": 10, "deletions": 28, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_misspelled_2.stderr?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -14,41 +14,23 @@ error[E0425]: cannot find value `b` in this scope\n   --> $DIR/label_misspelled_2.rs:8:15\n    |\n LL |     'b: for _ in 0..1 {\n-   |     --\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     -- a label with a similar name exists\n LL |         break b;\n-   |               ^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'b;\n-   |               ~~\n-help: use the similarly named label\n-   |\n-LL |         break 'b;\n-   |               ~~\n+   |               ^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'b`\n \n error[E0425]: cannot find value `d` in this scope\n   --> $DIR/label_misspelled_2.rs:14:15\n    |\n LL |     d: for _ in 0..1 {\n-   |     -\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     - a label with a similar name exists\n LL |         break d;\n-   |               ^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'd;\n-   |               ~~\n-help: use the similarly named label\n-   |\n-LL |         break 'd;\n-   |               ~~\n+   |               ^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'d`\n \n error: aborting due to 4 previous errors\n "}, {"sha": "8a3568f65f63e078c48aaecfba8ac3d633bd1036", "filename": "src/test/ui/lint/unused_labels.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flint%2Funused_labels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flint%2Funused_labels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_labels.rs?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -61,7 +61,6 @@ fn main() {\n         //~^ WARN unused label\n         'many_used_shadowed: for _ in 0..10 {\n             //~^ WARN label name `'many_used_shadowed` shadows a label name that is already in scope\n-            //~| WARN label name `'many_used_shadowed` shadows a label name that is already in scope\n             if 1 % 2 == 0 {\n                 break 'many_used_shadowed;\n             } else {"}, {"sha": "85adc9ab3bfbeb583b183770eba5228238904894", "filename": "src/test/ui/lint/unused_labels.stderr", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funused_labels.stderr?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -7,15 +7,6 @@ LL |\n LL |         'many_used_shadowed: for _ in 0..10 {\n    |         ^^^^^^^^^^^^^^^^^^^ label `'many_used_shadowed` already in scope\n \n-warning: label name `'many_used_shadowed` shadows a label name that is already in scope\n-  --> $DIR/unused_labels.rs:62:9\n-   |\n-LL |     'many_used_shadowed: for _ in 0..10 {\n-   |     ------------------- first declared here\n-LL |\n-LL |         'many_used_shadowed: for _ in 0..10 {\n-   |         ^^^^^^^^^^^^^^^^^^^ label `'many_used_shadowed` already in scope\n-\n warning: unused label\n   --> $DIR/unused_labels.rs:11:5\n    |\n@@ -59,16 +50,16 @@ LL |     'many_used_shadowed: for _ in 0..10 {\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:73:5\n+  --> $DIR/unused_labels.rs:72:5\n    |\n LL |     'unused_loop_label: loop {\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused label\n-  --> $DIR/unused_labels.rs:79:5\n+  --> $DIR/unused_labels.rs:78:5\n    |\n LL |     'unused_block_label: {\n    |     ^^^^^^^^^^^^^^^^^^^\n \n-warning: 10 warnings emitted\n+warning: 9 warnings emitted\n "}, {"sha": "ccb27c3507076897e7a680350bcebce21bb98c55", "filename": "src/test/ui/loops/loop-break-value.stderr", "status": "modified", "additions": 5, "deletions": 14, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Floops%2Floop-break-value.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/be40b588953df73a9e766b644b7eac9e7d287b99/src%2Ftest%2Fui%2Floops%2Floop-break-value.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floops%2Floop-break-value.stderr?ref=be40b588953df73a9e766b644b7eac9e7d287b99", "patch": "@@ -2,21 +2,12 @@ error[E0425]: cannot find value `LOOP` in this scope\n   --> $DIR/loop-break-value.rs:95:15\n    |\n LL |     'LOOP: for _ in 0 .. 9 {\n-   |     -----\n-   |     |\n-   |     a label with a similar name exists\n-   |     a label with a similar name exists\n+   |     ----- a label with a similar name exists\n LL |         break LOOP;\n-   |               ^^^^ not found in this scope\n-   |\n-help: use the similarly named label\n-   |\n-LL |         break 'LOOP;\n-   |               ~~~~~\n-help: use the similarly named label\n-   |\n-LL |         break 'LOOP;\n-   |               ~~~~~\n+   |               ^^^^\n+   |               |\n+   |               not found in this scope\n+   |               help: use the similarly named label: `'LOOP`\n \n warning: denote infinite loops with `loop { ... }`\n   --> $DIR/loop-break-value.rs:26:5"}, {"sha": "68a19a8f6f7170c9b9a95deb61292acab941bc66", "filename": "src/test/ui/loops/loops-reject-duplicate-labels-2.rs", "status": "removed", "additions": 0, "deletions": 36, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.rs?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,36 +0,0 @@\n-// check-pass\n-#![feature(label_break_value)]\n-\n-// Issue #21633: reject duplicate loop labels and block labels in function bodies.\n-//\n-// This is testing the generalization (to the whole function body)\n-// discussed here:\n-// https://internals.rust-lang.org/t/psa-rejecting-duplicate-loop-labels/1833\n-\n-#[allow(unused_labels)]\n-pub fn foo() {\n-    { 'fl: for _ in 0..10 { break; } }\n-    { 'fl: loop { break; } }             //~ WARN label name `'fl` shadows a label name that is already in scope\n-    { 'lf: loop { break; } }\n-    { 'lf: for _ in 0..10 { break; } }   //~ WARN label name `'lf` shadows a label name that is already in scope\n-    { 'wl: while 2 > 1 { break; } }\n-    { 'wl: loop { break; } }             //~ WARN label name `'wl` shadows a label name that is already in scope\n-    { 'lw: loop { break; } }\n-    { 'lw: while 2 > 1 { break; } }      //~ WARN label name `'lw` shadows a label name that is already in scope\n-    { 'fw: for _ in 0..10 { break; } }\n-    { 'fw: while 2 > 1 { break; } }      //~ WARN label name `'fw` shadows a label name that is already in scope\n-    { 'wf: while 2 > 1 { break; } }\n-    { 'wf: for _ in 0..10 { break; } }   //~ WARN label name `'wf` shadows a label name that is already in scope\n-    { 'tl: while let Some(_) = None::<i32> { break; } }\n-    { 'tl: loop { break; } }             //~ WARN label name `'tl` shadows a label name that is already in scope\n-    { 'lt: loop { break; } }\n-    { 'lt: while let Some(_) = None::<i32> { break; } }\n-                                         //~^ WARN label name `'lt` shadows a label name that is already in scope\n-    { 'bl: {} }\n-    { 'bl: {} } //~ WARN label name `'bl` shadows a label name that is already in scope\n-}\n-\n-\n-pub fn main() {\n-    foo();\n-}"}, {"sha": "2c372fcff7a12aa1c6cc37ac90c1b2e48e1b6751", "filename": "src/test/ui/loops/loops-reject-duplicate-labels-2.stderr", "status": "removed", "additions": 0, "deletions": 74, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels-2.stderr?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,74 +0,0 @@\n-warning: label name `'fl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:13:7\n-   |\n-LL |     { 'fl: for _ in 0..10 { break; } }\n-   |       --- first declared here\n-LL |     { 'fl: loop { break; } }\n-   |       ^^^ label `'fl` already in scope\n-\n-warning: label name `'lf` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:15:7\n-   |\n-LL |     { 'lf: loop { break; } }\n-   |       --- first declared here\n-LL |     { 'lf: for _ in 0..10 { break; } }\n-   |       ^^^ label `'lf` already in scope\n-\n-warning: label name `'wl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:17:7\n-   |\n-LL |     { 'wl: while 2 > 1 { break; } }\n-   |       --- first declared here\n-LL |     { 'wl: loop { break; } }\n-   |       ^^^ label `'wl` already in scope\n-\n-warning: label name `'lw` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:19:7\n-   |\n-LL |     { 'lw: loop { break; } }\n-   |       --- first declared here\n-LL |     { 'lw: while 2 > 1 { break; } }\n-   |       ^^^ label `'lw` already in scope\n-\n-warning: label name `'fw` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:21:7\n-   |\n-LL |     { 'fw: for _ in 0..10 { break; } }\n-   |       --- first declared here\n-LL |     { 'fw: while 2 > 1 { break; } }\n-   |       ^^^ label `'fw` already in scope\n-\n-warning: label name `'wf` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:23:7\n-   |\n-LL |     { 'wf: while 2 > 1 { break; } }\n-   |       --- first declared here\n-LL |     { 'wf: for _ in 0..10 { break; } }\n-   |       ^^^ label `'wf` already in scope\n-\n-warning: label name `'tl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:25:7\n-   |\n-LL |     { 'tl: while let Some(_) = None::<i32> { break; } }\n-   |       --- first declared here\n-LL |     { 'tl: loop { break; } }\n-   |       ^^^ label `'tl` already in scope\n-\n-warning: label name `'lt` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:27:7\n-   |\n-LL |     { 'lt: loop { break; } }\n-   |       --- first declared here\n-LL |     { 'lt: while let Some(_) = None::<i32> { break; } }\n-   |       ^^^ label `'lt` already in scope\n-\n-warning: label name `'bl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels-2.rs:30:7\n-   |\n-LL |     { 'bl: {} }\n-   |       --- first declared here\n-LL |     { 'bl: {} }\n-   |       ^^^ label `'bl` already in scope\n-\n-warning: 9 warnings emitted\n-"}, {"sha": "c34bcf3df1d76253870af5d66e5837acb9af1772", "filename": "src/test/ui/loops/loops-reject-duplicate-labels.rs", "status": "removed", "additions": 0, "deletions": 49, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.rs?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,49 +0,0 @@\n-// check-pass\n-#![feature(label_break_value)]\n-\n-// Issue #21633: reject duplicate loop labels and block labels in function bodies.\n-\n-#[allow(unused_labels)]\n-fn foo() {\n-    'fl: for _ in 0..10 { break; }\n-    'fl: loop { break; }           //~ WARN label name `'fl` shadows a label name that is already in scope\n-\n-    'lf: loop { break; }\n-    'lf: for _ in 0..10 { break; } //~ WARN label name `'lf` shadows a label name that is already in scope\n-    'wl: while 2 > 1 { break; }\n-    'wl: loop { break; }           //~ WARN label name `'wl` shadows a label name that is already in scope\n-    'lw: loop { break; }\n-    'lw: while 2 > 1 { break; }    //~ WARN label name `'lw` shadows a label name that is already in scope\n-    'fw: for _ in 0..10 { break; }\n-    'fw: while 2 > 1 { break; }    //~ WARN label name `'fw` shadows a label name that is already in scope\n-    'wf: while 2 > 1 { break; }\n-    'wf: for _ in 0..10 { break; } //~ WARN label name `'wf` shadows a label name that is already in scope\n-    'tl: while let Some(_) = None::<i32> { break; }\n-    'tl: loop { break; }           //~ WARN label name `'tl` shadows a label name that is already in scope\n-    'lt: loop { break; }\n-    'lt: while let Some(_) = None::<i32> { break; }\n-                                   //~^ WARN label name `'lt` shadows a label name that is already in scope\n-    'bl: {}\n-    'bl: {} //~ WARN label name `'bl` shadows a label name that is already in scope\n-}\n-\n-// Note however that it is okay for the same label to be reused in\n-// different methods of one impl, as illustrated here.\n-\n-struct S;\n-impl S {\n-    fn m1(&self) { 'okay: loop { break 'okay; } }\n-    fn m2(&self) { 'okay: loop { break 'okay; } }\n-    fn m3(&self) { 'okay: { break 'okay; } }\n-    fn m4(&self) { 'okay: { break 'okay; } }\n-}\n-\n-\n-pub fn main() {\n-    let s = S;\n-    s.m1();\n-    s.m2();\n-    s.m3();\n-    s.m4();\n-    foo();\n-}"}, {"sha": "3bf3af763ecfc9aa80fb3ea306c709e0da693f6b", "filename": "src/test/ui/loops/loops-reject-duplicate-labels.stderr", "status": "removed", "additions": 0, "deletions": 74, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/84e19930e341a9b68d55f1925c6c8ed43dadac49/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Floops%2Floops-reject-duplicate-labels.stderr?ref=84e19930e341a9b68d55f1925c6c8ed43dadac49", "patch": "@@ -1,74 +0,0 @@\n-warning: label name `'fl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:9:5\n-   |\n-LL |     'fl: for _ in 0..10 { break; }\n-   |     --- first declared here\n-LL |     'fl: loop { break; }\n-   |     ^^^ label `'fl` already in scope\n-\n-warning: label name `'lf` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:12:5\n-   |\n-LL |     'lf: loop { break; }\n-   |     --- first declared here\n-LL |     'lf: for _ in 0..10 { break; }\n-   |     ^^^ label `'lf` already in scope\n-\n-warning: label name `'wl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:14:5\n-   |\n-LL |     'wl: while 2 > 1 { break; }\n-   |     --- first declared here\n-LL |     'wl: loop { break; }\n-   |     ^^^ label `'wl` already in scope\n-\n-warning: label name `'lw` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:16:5\n-   |\n-LL |     'lw: loop { break; }\n-   |     --- first declared here\n-LL |     'lw: while 2 > 1 { break; }\n-   |     ^^^ label `'lw` already in scope\n-\n-warning: label name `'fw` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:18:5\n-   |\n-LL |     'fw: for _ in 0..10 { break; }\n-   |     --- first declared here\n-LL |     'fw: while 2 > 1 { break; }\n-   |     ^^^ label `'fw` already in scope\n-\n-warning: label name `'wf` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:20:5\n-   |\n-LL |     'wf: while 2 > 1 { break; }\n-   |     --- first declared here\n-LL |     'wf: for _ in 0..10 { break; }\n-   |     ^^^ label `'wf` already in scope\n-\n-warning: label name `'tl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:22:5\n-   |\n-LL |     'tl: while let Some(_) = None::<i32> { break; }\n-   |     --- first declared here\n-LL |     'tl: loop { break; }\n-   |     ^^^ label `'tl` already in scope\n-\n-warning: label name `'lt` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:24:5\n-   |\n-LL |     'lt: loop { break; }\n-   |     --- first declared here\n-LL |     'lt: while let Some(_) = None::<i32> { break; }\n-   |     ^^^ label `'lt` already in scope\n-\n-warning: label name `'bl` shadows a label name that is already in scope\n-  --> $DIR/loops-reject-duplicate-labels.rs:27:5\n-   |\n-LL |     'bl: {}\n-   |     --- first declared here\n-LL |     'bl: {}\n-   |     ^^^ label `'bl` already in scope\n-\n-warning: 9 warnings emitted\n-"}]}