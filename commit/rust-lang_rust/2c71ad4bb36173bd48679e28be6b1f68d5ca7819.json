{"sha": "2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjNzFhZDRiYjM2MTczYmQ0ODY3OWUyOGJlNmIxZjY4ZDVjYTc4MTk=", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-05-11T11:39:31Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-05-12T11:58:45Z"}, "message": "Use () for typeck_item_bodies.", "tree": {"sha": "08c8ddf0a83ddee0c6fcc243b4705f603b69f0f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/08c8ddf0a83ddee0c6fcc243b4705f603b69f0f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "html_url": "https://github.com/rust-lang/rust/commit/2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "837f3e3e67007d748e993a080c3ea4b07ee465a0", "url": "https://api.github.com/repos/rust-lang/rust/commits/837f3e3e67007d748e993a080c3ea4b07ee465a0", "html_url": "https://github.com/rust-lang/rust/commit/837f3e3e67007d748e993a080c3ea4b07ee465a0"}], "stats": {"total": 11, "additions": 5, "deletions": 6}, "files": [{"sha": "f35755d6dd0a94b139f3793a24c6f0ed26ac3fa0", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "patch": "@@ -681,7 +681,7 @@ rustc_queries! {\n             desc { |tcx| \"computing CoerceUnsized info for `{}`\", tcx.def_path_str(key) }\n         }\n \n-    query typeck_item_bodies(_: CrateNum) -> () {\n+    query typeck_item_bodies(_: ()) -> () {\n         desc { \"type-checking all item bodies\" }\n     }\n "}, {"sha": "ac799a97b979a618635d58af30bd82e08056787a", "filename": "compiler/rustc_typeck/src/check/mod.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fmod.rs?ref=2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "patch": "@@ -105,7 +105,7 @@ use rustc_data_structures::fx::{FxHashMap, FxHashSet};\n use rustc_errors::{pluralize, struct_span_err, Applicability};\n use rustc_hir as hir;\n use rustc_hir::def::Res;\n-use rustc_hir::def_id::{CrateNum, DefId, LocalDefId, LOCAL_CRATE};\n+use rustc_hir::def_id::{DefId, LocalDefId};\n use rustc_hir::intravisit::Visitor;\n use rustc_hir::itemlikevisit::ItemLikeVisitor;\n use rustc_hir::{HirIdMap, ImplicitSelfKind, Node};\n@@ -1161,8 +1161,7 @@ impl ItemLikeVisitor<'tcx> for CheckItemTypesVisitor<'tcx> {\n     fn visit_foreign_item(&mut self, _: &'tcx hir::ForeignItem<'tcx>) {}\n }\n \n-fn typeck_item_bodies(tcx: TyCtxt<'_>, crate_num: CrateNum) {\n-    debug_assert!(crate_num == LOCAL_CRATE);\n+fn typeck_item_bodies(tcx: TyCtxt<'_>, (): ()) {\n     tcx.par_body_owners(|body_owner_def_id| {\n         tcx.ensure().typeck(body_owner_def_id);\n     });"}, {"sha": "472997223251aa25d639552c4eee29f3b4140048", "filename": "compiler/rustc_typeck/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_typeck%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c71ad4bb36173bd48679e28be6b1f68d5ca7819/compiler%2Frustc_typeck%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Flib.rs?ref=2c71ad4bb36173bd48679e28be6b1f68d5ca7819", "patch": "@@ -97,7 +97,7 @@ mod variance;\n \n use rustc_errors::{struct_span_err, ErrorReported};\n use rustc_hir as hir;\n-use rustc_hir::def_id::{DefId, LOCAL_CRATE};\n+use rustc_hir::def_id::DefId;\n use rustc_hir::{Node, CRATE_HIR_ID};\n use rustc_infer::infer::{InferOk, TyCtxtInferExt};\n use rustc_infer::traits::TraitEngineExt as _;\n@@ -510,7 +510,7 @@ pub fn check_crate(tcx: TyCtxt<'_>) -> Result<(), ErrorReported> {\n         }\n     });\n \n-    tcx.sess.time(\"item_bodies_checking\", || tcx.typeck_item_bodies(LOCAL_CRATE));\n+    tcx.sess.time(\"item_bodies_checking\", || tcx.typeck_item_bodies(()));\n \n     check_unused::check_crate(tcx);\n     check_for_entry_fn(tcx);"}]}