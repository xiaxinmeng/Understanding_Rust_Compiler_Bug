{"sha": "4bbc79c5aed7d1457f8448c1723be1a366a20112", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRiYmM3OWM1YWVkN2QxNDU3Zjg0NDhjMTcyM2JlMWEzNjZhMjAxMTI=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-09-30T01:52:26Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-09-30T02:20:33Z"}, "message": "Bless tests", "tree": {"sha": "389d11898dcc37afea2f78c9f24b60f01761e798", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/389d11898dcc37afea2f78c9f24b60f01761e798"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bbc79c5aed7d1457f8448c1723be1a366a20112", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bbc79c5aed7d1457f8448c1723be1a366a20112", "html_url": "https://github.com/rust-lang/rust/commit/4bbc79c5aed7d1457f8448c1723be1a366a20112", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bbc79c5aed7d1457f8448c1723be1a366a20112/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e02ea835a75b75af740a45cf4b29c76610476569", "url": "https://api.github.com/repos/rust-lang/rust/commits/e02ea835a75b75af740a45cf4b29c76610476569", "html_url": "https://github.com/rust-lang/rust/commit/e02ea835a75b75af740a45cf4b29c76610476569"}], "stats": {"total": 70, "additions": 55, "deletions": 15}, "files": [{"sha": "e46127c36bf6a362e842063e759eb4fe938f2e74", "filename": "src/test/ui/consts/min_const_fn/min_const_fn.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.rs?ref=4bbc79c5aed7d1457f8448c1723be1a366a20112", "patch": "@@ -125,15 +125,21 @@ impl<T: Sync + Sized> Foo<T> {\n struct AlanTuring<T>(T);\n const fn no_apit2(_x: AlanTuring<impl std::fmt::Debug>) {}\n //~^ ERROR trait bounds other than `Sized`\n-const fn no_apit(_x: impl std::fmt::Debug) {} //~ ERROR trait bounds other than `Sized`\n-const fn no_dyn_trait(_x: &dyn std::fmt::Debug) {} //~ ERROR trait bounds other than `Sized`\n+//~| ERROR destructor\n+const fn no_apit(_x: impl std::fmt::Debug) {}\n+//~^ ERROR trait bounds other than `Sized`\n+//~| ERROR destructor\n+const fn no_dyn_trait(_x: &dyn std::fmt::Debug) {}\n+//~^ ERROR trait bounds other than `Sized`\n const fn no_dyn_trait_ret() -> &'static dyn std::fmt::Debug { &() }\n //~^ ERROR trait bounds other than `Sized`\n+//~| ERROR unsizing cast\n+//~| ERROR unsizing cast\n \n const fn no_unsafe() { unsafe {} }\n \n const fn really_no_traits_i_mean_it() { (&() as &dyn std::fmt::Debug, ()).1 }\n-//~^ ERROR trait bounds other than `Sized`\n+//~^ ERROR unsizing cast\n \n const fn no_fn_ptrs(_x: fn()) {}\n //~^ ERROR function pointer"}, {"sha": "ee5434b147b661c5163189dc1f820650859e5742", "filename": "src/test/ui/consts/min_const_fn/min_const_fn.stderr", "status": "modified", "additions": 44, "deletions": 10, "changes": 54, "blob_url": "https://github.com/rust-lang/rust/blob/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn.stderr?ref=4bbc79c5aed7d1457f8448c1723be1a366a20112", "patch": "@@ -245,17 +245,33 @@ LL | const fn no_apit2(_x: AlanTuring<impl std::fmt::Debug>) {}\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n+error[E0493]: destructors cannot be evaluated at compile-time\n+  --> $DIR/min_const_fn.rs:126:19\n+   |\n+LL | const fn no_apit2(_x: AlanTuring<impl std::fmt::Debug>) {}\n+   |                   ^^                                     - value is dropped here\n+   |                   |\n+   |                   constant functions cannot evaluate destructors\n+\n error[E0723]: trait bounds other than `Sized` on const fn parameters are unstable\n-  --> $DIR/min_const_fn.rs:128:22\n+  --> $DIR/min_const_fn.rs:129:22\n    |\n LL | const fn no_apit(_x: impl std::fmt::Debug) {}\n    |                      ^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n+error[E0493]: destructors cannot be evaluated at compile-time\n+  --> $DIR/min_const_fn.rs:129:18\n+   |\n+LL | const fn no_apit(_x: impl std::fmt::Debug) {}\n+   |                  ^^                         - value is dropped here\n+   |                  |\n+   |                  constant functions cannot evaluate destructors\n+\n error[E0723]: trait bounds other than `Sized` on const fn parameters are unstable\n-  --> $DIR/min_const_fn.rs:129:23\n+  --> $DIR/min_const_fn.rs:132:23\n    |\n LL | const fn no_dyn_trait(_x: &dyn std::fmt::Debug) {}\n    |                       ^^\n@@ -264,25 +280,43 @@ LL | const fn no_dyn_trait(_x: &dyn std::fmt::Debug) {}\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n error[E0723]: trait bounds other than `Sized` on const fn parameters are unstable\n-  --> $DIR/min_const_fn.rs:130:63\n+  --> $DIR/min_const_fn.rs:134:32\n+   |\n+LL | const fn no_dyn_trait_ret() -> &'static dyn std::fmt::Debug { &() }\n+   |                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n+   = help: add `#![feature(const_fn)]` to the crate attributes to enable\n+\n+error[E0723]: unsizing casts to types besides slices are not allowed in const fn\n+  --> $DIR/min_const_fn.rs:134:63\n    |\n LL | const fn no_dyn_trait_ret() -> &'static dyn std::fmt::Debug { &() }\n    |                                                               ^^^\n    |\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n-error[E0723]: trait bounds other than `Sized` on const fn parameters are unstable\n-  --> $DIR/min_const_fn.rs:135:41\n+error[E0723]: unsizing casts to types besides slices are not allowed in const fn\n+  --> $DIR/min_const_fn.rs:134:63\n+   |\n+LL | const fn no_dyn_trait_ret() -> &'static dyn std::fmt::Debug { &() }\n+   |                                                               ^^^\n+   |\n+   = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n+   = help: add `#![feature(const_fn)]` to the crate attributes to enable\n+\n+error[E0723]: unsizing casts to types besides slices are not allowed in const fn\n+  --> $DIR/min_const_fn.rs:141:42\n    |\n LL | const fn really_no_traits_i_mean_it() { (&() as &dyn std::fmt::Debug, ()).1 }\n-   |                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                                          ^^^\n    |\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n error[E0658]: function pointers cannot appear in constant functions\n-  --> $DIR/min_const_fn.rs:138:21\n+  --> $DIR/min_const_fn.rs:144:21\n    |\n LL | const fn no_fn_ptrs(_x: fn()) {}\n    |                     ^^\n@@ -291,7 +325,7 @@ LL | const fn no_fn_ptrs(_x: fn()) {}\n    = help: add `#![feature(const_fn_fn_ptr_basics)]` to the crate attributes to enable\n \n error[E0658]: function pointers cannot appear in constant functions\n-  --> $DIR/min_const_fn.rs:140:27\n+  --> $DIR/min_const_fn.rs:146:27\n    |\n LL | const fn no_fn_ptrs2() -> fn() { fn foo() {} foo }\n    |                           ^^^^\n@@ -300,15 +334,15 @@ LL | const fn no_fn_ptrs2() -> fn() { fn foo() {} foo }\n    = help: add `#![feature(const_fn_fn_ptr_basics)]` to the crate attributes to enable\n \n error[E0658]: function pointer casts are not allowed in constant functions\n-  --> $DIR/min_const_fn.rs:140:46\n+  --> $DIR/min_const_fn.rs:146:46\n    |\n LL | const fn no_fn_ptrs2() -> fn() { fn foo() {} foo }\n    |                                              ^^^\n    |\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn_fn_ptr_basics)]` to the crate attributes to enable\n \n-error: aborting due to 35 previous errors\n+error: aborting due to 39 previous errors\n \n Some errors have detailed explanations: E0013, E0493, E0658, E0723.\n For more information about an error, try `rustc --explain E0013`."}, {"sha": "4a22ef2dffddb004bea682c89b33d43c9746dcfe", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_dyn.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.rs?ref=4bbc79c5aed7d1457f8448c1723be1a366a20112", "patch": "@@ -10,6 +10,6 @@ const fn no_inner_dyn_trait2(x: Hide) {\n //~^ ERROR trait bounds other than `Sized`\n }\n const fn no_inner_dyn_trait_ret() -> Hide { Hide(HasDyn { field: &0 }) }\n-//~^ ERROR trait bounds other than `Sized`\n+//~^ ERROR unsizing cast\n \n fn main() {}"}, {"sha": "1394db591cadd050523acbb56db21c298538c69e", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_dyn.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4bbc79c5aed7d1457f8448c1723be1a366a20112/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_dyn.stderr?ref=4bbc79c5aed7d1457f8448c1723be1a366a20112", "patch": "@@ -7,7 +7,7 @@ LL |     x.0.field;\n    = note: see issue #57563 <https://github.com/rust-lang/rust/issues/57563> for more information\n    = help: add `#![feature(const_fn)]` to the crate attributes to enable\n \n-error[E0723]: trait bounds other than `Sized` on const fn parameters are unstable\n+error[E0723]: unsizing casts to types besides slices are not allowed in const fn\n   --> $DIR/min_const_fn_dyn.rs:12:66\n    |\n LL | const fn no_inner_dyn_trait_ret() -> Hide { Hide(HasDyn { field: &0 }) }"}]}