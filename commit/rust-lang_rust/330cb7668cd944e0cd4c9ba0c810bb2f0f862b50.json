{"sha": "330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzMGNiNzY2OGNkOTQ0ZTBjZDRjOWJhMGM4MTBiYjJmMGY4NjJiNTA=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-06-05T14:21:31Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2019-07-02T16:15:20Z"}, "message": "pass more than outlives constraints to constraint conversion", "tree": {"sha": "e82b3c59fb98aeead29eb6455ce08606c55c0f33", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e82b3c59fb98aeead29eb6455ce08606c55c0f33"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "html_url": "https://github.com/rust-lang/rust/commit/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3aad20d8f87c8678ba0b2c37248c7153b8f7d73b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3aad20d8f87c8678ba0b2c37248c7153b8f7d73b", "html_url": "https://github.com/rust-lang/rust/commit/3aad20d8f87c8678ba0b2c37248c7153b8f7d73b"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "0e7f678382383404fa05a15426a1d976448ae6ee", "filename": "src/librustc_mir/borrow_check/nll/type_check/constraint_conversion.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fconstraint_conversion.rs?ref=330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "patch": "@@ -3,6 +3,7 @@ use crate::borrow_check::nll::region_infer::TypeTest;\n use crate::borrow_check::nll::type_check::{Locations, MirTypeckRegionConstraints};\n use crate::borrow_check::nll::universal_regions::UniversalRegions;\n use crate::borrow_check::nll::ToRegionVid;\n+use rustc::infer::canonical::QueryRegionConstraints;\n use rustc::infer::canonical::QueryOutlivesConstraint;\n use rustc::infer::outlives::env::RegionBoundPairs;\n use rustc::infer::outlives::obligations::{TypeOutlives, TypeOutlivesDelegate};\n@@ -49,8 +50,8 @@ impl<'a, 'tcx> ConstraintConversion<'a, 'tcx> {\n         }\n     }\n \n-    pub(super) fn convert_all(&mut self, query_constraints: &[QueryOutlivesConstraint<'tcx>]) {\n-        for query_constraint in query_constraints {\n+    pub(super) fn convert_all(&mut self, query_constraints: &QueryRegionConstraints<'tcx>) {\n+        for query_constraint in &query_constraints.outlives {\n             self.convert(query_constraint);\n         }\n     }"}, {"sha": "d18a8e87453a54e6788fc9eec352390b0588fa6e", "filename": "src/librustc_mir/borrow_check/nll/type_check/free_region_relations.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Ffree_region_relations.rs", "raw_url": "https://github.com/rust-lang/rust/raw/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Ffree_region_relations.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Ffree_region_relations.rs?ref=330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "patch": "@@ -287,8 +287,7 @@ impl UniversalRegionRelationsBuilder<'cx, 'tcx> {\n             self.relations.relate_universal_regions(fr, fr_fn_body);\n         }\n \n-        for data in constraint_sets {\n-            let QueryRegionConstraints { outlives, pick_constraints: _ } = &*data; // TODO\n+        for data in &constraint_sets {\n             constraint_conversion::ConstraintConversion::new(\n                 self.infcx,\n                 &self.universal_regions,\n@@ -298,7 +297,7 @@ impl UniversalRegionRelationsBuilder<'cx, 'tcx> {\n                 Locations::All(DUMMY_SP),\n                 ConstraintCategory::Internal,\n                 &mut self.constraints,\n-            ).convert_all(outlives);\n+            ).convert_all(data);\n         }\n \n         CreateResult {"}, {"sha": "4b9c61068bdcb94aae6b39ea29434816ec652427", "filename": "src/librustc_mir/borrow_check/nll/type_check/mod.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/330cb7668cd944e0cd4c9ba0c810bb2f0f862b50/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs?ref=330cb7668cd944e0cd4c9ba0c810bb2f0f862b50", "patch": "@@ -1100,8 +1100,6 @@ impl<'a, 'tcx> TypeChecker<'a, 'tcx> {\n             locations, data\n         );\n \n-        let QueryRegionConstraints { outlives, pick_constraints: _ } = data; // TODO\n-\n         constraint_conversion::ConstraintConversion::new(\n             self.infcx,\n             self.borrowck_context.universal_regions,\n@@ -1111,7 +1109,7 @@ impl<'a, 'tcx> TypeChecker<'a, 'tcx> {\n             locations,\n             category,\n             &mut self.borrowck_context.constraints,\n-        ).convert_all(outlives);\n+        ).convert_all(data);\n     }\n \n     /// Convenient wrapper around `relate_tys::relate_types` -- see"}]}