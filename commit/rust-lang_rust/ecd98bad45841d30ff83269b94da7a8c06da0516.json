{"sha": "ecd98bad45841d30ff83269b94da7a8c06da0516", "node_id": "C_kwDOAAsO6NoAKGVjZDk4YmFkNDU4NDFkMzBmZjgzMjY5Yjk0ZGE3YThjMDZkYTA1MTY", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2023-02-01T21:51:02Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2023-02-01T21:51:02Z"}, "message": "Bless tests.", "tree": {"sha": "ab57a7829f7e28b12f6782769746383ff2c60f32", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab57a7829f7e28b12f6782769746383ff2c60f32"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ecd98bad45841d30ff83269b94da7a8c06da0516", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ecd98bad45841d30ff83269b94da7a8c06da0516", "html_url": "https://github.com/rust-lang/rust/commit/ecd98bad45841d30ff83269b94da7a8c06da0516", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ecd98bad45841d30ff83269b94da7a8c06da0516/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7d59b2e574888912cf7fb670c742b4636e451d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7d59b2e574888912cf7fb670c742b4636e451d0", "html_url": "https://github.com/rust-lang/rust/commit/f7d59b2e574888912cf7fb670c742b4636e451d0"}], "stats": {"total": 102, "additions": 77, "deletions": 25}, "files": [{"sha": "8c7e919bf62a10d52bc6a343454b438f89c8857b", "filename": "tests/ui/manual_assert.edition2018.fixed", "status": "modified", "additions": 11, "deletions": 24, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/ecd98bad45841d30ff83269b94da7a8c06da0516/tests%2Fui%2Fmanual_assert.edition2018.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ecd98bad45841d30ff83269b94da7a8c06da0516/tests%2Fui%2Fmanual_assert.edition2018.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2018.fixed?ref=ecd98bad45841d30ff83269b94da7a8c06da0516", "patch": "@@ -29,9 +29,7 @@ fn main() {\n         panic!(\"qaqaq{:?}\", a);\n     }\n     assert!(a.is_empty(), \"qaqaq{:?}\", a);\n-    if !a.is_empty() {\n-        panic!(\"qwqwq\");\n-    }\n+    assert!(a.is_empty(), \"qwqwq\");\n     if a.len() == 3 {\n         println!(\"qwq\");\n         println!(\"qwq\");\n@@ -46,21 +44,11 @@ fn main() {\n         println!(\"qwq\");\n     }\n     let b = vec![1, 2, 3];\n-    if b.is_empty() {\n-        panic!(\"panic1\");\n-    }\n-    if b.is_empty() && a.is_empty() {\n-        panic!(\"panic2\");\n-    }\n-    if a.is_empty() && !b.is_empty() {\n-        panic!(\"panic3\");\n-    }\n-    if b.is_empty() || a.is_empty() {\n-        panic!(\"panic4\");\n-    }\n-    if a.is_empty() || !b.is_empty() {\n-        panic!(\"panic5\");\n-    }\n+    assert!(!b.is_empty(), \"panic1\");\n+    assert!(!(b.is_empty() && a.is_empty()), \"panic2\");\n+    assert!(!(a.is_empty() && !b.is_empty()), \"panic3\");\n+    assert!(!(b.is_empty() || a.is_empty()), \"panic4\");\n+    assert!(!(a.is_empty() || !b.is_empty()), \"panic5\");\n     assert!(!a.is_empty(), \"with expansion {}\", one!());\n     if a.is_empty() {\n         let _ = 0;\n@@ -71,12 +59,11 @@ fn main() {\n \n fn issue7730(a: u8) {\n     // Suggestion should preserve comment\n-    if a > 2 {\n-        // comment\n-        /* this is a\n+    // comment\n+/* this is a\n         multiline\n         comment */\n-        /// Doc comment\n-        panic!(\"panic with comment\") // comment after `panic!`\n-    }\n+/// Doc comment\n+// comment after `panic!`\n+assert!(!(a > 2), \"panic with comment\");\n }"}, {"sha": "3555ac29243a1cb0d819a368d8bb22bf02aea2de", "filename": "tests/ui/manual_assert.edition2018.stderr", "status": "modified", "additions": 66, "deletions": 1, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/ecd98bad45841d30ff83269b94da7a8c06da0516/tests%2Fui%2Fmanual_assert.edition2018.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ecd98bad45841d30ff83269b94da7a8c06da0516/tests%2Fui%2Fmanual_assert.edition2018.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmanual_assert.edition2018.stderr?ref=ecd98bad45841d30ff83269b94da7a8c06da0516", "patch": "@@ -8,6 +8,54 @@ LL | |     }\n    |\n    = note: `-D clippy::manual-assert` implied by `-D warnings`\n \n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:34:5\n+   |\n+LL | /     if !a.is_empty() {\n+LL | |         panic!(\"qwqwq\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(a.is_empty(), \"qwqwq\");`\n+\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:51:5\n+   |\n+LL | /     if b.is_empty() {\n+LL | |         panic!(\"panic1\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(!b.is_empty(), \"panic1\");`\n+\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:54:5\n+   |\n+LL | /     if b.is_empty() && a.is_empty() {\n+LL | |         panic!(\"panic2\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(!(b.is_empty() && a.is_empty()), \"panic2\");`\n+\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:57:5\n+   |\n+LL | /     if a.is_empty() && !b.is_empty() {\n+LL | |         panic!(\"panic3\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(!(a.is_empty() && !b.is_empty()), \"panic3\");`\n+\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:60:5\n+   |\n+LL | /     if b.is_empty() || a.is_empty() {\n+LL | |         panic!(\"panic4\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(!(b.is_empty() || a.is_empty()), \"panic4\");`\n+\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:63:5\n+   |\n+LL | /     if a.is_empty() || !b.is_empty() {\n+LL | |         panic!(\"panic5\");\n+LL | |     }\n+   | |_____^ help: try instead: `assert!(!(a.is_empty() || !b.is_empty()), \"panic5\");`\n+\n error: only a `panic!` in `if`-then statement\n   --> $DIR/manual_assert.rs:66:5\n    |\n@@ -16,5 +64,22 @@ LL | |         panic!(\"with expansion {}\", one!())\n LL | |     }\n    | |_____^ help: try instead: `assert!(!a.is_empty(), \"with expansion {}\", one!());`\n \n-error: aborting due to 2 previous errors\n+error: only a `panic!` in `if`-then statement\n+  --> $DIR/manual_assert.rs:78:5\n+   |\n+LL | /     if a > 2 {\n+LL | |         // comment\n+LL | |         /* this is a\n+LL | |         multiline\n+...  |\n+LL | |         panic!(\"panic with comment\") // comment after `panic!`\n+LL | |     }\n+   | |_____^\n+   |\n+help: try instead\n+   |\n+LL |     assert!(!(a > 2), \"panic with comment\");\n+   |\n+\n+error: aborting due to 9 previous errors\n "}]}