{"sha": "f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYyODJjNWNjYzAwMWJhMzc3ZGZlZWU2ZjM0N2VmNTZiNzNjODZmNGU=", "commit": {"author": {"name": "Roy Frostig", "email": "rfrostig@mozilla.com", "date": "2010-07-28T22:04:58Z"}, "committer": {"name": "Roy Frostig", "email": "rfrostig@mozilla.com", "date": "2010-07-28T22:04:58Z"}, "message": "Get slots in trans_tag using Semant tables.  Closes #133.", "tree": {"sha": "eced775abd1683c9a531e4a57f24544cad3f02e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eced775abd1683c9a531e4a57f24544cad3f02e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "html_url": "https://github.com/rust-lang/rust/commit/f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/comments", "author": {"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, "committer": {"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9ad2e98e3995eac620add75d9e93d1625dcf9ef", "url": "https://api.github.com/repos/rust-lang/rust/commits/a9ad2e98e3995eac620add75d9e93d1625dcf9ef", "html_url": "https://github.com/rust-lang/rust/commit/a9ad2e98e3995eac620add75d9e93d1625dcf9ef"}], "stats": {"total": 39, "additions": 34, "deletions": 5}, "files": [{"sha": "6e9a140661f1d93d0f3716368a42150d25c8e880", "filename": "src/Makefile", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FMakefile?ref=f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "patch": "@@ -415,6 +415,7 @@ TEST_XFAILS_LLVM := $(addprefix test/run-pass/, \\\n                       generic-obj.rs \\\n                       generic-recursive-tag.rs \\\n                       generic-tag-alt.rs \\\n+                      generic-tag-values.rs \\\n                       generic-tag.rs \\\n                       i32-sub.rs \\\n                       i8-incr.rs \\"}, {"sha": "813b9065c94bf33df581d06b7e40708ca021c618", "filename": "src/boot/me/trans.ml", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2Fboot%2Fme%2Ftrans.ml", "raw_url": "https://github.com/rust-lang/rust/raw/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2Fboot%2Fme%2Ftrans.ml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fboot%2Fme%2Ftrans.ml?ref=f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "patch": "@@ -3082,8 +3082,11 @@ let trans_visitor\n           let sub_dst_cell = get_element_ptr_dyn ty_params dst i in\n           let sub_src_cell = get_element_ptr_dyn ty_params src i in\n             trans_copy_ty\n-              ty_params initializing\n-              sub_dst_cell ty sub_src_cell ty None\n+              ty_params\n+              initializing\n+              sub_dst_cell ty\n+              sub_src_cell ty\n+              None\n       end\n       tys\n \n@@ -5064,10 +5067,12 @@ let trans_visitor\n       Array.iteri\n         begin\n           fun i sloti ->\n-            let slot = sloti.node in\n+            let slot = get_slot cx sloti.id in\n             let ty = slot_ty slot in\n-              trans_copy_ty ty_params true\n-                (get_element_ptr_dyn_in_current_frame tag_body_cell i) ty\n+              trans_copy_ty\n+                ty_params\n+                true\n+                (get_element_ptr_dyn ty_params tag_body_cell i) ty\n                 (deref_slot false (cell_of_block_slot sloti.id) slot) ty\n                 None;\n         end"}, {"sha": "19916f076840740c9c5531c798894f2181194694", "filename": "src/test/run-pass/generic-tag-values.rs", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2Ftest%2Frun-pass%2Fgeneric-tag-values.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f282c5ccc001ba377dfeee6f347ef56b73c86f4e/src%2Ftest%2Frun-pass%2Fgeneric-tag-values.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fgeneric-tag-values.rs?ref=f282c5ccc001ba377dfeee6f347ef56b73c86f4e", "patch": "@@ -0,0 +1,23 @@\n+// -*- rust -*-\n+\n+type noption[T] = tag(some(T));\n+\n+fn main() {\n+  let noption[int] nop = some[int](5);\n+  alt (nop) {\n+    case (some[int](n)) {\n+      log n;\n+      check (n == 5);\n+    }\n+  }\n+\n+  let noption[tup(int, int)] nop2 = some[tup(int, int)](tup(17, 42));\n+  alt (nop2) {\n+    case (some[tup(int, int)](t)) {\n+      log t._0;\n+      log t._1;\n+      check (t._0 == 17);\n+      check (t._1 == 42);\n+    }\n+  }\n+}"}]}