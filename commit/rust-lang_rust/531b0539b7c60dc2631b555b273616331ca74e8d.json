{"sha": "531b0539b7c60dc2631b555b273616331ca74e8d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzMWIwNTM5YjdjNjBkYzI2MzFiNTU1YjI3MzYxNjMzMWNhNzRlOGQ=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-15T23:58:26Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-11-15T23:58:26Z"}, "message": "Auto merge of #29788 - mitaa:module_name, r=arielb1\n\nf357d55 caused a regression by retrieving item names from metadata, while previously using the last element of its absolute path (which in the case of a root module is the prefixed crate name since the stored path in metadata is empty)\n\nfixes #28927", "tree": {"sha": "0c1a7b46653b94782b16bddc0ed646cffd5d7627", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0c1a7b46653b94782b16bddc0ed646cffd5d7627"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/531b0539b7c60dc2631b555b273616331ca74e8d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/531b0539b7c60dc2631b555b273616331ca74e8d", "html_url": "https://github.com/rust-lang/rust/commit/531b0539b7c60dc2631b555b273616331ca74e8d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/531b0539b7c60dc2631b555b273616331ca74e8d/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b7845f93b54d3e45fcac94e7d7f3111aad90142f", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7845f93b54d3e45fcac94e7d7f3111aad90142f", "html_url": "https://github.com/rust-lang/rust/commit/b7845f93b54d3e45fcac94e7d7f3111aad90142f"}, {"sha": "02f9a491310ed0949b4240798cb452e4bb34651e", "url": "https://api.github.com/repos/rust-lang/rust/commits/02f9a491310ed0949b4240798cb452e4bb34651e", "html_url": "https://github.com/rust-lang/rust/commit/02f9a491310ed0949b4240798cb452e4bb34651e"}], "stats": {"total": 41, "additions": 40, "deletions": 1}, "files": [{"sha": "1cd196895e3a49873732099921b1b82160d576fe", "filename": "src/librustc/metadata/encoder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Flibrustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Fencoder.rs?ref=531b0539b7c60dc2631b555b273616331ca74e8d", "patch": "@@ -1500,7 +1500,7 @@ fn encode_info_for_items<'a, 'tcx>(ecx: &EncodeContext<'a, 'tcx>,\n                         &[],\n                         CRATE_NODE_ID,\n                         [].iter().cloned().chain(LinkedPath::empty()),\n-                        syntax::parse::token::special_idents::invalid.name,\n+                        syntax::parse::token::intern(&ecx.link_meta.crate_name),\n                         hir::Public);\n \n     visit::walk_crate(&mut EncodeVisitor {"}, {"sha": "7d6b448df43fd417ec53329cc1562a6c09ab895b", "filename": "src/test/auxiliary/issue-28927-1.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Fauxiliary%2Fissue-28927-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Fauxiliary%2Fissue-28927-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fissue-28927-1.rs?ref=531b0539b7c60dc2631b555b273616331ca74e8d", "patch": "@@ -0,0 +1,12 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+extern crate issue_28927_2 as inner2;\n+pub use inner2 as bar;"}, {"sha": "c511700504960fd67070dad1f729200abe4032fe", "filename": "src/test/auxiliary/issue-28927-2.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Fauxiliary%2Fissue-28927-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Fauxiliary%2Fissue-28927-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fissue-28927-2.rs?ref=531b0539b7c60dc2631b555b273616331ca74e8d", "patch": "@@ -0,0 +1,11 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+pub struct Baz;"}, {"sha": "b3096a949625fc75710a3234125eecb132736eda", "filename": "src/test/rustdoc/issue-28927.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Frustdoc%2Fissue-28927.rs", "raw_url": "https://github.com/rust-lang/rust/raw/531b0539b7c60dc2631b555b273616331ca74e8d/src%2Ftest%2Frustdoc%2Fissue-28927.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Fissue-28927.rs?ref=531b0539b7c60dc2631b555b273616331ca74e8d", "patch": "@@ -0,0 +1,16 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// aux-build:issue-28927-2.rs\n+// aux-build:issue-28927-1.rs\n+// ignore-cross-compile\n+\n+extern crate issue_28927_1 as inner1;\n+pub use inner1 as foo;"}]}