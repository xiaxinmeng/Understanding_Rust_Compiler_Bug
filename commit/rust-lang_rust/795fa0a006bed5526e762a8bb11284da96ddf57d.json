{"sha": "795fa0a006bed5526e762a8bb11284da96ddf57d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5NWZhMGEwMDZiZWQ1NTI2ZTc2MmE4YmIxMTI4NGRhOTZkZGY1N2Q=", "commit": {"author": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-04-12T20:22:30Z"}, "committer": {"name": "marmeladema", "email": "xademax@gmail.com", "date": "2020-04-13T12:43:44Z"}, "message": "Remove useless calls to `assemble_extension_candidates_for_traits_in_scope`\n\nCalls to `assemble_extension_candidates_for_traits_in_scope` with\n`DUMMY_HIR_ID` as `expr_hir_id` are useless because the first thing\nthat this function does is to return `Ok(())` in this case.", "tree": {"sha": "553ba74d828fcf5a86a2eea02754c88704431b15", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/553ba74d828fcf5a86a2eea02754c88704431b15"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/795fa0a006bed5526e762a8bb11284da96ddf57d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/795fa0a006bed5526e762a8bb11284da96ddf57d", "html_url": "https://github.com/rust-lang/rust/commit/795fa0a006bed5526e762a8bb11284da96ddf57d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/795fa0a006bed5526e762a8bb11284da96ddf57d/comments", "author": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marmeladema", "id": 1629419, "node_id": "MDQ6VXNlcjE2Mjk0MTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1629419?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marmeladema", "html_url": "https://github.com/marmeladema", "followers_url": "https://api.github.com/users/marmeladema/followers", "following_url": "https://api.github.com/users/marmeladema/following{/other_user}", "gists_url": "https://api.github.com/users/marmeladema/gists{/gist_id}", "starred_url": "https://api.github.com/users/marmeladema/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marmeladema/subscriptions", "organizations_url": "https://api.github.com/users/marmeladema/orgs", "repos_url": "https://api.github.com/users/marmeladema/repos", "events_url": "https://api.github.com/users/marmeladema/events{/privacy}", "received_events_url": "https://api.github.com/users/marmeladema/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a00bd29e01c4042143d01681e45723a2052412b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/a00bd29e01c4042143d01681e45723a2052412b0", "html_url": "https://github.com/rust-lang/rust/commit/a00bd29e01c4042143d01681e45723a2052412b0"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "0b1aff7e806cfd337b702cd3e132ce3cf22234f3", "filename": "src/librustc_typeck/check/method/probe.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/795fa0a006bed5526e762a8bb11284da96ddf57d/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fprobe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/795fa0a006bed5526e762a8bb11284da96ddf57d/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fprobe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmethod%2Fprobe.rs?ref=795fa0a006bed5526e762a8bb11284da96ddf57d", "patch": "@@ -1513,7 +1513,6 @@ impl<'a, 'tcx> ProbeContext<'a, 'tcx> {\n             );\n             pcx.allow_similar_names = true;\n             pcx.assemble_inherent_candidates();\n-            pcx.assemble_extension_candidates_for_traits_in_scope(hir::DUMMY_HIR_ID)?;\n \n             let method_names = pcx.candidate_method_names();\n             pcx.allow_similar_names = false;\n@@ -1523,10 +1522,7 @@ impl<'a, 'tcx> ProbeContext<'a, 'tcx> {\n                     pcx.reset();\n                     pcx.method_name = Some(method_name);\n                     pcx.assemble_inherent_candidates();\n-                    pcx.assemble_extension_candidates_for_traits_in_scope(hir::DUMMY_HIR_ID)\n-                        .map_or(None, |_| {\n-                            pcx.pick_core().and_then(|pick| pick.ok()).map(|pick| pick.item)\n-                        })\n+                    pcx.pick_core().and_then(|pick| pick.ok()).map(|pick| pick.item)\n                 })\n                 .collect();\n "}]}