{"sha": "a7597a15265df589b29ed3c61a3047994fc45d0a", "node_id": "C_kwDOAAsO6NoAKGE3NTk3YTE1MjY1ZGY1ODliMjllZDNjNjFhMzA0Nzk5NGZjNDVkMGE", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2023-02-07T19:17:24Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2023-02-07T19:17:24Z"}, "message": "Tweak ICE message\n\nModify main message to be more conversational and emit one fewer note.", "tree": {"sha": "bb0a6de5b46a4505d7dae198e3a7e88e3b5d96eb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb0a6de5b46a4505d7dae198e3a7e88e3b5d96eb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7597a15265df589b29ed3c61a3047994fc45d0a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7597a15265df589b29ed3c61a3047994fc45d0a", "html_url": "https://github.com/rust-lang/rust/commit/a7597a15265df589b29ed3c61a3047994fc45d0a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7597a15265df589b29ed3c61a3047994fc45d0a/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4dd9edb76a34ecbca539967f9662b8c0cc9c7fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4dd9edb76a34ecbca539967f9662b8c0cc9c7fb", "html_url": "https://github.com/rust-lang/rust/commit/e4dd9edb76a34ecbca539967f9662b8c0cc9c7fb"}], "stats": {"total": 25, "additions": 9, "deletions": 16}, "files": [{"sha": "66ed9ffe9182478295214a546be584e98a42e973", "filename": "compiler/rustc_driver_impl/src/lib.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -1200,11 +1200,9 @@ pub fn report_ice(info: &panic::PanicInfo<'_>, bug_report_url: &str) {\n     if !info.payload().is::<rustc_errors::ExplicitBug>()\n         && !info.payload().is::<rustc_errors::DelayedBugPanic>()\n     {\n-        let mut d = rustc_errors::Diagnostic::new(rustc_errors::Level::Bug, \"unexpected panic\");\n-        handler.emit_diagnostic(&mut d);\n+        handler.emit_err(session_diagnostics::Ice);\n     }\n \n-    handler.emit_note(session_diagnostics::Ice);\n     handler.emit_note(session_diagnostics::IceBugReport { bug_report_url });\n     handler.emit_note(session_diagnostics::IceVersion {\n         version: util::version_str!().unwrap_or(\"unknown_version\"),"}, {"sha": "81f28c1755deb452976804391ac6d6b5f9ce0d0b", "filename": "tests/ui/consts/const-eval/const-eval-query-stack.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.rs?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -1,8 +1,7 @@\n // compile-flags: -Ztreat-err-as-bug=1\n // failure-status: 101\n // rustc-env:RUST_BACKTRACE=1\n-// normalize-stderr-test \"\\nerror: internal compiler error.*\\n\\n\" -> \"\"\n-// normalize-stderr-test \"note:.*unexpectedly panicked.*\\n\\n\" -> \"\"\n+// normalize-stderr-test \"\\nerror: .*unexpectedly panicked.*\\n\\n\" -> \"\"\n // normalize-stderr-test \"note: we would appreciate a bug report.*\\n\\n\" -> \"\"\n // normalize-stderr-test \"note: compiler flags.*\\n\\n\" -> \"\"\n // normalize-stderr-test \"note: rustc.*running on.*\\n\\n\" -> \"\""}, {"sha": "01fb8153cf3846c9be84c82096379456d5c275fc", "filename": "tests/ui/consts/const-eval/const-eval-query-stack.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconsts%2Fconst-eval%2Fconst-eval-query-stack.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -1,5 +1,5 @@\n error[E0080]: evaluation of constant value failed\n-  --> $DIR/const-eval-query-stack.rs:17:16\n+  --> $DIR/const-eval-query-stack.rs:16:16\n    |\n LL | const X: i32 = 1 / 0;\n    |                ^^^^^ attempt to divide `1_i32` by zero"}, {"sha": "5a18983a3fa709b892d0efa52feae2183d90a4aa", "filename": "tests/ui/fmt/respanned-literal-issue-106191.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ffmt%2Frespanned-literal-issue-106191.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ffmt%2Frespanned-literal-issue-106191.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffmt%2Frespanned-literal-issue-106191.rs?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -3,7 +3,7 @@\n // known-bug: #106191\n // unset-rustc-env:RUST_BACKTRACE\n // had to be reverted\n-// error-pattern:internal compiler error\n+// error-pattern:unexpectedly panicked\n // failure-status:101\n // dont-check-compiler-stderr\n "}, {"sha": "f3a773837785e3a98f80e9fcc421b06006b29cb4", "filename": "tests/ui/impl-trait/issues/issue-86800.stderr", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fimpl-trait%2Fissues%2Fissue-86800.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -9,9 +9,7 @@ LL | type TransactionFuture<'__, O> = impl '__ + Future<Output = TransactionResu\n \n stack backtrace:\n \n-error: internal compiler error: unexpected panic\n-\n-\n+error: the compiler unexpectedly panicked. this is a bug.\n \n \n "}, {"sha": "a3a514fb830958beb540e7452e46f0733f02c019", "filename": "tests/ui/layout/valid_range_oob.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Flayout%2Fvalid_range_oob.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Flayout%2Fvalid_range_oob.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Flayout%2Fvalid_range_oob.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -1,4 +1,4 @@\n-error: internal compiler error: unexpected panic\n+error: the compiler unexpectedly panicked. this is a bug.\n \n query stack during panic:\n #0 [layout_of] computing layout of `Foo`"}, {"sha": "7bf08bee9222465b3d01f963615c1fc7da3ba0aa", "filename": "tests/ui/panics/default-backtrace-ice.stderr", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fpanics%2Fdefault-backtrace-ice.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Fpanics%2Fdefault-backtrace-ice.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanics%2Fdefault-backtrace-ice.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -4,9 +4,7 @@ LL | fn main() { missing_ident; }\n \n stack backtrace:\n \n-error: internal compiler error: unexpected panic\n-\n-\n+error: the compiler unexpectedly panicked. this is a bug.\n \n \n "}, {"sha": "22c6175048a63ecff25877a248f98d99c970b54a", "filename": "tests/ui/treat-err-as-bug/delay_span_bug.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftreat-err-as-bug%2Fdelay_span_bug.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -4,7 +4,7 @@ error: internal compiler error: delayed span bug triggered by #[rustc_error(dela\n LL | fn main() {}\n    | ^^^^^^^^^\n \n-error: internal compiler error: unexpected panic\n+error: the compiler unexpectedly panicked. this is a bug.\n \n query stack during panic:\n #0 [trigger_delay_span_bug] triggering a delay span bug"}, {"sha": "3a56445a26b58102caea740bef520fef157f3a00", "filename": "tests/ui/treat-err-as-bug/err.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ftreat-err-as-bug%2Ferr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a7597a15265df589b29ed3c61a3047994fc45d0a/tests%2Fui%2Ftreat-err-as-bug%2Ferr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftreat-err-as-bug%2Ferr.stderr?ref=a7597a15265df589b29ed3c61a3047994fc45d0a", "patch": "@@ -4,7 +4,7 @@ error[E0080]: could not evaluate static initializer\n LL | pub static C: u32 = 0 - 1;\n    |                     ^^^^^ attempt to compute `0_u32 - 1_u32`, which would overflow\n \n-error: internal compiler error: unexpected panic\n+error: the compiler unexpectedly panicked. this is a bug.\n \n query stack during panic:\n #0 [eval_to_allocation_raw] const-evaluating + checking `C`"}]}