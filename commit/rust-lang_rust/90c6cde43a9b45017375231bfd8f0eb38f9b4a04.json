{"sha": "90c6cde43a9b45017375231bfd8f0eb38f9b4a04", "node_id": "C_kwDOAAsO6NoAKDkwYzZjZGU0M2E5YjQ1MDE3Mzc1MjMxYmZkOGYwZWIzOGY5YjRhMDQ", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2022-07-23T21:34:31Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-23T21:34:31Z"}, "message": "Rollup merge of #99595 - nikic:thumbv6m-atomics, r=nagisa\n\nMark atomics as unsupported on thumbv6m\n\nThe thumbv6m target does not support atomics. Historically, LLVM\nhad a bug where atomic load/stores for this target were emitted\nas plain load/stores rather than as libatomic calls. This was\nfixed in https://reviews.llvm.org/D120026, which will be part of\nLLVM 15. As we require that \"atomic support\" does not use libatomic,\nwe need to indicate that this target does not have native atomics.", "tree": {"sha": "a3e5eaec30218eca07905fa13f006eb1abcab827", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a3e5eaec30218eca07905fa13f006eb1abcab827"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/90c6cde43a9b45017375231bfd8f0eb38f9b4a04", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJi3GlnCRBK7hj4Ov3rIwAAhbwIAHpOjCnBT77Y8hphgknDow9A\ngW82Y8xfTF9IFSe3YciExdcn/9Li/QDb2vd62foXfeUAJSki9irnGSafLUBgagKu\n9NYEi7TbprYcrmSlq/d0z3B4vaLf6qzfEEV27IUW6IOTnnHsFuUsU9wCkqXHrYOc\n8kF0PiD2f6tC6vYqDN97Sa8CS37dyULTvNgoN2GWsct8epYbYvxkDy5SSZa5qNFT\n4tKOVf8aqLgh/xerebjfv+YZ4rUZvyPEps+4mY2UeiZQ9haTwmBgfvVjFgWZ4+cO\n0tycKf38G1KX62oQEce9A7SexKDNjVFDF+ivyXS3GwbPbZ3L60o02RQtDzugEVE=\n=69GS\n-----END PGP SIGNATURE-----\n", "payload": "tree a3e5eaec30218eca07905fa13f006eb1abcab827\nparent 3648dd552a850eb57119faa9c85a811676799b2c\nparent 75146102197c7f35e6c38cb402b2bc1065858c54\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1658612071 +0200\ncommitter GitHub <noreply@github.com> 1658612071 +0200\n\nRollup merge of #99595 - nikic:thumbv6m-atomics, r=nagisa\n\nMark atomics as unsupported on thumbv6m\n\nThe thumbv6m target does not support atomics. Historically, LLVM\nhad a bug where atomic load/stores for this target were emitted\nas plain load/stores rather than as libatomic calls. This was\nfixed in https://reviews.llvm.org/D120026, which will be part of\nLLVM 15. As we require that \"atomic support\" does not use libatomic,\nwe need to indicate that this target does not have native atomics.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/90c6cde43a9b45017375231bfd8f0eb38f9b4a04", "html_url": "https://github.com/rust-lang/rust/commit/90c6cde43a9b45017375231bfd8f0eb38f9b4a04", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/90c6cde43a9b45017375231bfd8f0eb38f9b4a04/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3648dd552a850eb57119faa9c85a811676799b2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/3648dd552a850eb57119faa9c85a811676799b2c", "html_url": "https://github.com/rust-lang/rust/commit/3648dd552a850eb57119faa9c85a811676799b2c"}, {"sha": "75146102197c7f35e6c38cb402b2bc1065858c54", "url": "https://api.github.com/repos/rust-lang/rust/commits/75146102197c7f35e6c38cb402b2bc1065858c54", "html_url": "https://github.com/rust-lang/rust/commit/75146102197c7f35e6c38cb402b2bc1065858c54"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "dffa19ae55c04bbd5dca8252e30b575782ffa113", "filename": "compiler/rustc_target/src/spec/thumbv6m_none_eabi.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/90c6cde43a9b45017375231bfd8f0eb38f9b4a04/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv6m_none_eabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90c6cde43a9b45017375231bfd8f0eb38f9b4a04/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv6m_none_eabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv6m_none_eabi.rs?ref=90c6cde43a9b45017375231bfd8f0eb38f9b4a04", "patch": "@@ -14,8 +14,9 @@ pub fn target() -> Target {\n             // The ARMv6-M architecture doesn't support unaligned loads/stores so we disable them\n             // with +strict-align.\n             features: \"+strict-align\".into(),\n-            // There are no atomic CAS instructions available in the instruction set of the ARMv6-M\n+            // There are no atomic instructions available in the instruction set of the ARMv6-M\n             // architecture\n+            max_atomic_width: Some(0),\n             atomic_cas: false,\n             ..super::thumb_base::opts()\n         },"}]}