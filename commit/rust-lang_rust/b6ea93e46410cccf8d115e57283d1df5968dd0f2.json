{"sha": "b6ea93e46410cccf8d115e57283d1df5968dd0f2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2ZWE5M2U0NjQxMGNjY2Y4ZDExNWU1NzI4M2QxZGY1OTY4ZGQwZjI=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-06-22T17:42:29Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-07-13T01:53:37Z"}, "message": "Upgrade implementation of StepBy<RangeInclusive<_>>.", "tree": {"sha": "64768540f05eb9e3ecd07ccf01dafa72a25a3356", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64768540f05eb9e3ecd07ccf01dafa72a25a3356"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6ea93e46410cccf8d115e57283d1df5968dd0f2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAltIBiEACgkQ/vbIBR0O\nATzteQ/+K20gbG7za39xB83duIC2SIIkzVO5jGzyasbpRY+EcjO/CnkFAFyCSODf\nTENR9leV8SzTO9qrx1u74bPOjDDlnsVZNmlaxeG/IeasSe8zDxgtSmviqflrLuEa\nPgedvOlT4f9OBeBZ/NdJDKjhfbW5XBgeZl/bMVHNW8GPKU6JfEnjIM3CCKsbMD4S\n8agjte0kbmmKiW/0K23tZqqALxUInSQeFjADDjcmxNeyjaaYbToa9Qw1qEoVbIgz\nZrmaZkpRwY9REL85SFs36jufAAkP04FUUimU0Ot83j1zx/3XV/Vh+DDOp7jX2j+i\nlNULyNL4j3cVoN2ZomeUhawIO+XRP00y8D++rGF8XS08ymnr9v3Rw33CGGzYgRuN\nl880TLLsdD41Eyj3IuATK9lH4tplXvecKG0+a0mllFgUjGb85qeP6wtmvOBdHdFu\nkVxmaJ2YjBH+6EWYtUZjnkkcU3esKOk45aEYjYuY0pHsMqHQf6b2HozOLP94Fyim\njBlGuITthsF3wO8KiaZ8QrM0G2WLY0+7wlA/dtcpLJResqAP1JaxLVuPoKcMT8L9\n/AwK5F2DuYHgLDYiQcdMqwOLGWJzBweZaVRztZ4wy0k7Ep61cYKSRyUsmSUAJuUN\nisSvEN2lXliKCw6LtDKYzLytyzCxPb7TeHNPgmjQSrLc+QDd2mE=\n=Wih5\n-----END PGP SIGNATURE-----", "payload": "tree 64768540f05eb9e3ecd07ccf01dafa72a25a3356\nparent d299f03e285f0ea25c4cce8913368fd7500f74ff\nauthor kennytm <kennytm@gmail.com> 1529689349 +0800\ncommitter kennytm <kennytm@gmail.com> 1531446817 +0800\n\nUpgrade implementation of StepBy<RangeInclusive<_>>.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6ea93e46410cccf8d115e57283d1df5968dd0f2", "html_url": "https://github.com/rust-lang/rust/commit/b6ea93e46410cccf8d115e57283d1df5968dd0f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6ea93e46410cccf8d115e57283d1df5968dd0f2/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d299f03e285f0ea25c4cce8913368fd7500f74ff", "url": "https://api.github.com/repos/rust-lang/rust/commits/d299f03e285f0ea25c4cce8913368fd7500f74ff", "html_url": "https://github.com/rust-lang/rust/commit/d299f03e285f0ea25c4cce8913368fd7500f74ff"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "32134783516db8f9927c1ec57a7d8197f062870c", "filename": "src/libcore/iter/mod.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b6ea93e46410cccf8d115e57283d1df5968dd0f2/src%2Flibcore%2Fiter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6ea93e46410cccf8d115e57283d1df5968dd0f2/src%2Flibcore%2Fiter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter%2Fmod.rs?ref=b6ea93e46410cccf8d115e57283d1df5968dd0f2", "patch": "@@ -787,17 +787,19 @@ where\n     #[inline]\n     fn spec_next(&mut self) -> Option<Self::Item> {\n         self.first_take = false;\n-        if !(self.iter.start <= self.iter.end) {\n+        if self.iter.is_empty() {\n+            self.iter.is_iterating = Some(false);\n             return None;\n         }\n         // add 1 to self.step to get original step size back\n         // it was decremented for the general case on construction\n         if let Some(n) = self.iter.start.add_usize(self.step+1) {\n+            self.iter.is_iterating = Some(n <= self.iter.end);\n             let next = mem::replace(&mut self.iter.start, n);\n             Some(next)\n         } else {\n-            let last = self.iter.start.replace_one();\n-            self.iter.end.replace_zero();\n+            let last = self.iter.start.clone();\n+            self.iter.is_iterating = Some(false);\n             Some(last)\n         }\n     }"}]}