{"sha": "617c65baa90cdbd9228cacad4f2079a9d868d070", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxN2M2NWJhYTkwY2RiZDkyMjhjYWNhZDRmMjA3OWE5ZDg2OGQwNzA=", "commit": {"author": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-02-25T22:33:46Z"}, "committer": {"name": "xFrednet", "email": "xFrednet@gmail.com", "date": "2021-04-05T11:35:51Z"}, "message": "Moving shared_code_in_if_blocks to clippy::complexity and running lintcheck", "tree": {"sha": "e853d463097e0f52e05abf82f84018dfe9262343", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e853d463097e0f52e05abf82f84018dfe9262343"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/617c65baa90cdbd9228cacad4f2079a9d868d070", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/617c65baa90cdbd9228cacad4f2079a9d868d070", "html_url": "https://github.com/rust-lang/rust/commit/617c65baa90cdbd9228cacad4f2079a9d868d070", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/617c65baa90cdbd9228cacad4f2079a9d868d070/comments", "author": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xFrednet", "id": 17087237, "node_id": "MDQ6VXNlcjE3MDg3MjM3", "avatar_url": "https://avatars.githubusercontent.com/u/17087237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xFrednet", "html_url": "https://github.com/xFrednet", "followers_url": "https://api.github.com/users/xFrednet/followers", "following_url": "https://api.github.com/users/xFrednet/following{/other_user}", "gists_url": "https://api.github.com/users/xFrednet/gists{/gist_id}", "starred_url": "https://api.github.com/users/xFrednet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xFrednet/subscriptions", "organizations_url": "https://api.github.com/users/xFrednet/orgs", "repos_url": "https://api.github.com/users/xFrednet/repos", "events_url": "https://api.github.com/users/xFrednet/events{/privacy}", "received_events_url": "https://api.github.com/users/xFrednet/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c74e49eab911ce5d55b3692324dea64905323a88", "url": "https://api.github.com/repos/rust-lang/rust/commits/c74e49eab911ce5d55b3692324dea64905323a88", "html_url": "https://github.com/rust-lang/rust/commit/c74e49eab911ce5d55b3692324dea64905323a88"}], "stats": {"total": 264, "additions": 180, "deletions": 84}, "files": [{"sha": "8b94ac96880da800f852badc508476019843c6b4", "filename": "clippy_lints/src/copies.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_lints%2Fsrc%2Fcopies.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_lints%2Fsrc%2Fcopies.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcopies.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -142,7 +142,7 @@ declare_clippy_lint! {\n     /// };\n     /// ```\n     pub SHARED_CODE_IN_IF_BLOCKS,\n-    nursery,\n+    complexity,\n     \"`if` statement with shared code in all blocks\"\n }\n \n@@ -457,11 +457,11 @@ fn emit_shared_code_in_if_blocks_lint(\n \n     let add_optional_msgs = |diag: &mut DiagnosticBuilder<'_>| {\n         if add_expr_note {\n-            diag.note(\"The end suggestion probably needs some adjustments to use the expression result correctly.\");\n+            diag.note(\"The end suggestion probably needs some adjustments to use the expression result correctly\");\n         }\n \n         if warn_about_moved_symbol {\n-            diag.warn(\"Some moved values might need to be renamed to avoid wrong references.\");\n+            diag.warn(\"Some moved values might need to be renamed to avoid wrong references\");\n         }\n     };\n "}, {"sha": "3f5c1c7c52692ea625278b1fa947726461cf5d74", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1485,6 +1485,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&comparison_chain::COMPARISON_CHAIN),\n         LintId::of(&copies::IFS_SAME_COND),\n         LintId::of(&copies::IF_SAME_THEN_ELSE),\n+        LintId::of(&copies::SHARED_CODE_IN_IF_BLOCKS),\n         LintId::of(&default::FIELD_REASSIGN_WITH_DEFAULT),\n         LintId::of(&derive::DERIVE_HASH_XOR_EQ),\n         LintId::of(&derive::DERIVE_ORD_XOR_PARTIAL_ORD),\n@@ -2063,7 +2064,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     store.register_group(true, \"clippy::nursery\", Some(\"clippy_nursery\"), vec![\n         LintId::of(&attrs::EMPTY_LINE_AFTER_OUTER_ATTR),\n         LintId::of(&cognitive_complexity::COGNITIVE_COMPLEXITY),\n-        LintId::of(&copies::SHARED_CODE_IN_IF_BLOCKS),\n         LintId::of(&disallowed_method::DISALLOWED_METHOD),\n         LintId::of(&fallible_impl_from::FALLIBLE_IMPL_FROM),\n         LintId::of(&floating_point_arithmetic::IMPRECISE_FLOPS),"}, {"sha": "571eec9e530fb7be5a25a72a9718f4ef48470141", "filename": "clippy_utils/src/hir_utils.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_utils%2Fsrc%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_utils%2Fsrc%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fhir_utils.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -96,9 +96,11 @@ impl HirEqInterExpr<'_, '_, '_> {\n     pub fn eq_stmt(&mut self, left: &Stmt<'_>, right: &Stmt<'_>) -> bool {\n         match (&left.kind, &right.kind) {\n             (&StmtKind::Local(ref l), &StmtKind::Local(ref r)) => {\n-                self.eq_pat(&l.pat, &r.pat)\n+                // eq_pat adds the HirIds to the locals map. We therefor call it last to make sure that\n+                // these only get added if the init and type is equal.\n+                both(&l.init, &r.init, |l, r| self.eq_expr(l, r))\n                     && both(&l.ty, &r.ty, |l, r| self.eq_ty(l, r))\n-                    && both(&l.init, &r.init, |l, r| self.eq_expr(l, r))\n+                    && self.eq_pat(&l.pat, &r.pat)\n             },\n             (&StmtKind::Expr(ref l), &StmtKind::Expr(ref r)) | (&StmtKind::Semi(ref l), &StmtKind::Semi(ref r)) => {\n                 self.eq_expr(l, r)"}, {"sha": "f9576068dd65229a8d47a33ade1dc4ad45d376cf", "filename": "clippy_utils/src/lib.rs", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_utils%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/clippy_utils%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Flib.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -609,9 +609,9 @@ pub fn get_pat_name(pat: &Pat<'_>) -> Option<Symbol> {\n     }\n }\n \n-struct ContainsName {\n-    name: Symbol,\n-    result: bool,\n+pub struct ContainsName {\n+    pub name: Symbol,\n+    pub result: bool,\n }\n \n impl<'tcx> Visitor<'tcx> for ContainsName {\n@@ -1216,6 +1216,8 @@ pub fn if_sequence<'tcx>(mut expr: &'tcx Expr<'tcx>) -> (Vec<&'tcx Expr<'tcx>>,\n     (conds, blocks)\n }\n \n+/// This function returns true if the given expression is the `else` or `if else` part of an if\n+/// statement\n pub fn parent_node_is_if_expr(expr: &Expr<'_>, cx: &LateContext<'_>) -> bool {\n     let map = cx.tcx.hir();\n     let parent_id = map.get_parent_node(expr.hir_id);\n@@ -1326,6 +1328,16 @@ pub fn fn_def_id(cx: &LateContext<'_>, expr: &Expr<'_>) -> Option<DefId> {\n     }\n }\n \n+/// This function checks if any of the lints in the slice is enabled for the provided `HirId`.\n+/// A lint counts as enabled with any of the levels: `Level::Forbid` | `Level::Deny` | `Level::Warn`\n+///\n+/// ```ignore\n+/// #[deny(clippy::YOUR_AWESOME_LINT)]\n+/// println!(\"Hello, World!\"); // <- Clippy code: run_lints(cx, &[YOUR_AWESOME_LINT], id) == true\n+///\n+/// #[allow(clippy::YOUR_AWESOME_LINT)]\n+/// println!(\"See you soon!\"); // <- Clippy code: run_lints(cx, &[YOUR_AWESOME_LINT], id) == false\n+/// ```\n pub fn run_lints(cx: &LateContext<'_>, lints: &[&'static Lint], id: HirId) -> bool {\n     lints.iter().any(|lint| {\n         matches!("}, {"sha": "99e8fb954665fccd28f686d8766863ccb62052f5", "filename": "tests/ui/checked_unwrap/complex_conditionals_nested.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fchecked_unwrap%2Fcomplex_conditionals_nested.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fchecked_unwrap%2Fcomplex_conditionals_nested.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchecked_unwrap%2Fcomplex_conditionals_nested.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,5 +1,5 @@\n #![deny(clippy::panicking_unwrap, clippy::unnecessary_unwrap)]\n-#![allow(clippy::if_same_then_else)]\n+#![allow(clippy::if_same_then_else, clippy::shared_code_in_if_blocks)]\n \n fn test_nested() {\n     fn nested() {"}, {"sha": "0459100d88ac8852454b563939be6fc371ce42c7", "filename": "tests/ui/checked_unwrap/simple_conditionals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fchecked_unwrap%2Fsimple_conditionals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fchecked_unwrap%2Fsimple_conditionals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fchecked_unwrap%2Fsimple_conditionals.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,5 +1,5 @@\n #![deny(clippy::panicking_unwrap, clippy::unnecessary_unwrap)]\n-#![allow(clippy::if_same_then_else)]\n+#![allow(clippy::if_same_then_else, clippy::shared_code_in_if_blocks)]\n \n macro_rules! m {\n     ($a:expr) => {"}, {"sha": "de89f806c58529fb7a30668d834e8ce2fa8087df", "filename": "tests/ui/default_numeric_fallback.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fdefault_numeric_fallback.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fdefault_numeric_fallback.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdefault_numeric_fallback.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -3,6 +3,7 @@\n #![allow(clippy::never_loop)]\n #![allow(clippy::no_effect)]\n #![allow(clippy::unnecessary_operation)]\n+#![allow(clippy::shared_code_in_if_blocks)]\n \n mod basic_expr {\n     fn test() {"}, {"sha": "d1c4c8203dd832a07875d668dd9d7178928f64ca", "filename": "tests/ui/default_numeric_fallback.stderr", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fdefault_numeric_fallback.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fdefault_numeric_fallback.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdefault_numeric_fallback.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,145 +1,145 @@\n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:10:17\n+  --> $DIR/default_numeric_fallback.rs:11:17\n    |\n LL |         let x = 22;\n    |                 ^^ help: consider adding suffix: `22_i32`\n    |\n    = note: `-D clippy::default-numeric-fallback` implied by `-D warnings`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:11:18\n+  --> $DIR/default_numeric_fallback.rs:12:18\n    |\n LL |         let x = [1, 2, 3];\n    |                  ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:11:21\n+  --> $DIR/default_numeric_fallback.rs:12:21\n    |\n LL |         let x = [1, 2, 3];\n    |                     ^ help: consider adding suffix: `2_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:11:24\n+  --> $DIR/default_numeric_fallback.rs:12:24\n    |\n LL |         let x = [1, 2, 3];\n    |                        ^ help: consider adding suffix: `3_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:12:28\n+  --> $DIR/default_numeric_fallback.rs:13:28\n    |\n LL |         let x = if true { (1, 2) } else { (3, 4) };\n    |                            ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:12:31\n+  --> $DIR/default_numeric_fallback.rs:13:31\n    |\n LL |         let x = if true { (1, 2) } else { (3, 4) };\n    |                               ^ help: consider adding suffix: `2_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:12:44\n+  --> $DIR/default_numeric_fallback.rs:13:44\n    |\n LL |         let x = if true { (1, 2) } else { (3, 4) };\n    |                                            ^ help: consider adding suffix: `3_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:12:47\n+  --> $DIR/default_numeric_fallback.rs:13:47\n    |\n LL |         let x = if true { (1, 2) } else { (3, 4) };\n    |                                               ^ help: consider adding suffix: `4_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:13:23\n+  --> $DIR/default_numeric_fallback.rs:14:23\n    |\n LL |         let x = match 1 {\n    |                       ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:14:13\n+  --> $DIR/default_numeric_fallback.rs:15:13\n    |\n LL |             1 => 1,\n    |             ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:14:18\n+  --> $DIR/default_numeric_fallback.rs:15:18\n    |\n LL |             1 => 1,\n    |                  ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:15:18\n+  --> $DIR/default_numeric_fallback.rs:16:18\n    |\n LL |             _ => 2,\n    |                  ^ help: consider adding suffix: `2_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:19:17\n+  --> $DIR/default_numeric_fallback.rs:20:17\n    |\n LL |         let x = 0.12;\n    |                 ^^^^ help: consider adding suffix: `0.12_f64`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:37:21\n+  --> $DIR/default_numeric_fallback.rs:38:21\n    |\n LL |             let y = 1;\n    |                     ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:45:21\n+  --> $DIR/default_numeric_fallback.rs:46:21\n    |\n LL |             let y = 1;\n    |                     ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:51:21\n+  --> $DIR/default_numeric_fallback.rs:52:21\n    |\n LL |             let y = 1;\n    |                     ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:63:9\n+  --> $DIR/default_numeric_fallback.rs:64:9\n    |\n LL |         1\n    |         ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:69:27\n+  --> $DIR/default_numeric_fallback.rs:70:27\n    |\n LL |         let f = || -> _ { 1 };\n    |                           ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:73:29\n+  --> $DIR/default_numeric_fallback.rs:74:29\n    |\n LL |         let f = || -> i32 { 1 };\n    |                             ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:87:21\n+  --> $DIR/default_numeric_fallback.rs:88:21\n    |\n LL |         generic_arg(1);\n    |                     ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:90:32\n+  --> $DIR/default_numeric_fallback.rs:91:32\n    |\n LL |         let x: _ = generic_arg(1);\n    |                                ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:108:28\n+  --> $DIR/default_numeric_fallback.rs:109:28\n    |\n LL |         GenericStruct { x: 1 };\n    |                            ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:111:36\n+  --> $DIR/default_numeric_fallback.rs:112:36\n    |\n LL |         let _ = GenericStruct { x: 1 };\n    |                                    ^ help: consider adding suffix: `1_i32`\n \n error: default numeric fallback might occur\n-  --> $DIR/default_numeric_fallback.rs:131:23\n+  --> $DIR/default_numeric_fallback.rs:132:23\n    |\n LL |         s.generic_arg(1);\n    |                       ^ help: consider adding suffix: `1_i32`"}, {"sha": "2f38052fc209e957e76bb06f97000d40bb45c15f", "filename": "tests/ui/if_same_then_else.stderr", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fif_same_then_else.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fif_same_then_else.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fif_same_then_else.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -82,5 +82,31 @@ LL | |         42\n LL | |     };\n    | |_____^\n \n-error: aborting due to 4 previous errors\n+error: this `if` has identical blocks\n+  --> $DIR/if_same_then_else.rs:95:13\n+   |\n+LL |       if true {\n+   |  _____________^\n+LL | |         let bar = if true { 42 } else { 43 };\n+LL | |\n+LL | |         while foo() {\n+...  |\n+LL | |         bar + 1;\n+LL | |     } else {\n+   | |_____^\n+   |\n+note: same as this\n+  --> $DIR/if_same_then_else.rs:102:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         //~ ERROR same body as `if` block\n+LL | |         let bar = if true { 42 } else { 43 };\n+LL | |\n+...  |\n+LL | |         bar + 1;\n+LL | |     }\n+   | |_____^\n+\n+error: aborting due to 5 previous errors\n "}, {"sha": "6524be0af8517ff4925a7723b8554ffd30e7aa93", "filename": "tests/ui/if_same_then_else2.stderr", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fif_same_then_else2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fif_same_then_else2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fif_same_then_else2.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -101,5 +101,25 @@ LL | |         Ok(\"foo\")?;\n LL | |     }\n    | |_____^\n \n-error: aborting due to 5 previous errors\n+error: this `if` has identical blocks\n+  --> $DIR/if_same_then_else2.rs:122:20\n+   |\n+LL |       } else if true {\n+   |  ____________________^\n+LL | |         let foo = \"\";\n+LL | |         return Ok(&foo[0..]);\n+LL | |     } else {\n+   | |_____^\n+   |\n+note: same as this\n+  --> $DIR/if_same_then_else2.rs:125:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         let foo = \"\";\n+LL | |         return Ok(&foo[0..]);\n+LL | |     }\n+   | |_____^\n+\n+error: aborting due to 6 previous errors\n "}, {"sha": "678040fa98b391572cec5bc67e3bec4450b00f4f", "filename": "tests/ui/needless_bool/simple.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_bool%2Fsimple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_bool%2Fsimple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_bool%2Fsimple.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -4,7 +4,8 @@\n     dead_code,\n     clippy::no_effect,\n     clippy::if_same_then_else,\n-    clippy::needless_return\n+    clippy::needless_return,\n+    clippy::shared_code_in_if_blocks\n )]\n \n fn main() {"}, {"sha": "0ccc9416bcd58d1727c8c6c2cca74fc757ac2e75", "filename": "tests/ui/needless_bool/simple.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_bool%2Fsimple.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_bool%2Fsimple.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_bool%2Fsimple.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,5 +1,5 @@\n error: this if-then-else expression will always return true\n-  --> $DIR/simple.rs:13:5\n+  --> $DIR/simple.rs:14:5\n    |\n LL | /     if x {\n LL | |         true\n@@ -11,7 +11,7 @@ LL | |     };\n    = note: `-D clippy::needless-bool` implied by `-D warnings`\n \n error: this if-then-else expression will always return false\n-  --> $DIR/simple.rs:18:5\n+  --> $DIR/simple.rs:19:5\n    |\n LL | /     if x {\n LL | |         false\n@@ -21,7 +21,7 @@ LL | |     };\n    | |_____^\n \n error: this if-then-else expression will always return true\n-  --> $DIR/simple.rs:33:5\n+  --> $DIR/simple.rs:34:5\n    |\n LL | /     if x {\n LL | |         return true;\n@@ -31,7 +31,7 @@ LL | |     };\n    | |_____^\n \n error: this if-then-else expression will always return false\n-  --> $DIR/simple.rs:41:5\n+  --> $DIR/simple.rs:42:5\n    |\n LL | /     if x {\n LL | |         return false;"}, {"sha": "ebf74cfef1269b2c844beb29621c71ccd0f09801", "filename": "tests/ui/needless_return.fixed", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.fixed?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,7 +1,12 @@\n // run-rustfix\n \n-#![allow(unused, clippy::needless_bool)]\n-#![allow(clippy::if_same_then_else, clippy::single_match)]\n+#![allow(unused)]\n+#![allow(\n+    clippy::if_same_then_else,\n+    clippy::single_match,\n+    clippy::shared_code_in_if_blocks,\n+    clippy::needless_bool\n+)]\n #![warn(clippy::needless_return)]\n \n macro_rules! the_answer {"}, {"sha": "2bebccdabca5f7eef15c6346ed256fb448f56234", "filename": "tests/ui/needless_return.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,7 +1,12 @@\n // run-rustfix\n \n-#![allow(unused, clippy::needless_bool)]\n-#![allow(clippy::if_same_then_else, clippy::single_match)]\n+#![allow(unused)]\n+#![allow(\n+    clippy::if_same_then_else,\n+    clippy::single_match,\n+    clippy::shared_code_in_if_blocks,\n+    clippy::needless_bool\n+)]\n #![warn(clippy::needless_return)]\n \n macro_rules! the_answer {"}, {"sha": "075db22456f736b0ad268830dd5687af4aa1f702", "filename": "tests/ui/needless_return.stderr", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fneedless_return.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_return.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,109 +1,109 @@\n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:18:5\n+  --> $DIR/needless_return.rs:23:5\n    |\n LL |     return true;\n    |     ^^^^^^^^^^^^ help: remove `return`: `true`\n    |\n    = note: `-D clippy::needless-return` implied by `-D warnings`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:22:5\n+  --> $DIR/needless_return.rs:27:5\n    |\n LL |     return true;\n    |     ^^^^^^^^^^^^ help: remove `return`: `true`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:27:9\n+  --> $DIR/needless_return.rs:32:9\n    |\n LL |         return true;\n    |         ^^^^^^^^^^^^ help: remove `return`: `true`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:29:9\n+  --> $DIR/needless_return.rs:34:9\n    |\n LL |         return false;\n    |         ^^^^^^^^^^^^^ help: remove `return`: `false`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:35:17\n+  --> $DIR/needless_return.rs:40:17\n    |\n LL |         true => return false,\n    |                 ^^^^^^^^^^^^ help: remove `return`: `false`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:37:13\n+  --> $DIR/needless_return.rs:42:13\n    |\n LL |             return true;\n    |             ^^^^^^^^^^^^ help: remove `return`: `true`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:44:9\n+  --> $DIR/needless_return.rs:49:9\n    |\n LL |         return true;\n    |         ^^^^^^^^^^^^ help: remove `return`: `true`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:46:16\n+  --> $DIR/needless_return.rs:51:16\n    |\n LL |     let _ = || return true;\n    |                ^^^^^^^^^^^ help: remove `return`: `true`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:54:5\n+  --> $DIR/needless_return.rs:59:5\n    |\n LL |     return;\n    |     ^^^^^^^ help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:59:9\n+  --> $DIR/needless_return.rs:64:9\n    |\n LL |         return;\n    |         ^^^^^^^ help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:61:9\n+  --> $DIR/needless_return.rs:66:9\n    |\n LL |         return;\n    |         ^^^^^^^ help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:68:14\n+  --> $DIR/needless_return.rs:73:14\n    |\n LL |         _ => return,\n    |              ^^^^^^ help: replace `return` with an empty block: `{}`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:83:9\n+  --> $DIR/needless_return.rs:88:9\n    |\n LL |         return String::from(\"test\");\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `String::from(\"test\")`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:85:9\n+  --> $DIR/needless_return.rs:90:9\n    |\n LL |         return String::new();\n    |         ^^^^^^^^^^^^^^^^^^^^^ help: remove `return`: `String::new()`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:106:32\n+  --> $DIR/needless_return.rs:111:32\n    |\n LL |         bar.unwrap_or_else(|_| return)\n    |                                ^^^^^^ help: replace `return` with an empty block: `{}`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:111:13\n+  --> $DIR/needless_return.rs:116:13\n    |\n LL |             return;\n    |             ^^^^^^^ help: remove `return`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:113:20\n+  --> $DIR/needless_return.rs:118:20\n    |\n LL |         let _ = || return;\n    |                    ^^^^^^ help: replace `return` with an empty block: `{}`\n \n error: unneeded `return` statement\n-  --> $DIR/needless_return.rs:119:32\n+  --> $DIR/needless_return.rs:124:32\n    |\n LL |         res.unwrap_or_else(|_| return Foo)\n    |                                ^^^^^^^^^^ help: remove `return`: `Foo`"}, {"sha": "6ff362cb752598b387e92762192c8cdfdc03dff8", "filename": "tests/ui/shared_code_in_if_blocks/shared_at_bot.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -190,4 +190,20 @@ fn test_suggestion_with_weird_formatting() {\n     if x == 17 { b = 1; a = 0x99; } else { a = 0x99; }\n }\n \n+fn fp_test() {\n+    let x = 17;\n+\n+    if x == 18 {\n+        let y = 19;\n+        if y < x {\n+            println!(\"Trigger\")\n+        }\n+    } else {\n+        let z = 166;\n+        if z < x {\n+            println!(\"Trigger\")\n+        }\n+    }\n+}\n+\n fn main() {}"}, {"sha": "2268d8f536552c6e83ba38cd95da8bc1f77be2c6", "filename": "tests/ui/shared_code_in_if_blocks/shared_at_bot.stderr", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_bot.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -12,7 +12,7 @@ note: the lint level is defined here\n    |\n LL | #![deny(clippy::if_same_then_else, clippy::shared_code_in_if_blocks)]\n    |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-   = note: The end suggestion probably needs some adjustments to use the expression result correctly.\n+   = note: The end suggestion probably needs some adjustments to use the expression result correctly\n help: consider moving the end statements out like this\n    |\n LL |     }\n@@ -75,7 +75,7 @@ LL | |         // I'm expecting a note about this\n LL | |     }\n    | |_____^\n    |\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the end statements out like this\n    |\n LL |     }\n@@ -91,7 +91,7 @@ LL | |         println!(\"This is the new simple_example: {}\", simple_examples);\n LL | |     }\n    | |_____^\n    |\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the end statements out like this\n    |\n LL |     }\n@@ -106,7 +106,7 @@ LL | /         x << 2\n LL | |     };\n    | |_____^\n    |\n-   = note: The end suggestion probably needs some adjustments to use the expression result correctly.\n+   = note: The end suggestion probably needs some adjustments to use the expression result correctly\n help: consider moving the end statements out like this\n    |\n LL |     }\n@@ -120,7 +120,7 @@ LL | /         x * 4\n LL | |     }\n    | |_____^\n    |\n-   = note: The end suggestion probably needs some adjustments to use the expression result correctly.\n+   = note: The end suggestion probably needs some adjustments to use the expression result correctly\n help: consider moving the end statements out like this\n    |\n LL |     }"}, {"sha": "76898a6ff02a5ac1f8b46c754e0c38f20b99fc4e", "filename": "tests/ui/shared_code_in_if_blocks/shared_at_top.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -25,7 +25,7 @@ LL | |         println!(\"The value y was set to: `{}`\", y);\n LL | |         let _z = y;\n    | |___________________^\n    |\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the start statements out like this\n    |\n LL |     let y = 9;\n@@ -55,7 +55,7 @@ LL | |         let used_value_name = \"Different type\";\n LL | |         println!(\"Str: {}\", used_value_name);\n    | |_____________________________________________^\n    |\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the start statements out like this\n    |\n LL |     let used_value_name = \"Different type\";\n@@ -71,7 +71,7 @@ LL | |         let can_be_overridden = \"Move me\";\n LL | |         println!(\"I'm also moveable\");\n    | |______________________________________^\n    |\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the start statements out like this\n    |\n LL |     let can_be_overridden = \"Move me\";"}, {"sha": "75c3d397f2e927867baa6ba7e3531bff558de3ca", "filename": "tests/ui/shared_code_in_if_blocks/shared_at_top_and_bot.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top_and_bot.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top_and_bot.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fshared_at_top_and_bot.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -47,7 +47,7 @@ LL | /         let _overlap_end = r * r * r;\n LL | |         let z = \"end\";\n LL | |     }\n    | |_____^\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the start statements out like this\n    |\n LL |     let r = 7;\n@@ -82,7 +82,7 @@ LL | |         };\n LL | |         process_data(pack);\n LL | |     }\n    | |_____^\n-   = warning: Some moved values might need to be renamed to avoid wrong references.\n+   = warning: Some moved values might need to be renamed to avoid wrong references\n help: consider moving the start statements out like this\n    |\n LL |     let a = 0xcafe;\n@@ -113,7 +113,7 @@ note: and here at the end\n LL | /         x << 2\n LL | |     };\n    | |_____^\n-   = note: The end suggestion probably needs some adjustments to use the expression result correctly.\n+   = note: The end suggestion probably needs some adjustments to use the expression result correctly\n help: consider moving the start statements out like this\n    |\n LL |     let _ = 19;\n@@ -138,7 +138,7 @@ note: and here at the end\n LL | /         x * 4\n LL | |     }\n    | |_____^\n-   = note: The end suggestion probably needs some adjustments to use the expression result correctly.\n+   = note: The end suggestion probably needs some adjustments to use the expression result correctly\n help: consider moving the start statements out like this\n    |\n LL |     let _ = 17;"}, {"sha": "cd397db47d0d9091a8685f4186e0c5b61ebe1347", "filename": "tests/ui/shared_code_in_if_blocks/valid_if_blocks.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.rs?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -91,6 +91,14 @@ fn valid_examples() {\n         let _ = (x, y, z);\n         // I'm so much better than the x == 418 block. Trust me\n     }\n+\n+    let x = 1;\n+    if true {\n+        println!(\"{}\", x);\n+    } else {\n+        let x = 2;\n+        println!(\"{}\", x);\n+    }\n }\n \n /// This makes sure that the `if_same_then_else` masks the `shared_code_in_if_blocks` lint"}, {"sha": "2061cc25d216f87e9759eaa121e9d5aa7241fd4c", "filename": "tests/ui/shared_code_in_if_blocks/valid_if_blocks.stderr", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/617c65baa90cdbd9228cacad4f2079a9d868d070/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fshared_code_in_if_blocks%2Fvalid_if_blocks.stderr?ref=617c65baa90cdbd9228cacad4f2079a9d868d070", "patch": "@@ -1,5 +1,5 @@\n error: this `if` has identical blocks\n-  --> $DIR/valid_if_blocks.rs:102:15\n+  --> $DIR/valid_if_blocks.rs:110:15\n    |\n LL |       if x == 0 {\n    |  _______________^\n@@ -15,7 +15,7 @@ note: the lint level is defined here\n LL | #![deny(clippy::if_same_then_else, clippy::shared_code_in_if_blocks)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^\n note: same as this\n-  --> $DIR/valid_if_blocks.rs:106:12\n+  --> $DIR/valid_if_blocks.rs:114:12\n    |\n LL |       } else {\n    |  ____________^\n@@ -26,19 +26,19 @@ LL | |     }\n    | |_____^\n \n error: this `if` has identical blocks\n-  --> $DIR/valid_if_blocks.rs:113:23\n+  --> $DIR/valid_if_blocks.rs:121:23\n    |\n LL |     let _ = if x == 6 { 7 } else { 7 };\n    |                       ^^^^^\n    |\n note: same as this\n-  --> $DIR/valid_if_blocks.rs:113:34\n+  --> $DIR/valid_if_blocks.rs:121:34\n    |\n LL |     let _ = if x == 6 { 7 } else { 7 };\n    |                                  ^^^^^\n \n error: this `if` has identical blocks\n-  --> $DIR/valid_if_blocks.rs:119:23\n+  --> $DIR/valid_if_blocks.rs:127:23\n    |\n LL |       } else if x == 68 {\n    |  _______________________^\n@@ -51,7 +51,7 @@ LL | |     } else {\n    | |_____^\n    |\n note: same as this\n-  --> $DIR/valid_if_blocks.rs:128:12\n+  --> $DIR/valid_if_blocks.rs:136:12\n    |\n LL |       } else {\n    |  ____________^\n@@ -64,7 +64,7 @@ LL | |     };\n    | |_____^\n \n error: this `if` has identical blocks\n-  --> $DIR/valid_if_blocks.rs:141:23\n+  --> $DIR/valid_if_blocks.rs:149:23\n    |\n LL |       } else if x == 68 {\n    |  _______________________^\n@@ -74,7 +74,7 @@ LL | |     } else {\n    | |_____^\n    |\n note: same as this\n-  --> $DIR/valid_if_blocks.rs:144:12\n+  --> $DIR/valid_if_blocks.rs:152:12\n    |\n LL |       } else {\n    |  ____________^"}]}