{"sha": "301bb123f424954cd3faee11bbbfb0605e5ae0e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwMWJiMTIzZjQyNDk1NGNkM2ZhZWUxMWJiYmZiMDYwNWU1YWUwZTg=", "commit": {"author": {"name": "Joseph Rafael Ferrer", "email": "rafael2x0@gmail.com", "date": "2020-10-30T10:19:56Z"}, "committer": {"name": "Joseph Rafael Ferrer", "email": "rafael2x0@gmail.com", "date": "2020-10-30T10:23:02Z"}, "message": "Enable LLVM Polly via llvm-args.", "tree": {"sha": "bf87e05ad0fdbd1f15c8ae0371224b5b7b2a3601", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bf87e05ad0fdbd1f15c8ae0371224b5b7b2a3601"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/301bb123f424954cd3faee11bbbfb0605e5ae0e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/301bb123f424954cd3faee11bbbfb0605e5ae0e8", "html_url": "https://github.com/rust-lang/rust/commit/301bb123f424954cd3faee11bbbfb0605e5ae0e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/301bb123f424954cd3faee11bbbfb0605e5ae0e8/comments", "author": {"login": "JRF63", "id": 7283601, "node_id": "MDQ6VXNlcjcyODM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7283601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JRF63", "html_url": "https://github.com/JRF63", "followers_url": "https://api.github.com/users/JRF63/followers", "following_url": "https://api.github.com/users/JRF63/following{/other_user}", "gists_url": "https://api.github.com/users/JRF63/gists{/gist_id}", "starred_url": "https://api.github.com/users/JRF63/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JRF63/subscriptions", "organizations_url": "https://api.github.com/users/JRF63/orgs", "repos_url": "https://api.github.com/users/JRF63/repos", "events_url": "https://api.github.com/users/JRF63/events{/privacy}", "received_events_url": "https://api.github.com/users/JRF63/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JRF63", "id": 7283601, "node_id": "MDQ6VXNlcjcyODM2MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/7283601?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JRF63", "html_url": "https://github.com/JRF63", "followers_url": "https://api.github.com/users/JRF63/followers", "following_url": "https://api.github.com/users/JRF63/following{/other_user}", "gists_url": "https://api.github.com/users/JRF63/gists{/gist_id}", "starred_url": "https://api.github.com/users/JRF63/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JRF63/subscriptions", "organizations_url": "https://api.github.com/users/JRF63/orgs", "repos_url": "https://api.github.com/users/JRF63/repos", "events_url": "https://api.github.com/users/JRF63/events{/privacy}", "received_events_url": "https://api.github.com/users/JRF63/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8df58ae03a8fda8ed126c02fbc16b530d18344df", "url": "https://api.github.com/repos/rust-lang/rust/commits/8df58ae03a8fda8ed126c02fbc16b530d18344df", "html_url": "https://github.com/rust-lang/rust/commit/8df58ae03a8fda8ed126c02fbc16b530d18344df"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "1dcc5f13415dc8680ee00e119e33c3817c57635c", "filename": "config.toml.example", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/301bb123f424954cd3faee11bbbfb0605e5ae0e8/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/301bb123f424954cd3faee11bbbfb0605e5ae0e8/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=301bb123f424954cd3faee11bbbfb0605e5ae0e8", "patch": "@@ -138,6 +138,9 @@ changelog-seen = 2\n # Whether or not to specify `-DLLVM_TEMPORARILY_ALLOW_OLD_TOOLCHAIN=YES`\n #allow-old-toolchain = false\n \n+# Whether to include the Polly optimizer.\n+#polly = false\n+\n # =============================================================================\n # General build configuration options\n # ============================================================================="}, {"sha": "8f6fbaebd2c5a62a0da6d5fa89461792b1648bd1", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/301bb123f424954cd3faee11bbbfb0605e5ae0e8/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/301bb123f424954cd3faee11bbbfb0605e5ae0e8/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=301bb123f424954cd3faee11bbbfb0605e5ae0e8", "patch": "@@ -99,6 +99,7 @@ pub struct Config {\n     pub llvm_version_suffix: Option<String>,\n     pub llvm_use_linker: Option<String>,\n     pub llvm_allow_old_toolchain: Option<bool>,\n+    pub llvm_polly: Option<bool>,\n     pub llvm_from_ci: bool,\n \n     pub use_lld: bool,\n@@ -418,6 +419,7 @@ struct Llvm {\n     use_libcxx: Option<bool>,\n     use_linker: Option<String>,\n     allow_old_toolchain: Option<bool>,\n+    polly: Option<bool>,\n     download_ci_llvm: Option<StringOrBool>,\n }\n \n@@ -762,6 +764,7 @@ impl Config {\n             set(&mut config.llvm_use_libcxx, llvm.use_libcxx);\n             config.llvm_use_linker = llvm.use_linker.clone();\n             config.llvm_allow_old_toolchain = llvm.allow_old_toolchain;\n+            config.llvm_polly = llvm.polly;\n             config.llvm_from_ci = match llvm.download_ci_llvm {\n                 Some(StringOrBool::String(s)) => {\n                     assert!(s == \"if-available\", \"unknown option `{}` for download-ci-llvm\", s);\n@@ -795,6 +798,7 @@ impl Config {\n                 check_ci_llvm!(llvm.use_libcxx);\n                 check_ci_llvm!(llvm.use_linker);\n                 check_ci_llvm!(llvm.allow_old_toolchain);\n+                check_ci_llvm!(llvm.polly);\n \n                 // CI-built LLVM is shared\n                 config.llvm_link_shared = true;"}, {"sha": "6dc83c7d70af69c04868779bacb615ebc05ba31f", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/301bb123f424954cd3faee11bbbfb0605e5ae0e8/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/301bb123f424954cd3faee11bbbfb0605e5ae0e8/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=301bb123f424954cd3faee11bbbfb0605e5ae0e8", "patch": "@@ -257,6 +257,10 @@ impl Step for Llvm {\n             enabled_llvm_projects.push(\"compiler-rt\");\n         }\n \n+        if let Some(true) = builder.config.llvm_polly {\n+            enabled_llvm_projects.push(\"polly\");\n+        }\n+\n         // We want libxml to be disabled.\n         // See https://github.com/rust-lang/rust/pull/50104\n         cfg.define(\"LLVM_ENABLE_LIBXML2\", \"OFF\");"}]}