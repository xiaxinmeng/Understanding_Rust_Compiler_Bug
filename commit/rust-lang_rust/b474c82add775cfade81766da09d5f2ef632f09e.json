{"sha": "b474c82add775cfade81766da09d5f2ef632f09e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI0NzRjODJhZGQ3NzVjZmFkZTgxNzY2ZGEwOWQ1ZjJlZjYzMmYwOWU=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-09-22T18:25:00Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-09-22T18:25:00Z"}, "message": "Rollup merge of #36330 - aclarry:e0560-update, r=jonathandturner\n\nUpdated E0560 to new error format\n\nAdded a small bit of code to add a label for E0560.\n\nAlso renamed src/test/compile-fail/E560.rs file to E0560.rs (not sure why it was named E560).\nUpdated all test cases which check this error.\n\nCloses #36199", "tree": {"sha": "8400b804689dfd12808e0f507618b7cf25bbec3b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8400b804689dfd12808e0f507618b7cf25bbec3b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b474c82add775cfade81766da09d5f2ef632f09e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b474c82add775cfade81766da09d5f2ef632f09e", "html_url": "https://github.com/rust-lang/rust/commit/b474c82add775cfade81766da09d5f2ef632f09e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b474c82add775cfade81766da09d5f2ef632f09e/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a09cb57a737fcea6bad33ca4e4ec8e3e97c712e2", "url": "https://api.github.com/repos/rust-lang/rust/commits/a09cb57a737fcea6bad33ca4e4ec8e3e97c712e2", "html_url": "https://github.com/rust-lang/rust/commit/a09cb57a737fcea6bad33ca4e4ec8e3e97c712e2"}, {"sha": "23efc5453d2c43ac143cf5d4a695b9fd9e8c695d", "url": "https://api.github.com/repos/rust-lang/rust/commits/23efc5453d2c43ac143cf5d4a695b9fd9e8c695d", "html_url": "https://github.com/rust-lang/rust/commit/23efc5453d2c43ac143cf5d4a695b9fd9e8c695d"}], "stats": {"total": 48, "additions": 35, "deletions": 13}, "files": [{"sha": "e406807b51c315bd17a9e5635fc0f3f297e227fa", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -3099,7 +3099,18 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n         if let Some(field_name) = Self::suggest_field_name(variant,\n                                                            &field.name,\n                                                            skip_fields.collect()) {\n-            err.span_label(field.name.span,&format!(\"did you mean `{}`?\",field_name));\n+            err.span_label(field.name.span,\n+                           &format!(\"field does not exist - did you mean `{}`?\", field_name));\n+        } else {\n+            match ty.sty {\n+                ty::TyAdt(adt, ..) if adt.is_enum() => {\n+                    err.span_label(field.name.span, &format!(\"`{}::{}` does not have this field\",\n+                                                             ty, variant.name.as_str()));\n+                }\n+                _ => {\n+                    err.span_label(field.name.span, &format!(\"`{}` does not have this field\", ty));\n+                }\n+            }\n         };\n         err.emit();\n     }"}, {"sha": "fa6c885843e4c1768e5991873a76d02df55edf2e", "filename": "src/test/compile-fail/E0559.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2FE0559.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2FE0559.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0559.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -15,5 +15,5 @@ enum Field {\n fn main() {\n     let s = Field::Fool { joke: 0 };\n     //~^ ERROR E0559\n-    //~| NOTE did you mean `x`?\n+    //~| NOTE field does not exist - did you mean `x`?\n }"}, {"sha": "c6326a0f97740d954318ae126b3b9b4329674618", "filename": "src/test/compile-fail/E0560.rs", "status": "renamed", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2FE0560.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2FE0560.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0560.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -13,5 +13,7 @@ struct Simba {\n }\n \n fn main() {\n-    let s = Simba { mother: 1, father: 0 }; //~ ERROR E0560\n+    let s = Simba { mother: 1, father: 0 };\n+    //~^ ERROR E0560\n+    //~| NOTE `Simba` does not have this field\n }", "previous_filename": "src/test/compile-fail/E560.rs"}, {"sha": "d7b2f2b3f991ec4760d110568c99057b3da26d65", "filename": "src/test/compile-fail/issue-19922.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fissue-19922.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fissue-19922.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-19922.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -15,4 +15,5 @@ enum Homura {\n fn main() {\n     let homura = Homura::Akemi { kaname: () };\n     //~^ ERROR variant `Homura::Akemi` has no field named `kaname`\n+    //~| NOTE field does not exist - did you mean `madoka`?\n }"}, {"sha": "a67707257d2f2ac44a1bd757c1142f07839a70b0", "filename": "src/test/compile-fail/numeric-fields.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fnumeric-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fnumeric-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fnumeric-fields.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -13,8 +13,12 @@\n struct S(u8, u16);\n \n fn main() {\n-    let s = S{0b1: 10, 0: 11}; //~ ERROR struct `S` has no field named `0b1`\n+    let s = S{0b1: 10, 0: 11};\n+    //~^ ERROR struct `S` has no field named `0b1`\n+    //~| NOTE field does not exist - did you mean `1`?\n     match s {\n-        S{0: a, 0x1: b, ..} => {} //~ ERROR does not have a field named `0x1`\n+        S{0: a, 0x1: b, ..} => {}\n+        //~^ ERROR does not have a field named `0x1`\n+        //~| NOTE struct `S::{{constructor}}` does not have field `0x1`\n     }\n }"}, {"sha": "de78503d9044f55666f432c94914e746255e6077", "filename": "src/test/compile-fail/struct-fields-hints-no-dupe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints-no-dupe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints-no-dupe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints-no-dupe.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -19,7 +19,7 @@ fn main() {\n         foo : 5,\n         bar : 42,\n         //~^ ERROR struct `A` has no field named `bar`\n-        //~| NOTE did you mean `barr`?\n+        //~| NOTE field does not exist - did you mean `barr`?\n         car : 9,\n     };\n }"}, {"sha": "628f03f3272cae15d30f7e5719c14a4cc7aa5c81", "filename": "src/test/compile-fail/struct-fields-hints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-fields-hints.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -19,6 +19,6 @@ fn main() {\n         foo : 5,\n         bar : 42,\n         //~^ ERROR struct `A` has no field named `bar`\n-        //~| NOTE did you mean `car`?\n+        //~| NOTE field does not exist - did you mean `car`?\n     };\n }"}, {"sha": "0848ada731a651bcd208471fc8ea985b6de5b2c1", "filename": "src/test/compile-fail/struct-fields-too-many.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-too-many.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fstruct-fields-too-many.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fstruct-fields-too-many.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -15,6 +15,8 @@ struct BuildData {\n fn main() {\n     let foo = BuildData {\n         foo: 0,\n-        bar: 0 //~ ERROR struct `BuildData` has no field named `bar`\n+        bar: 0\n+        //~^ ERROR struct `BuildData` has no field named `bar`\n+        //~| NOTE `BuildData` does not have this field\n     };\n }"}, {"sha": "3672e0e90c2a2d8888bed10428e3dff2e3049417", "filename": "src/test/compile-fail/suggest-private-fields.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fsuggest-private-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Fsuggest-private-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fsuggest-private-fields.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -24,18 +24,18 @@ fn main () {\n     let k = B {\n         aa: 20,\n         //~^ ERROR struct `xc::B` has no field named `aa`\n-        //~| NOTE did you mean `a`?\n+        //~| NOTE field does not exist - did you mean `a`?\n         bb: 20,\n         //~^ ERROR struct `xc::B` has no field named `bb`\n-        //~| NOTE did you mean `a`?\n+        //~| NOTE field does not exist - did you mean `a`?\n     };\n     // local crate struct\n     let l = A {\n         aa: 20,\n         //~^ ERROR struct `A` has no field named `aa`\n-        //~| NOTE did you mean `a`?\n+        //~| NOTE field does not exist - did you mean `a`?\n         bb: 20,\n         //~^ ERROR struct `A` has no field named `bb`\n-        //~| NOTE did you mean `b`?\n+        //~| NOTE field does not exist - did you mean `b`?\n     };\n }"}, {"sha": "3ee95c2ef4258b2e7834d506646da569f5f5292e", "filename": "src/test/compile-fail/union/union-fields.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Funion%2Funion-fields.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Funion%2Funion-fields.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funion%2Funion-fields.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -21,6 +21,7 @@ fn main() {\n     let u = U { a: 0, b: 1 }; //~ ERROR union expressions should have exactly one field\n     let u = U { a: 0, b: 1, c: 2 }; //~ ERROR union expressions should have exactly one field\n                                     //~^ ERROR union `U` has no field named `c`\n+                                    //~| NOTE `U` does not have this field\n     let u = U { ..u }; //~ ERROR union expressions should have exactly one field\n                        //~^ ERROR functional record update syntax requires a struct\n \n@@ -29,6 +30,7 @@ fn main() {\n     let U { a, b } = u; //~ ERROR union patterns should have exactly one field\n     let U { a, b, c } = u; //~ ERROR union patterns should have exactly one field\n                            //~^ ERROR union `U` does not have a field named `c`\n+                           //~| NOTE union `U` does not have field `c`\n     let U { .. } = u; //~ ERROR union patterns should have exactly one field\n                       //~^ ERROR `..` cannot be used in union patterns\n     let U { a, .. } = u; //~ ERROR `..` cannot be used in union patterns"}, {"sha": "ce421428d883be4e11ae879ff0b76376d61338a4", "filename": "src/test/compile-fail/union/union-suggest-field.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Funion%2Funion-suggest-field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b474c82add775cfade81766da09d5f2ef632f09e/src%2Ftest%2Fcompile-fail%2Funion%2Funion-suggest-field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Funion%2Funion-suggest-field.rs?ref=b474c82add775cfade81766da09d5f2ef632f09e", "patch": "@@ -21,7 +21,7 @@ impl U {\n fn main() {\n     let u = U { principle: 0 };\n     //~^ ERROR union `U` has no field named `principle`\n-    //~| NOTE did you mean `principal`?\n+    //~| NOTE field does not exist - did you mean `principal`?\n     let w = u.principial; //~ ERROR attempted access of field `principial` on type `U`\n                           //~^ HELP did you mean `principal`?\n "}]}