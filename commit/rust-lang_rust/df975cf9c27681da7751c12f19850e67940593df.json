{"sha": "df975cf9c27681da7751c12f19850e67940593df", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRmOTc1Y2Y5YzI3NjgxZGE3NzUxYzEyZjE5ODUwZTY3OTQwNTkzZGY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-27T16:20:15Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-08-27T16:21:25Z"}, "message": "Rename rustdoc/test -> rustdoc/doctest\n\nThis modules contains the implementation of doctests, and not the\ntests of rustdoc itself. This name is confusing, so let's rename it to\ndoctest for clarity.", "tree": {"sha": "72bf89a47ea2c84f717818336fc20621aff69029", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72bf89a47ea2c84f717818336fc20621aff69029"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/df975cf9c27681da7751c12f19850e67940593df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/df975cf9c27681da7751c12f19850e67940593df", "html_url": "https://github.com/rust-lang/rust/commit/df975cf9c27681da7751c12f19850e67940593df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/df975cf9c27681da7751c12f19850e67940593df/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7cbb7a594658099ebb9d0008779511fe2fbe9ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7cbb7a594658099ebb9d0008779511fe2fbe9ab", "html_url": "https://github.com/rust-lang/rust/commit/f7cbb7a594658099ebb9d0008779511fe2fbe9ab"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "7b7c152d8abbf65e6c57a9b3dc41d9b712fff52e", "filename": "src/librustdoc/doctest.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fdoctest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fdoctest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctest.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "previous_filename": "src/librustdoc/test.rs"}, {"sha": "a96186a95e16b904cb84dfd4ef9228bab5cefeeb", "filename": "src/librustdoc/doctest/tests.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fdoctest%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fdoctest%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctest%2Ftests.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "previous_filename": "src/librustdoc/test/tests.rs"}, {"sha": "56499f736e163bf0b3d07107a10708b94e10b3f8", "filename": "src/librustdoc/html/markdown.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fmarkdown.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "patch": "@@ -34,9 +34,9 @@ use std::fmt::Write;\n use std::ops::Range;\n use std::str;\n \n+use crate::doctest;\n use crate::html::highlight;\n use crate::html::toc::TocBuilder;\n-use crate::test;\n \n use pulldown_cmark::{html, CodeBlockKind, CowStr, Event, Options, Parser, Tag};\n \n@@ -243,7 +243,7 @@ impl<'a, I: Iterator<Item = Event<'a>>> Iterator for CodeBlocks<'_, 'a, I> {\n                 .collect::<Vec<Cow<'_, str>>>()\n                 .join(\"\\n\");\n             let krate = krate.as_ref().map(|s| &**s);\n-            let (test, _) = test::make_test(&test, krate, false, &Default::default(), edition);\n+            let (test, _) = doctest::make_test(&test, krate, false, &Default::default(), edition);\n             let channel = if test.contains(\"#![feature(\") { \"&amp;version=nightly\" } else { \"\" };\n \n             let edition_string = format!(\"&amp;edition={}\", edition);\n@@ -568,7 +568,7 @@ impl<'a, I: Iterator<Item = Event<'a>>> Iterator for Footnotes<'a, I> {\n     }\n }\n \n-pub fn find_testable_code<T: test::Tester>(\n+pub fn find_testable_code<T: doctest::Tester>(\n     doc: &str,\n     tests: &mut T,\n     error_codes: ErrorCodes,"}, {"sha": "8658b39b4557815f3200e0e07adabe02d6706198", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "patch": "@@ -64,13 +64,13 @@ mod docfs;\n mod doctree;\n #[macro_use]\n mod error;\n+mod doctest;\n mod fold;\n crate mod formats;\n pub mod html;\n mod json;\n mod markdown;\n mod passes;\n-mod test;\n mod theme;\n mod visit_ast;\n mod visit_lib;\n@@ -476,7 +476,7 @@ fn main_options(options: config::Options) -> MainResult {\n \n     match (options.should_test, options.markdown_input()) {\n         (true, true) => return wrap_return(&diag, markdown::test(options)),\n-        (true, false) => return test::run(options),\n+        (true, false) => return doctest::run(options),\n         (false, true) => {\n             return wrap_return(\n                 &diag,"}, {"sha": "3a87e1c46a6155e5a16a74a955178074f0357b87", "filename": "src/librustdoc/markdown.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fmarkdown.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fmarkdown.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fmarkdown.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "patch": "@@ -7,10 +7,10 @@ use rustc_span::edition::Edition;\n use rustc_span::source_map::DUMMY_SP;\n \n use crate::config::{Options, RenderOptions};\n+use crate::doctest::{Collector, TestOptions};\n use crate::html::escape::Escape;\n use crate::html::markdown;\n use crate::html::markdown::{find_testable_code, ErrorCodes, IdMap, Markdown, MarkdownWithToc};\n-use crate::test::{Collector, TestOptions};\n \n /// Separate any lines at the start of the file that begin with `# ` or `%`.\n fn extract_leading_metadata(s: &str) -> (Vec<&str>, &str) {"}, {"sha": "cbbe86dc433f33456a7343750e21f044bbf51eda", "filename": "src/librustdoc/passes/doc_test_lints.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fpasses%2Fdoc_test_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/df975cf9c27681da7751c12f19850e67940593df/src%2Flibrustdoc%2Fpasses%2Fdoc_test_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fdoc_test_lints.rs?ref=df975cf9c27681da7751c12f19850e67940593df", "patch": "@@ -54,7 +54,7 @@ impl Tests {\n     }\n }\n \n-impl crate::test::Tester for Tests {\n+impl crate::doctest::Tester for Tests {\n     fn add_test(&mut self, _: String, _: LangString, _: usize) {\n         self.found_tests += 1;\n     }"}]}