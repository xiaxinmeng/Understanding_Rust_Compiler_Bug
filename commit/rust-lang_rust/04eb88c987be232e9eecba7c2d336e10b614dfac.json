{"sha": "04eb88c987be232e9eecba7c2d336e10b614dfac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0ZWI4OGM5ODdiZTIzMmU5ZWVjYmE3YzJkMzM2ZTEwYjYxNGRmYWM=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2017-09-23T04:29:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-09-23T04:29:10Z"}, "message": "Rollup merge of #44648 - Havvy:doc-size_of, r=dtolnay\n\nExpand size_of docs\n\nThis PR does 3 things.\n\n1. Adds a description of what pointer size means to the primitive pages for usize and isize.\n2. Says the general size of things is not stable from compiler to compiler.\n3. Adds a table of sizes of things that we do guarantee. As this is the first table in the libstd docs, I've included a picture of how that looks.\n\n![](https://i.imgur.com/YZ6IChH.png?1)", "tree": {"sha": "e49c592ceb990cb5772e2d9856bdf57b75703997", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e49c592ceb990cb5772e2d9856bdf57b75703997"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/04eb88c987be232e9eecba7c2d336e10b614dfac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/04eb88c987be232e9eecba7c2d336e10b614dfac", "html_url": "https://github.com/rust-lang/rust/commit/04eb88c987be232e9eecba7c2d336e10b614dfac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/04eb88c987be232e9eecba7c2d336e10b614dfac/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d75781cc28df44be57031e4d733b05b1e2f9dc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d75781cc28df44be57031e4d733b05b1e2f9dc2", "html_url": "https://github.com/rust-lang/rust/commit/7d75781cc28df44be57031e4d733b05b1e2f9dc2"}, {"sha": "548686ff12322f948652ee6523074b2ce6d2bb06", "url": "https://api.github.com/repos/rust-lang/rust/commits/548686ff12322f948652ee6523074b2ce6d2bb06", "html_url": "https://github.com/rust-lang/rust/commit/548686ff12322f948652ee6523074b2ce6d2bb06"}], "stats": {"total": 56, "additions": 54, "deletions": 2}, "files": [{"sha": "669b93120cf45b2c5b96a672bec619609d8f5529", "filename": "src/libcore/mem.rs", "status": "modified", "additions": 46, "deletions": 2, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/04eb88c987be232e9eecba7c2d336e10b614dfac/src%2Flibcore%2Fmem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04eb88c987be232e9eecba7c2d336e10b614dfac/src%2Flibcore%2Fmem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmem.rs?ref=04eb88c987be232e9eecba7c2d336e10b614dfac", "patch": "@@ -177,15 +177,59 @@ pub fn forget<T>(t: T) {\n \n /// Returns the size of a type in bytes.\n ///\n-/// More specifically, this is the offset in bytes between successive\n-/// items of the same type, including alignment padding.\n+/// More specifically, this is the offset in bytes between successive elements\n+/// in an array with that item type including alignment padding. Thus, for any\n+/// type `T` and length `n`, `[T; n]` has a size of `n * size_of::<T>()`.\n+///\n+/// In general, the size of a type is not stable across compilations, but\n+/// specific types such as primitives are.\n+///\n+/// The following table gives the size for primitives.\n+///\n+/// Type | size_of::\\<Type>()\n+/// ---- | ---------------\n+/// () | 0\n+/// u8 | 1\n+/// u16 | 2\n+/// u32 | 4\n+/// u64 | 8\n+/// i8 | 1\n+/// i16 | 2\n+/// i32 | 4\n+/// i64 | 8\n+/// f32 | 4\n+/// f64 | 8\n+/// char | 4\n+///\n+/// Furthermore, `usize` and `isize` have the same size.\n+///\n+/// The types `*const T`, `&T`, `Box<T>`, `Option<&T>`, and `Option<Box<T>>` all have\n+/// the same size. If `T` is Sized, all of those types have the same size as `usize`.\n+///\n+/// The mutability of a pointer does not change its size. As such, `&T` and `&mut T`\n+/// have the same size. Likewise for `*const T` and `*mut T`.\n ///\n /// # Examples\n ///\n /// ```\n /// use std::mem;\n ///\n+/// // Some primitives\n /// assert_eq!(4, mem::size_of::<i32>());\n+/// assert_eq!(8, mem::size_of::<f64>());\n+/// assert_eq!(0, mem::size_of::<()>());\n+///\n+/// // Some arrays\n+/// assert_eq!(8, mem::size_of::<[i32; 2]>());\n+/// assert_eq!(12, mem::size_of::<[i32; 3]>());\n+/// assert_eq!(0, mem::size_of::<[i32; 0]>());\n+///\n+///\n+/// // Pointer size equality\n+/// assert_eq!(mem::size_of::<&i32>(), mem::size_of::<*const i32>());\n+/// assert_eq!(mem::size_of::<&i32>(), mem::size_of::<Box<i32>>());\n+/// assert_eq!(mem::size_of::<&i32>(), mem::size_of::<Option<&i32>>());\n+/// assert_eq!(mem::size_of::<Box<i32>>(), mem::size_of::<Option<Box<i32>>>());\n /// ```\n #[inline]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}, {"sha": "1edb35d8fe74120fee2f05fc346bb23a0174ebdd", "filename": "src/libstd/primitive_docs.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/04eb88c987be232e9eecba7c2d336e10b614dfac/src%2Flibstd%2Fprimitive_docs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/04eb88c987be232e9eecba7c2d336e10b614dfac/src%2Flibstd%2Fprimitive_docs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fprimitive_docs.rs?ref=04eb88c987be232e9eecba7c2d336e10b614dfac", "patch": "@@ -710,6 +710,10 @@ mod prim_u128 { }\n //\n /// The pointer-sized signed integer type.\n ///\n+/// The size of this primitive is how many bytes it takes to reference any\n+/// location in memory. For example, on a 32 bit target, this is 4 bytes\n+/// and on a 64 bit target, this is 8 bytes.\n+///\n /// *[See also the `std::isize` module](isize/index.html).*\n ///\n /// However, please note that examples are shared between primitive integer\n@@ -722,6 +726,10 @@ mod prim_isize { }\n //\n /// The pointer-sized unsigned integer type.\n ///\n+/// The size of this primitive is how many bytes it takes to reference any\n+/// location in memory. For example, on a 32 bit target, this is 4 bytes\n+/// and on a 64 bit target, this is 8 bytes.\n+///\n /// *[See also the `std::usize` module](usize/index.html).*\n ///\n /// However, please note that examples are shared between primitive integer"}]}