{"sha": "c6795fb83a850dde6ac0b08decf108c0c3aa452a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2Nzk1ZmI4M2E4NTBkZGU2YWMwYjA4ZGVjZjEwOGMwYzNhYTQ1MmE=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-06-24T09:29:43Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-06-24T09:29:43Z"}, "message": "More consistent usage of fixtures", "tree": {"sha": "6f5ae66dc754b6e20069bdcbccf70fa42b236b57", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f5ae66dc754b6e20069bdcbccf70fa42b236b57"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6795fb83a850dde6ac0b08decf108c0c3aa452a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6795fb83a850dde6ac0b08decf108c0c3aa452a", "html_url": "https://github.com/rust-lang/rust/commit/c6795fb83a850dde6ac0b08decf108c0c3aa452a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6795fb83a850dde6ac0b08decf108c0c3aa452a/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9cb818c2683e06153f013c3b8d03f7f2719eb02", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9cb818c2683e06153f013c3b8d03f7f2719eb02", "html_url": "https://github.com/rust-lang/rust/commit/e9cb818c2683e06153f013c3b8d03f7f2719eb02"}], "stats": {"total": 2131, "additions": 1070, "deletions": 1061}, "files": [{"sha": "6beeca457bed86204409ec20759be125d650050c", "filename": "crates/ra_ide/src/completion/complete_attribute.rs", "status": "modified", "additions": 156, "deletions": 156, "changes": 312, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_attribute.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -333,69 +333,69 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Clone\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Clone\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Copy, Clone\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Copy, Clone\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Debug\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Debug\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Default\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Default\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Eq, PartialEq\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Eq, PartialEq\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Hash\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Hash\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Ord, PartialOrd, Eq, PartialEq\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"Ord, PartialOrd, Eq, PartialEq\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"PartialEq\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"PartialEq\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"PartialOrd, PartialEq\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 9..9,\n+                delete: 9..9,\n                 insert: \"PartialOrd, PartialEq\",\n                 kind: Attribute,\n             },\n         ]\n-            \"###\n+        \"###\n         );\n     }\n \n@@ -425,62 +425,62 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Clone\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Clone\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Copy, Clone\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Copy, Clone\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Debug\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Debug\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Default\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Default\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Eq\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Eq\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Hash\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Hash\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"Ord, PartialOrd, Eq\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"Ord, PartialOrd, Eq\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"PartialOrd\",\n-                source_range: 59..59,\n-                delete: 59..59,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"PartialOrd\",\n                 kind: Attribute,\n             },\n         ]\n-            \"###\n+        \"###\n         );\n     }\n \n@@ -496,207 +496,207 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"allow(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"allow(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"allow\",\n             },\n             CompletionItem {\n                 label: \"cfg(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"cfg(${0:predicate})\",\n                 kind: Attribute,\n                 lookup: \"cfg\",\n             },\n             CompletionItem {\n                 label: \"cfg_attr(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"cfg_attr(${1:predicate}, ${0:attr})\",\n                 kind: Attribute,\n                 lookup: \"cfg_attr\",\n             },\n             CompletionItem {\n                 label: \"deny(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"deny(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"deny\",\n             },\n             CompletionItem {\n                 label: \"deprecated = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"deprecated = \\\"${0:reason}\\\"\",\n                 kind: Attribute,\n                 lookup: \"deprecated\",\n             },\n             CompletionItem {\n                 label: \"derive(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"derive(${0:Debug})\",\n                 kind: Attribute,\n                 lookup: \"derive\",\n             },\n             CompletionItem {\n                 label: \"doc = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"doc = \\\"${0:docs}\\\"\",\n                 kind: Attribute,\n                 lookup: \"doc\",\n             },\n             CompletionItem {\n                 label: \"forbid(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"forbid(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"forbid\",\n             },\n             CompletionItem {\n                 label: \"ignore(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"ignore(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"ignore\",\n             },\n             CompletionItem {\n                 label: \"inline(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"inline(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"inline\",\n             },\n             CompletionItem {\n                 label: \"link\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"link\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"link_name = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"link_name = \\\"${0:symbol_name}\\\"\",\n                 kind: Attribute,\n                 lookup: \"link_name\",\n             },\n             CompletionItem {\n                 label: \"macro_export\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"macro_export\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"macro_use\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"macro_use\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"must_use = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"must_use = \\\"${0:reason}\\\"\",\n                 kind: Attribute,\n                 lookup: \"must_use\",\n             },\n             CompletionItem {\n                 label: \"no_mangle\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"no_mangle\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"non_exhaustive\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"non_exhaustive\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"path = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"path =\\\"${0:path}\\\"\",\n                 kind: Attribute,\n                 lookup: \"path\",\n             },\n             CompletionItem {\n                 label: \"proc_macro\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"proc_macro\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"proc_macro_attribute\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"proc_macro_attribute\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"proc_macro_derive(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"proc_macro_derive(${0:Trait})\",\n                 kind: Attribute,\n                 lookup: \"proc_macro_derive\",\n             },\n             CompletionItem {\n                 label: \"repr(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"repr(${0:C})\",\n                 kind: Attribute,\n                 lookup: \"repr\",\n             },\n             CompletionItem {\n                 label: \"should_panic(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"should_panic(expected = \\\"${0:reason}\\\")\",\n                 kind: Attribute,\n                 lookup: \"should_panic\",\n             },\n             CompletionItem {\n                 label: \"target_feature = \\\"\u2026\\\"\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"target_feature = \\\"${0:feature}\\\"\",\n                 kind: Attribute,\n                 lookup: \"target_feature\",\n             },\n             CompletionItem {\n                 label: \"test\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"test\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"used\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"used\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"warn(\u2026)\",\n-                source_range: 19..19,\n-                delete: 19..19,\n+                source_range: 2..2,\n+                delete: 2..2,\n                 insert: \"warn(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"warn\",\n@@ -732,252 +732,252 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"allow(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"allow(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"allow\",\n             },\n             CompletionItem {\n                 label: \"cfg(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"cfg(${0:predicate})\",\n                 kind: Attribute,\n                 lookup: \"cfg\",\n             },\n             CompletionItem {\n                 label: \"cfg_attr(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"cfg_attr(${1:predicate}, ${0:attr})\",\n                 kind: Attribute,\n                 lookup: \"cfg_attr\",\n             },\n             CompletionItem {\n                 label: \"deny(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"deny(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"deny\",\n             },\n             CompletionItem {\n                 label: \"deprecated = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"deprecated = \\\"${0:reason}\\\"\",\n                 kind: Attribute,\n                 lookup: \"deprecated\",\n             },\n             CompletionItem {\n                 label: \"derive(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"derive(${0:Debug})\",\n                 kind: Attribute,\n                 lookup: \"derive\",\n             },\n             CompletionItem {\n                 label: \"doc = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"doc = \\\"${0:docs}\\\"\",\n                 kind: Attribute,\n                 lookup: \"doc\",\n             },\n             CompletionItem {\n                 label: \"feature(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"feature(${0:flag})\",\n                 kind: Attribute,\n                 lookup: \"feature\",\n             },\n             CompletionItem {\n                 label: \"forbid(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"forbid(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"forbid\",\n             },\n             CompletionItem {\n                 label: \"global_allocator\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"global_allocator\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"ignore(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"ignore(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"ignore\",\n             },\n             CompletionItem {\n                 label: \"inline(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"inline(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"inline\",\n             },\n             CompletionItem {\n                 label: \"link\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"link\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"link_name = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"link_name = \\\"${0:symbol_name}\\\"\",\n                 kind: Attribute,\n                 lookup: \"link_name\",\n             },\n             CompletionItem {\n                 label: \"macro_export\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"macro_export\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"macro_use\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"macro_use\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"must_use = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"must_use = \\\"${0:reason}\\\"\",\n                 kind: Attribute,\n                 lookup: \"must_use\",\n             },\n             CompletionItem {\n                 label: \"no_mangle\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"no_mangle\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"no_std\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"no_std\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"non_exhaustive\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"non_exhaustive\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"panic_handler\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"panic_handler\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"path = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"path =\\\"${0:path}\\\"\",\n                 kind: Attribute,\n                 lookup: \"path\",\n             },\n             CompletionItem {\n                 label: \"proc_macro\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"proc_macro\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"proc_macro_attribute\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"proc_macro_attribute\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"proc_macro_derive(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"proc_macro_derive(${0:Trait})\",\n                 kind: Attribute,\n                 lookup: \"proc_macro_derive\",\n             },\n             CompletionItem {\n                 label: \"recursion_limit = \u2026\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"recursion_limit = ${0:128}\",\n                 kind: Attribute,\n                 lookup: \"recursion_limit\",\n             },\n             CompletionItem {\n                 label: \"repr(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"repr(${0:C})\",\n                 kind: Attribute,\n                 lookup: \"repr\",\n             },\n             CompletionItem {\n                 label: \"should_panic(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"should_panic(expected = \\\"${0:reason}\\\")\",\n                 kind: Attribute,\n                 lookup: \"should_panic\",\n             },\n             CompletionItem {\n                 label: \"target_feature = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"target_feature = \\\"${0:feature}\\\"\",\n                 kind: Attribute,\n                 lookup: \"target_feature\",\n             },\n             CompletionItem {\n                 label: \"test\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"test\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"used\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"used\",\n                 kind: Attribute,\n             },\n             CompletionItem {\n                 label: \"warn(\u2026)\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"warn(${0:lint})\",\n                 kind: Attribute,\n                 lookup: \"warn\",\n             },\n             CompletionItem {\n                 label: \"windows_subsystem = \\\"\u2026\\\"\",\n-                source_range: 20..20,\n-                delete: 20..20,\n+                source_range: 3..3,\n+                delete: 3..3,\n                 insert: \"windows_subsystem = \\\"${0:subsystem}\\\"\",\n                 kind: Attribute,\n                 lookup: \"windows_subsystem\","}, {"sha": "ee4e24fcab50d7973564d39da93f7e1bc7ff5493", "filename": "crates/ra_ide/src/completion/complete_dot.rs", "status": "modified", "additions": 58, "deletions": 58, "changes": 116, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_dot.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -94,8 +94,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 94..94,\n-                delete: 94..94,\n+                source_range: 45..45,\n+                delete: 45..45,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -125,17 +125,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 187..187,\n-                delete: 187..187,\n+                source_range: 102..102,\n+                delete: 102..102,\n                 insert: \"foo()$0\",\n                 kind: Method,\n                 lookup: \"foo\",\n                 detail: \"fn foo(self)\",\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 187..187,\n-                delete: 187..187,\n+                source_range: 102..102,\n+                delete: 102..102,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"(u32,)\",\n@@ -165,17 +165,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 126..126,\n-                delete: 126..126,\n+                source_range: 77..77,\n+                delete: 77..77,\n                 insert: \"foo()$0\",\n                 kind: Method,\n                 lookup: \"foo\",\n                 detail: \"fn foo(&self)\",\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 126..126,\n-                delete: 126..126,\n+                source_range: 77..77,\n+                delete: 77..77,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"(u32, i32)\",\n@@ -222,24 +222,24 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"crate_field\",\n-                source_range: 313..313,\n-                delete: 313..313,\n+                source_range: 192..192,\n+                delete: 192..192,\n                 insert: \"crate_field\",\n                 kind: Field,\n                 detail: \"u32\",\n             },\n             CompletionItem {\n                 label: \"pub_field\",\n-                source_range: 313..313,\n-                delete: 313..313,\n+                source_range: 192..192,\n+                delete: 192..192,\n                 insert: \"pub_field\",\n                 kind: Field,\n                 detail: \"u32\",\n             },\n             CompletionItem {\n                 label: \"super_field\",\n-                source_range: 313..313,\n-                delete: 313..313,\n+                source_range: 192..192,\n+                delete: 192..192,\n                 insert: \"super_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -268,16 +268,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"field\",\n-                source_range: 140..140,\n-                delete: 140..140,\n+                source_range: 67..67,\n+                delete: 67..67,\n                 insert: \"field\",\n                 kind: Field,\n                 detail: \"u8\",\n             },\n             CompletionItem {\n                 label: \"other\",\n-                source_range: 140..140,\n-                delete: 140..140,\n+                source_range: 67..67,\n+                delete: 67..67,\n                 insert: \"other\",\n                 kind: Field,\n                 detail: \"u16\",\n@@ -305,8 +305,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 144..144,\n-                delete: 144..144,\n+                source_range: 71..71,\n+                delete: 71..71,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -338,8 +338,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 243..243,\n-                delete: 243..243,\n+                source_range: 134..134,\n+                delete: 134..134,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -371,8 +371,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 256..256,\n-                delete: 256..256,\n+                source_range: 147..147,\n+                delete: 147..147,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -400,8 +400,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 151..151,\n-                delete: 151..151,\n+                source_range: 90..90,\n+                delete: 90..90,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -429,8 +429,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 155..155,\n-                delete: 155..155,\n+                source_range: 94..94,\n+                delete: 94..94,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -461,8 +461,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 219..219,\n-                delete: 219..219,\n+                source_range: 122..122,\n+                delete: 122..122,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -513,8 +513,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 249..249,\n-                delete: 249..249,\n+                source_range: 128..128,\n+                delete: 128..128,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\",\n@@ -540,16 +540,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"0\",\n-                source_range: 75..75,\n-                delete: 75..75,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"0\",\n                 kind: Field,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"1\",\n-                source_range: 75..75,\n-                delete: 75..75,\n+                source_range: 38..38,\n+                delete: 38..38,\n                 insert: \"1\",\n                 kind: Field,\n                 detail: \"f64\",\n@@ -583,8 +583,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"blah()\",\n-                source_range: 299..300,\n-                delete: 299..300,\n+                source_range: 190..191,\n+                delete: 190..191,\n                 insert: \"blah()$0\",\n                 kind: Method,\n                 lookup: \"blah\",\n@@ -610,8 +610,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 106..106,\n-                delete: 106..106,\n+                source_range: 69..69,\n+                delete: 69..69,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -676,15 +676,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"A\",\n-                source_range: 217..217,\n-                delete: 217..217,\n+                source_range: 120..120,\n+                delete: 120..120,\n                 insert: \"A\",\n                 kind: Const,\n             },\n             CompletionItem {\n                 label: \"b\",\n-                source_range: 217..217,\n-                delete: 217..217,\n+                source_range: 120..120,\n+                delete: 120..120,\n                 insert: \"b\",\n                 kind: Module,\n             },\n@@ -709,8 +709,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 156..157,\n-                delete: 156..157,\n+                source_range: 91..92,\n+                delete: 91..92,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -736,8 +736,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 156..157,\n-                delete: 156..157,\n+                source_range: 91..92,\n+                delete: 91..92,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -764,8 +764,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 156..156,\n-                delete: 156..156,\n+                source_range: 91..91,\n+                delete: 91..91,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -791,8 +791,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 162..163,\n-                delete: 162..163,\n+                source_range: 97..98,\n+                delete: 97..98,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -828,8 +828,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 552..552,\n-                delete: 552..552,\n+                source_range: 327..327,\n+                delete: 327..327,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -858,8 +858,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"the_method()\",\n-                source_range: 201..201,\n-                delete: 201..201,\n+                source_range: 116..116,\n+                delete: 116..116,\n                 insert: \"the_method()$0\",\n                 kind: Method,\n                 lookup: \"the_method\","}, {"sha": "f5573ddf7cdb3056dd51111c521a35d90dfca03d", "filename": "crates/ra_ide/src/completion/complete_fn_param.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_fn_param.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_fn_param.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_fn_param.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -75,8 +75,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"file_id: FileId\",\n-                source_range: 110..114,\n-                delete: 110..114,\n+                source_range: 61..65,\n+                delete: 61..65,\n                 insert: \"file_id: FileId\",\n                 lookup: \"file_id\",\n             },\n@@ -99,8 +99,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"file_id: FileId\",\n-                source_range: 110..114,\n-                delete: 110..114,\n+                source_range: 61..65,\n+                delete: 61..65,\n                 insert: \"file_id: FileId\",\n                 lookup: \"file_id\",\n             },\n@@ -126,8 +126,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"file_id: FileId\",\n-                source_range: 289..293,\n-                delete: 289..293,\n+                source_range: 208..212,\n+                delete: 208..212,\n                 insert: \"file_id: FileId\",\n                 lookup: \"file_id\",\n             },"}, {"sha": "367e2bbce38259a1187d258103bbdc0151308715", "filename": "crates/ra_ide/src/completion/complete_pattern.rs", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_pattern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_pattern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_pattern.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -63,37 +63,37 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Bar\",\n-                source_range: 246..246,\n-                delete: 246..246,\n+                source_range: 137..137,\n+                delete: 137..137,\n                 insert: \"Bar\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"E\",\n-                source_range: 246..246,\n-                delete: 246..246,\n+                source_range: 137..137,\n+                delete: 137..137,\n                 insert: \"E\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"X\",\n-                source_range: 246..246,\n-                delete: 246..246,\n+                source_range: 137..137,\n+                delete: 137..137,\n                 insert: \"X\",\n                 kind: EnumVariant,\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Z\",\n-                source_range: 246..246,\n-                delete: 246..246,\n+                source_range: 137..137,\n+                delete: 137..137,\n                 insert: \"Z\",\n                 kind: Const,\n             },\n             CompletionItem {\n                 label: \"m\",\n-                source_range: 246..246,\n-                delete: 246..246,\n+                source_range: 137..137,\n+                delete: 137..137,\n                 insert: \"m\",\n                 kind: Module,\n             },\n@@ -119,15 +119,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"E\",\n-                source_range: 151..151,\n-                delete: 151..151,\n+                source_range: 90..90,\n+                delete: 90..90,\n                 insert: \"E\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"m!(\u2026)\",\n-                source_range: 151..151,\n-                delete: 151..151,\n+                source_range: 90..90,\n+                delete: 90..90,\n                 insert: \"m!($0)\",\n                 kind: Macro,\n                 detail: \"macro_rules! m\","}, {"sha": "3bd64804f458ec86f38cd7425763ea811b2691fc", "filename": "crates/ra_ide/src/completion/complete_postfix.rs", "status": "modified", "additions": 110, "deletions": 110, "changes": 220, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_postfix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_postfix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_postfix.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -260,64 +260,64 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"Box::new(bar)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"${1}(bar)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"dbg!(bar)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"if\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"if bar {\\n    $0\\n}\",\n                 detail: \"if expr {}\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"match bar {\\n    ${1:_} => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"!bar\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"&bar\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"&mut bar\",\n                 detail: \"&mut expr\",\n             },\n             CompletionItem {\n                 label: \"while\",\n-                source_range: 89..89,\n-                delete: 85..89,\n+                source_range: 40..40,\n+                delete: 36..40,\n                 insert: \"while bar {\\n    $0\\n}\",\n                 detail: \"while expr {}\",\n             },\n@@ -346,64 +346,64 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"Box::new(bar)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"${1}(bar)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"dbg!(bar)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"ifl\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"if let Some($1) = bar {\\n    $0\\n}\",\n                 detail: \"if let Some {}\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"match bar {\\n    Some(${1:_}) => {$2\\\\},\\n    None => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"!bar\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"&bar\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"&mut bar\",\n                 detail: \"&mut expr\",\n             },\n             CompletionItem {\n                 label: \"while\",\n-                source_range: 210..210,\n-                delete: 206..210,\n+                source_range: 97..97,\n+                delete: 93..97,\n                 insert: \"while let Some($1) = bar {\\n    $0\\n}\",\n                 detail: \"while let Some {}\",\n             },\n@@ -432,64 +432,64 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"Box::new(bar)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"${1}(bar)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"dbg!(bar)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"ifl\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"if let Ok($1) = bar {\\n    $0\\n}\",\n                 detail: \"if let Ok {}\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"match bar {\\n    Ok(${1:_}) => {$2\\\\},\\n    Err(${3:_}) => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"!bar\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"&bar\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"&mut bar\",\n                 detail: \"&mut expr\",\n             },\n             CompletionItem {\n                 label: \"while\",\n-                source_range: 211..211,\n-                delete: 207..211,\n+                source_range: 98..98,\n+                delete: 94..98,\n                 insert: \"while let Ok($1) = bar {\\n    $0\\n}\",\n                 detail: \"while let Ok {}\",\n             },\n@@ -513,50 +513,50 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"Box::new(bar)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"${1}(bar)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"dbg!(bar)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"match bar {\\n    ${1:_} => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"!bar\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"&bar\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 91..91,\n-                delete: 87..91,\n+                source_range: 42..42,\n+                delete: 38..42,\n                 insert: \"&mut bar\",\n                 detail: \"&mut expr\",\n             },\n@@ -579,50 +579,50 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"Box::new(42)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"${1}(42)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"dbg!(42)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"match 42 {\\n    ${1:_} => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"!42\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"&42\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 52..52,\n-                delete: 49..52,\n+                source_range: 19..19,\n+                delete: 16..19,\n                 insert: \"&mut 42\",\n                 detail: \"&mut expr\",\n             },\n@@ -647,50 +647,50 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"Box::new(bar)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"${1}(bar)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"dbg!(bar)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"match bar {\\n    ${1:_} => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"!bar\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"&bar\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 149..150,\n-                delete: 145..150,\n+                source_range: 84..85,\n+                delete: 80..85,\n                 insert: \"&mut bar\",\n                 detail: \"&mut expr\",\n             },\n@@ -713,50 +713,50 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"box\",\n-                source_range: 56..56,\n-                delete: 49..56,\n+                source_range: 23..23,\n+                delete: 16..23,\n                 insert: \"Box::new(&&&&42)\",\n                 detail: \"Box::new(expr)\",\n             },\n             CompletionItem {\n                 label: \"call\",\n-                source_range: 56..56,\n-                delete: 49..56,\n+                source_range: 23..23,\n+                delete: 16..23,\n                 insert: \"${1}(&&&&42)\",\n                 detail: \"function(expr)\",\n             },\n             CompletionItem {\n                 label: \"dbg\",\n-                source_range: 56..56,\n-                delete: 49..56,\n+                source_range: 23..23,\n+                delete: 16..23,\n                 insert: \"dbg!(&&&&42)\",\n                 detail: \"dbg!(expr)\",\n             },\n             CompletionItem {\n                 label: \"match\",\n-                source_range: 56..56,\n-                delete: 49..56,\n+                source_range: 23..23,\n+                delete: 16..23,\n                 insert: \"match &&&&42 {\\n    ${1:_} => {$0\\\\},\\n}\",\n                 detail: \"match expr {}\",\n             },\n             CompletionItem {\n                 label: \"not\",\n-                source_range: 56..56,\n-                delete: 53..56,\n+                source_range: 23..23,\n+                delete: 20..23,\n                 insert: \"!42\",\n                 detail: \"!expr\",\n             },\n             CompletionItem {\n                 label: \"ref\",\n-                source_range: 56..56,\n-                delete: 53..56,\n+                source_range: 23..23,\n+                delete: 20..23,\n                 insert: \"&42\",\n                 detail: \"&expr\",\n             },\n             CompletionItem {\n                 label: \"refm\",\n-                source_range: 56..56,\n-                delete: 53..56,\n+                source_range: 23..23,\n+                delete: 20..23,\n                 insert: \"&mut 42\",\n                 detail: \"&mut expr\",\n             },"}, {"sha": "f133ce3cecefaf8c6f3be5ba079b422915b9bf05", "filename": "crates/ra_ide/src/completion/complete_qualified_path.rs", "status": "modified", "additions": 34, "deletions": 34, "changes": 68, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_qualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_qualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_qualified_path.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -212,8 +212,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"my\",\n-                source_range: 27..29,\n-                delete: 27..29,\n+                source_range: 10..12,\n+                delete: 10..12,\n                 insert: \"my\",\n                 kind: Module,\n                 documentation: Documentation(\n@@ -243,8 +243,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Bar\",\n-                source_range: 31..31,\n-                delete: 31..31,\n+                source_range: 14..14,\n+                delete: 14..14,\n                 insert: \"Bar\",\n                 kind: Struct,\n             },\n@@ -271,15 +271,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 31..31,\n-                delete: 31..31,\n+                source_range: 14..14,\n+                delete: 14..14,\n                 insert: \"Foo\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"PublicBar\",\n-                source_range: 31..31,\n-                delete: 31..31,\n+                source_range: 14..14,\n+                delete: 14..14,\n                 insert: \"PublicBar\",\n                 kind: Struct,\n             },\n@@ -304,8 +304,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Bar\",\n-                source_range: 30..30,\n-                delete: 30..30,\n+                source_range: 13..13,\n+                delete: 13..13,\n                 insert: \"Bar\",\n                 kind: Struct,\n             },\n@@ -1145,17 +1145,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"bar()\",\n-                source_range: 185..185,\n-                delete: 185..185,\n+                source_range: 88..88,\n+                delete: 88..88,\n                 insert: \"bar()$0\",\n                 kind: Function,\n                 lookup: \"bar\",\n                 detail: \"fn bar()\",\n             },\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 185..185,\n-                delete: 185..185,\n+                source_range: 88..88,\n+                delete: 88..88,\n                 insert: \"foo()$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1185,16 +1185,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo!(\u2026)\",\n-                source_range: 179..179,\n-                delete: 179..179,\n+                source_range: 82..82,\n+                delete: 82..82,\n                 insert: \"foo!($0)\",\n                 kind: Macro,\n                 detail: \"#[macro_export]\\nmacro_rules! foo\",\n             },\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 179..179,\n-                delete: 179..179,\n+                source_range: 82..82,\n+                delete: 82..82,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n@@ -1230,22 +1230,22 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"RIGHT_CONST\",\n-                source_range: 57..57,\n-                delete: 57..57,\n+                source_range: 24..24,\n+                delete: 24..24,\n                 insert: \"RIGHT_CONST\",\n                 kind: Const,\n             },\n             CompletionItem {\n                 label: \"RightType\",\n-                source_range: 57..57,\n-                delete: 57..57,\n+                source_range: 24..24,\n+                delete: 24..24,\n                 insert: \"RightType\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"right_fn()\",\n-                source_range: 57..57,\n-                delete: 57..57,\n+                source_range: 24..24,\n+                delete: 24..24,\n                 insert: \"right_fn()$0\",\n                 kind: Function,\n                 lookup: \"right_fn\",\n@@ -1269,17 +1269,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 93..94,\n-                delete: 93..94,\n+                source_range: 60..61,\n+                delete: 60..61,\n                 insert: \"foo()$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n                 detail: \"fn foo()\",\n             },\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 93..94,\n-                delete: 93..94,\n+                source_range: 60..61,\n+                delete: 60..61,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n@@ -1308,15 +1308,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"z\",\n-                source_range: 57..57,\n-                delete: 57..57,\n+                source_range: 24..24,\n+                delete: 24..24,\n                 insert: \"z\",\n                 kind: Module,\n             },\n             CompletionItem {\n                 label: \"z()\",\n-                source_range: 57..57,\n-                delete: 57..57,\n+                source_range: 24..24,\n+                delete: 24..24,\n                 insert: \"z()$0\",\n                 kind: Function,\n                 lookup: \"z\",\n@@ -1347,8 +1347,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"new()\",\n-                source_range: 292..292,\n-                delete: 292..292,\n+                source_range: 179..179,\n+                delete: 179..179,\n                 insert: \"new()$0\",\n                 kind: Function,\n                 lookup: \"new\","}, {"sha": "13eb2f79fa5c549bab87d778f9f4acebe46c57b0", "filename": "crates/ra_ide/src/completion/complete_record.rs", "status": "modified", "additions": 157, "deletions": 157, "changes": 314, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_record.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_record.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_record.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -41,17 +41,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"foo\",\n-                source_range: 117..118,\n-                delete: 117..118,\n-                insert: \"foo\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"foo\",\n+                    source_range: 68..69,\n+                    delete: 68..69,\n+                    insert: \"foo\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -70,25 +70,25 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"bar\",\n-                source_range: 161..161,\n-                delete: 161..161,\n-                insert: \"bar\",\n-                kind: Field,\n-                detail: \"()\",\n-            },\n-            CompletionItem {\n-                label: \"foo\",\n-                source_range: 161..161,\n-                delete: 161..161,\n-                insert: \"foo\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"bar\",\n+                    source_range: 88..88,\n+                    delete: 88..88,\n+                    insert: \"bar\",\n+                    kind: Field,\n+                    detail: \"()\",\n+                },\n+                CompletionItem {\n+                    label: \"foo\",\n+                    source_range: 88..88,\n+                    delete: 88..88,\n+                    insert: \"foo\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -106,17 +106,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"foo\",\n-                source_range: 171..172,\n-                delete: 171..172,\n-                insert: \"foo\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"foo\",\n+                    source_range: 110..111,\n+                    delete: 110..111,\n+                    insert: \"foo\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -142,25 +142,25 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"bar\",\n-                source_range: 372..372,\n-                delete: 372..372,\n-                insert: \"bar\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-            CompletionItem {\n-                label: \"baz\",\n-                source_range: 372..372,\n-                delete: 372..372,\n-                insert: \"baz\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"bar\",\n+                    source_range: 203..203,\n+                    delete: 203..203,\n+                    insert: \"bar\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+                CompletionItem {\n+                    label: \"baz\",\n+                    source_range: 203..203,\n+                    delete: 203..203,\n+                    insert: \"baz\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n     }\n \n@@ -187,18 +187,18 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"the_field\",\n-                source_range: 142..145,\n-                delete: 142..145,\n-                insert: \"the_field\",\n-                kind: Field,\n-                detail: \"u32\",\n-                deprecated: true,\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"the_field\",\n+                    source_range: 69..72,\n+                    delete: 69..72,\n+                    insert: \"the_field\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                    deprecated: true,\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -212,17 +212,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"the_field\",\n-                source_range: 83..86,\n-                delete: 83..86,\n-                insert: \"the_field\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"the_field\",\n+                    source_range: 46..49,\n+                    delete: 46..49,\n+                    insert: \"the_field\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -238,17 +238,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"a\",\n-                source_range: 119..119,\n-                delete: 119..119,\n-                insert: \"a\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"a\",\n+                    source_range: 58..58,\n+                    delete: 58..58,\n+                    insert: \"a\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -264,17 +264,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"b\",\n-                source_range: 119..119,\n-                delete: 119..119,\n-                insert: \"b\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"b\",\n+                    source_range: 70..70,\n+                    delete: 70..70,\n+                    insert: \"b\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -289,17 +289,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"a\",\n-                source_range: 93..93,\n-                delete: 93..93,\n-                insert: \"a\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"a\",\n+                    source_range: 56..56,\n+                    delete: 56..56,\n+                    insert: \"a\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -314,17 +314,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"the_field\",\n-                source_range: 137..140,\n-                delete: 137..140,\n-                insert: \"the_field\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"the_field\",\n+                    source_range: 88..91,\n+                    delete: 88..91,\n+                    insert: \"the_field\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -349,25 +349,25 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"bar\",\n-                source_range: 302..302,\n-                delete: 302..302,\n-                insert: \"bar\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-            CompletionItem {\n-                label: \"baz\",\n-                source_range: 302..302,\n-                delete: 302..302,\n-                insert: \"baz\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"bar\",\n+                    source_range: 157..157,\n+                    delete: 157..157,\n+                    insert: \"bar\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+                CompletionItem {\n+                    label: \"baz\",\n+                    source_range: 157..157,\n+                    delete: 157..157,\n+                    insert: \"baz\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n \n         #[test]\n@@ -390,17 +390,17 @@ mod tests {\n             \",\n             );\n             assert_debug_snapshot!(completions, @r###\"\n-        [\n-            CompletionItem {\n-                label: \"foo2\",\n-                source_range: 221..221,\n-                delete: 221..221,\n-                insert: \"foo2\",\n-                kind: Field,\n-                detail: \"u32\",\n-            },\n-        ]\n-        \"###);\n+            [\n+                CompletionItem {\n+                    label: \"foo2\",\n+                    source_range: 112..112,\n+                    delete: 112..112,\n+                    insert: \"foo2\",\n+                    kind: Field,\n+                    detail: \"u32\",\n+                },\n+            ]\n+            \"###);\n         }\n     }\n }"}, {"sha": "52aaa70f06f77acf1457d08e34d2cabbb5bf742e", "filename": "crates/ra_ide/src/completion/complete_snippet.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_snippet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_snippet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_snippet.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -129,31 +129,31 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Test function\",\n-                source_range: 78..78,\n-                delete: 78..78,\n+                source_range: 29..29,\n+                delete: 29..29,\n                 insert: \"#[test]\\nfn ${1:feature}() {\\n    $0\\n}\",\n                 kind: Snippet,\n                 lookup: \"tfn\",\n             },\n             CompletionItem {\n                 label: \"Test module\",\n-                source_range: 78..78,\n-                delete: 78..78,\n+                source_range: 29..29,\n+                delete: 29..29,\n                 insert: \"#[cfg(test)]\\nmod tests {\\n    use super::*;\\n\\n    #[test]\\n    fn ${1:test_name}() {\\n        $0\\n    }\\n}\",\n                 kind: Snippet,\n                 lookup: \"tmod\",\n             },\n             CompletionItem {\n                 label: \"macro_rules\",\n-                source_range: 78..78,\n-                delete: 78..78,\n+                source_range: 29..29,\n+                delete: 29..29,\n                 insert: \"macro_rules! $1 {\\n\\t($2) => {\\n\\t\\t$0\\n\\t};\\n}\",\n                 kind: Snippet,\n             },\n             CompletionItem {\n                 label: \"pub(crate)\",\n-                source_range: 78..78,\n-                delete: 78..78,\n+                source_range: 29..29,\n+                delete: 29..29,\n                 insert: \"pub(crate) $0\",\n                 kind: Snippet,\n             },"}, {"sha": "23e42928dd63f5029cfa781f3403c3d7d7cddf3c", "filename": "crates/ra_ide/src/completion/complete_trait_impl.rs", "status": "modified", "additions": 22, "deletions": 22, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_trait_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_trait_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_trait_impl.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -256,24 +256,24 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"const TEST_CONST: u16 = \",\n-                source_range: 209..210,\n-                delete: 209..210,\n+                source_range: 112..113,\n+                delete: 112..113,\n                 insert: \"const TEST_CONST: u16 = \",\n                 kind: Const,\n                 lookup: \"TEST_CONST\",\n             },\n             CompletionItem {\n                 label: \"fn test()\",\n-                source_range: 209..210,\n-                delete: 209..210,\n+                source_range: 112..113,\n+                delete: 112..113,\n                 insert: \"fn test() {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"test\",\n             },\n             CompletionItem {\n                 label: \"type TestType = \",\n-                source_range: 209..210,\n-                delete: 209..210,\n+                source_range: 112..113,\n+                delete: 112..113,\n                 insert: \"type TestType = \",\n                 kind: TypeAlias,\n                 lookup: \"TestType\",\n@@ -322,8 +322,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"fn test()\",\n-                source_range: 139..140,\n-                delete: 139..140,\n+                source_range: 66..67,\n+                delete: 66..67,\n                 insert: \"fn test() {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"test\",\n@@ -351,8 +351,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"fn foo()\",\n-                source_range: 141..142,\n-                delete: 138..142,\n+                source_range: 68..69,\n+                delete: 65..69,\n                 insert: \"fn foo() {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -383,8 +383,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"fn foo_bar()\",\n-                source_range: 200..201,\n-                delete: 197..201,\n+                source_range: 103..104,\n+                delete: 100..104,\n                 insert: \"fn foo_bar() {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"foo_bar\",\n@@ -434,8 +434,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"fn foo()\",\n-                source_range: 144..145,\n-                delete: 141..145,\n+                source_range: 71..72,\n+                delete: 68..72,\n                 insert: \"fn foo<T>() {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -463,8 +463,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"fn foo()\",\n-                source_range: 166..167,\n-                delete: 163..167,\n+                source_range: 93..94,\n+                delete: 90..94,\n                 insert: \"fn foo<T>()\\nwhere T: Into<String> {\\n    $0\\n}\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -490,8 +490,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"type SomeType = \",\n-                source_range: 124..125,\n-                delete: 119..125,\n+                source_range: 63..64,\n+                delete: 58..64,\n                 insert: \"type SomeType = \",\n                 kind: TypeAlias,\n                 lookup: \"SomeType\",\n@@ -517,8 +517,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"const SOME_CONST: u16 = \",\n-                source_range: 133..134,\n-                delete: 127..134,\n+                source_range: 72..73,\n+                delete: 66..73,\n                 insert: \"const SOME_CONST: u16 = \",\n                 kind: Const,\n                 lookup: \"SOME_CONST\",\n@@ -544,8 +544,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"const SOME_CONST: u16 = \",\n-                source_range: 138..139,\n-                delete: 132..139,\n+                source_range: 77..78,\n+                delete: 71..78,\n                 insert: \"const SOME_CONST: u16 = \",\n                 kind: Const,\n                 lookup: \"SOME_CONST\","}, {"sha": "a0a04bb5808e81e779a3144be61ee3d41fa9c8e1", "filename": "crates/ra_ide/src/completion/complete_unqualified_path.rs", "status": "modified", "additions": 131, "deletions": 131, "changes": 262, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fcomplete_unqualified_path.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -85,15 +85,15 @@ mod tests {\n                 \"#,\n             ),\n             @r###\"\n-            [\n-                CompletionItem {\n-                    label: \"collections\",\n-                    source_range: 21..24,\n-                    delete: 21..24,\n-                    insert: \"collections\",\n-                },\n-            ]\n-            \"###\n+        [\n+            CompletionItem {\n+                label: \"collections\",\n+                source_range: 4..7,\n+                delete: 4..7,\n+                insert: \"collections\",\n+            },\n+        ]\n+        \"###\n         );\n     }\n \n@@ -157,16 +157,16 @@ mod tests {\n                 \"\n             ),\n             @r###\"\n-            [\n-                CompletionItem {\n-                    label: \"Enum\",\n-                    source_range: 231..233,\n-                    delete: 231..233,\n-                    insert: \"Enum\",\n-                    kind: Enum,\n-                },\n-            ]\n-            \"###\n+        [\n+            CompletionItem {\n+                label: \"Enum\",\n+                source_range: 102..104,\n+                delete: 102..104,\n+                insert: \"Enum\",\n+                kind: Enum,\n+            },\n+        ]\n+        \"###\n         );\n     }\n \n@@ -186,8 +186,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"quux(\u2026)\",\n-                source_range: 91..91,\n-                delete: 91..91,\n+                source_range: 42..42,\n+                delete: 42..42,\n                 insert: \"quux(${1:x})$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -196,16 +196,16 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"x\",\n-                source_range: 91..91,\n-                delete: 91..91,\n+                source_range: 42..42,\n+                delete: 42..42,\n                 insert: \"x\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"y\",\n-                source_range: 91..91,\n-                delete: 91..91,\n+                source_range: 42..42,\n+                delete: 42..42,\n                 insert: \"y\",\n                 kind: Binding,\n                 detail: \"i32\",\n@@ -235,23 +235,23 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"a\",\n-                source_range: 242..242,\n-                delete: 242..242,\n+                source_range: 129..129,\n+                delete: 129..129,\n                 insert: \"a\",\n                 kind: Binding,\n             },\n             CompletionItem {\n                 label: \"b\",\n-                source_range: 242..242,\n-                delete: 242..242,\n+                source_range: 129..129,\n+                delete: 129..129,\n                 insert: \"b\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"quux()\",\n-                source_range: 242..242,\n-                delete: 242..242,\n+                source_range: 129..129,\n+                delete: 129..129,\n                 insert: \"quux()$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -278,17 +278,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"quux()\",\n-                source_range: 95..95,\n-                delete: 95..95,\n+                source_range: 46..46,\n+                delete: 46..46,\n                 insert: \"quux()$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n                 detail: \"fn quux()\",\n             },\n             CompletionItem {\n                 label: \"x\",\n-                source_range: 95..95,\n-                delete: 95..95,\n+                source_range: 46..46,\n+                delete: 46..46,\n                 insert: \"x\",\n                 kind: Binding,\n             },\n@@ -314,15 +314,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"index\",\n-                source_range: 107..107,\n-                delete: 107..107,\n+                source_range: 58..58,\n+                delete: 58..58,\n                 insert: \"index\",\n                 kind: Binding,\n             },\n             CompletionItem {\n                 label: \"test()\",\n-                source_range: 107..107,\n-                delete: 107..107,\n+                source_range: 58..58,\n+                delete: 58..58,\n                 insert: \"test()$0\",\n                 kind: Function,\n                 lookup: \"test\",\n@@ -347,15 +347,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"T\",\n-                source_range: 52..52,\n-                delete: 52..52,\n+                source_range: 19..19,\n+                delete: 19..19,\n                 insert: \"T\",\n                 kind: TypeParam,\n             },\n             CompletionItem {\n                 label: \"quux()\",\n-                source_range: 52..52,\n-                delete: 52..52,\n+                source_range: 19..19,\n+                delete: 19..19,\n                 insert: \"quux()$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -380,22 +380,22 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Self\",\n-                source_range: 54..54,\n-                delete: 54..54,\n+                source_range: 21..21,\n+                delete: 21..21,\n                 insert: \"Self\",\n                 kind: TypeParam,\n             },\n             CompletionItem {\n                 label: \"T\",\n-                source_range: 54..54,\n-                delete: 54..54,\n+                source_range: 21..21,\n+                delete: 21..21,\n                 insert: \"T\",\n                 kind: TypeParam,\n             },\n             CompletionItem {\n                 label: \"X<\u2026>\",\n-                source_range: 54..54,\n-                delete: 54..54,\n+                source_range: 21..21,\n+                delete: 21..21,\n                 insert: \"X<$0>\",\n                 kind: Struct,\n                 lookup: \"X\",\n@@ -419,15 +419,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Self\",\n-                source_range: 48..48,\n-                delete: 48..48,\n+                source_range: 15..15,\n+                delete: 15..15,\n                 insert: \"Self\",\n                 kind: TypeParam,\n             },\n             CompletionItem {\n                 label: \"X\",\n-                source_range: 48..48,\n-                delete: 48..48,\n+                source_range: 15..15,\n+                delete: 15..15,\n                 insert: \"X\",\n                 kind: Enum,\n             },\n@@ -452,22 +452,22 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Baz\",\n-                source_range: 105..105,\n-                delete: 105..105,\n+                source_range: 40..40,\n+                delete: 40..40,\n                 insert: \"Baz\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 105..105,\n-                delete: 105..105,\n+                source_range: 40..40,\n+                delete: 40..40,\n                 insert: \"Foo\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"quux()\",\n-                source_range: 105..105,\n-                delete: 105..105,\n+                source_range: 40..40,\n+                delete: 40..40,\n                 insert: \"quux()$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -520,15 +520,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Bar\",\n-                source_range: 117..117,\n-                delete: 117..117,\n+                source_range: 52..52,\n+                delete: 52..52,\n                 insert: \"Bar\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"quux()\",\n-                source_range: 117..117,\n-                delete: 117..117,\n+                source_range: 52..52,\n+                delete: 52..52,\n                 insert: \"quux()$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -552,15 +552,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 55..55,\n-                delete: 55..55,\n+                source_range: 22..22,\n+                delete: 22..22,\n                 insert: \"Foo\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"x()\",\n-                source_range: 55..55,\n-                delete: 55..55,\n+                source_range: 22..22,\n+                delete: 22..22,\n                 insert: \"x()$0\",\n                 kind: Function,\n                 lookup: \"x\",\n@@ -589,16 +589,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"bar\",\n-                source_range: 146..146,\n-                delete: 146..146,\n+                source_range: 65..65,\n+                delete: 65..65,\n                 insert: \"bar\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 146..146,\n-                delete: 146..146,\n+                source_range: 65..65,\n+                delete: 65..65,\n                 insert: \"foo()$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1001,16 +1001,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"m!(\u2026)\",\n-                source_range: 145..145,\n-                delete: 145..145,\n+                source_range: 80..80,\n+                delete: 80..80,\n                 insert: \"m!($0)\",\n                 kind: Macro,\n                 detail: \"macro_rules! m\",\n             },\n             CompletionItem {\n                 label: \"quux(\u2026)\",\n-                source_range: 145..145,\n-                delete: 145..145,\n+                source_range: 80..80,\n+                delete: 80..80,\n                 insert: \"quux(${1:x})$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -1019,16 +1019,16 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"x\",\n-                source_range: 145..145,\n-                delete: 145..145,\n+                source_range: 80..80,\n+                delete: 80..80,\n                 insert: \"x\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"y\",\n-                source_range: 145..145,\n-                delete: 145..145,\n+                source_range: 80..80,\n+                delete: 80..80,\n                 insert: \"y\",\n                 kind: Binding,\n                 detail: \"i32\",\n@@ -1054,16 +1054,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"m!(\u2026)\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"m!($0)\",\n                 kind: Macro,\n                 detail: \"macro_rules! m\",\n             },\n             CompletionItem {\n                 label: \"quux(\u2026)\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"quux(${1:x})$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -1072,16 +1072,16 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"x\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"x\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"y\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"y\",\n                 kind: Binding,\n                 detail: \"i32\",\n@@ -1107,16 +1107,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"m!(\u2026)\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"m!($0)\",\n                 kind: Macro,\n                 detail: \"macro_rules! m\",\n             },\n             CompletionItem {\n                 label: \"quux(\u2026)\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"quux(${1:x})$0\",\n                 kind: Function,\n                 lookup: \"quux\",\n@@ -1125,16 +1125,16 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"x\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"x\",\n                 kind: Binding,\n                 detail: \"i32\",\n             },\n             CompletionItem {\n                 label: \"y\",\n-                source_range: 145..146,\n-                delete: 145..146,\n+                source_range: 80..81,\n+                delete: 80..81,\n                 insert: \"y\",\n                 kind: Binding,\n                 detail: \"i32\",\n@@ -1160,14 +1160,14 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Quux\",\n-                source_range: 82..82,\n-                delete: 82..82,\n+                source_range: 33..33,\n+                delete: 33..33,\n                 insert: \"Quux\",\n             },\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 82..82,\n-                delete: 82..82,\n+                source_range: 33..33,\n+                delete: 33..33,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n@@ -1201,33 +1201,33 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 248..250,\n-                delete: 248..250,\n+                source_range: 103..105,\n+                delete: 103..105,\n                 insert: \"Foo\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Foo::Bar\",\n-                source_range: 248..250,\n-                delete: 248..250,\n+                source_range: 103..105,\n+                delete: 103..105,\n                 insert: \"Foo::Bar\",\n                 kind: EnumVariant,\n                 lookup: \"Bar\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Baz\",\n-                source_range: 248..250,\n-                delete: 248..250,\n+                source_range: 103..105,\n+                delete: 103..105,\n                 insert: \"Foo::Baz\",\n                 kind: EnumVariant,\n                 lookup: \"Baz\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Quux\",\n-                source_range: 248..250,\n-                delete: 248..250,\n+                source_range: 103..105,\n+                delete: 103..105,\n                 insert: \"Foo::Quux\",\n                 kind: EnumVariant,\n                 lookup: \"Quux\",\n@@ -1262,33 +1262,33 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 219..221,\n-                delete: 219..221,\n+                source_range: 90..92,\n+                delete: 90..92,\n                 insert: \"Foo\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Foo::Bar\",\n-                source_range: 219..221,\n-                delete: 219..221,\n+                source_range: 90..92,\n+                delete: 90..92,\n                 insert: \"Foo::Bar\",\n                 kind: EnumVariant,\n                 lookup: \"Bar\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Baz\",\n-                source_range: 219..221,\n-                delete: 219..221,\n+                source_range: 90..92,\n+                delete: 90..92,\n                 insert: \"Foo::Baz\",\n                 kind: EnumVariant,\n                 lookup: \"Baz\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Quux\",\n-                source_range: 219..221,\n-                delete: 219..221,\n+                source_range: 90..92,\n+                delete: 90..92,\n                 insert: \"Foo::Quux\",\n                 kind: EnumVariant,\n                 lookup: \"Quux\",\n@@ -1319,42 +1319,42 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 185..186,\n-                delete: 185..186,\n+                source_range: 72..73,\n+                delete: 72..73,\n                 insert: \"Foo\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Foo::Bar\",\n-                source_range: 185..186,\n-                delete: 185..186,\n+                source_range: 72..73,\n+                delete: 72..73,\n                 insert: \"Foo::Bar\",\n                 kind: EnumVariant,\n                 lookup: \"Bar\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Baz\",\n-                source_range: 185..186,\n-                delete: 185..186,\n+                source_range: 72..73,\n+                delete: 72..73,\n                 insert: \"Foo::Baz\",\n                 kind: EnumVariant,\n                 lookup: \"Baz\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Foo::Quux\",\n-                source_range: 185..186,\n-                delete: 185..186,\n+                source_range: 72..73,\n+                delete: 72..73,\n                 insert: \"Foo::Quux\",\n                 kind: EnumVariant,\n                 lookup: \"Quux\",\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 185..186,\n-                delete: 185..186,\n+                source_range: 72..73,\n+                delete: 72..73,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n@@ -1381,24 +1381,24 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"f()\",\n-                source_range: 98..99,\n-                delete: 98..99,\n+                source_range: 49..50,\n+                delete: 49..50,\n                 insert: \"f()$0\",\n                 kind: Function,\n                 lookup: \"f\",\n                 detail: \"fn f() -> m::E\",\n             },\n             CompletionItem {\n                 label: \"m\",\n-                source_range: 98..99,\n-                delete: 98..99,\n+                source_range: 49..50,\n+                delete: 49..50,\n                 insert: \"m\",\n                 kind: Module,\n             },\n             CompletionItem {\n                 label: \"m::E::V\",\n-                source_range: 98..99,\n-                delete: 98..99,\n+                source_range: 49..50,\n+                delete: 49..50,\n                 insert: \"m::E::V\",\n                 kind: EnumVariant,\n                 lookup: \"V\","}, {"sha": "4fdc2f0bbcab4465fc87f6689890ed167616e63e", "filename": "crates/ra_ide/src/completion/presentation.rs", "status": "modified", "additions": 110, "deletions": 107, "changes": 217, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fpresentation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fpresentation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fcompletion%2Fpresentation.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -491,13 +491,14 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 121..123,\n-                delete: 121..123,\n+                source_range: 56..58,\n+                delete: 56..58,\n                 insert: \"Foo\",\n                 kind: EnumVariant,\n                 detail: \"{ x: i32, y: i32 }\",\n             },\n-        ]\"###\n+        ]\n+        \"###\n         );\n     }\n \n@@ -517,15 +518,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo(\u2026)\",\n-                source_range: 115..117,\n-                delete: 115..117,\n+                source_range: 50..52,\n+                delete: 50..52,\n                 insert: \"Foo($0)\",\n                 kind: EnumVariant,\n                 lookup: \"Foo\",\n                 detail: \"(i32, i32)\",\n                 trigger_call_info: true,\n             },\n-        ]\"###\n+        ]\n+        \"###\n         );\n     }\n \n@@ -545,13 +547,14 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Foo\",\n-                source_range: 104..106,\n-                delete: 104..106,\n+                source_range: 39..41,\n+                delete: 39..41,\n                 insert: \"Foo\",\n                 kind: EnumVariant,\n                 detail: \"()\",\n             },\n-        ]\"###\n+        ]\n+        \"###\n         );\n     }\n \n@@ -573,17 +576,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 203..206,\n-                delete: 203..206,\n+                source_range: 122..125,\n+                delete: 122..125,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n                 detail: \"fn main()\",\n             },\n             CompletionItem {\n                 label: \"something_deprecated()\",\n-                source_range: 203..206,\n-                delete: 203..206,\n+                source_range: 122..125,\n+                delete: 122..125,\n                 insert: \"something_deprecated()$0\",\n                 kind: Function,\n                 lookup: \"something_deprecated\",\n@@ -592,8 +595,8 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"something_else_deprecated()\",\n-                source_range: 203..206,\n-                delete: 203..206,\n+                source_range: 122..125,\n+                delete: 122..125,\n                 insert: \"something_else_deprecated()$0\",\n                 kind: Function,\n                 lookup: \"something_else_deprecated\",\n@@ -619,17 +622,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 61..64,\n-                delete: 61..64,\n+                source_range: 28..31,\n+                delete: 28..31,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n                 detail: \"fn main()\",\n             },\n             CompletionItem {\n                 label: \"no_args()\",\n-                source_range: 61..64,\n-                delete: 61..64,\n+                source_range: 28..31,\n+                delete: 28..31,\n                 insert: \"no_args()$0\",\n                 kind: Function,\n                 lookup: \"no_args\",\n@@ -649,17 +652,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 80..85,\n-                delete: 80..85,\n+                source_range: 47..52,\n+                delete: 47..52,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n                 detail: \"fn main()\",\n             },\n             CompletionItem {\n                 label: \"with_args(\u2026)\",\n-                source_range: 80..85,\n-                delete: 80..85,\n+                source_range: 47..52,\n+                delete: 47..52,\n                 insert: \"with_args(${1:x}, ${2:y})$0\",\n                 kind: Function,\n                 lookup: \"with_args\",\n@@ -680,17 +683,17 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 110..115,\n-                delete: 110..115,\n+                source_range: 77..82,\n+                delete: 77..82,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n                 detail: \"fn main()\",\n             },\n             CompletionItem {\n                 label: \"with_ignored_args(\u2026)\",\n-                source_range: 110..115,\n-                delete: 110..115,\n+                source_range: 77..82,\n+                delete: 77..82,\n                 insert: \"with_ignored_args(${1:foo}, ${2:bar}, ${3:ho_ge_})$0\",\n                 kind: Function,\n                 lookup: \"with_ignored_args\",\n@@ -716,8 +719,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo()\",\n-                source_range: 163..164,\n-                delete: 163..164,\n+                source_range: 66..67,\n+                delete: 66..67,\n                 insert: \"foo()$0\",\n                 kind: Method,\n                 lookup: \"foo\",\n@@ -742,8 +745,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo_ignored_args(\u2026)\",\n-                source_range: 194..195,\n-                delete: 194..195,\n+                source_range: 97..98,\n+                delete: 97..98,\n                 insert: \"foo_ignored_args(${1:a}, ${2:b})$0\",\n                 kind: Method,\n                 lookup: \"foo_ignored_args\",\n@@ -771,23 +774,23 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"None\",\n-                source_range: 144..147,\n-                delete: 144..147,\n+                source_range: 79..82,\n+                delete: 79..82,\n                 insert: \"None\",\n                 kind: EnumVariant,\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Option\",\n-                source_range: 144..147,\n-                delete: 144..147,\n+                source_range: 79..82,\n+                delete: 79..82,\n                 insert: \"Option\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Some(\u2026)\",\n-                source_range: 144..147,\n-                delete: 144..147,\n+                source_range: 79..82,\n+                delete: 79..82,\n                 insert: \"Some($0)\",\n                 kind: EnumVariant,\n                 lookup: \"Some\",\n@@ -796,8 +799,8 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"main()\",\n-                source_range: 144..147,\n-                delete: 144..147,\n+                source_range: 79..82,\n+                delete: 79..82,\n                 insert: \"main()$0\",\n                 kind: Function,\n                 lookup: \"main\",\n@@ -822,23 +825,23 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"None\",\n-                source_range: 185..188,\n-                delete: 185..188,\n+                source_range: 104..107,\n+                delete: 104..107,\n                 insert: \"None\",\n                 kind: EnumVariant,\n                 detail: \"()\",\n             },\n             CompletionItem {\n                 label: \"Option\",\n-                source_range: 185..188,\n-                delete: 185..188,\n+                source_range: 104..107,\n+                delete: 104..107,\n                 insert: \"Option\",\n                 kind: Enum,\n             },\n             CompletionItem {\n                 label: \"Some(\u2026)\",\n-                source_range: 185..188,\n-                delete: 185..188,\n+                source_range: 104..107,\n+                delete: 104..107,\n                 insert: \"Some($0)\",\n                 kind: EnumVariant,\n                 lookup: \"Some\",\n@@ -872,23 +875,23 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"ManualVtable\",\n-                source_range: 295..299,\n-                delete: 295..299,\n+                source_range: 182..186,\n+                delete: 182..186,\n                 insert: \"ManualVtable\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"main\",\n-                source_range: 295..299,\n-                delete: 295..299,\n+                source_range: 182..186,\n+                delete: 182..186,\n                 insert: \"main\",\n                 kind: Function,\n                 detail: \"fn main() -> ManualVtable\",\n             },\n             CompletionItem {\n                 label: \"somefn\",\n-                source_range: 295..299,\n-                delete: 295..299,\n+                source_range: 182..186,\n+                delete: 182..186,\n                 insert: \"somefn\",\n                 kind: Function,\n                 detail: \"fn somefn(with: u8, a: u8, lot: u8, of: u8, args: u8)\",\n@@ -916,8 +919,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 171..172,\n-                delete: 171..172,\n+                source_range: 74..75,\n+                delete: 74..75,\n                 insert: \"foo(${1:x})$0\",\n                 kind: Method,\n                 lookup: \"foo\",\n@@ -951,8 +954,8 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 171..172,\n-                delete: 171..172,\n+                source_range: 74..75,\n+                delete: 74..75,\n                 insert: \"foo($0)\",\n                 kind: Method,\n                 lookup: \"foo\",\n@@ -1062,16 +1065,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Vec<\u2026>\",\n-                source_range: 61..63,\n-                delete: 61..63,\n+                source_range: 28..30,\n+                delete: 28..30,\n                 insert: \"Vec<$0>\",\n                 kind: Struct,\n                 lookup: \"Vec\",\n             },\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 61..63,\n-                delete: 61..63,\n+                source_range: 28..30,\n+                delete: 28..30,\n                 insert: \"foo(${1:xs})$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1092,16 +1095,16 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Vec<\u2026>\",\n-                source_range: 64..66,\n-                delete: 64..66,\n+                source_range: 31..33,\n+                delete: 31..33,\n                 insert: \"Vec<$0>\",\n                 kind: TypeAlias,\n                 lookup: \"Vec\",\n             },\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 64..66,\n-                delete: 64..66,\n+                source_range: 31..33,\n+                delete: 31..33,\n                 insert: \"foo(${1:xs})$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1122,15 +1125,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Vec\",\n-                source_range: 68..70,\n-                delete: 68..70,\n+                source_range: 35..37,\n+                delete: 35..37,\n                 insert: \"Vec\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 68..70,\n-                delete: 68..70,\n+                source_range: 35..37,\n+                delete: 35..37,\n                 insert: \"foo(${1:xs})$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1151,15 +1154,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"Vec\",\n-                source_range: 61..63,\n-                delete: 61..63,\n+                source_range: 28..30,\n+                delete: 28..30,\n                 insert: \"Vec\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"foo(\u2026)\",\n-                source_range: 61..63,\n-                delete: 61..63,\n+                source_range: 28..30,\n+                delete: 28..30,\n                 insert: \"foo(${1:xs})$0\",\n                 kind: Function,\n                 lookup: \"foo\",\n@@ -1254,24 +1257,24 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"another_field\",\n-                source_range: 201..201,\n-                delete: 201..201,\n+                source_range: 136..136,\n+                delete: 136..136,\n                 insert: \"another_field\",\n                 kind: Field,\n                 detail: \"i64\",\n             },\n             CompletionItem {\n                 label: \"my_string\",\n-                source_range: 201..201,\n-                delete: 201..201,\n+                source_range: 136..136,\n+                delete: 136..136,\n                 insert: \"my_string\",\n                 kind: Field,\n                 detail: \"{unknown}\",\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 201..201,\n-                delete: 201..201,\n+                source_range: 136..136,\n+                delete: 136..136,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -1298,25 +1301,25 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"another_field\",\n-                source_range: 208..208,\n-                delete: 208..208,\n+                source_range: 143..143,\n+                delete: 143..143,\n                 insert: \"another_field\",\n                 kind: Field,\n                 detail: \"i64\",\n             },\n             CompletionItem {\n                 label: \"another_good_type\",\n-                source_range: 208..208,\n-                delete: 208..208,\n+                source_range: 143..143,\n+                delete: 143..143,\n                 insert: \"another_good_type\",\n                 kind: Field,\n                 detail: \"u32\",\n                 score: TypeMatch,\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 208..208,\n-                delete: 208..208,\n+                source_range: 143..143,\n+                delete: 143..143,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -1346,25 +1349,25 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"another_field\",\n-                source_range: 270..270,\n-                delete: 270..270,\n+                source_range: 189..189,\n+                delete: 189..189,\n                 insert: \"another_field\",\n                 kind: Field,\n                 detail: \"i64\",\n             },\n             CompletionItem {\n                 label: \"another_good_type\",\n-                source_range: 270..270,\n-                delete: 270..270,\n+                source_range: 189..189,\n+                delete: 189..189,\n                 insert: \"another_good_type\",\n                 kind: Field,\n                 detail: \"u32\",\n                 score: TypeMatch,\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 270..270,\n-                delete: 270..270,\n+                source_range: 189..189,\n+                delete: 189..189,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -1394,25 +1397,25 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"another_field\",\n-                source_range: 336..336,\n-                delete: 336..336,\n+                source_range: 239..239,\n+                delete: 239..239,\n                 insert: \"another_field\",\n                 kind: Field,\n                 detail: \"i64\",\n                 score: TypeMatch,\n             },\n             CompletionItem {\n                 label: \"another_good_type\",\n-                source_range: 336..336,\n-                delete: 336..336,\n+                source_range: 239..239,\n+                delete: 239..239,\n                 insert: \"another_good_type\",\n                 kind: Field,\n                 detail: \"u32\",\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 336..336,\n-                delete: 336..336,\n+                source_range: 239..239,\n+                delete: 239..239,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -1441,25 +1444,25 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"another_field\",\n-                source_range: 328..328,\n-                delete: 328..328,\n+                source_range: 231..231,\n+                delete: 231..231,\n                 insert: \"another_field\",\n                 kind: Field,\n                 detail: \"i64\",\n             },\n             CompletionItem {\n                 label: \"another_good_type\",\n-                source_range: 328..328,\n-                delete: 328..328,\n+                source_range: 231..231,\n+                delete: 231..231,\n                 insert: \"another_good_type\",\n                 kind: Field,\n                 detail: \"u32\",\n                 score: TypeMatch,\n             },\n             CompletionItem {\n                 label: \"the_field\",\n-                source_range: 328..328,\n-                delete: 328..328,\n+                source_range: 231..231,\n+                delete: 231..231,\n                 insert: \"the_field\",\n                 kind: Field,\n                 detail: \"u32\",\n@@ -1485,15 +1488,15 @@ mod tests {\n         [\n             CompletionItem {\n                 label: \"WorldSnapshot\",\n-                source_range: 132..133,\n-                delete: 132..133,\n+                source_range: 71..72,\n+                delete: 71..72,\n                 insert: \"WorldSnapshot\",\n                 kind: Struct,\n             },\n             CompletionItem {\n                 label: \"go(\u2026)\",\n-                source_range: 132..133,\n-                delete: 132..133,\n+                source_range: 71..72,\n+                delete: 71..72,\n                 insert: \"go(${1:world})$0\",\n                 kind: Function,\n                 lookup: \"go\",\n@@ -1502,8 +1505,8 @@ mod tests {\n             },\n             CompletionItem {\n                 label: \"world\",\n-                source_range: 132..133,\n-                delete: 132..133,\n+                source_range: 71..72,\n+                delete: 71..72,\n                 insert: \"world\",\n                 kind: Binding,\n                 detail: \"&WorldSnapshot\","}, {"sha": "9660fd2d3f4ae9243cd6a704e98a5db74701a8b1", "filename": "crates/ra_ide/src/hover.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fhover.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -443,16 +443,16 @@ mod tests {\n     #[test]\n     fn hover_shows_type_of_an_expression() {\n         let (analysis, position) = single_file_with_position(\n-            \"\n-            pub fn foo() -> u32 { 1 }\n+            r#\"\n+pub fn foo() -> u32 { 1 }\n \n-            fn main() {\n-                let foo_test = foo()<|>;\n-            }\n-            \",\n+fn main() {\n+    let foo_test = foo()<|>;\n+}\n+\"#,\n         );\n         let hover = analysis.hover(position).unwrap().unwrap();\n-        assert_eq!(hover.range, TextRange::new(95.into(), 100.into()));\n+        assert_eq!(hover.range, TextRange::new(58.into(), 63.into()));\n         assert_eq!(trim_markup_opt(hover.info.first()), Some(\"u32\"));\n     }\n "}, {"sha": "f568d6baa7265b0d0f3c25515bc804463532d9bb", "filename": "crates/ra_ide/src/mock_analysis.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fmock_analysis.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -136,12 +136,6 @@ impl MockAnalysis {\n         self.files.push(MockFileData::new(path.to_string(), text.to_string()));\n         file_id\n     }\n-    fn add_file_with_position(&mut self, path: &str, text: &str) -> FilePosition {\n-        let (offset, text) = extract_offset(text);\n-        let file_id = self.next_id();\n-        self.files.push(MockFileData::new(path.to_string(), text));\n-        FilePosition { file_id, offset }\n-    }\n     fn add_file_with_range(&mut self, path: &str, text: &str) -> FileRange {\n         let (range, text) = extract_range(text);\n         let file_id = self.next_id();\n@@ -229,9 +223,7 @@ pub fn single_file(ra_fixture: &str) -> (Analysis, FileId) {\n \n /// Creates analysis for a single file, returns position marked with <|>.\n pub fn single_file_with_position(ra_fixture: &str) -> (Analysis, FilePosition) {\n-    let mut mock = MockAnalysis::new();\n-    let pos = mock.add_file_with_position(\"/main.rs\", ra_fixture);\n-    (mock.analysis(), pos)\n+    analysis_and_position(ra_fixture)\n }\n \n /// Creates analysis for a single file, returns range marked with a pair of <|>."}, {"sha": "50929bb721594caa926f2925adbadc180ed48645", "filename": "crates/ra_ide/src/references.rs", "status": "modified", "additions": 249, "deletions": 239, "changes": 488, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Freferences.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Freferences.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Freferences.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -197,233 +197,238 @@ mod tests {\n \n     #[test]\n     fn test_struct_literal_after_space() {\n-        let code = r#\"\n-    struct Foo <|>{\n-        a: i32,\n-    }\n-    impl Foo {\n-        fn f() -> i32 { 42 }\n-    }\n-    fn main() {\n-        let f: Foo;\n-        f = Foo {a: Foo::f()};\n-    }\"#;\n-\n-        let refs = get_all_refs(code);\n+        let refs = get_all_refs(\n+            r#\"\n+struct Foo <|>{\n+    a: i32,\n+}\n+impl Foo {\n+    fn f() -> i32 { 42 }\n+}\n+fn main() {\n+    let f: Foo;\n+    f = Foo {a: Foo::f()};\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"Foo STRUCT_DEF FileId(1) 5..39 12..15 Other\",\n-            &[\"FileId(1) 138..141 StructLiteral\"],\n+            \"Foo STRUCT_DEF FileId(1) 0..26 7..10 Other\",\n+            &[\"FileId(1) 101..104 StructLiteral\"],\n         );\n     }\n \n     #[test]\n-    fn test_struct_literal_befor_space() {\n-        let code = r#\"\n-    struct Foo<|> {}\n-        fn main() {\n-        let f: Foo;\n-        f = Foo {};\n-    }\"#;\n-\n-        let refs = get_all_refs(code);\n+    fn test_struct_literal_before_space() {\n+        let refs = get_all_refs(\n+            r#\"\n+struct Foo<|> {}\n+    fn main() {\n+    let f: Foo;\n+    f = Foo {};\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"Foo STRUCT_DEF FileId(1) 5..18 12..15 Other\",\n-            &[\"FileId(1) 54..57 Other\", \"FileId(1) 71..74 StructLiteral\"],\n+            \"Foo STRUCT_DEF FileId(1) 0..13 7..10 Other\",\n+            &[\"FileId(1) 41..44 Other\", \"FileId(1) 54..57 StructLiteral\"],\n         );\n     }\n \n     #[test]\n     fn test_struct_literal_with_generic_type() {\n-        let code = r#\"\n-    struct Foo<T> <|>{}\n-        fn main() {\n-        let f: Foo::<i32>;\n-        f = Foo {};\n-    }\"#;\n-\n-        let refs = get_all_refs(code);\n+        let refs = get_all_refs(\n+            r#\"\n+struct Foo<T> <|>{}\n+    fn main() {\n+    let f: Foo::<i32>;\n+    f = Foo {};\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"Foo STRUCT_DEF FileId(1) 5..21 12..15 Other\",\n-            &[\"FileId(1) 81..84 StructLiteral\"],\n+            \"Foo STRUCT_DEF FileId(1) 0..16 7..10 Other\",\n+            &[\"FileId(1) 64..67 StructLiteral\"],\n         );\n     }\n \n     #[test]\n     fn test_struct_literal_for_tuple() {\n-        let code = r#\"\n-    struct Foo<|>(i32);\n-\n-    fn main() {\n-        let f: Foo;\n-        f = Foo(1);\n-    }\"#;\n+        let refs = get_all_refs(\n+            r#\"\n+struct Foo<|>(i32);\n \n-        let refs = get_all_refs(code);\n+fn main() {\n+    let f: Foo;\n+    f = Foo(1);\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"Foo STRUCT_DEF FileId(1) 5..21 12..15 Other\",\n-            &[\"FileId(1) 71..74 StructLiteral\"],\n+            \"Foo STRUCT_DEF FileId(1) 0..16 7..10 Other\",\n+            &[\"FileId(1) 54..57 StructLiteral\"],\n         );\n     }\n \n     #[test]\n     fn test_find_all_refs_for_local() {\n-        let code = r#\"\n-    fn main() {\n-        let mut i = 1;\n-        let j = 1;\n-        i = i<|> + j;\n+        let refs = get_all_refs(\n+            r#\"\n+fn main() {\n+    let mut i = 1;\n+    let j = 1;\n+    i = i<|> + j;\n \n-        {\n-            i = 0;\n-        }\n-\n-        i = 5;\n-    }\"#;\n+    {\n+        i = 0;\n+    }\n \n-        let refs = get_all_refs(code);\n+    i = 5;\n+}\"#,\n+        );\n         check_result(\n             refs,\n-            \"i BIND_PAT FileId(1) 33..34 Other Write\",\n+            \"i BIND_PAT FileId(1) 24..25 Other Write\",\n             &[\n-                \"FileId(1) 67..68 Other Write\",\n-                \"FileId(1) 71..72 Other Read\",\n-                \"FileId(1) 101..102 Other Write\",\n-                \"FileId(1) 127..128 Other Write\",\n+                \"FileId(1) 50..51 Other Write\",\n+                \"FileId(1) 54..55 Other Read\",\n+                \"FileId(1) 76..77 Other Write\",\n+                \"FileId(1) 94..95 Other Write\",\n             ],\n         );\n     }\n \n     #[test]\n     fn search_filters_by_range() {\n-        let code = r#\"\n-            fn foo() {\n-                let spam<|> = 92;\n-                spam + spam\n-            }\n-            fn bar() {\n-                let spam = 92;\n-                spam + spam\n-            }\n-        \"#;\n-        let refs = get_all_refs(code);\n+        let refs = get_all_refs(\n+            r#\"\n+fn foo() {\n+    let spam<|> = 92;\n+    spam + spam\n+}\n+fn bar() {\n+    let spam = 92;\n+    spam + spam\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"spam BIND_PAT FileId(1) 44..48 Other\",\n-            &[\"FileId(1) 71..75 Other Read\", \"FileId(1) 78..82 Other Read\"],\n+            \"spam BIND_PAT FileId(1) 19..23 Other\",\n+            &[\"FileId(1) 34..38 Other Read\", \"FileId(1) 41..45 Other Read\"],\n         );\n     }\n \n     #[test]\n     fn test_find_all_refs_for_param_inside() {\n-        let code = r#\"\n-    fn foo(i : u32) -> u32 {\n-        i<|>\n-    }\"#;\n-\n-        let refs = get_all_refs(code);\n-        check_result(refs, \"i BIND_PAT FileId(1) 12..13 Other\", &[\"FileId(1) 38..39 Other Read\"]);\n+        let refs = get_all_refs(\n+            r#\"\n+fn foo(i : u32) -> u32 {\n+    i<|>\n+}\n+\"#,\n+        );\n+        check_result(refs, \"i BIND_PAT FileId(1) 7..8 Other\", &[\"FileId(1) 29..30 Other Read\"]);\n     }\n \n     #[test]\n     fn test_find_all_refs_for_fn_param() {\n-        let code = r#\"\n-    fn foo(i<|> : u32) -> u32 {\n-        i\n-    }\"#;\n-\n-        let refs = get_all_refs(code);\n-        check_result(refs, \"i BIND_PAT FileId(1) 12..13 Other\", &[\"FileId(1) 38..39 Other Read\"]);\n+        let refs = get_all_refs(\n+            r#\"\n+fn foo(i<|> : u32) -> u32 {\n+    i\n+}\n+\"#,\n+        );\n+        check_result(refs, \"i BIND_PAT FileId(1) 7..8 Other\", &[\"FileId(1) 29..30 Other Read\"]);\n     }\n \n     #[test]\n     fn test_find_all_refs_field_name() {\n-        let code = r#\"\n-            //- /lib.rs\n-            struct Foo {\n-                pub spam<|>: u32,\n-            }\n-\n-            fn main(s: Foo) {\n-                let f = s.spam;\n-            }\n-        \"#;\n+        let refs = get_all_refs(\n+            r#\"\n+//- /lib.rs\n+struct Foo {\n+    pub spam<|>: u32,\n+}\n \n-        let refs = get_all_refs(code);\n+fn main(s: Foo) {\n+    let f = s.spam;\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"spam RECORD_FIELD_DEF FileId(1) 66..79 70..74 Other\",\n-            &[\"FileId(1) 152..156 Other Read\"],\n+            \"spam RECORD_FIELD_DEF FileId(1) 17..30 21..25 Other\",\n+            &[\"FileId(1) 67..71 Other Read\"],\n         );\n     }\n \n     #[test]\n     fn test_find_all_refs_impl_item_name() {\n-        let code = r#\"\n-            //- /lib.rs\n-            struct Foo;\n-            impl Foo {\n-                fn f<|>(&self) {  }\n-            }\n-        \"#;\n-\n-        let refs = get_all_refs(code);\n-        check_result(refs, \"f FN_DEF FileId(1) 88..104 91..92 Other\", &[]);\n+        let refs = get_all_refs(\n+            r#\"\n+struct Foo;\n+impl Foo {\n+    fn f<|>(&self) {  }\n+}\n+\"#,\n+        );\n+        check_result(refs, \"f FN_DEF FileId(1) 27..43 30..31 Other\", &[]);\n     }\n \n     #[test]\n     fn test_find_all_refs_enum_var_name() {\n-        let code = r#\"\n-            //- /lib.rs\n-            enum Foo {\n-                A,\n-                B<|>,\n-                C,\n-            }\n-        \"#;\n-\n-        let refs = get_all_refs(code);\n-        check_result(refs, \"B ENUM_VARIANT FileId(1) 83..84 83..84 Other\", &[]);\n+        let refs = get_all_refs(\n+            r#\"\n+enum Foo {\n+    A,\n+    B<|>,\n+    C,\n+}\n+\"#,\n+        );\n+        check_result(refs, \"B ENUM_VARIANT FileId(1) 22..23 22..23 Other\", &[]);\n     }\n \n     #[test]\n     fn test_find_all_refs_two_modules() {\n-        let code = r#\"\n-            //- /lib.rs\n-            pub mod foo;\n-            pub mod bar;\n-\n-            fn f() {\n-                let i = foo::Foo { n: 5 };\n-            }\n-\n-            //- /foo.rs\n-            use crate::bar;\n+        let (analysis, pos) = analysis_and_position(\n+            r#\"\n+//- /lib.rs\n+pub mod foo;\n+pub mod bar;\n+\n+fn f() {\n+    let i = foo::Foo { n: 5 };\n+}\n \n-            pub struct Foo {\n-                pub n: u32,\n-            }\n+//- /foo.rs\n+use crate::bar;\n \n-            fn f() {\n-                let i = bar::Bar { n: 5 };\n-            }\n+pub struct Foo {\n+    pub n: u32,\n+}\n \n-            //- /bar.rs\n-            use crate::foo;\n+fn f() {\n+    let i = bar::Bar { n: 5 };\n+}\n \n-            pub struct Bar {\n-                pub n: u32,\n-            }\n+//- /bar.rs\n+use crate::foo;\n \n-            fn f() {\n-                let i = foo::Foo<|> { n: 5 };\n-            }\n-        \"#;\n+pub struct Bar {\n+    pub n: u32,\n+}\n \n-        let (analysis, pos) = analysis_and_position(code);\n+fn f() {\n+    let i = foo::Foo<|> { n: 5 };\n+}\n+\"#,\n+        );\n         let refs = analysis.find_all_refs(pos, None).unwrap().unwrap();\n         check_result(\n             refs,\n@@ -437,48 +442,48 @@ mod tests {\n     // which is the whole `foo.rs`, and the second one is in `use foo::Foo`.\n     #[test]\n     fn test_find_all_refs_decl_module() {\n-        let code = r#\"\n-            //- /lib.rs\n-            mod foo<|>;\n+        let (analysis, pos) = analysis_and_position(\n+            r#\"\n+//- /lib.rs\n+mod foo<|>;\n \n-            use foo::Foo;\n+use foo::Foo;\n \n-            fn f() {\n-                let i = Foo { n: 5 };\n-            }\n-\n-            //- /foo.rs\n-            pub struct Foo {\n-                pub n: u32,\n-            }\n-        \"#;\n+fn f() {\n+    let i = Foo { n: 5 };\n+}\n \n-        let (analysis, pos) = analysis_and_position(code);\n+//- /foo.rs\n+pub struct Foo {\n+    pub n: u32,\n+}\n+\"#,\n+        );\n         let refs = analysis.find_all_refs(pos, None).unwrap().unwrap();\n         check_result(refs, \"foo SOURCE_FILE FileId(2) 0..35 Other\", &[\"FileId(1) 14..17 Other\"]);\n     }\n \n     #[test]\n     fn test_find_all_refs_super_mod_vis() {\n-        let code = r#\"\n-            //- /lib.rs\n-            mod foo;\n-\n-            //- /foo.rs\n-            mod some;\n-            use some::Foo;\n+        let (analysis, pos) = analysis_and_position(\n+            r#\"\n+//- /lib.rs\n+mod foo;\n \n-            fn f() {\n-                let i = Foo { n: 5 };\n-            }\n+//- /foo.rs\n+mod some;\n+use some::Foo;\n \n-            //- /foo/some.rs\n-            pub(super) struct Foo<|> {\n-                pub n: u32,\n-            }\n-        \"#;\n+fn f() {\n+    let i = Foo { n: 5 };\n+}\n \n-        let (analysis, pos) = analysis_and_position(code);\n+//- /foo/some.rs\n+pub(super) struct Foo<|> {\n+    pub n: u32,\n+}\n+\"#,\n+        );\n         let refs = analysis.find_all_refs(pos, None).unwrap().unwrap();\n         check_result(\n             refs,\n@@ -525,93 +530,98 @@ mod tests {\n \n     #[test]\n     fn test_find_all_refs_macro_def() {\n-        let code = r#\"\n-        #[macro_export]\n-        macro_rules! m1<|> { () => (()) }\n-\n-        fn foo() {\n-            m1();\n-            m1();\n-        }\"#;\n-\n-        let refs = get_all_refs(code);\n+        let refs = get_all_refs(\n+            r#\"\n+#[macro_export]\n+macro_rules! m1<|> { () => (()) }\n+\n+fn foo() {\n+    m1();\n+    m1();\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"m1 MACRO_CALL FileId(1) 9..63 46..48 Other\",\n-            &[\"FileId(1) 96..98 StructLiteral\", \"FileId(1) 114..116 StructLiteral\"],\n+            \"m1 MACRO_CALL FileId(1) 0..46 29..31 Other\",\n+            &[\"FileId(1) 63..65 StructLiteral\", \"FileId(1) 73..75 StructLiteral\"],\n         );\n     }\n \n     #[test]\n     fn test_basic_highlight_read_write() {\n-        let code = r#\"\n-        fn foo() {\n-            let mut i<|> = 0;\n-            i = i + 1;\n-        }\"#;\n-\n-        let refs = get_all_refs(code);\n+        let refs = get_all_refs(\n+            r#\"\n+fn foo() {\n+    let mut i<|> = 0;\n+    i = i + 1;\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"i BIND_PAT FileId(1) 40..41 Other Write\",\n-            &[\"FileId(1) 59..60 Other Write\", \"FileId(1) 63..64 Other Read\"],\n+            \"i BIND_PAT FileId(1) 23..24 Other Write\",\n+            &[\"FileId(1) 34..35 Other Write\", \"FileId(1) 38..39 Other Read\"],\n         );\n     }\n \n     #[test]\n     fn test_basic_highlight_field_read_write() {\n-        let code = r#\"\n-        struct S {\n-            f: u32,\n-        }\n-\n-        fn foo() {\n-            let mut s = S{f: 0};\n-            s.f<|> = 0;\n-        }\"#;\n+        let refs = get_all_refs(\n+            r#\"\n+struct S {\n+    f: u32,\n+}\n \n-        let refs = get_all_refs(code);\n+fn foo() {\n+    let mut s = S{f: 0};\n+    s.f<|> = 0;\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"f RECORD_FIELD_DEF FileId(1) 32..38 32..33 Other\",\n-            &[\"FileId(1) 96..97 Other Read\", \"FileId(1) 117..118 Other Write\"],\n+            \"f RECORD_FIELD_DEF FileId(1) 15..21 15..16 Other\",\n+            &[\"FileId(1) 55..56 Other Read\", \"FileId(1) 68..69 Other Write\"],\n         );\n     }\n \n     #[test]\n     fn test_basic_highlight_decl_no_write() {\n-        let code = r#\"\n-        fn foo() {\n-            let i<|>;\n-            i = 1;\n-        }\"#;\n-\n-        let refs = get_all_refs(code);\n-        check_result(refs, \"i BIND_PAT FileId(1) 36..37 Other\", &[\"FileId(1) 51..52 Other Write\"]);\n+        let refs = get_all_refs(\n+            r#\"\n+fn foo() {\n+    let i<|>;\n+    i = 1;\n+}\n+\"#,\n+        );\n+        check_result(refs, \"i BIND_PAT FileId(1) 19..20 Other\", &[\"FileId(1) 26..27 Other Write\"]);\n     }\n \n     #[test]\n     fn test_find_struct_function_refs_outside_module() {\n-        let code = r#\"\n-        mod foo {\n-            pub struct Foo;\n+        let refs = get_all_refs(\n+            r#\"\n+mod foo {\n+    pub struct Foo;\n \n-            impl Foo {\n-                pub fn new<|>() -> Foo {\n-                    Foo\n-                }\n-            }\n+    impl Foo {\n+        pub fn new<|>() -> Foo {\n+            Foo\n         }\n+    }\n+}\n \n-        fn main() {\n-            let _f = foo::Foo::new();\n-        }\"#;\n-\n-        let refs = get_all_refs(code);\n+fn main() {\n+    let _f = foo::Foo::new();\n+}\n+\"#,\n+        );\n         check_result(\n             refs,\n-            \"new FN_DEF FileId(1) 87..150 94..97 Other\",\n-            &[\"FileId(1) 227..230 StructLiteral\"],\n+            \"new FN_DEF FileId(1) 54..101 61..64 Other\",\n+            &[\"FileId(1) 146..149 StructLiteral\"],\n         );\n     }\n \n@@ -642,8 +652,8 @@ mod tests {\n         );\n     }\n \n-    fn get_all_refs(text: &str) -> ReferenceSearchResult {\n-        let (analysis, position) = single_file_with_position(text);\n+    fn get_all_refs(ra_fixture: &str) -> ReferenceSearchResult {\n+        let (analysis, position) = single_file_with_position(ra_fixture);\n         analysis.find_all_refs(position, None).unwrap().unwrap()\n     }\n "}, {"sha": "91545e02515ffe630a03984222b4dff7555d6e5e", "filename": "crates/ra_ide/src/references/rename.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Freferences%2Frename.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Freferences%2Frename.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Freferences%2Frename.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -276,6 +276,7 @@ mod tests {\n     use crate::{\n         mock_analysis::analysis_and_position, mock_analysis::single_file_with_position, FileId,\n     };\n+    use stdx::trim_indent;\n \n     #[test]\n     fn test_rename_to_underscore() {\n@@ -1053,8 +1054,9 @@ pub mod foo<|>;\n         );\n     }\n \n-    fn test_rename(text: &str, new_name: &str, expected: &str) {\n-        let (analysis, position) = single_file_with_position(text);\n+    fn test_rename(ra_fixture_before: &str, new_name: &str, ra_fixture_after: &str) {\n+        let ra_fixture_after = &trim_indent(ra_fixture_after);\n+        let (analysis, position) = single_file_with_position(ra_fixture_before);\n         let source_change = analysis.rename(position, new_name).unwrap();\n         let mut text_edit_builder = TextEditBuilder::default();\n         let mut file_id: Option<FileId> = None;\n@@ -1068,6 +1070,6 @@ pub mod foo<|>;\n         }\n         let mut result = analysis.file_text(file_id.unwrap()).unwrap().to_string();\n         text_edit_builder.finish().apply(&mut result);\n-        assert_eq_text!(expected, &*result);\n+        assert_eq_text!(ra_fixture_after, &*result);\n     }\n }"}, {"sha": "50adae8bb10fd6a985e49ad1d38f914482a17307", "filename": "crates/ra_ide/src/typing/on_enter.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Ftyping%2Fon_enter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6795fb83a850dde6ac0b08decf108c0c3aa452a/crates%2Fra_ide%2Fsrc%2Ftyping%2Fon_enter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Ftyping%2Fon_enter.rs?ref=c6795fb83a850dde6ac0b08decf108c0c3aa452a", "patch": "@@ -78,6 +78,7 @@ mod tests {\n     use test_utils::assert_eq_text;\n \n     use crate::mock_analysis::single_file_with_position;\n+    use stdx::trim_indent;\n \n     fn apply_on_enter(before: &str) -> Option<String> {\n         let (analysis, position) = single_file_with_position(&before);\n@@ -89,6 +90,7 @@ mod tests {\n     }\n \n     fn do_check(ra_fixture_before: &str, ra_fixture_after: &str) {\n+        let ra_fixture_after = &trim_indent(ra_fixture_after);\n         let actual = apply_on_enter(ra_fixture_before).unwrap();\n         assert_eq_text!(ra_fixture_after, &actual);\n     }"}]}