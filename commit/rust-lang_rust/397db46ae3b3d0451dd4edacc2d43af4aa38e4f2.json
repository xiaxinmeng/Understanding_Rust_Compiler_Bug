{"sha": "397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5N2RiNDZhZTNiM2QwNDUxZGQ0ZWRhY2MyZDQzYWY0YWEzOGU0ZjI=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-08-13T22:28:18Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-08-13T22:28:18Z"}, "message": "Mark prior failure to avoid ICE\n\nFix #53251", "tree": {"sha": "239098eed68af8726a352042386e50832413c36c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/239098eed68af8726a352042386e50832413c36c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "html_url": "https://github.com/rust-lang/rust/commit/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0aa8d0320266b5579428312095fe49af05ada972", "url": "https://api.github.com/repos/rust-lang/rust/commits/0aa8d0320266b5579428312095fe49af05ada972", "html_url": "https://github.com/rust-lang/rust/commit/0aa8d0320266b5579428312095fe49af05ada972"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "43edb23504480f0fe485855a480e5bb4e5f8e46e", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "patch": "@@ -5154,6 +5154,7 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n         } else {\n             None\n         } {\n+            self.set_tainted_by_errors(); // #53251\n             err.span_label(span, format!(\"expected {}\", expected_text)).emit();\n         }\n "}, {"sha": "aa9da744566f76c2efdc951f5458e681e0b1474f", "filename": "src/test/ui/issue-53251.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Ftest%2Fui%2Fissue-53251.rs", "raw_url": "https://github.com/rust-lang/rust/raw/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Ftest%2Fui%2Fissue-53251.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-53251.rs?ref=397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+struct S;\n+\n+impl S {\n+    fn f() {}\n+}\n+\n+macro_rules! impl_add {\n+    ($($n:ident)*) => {\n+        $(\n+            fn $n() {\n+                S::f::<i64>();\n+                //~^ ERROR too many type parameters provided\n+            }\n+        )*\n+    }\n+}\n+\n+impl_add!(a b);"}, {"sha": "bf99e73f0d985ac9809af96217a55096e435990d", "filename": "src/test/ui/issue-53251.stderr", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Ftest%2Fui%2Fissue-53251.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/397db46ae3b3d0451dd4edacc2d43af4aa38e4f2/src%2Ftest%2Fui%2Fissue-53251.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissue-53251.stderr?ref=397db46ae3b3d0451dd4edacc2d43af4aa38e4f2", "patch": "@@ -0,0 +1,17 @@\n+error[E0601]: `main` function not found in crate `issue_53251`\n+   |\n+   = note: consider adding a `main` function to `$DIR/issue-53251.rs`\n+\n+error[E0087]: too many type parameters provided: expected at most 0 type parameters, found 1 type parameter\n+  --> $DIR/issue-53251.rs:21:24\n+   |\n+LL |                 S::f::<i64>();\n+   |                        ^^^ expected 0 type parameters\n+...\n+LL | impl_add!(a b);\n+   | --------------- in this macro invocation\n+\n+error: aborting due to 2 previous errors\n+\n+Some errors occurred: E0087, E0601.\n+For more information about an error, try `rustc --explain E0087`."}]}