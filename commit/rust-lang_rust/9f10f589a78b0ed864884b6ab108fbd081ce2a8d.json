{"sha": "9f10f589a78b0ed864884b6ab108fbd081ce2a8d", "node_id": "C_kwDOAAsO6NoAKDlmMTBmNTg5YTc4YjBlZDg2NDg4NGI2YWIxMDhmYmQwODFjZTJhOGQ", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-04T13:05:04Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2022-08-04T14:27:02Z"}, "message": "Move new_remapping inside with_hir_id_owner", "tree": {"sha": "a0a9d7447c0352554f0cb441201c6755b53b4526", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0a9d7447c0352554f0cb441201c6755b53b4526"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f10f589a78b0ed864884b6ab108fbd081ce2a8d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmLr1zYACgkQgTGiTgx5\n768ewQ/6AzPa8qiD8P8HGbSXexKPzDMhKj4t5xgL17kMQqvgVMQXtD2d6Fq1FTAV\nxax/fc7N6u0GWrBe3j5Rb6L4wYkFMkUxzsiIY1zw7uwwSiny6gRpLwtAyzbiukii\nIN+ZkfvsDBBTPcl+G6BB3MEXgCzOD1Um9M7XhSPMuRToZuUpx1+ldKtm1U4ba6DE\nT5/55ja7A+1KM8YF9TPOipM4QYzRnRQh9Z0tRWZijiendFIcFO5ylzz+BSM3QyJ4\n61qGiCeV5/B1YVz+iNxi0a7mUeUmrKWtX+aEt/DetMtzByKTkMppQGmtk88ie08q\nzLLYiNCbQkSU5tKj5P5KtjMM+TWY4KYsTd4CdWlYDKA4FItElvDg5WWIR34mHRmJ\n6xF53A1NDqxm4cm+qMVRJ0XvZBdwmOwdpPvWCU2ihGrPcepMl3u6e/hlFlW/Fm8s\nPVrR2LNzXClO1bfAG7mz7JJzVTKyZcUERQmqbotE795BVA5duLsJArVrXs+EQRda\nbzBiTuADpKk0C9SXc8uT12ih44DXKYJwy1zq9eo1LIOZTql33NrJziCqqGSCLT0N\nVPALGyp7aARmz0tGVZdPJFu16c3NaN3i7vlS6Q2cpGICORNr6OHBsgj44L2lj2eo\nMf7J1opaE/9p1xisK509N8Vdaqryo/7haAR+SCIj3GiacTwZuxs=\n=I6yC\n-----END PGP SIGNATURE-----", "payload": "tree a0a9d7447c0352554f0cb441201c6755b53b4526\nparent 1ece866cf1752aff853bd582a62cf29ab403e2af\nauthor Santiago Pastorino <spastorino@gmail.com> 1659618304 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1659623222 -0300\n\nMove new_remapping inside with_hir_id_owner\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f10f589a78b0ed864884b6ab108fbd081ce2a8d", "html_url": "https://github.com/rust-lang/rust/commit/9f10f589a78b0ed864884b6ab108fbd081ce2a8d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f10f589a78b0ed864884b6ab108fbd081ce2a8d/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1ece866cf1752aff853bd582a62cf29ab403e2af", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ece866cf1752aff853bd582a62cf29ab403e2af", "html_url": "https://github.com/rust-lang/rust/commit/1ece866cf1752aff853bd582a62cf29ab403e2af"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "4a3e58b2f8e2edcc3d65d3f560cc76f4d7dd7ce6", "filename": "compiler/rustc_ast_lowering/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f10f589a78b0ed864884b6ab108fbd081ce2a8d/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f10f589a78b0ed864884b6ab108fbd081ce2a8d/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs?ref=9f10f589a78b0ed864884b6ab108fbd081ce2a8d", "patch": "@@ -1399,7 +1399,6 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n \n         // Contains the new lifetime definitions created for the TAIT (if any).\n         let mut collected_lifetimes = Vec::new();\n-        let mut new_remapping = FxHashMap::default();\n \n         // If this came from a TAIT (as opposed to a function that returns an RPIT), we only want\n         // to capture the lifetimes that appear in the bounds. So visit the bounds to find out\n@@ -1415,6 +1414,8 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n         debug!(?lifetimes_to_remap);\n \n         self.with_hir_id_owner(opaque_ty_node_id, |lctx| {\n+            let mut new_remapping = FxHashMap::default();\n+\n             // If this opaque type is only capturing a subset of the lifetimes (those that appear\n             // in bounds), then create the new lifetime parameters required and create a mapping\n             // from the old `'a` (on the function) to the new `'a` (on the opaque type)."}]}