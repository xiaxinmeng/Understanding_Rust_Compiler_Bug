{"sha": "2039d7ee49af6237025dbc42bfed09d55d039903", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIwMzlkN2VlNDlhZjYyMzcwMjVkYmM0MmJmZWQwOWQ1NWQwMzk5MDM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-01-15T17:19:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-01-15T17:19:28Z"}, "message": "Rollup merge of #68236 - JohnTitor:ice-tests, r=Centril\n\nAdd some regression tests\n\nCloses #64848 (fixed by #67631)\nCloses #65918 (ICE is hidden by #67000, no longer ICE)\nCloses #66473 (fixed by #68084)\nCloses #67550 (set mir-opt-level to 3)\n\nr? @Centril", "tree": {"sha": "78b305fdc39b71724ed33ca54bc461cf64c01c10", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/78b305fdc39b71724ed33ca54bc461cf64c01c10"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2039d7ee49af6237025dbc42bfed09d55d039903", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeH0mhCRBK7hj4Ov3rIwAAdHIIAEQHGJ78vQtNTQG6KI//o3EY\nEal2W+L6HiZ7zmy0+oLYoXUW4oxjtluzKFbPGA5Rr3jQt2i02er+qjXnHy3gOIb+\nvpBp8LfJC7ECBaYkEv9y0vSQOCTowTBGl2wbH7ogplK/T0lbQrblMeL0ByqYOPCv\nkRqN5owEnP/N487BWeJmD2Y/xvjRJ72rESaF9F3J8klzdQ6jvFx8AxlidPxP3y0T\n/lLYz9MhTXlrk4mTici3pKRRe3LvPDZEQ5dp59YFjSulcDXxw9OikyoBSJTfk4xH\nPaSNNc6NQ2q85vJw2jqdWswyRoMCTnKmpt0rik9zPRHUf76EsZOEkX0mNwUPwqw=\n=ujCe\n-----END PGP SIGNATURE-----\n", "payload": "tree 78b305fdc39b71724ed33ca54bc461cf64c01c10\nparent 6270e49ce7772223bed54ab3d6db41f9d72b5f82\nparent 3ba15bda53272a73ee04b3d592ffb14d6ee177cb\nauthor Dylan DPC <dylan.dpc@gmail.com> 1579108768 +0530\ncommitter GitHub <noreply@github.com> 1579108768 +0530\n\nRollup merge of #68236 - JohnTitor:ice-tests, r=Centril\n\nAdd some regression tests\n\nCloses #64848 (fixed by #67631)\nCloses #65918 (ICE is hidden by #67000, no longer ICE)\nCloses #66473 (fixed by #68084)\nCloses #67550 (set mir-opt-level to 3)\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2039d7ee49af6237025dbc42bfed09d55d039903", "html_url": "https://github.com/rust-lang/rust/commit/2039d7ee49af6237025dbc42bfed09d55d039903", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2039d7ee49af6237025dbc42bfed09d55d039903/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6270e49ce7772223bed54ab3d6db41f9d72b5f82", "url": "https://api.github.com/repos/rust-lang/rust/commits/6270e49ce7772223bed54ab3d6db41f9d72b5f82", "html_url": "https://github.com/rust-lang/rust/commit/6270e49ce7772223bed54ab3d6db41f9d72b5f82"}, {"sha": "3ba15bda53272a73ee04b3d592ffb14d6ee177cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ba15bda53272a73ee04b3d592ffb14d6ee177cb", "html_url": "https://github.com/rust-lang/rust/commit/3ba15bda53272a73ee04b3d592ffb14d6ee177cb"}], "stats": {"total": 79, "additions": 79, "deletions": 0}, "files": [{"sha": "f368bdef6f8e2d85d0fb28b6e1db639a4de3b834", "filename": "src/test/mir-opt/inline/inline-into-box-place.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fmir-opt%2Finline%2Finline-into-box-place.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fmir-opt%2Finline%2Finline-into-box-place.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Finline%2Finline-into-box-place.rs?ref=2039d7ee49af6237025dbc42bfed09d55d039903", "patch": "@@ -1,5 +1,6 @@\n // ignore-tidy-linelength\n // ignore-wasm32-bare compiled with panic=abort by default\n+// compile-flags: -Z mir-opt-level=3\n #![feature(box_syntax)]\n \n fn main() {"}, {"sha": "77712168a0fd912125877ee64d983167817bf908", "filename": "src/test/ui/associated-types/issue-64848.rs", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fassociated-types%2Fissue-64848.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fassociated-types%2Fissue-64848.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fissue-64848.rs?ref=2039d7ee49af6237025dbc42bfed09d55d039903", "patch": "@@ -0,0 +1,29 @@\n+// build-pass\n+\n+trait AssociatedConstant {\n+    const DATA: ();\n+}\n+\n+impl<F, T> AssociatedConstant for F\n+where\n+    F: FnOnce() -> T,\n+    T: AssociatedConstant,\n+{\n+    const DATA: () = T::DATA;\n+}\n+\n+impl AssociatedConstant for () {\n+    const DATA: () = ();\n+}\n+\n+fn foo() -> impl AssociatedConstant {\n+    ()\n+}\n+\n+fn get_data<T: AssociatedConstant>(_: T) -> &'static () {\n+    &T::DATA\n+}\n+\n+fn main() {\n+    get_data(foo);\n+}"}, {"sha": "cc298a28b97e5bc6e683fe5faee36d95d64720bf", "filename": "src/test/ui/issues/issue-66473.rs", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fissues%2Fissue-66473.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fissues%2Fissue-66473.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-66473.rs?ref=2039d7ee49af6237025dbc42bfed09d55d039903"}, {"sha": "dbeef44bad0ec68b68ce3c3c06768df43587855c", "filename": "src/test/ui/issues/issue-66473.stderr", "status": "added", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fissues%2Fissue-66473.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Fissues%2Fissue-66473.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-66473.stderr?ref=2039d7ee49af6237025dbc42bfed09d55d039903"}, {"sha": "97efb85ef64c7bdf02bffc441546eecdf4f91d4f", "filename": "src/test/ui/type-alias-impl-trait/issue-65918.rs", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-65918.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2039d7ee49af6237025dbc42bfed09d55d039903/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-65918.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype-alias-impl-trait%2Fissue-65918.rs?ref=2039d7ee49af6237025dbc42bfed09d55d039903", "patch": "@@ -0,0 +1,49 @@\n+// build-pass\n+\n+#![feature(type_alias_impl_trait)]\n+\n+use std::marker::PhantomData;\n+\n+/* copied Index and TryFrom for convinience (and simplicity) */\n+trait MyIndex<T> {\n+    type O;\n+    fn my_index(self) -> Self::O;\n+}\n+trait MyFrom<T>: Sized {\n+    type Error;\n+    fn my_from(value: T) -> Result<Self, Self::Error>;\n+}\n+\n+/* MCVE starts here */\n+trait F {}\n+impl F for () {}\n+type DummyT<T> = impl F;\n+fn _dummy_t<T>() -> DummyT<T> {}\n+\n+struct Phantom1<T>(PhantomData<T>);\n+struct Phantom2<T>(PhantomData<T>);\n+struct Scope<T>(Phantom2<DummyT<T>>);\n+\n+impl<T> Scope<T> {\n+    fn new() -> Self {\n+        unimplemented!()\n+    }\n+}\n+\n+impl<T> MyFrom<Phantom2<T>> for Phantom1<T> {\n+    type Error = ();\n+    fn my_from(_: Phantom2<T>) -> Result<Self, Self::Error> {\n+        unimplemented!()\n+    }\n+}\n+\n+impl<T: MyFrom<Phantom2<DummyT<U>>>, U> MyIndex<Phantom1<T>> for Scope<U> {\n+    type O = T;\n+    fn my_index(self) -> Self::O {\n+        MyFrom::my_from(self.0).ok().unwrap()\n+    }\n+}\n+\n+fn main() {\n+    let _pos: Phantom1<DummyT<()>> = Scope::new().my_index();\n+}"}]}