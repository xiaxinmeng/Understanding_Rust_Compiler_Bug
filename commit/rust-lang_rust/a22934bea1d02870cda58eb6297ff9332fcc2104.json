{"sha": "a22934bea1d02870cda58eb6297ff9332fcc2104", "node_id": "C_kwDOAAsO6NoAKGEyMjkzNGJlYTFkMDI4NzBjZGE1OGViNjI5N2ZmOTMzMmZjYzIxMDQ", "commit": {"author": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-07-18T05:25:34Z"}, "committer": {"name": "Takayuki Maeda", "email": "takoyaki0316@gmail.com", "date": "2022-07-18T05:25:34Z"}, "message": "avoid `Symbol` to `&str` conversions", "tree": {"sha": "f5f728efbdc651909b4eee8ca7e094a3b35f18df", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5f728efbdc651909b4eee8ca7e094a3b35f18df"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a22934bea1d02870cda58eb6297ff9332fcc2104", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a22934bea1d02870cda58eb6297ff9332fcc2104", "html_url": "https://github.com/rust-lang/rust/commit/a22934bea1d02870cda58eb6297ff9332fcc2104", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a22934bea1d02870cda58eb6297ff9332fcc2104/comments", "author": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TaKO8Ki", "id": 41065217, "node_id": "MDQ6VXNlcjQxMDY1MjE3", "avatar_url": "https://avatars.githubusercontent.com/u/41065217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TaKO8Ki", "html_url": "https://github.com/TaKO8Ki", "followers_url": "https://api.github.com/users/TaKO8Ki/followers", "following_url": "https://api.github.com/users/TaKO8Ki/following{/other_user}", "gists_url": "https://api.github.com/users/TaKO8Ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/TaKO8Ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TaKO8Ki/subscriptions", "organizations_url": "https://api.github.com/users/TaKO8Ki/orgs", "repos_url": "https://api.github.com/users/TaKO8Ki/repos", "events_url": "https://api.github.com/users/TaKO8Ki/events{/privacy}", "received_events_url": "https://api.github.com/users/TaKO8Ki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "95e77648e466c780a9adce2fa3d3eb5e423dc04e", "url": "https://api.github.com/repos/rust-lang/rust/commits/95e77648e466c780a9adce2fa3d3eb5e423dc04e", "html_url": "https://github.com/rust-lang/rust/commit/95e77648e466c780a9adce2fa3d3eb5e423dc04e"}], "stats": {"total": 51, "additions": 28, "deletions": 23}, "files": [{"sha": "cd77dbca3c440c700bae2df0550c94b4b3c29b00", "filename": "compiler/rustc_ast_lowering/src/asm.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Fasm.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -145,7 +145,7 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n                     InlineAsmRegOrRegClass::Reg(s) => {\n                         asm::InlineAsmRegOrRegClass::Reg(if let Some(asm_arch) = asm_arch {\n                             asm::InlineAsmReg::parse(asm_arch, s).unwrap_or_else(|e| {\n-                                let msg = format!(\"invalid register `{}`: {}\", s.as_str(), e);\n+                                let msg = format!(\"invalid register `{}`: {}\", s, e);\n                                 sess.struct_span_err(*op_sp, &msg).emit();\n                                 asm::InlineAsmReg::Err\n                             })\n@@ -156,7 +156,7 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n                     InlineAsmRegOrRegClass::RegClass(s) => {\n                         asm::InlineAsmRegOrRegClass::RegClass(if let Some(asm_arch) = asm_arch {\n                             asm::InlineAsmRegClass::parse(asm_arch, s).unwrap_or_else(|e| {\n-                                let msg = format!(\"invalid register class `{}`: {}\", s.as_str(), e);\n+                                let msg = format!(\"invalid register class `{}`: {}\", s, e);\n                                 sess.struct_span_err(*op_sp, &msg).emit();\n                                 asm::InlineAsmRegClass::Err\n                             })"}, {"sha": "d6b0ac158df9fde5d33a2bee64348d4d5824249d", "filename": "compiler/rustc_ast_passes/src/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2Fsrc%2Ffeature_gate.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -62,9 +62,9 @@ impl<'a> PostExpansionVisitor<'a> {\n         let ast::StrLit { symbol_unescaped, span, .. } = abi;\n \n         if let ast::Const::Yes(_) = constness {\n-            match symbol_unescaped.as_str() {\n+            match symbol_unescaped {\n                 // Stable\n-                \"Rust\" | \"C\" => {}\n+                sym::Rust | sym::C => {}\n                 abi => gate_feature_post!(\n                     &self,\n                     const_extern_fn,"}, {"sha": "80fd9726fc78005cde1f9d7d400f94bf34b31106", "filename": "compiler/rustc_codegen_llvm/src/debuginfo/gdb.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fgdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fgdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fdebuginfo%2Fgdb.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -55,7 +55,7 @@ pub fn get_or_insert_gdb_debug_scripts_section_global<'ll>(cx: &CodegenCx<'ll, '\n             // The initial byte `4` instructs GDB that the following pretty printer\n             // is defined inline as opposed to in a standalone file.\n             section_contents.extend_from_slice(b\"\\x04\");\n-            let vis_name = format!(\"pretty-printer-{}-{}\\n\", crate_name.as_str(), index);\n+            let vis_name = format!(\"pretty-printer-{}-{}\\n\", crate_name, index);\n             section_contents.extend_from_slice(vis_name.as_bytes());\n             section_contents.extend_from_slice(&visualizer.src);\n "}, {"sha": "9a2ab3e32248bfda7c966720cc25cabb6de2bda4", "filename": "compiler/rustc_infer/src/infer/error_reporting/nice_region_error/different_lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_infer%2Fsrc%2Finfer%2Ferror_reporting%2Fnice_region_error%2Fdifferent_lifetimes.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -228,7 +228,7 @@ pub fn suggest_adding_lifetime_params<'tcx>(\n     if is_impl {\n         sugg.push_str(\" and update trait if needed\");\n     }\n-    err.multipart_suggestion(sugg.as_str(), suggestions, Applicability::MaybeIncorrect);\n+    err.multipart_suggestion(sugg, suggestions, Applicability::MaybeIncorrect);\n \n     true\n }"}, {"sha": "7381019a620160ff782f0eb05e9e5d2593b35ba1", "filename": "compiler/rustc_passes/src/entry.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_passes%2Fsrc%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_passes%2Fsrc%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fentry.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -77,7 +77,7 @@ fn err_if_attr_found(ctxt: &EntryContext<'_>, attrs: &[Attribute], sym: Symbol)\n             .sess\n             .struct_span_err(\n                 attr.span,\n-                &format!(\"`{}` attribute can only be used on functions\", sym.as_str()),\n+                &format!(\"`{}` attribute can only be used on functions\", sym),\n             )\n             .emit();\n     }"}, {"sha": "cc3c74d4276ff8143f09e4d94805778b72589565", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -1630,7 +1630,7 @@ impl<'a> Resolver<'a> {\n                     \"{}{} `{}` defined here\",\n                     prefix,\n                     suggestion.res.descr(),\n-                    suggestion.candidate.as_str(),\n+                    suggestion.candidate,\n                 ),\n             );\n         }"}, {"sha": "c82fd07035e03e4b10c86412a97cd13001c06147", "filename": "compiler/rustc_resolve/src/late/diagnostics.rs", "status": "modified", "additions": 13, "deletions": 8, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -80,7 +80,7 @@ impl ForLifetimeSpanType {\n         }\n     }\n \n-    pub(crate) fn suggestion(&self, sugg: &str) -> String {\n+    pub(crate) fn suggestion(&self, sugg: impl std::fmt::Display) -> String {\n         match self {\n             Self::BoundEmpty | Self::TypeEmpty => format!(\"for<{}> \", sugg),\n             Self::BoundTail | Self::TypeTail => format!(\", {}\", sugg),\n@@ -2311,8 +2311,8 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n \n         let suggest_existing =\n             |err: &mut Diagnostic,\n-             name: &str,\n-             formatters: Vec<Option<Box<dyn Fn(&str) -> String>>>| {\n+             name: Symbol,\n+             formatters: Vec<Option<Box<dyn Fn(Symbol) -> String>>>| {\n                 if let Some(MissingLifetimeSpot::HigherRanked { span: for_span, span_type }) =\n                     self.missing_named_lifetime_spots.iter().rev().next()\n                 {\n@@ -2332,7 +2332,8 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n                     // If all single char lifetime names are present, we wrap around and double the chars.\n                     let lt_name = (1..)\n                         .flat_map(a_to_z_repeat_n)\n-                        .find(|lt| !lifetime_names.contains(&Symbol::intern(&lt)))\n+                        .map(|lt| Symbol::intern(&lt))\n+                        .find(|lt| !lifetime_names.contains(lt))\n                         .unwrap();\n                     let msg = format!(\n                         \"consider making the {} lifetime-generic with a new `{}` lifetime\",\n@@ -2359,7 +2360,7 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n                     introduce_suggestion.push((*for_span, for_sugg));\n                     for ((span, _), formatter) in spans_with_counts.iter().zip(formatters.iter()) {\n                         if let Some(formatter) = formatter {\n-                            introduce_suggestion.push((*span, formatter(&lt_name)));\n+                            introduce_suggestion.push((*span, formatter(lt_name)));\n                         }\n                     }\n                     err.multipart_suggestion_verbose(\n@@ -2582,15 +2583,19 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n         let lifetime_names: Vec<_> = lifetime_names.iter().collect();\n         match &lifetime_names[..] {\n             [name] => {\n-                let mut suggs: Vec<Option<Box<dyn Fn(&str) -> String>>> = Vec::new();\n+                let mut suggs: Vec<Option<Box<dyn Fn(Symbol) -> String>>> = Vec::new();\n                 for (snippet, (_, count)) in snippets.iter().zip(spans_with_counts.iter().copied())\n                 {\n                     suggs.push(match snippet.as_deref() {\n                         Some(\"&\") => Some(Box::new(|name| format!(\"&{} \", name))),\n                         Some(\"'_\") => Some(Box::new(|n| n.to_string())),\n                         Some(\"\") => Some(Box::new(move |n| format!(\"{}, \", n).repeat(count))),\n                         Some(\"<\") => Some(Box::new(move |n| {\n-                            std::iter::repeat(n).take(count).collect::<Vec<_>>().join(\", \")\n+                            std::iter::repeat(n)\n+                                .take(count)\n+                                .map(|n| n.to_string())\n+                                .collect::<Vec<_>>()\n+                                .join(\", \")\n                         })),\n                         Some(snippet) if !snippet.ends_with('>') => Some(Box::new(move |name| {\n                             format!(\n@@ -2605,7 +2610,7 @@ impl<'tcx> LifetimeContext<'_, 'tcx> {\n                         _ => None,\n                     });\n                 }\n-                suggest_existing(err, name.as_str(), suggs);\n+                suggest_existing(err, **name, suggs);\n             }\n             [] => {\n                 let mut suggs = Vec::new();"}, {"sha": "54dd15270a136cd48b1b49dc36009cf82fe19c58", "filename": "compiler/rustc_resolve/src/macros.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fmacros.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -325,7 +325,7 @@ impl<'a> ResolverExpand for Resolver<'a> {\n                 UNUSED_MACROS,\n                 node_id,\n                 ident.span,\n-                &format!(\"unused macro definition: `{}`\", ident.as_str()),\n+                &format!(\"unused macro definition: `{}`\", ident.name),\n             );\n         }\n         for (&(def_id, arm_i), &(ident, rule_span)) in self.unused_macro_rules.iter() {\n@@ -341,7 +341,7 @@ impl<'a> ResolverExpand for Resolver<'a> {\n                 &format!(\n                     \"{} rule of macro `{}` is never used\",\n                     crate::diagnostics::ordinalize(arm_i + 1),\n-                    ident.as_str()\n+                    ident.name\n                 ),\n             );\n         }"}, {"sha": "5e26809142d7c86d567a10d77650e82e9420a152", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -257,6 +257,7 @@ symbols! {\n         Result,\n         Return,\n         Right,\n+        Rust,\n         RustcDecodable,\n         RustcEncodable,\n         Send,"}, {"sha": "5dcd6e585e89187ecf3b20dcefbcbd86e8ddd31b", "filename": "compiler/rustc_trait_selection/src/traits/error_reporting/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Ferror_reporting%2Fmod.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -474,7 +474,7 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n                         if let Some(ref s) = label {\n                             // If it has a custom `#[rustc_on_unimplemented]`\n                             // error message, let's display it as the label!\n-                            err.span_label(span, s.as_str());\n+                            err.span_label(span, s);\n                             if !matches!(trait_ref.skip_binder().self_ty().kind(), ty::Param(_)) {\n                                 // When the self type is a type param We don't need to \"the trait\n                                 // `std::marker::Sized` is not implemented for `T`\" as we will point\n@@ -531,7 +531,7 @@ impl<'a, 'tcx> InferCtxtExt<'tcx> for InferCtxt<'a, 'tcx> {\n                             let enclosing_scope_span =\n                                 tcx.hir().span_with_body(tcx.hir().local_def_id_to_hir_id(body));\n \n-                            err.span_label(enclosing_scope_span, s.as_str());\n+                            err.span_label(enclosing_scope_span, s);\n                         }\n \n                         self.suggest_floating_point_literal(&obligation, &mut err, &trait_ref);"}, {"sha": "09808ce0dda856d1358e1d7625f73116c57ccdfc", "filename": "compiler/rustc_typeck/src/check/_match.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2F_match.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -259,7 +259,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n             &cause,\n             &mut |err| {\n                 if let Some((span, msg)) = &ret_reason {\n-                    err.span_label(*span, msg.as_str());\n+                    err.span_label(*span, msg);\n                 } else if let ExprKind::Block(block, _) = &then_expr.kind\n                     && let Some(expr) = &block.expr\n                 {"}, {"sha": "b054d94aa334e214b2fa22fec38b19c1aa863cd5", "filename": "compiler/rustc_typeck/src/check/op.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a22934bea1d02870cda58eb6297ff9332fcc2104/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fop.rs?ref=a22934bea1d02870cda58eb6297ff9332fcc2104", "patch": "@@ -395,8 +395,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                                 false,\n                             ),\n                         };\n-                        let mut err =\n-                            struct_span_err!(self.tcx.sess, op.span, E0369, \"{}\", message.as_str());\n+                        let mut err = struct_span_err!(self.tcx.sess, op.span, E0369, \"{message}\");\n                         if !lhs_expr.span.eq(&rhs_expr.span) {\n                             self.add_type_neq_err_label(\n                                 &mut err,"}]}