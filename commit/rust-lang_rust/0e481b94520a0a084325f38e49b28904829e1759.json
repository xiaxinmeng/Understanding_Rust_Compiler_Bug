{"sha": "0e481b94520a0a084325f38e49b28904829e1759", "node_id": "C_kwDOAAsO6NoAKDBlNDgxYjk0NTIwYTBhMDg0MzI1ZjM4ZTQ5YjI4OTA0ODI5ZTE3NTk", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2021-10-06T07:12:38Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2021-10-06T07:12:38Z"}, "message": "Return to generating mod declarations in lib.rs", "tree": {"sha": "72afdf8013cdd72b662fc4188361f534a60d35ce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/72afdf8013cdd72b662fc4188361f534a60d35ce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e481b94520a0a084325f38e49b28904829e1759", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e481b94520a0a084325f38e49b28904829e1759", "html_url": "https://github.com/rust-lang/rust/commit/0e481b94520a0a084325f38e49b28904829e1759", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e481b94520a0a084325f38e49b28904829e1759/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b9dedf395918275aa09710d2f51f62a1285bc035", "url": "https://api.github.com/repos/rust-lang/rust/commits/b9dedf395918275aa09710d2f51f62a1285bc035", "html_url": "https://github.com/rust-lang/rust/commit/b9dedf395918275aa09710d2f51f62a1285bc035"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "6ec812909f2b59713f03058c79a4bca8196d5128", "filename": "clippy_dev/src/update_lints.rs", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/0e481b94520a0a084325f38e49b28904829e1759/clippy_dev%2Fsrc%2Fupdate_lints.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e481b94520a0a084325f38e49b28904829e1759/clippy_dev%2Fsrc%2Fupdate_lints.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fupdate_lints.rs?ref=0e481b94520a0a084325f38e49b28904829e1759", "patch": "@@ -98,6 +98,17 @@ pub fn run(update_mode: UpdateMode) {\n     )\n     .changed;\n \n+    // This has to be in lib.rs, otherwise rustfmt doesn't work\n+    file_change |= replace_region_in_file(\n+        Path::new(\"clippy_lints/src/lib.rs\"),\n+        \"begin lints modules\",\n+        \"end lints modules\",\n+        false,\n+        update_mode == UpdateMode::Change,\n+        || vec![gen_modules_list(usable_lints.iter())],\n+    )\n+    .changed;\n+\n     if file_change && update_mode == UpdateMode::Check {\n         exit_with_failure();\n     }\n@@ -112,11 +123,6 @@ pub fn run(update_mode: UpdateMode) {\n         update_mode,\n         &gen_deprecated(deprecated_lints.iter()),\n     );\n-    process_file(\n-        \"clippy_lints/src/lib.mods.rs\",\n-        update_mode,\n-        &gen_modules_list(usable_lints.iter()),\n-    );\n \n     let all_group_lints = usable_lints.iter().filter(|l| {\n         matches!("}]}