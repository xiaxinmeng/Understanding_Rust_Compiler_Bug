{"sha": "2226977a875c149effeb7d6b85bce5a5ba0c440c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIyMjY5NzdhODc1YzE0OWVmZmViN2Q2Yjg1YmNlNWE1YmEwYzQ0MGM=", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-09-02T03:20:46Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-09-02T03:20:46Z"}, "message": "Ensure suggestion is in its own diagnostic window\n\nFor two reasons:\n\n1. Now that the suggestion span has been corrected, the output is a bit\n   cluttered and hard to read. Putting the suggestion its own window\n   creates more space.\n\n2. It's easier to see what's being suggested, since now the version\n   after the suggestion is applied is shown.", "tree": {"sha": "d8ae1151fa4effc048a605361dfd2a643ad1d45d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8ae1151fa4effc048a605361dfd2a643ad1d45d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2226977a875c149effeb7d6b85bce5a5ba0c440c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2226977a875c149effeb7d6b85bce5a5ba0c440c", "html_url": "https://github.com/rust-lang/rust/commit/2226977a875c149effeb7d6b85bce5a5ba0c440c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2226977a875c149effeb7d6b85bce5a5ba0c440c/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2b13ba46694b73cf2cd64b3a18c3abd55983f2b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2b13ba46694b73cf2cd64b3a18c3abd55983f2b", "html_url": "https://github.com/rust-lang/rust/commit/d2b13ba46694b73cf2cd64b3a18c3abd55983f2b"}], "stats": {"total": 114, "additions": 68, "deletions": 46}, "files": [{"sha": "0a08988069c011548b051a9a4bb6b95bb3f8a452", "filename": "compiler/rustc_typeck/src/check/expr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2226977a875c149effeb7d6b85bce5a5ba0c440c/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2226977a875c149effeb7d6b85bce5a5ba0c440c/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fexpr.rs?ref=2226977a875c149effeb7d6b85bce5a5ba0c440c", "patch": "@@ -1514,7 +1514,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                         ),\n                     );\n                     err.span_label(field.ident.span, \"field does not exist\");\n-                    err.span_suggestion(\n+                    err.span_suggestion_verbose(\n                         expr_span,\n                         &format!(\n                             \"`{adt}::{variant}` is a tuple {kind_name}, use the appropriate syntax\",\n@@ -1532,7 +1532,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                 _ => {\n                     err.span_label(variant.ident.span, format!(\"`{adt}` defined here\", adt = ty));\n                     err.span_label(field.ident.span, \"field does not exist\");\n-                    err.span_suggestion(\n+                    err.span_suggestion_verbose(\n                         expr_span,\n                         &format!(\n                             \"`{adt}` is a tuple {kind_name}, use the appropriate syntax\","}, {"sha": "2a1f1819c33cd8e796d82ee001f82de181b563f5", "filename": "src/test/ui/issues/issue-4736.stderr", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fissues%2Fissue-4736.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fissues%2Fissue-4736.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-4736.stderr?ref=2226977a875c149effeb7d6b85bce5a5ba0c440c", "patch": "@@ -5,10 +5,12 @@ LL | struct NonCopyable(());\n    |        ----------- `NonCopyable` defined here\n ...\n LL |     let z = NonCopyable{ p: () };\n-   |             -------------^------\n-   |             |            |\n-   |             |            field does not exist\n-   |             help: `NonCopyable` is a tuple struct, use the appropriate syntax: `NonCopyable(/* fields */)`\n+   |                          ^ field does not exist\n+   |\n+help: `NonCopyable` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let z = NonCopyable(/* fields */);\n+   |             ~~~~~~~~~~~~~~~~~~~~~~~~~\n \n error: aborting due to previous error\n "}, {"sha": "38e46683b0823d59449583d37c6ebd528f300972", "filename": "src/test/ui/issues/issue-80607.stderr", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fissues%2Fissue-80607.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fissues%2Fissue-80607.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-80607.stderr?ref=2226977a875c149effeb7d6b85bce5a5ba0c440c", "patch": "@@ -5,10 +5,12 @@ LL |     V1(i32),\n    |     -- `Enum::V1` defined here\n ...\n LL |     Enum::V1 { x }\n-   |     -----------^--\n-   |     |          |\n-   |     |          field does not exist\n-   |     help: `Enum::V1` is a tuple variant, use the appropriate syntax: `Enum::V1(/* fields */)`\n+   |                ^ field does not exist\n+   |\n+help: `Enum::V1` is a tuple variant, use the appropriate syntax\n+   |\n+LL |     Enum::V1(/* fields */)\n+   |     ~~~~~~~~~~~~~~~~~~~~~~\n \n error: aborting due to previous error\n "}, {"sha": "b328fbe2cfb87a90c625b488bf7bb865bdb838b9", "filename": "src/test/ui/numeric/numeric-fields.stderr", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fnumeric%2Fnumeric-fields.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fnumeric%2Fnumeric-fields.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnumeric%2Fnumeric-fields.stderr?ref=2226977a875c149effeb7d6b85bce5a5ba0c440c", "patch": "@@ -5,10 +5,12 @@ LL | struct S(u8, u16);\n    |        - `S` defined here\n ...\n LL |     let s = S{0b1: 10, 0: 11};\n-   |             --^^^------------\n-   |             | |\n-   |             | field does not exist\n-   |             help: `S` is a tuple struct, use the appropriate syntax: `S(/* fields */)`\n+   |               ^^^ field does not exist\n+   |\n+help: `S` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let s = S(/* fields */);\n+   |             ~~~~~~~~~~~~~~~\n \n error[E0026]: struct `S` does not have a field named `0x1`\n   --> $DIR/numeric-fields.rs:7:17"}, {"sha": "948f09fc3fab745042fb20dba24962208791bc70", "filename": "src/test/ui/suggestions/nested-non-tuple-tuple-struct.stderr", "status": "modified", "additions": 48, "deletions": 32, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fsuggestions%2Fnested-non-tuple-tuple-struct.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/2226977a875c149effeb7d6b85bce5a5ba0c440c/src%2Ftest%2Fui%2Fsuggestions%2Fnested-non-tuple-tuple-struct.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fnested-non-tuple-tuple-struct.stderr?ref=2226977a875c149effeb7d6b85bce5a5ba0c440c", "patch": "@@ -5,10 +5,12 @@ LL | pub struct S(f32, f32);\n    |            - `S` defined here\n ...\n LL |     let _x = (S { x: 1.0, y: 2.0 }, S { x: 3.0, y: 4.0 });\n-   |               ----^---------------\n-   |               |   |\n-   |               |   field does not exist\n-   |               help: `S` is a tuple struct, use the appropriate syntax: `S(/* fields */)`\n+   |                   ^ field does not exist\n+   |\n+help: `S` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let _x = (S(/* fields */), S { x: 3.0, y: 4.0 });\n+   |               ~~~~~~~~~~~~~~~\n \n error[E0560]: struct `S` has no field named `y`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:8:27\n@@ -17,10 +19,12 @@ LL | pub struct S(f32, f32);\n    |            - `S` defined here\n ...\n LL |     let _x = (S { x: 1.0, y: 2.0 }, S { x: 3.0, y: 4.0 });\n-   |               ------------^-------\n-   |               |           |\n-   |               |           field does not exist\n-   |               help: `S` is a tuple struct, use the appropriate syntax: `S(/* fields */)`\n+   |                           ^ field does not exist\n+   |\n+help: `S` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let _x = (S(/* fields */), S { x: 3.0, y: 4.0 });\n+   |               ~~~~~~~~~~~~~~~\n \n error[E0560]: struct `S` has no field named `x`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:8:41\n@@ -29,10 +33,12 @@ LL | pub struct S(f32, f32);\n    |            - `S` defined here\n ...\n LL |     let _x = (S { x: 1.0, y: 2.0 }, S { x: 3.0, y: 4.0 });\n-   |                                     ----^---------------\n-   |                                     |   |\n-   |                                     |   field does not exist\n-   |                                     help: `S` is a tuple struct, use the appropriate syntax: `S(/* fields */)`\n+   |                                         ^ field does not exist\n+   |\n+help: `S` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let _x = (S { x: 1.0, y: 2.0 }, S(/* fields */));\n+   |                                     ~~~~~~~~~~~~~~~\n \n error[E0560]: struct `S` has no field named `y`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:8:49\n@@ -41,10 +47,12 @@ LL | pub struct S(f32, f32);\n    |            - `S` defined here\n ...\n LL |     let _x = (S { x: 1.0, y: 2.0 }, S { x: 3.0, y: 4.0 });\n-   |                                     ------------^-------\n-   |                                     |           |\n-   |                                     |           field does not exist\n-   |                                     help: `S` is a tuple struct, use the appropriate syntax: `S(/* fields */)`\n+   |                                                 ^ field does not exist\n+   |\n+help: `S` is a tuple struct, use the appropriate syntax\n+   |\n+LL |     let _x = (S { x: 1.0, y: 2.0 }, S(/* fields */));\n+   |                                     ~~~~~~~~~~~~~~~\n \n error[E0559]: variant `E::V` has no field named `x`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:13:22\n@@ -53,10 +61,12 @@ LL |     V(f32, f32),\n    |     - `E::V` defined here\n ...\n LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V { x: 3.0, y: 4.0 });\n-   |               -------^---------------\n-   |               |      |\n-   |               |      field does not exist\n-   |               help: `E::V` is a tuple variant, use the appropriate syntax: `E::V(/* fields */)`\n+   |                      ^ field does not exist\n+   |\n+help: `E::V` is a tuple variant, use the appropriate syntax\n+   |\n+LL |     let _y = (E::V(/* fields */), E::V { x: 3.0, y: 4.0 });\n+   |               ~~~~~~~~~~~~~~~~~~\n \n error[E0559]: variant `E::V` has no field named `y`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:13:30\n@@ -65,10 +75,12 @@ LL |     V(f32, f32),\n    |     - `E::V` defined here\n ...\n LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V { x: 3.0, y: 4.0 });\n-   |               ---------------^-------\n-   |               |              |\n-   |               |              field does not exist\n-   |               help: `E::V` is a tuple variant, use the appropriate syntax: `E::V(/* fields */)`\n+   |                              ^ field does not exist\n+   |\n+help: `E::V` is a tuple variant, use the appropriate syntax\n+   |\n+LL |     let _y = (E::V(/* fields */), E::V { x: 3.0, y: 4.0 });\n+   |               ~~~~~~~~~~~~~~~~~~\n \n error[E0559]: variant `E::V` has no field named `x`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:13:47\n@@ -77,10 +89,12 @@ LL |     V(f32, f32),\n    |     - `E::V` defined here\n ...\n LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V { x: 3.0, y: 4.0 });\n-   |                                        -------^---------------\n-   |                                        |      |\n-   |                                        |      field does not exist\n-   |                                        help: `E::V` is a tuple variant, use the appropriate syntax: `E::V(/* fields */)`\n+   |                                               ^ field does not exist\n+   |\n+help: `E::V` is a tuple variant, use the appropriate syntax\n+   |\n+LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V(/* fields */));\n+   |                                        ~~~~~~~~~~~~~~~~~~\n \n error[E0559]: variant `E::V` has no field named `y`\n   --> $DIR/nested-non-tuple-tuple-struct.rs:13:55\n@@ -89,10 +103,12 @@ LL |     V(f32, f32),\n    |     - `E::V` defined here\n ...\n LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V { x: 3.0, y: 4.0 });\n-   |                                        ---------------^-------\n-   |                                        |              |\n-   |                                        |              field does not exist\n-   |                                        help: `E::V` is a tuple variant, use the appropriate syntax: `E::V(/* fields */)`\n+   |                                                       ^ field does not exist\n+   |\n+help: `E::V` is a tuple variant, use the appropriate syntax\n+   |\n+LL |     let _y = (E::V { x: 1.0, y: 2.0 }, E::V(/* fields */));\n+   |                                        ~~~~~~~~~~~~~~~~~~\n \n error: aborting due to 8 previous errors\n "}]}